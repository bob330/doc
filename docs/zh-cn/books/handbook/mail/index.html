<!doctype html><html class=theme-light lang=zh-cn><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/><title>第 29 章 电子邮件 | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="第 29 章 电子邮件"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="zh-cn"><meta property="og:url" content="http://172.16.201.134:1313/zh-cn/books/handbook/mail/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/zh-cn\/books\/handbook\/mail\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/zh-cn>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books>Books</a></li><li><a href=http://172.16.201.134:1313/zh-cn/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/zh-cn/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=zh-cn>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/>前言</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/#preface-audience>预期的读者</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/#preface-changes-from3>相对于第三版的改动</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/#preface-changes-from2>相对于第二版的改动 (2004)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/#preface-changes>相对于第一版的改变 (2001)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/#preface-overview>本手册的组织</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/#preface-conv>本书中使用的一些约定</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/preface/#preface-acknowledgements>致谢</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/parti/>部分 I. 起步</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/introduction/>第 1 章 介绍</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/introduction/#introduction-synopsis>1.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/introduction/#nutshell>1.2. 欢迎来到 FreeBSD 的世界!</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/introduction/#history>1.3. 关于 FreeBSD 项目</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/>第 2 章 安装 FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-synopsis>2.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-hardware>2.2. 硬件需求</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-pre>2.3. 安装前的准备工作</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-start>2.4. 开始安装</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#using-sysinstall>2.5. 介绍 Sysinstall</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-steps>2.6. 分配磁盘空间</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-choosing>2.7. 选择要安装的软件包</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-media>2.8. 选择您要使用的安装介质</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-final-warning>2.9. 安装确认</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-post>2.10. 安装后的配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-trouble>2.11. 常见问题</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-advanced>2.12. 高级安装指南</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/install/#install-diff-media>2.13. 准备您自己的安装介质</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/>第 3 章 安装 FreeBSD（适用于 9.x 及以后版本）</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-synopsis>3.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-hardware>3.2. 硬件需求</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-pre>3.3. 安装前的准备工作</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-start>3.4. 开始安装</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#using-bsdinstall>3.5. 介绍 bsdinstall</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-netinstall>3.6. 通过网络安装</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-partitioning>3.7. 分配磁盘空间</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-final-warning>3.8. 安装确认</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-post>3.9. 安装后的配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bsdinstall/#bsdinstall-install-trouble>3.10. 故障排除</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/>第 4 章 UNIX 基础</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#basics-synopsis>4.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#consoles>4.2. 虚拟控制台和终端</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#permissions>4.3. 权限</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#dirstructure>4.4. 目录架构</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#disk-organization>4.5. 磁盘组织</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#mount-unmount>4.6. 文件系统的挂接和卸下</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#basics-processes>4.7. 进程</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#basics-daemons>4.8. 守护进程，信号和杀死进程</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#shells>4.9. Shells</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#editors>4.10. 文本编辑器</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#basics-devices>4.11. 设备和设备节点</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#binary-formats>4.12. 二进制文件格式</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/basics/#basics-more-information>4.13. 取得更多的资讯</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/>第 5 章 安装应用程序: Packages 和 Ports</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/#ports-synopsis>5.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/#ports-overview>5.2. 软件安装预览</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/#ports-finding-applications>5.3. 寻找您要的应用程序</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/#packages-using>5.4. 使用 Package 系统</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/#ports-using>5.5. 使用Ports Collection</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/#ports-nextsteps>5.6. 安装之后还要做点什么？</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ports/#ports-broken>5.7. 如何处理坏掉的 Ports</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/>第 6 章 X Window 系统</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/#x11-synopsis>6.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/#x-understanding>6.2. 理解 X</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/#x-install>6.3. 安装 X11</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/#x-config>6.4. 配置 X11</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/#x-fonts>6.5. 在 X11 中使用字体</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/#x-xdm>6.6. X 显示管理器</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/x11/#x11-wm>6.7. 桌面环境</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/partii/>部分 II. 常见的任务</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/desktop/>第 7 章 桌面应用</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/desktop/#desktop-synopsis>7.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/desktop/#desktop-browsers>7.2. 浏览器</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/desktop/#desktop-productivity>7.3. 办公、图象处理</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/desktop/#desktop-viewers>7.4. 文档查看器</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/desktop/#desktop-finance>7.5. 财务</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/desktop/#desktop-summary>7.6. 总结</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/multimedia/>第 8 章 多媒体</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/multimedia/#multimedia-synopsis>8.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/multimedia/#sound-setup>8.2. 安装声卡</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/multimedia/#sound-mp3>8.3. MP3音频</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/multimedia/#video-playback>8.4. 视频回放</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/multimedia/#tvcard>8.5. 安装电视卡</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/multimedia/#scanners>8.6. 图象扫描仪</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/>第 9 章 配置FreeBSD的内核</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. 为什么需要建立定制的内核?</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/#kernelconfig-devices>9.3. 发现系统硬件</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/#kernelconfig-modules>9.4. 内核驱动，子系统和模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/#kernelconfig-building>9.5. 建立并安装一个定制的内核</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/#kernelconfig-config>9.6. 配置文件</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. 如果出现问题怎么办</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/>第 10 章 打印</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/#printing-synopsis>10.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/#printing-intro-spooler>10.2. 介绍</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/#printing-intro-setup>10.3. 基本设置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/#printing-advanced>10.4. 高级设置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/#printing-using>10.5. 使用打印机</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/#printing-lpd-alternatives>10.6. 替换标准后台打印</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/printing/#printing-troubleshooting>10.7. 疑难问题</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/linuxemu/>第 11 章 Linux® 二进制兼容模式</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/linuxemu/#linuxemu-synopsis>11.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. 配置 Linux® 二进制兼容模式</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/linuxemu/#linuxemu-advanced>11.3. 高级主题</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/partiii/>部分 III. 系统管理</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/>第 12 章 设置和调整</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#config-synopsis>12.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-initial>12.2. 初步配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-core-configuration>12.3. 核心配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-appconfig>12.4. 应用程序配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-starting-services>12.5. 启动服务</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-cron>12.6. 配置 <code>cron</code></a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-rcd>12.7. 在 FreeBSD 中使用 rc</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#config-network-setup>12.8. 设置网卡</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-virtual-hosts>12.9. 虚拟主机</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-configfiles>12.10. 配置文件</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-sysctl>12.11. 用 sysctl 进行调整</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-disk>12.12. 调整磁盘</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#configtuning-kernel-limits>12.13. 调整内核限制</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#adding-swap-space>12.14. 添加交换空间</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#acpi-overview>12.15. 电源和资源管理</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/config/#ACPI-debug>12.16. 使用和调试 FreeBSD ACPI</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/>第 13 章 FreeBSD 引导过程</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/#boot-synopsis>13.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/#boot-introduction>13.2. 引导问题</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/#boot-blocks>13.3. 引导管理器和各引导阶段</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/#boot-kernel>13.4. 内核在引导时的交互</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/#device-hints>13.5. Device Hints</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/#boot-init>13.6. Init：进程控制及初始化</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/boot/#boot-shutdown>13.7. 关机 (shutdown) 过程</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/>第 14 章 用户和基本的帐户管理</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-synopsis>14.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-introduction>14.2. 介绍</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-superuser>14.3. 超级用户帐户</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-system>14.4. 系统帐户</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-user>14.5. 用户帐户</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-modifying>14.6. 修改帐户</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-limiting>14.7. 限制用户使用系统资源</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/users/#users-groups>14.8. 组</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/>第 15 章 安全</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#security-synopsis>15.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#security-intro>15.2. 介绍</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#securing-freebsd>15.3. 确保 FreeBSD 的安全</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#crypt>15.4. DES、 Blowfish、 MD5， 以及 Crypt</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#one-time-passwords>15.5. 一次性口令</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#kerberos5>15.7. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#openssl>15.8. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#ipsec>15.9. IPsec 上的 VPN</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#openssh>15.10. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#fs-acl>15.11. 文件系统访问控制表</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#security-portaudit>15.12. 监视第三方安全问题</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#security-advisories>15.13. FreeBSD 安全公告</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/security/#security-accounting>15.14. 进程记帐</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/jails/>第 16 章 Jails</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/jails/#jails-synopsis>16.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/jails/#jails-terms>16.2. 与 Jail 相关的一些术语</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/jails/#jails-intro>16.3. 介绍</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/jails/#jails-build>16.4. 建立和控制 jail</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/jails/#jails-tuning>16.5. 微调和管理</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/jails/#jails-application>16.6. Jail 的应用</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/>第 17 章 强制访问控制</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-synopsis>17.1. 概要</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-inline-glossary>17.2. 本章出现的重要术语</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-initial>17.3. 关于 MAC 的说明</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-understandlabel>17.4. 理解 MAC 标签</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-planning>17.5. 规划安全配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-modules>17.6. 模块配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-seeotheruids>17.7. MAC seeotheruids 模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-bsdextended>17.8. MAC bsdextended 模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-ifoff>17.9. MAC ifoff 模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-portacl>17.10. MAC portacl 模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-partition>17.11. MAC partition (分区) 模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-mls>17.12. MAC 多级 (Multi-Level) 安全模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-biba>17.13. MAC Biba 模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-lomac>17.14. MAC LOMAC 模块</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-implementing>17.15. MAC Jail 中的 Nagios</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-userlocked>17.16. User Lock Down</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mac/#mac-troubleshoot>17.17. MAC 框架的故障排除</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/audit/>第 18 章 安全事件审计</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/audit/#audit-synopsis>18.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/audit/#audit-inline-glossary>18.2. 本章中的一些关键术语</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/audit/#audit-install>18.3. 安装审计支持</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/audit/#audit-config>18.4. 对审计进行配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/audit/#audit-administration>18.5. 管理审计子系统</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/>第 19 章 存储</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#disks-synopsis>19.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#disks-naming>19.2. 设备命名</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#disks-adding>19.3. 添加磁盘</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#raid>19.4. RAID</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#usb-disks>19.5. USB 存储设备</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#creating-cds>19.6. 创建和使用光学介质(CD)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#creating-dvds>19.7. 创建和使用光学介质(DVD)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#floppies>19.8. 创建和使用软盘</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#backups-tapebackups>19.9. 用磁带机备份</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#backups-floppybackups>19.10. 用软盘备份</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#backup-strategies>19.11. 备份策略</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#backup-basics>19.12. 备份程序</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#disks-virtual>19.13. 网络、内存和 和以及映像文件为介质的虚拟文件系统</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#snapshots>19.14. 文件系统快照</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#quotas>19.15. 文件系统配额</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#disks-encrypting>19.16. 加密磁盘分区</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#swap-encrypting>19.17. 对交换区进行加密</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/disks/#disks-hast>19.18. 高可用性存储 (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/>第 20 章 GEOM: 模块化磁盘变换框架</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#GEOM-synopsis>20.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#GEOM-intro>20.2. GEOM 介绍</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#GEOM-striping>20.3. RAID0 - 条带</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#GEOM-mirror>20.4. RAID1 - 镜像</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#GEOM-raid3>20.5. RAID3 - 使用专用校验设备的字节级条带</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#geom-ggate>20.6. GEOM Gate 网络设备</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#geom-glabel>20.7. 为磁盘设备添加卷标</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/geom/#geom-gjournal>20.8. 通过 GEOM 实现 UFS 日志</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/filesystems/>第 21 章 文件系统 Support</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/filesystems/#filesystems-synopsis>21.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/filesystems/#filesystems-zfs>21.2. Z 文件系统 (ZFS)</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/>第 22 章 Vinum 卷管理程序</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-synopsis>22.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-intro>22.2. 磁盘容量太小</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-access-bottlenecks>22.3. 访问瓶颈</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-data-integrity>22.4. 数据的完整性</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-objects>22.5. Vinum 目标</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-examples>22.6. 一些例子</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-object-naming>22.7. 对象命名</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-config>22.8. 配置 Vinum</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/vinum/#vinum-root>22.9. 使用 Vinum 作为根文件系统</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/virtualization/>第 23 章 虚拟化</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/virtualization/#virtualization-synopsis>23.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/virtualization/#virtualization-guest>23.2. 作为客户 OS 的 FreeBSD</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/virtualization/#virtualization-host>23.3. 作为宿主 OS 的 FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/l10n/>第 24 章 本地化－I18N/L10N使用和设置</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/l10n/#l10n-synopsis>24.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/l10n/#l10n-basics>24.2. 基础知识</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/l10n/#using-localization>24.3. 使用本地化语言</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/l10n/#l10n-compiling>24.4. 编译I18N程序</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/l10n/#lang-setup>24.5. 本地化FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/>第 25 章 更新与升级 FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#updating-upgrading-synopsis>25.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>25.2. FreeBSD 更新</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#updating-upgrading-portsnap>25.3. Portsnap： 一个 Ports Collection 更新工具</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#updating-upgrading-documentation>25.4. 更新系统附带的文档</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#current-stable>25.5. 追踪开发分支</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#synching>25.6. 同步您的源码</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#makeworld>25.7. 重新编译 "world"</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#make-delete-old>25.8. 删除过时的文件、 目录和函数库</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/cutting-edge/#small-lan>25.9. 跟踪多台机器</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/dtrace/>第 26 章 DTrace</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/dtrace/#dtrace-synopsis>26.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/dtrace/#dtrace-implementation>26.2. 实现上的差异</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/dtrace/#dtrace-enable>26.3. 启用 DTrace 支持</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/dtrace/#dtrace-using>26.4. 使用 DTrace</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/dtrace/#dtrace-language>26.5. D 语言</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/partiv/>部分 IV. 网络通讯</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/serialcomms/>第 27 章 串口通讯</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/serialcomms/#serial-synopsis>27.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/serialcomms/#serial>27.2. 介绍</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/serialcomms/#term>27.3. 终端</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/serialcomms/#dialup>27.4. 拨入服务</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/serialcomms/#dialout>27.5. 拨出设备</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/serialcomms/#serialconsole-setup>27.6. 设置串口控制台</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/>第 28 章 PPP 和 SLIP</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>28.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/#userppp>28.2. 使用用户级 PPP</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/#ppp>28.3. 使用内核级PPP</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/#ppp-troubleshoot>28.4. PPP 连接故障排除</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/#pppoe>28.5. 使用基于以太网的PPP(PPPoE)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/#pppoa>28.6. 使用 ATM 上的 PPP (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip/#slip>28.7. 使用SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle checked>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/>第 29 章 电子邮件</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-synopsis>29.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-using>29.2. 使用电子邮件</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#sendmail>29.3. sendmail 配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-changingmta>29.4. 改变您的邮件传输代理程序</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-trouble>29.5. 疑难解答</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-advanced>29.6. 高级主题</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#SMTP-UUCP>29.7. SMTP 与 UUCP</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#outgoing-only>29.8. 只发送邮件的配置</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#SMTP-dialup>29.9. 拨号连接时使用邮件传送</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#SMTP-Auth>29.10. SMTP 验证</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-agents>29.11. 邮件用户代理</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-fetchmail>29.12. 使用 fetchmail</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mail/#mail-procmail>29.13. 使用 procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/>第 30 章 网络服务器</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-servers-synopsis>30.1. 概要</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-inetd>30.2. inetd"超级服务器"</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-nfs>30.3. 网络文件系统（NFS）</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-nis>30.4. 网络信息服务 (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-dhcp>30.5. 网络自动配置 (DHCP)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-dns>30.6. 域名系统 (DNS)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-apache>30.7. Apache HTTP 服务器</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-ftp>30.8. 文件传输协议 (FTP)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-samba>30.9. 为 Microsoft® Windows® 客户机提供文件和打印服务 (Samba)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-ntp>30.10. 通过 NTP 进行时钟同步</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers/#network-syslogd>30.11. 使用 <code>syslogd</code> 记录远程主机的日志</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/firewalls/>第 31 章 防火墙</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/firewalls/#firewalls-intro>31.1. 入门</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/firewalls/#firewalls-concepts>31.2. 防火墙的概念</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/firewalls/#firewalls-apps>31.3. 防火墙软件包</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/firewalls/#firewalls-pf>31.4. OpenBSD Packet Filter (PF) 和 ALTQ</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/firewalls/#firewalls-ipf>31.5. IPFILTER (IPF) 防火墙</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/firewalls/#firewalls-ipfw>31.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/>第 32 章 高级网络</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#advanced-networking-synopsis>32.1. 概述</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-routing>32.2. 网关和路由</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-wireless>32.3. 无线网络</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-bluetooth>32.4. 蓝牙</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-bridging>32.5. 桥接</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-aggregation>32.6. 链路聚合与故障转移</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-diskless>32.7. 无盘操作</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-pxe-nfs>32.8. 从 PXE 启动一个 NFS 根文件系统</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-isdn>32.9. ISDN</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-natd>32.10. 网络地址转换</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-plip>32.11. 并口电缆 IP (PLIP)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-ipv6>32.12. IPv6</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#network-atm>32.13. 异步传输模式 (ATM)</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/advanced-networking/#carp>32.14. Common Address Redundancy Protocol (CARP， 共用地址冗余协议)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/partv/>部分 V. 附录</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/>附录 A. 获取 FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#mirrors-cdrom>A.1. CDROM 和 DVD 发行商</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#mirrors-ftp>A.2. FTP 站点</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#anoncvs>A.3. 匿名 CVS</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#ctm>A.4. 使用 CTM</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#cvsup>A.5. 使用 CVSup</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#cvs-tags>A.6. CVS 标签</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#mirrors-afs>A.7. AFS 站点</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/mirrors/#mirrors-rsync>A.8. rsync 站点</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/>附录 B. 参考文献</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-freebsd>B.1. 关于 FreeBSD 的专业书籍与杂志</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-userguides>B.2. 用户指南</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-adminguides>B.3. 管理员指南</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-programmers>B.4. 开发指南</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-osinternals>B.5. 操作系统原理</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-security>B.6. 安全方面的参考文献</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-hardware>B.7. 硬件参考</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-history>B.8. UNIX® 历史</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/bibliography/#bibliography-journals>B.9. 各种期刊</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/eresources/>附录 C. Internet上的资源</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/eresources/#eresources-mail>C.1. 邮件列表</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/eresources/#eresources-news>C.2. Usenet新闻组</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/eresources/#eresources-web>C.3. World Wide Web服务器</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/eresources/#eresources-email>C.4. Email地址</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/zh-cn/books/handbook/pgpkeys/>附录 D. PGP公钥</a><ul><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Officers</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>第 29 章 电子邮件</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#mail-synopsis>29.1. 概述</a></li><li><a href=#mail-using>29.2. 使用电子邮件</a></li><li><a href=#sendmail>29.3. sendmail 配置</a></li><li><a href=#mail-changingmta>29.4. 改变您的邮件传输代理程序</a></li><li><a href=#mail-trouble>29.5. 疑难解答</a></li><li><a href=#mail-advanced>29.6. 高级主题</a></li><li><a href=#SMTP-UUCP>29.7. SMTP 与 UUCP</a></li><li><a href=#outgoing-only>29.8. 只发送邮件的配置</a></li><li><a href=#SMTP-dialup>29.9. 拨号连接时使用邮件传送</a></li><li><a href=#SMTP-Auth>29.10. SMTP 验证</a></li><li><a href=#mail-agents>29.11. 邮件用户代理</a></li><li><a href=#mail-fetchmail>29.12. 使用 fetchmail</a></li><li><a href=#mail-procmail>29.13. 使用 procmail</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=mail-synopsis>29.1. 概述<a class=anchor href=#mail-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>"电子邮件"，或通常所说的 email，是现今使用最广泛的通信方式之一。 本章将对如何在 FreeBSD 上运行邮件服务，以及如何使用 FreeBSD 来收发电子邮件作基本的介绍； 然而，它并不是一份完整的参考手册，实际上，许多需要考虑的重要事项都没有提及。 我们推荐读者阅读 <a href=../bibliography/#bibliography>参考文献</a> 中的参考书籍，以获得对于这部分的全面认识。</p></div><div class=paragraph><p>读完这章，您将了解：</p></div><div class=ulist><ul><li><p>哪些软件与收发电子邮件有关。</p></li><li><p>FreeBSD 下的基本 sendmail 配置文件在哪里。</p></li><li><p>本地和远程邮箱之间的区别。</p></li><li><p>如何阻止垃圾邮件制造者非法地使用您的邮件服务器作为转发中继。</p></li><li><p>如何安装和配置用于替代 sendmail 的其他邮件传输代理。</p></li><li><p>如何处理常见的邮件服务器问题。</p></li><li><p>如何使用 SMTP 和 UUCP。</p></li><li><p>如何设置系统使其只能发送邮件。</p></li><li><p>如何在拨号连接时使用邮件。</p></li><li><p>如何配置 SMTP 验证以增加安全性。</p></li><li><p>如何安装并使用用户邮件代理，如 mutt 来收发邮件。</p></li><li><p>如何从远程的 POP 或 IMAP 服务器上下载邮件。</p></li><li><p>如何在进入的邮件上自动地应用过滤器和规则。</p></li></ul></div><div class=paragraph><p>阅读本章之前，您需要：</p></div><div class=ulist><ul><li><p>正确地配置您的网络连接 (<a href=../advanced-networking/#advanced-networking>高级网络</a>).</p></li><li><p>正确地为您的邮件服务器配置 DNS 信息 (<a href=../network-servers/#network-servers>网络服务</a>).</p></li><li><p>知道如何安装第三方软件 (<a href=../ports/#ports>安装应用程序. Packages 和 Ports</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=mail-using>29.2. 使用电子邮件<a class=anchor href=#mail-using></a></h2><div class=sectionbody><div class=paragraph><p>邮件交换可以分为 5 部分。它们是： <a href=#mail-mua>用户端程序</a>、<a href=#mail-mta>服务端守护进程</a>、<a href=#mail-dns>DNS</a>、<a href=#mail-receive>远程或本地的邮箱</a>、 当然，<a href=#mail-host>还有邮件主机自己</a>。</p></div><div class=sect2><h3 id=mail-mua>29.2.1. 用户端程序<a class=anchor href=#mail-mua></a></h3><div class=paragraph><p>这包括一些基于命令行的程序，例如 mutt、 alpine、elm 和 <code>mail</code>，以及类似 balsa、 xfmail 这样的 GUI 程序。 此外，还有我们更"熟悉的"WWW 浏览器这样的程序。 这些程序简单地通过调用<a href=#mail-mta>服务守护进程</a>把邮件事务交给本地的 <a href=#mail-host>"邮件主机"</a>，或者通过 TCP 把邮件发出去。</p></div></div><div class=sect2><h3 id=mail-mta>29.2.2. 邮件主机上使用的服务程序<a class=anchor href=#mail-mta></a></h3><div class=paragraph><p>FreeBSD 默认情况下采用 sendmail， 但它也支持为数众多的其它邮件服务程序， 这其中包括：</p></div><div class=ulist><ul><li><p>exim;</p></li><li><p>postfix;</p></li><li><p>qmail.</p></li></ul></div><div class=paragraph><p>邮件服务器后台守护程序通常有两个功能 - 接收外面发来的邮件和把邮件传送出去。 但它 <em>不</em> 负责使用类似 POP 或 IMAP 这样的协议来帮您阅读邮件， 也不负责连接到本地的 <span class=filename>mbox</span> 或 Maildir 信箱。 您可能需要其它的 <a href=#mail-receive>服务程序</a> 来完成这些任务。</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>较早版本的 sendmail 有一些严重的安全问题， 他们可能导致攻击者从本地和/或远程操作您的电脑。 您应该确认自己使用的是最新版本以避免这些问题。 另外， 也可以从 <a href=../ports/#ports>FreeBSD Ports Collection</a> 来安装其它的 MTA。</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=mail-dns>29.2.3. Email 和 DNS<a class=anchor href=#mail-dns></a></h3><div class=paragraph><p>域名系统 (DNS) 及其服务程序 <code>named</code> 在email的投递过程当中扮演着很重要的角色。 为了能够从您的站点向其它的站点传递邮件， 服务程序需要通过 DNS 查找接收邮件的远程站点的位置。 类似地， 在远程站点向您的主机投递邮件时也会发生这样的查找。</p></div><div class=paragraph><p>DNS 负责将主机名映射为 IP 地址， 同时， 也需要保存递送邮件时所需要的信息， 这些信息称作 MX 记录。 MX (Mail eXchanger，邮件交换) 记录指定了哪个， 或哪些主机能够接收特定域下的邮件。 如果您没有为主机名或域名设置 MX 记录， 则邮件将被直接递交给主机名对应 IP 所在的主机。</p></div><div class=paragraph><p>您可以通过 <a href="https://man.freebsd.org/cgi/man.cgi?query=host&amp;sektion=1&amp;format=html">host(1)</a> 命令来查找任何域或主机名对应的 MX 记录， 如下面的例子所示：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% host <span class=nt>-t</span> mx FreeBSD.org
FreeBSD.org mail is handled <span class=o>(</span><span class=nv>pri</span><span class=o>=</span>10<span class=o>)</span> by mx1.FreeBSD.org</code></pre></div></div></div><div class=sect2><h3 id=mail-receive>29.2.4. 接收邮件<a class=anchor href=#mail-receive></a></h3><div class=paragraph><p>为您的域接收邮件是通过邮件服务器来完成的。 它收集发送给您的域的那些邮件，并保存到 <span class=filename>mbox</span> (存储邮件默认的方法) 或 Maildir 格式， 这取决于您采用的配置。 一旦邮件被保存下来， 就可以在本地通过类似 <a href="https://man.freebsd.org/cgi/man.cgi?query=mail&amp;sektion=1&amp;format=html">mail(1)</a> 或 mutt 这样的程序， 或在远程通过 POP 或 IMAP 这样的协议来读取了。 简单地说， 如果您只在本地阅读邮件，那就没有必要安装 POP 或 IMAP 服务。</p></div><div class=sect3><h4 id=pop-and-imap>29.2.4.1. 通过 POP 和 IMAP 访问远程的邮件<a class=anchor href=#pop-and-imap></a></h4><div class=paragraph><p>如果希望在远程访问邮箱， 就需要访问 POP 或 IMAP 服务器。 这些协议允许用户从远程方便地访问他们的信箱。 尽管 POP 和 IMAP 都允许用户从远程访问信箱， 但 IMAP 有很多优点， 这包括：</p></div><div class=ulist><ul><li><p>IMAP 既可以从远程服务器上抓取邮件， 也可以把邮件放上去。</p></li><li><p>IMAP 支持并发更新。</p></li><li><p>IMAP 对于使用低速网络的用户尤为有用， 因为它能够让这些用户把邮件的结构下载下去， 而无需立即下载整个邮件。 它还可以在服务器端执行类似查找这样的操作， 以减少客户机和服务器之间的通讯量。</p></li></ul></div><div class=paragraph><p>您可以按照下面的步骤来安装和配置 POP 或 IMAP 服务器：</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>选择一个最符合需要的 IMAP 或 POP 服务器。 下列 POP 和 IMAP 服务器是最著名的， 而且都有很多成功案例：</p><div class=ulist><ul><li><p>qpopper;</p></li><li><p>teapop;</p></li><li><p>imap-uw;</p></li><li><p>courier-imap;</p></li><li><p>dovecot;</p></li></ul></div></li><li><p>通过 ports collection 安装 POP 或 IMAP 服务。</p></li><li><p>根据需要修改 <span class=filename>/etc/inetd.conf</span> 来加载 POP 或 IMAP 服务。</p></li></ol></div></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>此外还应注意的是 POP 和 IMAP 传递的信息， 包括用户名和口令等等， 通常都是明文的。 这意味着如果您希望加密传输过程中的信息， 可能需要考虑使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> 隧道或者使用SSL。 关于如何实施隧道在 <a href=../security/#security-ssh-tunneling>SSH 隧道</a> 中进行了详细阐述， SSL 部分在<a href=../security/#openssl>OpenSSL</a>。</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=local>29.2.4.2. 操作本地的信箱<a class=anchor href=#local></a></h4><div class=paragraph><p>信箱可以在邮件服务器本地直接用 MUA 来进行操作。 这通常是通过 mutt 或 <a href="https://man.freebsd.org/cgi/man.cgi?query=mail&amp;sektion=1&amp;format=html">mail(1)</a> 这样的应用程序实现的。</p></div></div></div><div class=sect2><h3 id=mail-host>29.2.5. 邮件服务器<a class=anchor href=#mail-host></a></h3><div class=paragraph><p>邮件服务器是通过服务器给的一个名字 (译注：来识别主机)， 这也正是它能在您的主机和网络上发送和接收邮件的原因。</p></div></div></div></div><div class=sect1><h2 id=sendmail>29.3. sendmail 配置<a class=anchor href=#sendmail></a></h2><div class=sectionbody><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a> 是 FreeBSD 中的默认邮件传输代理 (MTA)。 sendmail 的任务是从邮件用户代理 (MUA) 接收邮件然后根据配置文件的定义把它们送给配置好的的寄送程序。 sendmail 也能接受网络连接， 并且发送邮件到本地邮箱或者发送它到其它程序。</p></div><div class=paragraph><p>sendmail 使用下列配置文件：</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">文件名</th><th class="tableblock halign-left valign-top">功能</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail/access</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>sendmail 访问数据库文件</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail/aliases</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>邮箱别名</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail/local-host-names</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>sendmail 接收邮件主机列表</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail/mailer.conf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>邮寄配置程序</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail/mailertable</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>邮件分发列表</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail/sendmail.cf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>sendmail的主配置文件</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail/virtusertable</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>虚拟用户和域列表</p></td></tr></tbody></table><div class=sect2><h3 id=_etcmailaccess>29.3.1. <span class=filename>/etc/mail/access</span><a class=anchor href=#_etcmailaccess></a></h3><div class=paragraph><p>访问数据库定义了什么主机或者 IP 地址可以访问本地邮件服务器和它们是哪种类型的访问。 主机可能会列出 <code>OK</code>、 <code>REJECT</code>、<code>RELAY</code> 或者简单的通过 sendmail 的出错处理程序检测一个给定的邮件错误。 主机默认列出 <code>OK</code>，允许传送邮件到主机， 只要邮件的最后目的地是本地主机。列出 <code>REJECT</code> 将拒绝所有的邮件连接。如果带有 <code>RELAY</code> 选项的主机将被允许通过这个邮件服务器发送邮件到任何地方。</p></div><div class=exampleblock><div class=title>例 1. 配置 sendmail 的访问许可数据库</div><div class=content><div class="literalblock programlisting"><div class=content><pre>cyberspammer.com                550 We do not accept mail from spammers
FREE.STEALTH.MAILER@            550 We do not accept mail from spammers
another.source.of.spam          REJECT
okay.cyberspammer.com           OK
128.32                          RELAY</pre></div></div></div></div><div class=paragraph><p>在上面的例子中我们有 5 条记录。 与左边列表匹配的发件人受到右边列表动作的影响。 前边的两个例子给出了 sendmail 的出错处理程序检测到的错误代码。 当一个邮件与左边列表相匹配时，这个信息会被打印到远程主机上。 下一条记录拒绝来自 Internet 上的一个特别主机的邮件 <code>another.source.of.spam</code>。接下来的记录允许来自 <code>okay.cyberspammer.com</code> 的邮件连接， 这条记录比上面那行 <code>cyberspammer.com</code> 更准确。更多的准确匹配使不准确的匹配无效。最后一行允许电子邮件从主机和 <code>128.32</code> 开头的 IP 地址转发。 这些主机将被允许通过这台邮件服务器前往其它邮件服务器发送邮件。</p></div><div class=paragraph><p>当这个文件被升级的时候，您必须在 <span class=filename>/etc/mail/</span> 运行 <code>make</code> 升级数据库。</p></div></div><div class=sect2><h3 id=_etcmailaliases>29.3.2. <span class=filename>/etc/mail/aliases</span><a class=anchor href=#_etcmailaliases></a></h3><div class=paragraph><p>别名数据库包含一个扩展到用户，程序或者其它别名的虚拟邮箱列表。 下面是一些在 <span class=filename>/etc/mail/aliases</span> 中使用的例子：</p></div><div class=exampleblock><div class=title>例 2. 邮件别名</div><div class=content><div class="literalblock programlisting"><div class=content><pre>root: localuser
ftp-bugs: joe,eric,paul
bit.bucket:  /dev/null
procmail: &#34;|/usr/local/bin/procmail&#34;</pre></div></div></div></div><div class=paragraph><p>这个文件的格式很简单； 冒号左边的邮箱名， 会被展开成右边的形式。 第一个例子简单地将 <code>root</code> 邮箱扩展为 <code>localuser</code>， 之后将继续在别名数据库中进行查找。 如果没有找到匹配的记录， 则邮件会被发给本地用户 <code>localuser</code>。 第二个例子展示了一个邮件列表。 发送到 <code>ftp-bugs</code> 的邮件会被展开成 <code>joe</code>， <code>eric</code> 和 <code>paul</code> 这三个邮箱。 注意也可以通过 <a href=mailto:user@example.com>user@example.com</a> 这样的形式来指定远程的邮箱。 接下来的例子展示了如何把邮件写入到文件中， 这个例子中是 <span class=filename>/dev/null</span>。 最后一个例子展示了如何将邮件发给一个程序， 具体而言是通过 UNIX® 管道发到 <span class=filename>/usr/local/bin/procmail</span> 的标准输入。</p></div><div class=paragraph><p>更新此文件时， 您需要在 <span class=filename>/etc/mail/</span> 中使用 <code>make</code> 来更新数据库。</p></div></div><div class=sect2><h3 id=_etcmaillocal_host_names>29.3.3. <span class=filename>/etc/mail/local-host-names</span><a class=anchor href=#_etcmaillocal_host_names></a></h3><div class=paragraph><p>这是一个 <a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a> 被接受为一个本地主机名的主机名列表。 可以放入任何 sendmail 将从那里收发邮件的域名或主机。例如，如果这个邮件服务器从域 <code>example.com</code> 和主机 <code>mail.example.com</code> 接收邮件，它的 <span class=filename>local-host-names</span> 文件，可以看起来象如下这样：</p></div><div class="literalblock programlisting"><div class=content><pre>example.com
mail.example.com</pre></div></div><div class=paragraph><p>当这个文件被升级，<a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a> 必须重新启动，以便更新设置。</p></div></div><div class=sect2><h3 id=_etcmailsendmail_cf>29.3.4. <span class=filename>/etc/mail/sendmail.cf</span><a class=anchor href=#_etcmailsendmail_cf></a></h3><div class=paragraph><p>sendmail的主配置文件 <span class=filename>sendmail.cf</span> 控制着 sendmail 的所有行为， 包括从重写邮件地址到打印拒绝远程邮件服务器信息等所有事。 当然，作为一个不同的角色，这个配置文件是相当复杂的， 它的细节部分已经超出了本节的范围。幸运的是， 这个文件对于标准的邮件服务器来说很少需要被改动。</p></div><div class=paragraph><p>sendmail 主配置文件可以用 <a href="https://man.freebsd.org/cgi/man.cgi?query=m4&amp;sektion=1&amp;format=html">m4(1)</a> 宏定义 sendmail 的特性和行为。它的细节请看 <span class=filename>/usr/src/contrib/sendmail/cf/README</span>。</p></div><div class=paragraph><p>当这个文件被修改时， sendmail 必须重新启动以便对新修改生效。</p></div></div><div class=sect2><h3 id=_etcmailvirtusertable>29.3.5. <span class=filename>/etc/mail/virtusertable</span><a class=anchor href=#_etcmailvirtusertable></a></h3><div class=paragraph><p><span class=filename>virtusertable</span> 映射虚拟域名和邮箱到真实的邮箱。 这些邮箱可以是本地的、远程的、<span class=filename>/etc/mail/aliases</span> 中定义的别名或一个文件。</p></div><div class=exampleblock><div class=title>例 3. 虚拟域邮件映射的例子</div><div class=content><div class="literalblock programlisting"><div class=content><pre>root@example.com                root
postmaster@example.com          postmaster@noc.example.net
@example.com                    joe</pre></div></div></div></div><div class=paragraph><p>在上面这个例子中， 我们映射了一个域 <code>example.com</code>。 这个文件是按照从上到下， 首个匹配的方式来处理的。 第一项将 <a href=mailto:root@example.com>root@example.com</a> 映射到本地邮箱 <code>root</code>。 下一项则将 <a href=mailto:postmaster@example.com>postmaster@example.com</a> 映射到位于 <code>noc.example.net</code> 的 <code>postmaster</code>。 最后， 如果没有来自 <code>example.com</code> 的匹配， 则将使用最后一条映射， 它表示将所有的其它邮件发给 <code>example.com</code> 域的某个人。 这样， 将映射到本地信箱 <code>joe</code>。</p></div></div></div></div><div class=sect1><h2 id=mail-changingmta>29.4. 改变您的邮件传输代理程序<a class=anchor href=#mail-changingmta></a></h2><div class=sectionbody><div class=paragraph><p>先前已经提到，FreeBSD 中的 sendmail 已经安装了您的 MTA (邮件传输代理程序)。因此它负责着您的收发邮件的工作。</p></div><div class=paragraph><p>然而，基于不同的理由，一些系统管理员想要改变他们系统的 MTA。这些理由从简单的想要尝试另一个 MTA，到需要一个特殊的特性或者 package 依赖某个邮寄程序等等。幸运的是，不管是什么理由，FreeBSD 都能容易的改变它。</p></div><div class=sect2><h3 id=_安装一个新的_mta>29.4.1. 安装一个新的 MTA<a class=anchor href=#_安装一个新的_mta></a></h3><div class=paragraph><p>对于可用的 MTA 您有很多的选择。一个好的出发点是 <a href=../ports/#ports>FreeBSD Ports Collection</a>，在那里您能找到很多。 当然您可以从任何位置不受任何限制的使用 MTA，只要您能让它运行在 FreeBSD 下。</p></div><div class=paragraph><p>开始安装您的新 MTA。一旦它被安装， 它可以让您有机会判定它是否能满足您的需要， 并且在它接管 sendmail 之前让您有机会配置您的新软件。 当完成这些之后，您应该确信安装的新软件不会尝试更改系统的二进制文件例如 <span class=filename>/usr/bin/sendmail</span>。 除此以外， 您的新邮件软件启用之前要已经配置好它。</p></div><div class=paragraph><p>具体配置请参考您所选择的 MTA 软件的配置文档或其它相关资料。</p></div></div><div class=sect2><h3 id=mail-disable-sendmail>29.4.2. 禁用 sendmail<a class=anchor href=#mail-disable-sendmail></a></h3><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>如果您打算禁用 sendmail 的邮件发出服务， 保持系统中有一个替代它的、 可用的邮件递送系统就非常重要。 如果您不这样做的话， 类似 <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a> 这样的系统功能就无法如预期的那样， 通过邮件来传送其执行结果。 您系统中的许多部分可能都假定有可用的 sendmail-兼容 系统。 如果这些应用程序继续使用 sendmail 的执行文件来发送邮件， 而您又禁用了它， 则邮件将进入 sendmail 的非活跃 (inactive) 队列， 而永远不会被送达。</p></div></td></tr></tbody></table></div><div class=paragraph><p>要彻底禁用包括邮件送出服务在内的所有 sendmail 功能， 必须将</p></div><div class="literalblock programlisting"><div class=content><pre>sendmail_enable=&#34;NO&#34;
sendmail_submit_enable=&#34;NO&#34;
sendmail_outbound_enable=&#34;NO&#34;
sendmail_msp_queue_enable=&#34;NO&#34;</pre></div></div><div class=paragraph><p>写入 <span class=filename>/etc/rc.conf</span>。</p></div><div class=paragraph><p>如果只是想要停止 sendmail 的接收邮件服务， 您应该在 <span class=filename>/etc/rc.conf</span> 文件中设置</p></div><div class="literalblock programlisting"><div class=content><pre>sendmail_enable=&#34;NO&#34;</pre></div></div><div class=paragraph><p>更多的有关 sendmail 可用的启动选项，参看 <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8&amp;format=html">rc.sendmail(8)</a> 联机手册.</p></div></div><div class=sect2><h3 id=_机器引导时运行您的新_mta>29.4.3. 机器引导时运行您的新 MTA<a class=anchor href=#_机器引导时运行您的新_mta></a></h3><div class=paragraph><p>可以向 <span class=filename>/etc/rc.conf</span> 中加入配置项使新的 MTA 在系统启动时运行， 下面是一个 postfix 的例子：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#39;postfix_enable=“YES”&#39; &gt;&gt; /etc/rc.conf</span></code></pre></div></div><div class=paragraph><p>这样 MTA 就能在系统启动是自动运行了。</p></div></div><div class=sect2><h3 id=_替换系统默认的邮寄程序_sendmail>29.4.4. 替换系统默认的邮寄程序 sendmail<a class=anchor href=#_替换系统默认的邮寄程序_sendmail></a></h3><div class=paragraph><p>因为 sendmail 程序是一个在 UNIX® 系统下普遍存在的一个标准的软件，一些软件就假定它已经被安装并且配置好。 基于这个原因，许多其它的 MTA 提供者都提供了兼容 sendmail 的命令行界面来执行。 这使它们像"混入"sendmail 一样变的很容易掌握。</p></div><div class=paragraph><p>因此，如果您使用其它的邮寄程序， 您必须确定这个软件是去尝试运行标准的 sendmail 二进制，就象 <span class=filename>/usr/bin/sendmail</span>，还是运行您自己选择的替换邮寄程序。 幸运的是，FreeBSD 提供了一个系统调用 <a href="https://man.freebsd.org/cgi/man.cgi?query=mailwrapper&amp;sektion=8&amp;format=html">mailwrapper(8)</a>，它能为您做这件工作。</p></div><div class=paragraph><p>当 sendmail 安装后被运行，您可以在 <span class=filename>/etc/mail/mailer.conf</span> 中找到如下行：</p></div><div class="literalblock programlisting"><div class=content><pre>sendmail	 /usr/libexec/sendmail/sendmail
send-mail	/usr/libexec/sendmail/sendmail
mailq		/usr/libexec/sendmail/sendmail
newaliases	/usr/libexec/sendmail/sendmail
hoststat	/usr/libexec/sendmail/sendmail
purgestat	/usr/libexec/sendmail/sendmail</pre></div></div><div class=paragraph><p>这个的意思就是当这些公共命令 (例如 <span class=filename>sendmail</span> 它本身) 运行时， 系统实际上调用了一个 <span class=filename>sendmail</span> 指定的 mailwrapper 的副本，它检查 <span class=filename>mailer.conf</span> 并且运行 <span class=filename>/usr/libexec/sendmail/sendmail</span> 做为替代。当默认的 <span class=filename>sendmail</span> 功能被调用， 系统将很容易的改变实际上运行的二进制文件。</p></div><div class=paragraph><p>因此如果您想要 <span class=filename>/usr/local/supermailer/bin/sendmail-compat</span> 替换 sendmail 被运行，您应该改变 <span class=filename>/etc/mail/mailer.conf</span> 文件为：</p></div><div class="literalblock programlisting"><div class=content><pre>sendmail	 /usr/local/supermailer/bin/sendmail-compat
send-mail	/usr/local/supermailer/bin/sendmail-compat
mailq		/usr/local/supermailer/bin/mailq-compat
newaliases	/usr/local/supermailer/bin/newaliases-compat
hoststat	/usr/local/supermailer/bin/hoststat-compat
purgestat	/usr/local/supermailer/bin/purgestat-compat</pre></div></div></div><div class=sect2><h3 id=_最后>29.4.5. 最后<a class=anchor href=#_最后></a></h3><div class=paragraph><p>一旦做完您想要配置的每件事，您应该杀掉 sendmail 进程并且启动属于您的新软件的进程， 或者简单的重启。 重启也将给您提供了确认您的系统已经进行了正确的配置的机会。 在引导的时候自动的运行您新的 MTA。</p></div></div></div></div><div class=sect1><h2 id=mail-trouble>29.5. 疑难解答<a class=anchor href=#mail-trouble></a></h2><div class=sectionbody><div class=sect2><h3 id=_为什么必须在我的站点的主机上使用_fqdn>29.5.1. 为什么必须在我的站点的主机上使用 FQDN？<a class=anchor href=#_为什么必须在我的站点的主机上使用_fqdn></a></h3><div class=paragraph><p>您可能会发现主机实际上是在另外一个域里面， 例如，如果您是在 <code>foo.bar.edu</code> 里，而您要找一台叫 <code>mumble</code> 的主机，它在 <code>bar.edu</code> 域里，您就必须用完整的域名 <code>mumble.bar.edu</code>，而不是用 <code>mumble</code>。</p></div><div class=paragraph><p>传统上，这在 BSD BIND resolvers 中是可行的。 然而目前随 FreeBSD 附带的 BIND 已不为同一域外提供缩写服务。所以，这个不完整的主机名 <code>mumble</code> 必须以 <code>mumble.foo.bar.edu</code> 这种形式才能被找到， 或者将在根域中搜索它。</p></div><div class=paragraph><p>这跟以前的处理是不同的，以前版本将会继续寻找 <code>mumble.bar.edu</code> 和 <code>mumble.edu</code>。 如果您想要了解这种方式是否是好，或者它有什么安全方面的漏洞， 请参阅 RFC 1535 文档。</p></div><div class=paragraph><p>如果您想要一个好的工作环境，您可以使用如下行：</p></div><div class="literalblock programlisting"><div class=content><pre>search foo.bar.edu bar.edu</pre></div></div><div class=paragraph><p>替换先前旧的版本：</p></div><div class="literalblock programlisting"><div class=content><pre>domain foo.bar.edu</pre></div></div><div class=paragraph><p>把这行放在您的 <span class=filename>/etc/resolv.conf</span> 文件中。然而，请一定要确定这样的搜寻顺序不会造成 RFC 1535 里提到的"boundary between local and public administration" 问题。</p></div></div><div class=sect2><h3 id=_sendmail_提示信息_mail_loops_back_to_myself>29.5.2. sendmail 提示信息 mail loops back to myself<a class=anchor href=#_sendmail_提示信息_mail_loops_back_to_myself></a></h3><div class=paragraph><p>下面是 sendmail FAQ 中的回答：</p></div><div class="literalblock programlisting"><div class=content><pre>我得到了如下的信息：

553 MX list for domain.net points back to relay.domain.net
554 &lt;user@domain.net&gt;... Local configuration error

我如何解决这个问题？

您已经通过 MX 记录指定把发送给特定的域 (例如，domain.net)
的邮件被转寄到指定的主机 (在这个例子中，relay.domain.net)，
而这台机器并不认为它自己是 domain.net。请把 domain.net 添加到
/etc/mail/local-host-names 文件中 [在 8.10 版之前是 /etc/sendmail.cw]
(如果您使用 FEATURE(use_cw_file) 的话) 或者在 /etc/mail/sendmail.cf
中添加Cw domain.net。
MX record</pre></div></div><div class=paragraph><p>sendmail 的 FAQ 可以在 <a href=http://www.sendmail.org/faq/>http://www.sendmail.org/faq/</a> 找到， 如果您想要对您的邮件做任何的"调整"， 则推荐首先看一看它。</p></div></div><div class=sect2><h3 id=_我如何在一个拨号主机上运行一个邮件服务_ppp>29.5.3. 我如何在一个拨号主机上运行一个邮件服务？ PPP<a class=anchor href=#_我如何在一个拨号主机上运行一个邮件服务_ppp></a></h3><div class=paragraph><p>您想要把局域网上的 FreeBSD 主机连接到互连网上，而这台 FreeBSD 主机将会成为这个局域网的邮件网关， 这个拨号连接不必一直保持在连接状态。</p></div><div class=paragraph><p>最少有两种方法可以满足您的要求。一种方法就是使用 UUCP。</p></div><div class=paragraph><p>另一种方法是找到一个专职的服务器来为您的域提供副 MX 主机服务。 例如，如果您公司的域名是 <code>example.com</code>，您的互连网服务提供者把 <code>example.net</code> 作为您域的副 MX 服务：</p></div><div class="literalblock programlisting"><div class=content><pre>example.com.          MX        10      example.com.
                      MX        20      example.net.</pre></div></div><div class=paragraph><p>只有一台主机被指定当做您的最终收信主机 (在 <code>example.com</code> 主机的 <span class=filename>/etc/mail/sendmail.cf</span> 文件中添加 <code>Cw example.com</code>)。</p></div><div class=paragraph><p>当 <code>sendmail</code> 试图分发邮件的时候， 它会尝试通过 modem 连接到您 (<code>example.com</code>)。 因为您并不在线，所以总是会得到一个超时的错误。 sendmail 将会把邮件发送到副 MX 主机，也就是说，您的互连网服务提供者 (<code>example.net</code>)。副 MX 主机将周期性的尝试连接并发送邮件到您的主机 (<code>example.com</code>)。</p></div><div class=paragraph><p>您也许想要使用下面的这个登录脚本：</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
# Put me in /usr/local/bin/pppmyisp
( sleep 60 ; /usr/sbin/sendmail -q ) &amp;
/usr/sbin/ppp -direct pppmyisp</pre></div></div><div class=paragraph><p>如果您想要为一个用户建立一个分开登录的脚本， 您可以使用 <code>sendmail -qRexample.com</code> 替换上面的脚本。这样将使所有的邮件按照您的 <code>example.com</code> 队列立即被处理。</p></div><div class=paragraph><p>更深入的方法可以参考下面这段：</p></div><div class=paragraph><p>这段信息是从 <a href=https://lists.FreeBSD.org/subscription/freebsd-isp>FreeBSD Internet 服务提供商的邮件列表</a> 拿来的。</p></div><div class="literalblock programlisting"><div class=content><pre>&gt; 我们为用户提供副 MX 主机服务。用户每天都会上线好几次
&gt; 并且自动把信件取回主 MX 主机
&gt; (当有他们的邮件时我们并没有通知他们)。
&gt; 我们的 mailqueue 程序每 30 分钟清一次邮件队列。那段时间他们
&gt; 就必须上线 30 分钟以确保他们的信件送达他们的主 MX 主机。
&gt;
&gt; 有任何指令可以用 sendmail 寄出所有邮件么？
&gt; 普通用户在我们的机器上当然没有 root 权限。

在 sendmail.cf 的privacy flags部分，有这样的设定
Opgoaway,restrictqrun

移除 restrictqrun 可以让非 root 用户启动队列处理的程序。
您可能也要重新安排您的 MX 设定。我们是用户的 MX 主机，
而且我们还设定了这个：

# If we are the best MX for a host, try directly instead of generating # local config error.
OwTrue

这样的话远程机器会直接把信送给您，而不会尝试连接您的用户的机器。
然后您就可以把邮件发送到您的用户。这个设定只对
主机有效，所以您必须要让您的用户在 DNS 中把他们的邮件主机设置为
customer.com或者
hostname.customer.com。只要为customer.com在 DNS
里添加一个 A 记录就可以了。</pre></div></div></div><div class=sect2><h3 id=_为什么当我发送邮件到其它主机总是有_relaying_denied_出错信息>29.5.4. 为什么当我发送邮件到其它主机总是有 Relaying Denied 出错信息？<a class=anchor href=#_为什么当我发送邮件到其它主机总是有_relaying_denied_出错信息></a></h3><div class=paragraph><p>默认的 FreeBSD 安装中， sendmail 会配置为只发送来自它所在主机上的邮件。 例如，如果有可用的 POP 服务器，则用户将可以从学校、 公司或其他什么别的地方检查邮件，但他们仍然无法从远程直接发送邮件。 通常，在几次尝试之后， MAILER-DAEMON 将发出一封包含 <code>5.7 Relaying Denied</code> 错误信息的邮件。</p></div><div class=paragraph><p>有很多方法可以避免这种现象。 最直截了当的方法是把您的 ISP 的地址放到 <span class=filename>/etc/mail/relay-domains</span> 文件中。 完成这项工作的简单的方法是：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#34;your.isp.example.com&#34; &gt; /etc/mail/relay-domains</span></code></pre></div></div><div class=paragraph><p>建立或编辑这个文件以后您必须重新启动 sendmail。 如果您是一个管理员并且不希望在本地发送邮件， 或者想要在其它的机器甚至其它的 ISP 上使用一个客户端系统， 这个方法是很方便的。如果您仅有一到两个邮件帐户它也非常的有用。 如果有大量的地址需要添加， 您可以很简单的使用您喜欢的文本编辑器打开这个文件添加域名， 每行一个：</p></div><div class="literalblock programlisting"><div class=content><pre>your.isp.example.com
other.isp.example.net
users-isp.example.org
www.example.org</pre></div></div><div class=paragraph><p>现在邮件可以通过您的系统传送， 这个列表中存在的主机 (前提是用户在您的系统上已经有一个帐户) 将可以成功的发送。这是一个允许正常的远程用户从您的系统发送邮件， 并且阻止其它非法用户通过您系统发送垃圾邮件的好方法。</p></div></div></div></div><div class=sect1><h2 id=mail-advanced>29.6. 高级主题<a class=anchor href=#mail-advanced></a></h2><div class=sectionbody><div class=paragraph><p>下面这节将介绍邮件配置和为整个域安装邮件。</p></div><div class=sect2><h3 id=mail-config>29.6.1. 基本配置<a class=anchor href=#mail-config></a></h3><div class=paragraph><p>在邮箱外，只要您设置 <span class=filename>/etc/resolv.conf</span> 或者运行您自己的名字服务器，您就可以发送邮件到外部的主机。 如果您想要您的邮件发送给某个特定的 MTA(例如， sendmail) 在您的 FreeBSD 主机上，有两个方法：</p></div><div class=ulist><ul><li><p>运行您自己的域名服务器和您自己的域。例如， <code>FreeBSD.org</code></p></li><li><p>获得直接分发给您主机的邮件。您可以直接使用您当前的 DNS 名称。例如，<code>example.FreeBSD.org</code>。</p></li></ul></div><div class=paragraph><p>不管您选择上面那种方法，为了直接在您的主机上发送邮件， 必须有一个静态的 IP 地址(不是象 PPP 拨号一样的动态地址)。 如果您在防火墙后面，它必须让 SMTP 协议通过。 如果您想要在您的主机上直接的收取邮件， 您必须确定两件事：</p></div><div class=ulist><ul><li><p>确定在您 DNS 中的 MX 记录(最小编号的)指向您的 IP 地址。</p></li><li><p>确定在您 DNS 中的 MX 记录没有禁止您的主机。</p></li></ul></div><div class=paragraph><p>上面的每条记录都允许您在您的主机直接接收邮件。</p></div><div class=paragraph><p>试试这个：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># hostname</span>
example.FreeBSD.org
<span class=c># host example.FreeBSD.org</span>
example.FreeBSD.org has address 204.216.27.XX</code></pre></div></div><div class=paragraph><p>如果您看到这些， 则直接发往 <a href=mailto:yourlogin@example.FreeBSD.org>yourlogin@example.FreeBSD.org</a> 应该已经可以正常工作了 (假设 sendmail 已经在 <code>example.FreeBSD.org</code> 上正确启动了)。</p></div><div class=paragraph><p>如果您看到这些：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># host example.FreeBSD.org</span>
example.FreeBSD.org has address 204.216.27.XX
example.FreeBSD.org mail is handled <span class=o>(</span><span class=nv>pri</span><span class=o>=</span>10<span class=o>)</span> by hub.FreeBSD.org</code></pre></div></div><div class=paragraph><p>所有发送到主机 (<code>example.FreeBSD.org</code>) 的邮件在相同的用户名下将会被 <code>hub</code> 终止的收集，而不是直接发送到您的主机。</p></div><div class=paragraph><p>上面的信息是通过您的 DNS 服务器来处理的。支持邮件路由信息的 DNS 记录是 <em>邮件 交换</em> 记录。如果 MX 记录不存在，邮件将通过它自己的 IP 地址被直接的发送到主机。</p></div><div class=paragraph><p><code>freefall.FreeBSD.org</code>的MX记录如下所示:</p></div><div class="literalblock programlisting"><div class=content><pre>freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</pre></div></div><div class=paragraph><p>正如您说看到的，<code>freefall</code> 有很多 MX 记录。 最小编号的 MX 记录是直接接收邮件的主机。如果因为一些原因它不可用，其它 (有时会访问"backup MXes")接收信息将会暂时接替并做临时的排列。</p></div><div class=paragraph><p>为了有效的使用交换式 MX 站点，应当从您的机器上分离一些 Internet 连接。您的 ISP 或者其它友好的站点可以没有任何问题的为您提供这个服务。</p></div></div><div class=sect2><h3 id=mail-domain>29.6.2. Mail for Your Domain<a class=anchor href=#mail-domain></a></h3><div class=paragraph><p>为了设置一个"邮件主机"(又称邮件服务器) 您必须要把许多邮件发送到与它相连的几个工作站中。 基本上，您想要"要求"在您域的每个主机的所有邮件 (在这个例子里是 <code>*.FreeBSD.org</code>) 转向到您的邮件服务器，从而使您的用户可以在主邮件服务器里接收他们的邮件。</p></div><div class=paragraph><p>要使工作最简单，带有同样 <em>用户名</em> 的帐户应该同时存在于两台机器上。使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=adduser&amp;sektion=8&amp;format=html">adduser(8)</a> 来这样做。</p></div><div class=paragraph><p>您将使用的邮件主机必须为每个工作站指定一个邮件交换。您可以在 DNS 中这样配置：</p></div><div class="literalblock programlisting"><div class=content><pre>example.FreeBSD.org	A	204.216.27.XX		; Workstation
			MX	10 hub.FreeBSD.org	; Mailhost</pre></div></div><div class=paragraph><p>无论 A 记录指向哪，这将为工作站重新定位到邮件主机。邮件将被发送到 MX 主机。</p></div><div class=paragraph><p>您不能自己这样做除非您运行着一个 DNS 服务器。 如果不是这样，或者不能运行您自己的 DNS 服务器，告诉您的 ISP 或者给您提供 DNS 服务的人。</p></div><div class=paragraph><p>如果您正在使用虚拟邮件主机，下面的信息将会对您有用。 在这个例子里，我们假定您有一个客户并且他有自己的域， 这个例子中是 <code>customer1.org</code>，您要把 <code>customer1.org</code> 所有的邮件发送到您的邮件主机 <code>mail.myhost.com</code>。 您的 DNS 记录应该是这样：</p></div><div class="literalblock programlisting"><div class=content><pre>customer1.org		MX	10	mail.myhost.com</pre></div></div><div class=paragraph><p>您 <em>不</em> 需要有个 A 记录， 如果您只为域 <code>customer1.org</code> 处理邮件。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>必须清楚 <code>customer1.org</code> 将不能工作，除非存在一个 A 记录。</p></div></td></tr></tbody></table></div><div class=paragraph><p>最后一件您必须要做的事是告诉 sendmail 接受邮件的是什么域和(或)主机名。 这里有好几种方法。下面方法可以任选一种：</p></div><div class=ulist><ul><li><p>添加您的主机到 <span class=filename>/etc/mail/local-host-names</span> 文件中，如果您使用的是 <code>FEATURE(use_cw_file)</code>。如果您使用 sendmail 8.10 或者更高版本，文件是 <span class=filename>/etc/sendmail.cw</span>。</p></li><li><p>添加一行 <code>Cwyour.host.com</code> 到您的 <span class=filename>/etc/sendmail.cf</span> 或 <span class=filename>/etc/mail/sendmail.cf</span> 文件，如果您使用 sendmail 8.10 或者更高版本。</p></li></ul></div></div></div></div><div class=sect1><h2 id=SMTP-UUCP>29.7. SMTP 与 UUCP<a class=anchor href=#SMTP-UUCP></a></h2><div class=sectionbody><div class=paragraph><p>sendmail 的配置，在 FreeBSD 中已经配置好为您的站点直接的连接 Internet。 如果站点希望他们的邮件通过 UUCP 交换，则必须安装其它的 sendmail 配置文件。</p></div><div class=paragraph><p>手工的配置 <span class=filename>/etc/mail/sendmail.cf</span> 是一个高级主题。sendmail 8 版本通过 <a href="https://man.freebsd.org/cgi/man.cgi?query=m4&amp;sektion=1&amp;format=html">m4(1)</a> 预处理生成一个配置文件，实际上这个配置发生在一个比较高的抽象层。 <a href="https://man.freebsd.org/cgi/man.cgi?query=m4&amp;sektion=1&amp;format=html">m4(1)</a> 配置文件可以在 <span class=filename>/usr/shared/sendmail/cf</span> 下找到。 <span class=filename>cf</span> 目录中的 <span class=filename>README</span> 文件是关于 <a href="https://man.freebsd.org/cgi/man.cgi?query=m4&amp;sektion=1&amp;format=html">m4(1)</a> 配置的基本的介绍。</p></div><div class=paragraph><p>最好的支持 UUCP 传送的方法是使用 <code>mailertable</code> 的特点。建立一个资料库让 sendmail 可以使用它自己的路由决策。</p></div><div class=paragraph><p>首先，您必须建立您自己的 <span class=filename>.mc</span> 文件。 <span class=filename>/usr/shared/sendmail/cf/cf</span> 目录包含一些例子。 假定您已经命名自己的文件叫做 <span class=filename>foo.mc</span>， 您要做的只是把它转换成一个有效的 <span class=filename>sendmail.cf</span>：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /etc/mail</span>
<span class=c># make foo.cf</span>
<span class=c># cp foo.cf /etc/mail/sendmail.cf</span></code></pre></div></div><div class=paragraph><p>一个典型的 <span class=filename>.mc</span> 文件看起来可能象这样：</p></div><div class="literalblock programlisting"><div class=content><pre>VERSIONID(`Your version number&#39;) OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable&#39;)

define(`UUCP_RELAY&#39;, your.uucp.relay)
define(`UUCP_MAX_SIZE&#39;, 200000)
define(`confDONT_PROBE_INTERFACES&#39;)

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    your.alias.host.name
Cw    youruucpnodename.UUCP</pre></div></div><div class=paragraph><p><code>accept_unresolvable_domains</code>、 <code>nocanonify</code> 和 <code>confDONT_PROBE_INTERFACES</code> 特性将避免在传送邮件时使用DNS的机会。<code>UUCP_RELAY</code> 项是支持 UUCP 传送所必须的。简单的放入一个 Internet 上可以处理 UUCP 虚拟域地址的主机名。通常，您在这里填入您 ISP 邮件的回复处。</p></div><div class=paragraph><p>一旦您做完这些，您还需要这个 <span class=filename>/etc/mail/mailertable</span> 文件。 如果您只有一个用来传递所有邮件的对外通道的话， 以下的文件就足够了：</p></div><div class="literalblock programlisting"><div class=content><pre>#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
.                             uucp-dom:your.uucp.relay</pre></div></div><div class=paragraph><p>一个更复杂点的例子象这样：</p></div><div class="literalblock programlisting"><div class=content><pre>#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
.interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
.heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
.                             uucp-dom:</pre></div></div><div class=paragraph><p>头三行处理域地址邮件，不应该被传送出默认的路由， 而由某些 UUCP 邻居取代的特殊情况，这是为了走"捷径"。 下一行处理本地网的邮件让它可以使用 SMTP 来传送。 最后，UUCP 邻居提起。UUCP 虚拟域的记载， 允许一个 <code>uucp-neighbor !recipient</code> 推翻默认规则。最后一行则以一个单独的句点最为结束， 以 UUCP 传送到提供您所有的邮件网关的 UUCP 邻居。 所有在 <code>uucp-dom:</code> 关键字里的节点名称必须是有效的 UUCP 邻居，您可以用 <code>uuname</code> 去确认。</p></div><div class=paragraph><p>提醒您这个文件在使用前必须被转换成 DBM 数据库文件。最好在 <span class=filename>mailertable</span> 最上面用注解写出命令行来完成这个工作。 当您每次更换您的 <span class=filename>mailertable</span> 后您总是需要执行这个命令。</p></div><div class=paragraph><p>最后提示：如果您不确定某个特定的路径可用， 记得把 <code>-bt</code> 选项加到 sendmail。这会将 sendmail 启动在 <em>地址检测模式</em>。只要按下 <code>3,0</code>，接着输入您希望测试的邮件路径位置。 最后一行告诉您使用邮件代理程序， 代理程序会通知目的主机以及 (可能转换) 地址。 要离开此模式请按 <span class=keyseq><kbd>Ctrl</kbd>+<kbd>D</kbd></span>。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sendmail <span class=nt>-bt</span>
ADDRESS TEST MODE <span class=o>(</span>ruleset 3 NOT automatically invoked<span class=o>)</span>
Enter &lt;ruleset&gt; &lt;address&gt;
<span class=o>&gt;</span> 3,0 foo@example.com
canonify           input: foo @ example <span class=nb>.</span> com
...
parse            returns: <span class=nv>$# </span>uucp-dom <span class=nv>$@</span> your.uucp.relay <span class=nv>$:</span> foo &lt; @ example <span class=nb>.</span> com <span class=nb>.</span> <span class=o>&gt;</span>
<span class=o>&gt;</span> ^D</code></pre></div></div></div></div><div class=sect1><h2 id=outgoing-only>29.8. 只发送邮件的配置<a class=anchor href=#outgoing-only></a></h2><div class=sectionbody><div class=paragraph><p>许多时候， 可能只希望通过转发服务器来发送邮件。 典型的情况包括：</p></div><div class=ulist><ul><li><p>使用桌面机， 但希望通过类似 <a href="https://man.freebsd.org/cgi/man.cgi?query=send-pr&amp;sektion=1&amp;format=html">send-pr(1)</a> 这样的程序发送邮件。 这样就需要使用 ISP 的邮件转发服务器。</p></li><li><p>不在本地处理邮件的服务器， 但它需要把邮件交给转发服务器来进行处理。</p></li></ul></div><div class=paragraph><p>几乎任何一个 MTA 都能够胜任这样的工作。 然而不幸的是， 要把一个全功能的 MTA 正确地配置为只把邮件交给其他服务器是一件很困难的事情。 使用 sendmail 以及 postfix 这样的程序， 多少有些杀鸡用牛刀的感觉。</p></div><div class=paragraph><p>此外， 如果您使用典型的 Internet 访问服务， 您的协议可能会包含禁止运行 "邮件服务器" 的条款。</p></div><div class=paragraph><p>满足这些需要最简单的办法是安装 <a class=package href=https://cgit.freebsd.org/ports/tree/mail/ssmtp/>mail/ssmtp</a> port。 以 <code>root</code> 身份执行下面的命令：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/mail/ssmtp</span>
<span class=c># make install replace clean</span></code></pre></div></div><div class=paragraph><p>一旦装好， <a class=package href=https://cgit.freebsd.org/ports/tree/mail/ssmtp/>mail/ssmtp</a> 就可以用四行 <span class=filename>/usr/local/etc/ssmtp/ssmtp.conf</span> 来配置：</p></div><div class="literalblock programlisting"><div class=content><pre>root=yourrealemail@example.com
mailhub=mail.example.com
rewriteDomain=example.com
hostname=_HOSTNAME_</pre></div></div><div class=paragraph><p>请确认您为 <code>root</code> 使用了真实的电子邮件地址。 用您的 ISP 提供的外发邮件转发服务器名称， 替换掉 <code>mail.example.com</code> (某些 ISP 可能将其称为 "外发邮件服务器" 或 "SMTP 服务器")。</p></div><div class=paragraph><p>接下来需要确认禁用了 sendmail， 包括邮件发出服务在内。 请参见 <a href=#mail-disable-sendmail>禁用 sendmail</a> 以了解进一步的细节。</p></div><div class=paragraph><p><a class=package href=https://cgit.freebsd.org/ports/tree/mail/ssmtp/>mail/ssmtp</a> 也提供了一些其他选项。 请参见在 <span class=filename>/usr/local/etc/ssmtp</span> 中的示例配置， 或者 ssmtp 的联机手册来得到一些例子和更多的其他信息。</p></div><div class=paragraph><p>以这种方式配置 ssmtp， 能够让您计算机上的任何需要发送邮件的软件都正常运转， 而不必冒违反 ISP 的使用政策， 或使您的电脑被劫持用于发送垃圾邮件的风险。</p></div></div></div><div class=sect1><h2 id=SMTP-dialup>29.9. 拨号连接时使用邮件传送<a class=anchor href=#SMTP-dialup></a></h2><div class=sectionbody><div class=paragraph><p>如果您有静态的 IP 地址， 就应该不用修改任何默认的配置。 将主机名设置为分配给您的 Internet 名称，其他的事情 sendmail 都会替您做好。</p></div><div class=paragraph><p>如果您的 IP 地址是动态分配的， 并使用 PPP 连接拨入 Internet， 则您可能会从 ISP 的邮件服务器上得到一个信箱。 这里我们假设您的 ISP 的域名是 <code>example.net</code>， 您的用户名是 <code>user</code>， 您把自己的机器称作 <code>bsd.home</code>， 而您的 ISP 告诉您可以使用 <code>relay.example.net</code> 来转发邮件。</p></div><div class=paragraph><p>为了从邮箱收取邮件， 需要安装一个收信代理。 fetchmail 是一个能够支持许多种不同协议的不错的选择。 这个程序可以通过 package 或 Ports Collection (<a class=package href=https://cgit.freebsd.org/ports/tree/mail/fetchmail/>mail/fetchmail</a>) 来安装。 通常， 您的 ISP 会提供 POP。 如果您使用用户 PPP，您还可以在 Internet 连接建立时自动地抓取邮件， 这可以通过在 <span class=filename>/etc/ppp/ppp.linkup</span> 中增加如下的项来实现：</p></div><div class="literalblock programlisting"><div class=content><pre>MYADDR:
!bg su user -c fetchmail</pre></div></div><div class=paragraph><p>如果您正使用 sendmail (如下所示) 来为非本地用户传送邮件， 则可能需要让 sendmail 在您的 Internet 连接建立时立即传送邮件队列。 要完成这项工作， 应该把下面的命令放到 <span class=filename>/etc/ppp/ppp.linkup</span> 中的 <code>fetchmail</code> 之后</p></div><div class="literalblock programlisting"><div class=content><pre>  !bg su user -c &#34;sendmail -q&#34;</pre></div></div><div class=paragraph><p>假设您在 <code>bsd.home</code> 上有一个 <code>user</code> 用户。 在 <code>bsd.home</code> 上的 <code>user</code> 主目录中创建一个 <span class=filename>.fetchmailrc</span> 文件：</p></div><div class="literalblock programlisting"><div class=content><pre>poll example.net protocol pop3 fetchall pass MySecret</pre></div></div><div class=paragraph><p>因为包含了密码 <code>MySecret</code>， 这个文件应该只有 <code>user</code> 可读。</p></div><div class=paragraph><p>要使用正确的 <code>from:</code> 头来发送文件， 您必须告诉 sendmail 使用 <a href=mailto:user@example.net>user@example.net</a> 而不是i <a href=mailto:user@bsd.home>user@bsd.home</a>。 另外， 您可能也需要要求 sendmail 通过 <code>relay.example.net</code> 来发送邮件， 以便更快地传送它们。</p></div><div class=paragraph><p>以下的 <span class=filename>.mc</span> 文件应该可以满足您的需求：</p></div><div class="literalblock programlisting"><div class=content><pre>VERSIONID(`bsd.home.mc version 1.0&#39;)
OSTYPE(bsd4.4)dnl
FEATURE(nouucp)dnl
MAILER(local)dnl
MAILER(smtp)dnl
Cwlocalhost
Cwbsd.home
MASQUERADE_AS(`example.net&#39;)dnl
FEATURE(allmasquerade)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(nocanonify)dnl
FEATURE(nodns)dnl
define(`SMART_HOST&#39;, `relay.example.net&#39;)
Dmbsd.home
define(`confDOMAIN_NAME&#39;,`bsd.home&#39;)dnl
define(`confDELIVERY_MODE&#39;,`deferred&#39;)dnl</pre></div></div><div class=paragraph><p>如何转换这个 <span class=filename>.mc</span> 文件到 <span class=filename>sendmail.cf</span> 文件的细节，请参考前面的章节。 另外，在更新 <span class=filename>sendmail.cf</span> 文件后， 不要忘记重启 sendmail。</p></div></div></div><div class=sect1><h2 id=SMTP-Auth>29.10. SMTP 验证<a class=anchor href=#SMTP-Auth></a></h2><div class=sectionbody><div class=paragraph><p>在您的邮件服务器上启用 SMTP 验证有很多好处。 SMTP 验证可以让 sendmail 多一重安全保障， 而且也使得使用不同机器的漫游用户能够使用同一个邮件服务器， 而不需要每次都修改它们的邮件客户端配置。</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>从 ports 安装 <a class=package href=https://cgit.freebsd.org/ports/tree/security/cyrus-sasl2/>security/cyrus-sasl2</a>。 这个 port 位于 <a class=package href=https://cgit.freebsd.org/ports/tree/security/cyrus-sasl2/>security/cyrus-sasl2</a>。 <a class=package href=https://cgit.freebsd.org/ports/tree/security/cyrus-sasl2/>security/cyrus-sasl2</a> port 支持很多可以在编译时指定的可选项。 由于我们要使用 SMTP 身份验证， 因此要确认没有禁用 <code>LOGIN</code> 选项。</p></li><li><p>安装完 <a class=package href=https://cgit.freebsd.org/ports/tree/security/cyrus-sasl2/>security/cyrus-sasl2</a> 之后， 编辑 <span class=filename>/usr/local/lib/sasl2/Sendmail.conf</span> (如果不存在则建立一个) 并在其中增加下列配置：</p><div class="literalblock programlisting"><div class=content><pre>pwcheck_method: saslauthd</pre></div></div></li><li><p>接下来， 安装 <a class=package href=https://cgit.freebsd.org/ports/tree/security/cyrus-sasl2-saslauthd/>security/cyrus-sasl2-saslauthd</a>， 编辑 <span class=filename>/etc/rc.conf</span> 并加入下列配置：</p><div class="literalblock programlisting"><div class=content><pre>saslauthd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>最后启用 saslauthd 服务：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/etc/rc.d/saslauthd start</span></code></pre></div></div><div class=paragraph><p>这个服务将充当 sendmail 使用 FreeBSD 的 <span class=filename>passwd</span> 数据库来完成身份验证时的代理人角色。 这避免了为每个需要使用 SMTP 身份验证的用户建立对应的用户名和口令的麻烦， 也确保了登录与邮件的口令一致。</p></div></li><li><p>现在编辑 <span class=filename>/etc/make.conf</span> 文件，添加如下行：</p><div class="literalblock programlisting"><div class=content><pre>SENDMAIL_CFLAGS=-I/usr/local/include/sasl -DSASL
SENDMAIL_LDFLAGS=-L/usr/local/lib
SENDMAIL_LDADD=-lsasl2</pre></div></div><div class=paragraph><p>这些配置将告诉系统在联编 sendmail 时使用适当的配置选项来在编译过程中连入 <a class=package href=https://cgit.freebsd.org/ports/tree/cyrus-sasl2/>cyrus-sasl2</a>. 在重新编译 sendmail 之前， 请确认已经安装了 <a class=package href=https://cgit.freebsd.org/ports/tree/cyrus-sasl2/>cyrus-sasl2</a>。</p></div></li><li><p>重新编译 sendmail 运行如下命令：</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src/lib/libsmutil</span>
<span class=c># make cleandir &amp;&amp; make obj &amp;&amp; make</span>
<span class=c># cd /usr/src/lib/libsm</span>
<span class=c># make cleandir &amp;&amp; make obj &amp;&amp; make</span>
<span class=c># cd /usr/src/usr.sbin/sendmail</span>
<span class=c># make cleandir &amp;&amp; make obj &amp;&amp; make &amp;&amp; make install</span></code></pre></div></div><div class=paragraph><p>如果 <span class=filename>/usr/src</span> 和共享库没有大的变化并且它们都必须可用，sendmail 编译应该没有任何问题。</p></div></li><li><p>sendmail 被重新编译和安装后， 编辑您的 <span class=filename>/etc/mail/freebsd.mc</span> 文件 (或者无论您选择使用的您的哪个 <span class=filename>.mc</span> 文件。许多管理员选择使用跟 <a href="https://man.freebsd.org/cgi/man.cgi?query=hostname&amp;sektion=1&amp;format=html">hostname(1)</a> 一样的唯一的 <span class=filename>.mc</span> 文件输出)。添加这些行在这个文件：</p><div class="literalblock programlisting"><div class=content><pre>dnl set SASL options
TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN&#39;)dnl
define(`confAUTH_MECHANISMS&#39;, `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN&#39;)dnl</pre></div></div><div class=paragraph><p>这些选项配置有不同的方法，对于 sendmail 验证用户。 如果您想要使用除 pwcheck 之外的方法，请参考相关文档。</p></div></li><li><p>最后，在 <span class=filename>/etc/mail</span> 运行 <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>。 它将建立您的新 <span class=filename>.mc</span> 文件并建立一个 <span class=filename>.cf</span> 文件命名为 <span class=filename>freebsd.cf</span> (或者您想使用您的其它名字的 <span class=filename>.mc</span>文件)。接着使用命令 <code>make install restart</code>，这将复制文件到 <span class=filename>sendmail.cf</span>，并且正确的重新启动 sendmail。 更多有关这个过程的信息，您可以参考 <span class=filename>/etc/mail/Makefile</span> 文件。</p></li></ol></div></div></div><div class=paragraph><p>如果所每个步骤都做对了， 您应该可以通过您的邮件客户端进入您的登录信息并且传送一个测试信息。 更多的分析，设置 sendmail 的 <code>LogLevel</code> 到 13 并且查看 <span class=filename>/var/log/maillog</span> 中的信息。</p></div><div class=paragraph><p>如欲了解更多的信息， 请参看 sendmail 网站上的 <a href=http://www.sendmail.org/~ca/email/auth.html>关于 SMTP 验证</a> 的介绍。</p></div></div></div><div class=sect1><h2 id=mail-agents>29.11. 邮件用户代理<a class=anchor href=#mail-agents></a></h2><div class=sectionbody><div class=paragraph><p>邮件用户代理 (MUA) 是一个用于收发邮件的应用程序。 更进一步， 随着电子邮件的 "演化" 并愈发复杂， MUA 在和电子邮件相结合方面变得日趋强大； 这为用户提供了更多的功能和灵活性。 FreeBSD 包含了对于众多邮件用户代理的支持， 所有这些都可以通过 <a href=../ports/#ports>FreeBSD Ports Collection</a> 来轻松安装。 用户可以选择类似 evolution 以及 balsa 这样的图形界面程序， 也可以选择类似 mutt、 alpine 或 <code>mail</code> 这样的控制台程序， 或者某些大型机构使用的 web 界面。</p></div><div class=sect2><h3 id=mail-command>29.11.1. mail<a class=anchor href=#mail-command></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mail&amp;sektion=1&amp;format=html">mail(1)</a> 是 FreeBSD 中默认的邮件用户代理 (MUA)。 它是一个基于控制台的 MUA， 提供了所有用于收发文本形式的电子邮件所需的基本功能， 虽然它处理附件的能力有限， 而且只支持本地的信箱。</p></div><div class=paragraph><p>虽然 <code>mail</code> 没有内建的 POP 或 IMAP 服务器支持， 然而这些信箱可以通过类似 fetchmail 这样的应用程序， 来下载到本地的 <span class=filename>mbox</span> 文件中。 这一应用程序在本章的稍后部分 (<a href=#mail-fetchmail>使用 fetchmail</a>) 进行了介绍。</p></div><div class=paragraph><p>要收发邮件， 只需简单地使用 <code>mail</code> 命令， 如下所示：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% mail</code></pre></div></div><div class=paragraph><p>用户保存在 <span class=filename>/var/mail</span> 中的信箱的内容会被 <code>mail</code> 程序自动地读取。 如果信箱是空的， 程序会退出并给出一个消息表示没有邮件。 一旦读完了信箱， 将启动应用程序的界面， 并列出邮件。 所有的邮件会被自动编号， 类似下面的样子：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Mail version 8.1 6/6/93.  Type ? <span class=k>for </span>help.
<span class=s2>&#34;/var/mail/marcs&#34;</span>: 3 messages 3 new
<span class=o>&gt;</span>N  1 root@localhost        Mon Mar  8 14:05  14/510   <span class=s2>&#34;test&#34;</span>
 N  2 root@localhost        Mon Mar  8 14:05  14/509   <span class=s2>&#34;user account&#34;</span>
 N  3 root@localhost        Mon Mar  8 14:05  14/509   <span class=s2>&#34;sample&#34;</span></code></pre></div></div><div class=paragraph><p>现在， 您通过使用 <code>mail</code> 的 <kbd>t</kbd> 命令， 并给出邮件的编号， 就可以看到邮件了。 在这个例子中， 我们将阅读第一封邮件：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&amp; t 1
Message 1:
From root@localhost  Mon Mar  8 14:05:52 2004
X-Original-To: marcs@localhost
Delivered-To: marcs@localhost
To: marcs@localhost
Subject: <span class=nb>test
</span>Date: Mon,  8 Mar 2004 14:05:52 +0200 <span class=o>(</span>SAST<span class=o>)</span>
From: root@localhost <span class=o>(</span>Charlie Root<span class=o>)</span>

This is a <span class=nb>test </span>message, please reply <span class=k>if </span>you receive it.</code></pre></div></div><div class=paragraph><p>正如在上面的例子中所看到的， <kbd>t</kbd> 键将显示完整的邮件头。 要再次查看邮件的列表， 可以使用 <kbd>h</kbd> 键。</p></div><div class=paragraph><p>如果需要回复邮件， 也可以使用 <code>mail</code> 来完成， 方法是使用 <kbd>R</kbd> 或 <kbd>r</kbd> 这两个 <code>mail</code>键。 <kbd>R</kbd> 键会要求 <code>mail</code> 只回复发送邮件的人， 而 <kbd>r</kbd> 不仅回复发送邮件的人， 而且也会将回复抄送给原来邮件的其他接收者。 如果需要， 也可以在这些命令后面指定邮件的编号。 做完这些之后， 就可以输入回复了， 在邮件的最后应该有一个只有一个 <kbd>.</kbd> 的行， 例如：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&amp; R 1
To: root@localhost
Subject: Re: <span class=nb>test

</span>Thank you, I did get your email.
<span class=nb>.</span>
EOT</code></pre></div></div><div class=paragraph><p>要发出新邮件， 可以使用 <kbd>m</kbd>， 后面接收件人的邮件地址。 多个收件人之间， 应该使用 <kbd>,</kbd> 隔开。 接下来需要输入邮件的主题， 然后是正文。 同样的， 在邮件最后需要一个只有 <kbd>.</kbd> 的空行表示结束。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&amp; mail root@localhost
Subject: I mastered mail

Now I can send and receive email using mail ... :<span class=o>)</span>
<span class=nb>.</span>
EOT</code></pre></div></div><div class=paragraph><p>在 <code>mail</code> 工具中， 可以用 <kbd>?</kbd> 来显示帮助， 而参考 <a href="https://man.freebsd.org/cgi/man.cgi?query=mail&amp;sektion=1&amp;format=html">mail(1)</a> 联机手册则可以获得更多关于 <code>mail</code> 的帮助信息。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>正如前面所提到的那样， <a href="https://man.freebsd.org/cgi/man.cgi?query=mail&amp;sektion=1&amp;format=html">mail(1)</a> 命令在设计时没有考虑到要处理附件， 因而在这方面他的功能很弱。 新的 MUA， 如 mutt， 能够更好地处理附件。 但如果您仍然希望使用 <code>mail</code> 命令， 那么 <a class=package href=https://cgit.freebsd.org/ports/tree/converters/mpack/>converters/mpack</a> port 则是一个值得考虑的附加工具。</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=mutt-command>29.11.2. mutt<a class=anchor href=#mutt-command></a></h3><div class=paragraph><p>mutt 是一个短小精悍的邮件用户代理， 它提供了许多卓越的功能， 包括：</p></div><div class=ulist><ul><li><p>能够按线索阅读邮件；</p></li><li><p>支持使用 PGP 对邮件进行数字签名和加密；</p></li><li><p>支持 MIME；</p></li><li><p>支持 Maildir；</p></li><li><p>高度可定制。</p></li></ul></div><div class=paragraph><p>所有这些特性， 都使得 mutt 得以跻身于目前最先进的邮件用户代理的行列。 请参考 <a href=http://www.mutt.org>http://www.mutt.org</a> 以了解更多关于 mutt 的资料。</p></div><div class=paragraph><p>稳定版本的 mutt 可以通过 <a class=package href=https://cgit.freebsd.org/ports/tree/mail/mutt/>mail/mutt</a> port 来安装， 而开发版本， 则可以通过使用 <a class=package href=https://cgit.freebsd.org/ports/tree/mail/mutt-devel/>mail/mutt-devel</a> port 安装。 通过 port 安装之后，可以通过下面的命令来启动 mutt：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% mutt</code></pre></div></div><div class=paragraph><p>mutt 会自动读取 <span class=filename>/var/mail</span> 中的用户信箱， 并显示其内容。 如果用户信箱中没有邮件， 则 mutt 将等待来自用户的命令。 下面的例子展示了 mutt 列出邮件的情形：</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/mutt1.png alt=mutt1></div></div><div class=paragraph><p>要阅读邮件， 只需用光标键选择它， 然后按 <kbd>Enter</kbd> 键。 以下是 mutt 显示邮件的例子：</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/mutt2.png alt=mutt2></div></div><div class=paragraph><p>和 <a href="https://man.freebsd.org/cgi/man.cgi?query=mail&amp;sektion=1&amp;format=html">mail(1)</a> 类似， mutt 允许用户只回复发件人， 或者回复所有人。 如果只想回复发信人， 使用 <kbd>r</kbd> 快捷键。 要回复所有人 (group reply)， 可以用 <kbd>g</kbd> 快捷键。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>mutt 会使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a> 命令作为编辑器， 用于创建和回复邮件。 这一行为可以通过建立用户自己的 <span class=filename>.muttrc</span> 文件来订制， 方法是修改 <code>editor</code> 变量或配置 <code>EDITOR</code> 环境变量。 请参见 <a href=http://www.mutt.org/>http://www.mutt.org/</a> 以了解配置 mutt 的进一步信息。</p></div></td></tr></tbody></table></div><div class=paragraph><p>要撰写新邮件， 需要首先按 <kbd>m</kbd>。 在输入了有效的邮件主题之后， mutt 将启动 <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a>， 您可以在其中撰写邮件。 写好邮件的内容之后， 存盘并退出 <code>vi</code>， 则 mutt 将继续， 并显示一些关于将发出的邮件的摘要信息。 要发送邮件， 只需按 <kbd>y</kbd>。 下面给出了摘要信息的一个例子：</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/mutt3.png alt=mutt3></div></div><div class=paragraph><p>mutt 也提供了相当详尽的帮助， 在绝大多数菜单中， 都可以使用 <kbd>?</kbd> 键将其呼出。 屏幕顶行中也会给出常用的快捷键。</p></div></div><div class=sect2><h3 id=alpine-command>29.11.3. alpine<a class=anchor href=#alpine-command></a></h3><div class=paragraph><p>alpine 主要是针对初学者设计的， 但也提供了一些高级功能。</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>过去， alpine 软件被发现有许多远程漏洞， 这些漏洞会允许远程的攻击者在用户的本地系统上， 通过发送精心炮制的邮件来执行任意的代码。 所有的 <em>已知</em> 问题都已经被修正了， 但 alpine 的代码是以很不安全的风格编写的， 并且 FreeBSD 安全官相信仍然有一些尚未被发现的安全漏洞。 您应当考虑并承担安装 alpine 可能带来的风险。</p></div></td></tr></tbody></table></div><div class=paragraph><p>最新版本的 alpine 可以通过使用 <a class=package href=https://cgit.freebsd.org/ports/tree/mail/alpine/>mail/alpine</a> port 来安装。 装好之后， alpine 可以通过下面的命令启动：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% alpine</code></pre></div></div><div class=paragraph><p>第一次启动 alpine 时， 它会显示出一个欢迎页， 并给出简要的介绍， 以及 alpine 开发小组要求用户匿名发送一封邮件， 以便帮助他们了解有多少用户在使用他们开发的客户程序的请求。 要发送这封匿名的邮件， 请按 <kbd>Enter</kbd>， 您也可以按 <kbd>E</kbd> 退出， 而不发送匿名邮件。 下面是欢迎页的一个例子：</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/pine1.png alt=pine1></div></div><div class=paragraph><p>接下来展现给用户的将是主菜单， 可以很容易地通过光标键在上面进行选择。 这个主菜单提供了用于撰写新邮件、 浏览邮件目录， 甚至管理地址簿等等的快捷方式。 主菜单下面是完成各种功能的快捷键说明。</p></div><div class=paragraph><p>由 alpine 打开的默认目录是 <span class=filename>inbox</span>。 要查看邮件索引， 应按 <kbd>I</kbd>， 或选择下面所示的 <span class=guimenuitem>MESSAGE INDEX</span> 选项：</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/pine2.png alt=pine2></div></div><div class=paragraph><p>邮件索引展示了当前目录下的邮件， 可以使用光标键翻阅。 按 <kbd>Enter</kbd> 键阅读高亮选定的邮件。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/pine3.png alt=pine3></div></div><div class=paragraph><p>在上面的截屏中， 使用 alpine 显示了一封示例邮件。 在屏幕底部也显示了快捷键供参考。 其中的一个例子是 <kbd>r</kbd> 键， 它告诉 MUA 回复正显示的邮件。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/pine4.png alt=pine4></div></div><div class=paragraph><p>在 alpine 中回复邮件， 是通过 pico 编辑器完成的， 后者默认情况下会随 alpine 一起安装。 而 pico 工具使得浏览邮件变得更加简单， 并且要比 <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a> 或 <a href="https://man.freebsd.org/cgi/man.cgi?query=mail&amp;sektion=1&amp;format=html">mail(1)</a> 更能容忍误操作。 回复写好之后， 可以用 <span class=keyseq><kbd>Ctrl</kbd>+<kbd>X</kbd></span> 来发出它。 此前， alpine 程序会要求确认。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/mail/pine5.png alt=pine5></div></div><div class=paragraph><p>alpine 程序可以通过使用主菜单中的 <span class=guimenuitem>SETUP</span> 选项来进行定制。 请参考 <a href=http://www.washington.edu/alpine/>http://www.washington.edu/alpine/</a> 来了解更多信息。</p></div></div></div></div><div class=sect1><h2 id=mail-fetchmail>29.12. 使用 fetchmail<a class=anchor href=#mail-fetchmail></a></h2><div class=sectionbody><div class=paragraph><p>fetchmail 是一个全功能的 IMAP 和 POP 客户程序， 它允许用户自动地从远程的 IMAP 和 POP 服务器上下载邮件， 并保存到本地的信箱中； 这样， 访问这些邮件就变得更方便了。 fetchmail 可以通过 <a class=package href=https://cgit.freebsd.org/ports/tree/mail/fetchmail/>mail/fetchmail</a> port 安装， 它提供了许多有用的功能， 其中包括：</p></div><div class=ulist><ul><li><p>支持 POP3、 APOP、 KPOP、 IMAP、 ETRN 以及 ODMR 协议。</p></li><li><p>通过 SMTP 转发邮件， 这使得过滤、 转发， 以及邮件别名能够正常工作。</p></li><li><p>能够以服务程序的方式运行， 并周期性地检查邮件。</p></li><li><p>能够从多个信箱收取邮件， 并根据配置， 将这些邮件转发给不同的本地用户。</p></li></ul></div><div class=paragraph><p>尽管介绍全部 fetchmail 的功能超出了本书的范围， 但这里仍然介绍了其基本的功能。 fetchmail 工具需要一个名为 <span class=filename>.fetchmailrc</span> 的配置文件才能正常工作。 这个文件中包含了服务器信息， 以及登录使用的凭据。 由于这个文件包含敏感内容， 建议将其设置为只有属主所有， 使用下面的命令：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>chmod </span>600 .fetchmailrc</code></pre></div></div><div class=paragraph><p>下面的 <span class=filename>.fetchmailrc</span> 提供了一个将某一用户的信箱通过 POP 下载到本地的例子。 它告诉 fetchmail 连接到 <code>example.com</code>， 并使用用户名 <code>joesoap</code> 和口令 <code>XXX</code>。 这个例子假定 <code>joesoap</code> 同时也是本地的系统用户。</p></div><div class="literalblock programlisting"><div class=content><pre>poll example.com protocol pop3 username &#34;joesoap&#34; password &#34;XXX&#34;</pre></div></div><div class=paragraph><p>下一个例子将连接多个 POP 和 IMAP 服务器， 并根据需要转到不同的本地用户：</p></div><div class="literalblock programlisting"><div class=content><pre>poll example.com proto pop3:
user &#34;joesoap&#34;, with password &#34;XXX&#34;, is &#34;jsoap&#34; here;
user &#34;andrea&#34;, with password &#34;XXXX&#34;;
poll example2.net proto imap:
user &#34;john&#34;, with password &#34;XXXXX&#34;, is &#34;myth&#34; here;</pre></div></div><div class=paragraph><p>另外， fetchmail 也可以通过指定 <code>-d</code> 参数， 并给出 fetchmail 在轮询 <span class=filename>.fetchmailrc</span> 文件中列出的服务器的时间间隔， 来以服务程序的方式运行。 下面的例子会让 fetchmail 每 600 秒轮询一次：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% fetchmail <span class=nt>-d</span> 600</code></pre></div></div><div class=paragraph><p>更多关于 fetchmail 的资料， 可以在 <a href=http://fetchmail.berlios.de/>http://fetchmail.berlios.de/</a> 找到。</p></div></div></div><div class=sect1><h2 id=mail-procmail>29.13. 使用 procmail<a class=anchor href=#mail-procmail></a></h2><div class=sectionbody><div class=paragraph><p>procmail 是一个强大得惊人的过滤进入邮件的应用程序。 它允许用户定义 "规则"， 并用这些规则来匹配进入的邮件， 进而执行某些特定的功能， 或将这些邮件转发到其他信箱和/或邮件地址。 procmail 可以通过 <a class=package href=https://cgit.freebsd.org/ports/tree/mail/procmail/>mail/procmail</a> port 来安装。 装好之后， 可以直接把它集成到绝大多数 MTA 中； 请参考您使用的 MTA 的文档了解具体的作法。 另外， procmail 可允许通过把下面的设置加入到用户主目录中的 <span class=filename>.forward</span> 文件中， 来启用 procmail 功能：</p></div><div class="literalblock programlisting"><div class=content><pre>&#34;|exec /usr/local/bin/procmail || exit 75&#34;</pre></div></div><div class=paragraph><p>接下来我们将介绍一些基本的 procmail 规则， 以及它们都是做什么的。 各种各样的规则， 都应该写到 <span class=filename>.procmailrc</span> 文件中， 而这个文件则必须放在用户的主目录下。</p></div><div class=paragraph><p>主要的规则， 也可以在 <a href="https://man.freebsd.org/cgi/man.cgi?query=procmailex&amp;sektion=5&amp;format=html">procmailex(5)</a> 联机手册中找到。</p></div><div class=paragraph><p>将所有来自 <a href=mailto:user@example.com>user@example.com</a> 的邮件， 转发到外部地址 <a href=mailto:goodmail@example2.com>goodmail@example2.com</a>：</p></div><div class="literalblock programlisting"><div class=content><pre>:0
* ^From.*user@example.com
! goodmail@example2.com</pre></div></div><div class=paragraph><p>转发所有不超过 1000 字节的邮件到外部地址 <a href=mailto:goodmail@example2.com>goodmail@example2.com</a>：</p></div><div class="literalblock programlisting"><div class=content><pre>:0
* &lt; 1000
! goodmail@example2.com</pre></div></div><div class=paragraph><p>把所有发送到 <a href=mailto:alternate@example.com>alternate@example.com</a> 的邮件放到信箱 <span class=filename>alternate</span> 中：</p></div><div class="literalblock programlisting"><div class=content><pre>:0
* ^TOalternate@example.com
alternate</pre></div></div><div class=paragraph><p>将所有标题为 "Spam" 的邮件发到 <span class=filename>/dev/null</span>：</p></div><div class="literalblock programlisting"><div class=content><pre>:0
^Subject:.*Spam
/dev/null</pre></div></div><div class=paragraph><p>将收到的所有 <code>FreeBSD.org</code> 邮件列表的邮件， 转发到各自的信箱：</p></div><div class="literalblock programlisting"><div class=content><pre>:0
* ^Sender:.owner-freebsd-\/[^@]+@FreeBSD.ORG
{
	LISTNAME=${MATCH}
	:0
	* LISTNAME??^\/[^@]+
	FreeBSD-${MATCH}
}</pre></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: March 9, 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/zh-cn/books/handbook/ppp-and-slip class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/zh-cn/books/handbook/network-servers class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#mail-synopsis>29.1. 概述</a></li><li><a href=#mail-using>29.2. 使用电子邮件</a></li><li><a href=#sendmail>29.3. sendmail 配置</a></li><li><a href=#mail-changingmta>29.4. 改变您的邮件传输代理程序</a></li><li><a href=#mail-trouble>29.5. 疑难解答</a></li><li><a href=#mail-advanced>29.6. 高级主题</a></li><li><a href=#SMTP-UUCP>29.7. SMTP 与 UUCP</a></li><li><a href=#outgoing-only>29.8. 只发送邮件的配置</a></li><li><a href=#SMTP-dialup>29.9. 拨号连接时使用邮件传送</a></li><li><a href=#SMTP-Auth>29.10. SMTP 验证</a></li><li><a href=#mail-agents>29.11. 邮件用户代理</a></li><li><a href=#mail-fetchmail>29.12. 使用 fetchmail</a></li><li><a href=#mail-procmail>29.13. 使用 procmail</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/zh-cn/books/handbook/handbook_zh-cn.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/zh-cn/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/zh-cn/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>简体中文</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/zh-cn class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/zh-cn/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>