<!doctype html><html class=theme-light lang=mn><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/><title>Бүлэг 32. Сүлжээний нэмэлт ойлголтууд | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Бүлэг 32. Сүлжээний нэмэлт ойлголтууд"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="mn"><meta property="og:url" content="http://172.16.201.134:1313/mn/books/handbook/advanced-networking/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/mn\/books\/handbook\/advanced-networking\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/mn>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/mn/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/mn/books>Books</a></li><li><a href=http://172.16.201.134:1313/mn/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/mn/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=mn>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/preface/>Өмнөх үг</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/preface/#preface-audience>Энэ номын зориулалт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/preface/#preface-changes-from3>Гурав дахь хэвлэлээс хойшх өөрчлөлтүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/preface/#preface-changes-from2>Хоёр дахь хэвлэлээс (2004) хойшх өөрчлөлтүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/preface/#preface-changes>Эхний хэвлэлээс (2001) хойшх өөрчлөлтүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/preface/#preface-overview>Энэ номын зохион байгуулалт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/preface/#preface-conv>Энэ номонд ашиглагдсан бичиглэлийн хэлбэрүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/preface/#preface-acknowledgements>Талархал</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/parti/>хэсэг I. Эхлэл</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/introduction/>Бүлэг 1. Танилцуулга</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/introduction/#introduction-synopsis>1.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/introduction/#nutshell>1.2. FreeBSD-д тавтай морилно уу!</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/introduction/#history>1.3. FreeBSD Төслийн тухай</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/>Бүлэг 2. FreeBSD 9.X болон түүнээс хойшхи хувилбаруудыг суулгах нь</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. Тоног төхөөрөмжийн шаардлагууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-pre>2.3. Суулгахын өмнөх ажлууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-start>2.4. Суулгалтыг эхлүүлэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#using-bsdinstall>2.5. bsdinstall-г танилцуулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-netinstall>2.6. Сүлжээнээс суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-partitioning>2.7. Дискний зай авах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-final-warning>2.8. Суулгалтыг гүйцэтгэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-post>2.9. Суулгасны дараах үйлдлүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.10. Асуудлыг олж засварлах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bsdinstall/#using-live-cd>2.11. Амьд CD ашиглах нь</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/install/>Бүлэг 3. FreeBSD 8.X болон түүнээс өмнөх хувилбар суулгах нь</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-synopsis>3.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-hardware>3.2. Системд тавигдах төхөөрөмжийн шаардлага</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-pre>3.3. Суулгацын өмнө</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-start>3.4. Суулгацыг эхлүүлэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#using-sysinstall>3.5. Sysinstall-н танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-steps>3.6. Дискний зайг зохицуулах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-choosing>3.7. Юу суулгахаа сонгох</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-media>3.8. Суулгацын төхөөрөмжөө сонгох</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-final-warning>3.9. Суулгацыг баталж гүйцээх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-post>3.10. Суулгацын дараах тохиргоо</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-trouble>3.11. Хүндрэл тулгарвал</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-advanced>3.12. Суулгацын нэмэлт гарын авлага</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/install/#install-diff-media>3.13. Өөртөө зориулж тусгай суулгацын төхөөрөмж бэлдэх нь</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/basics/>Бүлэг 4. Юниксийн үндэс</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#basics-synopsis>4.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#consoles>4.2. Виртуал консол болон терминал</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#permissions>4.3. Зөвшөөрлүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#dirstructure>4.4. Сангийн бүтэц</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#disk-organization>4.5. Диск зохион байгуулалт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#mount-unmount>4.6. Файл системийг холбох болон салгах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#basics-processes>4.7. Процесс буюу програмын явц</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#basics-daemons>4.8. Далд чөтгөр буюу дэмонууд, дохионууд, мөн процессуудыг зогсоох нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#shells>4.9. Shell буюу бүрхүүл</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#editors>4.10. Текст засварлагчид</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#basics-devices>4.11. Төхөөрөмж ба төхөөрөмжийн цэгүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#binary-formats>4.12. Хоёртын хэлбэрүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/basics/#basics-more-information>4.13. Нэмэлт мэдээлэл олж авах нь</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/ports/>Бүлэг 5. Програм суулгах: Багцууд болон портууд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#ports-synopsis>5.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#ports-overview>5.2. Програм суулгацын ерөнхий ойлголт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#ports-finding-applications>5.3. Програмаа олох нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#packages-using>5.4. Багцалсан системийг хэрэглэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#pkgng-intro>5.5. pkgng-г бинар багцыг удирдахад ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#ports-using>5.6. Портын цуглуулгыг хэрэглэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#ports-nextsteps>5.7. Порт суулгасны дараах үйлдлүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ports/#ports-broken>5.8. Эвдрэлтэй портыг засах нь</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/x11/>Бүлэг 6. X Цонхот систем</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/x11/#x11-synopsis>6.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/x11/#x-understanding>6.2. X-г таньж мэдэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/x11/#x-install>6.3. X11-г суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/x11/#x-config>6.4. X11-н тохируулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/x11/#x-fonts>6.5. X11 дээр үсгийн маяг хэрэглэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/x11/#x-xdm>6.6. X Display Manager буюу харуулалт зохицуулагч</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/x11/#x11-wm>6.7. Дэлгэцийн орчин</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/partii/>хэсэг II. Нийтлэг асуудлууд</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/desktop/>Бүлэг 7. Ширээний програмууд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/desktop/#desktop-synopsis>7.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/desktop/#desktop-browsers>7.2. Хөтчүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/desktop/#desktop-productivity>7.3. Бүтээмж</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/desktop/#desktop-viewers>7.4. Бичиг баримт үзүүлэгчид</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/desktop/#desktop-finance>7.5. Санхүү</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/desktop/#desktop-summary>7.6. Дүгнэлт</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/>Бүлэг 8. Мультимедиа</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/#multimedia-synopsis>8.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/#sound-setup>8.2. Дууны картыг тохируулах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/#sound-mp3>8.3. MP3 аудио</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/#video-playback>8.4. Видео тоглуулах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/#tvcard>8.5. ТВ картуудыг тохируулах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/#mythtv>8.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/multimedia/#scanners>8.7. Дүрс скан хийгчид</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/>Бүлэг 9. FreeBSD цөмийг тохируулах нь</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Яагаад өөрчлөн тохируулсан цөм бүтээх хэрэгтэй вэ?</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/#kernelconfig-devices>9.3. Системийн тоног төхөөрөмж хайж олох нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Цөмийн драйверууд, дэд системүүд, болон модулиуд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/#kernelconfig-building>9.5. Өөрчлөн тохируулсан цөмийг бүтээх ба суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/#kernelconfig-config>9.6. Тохиргооны файл</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Хэрэв ямар нэг юм буруутвал</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/printing/>Бүлэг 10. Хэвлэлт</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/printing/#printing-synopsis>10.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/printing/#printing-intro-spooler>10.2. Танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/printing/#printing-intro-setup>10.3. Үндсэн тохируулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/printing/#printing-advanced>10.4. Хэвлэгчийн илүү нарийн тохиргоо</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/printing/#printing-using>10.5. Хэвлэгчдийг ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/printing/#printing-lpd-alternatives>10.6. Хэвлэгчийн стандарт түр хадгалагчидтай ижил хадгалагчид</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/printing/#printing-troubleshooting>10.7. Алдааг олж засварлах</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/>Бүлэг 11. Линуксийн Хоёртын Нийлэмж</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Суулгалт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Mathematica® суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/#linuxemu-maple>11.4. Maple™ суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/#linuxemu-matlab>11.5. MATLAB® суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/#linuxemu-oracle>11.6. Oracle® суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/linuxemu/#linuxemu-advanced>11.7. Нэмэлт сэдвүүд</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/partiii/>хэсэг III. Системийн Удирдлага</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/config/>Бүлэг 12. Тохиргоо ба Тааруулалт</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#config-synopsis>12.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-initial>12.2. Эхний Тохиргоо</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-core-configuration>12.3. Гол Тохиргоо</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-appconfig>12.4. Програмын Тохиргоо</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-starting-services>12.5. Үйлчилгээнүүдийг эхлүүлэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-cron>12.6. <code>cron</code> хэрэгслийг тохируулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-rcd>12.7. FreeBSD дээр rc(8) ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#config-network-setup>12.8. Сүлжээний интерфэйс картууд суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-virtual-hosts>12.9. Виртуал Хостууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-syslog>12.10. Системийн лог хийгч syslogd-г тохируулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-configfiles>12.11. Тохиргооны Файлууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-sysctl>12.12. sysctl(8) ашиглан тааруулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-disk>12.13. Дискнүүдийг тааруулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#configtuning-kernel-limits>12.14. Цөмийн хязгаарууд тохируулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#adding-swap-space>12.15. Swap зай нэмэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#acpi-overview>12.16. Тэжээл болон Эх үүсвэрийн Удирдлага</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/config/#ACPI-debug>12.17. FreeBSD-ийн ACPI-г ашиглах нь ба дибаг хийх нь</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/boot/>Бүлэг 13. FreeBSD-ийн Ачаалах процесс</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/boot/#boot-synopsis>13.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/boot/#boot-introduction>13.2. Ачаалалтын асуудал</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/boot/#boot-blocks>13.3. Ачаалагч Менежер болон Ачаалалтын шатууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/boot/#boot-kernel>13.4. Ачаалах үе дэх цөмийн харилцан үйлдэл</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/boot/#device-hints>13.5. Төхөөрөмжийн Сануулгууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/boot/#boot-init>13.6. Init: Процесс хяналтын эхлүүлэлт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/boot/#boot-shutdown>13.7. Унтраах дараалал</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/users/>Бүлэг 14. Хэрэглэгчид ба үндсэн бүртгэл зохицуулалт</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-synopsis>14.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-introduction>14.2. Танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-superuser>14.3. Супер хэрэглэгчийн бүртгэл</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-system>14.4. Систем бүртгэл</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-user>14.5. Энгийн хэрэглэгчийн бүртгэл</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-modifying>14.6. Бүртгэлд өөрчлөлт хийх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-limiting>14.7. Хэрэглэгчдэд хязгаарлалт хийх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/users/#users-groups>14.8. Бүлэг</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/security/>Бүлэг 15. Аюулгүй байдал</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#security-synopsis>15.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#security-intro>15.2. Танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#securing-freebsd>15.3. FreeBSD-н аюулгүй байдлыг хангах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 болон Crypt</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#one-time-passwords>15.5. Нэг удаагийн нууц үгүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#tcpwrappers>15.6. TCP Гүйцэтгэлийг хялбаршуулагчид</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#kerberos5>15.7. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#openssl>15.8. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#ipsec>15.9. IPsec дээгүүр VPN хийх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#openssh>15.10. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#fs-acl>15.11. Файлын системийн хандалт хянах жагсаалтууд(ACL-үүд)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#security-portaudit>15.12. Гуравдагч талын аюулгүй байдлын асуудлуудыг монитор хийх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#security-advisories>15.13. FreeBSD-ийн аюулгүй байдлын зөвлөгөөнүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/security/#security-accounting>15.14. Процессийн бүртгэл хөтлөх</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/jails/>Бүлэг 16. Jails буюу Шоронгууд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/jails/#jails-synopsis>16.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/jails/#jails-terms>16.2. Шоронгуудтай холбоотой ойлголтууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/jails/#jails-intro>16.3. Танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/jails/#jails-build>16.4. Шоронг үүсгэж хянах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/jails/#jails-tuning>16.5. Нарийн тааруулалт болон удирдлага</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/jails/#jails-application>16.6. Шоронгийн хэрэглээ</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/mac/>Бүлэг 17. Mandatory Access Control буюу Албадмал Хандалтын хяналт</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-synopsis>17.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-inline-glossary>17.2. Энэ бүлэг дэх түлхүүр ухагдахуунууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-initial>17.3. MAC-ийн тайлбар</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-understandlabel>17.4. MAC хаяг/шошгонуудыг ойлгох нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-planning>17.5. Аюулгүй байдлын тохиргоог төлөвлөх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-modules>17.6. Модулийн тохиргоо</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-seeotheruids>17.7. MAC seeotheruids модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-bsdextended>17.8. MAC bsdextended модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-ifoff>17.9. MAC ifoff модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-portacl>17.10. MAC portacl модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-partition>17.11. MAC хуваалтын модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-mls>17.12. MAC олон түвшинт аюулгүй байдлын модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-biba>17.13. MAC Biba модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-lomac>17.14. MAC LOMAC модуль</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-implementing>17.15. MAC Шорон дахь Nagios</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-userlocked>17.16. Хэрэглэгчийг түгжих</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mac/#mac-troubleshoot>17.17. MAC Тогтолцооны алдааг олж засварлах</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/audit/>Бүлэг 18. Аюулгүй байдлын үйл явцад аудит хийх нь</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/audit/#audit-synopsis>18.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/audit/#audit-inline-glossary>18.2. Энэ бүлгийн түлхүүр ухагдахуунууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/audit/#audit-install>18.3. Аудит хийх дэмжлэг суулгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/audit/#audit-config>18.4. Аудитийн тохиргоо</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/audit/#audit-administration>18.5. Аудит дэд системийг удирдах нь</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/disks/>Бүлэг 19. Хадгалалт</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#disks-synopsis>19.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#disks-naming>19.2. Төхөөрөмжийн нэрс</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#disks-adding>19.3. Диск нэмэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#raid>19.4. RAID</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#usb-disks>19.5. USB хадгалалтын төхөөрөмжүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#creating-cds>19.6. Оптик зөөвөрлөгчийг (CD-үүд) үүсгэж ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#creating-dvds>19.7. Оптик зөөвөрлөгчийг (DVD-үүд) үүсгэж ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#floppies>19.8. Уян дискнүүдийг үүсгэж ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#backups-tapebackups>19.9. Өгөгдлийн соронзон хальснууд үүсгэж ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#backups-floppybackups>19.10. Уян диск уруу нөөцлөх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#backup-strategies>19.11. Нөөцлөх стратегууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#backup-basics>19.12. Нөөцлөлтийн үндсүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#disks-virtual>19.13. Сүлжээ, санах ой болон файл дээр тулгуурласан файлын системүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#snapshots>19.14. Файлын системийн хормын хувилбарууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#quotas>19.15. Файлын системийн ноогдлууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#disks-encrypting>19.16. Дискний хуваалтуудыг шифрлэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#swap-encrypting>19.17. Swap зайг шифрлэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/disks/#disks-hast>19.18. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/geom/>Κεφάλαιο 20. GEOM: Διαχείριση Συστοιχιών Δίσκων</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#GEOM-synopsis>20.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#GEOM-intro>20.2. GEOM-ийн Танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#GEOM-striping>20.3. RAID0 - Судал үүсгэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#GEOM-mirror>20.4. RAID1 - Толин тусгал үүсгэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#GEOM-raid3>20.5. RAID3 - Parity бүхий байтын түвшний тусдаа судалжуулалт (Striping)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#geom-ggate>20.6. GEOM Хаалга Сүлжээний Төхөөрөмжүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#geom-glabel>20.7. Дискний төхөөрөмжүүдийг хаяглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/geom/#geom-gjournal>20.8. GEOM-ийн тусламжтай UFS тэмдэглэл</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/filesystems/>Бүлэг 21. Файлын системийн дэмжлэг</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/filesystems/#filesystems-synopsis>21.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/filesystems/#filesystems-zfs>21.2. Z Файлын Систем (ZFS)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/filesystems/#filesystems-linux>21.3. Linux® файлын системүүд</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/>Бүлэг 22. Vinum Эзлэхүүн Менежер</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-synopsis>22.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-intro>22.2. Дискнүүд хэтэрхий жижиг</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-access-bottlenecks>22.3. Хандалтын тагларалтууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-data-integrity>22.4. Өгөгдлийн бүрэн бүтэн байдал</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-objects>22.5. Vinum обьектууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-examples>22.6. Зарим жишээнүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-object-naming>22.7. Обьектийн нэрлэлт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-config>22.8. Vinum тохируулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/vinum/#vinum-root>22.9. Root файлын системийн хувьд Vinum-ийг ашиглах нь</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/virtualization/>Бүлэг 23. Виртуалчлал</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/virtualization/#virtualization-synopsis>23.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/virtualization/#virtualization-guest>23.2. FreeBSD-г зочин OS маягаар ашиглах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/virtualization/#virtualization-host>23.3. FreeBSD-г хост буюу эх маягаар ашиглах</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/l10n/>Бүлэг 24. Локалчлал - I18N/L10N-ийн хэрэглээ болон тохируулга</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/l10n/#l10n-synopsis>24.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/l10n/#l10n-basics>24.2. Үндсүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/l10n/#using-localization>24.3. Локалчлалыг ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/l10n/#l10n-compiling>24.4. I18N програмуудыг эмхэтгэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/l10n/#lang-setup>24.5. FreeBSD-г өөр хэлнүүд уруу локалчлах</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/>Бүлэг 25. FreeBSD-г шинэчилж сайжруулах нь</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#updating-upgrading-synopsis>25.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>25.2. FreeBSD-ийн шинэчлэлт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#updating-upgrading-portsnap>25.3. Portsnap: Портын цуглуулгыг шинэчлэх хэрэгсэл</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#updating-upgrading-documentation>25.4. Баримтын цуглуулгыг шинэчлэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#current-stable>25.5. Хөгжүүлэлтийн салбарыг дагах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#synching>25.6. Өөрийн эхийг хамгийн сүүлийн хэлбэрт аваачих нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#makeworld>25.7. "Ертөнц"ийг дахин бүтээх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#make-delete-old>25.8. Хуучин файлууд, хавтаснууд болон сангуудыг устгах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/cutting-edge/#small-lan>25.9. Олон машины хувьд дагах нь</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/dtrace/>Бүлэг 26. DTrace</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/dtrace/#dtrace-synopsis>26.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/dtrace/#dtrace-implementation>26.2. Шийдлийн ялгаанууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/dtrace/#dtrace-enable>26.3. DTrace дэмжлэгийг идэвхжүүлэх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/dtrace/#dtrace-using>26.4. DTrace-г ашиглах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/dtrace/#dtrace-language>26.5. D хэл</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/partiv/>хэсэг IV. Сүлжээний Холболт</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/serialcomms/>Бүлэг 27. Цуваа холбоонууд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/serialcomms/#serial-synopsis>27.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/serialcomms/#serial>27.2. Танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/serialcomms/#term>27.3. Терминалууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/serialcomms/#dialup>27.4. Dial-in буюу гаднаас залгах үйлчилгээ</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/serialcomms/#dialout>27.5. Dial-out буюу гадагш залгах үйлчилгээ</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/serialcomms/#serialconsole-setup>27.6. Цуваа консолыг тохируулах нь</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/>Бүлэг 28. PPP болон SLIP</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>28.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/#userppp>28.2. Хэрэглэгчийн PPP ашиглах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/#ppp>28.3. Цөмийн PPP-г ашиглах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/#ppp-troubleshoot>28.4. PPP холболтуудын алдааг олж засварлах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/#pppoe>28.5. Ethernet дээгүүр PPP ашиглах нь (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/#pppoa>28.6. ATM дээгүүр PPP (PPPoA) ашиглах</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/ppp-and-slip/#slip>28.7. SLIP ашиглах</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/mail/>Бүлэг 29. Цахим Шуудан</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-synopsis>29.1. Ерөнхий Агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-using>29.2. Цахим Захидлыг Хэрэглэх нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#sendmail>29.3. sendmail-г Тохируулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-changingmta>29.4. Өөрийн Захидал Дамжуулах Агентийг Солих нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-trouble>29.5. Гэмтэл саатлыг арилгах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-advanced>29.6. Дээд түвшний сэдвүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#SMTP-UUCP>29.7. UUCP-тэй SMTP</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#outgoing-only>29.8. Зөвхөн илгээхээр тохируулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#SMTP-dialup>29.9. Гадагш залгах холболтоор захидлыг ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#SMTP-Auth>29.10. SMTP нэвтрэлт танилт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-agents>29.11. Хэрэглэгчийн захидал дамжуулагчид</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-fetchmail>29.12. fetchmail-г ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mail/#mail-procmail>29.13. procmail-г ашиглах нь</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/>Бүлэг 30. Сүлжээний орчны Серверүүд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-servers-synopsis>30.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-inetd>30.2. inetd"Супер-Сервер"</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-nfs>30.3. Сүлжээний Файлын Систем (NFS)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-nis>30.4. Сүлжээний Мэдээллийн Систем (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-dhcp>30.5. Автомат Сүлжээний Тохиргоо (DHCP)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-dns>30.6. Домэйн Нэрийн Систем (DNS)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-apache>30.7. Apache HTTP Сервер</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-ftp>30.8. Файл Дамжуулах Протокол (FTP)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-samba>30.9. Microsoft® Windows® харилцагчдад зориулсан Файл болон Хэвлэх Үйлчилгээ (Samba)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-ntp>30.10. ntpd-р Цаг Тааруулах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/network-servers/#network-syslogd>30.11. <code>syslogd</code> ашиглан алсын хост руу бүртгэх нь</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls/>Бүлэг 31. Галт хана</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls/#firewalls-intro>31.1. Танилцуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls/#firewalls-concepts>31.2. Галт ханын тухай ойлголтууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls/#firewalls-apps>31.3. Галт ханын багцууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls/#firewalls-pf>31.4. OpenBSD Пакет шүүгч (PF) ба ALTQ</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls/#firewalls-ipf>31.5. IPFILTER (IPF) Галт хана</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls/#firewalls-ipfw>31.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle checked>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/>Бүлэг 32. Сүлжээний нэмэлт ойлголтууд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#advanced-networking-synopsis>32.1. Ерөнхий агуулга</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-routing>32.2. Гарцууд болон Чиглүүлэлтүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-wireless>32.3. Утасгүй сүлжээ</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-bluetooth>32.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-bridging>32.5. Гүүр</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-aggregation>32.6. Холбоос нэгтгэлт ба ослыг тойрон гарах (Link Aggregation and Failover)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-diskless>32.7. Дискгүй ажиллагаа</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-pxe-nfs>32.8. NFS root файлын систем ашиглан PXE ачаалалт хийх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-isdn>32.9. ISDN</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-natd>32.10. Network Address Translation буюу Сүлжээний Хаягийн Хөрвүүлэлт</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-ipv6>32.11. IPv6</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#network-atm>32.12. Asynchronous Transfer Mode (ATM) буюу Асинхрон Дамжуулах Горим</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/advanced-networking/#carp>32.13. Common Address Redundancy Protocol (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/partv/>хэсэг V. Хавсралтууд</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/>Хавсралт A. FreeBSD-г олж авах нь</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#mirrors-cdrom>A.1. CDROM болон DVD Нийтлэгчид</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#mirrors-ftp>A.2. FTP сайтууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#anoncvs>A.3. Нэргүй CVS(хуучирсан)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#ctm>A.4. CTM-г ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#svn>A.5. Subversion ашиглах нь</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#svn-mirrors>A.6. Subversion толин сайтууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#cvsup>A.7. CVSup-г ашиглах нь (хуучирсан)</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#cvs-tags>A.8. CVS Tags буюу хаягууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/mirrors/#mirrors-rsync>A.9. rsync сайтууд</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/>Хавсралт B. Ном зүй</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-freebsd>B.1. FreeBSD-ийн талаар тусгайлан бичсэн ном & сэтгүүлүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-userguides>B.2. Хэрэглэгчдийн гарын авлагууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-adminguides>B.3. Администраторууд зориулсан зааврууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-programmers>B.4. Програм зохиогчдод зориулсан зааврууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-osinternals>B.5. Үйлдлийн системийн дотоод бүрэлдэхүүнүүдийн талаар</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-security>B.6. Аюулгүй байдлын тухай номнууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-hardware>B.7. Тоног төхөөрөмжийн тухай номнууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-history>B.8. UNIX®-ийн түүх</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/bibliography/#bibliography-journals>B.9. Сонин, сэтгүүлүүд</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/eresources/>Хавсралт C. Интернэт дэх эх үүсвэрүүд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/eresources/#eresources-mail>C.1. Захидлын жагсаалтууд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/eresources/#eresources-news>C.2. Usenet Newsgroups буюу мэдээний бүлгүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/eresources/#eresources-web>C.3. Word Wide Web серверүүд</a></li><li><a href=http://172.16.201.134:1313/mn/books/handbook/eresources/#eresources-email>C.4. Цахим захидлын хаягууд</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/mn/books/handbook/pgpkeys/>Хавсралт D. PGP түлхүүрүүд</a><ul><li><a href=http://172.16.201.134:1313/mn/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Officers</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Бүлэг 32. Сүлжээний нэмэлт ойлголтууд</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#advanced-networking-synopsis>32.1. Ерөнхий агуулга</a></li><li><a href=#network-routing>32.2. Гарцууд болон Чиглүүлэлтүүд</a></li><li><a href=#network-wireless>32.3. Утасгүй сүлжээ</a></li><li><a href=#network-bluetooth>32.4. Bluetooth</a></li><li><a href=#network-bridging>32.5. Гүүр</a></li><li><a href=#network-aggregation>32.6. Холбоос нэгтгэлт ба ослыг тойрон гарах (Link Aggregation and Failover)</a></li><li><a href=#network-diskless>32.7. Дискгүй ажиллагаа</a></li><li><a href=#network-pxe-nfs>32.8. NFS root файлын систем ашиглан PXE ачаалалт хийх</a></li><li><a href=#network-isdn>32.9. ISDN</a></li><li><a href=#network-natd>32.10. Network Address Translation буюу Сүлжээний Хаягийн Хөрвүүлэлт</a></li><li><a href=#network-ipv6>32.11. IPv6</a></li><li><a href=#network-atm>32.12. Asynchronous Transfer Mode (ATM) буюу Асинхрон Дамжуулах Горим</a></li><li><a href=#carp>32.13. Common Address Redundancy Protocol (CARP)</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=advanced-networking-synopsis>32.1. Ерөнхий агуулга<a class=anchor href=#advanced-networking-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Энэ бүлэг нь хэд хэдэн сүлжээний дэвшилтэт нэмэлт сэдвүүдийг хамрах болно.</p></div><div class=paragraph><p>Энэ бүлгийг уншсаны дараа, та дараах зүйлсийг мэдэх болно:</p></div><div class=ulist><ul><li><p>Гарцууд болон чиглүүлэлтүүдийн үндсүүд.</p></li><li><p>IEEE® 802.11 болон Bluetooth® төхөөрөмжүүдийг хэрхэн суулгах талаар.</p></li><li><p>FreeBSD-г гүүр болгож хэрхэн тохируулах талаар.</p></li><li><p>Дискгүй машин дээр сүлжээгээр ачаалахыг хэрхэн тохируулах талаар.</p></li><li><p>NFS root файлын систем ашиглан сүлжээгээр PXE ачаалалт хийхийг тохируулах талаар.</p></li><li><p>Сүлжээний хаягийн хөрвүүлэлтийг хэрхэн тохируулах талаар.</p></li><li><p>FreeBSD машин дээр IPv6-г хэрхэн тохируулах талаар.</p></li><li><p>ATM-ийг хэрхэн тохируулах талаар.</p></li><li><p>FreeBSD дээр Common Address Redundancy Protocol буюу CARP-ийн боломжуудыг хэрхэн идэвхжүүлж ашиглах талаар.</p></li></ul></div><div class=paragraph><p>Энэ бүлгийг уншихаасаа өмнө та дараах зүйлсийг гүйцэтгэх хэрэгтэй:</p></div><div class=ulist><ul><li><p><span class=filename>/etc/rc</span> скриптүүдийн үндсүүдийг ойлгосон байх.</p></li><li><p>Сүлжээний үндсэн ухагдахуудын талаар мэдлэгтэй байх.</p></li><li><p>Шинэ FreeBSD цөм хэрхэн тохируулж суулгах талаар мэдэх (<a href=../kernelconfig/#kernelconfig>FreeBSD цөмийг тохируулах нь</a>).</p></li><li><p>Нэмэлт гуравдагч талуудын хийсэн програм хангамжийг хэрхэн суулгах талаар мэдэх (<a href=../ports/#ports>Програм суулгах. Багцууд болон портууд</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=network-routing>32.2. Гарцууд болон Чиглүүлэлтүүд<a class=anchor href=#network-routing></a></h2><div class=sectionbody><div class=paragraph><p>Сүлжээгээр нэг машин нөгөө машиныг олж чаддаг байхын тулд нэгээс нөгөө уруу хэрхэн хүрэхийг тайлбарласан арга замууд байх ёстой. Үүнийг <em>routing</em> буюу <em>чиглүүлэлт хийх</em> гэдэг. "Чиглүүлэлт" нь "destination буюу зорьсон газар" болон "гарц" хаягийн хослолоор тодорхойлогддог. Хэрэв та энэ "зорьсон газар" уруу очихоор оролдож байгаа бол энэ "гарц"аар холбогдоно гэж энэ хослол нь зааж байгаа юм. Гурван төрлийн зорьсон газар байдаг: эдгээр нь хостууд, дэд сүлжээнүүд болон "анхдагч" юм. "Анхдагч чиглүүлэлт" нь аль ч чиглүүлэлтэд хамаарахгүй бол ашиглагддаг. Бид анхдагч чиглүүлэлтийн талаар дараа нь арай дэлгэрэнгүй ярилцах болно. Бас гурван төрлийн гарц байдаг: эдгээр нь хостууд, интерфэйсүүд (бас "links" буюу холбоосууд гэгддэг) болон Ethernet тоног төхөөрөмжийн хаягууд (MAC хаягууд) юм.</p></div><div class=sect2><h3 id=_жишээ>32.2.1. Жишээ<a class=anchor href=#_жишээ></a></h3><div class=paragraph><p>Чиглүүлэлтийн өөр ойлголтуудыг үзүүлэхийн тулд бид <code>netstat</code>-ийн дараах жишээг ашиглах болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% netstat <span class=nt>-r</span>
Routing tables

Destination      Gateway            Flags     Refs     Use     Netif Expire

default          outside-gw         UGSc       37      418      ppp0
localhost        localhost          UH          0      181       lo0
test0            0:e0:b5:36:cf:4f   UHLW        5    63288       ed0     77
10.20.30.255     <span class=nb>link</span><span class=c>#1             UHLW        1     2421</span>
example.com      <span class=nb>link</span><span class=c>#1             UC          0        0</span>
host1            0:e0:a8:37:8:1e    UHLW        3     4601       lo0
host2            0:e0:a8:37:8:1e    UHLW        0        5       lo0 <span class=o>=&gt;</span>
host2.example.com <span class=nb>link</span><span class=c>#1             UC          0        0</span>
224              <span class=nb>link</span><span class=c>#1             UC          0        0</span></code></pre></div></div><div class=paragraph><p>Эхний хоёр мөр нь анхдагч чиглүүлэлт (бид үүнийг <a href=#network-routing-default>дараагийн хэсэг</a>т авч үзэх болно) болон <code>localhost</code> чиглүүлэлтийг заана.</p></div><div class=paragraph><p>Энэ чиглүүлэлтийн хүснэгтийн заасан <code>localhost</code>-д зориулж ашиглах интерфэйс (<code>Netif</code> багана) нь <span class=filename>lo0</span> бөгөөд энэ нь бас loopback буюу буцах интерфэйс гэгддэг. Энэ нь уг очих газрын хувьд бүх урсгалыг LAN уруу илгээхийн оронд дотооддоо үлдээнэ гэж хэлж байгаа бөгөөд энэ нь хаанаас эхэлсэн тэндээ буцаж очих учраас тэр юм.</p></div><div class=paragraph><p>Дараагийн байгаа зүйл бол <code>0:e0:</code>-с эхэлсэн хаягууд юм. Эдгээр нь Ethernet тоног төхөөрөмжийн хаягууд бөгөөд бас MAC хаягууд гэгддэг. FreeBSD нь локал Ethernet дээр байгаа ямар ч хостуудыг (жишээн дээрх <code>test0</code>) автоматаар таньж тэр хостод зориулж шууд түүн уруу <span class=filename>ed0</span> Ethernet интерфэйсээр гарахаар чиглүүлэлт нэмдэг. Энэ төрлийн чиглүүлэлттэй холбоотой хугацаа (<code>Expire</code> багана) байдаг бөгөөд энэ нь заасан хугацаанд тэр хостоос бид нар юу ч сонсохгүй үед ашиглагддаг. Ийм явдал болоход энэ хост уруу заагдсан чиглүүлэлт автоматаар устгагдах болно. Эдгээр хостууд нь RIP (Routing Information Protocol буюу чиглүүлэлтийн мэдээллийн протокол) гэгддэг арга замаар танигддаг бөгөөд энэ нь хамгийн богино замыг тодорхойлсны үндсэн дээр локал хостууд уруу очих чиглүүлэлтийг олдог.</p></div><div class=paragraph><p>FreeBSD нь бас локал дэд сүлжээнд зориулж дэд сүлжээний чиглүүлэлтүүдийг нэмдэг (<code>10.20.30.255</code> нь <code>10.20.30</code> дэд сүлжээний цацах хаяг бөгөөд <code>example.com</code> нь тэр дэд сүлжээтэй холбоотой домэйний нэр юм). <code>link#1</code> тэмдэглэгээ нь машин дахь эхний Ethernet картыг заана. Та тэдгээрт зориулж ямар ч нэмэлт интерфэйс заагдаагүйг харах болно.</p></div><div class=paragraph><p>Эдгээр бүлгүүд (локал сүлжээний хостууд болон локал дэд сүлжээнүүд) нь автоматаар routed гэгддэг дэмоноор тохируулагдсан чиглүүлэлтүүдтэй байна. Хэрэв энэ нь ажиллахгүй байгаа бол зөвхөн статикаар тодорхойлогдсон (өөрөө хэлбэл илэрхий оруулж өгсөн) чиглүүлэлтүүд байх болно.</p></div><div class=paragraph><p><code>host1</code> мөр нь бидний хостыг зааж байгаа бөгөөд түүнийг Ethernet хаягаар нь мэддэг. Бид илгээж байгаа хост болохоор FreeBSD нь Ethernet интерфэйсээр илгээхийн оронд loopback буюу буцах интерфэйсийг (<span class=filename>lo0</span>) ашиглахаа мэддэг.</p></div><div class=paragraph><p>Хоёр <code>host2</code> мөрүүд нь биднийг <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> alias буюу өөр нэр ашиглах үед (Ethernet-ийн талаар дурдсан хэсгээс бид үүнийг яагаад хийдгийг үзээрэй) учирч болзошгүй зүйлийн жишээ юм. <span class=filename>lo0</span> интерфэйсийн дараа байгаа <code>⇒</code> тэмдэг нь бид зөвхөн loopback буюу буцах интерфэйсийг ашиглаад зогсохгүй (энэ хаяг нь бас локал хостыг хэлж байгаа болохоор) энэ нь ялангуяа alias буюу өөр нэр гэдгийг хэлж байгаа юм. Ийм чиглүүлэлтүүд нь alias-ийг дэмждэг хост дээр зөвхөн харагдана; локал сүлжээн дэх бусад бүх хостууд ийм чиглүүлэлтүүдийнхээ хувьд ердөө л <code>link#1</code> мөртэй байна.</p></div><div class=paragraph><p>Төгсгөлийн мөр (очих дэд сүлжээ <code>224</code>) нь multicast-тай ажиллаж байгаа бөгөөд үүнийг өөр хэсэгт авч үзэх болно.</p></div><div class=paragraph><p>Төгсгөлд нь чиглүүлэлт бүрийн төрөл бүрийн шинж чанаруудыг <code>Flags</code> баганаас харж болно. Эдгээр тугуудын зарим болон тэдгээрийн харгалзах утга санаануудыг доорх богино хүснэгтээр харуулав:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>U</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Up: Чиглүүлэлт идэвхтэй байна.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>H</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Host: Чиглүүлэлтийн очих газар нь ганц хост байна.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>G</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gateway: Энэ очих газарт зориулж бүгдийг энэ алсын систем уруу илгээх бөгөөд алсын систем нь тэндээсээ хаашаа илгээхээ олох болно.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>S</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Static: Энэ чиглүүлэлт нь системээр автоматаар үүсгэгдсэн биш гараар тохируулагдсан.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>C</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Clone: Бидний холбогдож байгаа машины хувьд энэ чиглүүлэлт дээр үндэслэн шинэ чиглүүлэлт үүсгэдэг. Энэ төрлийн чиглүүлэлт нь ихэвчлэн локал сүлжээнүүдэд ашиглагддаг.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>W</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>WasCloned: Локал сүлжээний (Clone) чиглүүлэлт дээр үндэслэн автоматаар тохируулагдсан чиглүүлэлтийг заана.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>L</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Link: Чиглүүлэлт нь Ethernet тоног төхөөрөмжтэй холбоотой зүйлийг хамарна.</p></td></tr></tbody></table></div><div class=sect2><h3 id=network-routing-default>32.2.2. Анхдагч чиглүүлэлтүүд<a class=anchor href=#network-routing-default></a></h3><div class=paragraph><p>Локал систем нь алсын хост уруу холболт хийх хэрэгтэй үед мэдэгдэж байгаа зам байгаа эсэхийг тодорхойлохын тулд энэ нь чиглүүлэлтийн хүснэгтээс шалгадаг. Хэрэв алсын хост нь бидний хэрхэн хүрэхийг нь мэдэх (клон хийгдсэн чиглүүлэлтүүд) дэд сүлжээнд байгаа бол систем тэр интерфэйсээр холбогдож болох эсэхийг шалгадаг.</p></div><div class=paragraph><p>Хэрэв бүх мэдэгдэж байгаа зам амжилтгүй болвол системд сүүлчийн ганц сонголт "анхдагч" чиглүүлэлт үлдэнэ. Энэ чиглүүлэлт нь гарц чиглүүлэлтийн тусгай төрөл (системд ихэвчлэн ганц байдаг) бөгөөд тугнуудын талбартаа үргэлж <code>c</code> гэж тэмдэглэгдсэн байдаг. Локал сүлжээн дэх хостын хувьд энэ гарц нь машины гадаад ертөнц уруу шууд холбогдох зүйлээр (PPP холболт, DSL, кабель модем, T1, эсвэл өөр сүлжээний интерфэйсээр) тохируулагддаг.</p></div><div class=paragraph><p>Хэрэв та өөрөө гаднах ертөнц уруу гарц маягаар ажиллаж байгаа машины хувьд анхдагч чиглүүлэлтийг тохируулж байгаа бол анхдагч чиглүүлэлт нь таны Интернэтийн Үйлчилгээ Үзүүлэгчийн (ISP) сайт дахь гарц машин болох юм.</p></div><div class=paragraph><p>Анхдагч чиглүүлэлтүүдийн жишээг харцгаая. Энэ нь нийтлэг тохиргоо юм:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/advanced-networking/net-routing.png alt="net routing"></div></div><div class=paragraph><p><code>Local1</code> болон <code>Local2</code> хостууд нь таны сайтад байна. <code>Local1</code> нь ISP уруу dial-up PPP холболтоор холбогдсон. Энэ PPP сервер компьютер нь дотоод сүлжээгээр өөр нэг гарц компьютер уруу гадаад интерфэйсээр ISP-ийн Интернэт өгч байгаа уруу холбогдсон байна.</p></div><div class=paragraph><p>Таны машин бүрийн хувьд анхдагч чиглүүлэлтүүд нь ийм болно:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Хост</th><th class="tableblock halign-left valign-top">Анхдагч Гарц</th><th class="tableblock halign-left valign-top">Интерфэйс</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Local2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Local1</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Ethernet</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Local1</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>T1-GW</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>PPP</p></td></tr></tbody></table><div class=paragraph><p>Түгээмэл асуулт нь "Бид яагаад <code>Local1</code>-ийн хувьд түүний холбогдсон ISP-ийн серверийн оронд <code>T1-GW</code>-г анхдагч гарц гэж тохируулсан бэ?" гэсэн асуулт юм.</p></div><div class=paragraph><p>PPP интерфэйс нь өөрийн талын холболтондоо ISP-ийн локал сүлжээн дэх хаягийг ашиглаж байгаа болохоор ISP-ийн локал сүлжээн дэх бусад дурын машинуудад зориулсан чиглүүлэлт автоматаар үүсгэгдэх болно гэдгийг санаарай. Ийм учраас та <code>T1-GW</code> машин уруу хэрхэн хүрэхээ аль хэдийн мэдэж байгаа болохоор ISP-ийн сервер уруу урсгал илгээх дундын алхам шаардлагагүй юм.</p></div><div class=paragraph><p>Өөрийн локал сүлжээний хувьд <code>X.X.X.1</code> хаягийг гарц хаяг болгож ашиглах нь түгээмэл байдаг. Тэгэхээр (адил жишээг ашиглаад) хэрэв таны локал C ангиллын хаягийн талбар <code>10.20.30</code> байсан бөгөөд таны ISP <code>10.9.9</code>-г ашиглаж байгаа бол анхдагч чиглүүлэлтүүд нь ийм байна:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Хост</th><th class="tableblock halign-left valign-top">Анхдагч Чиглүүлэлт</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Local2 (10.20.30.2)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Local1 (10.20.30.1)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Local1 (10.20.30.1, 10.9.9.30)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>T1-GW (10.9.9.1)</p></td></tr></tbody></table><div class=paragraph><p>Та <span class=filename>/etc/rc.conf</span> файлын тусламжтай анхдагч чиглүүлэлтийг хялбараар тодорхойлж болно. Бидний жишээн дээр <code>Local2</code> машин дээр бид дараах мөрийг <span class=filename>/etc/rc.conf</span> файлд нэмсэн:</p></div><div class="literalblock programlisting"><div class=content><pre>defaultrouter=&#34;10.20.30.1&#34;</pre></div></div><div class=paragraph><p>Үүнийг шууд тушаалын мөрөөс <a href="https://man.freebsd.org/cgi/man.cgi?query=route&amp;sektion=8&amp;format=html">route(8)</a> тушаалаар хийж бас болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># route add default 10.20.30.1</span></code></pre></div></div><div class=paragraph><p>Сүлжээний чиглүүлэлтийн хүснэгтүүдийг гараар удирдах талаар дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=route&amp;sektion=8&amp;format=html">route(8)</a> гарын авлагын хуудаснаас лавлана уу.</p></div></div><div class=sect2><h3 id=_хос_гэртэй_хостууд>32.2.3. Хос гэртэй хостууд<a class=anchor href=#_хос_гэртэй_хостууд></a></h3><div class=paragraph><p>Өөр бас нэг тохиргооны төрлийг бид хэлэлцэх ёстой бөгөөд энэ нь хоёр өөр сүлжээн дээр байгаа хостын тухай юм. Техникийн хувьд гарц болж байгаа дурын машин (дээрх жишээн дээр PPP холболтыг ашиглах нь) хос гэртэй хост гэж тооцогддог. Гэхдээ үнэндээ энэ ухагдахуун нь хоёр дотоод сүлжээнд байгаа машиныг хэлэхэд зөвхөн ашиглагддаг.</p></div><div class=paragraph><p>Нэг тохиолдолд машин нь хоёр Ethernet карттай бөгөөд карт бүр тусдаа дэд сүлжээний хаягтай байна. Өөрөөр, машин нь зөвхөн нэг Ethernet карттай бөгөөд <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> alias хийлт буюу өөр нэрийг ашигладаг байж болно. Эхнийх нь физикийн хувьд тусдаа хоёр Ethernet сүлжээ ашиглагдаж байгаа үед хэрэглэгдэх бөгөөд сүүлийнх нь ганц физик сүлжээний сегмент байгаа боловч логикийн хувьд хоёр тусдаа дэд сүлжээнүүд байгаа үед хэрэглэгддэг.</p></div><div class=paragraph><p>Аль ч тохиолдолд энэ машин нь нөгөө дэд сүлжээ уруу хүрэх тодорхойлогдсон гарц (гаднаас ирэх чиглүүлэлт) гэдгийг дэд сүлжээ бүр мэддэг байхаар чиглүүлэлтийн хүснэгтүүд тохируулагддаг. Хоёр дэд сүлжээний хооронд чиглүүлэгч маягаар ажиллах машинтай энэ тохиргоо нь бид аль нэг тал уруу эсвэл хоёр талын хоёулангийн хувьд пакет шүүгч буюу галт хана дээр тулгуурласан аюулгүй байдлын шийдлийг хийх шаардлагатай үед ихэвчлэн хэрэглэгддэг.</p></div><div class=paragraph><p>Хоёр интерфэйсийн хооронд пакетуудыг дамжуулдаг байхаар энэ машиныг байлгахыг хэрэв та хүсвэл энэ боломжийг идэвхжүүлэхийг FreeBSD-д хэлэх хэрэгтэй. Үүнийг хэрхэн хийх талаар дэлгэрэнгүйг дараагийн хэсгээс үзнэ үү.</p></div></div><div class=sect2><h3 id=network-dedicated-router>32.2.4. Чиглүүлэгч бүтээх нь<a class=anchor href=#network-dedicated-router></a></h3><div class=paragraph><p>Сүлжээний чиглүүлэгч нь ердөө л нэг интерфэйсээс нөгөө интерфэйс уруу пакетуудыг дамжуулдаг систем юм. Интернэтийн стандартууд болон сайн инженерчлэлийн туршлага нь үүнийг FreeBSD дээр анхдагчаар идэвхжүүлсэн байхаас FreeBSD төслийг сэргийлдэг. <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> дахь дараах хувьсагчийг <code>YES</code> болгон өөрчилснөөр та энэ боломжийг идэвхжүүлж болно:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;          # Set to YES if this host will be a gateway</pre></div></div><div class=paragraph><p>Энэ тохируулга нь <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>-ийн хувьсагч <code>net.inet.ip.forwarding</code>-г <code>1</code> болгоно. Хэрэв та чиглүүлэлтийг түр зуур зогсоох хэрэгтэй бол үүнийг түр зуур <code>0</code> болгож тохируулж болно.</p></div><div class=paragraph><p>Урсгалыг хааш нь илгээхээ мэдэхийн тулд таны шинэ чиглүүлэгчид чиглүүлэлтүүд хэрэгтэй болно. Хэрэв таны сүлжээ хангалттай хялбар байх юм бол статик чиглүүлэлтүүд ашиглаж болно. FreeBSD нь стандарт BSD чиглүүлэлтийн дэмон <a href="https://man.freebsd.org/cgi/man.cgi?query=routed&amp;sektion=8&amp;format=html">routed(8)</a> програмтай бас ирдэг. Энэ нь RIP (1 ба 2-р хувилбар) болон IRDP протоколуудыг дэмждэг. BGP v4, OSPF v2 болон бусад төвөгтэй чиглүүлэлтийн протоколуудын дэмжлэгийг <a class=package href=https://cgit.freebsd.org/ports/tree/net/zebra/>net/zebra</a> багц хангадаг. GateD® зэрэг арилжааны бүтээгдэхүүнүүд бас илүү төвөгтэй сүлжээний чиглүүлэлтийн шийдлүүдэд зориулагдсан байдаг.</p></div></div><div class=sect2><h3 id=network-static-routes>32.2.5. Статик чиглүүлэлтүүдийг тохируулах нь<a class=anchor href=#network-static-routes></a></h3><div class=sect3><h4 id=_гар_тохиргоо>32.2.5.1. Гар тохиргоо<a class=anchor href=#_гар_тохиргоо></a></h4><div class=paragraph><p>Бид дараах сүлжээтэй байна гэж төсөөлье:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/advanced-networking/static-routes.png alt="static routes"></div></div><div class=paragraph><p>Энэ тохиолдолд <code>RouterA</code> нь Интернэт уруу гарах чиглүүлэгч маягаар ажиллаж байгаа бидний FreeBSD машин байна. Энэ нь анхдагч чиглүүлэлтээ <code>10.0.0.1</code> гэж тохируулсан бөгөөд ингэснээр гаднах ертөнц уруу холбогдох боломжийг олгоно. Бид <code>RouterB</code> нь зөв тохируулагдсан бөгөөд хаа явах хэрэгцээтэй газраа хэрхэн хүрэхээ мэддэг гэж үзэх болно. (Энэ нь зураг дээр хялбар юм. Ердөө л <code>RouterB</code> дээр <code>192.168.1.1</code>-г гарц болгон анхдагч чиглүүлэлт нэмнэ.)</p></div><div class=paragraph><p>Хэрэв бид <code>RouterA</code>-ийн чиглүүлэлтийн хүснэгтийг харвал доор дурдсантай төстэйг харах болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% netstat <span class=nt>-nr</span>
Routing tables

Internet:
Destination        Gateway            Flags    Refs      Use  Netif  Expire
default            10.0.0.1           UGS         0    49378    xl0
127.0.0.1          127.0.0.1          UH          0        6    lo0
10.0.0.0/24          <span class=nb>link</span><span class=c>#1             UC          0        0    xl0</span>
192.168.1.0/24       <span class=nb>link</span><span class=c>#2             UC          0        0    xl1</span></code></pre></div></div><div class=paragraph><p>Энэ үеийн чиглүүлэлтийн хүснэгттэй байхад <code>RouterA</code> нь бидний Internal Net 2 буюу дотоод сүлжээ 2 уруу хүрч чадахгүй байх болно. Энэ нь <code>192.168.2.0/24</code>-ийн хувьд чиглүүлэлтгүй байна. Үүнийг арилгах нэг арга нь гараар чиглүүлэлт нэмэх явдал юм. Дараах тушаал нь <code>RouterA</code>-ийн чиглүүлэлтийн хүснэгтэд <code>192.168.1.2</code>-г дараагийн зөрлөг (hop) болгон ашиглан Internal Net 2 сүлжээг нэмэх болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># route add -net 192.168.2.0/24 192.168.1.2</span></code></pre></div></div><div class=paragraph><p>Одоо <code>RouterA</code> нь <code>192.168.2.0/24</code> сүлжээн дэх дурын хост уруу хүрч чадна.</p></div></div><div class=sect3><h4 id=_байнгын_тохиргоо>32.2.5.2. Байнгын тохиргоо<a class=anchor href=#_байнгын_тохиргоо></a></h4><div class=paragraph><p>Дээрх жишээ нь ажиллаж байгаа систем дээр статик чиглүүлэлтийг тохируулахад төгс төгөлдөр юм. Гэхдээ нэг асуудал нь таны FreeBSD машин дахин ачаалахад чиглүүлэлтийн мэдээлэл үлдэхгүй байх явдал юм. Статик чиглүүлэлтийг байнга байлгахын тулд түүнийг <span class=filename>/etc/rc.conf</span> файлд нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre># Add Internal Net 2 as a static route
static_routes=&#34;internalnet2&#34;
route_internalnet2=&#34;-net 192.168.2.0/24 192.168.1.2&#34;</pre></div></div><div class=paragraph><p><code>static_routes</code> тохиргооны хувьсагч нь зайгаар тусгаарлагдсан үгнүүдийн жагсаалт юм. Үг бүр чиглүүлэлтийн нэрийг заана. Бидний жишээн дээр <code>static_routes</code> мөрөнд бид зөвхөн нэг үгтэй байна. Энэ нь <em>internalnet2</em> юм. Бид дараа нь <a href="https://man.freebsd.org/cgi/man.cgi?query=route&amp;sektion=8&amp;format=html">route(8)</a> тушаалд өгөх бүх тохиргооны нэмэлт өгөгдлүүдийг <code>route_internalnet2</code> гэгдсэн тохиргооны хувьсагчийн хамтаар нэмнэ. Бидний жишээний хувьд бид ийм тушаал ашиглаж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># route add -net 192.168.2.0/24 192.168.1.2</span></code></pre></div></div><div class=paragraph><p>тэгэхээр бидэнд <code>"-net 192.168.2.0/24 192.168.1.2"</code> хэрэгтэй.</p></div><div class=paragraph><p>Дээр дурдсанаар бид <code>static_routes</code> мөрөнд нэгээс илүү үгс оруулж болно. Энэ нь бидэнд олон статик чиглүүлэлтүүд үүсгэх боломжийг олгоно. Дараах мөрүүд нь <code>192.168.0.0/24</code> болон <code>192.168.1.0/24</code> сүлжээний хувьд статик чиглүүлэлтүүдийг санаандаа төсөөлсөн чиглүүлэгч дээрээ нэмж байгаа жишээг үзүүлж байна:</p></div><div class="literalblock programlisting"><div class=content><pre>static_routes=&#34;net1 net2&#34;
route_net1=&#34;-net 192.168.0.0/24 192.168.0.1&#34;
route_net2=&#34;-net 192.168.1.0/24 192.168.1.1&#34;</pre></div></div></div></div><div class=sect2><h3 id=network-routing-propagation>32.2.6. Чиглүүлэлтийн тархалт<a class=anchor href=#network-routing-propagation></a></h3><div class=paragraph><p>Бид гаднах ертөнц уруу чиглэсэн өөрсдийн чиглүүлэлтүүдийг хэрхэн тодорхойлох талаар ярилцсан боловч гаднах ертөнц хэрхэн биднийг олох талаар хэлэлцээгүй билээ.</p></div><div class=paragraph><p>Чиглүүлэлтийн хүснэгтүүдийг тухайн нэг хаягийн талбарын (бидний жишээн дээр C ангиллын дэд сүлжээ) бүх урсгал тэр сүлжээний тухайн нэг хост уруу илгээгдэж тэр нь пакетуудыг дотогшоо дамжуулдгаар тохируулж болно гэдгийг бид мэдэж байгаа билээ.</p></div><div class=paragraph><p>Та өөрийн сайтдаа заагдсан хаягийн талбарыг авах үед таны үйлчилгээ үзүүлэгч өөрсдийн чиглүүлэлтийн хүснэгтүүдийг таны дэд сүлжээнд зориулагдсан бүх урсгал таны PPP холбоосоор таны сайт уруу илгээгддэгээр тохируулах болно. Гэхдээ улс даяар байх бусад сайтууд таны ISP уруу илгээхээ яаж мэдэх вэ?</p></div><div class=paragraph><p>Бүх заагдсан хаягийн талбаруудыг хянаж Интернэтийн үндсэн сүлжээ уруу холбогдох холболтын цэгийг тодорхойлдог систем (тараагдсан DNS-ийн мэдээлэлтэй бараг адил) байдаг. "Backbone" буюу "гол нуруу (үндсэн сүлжээ)" нь улс даяар болон дэлхий даяар Интернэтийн урсгалыг зөөвөрлөж байдаг гол шугамнууд юм. Гол нуруу машин бүр мастер хүснэгтүүдийн хуулбартай байдаг бөгөөд эдгээр хүснэгтүүд нь тухайн нэг сүлжээнд зориулсан урсгалыг онцгой гол нуруу зөөвөрлөгч уруу чиглүүлж тэндээсээ доош бусад үйлчилгээ үзүүлэгчдээр дамжин таны сүлжээнд хүрдэг.</p></div><div class=paragraph><p>Үндсэн (гол нуруу) сайтууд уруу зарлаж тэдгээр нь таны сайтын хувьд холболтын цэг (буюу орох зам) гэж тодорхойлох нь таны үйлчилгээ үзүүлэгчийн үүрэг юм. Үүнийг чиглүүлэлтийн тархалт гэж нэрлэдэг.</p></div></div><div class=sect2><h3 id=network-routing-troubleshooting>32.2.7. Алдааг олж засварлах<a class=anchor href=#network-routing-troubleshooting></a></h3><div class=paragraph><p>Заримдаа чиглүүлэлтийн тархалт асуудалтай бөгөөд зарим нэгэн сайтууд өөр уруу чинь холбогдож чадахгүй байж болно. Чиглүүлэлт хаана ажиллахгүй болж байгааг олоход тус болох магадгүй хамгийн ашигтай тушаал нь <a href="https://man.freebsd.org/cgi/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a> тушаал юм. Хэрэв та алсын машин уруу холбогдож чадахгүй юм шиг байвал (өөрөөр хэлбэл <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> амжилтгүй болвол) энэ нь бас адил ашигтай байдаг.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a> тушаалыг таны холбогдохыг оролдож байгаа алсын хостын нэртэй ажиллуулдаг. Энэ нь гарц хостуудыг оролдлого хийж байгаа замын хамтаар харуулдаг бөгөөд эцсийн хост уруу хүрэх юм уу эсвэл холболтын асуудлаас болоод эцсийн хост уруугаа хүрэлгүйгээр ажиллаж дуусдаг.</p></div><div class=paragraph><p>Дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>-ийн гарын авлагын хуудаснаас үзнэ үү.</p></div></div><div class=sect2><h3 id=network-routing-multicast>32.2.8. Multicast чиглүүлэлт хийх<a class=anchor href=#network-routing-multicast></a></h3><div class=paragraph><p>FreeBSD нь multicast програмууд болон multicast чиглүүлэлтийг угаасаа дэмждэг. Multicast програмууд нь FreeBSD-ийн ямар нэг тусгай тохиргоо шаарддаггүй; програмууд нь шууд л ажилладаг. Multicast чиглүүлэлт нь дэмжлэгийг цөмд эмхэтгэхийг шаарддаг:</p></div><div class="literalblock programlisting"><div class=content><pre>options MROUTING</pre></div></div><div class=paragraph><p>Мөн multicast чиглүүлэлтийн дэмон <a href="https://man.freebsd.org/cgi/man.cgi?query=mrouted&amp;sektion=8&amp;format=html">mrouted(8)</a> нь туннелиуд болон DVMRP-г үүсгэхээр <span class=filename>/etc/mrouted.conf</span> файлын тусламжтай тохируулагдсан байх ёстой. Multicast тохиргооны талаар дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=mrouted&amp;sektion=8&amp;format=html">mrouted(8)</a>-ийн гарын авлагын хуудаснаас олж болно.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mrouted&amp;sektion=8&amp;format=html">mrouted(8)</a> multicast чиглүүлэлтийн демон нь DVMRP multicast чиглүүлэлтийн протоколыг хэрэгжүүлдэг бөгөөд үүнийг ихэнх multicast суулгацуудад <a href="https://man.freebsd.org/cgi/man.cgi?query=pim&amp;sektion=4&amp;format=html">pim(4)</a>-р ихэвчлэн сольсон байдаг. Холбогдох <a href="https://man.freebsd.org/cgi/man.cgi?query=map-mbone&amp;sektion=8&amp;format=html">map-mbone(8)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=mrinfo&amp;sektion=8&amp;format=html">mrinfo(8)</a> хэрэгслүүд нь FreeBSD-ийн портын цуглуулгад <a class=package href=https://cgit.freebsd.org/ports/tree/net/mrouted/>net/mrouted</a> портод байгаа болно.</p></div></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=network-wireless>32.3. Утасгүй сүлжээ<a class=anchor href=#network-wireless></a></h2><div class=sectionbody><div class=sect2><h3 id=_утасгүй_сүлжээний_үндсүүд>32.3.1. Утасгүй сүлжээний үндсүүд<a class=anchor href=#_утасгүй_сүлжээний_үндсүүд></a></h3><div class=paragraph><p>Ихэнх утасгүй сүлжээнүүд нь IEEE® 802.11-ийн стандартууд дээр үндэслэсэн байдаг. Үндсэн утасгүй сүлжээ нь 2.4GHz юм уу эсвэл 5GHz-ийн зурваст цацдаг радио долгионоор холбогддог олон станцуудаас тогтдог (энэ нь орон нутгаас хамаарч өөр өөр байдаг бөгөөд 2.3GHz-с 4.9GHz-ийн хүрээнд холбоог идэвхжүүлэхээр өөрчлөгдөж байгаа).</p></div><div class=paragraph><p>802.11 сүлжээ нь хоёр аргаар зохион байгуулагддаг: <em>дэд бүтцийн горим</em>д нэг станц мастер маягаар ажиллаж бусад станцууд нь түүнтэй холбогддог; энэ сүлжээг BSS гэдэг бөгөөд мастер станц нь хандалтын цэг (access point)(AP) гэгддэг. BSS-т бүх холбоо AP-р дамждаг; нэг станц өөр нэг утасгүй станцтай холбоо тогтоохыг хүссэн байсан ч гэсэн мэдэгдлүүд нь AP-р дамжих ёстой байдаг. Хоёр дахь хэлбэрийн сүлжээнд мастер байдаггүй бөгөөд станцууд нь шууд холбогддог. Энэ сүлжээний хэлбэрийг IBSS гэдэг бөгөөд бас <em>ad-hoc сүлжээ</em> гэгддэг.</p></div><div class=paragraph><p>802.11 сүлжээнүүд нь 2.4GHz-ийн зурваст IEEE® 802.11 болон 802.11b стандартуудаар тодорхойлогдсон протоколуудыг ашиглан эхлэн хийгдэж байсан. Эдгээр тодорхойлолтууд нь ажиллах давтамжууд, хүрээ хийх болон дамжуулах хурд (холболт төрөл бүрийн хурдаар хийгдэж болно) зэрэг MAC давхаргын үзүүлэлтүүдийг агуулдаг. Сүүлд 802.11a стандарт нь өөр дохионы арга замууд болон илүү өндөр дамжуулах хурдууд зэрэг 5GHz-ийн зурвасын ажиллагааг тодорхойлсон билээ. Мөн дараа нь 802.11b сүлжээнүүдтэй буцаж нийцтэй байхаар 802.11a дохионы хэрэглээ болон 2.4GHz-ийн зурваст дамжуулах арга замуудыг идэвхжүүлж 802.11g стандарт тодорхойлогдсон байна.</p></div><div class=paragraph><p>Суурь болсон дамжуулах техникүүдээс гадна 802.11 сүлжээнүүд нь төрөл бүрийн аюулгүй байдлын арга замуудтай байдаг. Анхдагч 802.11 тодорхойлолтууд нь WEP гэгддэг аюулгүй байдлын энгийн протоколыг тодорхойлсон билээ. Энэ протокол нь тогтмол, урьдчилан хуваалцсан түлхүүр болон RC4 криптограф шифр ашиглан сүлжээнд дамжуулагдах өгөгдлийг кодчилдог. Станцууд нь өөр хоорондоо холбогдохын тулд бүгд нэг тогтмол түлхүүр дээр зөвшилцөх ёстой. Энэ схемийг амархан эвдэх боломжтойг харуулсан бөгөөд дамжин өнгөрөх хэрэглэгчдийг сүлжээнд нэгдэхийг зөвлөдөггүйгээс бусад тохиолдолд одоо ховор ашиглагдах болсон байна. Криптографийн шинэ шифрүүд болон станцуудыг хандалтын цэгт танин нэвтрүүлж өгөгдлийн холболтыг хийхийн тулд түлхүүрүүдийг солилцох нэмэлт протоколыг тодорхойлдог IEEE® 802.11i тодорхойлолтоор одоогийн аюулгүй байдлын практикийг тодорхойлдог. Мөн криптограф түлхүүрүүд нь үе үе шинэчлэгддэг бөгөөд халдлагын оролдлогуудыг илрүүлэх (ба халдлагын оролдлогуудыг сөрөх) арга замууд бас байдаг. Утасгүй сүлжээнүүдэд түгээмэл ашиглагддаг өөр нэг аюулгүй байдлын протоколын тодорхойлолт нь WPA юм. Энэ нь үйлдвэрлэлийн бүлгийн тодорхойлсон 802.11i-ийн өмнөх протокол бөгөөд 802.11i-г батлахыг хүлээж байх хугацаанд түр зуурын арга хэмжээ болох юм. WPA нь 802.11i-д байгаа шаардлагуудын дэд олонлогийг тодорхойлж хуучин тоног төхөөрөмжүүд дээрх шийдэлд зориулагдан хийгджээ. Ялангуяа WPA нь анхдагч WEP шифрээс гарсан TKIP шифрийг зөвхөн шаарддаг. 802.11i нь TKIP-ийн хэрэглээг зөвшөөрдөг боловч өгөгдлийг шифрлэхэд зориулж илүү хүчирхэг шифр болох AES-CCM-ийн дэмжлэгийг бас шаарддаг. (AES шифр нь WPA-д шаардагддаггүй, учир нь үүнийг хуучин тоног төхөөрөмж дээр хийхэд тооцооллын хувьд өртөгтэй гэж үздэг.)</p></div><div class=paragraph><p>Дээрх протоколын стандартуудаас гадна мэдэж байх өөр нэг чухал стандарт бол 802.11e юм. Энэ нь 802.11 сүлжээнд видео дамжуулах, IP дээгүүрх дуу (VoIP) зэрэг мультимедиа хэрэглээнүүдэд шаардлагатай протоколуудыг тодорхойлдог. 802.11i-тай адил 802.11e нь үйлдвэрлэлийн бүлгээс 802.11e-ийн дэд олонлог гэж тодорхойлсон, 802.11e-г батлахыг хүлээж байх хугацаанд мультимедиа хэрэглээнүүдийг идэвхжүүлэхэд ашиглаж болох WME (сүүлд WMM) гэгдсэн урьдчилсан тодорхойлолт байдаг. 802.11e болон WME/WMM-ийн талаар мэдэх ёстой хамгийн чухал зүйл нь утасгүй сүлжээний зэрэглэл тогтоогдсон урсгалын хэрэглээг Quality of Service (QoS) буюу үйлчилгээний чанарын протоколууд болон өргөтгөсөн зөөвөрлөгчийн хандалтын протоколуудын тусламжтайгаар идэвхжүүлдэг явдал юм. Эдгээр протоколуудын зөв шийдэл нь өгөгдлийн өндөр хурдтай тэсрэлт болон зэрэглэл тогтоогдсон урсгалыг идэвхжүүлдэг.</p></div><div class=paragraph><p>FreeBSD нь 802.11a, 802.11b, болон 802.11g-г ашиглан ажилладаг сүлжээнүүдийг дэмждэг. WPA болон 802.11i аюулгүй байдлын протоколууд нь адилхан (11a, 11b, болон 11g-тэй цуг) дэмжигдсэн байдаг бөгөөд WME/WMM протоколуудын шаарддаг QoS болон урсгалын зэрэглэлт нь хязгааргүй тооны утасгүй төхөөрөмжүүдэд дэмжигдсэн байдаг.</p></div></div><div class=sect2><h3 id=network-wireless-basic>32.3.2. Үндсэн тохируулга<a class=anchor href=#network-wireless-basic></a></h3><div class=sect3><h4 id=_цөмийн_тохиргоо>32.3.2.1. Цөмийн тохиргоо<a class=anchor href=#_цөмийн_тохиргоо></a></h4><div class=paragraph><p>Утасгүй сүлжээг ашиглахын тулд танд утасгүй сүлжээний карт болон цөмийг тохирох утасгүй сүлжээний дэмжлэгтэйгээр тохируулах хэрэгтэй болно. Сүүлийнх нь олон модулиудад хуваагддаг. Тэгэхээр танд зөвхөн өөрийнхөө ашиглах програм хангамжийг тохируулах хэрэгтэй болох юм.</p></div><div class=paragraph><p>Танд эхлээд хэрэг болох зүйл нь утасгүй сүлжээний төхөөрөмж юм. Хамгийн түгээмэл хэрэглэгддэг төхөөрөмжүүд нь Atheros-ийн хийдэг хэсгүүдийг ашигладаг төхөөрөмжүүд байдаг. Эдгээр төхөөрөмжүүд нь <a href="https://man.freebsd.org/cgi/man.cgi?query=ath&amp;sektion=4&amp;format=html">ath(4)</a> драйвераар дэмжигддэг бөгөөд <span class=filename>/boot/loader.conf</span> файлд дараах мөрийг нэмэхийг шаарддаг:</p></div><div class="literalblock programlisting"><div class=content><pre>if_ath_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Atheros драйвер нь гурван тусдаа хэсэгт хуваагддаг: эдгээр нь зөв драйвер (<a href="https://man.freebsd.org/cgi/man.cgi?query=ath&amp;sektion=4&amp;format=html">ath(4)</a>), бичил схемийн функцуудыг зохицуулдаг, тоног төхөөрөмжийн дэмжлэгийн давхарга (<a href="https://man.freebsd.org/cgi/man.cgi?query=ath_hal&amp;sektion=4&amp;format=html">ath_hal(4)</a>), болон хүрээнүүдийг дамжуулахын тулд хэд хэдэн боломжит хурдуудаас (энд ath_rate_sample) сонгох алгоритм юм. Эдгээр дэмжлэгийг модуль хэлбэрээр дуудах үед түүнтэй хамааралтай зүйлс автоматаар зохицуулагдах болно. Хэрэв танд Atheros төхөөрөмжийн оронд өөр төхөөрөмж байгаа бол та тэр төхөөрөмжид зориулсан модулийг сонгох юм, өөрөөр хэлбэл:</p></div><div class="literalblock programlisting"><div class=content><pre>if_wi_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>гэж Intersil Prism хэсгүүд дээр суурилсан төхөөрөмжүүдийн хувьд хийж өгнө (<a href="https://man.freebsd.org/cgi/man.cgi?query=wi&amp;sektion=4&amp;format=html">wi(4)</a> driver).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Энэ баримтын үлдсэн хэсэгт бид <a href="https://man.freebsd.org/cgi/man.cgi?query=ath&amp;sektion=4&amp;format=html">ath(4)</a> төхөөрөмжийг ашиглах бөгөөд жишээнүүд дээрх төхөөрөмжийн нэр таны тохиргооны дагуу өөрчлөгдөх ёстой. Байгаа утасгүй драйверууд болон дэмжигдсэн адаптеруудын жагсаалтыг FreeBSD Hardware Notes хуудаснаас олж болно. Төрөл бүрийн хувилбарууд болон архитектуруудад зориулсан эдгээр тэмдэглэгээнүүдийн хуулбар FreeBSD-ийн вэб сайтын <a href=http://www.FreeBSD.org/releases/>Хувилбарын Мэдээлэл</a> хуудсанд бий. Таны утасгүй төхөөрөмжид зориулагдсан FreeBSD-ийн драйвер байхгүй бол магадгүй Windows® драйверийг <a href=../config/#config-network-ndis>NDIS</a> драйверийн гүйцэтгэл хялбаршуулагчийн тусламжтай шууд ашиглаж болох юм.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Үүнтэй цуг таны ашиглах аюулгүй байдлын протоколуудад зориулагдсан криптографын дэмжлэгийг хийдэг модулиуд хэрэгтэй болно. Эдгээр нь <a href="https://man.freebsd.org/cgi/man.cgi?query=wlan&amp;sektion=4&amp;format=html">wlan(4)</a> модулиар автоматаар шаардлагын дагуу дуудагддаг байхаар зориулагдсан боловч одоохондоо эдгээрийг гараар тохируулах шаардлагатай. Дараах модулиуд байдаг: <a href="https://man.freebsd.org/cgi/man.cgi?query=wlan_wep&amp;sektion=4&amp;format=html">wlan_wep(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=wlan_ccmp&amp;sektion=4&amp;format=html">wlan_ccmp(4)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=wlan_tkip&amp;sektion=4&amp;format=html">wlan_tkip(4)</a>. <a href="https://man.freebsd.org/cgi/man.cgi?query=wlan_ccmp&amp;sektion=4&amp;format=html">wlan_ccmp(4)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=wlan_tkip&amp;sektion=4&amp;format=html">wlan_tkip(4)</a> драйверууд нь WPA ба/эсвэл 802.11i аюулгүй байдлын протоколуудыг ашиглахаар болсон тохиолдолд танд зөвхөн хэрэгтэй байдаг. Хэрэв таны сүлжээ шифрлэлт ашигладаггүй бол танд <a href="https://man.freebsd.org/cgi/man.cgi?query=wlan_wep&amp;sektion=4&amp;format=html">wlan_wep(4)</a> дэмжлэг хэрэггүй. Эдгээр модулиудыг ачаалах үед дуудахын тулд дараах мөрүүдийг <span class=filename>/boot/loader.conf</span> файлд нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>wlan_wep_load=&#34;YES&#34;
wlan_ccmp_load=&#34;YES&#34;
wlan_tkip_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Системийн эхлүүлэх тохиргооны файлд (өөрөөр хэлбэл <span class=filename>/boot/loader.conf</span>) ийм мэдээлэлтэйгээр та өөрийн FreeBSD хайрцгийг дахин ачаалах хэрэгтэй. Хэрэв та өөрийн машиныг дахин ачаалахыг хүсэхгүй байгаа бол та модулиудыг <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a>-ийн тусламжтайгаар гараар дуудаж болно.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Хэрэв та модулиудыг ашиглахыг хүсэхгүй байгаа бол дараах мөрүүдийг өөрийн цөмийн тохиргооны файлд нэмж эдгээр драйверуудыг цөмд эмхэтгэж болно:</p></div><div class="literalblock programlisting"><div class=content><pre>device wlan               # 802.11 support
device wlan_wep          # 802.11 WEP support
device wlan_ccmp         # 802.11 CCMP support
device wlan_tkip         # 802.11 TKIP support
device wlan_amrr         # AMRR transmit rate control algorithm
device ath               # Atheros pci/cardbus NIC&#39;s
device ath_hal           # pci/cardbus chip support
options AH_SUPPORT_AR5416 # enable AR5416 tx/rx descriptors
device ath_rate_sample   # SampleRate tx rate control for ath</pre></div></div><div class=paragraph><p>Цөмийн тохиргооны файлдаа ийм мэдээлэлтэйгээр цөмөө дахин эмхэтгээд өөрийн FreeBSD машиныг дахин ачаалах хэрэгтэй.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Систем ассаны дараа ачаалах үеийн мэдэгдлүүдэд үүнтэй адил утасгүй төхөөрөмжийн талаар зарим мэдээллийг олж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ath0: &lt;Atheros 5212&gt; mem 0x88000000-0x8800ffff irq 11 at device 0.0 on cardbus1
ath0: <span class=o>[</span>ITHREAD]
ath0: AR2413 mac 7.9 RF2413 phy 4.5</code></pre></div></div></div></div><div class=sect2><h3 id=_дэд_бүтцийн_горим>32.3.3. Дэд бүтцийн горим<a class=anchor href=#_дэд_бүтцийн_горим></a></h3><div class=paragraph><p>Дэд бүтцийн горим буюу BSS горим нь ихэвчлэн ашиглагддаг горим юм. Энэ горимд утасгүй хандалтын цэгүүд нь утастай сүлжээнд холбогдсон байдаг. Утасгүй сүлжээ бүр өөрийн нэртэй байдаг бөгөөд энэ нэр нь сүлжээний SSID гэгддэг. Утасгүй клиентүүд нь утасгүй хандалтын цэгүүдэд холбогддог.</p></div><div class=sect3><h4 id=_freebsd_клиентүүд>32.3.3.1. FreeBSD клиентүүд<a class=anchor href=#_freebsd_клиентүүд></a></h4><div class=sect4><h5 id=_хандалтын_цэгүүдийг_хэрхэн_олох_вэ>32.3.3.1.1. Хандалтын цэгүүдийг хэрхэн олох вэ<a class=anchor href=#_хандалтын_цэгүүдийг_хэрхэн_олох_вэ></a></h5><div class=paragraph><p>Сүлжээнүүдийг хайхын тулд <code>ifconfig</code> тушаалыг ашиглана. Энэ хүсэлт нь хэсэг хором болж болох бөгөөд боломжтой утасгүй давтамж бүр уруу шилжиж, байгаа хандалтын цэгүүдийг шалгахыг системээс шаарддаг. Зөвхөн супер хэрэглэгч ийм хайлт эхлүүлж чадна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0</span>
<span class=c># ifconfig wlan0 up scan</span>
SSID/MESH ID        BSSID              CHAN RATE    S:N   INT CAPS
dlinkap         00:13:46:49:41:76   11   54M <span class=nt>-90</span>:96   100 EPS  WPA WME
freebsdap       00:11:95:c3:0d:ac    1   54M <span class=nt>-83</span>:96   100 EPS  WPA</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Та хайлт хийхээсээ өмнө интерфэйсээ <code>up</code> болгож тэмдэглэх ёстой. Дараа дараагийн хайлтын хүсэлтүүд интерфэйсийг up болгож тэмдэглэхийг шаарддаггүй.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Хайлтын хүсэлтийн гаралт олсон BSS/IBSS сүлжээ бүрийг харуулдаг. Сүлжээний нэр <code>SSID</code>-с гадна хандалтын цэгийн MAC хаяг болох <code>BSSID</code>-г бид харах болно. <code>CAPS</code> талбар нь сүлжээ бүрийн төрөл болон тэнд ажиллаж байгаа станцуудын боломжуудыг заана:</p></div><table class="tableblock frame-none grid-all stretch"><caption class=title>Хүснэгт 1. Station Capability Codes</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Capability Code</th><th class="tableblock halign-left valign-top">Meaning</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>E</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extended Service Set (ESS) буюу өргөтгөсөн үйлчилгээний олонлог. Станц нь дэд бүтцийн сүлжээний хэсэг гэдгийг харуулна (IBSS/ad-hoc сүлжээтэй харьцуулах юм бол ).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>I</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>IBSS/ad-hoc сүлжээ. Станц нь ad-hoc сүлжээний хэсэг гэдгийг харуулна (ESS сүлжээтэй харьцуулах юм бол).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>P</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Хувийн нууц. BSS-ийн дотор солилцож байгаа өгөгдлийн бүх хүрээнүүдэд өгөгдлийн нууц байдал шаардлагатай байдаг. Энэ BSS нь бусадтай солилцох өгөгдлийн хүрээнүүдийг шифрлэх/буцаах WEP, TKIP эсвэл AES-CCMP зэрэг криптограф ашиглахыг станцаас шаарддаг гэсэн үг юм.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>S</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Богино оршил (preamble). Сүлжээ богино оршлуудыг (802.11b өндөр хурд/DSSS PHY-д тодорхойлогдсоноор богино оршил нь урт оршилд ашиглагддаг 128 бит талбартай харьцуулах юм бол 56 бит sync талбарыг хэрэглэдэг) ашиглаж байгааг харуулдаг.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>s</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Богино слот (ангархай) хугацаа. 802.11g сүлжээ хуучин (802.11b) станцууд байхгүй байгаа учраас богино слот хугацааг хэрэглэж байгааг харуулна.</p></td></tr></tbody></table><div class=paragraph><p>Мэдэгдэж байгаа сүлжээнүүдийн одоогийн жагсаалтыг бас доорх тушаалаар харуулж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 list scan</span></code></pre></div></div><div class=paragraph><p>Энэ мэдээллийг автоматаар хувиргагчаар (adapter) эсвэл гараар <code>scan</code> хүсэлтийн тусламжтай шинэчилж болно. Хуучин өгөгдөл кэшээс автоматаар арилгагдах болохоор хэсэг хугацаа өнгөрсний дараа нэмэлт хайлтууд хийхгүй л бол энэ жагсаалт багасаж болох юм.</p></div></div><div class=sect4><h5 id=_үндсэн_тохиргоонууд>32.3.3.1.2. Үндсэн тохиргоонууд<a class=anchor href=#_үндсэн_тохиргоонууд></a></h5><div class=paragraph><p>Энэ хэсэгт FreeBSD дээр утасгүй сүлжээний хувиргагчийг шифрлэлтгүйгээр хэрхэн ажиллуулахыг харуулсан энгийн жишээг үзүүлнэ. Эдгээр ойлголтуудыг мэддэг болсныхоо дараа өөрийнхөө утасгүй сүлжээг тохируулахдаа <a href=#network-wireless-wpa>WPA</a>-г ашиглахыг бид тууштай зөвлөж байна.</p></div><div class=paragraph><p>Утасгүй сүлжээг тохируулах гурван үндсэн алхам байдаг: эдгээрт хандалтыг цэгийг сонгох, өөрийн станцыг таниулж нэвтрүүлэх, болон IP хаягийг тохируулах багтана. Дараах хэсэг алхам бүрийг хэлэлцэнэ.</p></div><div class=sect5><h6 id=_хандалтын_цэгийг_сонгох_нь>32.3.3.1.2.1. Хандалтын цэгийг сонгох нь<a class=anchor href=#_хандалтын_цэгийг_сонгох_нь></a></h6><div class=paragraph><p>Ихэнх тохиолдолд систем өөртөө бүтээгдсэн гүнзгийрүүлэн шалгах аргаа (heuristic) ашиглан хандалтын цэгийг сонгохыг нь зөвшөөрөх хангалттай байдаг. Таныг интерфэйсийг up гэж тэмдэглэх үед энэ нь анхдагч байх бөгөөд хэрэв үгүй бол интерфэйсийг <span class=filename>/etc/rc.conf</span> файлд жагсаан тохируулна, өөрөөр хэлбэл:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;DHCP&#34;</pre></div></div><div class=paragraph><p>Хэрэв олон хандалтын цэгүүд байгаа бөгөөд та тухайн нэгийг сонгохыг хүсвэл түүнийг SSID-аар нь сонгож болно:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;ssid your_ssid_here DHCP&#34;</pre></div></div><div class=paragraph><p>Адил SSID-тай олон хандалтын цэгүүд байгаа орчинд (роуминг-ийг (тэнүүчлэх) хялбар болгохын тулд ихэвчлэн хийдэг) аль нэг тухайн төхөөрөмж уруу холбогдох шаардлагатай болж болох юм. Энэ тохиолдолд та хандалтын цэгийн BSSID-ийг зааж өгч бас болох юм (та бас SSID-ийг үлдээж болно):</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;ssid your_ssid_here bssid xx:xx:xx:xx:xx:xx DHCP&#34;</pre></div></div><div class=paragraph><p>Системийн хайлт хийх давтамжуудын олонлогийг хязгаарлах зэрэг хандалтын цэгийн сонголтыг шаардах өөр аргууд байдаг.Та олон зурвасын утасгүй сүлжээний карттай байх тохиолдолд энэ нь ашигтай байдаг. Ийм тохиолдолд бүх боломжит сувгуудыг хайх нь цаг хугацаа шаардсан ажил байдаг. Ажиллагааг тухайн нэг зурвас дээр хязгаарлахын тулд <code>mode</code> параметрийг та ашиглаж болно, өөрөөр хэлбэл:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;mode 11g ssid your_ssid_here DHCP&#34;</pre></div></div><div class=paragraph><p>нь картыг 2.4GHz давтамжуудын хувьд тодорхойлогдсон 802.11g горимд картыг ажиллуулах бөгөөд бусад 5GHz-ийн сувгуудыг авч үзэхгүй байх болно. Үүнийг хийх өөр нэг арга нь ажиллагааг тухайн нэг давтамжид түгжих <code>channel</code> параметр болон хайлт хийхдээ сувгуудын жагсаалтыг заах <code>chanlist</code> параметрийг ашиглах явдал юм. Эдгээр параметрүүдийн талаар дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> гарын авлагын хуудаснаас лавлана уу.</p></div></div><div class=sect5><h6 id=_нэвтрэлт_танилт>32.3.3.1.2.2. Нэвтрэлт танилт<a class=anchor href=#_нэвтрэлт_танилт></a></h6><div class=paragraph><p>Хандалтын цэгийг сонгосны дараа таны станц өгөгдөл дамжуулахаа өмнө өөрийгөө таниулан нэвтрэх хэрэгтэй. Нэвтрэлт танилт хэд хэдэн аргаар хийгдэж болно. Ашиглагддаг хамгийн түгээмэл схем бол нээлттэй нэвтрэлт танилт гэгддэг бөгөөд энэ нь дурын станц сүлжээнд нэгдэж холбогдохыг зөвшөөрдөг. Энэ нь эхний удаа утасгүй сүлжээг тохируулж байхдаа тестийн зорилгоор таны ашиглах ёстой нэвтрэлт танилт юм. Бусад схемүүд нь өгөгдлийн урсгал эхлэхээс өмнө криптограф мэдээлэл солилцоо хийгдэхийг шаарддаг; урьдчилсан хуваалцсан түлхүүрүүд эсвэл нууц үгс ашиглах эсвэл RADIUS зэрэг арын үйлчилгээнүүдийг ашигладаг илүү төвөгтэй схемүүд зэргийг дурдаж болно. Ихэнх хэрэглэгчид нээлттэй нэвтрэлт танилт ашиглах бөгөөд энэ нь анхдагч тохиргоо байдаг. Дараагийн хамгийн түгээмэл тохируулга бол WPA-PSK бөгөөд энэ нь бас WPA Personal гэгддэг. Энэ тохируулга <a href=#network-wireless-wpa-wpa-psk>доор</a> тайлбарлагдсан байгаа.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Хэрэв танд хандалтын цэгт зориулсан Apple® AirPort® Extreme дээр суурилсан үндсэн станц байгаа бол WEP түлхүүртэй хамт хуваалцсан түлхүүрийг тохируулах хэрэгтэй болж болох юм. Үүнийг <span class=filename>/etc/rc.conf</span> файл эсвэл <a href="https://man.freebsd.org/cgi/man.cgi?query=wpa_supplicant&amp;sektion=8&amp;format=html">wpa_supplicant(8)</a> програмыг ашиглан хийж болно. Хэрэв та ганц AirPort® үндсэн станцтай бол хандалтыг иймэрхүүгээр хийж өгч болно:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;authmode shared wepmode on weptxkey 1 wepkey 01234567 DHCP&#34;</pre></div></div><div class=paragraph><p>Ерөнхийдээ хуваалцсан түлхүүр бүхий нэвтрэлт танилтыг ашиглахаас зайлсхийх хэрэгтэй, яагаад гэвэл WEP түлхүүрийн материалыг их хүчилсэн хэлбэрээр ашигладаг нь түлхүүрийг эвдэх боломжийг илүү амархан болгодог. Хэрэв WEP ашиглагдах ёстой бол (өөрөөр хэлбэл хуучин төхөөрөмжтэй нийцтэй байх үүднээс) WEP-ийг <code>open</code> буюу нээлттэй нэвтрэлт танилттай цуг ашиглах нь зүйтэй юм. WEP-ийн талаар дэлгэрэнгүй мэдээллийг <a href=#network-wireless-wep>WEP</a>-с олж болно.</p></div></td></tr></tbody></table></div></div><div class=sect5><h6 id=_dhcp_ээр_ip_хаяг_авах>32.3.3.1.2.3. DHCP-ээр IP хаяг авах<a class=anchor href=#_dhcp_ээр_ip_хаяг_авах></a></h6><div class=paragraph><p>Хандалтын цэгийг сонгож нэвтрэлт танилтын параметрүүдийг тохируулсны дараа холбогдохын тулд та IP хаяг авах хэрэгтэй болно. Та өөрийн утасгүй IP хаягийг ихэвчлэн DHCP-ээр авах болно. Ингэхийн тулд ердөө л <span class=filename>/etc/rc.conf</span> файлыг засварлаж дээрх жишээн дээр үзүүлсэн шиг өөрийн төхөөрөмжийн тохиргоонд зориулж <code>DHCP</code> гэж нэмж өгнө:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;DHCP&#34;</pre></div></div><div class=paragraph><p>Энэ хүрэхэд та утасгүй интерфэйсээ ажиллуулахад бэлэн байх болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif start</span></code></pre></div></div><div class=paragraph><p>Интерфэйс ажиллаж эхэлсний дараа <span class=filename>ath0</span> интерфэйсийн төлөвийг үзэхийн тулд <code>ifconfig</code> тушаалыг ашиглана:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0</span>
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        ether 00:11:95:d5:43:62
	inet 192.168.1.100 netmask 0xffffff00 broadcast 192.168.1.255
        media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g
        status: associated
	ssid dlinkap channel 11 <span class=o>(</span>2462 Mhz 11g<span class=o>)</span> bssid 00:13:46:49:41:76
	country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7
  	scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7
  	roam:rate 5 protmode CTS wme burst</code></pre></div></div><div class=paragraph><p><code>status: associated</code> мөр нь таныг утасгүй сүлжээнд (бидний тохиолдолд <code>dlinkap</code> сүлжээ уруу) холбогдсон гэдгийг харуулж байна. <code>bssid 00:13:46:49:41:76</code> хэсэг нь таны хандалтын цэгийн MAC хаяг юм; <code>authmode OPEN</code> хэсэг нь холболт шифрлэгдээгүй гэдгийг танд харуулж байна (<code>OPEN</code>).</p></div></div><div class=sect5><h6 id=_статик_ip_хаяг>32.3.3.1.2.4. Статик IP хаяг<a class=anchor href=#_статик_ip_хаяг></a></h6><div class=paragraph><p>DHCP серверээс IP хаяг авч чадахгүй тохиолдолд тогтмол IP хаяг та тавьж болно. Дээр үзүүлсэн <code>DHCP</code> гэсэн түлхүүр үгийг хаягийн мэдээллээр солих хэрэгтэй. Хандалтын цэгийг сонгохдоо хэрэглэсэн бусад параметрүүдийг үлдээхээ мартуузай:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;inet 192.168.1.100 netmask 255.255.255.0 ssid your_ssid_here&#34;</pre></div></div></div></div><div class=sect4><h5 id=network-wireless-wpa>32.3.3.1.3. WPA<a class=anchor href=#network-wireless-wpa></a></h5><div class=paragraph><p>WPA (Wi-Fi Protected Access буюу Wi-Fi Хамгаалагдсан Хандалт) нь <a href=#network-wireless-wep>WEP</a>-ийн сул тал болон зөв нэвтрэлт танилтын дутмаг байдлыг арилгах зорилгоор 802.11 сүлжээнүүдэд цуг ашиглагддаг аюулгүй байдлын протокол юм. WPA нь 802.1X нэвтрэлт танилтын протоколыг хөшүүрэгддэг бөгөөд өгөгдлийн бүрэн бүтэн байдалд зориулж WEP-ийн оронд хэд хэдэн шифрүүдийн нэгийг ашигладаг. WPA-ийн шаарддаг цорын ганц шифр бол TKIP (Temporary Key Integrity Protocol) юм. TKIP нь бүрэн бүтэн байдал шалгалт, хуурамч үйлдлийг илрүүлэлт болон илрүүлсэн халдлагуудад хариулахад зориулсан арга хэмжээнүүдийг WEP-ийн ашигладаг үндсэн RC4 шифрт нэмэн өргөтгөсөн шифр юм. TKIP нь хуучин тоног төхөөрөмж дээр зөвхөн програм хангамжийн өөрчлөлттэйгөөр ажиллахаар хийгдсэн; энэ нь аюулгүй байдлыг сайжруулдаг боловч халдлагаас бүрэн гүйцэд хамгаалж чаддаггүй. WPA нь TKIP-г орлуулж AES-CCMP шифрийг бас заадаг бөгөөд боломжтой тохиолдолд үүнийг хэрэглэхийг урьтал болгодог; энэ тодорхойлолтод WPA2 (эсвэл RSN) гэсэн ухагдахуун нийтлэг ашиглагддаг.</p></div><div class=paragraph><p>WPA нь нэвтрэлт танилт болон шифрлэлтийн протоколуудыг тодорхойлдог. Нэвтрэлт танилт нь хоёр техникийн аль нэгээр ихэвчлэн хийгддэг: 802.1X болон RADIUS зэрэг арын нэвтрэлт танилтын үйлчилгээгээр эсвэл урьдчилан хуваалцсан нууц үг ашиглан станц болон хандалтын хооронд хамгийн багаар мэдээлэл солилцох (handshake) замаар хийгддэг. Эхнийх нь ихэвчлэн WPA Enterprise, сүүлийнх нь WPA Personal гэгддэг. Ихэнх хүмүүс утасгүй сүлжээнд зориулж арын RADIUS сервер өөрсөддөө зориулж тохируулдаггүй учир WPA-PSK нь WPA-д зориулсан хамгийн түгээмэл тохиолддог тохиргоо юм.</p></div><div class=paragraph><p>Утасгүй холболтын хяналт болон нэвтрэлт танилт (түлхүүрийн тохиролцоо эсвэл сервертэй хийх нэвтрэлт танилт) нь <a href="https://man.freebsd.org/cgi/man.cgi?query=wpa_supplicant&amp;sektion=8&amp;format=html">wpa_supplicant(8)</a> хэрэгслээр хийгддэг. Энэ програм нь ажиллахын тулд <span class=filename>/etc/wpa_supplicant.conf</span> тохиргооны файл шаарддаг. Энэ файлын талаар дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=wpa_supplicant.conf&amp;sektion=5&amp;format=html">wpa_supplicant.conf(5)</a> гарын авлагын хуудаснаас олж болно.</p></div><div class=sect5><h6 id=network-wireless-wpa-wpa-psk>32.3.3.1.3.1. WPA-PSK<a class=anchor href=#network-wireless-wpa-wpa-psk></a></h6><div class=paragraph><p>WPA-PSK нь бас WPA Personal гэгддэг бөгөөд өгөгдсөн нууц үгээс үүсгэгдсэн pre-shared key буюу (PSK) урьдчилан хуваалцсан түлхүүр дээр суурилдаг бөгөөд утасгүй сүлжээнд мастер түлхүүр болон ашиглагддаг. Энэ нь утасгүй хэрэглэгч бүр адил түлхүүрийг хуваалцана гэсэн үг юм. WPA-PSK нь нэвтрэлт танилтын сервер хэрэглэх боломжгүй эсвэл шаардлагагүй жижиг сүлжээнүүдэд зориулагдсан юм.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Хангалттай урт, төрөл бүрийн тэмдэгтүүдээс бүтсэн, таах буюу/эсвэл халдах боломжгүй хэцүү нууц үгсийг үргэлж ашиглах хэрэгтэй.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Эхний алхам нь <span class=filename>/etc/wpa_supplicant.conf</span> файлыг өөрийн сүлжээний SSID болон урьдчилан хуваалцсан түлхүүрээр тохируулах явдал юм:</p></div><div class="literalblock programlisting"><div class=content><pre>network={
  ssid=&#34;freebsdap&#34;
  psk=&#34;freebsdmall&#34;
}</pre></div></div><div class=paragraph><p>Дараа нь бид <span class=filename>/etc/rc.conf</span> файлд утасгүй төхөөрөмжийн тохиргоо WPA-аар хийгдэж IP хаяг DHCP-ээс авагдана гэдгийг зааж өгнө:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;WPA DHCP&#34;</pre></div></div><div class=paragraph><p>Дараа нь бид интерфэйсийг босгож ажиллуулна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif start</span>
Starting wpa_supplicant.
DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 5
DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 6
DHCPOFFER from 192.168.0.1
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.1
bound to 192.168.0.254 <span class=nt>--</span> renewal <span class=k>in </span>300 seconds.
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 <span class=o>(</span>2412 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</code></pre></div></div><div class=paragraph><p>Эсвэл та үүнийг гараар <a href=#network-wireless-wpa-wpa-psk>дээрх</a> <span class=filename>/etc/wpa_supplicant.conf</span> ашиглан хийж доор дурдсан тушаалыг ажиллуулж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf</span>
Trying to associate with 00:11:95:c3:0d:ac <span class=o>(</span><span class=nv>SSID</span><span class=o>=</span><span class=s1>&#39;freebsdap&#39;</span> <span class=nv>freq</span><span class=o>=</span>2412 MHz<span class=o>)</span>
Associated with 00:11:95:c3:0d:ac
WPA: Key negotiation completed with 00:11:95:c3:0d:ac <span class=o>[</span><span class=nv>PTK</span><span class=o>=</span>CCMP <span class=nv>GTK</span><span class=o>=</span>CCMP]
  	 CTRL-EVENT-CONNECTED - Connection to 00:11:95:c3:0d:ac completed <span class=o>(</span>auth<span class=o>)</span> <span class=o>[</span><span class=nb>id</span><span class=o>=</span>0 <span class=nv>id_str</span><span class=o>=]</span></code></pre></div></div><div class=paragraph><p>Дараагийн үйлдэл нь DHCP серверээс IP хаяг авахын тулд <code>dhclient</code> тушаалыг ажиллуулах явдал юм:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dhclient wlan0</span>
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.1
bound to 192.168.0.254 <span class=nt>--</span> renewal <span class=k>in </span>300 seconds.
<span class=c># ifconfig wlan0</span>
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 <span class=o>(</span>2412 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Хэрэв <span class=filename>/etc/rc.conf</span> файл нь <code>DHCP</code> гэсэн утгатай <code>ifconfig_wlan0</code> мөртэй тохируулагдсан бол (<code>ifconfig_wlan0="DHCP"</code>) <code>wpa_supplicant</code> нь холболтын цэгтэй холбогдсоны дараа <code>dhclient</code> тушаал автоматаар ажиллах болно.</p></div></td></tr></tbody></table></div><div class=paragraph><p>DHCP-ийн хэрэглээ боломжгүй тохиолдолд <code>wpa_supplicant</code> станцыг таниулж нэвтрүүлсний дараа та статик IP хаяг тохируулж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif start</span>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.20
bound to 192.168.0.254 <span class=nt>--</span> renewal <span class=k>in </span>300 seconds.
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 <span class=o>(</span>2412 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</code></pre></div></div><div class=paragraph><p>Урьд нь үзүүлсний адил интерфэйсийг гараар <code>wpa_supplicant</code> болон <code>ifconfig</code> тушаалуудаар босгох боломжтой байдаг.</p></div></div><div class=sect5><h6 id=network-wireless-wpa-eap-ttls>32.3.3.1.3.2. EAP-TTLS-тэй WPA<a class=anchor href=#network-wireless-wpa-eap-ttls></a></h6><div class=paragraph><p>EAP-TLS-тэй байхад нэвтрэлт танилтын сервер болон клиентэд сертификат хэрэгтэй бол EAP-TTLS-тэй (EAP-Tunneled Transport Layer Security) байхад клиентийн сертификат нэмэлт сонголт байдаг. Энэ арга нь зорчигчид клиент талдаа сертификатгүй байсан ч гэсэн нууцлаг SSL туннель үүсгэж чаддаг зарим нэг аюулгүй вэб сайтуудын хийдэгтэй ойролцоо байдаг. EAP-TTLS нь нэвтрэлт танилтын өгөгдлийг аюулгүй тээвэрлэхэд зориулж шифрлэгдсэн TLS туннелийг ашиглах болно.</p></div><div class=paragraph><p>Тохиргоог <span class=filename>/etc/wpa_supplicant.conf</span> файлаар хийнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>network={
  ssid=&#34;freebsdap&#34;
  proto=RSN
  key_mgmt=WPA-EAP
  eap=TTLS <i class=conum data-value=1></i><b>(1)</b>
  identity=&#34;test&#34; <i class=conum data-value=2></i><b>(2)</b>
  password=&#34;test&#34; <i class=conum data-value=3></i><b>(3)</b>
  ca_cert=&#34;/etc/certs/cacert.pem&#34; <i class=conum data-value=4></i><b>(4)</b>
  phase2=&#34;auth=MD5&#34;
}</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Энэ талбарт бид өөрийн холболтондоо зориулж EAP аргыг дурдана.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td><code>identity</code> талбар нь шифрлэгдсэн TLS туннель доторх EAP нэвтрэлт танилтад зориулсан таниулах мөрийг агуулна.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td><code>password</code> талбар нь EAP нэвтрэлт танилтад зориулсан нэвтрэх үгийг агуулна.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td><code>ca_cert</code> талбар нь CA сертификатын файлын замын нэрийг заана. Энэ файл нь серверийн сертификатыг шалгахад хэрэгтэй байдаг.</td></tr></tbody></table></div><div class=paragraph><p>Энэ талбарт бид шифрлэгдсэн TLS туннельд ашиглагдсан нэвтрэлт танилтын аргыг заана. Бидний тохиолдолд MD5-Challenge-тай цуг EAP ашиглагдаж байна. "inner authentication" дотоод нэвтрэлт танилт үе нь ихэвчлэн "phase2" буюу хоёрдугаар үе гэгддэг.</p></div><div class=paragraph><p>Дараах мөрүүдийг та <span class=filename>/etc/rc.conf</span> файлд бас нэмэх хэрэгтэй:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;WPA DHCP&#34;</pre></div></div><div class=paragraph><p>Дараагийн алхам бол интерфэйсийг босгож ажиллуулах явдал юм:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif start</span>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.20
bound to 192.168.0.254 <span class=nt>--</span> renewal <span class=k>in </span>300 seconds.
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 <span class=o>(</span>2412 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</code></pre></div></div></div><div class=sect5><h6 id=network-wireless-wpa-eap-peap>32.3.3.1.3.3. EAP-PEAP-тэй WPA<a class=anchor href=#network-wireless-wpa-eap-peap></a></h6><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>PEAPv0/EAP-MSCHAPv2 нь хамгийн түгээмэл PEAP арга юм. Баримтын үлдсэн хэсэгт энэ аргыг PEAP гэж нэрлэх болно.</p></div></td></tr></tbody></table></div><div class=paragraph><p>PEAP (Protected EAP) нь EAP-TTLS-ийн өөр нэг хувилбар хэлбэрээр байхаар хийгдсэн бөгөөд хамгийн EAP-TLS-с гадна хамгийн түгээмэл EAP стандарт юм. Өөрөөр хэлбэл хэрэв та төрөл бүрийн OS-үүд холилдсон сүлжээтэй бол PEAP нь EAP-TLS-ийн дараа орох хамгийн ихээр дэмжигдсэн стандарт байх юм.</p></div><div class=paragraph><p>PEAP нь EAP-TLS-тэй төстэй байдаг: энэ нь клиент болон нэвтрэлт танилтын серверийн хооронд нэвтрэлт танилтын мэдээллийн солилцоог хамгаалах шифрлэгдсэн туннель үүсгэн клиентүүдийг танин нэвтрүүлэхийн тулд сервер талын сертификатыг ашигладаг. Аюулгүй байдлын ухагдахуун дахь EAP-TTLS болон PEAP-ийн хоорондох ялгаа нь PEAP нэвтрэлт танилт хэрэглэгчийн нэрийг цэвэр текст хэлбэрээр, зөвхөн нууц үгийг шифрлэгдсэн TLS туннелээр цацдаг явдал юм. EAP-TTLS нь хэрэглэгчийн нэр болон нууц үгт зориулж TLS туннелийг ашиглах болно.</p></div><div class=paragraph><p>Бид <span class=filename>/etc/wpa_supplicant.conf</span> файлыг засварлаж EAP-PEAP-тэй холбоотой тохируулгуудыг нэмэх хэрэгтэй болно:</p></div><div class="literalblock programlisting"><div class=content><pre>network={
  ssid=&#34;freebsdap&#34;
  proto=RSN
  key_mgmt=WPA-EAP
  eap=PEAP <i class=conum data-value=1></i><b>(1)</b>
  identity=&#34;test&#34; <i class=conum data-value=2></i><b>(2)</b>
  password=&#34;test&#34; <i class=conum data-value=3></i><b>(3)</b>
  ca_cert=&#34;/etc/certs/cacert.pem&#34; <i class=conum data-value=4></i><b>(4)</b>
  phase1=&#34;peaplabel=0&#34; <i class=conum data-value=5></i><b>(5)</b>
  phase2=&#34;auth=MSCHAPV2&#34; <i class=conum data-value=6></i><b>(6)</b>
}</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Энэ талбарт бид өөрийн холболтондоо зориулж EAP аргыг ашиглахаа дурдана.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td><code>identity</code> талбар нь шифрлэгдсэн TLS туннель доторх EAP нэвтрэлт танилтад зориулсан таниулах мөрийг агуулна.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td><code>password</code> талбар нь EAP нэвтрэлт танилтад зориулсан нэвтрэх үгийг агуулна.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td><code>ca_cert</code> талбар нь CA сертификатын файлын замын нэрийг заана. Энэ файл нь серверийн сертификатыг шалгахад хэрэгтэй байдаг.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Энэ талбар нь нэвтрэлт танилтын (TLS туннель) эхний үед зориулсан параметрүүдийг агуулна. Ашигласан нэвтрэлт танилтын серверээс хамаараад нэвтрэлт танилтад зориулж тусгай хаяг/шошгыг зааж өгөх хэрэгтэй болно. Ихэнх тохиолдолд хаяг/шошго нь "клиентийн EAP шифрлэлт" байх бөгөөд үүнийг <code>peaplabel=0</code> гэж тохируулна. Илүү мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=wpa_supplicant.conf&amp;sektion=5&amp;format=html">wpa_supplicant.conf(5)</a> гарын авлагын хуудаснаас олж болно.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Энэ талбарт бид шифрлэгдсэн TLS туннельд ашиглагдсан нэвтрэлт танилтын аргыг заана. PEAP-ийн хувьд энэ нь <code>auth=MSCHAPV2</code> байна.</td></tr></tbody></table></div><div class=paragraph><p>Доор дурдсаныг <span class=filename>/etc/rc.conf</span> файлд нэмэх ёстой:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;WPA DHCP&#34;</pre></div></div><div class=paragraph><p>Дараа нь бид интерфэйсийг босгож ажиллуулж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/netif start</span>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.20
bound to 192.168.0.254 <span class=nt>--</span> renewal <span class=k>in </span>300 seconds.
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 <span class=o>(</span>2412 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</code></pre></div></div></div></div><div class=sect4><h5 id=network-wireless-wep>32.3.3.1.4. WEP<a class=anchor href=#network-wireless-wep></a></h5><div class=paragraph><p>WEP (Wired Equivalent Privacy) нь анхдагч 802.11 стандартын хэсэг юм. Үүнд ямар ч нэвтрэлт танилтын арга байхгүй, энэ нь хандалт хяналтын зөвхөн сул хэлбэр бөгөөд хялбар эвдэх боломжтой байдаг.</p></div><div class=paragraph><p>WEP-ийг <code>ifconfig</code> тушаалаар тохируулж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0</span>
	    <span class=c># ifconfig wlan0 inet 192.168.1.100 netmask 255.255.255.0 \</span>
	      ssid my_net wepmode on weptxkey 3 wepkey 3:0x3456789012</code></pre></div></div><div class=ulist><ul><li><p><code>weptxkey</code> нь дамжуулалтад ямар WEP түлхүүр ашиглахыг хэлж байна. Энд бид гурав дахь түлхүүрийг ашиглаж байна. Энэ нь хандалтын цэг дэх тохиргоотой таарах ёстой. Хэрэв та хандалтын цэг дээр ямар түлхүүр ашиглагдаж байгааг мэдэхгүй байгаа бол энэ утгад <code>1</code>-ийг (өөрөөр хэлбэл эхний түлхүүр) ашиглах хэрэгтэй.</p></li><li><p><code>wepkey</code> нь аль нэг WEP түлхүүрийг сонгоно. Энэ нь <em>index:key</em> хэлбэрийн байх ёстой. Анхдагчаар <code>1</code> гэж түлхүүр тохируулагдана. Хэрэв бид эхний түлхүүрээс өөр түлхүүрүүдийг ашиглах бол индексийг тохируулах хэрэгтэй.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Та <code>0x3456789012</code>-г хандалтын цэг дээр ашиглахаар тохируулсан түлхүүрээр солих ёстой.</p></div></td></tr></tbody></table></div></li></ul></div><div class=paragraph><p>Цаашхи мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> гарын авлагын хуудаснаас унших нь зүйтэй юм.</p></div><div class=paragraph><p><code>wpa_supplicant</code> хэрэгслийг өөрийн утасгүй интерфэйсийг WEP-тэй тохируулахын тулд бас ашиглаж болно. Дараах мөрийг <span class=filename>/etc/wpa_supplicant.conf</span> файлд нэмж дээрх жишээг тохируулж болно:</p></div><div class="literalblock programlisting"><div class=content><pre>network={
  ssid=&#34;my_net&#34;
  key_mgmt=NONE
  wep_key3=3456789012
  wep_tx_keyidx=3
}</pre></div></div><div class=paragraph><p>Дараа нь:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf</span>
Trying to associate with 00:13:46:49:41:76 <span class=o>(</span><span class=nv>SSID</span><span class=o>=</span><span class=s1>&#39;dlinkap&#39;</span> <span class=nv>freq</span><span class=o>=</span>2437 MHz<span class=o>)</span>
Associated with 00:13:46:49:41:76</code></pre></div></div></div></div></div><div class=sect2><h3 id=_ad_hoc_горим>32.3.4. Ad-hoc горим<a class=anchor href=#_ad_hoc_горим></a></h3><div class=paragraph><p>IBSS горим буюу бас ad-hoc гэгддэг горим нь цэгээс цэгт холбогдох холболтуудад зориулагдан хийгдсэн. Жишээ нь <code>A</code> машин болон <code>B</code> машины хооронд ad-hoc сүлжээ үүсгэхийн тулд бид ердөө л хоёр IP хаяг болон SSID сонгох хэрэгтэй болно.</p></div><div class=paragraph><p><code>A</code> машин дээр:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0 wlanmode adhoc</span>
<span class=c># ifconfig wlan0 inet 192.168.0.1 netmask 255.255.255.0 ssid freebsdap</span>
<span class=c># ifconfig wlan0</span>
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  ether 00:11:95:c3:0d:ac
          inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;adhoc&gt;
	  status: running
	  ssid freebsdap channel 2 <span class=o>(</span>2417 Mhz 11g<span class=o>)</span> bssid 02:11:95:c3:0d:ac
          country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
	  protmode CTS wme burst</code></pre></div></div><div class=paragraph><p><code>adhoc</code> параметр нь интерфэйс IBSS горимд ажиллаж байгааг харуулж байна.</p></div><div class=paragraph><p><code>B</code> машин дээр бид <code>A</code> машиныг илрүүлж чадах ёстой:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0 wlanmode adhoc</span>
<span class=c># ifconfig wlan0 up scan</span>
  SSID/MESH ID       BSSID             CHAN RATE        S:N   INT CAPS
  freebsdap       02:11:95:c3:0d:ac    2   54M <span class=nt>-64</span>:-96   100 IS  WME</code></pre></div></div><div class=paragraph><p>Гаралт дээрх <code>I</code> нь <code>A</code> машин ad-hoc горимд байгааг батална. Бид одоо <code>B</code>-г өөр IP хаягтайгаар тохируулах хэрэгтэй:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 inet 192.168.0.2 netmask 255.255.255.0 ssid freebsdap</span>
<span class=c># ifconfig wlan0</span>
wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  ether 00:11:95:d5:43:62
          inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;adhoc&gt;
	  status: running
	  ssid freebsdap channel 2 <span class=o>(</span>2417 Mhz 11g<span class=o>)</span> bssid 02:11:95:c3:0d:ac
          country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
	  protmode CTS wme burst</code></pre></div></div><div class=paragraph><p><code>A</code> болон <code>B</code> нь одоо мэдээлэл солилцоход бэлэн боллоо.</p></div></div><div class=sect2><h3 id=network-wireless-ap>32.3.5. FreeBSD хандах цэг болж ажиллах<a class=anchor href=#network-wireless-ap></a></h3><div class=paragraph><p>FreeBSD нь Access Point (AP) буюу хандах цэг болж ажилласнаар нэмэлт хандах цэг болсон төхөөрөмж худалдаж авах эсвэл цэгээс цэгийн хооронд холбогдож ажилладаг сүлжээ байгуулах зэрэг нэмэлт үйлдлүүдийг хэмнэж болдог. Хэрэв таны FreeBSD машин сүлжээнээс сүлжээний хооронд дамжуулдаг гүүр болж (жишээ нь интернэтэд холбож) ажиллах шаардлагатай үед илүү тохирдог.</p></div><div class=sect3><h4 id=network-wireless-ap-basic>32.3.5.1. Үндсэн тохиргоо<a class=anchor href=#network-wireless-ap-basic></a></h4><div class=paragraph><p>FreeBSD машинаа хандах цэг болж ажилладгаар тохируулахаасаа өмнө цөмөө сүлжээнийхээ картанд тохируулж тохируулсан байх ёстой. Та мөн хэрэглэх нууцлалын дамжуулах протокол буюу бүртгэлээ нэмэх хэрэгтэй. Нэмэлт мэдээллийг <a href=#network-wireless-basic>Үндсэн тохируулга</a> хэсгээс харна уу.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>NDIS хэмээгч драйвер орлуулагч болон Виндоусын драйверуудыг ашигласан тохиолдолд хандах цэг болгож ашиглах боломж одоогоор байхгүй. Зөвхөн FreeBSD-н үндсэн утасгүй холболтын драйвер л хандах цэг болох горимыг дэмжиж байгаа.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Утасгүй холболтын сүлжээ дэмжигдэх ажилладаг болж ирэнгүүт нь утасгүй сүлжээний төхөөрөмж тань тухайн машин дээрээ хандах цэг болж ажиллах чадвартайг шалгаж болдог (заримдаа hostap горим гэж нэрлэдэг):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0</span>
<span class=c># ifconfig wlan0 list caps</span>
<span class=nv>drivercaps</span><span class=o>=</span>6f85edc1&lt;STA,FF,TURBOP,IBSS,HOSTAP,AHDEMO,TXPMGT,SHSLOT,SHPREAMBLE,MONITOR,MBSS,WPA1,WPA2,BURST,WME,WDS,BGSCAN,TXFRAG&gt;
<span class=nv>cryptocaps</span><span class=o>=</span>1f&lt;WEP,TKIP,AES,AES_CCM,TKIPMIC&gt;</code></pre></div></div><div class=paragraph><p>Дээрх тушаалын гаралтаас <code>HOSTAP</code> гэдэг үг нь тухай утасгүй сүлжээний карт нь хандах цэг болж ажиллах чадвартай гэдгийг баталж өгч байна. Мөн төрөл бүрийн нууцлалын боломжууд нь WEP, TKIP, AES, гэх мэтээр дурдагддаг. Эдгээр нь хандах цэгийн дамжуулалтаа нууцлахад хэрэглэгдэх чухал хэрэгтэй мэдээлэл болж өгдөг.</p></div><div class=paragraph><p>Сүлжээний псевдо төхөөрөмжийг үүсгэх үед утасгүй сүлжээний төхөөрөмжийг зөвхөн hostap горимд оруулах боломжтой байдаг, тэгэхээр өмнө нь үүсгэсэн төхөөрөмжийг эхлээд устгах ёстой:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 destroy</span></code></pre></div></div><div class=paragraph><p>Дараа нь харин бусад параметрүүдийг тохируулахаасаа өмнө зөв тохиргоотойгоор дахин үүсдэг:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0 wlanmode hostap</span>
<span class=c># ifconfig wlan0 inet 192.168.0.1 netmask 255.255.255.0 ssid freebsdap mode 11g channel 1</span></code></pre></div></div><div class=paragraph><p>Дахин <code>ifconfig</code> тушаалаар <span class=filename>wlan0</span> төхөөрөмжийн төлөв байдлыг шалгая:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0</span>
  wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  ether 00:11:95:c3:0d:ac
	  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
	  status: running
	  ssid freebsdap channel 1 <span class=o>(</span>2412 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
	  protmode CTS wme burst dtimperiod 1 <span class=nt>-dfs</span></code></pre></div></div><div class=paragraph><p><code>hostap</code> үг нь уг төхөөрөмжийг тухайн машин дээр хандах цэг болж ажиллаж байгааг нь илэрхийлж байна.</p></div><div class=paragraph><p>Тухайн төхөөрөмжийн ийм тохируулгыг машин асах үед нь хийгдэхээр тохируулъя гэж бодсон тохиолдолд <span class=filename>/etc/rc.conf</span> файлд дараах мөрүүдийг оруулж өгөх хэрэгтэй:</p></div><div class="literalblock programlisting"><div class=content><pre>wlans_ath0=&#34;wlan0&#34;
create_args_wlan0=&#34;wlanmode hostap&#34;
ifconfig_wlan0=&#34;inet 192.168.0.1 netmask 255.255.255.0 ssid freebsdap mode 11g channel 1&#34;</pre></div></div></div><div class=sect3><h4 id=_тухайн_машин_дээр_хандах_цэг_нь_нэвтрэх_үйлдэл_болон_нууцлах_үйлчилгээ_ашиглахгүй_ажиллах>32.3.5.2. Тухайн машин дээр хандах цэг нь нэвтрэх үйлдэл болон нууцлах үйлчилгээ ашиглахгүй ажиллах<a class=anchor href=#_тухайн_машин_дээр_хандах_цэг_нь_нэвтрэх_үйлдэл_болон_нууцлах_үйлчилгээ_ашиглахгүй_ажиллах></a></h4><div class=paragraph><p>Хэдийгээр хандах цэгийг нэвтрэх үйлдэл болон холболтын нууцлал ашиглахгүйгээр ажиллуулах нь тийм сайшаалтай биш боловч хандах цэгийн ажиллагааг шалгахын тулд ингэж тохируулж ажиллуулах шаардлага гардаг. Энэ тохируулга нь мөн хэрэглэгчтэй холбогдолтой хүндрэлүүдийг шийдэхэд бас хэрэглэгдэж болно.</p></div><div class=paragraph><p>Өмнө харуулснаар тохируулагдсан хандах цэгийг өөр утасгүй сүлжээтэй ажиллаж буй машинаас хайлт хийж олж болдог:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0</span>
<span class=c># ifconfig wlan0 up scan</span>
SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS
freebsdap       00:11:95:c3:0d:ac    1   54M <span class=nt>-66</span>:-96  100 ES   WME</code></pre></div></div><div class=paragraph><p>Хэрэглэгч машинаас хандах цэгийг ингэж олоод түүнтэй дараах маягаар холбогдож болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 inet 192.168.0.2 netmask 255.255.255.0 ssid freebsdap</span>
<span class=c># ifconfig wlan0</span>
  wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  ether 00:11:95:d5:43:62
	  inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g
	  status: associated
	  ssid freebsdap channel 1 <span class=o>(</span>2412 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7
	  scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7
	  roam:rate 5 protmode CTS wme burst</code></pre></div></div></div><div class=sect3><h4 id=_wpa_нууцлалтай_хандах_цэг_болсон_машин>32.3.5.3. WPA нууцлалтай хандах цэг болсон машин<a class=anchor href=#_wpa_нууцлалтай_хандах_цэг_болсон_машин></a></h4><div class=paragraph><p>Энэ хэсэгт хандах цэг болж ажиллаж буй FreeBSD машиныг WPA нууцлалын бүртгэл хэрэглэх тухай өгүүлэх болно. WPA нууцлалтай холбогдолтой болон WPA дээр суурилсан хэрэглэгчийн тохиргооны талаар дэлгэрэнгүй мэдээллийг <a href=#network-wireless-wpa>WPA</a> хэсгээс хараарай.</p></div><div class=paragraph><p>hostapd нэртэй далд чөтгөр нь WPA-г ашиглаж буй хандах цэг дээр хэрэглэгчийг нэвтрүүлэх болон түлхүүр үг солилцох үйлдлүүдэд зориулагдсан байдаг.</p></div><div class=paragraph><p>Дараах жишээн дээр бүх тохиргооны үйлдлүүд нь хандах цэг болж ажиллаж буй FreeBSD машин дээр гүйцэтгэгдэх болно. Хандах цэг зөв ажиллаж эхэлсэн үед hostapd далд чөтгөрийг автоматаар машиныг ачаалагдах үед зөвшөөрөхийн тулд <span class=filename>/etc/rc.conf</span> файлд дараах мөрийг нэмж өгөх хэрэгтэй:</p></div><div class="literalblock programlisting"><div class=content><pre>hostapd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>hostapd далд чөтгөрийг тохируулахаасаа өмнө <a href=#network-wireless-ap-basic>Үндсэн тохиргоо</a> хэсэгт заасан ерөнхий тохиргоог хийсэн эсэхээ магадлаарай.</p></div><div class=sect4><h5 id=_wpa_psk>32.3.5.3.1. WPA-PSK<a class=anchor href=#_wpa_psk></a></h5><div class=paragraph><p>WPA-PSK нь хэрэглэгчид нэвтрэх үйлдэл хийдэг сервер шаардлагагүй юм уу эсвэл боломжгүй болсон бага зэргийг сүлжээнд зориулагдсан билээ.</p></div><div class=paragraph><p>Тохиргоо нь <span class=filename>/etc/hostapd.conf</span> файлд хийгддэг:</p></div><div class="literalblock programlisting"><div class=content><pre>interface=wlan0 <i class=conum data-value=1></i><b>(1)</b>
debug=1 <i class=conum data-value=2></i><b>(2)</b>
ctrl_interface=/var/run/hostapd <i class=conum data-value=3></i><b>(3)</b>
ctrl_interface_group=wheel <i class=conum data-value=4></i><b>(4)</b>
ssid=freebsdap <i class=conum data-value=5></i><b>(5)</b>
wpa=1 <i class=conum data-value=6></i><b>(6)</b>
wpa_passphrase=freebsdmall <i class=conum data-value=7></i><b>(7)</b>
wpa_key_mgmt=WPA-PSK <i class=conum data-value=8></i><b>(8)</b>
wpa_pairwise=CCMP TKIP <i class=conum data-value=9></i><b>(9)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Энэ талбар нь хандах цэг болж ажиллаж буй утасгүй сүлжээний төхөөрөмжийг заадаг.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>hostapd-н гүйцэтгэж байгаа явцыг харуулалтын түвшинг заадаг талбар. <code>1</code> гэсэн утга нь хамгийн бага түвшинг зааж байгаа билээ.
<code>ctrl_interface</code> гэсэн талбар нь hostapd-д хэрэглэгддэг <a href="https://man.freebsd.org/cgi/man.cgi?query=hostapd_cli&amp;sektion=8&amp;format=html">hostapd_cli(8)</a> төрлийн гадны програмуудтай холбогдоход хэрэглэгддэг домэйн сокет файлуудыг хадгалах сангийн байрлалыг зааж өгдөг. Энд анхдагч утга нь хэрэглэгдсэн байна.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td><code>ctrl_interface_group</code> гэсэн мөрөнд хяналт хийдэг төхөөрөмж рүү хандаж болох бүлгийн нэр (энд <code>wheel</code> бүлгийг оруулсан) байна.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Энэ талбарт сүлжээний нэрийг оруулдаг.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td><code>wpa</code> талбар нь WPA нууцлалыг зөвшөөрдөг бөгөөд ямар бүртгэл шаардлагатайг нь тодорхойлж өгнө. <code>1</code> гэсэн утга нь хандах цэгийг WPA-PSK нууцлалаар
тохируулдаг.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td><code>wpa_passphrase</code> талбарт ASCII тэмдэгтээр бичигдсэн WPA нэвтрэх үйлдлийн нууц үг агуулагддаг.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td><code>wpa_key_mgmt</code> мөр нь хэрэглэж буй түлхүүр үгний зориулалтанд хамаатай. Манай тохиолдолд энэ нь WPA-PSK байна.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td><code>wpa_pairwise</code> талбар нь хандах цэгт тохиромжтой нууц хувиргалтуудыг харуулдаг. Энд TKIP (WPA) ба CCMP (WPA2) хувиргагчид хоёулаа хүлээн зөвшөөрөгдөнө. CCMP хувиргагч нь TKIP-н бас нэг хувилбар бөгөөд боломжтой бол үүнийг илүүд үзэх хэрэгтэй. TKIP хувиргагчийг CCMP хувиргагч хэрэглэх боломжгүй үед л сонгох нь зүйтэй.</td></tr></tbody></table></div><div class=paragraph><p>Дараагийн алхам нь hostapd-г эхлүүлэх:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service hostapd forcestart</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0</span>
  wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 2290
	  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  inet6 fe80::211:95ff:fec3:dac%ath0 prefixlen 64 scopeid 0x4
	  ether 00:11:95:c3:0d:ac
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
	  status: associated
	  ssid freebsdap channel 1 bssid 00:11:95:c3:0d:ac
	  authmode WPA2/802.11i privacy MIXED deftxkey 2 TKIP 2:128-bit txpowmax 36 protmode CTS dtimperiod 1 bintval 100</code></pre></div></div><div class=paragraph><p>Хандах цэг одоо ажиллагаанд орсон бөгөөд хэрэглэгчийн зүгээс холбогдох тухай дэлгэрэнгүй мэдээллийг <a href=#network-wireless-wpa>WPA</a> хэсгээс харна уу. Хандах цэгт холбогдсон төхөөрөмжүүдийг <code>ifconfig wlan0 list sta</code> гэсэн тушаалаар харж болно.</p></div></div></div><div class=sect3><h4 id=_wep_нууцлал_хэрэглэж_хандах_цэг_болсон_машин>32.3.5.4. WEP нууцлал хэрэглэж хандах цэг болсон машин<a class=anchor href=#_wep_нууцлал_хэрэглэж_хандах_цэг_болсон_машин></a></h4><div class=paragraph><p>Ямар ч нэвтрэх үйлдэл хэрэглэдэггүй учраас амархан дайралтад өртдөгийн улмаас WEP нууцлалын хувиргуурыг хэрэглэх нь тийм сайшаалтай биш. Зарим худалдаанд хэрэглэгдэж буй утасгүй сүлжээний картууд нь зөвхөн WEP нууцлалын бүртгэл хэрэглэдэг ба ийм картуудыг хандах цэг болгож хэрэглэхээр бол хэрэглэгчийн таних үйлдэл хийхээр тохируулах боломж байхгүй байх болно.</p></div><div class=paragraph><p>Утасгүй сүлжээний төхөөрөмж тэгэхээр одоо hostap горимд ажиллаж болох бөгөөд шаардлагатай зөв SSID дугаар болон IP хаягаа авах шаардлагатай:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0 wlanmode hostap</span>
<span class=c># ifconfig wlan0 inet 192.168.0.1 netmask 255.255.255.0 \</span>
	ssid freebsdap wepmode on weptxkey 3 wepkey 3:0x3456789012 mode 11g</code></pre></div></div><div class=ulist><ul><li><p><code>weptxkey</code> гэдэг нь дамжуулалтад WEP нууцлал хэрэглэхийг зааж өгч байна. Энд бид гуравдугаар түлхүүрийг (түлхүүрийн дугаар нь <code>1</code> гэсэн тоогоор эхэлдэг) хэрэглэсэн байна. Энэ сонголт нь дамжуулагдах өгөгдлийг хувиргахад хэрэглэгддэг.</p></li><li><p><code>wepkey</code> гэдэг нь WEP түлхүүрийг сонгосныг зааж байна. Энэ нь <em>index:key</em> гэсэн хэлбэртэй байдаг ба хэрэв эхний дугаарлалт нь заагдаагүй бол түлхүүр нь <code>1</code> гэж суугддаг. Тэгэхээр хэрэв эхний түлхүүрээс өөр түлхүүр хэрэглэх шаардлагатай бол эхний дугаарлалтыг нь зааж өгөх шаардлагатай гэсэн үг.</p></li></ul></div><div class=paragraph><p>Ингээд дахин <code>ifconfig</code> тушаалыг ашиглаж <span class=filename>wlan0</span> төхөөрөмжийн төлөв байдлыг шалгаж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0</span>
  wlan0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  ether 00:11:95:c3:0d:ac
	  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
	  status: running
	  ssid freebsdap channel 4 <span class=o>(</span>2427 Mhz 11g<span class=o>)</span> bssid 00:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy ON deftxkey 3 wepkey 3:40-bit
	  txpower 21.5 scanvalid 60 protmode CTS wme burst dtimperiod 1 <span class=nt>-dfs</span></code></pre></div></div><div class=paragraph><p>Өөр утасгүй холбогддог машинаас хандах цэгийг хайж шалгаж болдог:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev ath0</span>
<span class=c># ifconfig wlan0 up scan</span>
SSID            BSSID              CHAN RATE  S:N   INT CAPS
freebsdap       00:11:95:c3:0d:ac    1   54M 22:1   100 EPS</code></pre></div></div><div class=paragraph><p>Хэрэглэгчийн машинаас хандах цэгийг олоод зөв тохиргоог нь зааж өгөн (дугаар түлхүүр гэх мэт) холбогдох тухай дэлгэрэнгүй зааврыг <a href=#network-wireless-wep>WEP</a> хэсгээс харна уу.</p></div></div></div><div class=sect2><h3 id=_утастай_болон_утасгүй_холболтыг_ашиглах_нь>32.3.6. Утастай болон утасгүй холболтыг ашиглах нь<a class=anchor href=#_утастай_болон_утасгүй_холболтыг_ашиглах_нь></a></h3><div class=paragraph><p>Утастай сүлжээний холболт нь илүү сайн ажиллагаа болон найдвартай байдлыг хангадаг бол утасгүй сүлжээний холболт нь уян хатан байдал, зөөх боломжийг бүрдүүлдэг бөгөөд зөөврийн компьютер ашигладаг хэрэглэгчид ихэвчлэн эдгээрийг хамтад нь ашиглаж хооронд нь чөлөөтэй шилжиж байхыг хүсдэг.</p></div><div class=paragraph><p>FreeBSD дээр хоёр болон түүнээс олон сүлжээний интерфэйсийг нийлүүлж "failover" горимоор ашиглах боломжтой бөгөөд энэ нь сүлжээний интерфэйсүүдээс хамгийн боломжтойг ашиглаж холболтын төлөв өөрчлөгдөхөд үйлдлийн системийн тусламжтайгаар автоматаар өөр холболт руу шилжих боломж юм.</p></div><div class=paragraph><p>Бид холболт нийлүүлэх болон failover горимыг <a href=#network-aggregation>Холбоос нэгтгэлт ба ослыг тойрон гарах (Link Aggregation and Failover)</a> хэсэгт авч үзэх бөгөөд утастай болон утасгүй холболтыг ашиглах талаарх жишээ <a href=#networking-lagg-wired-and-wireless>Утастай болон утасгүй сүлжээний интерфэйсүүдийн хоорондох Failover горим</a> хэсэгт бас байгаа болно.</p></div></div><div class=sect2><h3 id=_алдааг_олж_засварлах>32.3.7. Алдааг олж засварлах<a class=anchor href=#_алдааг_олж_засварлах></a></h3><div class=paragraph><p>Хэрэв та утасгүй сүлжээндээ асуудалтай байгаа бол асуудлыг олж засварлахад туслах хэд хэдэн алхмууд байдаг.</p></div><div class=ulist><ul><li><p>Хайлт хийж байхдаа та хандалтын цэгийг олж харахгүй байгаа бол та өөрийн утасгүй төхөөрөмжөө тодорхой хэдэн сувгууд дээр хязгаарлаж тохируулаагүй эсэхээ шалгаарай.</p></li><li><p>Хэрэв та хандалтын цэгт холбогдож чадахгүй байгаа бол таны станцын тохиргоо хандалтын цэгийн аль нэгтэй тохирч байгаа эсэхийг шалгаарай. Үүнд нэвтрэлт танилтын схем болон аюулгүй байдлын протоколууд хамаарна. Өөрийн тохиргоогоо аль болох хялбаршуулах хэрэгтэй. Хэрэв та WPA эсвэл WEP зэрэг аюулгүй байдлын протоколыг ашиглаж байгаа бол хандалтын цэгийг нээлттэй нэвтрэлт танилтад зориулж ямар нэгэн аюулгүй байдлын хамгаалалтгүй тохируулж урсгал дамжиж байгаа эсэхийг үзэх хэрэгтэй.</p></li><li><p>Хандалтын цэгт холбогдсоныхоо дараа <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> зэрэг хялбар хэрэгслүүдийг ашиглаад ямар ч аюулгүй байдлын тохиргоог оношилж болно.</p><div class=paragraph><p><code>wpa_supplicant</code> нь илүү дибаг хийх дэмжлэгтэй байдаг; үүнийг <code>-dd</code> сонголттой гараар ажиллуулж системийн бүртгэлүүдийг шалгах хэрэгтэй.</p></div></li><li><p>Мөн олон доод түвшний дибаг хийх хэрэгслүүд бас байдаг. Та 802.11 протоколын дэмжлэг давхаргад дибаг мэдэгдлүүдийг <span class=filename>/usr/src/tools/tools/net80211</span> дахь <code>wlandebug</code> програмыг ашиглан идэвхжүүлж болно. Жишээ нь:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># wlandebug -i ath0 +scan+auth+debug+assoc</span>
  net.wlan.0.debug: 0 <span class=o>=&gt;</span> 0xc80000&lt;assoc,auth,scan&gt;</code></pre></div></div><div class=paragraph><p>тушаал нь хандалтын цэгүүдийг хайх болон холбоог зохион байгуулах 802.11 протоколын мэдээлэл солилцоонуудыг хийхтэй холбоотой консолын мэдэгдлүүдийг идэвхжүүлэхэд ашиглагдаж болох юм.</p></div><div class=paragraph><p>802.11 давхаргын арчилж байдаг олон ашигтай статистикууд бас байдаг; энэ мэдээллийг <code>wlanstats</code> хэрэгсэл харуулах болно. Эдгээр статистикууд нь 802.11 давхаргаар танигдсан бүх алдаануудыг таних ёстой. Гэхдээ 802.11 давхаргаас доош орших төхөөрөмжийн драйверууд дээр танигдсан зарим алдаанууд нь харуулагдахгүй байж болохыг санаарай. Төхөөрөмжтэй холбоотой асуудлуудыг оношлохын тулд та драйверийн баримтаас лавлах хэрэгтэй юм.</p></div></li></ul></div><div class=paragraph><p>Хэрэв дээрх мэдээлэл асуудлыг тодруулахад тань туслахгүй байгаа бол дээрх хэрэгслүүдээс гарсан гаралтыг оруулж асуудлынхаа тайланг илгээгээрэй.</p></div></div></div></div><div class=sect1><h2 id=network-bluetooth>32.4. Bluetooth<a class=anchor href=#network-bluetooth></a></h2><div class=sectionbody><div class=sect2><h3 id=_танилцуулга>32.4.1. Танилцуулга<a class=anchor href=#_танилцуулга></a></h3><div class=paragraph><p>Bluetooth нь 10 метрийн дотор 2.4 GHz давтамжийн лицензжүүлээгүй зурваст ажиллах хувийн сүлжээнүүд үүсгэхэд зориулагдсан утасгүй технологи юм. Сүлжээнүүд нь үүрэн утас, гарын цахим жижиг хэрэгслүүд, болон зөөврийн компьютерууд зэрэг зөөврийн төхөөрөмжүүдээс ad-hoc ихэвчлэн бүрдүүлдэг. Бусад түгээмэл утасгүй технологиудаас ялгаатай тал нь Wi-Fi, Bluetooth нь илүү өндөр түвшний үйлчилгээний хувийн тохиргоонуудыг санал болгодог, өөрөөр хэлбэл FTP-тэй адил файлын серверүүд, файл түлхэх, дуу дамжуулалт, цуваа шугамын эмуляц зэрэг олныг дурдаж болно.</p></div><div class=paragraph><p>FreeBSD дэх Bluetooth стек нь Netgraph тогтолцоог ашиглан хийгдсэн байдаг (<a href="https://man.freebsd.org/cgi/man.cgi?query=netgraph&amp;sektion=4&amp;format=html">netgraph(4)</a>-г үзнэ үү). Олон төрлийн Bluetooth USB хамгаалах төхөөрөмжүүд (dongle) <a href="https://man.freebsd.org/cgi/man.cgi?query=ng_ubt&amp;sektion=4&amp;format=html">ng_ubt(4)</a> драйвераар дэмжигдсэн байдаг. Broadcom BCM2033 бичил схем дээр суурилсан Bluetooth төхөөрөмжүүд нь <a href="https://man.freebsd.org/cgi/man.cgi?query=ubtbcmfw&amp;sektion=4&amp;format=html">ubtbcmfw(4)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=ng_ubt&amp;sektion=4&amp;format=html">ng_ubt(4)</a> драйверуудаар дэмжигдсэн байдаг. 3Com Bluetooth PC Карт 3CRWB60-A нь <a href="https://man.freebsd.org/cgi/man.cgi?query=ng_bt3c&amp;sektion=4&amp;format=html">ng_bt3c(4)</a> драйвераар дэмжигдсэн байдаг. Цуваа болон UART дээр суурилсан Bluetooth төхөөрөмжүүд нь <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=ng_h4&amp;sektion=4&amp;format=html">ng_h4(4)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=hcseriald&amp;sektion=8&amp;format=html">hcseriald(8)</a> драйверуудаар дэмжигдсэн. Энэ хэсэг нь USB Bluetooth dongle-ийн хэрэглээг тайлбарлах болно.</p></div></div><div class=sect2><h3 id=_төхөөрөмжид_залгах_нь>32.4.2. Төхөөрөмжид залгах нь<a class=anchor href=#_төхөөрөмжид_залгах_нь></a></h3><div class=paragraph><p>Анхдагчаар Bluetooth төхөөрөмжийн драйверууд нь цөмийн модуль хэлбэрээр байдаг. Төхөөрөмжийг залгахаасаа өмнө та драйверийг цөмд дуудаж ачаалах хэрэгтэй болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload ng_ubt</span></code></pre></div></div><div class=paragraph><p>Хэрэв Bluetooth төхөөрөмж системийг эхлүүлэх явцад системд байх юм бол <span class=filename>/boot/loader.conf</span> файлаас модулийг дуудна:</p></div><div class="literalblock programlisting"><div class=content><pre>ng_ubt_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Өөрийн USB dongle-ийг залга. Консол (эсвэл syslog) дээр доор дурдсантай төстэй гаралт гарч ирэх болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ubt0: vendor 0x0a12 product 0x0001, rev 1.10/5.25, addr 2
ubt0: Interface 0 endpoints: <span class=nv>interrupt</span><span class=o>=</span>0x81, bulk-in<span class=o>=</span>0x82, bulk-out<span class=o>=</span>0x2
ubt0: Interface 1 <span class=o>(</span>alt.config 5<span class=o>)</span> endpoints: isoc-in<span class=o>=</span>0x83, isoc-out<span class=o>=</span>0x3,
      <span class=nv>wMaxPacketSize</span><span class=o>=</span>49, <span class=nv>nframes</span><span class=o>=</span>6, buffer <span class=nv>size</span><span class=o>=</span>294</code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=service&amp;sektion=8&amp;format=html">service(8)</a> нь Bluetooth стекийг эхлүүлэх болон зогсооход хэрэглэгддэг. Төхөөрөмжийг салгахаасаа өмнө стекийг зогсоох нь зөв байдаг, гэхдээ энэ нь (ихэвчлэн) сүйрлийн биш байдаг. Стекийг эхлүүлж байхад доор дурдсантай төстэй гаралтыг та хүлээн авах болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service bluetooth start ubt0</span>
BD_ADDR: 00:02:72:00:d4:1a
Features: 0xff 0xff 0xf 00 00 00 00 00
&lt;3-Slot&gt; &lt;5-Slot&gt; &lt;Encryption&gt; &lt;Slot offset&gt;
&lt;Timing accuracy&gt; &lt;Switch&gt; &lt;Hold mode&gt; &lt;Sniff mode&gt;
&lt;Park mode&gt; &lt;RSSI&gt; &lt;Channel quality&gt; &lt;SCO <span class=nb>link</span><span class=o>&gt;</span>
&lt;HV2 packets&gt; &lt;HV3 packets&gt; &lt;u-law log&gt; &lt;A-law log&gt; &lt;CVSD&gt;
&lt;Paging scheme&gt; &lt;Power control&gt; &lt;Transparent SCO data&gt;
Max. ACL packet size: 192 bytes
Number of ACL packets: 8
Max. SCO packet size: 64 bytes
Number of SCO packets: 8</code></pre></div></div></div><div class=sect2><h3 id=_host_controller_interface_hci_буюу_хостын_хянагчийн_интерфэйс>32.4.3. Host Controller Interface (HCI) буюу Хостын Хянагчийн Интерфэйс<a class=anchor href=#_host_controller_interface_hci_буюу_хостын_хянагчийн_интерфэйс></a></h3><div class=paragraph><p>Host Controller Interface (HCI) буюу Хостын Хянагчийн Интерфэйс нь үндсэн зурвасын хянагч болон холболтын менежерт тушаалын интерфэйсийг, тоног төхөөрөмжийн төлөв болон хяналтын регистрүүдэд хандалтыг өгдөг байна. Энэ интерфэйс нь Bluetooth-ийн үндсэн зурвасын боломжуудад хандах нэгэн хэвийн аргыг олгодог. Хост дээрх HCI давхарга нь өгөгдөл болон тушаалуудыг Bluetooth тоног төхөөрөмж дээрх HCI firmware-тэй солилцдог. Хостын Хянагчийн Тээврийн Давхаргын (өөрөөр хэлбэл физик шугам) драйвер нь HCI давхаргуудад нэг нь нөгөөдөө мэдээлэл солилцох боломжоор хангаж өгдөг.</p></div><div class=paragraph><p><em>hci</em> төрлийн ганц Netgraph цэг ганц Bluetooth төхөөрөмжийн хувьд үүсдэг. HCI цэг нь Bluetooth төхөөрөмжийн драйверийн цэгт (доош) болон L2CAP цэгт (дээш) ихэвчлэн холбогддог. Бүх HCI үйлдлүүд нь төхөөрөмжийн драйверийн цэг дээр биш HCI цэг дээр хийгдэх ёстой. HCI цэгийн анхдагч нэр нь "devicehci" юм. Илүү дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=ng_hci&amp;sektion=4&amp;format=html">ng_hci(4)</a> гарын авлагын хуудаснаас лавлана уу.</p></div><div class=paragraph><p>Хамгийн нийтлэг ажлуудын нэг нь RF-ийн ойр Bluetooth төхөөрөмжүүдийг олох явдал юм. Энэ үйлдлийг <em>inquiry</em> буюу лавлагаа гэдэг. Лавлагаа болон бусад HCI-тэй холбоотой үйлдлүүд нь <a href="https://man.freebsd.org/cgi/man.cgi?query=hccontrol&amp;sektion=8&amp;format=html">hccontrol(8)</a> хэрэгслээр хийгддэг. Доорх жишээ нь ойр орчим ямар Bluetooth төхөөрөмжүүд байгааг хэрхэн олохыг харуулж байна. Та төхөөрөмжүүдийн жагсаалтыг хэдхэн секундэд авах ёстой. Алсын төхөөрөмж нь <em>илрүүлэгдэх</em> горимд байгаа тохиолдолд лавлагаанд зөвхөн хариулах болно гэдгийг санаарай.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% hccontrol <span class=nt>-n</span> ubt0hci inquiry
Inquiry result, <span class=nv>num_responses</span><span class=o>=</span>1
Inquiry result <span class=c>#0</span>
       BD_ADDR: 00:80:37:29:19:a4
       Page Scan Rep. Mode: 0x1
       Page Scan Period Mode: 00
       Page Scan Mode: 00
       Class: 52:02:04
       Clock offset: 0x78ef
Inquiry complete. Status: No error <span class=o>[</span>00]</code></pre></div></div><div class=paragraph><p><code>BD_ADDR</code> нь Bluetooth төхөөрөмжийн сүлжээний картанд байдаг MAC хаягууд шиг давтагдашгүй хаяг юм. Энэ хаяг нь төхөөрөмжтэй холбогдоход цаашид хэрэг болдог. BD_ADDR-т хүн уншиж болохоор нэр өгөх боломжтой байдаг. <span class=filename>/etc/bluetooth/hosts</span> файл нь мэдэгдэж байгаа Bluetooth хостуудын тухай мэдээллийг агуулдаг. Дараах жишээ нь алсын төхөөрөмжид өгсөн хүн уншиж болохоор нэрийг хэрхэн авч болохыг үзүүлж байна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% hccontrol <span class=nt>-n</span> ubt0hci remote_name_request 00:80:37:29:19:a4
BD_ADDR: 00:80:37:29:19:a4
Name: Pav<span class=s1>&#39;s T39</span></code></pre></div></div><div class=paragraph><p>Хэрэв та лавлагааг алсын Bluetooth төхөөрөмж дээр хийх юм бол энэ нь таны компьютерийг "your.host.name (ubt0)" хэлбэрээр олох болно. Локал төхөөрөмжид өгсөн нэрийг ямар ч үед өөрчилж болно.</p></div><div class=paragraph><p>Bluetooth систем нь цэгээс-цэгт-хүрэх (point-to-point) эсвэл цэгээс-олон-цэгт-хүрэх (point-to-multipoint) холболтын боломжийг олгодог. Цэгээс-олон-цэгт-хүрэх (point-to-multipoint) холболтод холболт нь хэд хэдэн Bluetooth төхөөрөмжүүдийн хооронд хуваалцан хэрэглэгддэг. Дараах жишээ нь локал төхөөрөмжийн хувьд идэвхтэй үндсэн зурвасын холболтуудын жагсаалтыг хэрхэн авахыг үзүүлж байна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% hccontrol <span class=nt>-n</span> ubt0hci read_connection_list
Remote BD_ADDR    Handle Type Mode Role Encrypt Pending Queue State
00:80:37:29:19:a4     41  ACL    0 MAST    NONE       0     0 OPEN</code></pre></div></div><div class=paragraph><p><em>connection handle</em> буюу <em>холболтын гар</em> нь үндсэн зурвасын холболтыг дуусгах шаардлагатай үед ашигтай байдаг. Үүнийг гараар хийхийг ерөнхийдөө шаарддаггүйг санаарай. Стек нь идэвхгүй байгаа үндсэн зурвасын холболтуудыг автоматаар дуусгах болно.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># hccontrol -n ubt0hci disconnect 41</span>
Connection handle: 41
Reason: Connection terminated by <span class=nb>local </span>host <span class=o>[</span>0x16]</code></pre></div></div><div class=paragraph><p>HCI тушаалуудын бүрэн жагсаалыг <code>hccontrol help</code> гэж лавлана уу. HCI тушаалуудын ихэнх нь супер хэрэглэгчийн зөвшөөрлүүдийг шаарддаггүй.</p></div></div><div class=sect2><h3 id=_logical_link_control_and_adaptation_protocol_l2cap_буюу_логик_холболтын_хяналт_ба_тааруулах_протокол>32.4.4. Logical Link Control and Adaptation Protocol (L2CAP) буюу Логик Холболтын Хяналт ба Тааруулах Протокол<a class=anchor href=#_logical_link_control_and_adaptation_protocol_l2cap_буюу_логик_холболтын_хяналт_ба_тааруулах_протокол></a></h3><div class=paragraph><p>Логик Холболтын Хяналт ба Тааруулах Протокол (L2CAP) нь холболт дээр тулгуурласан болон холболтгүй (connection-oriented and connectionless) өгөгдлийн үйлчилгээнүүдийг протокол олон хуваагдах (multiplex) чадвар болон сегмент болгож дахин цуглуулах үйлдэлтэй цуг дээд түвшний протоколуудад хангаж өгдөг. L2CAP нь уртаараа 64 килобайт хүртэл хэмжээний L2CAP пакетуудыг дамжуулж хүлээн авахыг өндөр түвшний протоколууд болон програмуудад зөвшөөрдөг.</p></div><div class=paragraph><p>L2CAP нь <em>сувгууд</em> гэсэн ойлголт дээр тулгуурладаг. Суваг нь үндсэн зурвасын холболт дээрх логик холболт юм. Суваг бүр ганц протоколд олноос нэг уруу чиглэсэн загвараар уягдсан байдаг. Олон сувгууд нэг протоколд уягдаж болдог боловч нэг сувгийг олон протоколд уяж болдоггүй. Суваг дээр хүлээн авсан L2CAP пакет бүр зохих дээд түвшний протокол уруу чиглүүлэгддэг. Олон сувгууд нь нэг үндсэн зурвасын холболтыг хуваалцаж болно.</p></div><div class=paragraph><p><em>l2cap</em> төрлийн ганц Netgraph цэг ганц Bluetooth төхөөрөмжийн хувьд үүсгэгддэг. L2CAP цэг нь Bluetooth HCI цэг (доош) болон Bluetooth сокетуудад (дээш) ихэвчлэн холбогддог. Илүү дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=ng_l2cap&amp;sektion=4&amp;format=html">ng_l2cap(4)</a> гарын авлагын хуудаснаас лавлана уу.</p></div><div class=paragraph><p>Ашигтай тушаал бол бусад хэрэгслүүд уруу ping хийхэд хэрэглэгддэг <a href="https://man.freebsd.org/cgi/man.cgi?query=l2ping&amp;sektion=8&amp;format=html">l2ping(8)</a> тушаал юм. Зарим нэг Bluetooth шийдлүүд нь тэдэн уруу илгээсэн бүх өгөгдлийг буцаахгүй байж болох учраас дараах жишээн дээрх <code>0 bytes</code> гэдэг нь хэвийн юм.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># l2ping -a 00:80:37:29:19:a4</span>
0 bytes from 0:80:37:29:19:a4 <span class=nv>seq_no</span><span class=o>=</span>0 <span class=nb>time</span><span class=o>=</span>48.633 ms <span class=nv>result</span><span class=o>=</span>0
0 bytes from 0:80:37:29:19:a4 <span class=nv>seq_no</span><span class=o>=</span>1 <span class=nb>time</span><span class=o>=</span>37.551 ms <span class=nv>result</span><span class=o>=</span>0
0 bytes from 0:80:37:29:19:a4 <span class=nv>seq_no</span><span class=o>=</span>2 <span class=nb>time</span><span class=o>=</span>28.324 ms <span class=nv>result</span><span class=o>=</span>0
0 bytes from 0:80:37:29:19:a4 <span class=nv>seq_no</span><span class=o>=</span>3 <span class=nb>time</span><span class=o>=</span>46.150 ms <span class=nv>result</span><span class=o>=</span>0</code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=l2control&amp;sektion=8&amp;format=html">l2control(8)</a> хэрэгсэл нь L2CAP цэгүүд дээр төрөл бүрийн үйлдлүүдийг хийдэг. Энэ жишээ нь логик холболтуудын (сувгууд) жагсаалт болон локал төхөөрөмжийн хувьд үндсэн зурвасын жагсаалтыг хэрхэн авахыг үзүүлж байна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% l2control <span class=nt>-a</span> 00:02:72:00:d4:1a read_channel_list
L2CAP channels:
Remote BD_ADDR     SCID/ DCID   PSM  IMTU/ OMTU State
00:07:e0:00:0b:ca    66/   64     3   132/  672 OPEN
% l2control <span class=nt>-a</span> 00:02:72:00:d4:1a read_connection_list
L2CAP connections:
Remote BD_ADDR    Handle Flags Pending State
00:07:e0:00:0b:ca     41 O           0 OPEN</code></pre></div></div><div class=paragraph><p>Өөр нэг оношлогооны хэрэгсэл бол <a href="https://man.freebsd.org/cgi/man.cgi?query=btsockstat&amp;sektion=1&amp;format=html">btsockstat(1)</a> юм. Энэ нь <a href="https://man.freebsd.org/cgi/man.cgi?query=netstat&amp;sektion=1&amp;format=html">netstat(1)</a>-ийн хийдэгтэй төстэйг хийдэг, гэхдээ зөвхөн Bluetooth сүлжээтэй холбоотой өгөгдлийн бүтцүүдийн хувьд хийдэг. Доорх жишээ нь дээрх <a href="https://man.freebsd.org/cgi/man.cgi?query=l2control&amp;sektion=8&amp;format=html">l2control(8)</a>-ийн нэгэн адил логик холболтыг харуулж байна.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% btsockstat
Active L2CAP sockets
PCB      Recv-Q Send-Q Local address/PSM       Foreign address   CID   State
c2afe900      0      0 00:02:72:00:d4:1a/3     00:07:e0:00:0b:ca 66    OPEN
Active RFCOMM sessions
L2PCB    PCB      Flag MTU   Out-Q DLCs State
c2afe900 c2b53380 1    127   0     Yes  OPEN
Active RFCOMM sockets
PCB      Recv-Q Send-Q Local address     Foreign address   Chan DLCI State
c2e8bc80      0    250 00:02:72:00:d4:1a 00:07:e0:00:0b:ca 3    6    OPEN</code></pre></div></div></div><div class=sect2><h3 id=_rfcomm_протокол>32.4.5. RFCOMM Протокол<a class=anchor href=#_rfcomm_протокол></a></h3><div class=paragraph><p>RFCOMM протокол нь L2CAP протоколын дээгүүр цуваа портуудыг эмуляц хийх боломжийг хангадаг. Энэ протокол нь ETSI стандарт TS 07.10 дээр суурилсан юм. RFCOMM нь RS-232 (EIATIA-232-E) цуваа портуудын 9 замыг эмуляц хийх нэмэлт бэлтгэл бүхий ердийн тээвэрлэх протокол юм. RFCOMM протокол нь хоёр Bluetooth төхөөрөмжийн хооронд 60 хүртэлх зэрэг холболтуудыг (RFCOMM сувгууд) дэмждэг.</p></div><div class=paragraph><p>RFCOMM-ийн хувьд өөр өөр төхөөрөмжүүд (холбооны төгсгөлийн цэгүүд) дээр ажиллаж байгаа хоёр програм болон тэдгээрийн хоорондын холбооны сегмент холбооны бүрэн замд ордог. RFCOMM нь төхөөрөмжүүд дээр байгаа цуваа портуудыг ашигладаг програмуудад зориулагдсан юм. Холбооны сегмент нь нэг төхөөрөмжөөс нөгөө уруу холбогдсон (шууд холболт) Bluetooth холбоос юм.</p></div><div class=paragraph><p>RFCOMM нь шууд холболтын үед төхөөрөмжүүдийн хоорондох холболт эсвэл сүлжээний хувьд төхөөрөмж болон модемийн хоорондох холболтод зөвхөн санаа тавьдаг. RFCOMM нь нэг талдаа Bluetooth утасгүй технологийг ашиглаж холбогддог бөгөөд нөгөө талдаа утастай интерфэйсээр хангадаг модулиуд зэрэг бусад тохиргоонуудыг дэмждэг.</p></div><div class=paragraph><p>FreeBSD дээр RFCOMM протокол нь Bluetooth сокетуудын давхаргад хийгддэг.</p></div></div><div class=sect2><h3 id=_төхөөрөмжүүдийг_хослох>32.4.6. Төхөөрөмжүүдийг хослох<a class=anchor href=#_төхөөрөмжүүдийг_хослох></a></h3><div class=paragraph><p>Анхдагчаар Bluetooth холбоонд нэвтрэлт танилт хийгддэггүй бөгөөд ямар ч төхөөрөмж ямар ч төхөөрөмжтэй ярилцаж чаддаг. Bluetooth төхөөрөмж (жишээ нь үүрэн утас) тухайн нэг үйлчилгээг (жишээ нь Dial-Up үйлчилгээ) хангахын тулд нэвтрэлт танилтыг шаарддаг байхаар байж болно. Bluetooth нэвтрэлт танилт нь хэвийн үед <em>PIN кодуудаар</em> хийгддэг. Хоёр төхөөрөмжийн хувьд хэрэглэгч адил PIN кодыг оруулах шаардлагатай. Хэрэглэгч PIN код оруулсны дараа хоёр төхөөрөмж <em>холболтын түлхүүр</em> үүсгэнэ. Түүний дараа холболтын түлхүүр нь уг төхөөрөмжүүд дээрээ эсвэл байнгын хадгалалтад хадгалагдаж болно. Дараагийн удаа хоёр төхөөрөмж нь урьд нь үүсгэсэн холболтын түлхүүрээ ашиглах болно. Энэ тайлбарласан процедурыг <em>pairing</em> буюу <em>хослох</em> гэж нэрлэдэг. Ямар нэг төхөөрөмж холболтын түлхүүрийг гээх юм бол хослолтыг дахин хийх ёстой.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=hcsecd&amp;sektion=8&amp;format=html">hcsecd(8)</a> дэмон нь бүх Bluetooth нэвтрэлт танилтын хүсэлтүүдтэй ажиллах үүрэгтэй. Анхдагч тохиргооны файл нь <span class=filename>/etc/bluetooth/hcsecd.conf</span> юм. Дурын "1234" гэж тохируулагдсан PIN кодтой үүрэн утасны жишээ хэсгийг доор үзүүлэв:</p></div><div class="literalblock programlisting"><div class=content><pre>device {
        bdaddr  00:80:37:29:19:a4;
        name    &#34;Pav&#39;s T39&#34;;
        key     nokey;
        pin     &#34;1234&#34;;
      }</pre></div></div><div class=paragraph><p>PIN код дээр хязгаарлалт байдаггүй (уртаас гадна). Зарим төхөөрөмжүүдэд (жишээ нь Bluetooth чихэвчнүүд) тогтмол PIN код цуг бүтээгдсэн байж болох юм. <code>-d</code> тохируулга нь <a href="https://man.freebsd.org/cgi/man.cgi?query=hcsecd&amp;sektion=8&amp;format=html">hcsecd(8)</a> дэмонг нүүрэнд үлдэж ажиллахыг заадаг бөгөөд ингэснээр юу болж байгааг харах боломжтой юм. Хослолыг хүлээн авч алсын төхөөрөмж уруу Bluetooth холболт эхлүүлэхээр алсын төхөөрөмжийг тохируулна. Алсын төхөөрөмж нь хослол хийлтийг хүлээн авсан гэдгээ хэлж PIN код хүсэх ёстой. <span class=filename>hcsecd.conf</span> файлд байгаатай адил PIN код оруулаарай. Одоо таны PC болон алсын төхөөрөмж хосолсон байна. Өөрөөр та хослол хийлтийг алсын төхөөрөмж дээр эхлүүлж болно.</p></div><div class=paragraph><p>hcsecd-г систем эхлэхэд автоматаар эхлүүлэхийн тулд дараах мөрийг <span class=filename>/etc/rc.conf</span> файлд нэмэн хийж болно:</p></div><div class="literalblock programlisting"><div class=content><pre>hcsecd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>hcsecd дэмоны гаралтын жишээг доор үзүүлэв:</p></div><div class="literalblock programlisting"><div class=content><pre>hcsecd[16484]: Got Link_Key_Request event from &#39;ubt0hci&#39;, remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name &#39;Pav&#39;s T39&#39;, link key doesn&#39;t exist
hcsecd[16484]: Sending Link_Key_Negative_Reply to &#39;ubt0hci&#39; for remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Got PIN_Code_Request event from &#39;ubt0hci&#39;, remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name &#39;Pav&#39;s T39&#39;, PIN code exists
hcsecd[16484]: Sending PIN_Code_Reply to &#39;ubt0hci&#39; for remote bdaddr 0:80:37:29:19:a4</pre></div></div></div><div class=sect2><h3 id=_service_discovery_protocol_sdp_буюу_үйлчилгээ_илрүүлэх_протокол>32.4.7. Service Discovery Protocol (SDP) буюу Үйлчилгээ Илрүүлэх Протокол<a class=anchor href=#_service_discovery_protocol_sdp_буюу_үйлчилгээ_илрүүлэх_протокол></a></h3><div class=paragraph><p>Service Discovery Protocol (SDP) буюу Үйлчилгээ Илрүүлэх Протокол нь сервер програмуудын үзүүлдэг үйлчилгээнүүдийн байгаа эсэх болон тэдгээр үйлчилгээнүүдийн шинж чанаруудыг илрүүлэх боломжийг клиент програмуудад олгодог. Үйлчилгээний шинж чанарууд нь санал болгосон үйлчилгээний төрөл эсвэл ангилал болон үйлчилгээг хэрэглэхэд шаардагдах арга зам юм уу эсвэл протоколын мэдээллийг агуулдаг.</p></div><div class=paragraph><p>SDP-д SDP сервер болон SDP клиентийн хоорондох холбоо ордог. Сервер нь сервертэй холбоотой үйлчилгээнүүдийн шинж чанаруудыг тайлбарладаг үйлчилгээний бичлэгүүдийн жагсаалтыг арчилж байдаг. Үйлчилгээний бичлэг бүр ганц үйлчилгээний талаар мэдээллийг агуулдаг. SDP серверийн арчилж байдаг үйлчилгээний бичлэгээс клиент SDP хүсэлт илгээн мэдээллийг авч болно. Хэрэв клиент эсвэл клиенттэй холбоотой програм нь үйлчилгээг ашиглахаар шийдвэл үйлчилгээг хэрэглэхийн тулд үйлчилгээ үзүүлэгч уруу тусдаа холболт нээх ёстой. SDP нь үйлчилгээнүүд болон тэдгээрийн шинж чанаруудыг илрүүлэх арга замаар хангадаг боловч тэдгээр үйлчилгээнүүдийг хэрэглэх арга замуудаар хангадаггүй юм.</p></div><div class=paragraph><p>Хэвийн үед SDP клиент нь үйлчилгээнүүдийн зарим хүссэн онцгой шинжүүд дээр тулгуурлан үйлчилгээнүүдийг хайдаг. Гэхдээ үйлчилгээнүүдийн талаар урьд нь ямар ч мэдээлэл байхгүй байхад SDP серверийн үйлчилгээний бичлэгүүдээр тайлбарлагдсан үйлчилгээнүүдийн ямар төрлүүд байгааг олохыг хүсэх үеүүд байдаг. Санал болгосон дурын үйлчилгээнүүдийг хайх процесс нь <em>browsing</em> буюу <em>үзэх</em> гэгддэг.</p></div><div class=paragraph><p>Bluetooth SDP сервер <a href="https://man.freebsd.org/cgi/man.cgi?query=sdpd&amp;sektion=8&amp;format=html">sdpd(8)</a> болон тушаалын мөрийн клиент <a href="https://man.freebsd.org/cgi/man.cgi?query=sdpcontrol&amp;sektion=8&amp;format=html">sdpcontrol(8)</a> нь стандарт FreeBSD суулгацад орсон байдаг. Дараах жишээ нь SDP үзэх хүсэлтийг хэрхэн хийж байгаа харуулж байна.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sdpcontrol <span class=nt>-a</span> 00:01:03:fc:6e:ec browse
Record Handle: 00000000
Service Class ID List:
        Service Discovery Server <span class=o>(</span>0x1000<span class=o>)</span>
Protocol Descriptor List:
        L2CAP <span class=o>(</span>0x0100<span class=o>)</span>
                Protocol specific parameter <span class=c>#1: u/int/uuid16 1</span>
                Protocol specific parameter <span class=c>#2: u/int/uuid16 1</span>

Record Handle: 0x00000001
Service Class ID List:
        Browse Group Descriptor <span class=o>(</span>0x1001<span class=o>)</span>

Record Handle: 0x00000002
Service Class ID List:
        LAN Access Using PPP <span class=o>(</span>0x1102<span class=o>)</span>
Protocol Descriptor List:
        L2CAP <span class=o>(</span>0x0100<span class=o>)</span>
        RFCOMM <span class=o>(</span>0x0003<span class=o>)</span>
                Protocol specific parameter <span class=c>#1: u/int8/bool 1</span>
Bluetooth Profile Descriptor List:
        LAN Access Using PPP <span class=o>(</span>0x1102<span class=o>)</span> ver. 1.0</code></pre></div></div><div class="olist lowerroman"><ol class=lowerroman type=i><li><p>гэх мэт байна. Үйлчилгээ болгон шинж чанаруудтай байгааг анхаараарай (жишээ нь RFCOMM суваг). Үйлчилгээнээс хамаараад та зарим нэг шинж чанаруудын талаар тэмдэглэгээ хийж авах хэрэгтэй болж болох юм. Зарим Bluetooth шийдлүүд нь үйлчилгээ үзэх боломжийг дэмждэггүй бөгөөд хоосон жагсаалт буцааж болох юм. Энэ тохиолдолд тодорхой үйлчилгээг хайх боломжтой байдаг. Доорх жишээ нь OBEX-ийн Обьект Түлхэх (OPUSH) үйлчилгээг хэрхэн хайхыг үзүүлж байна:</p></li></ol></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sdpcontrol <span class=nt>-a</span> 00:01:03:fc:6e:ec search OPUSH</code></pre></div></div><div class=paragraph><p>FreeBSD дээр Bluetooth клиентүүдэд үйлчилгээнүүдийг санал болохдоо <a href="https://man.freebsd.org/cgi/man.cgi?query=sdpd&amp;sektion=8&amp;format=html">sdpd(8)</a> серверийн тусламжтайгаар хийдэг. <span class=filename>/etc/rc.conf</span> файлд дараах мөрийг нэмж болно:</p></div><div class="literalblock programlisting"><div class=content><pre>sdpd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Дараа нь sdpd дэмонг ингэж эхлүүлж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sdpd start</span></code></pre></div></div><div class=paragraph><p>Алсын клиентүүдэд Bluetooth үйлчилгээг үзүүлэхийг хүссэн локал серверийн програм нь үйлчилгээг SDP дэмонд бүртгэх болно. Ийм програмуудын нэг нь <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8&amp;format=html">rfcomm_pppd(8)</a> юм. Эхэлснийхээ дараа энэ нь Bluetooth LAN үйлчилгээг локал SDP дэмонд бүртгэх болно.</p></div><div class=paragraph><p>Локал SDP серверт бүртгэсэн үйлчилгээнүүдийн жагсаалтыг локал хяналтын сувгаар SDP-ийн үзэх хүсэлтийг илгээн авч болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sdpcontrol -l browse</span></code></pre></div></div></div><div class=sect2><h3 id=_dial_up_сүлжээ_dun_ба_ppp_ашиглах_сүлжээний_хандалт_lan_хувийн_тохиргоонууд>32.4.8. Dial-Up сүлжээ (DUN) ба PPP ашиглах Сүлжээний Хандалт (LAN) хувийн тохиргоонууд<a class=anchor href=#_dial_up_сүлжээ_dun_ба_ppp_ашиглах_сүлжээний_хандалт_lan_хувийн_тохиргоонууд></a></h3><div class=paragraph><p>Dial-Up сүлжээ (DUN) хувийн тохиргоо нь модемууд болон үүрэн утаснуудтай ихэвчлэн ашиглагддаг. Энэ хувийн тохиргоонд хамаарах тохиолдлуудыг доор дурдав:</p></div><div class=ulist><ul><li><p>үүрэн утас эсвэл модемийг компьютер дээрээ Интернэтийн хандалтын сервер уруу залгаж холбогдох юм уу эсвэл бусад dial-up үйлчилгээнүүдэд хэрэглэхээр утасгүй модем маягаар ашиглах;</p></li><li><p>үүрэн утас эсвэл модемийг компьютер дээрээ өгөгдлийн дуудлагуудыг хүлээн авахад ашиглах.</p></li></ul></div><div class=paragraph><p>PPP ашиглах Сүлжээний Хандалт (LAN) хувийн тохиргоо дараах тохиолдлуудад ашиглагдаж болно:</p></div><div class=ulist><ul><li><p>Ганц Bluetooth төхөөрөмжид зориулсан LAN хандалт;</p></li><li><p>Олон Bluetooth төхөөрөмжид зориулсан LAN хандалт;</p></li><li><p>PC-ээс PC уруу (цуваа кабелийн эмуляцаар PPP сүлжээ ашиглан).</p></li></ul></div><div class=paragraph><p>FreeBSD дээр энэ хоёр хувийн тохиргоо нь <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8&amp;format=html">rfcomm_pppd(8)</a> програмуудаар хийгддэг. <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8&amp;format=html">rfcomm_pppd(8)</a> нь RFCOMM Bluetooth холболтыг PPP-ийн ажиллаж чадах ямар нэгэн зүйл болгож хувиргадаг гүйцэтгэл хялбаршуулагч юм. Аль ч хувийн тохиргоог ашиглахаасаа өмнө <span class=filename>/etc/ppp/ppp.conf</span> файлд шинэ PPP хаяг үүсгэгдсэн байх ёстой. Жишээнүүдийн талаар <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8&amp;format=html">rfcomm_pppd(8)</a> гарын авлагаас лавлана уу.</p></div><div class=paragraph><p>Дараах жишээн дээр <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8&amp;format=html">rfcomm_pppd(8)</a> нь DUN RFCOMM суваг дээр BD_ADDR 00:80:37:29:19:a4 хаягтай алсын төхөөрөмж уруу RFCOMM холболт хийхэд ашиглагдах болно. RFCOMM сувгийн дугаарыг алсын төхөөрөмжөөс SDP-ээр авах болно. RFCOMM сувгийг гараар зааж өгөх боломжтой бөгөөд энэ тохиолдолд <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8&amp;format=html">rfcomm_pppd(8)</a> нь SDP хүсэлт хийхгүй байх болно. Алсын төхөөрөмж дээр RFCOMM сувгийг олохын тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=sdpcontrol&amp;sektion=8&amp;format=html">sdpcontrol(8)</a>-г ашиглаарай.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rfcomm_pppd -a 00:80:37:29:19:a4 -c -C dun -l rfcomm-dialup</span></code></pre></div></div><div class=paragraph><p>PPP ашиглах Сүлжээний Хандалтын (LAN) үйлчилгээг хангахын тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=sdpd&amp;sektion=8&amp;format=html">sdpd(8)</a> сервер ажиллаж байх ёстой. LAN клиентүүдэд зориулсан шинэ оруулгууд <span class=filename>/etc/ppp/ppp.conf</span> файлд үүсгэгдсэн байх ёстой. Жишээнүүдийн талаар <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8&amp;format=html">rfcomm_pppd(8)</a> гарын авлагын хуудаснаас лавлана уу. Төгсгөлд нь RFCOMM PPP серверийг зөв RFCOMM сувгийн дугаар дээр эхлүүлнэ. RFCOMM PPP сервер нь Bluetooth LAN үйлчилгээг локал SDP дэмонд автоматаар бүртгэх болно. Доорх жишээ нь RFCOMM PPP серверийг хэрхэн эхлүүлэхийг үзүүлж байна.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rfcomm_pppd -s -C 7 -l rfcomm-server</span></code></pre></div></div></div><div class=sect2><h3 id=_obex_object_push_opush_буюу_obex_обьект_түлхэх_хувийн_тохиргоо>32.4.9. OBEX Object Push (OPUSH) буюу OBEX Обьект Түлхэх хувийн тохиргоо<a class=anchor href=#_obex_object_push_opush_буюу_obex_обьект_түлхэх_хувийн_тохиргоо></a></h3><div class=paragraph><p>OBEX нь хөдөлгөөнт төхөөрөмжүүдийн хооронд энгийн файл дамжуулалт хийхэд зориулагдсан өргөн ашиглагддаг протокол юм. Үүний гол хэрэглээ нь хэт ягаан туяаны холбоо бөгөөд зөөврийн компьютерууд эсвэл PDA-уудын хооронд ердийн файл дамжуулахад, нэрийн хуудас эсвэл цагалбарыг үүрэн утас болон PIM програмуудтай бусад төхөөрөмжүүдийн хооронд илгээхэд хэрэглэгддэг.</p></div><div class=paragraph><p>OBEX сервер болон клиент нь гуравдагч талын багц obexapp хэлбэрээр хийгдсэн байдаг бөгөөд энэ нь <a class=package href=https://cgit.freebsd.org/ports/tree/comms/obexapp/>comms/obexapp</a> порт хэлбэрээр байдаг.</p></div><div class=paragraph><p>OBEX клиент нь OBEX серверт обьектуудыг түлхэж оруулах буюу/эсвэл татахад хэрэглэгддэг. Обьект нь жишээ нь нэрийн хуудас юм уу эсвэл уулзалт байж болно. OBEX клиент нь алсын төхөөрөмжөөс SDP-ээр RFCOMM сувгийн дугаарыг авч болно. RFCOMM сувгийн дугаарын оронд үйлчилгээний нэрийг зааж үүнийг хийж болно. Дэмжигдсэн үйлчилгээний нэрсэд: IrMC, FTRN, болон OPUSH ордог. RFCOMM сувгийг дугаар болгон зааж өгөх боломжтой байдаг. Төхөөрөмжийн мэдээллийн обьектийг үүрэн утаснаас татаж авч байгаа болон шинэ обьектийг (нэрийн хуудас) утасны сан уруу хийж байгаа OBEX сессийн жишээг доор үзүүлэв.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% obexapp <span class=nt>-a</span> 00:80:37:29:19:a4 <span class=nt>-C</span> IrMC
obex&gt; get telecom/devinfo.txt devinfo-t39.txt
Success, response: OK, Success <span class=o>(</span>0x20<span class=o>)</span>
obex&gt; put new.vcf
Success, response: OK, Success <span class=o>(</span>0x20<span class=o>)</span>
obex&gt; di
Success, response: OK, Success <span class=o>(</span>0x20<span class=o>)</span></code></pre></div></div><div class=paragraph><p>OBEX-ийн Обьект Түлхэх үйлчилгээг хангахын тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=sdpd&amp;sektion=8&amp;format=html">sdpd(8)</a> сервер ажиллаж байх ёстой. Бүх ирж байгаа обьектууд хадгалагдах root хавтас үүсгэгдэх ёстой. root сангийн анхдагч зам нь <span class=filename>/var/spool/obex</span> байна. Төгсгөлд нь OBEX серверийг зөв RFCOMM сувгийн дугаар дээр эхлүүлнэ. OBEX сервер нь OBEX-ийн Обьект Түлхэх үйлчилгээг локал SDP дэмонд автоматаар бүртгүүлэх болно. Доорх жишээ нь OBEX серверийг хэрхэн эхлүүлэхийг харуулж байна.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># obexapp -s -C 10</span></code></pre></div></div></div><div class=sect2><h3 id=_serial_port_profile_spp_буюу_цуваа_портын_хувийн_тохиргоо>32.4.10. Serial Port Profile (SPP) буюу Цуваа портын хувийн тохиргоо<a class=anchor href=#_serial_port_profile_spp_буюу_цуваа_портын_хувийн_тохиргоо></a></h3><div class=paragraph><p>Serial Port Profile (SPP) буюу Цуваа портын хувийн тохиргоо нь Bluetooth төхөөрөмжүүдэд RS232 (эсвэл түүнтэй төстэй) цуваа кабелийн эмуляц хийхийг зөвшөөрдөг. Энэ хувийн тохиргоонд хамаатай тохиолдол нь кабелийн оронд виртуал цуваа портын хийсвэрлэлтийн тусламжтай Bluetooth-ийг ашигладаг хуучин програмуудтай харьцдаг.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1&amp;format=html">rfcomm_sppd(1)</a> хэрэгсэл нь цуваа портын хувийн тохиргоог хийдэг. Псевдо tty нь виртуал цуваа портын хийсвэрлэлт болон ашиглагддаг. Доорх жишээ нь алсын төхөөрөмжийн цуваа портын үйлчилгээ уруу хэрхэн холбогдохыг харуулж байна. Та RFCOMM сувгийг заах шаардлагагүйг санаарай - <a href="https://man.freebsd.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1&amp;format=html">rfcomm_sppd(1)</a> нь алсын төхөөрөмжөөс SDP-ээр авч чаддаг. Хэрэв та үүнийг дарж өөрчлөхийг хүсвэл тушаалын мөрөнд RFCOMM сувгийг зааж өгөх хэрэгтэй.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rfcomm_sppd -a 00:07:E0:00:0B:CA -t /dev/ttyp6</span>
rfcomm_sppd[94692]: Starting on /dev/ttyp6...</code></pre></div></div><div class=paragraph><p>Холбогдсоны дараа псевдо tty нь цуваа порт шиг ашиглагдаж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cu -l ttyp6</span></code></pre></div></div></div><div class=sect2><h3 id=_алдааг_олж_засварлах_2>32.4.11. Алдааг олж засварлах<a class=anchor href=#_алдааг_олж_засварлах_2></a></h3><div class=sect3><h4 id=_алсын_төхөөрөмж_холбогдож_чадахгүй_байх>32.4.11.1. Алсын төхөөрөмж холбогдож чадахгүй байх<a class=anchor href=#_алсын_төхөөрөмж_холбогдож_чадахгүй_байх></a></h4><div class=paragraph><p>Зарим нэг хуучин Bluetooth төхөөрөмжүүд нь үүрэг шилжүүлэлтийг дэмждэггүй. Анхдагчаар FreeBSD нь шинэ холболтыг хүлээн авахдаа үүргийг өөрчилж мастер болохыг оролддог. Үүнийг дэмждэггүй төхөөрөмжүүд нь холбогдож чаддаггүй. Шинэ холболт хийгдэхэд үүрэг шилжүүлэлт хийгддэгийг санаарай. Тийм учраас алсын төхөөрөмжөөс үүрэг шилжүүлэлтийг дэмждэг эсэхийг нь асуух боломжгүй юм. Локал тал дээрээ үүрэг шилжүүлэлтийг хаах HCI тохируулга байдаг:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># hccontrol -n ubt0hci write_node_role_switch 0</span></code></pre></div></div></div><div class=sect3><h4 id=_ямар_нэгэн_юм_буруу_болоод_байна_би_яг_юу_болоод_байгааг_харж_болох_уу>32.4.11.2. Ямар нэгэн юм буруу болоод байна, би яг юу болоод байгааг харж болох уу?<a class=anchor href=#_ямар_нэгэн_юм_буруу_болоод_байна_би_яг_юу_болоод_байгааг_харж_болох_уу></a></h4><div class=paragraph><p>Тиймээ, та харж болно. <a class=package href=https://cgit.freebsd.org/ports/tree/comms/hcidump/>comms/hcidump</a> порт хэлбэрээр байдаг гуравдагч талын багц hcidump-г ашиглана. hcidump хэрэгсэл нь <a href="https://man.freebsd.org/cgi/man.cgi?query=tcpdump&amp;sektion=1&amp;format=html">tcpdump(1)</a>-тай төстэй. Энэ нь Bluetooth пакетуудын агуулгыг терминал дээр харуулж Bluetooth пакетуудыг файл уруу гаргахад хэрэглэгдэж болно.</p></div></div></div></div></div><div class=sect1><h2 id=network-bridging>32.5. Гүүр<a class=anchor href=#network-bridging></a></h2><div class=sectionbody><div class=sect2><h3 id=_танилцуулга_2>32.5.1. Танилцуулга<a class=anchor href=#_танилцуулга_2></a></h3><div class=paragraph><p>Заримдаа нэг физик сүлжээг (Ethernet сегмент зэрэг) IP дэд сүлжээнүүд үүсгэж сегментүүдийг хооронд нь чиглүүлэгчээр цугт нь холбож ашиглалгүйгээр хоёр тусдаа сүлжээний сегмент болгох нь ашигтай байдаг. Ийм маягаар хоёр сүлжээг хооронд нь холбодог төхөөрөмжийг "bridge" буюу "гүүр" гэдэг. Хоёр сүлжээний интерфэйс карттай FreeBSD систем гүүр маягаар ажиллаж чаддаг.</p></div><div class=paragraph><p>Гүүр нь өөрийн сүлжээний интерфэйс бүрийн төхөөрөмжийн MAC давхаргын хаягуудыг (Ethernet хаягууд) сурч ажилладаг. Түүний эх болон төгсгөл нь зөвхөн өөр өөр сүлжээнд байгаа тохиолдолд хоёр сүлжээний хооронд урсгалыг дамжуулдаг.</p></div><div class=paragraph><p>Олон талаараа гүүр нь маш цөөн порттой Ethernet шилжүүлэгчтэй адил юм.</p></div></div><div class=sect2><h3 id=_гүүр_хийхэд_тохирох_тохиолдлууд>32.5.2. Гүүр хийхэд тохирох тохиолдлууд<a class=anchor href=#_гүүр_хийхэд_тохирох_тохиолдлууд></a></h3><div class=paragraph><p>Өнөөдөр гүүр ашиглагддаг олон нийтлэг тохиолдол байдаг.</p></div><div class=sect3><h4 id=_сүлжээнүүдийг_холбох_нь>32.5.2.1. Сүлжээнүүдийг холбох нь<a class=anchor href=#_сүлжээнүүдийг_холбох_нь></a></h4><div class=paragraph><p>Гүүрний үндсэн үйлдэл нь хоёр буюу түүнээс олон сүлжээний сегментүүдийг хооронд нь холбох явдал юм. Кабелийн хязгаарлалт, галт хана хийх эсвэл виртуал машины интерфэйс зэрэг псевдо сүлжээнүүдийг холбох зэрэг сүлжээний энгийн төхөөрөмжийн оронд хост дээр тулгуурласан гүүрийг ашиглах шалтгаан олон байдаг. Гүүр нь бас hostap горимд ажиллаж байгаа утасгүй сүлжээний интерфэйсийг утастай сүлжээ рүү холбож хандалтын цэг маягаар ажиллах чадвартай.</p></div></div><div class=sect3><h4 id=_шүүхурсгал_хэлбэржүүлэх_галт_хана>32.5.2.2. Шүүх/урсгал хэлбэржүүлэх галт хана<a class=anchor href=#_шүүхурсгал_хэлбэржүүлэх_галт_хана></a></h4><div class=paragraph><p>Нийтлэг тохиолдол бол чиглүүлэлт юм уу эсвэл сүлжээний хаягийн хөрвүүлэлтгүй (NAT) галт ханын ажиллагаа шаардлагатай тохиолдол юм.</p></div><div class=paragraph><p>Үүний жишээ нь DSL юм уу эсвэл ISDN-ээр ISP уруугаа холбогдсон жижиг компани юм. Тэд 13 ширхэг гаднаас хандах боломжтой IP хаягийг өөрсдийн ISP-ээс авдаг бөгөөд сүлжээндээ 10 PC-тэй. Энэ тохиолдолд чиглүүлэгч дээр тулгуурласан галт хана нь дэд сүлжээний асуудлуудаас болоод төвөгтэй байна.</p></div><div class=paragraph><p>Гүүр дээр тулгуурласан галт ханыг тохируулж тэдний DSL/ISDN чиглүүлэгчийн замд ямар нэгэн IP хаяглалтын асуудалгүйгээр тавьж болно.</p></div></div><div class=sect3><h4 id=_сүлжээ_сонсогч_network_tap>32.5.2.3. Сүлжээ сонсогч (Network tap)<a class=anchor href=#_сүлжээ_сонсогч_network_tap></a></h4><div class=paragraph><p>Гүүр нь сүлжээний хоёр сегментийг холбож тэдгээрийн хооронд дамжиж байгаа бүх Ethernet урсгалыг шалгахад хэрэглэгдэж болно. Энэ нь гүүр интерфэйс дээр <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a>/<a href="https://man.freebsd.org/cgi/man.cgi?query=tcpdump&amp;sektion=1&amp;format=html">tcpdump(1)</a> ашиглах юм уу эсвэл бүх урсгалын хуулбарыг нэмэлт интерфэйс (span порт) уруу илгээх замаар байж болно.</p></div></div><div class=sect3><h4 id=_түвшин_2_vpn>32.5.2.4. Түвшин 2 VPN<a class=anchor href=#_түвшин_2_vpn></a></h4><div class=paragraph><p>Хоёр Ethernet сүлжээ нь IP холбоосын дагуу EtherIP туннель юм уу эсвэл OpenVPN зэрэг <a href="https://man.freebsd.org/cgi/man.cgi?query=tap&amp;sektion=4&amp;format=html">tap(4)</a> дээр тулгуурласан шийдлүүдийн тусламжтайгаар холбогдож болно.</p></div></div><div class=sect3><h4 id=_түвшин_2_давхцал>32.5.2.5. Түвшин 2 Давхцал<a class=anchor href=#_түвшин_2_давхцал></a></h4><div class=paragraph><p>Сүлжээ нь хоорондоо олон холбоосоор холбогдож давхацсан замуудыг хаахын тулд Spanning Tree протоколыг ашиглаж болно. Ethernet сүлжээ нь зөв ажилладаг байхын тулд хоёр төхөөрөмжийн хооронд зөвхөн нэг идэвхтэй зам байх ёстой байдаг бөгөөд Spanning Tree нь давталтыг илрүүлж давхацсан холбоосуудыг хаалттай төлөвт оруулдаг. Аль нэг идэвхтэй холбоос амжилтгүй болсон тохиолдолд уг протокол өөр модыг тооцоолж сүлжээн дэх бүх цэгүүдэд хүрэх холболтыг сэргээхийн тулд аль нэг хаалттай замыг дахин идэвхжүүлдэг.</p></div></div></div><div class=sect2><h3 id=_цөмийн_тохиргоо_2>32.5.3. Цөмийн тохиргоо<a class=anchor href=#_цөмийн_тохиргоо_2></a></h3><div class=paragraph><p>Энэ хэсэг нь <a href="https://man.freebsd.org/cgi/man.cgi?query=if_bridge&amp;sektion=4&amp;format=html">if_bridge(4)</a> гүүрний шийдлийн тухай өгүүлэх болно, netgraph гүүрний драйвер бас байдаг бөгөөд илүү дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=ng_bridge&amp;sektion=4&amp;format=html">ng_bridge(4)</a> гарын авлагын хуудаснаас үзнэ үү.</p></div><div class=paragraph><p>Гүүрний драйвер нь цөмийн модуль бөгөөд <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a>-оор гүүр интерфэйсийг үүсгэх үед автоматаар дуудагддаг. Өөрийн цөмийн тохиргооны файлд <code>device if_bridge</code> гэж нэмэн гүүрийг цөмд эмхэтгэж болно.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=pfil&amp;sektion=9&amp;format=html">pfil(9)</a> тогтолцоогоор холбогддог галт ханын дурын багцтай пакет шүүлтийг ашиглаж болдог. Галт хана нь модуль хэлбэрээр дуудагдах юм уу эсвэл цөмд эмхэтгэгдэж болно.</p></div><div class=paragraph><p>Гүүр нь <a href="https://man.freebsd.org/cgi/man.cgi?query=altq&amp;sektion=4&amp;format=html">altq(4)</a> эсвэл <a href="https://man.freebsd.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;format=html">dummynet(4)</a>-тэй цуг урсгал хэлбэржүүлэгч болон ашиглагдаж болно.</p></div></div><div class=sect2><h3 id=_гүүрийг_идэвхжүүлэх_нь>32.5.4. Гүүрийг идэвхжүүлэх нь<a class=anchor href=#_гүүрийг_идэвхжүүлэх_нь></a></h3><div class=paragraph><p>Интерфэйс хуулбарлалтыг ашиглан гүүрийг үүсгэдэг. Гүүрийг үүсгэхийн тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a>-ийг ашиглана. Хэрэв гүүрний драйвер цөмд байхгүй бол автоматаар дуудагддаг.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge create</span>
bridge0
<span class=c># ifconfig bridge0</span>
bridge0: <span class=nv>flags</span><span class=o>=</span>8802&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        ether 96:3d:4b:f1:79:7a
        <span class=nb>id </span>00:00:00:00:00:00 priority 32768 hellotime 2 fwddelay 15
        maxage 20 holdcnt 6 proto rstp maxaddr 100 <span class=nb>timeout </span>1200
        root <span class=nb>id </span>00:00:00:00:00:00 priority 0 ifcost 0 port 0</code></pre></div></div><div class=paragraph><p>Гүүр интерфэйс үүсч түүнд санамсаргүйгээр үүсгэгдсэн Ethernet хаяг автоматаар өгөгддөг. <code>maxaddr</code> болон <code>timeout</code> нэмэлт өгөгдлүүд нь өөрийн дамжуулах хүснэгтэд хичнээн MAC хаягийг хадгалах болон сүүлд харагдсанаасаа хойш оруулга бүр хичнээн секундын дараа устгагдах вэ гэдгийг хянадаг. Бусад нэмэлт өгөгдлүүд нь Spanning Tree хэрхэн ажиллахыг хянадаг.</p></div><div class=paragraph><p>Гишүүн сүлжээний интерфэйсийг гүүрэнд нэмэх хэрэгтэй. Гүүрний хувьд пакетуудыг дамжуулахын тулд бүх гишүүн интерфэйсүүд болон гүүр өөрөө идэвхжсэн байх шаардлагатай:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 addm fxp0 addm fxp1 up</span>
<span class=c># ifconfig fxp0 up</span>
<span class=c># ifconfig fxp1 up</span></code></pre></div></div><div class=paragraph><p>Гүүр нь одоо Ethernet хүрээнүүдийг <span class=filename>fxp0</span> болон <span class=filename>fxp1</span>-ийн хооронд дамжуулж байна. Гүүр нь ачаалах үед үүсгэгдэх <span class=filename>/etc/rc.conf</span>-ийн тохиргоо ийм байна:</p></div><div class="literalblock programlisting"><div class=content><pre>cloned_interfaces=&#34;bridge0&#34;
ifconfig_bridge0=&#34;addm fxp0 addm fxp1 up&#34;
ifconfig_fxp0=&#34;up&#34;
ifconfig_fxp1=&#34;up&#34;</pre></div></div><div class=paragraph><p>Хэрэв гүүр хостод IP хаяг хэрэгтэй бол үүнийг тохируулах зөв газар бол гишүүн интерфэйсийн аль нэг биш харин гүүр интерфэйс өөрөө юм. Үүнийг статикаар эсвэл DHCP-ээр тохируулж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 inet 192.168.0.1/24</span></code></pre></div></div><div class=paragraph><p>Гүүр интерфэйсд IPv6 хаягийг өгч бас болно.</p></div></div><div class=sect2><h3 id=_галт_хана>32.5.5. Галт хана<a class=anchor href=#_галт_хана></a></h3><div class=paragraph><p>Пакет шүүлт идэвхжсэн тохиолдолд гүүр хийгдсэн пакетууд нь гарч байгаа интерфэйс ба гүүр интерфэйс дээрээ гарах шүүлтээр, тохирох интерфэйс дээрээ орох шүүлтээр дамждаг. Аль ч шатыг хааж болдог. Пакетийн урсгалын чиглэл нь чухал бол гүүрэн дээр галт хана хийснээс гишүүн интерфэйсүүд дээр хийсэн нь дээр байдаг.</p></div><div class=paragraph><p>Гүүр нь IP бус ба ARP пакетуудыг дамжуулах болон IPFW-ийн тусламжтай хийгдэх хоёрдугаар түвшний галт хананд зориулсан хэд хэдэн тохируулж болох тохируулгуудтай байдаг. Дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=if_bridge&amp;sektion=4&amp;format=html">if_bridge(4)</a>-ээс үзнэ үү.</p></div></div><div class=sect2><h3 id=_spanning_tree>32.5.6. Spanning Tree<a class=anchor href=#_spanning_tree></a></h3><div class=paragraph><p>Гүүрний драйвер нь хуучин Spanning Tree Протоколтой (STP) нийцтэй Rapid Spanning Tree Protocol (RSTP эсвэл 802.1w) буюу Түргэн Spanning Tree Протоколыг хийж гүйцэтгэсэн байдаг. Spanning Tree нь сүлжээн дэх давталтуудыг илрүүлж арилгахад хэрэглэгддэг. RSTP нь хуучин STP-г бодох юм бол илүү түргэн нийлэх боломжийг олгодог. Энэ протокол нь давхцал үүсгэлгүйгээр дамжуулалтад хурдан шилжихийн тулд хөрш шилжүүлэгчидтэйгээ мэдээлэл солилцдог. FreeBSD нь RSTP болон STP-г ажиллах горим хэлбэрээр дэмждэг бөгөөд RSTP нь анхдагч горим юм.</p></div><div class=paragraph><p>Spanning Tree-г <code>stp</code> тушаал ашиглан гишүүн интерфэйсүүд дээр идэвхжүүлж болно. Одоо <span class=filename>fxp0</span> болон <span class=filename>fxp1</span> интерфэйсүүдтэй гүүрний хувьд STP-г идэвхжүүлэхийн тулд доор дурдсаныг хийнэ:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 stp fxp0 stp fxp1</span>
bridge0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        ether d6:cf:d5:a0:94:6d
        <span class=nb>id </span>00:01:02:4b:d4:50 priority 32768 hellotime 2 fwddelay 15
        maxage 20 holdcnt 6 proto rstp maxaddr 100 <span class=nb>timeout </span>1200
        root <span class=nb>id </span>00:01:02:4b:d4:50 priority 32768 ifcost 0 port 0
        member: fxp0 <span class=nv>flags</span><span class=o>=</span>1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 3 priority 128 path cost 200000 proto rstp
                role designated state forwarding
        member: fxp1 <span class=nv>flags</span><span class=o>=</span>1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 4 priority 128 path cost 200000 proto rstp
                role designated state forwarding</code></pre></div></div><div class=paragraph><p>Энэ гүүр нь <code>00:01:02:4b:d4:50</code> гэсэн ID болон <code>32768</code> гэсэн ээлж бүхий spanning tree-тэй байна. <code>root id</code> адил байгаа нь модны хувьд root гүүр гэдгийг илтгэж байна.</p></div><div class=paragraph><p>Сүлжээн дэх өөр нэг гүүр бас идэвхжсэн spanning tree-тэй байна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>bridge0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        ether 96:3d:4b:f1:79:7a
        <span class=nb>id </span>00:13:d4:9a:06:7a priority 32768 hellotime 2 fwddelay 15
        maxage 20 holdcnt 6 proto rstp maxaddr 100 <span class=nb>timeout </span>1200
        root <span class=nb>id </span>00:01:02:4b:d4:50 priority 32768 ifcost 400000 port 4
        member: fxp0 <span class=nv>flags</span><span class=o>=</span>1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 4 priority 128 path cost 200000 proto rstp
                role root state forwarding
        member: fxp1 <span class=nv>flags</span><span class=o>=</span>1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 5 priority 128 path cost 200000 proto rstp
                role designated state forwarding</code></pre></div></div><div class=paragraph><p><code>root id 00:01:02:4b:d4:50 priority 32768 ifcost 400000 port 4</code> мөр нь root гүүр нь дээр дурдсантай адил <code>00:01:02:4b:d4:50</code> бөгөөд энэ гүүрнээс <code>400000</code> гэсэн замын өртөгтэй, root гүүр рүү хүрэх зам нь <span class=filename>fxp0</span> болох <code>port 4</code>-өөр дамжина гэдгийг үзүүлж байна.</p></div></div><div class=sect2><h3 id=_гүүрний_нэмэлт_тохиргоо>32.5.7. Гүүрний нэмэлт тохиргоо<a class=anchor href=#_гүүрний_нэмэлт_тохиргоо></a></h3><div class=sect3><h4 id=_урсгалыг_бүтээхшинэчлэх>32.5.7.1. Урсгалыг бүтээх/шинэчлэх<a class=anchor href=#_урсгалыг_бүтээхшинэчлэх></a></h4><div class=paragraph><p>Гүүр нь монитор буюу хянах горимыг дэмждэг бөгөөд энэ горимд пакетууд нь <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> процесс хийгдсэний дараа хаягдаж цааш процесс хийгдэхгүй эсвэл дамжуулагдахгүй болдог. Хоёр буюу түүнээс дээш тооны интерфэйсүүдийн оролтыг нэгтгэж нэг <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> урсгал руу гаргахад үүнийг ашиглаж болно. RX/TX дохионуудыг гадагш хоёр тусдаа интерфэйсээр дамжуулах сүлжээний сонсогчид зориулсан урсгал бүтээхэд энэ нь ашигтай байдаг.</p></div><div class=paragraph><p>Сүлжээний дөрвөн интерфэйсээс оролтыг нэг урсгал уруу уншихын тулд:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 addm fxp0 addm fxp1 addm fxp2 addm fxp3 monitor up</span>
<span class=c># tcpdump -i bridge0</span></code></pre></div></div></div><div class=sect3><h4 id=_span_портууд>32.5.7.2. Span портууд<a class=anchor href=#_span_портууд></a></h4><div class=paragraph><p>Гүүрний хүлээн авсан Ethernet хүрээ бүрийн хуулбар томилогдсон span порт уруу дамждаг. Гүүрэн дээр тохируулагдсан span портуудын тоо хязгааргүй байдаг, хэрэв интерфэйс нь span порт гэж томилогдсон бол энэ нь ердийн гүүрний порт маягаар ашиглагдах боломжгүй байж болох юм. Энэ нь гүүрний аль нэг span порт руу холбогдсон өөр нэг хост дээрээс гүүр хийгдсэн сүлжээг идэвхгүйгээр хулгайгаар үзэхэд их ашигтай байдаг.</p></div><div class=paragraph><p>Бүх хүрээнүүдийн хуулбарыг <span class=filename>fxp4</span> гэж нэрлэгдсэн интерфэйс рүү илгээхийн тулд:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 span fxp4</span></code></pre></div></div></div><div class=sect3><h4 id=_хувийн_интерфэйсүүд>32.5.7.3. Хувийн интерфэйсүүд<a class=anchor href=#_хувийн_интерфэйсүүд></a></h4><div class=paragraph><p>Хувийн интерфэйс нь бусад хувийн интерфэйсүүд рүү ямар ч урсгалыг дамжуулдаггүй. Урсгал нь ямар нэг нөхцөлгүйгээр хаагддаг бөгөөд ARP зэрэг ямар ч Ethernet хүрээнүүд дамжуулагдахгүй. Хэрэв урсгал нь сонголтын дагуу хаагдах хэрэгтэй бол үүний оронд галт хана ашиглах ёстой байдаг.</p></div></div><div class=sect3><h4 id=_наалттай_интерфэйсүүд>32.5.7.4. Наалттай интерфэйсүүд<a class=anchor href=#_наалттай_интерфэйсүүд></a></h4><div class=paragraph><p>Хэрэв гүүрний гишүүн интерфэйс нь наалттай гэж тэмдэглэгдсэн бол динамикаар тогтоосон хаягийн оруулгуудыг дамжуулалтын кэшд ороход статик гэж үздэг. Хаяг өөр интерфэйс дээр үзэгдсэн байлаа ч гэсэн наалттай оруулгууд нь хэзээ ч кэшээс гарч хуучирдаггүй эсвэл солигддоггүй. Энэ нь дамжуулалтын хүснэгтийг урьдчилан нутагшуулах шаардлагагүй болгож статик хаягийн оруулгуудын ашгийг өгдөг бөгөөд гүүрний тодорхой нэг сегмент дээр тогтоогдсон хэрэглэгчид өөр сегмент рүү тэнүүчилж чаддаггүй.</p></div><div class=paragraph><p>Наалттай хаягуудыг ашиглах өөр нэг жишээ нь IP хаягийн талбарыг дэмий үрэлгүйгээр хэрэглэгчийн сүлжээнүүд нь тусгаарлагдсан чиглүүлэгчийг үүсгэхийн тулд гүүрийг VLAN-уудтай нэгтгэх явдал юм. <code>CustomerA</code> нь <code>vlan100</code> дээр <code>CustomerB</code> нь <code>vlan101</code> дээр гэж үзье. Гүүр нь <code>192.168.0.1</code> гэсэн хаягтай бөгөөд бас интернэт чиглүүлэгч юм.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 addm vlan100 sticky vlan100 addm vlan101 sticky vlan101</span>
<span class=c># ifconfig bridge0 inet 192.168.0.1/24</span></code></pre></div></div><div class=paragraph><p>Хоёр клиент хоёулаа <code>192.168.0.1</code>-г өөрсдийн анхдагч гарц гэж харах бөгөөд гүүрний кэш нь наалттай болохоор тэд өөрсдийн урсгалыг дундаас нь оруулах гэж нөгөө хэрэглэгчийнхээ MAC хаягийг ашиглан хуурч чадахгүй юм.</p></div><div class=paragraph><p>VLAN-уудын хоорондох ямар ч холбоог хувийн интерфэйсүүд (эсвэл галт хана) ашиглан хааж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 private vlan100 private vlan101</span></code></pre></div></div><div class=paragraph><p>Хэрэглэгчид нь нэг нэгнээсээ бүр мөсөн тусгаарлагдсан бөгөөд бүх <code>/24</code> хаягийн бүсийг дэд сүлжээ болгон хуваалгүйгээр хуваарилж болно.</p></div></div><div class=sect3><h4 id=_хаягийн_хязгаарууд>32.5.7.5. Хаягийн хязгаарууд<a class=anchor href=#_хаягийн_хязгаарууд></a></h4><div class=paragraph><p>Интерфэйсийн цаана байгаа давтагдашгүй эх MAC хаягуудын тоо хязгаартай байж болно. Тэр хязгаарт хүрэх үед мэдэгдэхгүй эх хаягтай пакетууд нь тухайн үед байгаа хостын кэш оруулгын хугацаа дуусах юм уу эсвэл устгагдах хүртэл хаягдсаар байх болно.</p></div><div class=paragraph><p>Доор дурдсан жишээ нь <code>vlan100</code> дээр байгаа <code>CustomerA</code>-д зориулж Ethernet төхөөрөмжүүдийн хамгийн их тоог 10 болгон тохируулж байна.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bridge0 ifmaxaddr vlan100 10</span></code></pre></div></div></div><div class=sect3><h4 id=_snmp_монитор_хийх>32.5.7.6. SNMP монитор хийх<a class=anchor href=#_snmp_монитор_хийх></a></h4><div class=paragraph><p>Гүүр интерфэйс болон STP параметрүүдийг FreeBSD-ийн үндсэн системд орсон байдаг SNMP демоны тусламжтайгаар монитор хийж болно. Экспорт хийгдсэн гүүрний MIB-үүд нь IETF-ийн стандартуудыг хангаж байдаг. Тийм болохоор дурын SNMP клиент эсвэл монитор хийдэг багцыг өгөгдлийг хүлээн авахад хэрэглэж болно.</p></div><div class=paragraph><p>Гүүр машин дээр <span class=filename>/etc/snmp.config</span> файлд <code>begemotSnmpdModulePath."bridge" = "/usr/lib/snmp_bridge.so"</code> мөрийг тайлбар болгосныг болиулж bsnmpd дэмоныг эхлүүлэх хэрэгтэй. Community буюу нийгмийн нэрс болон хандалтын жагсаалтууд зэрэг бусад тохиргоонуудыг өөрчлөх шаардлагатай байж болно. Дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=bsnmpd&amp;sektion=1&amp;format=html">bsnmpd(1)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=snmp_bridge&amp;sektion=3&amp;format=html">snmp_bridge(3)</a>-с үзнэ үү.</p></div><div class=paragraph><p>Доор дурдсан жишээнүүд нь гүүрэнд хүсэлт илгээхийн тулд Net-SNMP програм хангамжийг (<a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/net-snmp/>net-mgmt/net-snmp</a>) ашиглаж байгаа бөгөөд <a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/bsnmptools/>net-mgmt/bsnmptools</a> портыг бас ашиглаж болно. Гүүрний MIB тодорхойлолтуудыг Net-SNMP руу оруулж ирэхийн тулд SNMP клиент хост дээрээ <span class=filename>$HOME/.snmp/snmp.conf</span> файлд доор дурдсан мөрүүдийг нэмэх хэрэгтэй:</p></div><div class="literalblock programlisting"><div class=content><pre>mibdirs +/usr/shared/snmp/mibs
mibs +BRIDGE-MIB:RSTP-MIB:BEGEMOT-MIB:BEGEMOT-BRIDGE-MIB</pre></div></div><div class=paragraph><p>Ганц гүүрийг IETF BRIDGE-MIB (RFC4188)-ээр монитор хийхийн тулд доор дурдсаныг хийнэ</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% snmpwalk <span class=nt>-v</span> 2c <span class=nt>-c</span> public bridge1.example.com mib-2.dot1dBridge
BRIDGE-MIB::dot1dBaseBridgeAddress.0 <span class=o>=</span> STRING: 66:fb:9b:6e:5c:44
BRIDGE-MIB::dot1dBaseNumPorts.0 <span class=o>=</span> INTEGER: 1 ports
BRIDGE-MIB::dot1dStpTimeSinceTopologyChange.0 <span class=o>=</span> Timeticks: <span class=o>(</span>189959<span class=o>)</span> 0:31:39.59 centi-seconds
BRIDGE-MIB::dot1dStpTopChanges.0 <span class=o>=</span> Counter32: 2
BRIDGE-MIB::dot1dStpDesignatedRoot.0 <span class=o>=</span> Hex-STRING: 80 00 00 01 02 4B D4 50
...
BRIDGE-MIB::dot1dStpPortState.3 <span class=o>=</span> INTEGER: forwarding<span class=o>(</span>5<span class=o>)</span>
BRIDGE-MIB::dot1dStpPortEnable.3 <span class=o>=</span> INTEGER: enabled<span class=o>(</span>1<span class=o>)</span>
BRIDGE-MIB::dot1dStpPortPathCost.3 <span class=o>=</span> INTEGER: 200000
BRIDGE-MIB::dot1dStpPortDesignatedRoot.3 <span class=o>=</span> Hex-STRING: 80 00 00 01 02 4B D4 50
BRIDGE-MIB::dot1dStpPortDesignatedCost.3 <span class=o>=</span> INTEGER: 0
BRIDGE-MIB::dot1dStpPortDesignatedBridge.3 <span class=o>=</span> Hex-STRING: 80 00 00 01 02 4B D4 50
BRIDGE-MIB::dot1dStpPortDesignatedPort.3 <span class=o>=</span> Hex-STRING: 03 80
BRIDGE-MIB::dot1dStpPortForwardTransitions.3 <span class=o>=</span> Counter32: 1
RSTP-MIB::dot1dStpVersion.0 <span class=o>=</span> INTEGER: rstp<span class=o>(</span>2<span class=o>)</span></code></pre></div></div><div class=paragraph><p><code>dot1dStpTopChanges.0</code>-ийн утга хоёр бөгөөд энэ нь STP гүүрний бүтэц хоёр удаа өөрчлөгдсөн гэдгийг харуулж байна. Бүтцийн өөрчлөлт гэдэг нь сүлжээн дэх нэг буюу олон холбоосууд өөрчлөгдсөн юм уу эсвэл амжилтгүй болсон бөгөөд шинэ мод тооцоологдсон гэсэн үг юм. <code>dot1dStpTimeSinceTopologyChange.0</code>-ийн утга ийм зүйл хэзээ болсныг харуулах болно.</p></div><div class=paragraph><p>Олон гүүрний интерфэйсийг монитор хийхийн тулд хувийн BEGEMOT-BRIDGE-MIB-г ашиглаж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% snmpwalk <span class=nt>-v</span> 2c <span class=nt>-c</span> public bridge1.example.com
enterprises.fokus.begemot.begemotBridge
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseName.<span class=s2>&#34;bridge0&#34;</span> <span class=o>=</span> STRING: bridge0
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseName.<span class=s2>&#34;bridge2&#34;</span> <span class=o>=</span> STRING: bridge2
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseAddress.<span class=s2>&#34;bridge0&#34;</span> <span class=o>=</span> STRING: e:ce:3b:5a:9e:13
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseAddress.<span class=s2>&#34;bridge2&#34;</span> <span class=o>=</span> STRING: 12:5e:4d:74:d:fc
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseNumPorts.<span class=s2>&#34;bridge0&#34;</span> <span class=o>=</span> INTEGER: 1
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseNumPorts.<span class=s2>&#34;bridge2&#34;</span> <span class=o>=</span> INTEGER: 1
...
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTimeSinceTopologyChange.<span class=s2>&#34;bridge0&#34;</span> <span class=o>=</span> Timeticks: <span class=o>(</span>116927<span class=o>)</span> 0:19:29.27 centi-seconds
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTimeSinceTopologyChange.<span class=s2>&#34;bridge2&#34;</span> <span class=o>=</span> Timeticks: <span class=o>(</span>82773<span class=o>)</span> 0:13:47.73 centi-seconds
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTopChanges.<span class=s2>&#34;bridge0&#34;</span> <span class=o>=</span> Counter32: 1
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTopChanges.<span class=s2>&#34;bridge2&#34;</span> <span class=o>=</span> Counter32: 1
BEGEMOT-BRIDGE-MIB::begemotBridgeStpDesignatedRoot.<span class=s2>&#34;bridge0&#34;</span> <span class=o>=</span> Hex-STRING: 80 00 00 40 95 30 5E 31
BEGEMOT-BRIDGE-MIB::begemotBridgeStpDesignatedRoot.<span class=s2>&#34;bridge2&#34;</span> <span class=o>=</span> Hex-STRING: 80 00 00 50 8B B8 C6 A9</code></pre></div></div><div class=paragraph><p><code>mib-2.dot1dBridge</code> дэд модоор монитор хийгдэж байгаа гүүрний интерфэйсийг солихын тулд доор дурдсаныг хийнэ:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% snmpset <span class=nt>-v</span> 2c <span class=nt>-c</span> private bridge1.example.com
BEGEMOT-BRIDGE-MIB::begemotBridgeDefaultBridgeIf.0 s bridge2</code></pre></div></div></div></div></div></div><div class=sect1><h2 id=network-aggregation>32.6. Холбоос нэгтгэлт ба ослыг тойрон гарах (Link Aggregation and Failover)<a class=anchor href=#network-aggregation></a></h2><div class=sectionbody><div class=sect2><h3 id=_танилцуулга_3>32.6.1. Танилцуулга<a class=anchor href=#_танилцуулга_3></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=lagg&amp;sektion=4&amp;format=html">lagg(4)</a> интерфэйс нь fault-tolerance буюу алдаанд тэсвэртэй байдал болон өндөр хурдны холбоосуудыг хангах зорилгоор сүлжээний олон интерфэйсүүдийг нэг виртуал интерфэйс болгон нэгтгэх боломжийг олгодог.</p></div></div><div class=sect2><h3 id=_ажиллагааны_горимууд>32.6.2. Ажиллагааны горимууд<a class=anchor href=#_ажиллагааны_горимууд></a></h3><div class=dlist><dl><dt class=hdlist1>Failover</dt><dd><p>Зөвхөн мастер портоор урсгалыг илгээж хүлээн авна. Хэрэв мастер порт байхгүй болвол дараагийн идэвхтэй порт ашиглагдана. Эхний нэмэгдсэн интерфэйс нь мастер порт болох бөгөөд үүний дараа нэмэгдсэнүүд нь ослыг тойрон гарах төхөөрөмжүүд болон ашиглагдах болно. Хэрэв мастер биш порт дээр тойрон гарах үйлдэл хийгдвэл анхдагч порт дахин боломжтой болонгуутаа мастер порт болдог.</p></dd><dt class=hdlist1>Cisco® Fast EtherChannel®</dt><dd><p>Cisco® Fast EtherChannel® (FEC) нь статик тохируулга бөгөөд нөгөө талтайгаа нэгтгэлт хийхэд тохиролцдоггүй эсвэл холбоосыг монитор хийхийн тулд хүрээнүүд солилцдоггүй. Хэрэв шилжүүлэгч LACP-г дэмждэг бол түүнийг ашиглах ёстой.</p><div class=paragraph><p>FEC нь хэш хийгдсэн протоколын толгойн мэдээлэл дээр үндэслэн идэвхтэй портуудаар гарч байгаа урсгалыг тэнцвэржүүлж дурын идэвхтэй портоос ирж байгаа урсгалыг хүлээн авна. Хэш нь Ethernet эхлэл болон очих хаяг ба хэрэв байгаа бол VLAN хаяг болон IPv4/IPv6 эхлэл болон очих хаягийг багтаадаг.</p></div></dd><dt class=hdlist1>LACP</dt><dd><p>IEEE® 802.3ad Link Aggregation Control Protocol (LACP) буюу Холбоос Нэгтгэлт Хянах Протокол болон Marker буюу Тэмдэглэгээний Протокол. LACP нь нэгтгэж болох холбоосуудыг нөгөө талтай нь нэг буюу хэд хэдэн Link Aggregated Group буюу Холбоос Нэгтгэгдсэн бүлгүүд (LAG) болгон тохиролцуулдаг. LAG бүр нь адил хурдтай, гүйцэд дуплекс ажиллагаанд тохируулсан портуудаас тогтоно. Урсгал нь LAG дахь портуудын дагуу хамгийн их нийт хурдаар тэнцвэржүүлэгдэх бөгөөд ихэнх тохиолдолд бүх портуудыг агуулсан зөвхөн нэг LAG байх болно. Физик холболт өөрчлөгдөхөд Холбоос Нэгтгэлт шинэ тохиргоо уруу хурдан шилжих болно.</p><div class=paragraph><p>LACP нь хэш хийгдсэн протоколын толгойн мэдээлэл дээр үндэслэн идэвхтэй портуудаар гарч байгаа урсгалыг тэнцвэржүүлж дурын идэвхтэй портоос ирж байгаа урсгалыг хүлээн авна. Хэш нь Ethernet эхлэл болон очих хаяг ба хэрэв байгаа бол VLAN хаяг болон IPv4/IPv6 эхлэл болон очих хаягийг багтаадаг.</p></div></dd><dt class=hdlist1>Loadbalance</dt><dd><p>Энэ нь <em>FEC</em> горимын хуулбар юм.</p></dd><dt class=hdlist1>Round-robin</dt><dd><p>Тойрон эргэх хуваарилалтыг ашиглан гарч байгаа урсгалыг бүх идэвхтэй портуудаар тарааж дурын идэвхтэй портоос ирж байгаа урсгалыг хүлээн авна. Энэ горим нь Ethernet хүрээний дарааллыг зөрчих бөгөөд болгоомжтой ашиглах шаардлагатай байдаг.</p></dd></dl></div></div><div class=sect2><h3 id=_жишээнүүд>32.6.3. Жишээнүүд<a class=anchor href=#_жишээнүүд></a></h3><div id=networking-lacp-aggregation-cisco class=exampleblock><div class=title>Жишээ 1. Cisco® шилжүүлэгчтэй LACP нэгтгэлт</div><div class=content><div class=paragraph><p>Энэ жишээ нь FreeBSD машины хоёр интерфэйсийг шилжүүлэгч рүү ачаалал тэнцвэржүүлсэн, алдаанд тэсвэртэй ганц холбоосоор холбож байна. Дамжуулах чанар болон алдаанд тэсвэртэй байдлыг сайжруулах зорилгоор илүү олон интерфэйсүүдийг нэмж болно. Ethernet холбоосууд дээр хүрээний дараалал чухал байдаг учраас хоёр станцын хоорондох ямар ч урсгал аль нэг интерфэйсийн хамгийн их хурдаар хязгаарлагдан тэр физик холбоосоор үргэлж урсаж байдаг. Дамжуулах алгоритм нь өөр өөр урсгалуудыг ялгаж, байгаа интерфэйсүүдээр тэдгээрийг тэнцвэржүүлэхийн тулд аль болох их мэдээллийг ашиглахыг оролддог.</p></div><div class=paragraph><p>Cisco® шилжүүлэгч дээр <em>FastEthernet0/1</em> болон <em>FastEthernet0/2</em> интерфэйсүүдийг <em>1</em> сувгийн бүлэгт нэмнэ.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>interface FastEthernet0/1
channel-group 1 mode active
channel-protocol lacp
<span class=o>!</span>
interface FastEthernet0/2
 channel-group 1 mode active
 channel-protocol lacp</code></pre></div></div><div class=paragraph><p><em>fxp0</em> болон <em>fxp1</em>-г ашиглан <a href="https://man.freebsd.org/cgi/man.cgi?query=lagg&amp;sektion=4&amp;format=html">lagg(4)</a> интерфэйсийг үүсгээд <em>10.0.0.3/24</em> гэсэн IP хаяг тавьж интерфэйсийг босгоно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig fxp0 up</span>
<span class=c># ifconfig fxp1 up</span>
<span class=c># ifconfig lagg0 create</span>
<span class=c># ifconfig lagg0 up laggproto lacp laggport fxp0 laggport fxp1 10.0.0.3/24</span></code></pre></div></div><div class=paragraph><p>Доорх тушаалыг ажиллуулж интерфэйсийн төлвийг харна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig lagg0</span></code></pre></div></div><div class=paragraph><p><em>ACTIVE</em> гэж тэмдэглэгдсэн портууд нь алсын шилжүүлэгчтэй тохиролцсон, идэвхтэй нэгтгэлтийн бүлгийн хэсэг бөгөөд урсгал нь дамжуулагдаж хүлээн авагдах болно. LAG таних тэмдгүүдийг үзэхийн тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a>-ийн дэлгэрэнгүй гаралтыг ашиглаарай.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>lagg0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>8&lt;VLAN_MTU&gt;
        ether 00:05:5d:71:8d:b8
	inet 10.0.0.15 netmask 0xffffff00 broadcast 10.0.0.255
        media: Ethernet autoselect
        status: active
        laggproto lacp
        laggport: fxp1 <span class=nv>flags</span><span class=o>=</span>1c&lt;ACTIVE,COLLECTING,DISTRIBUTING&gt;
        laggport: fxp0 <span class=nv>flags</span><span class=o>=</span>1c&lt;ACTIVE,COLLECTING,DISTRIBUTING&gt;</code></pre></div></div><div class=paragraph><p>Шилжүүлэгч дээр портын төлвийг харахын тулд <code>show lacp neighbor</code> тушаалыг ашиглах хэрэгтэй.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>switch# show lacp neighbor
Flags:  S - Device is requesting Slow LACPDUs
        F - Device is requesting Fast LACPDUs
        A - Device is <span class=k>in </span>Active mode       P - Device is <span class=k>in </span>Passive mode

Channel group 1 neighbors

Partner<span class=s1>&#39;s information:

                  LACP port                        Oper    Port     Port
Port      Flags   Priority  Dev ID         Age     Key     Number   State
Fa0/1     SA      32768     0005.5d71.8db8  29s    0x146   0x3      0x3D
Fa0/2     SA      32768     0005.5d71.8db8  29s    0x146   0x4      0x3D</span></code></pre></div></div><div class=paragraph><p>Дэлгэрэнгүйг харахыг хүсвэл <code>show lacp neighbor detail</code> тушаалыг ашиглана.</p></div></div></div><div id=networking-lagg-failover class=exampleblock><div class=title>Жишээ 2. Failover горим</div><div class=content><div class=paragraph><p>Failover буюу ослыг тойрон гарах горимыг мастер интерфэйс дээр холбоос тасарсан тохиолдолд хоёр дахь интерфэйс уруу шилжихэд ашиглаж болно. <em>fxp0</em> нь мастер интерфэйс, <em>fxp1</em> нь хоёр дахь интерфэйс байхаар <em>lagg0</em> интерфэйсийг үүсгэж тохируулна:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig lagg0 create</span>
<span class=c># ifconfig lagg0 up laggproto failover laggport fxp0 laggport fxp1</span></code></pre></div></div><div class=paragraph><p>Интерфэйс нь үүнтэй төстэй байх бөгөөд гол ялгаа нь MAC хаяг болон төхөөрөмжийн нэрс байх болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig lagg0</span>
lagg0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>8&lt;VLAN_MTU&gt;
        ether 00:05:5d:71:8d:b8
        media: Ethernet autoselect
        status: active
        laggproto failover
        laggport: fxp1 <span class=nv>flags</span><span class=o>=</span>0&lt;<span class=o>&gt;</span>
        laggport: fxp0 <span class=nv>flags</span><span class=o>=</span>5&lt;MASTER,ACTIVE&gt;</code></pre></div></div><div class=paragraph><p>Урсгал <em>fxp0</em> дээр хүлээн авагдаж дамжих болно. Хэрэв холбоос <em>fxp0</em> дээр тасарсан бол <em>fxp1</em> нь идэвхтэй холбоос болно. Хэрэв холбоос нь мастер интерфэйс дээр сэргээгдсэн бол энэ нь эргээд идэвхтэй холбоос болно.</p></div><div class=paragraph><p>Дахин ачаалахад энэ тохиргоог хэвээр байлгахын тулд дараах мөрүүдийг <span class=filename>/etc/rc.conf</span> файлд нэмж өгнө:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0=&#34;up&#34;
ifconfig_fxp1=&#34;up&#34;
cloned_interfaces=&#34;lagg0&#34;
ifconfig_lagg0=&#34;laggproto failover laggport fxp0 laggport fxp1 10.0.0.15/24&#34;</pre></div></div></div></div><div id=networking-lagg-wired-and-wireless class=exampleblock><div class=title>Жишээ 3. Утастай болон утасгүй сүлжээний интерфэйсүүдийн хоорондох Failover горим</div><div class=content><div class=paragraph><p>Зөөврийн компьютертай хэрэглэгчдийн хувьд утастай сүлжээний холболт байхгүй болсон үед ашиглахаар утасгүй сүлжээний интерфэйсийг хоёр дахь интерфэйс болгох нь зүйтэй байдаг. Өгөгдлийг утасгүй холболтоор дамжуулах боломжийг хангахын хажуугаар <a href="https://man.freebsd.org/cgi/man.cgi?query=lagg&amp;sektion=4&amp;format=html">lagg(4)</a>-ийн тусламжтайгаар нэг IP хаяг ашиглах, ажиллагаа болон аюулгүй байдлаас болоод утастай холболтыг илүүд үзэх боломжтой юм.</p></div><div class=paragraph><p>Энэ тохиргоонд утасгүй сүлжээний MAC хаягийг ашиглагдаж байгаа мастер интерфэйс болох утастай сүлжээний интерфэйсээс авсан <a href="https://man.freebsd.org/cgi/man.cgi?query=lagg&amp;sektion=4&amp;format=html">lagg(4)</a>-ийн хаягтай адилаар тавих хэрэгтэй.</p></div><div class=paragraph><p>Энэ тохиргоонд утастай сүлжээний интерфэйс <em>bge0</em>-ийг мастер, утасгүй сүлжээний интерфэйс <em>wlan0</em>-ийг failover интерфэйс гэж авч үзнэ. <em>wlan0</em>-ийг <em>iwn0</em>-ээс үүсгэсэн бөгөөд бид үүнд утастай сүлжээний холболтын MAC хаяг зааж өгөх болно. Эхний алхам бол MAC хаягийг утастай сүлжээний интерфэйсээс авах явдал юм:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bge0</span>
bge0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	<span class=nv>options</span><span class=o>=</span>19b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4&gt;
	ether 00:21:70:da:ae:37
	inet6 fe80::221:70ff:feda:ae37%bge0 prefixlen 64 scopeid 0x2
	nd6 <span class=nv>options</span><span class=o>=</span>29&lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&gt;
	media: Ethernet autoselect <span class=o>(</span>1000baseT &lt;full-duplex&gt;<span class=o>)</span>
	status: active</code></pre></div></div><div class=paragraph><p>Та <em>bge0</em>-ийг өөрт байгаагаар солих хэрэгтэй бөгөөд ингэхэд таны утастай сүлжээний интерфэйсийн MAC хаяг бүхий өөр <code>ether</code> хаягийг авах болно. Одоо утасгүй сүлжээний интерфэйс <em>iwn0</em>-ийг солино:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig iwn0 ether 00:21:70:da:ae:37</span></code></pre></div></div><div class=paragraph><p>Утасгүй сүлжээний интерфэйсийг босгоно, гэхдээ ямар ч IP хаяг тавих хэрэггүй:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig wlan0 create wlandev iwn0 ssid my_router up</span></code></pre></div></div><div class=paragraph><p><em>bge0</em> интерфэйсийг босгоно. <em>bge0</em>-ийг мастер маягаар ашиглан хэрэв шаардлагатай бол <em>wlan0</em> руу failover хийх боломжтойгоор <a href="https://man.freebsd.org/cgi/man.cgi?query=lagg&amp;sektion=4&amp;format=html">lagg(4)</a> интерфэйс үүсгэнэ:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bge0 up</span>
<span class=c># ifconfig lagg0 create</span>
<span class=c># ifconfig lagg0 up laggproto failover laggport bge0 laggport wlan0</span></code></pre></div></div><div class=paragraph><p>Интерфэйс нь үүнтэй төстэй байх бөгөөд гол ялгаа нь MAC хаяг ба төхөөрөмжийн нэрс байх болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig lagg0</span>
lagg0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>8&lt;VLAN_MTU&gt;
        ether 00:21:70:da:ae:37
        media: Ethernet autoselect
        status: active
        laggproto failover
        laggport: wlan0 <span class=nv>flags</span><span class=o>=</span>0&lt;<span class=o>&gt;</span>
        laggport: bge0 <span class=nv>flags</span><span class=o>=</span>5&lt;MASTER,ACTIVE&gt;</code></pre></div></div><div class=paragraph><p>Дараа нь IP хаяг авахын тулд DHCP клиентийг эхлүүлнэ:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dhclient lagg0</span></code></pre></div></div><div class=paragraph><p>Дахин ачаалахад энэ тохиргоог хэвээр байлгахын тулд дараах мөрүүдийг <span class=filename>/etc/rc.conf</span> файлд нэмж өгнө:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_bge0=&#34;up&#34;
ifconfig_iwn0=&#34;ether 00:21:70:da:ae:37&#34;
wlans_iwn0=&#34;wlan0&#34;
ifconfig_wlan0=&#34;WPA&#34;
cloned_interfaces=&#34;lagg0&#34;
ifconfig_lagg0=&#34;laggproto failover laggport bge0 laggport wlan0 DHCP&#34;</pre></div></div></div></div></div></div></div><div class=sect1><h2 id=network-diskless>32.7. Дискгүй ажиллагаа<a class=anchor href=#network-diskless></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD машин сүлжээгээр ачаалан локал дискгүйгээр NFS сервер дээр холбогдсон файлын системүүд ашиглаад ажиллаж чаддаг. Стандарт тохиргооны файлуудаас өөр системийн өөрчлөлт шаардлагагүй. Ийм системийг харьцангуй хялбараар тохируулж болдог. Учир нь шаардлагатай бүх элементүүд бэлэн байдаг:</p></div><div class=ulist><ul><li><p>Цөмийг сүлжээгээр ачаалах хоёр боломжит арга хамгийн багаар бодоход байдаг:</p><div class=ulist><ul><li><p>PXE: Intel®-ийн Preboot eXecution Environment буюу ачаалалт хийгдэхээс өмнөх ажиллуулах орчны систем нь зарим сүлжээний картууд эсвэл эх хавтангуудад цуг бүтээгдсэн байдаг ухаалаг ачаалах ROM-ийн нэг хэлбэр юм. Илүү дэлгэрэнгүйг <a href="https://man.freebsd.org/cgi/man.cgi?query=pxeboot&amp;sektion=8&amp;format=html">pxeboot(8)</a>-с үзнэ үү.</p></li><li><p>Etherboot порт (<a class=package href=https://cgit.freebsd.org/ports/tree/net/etherboot/>net/etherboot</a>) нь цөмийг сүлжээгээр ачаалах ROM хийгдэх боломжтой код үүсгэдэг. Код нь сүлжээний картан дээр ачаалах ROM уруу шарагдсан байх юм уу эсвэл локал уян (эсвэл хатуу) дискний хөтчөөс эсвэл ажиллаж байгаа MS-DOS® системээс дуудагдахаар байдаг. Олон сүлжээний карт дэмжигдсэн байгаа.</p></li></ul></div></li><li><p>Жишээ скрипт (<span class=filename>/usr/shared/examples/diskless/clone_root</span>) нь сервер дээр ажлын станцын root файлын системийг үүсгэх болон түүний ажиллагааг хангах үйлдлийг хөнгөвчилдөг. Скрипт нь магадгүй жижиг өөрчлөлтийг шаардаж болох боловч энэ нь таныг хурдан эхлүүлэх болно.</p></li><li><p>Дискгүй системийн эхлүүлэлтийг илрүүлж дэмжих стандарт системийн эхлүүлэгч файлууд <span class=filename>/etc</span> санд байдаг.</p></li><li><p>swap хийх хэрэв шаардлагатай бол NFS файл эсвэл локал диск уруу хийж болох юм.</p></li></ul></div><div class=paragraph><p>Дискгүй ажлын станцуудыг тохируулах олон арга байдаг. Олон элементүүд үүнд хамрагддаг бөгөөд өөрийн сонирхлоор ихэнхийг нь өөрчилж болно. Дараах нь бүрэн системийг тохируулах талаар хувилбаруудыг тайлбарлах болно. Ингэхдээ стандарт FreeBSD эхлүүлэх скриптүүдтэй хялбар, нийцтэй байхыг чухалчлах болно. Тайлбарласан систем нь дараах шинжүүдтэй байна:</p></div><div class=ulist><ul><li><p>Дискгүй ажлын станцууд нь хуваалцсан, зөвхөн уншигдах <span class=filename>/</span> файлын систем болон хуваалцсан, зөвхөн уншигдах <span class=filename>/usr</span>-г ашигладаг.</p><div class=paragraph><p>root файлын систем нь зөвхөн дискгүй ажиллагаатай холбоотой эсвэл тэдгээрийн харьяалагдах ажлын станцтай холбоотой зарим тохиргооны файлууд нь өөрчлөгдсөн стандарт FreeBSD root-ийн (ихэвчлэн серверийн) хуулбар юм.</p></div><div class=paragraph><p>Бичигдэх боломжтой байх root-ийн хэсэг нь <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> файлын системээр дээр тавигддаг (overlaid). Систем дахин ачаалахад хийгдсэн өөрчлөлтүүд алга болох болно.</p></div></li><li><p>Цөм дамжуулагдаж Etherboot эсвэл PXE-ийн аль нэгээр дуудагддаг бөгөөд зарим тохиолдолд зөвхөн аль нэг аргыг ашиглахыг шаардаж болох юм.</p></li></ul></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content><div class=paragraph><p>Тайлбарласны дагуу энэ систем нь аюултай юм. Энэ нь сүлжээний хамгаалагдсан талбарт байх ёстой бөгөөд бусад хостуудаас хандахааргүй байх ёстой.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Энэ хэсгийн бүх мэдээллийг FreeBSD 5.2.1-RELEASE ашиглан тест хийсэн болно.</p></div><div class=sect2><h3 id=_үндсэн_мэдээлэл>32.7.1. Үндсэн мэдээлэл<a class=anchor href=#_үндсэн_мэдээлэл></a></h3><div class=paragraph><p>Дискгүй ажлын станцуудыг тохируулах нь харьцангуй амархан боловч алдаанд өртөх хандлагатай байдаг. Хэд хэдэн шалтгаанаас болоод эдгээрийг заримдаа оношлох төвөгтэй байдаг. Жишээ нь:</p></div><div class=ulist><ul><li><p>Эмхэтгэлтийн үеийн тохируулгууд нь ажиллах үед өөрөөр ажиллахыг тодорхойлж болох юм.</p></li><li><p>Алдааны мэдэгдлүүд нь ихэвчлэн нуугдмал эсвэл бүр байхгүй ч байж болно.</p></li></ul></div><div class=paragraph><p>Энд гарч болзошгүй асуудлуудыг шийдэхэд үндсэн арга замуудын зарим нэг мэдлэгийг ашиглах нь маш ашигтай байдаг.</p></div><div class=paragraph><p>Амжилттайгаар эхлүүлэхийн тулд хэд хэдэн үйлдлүүдийг хийх хэрэгтэй:</p></div><div class=ulist><ul><li><p>Машин өөрийн IP хаяг, ажиллах файлын нэр, серверийн нэр, root зам зэрэг эхний параметрүүдийг авах хэрэгтэй. Үүнийг DHCP эсвэл BOOTP протоколуудыг ашиглан хийдэг. DHCP нь BOOTP-ийн нийцтэй өргөтгөл бөгөөд адил портын дугаарууд болон үндсэн пакетийн хэлбэршүүлэлтийг ашигладаг.</p><div class=paragraph><p>Зөвхөн BOOTP ашиглахаар системийг тохируулах боломжтой. <a href="https://man.freebsd.org/cgi/man.cgi?query=bootpd&amp;sektion=8&amp;format=html">bootpd(8)</a> серверийн програм нь үндсэн FreeBSD системд орсон байдаг.</p></div><div class=paragraph><p>Гэхдээ DHCP нь BOOTP-ээс хэд хэдэн давуу талтай байдаг (илүү сайхан тохиргооны файлууд, PXE ашиглах боломж, дискгүй ажиллагаатай шууд холбоогүй бусад олон давуу талууд) бөгөөд бид голчлон DHCP тохиргоог боломжтой бол <a href="https://man.freebsd.org/cgi/man.cgi?query=bootpd&amp;sektion=8&amp;format=html">bootpd(8)</a> ашиглан таарах жишээнүүдтэй нь хамт тайлбарлах болно. Жишээ тохиргоо нь ISC DHCP програм хангамжийн багцыг (тест сервер дээр 3.0.1.r12 хувилбар суулгагдсан) ашиглах болно.</p></div></li><li><p>Машин нь нэг буюу хэд хэдэн програмуудыг локал санах ой уруугаа дамжуулах хэрэгтэй болно. TFTP юм уу эсвэл NFS ашиглагдана. TFTP болон NFS-ийн сонголтыг хэд хэдэн газар эмхэтгэх үеийн тохируулгаар хийдэг. Алдааны түгээмэл эх үүсвэр нь буруу протоколд зориулж файлын нэрүүдийг заах явдал юм: TFTP нь сервер дээрх ганц сангаас бүх файлуудыг ихэвчлэн дамжуулдаг бөгөөд энэ сантай харьцангуй файлын нэрсийг хүлээдэг. NFS-д файлын туйлын (абсолют) замууд хэрэгтэй байдаг.</p></li><li><p>Боломжит дундын эхлүүлэх програмууд болон цөм нь эхлэн тохируулагдаж ажиллах шаардлагатай. Энд хэд хэдэн чухал хувилбарууд байдаг:</p><div class=ulist><ul><li><p>PXE нь FreeBSD-ийн гурав дахь шатны дуудагчийн өөрчлөгдсөн хувилбар болох <a href="https://man.freebsd.org/cgi/man.cgi?query=pxeboot&amp;sektion=8&amp;format=html">pxeboot(8)</a>-ийг ачаална. <a href="https://man.freebsd.org/cgi/man.cgi?query=pxeboot&amp;sektion=8&amp;format=html">pxeboot(8)</a> нь системийг эхлүүлэхэд шаардлагатай ихэнх параметрүүдийг авч хяналтыг дамжуулахаасаа өмнө тэдгээрийг цөмийн орчинд үлдээх болно. Энэ тохиолдолд <span class=filename>GENERIC</span> цөмийг ашиглах боломжтой.</p></li><li><p>Etherboot нь бага бэлтгэлтэйгээр цөмийг шууд ачаалах болно. Та цөмийг тусгай тохируулгуудтай бүтээх хэрэгтэй болно.</p><div class=paragraph><p>PXE болон Etherboot нь адилхан ажиллана; гэхдээ цөмүүд нь <a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a>-ийн тэдэнд зориулж илүү ажил хийх боломжийг олгодог болохоор PXE нь зохимжтой арга юм.</p></div><div class=paragraph><p>Хэрэв таны BIOS болон сүлжээний картууд нь PXE-г дэмждэг бол та үүнийг ашиглах хэрэгтэй байж болох юм.</p></div></li></ul></div></li><li><p>Эцэст нь машин өөрийн файлын системүүдэд хандах хэрэгтэй болно. NFS нь бүх тохиолдолд хэрэглэгдэнэ.</p></li></ul></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=diskless&amp;sektion=8&amp;format=html">diskless(8)</a> гарын авлагын хуудсыг бас үзнэ үү.</p></div></div><div class=sect2><h3 id=_тохируулах_зааврууд>32.7.2. Тохируулах зааврууд<a class=anchor href=#_тохируулах_зааврууд></a></h3><div class=sect3><h4 id=_isc_dhcp_ашиглах_тохиргоо>32.7.2.1. ISC DHCP ашиглах тохиргоо<a class=anchor href=#_isc_dhcp_ашиглах_тохиргоо></a></h4><div class=paragraph><p>ISC DHCP сервер BOOTP болон DHCP хүсэлтүүдэд хариулж чаддаг.</p></div><div class=paragraph><p>ISC DHCP 4.2 нь үндсэн системийн хэсэг биш юм. Та эхлээд <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp42-server/>net/isc-dhcp42-server</a> порт юм уу эсвэл тохирох багцыг суулгах хэрэгтэй.</p></div><div class=paragraph><p>ISC DHCP суулгагдсаны дараа ажиллахын тулд тохиргооны файл хэрэгтэй болно (ихэвчлэн <span class=filename>/usr/local/etc/dhcpd.conf</span> гэж нэрлэгддэг). Доор <code>margaux</code> хост Etherboot-ийг ашигласан ба <code>corbieres</code> хост PXE-г ашиглаж байгаа тайлбар хийгдсэн жишээ байна:</p></div><div class="literalblock programlisting"><div class=content><pre>default-lease-time 600;
max-lease-time 7200;
authoritative;

option domain-name &#34;example.com&#34;;
option domain-name-servers 192.168.4.1;
option routers 192.168.4.1;

subnet 192.168.4.0 netmask 255.255.255.0 {
  use-host-decl-names on; <i class=conum data-value=1></i><b>(1)</b>
  option subnet-mask 255.255.255.0;
  option broadcast-address 192.168.4.255;

  host margaux {
    hardware ethernet 01:23:45:67:89:ab;
    fixed-address margaux.example.com;
    next-server 192.168.4.4; <i class=conum data-value=2></i><b>(2)</b>
    filename &#34;/data/misc/kernel.diskless&#34;; <i class=conum data-value=3></i><b>(3)</b>
    option root-path &#34;192.168.4.4:/data/misc/diskless&#34;; <i class=conum data-value=4></i><b>(4)</b>
  }
  host corbieres {
    hardware ethernet 00:02:b3:27:62:df;
    fixed-address corbieres.example.com;
    next-server 192.168.4.4;
    filename &#34;pxeboot&#34;;
    option root-path &#34;192.168.4.4:/data/misc/diskless&#34;;
  }
}</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Энэ тохируулга нь <code>host</code> зарлалтууд дахь утгыг дискгүй хостын хувьд хостын нэр болгон илгээхийг dhcpd-д хэлнэ. Өөр нэг арга нь <code>option host-name margaux</code> мөрийг <code>host</code> зарлалтуудын дотор нэмэх явдал юм.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td><code>next-server</code> тохируулга нь дуудагч эсвэл цөмийн файлыг дуудахад зориулж TFTP эсвэл NFS серверийг ашиглахыг зааж өгнө (анхдагчаар DHCP сервер байгаа хостыг ашиглана).</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td><code>filename</code> тохируулга нь Etherboot эсвэл PXE-ийн дараагийн ажиллуулах алхамд дуудах файлыг тодорхойлно. Үүнийг ашиглах дамжуулалтын аргын дагуу заасан байх ёстой. Etherboot-ийг NFS эсвэл TFTP ашиглахаар эмхэтгэж болно. FreeBSD порт нь NFS-ийг анхдагчаар тохируулдаг. PXE нь TFTP-г ашигладаг. Энд яагаад харьцангуй файлын нэр хэрэглэгддэгийн учир нь тэр юм (энэ нь TFTP серверийн тохиргооноос хамаарах боловч ерөнхийдөө нэлээн энгийн байх болно). PXE нь цөмийг биш бас <span class=filename>pxeboot</span>-г дууддаг. FreeBSD CD-ROM <span class=filename>/boot</span> сангаас <span class=filename>pxeboot</span>-ийг дуудах зэрэг бусад сонирхолтой боломжууд байдаг (<a href="https://man.freebsd.org/cgi/man.cgi?query=pxeboot&amp;sektion=8&amp;format=html">pxeboot(8)</a> нь <span class=filename>GENERIC</span> цөмийг ачаалж чаддаг бөгөөд энэ нь алсын CD-ROM-с ачаалахын тулд PXE-г ашиглах боломжтой болгодог юм).</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td><code>root-path</code> тохируулга нь root файлын систем хүрэх замыг энгийн NFS бичлэгээр тодорхойлдог. PXE ашиглаж байгаа үед цөмийн тохиргоо BOOTP-г идэвхжүүлээгүй байхад хостын IP-г орхигдуулах боломжтой байдаг. NFS сервер дараа нь TFTP сервертэй адил болох болно.</td></tr></tbody></table></div></div><div class=sect3><h4 id=_bootp_ашиглах_тохиргоо>32.7.2.2. BOOTP ашиглах тохиргоо<a class=anchor href=#_bootp_ашиглах_тохиргоо></a></h4><div class=paragraph><p>Энд bootpd-ийн адил тохиргоо (нэг клиент болгож багасгасан) байна. Үүнийг <span class=filename>/etc/bootptab</span> файлаас олж болно.</p></div><div class=paragraph><p>BOOTP-г ашиглахын тулд Etherboot-ийг анхдагч биш тохируулга <code>NO_DHCP_SUPPORT</code>-тойгоор эмхэтгэх ёстой бөгөөд PXE-д DHCP <em>хэрэгтэй</em> гэдгийг санаарай. bootpd-ийн цорын ганц илэрхий давуу тал бол үндсэн системд орсон байдаг явдал юм.</p></div><div class="literalblock programlisting"><div class=content><pre>.def100:\
  :hn:ht=1:sa=192.168.4.4:vm=rfc1048:\
  :sm=255.255.255.0:\
  :ds=192.168.4.1:\
  :gw=192.168.4.1:\
  :hd=&#34;/tftpboot&#34;:\
  :bf=&#34;/kernel.diskless&#34;:\
  :rp=&#34;192.168.4.4:/data/misc/diskless&#34;:

margaux:ha=0123456789ab:tc=.def100</pre></div></div></div><div class=sect3><h4 id=_ачаалах_програмыг_etherboot_ээр_бэлдэх>32.7.2.3. Ачаалах програмыг Etherboot-ээр бэлдэх<a class=anchor href=#_ачаалах_програмыг_etherboot_ээр_бэлдэх></a></h4><div class=paragraph><p><a href=http://etherboot.sourceforge.net>Etherboot-ийн вэб сайт</a> нь Линукс системд голчлон зориулагдсан боловч ашигтай мэдээлэл агуулсан <a href=http://etherboot.sourceforge.net/doc/html/userman/t1.html>өргөтгөсөн баримт</a>ыг агуулдаг. Дараах нь FreeBSD систем дээр Etherboot-г хэрхэн ашиглах талаар тайлбарлах болно.</p></div><div class=paragraph><p>Та эхлээд <a class=package href=https://cgit.freebsd.org/ports/tree/net/etherboot/>net/etherboot</a> багц юм уу эсвэл портыг суулгах ёстой.</p></div><div class=paragraph><p>Etherboot-ийн тохиргоог Etherboot-ийн эх байгаа сан дахь <span class=filename>Config</span> файлыг засварлаж (өөрөөр хэлбэл NFS-ийн оронд TFTP-г ашиглахын тулд) өөрчилж болно.</p></div><div class=paragraph><p>Бидний тохиргооны хувьд бид ачаалах уян дискийг ашиглах болно. Бусад аргуудын хувьд (PROM, эсвэл MS-DOS® програм) Etherboot-ийн баримтаас лавлана уу.</p></div><div class=paragraph><p>Ачаалах уян дискийг хийхийн тулд Etherboot суулгасан машин дээрх хөтөч уруугаа уян дискээ хийгээд Etherboot мод дахь <span class=filename>src</span> сан уруу болгож одоогийн сангаа солиод доор дурдсан тушаалыг бичнэ:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gmake bin32/devicetype.fd0</span></code></pre></div></div><div class=paragraph><p><em>devicetype</em> нь дискгүй ажлын станц дахь Ethernet картын төрлөөс хамаарна. Зөв <em>devicetype</em> буюу төхөөрөмжийн төрлийг тодорхойлохын тулд тэр сан дахь <span class=filename>NIC</span> файлд хандана.</p></div></div><div class=sect3><h4 id=_pxe_ээр_ачаалах>32.7.2.4. PXE-ээр ачаалах<a class=anchor href=#_pxe_ээр_ачаалах></a></h4><div class=paragraph><p>Анхдагчаар <a href="https://man.freebsd.org/cgi/man.cgi?query=pxeboot&amp;sektion=8&amp;format=html">pxeboot(8)</a> дуудагч нь NFS-ээр цөмийг дууддаг. <span class=filename>/etc/make.conf</span> файлд <code>LOADER_TFTP_SUPPORT</code> тохируулга заахын оронд TFTP-г ашиглахаар эмхэтгэгдэж болно. Заавруудын талаар <span class=filename>/usr/shared/examples/etc/make.conf</span> файл дахь тайлбаруудыг үзнэ үү.</p></div><div class=paragraph><p>Цуваа консол дискгүй машин тохируулахад ашигтай байж болох <span class=filename>make.conf</span> файлын өөр хоёр тохируулга байдаг: эдгээр нь <code>BOOT_PXELDR_PROBE_KEYBOARD</code>, болон <code>BOOT_PXELDR_ALWAYS_SERIAL</code> юм.</p></div><div class=paragraph><p>Машин эхлэхэд PXE-г ашиглахын тулд та өөрийн BIOS-ийн тохируулгаас <code>Boot from network</code> буюу <code>Сүлжээнээс ачаалах</code> сонголтыг сонгох юм уу эсвэл PC-г эхлүүлж байх үед функцийн товчлуурыг дарах хэрэгтэй.</p></div></div><div class=sect3><h4 id=_tftp_болон_nfs_серверүүдийг_тохируулах>32.7.2.5. TFTP болон NFS серверүүдийг тохируулах<a class=anchor href=#_tftp_болон_nfs_серверүүдийг_тохируулах></a></h4><div class=paragraph><p>Хэрэв та TFTP ашиглахаар тохируулсан PXE юм уу эсвэл Etherboot-г ашиглаж байгаа бол файл сервер дээрээ tftpd-г идэвхжүүлэх хэрэгтэй:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>tftpd-д зориулж файлууд байх сан үүсгэнэ, өөрөөр хэлбэл <span class=filename>/tftpboot</span>.</p></li><li><p>Энэ мөрийг өөрийн <span class=filename>/etc/inetd.conf</span> файлд нэмнэ:</p><div class="literalblock programlisting"><div class=content><pre>tftp	dgram	udp	wait	root	/usr/libexec/tftpd	tftpd -l -s /tftpboot</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Зарим нэгэн PXE хувилбарууд нь TFTP-ийн TCP хувилбарыг хүсдэг байна. Энэ тохиолдолд <code>dgram udp</code> мөрийг <code>stream tcp</code> болгон сольж хоёр дахь мөрийг нэмнэ.</p></div></td></tr></tbody></table></div></li><li><p>inetd-д өөрийн тохиргооны файлаа дахин уншихыг хэлээрэй. Энэ тушаалыг зөв ажиллуулахын тулд <span class=filename>/etc/rc.conf</span> файлд <code>inetd_enable="YES"</code> тохируулга заагдсан байх ёстой:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service inetd restart</span></code></pre></div></div></li></ol></div></div></div><div class=paragraph><p>Та <span class=filename>tftpboot</span> санг серверийнхээ хаана ч байрлуулж болно. <span class=filename>inetd.conf</span> болон <span class=filename>dhcpd.conf</span> файлууд дээрээ байрлалаа заасан эсэхээ шалгаарай.</p></div><div class=paragraph><p>Аль ч тохиолдолд та бас NFS-ээ идэвхжүүлж NFS сервер дээрээ тохирох файлын системээ экспорт хийх хэрэгтэй юм.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Үүнийг <span class=filename>/etc/rc.conf</span>-д нэмнэ:</p><div class="literalblock programlisting"><div class=content><pre>nfs_server_enable=&#34;YES&#34;</pre></div></div></li><li><p>Доор дурдсаныг <span class=filename>/etc/exports</span> файл уруу нэмж дискгүй root сан байгаа файлын системээ экспорт хийнэ (эзлэхүүний холбох цэгийг тааруулж <em>margaux corbieres</em> гэснийг дискгүй ажлын станцуудын нэрсээр солих хэрэгтэй):</p><div class="literalblock programlisting"><div class=content><pre>/data/misc -alldirs -ro margaux corbieres</pre></div></div></li><li><p>mountd-д өөрийн тохиргооны файлаа дахин уншихыг хэлнэ. Хэрэв та эхний шатандаа NFS-г <span class=filename>/etc/rc.conf</span> файлд идэвхжүүлэх хэрэгтэй болсон бол харин дахин ачаалахыг хүсэж болох юм.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service mountd restart</span></code></pre></div></div></li></ol></div></div></div></div><div class=sect3><h4 id=_дискгүй_цөмийг_бүтээх>32.7.2.6. Дискгүй цөмийг бүтээх<a class=anchor href=#_дискгүй_цөмийг_бүтээх></a></h4><div class=paragraph><p>Хэрэв Etherboot-г ашиглаж байгаа бол дискгүй клиентдээ зориулж дараах тохируулгуудтайгаар (ердийн тохируулгуудын хамтаар) цөмийн тохиргооны файл үүсгэх хэрэгтэй:</p></div><div class="literalblock programlisting"><div class=content><pre>options     BOOTP          # Use BOOTP to obtain IP address/hostname
options     BOOTP_NFSROOT  # NFS mount root file system using BOOTP info</pre></div></div><div class=paragraph><p>Та бас <code>BOOTP_NFSV3</code>, <code>BOOT_COMPAT</code> болон <code>BOOTP_WIRED_TO</code> (<span class=filename>NOTES</span> файлаас лавлана уу) тохируулгуудыг ашиглахыг хүсэж болох юм.</p></div><div class=paragraph><p>Эдгээр тохируулгуудын нэрс нь уламжлалт бөгөөд тэдгээр нь яг үнэндээ DHCP болон BOOTP-ийн өөр хэрэглээг цөм дотор идэвхжүүлдэг болохоор нэлээн төөрөгдөлд хүргэж болох юм (зөвхөн BOOTP эсвэл DHCP-ийн хэрэглээг ашиглахаар болгох бас боломжтой байдаг).</p></div><div class=paragraph><p>Цөмийг бүтээж (<a href=../kernelconfig/#kernelconfig>FreeBSD цөмийг тохируулах нь</a>-г үзнэ үү), <span class=filename>dhcpd.conf</span> файлд заасан байрлал уруу хуулах хэрэгтэй.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>PXE-г ашиглаж байгаа үед дээрх тохируулгуудтайгаар цөмийг бүтээх нь заавал шаардлагагүй (хэдийгээр зөвлөдөг боловч). Тэдгээрийг идэвхжүүлэх нь цөмийг эхлүүлэх явцад илүү олон DHCP хүсэлтүүдийг үүсгэж шинэ утгууд болон зарим тусгай тохиолдлуудад <a href="https://man.freebsd.org/cgi/man.cgi?query=pxeboot&amp;sektion=8&amp;format=html">pxeboot(8)</a>-ийн авсан утгуудын хооронд нийцэмжгүй байдлын жижиг эрсдэл гаргахад хүргэдэг. Тэдгээрийг ашиглахын давуу тал нь буруу нөлөөллөөс болоод хостын нэр тохируулагддаг явдал юм. Үгүй бол та хостын нэрийг өөр аргаар, жишээ нь клиентэд тусгайлан зориулсан <span class=filename>rc.conf</span> файлд тохируулах хэрэгтэй болно.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Etherboot-ээр дуудагдах боломжтой байхын тулд цөмд төхөөрөмжийн бяцхан зааврууд эмхэтгэгдсэн байх хэрэгтэй байдаг. Ингэхдээ та дараах тохируулгыг тохиргооны файлдаа тохируулах болно (<span class=filename>NOTES</span> тохиргооны тайлбаруудын файлыг үзнэ үү):</p></div><div class="literalblock programlisting"><div class=content><pre>hints		&#34;GENERIC.hints&#34;</pre></div></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_root_файлын_системийг_бэлдэх>32.7.2.7. Root файлын системийг бэлдэх<a class=anchor href=#_root_файлын_системийг_бэлдэх></a></h4><div class=paragraph><p>Дискгүй ажлын станцад зориулж <span class=filename>dhcpd.conf</span> файлд <code>root-path</code> гэж жагсаагдсан байрлалд root файлын системийг та үүсгэх хэрэгтэй.</p></div><div class=sect4><h5 id=_root_ийг_суурьшуулахын_тулд_make_world_тушаал_ашиглах>32.7.2.7.1. root-ийг суурьшуулахын тулд <code>make world</code> тушаал ашиглах<a class=anchor href=#_root_ийг_суурьшуулахын_тулд_make_world_тушаал_ашиглах></a></h5><div class=paragraph><p>Энэ арга нь хурдан байх бөгөөд бүрэн онгон системийг (зөвхөн root файлын систем биш) <code>DESTDIR</code> уруу суулгах болно. Та дараах скриптийг л ердөө ажиллуулах хэрэгтэй болно:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
export DESTDIR=/data/misc/diskless
mkdir -p ${DESTDIR}
cd /usr/src; make buildworld &amp;&amp; make buildkernel
make installworld &amp;&amp; make installkernel
cd /usr/src/etc; make distribution</pre></div></div><div class=paragraph><p>Үүнийг хийсний дараа танд өөрийнхөө хэрэгцээний дагуу <code>DESTDIR</code>-д байрлуулагдсан өөрийн <span class=filename>/etc/rc.conf</span> болон <span class=filename>/etc/fstab</span> файлуудаа өөрчлөн тохируулах шаардлага гарч болох юм.</p></div></div></div><div class=sect3><h4 id=_swap_ийг_тохируулах>32.7.2.8. Swap-ийг тохируулах<a class=anchor href=#_swap_ийг_тохируулах></a></h4><div class=paragraph><p>Шаардлагатай бол сервер дээр байрласан swap файлд NFS-ээр хандаж болно.</p></div><div class=sect4><h5 id=_nfs_swap>32.7.2.8.1. NFS Swap<a class=anchor href=#_nfs_swap></a></h5><div class=paragraph><p>Цөм нь ачаалах үед NFS swap-ийг идэвхжүүлэхийг дэмждэггүй. Бичигдэх файлын системийг холбож swap файлыг үүсгэн идэвхжүүлэх замаар эхлүүлэх скриптүүдээр swap нь идэвхжүүлэгдэх ёстой. Зохих хэмжээ бүхий swap файлыг үүсгэхдээ та ингэж хийж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/path/to/swapfile bs=1k count=1 oseek=100000</span></code></pre></div></div><div class=paragraph><p>Үүнийг идэвхжүүлэхийн тулд та дараах мөрийг өөрийн <span class=filename>rc.conf</span> файлд нэмэх хэрэгтэй:</p></div><div class="literalblock programlisting"><div class=content><pre>swapfile=/path/to/swapfile</pre></div></div></div></div><div class=sect3><h4 id=_бусад_асуудлууд>32.7.2.9. Бусад асуудлууд<a class=anchor href=#_бусад_асуудлууд></a></h4><div class=sect4><h5 id=_зөвхөн_уншигдах_usr_сантайгаар_ажиллах>32.7.2.9.1. Зөвхөн уншигдах <span class=filename>/usr</span> сантайгаар ажиллах<a class=anchor href=#_зөвхөн_уншигдах_usr_сантайгаар_ажиллах></a></h5><div class=paragraph><p>Хэрэв дискгүй ажлын станц нь X-ийг ажиллуулахаар тохируулагдсан бол анхдагчаар <span class=filename>/usr</span>-т алдааны бүртгэлийг хийдэг XDM тохиргооны файлыг та тааруулах хэрэгтэй болно.</p></div></div><div class=sect4><h5 id=_freebsd_биш_сервер_ашиглах>32.7.2.9.2. FreeBSD биш сервер ашиглах<a class=anchor href=#_freebsd_биш_сервер_ашиглах></a></h5><div class=paragraph><p>root файлын системд зориулсан сервер нь FreeBSD-г ажиллуулаагүй бол та FreeBSD машин дээр root файлын систем үүсгээд хэрэгтэй байрлал уруу нь <code>tar</code> эсвэл <code>cpio</code> тушаал ашиглан хуулах хэрэгтэй болно.</p></div><div class=paragraph><p>Энэ тохиолдолд бүхэл тооны их/бага (major/minor) хэмжээнүүдийн ялгаанаас болоод <span class=filename>/dev</span> дахь тусгай файлуудад заримдаа асуудал гардаг. Энэ асуудлын шийдэл нь FreeBSD биш серверээс уг санг экспорт хийж энэ сангаа FreeBSD машин дээр холбон хэрэглэгчийн хувьд төхөөрөмжийн цэгүүдийг харагдахгүйгээр (transparently) хуваарилахын тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a>-ийг ашиглах явдал юм.</p></div></div></div></div></div></div><div class=sect1><h2 id=network-pxe-nfs>32.8. NFS root файлын систем ашиглан PXE ачаалалт хийх<a class=anchor href=#network-pxe-nfs></a></h2><div class=sectionbody><div class=paragraph><p>Intel®-н Preboot eXecution Environment (PXE) буюу Ачаалалтаас өмнө ажиллуулах орчин нь үйлдлийн системийг сүлжээгээр ачаалах боломжийг олгодог. PXE дэмжлэг орчин үеийн эх хавтангуудын BIOS дээр ихэвчлэн хийгдсэн байдаг бөгөөд BIOS тохиргоонуудад үүнийг идэвхжүүлэн сүлжээгээр ачаалах боломжтой болгодог. Бүрэн хэмжээгээр ажиллах PXE тохиргоотой байхын тулд зөв тохируулсан DHCP болон TFTP сервертэй байхыг шаарддаг.</p></div><div class=paragraph><p>Хост компьютер ачаалахдаа DHCP-с TFTP ашиглан эхний ачаалагч дуудагчийг хаанаас авч болох мэдээллийг авдаг. Энэ мэдээллийг хост компьютер хүлээж авсныхаа дараа ачаалагч дуудагчийг TFTP-р татаж аван ажиллуулдаг. Үүнийг <a href=http://download.intel.com/design/archives/wfm/downloads/pxespec.pdf>Preboot Execution Environment (PXE)-ийн тодорхойлолт</a> хаягийн 2.2.1 хэсэг бичсэн байгаа. FreeBSD дээр PXE процессын явцад хүлээн авсан ачаалагч дуудагч нь <span class=filename>/boot/pxeboot</span> байна. <span class=filename>/boot/pxeboot</span> ажилласны дараа FreeBSD-н цөм дуудагддаг бөгөөд FreeBSD-н бусад ачаалалт хийгддэг. FreeBSD-н ачаалах процессын талаар дэлгэрэнгүйг <a href=../boot/#boot>FreeBSD-ийн Ачаалах процесс</a> хэсгээс үзнэ үү.</p></div><div class=sect2><h3 id=_nfs_root_файлын_системд_зориулж_chroot_орчин_тохируулах>32.8.1. NFS root файлын системд зориулж <code>chroot</code> орчин тохируулах<a class=anchor href=#_nfs_root_файлын_системд_зориулж_chroot_орчин_тохируулах></a></h3><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>FreeBSD суулгац байх NFS-р холбож болох санг сонгоно. Жишээ нь <span class=filename>/b/tftpboot/FreeBSD/install</span> гэх мэт санг ашиглаж болно.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># export NFSROOTDIR=/b/tftpboot/FreeBSD/install</span>
<span class=c># mkdir -p ${NFSROOTDIR}</span></code></pre></div></div></li><li><p><a href=../network-servers/#network-configuring-nfs>NFS-н тохиргоог хийх</a> хэсэг дэх зааврыг даган NFS серверийг идэвхжүүлнэ.</p></li><li><p>Дараахийг <span class=filename>/etc/exports</span> файлд нэмэн NFS-р санг экспорт хийнэ:</p><div class="literalblock programlisting"><div class=content><pre>/b -ro -alldirs</pre></div></div></li><li><p>NFS серверийг дахин асаана:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service nfsd restart</span></code></pre></div></div></li><li><p><a href=../network-servers/#network-inetd-settings>Тохиргоо</a> хэсэгт заасан алхмуудын дагуу <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>-г идэвхжүүлнэ.</p></li><li><p><span class=filename>/etc/inetd.conf</span>-д дараах мөрийг нэмнэ:</p><div class="literalblock programlisting"><div class=content><pre>tftp dgram udp wait root /usr/libexec/tftpd tftpd -l -s /b/tftpboot</pre></div></div></li><li><p>inetd-г дахин асаана:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service inetd restart</span></code></pre></div></div></li><li><p><a href=../cutting-edge/#makeworld>FreeBSD-н цөм болон хэрэглэгчийн талбарыг дахин бүтээнэ</a>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make buildworld</span>
<span class=c># make buildkernel</span></code></pre></div></div></li><li><p>NFS-р холбогдсон санд FreeBSD-г суулгана:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make installworld DESTDIR=${NFSROOTDIR}</span>
<span class=c># make installkernel DESTDIR=${NFSROOTDIR}</span>
<span class=c># make distribution DESTDIR=${NFSROOTDIR}</span></code></pre></div></div></li><li><p>TFTP ажиллаж байгааг болон PXE-р дамжин ачаалагч дуудагчийг татаж авч байгаа эсэхийг шалгана:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tftp localhost</span>
tftp&gt; get FreeBSD/install/boot/pxeboot
Received 264951 bytes <span class=k>in </span>0.1 seconds</code></pre></div></div></li><li><p><span class=filename>${NFSROOTDIR}/etc/fstab</span>-г засварлан root файлын системийг NFS-р холбох мөрийг үүсгэнэ:</p><div class="literalblock programlisting"><div class=content><pre># Device                                         Mountpoint    FSType   Options  Dump Pass
myhost.example.com:/b/tftpboot/FreeBSD/install       /         nfs      ro        0    0</pre></div></div><div class=paragraph><p><em>myhost.example.com</em> гэдгийг таны өөрийн NFS серверийн IP хаяг эсвэл хостын нэрээр солих хэрэгтэй. Энэ жишээн дээр NFS хэрэглэгчид root файлын системийн агуулгыг устгачих магадлалаас хамгаалж root файлын системийг "зөвхөн унших" эрхээр холбосон байгаа.</p></div></li><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> орчинд root нууц үгийг тохируулна.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chroot ${NFSROOTDIR}</span>
<span class=c># passwd</span></code></pre></div></div><div class=paragraph><p>Энэ нь PXE-р ачаалж байгаа хэрэглэгч машинуудад зориулж root нууц үгийг тохируулах болно.</p></div></li><li><p><span class=filename>${NFSROOTDIR}/etc/ssh/sshd_config</span> файлыг засварлан <code>PermitRootLogin</code> гэдгийг идэвхжүүлж PXE-р ачаалж байгаа хэрэглэгч машинуудад зориулж ssh-р дамжин root хэрэглэгч нэвтрэх боломжийг бүрдүүлнэ. Үүнийг <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd_config&amp;sektion=5&amp;format=html">sshd_config(5)</a>-д тайлбарласан байгаа.</p></li><li><p>${NFSROOTDIR} дахь <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> орчинд бусад өөрчлөлтүүдийг хийнэ. Эдгээр өөрчлөлтүүдэд <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> ашиглан багцууд нэмэх, <a href="https://man.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;format=html">vipw(8)</a>, ашиглан нууц үгийн файлыг засварлах, эсвэл автоматаар холбохын тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=amd.conf&amp;sektion=8&amp;format=html">amd.conf(8)</a> харгалзааг засварлах зэрэг орж болно. Жишээ нь:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chroot ${NFSROOTDIR}</span>
<span class=c># pkg_add -r bash</span></code></pre></div></div></li></ol></div></div></div></div><div class=sect2><h3 id=_etcrc_initdiskless_ашигладаг_санах_ойн_файлын_системийг_тохируулах>32.8.2. <span class=filename>/etc/rc.initdiskless</span> ашигладаг Санах Ойн Файлын системийг тохируулах<a class=anchor href=#_etcrc_initdiskless_ашигладаг_санах_ойн_файлын_системийг_тохируулах></a></h3><div class=paragraph><p>Хэрэв та NFS root-с ачаалсан бол <span class=filename>/etc/rc</span> нь NFS-ээр ачаалсныг мэдэж <span class=filename>/etc/rc.initdiskless</span> скриптийг ажиллуулдаг. Юу болж байгааг энэ скрипт доторх тайлбаруудыг уншиж мэдээрэй. Бид <span class=filename>/etc</span> болон <span class=filename>/var</span> гэсэн санах ой дээр тулгуурласан файлын систем үүсгэх хэрэгтэй, учир нь NFS root сан нь зөвхөн уншигдах эрхтэй бөгөөд эдгээр сангууд нь бичигдэх боломжтой байх ёстой.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chroot ${NFSROOTDIR}</span>
<span class=c># mkdir -p conf/base</span>
<span class=c># tar -c -v -f conf/base/etc.cpio.gz --format cpio --gzip etc</span>
<span class=c># tar -c -v -f conf/base/var.cpio.gz --format cpio --gzip var</span></code></pre></div></div><div class=paragraph><p>Систем ачаалахад <span class=filename>/etc</span> болон <span class=filename>/var</span>-д зориулсан санах ойн файлын системүүд үүсч холбогдох бөгөөд <span class=filename>cpio.gz</span> файлуудын агуулга тэдгээр рүү хуулагдах болно.</p></div></div><div class=sect2><h3 id=network-pxe-setting-up-dhcp>32.8.3. DHCP сервер тохируулах<a class=anchor href=#network-pxe-setting-up-dhcp></a></h3><div class=paragraph><p>PXE нь TFTP болон DHCP сервер тохируулсан байхыг шаарддаг. DHCP сервер нь TFTP сервер байгаа машин дээр заавал байх шаардлагагүй бөгөөд таны сүлжээнээс хандаж болох боломжтой байх ёстой.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p><a href=../network-servers/#network-dhcp-server>DHCP Серверийг Суулгах болон Тохируулах</a> заасан зааврын дагуу DHCP серверийг суулгана. <span class=filename>/etc/rc.conf</span> болон <span class=filename>/usr/local/etc/dhcpd.conf</span> файлуудыг зөв тохируулсан эсэхийг шалгаарай.</p></li><li><p><span class=filename>/usr/local/etc/dhcpd.conf</span> файлын <code>next-server</code>, <code>filename</code>, болон <code>option root-path</code> тохиргоонуудад TFTP-н IP хаяг, TFTP дэх <span class=filename>/boot/pxeboot</span> хүрэх зам болон NFS root файлын системийн замыг зааж өгнө. Жишээ <span class=filename>dhcpd.conf</span> файл ийм байна:</p><div class="literalblock programlisting"><div class=content><pre>subnet 192.168.0.0 netmask 255.255.255.0 {
   range 192.168.0.2 192.168.0.3 ;
   option subnet-mask 255.255.255.0 ;
   option routers 192.168.0.1 ;
   option broadcast-address 192.168.0.255 ;
   option domain-name-server 192.168.35.35, 192.168.35.36 ;
   option domain-name &#34;example.com&#34;;

   # IP address of TFTP server
   next-server 192.168.0.1 ;

   # path of boot loader obtained
   # via tftp
   filename &#34;FreeBSD/install/boot/pxeboot&#34; ;

   # pxeboot boot loader will try to NFS mount this directory for root FS
   option root-path &#34;192.168.0.1:/b/tftpboot/FreeBSD/install/&#34; ;

}</pre></div></div></li></ol></div></div></div></div><div class=sect2><h3 id=_pxe_хэрэглэгчийг_тохируулах_ба_холболтын_үеийн_асуудлуудад_дибаг_хийх>32.8.4. PXE хэрэглэгчийг тохируулах ба холболтын үеийн асуудлуудад дибаг хийх<a class=anchor href=#_pxe_хэрэглэгчийг_тохируулах_ба_холболтын_үеийн_асуудлуудад_дибаг_хийх></a></h3><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Хэрэглэгч машин ачаалахдаа BIOS тохиргооны цэс рүү орно. Сүлжээнээс ачаалахыг BIOS-д тохируулна. Хэрэв өмнөх бүх алхмууд зөв бол бүгд "зүгээр л ажиллах ёстой".</p></li><li><p>PXE ачаалах процессын явцад үүсэх сүлжээний урсгалыг дибаг хийхийн тулд <a class=package href=https://cgit.freebsd.org/ports/tree/net/wireshark/>net/wireshark</a>-г ашиглаарай. Үүнийг доорх диаграм дээр дүрсэлсэн байгаа. <a href=#network-pxe-setting-up-dhcp>DHCP сервер тохируулах</a> хэсэгт жишээ тохиргоог харуулсан бөгөөд DHCP, TFTP ба NFS серверүүд нь нэг машин дээр байна. Гэхдээ эдгээр серверүүд нь өөр өөр машин дээр байж болно.</p><div class=imageblock><div class=content><img src=../../../../images/books/handbook/advanced-networking/pxe-nfs.png alt="pxe nfs"></div><div class=title>Зураг 1. NFS root холболт ашиглан PXE ачаалах процесс</div></div></li><li><p><span class=filename>pxeboot</span>-г TFTP-р авч болж байгаа эсэхийг шалгаарай. TFTP сервер дээрээ <span class=filename>/var/log/xferlog</span> файлыг нээж харан <span class=filename>pxeboot</span> файл зөв газраас татагдаж байгаа эсэхийг шалгаарай. Дээрх <span class=filename>dhcpd.conf</span> файлын тохиргоог шалгахын тулд:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tftp 192.168.0.1</span>
tftp&gt; get FreeBSD/install/boot/pxeboot
Received 264951 bytes <span class=k>in </span>0.1 seconds</code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=tftpd&amp;sektion=8&amp;format=html">tftpd(8)</a> ба <a href="https://man.freebsd.org/cgi/man.cgi?query=tftp&amp;sektion=1&amp;format=html">tftp(1)</a> гарын авлагын хуудаснуудыг уншаарай. TFTP-н зарим нэг хязгаарлалтуудыг <code>BUGS</code> хэсэгт тайлбарласан байгаа.</p></div></li><li><p>root файлын системийг NFS-р холбож болж байгаа эсэхийг шалгаарай. Дээрх <span class=filename>dhcpd.conf</span> файлын тохиргоог шалгахын тулд:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t nfs 192.168.0.1:/b/tftpboot/FreeBSD/install /mnt</span></code></pre></div></div></li><li><p><code>boot.nfsroot.server</code> болон <code>boot.nfsroot.path</code> гэх мэт хувьсагчуудыг <span class=filename>pxeboot</span> дуудагч хэрхэн тохируулдагийг <span class=filename>src/sys/boot/i386/libi386/pxe.c</span> файлын кодыг уншиж ойлгоорой. Эдгээр хувьсагчууд дараагаар нь <span class=filename>src/sys/nfsclient/nfs_diskless.c</span> файлын NFS-р дискгүй root холбох кодод ашиглагддаг.</p></li><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=pxeboot&amp;sektion=8&amp;format=html">pxeboot(8)</a> болон <a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a> гарын авлагын хуудаснуудыг уншина уу.</p></li></ol></div></div></div></div></div></div><div class=sect1><h2 id=network-isdn>32.9. ISDN<a class=anchor href=#network-isdn></a></h2><div class=sectionbody><div class=paragraph><p>ISDN технологи болон тоног төхөөрөмжийн тухай мэдээллийн сайн эх үүсвэр нь <a href=http://www.alumni.caltech.edu/~dank/isdn/>Дан Кегелийн ISDN хуудас</a> юм.</p></div><div class=paragraph><p>ISDN-ий тухай хялбар заавруудыг доор дурдав:</p></div><div class=ulist><ul><li><p>Хэрэв та Европд амьдарч байгаа бол ISDN картын хэсгийг та магадгүй шалгахыг хүсэж болох юм.</p></li><li><p>Хэрэв та Интернэт уруу Интернэтийн үйлчилгээ үзүүлэгчтэй dial-up-аар байнгын бишээр холбогдохдоо ISDN-ийг голчлон хэрэглэхээр төлөвлөж байгаа бол та Терминал Хувиргагчдыг үзэж болох юм. Хэрэв та үйлчилгээ үзүүлэгчдээ солих бол энэ нь асуудлууд хамгийн багатайгаар хамгийн уян хатан чанарыг танд өгөх болно.</p></li><li><p>Хэрэв та хоёр LAN-ийг хооронд нь холбож байгаа бол эсвэл Интернэт уруу зориулагдсан ISDN холболтоор холбогдож байгаа бол зориулагдсан чиглүүлэгч/гүүр сонголтыг бодолцож болох юм.</p></li></ul></div><div class=paragraph><p>Аль шийдлийг сонгохыг тодорхойлоход чухал хүчин зүйл нь өртөг юм. Дараах сонголтуудыг хамгийн бага өртөгтэйгөөс нь эхлээд хамгийн их өртөгтэй хүртэл жагсаав.</p></div><div class=sect2><h3 id=network-isdn-cards>32.9.1. ISDN картууд<a class=anchor href=#network-isdn-cards></a></h3><div class=paragraph><p>FreeBSD-ийн ISDN шийдэл нь идэвхгүй картыг ашиглаад зөвхөн DSS1/Q.931 (буюу Euro-ISDN) стандартыг дэмждэг. Firmware нь бас бусад дохионы протоколуудыг дэмждэг зарим идэвхтэй картуудыг дэмждэг; энэ нь бас хамгийн эхэнд дэмжигдсэн Primary Rate (PRI) буюу Анхдагч Хурд бүхий ISDN картыг оруулдаг.</p></div><div class=paragraph><p>isdn4bsd програм хангамж нь бусад ISDN чиглүүлэгчүүдтэй түүхий HDLC дээгүүрх IP юм уу эсвэл синхрон PPP: өөрчлөн засварласан <a href="https://man.freebsd.org/cgi/man.cgi?query=sppp&amp;sektion=4&amp;format=html">sppp(4)</a> драйвер <code>isppp</code>-тэй цөмийн PPP юм уу эсвэл хэрэглэгчийн талбарын <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> ашиглан холбогдох боломжийг олгодог. Хэрэглэгчийн талбарын <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> ашиглан хоёр буюу түүнээс дээш ISDN B-сувгуудын суваг холболтыг (channel bonding) хийх боломжтой байдаг. Утас хариулагч машины хэрэглээ бас байдаг байдаг бөгөөд бас програм хангамжийн 300 baud модем зэрэг олон хэрэгслүүд байдаг.</p></div><div class=paragraph><p>FreeBSD дээр дэмжигдсэн зарим PC ISDN картуудын тоо өсөн нэмэгдэж байгаа бөгөөд энэ нь бүх л Европ болон дэлхийн бусад олон хэсэгт амжилттайгаар ашиглагдаж байгаа мэдээллүүд байдаг.</p></div><div class=paragraph><p>Дэмжигдсэн идэвхгүй (пассив) ISDN картууд нь ихэвчлэн Infineon (хуучин Siemens) ISAC/HSCX/IPAC ISDN бичил схемтэй байдаг, гэхдээ бас Cologne Chip-ийн (зөвхөн ISA шугамд) бичил схемүүдтэй ISDN картууд, Winbond W6692 бичил схемүүдтэй PCI картууд, Tiger300/320/ISAC бичил схемийн хослолуудтой зарим картууд болон AVM Fritz!Card PCI V.1.0 болон AVM Fritz!Card PnP зэрэг зарим нэгэн үйлдвэрлэгчээс хамааралтай бичил схем бүхий картууд ордог.</p></div><div class=paragraph><p>Одоогоор идэвхтэй дэмжигдсэн ISDN картууд нь AVM B1 (ISA болон PCI) BRI картууд болон AVM T1 PCI PRI картууд юм.</p></div><div class=paragraph><p>isdn4bsd-ийн баримтын талаар <a href=http://people.FreeBSD.org/~hm/>isdn4bsd гарын авлага</a> зэрэг илүү баримтыг заасан <a href=http://www.freebsd-support.de/i4b/>isdn4bsd-ийн эх хуудас</a> хаягаас үзээрэй.</p></div><div class=paragraph><p>Хэрэв та өөр ISDN протокол, одоогоор дэмжигдээгүй байгаа ISDN PC картанд зориулж дэмжлэг нэмэх эсвэл isdn4bsd-ийг өргөжүүлэх сонирхолтой байгаа бол Hellmuth Michaelis &lt;<a href=mailto:hm@FreeBSD.org>hm@FreeBSD.org</a>>-тай холбоо барьна уу.</p></div><div class=paragraph><p>isdn4bsd-ийн суулгалт, тохиргоо болон алдааг олж засварлах тухай асуултуудад зориулагдсан <a href=https://lists.FreeBSD.org/subscription/freebsd-isdn>freebsd-isdn</a> захидлын жагсаалт байдаг.</p></div></div><div class=sect2><h3 id=_isdn_терминал_хувиргагчид>32.9.2. ISDN Терминал Хувиргагчид<a class=anchor href=#_isdn_терминал_хувиргагчид></a></h3><div class=paragraph><p>Терминал хувиргагчид (TA) нь модемууд нь ердийн утасны шугамд зориулагдсан байдаг шиг ISDN-ий хувьд зориулагдсан байдаг.</p></div><div class=paragraph><p>Ихэнх TA нь стандарт Hayes модемийн AT тушаалын олонлогийг ашигладаг бөгөөд модемийг шууд солих зориулалтаар ашиглаж болно.</p></div><div class=paragraph><p>TA нь ерөнхийдөө модемтой адил ажилладаг. Ялгаатай тал нь холболт болон дамжуулах хурдны хувьд таны хуучин модемоос хамаагүй хурдан байдаг явдал юм. Та модемийн тохиргоотой яг адил <a href=../ppp-and-slip/#ppp>PPP</a>-г тохируулах хэрэгтэй болно. Цуваа хурдыг хамгийн өндрөөр аль болох тавьсан эсэхээ шалгаарай.</p></div><div class=paragraph><p>TA-г ашиглахын гол давуу тал нь динамик PPP-ээр хийж болдогтой адил Интернэтийн үйлчилгээ үзүүлэгчтэй холбогдох явдал юм. IP хаягийн хэмжээ өдөр ирэх тутам багасаж байгаа өнөө үед ихэнх үйлчилгээ үзүүлэгчид танд статик IP өгөх хүсэлгүй байдаг. Ихэнх зориулагдсан чиглүүлэгчид динамик IP хуваарилалттай зохицож чаддаггүй.</p></div><div class=paragraph><p>TA-уудын боломжууд болон холболтын тогтвортой байдалд зориулан таны ажиллуулж байдаг PPP дэмонд TA-ууд нь бүрэн найддаг. Хэрэв та PPP-г аль хэдийн тохируулсан бол энэ нь FreeBSD машин дээр модемийг ашиглаж байгаад ISDN уруу хялбараар сайжруулах боломжийг олгодог. Гэхдээ танд тулгарсан PPP програм дээр байсан асуудлууд бас хэвээр үлдэх болно.</p></div><div class=paragraph><p>Хэрэв та максимум тогтвортой байдлыг хүсэж байгаа бол <a href=../ppp-and-slip/#userppp>хэрэглэгчийн талбарын PPP</a> биш цөмийн <a href=../ppp-and-slip/#ppp>PPP</a> тохируулгыг ашиглаарай.</p></div><div class=paragraph><p>Дараах TA-ууд нь FreeBSD-тэй ажилладаг:</p></div><div class=ulist><ul><li><p>Motorola BitSurfer болон Bitsurfer Pro</p></li><li><p>Adtran</p></li></ul></div><div class=paragraph><p>Ихэнх бусад TA-ууд нь магадгүй бас ажиллах байх. TA үйлдвэрлэгчид нь өөрсдийнхөө бүтээгдэхүүнийг стандарт модемийн AT тушаалын олонлогийн ихэнхийг хүлээн авч чаддагаар хийхийг оролддог.</p></div><div class=paragraph><p>Гадаад TA-ийн жинхэнэ асуудал нь модемуудын адил таны компьютер дээр сайн цуваа карт хэрэгтэй явдал юм.</p></div><div class=paragraph><p>Та цуваа төхөөрөмжүүдийн тухай дэлгэрэнгүй ойлголт болон асинхрон ба синхрон цуваа портуудын ялгаануудын талаар <a href=https://docs.freebsd.org/en/articles/serial-uart/>FreeBSD Цуваа Тоног Төхөөрөмж</a>ийн заавраас унших шаардлагатай.</p></div><div class=paragraph><p>Стандарт PC цуваа порт (асинхрон) дээр ажиллаж байгаа TA нь таныг 128 Kbs холболттой байсан ч гэсэн 115.2 Kbs хурдаар хязгаарладаг. ISDN-ий чаддаг 128 Kbs хурдыг бүрэн ашиглахын тулд та TA-г синхрон цуваа карт уруу шилжүүлэх шаардлагатай.</p></div><div class=paragraph><p>Дотоод TA худалдан авч синхрон/асинхрон асуудлаас тойрон гарчихлаа гэж битгий тэнэгтээрэй. Дотоод TA-ууд нь ердөө л өөр дээрээ бүтээгдсэн стандарт PC цуваа портын бичил схемтэй байдаг. Энэ нь ердөө л өөр цуваа кабель худалдан авч өөр хоосон цахилгаан сокет олох асуудлыг хөнгөвчилдөг.</p></div><div class=paragraph><p>TA-тэй синхрон карт нь ядаж дангаараа зориулагдсан чиглүүлэгчтэй адил хурдан байдаг бөгөөд түүнийг энгийн FreeBSD хайрцаг удирдаж байгаа нь магадгүй илүү уян хатан юм.</p></div><div class=paragraph><p>Синхрон карт/TA болон зориулагдсан чиглүүлэгчийн алийг сонгох нь голчлон сүсэг бишрэлийн асуудал байдаг. Энэ талаар зарим хэлэлцүүлэг захидлын жагсаалтуудаар явагдсан байгаа. Бүрэн хэлэлцүүлгийг <a href=https://www.FreeBSD.org/search/>архивууд</a>аас хайхыг бид санал болгож байна.</p></div></div><div class=sect2><h3 id=_зориулагдсан_isdn_гүүрнүүдчиглүүлэгчид>32.9.3. Зориулагдсан ISDN Гүүрнүүд/Чиглүүлэгчид<a class=anchor href=#_зориулагдсан_isdn_гүүрнүүдчиглүүлэгчид></a></h3><div class=paragraph><p>ISDN гүүрнүүд эсвэл чиглүүлэгчид нь зөвхөн FreeBSD эсвэл бусад үйлдлийн системийн хувьд биш юм. Чиглүүлэлт болон гүүр хийх технологийн талаар илүү дэлгэрэнгүй тайлбарыг сүлжээний ямар нэг номноос үзнэ үү.</p></div><div class=paragraph><p>Энэ хэсгийн хувьд чиглүүлэгч болон гүүр гэсэн ухагдахуунууд нь харилцан солигдож ашиглагдана.</p></div><div class=paragraph><p>Доод зэрэглэлийн ISDN чиглүүлэгчид/гүүрнүүдийн үнэ багасаж байгаа болохоор энэ нь улам илүү түгээмэл сонголт болох юм. ISDN чиглүүлэгч нь таны локал Ethernet сүлжээ уруу шууд залгагддаг жижиг хайрцаг байдаг бөгөөд бусад гүүр/чиглүүлэгчтэй хийх өөрийн холболтоо удирддаг. Энэ нь PPP болон бусад түгээмэл протоколуудын тусламжтай холболт хийх өөртөө цуг бүтээгдсэн програм хангамжтай байдаг.</p></div><div class=paragraph><p>Чиглүүлэгч нь бүрэн ISDN холболтыг ашиглах болохоор стандарт TA-аас хамаагүй илүү хурдан дамжуулах боломжийг олгодог.</p></div><div class=paragraph><p>ISDN чиглүүлэгчид болон гүүрнүүдийн гол асуудал нь үйлдвэрлэгчид хоорондын харилцан ажиллах боломж асуудал хэвээр байгаа явдал юм. Хэрэв та Интернэтийн үйлчилгээ үзүүлэгчтэй холбогдохоор төлөвлөж байгаа бол тэд нартай өөрийн хэрэгцээний талаар хэлэлцэх нь зүйтэй юм.</p></div><div class=paragraph><p>Хэрэв та өөрийн гэрийн LAN-ийг оффисийн LAN-тай холбох зэргээр хоёр LAN сегментийг хооронд нь холбохоор төлөвлөж байгаа бол энэ нь хамгийн хялбар ажиллагаа багатай шийдэл юм. Та холболт хийгдэх гэж байгаа хоёр талдаа хоёуланд нь зориулан төхөөрөмж авах болохоор холболт ажиллах тал дээр итгэлтэй байж болно.</p></div><div class=paragraph><p>Жишээ нь гэрийн компьютер эсвэл салбар оффисийн сүлжээг гол оффисийн сүлжээтэй холбохын тулд дараах тохируулгыг ашиглаж болно:</p></div><div class=exampleblock><div class=title>Жишээ 4. Салбар оффис эсвэл Гэрийн сүлжээ</div><div class=content><div class=paragraph><p>Сүлжээ нь 10 base 2 Ethernet ("thinnet") сүлжээний шугаман хэлбэрийг ашиглана. Шаардлагатай бол чиглүүлэгчийг сүлжээний кабельтай AUI/10BT хувиргагчаар холбоно.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/advanced-networking/isdn-bus.png alt="10 Base 2 Ethernet"></div></div><div class=paragraph><p>Хэрэв таны гэр/салбар оффис нь зөвхөн нэг компьютер бол та зориулагдсан чиглүүлэгчийг холбохын тулд эрчилсэн хос зөрсөн кабелийг (twisted pair crossover cable) ашиглаж болно.</p></div></div></div><div class=exampleblock><div class=title>Жишээ 5. Гол оффис эсвэл бусад LAN</div><div class=content><div class=paragraph><p>Сүлжээ нь 10 base T Ethernet ("Twisted Pair") сүлжээний од хэлбэрийг ашиглана.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/advanced-networking/isdn-twisted-pair.png alt="ISDN Сүлжээний зураг"></div></div></div></div><div class=paragraph><p>Ихэнх чиглүүлэгчид/гүүрнүүдийн нэг том давуу тал нь <em>нэг зэрэг</em> 2 тусдаа сайт уруу 2 <em>тусдаа чөлөөтэй</em> PPP холболтуудтай байх боломжийг олгодог явдал юм. Хоёр цуваа порттой тусгай (ихэвчлэн үнэтэй) загваруудыг тооцохгүй бол энэ нь ихэнх TA-ууд дээр дэмжигдээгүй байдаг. Үүнийг суваг холболт (channel bonding), MPP зэрэгтэй андуурч болохгүй.</p></div><div class=paragraph><p>Жишээ нь хэрэв та оффис дээрээ зориулагдсан ISDN холболттой бөгөөд түүнийг чагнахыг хүсэж байгаа боловч өөр нэг ISDN шугам авахыг хүсэхгүй байгаа бол энэ нь маш ашигтай боломж байж болох юм. Оффист байгаа чиглүүлэгч нь Интернэт уруу хийх зориулагдсан B сувгийн холболтыг (64 Kbps) удирдаж тусдаа өгөгдлийн холболтод зориулж өөр B сувгийг ашиглаж чадна. Хоёр дахь B суваг нь гаднаас залгах, гадагш залгах юм уу эсвэл илүү өргөн зурваст зориулж эхний B сувагтай цуг динамикаар холболт (bonding) хийхэд (MPP зэрэг) ашиглагдаж болно.</p></div><div class=paragraph><p>Ethernet гүүр нь зөвхөн IP урсгал биш бас өөр илүүг дамжуулах боломжийг танд олгодог. Та IPX/SPX эсвэл өөрийн ашигладаг бусад протоколуудынхаа алийг ч бас илгээж болох юм.</p></div></div></div></div><div class=sect1><h2 id=network-natd>32.10. Network Address Translation буюу Сүлжээний Хаягийн Хөрвүүлэлт<a class=anchor href=#network-natd></a></h2><div class=sectionbody><div class=sect2><h3 id=network-natoverview>32.10.1. Тойм<a class=anchor href=#network-natoverview></a></h3><div class=paragraph><p>FreeBSD-ийн Network Address Translation буюу Сүлжээний Хаягийн Хөрвүүлэлтийн дэмон нь <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> гэгддэг бөгөөд ирж байгаа түүхий IP пакетуудыг хүлээн авч эх хаягийг локал машиныхаар сольж эдгээр пакетуудыг гарч байгаа IP пакетийн урсгалд буцааж дахин оруулдаг. <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> нь өгөгдлийг буцаан хүлээн авахад өгөгдлийн анхны байрлалыг тодорхойлж чаддаг байхаар эхлэл IP хаяг болон портыг өөрчилж түүнийг анхлан хүсэгчид буцааж дамжуулдаг.</p></div><div class=paragraph><p>NAT-ийн хамгийн түгээмэл хэрэглээ бол Интернэтийн холболт хуваалцах гэгддэгийг хийж гүйцэтгэх явдал юм.</p></div></div><div class=sect2><h3 id=network-natsetup>32.10.2. Анхны тохируулга<a class=anchor href=#network-natsetup></a></h3><div class=paragraph><p>IP хаягийн хэмжээ багасаж байгаа болон кабель эсвэл DSL зэрэг өндөр хурдны хэрэглэгчийн шугамууд ашиглах хэрэглэгчдийн тоо ихэссэнээс болоод хүмүүст Интернэтийн холболт хуваалцах шийдлийн хэрэгцээ нэмэгдэх болсон билээ. Хэд хэдэн компьютеруудыг шууд нэг холболтоор холбох чадвар болон IP хаяг нь <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-г боломжийн сонголт болгодог.</p></div><div class=paragraph><p>Хамгийн түгээмэл тохиолдол нь хэрэглэгч кабель эсвэл DSL шугаманд нэг IP хаягтай холбогдсон машинтай бөгөөд LAN-аар дамжуулан хэд хэдэн компьютеруудад Интернэтийн хандалт өгөхийн тулд энэ холбогдсон нэг компьютераа ашиглахыг хүсдэг явдал юм.</p></div><div class=paragraph><p>Үүнийг хийхийн тулд Интернэт дэх FreeBSD машин нь гарц маягаар ажиллах ёстой. Энэ гарц машин нь хоёр NIC-тэй байх ёстой-нэг нь Интернэтийн чиглүүлэгч уруу холбогдохын тулд, нөгөөх нь LAN уруу холбогдохын тулд ашиглагдах ёстой. LAN дахь бүх машинууд нь холбох төхөөрөмж (hub) юм уу эсвэл шилжүүлэгчээр (switch) холбогдсон байна.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>FreeBSD гарцаар LAN-ийг Интернэттэй холбох олон арга замууд байдаг. Энэ жишээ нь хамгийн багаар бодоход хоёр NIC-тэй гарцыг зөвхөн тайлбарлах болно.</p></div></td></tr></tbody></table></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/advanced-networking/natd.png alt="Network Layout"></div></div><div class=paragraph><p>Үүнтэй адил тохиргоог Интернэтийн холболтыг хуваалцахын тулд түгээмэл ашигладаг. LAN машинуудын нэг нь Интернэтэд холбогдсон. Бусад машинууд нь тэр "гарц" машинаар Интернэтэд ханддаг.</p></div></div><div class=sect2><h3 id=network-natdloaderconfiguration>32.10.3. Ачаалагч дуудагчийн тохиргоо<a class=anchor href=#network-natdloaderconfiguration></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-ийн тусламжтайгаар хийх сүлжээний хаягийн хөрвүүлэлтэд зориулсан цөмийн боломжууд <span class=filename>GENERIC</span> цөмд идэвхжүүлэгдээгүй байдаг боловч <span class=filename>/boot/loader.conf</span> файлд хоёр тохиргоо нэмж тэдгээрийг ачаалах явцад дуудахаар тохируулж болдог:</p></div><div class="literalblock programlisting"><div class=content><pre>ipfw_load=&#34;YES&#34;
ipdivert_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Мөн <code>net.inet.ip.fw.default_to_accept</code> тохиргоог <code>1</code> болгож болно:</p></div><div class="literalblock programlisting"><div class=content><pre>net.inet.ip.fw.default_to_accept=&#34;1&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Галт хана болон NAT гарцыг анх удаа тохируулахдаа энэ тохиргоог тохируулах нь зүйтэй байдаг. Ингэснээр <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a>-ийн анхдагч бодлого нь илүү хаалттай <code>deny ip from any to any</code> гэсэн бодлого биш харин <code>allow ip from any to any</code> гэсэн илүү нээлттэй бодлого болох бөгөөд дахин ачаалалтын дараа системд хандах боломж хэвээр байх юм.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=network-natdkernconfiguration>32.10.4. Цөмийн тохиргоо<a class=anchor href=#network-natdkernconfiguration></a></h3><div class=paragraph><p>Модулиудыг сонгодгоор биш эсвэл бүх шаардлагатай боломжуудыг цөмд оруулж бүтээхийг хүсэж байгаа бол дараах тохируулгууд цөмийн тохиргооны файлд байх ёстой:</p></div><div class="literalblock programlisting"><div class=content><pre>options IPFIREWALL
options IPDIVERT</pre></div></div><div class=paragraph><p>Мөн нэмэлтээр дараах нь бас тохиромжтой байж болох юм:</p></div><div class="literalblock programlisting"><div class=content><pre>options IPFIREWALL_DEFAULT_TO_ACCEPT
options IPFIREWALL_VERBOSE</pre></div></div></div><div class=sect2><h3 id=network-natdsystemconfiguration>32.10.5. Системийн эхлүүлэх тохиргоо<a class=anchor href=#network-natdsystemconfiguration></a></h3><div class=paragraph><p>Галт хана болон NAT дэмжлэгийг ачаалах явцад идэвхжүүлэхийн тулд дараах мөрүүдийг <span class=filename>/etc/rc.conf</span> файлд оруулж өгөх ёстой:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34; <i class=conum data-value=1></i><b>(1)</b>
firewall_enable=&#34;YES&#34; <i class=conum data-value=2></i><b>(2)</b>
firewall_type=&#34;OPEN&#34; <i class=conum data-value=3></i><b>(3)</b>
natd_enable=&#34;YES&#34;
natd_interface=&#34;fxp0&#34; <i class=conum data-value=4></i><b>(4)</b>
natd_flags=&#34;&#34; <i class=conum data-value=5></i><b>(5)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Машиныг гарц маягаар ажиллахыг тохируулна. <code>sysctl net.inet.ip.forwarding=1</code> тушаалыг ажиллуулах нь бас адил үр дүнтэй.
<span class=filename>/etc/rc.firewall</span> файл дахь галт ханын дүрмүүдийг ачаалах үед идэвхжүүлнэ.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Энэ нь урьдчилан тодорхойлсон байдаг бүгдийг оруулахыг зөвшөөрдөг галт ханын дүрмийн олонлогийг заана. Нэмэлт төрлүүдийн талаар <span class=filename>/etc/rc.firewall</span> файлаас үзнэ үү.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Аль интерфэйс пакетуудыг нэвтрүүлэн дамжуулахыг заана (Интернэтэд холбогдсон интерфэйс).</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Ачаалах үед <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-д дамжуулах нэмэлт тохиргооны сонголтууд.</td></tr></tbody></table></div><div class=paragraph><p>Өмнөх тохируулгуудыг <span class=filename>/etc/rc.conf</span> файлд тодорхойлсноор <code>natd -interface fxp0</code> тушаалыг ачаалах үед ажиллуулна. Үүнийг гараар бас ажиллуулж болно.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Их олон сонголтуудыг дамжуулах бол <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-д зориулж тохиргооны файлыг ашиглаж бас болно. Энэ тохиолдолд дараах мөрийг <span class=filename>/etc/rc.conf</span> файлд нэмж тохиргооны файлыг тодорхойлох шаардлагатай:</p></div><div class="literalblock programlisting"><div class=content><pre>natd_flags=&#34;-f /etc/natd.conf&#34;</pre></div></div><div class=paragraph><p><span class=filename>/etc/natd.conf</span> файл нь тохиргооны сонголтуудын жагсаалтыг нэг мөрөнд нэгийг байхаар агуулдаг. Жишээ нь дараах хэсгийн хувьд доорх файлыг ашиглах болно:</p></div><div class="literalblock programlisting"><div class=content><pre>redirect_port tcp 192.168.0.2:6667 6667
redirect_port tcp 192.168.0.3:80 80</pre></div></div><div class=paragraph><p>Тохиргооны файлын тухай дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> гарын авлагын хуудасны <code>-f</code> тохируулгын талаар бичсэнээс лавлана уу.</p></div></td></tr></tbody></table></div><div class=paragraph><p>LAN-ий ард байгаа машин болон интерфэйс бүр <a href=ftp://ftp.isi.edu/in-notes/rfc1918.txt>RFC 1918</a>-д тодорхойлогдсон хувийн сүлжээний хаягаас заагдсан IP хаягтай, natd машины дотоод IP хаягийг анхдагч гарц болгон заасан байх ёстой.</p></div><div class=paragraph><p>Жишээ нь LAN-ий цаана байгаа клиент <code>A</code> болон <code>B</code> нь <code>192.168.0.2</code> болон <code>192.168.0.3</code> гэсэн IP хаягтай байх бол natd машины LAN интерфэйс нь <code>192.168.0.1</code> гэсэн IP хаягтай байна. Клиент <code>A</code> болон <code>B</code>-ийн анхдагч гарц natd машины <code>192.168.0.1</code>-ээр тохируулагдах ёстой. natd машины гадаад буюу Интернэтийн интерфэйс нь <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-г ажиллуулахын тулд ямар нэгэн тусгайлсан өөрчлөлтийг шаарддаггүй.</p></div></div><div class=sect2><h3 id=network-natdport-redirection>32.10.6. Порт дахин чиглүүлэлт<a class=anchor href=#network-natdport-redirection></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-ийн сул тал нь LAN клиентүүдэд Интернэтээс хандах боломжгүй байдаг. LAN дахь клиентүүд нь гаднах ертөнц уруу чиглэсэн гадагшаа холболтуудыг хийж чадах боловч ирж байгааг хүлээн авч чаддаггүй. LAN клиент машинуудын аль нэгэн дээр Интернэтийн үйлчилгээнүүдийг ажиллуулахыг оролдох үед энэ нь асуудал үүсгэдэг. Үүнийг тойрох хялбар арга бол natd машины сонгосон Интернэтийн портуудыг LAN клиент уруу дахин чиглүүлэх явдал юм.</p></div><div class=paragraph><p>Жишээ нь <code>A</code> клиент дээр IRC сервер, <code>B</code> клиент дээр вэб сервер ажиллаж байна гэж үзье. Эдгээр нь зөв ажиллахын тулд 6667 (IRC) болон 80 (вэб) портууд дээр хүлээн авсан холболтууд нь тохирох машинууд уруу дахин чиглүүлэгдэх ёстой юм.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> уруу <code>-redirect_port</code> тохируулга зохих сонголтуудтай дамжуулагдах ёстой. Зөв бичих дүрэм нь ийм байна:</p></div><div class="literalblock programlisting"><div class=content><pre>     -redirect_port proto targetIP:targetPORT[-targetPORT]
                 [aliasIP:]aliasPORT[-aliasPORT]
                 [remoteIP[:remotePORT[-remotePORT]]]</pre></div></div><div class=paragraph><p>Дээрх жишээний хувьд нэмэлт өгөгдөл нь ийм байх ёстой:</p></div><div class="literalblock programlisting"><div class=content><pre>    -redirect_port tcp 192.168.0.2:6667 6667
    -redirect_port tcp 192.168.0.3:80 80</pre></div></div><div class=literalblock><div class=content><pre>Энэ нь зөв _tcp_ портуудыг LAN клиент машинууд уруу дахин чиглүүлэх болно.</pre></div></div><div class=paragraph><p><code>-redirect_port</code> нэмэлт өгөгдлийг порт тус бүрийг заахад ашиглахаас гадна бас бүлэг портуудыг заахад хэрэглэж болно. Жишээ нь <em>tcp 192.168.0.2:2000-3000 2000-3000</em> нь 2000-аас 3000 хүртэлх портууд дээр хүлээн авсан бүх холболтуудыг <code>A</code> клиентийн 2000-аас 3000 хүртэлх портууд уруу дахин чиглүүлэх болно.</p></div><div class=paragraph><p>Эдгээр тохируулгуудыг <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-г шууд ажиллуулж байх үед <span class=filename>/etc/rc.conf</span> файлд <code>natd_flags=""</code> тохируулга дотор оруулж ашиглаж болохоос гадна тохиргооны файлын тусламжтай дамжуулж болно.</p></div><div class=paragraph><p>Тохиргооны сонголтуудын талаар <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>-с лавлана уу</p></div></div><div class=sect2><h3 id=network-natdaddress-redirection>32.10.7. Хаяг дахин чиглүүлэлт<a class=anchor href=#network-natdaddress-redirection></a></h3><div class=paragraph><p>Хаягийн дахин чиглүүлэлт нь хэд хэдэн IP хаягууд байгаа бөгөөд тэдгээр нь нэг машин дээр байх ёстой үед ашигтай байдаг. Үүнийг ашиглаад <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> нь өөрийн LAN клиент бүрдээ өөрийн гадаад IP хаягуудыг өгч чаддаг. Дараа нь <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> нь LAN клиентүүдээс ирэх гадагш чиглэсэн пакетуудыг зөв гадаад IP хаягаас болгон дахин бичиж тухайн IP хаяг дээр ирж байгаа бүх урсгалыг тохирох LAN клиент уруу дахин чиглүүлдэг. Энэ нь бас статик NAT гэж нэрлэгддэг. Жишээ нь <code>128.1.1.1</code>, <code>128.1.1.2</code>, болон <code>128.1.1.3</code> гэсэн IP хаягууд нь natd гарц машинд харьяалагдаж байна гэж үзье. <code>128.1.1.1</code> нь natd гарц машины гадаад IP хаяг болон ашиглагдаж болох бол <code>128.1.1.2</code> болон <code>128.1.1.3</code> нь <code>A</code> болон <code>B</code> LAN клиентүүд уруу буцааж дамжуулагдахаар байж болно.</p></div><div class=paragraph><p><code>-redirect_address</code> бичлэг нь дараах маягийн байна:</p></div><div class="literalblock programlisting"><div class=content><pre>-redirect_address localIP publicIP</pre></div></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>localIP</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>LAN клиентийн дотоод IP хаяг.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>publicIP</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>LAN клиентэд тохирох гадаад IP хаяг.</p></td></tr></tbody></table><div class=paragraph><p>Энэ жишээний хувьд энэхүү нэмэлт өгөгдөл нь ингэж уншигдаж болно:</p></div><div class="literalblock programlisting"><div class=content><pre>-redirect_address 192.168.0.2 128.1.1.2
-redirect_address 192.168.0.3 128.1.1.3</pre></div></div><div class=paragraph><p><code>-redirect_port</code> тохируулгын нэгэн адил эдгээр нэмэлт өгөгдлүүдийг <span class=filename>/etc/rc.conf</span> файлын <code>natd_flags=""</code> тохируулгад хийж өгч болохоос гадна тохиргооны файлаар дамжуулж болно. Хаягийн дахин чиглүүлэлт дээр тухайн нэг IP хаяг дээр хүлээн авсан бүх өгөгдөл дахин чиглүүлэгддэг учраас портын дахин чиглүүлэлт шаардлагагүй байдаг.</p></div><div class=paragraph><p>natd машины гадаад IP хаягууд нь идэвхтэй байж гадаад интерфэйсийн нэрээр нэрлэгдсэн байх ёстой. Үүнийг хийхийн тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>-г үзнэ үү.</p></div></div></div></div><div class=sect1><h2 id=network-ipv6>32.11. IPv6<a class=anchor href=#network-ipv6></a></h2><div class=sectionbody><div class=paragraph><p>IPv6 (бас IPng "IP next generation" буюу дараа үеийн IP гэгддэг) нь олонд танигдсан IP протоколын (бас IPv4 гэгддэг) шинэ хувилбар юм. Одоогийн бусад *BSD системүүдийн адил FreeBSD нь KAME IPv6 лавлагаа шийдлийг агуулдаг. Тэгэхээр таны FreeBSD систем таныг IPv6-г туршихад хэрэгтэй бүхнийг агуулсан байдаг. Энэ хэсэг нь IPv6-г тохируулж ажиллуулах талаар анхаарлаа хандуулах болно.</p></div><div class=paragraph><p>1990 оны эхэн үеэс хүмүүс IPv4-ийн хаягийн хэмжээ хурдацтай багасаж байгааг мэдэх болсон. Интернэтийн өсөлтийн хурдаас хамаараад хоёр гол асуудал гарч ирсэн:</p></div><div class=ulist><ul><li><p>Хаяггүй болж эхэлсэн. RFC1918 хувийн хаягийн талбар (<code>10.0.0.0/8</code>, <code>172.16.0.0/12</code>, болон <code>192.168.0.0/16</code>) болон Network Address Translation (NAT) буюу Сүлжээний хаягийн хөрвүүлэлтийг ашигладаг болсон болохоор өнөөдөр энэ нь тийм ч чухал асуудал байхаа больсон.</p></li><li><p>Чиглүүлэгчийн хүснэгтийн оруулгууд хэтэрхий ихсэж байгаа явдал. Энэ нь өнөөдөр асуудал хэвээр байгаа билээ.</p></li></ul></div><div class=paragraph><p>IPv6 нь эдгээр асуудлууд болон өөр бусад олныг шийддэг:</p></div><div class=ulist><ul><li><p>128 битийн хаягийн талбар. Өөрөөр хэлбэл онолын хувьд 340,282,366,920,938,463,463,374,607,431,768,211,456 хаяг байна. Энэ нь манай гариг дээрх нэг квадрат метр бүрт ойролцоогоор 6.67 * 10^27 IPv6 хаяг байна гэсэн үг юм.</p></li><li><p>Чиглүүлэгчүүд нь зөвхөн сүлжээний нийлбэр хаягуудыг өөрсдийн чиглүүлэлтийн хүснэгтүүдэд хадгалах бөгөөд ингэснээр чиглүүлэлтийн хүснэгтийн дундаж хэмжээг 8192 хүртэл бууруулдаг.</p></li></ul></div><div class=paragraph><p>IPv6-ийн бусад ашигтай олон боломжууд бас байдаг, тэдгээрээс дурдвал:</p></div><div class=ulist><ul><li><p>Хаягийн автомат тохиргоо (<a href=http://www.ietf.org/rfc/rfc2462.txt>RFC2462</a>)</p></li><li><p>Anycast хаягууд ("one-out-of many" буюу олноос ганц)</p></li><li><p>Зайлшгүй шаардлагатай (mandatory) multicast хаягууд</p></li><li><p>IPsec (IP security буюу нууцлаг)</p></li><li><p>Хялбаршуулсан толгойн бүтэц</p></li><li><p>Хөдөлгөөнт IP</p></li><li><p>IPv6-to-IPv4 шилжилтийн арга замууд</p></li></ul></div><div class=paragraph><p>Дэлгэрэнгүй мэдээллийн талаар доороос үзнэ үү:</p></div><div class=ulist><ul><li><p><a href=http://playground.sun.com/pub/ipng/html/ipng-main.html>playground.sun.com</a> дэх IPv6-ийн тухай тойм</p></li><li><p><a href=http://www.kame.net>KAME.net</a></p></li></ul></div><div class=sect2><h3 id=_ipv6_хаягуудын_тухай_суурь_мэдээлэл>32.11.1. IPv6 хаягуудын тухай суурь мэдээлэл<a class=anchor href=#_ipv6_хаягуудын_тухай_суурь_мэдээлэл></a></h3><div class=paragraph><p>IPv6 хаягуудын өөр өөр төрлүүд байдаг: Unicast, Anycast, болон Multicast.</p></div><div class=paragraph><p>Unicast хаягууд нь бидний мэддэг хаягууд юм. Unicast хаяг уруу илгээсэн пакет нь яг тэр хаягт харгалзах интерфэйс дээр ирдэг.</p></div><div class=paragraph><p>Anycast хаягуудыг unicast хаягуудаас ялгах боломжгүй байдаг боловч тэдгээр нь бүлэг интерфэйсүүдийг хаягладаг. Anycast хаяг уруу чиглэсэн пакет хамгийн ойрын (чиглүүлэгчийн хэмжилтийн хувьд) интерфэйс дээр ирэх болно. Anycast хаягуудыг зөвхөн чиглүүлэгчид ашиглаж болох юм.</p></div><div class=paragraph><p>Multicast хаягууд нь бүлэг интерфэйсүүдийг таньдаг. Multicast хаяг уруу чиглэсэн пакет нь multicast бүлэгт харьяалагдах бүх интерфэйсүүд дээр ирэх болно.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>IPv4 цацах (broadcast) хаяг (ихэвчлэн <code>xxx.xxx.xxx.255</code>) нь IPv6-ийн multicast хаягуудаар илэрхийлэгддэг.</p></div></td></tr></tbody></table></div><table class="tableblock frame-none grid-all stretch"><caption class=title>Хүснэгт 2. Нөөц IPv6 хаягууд</caption><col style=width:25%><col style=width:25%><col style=width:25%><col style=width:25%><thead><tr><th class="tableblock halign-left valign-top">IPv6 хаяг</th><th class="tableblock halign-left valign-top">Prefixlength буюу угтварын урт (битээр)</th><th class="tableblock halign-left valign-top">Тайлбар</th><th class="tableblock halign-left valign-top">Тэмдэглэл</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>::</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>128 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>тодорхойлогдоогүй</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>харьцуулбал IPv4 дэх <code>0.0.0.0</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>::1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>128 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>loopback буюу буцах хаяг</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>харьцуулбал IPv4 дэх <code>127.0.0.1</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>::00:xx:xx:xx:xx</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>96 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>суулгагдсан IPv4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Бага 32 бит нь IPv4 хаяг юм. Бас "IPv4 нийцтэй IPv6 хаяг" гэгддэг</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>::ff:xx:xx:xx:xx</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>96 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>IPv4-р илэрхийлэгдсэн IPv6 хаяг</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Бага 32 бит нь IPv4 хаяг юм. IPv6-г дэмждэггүй хостуудад зориулсан.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>fe80::</code> - <code>feb::</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>10 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>link-local</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>харьцуулбал IPv4 дэх loopback буюу буцах хаяг</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>fec0::</code> - <code>fef::</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>10 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>site-local</p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ff::</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>8 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>multicast</p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>001</code> (хоёртын системээр)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>3 бит</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>глобал unicast</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Бүх глобал unicast хаягууд нь энэ цөөрмөөс заагдана. Эхний 3 бит нь "001" байна.</p></td></tr></tbody></table></div><div class=sect2><h3 id=_ipv6_хаягуудыг_унших_нь>32.11.2. IPv6 хаягуудыг унших нь<a class=anchor href=#_ipv6_хаягуудыг_унших_нь></a></h3><div class=paragraph><p>Дүрмийн дагуу ийм хэлбэртэй байна: <code>x:x:x:x:x:x:x:x</code> хэлбэрийн байх бөгөөд "x" бүр нь 16 битийн арван зургаат утга байна. Жишээ нь <code>FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code></p></div><div class=paragraph><p>Хаяг нь ихэнхдээ дандаа тэгүүдээс тогтох урт дэд хэсгүүдээс тогтож болох бөгөөд хаягийн тийм хэсгийг "::" гэж хураангуйлж болно. Дөрвөн арван зургаат тооны гурав хүртэлх эхний "0"-үүдийг орхиж бас болно. Жишээ нь <code>fe80::1</code> нь дүрэмд заасан хэлбэрээр бол <code>fe80:0000:0000:0000:0000:0000:0000:0001</code> байна.</p></div><div class=paragraph><p>Гурав дахь хэлбэр нь сүүлийн 32 бит хэсгийг бидний мэддэг (аравтын) IPv4 загварын цэгүүдээр "." тусгаарлаж бичих явдал юм. Жишээ нь <code>2002::10.0.0.1</code> нь (арван зургаатын) дүрэмд зааснаар <code>2002:0000:0000:0000:0000:0000:0a00:0001</code> болох бөгөөд үүнийг бас <code>2002::a00:1</code> гэж бичиж болох юм.</p></div><div class=paragraph><p>Энэ хүртэл уншигч доор дурдсаныг ойлгож чадаж байх ёстой:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig</span></code></pre></div></div><div class="literalblock programlisting"><div class=content><pre>rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</pre></div></div><div class=paragraph><p><code>fe80::200:21ff:fe03:8e1%rl0</code> нь автоматаар тохируулагдсан link-local хаяг юм. Энэ нь MAC хаягаас автомат тохиргооны хэсэг болон үүсгэгддэг.</p></div><div class=paragraph><p>IPv6 хаягуудын бүтцийн тухай дэлгэрэнгүй мэдээллийг <a href=http://www.ietf.org/rfc/rfc3513.txt>RFC3513</a> хаягаас үзнэ үү.</p></div></div><div class=sect2><h3 id=_холбогдох_нь>32.11.3. Холбогдох нь<a class=anchor href=#_холбогдох_нь></a></h3><div class=paragraph><p>Одоогоор бусад IPv6 хостууд болон сүлжээнүүдтэй холбогдох дөрвөн арга байдаг:</p></div><div class=ulist><ul><li><p>IPv6 үйлчилгээ үзүүлдэг эсэхийг мэдэхийн тулд өөрийн Интернэтийн үйлчилгээ үзүүлэгчид хандах хэрэгтэй.</p></li><li><p><a href=http://www.sixxs.net>SixXS</a> нь дэлхий даяар эцсийн хэрэглэгчдийн хооронд туннелийн үйлчилгээ үзүүлдэг.</p></li><li><p>6-аас-4 уруу туннель хийх (<a href=http://www.ietf.org/rfc/rfc3068.txt>RFC3068</a>)</p></li><li><p>Хэрэв та dial-up холболт дээр байгаа бол <a class=package href=https://cgit.freebsd.org/ports/tree/net/freenet6/>net/freenet6</a> портыг ашиглах хэрэгтэй.</p></li></ul></div></div><div class=sect2><h3 id=_ipv6_ертөнц_дэх_dns>32.11.4. IPv6 ертөнц дэх DNS<a class=anchor href=#_ipv6_ертөнц_дэх_dns></a></h3><div class=paragraph><p>IPv6-д зориулсан хоёр төрлийн DNS бичлэг байдаг. IETF нь A6 бичлэгийг хуучин, хэрэгцээнээс гарсан гэж зарласан. AAAA бичлэгүүд нь одоо стандарт болсон байгаа.</p></div><div class=paragraph><p>AAAA бичлэгүүдийг ашиглах нь амархан. Өөрийн хостын нэрийг дөнгөж авсан шинэ IPv6 хаягт зааж доор дурдсаныг:</p></div><div class="literalblock programlisting"><div class=content><pre>MYHOSTNAME           AAAA    MYIPv6ADDR</pre></div></div><div class=paragraph><p>өөрийн анхдагч бүсийн DNS файл уруу нэмж өгнө. Та өөрийн DNS бүсүүдийг удирддаггүй бол өөрийн DNS үйлчилгээ үзүүлэгчээс асуух хэрэгтэй. bind (8.3 ба 9 хувилбар) болон <a class=package href=https://cgit.freebsd.org/ports/tree/dns/djbdns/>dns/djbdns</a>-ийн (IPv6 засвартай) одоогийн хувилбарууд AAAA бичлэгүүдийг дэмждэг.</p></div></div><div class=sect2><h3 id=_etcrc_conf_файлд_хэрэгцээтэй_өөрчлөлтүүдийг_хийх_нь>32.11.5. <span class=filename>/etc/rc.conf</span> файлд хэрэгцээтэй өөрчлөлтүүдийг хийх нь<a class=anchor href=#_etcrc_conf_файлд_хэрэгцээтэй_өөрчлөлтүүдийг_хийх_нь></a></h3><div class=sect3><h4 id=_ipv6_клиентийн_тохиргоонууд>32.11.5.1. IPv6 клиентийн тохиргоонууд<a class=anchor href=#_ipv6_клиентийн_тохиргоонууд></a></h4><div class=paragraph><p>Эдгээр тохиргоонууд нь таны LAN-д байх машиныг чиглүүлэгч биш клиент маягаар ажиллуулахаар тохируулахад танд туслах болно. Таны интерфэйсийг ачаалах үед автоматаар <a href="https://man.freebsd.org/cgi/man.cgi?query=rtsol&amp;sektion=8&amp;format=html">rtsol(8)</a>-оор тохируулуулахын тулд FreeBSD 9.<em>x</em> ба түүнээс хойшхи хувилбарууд дээр дараах мөрийг:</p></div><div class="literalblock programlisting"><div class=content><pre>ipv6_prefer=&#34;YES&#34;</pre></div></div><div class=paragraph><p><span class=filename>rc.conf</span> файлд нэмнэ.</p></div><div class=paragraph><p>FreeBSD 8.<em>x</em> болон түүнээс өмнөх дээр дараахийг нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>ipv6_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p><code>2001:471:1f11:251:290:27ff:fee0:2093</code> зэрэг IP хаягийг өөрийн <span class=filename>fxp0</span> интерфэйсд статикаар өгөхийн тулд FreeBSD 9.<em>x</em>-н хувьд доор дурдсаныг нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0_ipv6=&#34;inet6 2001:471:1f11:251:290:27ff:fee0:2093 prefixlen 64&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Компьютерийн сүлжээнд холбогдсон тэр дэд сүлжээний зөв утгыг оруулж <em>prefixlen 64</em>-г солихоо мартуузай.</p></div></td></tr></tbody></table></div><div class=paragraph><p>FreeBSD 8<em>x</em> болон түүнээс өмнөхийн хувьд дараахийг нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>ipv6_ifconfig_fxp0=&#34;2001:471:1f11:251:290:27ff:fee0:2093&#34;</pre></div></div><div class=paragraph><p><code>2001:471:1f11:251::1</code> анхдагч чиглүүлэгчийг зааж өгөхдөө доор дурдсаныг <span class=filename>/etc/rc.conf</span> файлд нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>ipv6_defaultrouter=&#34;2001:471:1f11:251::1&#34;</pre></div></div></div><div class=sect3><h4 id=_ipv6_чиглүүлэгчгарцын_тохиргоонууд>32.11.5.2. IPv6 чиглүүлэгч/гарцын тохиргоонууд<a class=anchor href=#_ipv6_чиглүүлэгчгарцын_тохиргоонууд></a></h4><div class=paragraph><p>Энэ нь таны туннелийн үйлчилгээ үзүүлэгчийн өгсөн чиглэлүүдийг авч тэдгээрийг дахин ачаалсан ч гэсэн үлдэхээр болгож тохиргоо болгон хөрвүүлэхэд танд туслах болно. Эхлүүлэх үед өөрийн туннелийг сэргээхийн тулд доор дурдсантай төстэйг <span class=filename>/etc/rc.conf</span> файлд ашиглана:</p></div><div class=paragraph><p>Тохируулах Ердийн Туннель хийх интерфэйсүүдийг жагсаана. Жишээ нь <span class=filename>gif0</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>gif_interfaces=&#34;gif0&#34;</pre></div></div><div class=paragraph><p><em>MY_IPv4_ADDR</em> гэсэн локал төгсгөлтэй интерфэйсийг <em>REMOTE_IPv4_ADDR</em> гэсэн алсын төгсгөл уруу тохируулахын тулд:</p></div><div class="literalblock programlisting"><div class=content><pre>gifconfig_gif0=&#34;MY_IPv4_ADDR REMOTE_IPv4_ADDR&#34;</pre></div></div><div class=paragraph><p>Өөрийн IPv6 туннелийн төгсгөл болгон ашиглахаар таны зааж өгсөн IPv6 хаягийг хамааруулахын тулд FreeBSD 9.<em>x</em> болон түүнээс хойшхийн хувьд доор дурдсаныг нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_gif0_ipv6=&#34;inet6 MY_ASSIGNED_IPv6_TUNNEL_ENDPOINT_ADDR&#34;</pre></div></div><div class=paragraph><p>FreeBSD 8.<em>x</em> ба түүнээс өмнөхийн хувьд дараахийг нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>ipv6_ifconfig_gif0=&#34;MY_ASSIGNED_IPv6_TUNNEL_ENDPOINT_ADDR&#34;</pre></div></div><div class=paragraph><p>Тэгээд таны хийх зүйл чинь IPv6-д зориулж анхдагч чиглүүлэлт тохируулах явдал юм. Энэ нь IPv6 туннелийн нөгөө тал байх болно:</p></div><div class="literalblock programlisting"><div class=content><pre>ipv6_defaultrouter=&#34;MY_IPv6_REMOTE_TUNNEL_ENDPOINT_ADDR&#34;</pre></div></div></div><div class=sect3><h4 id=_ipv6_туннелийн_тохиргоонууд>32.11.5.3. IPv6 туннелийн тохиргоонууд<a class=anchor href=#_ipv6_туннелийн_тохиргоонууд></a></h4><div class=paragraph><p>Хэрэв сервер нь таны бусад сүлжээ болон гадаад ертөнцийн хооронд IPv6-г чиглүүлэх бол дараах <span class=filename>/etc/rc.conf</span> тохируулга бас хэрэгтэй болно:</p></div><div class="literalblock programlisting"><div class=content><pre>ipv6_gateway_enable=&#34;YES&#34;</pre></div></div></div></div><div class=sect2><h3 id=_чиглүүлэгчийн_зарлалт_ба_хостын_автомат_тохиргоо>32.11.6. Чиглүүлэгчийн зарлалт ба Хостын автомат тохиргоо<a class=anchor href=#_чиглүүлэгчийн_зарлалт_ба_хостын_автомат_тохиргоо></a></h3><div class=paragraph><p>Энэ хэсэг нь IPv6 анхдагч чиглүүлэлтийг зарлахын тулд <a href="https://man.freebsd.org/cgi/man.cgi?query=rtadvd&amp;sektion=8&amp;format=html">rtadvd(8)</a>-г тохируулахад тань туслах болно.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=rtadvd&amp;sektion=8&amp;format=html">rtadvd(8)</a>-г идэвхжүүлэхийн тулд таны <span class=filename>/etc/rc.conf</span> файлд дараах тохиргоо хэрэгтэй болно:</p></div><div class="literalblock programlisting"><div class=content><pre>rtadvd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>IPv6 чиглүүлэгчийн төлөөлөлт хийгдэх интерфэйсийг заах нь чухал юм. Жишээ нь <a href="https://man.freebsd.org/cgi/man.cgi?query=rtadvd&amp;sektion=8&amp;format=html">rtadvd(8)</a>-д <span class=filename>fxp0</span>-г ашиглахыг хэлж өгөхийн тулд доор дурдсаныг нэмнэ:</p></div><div class="literalblock programlisting"><div class=content><pre>rtadvd_interfaces=&#34;fxp0&#34;</pre></div></div><div class=paragraph><p>Одоо бид <span class=filename>/etc/rtadvd.conf</span> тохиргооны файл үүсгэх ёстой. Энд жишээ байна:</p></div><div class="literalblock programlisting"><div class=content><pre>fxp0:\
	:addrs#1:addr=&#34;2001:471:1f11:246::&#34;:prefixlen#64:tc=ether:</pre></div></div><div class=paragraph><p><span class=filename>fxp0</span>-г өөрийн ашиглах интерфэйсээр солих хэрэгтэй.</p></div><div class=paragraph><p>Дараа нь <code>2001:471:1f11:246::</code>-г өөрийн хуваарилалтын угтвараар солиорой.</p></div><div class=paragraph><p>Хэрэв та <code>/64</code> дэд сүлжээг зориулсан бол өөр бусад ямар ч өөрчлөлт хийх хэрэггүй. Хэрэв тийм биш бол та <code>prefixlen#</code> буюу угтварын уртыг зөв утгаар өөрчлөх шаардлагатай.</p></div></div></div></div><div class=sect1><h2 id=network-atm>32.12. Asynchronous Transfer Mode (ATM) буюу Асинхрон Дамжуулах Горим<a class=anchor href=#network-atm></a></h2><div class=sectionbody><div class=sect2><h3 id=_atm_дээгүүр_классик_ip_тохируулах_нь_pvc_нүүд>32.12.1. ATM дээгүүр классик IP тохируулах нь (PVC-нүүд)<a class=anchor href=#_atm_дээгүүр_классик_ip_тохируулах_нь_pvc_нүүд></a></h3><div class=paragraph><p>Classical IP over ATM (CLIP) буюу ATM дээгүүрх классик IP нь Asynchronous Transfer Mode (ATM) буюу Асинхрон Дамжуулах Горимыг IP-тай ашиглах хамгийн энгийн арга юм. Энэ нь switched буюу шилжүүлэгдсэн (SVC-нүүд) ба permanent буюу байнгын (PVC-нүүд) холболтуудтай ашиглагдаж болдог. Энэ хэсэг нь сүлжээн дээр тулгуурласныг PVC-нүүд дээр хэрхэн тохируулах талаар тайлбарладаг.</p></div><div class=sect3><h4 id=_бүрэн_тор_хэлбэрийн_тохиргоонууд>32.12.1.1. Бүрэн тор хэлбэрийн тохиргоонууд<a class=anchor href=#_бүрэн_тор_хэлбэрийн_тохиргоонууд></a></h4><div class=paragraph><p>CLIP-ийг PVC-нүүдтэй тохируулах эхний арга нь машин бүрийг сүлжээн дэх бусад машин бүртэй зориулагдсан PVC-ээр холбох явдал юм. Үүнийг тохируулах хялбар байдаг боловч их олон тооны машинууд дээр бүтэшгүй байдаг. Энэ жишээ нь сүлжээнд бидэнд дөрвөн машин байгаа бөгөөд машин бүр ATM сүлжээнд ATM хувиргагч картын тусламжтай холбогдсон гэж үздэг. Эхний алхам нь IP хаягууд болон машинуудын хооронд ATM холболтуудыг төлөвлөх явдал юм. Бид доор дурдсаныг ашиглана:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Хост</th><th class="tableblock halign-left valign-top">IP хаяг</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostA</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>192.168.173.1</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostB</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>192.168.173.2</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>192.168.173.3</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>192.168.173.4</code></p></td></tr></tbody></table><div class=paragraph><p>Бүрэн тор хэлбэрийн сүлжээг бүтээхийн тулд машинуудын хослол бүрийн хооронд нэг ATM холболт бидэнд хэрэгтэй:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Машинууд</th><th class="tableblock halign-left valign-top">VPI.VCI хослол</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostA</code> - <code>hostB</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>0.100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostA</code> - <code>hostC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>0.101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostA</code> - <code>hostD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>0.102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostB</code> - <code>hostC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>0.103</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostB</code> - <code>hostD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>0.104</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hostC</code> - <code>hostD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>0.105</p></td></tr></tbody></table><div class=paragraph><p>Холболтын төгсгөл бүр дэх VPI болон VCI утгууд нь мэдээж ялгаатай байх боловч амархан байлгах үүднээс бид тэдгээрийг адил гэж үзнэ. Дараа нь бид ATM интерфэйсүүдийг хост бүр дээр тохируулах хэрэгтэй болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>hostA# ifconfig hatm0 192.168.173.1 up
hostB# ifconfig hatm0 192.168.173.2 up
hostC# ifconfig hatm0 192.168.173.3 up
hostD# ifconfig hatm0 192.168.173.4 up</code></pre></div></div><div class=paragraph><p>Ингэхдээ бүх хостууд дээр ATM интерфэйс нь <span class=filename>hatm0</span> гэж үзэх болно. Одоо PVC-нүүд нь <code>hostA</code> дээр тохируулагдах шаардлагатай (бид тэдгээрийг ATM шилжүүлэгч дээр аль хэдийн тохируулагдсан гэж үзнэ, үүнийг хэрхэн хийхийг шилжүүлэгчийн гарын авлагаас лавлах хэрэгтэй).</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>hostA# atmconfig natm add 192.168.173.2 hatm0 0 100 llc/snap ubr
hostA# atmconfig natm add 192.168.173.3 hatm0 0 101 llc/snap ubr
hostA# atmconfig natm add 192.168.173.4 hatm0 0 102 llc/snap ubr

hostB# atmconfig natm add 192.168.173.1 hatm0 0 100 llc/snap ubr
hostB# atmconfig natm add 192.168.173.3 hatm0 0 103 llc/snap ubr
hostB# atmconfig natm add 192.168.173.4 hatm0 0 104 llc/snap ubr

hostC# atmconfig natm add 192.168.173.1 hatm0 0 101 llc/snap ubr
hostC# atmconfig natm add 192.168.173.2 hatm0 0 103 llc/snap ubr
hostC# atmconfig natm add 192.168.173.4 hatm0 0 105 llc/snap ubr

hostD# atmconfig natm add 192.168.173.1 hatm0 0 102 llc/snap ubr
hostD# atmconfig natm add 192.168.173.2 hatm0 0 104 llc/snap ubr
hostD# atmconfig natm add 192.168.173.3 hatm0 0 105 llc/snap ubr</code></pre></div></div><div class=paragraph><p>Мэдээж хэрэг UBR-с бусад урсгалын хэлэлцээнүүд хэрэв ATM хувиргагч тэдгээрийг дэмждэг бол ашиглагдаж болно. Энэ тохиолдолд урсгалын хэлэлцээний нэр нь урсгалын нэмэлт өгөгдлүүдийн дараа орж байна. <a href="https://man.freebsd.org/cgi/man.cgi?query=atmconfig&amp;sektion=8&amp;format=html">atmconfig(8)</a> хэрэгсэлд зориулсан тусламжийг дараах тушаалыг ашиглан:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># atmconfig help natm add</span></code></pre></div></div><div class=paragraph><p>авч болох бөгөөд эсвэл <a href="https://man.freebsd.org/cgi/man.cgi?query=atmconfig&amp;sektion=8&amp;format=html">atmconfig(8)</a> гарын авлагаас авч болно.</p></div><div class=paragraph><p>Үүнтэй адил тохиргоог <span class=filename>/etc/rc.conf</span> ашиглан бас хийж болно. <code>hostA</code>-ийн хувьд энэ нь иймэрхүү харагдана:</p></div><div class="literalblock programlisting"><div class=content><pre>network_interfaces=&#34;lo0 hatm0&#34;
ifconfig_hatm0=&#34;inet 192.168.173.1 up&#34;
natm_static_routes=&#34;hostB hostC hostD&#34;
route_hostB=&#34;192.168.173.2 hatm0 0 100 llc/snap ubr&#34;
route_hostC=&#34;192.168.173.3 hatm0 0 101 llc/snap ubr&#34;
route_hostD=&#34;192.168.173.4 hatm0 0 102 llc/snap ubr&#34;</pre></div></div><div class=paragraph><p>Бүх CLIP чиглүүлэлтүүдийн тухайн үеийн төлвийг дараах тушаалаар авч болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>hostA# atmconfig natm show</code></pre></div></div></div></div></div></div><div class=sect1><h2 id=carp>32.13. Common Address Redundancy Protocol (CARP)<a class=anchor href=#carp></a></h2><div class=sectionbody><div class=paragraph><p>Common Address Redundancy Protocol буюу CARP нь олон хостуудад нэг IP хаяг хуваалцах боломжийг олгодог. Зарим тохиргоонуудын хувьд үүнийг байнгын бэлэн байдал юм уу эсвэл ачаалал тэгш хуваарилахад ашиглаж болох юм. Энд дурдсан жишээний адилаар хостууд нь бас өөр өөр IP хаягууд ашиглаж болох юм.</p></div><div class=paragraph><p>CARP-ийн дэмжлэгийг идэвхжүүлэхийн тулд FreeBSD цөмийг <a href=../kernelconfig/#kernelconfig>FreeBSD цөмийг тохируулах нь</a> бүлэгт заасны дагуу дараах тохируулгатайгаар бүтээсэн байх хэрэгтэй:</p></div><div class="literalblock programlisting"><div class=content><pre>device	carp</pre></div></div><div class=paragraph><p>Мөн өөрөөр <span class=filename>if_carp.ko</span> модулийг ачаалах үед дуудаж болно. Ингэхийн тулд дараах мөрийг <span class=filename>/boot/loader.conf</span> нэмж өгнө:</p></div><div class="literalblock programlisting"><div class=content><pre>if_carp_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>CARP боломж нь одоо хүртээмжтэй болсон байх ёстой бөгөөд түүнийг хэд хэдэн <code>sysctl</code>-ийн OID-уудын тусламжтайгаар тааруулж болно:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">OID</th><th class="tableblock halign-left valign-top">Тайлбар</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>net.inet.carp.allow</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Ирж байгаа CARP пакетуудыг хүлээж авах. Анхдагчаар идэвхжсэн байдаг.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>net.inet.carp.preempt</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Энэ тохируулга нь хост дээрх бүх CARP интерфэйсүүдийг аль нэг нь зогссон тохиолдолд зогсоодог. Анхдагчаар идэвхжээгүй байдаг.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>net.inet.carp.log</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>0</code> гэсэн утга нь бүртгэлийг идэвхжүүлдэггүй. <code>1</code> гэсэн утга нь муу CARP пакетуудын бүртгэлийг идэвхжүүлдэг. <code>1</code>-ээс их утгууд нь CARP интерфэйсүүдийн хувьд төлвийн өөрчлөлтүүдийн бүртгэлийг идэвхжүүлдэг. Анхдагч утга нь <code>1</code> байна.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>net.inet.carp.arpbalance</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ARP ашиглан дотоод сүлжээний урсгалыг тэнцвэржүүлнэ. Анхдагчаар идэвхжээгүй байдаг.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>net.inet.carp.suppress_preempt</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Preemption буюу өөр илүү өндөр давуу эрх бүхий бодлого/урсгалаар солигдох боломжийг хаасан хориглолтын төлвийг үзүүлэх зөвхөн уншигдах OID. Хэрэв интерфэйс дээрх холбоос босоогүй бол илүү өндөр давуу эрх бүхий бодлого/урсгалаар солигдох боломжийг хааж болно. <code>0</code> утга нь илүү өндөр давуу эрх бүхий бодлого/урсгалаар солигдох боломж хаагдаагүй гэсэн утгатай. Асуудал бүр энэ OID-ийг нэгээр ахиулж нэмэгдүүлнэ.</p></td></tr></tbody></table><div class=paragraph><p>CARP төхөөрөмжүүдийг <code>ifconfig</code> тушаалаар үүсгэж болно:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig carp0 create</span></code></pre></div></div><div class=paragraph><p>Жинхэнэ амьдрал дээр эдгээр интерфэйсүүдэд VHID гэгддэг давхардахгүй дугаарууд хэрэгтэй болно. Энэ VHID буюу Виртуал Хостын Үнэмлэх нь сүлжээн дэх хостыг ялгахад хэрэглэгдэх болно.</p></div><div class=sect2><h3 id=_серверт_хандах_боломжийг_байнга_хангахын_тулд_carp_ийг_ашиглах_нь_carp>32.13.1. Серверт хандах боломжийг байнга хангахын тулд CARP-ийг ашиглах нь (CARP)<a class=anchor href=#_серверт_хандах_боломжийг_байнга_хангахын_тулд_carp_ийг_ашиглах_нь_carp></a></h3><div class=paragraph><p>Дээр дурдсан CARP-ийн нэг хэрэглээ нь серверийн бэлэн байдалд зориулагджээ. Энэ жишээ нь өөр өөр IP хаягуудтай, ижил вэбийн агуулга бүхий гурван хостын хувьд байнгын бэлэн байдалд байх дэмжлэгийг харуулах болно. Эдгээр машинууд нь Тойрон Эргэх DNS тохиргоотойгоор ажиллах болно. Амжилтгүй болсон үед хандах нөөц машин нь хоёр нэмэлт CARP интерфэйстэй байх бөгөөд агуулгын сервер бүрийн IP-ний хувьд ашиглагдана. Хандалт амжилтгүй болоход амжилтгүй болсон машины IP хаягийг нөөц сервер авах ёстой. Энэ нь хэрэглэгчид амжилтгүй болсон нь мэдэгдэхгүй гэсэн үг юм. Нөөц сервер нь ачааллыг авах ёстой бол бусад агуулгын серверүүдтэй ижил агуулга болон үйлчилгээнүүдтэй байх ёстой.</p></div><div class=paragraph><p>Хоёр машин нь өгөгдсөн хостын нэр болон VHID-үүдээс бусдаараа адилхан тохируулагдсан байх ёстой. Энэ жишээн дээр эдгээр машинуудыг <code>hosta.example.org</code> болон <code>hostb.example.org</code> гэж нэрлэсэн байгаа. Эхлээд CARP-ийн тохиргоонд шаардлагатай мөрүүдийг <span class=filename>rc.conf</span> файлд нэмэх хэрэгтэй. <code>hosta.example.org</code> хостын хувьд <span class=filename>rc.conf</span> файл доор дурдсан мөрүүдийг агуулсан байх ёстой:</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;hosta.example.org&#34;
ifconfig_fxp0=&#34;inet 192.168.1.3 netmask 255.255.255.0&#34;
cloned_interfaces=&#34;carp0&#34;
ifconfig_carp0=&#34;vhid 1 pass testpass 192.168.1.50/24&#34;</pre></div></div><div class=paragraph><p><code>hostb.example.org</code> дээр доор дурдсан мөрүүдийг <span class=filename>rc.conf</span> файл агуулсан байх ёстой:</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;hostb.example.org&#34;
ifconfig_fxp0=&#34;inet 192.168.1.4 netmask 255.255.255.0&#34;
cloned_interfaces=&#34;carp0&#34;
ifconfig_carp0=&#34;vhid 2 pass testpass 192.168.1.51/24&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Хамгийн чухал нь <code>ifconfig</code> тушаалд <code>pass</code> тохируулгаар заагдсан нууц үгс нь адил байх ёстой. <span class=filename>carp</span> төхөөрөмжүүд нь зөвхөн зөв нууц үг бүхий машинуудаас ирэх зарлалтуудыг сонсох болно. VHID нь машин бүрийн хувьд өөр өөр байх ёстой.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Гурав дахь <code>provider.example.org</code> машиныг аль нэг хост руу хандахад амжилтгүй болоход хандаж болохоор болгож бэлдэх хэрэгтэй. Энэ машинд хоёр <span class=filename>carp</span> төхөөрөмж хэрэгтэй болох бөгөөд нэг нэгээрээ хоёр хосттой ажиллах юм. <span class=filename>rc.conf</span>-ийн зөв тохиргооны мөрүүд доор дурдсантай төсөөтэй байх болно:</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;provider.example.org&#34;
ifconfig_fxp0=&#34;inet 192.168.1.5 netmask 255.255.255.0&#34;
cloned_interfaces=&#34;carp0 carp1&#34;
ifconfig_carp0=&#34;vhid 1 advskew 100 pass testpass 192.168.1.50/24&#34;
ifconfig_carp1=&#34;vhid 2 advskew 100 pass testpass 192.168.1.51/24&#34;</pre></div></div><div class=paragraph><p>Хоёр <span class=filename>carp</span> төхөөрөмжтэй байх нь хариу өгөхөө байсан аль нэг машиныг мэдэж IP хаягийг нь авах боломжийг <code>provider.example.org</code> хостод олгох болно.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Анхдагч FreeBSD цөм дээр preemption буюу өөр илүү өндөр давуу эрх бүхий бодлого/урсгалаар солигдох боломж идэвхжсэн байж <em>болох</em> юм. Хэрэв тийм бол <code>provider.example.org</code> нь IP хаягийг анхдагч агуулгын сервер рүү суллахгүй байж болох юм. Энэ тохиолдолд администратор мастер уруу буцааж IP-г хүчилж болох юм. Дараах тушаалыг <code>provider.example.org</code> дээр ажиллуулах шаардлагатай:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig carp0 down &amp;&amp; ifconfig carp0 up</span></code></pre></div></div><div class=paragraph><p>Хостод тохирох <span class=filename>carp</span> интерфэйс дээр үүнийг хийх ёстой.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Энэ хүрэхэд CARP бүрмөсөн идэвхжиж тест хийхэд бэлэн болсон байх ёстой. Сүлжээг дахин эхлүүлэх буюу эсвэл машинуудыг дахин ачаалаад тест хийгээрэй.</p></div><div class=paragraph><p>Дэлгэрэнгүй мэдээллийг <a href="https://man.freebsd.org/cgi/man.cgi?query=carp&amp;sektion=4&amp;format=html">carp(4)</a> гарын авлагын хуудаснаас олж болно.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 2024 оны гуравдугаар сарын 9 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/mn/books/handbook/firewalls class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/mn/books/handbook/partv class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#advanced-networking-synopsis>32.1. Ерөнхий агуулга</a></li><li><a href=#network-routing>32.2. Гарцууд болон Чиглүүлэлтүүд</a></li><li><a href=#network-wireless>32.3. Утасгүй сүлжээ</a></li><li><a href=#network-bluetooth>32.4. Bluetooth</a></li><li><a href=#network-bridging>32.5. Гүүр</a></li><li><a href=#network-aggregation>32.6. Холбоос нэгтгэлт ба ослыг тойрон гарах (Link Aggregation and Failover)</a></li><li><a href=#network-diskless>32.7. Дискгүй ажиллагаа</a></li><li><a href=#network-pxe-nfs>32.8. NFS root файлын систем ашиглан PXE ачаалалт хийх</a></li><li><a href=#network-isdn>32.9. ISDN</a></li><li><a href=#network-natd>32.10. Network Address Translation буюу Сүлжээний Хаягийн Хөрвүүлэлт</a></li><li><a href=#network-ipv6>32.11. IPv6</a></li><li><a href=#network-atm>32.12. Asynchronous Transfer Mode (ATM) буюу Асинхрон Дамжуулах Горим</a></li><li><a href=#carp>32.13. Common Address Redundancy Protocol (CARP)</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/mn/books/handbook/handbook_mn.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/mn/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/mn/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>монгол хэл mongol khel</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/mn class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/mn/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>