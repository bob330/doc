<!doctype html><html class=theme-light lang=de><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/de/articles/freebsd-update-server/><title>Einen eigenen FreeBSD Update Server bauen | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Einen eigenen FreeBSD Update Server bauen"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="de"><meta property="og:url" content="http://172.16.201.134:1313/de/articles/freebsd-update-server/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/de\/articles\/freebsd-update-server\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/de>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/de/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/de/books>Books</a></li><li><a href=http://172.16.201.134:1313/de/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/de/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=de>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Einen eigenen FreeBSD Update Server bauen</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=copyright>Copyright © 2009-2011, 2013 Jason Helfma</div><div class=legalnotice><a id=trademarks></a><details><summary>trademarks</summary><p>FreeBSD ist ein eingetragenes Warenzeichen der FreeBSD Foundation.</p><p>AMD, AMD Athlon, AMD Opteron, &amp;Eacute;lan und PCnet sind eingetragene Warenzeichen von Advanced Micro Devices, Inc.</p><p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium und Xeon sind Warenzeichen oder eingetragene Warenzeichen der Intel Corporation oder ihrer Gesellschaften in den Vereinigten Staaten und in anderen Ländern.</p><p>Viele Produktbezeichnungen von Herstellern und Verkäufern sind Warenzeichen. Soweit dem FreeBSD Project das Warenzeichen bekannt ist, werden die in diesem Dokument vorkommenden Bezeichnungen mit dem Symbol “™” oder dem Symbol “®” gekennzeichnet.</p></details></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#acknowledgments>1. Danksagung</a></li><li><a href=#introduction>2. Einführung</a></li><li><a href=#prerequisites>3. Voraussetzungen</a></li><li><a href=#Configuration>4. Konfiguration: Installation & Setup</a></li><li><a href=#build>5. Den Update Code bauen</a></li><li><a href=#patch>6. Eine Fehlerkorrektur erstellen</a></li><li><a href=#tips>7. Tipps</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>Zusammenfassung</p></div><div class=paragraph><p>Dieser Artikel beschreibt den Bau eines internen FreeBSD Update Server. Die <a href=https://svnweb.freebsd.org/base/user/cperciva/freebsd-update-build/>freebsd-update-server</a> Software wurde von <code>Colin Percival &lt;<a href=mailto:cperciva@FreeBSD.org>cperciva@FreeBSD.org</a>></code>, emeritierter Security Officer von FreeBSD, geschrieben. Benutzer, die es als vorteilhaft ansehen ihre Systeme über einen offiziellen Update-Server zu aktualisieren, können mit Hilfe eines selbst erstellten FreeBSD Update Server die Funktionalität über manuell optimierte FreeBSD Releases oder über Bereitstellung eines lokalen Mirror, welcher schnellere Updates ermöglicht, erweitern.</p></div><hr><div class=paragraph><p><em>Übersetzt von <code>Björn Heidotting &lt;<a href=mailto:bhd@FreeBSD.org>bhd@FreeBSD.org</a>></code></em>.</p></div></div></div><div class=sect1><h2 id=acknowledgments>1. Danksagung<a class=anchor href=#acknowledgments></a></h2><div class=sectionbody><div class=paragraph><p>Dieser Artikel wurde anschließend im <a href=http://bsdmag.org/magazine/1021-bsd-as-a-desktop>BSD Magazine</a> gedruckt.</p></div></div></div><div class=sect1><h2 id=introduction>2. Einführung<a class=anchor href=#introduction></a></h2><div class=sectionbody><div class=paragraph><p>Erfahrene Benutzer oder Administratoren sind häufig für etliche Maschinen oder Umgebungen verantwortlich. Sie verstehen die schwierigen Anforderungen und Herausforderungen der Aufrechterhaltung einer solchen Infrastruktur. Ein FreeBSD Update Server macht es einfacher, Sicherheits- und Software-Korrekturen für ausgewählte Test-Maschinen bereitzustellen, bevor diese dann auf den Produktionssystemen ausgerollt werden. Es bedeutet auch, dass eine Reihe von Systemen über das lokale Netzwerk, anstatt über eine langsame Internet-Verbindung, aktualisiert werden können. Dieser Artikel beschreibt die Vorgehensweise zum Erstellen eines eigenen FreeBSD Update Server.</p></div></div></div><div class=sect1><h2 id=prerequisites>3. Voraussetzungen<a class=anchor href=#prerequisites></a></h2><div class=sectionbody><div class=paragraph><p>Für den Bau eines internen FreeBSD Update Server sollten einige Anforderungen erfüllt werden.</p></div><div class=ulist><ul><li><p>Ein laufendes FreeBSD System.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als Minimum, muss das zu verteilende Ziel-Release auf einer gleichen, oder höheren FreeBSD Version gebaut werden.</p></div></td></tr></tbody></table></div></li><li><p>Ein Benutzerkonto mit mindestens 4 GB freiem Speicherplatz. Dies erlaubt die Erstellung der Updates für 7.1 und 7.2. Der genaue Platzbedarf kann sich aber von Version zu Version ändern.</p></li><li><p>Ein <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> Konto auf einem entfernten System, um die später zu verteilenden Updates hochzuladen.</p></li><li><p>Einen Webserver, wie <a href=https://docs.freebsd.org/de/books/handbook/network-servers/#network-apache>Apache</a>, wobei über die Hälfte des Platzes für den Bau benötigt wird. Als Beispiel benötigt der Bau von 7.1 und 7.2 insgesamt 4 GB. Der Speicherplatz, den der Webserver für die Verteilung dieser Updates benötigt, würde 2.6 GB betragen.</p></li><li><p>Grundlegende Kenntnisse im Shell Skripting mit der Bourne Shell, <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>.</p></li></ul></div></div></div><div class=sect1><h2 id=Configuration>4. Konfiguration: Installation & Setup<a class=anchor href=#Configuration></a></h2><div class=sectionbody><div class=paragraph><p>Laden Sie die <a href=https://svnweb.freebsd.org/base/user/cperciva/freebsd-update-build/>freebsd-update-server</a> Software durch die Installation von <a class=package href=https://cgit.freebsd.org/ports/tree/devel/subversion/>devel/subversion</a> sowie <a class=package href=https://cgit.freebsd.org/ports/tree/security/ca_root_nss/>security/ca_root_nss</a>, und starten Sie:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% svn co https://svn.freebsd.org/base/user/cperciva/freebsd-update-build freebsd-update-server</code></pre></div></div><div class=paragraph><p>Passen Sie <span class=filename>scripts/build.conf</span> an Ihre Bedürfnisse an. Diese Datei wird bei jedem Bau mit einbezogen.</p></div><div class=paragraph><p>Hier ist die Standardeinstellung für <span class=filename>build.conf</span>, welche Sie für Ihre Umgebung anpassen sollten.</p></div><div class="literalblock programlisting"><div class=content><pre># Main configuration file for FreeBSD Update builds.  The
# release-specific configuration data is lower down in
# the scripts tree.

# Location from which to fetch releases
export FTP=ftp://ftp2.freebsd.org/pub/FreeBSD/releases <i class=conum data-value=1></i><b>(1)</b>

# Host platform
export HOSTPLATFORM=`uname -m`

# Host name to use inside jails
export BUILDHOSTNAME=${HOSTPLATFORM}-builder.daemonology.net <i class=conum data-value=2></i><b>(2)</b>

# Location of SSH key
export SSHKEY=/root/.ssh/id_dsa <i class=conum data-value=3></i><b>(3)</b>

# SSH account into which files are uploaded
MASTERACCT=builder@wadham.daemonology.net <i class=conum data-value=4></i><b>(4)</b>

# Directory into which files are uploaded
MASTERDIR=update-master.freebsd.org <i class=conum data-value=5></i><b>(5)</b></pre></div></div><div class=paragraph><p>Parameter, die zu berücksichtigen sind:</p></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Dies ist der Ort, von dem die ISO Abbilder (über die <code>fetchiso()</code> in <span class=filename>scripts/build.subr</span>) heruntergeladen werden. Der Ort ist nicht auf FTP URIs beschränkt. Jedes URI-Schema, welches von <a href="https://man.freebsd.org/cgi/man.cgi?query=fetch&amp;sektion=1&amp;format=html">fetch(1)</a> unterstützt wird, sollte hier gut funktionieren.
Anpassungen am <code>fetchiso()</code> Code können Sie vornehmen, indem Sie das Standardskript <span class=filename>build.subr</span> in den Release- und Architektur-spezifischen Bereich in <span class=filename>scripts/RELEASE/ARCHITECTURE/build.subr</span> kopieren und dort lokale Änderungen vornehmen.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Der Name des Build-Hosts. Auf aktualisierten Systemen können Sie diese Information wie folgt ausgeben:<div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>uname</span> <span class=nt>-v</span></code></pre></div></div></td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Der SSH Schlüssel für das Hochladen der Dateien auf den Update Server. Ein Schlüsselpaar kann durch die Eingabe von <code>ssh-keygen -t dsa</code> erstellt werden. Dieser Parameter ist jedoch optional; Standard Password Authentifizierung wird als Fallback-Methode benutzt wenn <code>SSHKEY</code> nicht definiert ist.
Die <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> Manualpage enthält detaillierte Informationen zu SSH und die entsprechenden Schritte zur Erstellung und Verwendung von Schlüsseln.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Benutzerkonto zum Hochladen von Dateien auf den Update-Server.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Verzeichnis auf dem Update-Server, in welches die Dateien hochgeladen werden.</td></tr></tbody></table></div><div class=paragraph><p>Die Standard <span class=filename>build.conf</span>, die mit den <code>freebsd-update-server</code> Quellen ausgeliefert wird ist geeignet um i386 Releases von FreeBSD zu bauen. Als Beispiel für den Aufbau eines Update-Servers für andere Architekturen beschreiben die folgenden Schritte die Konfiguration für amd64:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Erstellen Sie eine Bau-Umgebung für amd64:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>mkdir</span> <span class=nt>-p</span> /usr/local/freebsd-update-server/scripts/7.2-RELEASE/amd64</code></pre></div></div></li><li><p>Installieren Sie eine <span class=filename>build.conf</span> in das neu erstellte Verzeichnis. Die Konfigurationsoptionen für FreeBSD 7.2-RELEASE auf amd64 sollten ähnlich wie die folgenden sein:</p><div class="literalblock programlisting"><div class=content><pre># SHA256 hash of RELEASE disc1.iso image.
export RELH=1ea1f6f652d7c5f5eab7ef9f8edbed50cb664b08ed761850f95f48e86cc71ef5 <i class=conum data-value=1></i><b>(1)</b>
# Components of the world, source, and kernels
export WORLDPARTS=&#34;base catpages dict doc games info manpages proflibs lib32&#34;
export SOURCEPARTS=&#34;base bin contrib crypto etc games gnu include krb5  \
                lib libexec release rescue sbin secure share sys tools  \
                ubin usbin cddl&#34;
export KERNELPARTS=&#34;generic&#34;

# EOL date
export EOL=1275289200 <i class=conum data-value=2></i><b>(2)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Der <a href="https://man.freebsd.org/cgi/man.cgi?query=sha256&amp;sektion=1&amp;format=html">sha256(1)</a> Fingerabdruck für die gewünschte Version wird innerhalb der jeweiligen <a href=https://www.FreeBSD.org/releases/>Release-Ankündigung</a> veröffentlicht.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Um die "End of Life" Nummer für die <span class=filename>build.conf</span> zu generieren, beziehen Sie sich bitte auf "Estimated EOL" auf der <a href=https://www.FreeBSD.org/security/security/>FreeBSD Security Webseite</a>. Der Wert für <code>EOL</code> kann aus dem Datum, das auf der Webseite veröffentlicht ist, abgeleitet werden. Benutzen Sie dafür das Werkzeug <a href="https://man.freebsd.org/cgi/man.cgi?query=date&amp;sektion=1&amp;format=html">date(1)</a>. Dazu ein Beispiel:<div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>date</span> <span class=nt>-j</span> <span class=nt>-f</span> <span class=s1>&#39;%Y%m%d-%H%M%S&#39;</span> <span class=s1>&#39;20090401-000000&#39;</span> <span class=s1>&#39;+%s&#39;</span></code></pre></div></div></td></tr></tbody></table></div></li></ol></div></div></div></div></div><div class=sect1><h2 id=build>5. Den Update Code bauen<a class=anchor href=#build></a></h2><div class=sectionbody><div class=paragraph><p>Der erste Schritt ist das Ausführen von <span class=filename>scripts/make.sh</span>. Dieses Skript baut einige Binärdateien, erstellt Verzeichnisse und einen RSA Signaturschlüssel für die Genehmigung des Bau. In diesem Schritt müssen Sie auch eine Passphrase für die Erstellung des Signaturschlüssels angeben.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh scripts/make.sh</span>
cc <span class=nt>-O2</span> <span class=nt>-fno-strict-aliasing</span> <span class=nt>-pipe</span>   findstamps.c  <span class=nt>-o</span> findstamps
findstamps.c: In <span class=k>function</span> <span class=s1>&#39;usage&#39;</span>:
findstamps.c:45: warning: incompatible implicit declaration of built-in <span class=k>function</span> <span class=s1>&#39;exit&#39;</span>
cc <span class=nt>-O2</span> <span class=nt>-fno-strict-aliasing</span> <span class=nt>-pipe</span>   unstamp.c  <span class=nt>-o</span> unstamp
<span class=nb>install </span>findstamps ../bin
<span class=nb>install </span>unstamp ../bin
<span class=nb>rm</span> <span class=nt>-f</span> findstamps unstamp
Generating RSA private key, 4096 bit long modulus
................................................................................++
...................++
e is 65537 <span class=o>(</span>0x10001<span class=o>)</span>

Public key fingerprint:
27ef53e48dc869eea6c3136091cc6ab8589f967559824779e855d58a2294de9e

Encrypting signing key <span class=k>for </span>root
enter aes-256-cbc encryption password:
Verifying - enter aes-256-cbc encryption password:</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Notieren Sie sich den Fingerabdruck des erzeugten Schlüssels. Dieser Wert wird in <span class=filename>/etc/freebsd-update.conf</span> für die binären Updates benötigt.</p></div></td></tr></tbody></table></div><div class=paragraph><p>An dieser Stelle sind wir bereit, den Bauprozess zu starten.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/local/freebsd-update-server</span>
<span class=c># sh scripts/init.sh amd64 7.2-RELEASE</span></code></pre></div></div><div class=paragraph><p>Hier folgt ein Beispiel für einen <em>ersten</em> Bauprozess.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh scripts/init.sh amd64 7.2-RELEASE</span>
Mon Aug 24 16:04:36 PDT 2009 Starting fetch <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
/usr/local/freebsd-update-server/work/7.2-RELE100% of  588 MB  359 kBps 00m00s
Mon Aug 24 16:32:38 PDT 2009 Verifying disc1 <span class=nb>hash </span><span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 16:32:44 PDT 2009 Extracting components <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 16:34:05 PDT 2009 Constructing world+src image <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 16:35:57 PDT 2009 Extracting world+src <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 23:36:24 UTC 2009 Building world <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Tue Aug 25 00:31:29 UTC 2009 Distributing world <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Tue Aug 25 00:32:36 UTC 2009 Building and distributing kernels <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Tue Aug 25 00:44:44 UTC 2009 Constructing world components <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Tue Aug 25 00:44:56 UTC 2009 Distributing <span class=nb>source </span><span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 17:46:18 PDT 2009 Moving components into staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 17:46:33 PDT 2009 Identifying extra documentation <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 17:47:13 PDT 2009 Extracting extra docs <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 17:47:18 PDT 2009 Indexing release <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 17:50:44 PDT 2009 Indexing world0 <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE

Files built but not released:
Files released but not built:
Files which differ by more than contents:
Files which differ between release and build:
kernel|generic|/GENERIC/hptrr.ko
kernel|generic|/GENERIC/kernel
src|sys|/sys/conf/newvers.sh
world|base|/boot/loader
world|base|/boot/pxeboot
world|base|/etc/mail/freebsd.cf
world|base|/etc/mail/freebsd.submit.cf
world|base|/etc/mail/sendmail.cf
world|base|/etc/mail/submit.cf
world|base|/lib/libcrypto.so.5
world|base|/usr/bin/ntpq
world|base|/usr/lib/libalias.a
world|base|/usr/lib/libalias_cuseeme.a
world|base|/usr/lib/libalias_dummy.a
world|base|/usr/lib/libalias_ftp.a
...</code></pre></div></div><div class=paragraph><p>Anschließend wird das Basissystem mit den dazugehörigen Patches erneut gebaut. Eine detaillierte Erklärung dazu finden Sie in <span class=filename>scripts/build.subr</span>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Während der zweiten Bauphase wird der Network Time Protocol Dienst, <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a>, ausgeschaltet. Per <code>Colin Percival &lt;<a href=mailto:cperciva@FreeBSD.org>cperciva@FreeBSD.org</a>></code>, emeritierter Security Officer von FreeBSD, "Der <a href=https://svnweb.freebsd.org/base/user/cperciva/freebsd-update-build/>freebsd-update-server</a> Code muss Zeitstempel, welche in Dateien gespeichert sind, identifizieren, sodass festgestellt werden kann, welche Dateien aktualisiert werden müssen. Dies geschieht, indem zwei Builds erstellt werden die 400 Tage auseinander liegen und anschließend die Ergebnisse verglichen werden."</p></div></td></tr></tbody></table></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Mon Aug 24 17:54:07 PDT 2009 Extracting world+src <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Sep 29 00:54:34 UTC 2010 Building world <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Sep 29 01:49:42 UTC 2010 Distributing world <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Sep 29 01:50:50 UTC 2010 Building and distributing kernels <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Sep 29 02:02:56 UTC 2010 Constructing world components <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Sep 29 02:03:08 UTC 2010 Distributing <span class=nb>source </span><span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Tue Sep 28 19:04:31 PDT 2010 Moving components into staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 19:04:46 PDT 2009 Extracting extra docs <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 19:04:51 PDT 2009 Indexing world1 <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 19:08:04 PDT 2009 Locating build stamps <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 19:10:19 PDT 2009 Cleaning staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 19:10:19 PDT 2009 Preparing to copy files into staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 19:10:20 PDT 2009 Copying data files into staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 12:16:57 PDT 2009 Copying metadata files into staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Mon Aug 24 12:16:59 PDT 2009 Constructing metadata index and tag <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE

Files found which include build stamps:
kernel|generic|/GENERIC/hptrr.ko
kernel|generic|/GENERIC/kernel
world|base|/boot/loader
world|base|/boot/pxeboot
world|base|/etc/mail/freebsd.cf
world|base|/etc/mail/freebsd.submit.cf
world|base|/etc/mail/sendmail.cf
world|base|/etc/mail/submit.cf
world|base|/lib/libcrypto.so.5
world|base|/usr/bin/ntpq
world|base|/usr/include/osreldate.h
world|base|/usr/lib/libalias.a
world|base|/usr/lib/libalias_cuseeme.a
world|base|/usr/lib/libalias_dummy.a
world|base|/usr/lib/libalias_ftp.a
...</code></pre></div></div><div class=paragraph><p>Schlussendlich wird der Bauprozess fertiggestellt.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Values of build stamps, excluding library archive headers:
v1.2 <span class=o>(</span>Aug 25 2009 00:40:36<span class=o>)</span>
v1.2 <span class=o>(</span>Aug 25 2009 00:38:22<span class=o>)</span>
@<span class=o>(</span><span class=c>#)FreeBSD 7.2-RELEASE #0: Tue Aug 25 00:38:29 UTC 2009</span>
FreeBSD 7.2-RELEASE <span class=c>#0: Tue Aug 25 00:38:29 UTC 2009</span>
    root@server.myhost.com:/usr/obj/usr/src/sys/GENERIC
7.2-RELEASE
Mon Aug 24 23:55:25 UTC 2009
Mon Aug 24 23:55:25 UTC 2009
<span class=c>##### built by root@server.myhost.com on Tue Aug 25 00:16:15 UTC 2009</span>
<span class=c>##### built by root@server.myhost.com on Tue Aug 25 00:16:15 UTC 2009</span>
<span class=c>##### built by root@server.myhost.com on Tue Aug 25 00:16:15 UTC 2009</span>
<span class=c>##### built by root@server.myhost.com on Tue Aug 25 00:16:15 UTC 2009</span>
Mon Aug 24 23:46:47 UTC 2009
ntpq 4.2.4p5-a Mon Aug 24 23:55:53 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
 <span class=k>*</span> Copyright <span class=o>(</span>c<span class=o>)</span> 1992-2009 The FreeBSD Project.
Mon Aug 24 23:46:47 UTC 2009
Mon Aug 24 23:55:40 UTC 2009
Aug 25 2009
ntpd 4.2.4p5-a Mon Aug 24 23:55:52 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
ntpdate 4.2.4p5-a Mon Aug 24 23:55:53 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
ntpdc 4.2.4p5-a Mon Aug 24 23:55:53 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
Tue Aug 25 00:21:21 UTC 2009
Tue Aug 25 00:21:21 UTC 2009
Tue Aug 25 00:21:21 UTC 2009
Mon Aug 24 23:46:47 UTC 2009

FreeBSD/amd64 7.2-RELEASE initialization build complete.  Please
review the list of build stamps printed above to confirm that
they look sensible, <span class=k>then </span>run
<span class=c># sh -e approve.sh amd64 7.2-RELEASE</span>
to sign the release.</code></pre></div></div><div class=paragraph><p>Genehmigen Sie den Bau, wenn alles korrekt ist. Weitere Informationen zur korrekten Bestimmung finden Sie in der Quelldatei namens <span class=filename>USAGE</span>. Führen Sie, wie angegeben <span class=filename>scripts/approve.sh</span> aus. Dieser Schritt unterschreibt das Release und verschiebt die Komponenten an einen Sammelpunkt, wo sie für den Upload verwendet werden können.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/local/freebsd-update-server</span>
<span class=c># sh scripts/mountkey.sh</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh -e scripts/approve.sh amd64 7.2-RELEASE</span>
Wed Aug 26 12:50:06 PDT 2009 Signing build <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Aug 26 12:50:06 PDT 2009 Copying files to patch <span class=nb>source </span>directories <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Aug 26 12:50:06 PDT 2009 Copying files to upload staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Aug 26 12:50:07 PDT 2009 Updating databases <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE
Wed Aug 26 12:50:07 PDT 2009 Cleaning staging area <span class=k>for </span>FreeBSD/amd64 7.2-RELEASE</code></pre></div></div><div class=paragraph><p>Nachdem der Genehmigungsprozess abgeschlossen ist, kann der Upload gestartet werden.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/local/freebsd-update-server</span>
<span class=c># sh scripts/upload.sh amd64 7.2-RELEASE</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Wenn der Update-Code erneut hochgeladen werden muss, kann dies durch die Änderung des öffentlichen Distributionsverzeichnisses für das Ziel-Release und der Aktualisierung der Attribute für die <em>hochgeladene</em> Datei geschehen.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/local/freebsd-update-server/pub/7.2-RELEASE/amd64</span>
<span class=c># touch -t 200801010101.01 uploaded</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Um die Updates zu verteilen, müssen die hochgeladenen Dateien im Document Root des Webservers liegen. Die genaue Konfiguration hängt von dem verwendeten Webserver ab. Für den Apache Webserver, beziehen Sie sich bitte auf das Kapitel <a href=https://docs.freebsd.org/de/books/handbook/network-servers/#network-apache>Konfiguration des Apache Servers</a> im Handbuch.</p></div><div class=paragraph><p>Aktualisieren Sie <code>KeyPrint</code> und <code>ServerName</code> in der <span class=filename>/etc/freebsd-update.conf</span> des Clients und führen Sie das Update, wie im Kapitel <a href=https://docs.freebsd.org/de/books/handbook/updating-upgrading/#updating-upgrading-freebsdupdate>FreeBSD Update</a> des Handbuchs beschrieben, aus.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>Damit FreeBSD Update Server ordnungsgemäß funktioniert, muss sowohl das <em>current</em> Release als auch das Release <em>auf welches Sie aktualisieren wollen</em> neu gebaut werden. Dies ist notwendig, um die Unterschiede von Dateien zwischen den beiden Releases bestimmen zu können. Zum Beispiel beim Upgrade eines FreeBSD Systems von 7.1-RELEASE auf 7.2-RELEASE, müssen für beide Versionen Updates gebaut und auf den Webserver hochgeladen werden.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Als Referenz wird der gesamte Verlauf von <a href=../../../source/articles/freebsd-update-server/init.txt>init.sh</a> beigefügt.</p></div></div></div><div class=sect1><h2 id=patch>6. Eine Fehlerkorrektur erstellen<a class=anchor href=#patch></a></h2><div class=sectionbody><div class=paragraph><p>Jedes Mal, wenn ein <a href=https://www.FreeBSD.org/security/advisories/>Sicherheits-Hinweis</a> oder ein <a href=https://www.FreeBSD.org/security/notices/>Fehler-Hinweis</a> angekündigt wird, kann eine Fehlerkorrektur gebaut werden.</p></div><div class=paragraph><p>Für dieses Beispiel wird 7.1-RELEASE benutzt.</p></div><div class=paragraph><p>Für den Bau eines anderen Release werden ein paar Annahmen getroffen:</p></div><div class=ulist><ul><li><p>Richten Sie die korrekte Verzeichnisstruktur für den ersten Bau ein.</p></li><li><p>Führen Sie einen ersten Bau für 7.1-RELEASE aus.</p></li></ul></div><div class=paragraph><p>Erstellen Sie das Korrekturverzeichnis des jeweiligen Releases unter <span class=filename>/usr/local/freebsd-update-server/patches/</span>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>mkdir</span> <span class=nt>-p</span> /usr/local/freebsd-update-server/patches/7.1-RELEASE/
% <span class=nb>cd</span> /usr/local/freebsd-update-server/patches/7.1-RELEASE</code></pre></div></div><div class=paragraph><p>Als Beispiel nehmen Sie die Korrektur für <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a>. Lesen Sie den Hinweis und laden Sie die erforderliche Datei von <a href=https://www.FreeBSD.org/security/advisories/>FreeBSD Sicherheits-Hinweise</a> herunter. Weitere Informationen zur Interpretation der Sicherheitshinweise finden Sie im <a href=https://docs.freebsd.org/de/books/handbook/security#security-advisories>FreeBSD Handbuch</a>.</p></div><div class=paragraph><p>In der <a href=https://security.freebsd.org/advisories/FreeBSD-SA-09:12.bind.asc>Sicherheits Anweisung</a>, nennt sich dieser Hinweis <code>SA-09:12.bind</code>. Nach dem Herunterladen der Datei, ist es erforderlich, die Datei auf einen geeigneten Patch-Level umzubenennen. Es steht Ihnen frei den Namen frei zu wählen, es wird jedoch nahegelegt, diesen im Einklang mit dem offiziellen FreeBSD Patch-Level zu halten. Für diesen Bau folgen wir der derzeit gängigen Praxis von FreeBSD und benennen sie <code>p7</code>. Benennen Sie die Datei um:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> /usr/local/freebsd-update-server/patches/7.1-RELEASE/<span class=p>;</span> <span class=nb>mv </span>bind.patch 7-SA-09:12.bind</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Wenn ein Patch-Level gebaut wird, wird davon ausgegangen, dass die bisherigen Korrekturen bereits vorhanden sind. Wenn der Bau läuft, werden alle Korrekturen aus dem Patchverzeichnis mit gebaut.</p></div><div class=paragraph><p>Es können auch selbsterstellte Korrekturen zum Bau hinzugefügt werden. Benutzen Sie die Zahl Null, oder jede andere Zahl.</p></div></td></tr></tbody></table></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Es liegt in der Verantwortung des Administrators des FreeBSD Update Server geeignete Maßnahmen zu treffen, um die Authentizität jeder Fehlerkorrektur zu überprüfen.</p></div></td></tr></tbody></table></div><div class=paragraph><p>An dieser Stelle sind wir bereit, einen <em>Diff</em> zu bauen. Die Software prüft zunächst, ob <span class=filename>scripts/init.sh</span> für das jeweilige Release gelaufen ist, bevor mit dem Bau des Diff begonnen wird.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/local/freebsd-update-server</span>
<span class=c># sh scripts/diff.sh amd64 7.1-RELEASE 7</span></code></pre></div></div><div class=paragraph><p>Es folgt ein Beispiel für einen <em>Diff</em> Bauprozess.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh -e scripts/diff.sh amd64 7.1-RELEASE 7</span>
Wed Aug 26 10:09:59 PDT 2009 Extracting world+src <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 17:10:25 UTC 2009 Building world <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:05:11 UTC 2009 Distributing world <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:06:16 UTC 2009 Building and distributing kernels <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:17:50 UTC 2009 Constructing world components <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:18:02 UTC 2009 Distributing <span class=nb>source </span><span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:19:23 PDT 2009 Moving components into staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:19:37 PDT 2009 Extracting extra docs <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:19:42 PDT 2009 Indexing world0 <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:23:02 PDT 2009 Extracting world+src <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 18:23:29 UTC 2010 Building world <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:18:15 UTC 2010 Distributing world <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:19:18 UTC 2010 Building and distributing kernels <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:30:52 UTC 2010 Constructing world components <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:31:03 UTC 2010 Distributing <span class=nb>source </span><span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 12:32:25 PDT 2010 Moving components into staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:32:39 PDT 2009 Extracting extra docs <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:32:43 PDT 2009 Indexing world1 <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:35:54 PDT 2009 Locating build stamps <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:36:58 PDT 2009 Reverting changes due to build stamps <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:37:14 PDT 2009 Cleaning staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:37:14 PDT 2009 Preparing to copy files into staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:37:15 PDT 2009 Copying data files into staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:43:23 PDT 2009 Copying metadata files into staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:43:25 PDT 2009 Constructing metadata index and tag <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE-p7
...
Files found which include build stamps:
kernel|generic|/GENERIC/hptrr.ko
kernel|generic|/GENERIC/kernel
world|base|/boot/loader
world|base|/boot/pxeboot
world|base|/etc/mail/freebsd.cf
world|base|/etc/mail/freebsd.submit.cf
world|base|/etc/mail/sendmail.cf
world|base|/etc/mail/submit.cf
world|base|/lib/libcrypto.so.5
world|base|/usr/bin/ntpq
world|base|/usr/include/osreldate.h
world|base|/usr/lib/libalias.a
world|base|/usr/lib/libalias_cuseeme.a
world|base|/usr/lib/libalias_dummy.a
world|base|/usr/lib/libalias_ftp.a
...
Values of build stamps, excluding library archive headers:
v1.2 <span class=o>(</span>Aug 26 2009 18:13:46<span class=o>)</span>
v1.2 <span class=o>(</span>Aug 26 2009 18:11:44<span class=o>)</span>
@<span class=o>()</span>FreeBSD 7.1-RELEASE-p7 0: Wed Aug 26 18:11:50 UTC 2009
FreeBSD 7.1-RELEASE-p7 0: Wed Aug 26 18:11:50 UTC 2009
    root@server.myhost.com:/usr/obj/usr/src/sys/GENERIC
7.1-RELEASE-p7
Wed Aug 26 17:29:15 UTC 2009
Wed Aug 26 17:29:15 UTC 2009
 built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
 built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
 built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
 built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
Wed Aug 26 17:20:39 UTC 2009
ntpq 4.2.4p5-a Wed Aug 26 17:29:42 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
 <span class=k>*</span> Copyright <span class=o>(</span>c<span class=o>)</span> 1992-2009 The FreeBSD Project.
Wed Aug 26 17:20:39 UTC 2009
Wed Aug 26 17:29:30 UTC 2009
Aug 26 2009
ntpd 4.2.4p5-a Wed Aug 26 17:29:41 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
ntpdate 4.2.4p5-a Wed Aug 26 17:29:42 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
ntpdc 4.2.4p5-a Wed Aug 26 17:29:42 UTC 2009 <span class=o>(</span>1<span class=o>)</span>
Wed Aug 26 17:55:02 UTC 2009
Wed Aug 26 17:55:02 UTC 2009
Wed Aug 26 17:55:02 UTC 2009
Wed Aug 26 17:20:39 UTC 2009
...</code></pre></div></div><div class=paragraph><p>Die Updates werden angezeigt und warten auf Genehmigung.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>New updates:
kernel|generic|/GENERIC/kernel.symbols|f|0|0|0555|0|7c8dc176763f96ced0a57fc04e7c1b8d793f27e006dd13e0b499e1474ac47e10|
kernel|generic|/GENERIC/kernel|f|0|0|0555|0|33197e8cf15bbbac263d17f39c153c9d489348c2c534f7ca1120a1183dec67b1|
kernel|generic|/|d|0|0|0755|0||
src|base|/|d|0|0|0755|0||
src|bin|/|d|0|0|0755|0||
src|cddl|/|d|0|0|0755|0||
src|contrib|/contrib/bind9/bin/named/update.c|f|0|10000|0644|0|4d434abf0983df9bc47435670d307fa882ef4b348ed8ca90928d250f42ea0757|
src|contrib|/contrib/bind9/lib/dns/openssldsa_link.c|f|0|10000|0644|0|c6805c39f3da2a06dd3f163f26c314a4692d4cd9a2d929c0acc88d736324f550|
src|contrib|/contrib/bind9/lib/dns/opensslrsa_link.c|f|0|10000|0644|0|fa0f7417ee9da42cc8d0fd96ad24e7a34125e05b5ae075bd6e3238f1c022a712|
...
FreeBSD/amd64 7.1-RELEASE update build complete.  Please review
the list of build stamps printed above and the list of updated
files to confirm that they look sensible, <span class=k>then </span>run
<span class=c># sh -e approve.sh amd64 7.1-RELEASE</span>
to sign the build.</code></pre></div></div><div class=paragraph><p>Folgen Sie dem zuvor erwähnten Verfahren für die Genehmigung des Bauprozesses:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh -e scripts/approve.sh amd64 7.1-RELEASE</span>
Wed Aug 26 12:50:06 PDT 2009 Signing build <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:06 PDT 2009 Copying files to patch <span class=nb>source </span>directories <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:06 PDT 2009 Copying files to upload staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:07 PDT 2009 Updating databases <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:07 PDT 2009 Cleaning staging area <span class=k>for </span>FreeBSD/amd64 7.1-RELEASE

The FreeBSD/amd64 7.1-RELEASE update build has been signed and is
ready to be uploaded.  Remember to run
<span class=c># sh -e umountkey.sh</span>
to unmount the decrypted key once you have finished signing all
the new builds.</code></pre></div></div><div class=paragraph><p>Nachdem Sie den Bau genehmigt haben, starten Sie den Upload der Software:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/local/freebsd-update-server</span>
<span class=c># sh scripts/upload.sh amd64 7.1-RELEASE</span></code></pre></div></div><div class=paragraph><p>Als Referenz wird der gesamte Verlauf von <a href=../../../source/articles/freebsd-update-server/diff.txt>diff.sh</a> beigefügt.</p></div></div></div><div class=sect1><h2 id=tips>7. Tipps<a class=anchor href=#tips></a></h2><div class=sectionbody><div class=ulist><ul><li><p>Wenn Sie ein selbst erstelltes Release über die native <code>make release</code> <a href=https://docs.freebsd.org/en/articles/releng/#release-build>Prozedur</a> bauen, wir der <code>freebsd-update-server</code> Code Ihr Release unterstützen. Als Beispiel können Sie ein Release ohne Ports oder Dokumentation bauen, indem Sie betreffende Funktionalität der Subroutinen <code>findextradocs ()</code>, <code>addextradocs ()</code> entfernen und eine Veränderung des Download-Verzeichnisses in <code>fetchiso ()</code>, in <span class=filename>scripts/build.subr</span>. Als letzten Schritt ändern Sie den <a href="https://man.freebsd.org/cgi/man.cgi?query=sha256&amp;sektion=1&amp;format=html">sha256(1)</a> Hash in <span class=filename>build.conf</span> für Ihr jeweiliges Release und Architektur damit Sie bereit sind, Ihr benutzerdefiniertes Release zu bauen.</p><div class="literalblock programlisting"><div class=content><pre># Compare ${WORKDIR}/release and ${WORKDIR}/$1, identify which parts
# of the world|doc subcomponent are missing from the latter, and
# build a tarball out of them.
findextradocs () {
}
# Add extra docs to ${WORKDIR}/$1
addextradocs () {
}</pre></div></div></li><li><p>Durch das Hinzufügen von <code>-j <em>NUMMER</em></code> zu den <code>buildworld</code> und <code>obj</code> Zielen in <span class=filename>scripts/build.subr</span> kann die Verarbeitung, abhängig von der eingesetzten Hardware, beschleunigt werden. Die Benutzung dieser Optionen auf andere Ziele wird jedoch nicht empfohlen, da sie den Bau unzuverlässig machen können.</p><div class="literalblock programlisting"><div class=content><pre>&gt;               # Build the world
		   log &#34;Building world&#34;
		   cd /usr/src &amp;&amp;
		   make -j 2 ${COMPATFLAGS} buildworld 2&gt;&amp;1
		# Distribute the world
		   log &#34;Distributing world&#34;
		   cd /usr/src/release &amp;&amp;
		   make -j 2 obj &amp;&amp;
		   make ${COMPATFLAGS} release.1 release.2 2&gt;&amp;1</pre></div></div></li><li><p>Erstellen Sie einen geeigneten <a href=https://docs.freebsd.org/de/books/handbook/network-servers#network-dns>DNS</a> SRV Datensatz für den Update-Server, und fügen Sie weitere Server mit verschiedenen Gewichtungen hinzu. Sie können diese Möglichkeit nutzen um Update-Mirror hinzuzufügen. Dieser Tipp ist jedoch nicht notwendig solange Sie keinen redundanten Service anbieten möchten.</p><div class="literalblock programlisting"><div class=content><pre> _http._tcp.update.myserver.com.                  IN SRV   0 2 80   host1.myserver.com.
							     SRV   0 1 80   host2.myserver.com.
							     SRV   0 0 80   host3.myserver.com.</pre></div></div></li></ul></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 3. November 2021 by <a href="https://cgit.freebsd.org/doc/commit/?id=64acd169b8" target=_blank>Sergio Carlavilla Delgado</a></p></div></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#acknowledgments>1. Danksagung</a></li><li><a href=#introduction>2. Einführung</a></li><li><a href=#prerequisites>3. Voraussetzungen</a></li><li><a href=#Configuration>4. Konfiguration: Installation & Setup</a></li><li><a href=#build>5. Den Update Code bauen</a></li><li><a href=#patch>6. Eine Fehlerkorrektur erstellen</a></li><li><a href=#tips>7. Tipps</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/de/articles/freebsd-update-server/freebsd-update-server_de.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/de/_index target=_blank>Edit this page</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/de/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>German</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/de class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/de/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>