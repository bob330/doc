<!doctype html><html class=theme-light lang=de><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/de/books/handbook/jails/><title>Kapitel 14. Jails | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Kapitel 14. Jails"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="de"><meta property="og:url" content="http://172.16.201.134:1313/de/books/handbook/jails/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/de\/books\/handbook\/jails\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/de>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/de/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/de/books>Books</a></li><li><a href=http://172.16.201.134:1313/de/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/de/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=de>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/preface/>Vorwort</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/preface/#preface-audience>Über dieses Buch</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/preface/#preface-changes-from3>Änderungen gegenüber der dritten Auflage</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/preface/#preface-changes-from2>Änderungen gegenüber der zweiten Auflage (2004)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/preface/#preface-changes>Änderungen gegenüber der ersten Auflage (2001)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/preface/#preface-overview>Gliederung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/preface/#preface-conv>Konventionen in diesem Buch</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/preface/#preface-acknowledgements>Danksagung</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/parti/>Teil I. Erste Schritte</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/introduction/>Kapitel 1. Einleitung</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/introduction/#introduction-synopsis>1.1. Überblick</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/introduction/#nutshell>1.2. Willkommen zu FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/introduction/#history>1.3. Über das FreeBSD Projekt</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/>Kapitel 2. FreeBSD installieren</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. Minimale Hardwareanforderungen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-pre>2.3. Vor der Installation</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-start>2.4. Die Installation starten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#using-bsdinstall>2.5. Verwendung von bsdinstall</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-partitioning>2.6. Plattenplatz bereitstellen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-fetching-distribution>2.7. Abrufen der Distributionen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-post>2.8. Benutzerkonten, Zeitzone, Dienste und Sicherheitsoptionen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-network>2.9. Netzwerkschnittstellen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.10. Fehlerbehebung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bsdinstall/#using-live-cd>2.11. Verwendung der Live-CD</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/basics/>Kapitel 3. Grundlagen des FreeBSD Betriebssystems</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#basics-synopsis>3.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#consoles>3.2. Virtuelle Konsolen und Terminals</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#users-synopsis>3.3. Benutzer und grundlegende Account-Verwaltung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#permissions>3.4. Zugriffsrechte</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#dirstructure>3.5. Verzeichnis-Strukturen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#disk-organization>3.6. Festplatten, Slices und Partitionen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#mount-unmount>3.7. Anhängen und Abhängen von Dateisystemen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#basics-processes>3.8. Prozesse und Dämonen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#shells>3.9. Shells</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#editors>3.10. Text-Editoren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#basics-devices>3.11. Geräte und Gerätedateien</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/basics/#basics-more-information>3.12. Manualpages</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/ports/>Kapitel 4. Installieren von Anwendungen: Pakete und Ports</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#ports-synopsis>4.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#ports-overview>4.2. Installation von Software</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#ports-finding-applications>4.3. Suchen einer Anwendung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#pkgng-intro>4.4. Benutzen von pkg zur Verwaltung von Binärpaketen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#ports-using>4.5. Benutzen der Ports-Sammlung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#ports-poudriere>4.6. Pakete mit Poudriere bauen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#ports-nextsteps>4.7. Nach der Installation</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ports/#ports-broken>4.8. Kaputte Ports</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/x11/>Kapitel 5. Das X-Window-System</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x11-synopsis>5.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x-understanding>5.2. Terminologie</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x-install>5.3. Xorg installieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x-config>5.4. Xorg konfigurieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x-fonts>5.5. Schriftarten in Xorg benutzen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x-xdm>5.6. Der X-Display-Manager</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x11-wm>5.7. Grafische Oberflächen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x-compiz-fusion>5.8. Compiz Fusion installieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/x11/#x11-troubleshooting>5.9. Fehlersuche</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/partii/>Teil II. Oft benutzte Funktionen</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/desktop/>Kapitel 6. Desktop-Anwendungen</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/desktop/#desktop-synopsis>6.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/desktop/#desktop-browsers>6.2. Browser</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/desktop/#desktop-productivity>6.3. Büroanwendungen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/desktop/#desktop-viewers>6.4. Anzeigen von Dokumenten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/desktop/#desktop-finance>6.5. Finanzsoftware</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/>Kapitel 7. Multimedia</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/#multimedia-synopsis>7.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/#sound-setup>7.2. Soundkarten einrichten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/#sound-mp3>7.3. MP3-Audio</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/#video-playback>7.4. Videos wiedergeben</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/#tvcard>7.5. TV-Karten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/#mythtv>7.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/multimedia/#scanners>7.7. Scanner</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/kernelconfig/>Kapitel 8. Konfiguration des FreeBSD-Kernels</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Wieso einen eigenen Kernel bauen?</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/kernelconfig/#kernelconfig-devices>8.3. Informationen über die vorhandene Hardware beschaffen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/kernelconfig/#kernelconfig-config>8.4. Die Kernelkonfigurationsdatei</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/kernelconfig/#kernelconfig-building>8.5. Einen angepassten Kernel bauen und installieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/kernelconfig/#kernelconfig-trouble>8.6. Wenn etwas schiefgeht</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/printing/>Kapitel 9. Drucken</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/printing/#printing-quick-start>9.1. Schnellstart</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/printing/#printing-connections>9.2. Druckerverbindungen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/printing/#printing-pdls>9.3. Gebräuchliche Seitenbeschreibungssprachen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/printing/#printing-direct>9.4. Direktes Drucken</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/printing/#printing-lpd>9.5. LPD (Line Printer Daemon)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/printing/#printing-other>9.6. Andere Drucksysteme</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/linuxemu/>Kapitel 10. Linux®-Binärkompatibilität</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Konfiguration der Linux®-Binärkompatibilität</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/linuxemu/#linuxemu-advanced>10.3. Weiterführende Themen</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/partiii/>Teil III. Systemadministration</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/config/>Kapitel 11. Konfiguration und Tuning</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#config-synopsis>11.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-starting-services>11.2. Start von Diensten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-cron>11.3. cron(8) konfigurieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-rcd>11.4. Dienste unter FreeBSD verwalten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#config-network-setup>11.5. Einrichten von Netzwerkkarten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-virtual-hosts>11.6. Virtual Hosts</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-syslog>11.7. Konfiguration der Systemprotokollierung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-configfiles>11.8. Konfigurationsdateien</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-sysctl>11.9. Einstellungen mit sysctl(8)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-disk>11.10. Tuning von Laufwerken</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#configtuning-kernel-limits>11.11. Einstellungen von Kernel Limits</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#adding-swap-space>11.12. Hinzufügen von Swap-Bereichen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/config/#acpi-overview>11.13. Energie- und Ressourcenverwaltung</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/boot/>Kapitel 12. FreeBSDs Bootvorgang</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/boot/#boot-synopsis>12.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/boot/#boot-introduction>12.2. FreeBSDs Bootvorgang</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/boot/#boot-splash>12.3. Willkommensbildschirme während des Bootvorgangs konfigurieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/boot/#device-hints>12.4. Konfiguration von Geräten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/boot/#boot-shutdown>12.5. Der Shutdown-Vorgang</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/security/>Kapitel 13. Sicherheit</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#security-synopsis>13.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#security-intro>13.2. Einführung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#one-time-passwords>13.3. Einmalpasswörter</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#tcpwrappers>13.4. TCP Wrapper</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#kerberos5>13.5. Kerberos</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#openssl>13.6. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#ipsec>13.7. VPN mit IPsec</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#openssh>13.8. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#fs-acl>13.9. Zugriffskontrolllisten für Dateisysteme (ACL)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#security-pkg>13.10. Sicherheitsprobleme in Software von Drittanbietern überwachen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#security-advisories>13.11. FreeBSD Sicherheitshinweise</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#security-accounting>13.12. Prozess-Überwachung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#security-resourcelimits>13.13. Einschränkung von Ressourcen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/security/#security-sudo>13.14. Gemeinsame Administration mit Sudo</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle checked>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/jails/>Kapitel 14. Jails</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/jails/#jails-synopsis>14.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/jails/#jails-terms>14.2. Jails - Definitionen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/jails/#jails-build>14.3. Einrichtung und Verwaltung von Jails</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/jails/#jails-tuning>14.4. Feinabstimmung und Administration</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/jails/#jails-application>14.5. Mehrere Jails aktualisieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/jails/#jails-ezjail>14.6. Verwaltung von Jails mit ezjail</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/mac/>Kapitel 15. Verbindliche Zugriffskontrolle</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-synopsis>15.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-inline-glossary>15.2. Schlüsselbegriffe</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-initial>15.3. Erläuterung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-understandlabel>15.4. MAC Labels verstehen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-planning>15.5. Planung eines Sicherheitsmodells</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-modules>15.6. Modulkonfiguration</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-seeotheruids>15.7. Das MAC Modul seeotheruids</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-bsdextended>15.8. Das MAC Modul bsdextended</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-ifoff>15.9. Das MAC Modul ifoff</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-portacl>15.10. Das MAC Modul portacl</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-partition>15.11. Das MAC Modul partition</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-mls>15.12. Das MAC Modul Multi-Level Security</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-biba>15.13. Das MAC Modul Biba</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-lomac>15.14. Das MAC Modul LOMAC</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-implementing>15.15. Beispiel 1: Nagios in einer MAC Jail</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-userlocked>15.16. Beispiel 2: User Lock Down</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mac/#mac-troubleshoot>15.17. Fehler im MAC beheben</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/audit/>Kapitel 16. Security Event Auditing</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/audit/#audit-synopsis>16.1. Einleitung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/audit/#audit-inline-glossary>16.2. Schlüsselbegriffe</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/audit/#audit-config>16.3. Audit Konfiguration</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/audit/#audit-administration>16.4. Audit-Trails</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/disks/>Kapitel 17. Speichermedien</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#disks-synopsis>17.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#disks-adding>17.2. Hinzufügen von Laufwerken</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#disks-growing>17.3. Partitionen vergrößern</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#usb-disks>17.4. USB Speichermedien</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#creating-cds>17.5. Erstellen und Verwenden von CDs</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#creating-dvds>17.6. DVDs benutzen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#floppies>17.7. Disketten benutzen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#backup-basics>17.8. Datensicherung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#disks-virtual>17.9. Speicherbasierte Laufwerke</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#snapshots>17.10. Schnappschüsse von Dateisystemen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#quotas>17.11. Disk Quotas</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#disks-encrypting>17.12. Partitionen verschlüsseln</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#swap-encrypting>17.13. Den Auslagerungsspeicher verschlüsseln</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/disks/#disks-hast>17.14. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/geom/>Kapitel 18. GEOM: Modulares Framework zur Plattentransformation</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-synopsis>18.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-striping>18.2. RAID0 - Striping</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-mirror>18.3. RAID1 - Spiegelung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-raid3>18.4. RAID3 - Byte-Level Striping mit dedizierter Parität</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-graid>18.5. Software RAID</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-ggate>18.6. GEOM Gate Netzwerk</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-glabel>18.7. Das Labeln von Laufwerken</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/geom/#geom-gjournal>18.8. UFS Journaling in GEOM</a></li></ul></li><li><input type=checkbox id=chapter-73e82560fcb7145b7c0e2ec47af8fc04 class=toggle>
<label class="icon cursor" for=chapter-73e82560fcb7145b7c0e2ec47af8fc04><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/zfs/>Kapitel 19. Das Z-Dateisystem (ZFS)</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-differences>19.1. Was ZFS anders macht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-quickstart>19.2. Schnellstartanleitung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-zpool>19.3. <code>zpool</code> Administration</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-zfs>19.4. <code>zfs</code> Administration</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-zfs-allow>19.5. Delegierbare Administration</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-advanced>19.6. Themen für Fortgeschrittene</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-links>19.7. Zusätzliche Informationen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/zfs/#zfs-term>19.8. ZFS-Eigenschaften und Terminologie</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/filesystems/>Kapitel 20. Dateisystemunterstützung</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/filesystems/#filesystems-synopsis>20.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/filesystems/#filesystems-linux>20.2. Linux® Dateisysteme</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/>Kapitel 21. Virtualisierung</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-synopsis>21.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-guest-parallels>21.2. FreeBSD als Gast-Betriebssystem unter Parallels für Mac OS® X</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-guest-virtualpc>21.3. FreeBSD als Gast-Betriebssystem unter Virtual PC für Windows®</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-guest-vmware>21.4. FreeBSD als Gast-Betriebssystem unter VMware Fusion für Mac OS®</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-guest-virtualbox-guest-additions>21.5. FreeBSD als Gast mit VirtualBox™</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-host-virtualbox>21.6. FreeBSD als Host mit Virtualbox</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-host-bhyve>21.7. FreeBSD als Host mit bhyve</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/virtualization/#virtualization-host-xen>21.8. FreeBSD als Xen™-Host</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/l10n/>Kapitel 22. Lokalisierung – I18N/L10N einrichten und benutzen</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/l10n/#l10n-synopsis>22.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/l10n/#using-localization>22.2. Lokale Anpassungen benutzen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/l10n/#l10n-compiling>22.3. I18N-Programme</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/l10n/#lang-setup>22.4. Lokalisierung für einzelne Sprachen</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/cutting-edge/>Kapitel 23. FreeBSD aktualisieren</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/cutting-edge/#updating-upgrading-synopsis>23.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>23.2. FreeBSD-Update</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/cutting-edge/#updating-upgrading-documentation>23.3. Aktualisieren der Dokumentationssammlung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/cutting-edge/#current-stable>23.4. Einem Entwicklungszweig folgen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/cutting-edge/#makeworld>23.5. FreeBSD aus den Quellen aktualisieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/cutting-edge/#small-lan>23.6. Installation mehrerer Maschinen</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/dtrace/>Kapitel 24. DTrace</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/dtrace/#dtrace-synopsis>24.1. Überblick</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/dtrace/#dtrace-implementation>24.2. Unterschiede in der Implementierung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/dtrace/#dtrace-enable>24.3. Die DTrace Unterstützung aktivieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/dtrace/#dtrace-using>24.4. DTrace verwenden</a></li></ul></li><li><input type=checkbox id=chapter-913e72bfb3d6947b2869d3e9447a6eaa class=toggle>
<label class="icon cursor" for=chapter-913e72bfb3d6947b2869d3e9447a6eaa><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/usb-device-mode/>Kapitel 25. USB Gerätemodus</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/usb-device-mode/#usb-device-mode-synopsis>25.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/usb-device-mode/#usb-device-mode-terminals>25.2. Virtuelle serielle USB-Ports</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/usb-device-mode/#usb-device-mode-network>25.3. Netzwerkkarten im USB-Gerätemodus</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/usb-device-mode/#usb-device-mode-storage>25.4. Virtuelle USB-Speichergeräte</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/partiv/>Teil IV. Netzwerke</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/serialcomms/>Kapitel 26. Serielle Datenübertragung</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/serialcomms/#serial-synopsis>26.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/serialcomms/#serial>26.2. Begriffe und Hardware</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/serialcomms/#term>26.3. Terminals</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/serialcomms/#dialup>26.4. Einwählverbindungen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/serialcomms/#dialout>26.5. Verbindungen nach Außen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/serialcomms/#serialconsole-setup>26.6. Einrichten der seriellen Konsole</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/ppp-and-slip/>Kapitel 27. PPP</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ppp-and-slip/#userppp>27.2. PPP konfigurieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.3. Probleme bei PPP-Verbindungen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ppp-and-slip/#pppoe>27.4. PPP over Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/ppp-and-slip/#pppoa>27.5. PPP over ATM (PPPoA)</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/mail/>Kapitel 28. Elektronische Post (E-Mail)</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-de-term>28.1. Terminologie</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-synopsis>28.2. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-using>28.3. E-Mail Komponenten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#sendmail>28.4. Sendmail-Konfigurationsdateien</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-changingmta>28.5. Wechseln des Mailübertragungs-Agenten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-trouble>28.6. Fehlerbehebung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-advanced>28.7. Weiterführende Themen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#outgoing-only>28.8. Ausgehende E-Mail über einen Relay versenden</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#SMTP-dialup>28.9. E-Mail über Einwahl-Verbindungen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#SMTP-Auth>28.10. SMTP-Authentifizierung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-agents>28.11. E-Mail-Programme</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-fetchmail>28.12. E-Mails mit fetchmail abholen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mail/#mail-procmail>28.13. E-Mails mit procmail filtern</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/>Kapitel 29. Netzwerkserver</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-servers-synopsis>29.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-inetd>29.2. Der inetd"Super-Server"</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-nfs>29.3. Network File System (NFS)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-nis>29.4. Network Information System (NIS)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-ldap>29.5. Lightweight Access Directory Protocol (LDAP)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-dhcp>29.6. Dynamic Host Configuration Protocol (DHCP)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-dns>29.7. Domain Name System (DNS)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-apache>29.8. Apache HTTP-Server</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-ftp>29.9. File Transfer Protocol (FTP)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-samba>29.10. Datei- und Druckserver für Microsoft® Windows®-Clients (Samba)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-ntp>29.11. Die Uhrzeit mit NTP synchronisieren</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/network-servers/#network-iscsi>29.12. iSCSI Initiator und Target Konfiguration</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/firewalls/>Kapitel 30. Firewalls</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/firewalls/#firewalls-intro>30.1. Einführung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/firewalls/#firewalls-concepts>30.2. Firewallkonzepte</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/firewalls/#firewalls-pf>30.3. PF</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/firewalls/#firewalls-ipfw>30.4. IPFW</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/firewalls/#firewalls-ipf>30.5. IPFILTER (IPF)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/firewalls/#firewalls-blacklistd>30.6. Blacklistd</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/>Kapitel 31. Weiterführende Netzwerkthemen</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Übersicht</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-routing>31.2. Gateways und Routen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-wireless>31.3. Drahtlose Netzwerke</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-usb-tethering>31.4. USB Tethering</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-bluetooth>31.5. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-bridging>31.6. LAN-Kopplung mit einer Bridge</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-aggregation>31.7. Link-Aggregation und Failover</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-diskless>31.8. Plattenloser Betrieb mit PXE</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-ipv6>31.9. IPv6</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#carp>31.10. Common Address Redundancy Protocol (CARP)</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/advanced-networking/#network-vlan>31.11. VLANs</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/partv/>Teil V. Anhang</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/mirrors/>Anhang A. Bezugsquellen für FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/mirrors/#mirrors-cdrom>A.1. CD and DVD Sets</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mirrors/#mirrors-ftp>A.2. FTP-Server</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mirrors/#svn>A.3. Benutzen von Subversion</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/mirrors/#mirrors-rsync>A.4. Benutzen von rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/>Anhang B. Bibliografie</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-freebsd>B.1. Bücher speziell für FreeBSD</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-userguides>B.2. Handbücher</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-adminguides>B.3. Administrations-Anleitungen</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-programmers>B.4. Programmierhandbücher</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-osinternals>B.5. Betriebssystem-Interna</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-security>B.6. Sicherheits-Anleitung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-hardware>B.7. Hardware-Anleitung</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-history>B.8. UNIX® Geschichte</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/bibliography/#bibliography-journals>B.9. Zeitschriften, Magazine und Journale</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/eresources/>Anhang C. Ressourcen im Internet</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/eresources/#eresources-www>C.1. Webseiten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/eresources/#eresources-mail>C.2. Mailinglisten</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/eresources/#eresources-news>C.3. Usenet-News</a></li><li><a href=http://172.16.201.134:1313/de/books/handbook/eresources/#eresources-web>C.4. Offizielle Spiegel</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/de/books/handbook/pgpkeys/>Anhang D. OpenPGP-Schlüssel</a><ul><li><a href=http://172.16.201.134:1313/de/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Ansprechpartner</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Kapitel 14. Jails</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#jails-synopsis>14.1. Übersicht</a></li><li><a href=#jails-terms>14.2. Jails - Definitionen</a></li><li><a href=#jails-build>14.3. Einrichtung und Verwaltung von Jails</a></li><li><a href=#jails-tuning>14.4. Feinabstimmung und Administration</a></li><li><a href=#jails-application>14.5. Mehrere Jails aktualisieren</a></li><li><a href=#jails-ezjail>14.6. Verwaltung von Jails mit ezjail</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=jails-synopsis>14.1. Übersicht<a class=anchor href=#jails-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Da die Systemadministration eine schwierige Aufgabe ist, wurden viele Werkzeuge entwickelt, die Administratoren bei der Installation, Konfiguration und Wartung ihrer Systeme unterstützen sollen. Eines dieser Werkzeuge, die verwendet werden können um die Sicherheit eines FreeBSD-Systems zu erhöhen, sind <em>Jails</em>. Jails sind seit FreeBSD 4.X verfügbar und werden ständig in ihrer Nützlichkeit, Leistung, Zuverlässigkeit und Sicherheit verbessert. Jails können als eine Art von Betriebssystem-Virtualisierung angesehen werden.</p></div><div class=paragraph><p>Jails setzen auf dem <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=2&amp;format=html">chroot(2)</a>-Konzept auf, das dazu verwendet wird das root-Verzeichnis einer Reihe von Prozessen zu ändern, um so eine separate, sichere Umgebung zu schaffen. Prozesse, die in einer chroot-Umgebung erstellt wurden, können nicht auf Dateien oder Ressourcen zugreifen, die sich außerhalb dieser Umgebung befinden. Dadurch ist es einem kompromittierten Dienst nicht möglich, das gesamte System zu kompromittieren. Im Laufe der Zeit wurden viele Wege gefunden, um aus einer chroot-Umgebung auszubrechen, so dass es für die Sicherung von Diensten nicht die ideale Lösung ist.</p></div><div class=paragraph><p>Jails verbessern das traditionelle chroot-Konzept auf unterschiedlichste Art und Weise. In einer traditionellen chroot-Umgebung sind Prozesse auf den Bereich des Dateisystems beschränkt, auf den sie zugreifen können. Der Rest der Systemressourcen (wie zum Beispiel eine Reihe von Systembenutzern, die laufenden Prozesse oder das Netzwerk-Subsystem) teilen sich die chroot-Prozesse mit dem Host-System. Jails erweitern dieses Modell nicht nur auf die Virtualisierung des Zugriffs auf das Dateisystem, sondern auch auf eine Reihe von Benutzern und das Netzwerk-Subsystem. Zudem stehen weitere Möglichkeiten zur Verfügung, den Zugriff auf eine Jail-Umgebung zu kontrollieren.</p></div><div class=paragraph><p>Eine Jail zeichnet sich durch folgende Merkmale aus:</p></div><div class=ulist><ul><li><p>Ein Unterverzeichnisbaum: dies ist der Ausgangspunkt der Jail. Einem Prozess, der innerhalb der Jail läuft, ist es nicht mehr möglich, aus diesem Unterverzeichnis auszubrechen.</p></li><li><p>Ein Hostname: dieser Name wird für die Jail verwendet.</p></li><li><p>Eine IP Adresse: diese Adresse wird der Jail zugewiesen. Die IP-Adresse einer Jails ist üblicherweise ein Adress-Alias auf eine existierende Netzwerkschnittstelle.</p></li><li><p>Ein Kommando: der Pfad einer ausführbaren Datei, die innerhalb der Jail ausgeführt werden soll. Dieser Pfad wird relativ zum root-Verzeichnis der Jail-Umgebung angegeben.</p></li></ul></div><div class=paragraph><p>Jails haben einen eigenen Satz von Benutzern und ihren eigenen <code>root</code>-Konto. Die Rechte dieser Benutzer sind nur auf die Jail-Umgebung beschränkt. Der Benutzer <code>root</code> der Jail-Umgebung ist nicht dazu berechtigt, kritische Operationen am System außerhalb der angebundenen Jail-Umgebung durchzuführen.</p></div><div class=paragraph><p>Dieses Kapitel bietet einen Überblick über die Terminologie und die Kommandos zur Verwaltung von FreeBSD Jails. Jails sind ein sehr mächtiges Werkzeug für Administratoren und fortgeschrittene Anwender.</p></div><div class=paragraph><p>Nachdem Sie dieses Kapitel gelesen haben, werden Sie</p></div><div class=ulist><ul><li><p>Wissen, was eine Jail ist und welche Verwendungszwecke es dafür unter FreeBSD gibt.</p></li><li><p>Wissen, wie man eine Jail erstellt, startet und anhält.</p></li><li><p>Die Grundlagen der Jail-Administration (sowohl innerhalb als auch außerhalb des Jails) kennen.</p></li></ul></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>Jails sind ein mächtiges Werkzeug, aber sie sind kein Sicherheits-"Allheilmittel". Es ist wichtig zu beachten, dass es für einen Prozess in der Jail nicht möglich ist, von selbst auszubrechen. Es gibt jedoch Möglichkeiten, in denen ein unprivilegierter Benutzer außerhalb der Jail, mit einem privilegierten Benutzer innerhalb der Jail kooperiert, und somit erhöhte Rechte in der Host-Umgebung erlangt.</p></div><div class=paragraph><p>Den meisten dieser Angriffe kann vorgebeugt werden, indem sichergestellt wird, dass das Rootverzeichnis der Jail für unprivilegierte Benutzer der Host-Umgebung nicht zugänglich ist.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=jails-terms>14.2. Jails - Definitionen<a class=anchor href=#jails-terms></a></h2><div class=sectionbody><div class=paragraph><p>Um die für den Einsatz von Jails benötigten os;-Funktionen, deren Interna sowie die Art und Weise, mit der diese mit anderen Teilen des Betriebssystems interagieren, zu erläutern, werden in diesem Kapitel folgende Definitionen verwendet:</p></div><div class=dlist><dl><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> (-Befehl)</dt><dd><p>Ein Werkzeug, das den FreeBSD-Systemaufruf <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=2&amp;format=html">chroot(2)</a> verwendet, um das Wurzelverzeichnis eines Prozesses und all seiner Nachkömmlinge zu ändern.</p></dd><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=2&amp;format=html">chroot(2)</a> (-Umgebung)</dt><dd><p>Die Umgebung eines Prozesses, der in einem "chroot" läuft. Diese beinhaltet Ressourcen, wie zum Beispiel sichtbare Abschnitte des Dateisystems, verfügbare Benutzer- und Gruppenkennungen, Netzwerkschnittstellen und weitere IPC-Mechanismen und so weiter.</p></dd><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a> (-Befehl)</dt><dd><p>Das Systemadministrationswerkzeug, welches es erlaubt, Prozesse innerhalb der Jail-Umgebung zu starten.</p></dd><dt class=hdlist1>Host (-Benutzer, -Prozess, -System)</dt><dd><p>Das verwaltende System einer Jail-Umgebung. Das Host-System hat Zugriff auf alle verfügbaren Hardwareressourcen und kann sowohl innerhalb als auch außerhalb der Jail-Umgebung Prozesse steuern. Einer der wichtigsten Unterschiede des Host-System einer Jails ist, dass die Einschränkungen, welche für die Superuser-Prozesse innerhalb eines Jails gelten, nicht für die Prozesse des Host-Systems gelten.</p></dd><dt class=hdlist1>Gast (-Benutzer, -Prozess, -System)</dt><dd><p>Ein Prozess, ein Benutzer oder eine andere Instanz, deren Zugriff durch eine FreeBSD-Jail eingeschränkt ist.</p></dd></dl></div></div></div><div class=sect1><h2 id=jails-build>14.3. Einrichtung und Verwaltung von Jails<a class=anchor href=#jails-build></a></h2><div class=sectionbody><div class=paragraph><p>Einige Administratoren unterscheiden zwei verschiedene Jail-Arten: "Komplette" Jails, die ein echtes FreeBSD darstellen und Jails für einen bestimmten "Dienst", die nur einer bestimmten Anwendung oder einem Dienst (der möglicherweise mit besonderen Privilegien laufen soll) gewidmet sind. Dies ist aber nur eine konzeptuelle Unterscheidung, die Einrichtung einer Jail bleibt davon gänzlich unberührt. Bei der Erstellung einer kompletten Jail gibt es zwei Optionen für die Quelle des Userlands: vorkompilierte Binärpakete (im Lieferumfang der Installationsmedien enthalten) oder die Kompilierung aus dem Quelltext.</p></div><div class=sect2><h3 id=_eine_jail_installieren>14.3.1. Eine Jail installieren<a class=anchor href=#_eine_jail_installieren></a></h3><div class=sect3><h4 id=jails-install-internet>14.3.1.1. Eine Jail aus dem Internet installieren<a class=anchor href=#jails-install-internet></a></h4><div class=paragraph><p>Der Werkzeug <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdinstall&amp;sektion=8&amp;format=html">bsdinstall(8)</a> kann verwendet werden, um die für eine Jail benötigten Binärdateien zu holen und zu installieren. Dies geht durch die Auswahl eines Spiegelservers, welche Distributionen in das Zielverzeichnis installiert werden sollen, sowie die grundlegende Konfiguration einer Jail:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bsdinstall jail /pfad/zur/jail</span></code></pre></div></div><div class=paragraph><p>Nachdem der Befehl ausgeführt wurde, wird der Host für den Betrieb der Jail konfiguriert.</p></div></div><div class=sect3><h4 id=jails-install-iso>14.3.1.2. Eine Jail aus einer ISO-Datei installieren<a class=anchor href=#jails-install-iso></a></h4><div class=paragraph><p>Um das Basissystem von Installationsmedien zu installieren, erstellen Sie zunächst das Rootverzeichnis für die Jail. Dazu setzen Sie <code>DESTDIR</code> auf das entsprechende Verzeichnis.</p></div><div class=paragraph><p>Starten Sie eine Shell und legen Sie <code>DESTDIR</code> fest:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh</span>
<span class=c># export DESTDIR=/hier/ist/die/jail</span></code></pre></div></div><div class=paragraph><p>Hängen Sie das Installationsmedium wie in <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> beschrieben ein, wenn Sie von einem ISO-Abbild installieren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t cd9660 /dev/`mdconfig -f cdimage.iso` /mnt</span>
<span class=c># cd /mnt/usr/freebsd-dist/</span></code></pre></div></div><div class=paragraph><p>Extrahieren Sie die Binärdateien aus den Archiven des Installationsmediums in das entsprechende Verzeichnis. Es wird mindestens das "base"-Set benötigt, aber Sie können auch eine komplette Installation durchführen, wenn Sie dies bevorzugen.</p></div><div class=paragraph><p>Um lediglich das Basissystem zu installieren, führen Sie dieses Kommando aus:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tar -xf base.txz -C $DESTDIR</span></code></pre></div></div><div class=paragraph><p>Führen Sie folgendes Kommando aus, um alles außer den Kernel zu installieren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># for set in base ports; do tar -xf $set.txz -C $DESTDIR ; done</span></code></pre></div></div></div><div class=sect3><h4 id=jails-install-source>14.3.1.3. Eine Jail aus den Quellen bauen und installieren<a class=anchor href=#jails-install-source></a></h4><div class=paragraph><p>Die Manualpage <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a> beschreibt die Erstellung einer Jail wie folgt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setenv D /hier/ist/die/jail</span>
<span class=c># mkdir -p $D      </span><i class=conum data-value=1></i><b>(1)</b>
<span class=c># cd /usr/src</span>
<span class=c># make buildworld  </span><i class=conum data-value=2></i><b>(2)</b>
<span class=c># make installworld DESTDIR=$D  </span><i class=conum data-value=3></i><b>(3)</b>
<span class=c># make distribution DESTDIR=$D  </span><i class=conum data-value=4></i><b>(4)</b>
<span class=c># mount -t devfs devfs $D/dev   </span><i class=conum data-value=5></i><b>(5)</b></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Das Festlegen des Installationsorts für das Jail eignet sich am besten als Startpunkt. Hier wird sich die Jail innerhalb des Host-Dateisystems befinden. Eine gute Möglichkeit wäre etwa <span class=filename>/usr/jail/name_der_jail</span>, wobei <code><em>name_der_jail</em></code> den Hostname darstellt, über den die Jail identifiziert werden soll. <span class=filename>/usr/</span> stellt normalerweise ausreichend Platz für eine Jail zur Verfügung. Bedenken Sie, dass eine "komplette" Jail ein Replikat einer jeden Datei der Standardinstallation des FreeBSD-Basissystems enthält.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Wenn Sie bereits ihre Systemanwendungen mittels <code>make world</code> oder <code>make buildworld</code> neu erstellt haben, können Sie diesen Schritt überspringen und die Systemanwendungen in die neue Jail installieren.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Dieser Befehl wird den Verzeichnisbaum mit allen notwendigen Binärdateien, Bibliotheken, Manualpages usw. erstellen.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Der <code>distribution</code>-Befehl lässt make alle benötigten Konfigurationsdateien installieren, es werden also alle installierbaren Dateien aus <span class=filename>/usr/src/etc/</span> in das Verzeichnis <span class=filename>/etc</span> der Jail installiert (also nach <span class=filename>$D/etc/</span>).</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Das Einhängen des <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=8&amp;format=html">devfs(8)</a>-Dateisystems innerhalb der Jail ist nicht unbedingt notwendig. Allerdings benötigt fast jede Anwendung Zugriff auf wenigstens ein Gerät. Es ist daher sehr wichtig, den Zugriff auf Devices aus der Jail heraus zu kontrollieren, da unsaubere Einstellungen es einem Angreifer erlauben könnten, in das System einzudringen. Die Kontrolle über <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=8&amp;format=html">devfs(8)</a> erfolgt durch die in den Manualpages <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=8&amp;format=html">devfs(8)</a> und <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs.conf&amp;sektion=5&amp;format=html">devfs.conf(5)</a> beschriebenen Regeln.</td></tr></tbody></table></div></div></div><div class=sect2><h3 id=_den_host_konfigurieren>14.3.2. Den Host konfigurieren<a class=anchor href=#_den_host_konfigurieren></a></h3><div class=paragraph><p>Ist die Jail erst einmal erstellt, kann sie durch <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a> gestartet werden. <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a> benötigt zwingend mindestens vier Argumente, die in <a href=#jails-synopsis>Übersicht</a> des Handbuchs beschrieben sind. Weitere Argumente sind möglich, um beispielsweise die Jail mit den Berechtigungen eines bestimmten Benutzers laufen zu lassen. Das Argument <code><em>command</em></code> hängt vom Typ der Jail ab; für ein <em>virtuelles System</em> ist <span class=filename>/etc/rc</span> eine gute Wahl, da dies dem Startvorgang eines echten FreeBSD-Systems entspricht. Bei einer <em>Service</em>-Jail hängt dieses von der Art des Dienstes ab, der in der Jail laufen soll.</p></div><div class=paragraph><p>Jails werden häufig mit dem Betriebssystem gestartet, da der <span class=filename>rc</span>-Mechanismus von FreeBSD dafür eine einfach zu realisierende Möglichkeit bietet.</p></div><div class="ulist procedure"><ul><li><p>Konfigurieren Sie die Jail in <span class=filename>/etc/jail.conf</span>:</p><div class="literalblock programlisting"><div class=content><pre>www {
    host.hostname = www.example.org;           # Hostname
    ip4.addr = 192.168.0.10;                   # IP address of the jail
    path = &#34;/usr/jail/www&#34;;                    # Path to the jail
    devfs_ruleset = &#34;www_ruleset&#34;;             # devfs ruleset
    mount.devfs;                               # Mount devfs inside the jail
    exec.start = &#34;/bin/sh /etc/rc&#34;;            # Start command
    exec.stop = &#34;/bin/sh /etc/rc.shutdown&#34;;    # Stop command
}</pre></div></div><div class=paragraph><p>Um die Jails mit dem Betriebssystem zu starten, fügen Sie folgende Zeile in <span class=filename>/etc/rc.conf</span> ein:</p></div><div class="literalblock programlisting"><div class=content><pre>jail_enable=&#34;YES&#34;   # Set to NO to disable starting of any jails</pre></div></div><div class=paragraph><p>Beim Start einer in <a href="https://man.freebsd.org/cgi/man.cgi?query=jail.conf&amp;sektion=5&amp;format=html">jail.conf(5)</a> konfigurierten Jail wird das <span class=filename>/etc/rc</span>-Skript der Jail (das "annimmt", dass es sich in einem kompletten System befindet) aufgerufen. Für Service-Jails sollten die Startskripte der Jail durch das Setzen der Option <code>exec.start</code> entsprechend angepasst werden.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Eine vollständige Liste der Optionen findet sich in der Manualpage <a href="https://man.freebsd.org/cgi/man.cgi?query=jail.conf&amp;sektion=5&amp;format=html">jail.conf(5)</a>.</p></div></td></tr></tbody></table></div></li></ul></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=service&amp;sektion=8&amp;format=html">service(8)</a> kann zum manuellen Starten und Stoppen der Jail genutzt werden, wenn ein Eintrag in <span class=filename>jail.conf</span> angelegt wurde:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service jail start www</span>
<span class=c># service jail stop www</span></code></pre></div></div><div class=paragraph><p>Jails können mit <a href="https://man.freebsd.org/cgi/man.cgi?query=jexec&amp;sektion=8&amp;format=html">jexec(8)</a> heruntergefahren werden. Führen Sie zunächst <a href="https://man.freebsd.org/cgi/man.cgi?query=jls&amp;sektion=8&amp;format=html">jls(8)</a> aus, um die <code>JID</code> der Jail ausfindig zu machen. Anschließend können Sie <a href="https://man.freebsd.org/cgi/man.cgi?query=jexec&amp;sektion=8&amp;format=html">jexec(8)</a> benutzen, um das Shutdown-Skript in der Jail auszuführen.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># jls</span>
   JID  IP Address      Hostname                      Path
     3  192.168.0.10    www                           /usr/jail/www
<span class=c># jexec 3 /etc/rc.shutdown</span></code></pre></div></div><div class=paragraph><p>Weitere Informationen zu diesem Thema finden Sie in der Manualpage <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a>.</p></div></div></div></div><div class=sect1><h2 id=jails-tuning>14.4. Feinabstimmung und Administration<a class=anchor href=#jails-tuning></a></h2><div class=sectionbody><div class=paragraph><p>Es gibt verschiedene Optionen, die für jede Jail gesetzt werden können und verschiedene Wege, ein FreeBSD-Host-System mit Jails zu kombinieren. Dieser Abschnitt zeigt Ihnen:</p></div><div class=ulist><ul><li><p>Einige zur Verfügung stehende Optionen zur Abstimmung des Verhaltens und der Sicherheitseinstellungen, die mit einer Jail-Installation ausgeführt werden können.</p></li><li><p>Einige der Anwendungsprogramme für das Jail-Management, die über die FreeBSD Ports-Sammlung verfügbar sind und genutzt werden können, um Jail-basierte Lösungen allumfassend umzusetzen.</p></li></ul></div><div class=sect2><h3 id=jails-tuning-utilities>14.4.1. Systemwerkzeuge zur Feinabstimmung von Jails in FreeBSD<a class=anchor href=#jails-tuning-utilities></a></h3><div class=paragraph><p>Die Feinabstimmung einer Jail-Konfiguration erfolgt zum Großteil durch das Setzen von <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>-Variablen. Es gibt einen speziellen sysctl-Zweig, der als Basis für die Organisation aller relevanten Optionen dient: Die <code>security.jail.*</code>-Hierarchie der FreeBSD-Kerneloptionen. Die folgende Liste enthält alle jail-bezogenen sysctls (inklusiver ihrer Voreinstellungen). Die Namen sollten selbsterklärend sein, für weitergehende Informationen lesen Sie bitte die Manualpages <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a> und <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>.</p></div><div class=ulist><ul><li><p><code>security.jail.set_hostname_allowed: 1</code></p></li><li><p><code>security.jail.socket_unixiproute_only: 1</code></p></li><li><p><code>security.jail.sysvipc_allowed: 0</code></p></li><li><p><code>security.jail.enforce_statfs: 2</code></p></li><li><p><code>security.jail.allow_raw_sockets: 0</code></p></li><li><p><code>security.jail.chflags_allowed: 0</code></p></li><li><p><code>security.jail.jailed: 0</code></p></li></ul></div><div class=paragraph><p>Diese Variablen können vom Administrator des <em>Host-Systems</em> genutzt werden, um Beschränkungen hinzuzufügen oder aufzuheben, die dem Benutzer <code>root</code> als Vorgabe auferlegt sind. Beachten Sie, dass es einige Beschränkungen gibt, die nicht verändert werden können. Der Benutzer <code>root</code> darf innerhalb der <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a> keine Dateisysteme mounten und unmounten. Ebenso ist es ihm untersagt, das <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=8&amp;format=html">devfs(8)</a>-Regelwerk zu laden oder zu entladen. Er darf weder Firewallregeln setzen, noch administrative Aufgaben erledigen, die Modifikationen am Kernel selbst erfordern (wie beispielsweise das Setzen des <code>Securelevels</code> für den Kernel).</p></div><div class=paragraph><p>Das FreeBSD-Basissystem enthält einen Basissatz an Werkzeugen, um Informationen über aktive Jails zu erlangen und einer Jail administrative Befehle zuzuordnen. Die Befehle <a href="https://man.freebsd.org/cgi/man.cgi?query=jls&amp;sektion=8&amp;format=html">jls(8)</a> und <a href="https://man.freebsd.org/cgi/man.cgi?query=jexec&amp;sektion=8&amp;format=html">jexec(8)</a> sind Teil des FreeBSD-Basissystems und können für folgende Aufgaben verwendet werden:</p></div><div class=ulist><ul><li><p>Das Anzeigen einer Liste der aktiven Jails und ihrer zugehörigen Jail Identifier (JID), ihrer IP-Adresse, ihres Hostnames und ihres Pfades.</p></li><li><p>Das Herstellen einer Verbindung mit einer laufenden Jail, das Starten eines Befehls aus dem Gastsystem heraus oder das Ausführen einer administrativen Aufgabe innerhalb der Jail selbst. Dies ist insbesondere dann nützlich, wenn der Benutzer <code>root</code> die Jail sauber herunterfahren möchte. <a href="https://man.freebsd.org/cgi/man.cgi?query=jexec&amp;sektion=8&amp;format=html">jexec(8)</a> kann auch zum Starten einer Shell innerhalb der Jail genutzt werden, um administrative Aufgaben durchzuführen:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># jexec 1 tcsh</span></code></pre></div></div></li></ul></div></div><div class=sect2><h3 id=jails-tuning-admintools>14.4.2. High-Level-Werkzeuge zur Jail-Administration in der FreeBSD Ports-Sammlung<a class=anchor href=#jails-tuning-admintools></a></h3><div class=paragraph><p>Unter den zahlreichen Werkzeugen für die Administration von Jails ist <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/ezjail/>sysutils/ezjail</a> am vollständigsten und brauchbarsten. Dabei handelt es sich um eine Sammlung von Skripten, die das <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a>-Management vereinfachen. Weitere Informationen zu diesem Werkzeug finden Sie im <a href=#jails-ezjail>Abschnitt über ezjail</a>.</p></div></div><div class=sect2><h3 id=jails-updating>14.4.3. Jails auf dem aktuellen Stand halten<a class=anchor href=#jails-updating></a></h3><div class=paragraph><p>Jails sollten immer vom Host-System auf dem neuesten Stand gehalten werden, da eine Aktualisierung aus einer Jail heraus wahrscheinlich fehlschlägt, da in der Voreinstellung von FreeBSD die Verwendung von <a href="https://man.freebsd.org/cgi/man.cgi?query=chflags&amp;sektion=1&amp;format=html">chflags(1)</a> in einem Jail nicht erlaubt ist und somit der Austausch einiger Dateien verhindert wird. Es ist zwar möglich, dieses Verhalten zu ändern, aber es wird empfohlen, <a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a> zu benutzen, um die Jails zu aktualisieren. Verwenden Sie <code>-b</code> mit dem Pfad der Jail, die Sie aktualisieren möchten.</p></div><div class=paragraph><p>Um die Jail auf das neueste Patch-Release der bereits installierten FreeBSD-Version zu aktualisieren, führen Sie auf dem Host die folgenden Befehle aus:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update -b /hier/ist/die/jail fetch</span>
<span class=c># freebsd-update -b /hier/ist/die/jail install</span></code></pre></div></div><div class=paragraph><p>Um die Jail auf eine neue Haupt- oder Unterversion zu aktualisieren, wird zunächst eine Aktualisierung des Host-Systems durchgeführt, wie in <a href=../cutting-edge/#freebsdupdate-upgrade>“Aktualisierungen an Haupt- und Unterversionen”</a> beschrieben. Nachdem der Host aktualisiert und neu gestartet wurde, kann die Jail aktualisiert werden. Führen Sie folgende Befehle auf dem Host aus, um von 12.0-RELEASE auf 12.1-RELEASE zu aktualisieren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update -b /hier/ist/die/jail --currently-running 12.0-RELEASE -r 12.1-RELEASE upgrade</span>
<span class=c># freebsd-update -b /hier/ist/die/jail install</span>
<span class=c># service jail restart myjail</span>
<span class=c># freebsd-update -b /hier/ist/die/jail install</span></code></pre></div></div><div class=paragraph><p>Wenn es sich um eine Aktualisierung einer Hauptversion handelte, installieren Sie alle installierten Pakete neu und starten Sie die Jail erneut. Dies ist notwendig, da sich die ABI-Version bei einer Aktualisierung zwischen Hauptversionen von FreeBSD ändert. Führen Sie folgende Befehle auf dem Host-System aus:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg -j mymail upgrade -f</span>
<span class=c># service jail restart myjail</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=jails-application>14.5. Mehrere Jails aktualisieren<a class=anchor href=#jails-application></a></h2><div class=sectionbody><div class=paragraph><p>Die Verwaltung von mehreren Jails kann problematisch sein, da jede Jail bei jedem Upgrade komplett neu gebaut werden muss. Dieser Prozess kann sehr zeitaufwändig sein, wenn eine große Anzahl von Jails erstellt oder manuell aktualisiert werden müssen.</p></div><div class=paragraph><p>Dieser Abschnitt beschreibt eine Methode zur Lösung dieses Problems, indem so viel wie möglich zwischen Jails, auf sichere Art und Weise, durch den Einsatz von <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nullfs&amp;sektion=8&amp;format=html">mount_nullfs(8)</a>-Mounts geteilt wird. Dadurch werden Aktualisierungen erleichtert und das Verteilen von verschiedenen Diensten, wie HTTP, DNS und SMTP, auf verschiedene Jails wird attraktiver. Außerdem bietet dieses Verfahren einen einfachen Weg, Jails zu erstellen, zu entfernen und zu aktualisieren.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Es existieren auch einfachere Lösungen, wie zum Beispiel ezjail, das einfachere Methoden zur Administration von Jails verwendet und daher nicht so anspruchsvoll ist, wie der hier beschriebene Aufbau. ezjail wird in <a href=#jails-ezjail>Verwaltung von Jails mit ezjail</a> ausführlich behandelt.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Die Ziele des in diesem Abschnitt beschriebenen Aufbaus sind:</p></div><div class=ulist><ul><li><p>Das Erstellen einer einfachen und gut verständlichen Jail Struktur, die es nicht erfordert für jede Jail ein vollständiges installworld laufen lassen zu müssen.</p></li><li><p>Es einfach zu machen, neue Jails zu erstellen oder alte zu entfernen.</p></li><li><p>Es einfach zu machen, bestehende Jails zu aktualisieren.</p></li><li><p>Es einfach zu machen, einen angepassten FreeBSD-Zweig zu nutzen.</p></li><li><p>Paranoid bezüglich Sicherheit zu sein und Angriffsmöglichkeiten weitgehend zu reduzieren.</p></li><li><p>Soviel Platz und Inodes wie möglich einzusparen.</p></li></ul></div><div class=paragraph><p>Dieses Design ist darauf angewiesen, dass eine read-only-Hauptvorlage in jede Jail hinein gemountet wird und dass jede Jail über wenigstens ein beschreibbares Gerät verfügt. Das Gerät kann hierbei eine separate physikalische Platte oder ein vnode unterstütztes Speichergerät sein. Im folgenden Beispiel wird ein read/write nullfs-Mount genutzt.</p></div><div class=paragraph><p>Das Layout des Dateisystems ist wie folgt:</p></div><div class=ulist><ul><li><p>Die Jails befinden sich unterhalb der <span class=filename>/home</span> Partition.</p></li><li><p>Jede Jail wird unterhalb des <span class=filename>/home/j</span>-Verzeichnisses gemountet.</p></li><li><p><span class=filename>/home/j/mroot</span> ist die Vorlage für jede Jail und die nur lesbare Partition für alle Jails.</p></li><li><p>Unterhalb von <span class=filename>/home/j</span> wird für jede Jail ein leeres Verzeichnis angelegt.</p></li><li><p>Jede Jail bekommt ein <span class=filename>/s</span>-Verzeichnis, das zum read/write-Teilbereich des Systems verlinkt wird.</p></li><li><p>Jede Jail bekommt ihr eigenes read/write-System, das auf <span class=filename>/home/j/skel</span> basiert.</p></li><li><p>Der read/write-Teilbereich jeder Jail wird in <span class=filename>/home/js</span> erstellt.</p></li></ul></div><div class=sect2><h3 id=jails-service-jails-template>14.5.1. Erstellen der Vorlage<a class=anchor href=#jails-service-jails-template></a></h3><div class=paragraph><p>Dieser Abschnitt beschreibt die Schritte, die zum Erstellen der Hauptvorlage notwendig sind.</p></div><div class=paragraph><p>Es wird empfohlen, zunächst das FreeBSD Host-System nach den Anweisungen in <a href=../cutting-edge/#makeworld>“FreeBSD aus den Quellen aktualisieren”</a> auf den aktuellen -RELEASE-Zweig zu aktualisieren. Darüber hinaus verwendet diese Vorlage <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cpdup/>sysutils/cpdup</a>, sowie portsnap zum herunterladen der FreeBSD Ports-Sammlung.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Zuerst erstellen wir eine Verzeichnisstruktur für das read-only-Dateisystem, das die FreeBSD-Binärdateien für die Jails enthalten wird. Anschließend wechseln wir in den FreeBSD-Quellcodebaum und installieren das read-only-Dateisystem in die (Vorlage-)Jail.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /home/j /home/j/mroot</span>
<span class=c># cd /usr/src</span>
<span class=c># make installworld DESTDIR=/home/j/mroot</span></code></pre></div></div></li><li><p>Als nächstes bereiten wir die Ports-Sammlung für die Jails vor und kopieren den FreeBSD Quellcodebaum in die Jail, da dieser für mergemaster benötigt wird:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /home/j/mroot</span>
<span class=c># mkdir usr/ports</span>
<span class=c># portsnap -p /home/j/mroot/usr/ports fetch extract</span>
<span class=c># cpdup /usr/src /home/j/mroot/usr/src</span></code></pre></div></div></li><li><p>Danach wird die Struktur für den read/write-Bereich des Systems erstellt:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /home/j/skel /home/j/skel/home /home/j/skel/usr-X11R6 /home/j/skel/distfiles</span>
<span class=c># mv etc /home/j/skel</span>
<span class=c># mv usr/local /home/j/skel/usr-local</span>
<span class=c># mv tmp /home/j/skel</span>
<span class=c># mv var /home/j/skel</span>
<span class=c># mv root /home/j/skel</span></code></pre></div></div></li><li><p>Nutzen Sie mergemaster, um fehlende Konfigurationsdateien zu installieren. Anschließend werden die von mergemaster erstellten Extra-Verzeichnisse entfernt:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mergemaster -t /home/j/skel/var/tmp/temproot -D /home/j/skel -i</span>
<span class=c># cd /home/j/skel</span>
<span class=c># rm -R bin boot lib libexec mnt proc rescue sbin sys usr dev</span></code></pre></div></div></li><li><p>Nun wird das read/write-Dateisystem mit dem read-only-Dateisystem verlinkt. Vergewissern Sie sich, dass die symbolischen Links an den korrekten <span class=filename>s/</span> Positionen erstellt werden, weil echte Verzeichnisse oder an falschen Positionen erstellte Verzeichnisse die Installation fehlschlagen lassen.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /home/j/mroot</span>
<span class=c># mkdir s</span>
<span class=c># ln -s s/etc etc</span>
<span class=c># ln -s s/home home</span>
<span class=c># ln -s s/root root</span>
<span class=c># ln -s s/usr-local usr/local</span>
<span class=c># ln -s s/usr-X11R6 usr/X11R6</span>
<span class=c># ln -s s/distfiles usr/ports/distfiles</span>
<span class=c># ln -s s/tmp tmp</span>
<span class=c># ln -s s/var var</span></code></pre></div></div></li><li><p>Zuletzt erstellen Sie eine allgemeine <span class=filename>/home/j/skel/etc/make.conf</span> mit folgendem Inhalt:</p><div class="literalblock programlisting"><div class=content><pre>WRKDIRPREFIX?=  /s/portbuild</pre></div></div><div class=paragraph><p>Dies erlaubt es, die FreeBSD-Ports innerhalb jeder Jail zu kompilieren. Das Ports-Verzeichnis ist Teil des read-only System. Der angepasste Pfad des <code>WRKDIRPREFIX</code> macht es möglich, innerhalb des read/write-Bereichs der Jail Ports zu bauen.</p></div></li></ol></div></div><div class=sect2><h3 id=jails-service-jails-creating>14.5.2. Jails erstellen<a class=anchor href=#jails-service-jails-creating></a></h3><div class=paragraph><p>Die Jailvorlage kann nun verwendet werden, um die Jails einzurichten und in <span class=filename>/etc/rc.conf</span> zu konfigurieren. In diesem Beispiel werden drei Jails erstellt: <code>NS</code>, <code>MAIL</code> und <code>WWW</code>.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Fügen Sie die folgenden Zeilen in <span class=filename>/etc/fstab</span> ein, damit die read-only-Vorlage und der read/write-Bereich für alle Jails verfügbar sind:</p><div class="literalblock programlisting"><div class=content><pre>/home/j/mroot   /home/j/ns     nullfs  ro  0   0
/home/j/mroot   /home/j/mail   nullfs  ro  0   0
/home/j/mroot   /home/j/www    nullfs  ro  0   0
/home/js/ns     /home/j/ns/s   nullfs  rw  0   0
/home/js/mail   /home/j/mail/s nullfs  rw  0   0
/home/js/www    /home/j/www/s  nullfs  rw  0   0</pre></div></div><div class=paragraph><p>Um zu verhindern, dass fsck die nullfs-Mounts während des Bootens überprüft oder dass dump die Mounts sichert, müssen die letzten beiden Spalten auf <code>0</code> gesetzt werden.</p></div></li><li><p>Konfigurieren Sie die Jails in <span class=filename>/etc/rc.conf</span>:</p><div class="literalblock programlisting"><div class=content><pre>jail_enable=&#34;YES&#34;
jail_set_hostname_allow=&#34;NO&#34;
jail_list=&#34;ns mail www&#34;
jail_ns_hostname=&#34;ns.example.org&#34;
jail_ns_ip=&#34;192.168.3.17&#34;
jail_ns_rootdir=&#34;/usr/home/j/ns&#34;
jail_ns_devfs_enable=&#34;YES&#34;
jail_mail_hostname=&#34;mail.example.org&#34;
jail_mail_ip=&#34;192.168.3.18&#34;
jail_mail_rootdir=&#34;/usr/home/j/mail&#34;
jail_mail_devfs_enable=&#34;YES&#34;
jail_www_hostname=&#34;www.example.org&#34;
jail_www_ip=&#34;62.123.43.14&#34;
jail_www_rootdir=&#34;/usr/home/j/www&#34;
jail_www_devfs_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Die Variable <code>jail<em>name</em>rootdir</code> zeigt nach <span class=filename>/usr/home</span> statt nach <span class=filename>/home</span>, da der physikalische Pfad von <span class=filename>/home</span> unter FreeBSD <span class=filename>/usr/home</span> lautet. Die Variable <code>jail<em>name</em>rootdir</code> darf im Pfad aber <em>keinen symbolischen Link</em> enthalten, weil die Jail ansonsten nicht gestartet werden kann.</p></div></li><li><p>Erstellen Sie die notwendigen Mountpunkte für die nur lesbaren Bereiche jeder Jail:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /home/j/ns /home/j/mail /home/j/www</span></code></pre></div></div></li><li><p>Installieren Sie mit <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cpdup/>sysutils/cpdup</a> die read/write-Vorlage in jede Jail:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /home/js</span>
<span class=c># cpdup /home/j/skel /home/js/ns</span>
<span class=c># cpdup /home/j/skel /home/js/mail</span>
<span class=c># cpdup /home/j/skel /home/js/www</span></code></pre></div></div></li><li><p>An dieser Stelle werden die Jails erstellt und für den Betrieb vorbereitet. Mounten Sie zuerst die notwendigen Dateisysteme für jede Jail. Danach starten Sie die Jails:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -a</span>
<span class=c># service jail start</span></code></pre></div></div></li></ol></div><div class=paragraph><p>Die Jails sollten nun laufen. Um zu prüfen, ob sie korrekt gestartet wurden, verwenden Sie <code>jls</code>. Die Ausgabe sollte ähnlich der folgenden sein:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># jls</span>
   JID  IP Address      Hostname                      Path
     3  192.168.3.17    ns.example.org                /home/j/ns
     2  192.168.3.18    mail.example.org              /home/j/mail
     1  62.123.43.14    www.example.org               /home/j/www</code></pre></div></div><div class=paragraph><p>An diesem Punkt sollte es möglich sein, sich an jeder Jail anzumelden, Benutzer anzulegen und Dienste zu konfigurieren. Die Spalte <code>JID</code> gibt die Jail-Identifikationsnummer jeder laufenden Jail an. Nutzen Sie den folgenden Befehl, um administrative Aufgaben in der Jail mit der <code>JID``3</code> durchzuführen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># jexec 3 tcsh</span></code></pre></div></div></div><div class=sect2><h3 id=jails-service-jails-upgrading>14.5.3. Jails aktualisieren<a class=anchor href=#jails-service-jails-upgrading></a></h3><div class=paragraph><p>Das Design dieses Aufbaus bietet einen einfachen Weg, bestehende Jails zu aktualisieren, während die Ausfallzeiten minimiert werden. Außerdem bietet es die Möglichkeit, zu älteren Versionen zurückzukehren, falls irgendwelche Probleme auftreten.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Im ersten Schritt wird das Host-System aktualisiert. Anschließend wird eine temporäre neue read-only Vorlage <span class=filename>/home/j/mroot2</span> erstellt.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /home/j/mroot2</span>
<span class=c># cd /usr/src</span>
<span class=c># make installworld DESTDIR=/home/j/mroot2</span>
<span class=c># cd /home/j/mroot2</span>
<span class=c># cpdup /usr/src usr/src</span>
<span class=c># mkdir s</span></code></pre></div></div><div class=paragraph><p><code>installworld</code> erzeugt einige unnötige Verzeichnisse, die nun entfernt werden sollten:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chflags -R 0 var</span>
<span class=c># rm -R etc var root usr/local tmp</span></code></pre></div></div></li><li><p>Erzeugen Sie neue symbolische Links für das Hauptdateisystem:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ln -s s/etc etc</span>
<span class=c># ln -s s/root root</span>
<span class=c># ln -s s/home home</span>
<span class=c># ln -s ../s/usr-local usr/local</span>
<span class=c># ln -s ../s/usr-X11R6 usr/X11R6</span>
<span class=c># ln -s s/tmp tmp</span>
<span class=c># ln -s s/var var</span></code></pre></div></div></li><li><p>Nun können die Jails gestoppt werden:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service jail stop</span></code></pre></div></div></li><li><p>Hängen Sie die originalen Dateisysteme aus, da die read/write-Systeme an das read-only System (<span class=filename>/s</span>) angeschlossen sind:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># umount /home/j/ns/s</span>
<span class=c># umount /home/j/ns</span>
<span class=c># umount /home/j/mail/s</span>
<span class=c># umount /home/j/mail</span>
<span class=c># umount /home/j/www/s</span>
<span class=c># umount /home/j/www</span></code></pre></div></div></li><li><p>Verschieben Sie das alte read-only-Dateisystem und ersetzen Sie es durch das neue Dateisystem. Das alte Dateisystem kann so als Backup dienen, falls etwas schief geht. Die Namensgebung entspricht hier derjenigen bei der Erstellung eines neuen read-only-Dateisystems. Verschieben Sie die originale FreeBSD Ports-Sammlung in das neue Dateisystem, um Platz und Inodes zu sparen:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /home/j</span>
<span class=c># mv mroot mroot.20060601</span>
<span class=c># mv mroot2 mroot</span>
<span class=c># mv mroot.20060601/usr/ports mroot/usr</span></code></pre></div></div></li><li><p>Nun ist die neue read-only-Vorlage fertig. Sie müssen daher nur noch die Dateisysteme erneut mounten und die Jails starten:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -a</span>
<span class=c># service jail start</span></code></pre></div></div></li></ol></div><div class=paragraph><p>Nutzen Sie <code>jls</code> um zu prüfen, ob die Jails korrekt gestartet wurden. Führen Sie innerhalb jeder Jail <code>mergemaster</code> aus, damit die Konfigurationsdateien aktualisiert werden.</p></div></div></div></div><div class=sect1><h2 id=jails-ezjail>14.6. Verwaltung von Jails mit ezjail<a class=anchor href=#jails-ezjail></a></h2><div class=sectionbody><div class=paragraph><p>Das Erstellen und Verwalten von mehreren Jails kann schnell zeitaufwändig und fehleranfällig werden. Dirk Engling’s ezjail automatisiert und vereinfacht viele dieser Aufgaben. Als Vorlage wird ein <em>Basejail</em> erzeugt. Zusätzliche Jails nutzen <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nullfs&amp;sektion=8&amp;format=html">mount_nullfs(8)</a> um viele Verzeichnisse aus der Basejail zu teilen, ohne dabei zusätzlichen Speicherplatz zu belegen. Jedes weitere Jail benötigt daher nur wenige Megabyte an Speicherplatz, bevor die Anwendungen installiert werden.</p></div><div class=paragraph><p>Weitere Vorteile und Merkmale werden im Detail auf der Webseite von ezjail beschrieben: <a href=https://erdgeist.org/arts/software/ezjail/ class=bare>https://erdgeist.org/arts/software/ezjail/</a>.</p></div><div class=sect2><h3 id=jails-ezjail-install>14.6.1. ezjail installieren<a class=anchor href=#jails-ezjail-install></a></h3><div class=paragraph><p>Für die Installation von ezjail wird zunächst eine Loopback-Schnittstelle für die Jails benötigt. Anschließend kann ezjail installiert und der dazugehörige Dienst aktiviert werden.</p></div><div id=jails-ezjail-install-procedure class="olist arabic procedure"><ol class=arabic><li><p>Damit der Verkehr auf der Loopback-Schnittstelle des Jails vom Host-System separiert ist, wird eine zweite Loopback-Schnittstelle in <span class=filename>/etc/rc.conf</span> erstellt:</p><div class="literalblock programlisting"><div class=content><pre>cloned_interfaces=&#34;lo1&#34;</pre></div></div><div class=paragraph><p>Die zusätzliche Schnittstelle <code>lo1</code> wird erstellt, wenn das System neu gestartet wird. Die Schnittstelle kann auch ohne Neustart manuell erstellt werden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif cloneup</span>
Created clone interfaces: lo1.</code></pre></div></div><div class=paragraph><p>Jails können die Aliase dieser sekundären Schnittstelle verwenden, ohne dabei das Host-System zu stören.</p></div><div class=paragraph><p>Der Zugang zur Loopback-Adresse <code>127.0.0.1</code> wird an die erste IP-Adresse umgeleitet, die dem Jail zugewiesen ist. Damit die Loopback-Schnittstelle des Jails der neuen <code>lo1</code>-Schnittstelle zugeordnet werden kann, muss beim Erstellen der Jail diese Schnittstelle als erstes in der Liste der IP-Adressen angegeben werden.</p></div><div class=paragraph><p>Teilen Sie jedem Jail eine Loopback-Adresse aus dem Netzblock <code>127.0.0.0`</code>/8` zu.</p></div></li><li><p>Installieren Sie <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/ezjail/>sysutils/ezjail</a>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/sysutils/ezjail</span>
<span class=c># make install clean</span></code></pre></div></div></li><li><p>Aktivieren Sie ezjail, indem Sie folgende Zeile in <span class=filename>/etc/rc.conf</span> hinzufügen:</p><div class="literalblock programlisting"><div class=content><pre>ezjail_enable=&#34;YES&#34;</pre></div></div></li><li><p>Der Dienst wird automatisch gestartet, wenn das System bootet. Er kann auch direkt für die aktuelle Sitzung gestartet werden:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service ezjail start</span></code></pre></div></div></li></ol></div></div><div class=sect2><h3 id=jails-ezjail-initialsetup>14.6.2. Einrichtung<a class=anchor href=#jails-ezjail-initialsetup></a></h3><div class=paragraph><p>Nach erfolgreicher Installation von ezjail kann die Verzeichnisstruktur für die Basejail erstellt und befüllt werden. Dieser Schritt wird einmalig auf dem Host-System ausgeführt.</p></div><div class=paragraph><p>In diesen beiden Beispielen wird <code>-p</code> verwendet, um die Ports-Sammlung mit <a href="https://man.freebsd.org/cgi/man.cgi?query=portsnap&amp;sektion=8&amp;format=html">portsnap(8)</a> in die Basejail herunterzuladen. Diese Kopie kann dann von allen Jails gemeinsam genutzt werden. Eine separate Kopie der Ports-Sammlung für die Jails ermöglicht die Isolierung der Ports vom Host-System. Die FAQ von ezjail erklärt dies im Detail: <a href=https://erdgeist.org/arts/software/ezjail/#FAQ class=bare>https://erdgeist.org/arts/software/ezjail/#FAQ</a>.</p></div><div id=jails-ezjail-initialsetup-procedure class="olist arabic procedure"><ol class=arabic><li><p>Die Jail mit FreeBSD-RELEASE installieren</p><div class=paragraph><p>Benutzen Sie <code>install</code>, wenn das FreeBSD-RELEASE für die Jail der Version auf dem Host-System entspricht. Wenn beispielsweise auf dem Host-System FreeBSD 10-STABLE installiert ist, wird in der Jail das neueste RELEASE von FreeBSD-10 installiert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin install -p</span></code></pre></div></div></li><li><p>Die Jail mit <code>installworld</code> installieren</p><div class=paragraph><p>Mit <code>ezjail-admin update</code> kann die Basejail mit den Binärdateien aus dem Host-System befüllt werden. Diese Dateien wurden auf dem Host-System mittels <code>buildworld</code> erzeugt.</p></div><div class=paragraph><p>In diesem Beispiel wird FreeBSD 10-STABLE aus den Quellen gebaut. Die Verzeichnisse für die Jail wurden bereits erstellt. Anschließend wird <code>installworld</code> ausgeführt, das <span class=filename>/usr/obj</span> aus dem Host-System in die Basejail installiert.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin update -i -p</span></code></pre></div></div><div class=paragraph><p>In der Voreinstellung wird <span class=filename>/usr/src</span> des Host-Systems verwendet. Ein anderes Quellverzeichnis kann durch die Angabe von <code>-s</code>, oder durch Setzen der Variable <code>ezjail_sourcetree</code> in <span class=filename>/usr/local/etc/ezjail.conf</span> definiert werden.</p></div></li></ol></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Die Ports-Sammlung der Basejail wird mit den anderen Jails geteilt, jedoch werden die heruntergeladenen Distfiles im jeweiligen Jail gespeichert. In der Voreinstellung werden diese Dateien in <span class=filename>/var/ports/distfiles</span> der Jail gespeichert. Wenn die Ports gebaut werden, wird <span class=filename>/var/ports</span> im Jail als Arbeitsverzeichnis genutzt.</p></div></td></tr></tbody></table></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Zum herunterladen der Pakete, für die Installation in der Basejail, wird in der Voreinstellung das FTP-Protokoll verwendet. Firewalls und Proxies können jedoch bei der FTP-Übertragung Probleme verursachen. Das HTTP-Protokoll arbeitet anderes und vermeidet diese Probleme. Sie können eine URL für einen bestimmten Spiegel in <span class=filename>/usr/local/etc/ezjail.conf</span> eintragen:</p></div><div class="literalblock programlisting"><div class=content><pre>ezjail_ftphost=http://ftp.FreeBSD.org</pre></div></div><div class=paragraph><p>Im <a href=../mirrors/#mirrors-ftp>“FTP-Server”</a> finden Sie eine Liste mit Spiegeln.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=jails-ezjail-create>14.6.3. Eine neue Jail erstellen und starten<a class=anchor href=#jails-ezjail-create></a></h3><div class=paragraph><p>Neue Jails werden mit <code>ezjail-admin create</code> erstellt. In diesen Beispielen wird die <code>lo1</code> Loopback-Schnittstelle, wie oben beschrieben, verwendet.</p></div><div id=jails-ezjail-create-steps class="olist arabic procedure"><div class=title>Procedure: Eine neue Jail erstellen und starten</div><ol class=arabic><li><p>Geben Sie bei der Erstellung der Jail einen Namen und die verwendeten Loopback- und Netzwerk-Schnittstellen mit den IP-Adressen an. In diesem Beispiel trägt die Jail den Namen <code>dnsjail</code>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin create dnsjail &#39;lo1|127.0.1.1,em0|192.168.1.50&#39;</span></code></pre></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Die meisten Netzwerkdienste laufen problemlos in einer Jail. Ein paar wenige Netzwerkdienste, vor allem <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> verwenden Netzwerk-Sockets. Aus Sicherheitsgründen werden Netzwerk-Sockets innerhalb der Jails deaktiviert, so dass Dienste, die diese Sockets benötigten, nicht funktionieren werden. Gelegentlich benötigt ein Jail jedoch den Zugriff auf Raw-Sockets. Beispielsweise verwenden Netzwerk-Monitoring-Anwendungen <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a>, um die Verfügbarkeit von anderen Rechnern zu überprüfen. Sollten diese Sockets tatsächlich benötigt werden, können sie durch einen Eintrag in der Konfigurationsdatei von ezjail, <span class=filename>/usr/local/etc/jailname</span>, für einzelne Jails aktiviert werden. Bearbeiten Sie den Eintrag <code>parameters</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>export jail_jailname_parameters=&#34;allow.raw_sockets=1&#34;</pre></div></div><div class=paragraph><p>Aktivieren Sie keine Netzwerk-Sockets, solange die Dienste im Jail sie nicht tatsächlich benötigen.</p></div></td></tr></tbody></table></div></li><li><p>Starten Sie die Jail:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin start dnsjail</span></code></pre></div></div></li><li><p>Starten Sie eine Konsole in der Jail:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin console dnsjail</span></code></pre></div></div></li></ol></div><div class=paragraph><p>Die Jail ist jetzt in Betrieb und die zusätzliche Konfiguration kann nun abgeschlossen werden. Typische Einstellungen an dieser Stelle sind:</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Das <code>root</code>-Passwort setzen</p><div class=paragraph><p>Verbinden Sie sich mit der Jail und setzen Sie das Passwort für den Benutzer <code>root</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin console dnsjail</span>
<span class=c># passwd</span>
Changing <span class=nb>local </span>password <span class=k>for </span>root
New Password:
Retype New Password:</code></pre></div></div></li><li><p>Konfiguration der Zeitzone</p><div class=paragraph><p>Die Zeitzone kann innerhalb der Jail mit <a href="https://man.freebsd.org/cgi/man.cgi?query=tzsetup&amp;sektion=8&amp;format=html">tzsetup(8)</a> gesetzt werden. Um störende Fehlermeldungen zu vermeiden, kann der Eintrag <a href="https://man.freebsd.org/cgi/man.cgi?query=adjkerntz&amp;sektion=8&amp;format=html">adjkerntz(8)</a> in <span class=filename>/etc/crontab</span> auskommentiert werden. Dieser Job versucht die Uhr des Rechners zu aktualisieren, was jedoch in einem Jail fehlschlägt, da die Jail nicht auf diese Hardware zugreifen darf.</p></div></li><li><p>DNS-Server</p><div class=paragraph><p>Tragen Sie die Zeilen für die Nameserver der Domäne in <span class=filename>/etc/resolv.conf</span> ein, damit die Namensauflösung in der Jail funktioniert.</p></div></li><li><p><span class=filename>/etc/hosts</span> anpassen</p><div class=paragraph><p>Ändern Sie die Adresse und fügen Sie den Namen der Jail zu den <code>localhost</code>-Einträgen in <span class=filename>/etc/hosts</span> hinzu.</p></div></li><li><p><span class=filename>/etc/rc.conf</span> konfigurieren</p><div class=paragraph><p>Tragen Sie Konfigurationseinstellungen in <span class=filename>/etc/rc.conf</span> ein. Der Rechnername und die IP-Adresse werden nicht eingestellt, da diese Werte bereits durch die Jail-Konfiguration zur Verfügung gestellt werden.</p></div></li></ol></div><div class=paragraph><p>Nach der Konfiguration der Jail können die Anwendungen, für die die Jail erstellt wurde, installiert werden.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Einige Ports müssen mit speziellen Optionen gebaut werden, damit sie in der Jail verwendet werden können. Zum Beispiel haben die Netzwerk-Monitoring-Pakete <a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/nagios-plugins/>net-mgmt/nagios-plugins</a> und <a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/monitoring-plugins/>net-mgmt/monitoring-plugins</a> eine Option <code>JAIL</code>, die aktiviert werden muss, damit diese Werkzeuge innerhalb einer Jail funktionieren.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=jails-ezjail-update>14.6.4. Jails aktualisieren<a class=anchor href=#jails-ezjail-update></a></h3><div class=sect3><h4 id=jails-ezjail-update-os>14.6.4.1. Das Betriebssystem aktualisieren<a class=anchor href=#jails-ezjail-update-os></a></h4><div class=paragraph><p>Da das Basissystem der Basejail von den anderen Jails gemeinsam genutzt wird, werden bei einem Update der Basejail automatisch alle anderen Jails aktualisiert. Die Aktualisierung kann entweder über den Quellcode oder über binäre Updates erfolgen.</p></div><div class=paragraph><p>Um das Basissystem auf dem Host-System zu bauen und in der Basejail zu installieren, geben Sie folgendes ein:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin update -b</span></code></pre></div></div><div class=paragraph><p>Wenn das Basissystem bereits auf dem Host-System gebaut wurde, kann es in der Basejail installiert werden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin update -i</span></code></pre></div></div><div class=paragraph><p>Binär-Updates verwenden <a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a>. Das Update unterliegt dabei den gleichen Einschränkungen, als wenn <a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a> direkt ausgeführt würde. Vor allem stehen mit dieser Methode nur -RELEASE Versionen von FreeBSD zur Verfügung.</p></div><div class=paragraph><p>Aktualisieren Sie die Basejail auf die neueste FreeBSD-Version des Host-Systems. Zum Beispiel von RELEASE-p1 auf RELEASE-p2.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin update -u</span></code></pre></div></div><div class=paragraph><p>Damit das Basejail aktualisiert werden kann, muss zunächst das Host-System, wie in <a href=../cutting-edge/#freebsdupdate-upgrade>“Aktualisierungen an Haupt- und Unterversionen”</a> beschrieben, aktualisiert werden. Sobald das Host-System aktualisiert und neu gestartet wurde, kann die Basejail aktualisiert werden. Da <a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a> keine Möglichkeit besitzt, die derzeit installierte Version der Basejail zu bestimmen, muss die ursprüngliche Version beim Aufruf mit angegeben werden. Benutzen Sie <a href="https://man.freebsd.org/cgi/man.cgi?query=file&amp;sektion=1&amp;format=html">file(1)</a> um die ursprüngliche Version der Basejail zu bestimmen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># file /usr/jails/basejail/bin/sh</span>
/usr/jails/basejail/bin/sh: ELF 64-bit LSB executable, x86-64, version 1 <span class=o>(</span>FreeBSD<span class=o>)</span>, dynamically linked <span class=o>(</span>uses shared libs<span class=o>)</span>, <span class=k>for </span>FreeBSD 9.3, stripped</code></pre></div></div><div class=paragraph><p>Nutzen Sie diese Information, um die Aktualisierung von <code>9.3-RELEASE</code> auf die aktuelle Version des Host-Systems durchzuführen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin update -U -s 9.3-RELEASE</span></code></pre></div></div><div class=paragraph><p>Nachdem die Basejail aktualisiert ist, muss in jeder Jail <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> ausgeführt werden, um die Konfigurationsdateien zu aktualisieren.</p></div><div class=paragraph><p>Wie <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> verwendet wird, hängt stark vom Zweck und Vertrauenswürdigkeit der Jail ab. Wenn die Dienste oder Benutzer nicht vertrauenswürdig sind, dann sollte <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> nur innerhalb der Jail ausgeführt werden:</p></div><div id=jails-ezjail-update-mergemaster-untrusted class=exampleblock><div class=title>Beispiel 1. <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> in einer nicht vertrauenswürdigen Jail ausführen</div><div class=content><div class=paragraph><p>Entfernen Sie die Verknüpfung von <span class=filename>/usr/src</span> des Jails zur Basejail und erstellen Sie ein neues <span class=filename>/usr/src</span> als Mountpunkt für die Jail. Hängen Sie <span class=filename>/usr/src</span> vom Host-System schreibgeschützt in den Mountpunkt für die Jail ein:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rm /usr/jails/jailname/usr/src</span>
<span class=c># mkdir /usr/jails/jailname/usr/src</span>
<span class=c># mount -t nullfs -o ro /usr/src /usr/jails/jailname/usr/src</span></code></pre></div></div><div class=paragraph><p>Öffnen Sie eine Konsole in der Jail:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin console jailname</span></code></pre></div></div><div class=paragraph><p>Innerhalb der Jail führen Sie dann <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> aus. Danach verlassen Sie die Konsole:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># mergemaster -U</span>
<span class=c># exit</span></code></pre></div></div><div class=paragraph><p>Abschließend können Sie <span class=filename>/usr/src</span> aus der Jail aushängen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># umount /usr/jails/jailname/usr/src</span></code></pre></div></div></div></div><div id=jails-ezjail-update-mergemaster-trusted class=exampleblock><div class=title>Beispiel 2. <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> in einer vertrauenswürdigen Jail ausführen</div><div class=content><div class=paragraph><p>Wenn den Benutzern und den Diensten in der Jail vertraut wird, kann <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> auf dem Host-System ausgeführt werden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mergemaster -U -D /usr/jails/jailname</span></code></pre></div></div></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Nach einem größeren Versionsupdate empfiehlt <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/ezjail/>sysutils/ezjail</a>, sicherzustellen, dass <code>pkg</code> die richtige Version hat. Geben Sie dazu den folgenden Befehl ein, um auf die entsprechende Version zu aktualisieren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg-static upgrade -f pkg</span></code></pre></div></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=jails-ezjail-update-ports>14.6.4.2. Ports aktualisieren<a class=anchor href=#jails-ezjail-update-ports></a></h4><div class=paragraph><p>Die Ports-Sammlung der Basejail wird von den anderen Jails gemeinsam genutzt. Somit genügt es, die Ports-Sammlung in der Basejail zu aktualisieren.</p></div><div class=paragraph><p>Die Ports-Sammlung der Basejail wird mit <a href="https://man.freebsd.org/cgi/man.cgi?query=portsnap&amp;sektion=8&amp;format=html">portsnap(8)</a> aktualisiert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin update -P</span></code></pre></div></div></div></div><div class=sect2><h3 id=jails-ezjail-control>14.6.5. Jails verwalten<a class=anchor href=#jails-ezjail-control></a></h3><div class=sect3><h4 id=jail-ezjail-control-stop-start>14.6.5.1. Jails starten und stoppen<a class=anchor href=#jail-ezjail-control-stop-start></a></h4><div class=paragraph><p>ezjail startet automatisch alle Jails, wenn das System hochfährt. Jails können auch manuell mit <code>stop</code> und <code>start</code> gestoppt und neu gestartet werden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin stop sambajail</span>
Stopping jails: sambajail</code></pre></div></div><div class=paragraph><p>In der Voreinstellung werden die Jails automatisch gestartet, wenn das Host-System hochfährt. Der automatische Start kann mit <code>config</code> deaktiviert werden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin config -r norun seldomjail</span></code></pre></div></div><div class=paragraph><p>Diese Einstellung wird nach einem Neustart des Host-Systems aktiviert. Eine Jail, die bereits läuft, wird hiermit nicht gestoppt.</p></div><div class=paragraph><p>Der automatische Start kann auch aktiviert werden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin config -r run oftenjail</span></code></pre></div></div></div><div class=sect3><h4 id=jails-ezjail-control-backup>14.6.5.2. Jails archivieren und wiederherstellen<a class=anchor href=#jails-ezjail-control-backup></a></h4><div class=paragraph><p>Benutzen Sie <code>archive</code> um ein <span class=filename>.tar.gz</span>-Archiv einer Jail zu erstellen. Der Dateiname wird aus dem Namen der Jail und dem aktuellen Datum zusammengesetzt. Archivdateien werden in <span class=filename>/usr/jails/ezjail_archives</span> abgelegt. Ein alternatives Verzeichnis für die Ablage kann in der Variable <code>ezjail_archivedir</code> der Konfigurationsdatei definiert werden.</p></div><div class=paragraph><p>Die Archivdatei kann an anderer Stelle als Sicherung gespeichert werden, oder eine andere Jail kann daraus mit <code>restore</code> wiederhergestellt werden. Eine neue Jail kann auch aus dem Archiv erstellt werden, was eine bequeme Möglichkeit bietet, bestehende Jails zu klonen.</p></div><div class=paragraph><p>Die Jail <code>wwwserver</code> stoppen und archivieren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin stop wwwserver</span>
Stopping jails: wwwserver.
<span class=c># ezjail-admin archive wwwserver</span>
<span class=c># ls /usr/jails/ezjail-archives/</span>
wwwserver-201407271153.13.tar.gz</code></pre></div></div><div class=paragraph><p>Erstellen Sie aus dem eben erzeugten Archiv eine neue Jail namens <code>wwwserver-clone</code>. Verwenden Sie die Schnittstelle <span class=filename>em1</span> und weisen Sie eine neue IP-Adresse zu, um einen Konflikt mit dem Original zu vermeiden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin create -a /usr/jails/ezjail_archives/wwwserver-201407271153.13.tar.gz wwwserver-clone &#39;lo1|127.0.3.1,em1|192.168.1.51&#39;</span></code></pre></div></div></div></div><div class=sect2><h3 id=jails-ezjail-example-bind>14.6.6. Vollständiges Beispiel: BIND in einer Jail<a class=anchor href=#jails-ezjail-example-bind></a></h3><div class=paragraph><p>Einen BINDDNS-Server innerhalb einer Jail zu betreiben erhöht die Sicherheit, da der Dienst isoliert wird. Dieses Beispiel erstellt einen einfachen caching-only Nameserver.</p></div><div class=ulist><ul><li><p>Die Jail bekommt den Namen <code>dns1</code>.</p></li><li><p>Die Jail erhält die IP-Adresse <code>192.168.1.240</code> auf der Schnittstelle <code>re0</code> des Host-Systems.</p></li><li><p>Die Upstream-DNS-Server des ISPs lauten <code>10.0.0.62</code> und <code>10.0.0.61</code>.</p></li><li><p>Die Basejail wurde bereits erstellt und die Ports-Sammlung installiert, wie in <a href=#jails-ezjail-initialsetup>Einrichtung</a> beschrieben.</p></li></ul></div><div id=jails-ezjail-example-bind-steps class=exampleblock><div class=title>Beispiel 3. BIND in einer Jail laufen lassen</div><div class=content><div class=paragraph><p>Erstellen Sie eine geklonte Loopback-Schnittstelle durch einen Eintrag in <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>cloned_interfaces=&#34;lo1&#34;</pre></div></div><div class=paragraph><p>Erzeugen Sie jetzt die Loopback-Schnittstelle:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif cloneup</span>
Created clone interface: lo1</code></pre></div></div><div class=paragraph><p>Erstellen Sie die Jail:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin create dns1 &#39;lo1|127.0.2.1,re0|192.168.1.240&#39;</span></code></pre></div></div><div class=paragraph><p>Starten Sie die Jail, verbinden Sie sich mit der Konsole und führen Sie die grundlegende Konfiguration durch:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ezjail-admin start dns1</span>
<span class=c># ezjail-admin console dns1</span>
<span class=c># passwd</span>
Changing <span class=nb>local </span>password <span class=k>for </span>root
New Password:
Retype New Password:
<span class=c># tzsetup</span>
<span class=c># sed -i .bak -e &#39;/adjkerntz/ s/^/#/&#39; /etc/crontab</span>
<span class=c># sed -i .bak -e &#39;s/127.0.0.1/127.0.2.1/g; s/localhost.my.domain/dns1.my.domain dns1/&#39; /etc/hosts</span></code></pre></div></div><div class=paragraph><p>Setzen Sie vorübergehend die Upstream-DNS-Server in <span class=filename>/etc/resolv.conf</span>, damit die Ports-Sammlung heruntergeladen werden kann:</p></div><div class="literalblock programlisting"><div class=content><pre>nameserver 10.0.0.62
nameserver 10.0.0.62</pre></div></div><div class=paragraph><p>Immer noch in der Konsole der Jail, installieren Sie <a class=package href=https://cgit.freebsd.org/ports/tree/dns/bind99/>dns/bind99</a>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -C /usr/ports/dns/bind99 install clean</span></code></pre></div></div><div class=paragraph><p>Konfigurieren Sie den Nameserver in <span class=filename>/usr/local/etc/namedb/named.conf</span>.</p></div><div class=paragraph><p>Erstellen Sie eine Zugriffskontrollliste (ACL) der Adressen und Netzwerke, die DNS-Anfragen an diesen Nameserver senden dürfen. Diese Sektion wird vor der Sektion <code>options</code> hinzugefügt, die sich bereits in der Datei befindet:</p></div><div class="literalblock programlisting"><div class=content><pre>...
// or cause huge amounts of useless Internet traffic.

acl &#34;trusted&#34; {
	192.168.1.0/24;
	localhost;
	localnets;
};

options {
...</pre></div></div><div class=paragraph><p>Verwenden Sie die IP-Adresse der Jail in der Direktive <code>listen-on</code>, um DNS-Anfragen von anderen Rechnern aus dem Netzwerk zu akzeptieren:</p></div><div class="literalblock programlisting"><div class=content><pre>	listen-on	{ 192.168.1.240; };</pre></div></div><div class=paragraph><p>Entfernen Sie die Kommentarzeichen <code>/<strong></strong></code><strong> und <code></code></strong><code>/</code>. Tragen Sie die IP-Adressen der Upstream-DNS-Server ein. Unmittelbar nach der Sektion <code>forwarders</code> fügen Sie Verweise auf die bereits definierten ACLs ein:</p></div><div class="literalblock programlisting"><div class=content><pre>	forwarders {
		10.0.0.62;
		10.0.0.61;
	};

	allow-query       { any; };
	allow-recursion   { trusted; };
	allow-query-cache { trusted; };</pre></div></div><div class=paragraph><p>Aktivieren Sie den Dienst in <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>named_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Starten und testen Sie den Nameserver:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service named start</span>
wrote key file <span class=s2>&#34;/usr/local/etc/namedb/rndc.key&#34;</span>
Starting named.
<span class=c># /usr/local/bin/dig @192.168.1.240 freebsd.org</span></code></pre></div></div><div class=paragraph><p>Beinhaltet die Antwort</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=p>;;</span> Got answer<span class=p>;</span></code></pre></div></div><div class=paragraph><p>dann funktioniert der Nameserver. Eine längere Verzögerung, gefolgt von der Antwort</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=p>;;</span> connection timed out<span class=p>;</span> no servers could be reached</code></pre></div></div><div class=paragraph><p>weist auf ein Problem hin. Überprüfen Sie die Konfigurationseinstellungen und stellen Sie sicher, dass alle lokalen Firewalls den DNS-Zugriff auf die Upstream-DNS-Server erlauben.</p></div><div class=paragraph><p>Wie auch jeder andere lokale Rechner, kann der DNS-Server Anfragen für Namensauflösung an sich selbst stellen. Tragen Sie die Adresse des DNS-Servers in die <span class=filename>/etc/resolv.conf</span> der Client-Rechner:</p></div><div class="literalblock programlisting"><div class=content><pre>nameserver 192.168.1.240</pre></div></div><div class=paragraph><p>Ein lokaler DHCP-Server kann die Adresse eines lokalen DNS-Servers automatisch für alle DHCP-Clients zur Verfügung stellen.</p></div></div></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9. März 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/de/books/handbook/security class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/de/books/handbook/mac class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#jails-synopsis>14.1. Übersicht</a></li><li><a href=#jails-terms>14.2. Jails - Definitionen</a></li><li><a href=#jails-build>14.3. Einrichtung und Verwaltung von Jails</a></li><li><a href=#jails-tuning>14.4. Feinabstimmung und Administration</a></li><li><a href=#jails-application>14.5. Mehrere Jails aktualisieren</a></li><li><a href=#jails-ezjail>14.6. Verwaltung von Jails mit ezjail</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/de/books/handbook/handbook_de.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/de/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/de/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>German</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/de class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/de/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>