<!doctype html><html class=theme-light lang=es><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/es/books/handbook/disks/><title>Capítulo 18. Almacenamiento | Portal de documentación de FreeBSD</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Capítulo 18. Almacenamiento"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="es"><meta property="og:url" content="http://172.16.201.134:1313/es/books/handbook/disks/"><meta property="og:site_name" content="Portal de documentación de FreeBSD"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/es\/books\/handbook\/disks\/","name":"Portal de documentación de FreeBSD","headline":"Portal de documentación de FreeBSD","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/es>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/es/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/es/books>Books</a></li><li><a href=http://172.16.201.134:1313/es/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/es/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=es>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/preface/>Prefacio</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/preface/#preface-audience>A quién va dirigido este texto</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/preface/#preface-changes-from2>Cambios desde la segunda edición</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/preface/#preface-changes>Cambios desde la primera edición</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/preface/#preface-overview>Cómo se organiza este libro</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/preface/#preface-conv>Convenciones usadas en este libro</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/preface/#preface-acknowledgements>Agradecimientos</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/parti/>Parte I. Primeros pasos</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/introduction/>Capítulo 1. Introducción</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/introduction/#introcution-synopsis>1.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/introduction/#nutshell>1.2. Bienvenido a FreeBSD</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/introduction/#history>1.3. Acerca del Proyecto FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/install/>Capítulo 2. Instalación de FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-synopsis>2.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-hardware>2.2. Requisitos de hardware</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-pre>2.3. Tareas anteriores a la instalación</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-start>2.4. Inicio de la instalación</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#using-sysinstall>2.5. ¿Qué es sysinstall?</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-steps>2.6. Asignación de espacio en disco</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-choosing>2.7. Elección de qué instalar</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-media>2.8. Elección del medio de instalación</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-final-warning>2.9. El punto sin retorno</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-post>2.10. Después de la instalación</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-trouble>2.11. Solución de problemas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-advanced>2.12. Guía avanzada de instalación</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/install/#install-diff-media>2.13. Cómo preparar su propio medio de instalación</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/basics/>Capítulo 3. Conceptos básicos de Unix</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#basics-synopsis>3.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#consoles>3.2. Consolas virtuales y terminales</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#permissions>3.3. Permisos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#dirstructure>3.4. Estructura de directorios</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#disk-organization>3.5. Organización de disco</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#mount-unmount>3.6. Montaje y desmontaje de sistemas de ficheros</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#basics-processes>3.7. Procesos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#basics-daemons>3.8. Dæmons, señales y cómo matar procesos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#shells>3.9. Shells</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#editors>3.10. Editores de texto</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#basics-devices>3.11. Dispositivos y nodos de dispositivos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#binary-formats>3.12. Formatos binarios</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/basics/#basics-more-information>3.13. Más información</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/ports/>Capítulo 4. Instalación de aplicaciones: packages y ports</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/ports/#ports-synopsis>4.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ports/#ports-overview>4.2. Aproximación a la instalación de software</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ports/#ports-finding-applications>4.3. Cómo encontrar aplicaciones</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ports/#packages-using>4.4. Uso del sistema de packages</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ports/#ports-using>4.5. Uso de la colección de ports</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ports/#ports-nextsteps>4.6. Después de instalar un port</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ports/#ports-broken>4.7. Ports que no funcionan</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/x11/>Capítulo 5. El sistema X Window</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/x11/#x11-synopsis>5.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/x11/#x-understanding>5.2. Entender X</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/x11/#x-install>5.3. Instalar X11</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/x11/#x-config>5.4. Configuración de X11</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/x11/#x-fonts>5.5. Uso de tipos en X11</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/x11/#x-xdm>5.6. El gestor de pantalla X</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/x11/#x11-wm>5.7. Entornos de escritorio</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/partii/>Parte II. Tareas comunes</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/desktop/>Capítulo 6. Aplicaciones de escritorio</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/desktop/#desktop-synopsis>6.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/desktop/#desktop-browsers>6.2. Navegadores</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/desktop/#desktop-productivity>6.3. Productividad</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/desktop/#desktop-viewers>6.4. Visores de documentos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/desktop/#desktop-finance>6.5. Finanzas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/desktop/#desktop-summary>6.6. Resumen</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/multimedia/>Capítulo 7. Multimedia</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/multimedia/#_sinopsis>7.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/multimedia/#sound-setup>7.2. Configuración de la tarjeta de sonido</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/multimedia/#sound-mp3>7.3. Sonido MP3</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/multimedia/#video-playback>7.4. Reproducción de vídeo</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/multimedia/#tvcard>7.5. Configuración de tarjetas de TV</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/multimedia/#scanners>7.6. Escáneres de imágenes</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/>Capítulo 8. Configuración del kernel de FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/#_sinopsis>8.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/#_qué_razones_hay_para_compilar_un_kernel_personalizado>8.2. ¿Qué razones hay para compilar un kernel personalizado?</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/#kernelconfig-devices>8.3. Inventario de hardware del sistema</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/#kernelconfig-modules>8.4. Controladores del kernel, subsistemas y módulos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/#kernelconfig-building>8.5. Compilación e instalación de un kernel personalizado</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/#kernelconfig-config>8.6. El fichero de configuración</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/kernelconfig/#kernelconfig-trouble>8.7. Qué hacer si algo va mal</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/printing/>Capítulo 9. Imprimir</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/printing/#_sinopsis>9.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/printing/#printing-intro-spooler>9.2. Introducción</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/printing/#printing-intro-setup>9.3. Configuración básica</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/printing/#printing-advanced>9.4. Configuración avanzada de impresoras</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/printing/#printing-using>9.5. Cómo utilizar impresoras</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/printing/#printing-lpd-alternatives>9.6. Alternativas a LPD</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/printing/#printing-troubleshooting>9.7. Solución de problemas</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/>Capítulo 10. Compatibilidad binaria con Linux</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Instalación</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#linuxemu-mathematica>10.3. Instalación de Mathematica®</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#linuxemu-maple>10.4. Instalación de Maple™</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#linuxemu-matlab>10.5. Instalación de MATLAB®</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#linuxemu-oracle>10.6. Instalación de Oracle®</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#sapr3>10.7. Instalación de SAP® R/3®</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/linuxemu/#linuxemu-advanced>10.8. Temas avanzados</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/partiii/>Parte III. Administración del sistema</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/config/>Capítulo 11. Configuración y Adaptación del Sistema</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/config/#config-network-setup>11.1. Configuración de Tarjetas de Red</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/config/#configtuning-starting-services>11.2. "Arrancar servicios"</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/config/#soft-updates>11.3. "Soft Updates"</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/config/#adding-swap-space>11.4. Añadir espacio swap</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/boot/>Capítulo 12. El proceso de arranque en FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/boot/#boot-synopsis>12.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/boot/#boot-introduction>12.2. El problema que representa arrancar el sistema</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/boot/#boot-blocks>12.3. El RMA y las etapas de arranque uno, dos y tres</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/boot/#boot-kernel>12.4. Interacción con el kernel durante el arranque</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/boot/#device-hints>12.5. Device Hints</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/boot/#boot-init>12.6. Init: inicialización del proceso de control</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/boot/#boot-shutdown>12.7. Secuencia de apagado</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/users/>Capítulo 13. Usuarios y administración básica de cuentas</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-synopsis>13.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-introduction>13.2. Introducción</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-superuser>13.3. La cuenta superusuario</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-system>13.4. Cuentas de sistema</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-user>13.5. Cuentas de usuario</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-modifying>13.6. Modificación de cuentas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-limiting>13.7. Limitar a los usuarios</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-personalizing>13.8. Personalizar a los usuarios</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/users/#users-groups>13.9. Grupos</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/security/>Capítulo 14. Seguridad</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#security-synopsis>14.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#security-intro>14.2. Introducción</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#securing-freebsd>14.3. Asegurar FreeBSD</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#crypt>14.4. DES, MD5 y Crypt</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#one-time-passwords>14.5. Contraseñas de un solo uso</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#tcpwrappers>14.6. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#ipsec>14.10. VPN sobre IPsec</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#fs-acl>14.12. Listas de control de acceso a sistemas de ficheros</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#security-portaudit>14.13. Monitorización de fallos de seguridad de aplicaciones</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#security-advisories>14.14. FreeBSD Security Advisories</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/security/#security-accounting>14.15. Contabilidad de procesos</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/jails/>Capítulo 15. Jaulas</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/jails/#jails-synopsis>15.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/jails/#jails-terms>15.2. Términos relacionados con las jaulas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/jails/#jails-intro>15.3. Introducción</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/jails/#jails-build>15.4. Creación y gestión de jaulas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/jails/#jails-tuning>15.5. Administración y personalización a fondo</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/jails/#jails-application>15.6. Uso de las jaulas</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/mac/>Capítulo 16. Mandatory Access Control</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-synopsis>16.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-inline-glossary>16.2. Términos clave en este capí­tulo</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-initial>16.3. Explicación de MAC</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-understandlabel>16.4. Las etiquetas MAC</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-modules>16.5. Configuración de módulos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-ifoff>16.6. El módulo MAC ifoff</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-portacl>16.7. El módulo MAC portacl</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-labelingpolicies>16.8. Polí­ticas de etiquetas MAC</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-partition>16.9. El módulo MAC partition</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-mls>16.10. El módulo de seguridad multinivel MAC</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-biba>16.11. El módulo MAC Biba</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-lomac>16.12. El módulo MAC LOMAC</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-implementing>16.13. Implementación de un entorno seguro con MAC</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#MAC-examplehttpd>16.14. Otro ejemplo: Uso de MAC para restringir un servidor web</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mac/#mac-troubleshoot>16.15. Depuración de errores en MAC</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/audit/>Capítulo 17. Auditoría de eventos de seguridad</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/audit/#audit-synopsis>17.1. *</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle checked>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/disks/>Capítulo 18. Almacenamiento</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#disks-synopsis>18.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#disks-naming>18.2. Nombres de dispositivo</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#disks-adding>18.3. Añadir discos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#usb-disks>18.5. Dispositivos de almacenamiento USB</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#creating-cds>18.6. Creación y uso de medios ópticos (CD)</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#creating-dvds>18.7. Crear y utilizar medios ópticos (DVDs)</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#floppies>18.8. Creación y uso de disquetes (floppies)</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#backups-tapebackups>18.9. Creación y uso de cintas de datos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#backups-floppybackups>18.10. Respaldos en disquetes</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#backup-basics>18.11. Bases para respaldos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#disks-virtual>18.12. Sistemas de ficheros en red, memoria y respaldados en fichero</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#snapshots>18.13. Instantáneas ("snapshots") de sistemas de ficheros</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#quotas>18.14. Cuotas en sistemas de ficheros</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/disks/#disks-encrypting>18.15. Cifrado de particiones de disco</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/geom/>Capítulo 19. GEOM. Marco de trabajo modular de transformación de discos</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/geom/#GEOM-synopsis>19.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/geom/#GEOM-intro>19.2. Introducción a GEOM</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/geom/#GEOM-striping>19.3. RAID0 - Distribución por bandas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - Replicación</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/vinum/>Capítulo 20. El Gestor de Volúmenes Vinum</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-synopsis>20.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-intro>20.2. Los Discos son Demasiado Pequeños</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-access-bottlenecks>20.3. Cuellos de Botella en el Acceso</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-data-integrity>20.4. Integridad de Datos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-objects>20.5. Objetos Vinum</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-examples>20.6. Ejemplos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-object-naming>20.7. Esquema de Nombres de los Objetos</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-config>20.8. Configuración de Vinum</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/vinum/#vinum-root>20.9. Uso de Vinum en el Sistema de Ficheros Raíz</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/virtualization/>Capítulo 21. Virtualización</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/virtualization/#virtualization-synopsis>21.1. *</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/l10n/>Capítulo 22. Localización - Uso y configuración de I18N/L10N</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/l10n/#l10n-synopsis>22.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/l10n/#l10n-basics>22.2. Lo básico</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/l10n/#using-localization>22.3. Uso de la localización</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/l10n/#l10n-compiling>22.4. Compilación de programas con soporte para I18N</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/l10n/#lang-setup>22.5. Localización de FreeBSD a idiomas específicos</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/cutting-edge/>Capítulo 23. Lo último de lo último</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/cutting-edge/#_sinopsis>23.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/cutting-edge/#current-stable>23.2. FreeBSD-CURRENT vs. FreeBSD-STABLE</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/cutting-edge/#synching>23.3. Sincronización de su código fuente</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/cutting-edge/#makeworld>23.4. Uso de <code>make world</code></a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/cutting-edge/#small-lans>23.5. Redes pequeñas</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/partiv/>Parte IV. Comunicaciones en red</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/serialcomms/>Capítulo 24. Comunicaciones serie</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/serialcomms/#serial-synopsis>24.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/serialcomms/#serial>24.2. Introducción</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/serialcomms/#term>24.3. Terminales</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/serialcomms/#dialup>24.4. Servicio dial-in</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/serialcomms/#dialout>24.5. Servicio dial-out</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/serialcomms/#serialconsole-setup>24.6. Configurando la consola serie</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/ppp-and-slip/>Capítulo 25. PPP y SLIP</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/ppp-and-slip/#_sinopsis>25.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ppp-and-slip/#userppp>25.2. Uso de User PPP</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ppp-and-slip/#ppp>25.3. Uso de Kernel PPP</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ppp-and-slip/#pppoe>25.4. Uso de PPP sobre Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ppp-and-slip/#pppoa>25.5. Uso de PPP sobre ATM (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/ppp-and-slip/#slip>25.6. Uso de SLIP</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/firewalls/>Capítulo 26. Cortafuegos</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/firewalls/#firewalls-intro>26.1. *</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/mail/>Capítulo 27. Correo Electrónico</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-synopsis>27.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-using>27.2. Utilización del correo electrónico</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#sendmail>27.3. Configuración de sendmail</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-changingmta>27.4. Sustitución del Agente de Transferencia de Correo</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-trouble>27.5. Depuración de Problemas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-advanced>27.6. Conceptos Avanzados</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#SMTP-UUCP>27.7. SMTP con UUCP</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#outgoing-only>27.8. Configuración para sólamente enviar correo</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#SMTP-dialup>27.9. Utilización del correo con una conexión mediante módem analógico (dial-up)</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#SMTP-Auth>27.10. Autentificación utilizando SMTP</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-agents>27.11. Agente de Correo de Usuario</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-fetchmail>27.12. Manejo de fetchmail</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mail/#mail-procmail>27.13. Uso de procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/network-servers/>Capítulo 28. Servidores de red</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/network-servers/#network-servers-synopsis>28.1. *</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/partv/>Parte V. Apéndices</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/mirrors/>Apéndice A. Cómo obtener FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/mirrors/#mirrors-ftp>A.1. Servidores FTP</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/mirrors/#cvsup>A.2. Uso de CVSup</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/>Apéndice B. Bibliografía</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_libros_y_revistas_específicas_sobre_freebsd>B.1. Libros y revistas específicas sobre FreeBSD</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_guías_de_usuario>B.2. Guías de usuario</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_guías_de_administrador>B.3. Guías de administrador</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_guías_de_programadores>B.4. Guías de programadores</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_el_sistema_operativo_por_dentro>B.5. El sistema operativo por dentro</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_referencia_de_seguridad>B.6. Referencia de seguridad</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_referencia_de_hardware>B.7. Referencia de hardware</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_historia_de_unix>B.8. Historia de UNIX</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/bibliography/#_diarios_y_revistas>B.9. Diarios y revistas</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/eresources/>Apéndices C. Recursos en Internet</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/eresources/#eresources-mail>C.1. Listas de correo</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/eresources/#eresources-news>C.2. Grupos de noticias de Usenet</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/eresources/#eresources-web>C.3. Servidores WWW</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/eresources/#eresources-email>C.4. Direcciones de correo electrónico</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/eresources/#eresources-shell>C.5. Cuentas shell</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/pgpkeys/>Apéndice D. PGP keys</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Responsables</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/>Capítulo 34. Redes Avanzadas</a><ul><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#advanced-networking-synopsis>34.1. Sinopsis</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-routing>34.2. Gateways y Rutas</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#configtuning-virtual-hosts>34.3. Hosts Virtuales</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-advanced-wireless>34.4. Autenticación Inalámbrica Avanzada</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#wireless-ad-hoc-mode>34.5. Modo Ad-hoc Inalámbrico</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-usb-tethering>34.6. Tethering USB</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-bluetooth>34.7. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-bridging>34.8. Bridging</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-aggregation>34.9. Agregación de Enlaces y Conmutación</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-diskless>34.10. Operación sin Disco con PXE</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#carp>34.11. Common Address Redundancy Protocol (CARP)</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook/advanced-networking/#network-vlan>34.12. VLANs</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Menú del libro"></i>
Menú del libro</span></label></div><h1 class=title>Capítulo 18. Almacenamiento</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Tabla de contenidos</h3><nav id=TableOfContents><ul><li><a href=#disks-synopsis>18.1. Sinopsis</a></li><li><a href=#disks-naming>18.2. Nombres de dispositivo</a></li><li><a href=#disks-adding>18.3. Añadir discos</a></li><li><a href=#raid>18.4. RAID</a></li><li><a href=#usb-disks>18.5. Dispositivos de almacenamiento USB</a></li><li><a href=#creating-cds>18.6. Creación y uso de medios ópticos (CD)</a></li><li><a href=#creating-dvds>18.7. Crear y utilizar medios ópticos (DVDs)</a></li><li><a href=#floppies>18.8. Creación y uso de disquetes (floppies)</a></li><li><a href=#backups-tapebackups>18.9. Creación y uso de cintas de datos</a></li><li><a href=#backups-floppybackups>18.10. Respaldos en disquetes</a></li><li><a href=#backup-basics>18.11. Bases para respaldos</a></li><li><a href=#disks-virtual>18.12. Sistemas de ficheros en red, memoria y respaldados en fichero</a></li><li><a href=#snapshots>18.13. Instantáneas ("snapshots") de sistemas de ficheros</a></li><li><a href=#quotas>18.14. Cuotas en sistemas de ficheros</a></li><li><a href=#disks-encrypting>18.15. Cifrado de particiones de disco</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=disks-synopsis>18.1. Sinopsis<a class=anchor href=#disks-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Este capítulo trata sobre el uso de discos en FreeBSD. Esto incluye discos basados en memoria, discos conectados a través de la red, dispositivos de almacenamiento SCSI/IDE estándar y dispositivos que utilizan el interfaz USB.</p></div><div class=paragraph><p>Tras leer este capítulo:</p></div><div class=ulist><ul><li><p>Conocerá la terminología que se usa en FreeBSD para describir la organización de datos en un disco físico (particiones y porciones).</p></li><li><p>Sabrá cómo añadir discos duros a su sistema.</p></li><li><p>Sabrá cómo configurar FreeBSD para utilizar dispositivos de almacenamiento USB.</p></li><li><p>Sabrá cómo configurar sistemas virtuales de ficheros, como los discos de memoria.</p></li><li><p>Sabrá cómo usar cuotas para limitar el uso del espacio en disco.</p></li><li><p>Sabrá cómo cifrar discos para hacerlos más seguros ante un atacante.</p></li><li><p>Sabrá cómo se crean y graban los CD y DVD en FreeBSD.</p></li><li><p>Conocerá diversas opciones de almacenamiento de copias de seguridad.</p></li><li><p>Sabrá cómo usar diversos programas de respaldo que pueden utilizarse en FreeBSD.</p></li><li><p>Sabrá cómo hacer copias de seguridad utilizando disquetes (floppy).</p></li><li><p>Sabrá en qué consiste una instantánea ("snapshot") y cómo utilizarla de forma eficiente.</p></li></ul></div><div class=paragraph><p>Antes de leer este capítulo:</p></div><div class=ulist><ul><li><p>Debe saber cómo configurar e instalar un nuevo kernel en FreeBSD (<a href=../kernelconfig/#kernelconfig>Configuración del kernel de FreeBSD</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=disks-naming>18.2. Nombres de dispositivo<a class=anchor href=#disks-naming></a></h2><div class=sectionbody><div class=paragraph><p>A continuación le mostraremos una lista de dispositivos de físicos almacenamiento soportados por FreeBSD y los nombres de dispositivo asociados con ellos.</p></div><table id=disk-naming-physical-table class="tableblock frame-none grid-all stretch"><caption class=title>Tabla 1. Convenciones para nombrar discos físicos</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Tipo de unidad</th><th class="tableblock halign-left valign-top">Nombre de dispositivo de la unidad</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Discos duros IDE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>ad</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Unidades CDROM IDE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>acd</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Discos duros SCSI y dispositivos de almacenamiento masivo USB</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>da</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Unidades CDROM SCSI</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>cd</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Diferentes tipos de unidades CDROM no estándares</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>mcd</code> para CD-ROM Mitsumi, <code>scd</code> para CD-ROM Sony, <code>matcd</code> para CD-ROM Matsushita/Panasonic</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Unidades de disquete (floppy)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>fd</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Unidades de cinta SCSI</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>sa</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Unidades de cinta IDE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>ast</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Unidades Flash</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>fla</code> para dispositivos DiskOnChip®</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Unidades RAID</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>aacd</code> para Adaptec® AdvancedRAID, <code>mlxd</code> y <code>mlyd</code> para Mylex®, <code>amrd</code> para AMI MegaRAID®, <code>idad</code> para Compaq Smart RAID, <code>twed</code> para 3ware® RAID.</p></td></tr></tbody></table></div></div><div class=sect1><h2 id=disks-adding>18.3. Añadir discos<a class=anchor href=#disks-adding></a></h2><div class=sectionbody><div class=paragraph><p>Digamos que queremos añadir un nuevo disco SCSI a una máquina que solo tiene un disco. Comience por apagar el sistema e instale el disco siguiendo las instrucciones del fabricante de la computadora, del disco y de la controladora. Debido a la gran variedad de procedimientos posibles los detalles están más allá del alcance de este texto.</p></div><div class=paragraph><p>Entre como usuario <code>root</code>. Una vez instalado el disco inspeccione <span class=filename>/var/run/dmesg.boot</span> para asegurarse de que el sistema encontró el nuevo disco. Continuando con nuestro ejemplo, el disco recién añadido será <span class=filename>da1</span> y queremos montarlo en <span class=filename>/1</span> (si está añadiendo un disco IDE, el nombre de dispositivo será <span class=filename>wd1</span> en sistemas anteriores a 4.0, y <span class=filename>ad1</span> en sistemas 4.X y 5.X).</p></div><div class=paragraph><p>FreeBSD funciona en computadoras IBM-PC y compatibles, por lo tanto tendrá en cuenta las particiones de la BIOS del PC, que son diferentes del tipo de partición que se ha venido usando en BSD. Un disco para PC puede contener hasta cuatro entradas de particiones BIOS. Si el disco va a utilizarse íntegramente con FreeBSD puede usar el modo <em>dedicado</em>. Si no, FreeBSD tendrá que instalarse dentro de una las particiones BIOS. En FreeBSD se llama slices ("porciones" o "rebanadas") a las particiones de PC BIOS para no confundirlas con las particiones BSD. También puede utilizar slices en un disco dedicado a FreeBSD pero que se está usando en un sistema que también tiene otro sistema operativo instalado. Esta es una buena manera de evitar confundir la versión de <code>fdisk</code> de otros sistemas operativos.</p></div><div class=paragraph><p>Desde el punto de vista de las slices el disco se añadirá como <span class=filename>/dev/da1s1e</span>. Se interpreta del siguiente modo: disco SCSI, unidad número 1 (segundo disco SCSI), slice 1 (partición 1 de PC BIOS), y partición BSD <span class=filename>e</span>. Si es un disco dedicado, el disco se añadirá como <span class=filename>/dev/da1e</span>.</p></div><div class=paragraph><p>Debido al uso de enteros de 32-bits para almacenar el número de sectores, <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> (llamado <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a> en FreeBSD 4.X) está limitado a 2^32-1 sectores por disco ó 2TB (en la mayoría de los casos). El formato de <a href="https://man.freebsd.org/cgi/man.cgi?query=fdisk&amp;sektion=8&amp;format=html">fdisk(8)</a> permite un sector de arranque de un máximo de más de 2^32-1 y no más de 2^32-1 de longitud, limitando las particiones a 2TB y los discos a 4TB (también en la mayoría de los casos). El formato <a href="https://man.freebsd.org/cgi/man.cgi?query=sunlabel&amp;sektion=8&amp;format=html">sunlabel(8)</a> tiene una limitación de 2^32-1 sectores por partición y 8 particiones en un espacio máximo de 16TB. Si va a usar discos mayores puede usar particiones <a href="https://man.freebsd.org/cgi/man.cgi?query=gpt&amp;sektion=8&amp;format=html">gpt(8)</a>.</p></div><div class=sect2><h3 id=_uso_de_sysinstall8>18.3.1. Uso de <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a><a class=anchor href=#_uso_de_sysinstall8></a></h3><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Navegar en Sysinstall</p><div class=paragraph><p>Puede utilizar <code>sysinstall</code> (<code>/stand/sysinstall</code> en versiones de FreeBSD anteriores a 5.2) para particionar y etiquetar un disco nuevo usando sus intuitivos menús. Entre como el usuario <code>root</code> o utilice <code>su</code>. Ejecute <code>sysinstall</code> y entre al menú <code>Configure</code>. Dentro de <code>FreeBSD Configuration Menu</code>, descienda y seleccione la opción <code>Fdisk</code>.</p></div></li><li><p>Editor de particiones fdisk</p><div class=paragraph><p>Una vez dentro de fdisk, teclée <code>A</code> si quiere usar el disco entero con FreeBSD Cuando se le pregunte "remain cooperative with any future possible operating systems", responda <code>YES</code>. Escriba los cambios al disco pulsando <code>W</code>. Salga del editor FDISK pulsando <code>q</code>. A continuación se le preguntará sobre el "Master Boot Record". Debido a que está añadiendo un nuevo disco a un sistema que ya está instalado, tendrá que seleccionar <code>None</code>.</p></div></li><li><p>Editor de etiquetas de disco</p><div class=paragraph><p>A continuación, debe salir de sysinstall e iniciarlo de nuevo. Siga las instrucciones arriba expuestas, pero esta vez elija la opción <code>Label</code>. De este modo accederá al <code>editor de etiquetas de disco</code>. En él creará las particiones BSD tradicionales. Un disco puede tener hasta ocho particiones, etiquetadas desde la <code>a</code> a la <code>h</code>. Algunas de las etiquetas de las particiones tienen usos especiales. La partición <code>a</code> se utiliza para la partición raíz (<span class=filename>/</span>), por lo tanto sólo su disco de sistema (esto es, el disco desde el cual arranca) tendrá una partición <code>a</code>. La partición <code>b</code> se usa como partición swap; puede tener más de una partición swap y puede alojarlas en más de un disco. La partición <code>c</code> hace referencia al disco entero en modo dedicado, o a la slice de FreeBSD completa en modo slice. Las demás particiones son para el resto de los usos típicos.</p></div><div class=paragraph><p>El editor de etiquetas de sysinstall creará la partición <code>e</code> como partición "ni raíz, ni swap". En el editor de etiquetas crée un solo sistema de ficheros tecleando <code>C</code>. Cuando se le pregunte si debe etiquetarse como FS (sistema de ficheros) o swap, elija <code>FS</code> y teclée un punto de montaje (por ejemplo <span class=filename>/mnt</span>). Al añadir un disco en modo "post-instalación"sysinstall no creará automáticamente las entradas correspondientes en <span class=filename>/etc/fstab</span>, por lo que el punto de montaje que usted especifique no tiene importancia.</p></div><div class=paragraph><p>Ahora puede escribir la nueva etiqueta al disco y crear un sistema de ficheros en él tecleando <code>W</code>. Ignore cualquier error que pudiera generar sysinstall acerca de dificultades para montar la nueva partición. Salga del editor de etiquetas y de sysinstall.</p></div></li><li><p>Terminar</p><div class=paragraph><p>El último paso es editar <span class=filename>/etc/fstab</span> y añadir una entrada para su nuevo disco.</p></div></li></ol></div></div></div></div><div class=sect2><h3 id=_uso_de_utilidades_de_línea_de_comandos>18.3.2. Uso de utilidades de línea de comandos<a class=anchor href=#_uso_de_utilidades_de_línea_de_comandos></a></h3><div class=sect3><h4 id=_uso_de_slices>18.3.2.1. Uso de slices<a class=anchor href=#_uso_de_slices></a></h4><div class=paragraph><p>Esta configuración le permitirá a su disco convivir sin sobresaltos con otro sistema operativo que pueda estar instalado en su sistema y no confundirá a las utilidades <code>fdisk</code> de esos otros sistemas operativos. Se recomienda utilizar este método para instalar discos nuevos. <em>Utilice el modo dedicado sólamente si tiene un buen motivo para hacerlo</em>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/dev/da1 bs=1k count=1</span>
<span class=c># fdisk -BI da1 #Initialice el nuevo disco.</span>
<span class=c># disklabel -B -w -r da1s1 auto #Etiquételo.</span>
<span class=c># disklabel -e da1s1 # Edite la etiqueta de disco que acaba de crear y añada particiones.</span>
<span class=c># mkdir -p /1</span>
<span class=c># newfs /dev/da1s1e # Repita este paso por cada partición que crée.</span>
<span class=c># mount /dev/da1s1e /1 # Monte la partición o particiones.</span>
<span class=c># vi /etc/fstab # Añada la/s entrada/s apropiadas en /etc/fstab.</span></code></pre></div></div><div class=paragraph><p>Si tiene un disco IDE, sustituya <span class=filename>ad</span> por <span class=filename>da</span>. En sistemas anteriores a 4.X utilice <span class=filename>wd</span>.</p></div></div><div class=sect3><h4 id=_dedicado>18.3.2.2. Dedicado<a class=anchor href=#_dedicado></a></h4><div class=paragraph><p>Si no va a compartir el nuevo disco con otro sistema operativo puede utilizar el modo <code>dedicado</code>. Recuerde que este modo puede confundir a los sistemas operativos de Microsoft, aunque no podrán dañar por ello el disco o su contenido. Tenga en cuenta que FreeBSD (de IBM) se "apropiará" de cualquier partición que encuentre y no entienda.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/dev/da1 bs=1k count=1</span>
<span class=c># disklabel -Brw da1 auto</span>
<span class=c># disklabel -e da1				# crear partición `e&#39;</span>
<span class=c># newfs -d0 /dev/da1e</span>
<span class=c># mkdir -p /1</span>
<span class=c># vi /etc/fstab				# agregar una entrada para /dev/da1e</span>
<span class=c># mount /1</span></code></pre></div></div><div class=paragraph><p>Una forma alternativa de hacerlo sería:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/dev/da1 count=2</span>
<span class=c># disklabel /dev/da1 | disklabel -BrR da1 /dev/stdin</span>
<span class=c># newfs /dev/da1e</span>
<span class=c># mkdir -p /1</span>
<span class=c># vi /etc/fstab					# añadir una entrada para /dev/da1e</span>
<span class=c># mount /1</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A partir de FreeBSD 5.1-RELEASE, la utilidad <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> reemplazó al antiguo programa <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>. En <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> se han eliminado muchos parámetros y opciones obsoletas; en los ejemplos de arriba la opción <code>-r</code> debe eliminarse si se usa <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a>. Para más información diríjase al manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a>.</p></div></td></tr></tbody></table></div></div></div></div></div><div class=sect1><h2 id=raid>18.4. RAID<a class=anchor href=#raid></a></h2><div class=sectionbody><div class=sect2><h3 id=raid-soft>18.4.1. Software RAID<a class=anchor href=#raid-soft></a></h3><div class=sect3><h4 id=ccd>18.4.1.1. Configuración de controlador de disco concatenado (CCD)<a class=anchor href=#ccd></a></h4><div class=paragraph><p>Al escoger una solución de almacenamiento masivo los factores más importantes a considerar son velocidad, fiabilidad y coste. Es raro tener los tres por igual; normalmente un dispositivo de almacenamiento masivo veloz y fiable es caro, y para recortar los costes suele sacrificarse la velocidad o la fiabilidad.</p></div><div class=paragraph><p>Al diseñar el sistema descrito más adelante se eligió el coste como el factor más importante, seguido de la velocidad, y luego la fiabilidad. La velocidad de transferencia de datos para este sistema está, en última instancia, limitada por la red. Y mientras que la confiabilidad es muy importante, el controlador CCD descrito más adelante sirve datos que están respaldados en CD-R y pueden ser reemplazados sin dificultad.</p></div><div class=paragraph><p>Al escoger una solución de almacenamiento masivo el primer paso es definir sus necesidades. Si prefiere velocidad o fiabilidad por encima del coste, el resultado será distinto del que vamos a describir en esta sección.</p></div><div class=sect4><h5 id=ccd-installhw>18.4.1.1.1. Instalación del hardware<a class=anchor href=#ccd-installhw></a></h5><div class=paragraph><p>Además del disco IDE, el núcleo del disco CCD está compuesto por tres discos IDE discos IDE Western Digital de 30GB y 5400 RPM, que ofrecen aproximadamente 90GB de almacenamiento. Lo ideal sería que cada disco IDE tuviera su propio cable y controlador, pero para minimizar costes no se utilizaron controladores IDE adicionales. En lugar de eso se configuraron los discos con "jumpers" para que cada controlador IDE tuviera un maestro y un esclavo.</p></div><div class=paragraph><p>Despues de reiniciar la BIOS se configuró para que detectara automáticamente los discos conectados. FreeBSD los detectó al reiniciar:</p></div><div class="literalblock programlisting"><div class=content><pre>ad0: 19574MB &lt;WDC WD205BA&gt; [39770/16/63] at ata0-master UDMA33
ad1: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata0-slave UDMA33
ad2: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-master UDMA33
ad3: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-slave UDMA33</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si FreeBSD no detecta todos los discos asegúrese de que ha colocado correctamente los "jumpers". La mayoría de los discos IDE tienen un "jumper""Cable Select". Este <em>no</em> es el "jumper" que define la relación maestro/esclavo. Consulte la documentación del disco para identificar el "jumper" correcto.</p></div></td></tr></tbody></table></div><div class=paragraph><p>El siguiente paso es estudiar cómo conectarlos para que formen parte del sistema de ficheros. Investigue Debe investigar <a href="https://man.freebsd.org/cgi/man.cgi?query=vinum&amp;sektion=8&amp;format=html">vinum(8)</a> (<a href=../vinum/#vinum>El Gestor de Volúmenes Vinum</a>) y <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a>. Nosotros elegimos <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> para nuestra configuración.</p></div></div><div class=sect4><h5 id=ccd-setup>18.4.1.1.2. Configuración de CCD<a class=anchor href=#ccd-setup></a></h5><div class=paragraph><p>El controlador <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> le permite tomar varios discos idénticos y concatenarlos en un solo sistema lógico de ficheros. Para poder usar <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> necesita un kernel compilado con soporte de <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a>. Añada esta línea al fichero de configuración de su kernel, recompile y reinstale su kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>pseudo-device   ccd     4</pre></div></div><div class=paragraph><p>En sistemas 5.X, use la siguiente línea:</p></div><div class="literalblock programlisting"><div class=content><pre>device   ccd</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>En FreeBSD 5.X no es necesario especificar un número de dispositivos <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a>, ya que el controlador de dispositivo <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> es capaz de clonarse a sí mismo (se crearán nuevas instancias de dispositivo automáticamente según vayan haciendo falta).</p></div></td></tr></tbody></table></div><div class=paragraph><p>El soporte de <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> también puede cargarse como módulo en FreeBSD 3.0 y posteriores.</p></div><div class=paragraph><p>Para configurar <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> tendrá que usar <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a> para etiquetar los discos:</p></div><div class="literalblock programlisting"><div class=content><pre>disklabel -r -w ad1 auto
disklabel -r -w ad2 auto
disklabel -r -w ad3 auto</pre></div></div><div class=paragraph><p>Esto crea una etiqueta de disco para <span class=filename>ad1c</span>, <span class=filename>ad2c</span> y <span class=filename>ad3c</span> que abarcan el disco completo.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A partir de FreeBSD 5.1-RELEASE <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> reemplazó al antiguo programa <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>. En <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> se eliminaron muchas opciones y parámetros obsoletos; en los ejemplos de arriba la opción <code>-r</code> deben obviarse. Para más información consulte <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>El siguiente paso es cambiar el tipo de etiqueta de disco. Edite los discos con <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>:</p></div><div class="literalblock programlisting"><div class=content><pre>disklabel -e ad1
disklabel -e ad2
disklabel -e ad3</pre></div></div><div class=paragraph><p>Esto abre la etiqueta de disco de cada disco con el editor declarado en la variable de entorno <code>EDITOR</code>, por defecto <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a>.</p></div><div class=paragraph><p>Esta es una etiqueta de disco sin modificar:</p></div><div class="literalblock programlisting"><div class=content><pre>8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)</pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> necesita que añada una nueva partición <code>e</code>. Puede copiarla desde la partición <code>c</code>, pero el tipo de sistema de ficheros (la opción <code>fstype</code>) debe ser <code>4.2BSD</code>. La etiqueta del disco debería tener este aspecto:</p></div><div class="literalblock programlisting"><div class=content><pre>8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)
  e: 60074784        0    4.2BSD        0     0     0   # (Cyl.    0 - 59597)</pre></div></div></div><div class=sect4><h5 id=ccd-buildingfs>18.4.1.1.3. Contrucción del sistema de ficheros<a class=anchor href=#ccd-buildingfs></a></h5><div class=paragraph><p>Puede que todavía no exista el nodo de dispositivo para <span class=filename>ccd0c</span>. Si es así, ejecute lo siguiente:</p></div><div class="literalblock programlisting"><div class=content><pre>cd /dev
sh MAKEDEV ccd0</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>En FreeBSD 5.0 <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a> administrará automáticamente los nodos de dispositivos en <span class=filename>/dev</span>, así que no tendrá que usar <code>MAKEDEV</code>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Una vez etiquetados todos los discos construya el <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a>. Utilice <a href="https://man.freebsd.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8&amp;format=html">ccdconfig(8)</a> con opciones similares a las siguientes:</p></div><div class="literalblock programlisting"><div class=content><pre>ccdconfig ccd0 32 0 /dev/ad1e /dev/ad2e /dev/ad3e</pre></div></div><div class=ulist><ul><li><p>El uso y el significado de cada una de las opciones se muestra más abajo:</p></li><li><p>El primer argumento es el dispositivo a configurar, en este caso <span class=filename>/dev/ccd0c</span>. La parte <span class=filename>/dev/</span> es opcional.</p></li><li><p>El intervalo para el sistema de ficheros. El intervalo define el tamaño de una banda en bloques de disco, normalmente 512 bytes. Por lo tanto, un intervalo de 32 equivaldría 16.384 bytes.
Banderas para <a href="https://man.freebsd.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8&amp;format=html">ccdconfig(8)</a>. Si desea disponer sus discos en espejo use aquí una bandera. Esta configuración no necesita discos en espejo, por lo que está dispuesta a 0 (cero).</p></li><li><p>Los últimos argumentos de <a href="https://man.freebsd.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8&amp;format=html">ccdconfig(8)</a> son los dispositivos a colocar en el array. Utilice la ruta completa para cada dispositivo.</p></li></ul></div><div class=paragraph><p>Despues de ejecutar <a href="https://man.freebsd.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8&amp;format=html">ccdconfig(8)</a> el <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> estará configurado y podrá instalar un sistema de ficheros. Consulte las opciones de <a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a> y ejecute:</p></div><div class="literalblock programlisting"><div class=content><pre>newfs /dev/ccd0c</pre></div></div></div><div class=sect4><h5 id=ccd-auto>18.4.1.1.4. Automatización<a class=anchor href=#ccd-auto></a></h5><div class=paragraph><p>Seguramente querrá que <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> esté dispuesto tras cada reinicio. Para ello, debe configurarlo. Guarde su configuración en <span class=filename>/etc/ccd.conf</span> mediante lo siguiente:</p></div><div class="literalblock programlisting"><div class=content><pre>ccdconfig -g &gt; /etc/ccd.conf</pre></div></div><div class=paragraph><p>Durante el reinicio, el "script" <code>/etc/rc</code> ejecuta <code>ccdconfig -C</code> si encuentra el fichero <span class=filename>/etc/ccd.conf</span>. De este modo <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> queda configurado automáticamente para que pueda montarse.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si ha arrancando en modo mono usuario necesita ejecutar el siguiente comando antes de que pueda montar el <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> para configurar el array:</p></div><div class="literalblock programlisting"><div class=content><pre>ccdconfig -C</pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Para montar automaticamente el <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> coloque una entrada para <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> en <span class=filename>/etc/fstab</span> para que se monte durante el arranque:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/ccd0c              /media       ufs     rw      2       2</pre></div></div></div></div><div class=sect3><h4 id=vinum>18.4.1.2. El administrador de volúmenes Vinum<a class=anchor href=#vinum></a></h4><div class=paragraph><p>El administrador de volúmenes Vinum es un controlador de dispositivos de bloque que implementa unidades de disco virtuales. Aísla los discos hardware de la interfaz de dispositivos de bloque y mapea datos de modo que revierta en un incremento de flexibilidad, rendimiento y fiabilidad comparados con el sistema de slices de almacenamiento de disco tradicional. <a href="https://man.freebsd.org/cgi/man.cgi?query=vinum&amp;sektion=8&amp;format=html">vinum(8)</a> implementa los modelos RAID-0, RAID-1 y RAID-5, individualmente o combinados.</p></div><div class=paragraph><p>Consulte el (<a href=../vinum/#vinum>El Gestor de Volúmenes Vinum</a>) para mayor información sobre <a href="https://man.freebsd.org/cgi/man.cgi?query=vinum&amp;sektion=8&amp;format=html">vinum(8)</a>.</p></div></div></div><div class=sect2><h3 id=raid-hard>18.4.2. RAID por Hardware<a class=anchor href=#raid-hard></a></h3><div class=paragraph><p>FreeBSD admite una gran variedad de controladores RAID por hardware. Estos dispositivos controlan un subsistema RAID sin necesidad de software específico para FreeBSD que administre el array.</p></div><div class=paragraph><p>Puede controlar la mayoría de las operaciones de disco con una tarjeta que incorpore BIOS. El siguiente texto es una breve descripción de configuración utilizando una controladora Promise RAIDIDE. Cuando se instala esta tarjeta e inicia el sistema despliega un "prompt" pidiendo información. Siga las instrucciones para entrar a la pantalla de configuración de la tarjeta. Ahí tendrá posibilidad de combinar todos los discos que haya conectado. Hecho esto el disco (o discos) aparecerán como una sola unidad en FreeBSD. Pueden configurarse otros niveles de RAID.</p></div></div><div class=sect2><h3 id=_reconstrucción_de_arrays_ata_raid1>18.4.3. Reconstrucción de arrays ATA RAID1<a class=anchor href=#_reconstrucción_de_arrays_ata_raid1></a></h3><div class=paragraph><p>FreeBSD le permite reemplazar en caliente un disco dañado. Esto requiere que lo intercepte antes de reiniciar.</p></div><div class=paragraph><p>Probablemente vea algo como lo siguiente en <span class=filename>/var/log/messages</span> o en la salida de <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a>:</p></div><div class="literalblock programlisting"><div class=content><pre>ad6 on monster1 suffered a hard error.
ad6: READ command timeout tag=0 serv=0 - resetting
ad6: trying fallback to PIO mode
ata3: resetting devices .. done
ad6: hard error reading fsbn 1116119 of 0-7 (ad6 bn 1116119; cn 1107 tn 4 sn 11)\\
status=59 error=40
ar0: WARNING - mirror lost</pre></div></div><div class=paragraph><p>Consulte <a href="https://man.freebsd.org/cgi/man.cgi?query=atacontrol&amp;sektion=8&amp;format=html">atacontrol(8)</a> para más información:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># atacontrol list</span>
ATA channel 0:
	Master:      no device present
	Slave:   acd0 &lt;HL-DT-ST CD-ROM GCR-8520B/1.00&gt; ATA/ATAPI rev 0

ATA channel 1:
	Master:      no device present
	Slave:       no device present

ATA channel 2:
	Master:  ad4 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

ATA channel 3:
	Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

<span class=c># atacontrol status ar0</span>
ar0: ATA RAID1 subdisks: ad4 ad6 status: DEGRADED</code></pre></div></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Primero debe desconectar el disco del array para que pueda retirarlo con seguridad:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># atacontrol detach 3</span></code></pre></div></div></li><li><p>Reemplace el disco.</p></li><li><p>Conecte el disco de repuesto:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># atacontrol attach 3</span>
Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
Slave:   no device present</code></pre></div></div></li><li><p>Reconstruya el array:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># atacontrol rebuild ar0</span></code></pre></div></div></li><li><p>El comando de reconstrucción no responderá hasta que termine la tarea. Puede abrir otra terminal (mediante <span class=keyseq><kbd>Alt</kbd>+<kbd>Fn</kbd></span>) y revisar el progreso ejecutando lo siguiente:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dmesg | tail -10</span>
<span class=o>[</span>texto eliminado]
ad6: removed from configuration
ad6: deleted from ar0 disk1
ad6: inserted into ar0 disk1 as spare

<span class=c># atacontrol status ar0</span>
ar0: ATA RAID1 subdisks: ad4 ad6 status: REBUILDING 0 completed</code></pre></div></div></li><li><p>Espere hasta que termine la operación.</p></li></ol></div></div></div></div></div></div><div class=sect1><h2 id=usb-disks>18.5. Dispositivos de almacenamiento USB<a class=anchor href=#usb-disks></a></h2><div class=sectionbody><div class=paragraph><p>Hoy día hay una enorme cantidad de soluciones de almacenamiento externoque usan el bus serie universal (USB): discos duros, "mecheros" (o "lápices") USB, grabadoras de CD-R, etc. FreeBSD puede usar estos dispositivos.</p></div><div class=sect2><h3 id=_configuración>18.5.1. Configuración<a class=anchor href=#_configuración></a></h3><div class=paragraph><p>El controlador de dispositivos de almacenamiento masivo USB, <a href="https://man.freebsd.org/cgi/man.cgi?query=umass&amp;sektion=4&amp;format=html">umass(4)</a>, ofrece soporte para dispositivos de almacenamiento USB. Si usa el kernel <span class=filename>GENERIC</span> no necesita cambiar nada en su configuración. Si utiliza un kernel personalizado asegúrese de que su fichero de configuración del kernel contiene las siguientes líneas:</p></div><div class="literalblock programlisting"><div class=content><pre>device scbus
device da
device pass
device uhci
device ohci
device usb
device umass</pre></div></div><div class=paragraph><p>El controlador <a href="https://man.freebsd.org/cgi/man.cgi?query=umass&amp;sektion=4&amp;format=html">umass(4)</a> usa el subsistema SCSI para acceder a los dispositivos de almacenamiento USB y su dispositivo USB aparecerá en el sistema como dispositivo SCSI. Dependiendo del chipset USB de su placa base sólamente necesitará <code>device uhci</code> o <code>device ohci</code>; en cualquier caso tener los dos en el fichero de configuración del kernel no provocará ningún daño. No olvide compilar e instalar el nuevo kernel si hizo alguna modificación.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si su dispositivo USB es una grabadora CD-R o DVD el controlador SCSI CD-ROM, <a href="https://man.freebsd.org/cgi/man.cgi?query=cd&amp;sektion=4&amp;format=html">cd(4)</a>, debe ser añadirse al kernel mediante la siguiente línea:</p></div><div class="literalblock programlisting"><div class=content><pre>device cd</pre></div></div><div class=paragraph><p>Dado que la grabadora aparece como una unidad SCSI no tiene que usar el controlador <a href="https://man.freebsd.org/cgi/man.cgi?query=atapicam&amp;sektion=4&amp;format=html">atapicam(4)</a> en la configuración del kernel.</p></div></td></tr></tbody></table></div><div class=paragraph><p>En FreeBSD 5.X y en la rama 4.X desde FreeBSD 4.10-RELEASE el soporte para controladores USB 2.0 se incorpora al sistema del siguiente modo:</p></div><div class="literalblock programlisting"><div class=content><pre>device ehci</pre></div></div><div class=paragraph><p>Tenga en cuenta que <a href="https://man.freebsd.org/cgi/man.cgi?query=uhci&amp;sektion=4&amp;format=html">uhci(4)</a> y <a href="https://man.freebsd.org/cgi/man.cgi?query=ohci&amp;sektion=4&amp;format=html">ohci(4)</a> siguen siendo necesarios si quiere disponer de soporte para USB 1.X.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>En FreeBSD 4.X, El dæmon USB (<a href="https://man.freebsd.org/cgi/man.cgi?query=usbd&amp;sektion=8&amp;format=html">usbd(8)</a>) debe ejecutarse para poder ver ciertos tipos de dispositivo USB. Para habilitarlo, añada <code>usbd_enable="YES"</code> en <span class=filename>/etc/rc.conf</span> y reinicie la máquina.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_prueba_de_la_configuración>18.5.2. Prueba de la configuración<a class=anchor href=#_prueba_de_la_configuración></a></h3><div class=paragraph><p>La configuración está lista para probarse: conecte su dispositivo USB; en el búfer de mensajes del sistema (<a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a>), la unidad debe aparecer como algo similar a esto:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>umass0: USB Solid state disk, rev 1.10/1.00, addr 2
GEOM: create disk da0 <span class=nv>dp</span><span class=o>=</span>0xc2d74850
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Generic Traveling Disk 1.11&gt; Removable Direct Access SCSI-2 device
da0: 1.000MB/s transfers
da0: 126MB <span class=o>(</span>258048 512 byte sectors: 64H 32S/T 126C<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Obviamente la marca, el nodo de dispositivo (<span class=filename>da0</span>) y otros detalles pueden diferir dependiendo de su hardware.</p></div><div class=paragraph><p>Ya que el dispositivo USB aparece como uno SCSI, puede usar <code>camcontrol</code> para ver una lista de dispositivos USB conectados al sistema:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># camcontrol devlist</span>
&lt;Generic Traveling Disk 1.11&gt;      at scbus0 target 0 lun 0 <span class=o>(</span>da0,pass0<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Si la unidad tiene un sistema de ficheros puede montarla. La <a href=#disks-adding>Añadir discos</a> contiene información que le resultará muy útil para formatear y crear particiones en el disco USB en caso de necesitarlo.</p></div><div class=paragraph><p>Si desconecta el dispositivo (el disco debe desmontarse previamente), debería ver en el búfer de mensajes del sistema algo parecido a esto:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>umass0: at uhub0 port 1 <span class=o>(</span>addr 2<span class=o>)</span> disconnected
<span class=o>(</span>da0:umass-sim0:0:0:0<span class=o>)</span>: lost device
<span class=o>(</span>da0:umass-sim0:0:0:0<span class=o>)</span>: removing device entry
GEOM: destroy disk da0 <span class=nv>dp</span><span class=o>=</span>0xc2d74850
umass0: detached</code></pre></div></div></div><div class=sect2><h3 id=_lecturas_recomendadas>18.5.3. Lecturas recomendadas<a class=anchor href=#_lecturas_recomendadas></a></h3><div class=paragraph><p>Ademas de las secciones <a href=#disks-adding>Cómo añadir discos</a> y <a href=../basics/#mount-unmount>Montado y desmontado de sistemas ficheros</a>, consulte las siguientes páginas man: <a href="https://man.freebsd.org/cgi/man.cgi?query=umass&amp;sektion=4&amp;format=html">umass(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=camcontrol&amp;sektion=8&amp;format=html">camcontrol(8)</a> y <a href="https://man.freebsd.org/cgi/man.cgi?query=usbdevs&amp;sektion=8&amp;format=html">usbdevs(8)</a>.</p></div></div></div></div><div class=sect1><h2 id=creating-cds>18.6. Creación y uso de medios ópticos (CD)<a class=anchor href=#creating-cds></a></h2><div class=sectionbody><div class=sect2><h3 id=_introducción>18.6.1. Introducción<a class=anchor href=#_introducción></a></h3><div class=paragraph><p>Los CD tienen muchas opciones que los hacen distintos de los discos convencionales. Al principio los usuarios no podían escribirlos. Su diseño permite que leamos en ellos sin el retardo del movimiento de una cabeza lectora de una pista a otra. También son mucho más fáciles de transportar de un sistema a otro que muchos otros soportes de información.</p></div><div class=paragraph><p>Los CD tienen pistas, pero son una sección de los que permiten lectura contínua, no una propiedad física del disco. Para crear un CD en FreeBSD debe preparar los ficheros de datos que van a constituir las pistas del CD y luego escribir las pistas al CD.</p></div><div class=paragraph><p>El sistema de ficheros ISO 9660 se diseñó para gestionar estas diferencias. Por desgracia implementa límites de sistema de ficheros que eran comunes en la época en que se diseñó. Por suerte también proporciona un mecanismo de extensiones que permite que CD escritos excediendo dichos límites funcionen en sistemas que no soportan esas extensiones.</p></div><div class=paragraph><p>El port <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cdrtools/>sysutils/cdrtools</a> incluye <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a>, un programa que le permitirá crear un fichero de datos que contenga un sistema de ficheros ISO 9660. Incorpora opciones que soportan varias extensiones. Se describe más adelante.</p></div><div class=paragraph><p>Qué herramienta usar para grabar el CD depende de si su grabadora es ATAPI o no. Las grabadoras de CD ATAPI usan el programa <code>burncd</code>, que forma parte del sistema base. Las grabadoras SCSI y USB usan <code>cdrecord</code>, del port <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cdrtools/>sysutils/cdrtools</a>.</p></div><div class=paragraph><p><code>burncd</code> no soporta cualquier unidad de grabación. Para saber si una unidad está soportada consulte la siguiente lista de <a href=http://www.freebsd.dk/ata/>unidades CD-R/RW soportadas</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si utiliza FreeBSD 5.X, FreeBSD 4.8-RELEASE o posteriores, puede utilizar <code>cdrecord</code> y otras herramientas para unidades SCSI en hardware ATAPI con el <a href=#atapicam>módulo ATAPI/CAM</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Si quiere usar un interfaz gráfico con su software de grabación de CD quizás le guste X-CD-Roast o K3b. Puede instalar estas herramientas como paquetes o desde los ports <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/xcdroast/>sysutils/xcdroast</a> y <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/k3b/>sysutils/k3b</a>, respectivamente. X-CD-Roast y K3b requieren el <a href=#atapicam>módulo ATAPI/CAM</a> si usa hardware ATAPI.</p></div></div><div class=sect2><h3 id=mkisofs>18.6.2. mkisofs<a class=anchor href=#mkisofs></a></h3><div class=paragraph><p>El programa <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> (que forma parte del port <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cdrtools/>sysutils/cdrtools</a>) genera un sistema de ficheros ISO 9660 que es una imagen de un árbol de directorios en el espacio de nombres del sistema de ficheros UNIX®. Esta es la forma más simple de usarlo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkisofs -o ficherodeimagen.iso /ruta/del/árbol</span></code></pre></div></div><div class=paragraph><p>Este comando creará un <em>ficherodeimagen.iso</em> que contenga un sistema de ficheros ISO 9660 que es una copia del árbol ubicado en <em>/ruta/al/árbol</em>. En el proceso, mapeará los nombres de fichero a nombres que se ajusten a las limitaciones del estándar del sistema de ficheros ISO 9660, y excluirá ficheros que posean nombres no característicos de sistemas de ficheros ISO.</p></div><div class=paragraph><p>Existe gran cantidad de opciones que permiten superar esas restricciones. En particular, <code>-R</code> habilita las extensiones Rock Ridge comunes para sistemas UNIX®, <code>-J</code> habilita las extensiones Joliet usadas por sistemas Microsoft y <code>-hfs</code> puede usarse para crear sistemas de ficheros utilizados por Mac OS®.</p></div><div class=paragraph><p>Puede utilizar <code>-U</code> para deshabilitar todas las restricciones de nombres de fichero si quiere crear un CD que se vaya a usar exclusivamente en sistemas FreeBSD. Cuando se usa con <code>-R</code> produce una imagen de sistema de ficheros que es idéntica al árbol FreeBSD origen, aunque puede violar el estándar ISO 9660 de múltiples formas.</p></div><div class=paragraph><p>La última opción de uso general es <code>-b</code>. Se usa para configurar la ubicación de la imagen de arranque que se usará al crear un CD arrancable "El Torito". Esta opción usa como argumento la ruta a la imagen de arranque desde la raíz del árbol de directorios que se va a escribir en el CD. Por defecto <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> crea una imagen ISO en un modo llamado "de emulación de disquete (floppy)", y por lo tanto espera que la imagen de arranque sea exactamente de 1.200, 1.440 o 2880 KB de tamaño. Algunos cargadores de arranque, como el que se usa en los discos de la distribución FreeBSD, no utilizan modo de emulación: se usa la opción <code>-no-emul-boot</code>. Por tanto, si <span class=filename>/tmp/miarranque</span> tiene un sistema FreeBSD arrancable con la imagen de arranque en <span class=filename>/tmp/miarranque/boot/cdboot</span> podría crear la imagen en un sistema de ficheros ISO 9660 en <span class=filename>/tmp/arrancable.iso</span> de la siguiente manera:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkisofs -R -no-emul-boot -b boot/cdboot -o /tmp/arrancable.iso /tmp/miarranque</span></code></pre></div></div><div class=paragraph><p>Hecho esto, si tiene <span class=filename>vn</span> (FreeBSD 4.X), o <span class=filename>md</span> (FreeBSD 5.X) configurado en su kernel, puede montar el sistema de ficheros del siguiente modo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vnconfig -e vn0c /tmp/arrancable.iso</span>
<span class=c># mount -t cd9660 /dev/vn0c /mnt</span></code></pre></div></div><div class=paragraph><p>En FreeBSD 4.X y FreeBSD 5.X proceda del siguiente modo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdconfig -a -t vnode -f /tmp/arrancable.iso -u 0</span>
<span class=c># mount -t cd9660 /dev/md0 /mnt</span></code></pre></div></div><div class=paragraph><p>Ahora puede verificar que <span class=filename>/mnt</span> y <span class=filename>/tmp/miarranque</span> sean idénticos.</p></div><div class=paragraph><p>Existen muchas otras opciones que puede usar para depurar el comportamiento de <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a>, sobre todo en lo que se refiere al esquema ISO 9660 y la creación de discos Joliet y HFS. Consulte el manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a>.</p></div></div><div class=sect2><h3 id=burncd>18.6.3. burncd<a class=anchor href=#burncd></a></h3><div class=paragraph><p>Si tiene una grabadora ATAPI puede usar <code>burncd</code> para grabar una imagen ISO en un CD. <code>burncd</code> forma parte del sistema base, y está en <span class=filename>/usr/sbin/burncd</span>. Su uso es muy sencillo, ya que tiene pocas opciones:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># burncd -f unidaddecd data ficheroimagen.iso fixate</span></code></pre></div></div><div class=paragraph><p>Esto grabará una copia de <em>ficheroimagen.iso</em> en <em>unidadcd</em>. El dispositivo por defecto es <span class=filename>/dev/acd0</span> (o <span class=filename>/dev/acd0c</span> en FreeBSD 4.X). Consulte <a href="https://man.freebsd.org/cgi/man.cgi?query=burncd&amp;sektion=8&amp;format=html">burncd(8)</a> para ver las opciones de configuración de velocidad de escritura, expulsión de CD una vez grabado, y escritura de datos de audio.</p></div></div><div class=sect2><h3 id=cdrecord>18.6.4. cdrecord<a class=anchor href=#cdrecord></a></h3><div class=paragraph><p>Si no dispone de una grabadora ATAPI de CD, tendrá que usar <code>cdrecord</code> para grabar sus CD. <code>cdrecord</code> no forma parte del sistema base; instálelo desde el port <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cdrtools/>sysutils/cdrtools</a> o como paquete. Los cambios en el sistema base pueden hacer que las versiones binarias del programa fallen. Tendrá que actualizar el port cuando actualice su sistema o, si está <a href=#stable>siguiendo la rama -STABLE</a>, actualizar el port cuando haya una nueva versión disponible.</p></div><div class=paragraph><p>Aunque <code>cdrecord</code> tiene muchas opciones, el uso básico es incluso más simple que el de <code>burncd</code>. Así se graba una imagen ISO 9660:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cdrecord dev=dispositivo ficheroimagen.iso</span></code></pre></div></div><div class=paragraph><p>La parte complicada de utilizar <code>cdrecord</code> es encontrar qué <code>dev</code> usar. Utilice la bandera <code>-scanbus</code> para dar con la configuración apropiada. La salida será parecida a la siguiente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cdrecord -scanbus</span>
Cdrecord 1.9 <span class=o>(</span>i386-unknown-freebsd4.2<span class=o>)</span> Copyright <span class=o>(</span>C<span class=o>)</span> 1995-2000 Jörg Schilling
Using libscg version <span class=s1>&#39;schily-0.1&#39;</span>
scsibus0:
        0,0,0     0<span class=o>)</span> <span class=s1>&#39;SEAGATE &#39;</span> <span class=s1>&#39;ST39236LW       &#39;</span> <span class=s1>&#39;0004&#39;</span> Disk
        0,1,0     1<span class=o>)</span> <span class=s1>&#39;SEAGATE &#39;</span> <span class=s1>&#39;ST39173W        &#39;</span> <span class=s1>&#39;5958&#39;</span> Disk
        0,2,0     2<span class=o>)</span> <span class=k>*</span>
        0,3,0     3<span class=o>)</span> <span class=s1>&#39;iomega  &#39;</span> <span class=s1>&#39;jaz 1GB         &#39;</span> <span class=s1>&#39;J.86&#39;</span> Removable Disk
        0,4,0     4<span class=o>)</span> <span class=s1>&#39;NEC     &#39;</span> <span class=s1>&#39;CD-ROM DRIVE:466&#39;</span> <span class=s1>&#39;1.26&#39;</span> Removable CD-ROM
        0,5,0     5<span class=o>)</span> <span class=k>*</span>
        0,6,0     6<span class=o>)</span> <span class=k>*</span>
        0,7,0     7<span class=o>)</span> <span class=k>*</span>
scsibus1:
        1,0,0   100<span class=o>)</span> <span class=k>*</span>
        1,1,0   101<span class=o>)</span> <span class=k>*</span>
        1,2,0   102<span class=o>)</span> <span class=k>*</span>
        1,3,0   103<span class=o>)</span> <span class=k>*</span>
        1,4,0   104<span class=o>)</span> <span class=k>*</span>
        1,5,0   105<span class=o>)</span> <span class=s1>&#39;YAMAHA  &#39;</span> <span class=s1>&#39;CRW4260         &#39;</span> <span class=s1>&#39;1.0q&#39;</span> Removable CD-ROM
        1,6,0   106<span class=o>)</span> <span class=s1>&#39;ARTEC   &#39;</span> <span class=s1>&#39;AM12S           &#39;</span> <span class=s1>&#39;1.06&#39;</span> Scanner
        1,7,0   107<span class=o>)</span> <span class=k>*</span></code></pre></div></div><div class=paragraph><p>Esta lista muestra los valores <code>dev</code> apropiados para los dispositivos de la lista. Localice su grabadora de CD y utilice los tres números separados por comas como valor para <code>dev</code>. En este caso, el dispositivo CDW es 1,5,0 y por tanto la entrada apropiada sería <code>dev=1,5,0</code>. Hay modos más fáciles de especificar este valor; consulte <a href="https://man.freebsd.org/cgi/man.cgi?query=cdrecord&amp;sektion=1&amp;format=html">cdrecord(1)</a> para más detalles. También es el lugar donde buscar información sobre la escritura de pistas de audio, controlar la velocidad de escritura y muchas más cosas.</p></div></div><div class=sect2><h3 id=duplicating-audiocds>18.6.5. Copiar CD de audio<a class=anchor href=#duplicating-audiocds></a></h3><div class=paragraph><p>Puede duplicar un CD de audio extrayendo los datos de audio del CD a ficheros y escribir estos ficheros en un CD virgen. El proceso es ligeramente diferente en unidades ATAPI y SCSI.</p></div><div class="exampleblock procedure"><div class=content><div class=paragraph><p><strong>Procedure: Unidades SCSI</strong></p></div><div class="olist arabic"><ol class=arabic><li><p>Use <code>cdda2wav</code> para extraer el audio.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cdda2wav <span class=nt>-v255</span> <span class=nt>-D2</span>,0 <span class=nt>-B</span> <span class=nt>-Owav</span></code></pre></div></div></li><li><p>Use <code>cdrecord</code> para escribir los ficheros <span class=filename>.wav</span>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cdrecord <span class=nt>-v</span> <span class=nv>dev</span><span class=o>=</span>2,0 <span class=nt>-dao</span> <span class=nt>-useinfo</span>  <span class=k>*</span>.wav</code></pre></div></div><div class=paragraph><p>Asegúrese de que <em>2,0</em> este configurado apropiadamente, como se describe en la <a href=#cdrecord>cdrecord</a>.</p></div></li></ol></div></div></div><div class="exampleblock procedure"><div class=content><div class=paragraph><p><strong>Procedure: Unidades ATAPI</strong></p></div><div class="olist arabic"><ol class=arabic><li><p>El controlador de CD ATAPI hace que cada pista sea accesible como <span class=filename>/dev/acddtnn</span>, donde <em>d</em> es el número de unidad y <em>nn</em> es el número de pista expresado con dos dígitos decimales, precedido por un cero si es necesario. La primera pista del primer disco es <span class=filename>/dev/acd0t01</span>, la segunda es <span class=filename>/dev/acd0t02</span>, la tercera es <span class=filename>/dev/acd0t03</span> y así sucesivamente.</p><div class=paragraph><p>Asegúrese de que existen los ficheros apropiados en <span class=filename>/dev</span>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /dev</span>
<span class=c># sh MAKEDEV acd0t99</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>En FreeBSD 5.0 <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a> creará y gestionará automáticamente las entradas necesarias en <span class=filename>/dev</span>, así que no será necesario usar <code>MAKEDEV</code>.</p></div></td></tr></tbody></table></div></li><li><p>Extraer cada pista con <a href="https://man.freebsd.org/cgi/man.cgi?query=dd&amp;sektion=1&amp;format=html">dd(1)</a>. También deberá declarar un tamaño específico de bloque al extraer los ficheros.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/acd0t01 of=pista1.cdr bs=2352</span>
<span class=c># dd if=/dev/acd0t02 of=pista2.cdr bs=2352</span>
...</code></pre></div></div></li><li><p>Grabar los ficheros extraídos a disco con <code>burncd</code>. Debe declarar que son ficheros de audio y que <code>burncd</code> debe cerrar ("fixate") el disco al terminar la grabación.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># burncd -f /dev/acd0 audio pista1.cdr pista2.cdr ... fixate</span></code></pre></div></div></li></ol></div></div></div></div><div class=sect2><h3 id=imaging-cd>18.6.6. Duplicar CDs de datos<a class=anchor href=#imaging-cd></a></h3><div class=paragraph><p>Puede copiar un CD de datos a un fichero de imagen que será funcionalmente equivalente al fichero de imagen creado con <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a>, y puede usarlo para duplicar cualquier CD de datos. El ejemplo dado aquí asume que su dispositivo CDROM es <span class=filename>acd0</span>. Sustitúyalo por el dispositivo CDROM correcto para su configuración. Bajo FreeBSD 4.X, se debe añadir una <code>c</code> al final del nombre del dispositivo para indicar la partición entera o, en el caso de los CDROM, el disco entero.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/acd0 of=fichero.iso bs=2048</span></code></pre></div></div><div class=paragraph><p>Hecha la imagen puede garbarla en un CD como se describió anteriormente.</p></div></div><div class=sect2><h3 id=mounting-cd>18.6.7. Uso de CD de datos<a class=anchor href=#mounting-cd></a></h3><div class=paragraph><p>Ahora que ha creado un CDROM de datos estándar tal vez quiera montarlo y leer los datos que contiene. Por defecto <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> asume que los sistemas de ficheros son de tipo <code>ufs</code>. Si trata de hacer algo como</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /dev/cd0 /mnt</span></code></pre></div></div><div class=paragraph><p>recibirá un error como este: <code>Incorrect super block</code> y no se montará. Un CDROM no es un sistema de ficheros <code>UFS</code> así que los intentos de montarlo como tal fallarán. Tendrá que decirle a <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> que el sistema de ficheros es de tipo <code>ISO9660</code> y funcionará. Puede hacerlo mediante la opción <code>-t cd9660</code>. Por ejemplo, si quiere montar el dispositivo CDROM <span class=filename>/dev/cd0</span> en <span class=filename>/mnt</span> ejecute:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t cd9660 /dev/cd0 /mnt</span></code></pre></div></div><div class=paragraph><p>Tenga en cuenta que el nombre de su dispositivo (<span class=filename>/dev/cd0</span> en este ejemplo) puede ser diferente, dependiendo de la interfaz que su CDROM utilice. Además la opción <code>-t cd9660</code> sólo ejecuta <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8&amp;format=html">mount_cd9660(8)</a>. El ejemplo de arriba puede resumirse del siguiente modo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount_cd9660 /dev/cd0 /mnt</span></code></pre></div></div><div class=paragraph><p>En general puede usar CDROM de datos de cualquier fabricante, aunque los discos con ciertas extensiones ISO 9660 pueden mostrar un comportamiento extraño. Por ejemplo, los discos Joliet almacenan todos los nombres de fichero en caracteres unicode de dos-bytes. El kernel de FreeBSD no comprende unicode (<em>todavía</em>) así que los caracteres que no están en inglés aparecen como signos de interrogación. (Si utiliza FreeBSD 4.3 o alguna versión posterior, el controlador CD9660 incluye unas estructuras llamadas "ganchos", que le permitirán cargar una tabla de conversión unicode apropiada cuando haga falta. Hay módulos para algunas de las codificaciones más comunes en el port <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cd9660_unicode/>sysutils/cd9660_unicode</a>.)</p></div><div class=paragraph><p>Es posible que reciba un error <code>Device not configured</code> al tratar de montar un CDROM. Generalmente esto significa que la unidad de CDROM piensa que no hay disco en la bandeja, o que la unidad no es visible en el bus. Puede llevar un par de segundos el que una unidad de CDROM se dé cuenta de que ha sido alimentada, por lo tanto sea paciente.</p></div><div class=paragraph><p>Algunas veces un CDROM SCSI puede "perdido" debido a que no tuvo tiempo suficiente para responder al reset del bus. Si tiene un CDROM SCSI añada la siguiente opción a su fichero de configuración del kernel y <a href=../kernelconfig/#kernelconfig-building>recompile su kernel</a>.</p></div><div class="literalblock programlisting"><div class=content><pre>options SCSI_DELAY=15000</pre></div></div><div class=paragraph><p>Esto le indica a su bus SCSI que haga una pausa de 15 segundos durante el arranque para darle ocasión a su unidad de CDROM de responder al reset del bus.</p></div></div><div class=sect2><h3 id=rawdata-cd>18.6.8. Grabar CD de datos "crudos" (Raw)<a class=anchor href=#rawdata-cd></a></h3><div class=paragraph><p>Puede guardar un fichero directamente a CD sin crear un sistema de ficheros ISO 9660. Algunas personas hacen esto al crear respaldos. Es un proceso más rápido que grabar un CD estándar:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># burncd -f /dev/acd1 -s 12 data fichero.tar.gz fixate</span></code></pre></div></div><div class=paragraph><p>Para recuperar los datos guardardados de este modo en un CD, debe leer los datos desde el nodo de dispositivo "crudo":</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tar xzvf /dev/acd1</span></code></pre></div></div><div class=paragraph><p>No puede montar este disco como lo haría con un CDROM normal. Estos CDROM no pueden leerse en ningún sistema operativo que no sea FreeBSD. Si quiere montar el CD o compartir los datos con otro sistema operativo debe utilizar <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> como se describió previamente.</p></div></div><div class=sect2><h3 id=atapicam>18.6.9. Uso del controlador ATAPI/CAM<a class=anchor href=#atapicam></a></h3><div class=paragraph><p>Este controlador permite que dispositivos ATAPI (CD-ROM, CD-RW, unidades DVD, etc) sean accesibles a través del subsistema SCSI y por lo tanto permite el uso de aplicaciones como <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cdrdao/>sysutils/cdrdao</a> o <a href="https://man.freebsd.org/cgi/man.cgi?query=cdrecord&amp;sektion=1&amp;format=html">cdrecord(1)</a>.</p></div><div class=paragraph><p>Para usar este controlador necesitará añadir la siguiente línea al fichero de configuración de su kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>device atapicam</pre></div></div><div class=paragraph><p>Es posible que necesite también las siguientes líneas en el fichero de configuración de su kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>device ata
device scbus
device cd
device pass</pre></div></div><div class=paragraph><p>(que, por otra parte, ya deberín estar presentes).</p></div><div class=paragraph><p>Recompile, instale su nuevo kernel y reinicie su máquina. Durante el proceso de arranque su grabadora debe ser detectada; veamos un ejemplo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>acd0: CD-RW &lt;MATSHITA CD-RW/DVD-ROM UJDA740&gt; at ata1-master PIO4
cd0 at ata1 bus 0 target 0 lun 0
cd0: &lt;MATSHITA CDRW/DVD UJDA740 1.00&gt; Removable CD-ROM SCSI-0 device
cd0: 16.000MB/s transfers
cd0: Attempt to query device size failed: NOT READY, Medium not present - tray closed</code></pre></div></div><div class=paragraph><p>Puede acceder a la unidad a través del del nombre de dispositivo <span class=filename>/dev/cd0</span>; por ejemplo, para montar un CDROM en <span class=filename>/mnt</span>, teclée lo siguiente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t cd9660 /dev/cd0 /mnt</span></code></pre></div></div><div class=paragraph><p>Como <code>root</code>, puede ejecutar el siguiente comando para obtener las direcciones SCSI del dispositivo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># camcontrol devlist</span>
&lt;MATSHITA CDRW/DVD UJDA740 1.00&gt;   at scbus1 target 0 lun 0 <span class=o>(</span>pass0,cd0<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Según esto, <code>1,0,0</code> será la dirección SCSI a utilizar con <a href="https://man.freebsd.org/cgi/man.cgi?query=cdrecord&amp;sektion=1&amp;format=html">cdrecord(1)</a> y otras aplicaciones SCSI.</p></div><div class=paragraph><p>Para mayor información sobre sistemas ATAPI/CAM y SCSI, diríjase a las páginas de manual <a href="https://man.freebsd.org/cgi/man.cgi?query=atapicam&amp;sektion=4&amp;format=html">atapicam(4)</a> y <a href="https://man.freebsd.org/cgi/man.cgi?query=cam&amp;sektion=4&amp;format=html">cam(4)</a>.</p></div></div></div></div><div class=sect1><h2 id=creating-dvds>18.7. Crear y utilizar medios ópticos (DVDs)<a class=anchor href=#creating-dvds></a></h2><div class=sectionbody><div class=sect2><h3 id=_introducción_2>18.7.1. Introducción<a class=anchor href=#_introducción_2></a></h3><div class=paragraph><p>Comparado con el CD, el DVD es la nueva generación de tecnología de almacenamiento en medios ópticos. El DVD puede almacenar más datos que cualquier CD y hoy día es el estándar para publicación de vídeo.</p></div><div class=paragraph><p>Se pueden definir cinco formatos de grabación para lo que llamamos un DVD grabable:</p></div><div class=ulist><ul><li><p>DVD-R: Este fué el primer formato de grabación de DVD. El DVD-R estándar fué definido por el <a href=http://www.dvdforum.com/forum.shtml>DVD Forum</a>. Este formato es de una sola escritura.</p></li><li><p>DVD-RW: Esta es la versión reescribible del DVD-R estándar. Un DVD-RW puede reescribirse unas 1.000 veces.</p></li><li><p>DVD-RAM: Este es también un formato reescribible soportado por el DVD Forum. Un DVD-RAM puede verse como un disco duro extraíble. Este medio no es compatible con la mayoría de las unidades DVD-ROM y reproductores de video DVD; hay muy pocas grabadoras de DVD que soporten el formato DVD-RAM.</p></li><li><p>DVD+RW: Este es un formato reescribible definido por la <a href=http://www.dvdrw.com/>DVD+RW Alliance</a>. Un DVD+RW puede reescribirse unas 1000 veces.</p></li><li><p>DVD+R: Este un formato es la versión de una sola escritura del formato DVD+RW.</p></li></ul></div><div class=paragraph><p>Un DVD grabable de una capa puede almacenar hasta 4.700.000.000 bytes, es decir, 4'38 GB o 4485 MB (1 kilobyte son 1.024 bytes).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Debemos hacer una distinción entre medio físico y aplicación. Un DVD de vídeo es una estructura de fichero específica que puede escribirse en cualquier medio físico consistente en un DVD grabable: DVD-R, DVD+R, DVD-RW, etc. Antes de elegir el tipo de medio, debe asegurarse que la grabadora y el reproductor de DVD de vídeo (un reproductor independiente o una unidad DVD-ROM en una computadora) son compatibles con el medio que pretende utilizar.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_configuración_2>18.7.2. Configuración<a class=anchor href=#_configuración_2></a></h3><div class=paragraph><p>Utilice <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a> para grabar el DVD. Forma parte de las herramientas dvd+rw-tools (<a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/dvd+rw-tools/>sysutils/dvd+rw-tools</a>). Las dvd+rw-tools permiten usar todos los tipos de DVD.</p></div><div class=paragraph><p>Estas herramientas utilizan el subsistema SCSI para acceder a los dispositivos, por lo tanto el <a href=#atapicam>soporte ATAPI/CAM</a> debe estar presente en su kernel. Si su grabadora usa el interfaz USB no tendrá que hacerlo, pero tendrá que leer la <a href=#usb-disks>Dispositivos de almacenamiento USB</a> para más información sobre la configuración de dispositivos USB.</p></div><div class=paragraph><p>También debe que habilitar el acceso DMA para dispositivos ATAPI. Para ello añada la siguiente línea a <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>hw.ata.atapi_dma=&#34;1&#34;</pre></div></div><div class=paragraph><p>Antes de intentar utilizar dvd+rw-tools debe consultar las <a href=http://fy.chalmers.se/~appro/linux/DVD+RW/hcn.html>notas de compatibilidad de hardware de dvd+rw-tools</a> por si apareciera cualquier información relacionada con su grabadora de DVD.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si desea un interfaz gráfico debería echar un vistazo a K3b (<a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/k3b/>sysutils/k3b</a>), que ofrece un interfaz de usuario amigable para <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a> y muchas otras herramientas de grabación.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_quemado_de_dvd_de_datos>18.7.3. Quemado de DVD de datos<a class=anchor href=#_quemado_de_dvd_de_datos></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a> es un "frontend" de <a href=#mkisofs>mkisofs</a>, invocará a <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> para crear una estructura de sistema de ficheros y realizará la escritura del DVD. Esto significa que no necesita crear una imagen de los datos antes del proceso de escritura.</p></div><div class=paragraph><p>La grabación en DVD+R o DVD-R de los datos del directorio <span class=filename>/ruta/a/los/datos</span>, se hace del siguiente modo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -dvd-compat -Z /dev/cd0 -J -R /ruta/a/los/datos</span></code></pre></div></div><div class=paragraph><p>Las opciones <code>-J -R</code> se suministran a <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> para la creación del sistema de ficheros (en este caso: un sistema de ficheros ISO 9660 con extensiones Joliet y Rock Ridge). Consulte la página de manual <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> para más detalles.</p></div><div class=paragraph><p>La opción <code>-Z</code> se usa la sesión inicial de grabación en todos los casos, sesiones múltiples o no. El dispositivo DVD del ejemplo, <em>/dev/cd0</em>, debe ajustarse de acuerdo a la configuración de su sistema. El parámero <code>-dvd-compat</code> cerrará el disco (no se podrá añadir nada a la grabación). Por contra, esto le brindará una mejor compatibilidad del medio con unidades DVD-ROM.</p></div><div class=paragraph><p>También es posible grabar una imagen pre-masterizada, por ejemplo para guardar la imagen <em>ficheroimagen.iso</em>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -dvd-compat -Z /dev/cd0=ficheroimagen.iso</span></code></pre></div></div><div class=paragraph><p>La velocidad de escritura se detecta y configura automáticamente según el medio y la unidad que se esté utilizando. Si quiere forzar la velocidad de escritura utilice el parámetro <code>-speed=</code>. Para más información consulte la página de manual <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a>.</p></div></div><div class=sect2><h3 id=_grabación_de_un_dvd_de_vídeo>18.7.4. Grabación de un DVD de vídeo<a class=anchor href=#_grabación_de_un_dvd_de_vídeo></a></h3><div class=paragraph><p>Un DVD de vídeo es una estructura de ficheros específica basada en las especificiones ISO 9660 y micro-UDF (M-UDF). El DVD de vídeo también dispone de una jerarquía de estructura de datos específica; por esta razón es necesario un programa especializado para crear tal DVD: <a class=package href=https://cgit.freebsd.org/ports/tree/multimedia/dvdauthor/>multimedia/dvdauthor</a>.</p></div><div class=paragraph><p>Si ya tiene una imagen de un sistema de ficheros de DVD de vídeo grábelo de la misma manera que cualquier otra imagen; consulte la sección previa para ver un ejemplo. Si ha creado el DVD y el resultado está en, por ejemplo, el directorio <span class=filename>/ruta/al/vídeo</span>, use el siguiente comando para grabar el DVD de vídeo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -Z /dev/cd0 -dvd-video /ruta/al/vídeo</span></code></pre></div></div><div class=paragraph><p>La opción <code>-dvd-video</code> de <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> hará posible la creación de una estructura de sistema de ficheros de DVD de vídeo. Además, la opción <code>-dvd-video</code> implica la opción <code>-dvd-compat</code> de <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a>.</p></div></div><div class=sect2><h3 id=_uso_de_un_dvdrw>18.7.5. Uso de un DVD+RW<a class=anchor href=#_uso_de_un_dvdrw></a></h3><div class=paragraph><p>A diferencia de un CD-RW, un DVD+RW virgen necesita ser formateado antes de usarse por primera vez. El programa <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a> se encargará de ello automáticamente cuando sea necesario, lo cual es el método <em>recomendado</em>. De todas formas puede usted usar el comando <code>dvd+rw-format</code> para formatear el DVD+RW:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dvd+rw-format /dev/cd0</span></code></pre></div></div><div class=paragraph><p>Necesita ejecutar esta operación solamente una vez, recuerde que sólo los DVD+RW vírgenes necesitan ser formateados. Hecho eso ya puede usar el DVD+RW de la forma expuesta en las secciones previas.</p></div><div class=paragraph><p>Si desea guardar nuevos datos (grabar un sistema de ficheros totalmente nuevo, no añadir más datos) en un DVD+RW no necesita borrarlo, sólo tiene que escribir sobre la grabación anterior (realizando una nueva sesión inicial):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -Z /dev/cd0 -J -R /ruta/alos/datosnuevos</span></code></pre></div></div><div class=paragraph><p>El formato DVD+RW ofrece la posibilidad de añadir datos fácilmente a una grabación previa. La operación consiste en fusionar una nueva sesión a la existente, no es escritura multisesión; <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a> <em>hará crecer</em> el sistema de ficheros ISO 9660 presente en el medio.</p></div><div class=paragraph><p>Si, por ejemplo, añadir datos al DVD+RW del ejemplo anterior tenemos que usar lo siguiente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -M /dev/cd0 -J -R /ruta/alos/datosnuevos</span></code></pre></div></div><div class=paragraph><p>Las mismas opciones de <a href="https://man.freebsd.org/cgi/man.cgi?query=mkisofs&amp;sektion=8&amp;format=html">mkisofs(8)</a> que utilizamos para quemar la sesión inicial pueden usarse en ulteriores escritura.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Puede usar la opción <code>-dvd-compat</code> si desea mejor la compatibilidad de medios con unidades DVD-ROM. Si la usa en un DVD+RW no evitará que pueda añadir más datos.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Si por alguna razón desea borrar el contenido del medio, haga lo siguiente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -Z /dev/cd0=/dev/zero</span></code></pre></div></div></div><div class=sect2><h3 id=_uso_de_un_dvd_rw>18.7.6. Uso de un DVD-RW<a class=anchor href=#_uso_de_un_dvd_rw></a></h3><div class=paragraph><p>Un DVD-RW acepta dos formatos de disco: el incremental secuencial y el de sobreescritura restringida. Por defecto los discos DVD-RW están en formato secuencial.</p></div><div class=paragraph><p>Un DVD-RW virgen puede utilizarse directamente sin necesidad de formateo, sin embargo un DVD-RW no virgen en formato secuencial necesita ser borrado antes de poder guardar una nueva sesión inicial.</p></div><div class=paragraph><p>Para borrar un DVD-RW en modo secuencial, ejecute:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dvd+rw-format -blank=full /dev/cd0</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Un borrado total (<code>-blank=full</code>) tardará aproximadamente una hora en un medio 1x. Un borrado rápido puede realizarse con la opción <code>-blank</code> si el DVD-RW fué grabado en modo Disk-At-Once (DAO). Para grabar el DVD-RW en modo DAO use el comando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -use-the-force-luke=dao -Z /dev/cd0=ficheroimagen.iso</span></code></pre></div></div><div class=paragraph><p>La opción <code>-use-the-force-luke=dao</code> no es imprescindible, ya que <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a> trata de detectar el medio (borrado rápido) y entrar en escritura DAO.</p></div><div class=paragraph><p>Debería usarse el modo de reescritura restringida en los DVD-RW, pues este formato es más flexible que el formato de incremento secuencial, el formato por defecto.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Para escribir datos en un DVD-RW secuencial proceda del mismo modo que con los demás formatos de DVD:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -Z /dev/cd0 -J -R /ruta/alos/datos</span></code></pre></div></div><div class=paragraph><p>Si desea añadir datos a una grabación previa tendrá que usar la opción <code>-M</code> de <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a>. si añade datos a un DVD-RW en modo incremental secuencial se creará en el disco una nueva sesión y el resultado será un disco multisesión.</p></div><div class=paragraph><p>Un DVD-RW en formato de sobreescritura restringido no necesita ser borrado antes de una nueva sesión inicial, sólo tiene que sobreescribir el disco con la opción <code>-Z</code>. esto es similar al caso DVD+RW. También es posible ampliar un sistema de ficheros ISO 9660 ya existente y escrito en el disco del mismo modo que para un DVD+RW con la opción <code>-M</code>. El resultado será un DVD de una sesión.</p></div><div class=paragraph><p>Para poner un DVD-RW en el formato de sobreescritura restringido haga lo siguiente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dvd+rw-format /dev/cd0</span></code></pre></div></div><div class=paragraph><p>Para devolverlo al formato secuencial use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dvd+rw-format -blank=full /dev/cd0</span></code></pre></div></div></div><div class=sect2><h3 id=_multisesión>18.7.7. Multisesión<a class=anchor href=#_multisesión></a></h3><div class=paragraph><p>Muy pocas unidades DVD-ROM soportan DVDs multisesión. La mayoría de las veces (y si tiene suerte) solamente leerán la primera sesión. Los DVD+R, DVD-R y DVD-RW en formato secuencial pueden aceptar multisesiones. El concepto de multisesión no existe en los formatos de sobreescritura restringida de DVD+RW y DVD-RW.</p></div><div class=paragraph><p>Usando el siguiente comando despues de una sesión inicial (no-cerrada) en un DVD+R, DVD-R o DVD-RW en formato secuencial añadirá una nueva sesión al disco:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># growisofs -M /dev/cd0 -J -R /ruta/alos/nuevosdatos</span></code></pre></div></div><div class=paragraph><p>Usando este comando con un DVD+RW o un DVD-RW en modo de sobreescritura restringida, agregará datos fusionando la nueva sesión a la ya existente. El resultado será un disco de una sola sesión. Este es el procedimiento habitual para añadir datos tras la escritura inicial.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Una cierta cantidad de espacio en el medio se usa en cada sesión al finalizar e iniciar sesiones; por tanto, se deben añadir sesiones con grandes cantidades de datos para optimizar el espacio del DVD. El número de sesiones está limitado a 154 para un DVD+R, aproximadamente 2.000 para un DVD-R y 127 para un DVD+R de doble capa.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_para_mayor_información>18.7.8. Para mayor información<a class=anchor href=#_para_mayor_información></a></h3><div class=paragraph><p>Para más información sobre un DVD,puede ejecutar el comando <code>dvd+rw-mediainfo /dev/cd0</code> con el disco en la unidad.</p></div><div class=paragraph><p>Tiene más información sobre dvd+rw-tools en la manual <a href="https://man.freebsd.org/cgi/man.cgi?query=growisofs&amp;sektion=1&amp;format=html">growisofs(1)</a>, en el <a href=http://fy.chalmers.se/~appro/linux/DVD+RW/>sitio web de dvd+rw-tools</a> y en los archivos de la <a href=http://lists.debian.org/cdwrite/>lista de correos de cdwrite</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si va a enviar un informe de problemas es imperativo que adjunte la salida que <code>dvd+rw-mediainfo</code> produjo al grabar (o no grabar) el medio. Sin esta salida será prácticamente imposible ayudarle.</p></div></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=floppies>18.8. Creación y uso de disquetes (floppies)<a class=anchor href=#floppies></a></h2><div class=sectionbody><div class=paragraph><p>Poder almacenar datos en discos flexibles es útil algunas veces, por ejemplo cuando no se tiene cualquier otro medio de almacenamiento extraible o cuando se necesita transferir una cantidad pequeña de datos a otro sistema.</p></div><div class=paragraph><p>Esta sección explicará cómo usar disquetes en FreeBSD. Cubrirá principalmente el formateo y utilización de disquetes DOS de 3.5 pulgadas, pero los conceptos son similares en otros formatos de disquete.</p></div><div class=sect2><h3 id=_formateo_de_disquetes>18.8.1. Formateo de disquetes<a class=anchor href=#_formateo_de_disquetes></a></h3><div class=sect3><h4 id=_el_dispositivo>18.8.1.1. El dispositivo<a class=anchor href=#_el_dispositivo></a></h4><div class=paragraph><p>El acceso a los disquetes se efectúa a través de entradas en <span class=filename>/dev</span>, igual que en otros dispositivos. Para acceder al disquete "crudo" (raw) en versiones 4.X y anteriores, se usa <span class=filename>/dev/fdN</span>, donde <em>N</em> representa el número de unidad, generalmente 0, o <span class=filename>/dev/fdNX</span>, donde <em>X</em> representa una letra.</p></div><div class=paragraph><p>En versiones 5.0 o posteriores, simplemente use <span class=filename>/dev/fdN</span>.</p></div><div class=sect4><h5 id=_el_tamaño_de_disco_en_versiones_4_x_y_anteriores>18.8.1.1.1. El tamaño de disco en versiones 4.X y anteriores<a class=anchor href=#_el_tamaño_de_disco_en_versiones_4_x_y_anteriores></a></h5><div class=paragraph><p>También existen dispositivos <span class=filename>/dev/fdN.tamaño</span>, donde <em>tamaño</em> es el tamaño del disquete en kilobytes. Estas entradas se usan durante el formateo a bajo nivel para determinar el tamaño del disco. En los siguientes ejemplos se usará el tamaño de 1440kB.</p></div><div class=paragraph><p>Algunas veces las entradas bajo <span class=filename>/dev</span> tendrán que ser (re)creadas. Para ello, ejecute:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /dev &amp;&amp; ./MAKEDEV &#34;fd*&#34;</span></code></pre></div></div></div><div class=sect4><h5 id=_el_tamaño_de_disco_en_versiones_5_0_y_posteriores>18.8.1.1.2. El tamaño de disco en versiones 5.0 y posteriores<a class=anchor href=#_el_tamaño_de_disco_en_versiones_5_0_y_posteriores></a></h5><div class=paragraph><p>En 5.0, <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a> administrará automáticamente los nodos de dispositivo en <span class=filename>/dev</span>, así que el uso de <code>MAKEDEV</code> no es necesario.</p></div><div class=paragraph><p>El tamaño de disco deseado se pasa a <a href="https://man.freebsd.org/cgi/man.cgi?query=fdformat&amp;sektion=1&amp;format=html">fdformat(1)</a> mediante la bandera <code>-f</code>. Los tamaños soportados aparecen en <a href="https://man.freebsd.org/cgi/man.cgi?query=fdcontrol&amp;sektion=8&amp;format=html">fdcontrol(8)</a>, pero tenga muy en cuenta que 1440kB es el que funciona mejor.</p></div></div></div><div class=sect3><h4 id=_formatear>18.8.1.2. Formatear<a class=anchor href=#_formatear></a></h4><div class=paragraph><p>Un disquete necesita ser formateado a bajo nivel antes de poder usarse. Esto suele hacerlo el fabricante, pero el formateo es una buena manera de revisar la integridad del medio. Aunque es posible forzar tamaños de disco más grandes (o pequeños), 1440kB es para lo que la mayoría de los disquetes están diseñados.</p></div><div class=paragraph><p>Para formatear un disquete a bajo nivel debe usar <a href="https://man.freebsd.org/cgi/man.cgi?query=fdformat&amp;sektion=1&amp;format=html">fdformat(1)</a>. Esta utilidad espera el nombre del dispositivo como argumento.</p></div><div class=paragraph><p>Tome nota de cualquier mensaje de error, ya que éstos pueden ayudarle a determinar si el disco está bien o mal.</p></div><div class=sect4><h5 id=_formateo_en_versiones_4_x_y_anteriores>18.8.1.2.1. Formateo en versiones 4.X y anteriores<a class=anchor href=#_formateo_en_versiones_4_x_y_anteriores></a></h5><div class=paragraph><p>Use el dispositivo <span class=filename>/dev/fdN.tamaño</span> para formatear el disquete. Inserte un disco de 3'5 pulgadas en su unidad y ejecute:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/sbin/fdformat /dev/fd0.1440</span></code></pre></div></div></div><div class=sect4><h5 id=_formateo_en_versiones_5_0_y_posteriores>18.8.1.2.2. Formateo en versiones 5.0 y posteriores<a class=anchor href=#_formateo_en_versiones_5_0_y_posteriores></a></h5><div class=paragraph><p>Use el dispositivo <span class=filename>/dev/fdN</span> para formatear el disquete. Inserte un disco de 3'5 pulgadas en su unidad y ejecute:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/sbin/fdformat -f 1440 /dev/fd0</span></code></pre></div></div></div></div></div><div class=sect2><h3 id=_la_etiqueta_de_disco>18.8.2. La etiqueta de disco<a class=anchor href=#_la_etiqueta_de_disco></a></h3><div class=paragraph><p>Tras un formato del disco a bajo nivel necesitará colocar una etiqueta de disco en él. Esta etiqueta de disco será destruida más tarde, pero es necesaria para que el sistema determine el tamaño del disco y su geometría.</p></div><div class=paragraph><p>La nueva etiqueta de disco ocupará todo el disco, y contendrá toda la información apropiada sobre la geometría del disquete. Los valores de geometría para la etiqueta de disco están en <span class=filename>/etc/disktab</span>.</p></div><div class=paragraph><p>Ejecute <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a> así:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /sbin/disklabel -B -r -w /dev/fd0 fd1440</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Desde FreeBSD 5.1-RELEASE <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> reemplazó al viejo programa <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>. En <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> se eliminaron muchas opciones y parámetros obsoletos; en el ejemplo de arriba la opción <code>-r</code> no debe usarse. Para mayor información consulte la página de manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_el_sistema_de_ficheros>18.8.3. El sistema de ficheros<a class=anchor href=#_el_sistema_de_ficheros></a></h3><div class=paragraph><p>Ahora el disquete está listo para ser formateado a alto nivel. Esto colocará un sistema de ficheros nuevo en el disco y permitirá a FreeBSD leer y escribir en el disco. Después de crear el sistema de ficheros se destruye la etiqueta de disco, así que si desea reformatearlo, tendrá que recrear la etiqueta de disco.</p></div><div class=paragraph><p>El sistema de ficheros del disquete puede ser UFS o o FAT. FAT suele ser una mejor opción para disquetes.</p></div><div class=paragraph><p>Para formatear un disquete ejecute:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /sbin/newfs_msdos /dev/fd0</span></code></pre></div></div><div class=paragraph><p>El disco está para su uso.</p></div></div><div class=sect2><h3 id=_uso_de_un_disquete>18.8.4. Uso de un disquete<a class=anchor href=#_uso_de_un_disquete></a></h3><div class=paragraph><p>Para usar el disquete móntelo con <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8&amp;format=html">mount_msdos(8)</a> (en versiones 4.X y anteriores) o con <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8&amp;format=html">mount_msdosfs(8)</a> (en versiones 5.X o posteriores). También se puede usar <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/mtools/>emulators/mtools</a>.</p></div></div></div></div><div class=sect1><h2 id=backups-tapebackups>18.9. Creación y uso de cintas de datos<a class=anchor href=#backups-tapebackups></a></h2><div class=sectionbody><div class=paragraph><p>Los principales medios de cinta son 4mm, 8mm, QIC, mini-cartridge y DLT.</p></div><div class=sect2><h3 id=backups-tapebackups-4mm>18.9.1. 4mm (DDS: Digital Data Storage)<a class=anchor href=#backups-tapebackups-4mm></a></h3><div class=paragraph><p>Las cintas de 4mm están reemplazando a las QIC como los medios de respaldo más frecuentes en estaciones de trabajo. Esta tendencia se aceleró en gran medida cuando Conner adquirió Archive, un fabricante líder de unidades QIC, y abandonó la producción de unidades QIC. Las unidades de 4mm son pequeñas y silenciosas pero no tienen la reputación de fiabilidad de la que disfrutan las unidades de 8mm. Los cartuchos son más baratos y más pequeños (3 x 2 x 0.5 pulgadas, 76 x 51 x 12 mm) que los cartuchos de 8mm. En el caso de las cintas de 4mm, igual que las de 8mm, tienen un cabezal con una vida comparativamente más corta. Ambos utilizan el escaneado en espiral.</p></div><div class=paragraph><p>El ancho de datos de estas unidades comienza por aprox. 150 kB/s, con un pico de aprox. ~500 kB/s. La capacidad de datos va de los 1'3 GB a 2'0 GB. La compresión por hardware, disponible con la mayoría de estas unidades, dobla aproximadamente la capacidad. Existen unidades de biblioteca de cinta multi-unidad con 6 unidades en un solo armario y cambio de cinta automático. Las capacidades de estas bibliotecas alcanzan los 240 GB.</p></div><div class=paragraph><p>El estándar DDS-3 soporta capacidades de cinta de hasta 12 GB (o 24 GB con compresión).</p></div><div class=paragraph><p>Las unidades de 4mm, igual que las unidades de 8mm, utilizan escaneo en espiral. Tanto unas como otras tienen las mismas ventajas y desventajas.</p></div><div class=paragraph><p>Las cintas deben renovarse por otras después de 2,000 pasadas ó 100 respaldos completos.</p></div></div><div class=sect2><h3 id=backups-tapebackups-8mm>18.9.2. 8mm (Exabyte)<a class=anchor href=#backups-tapebackups-8mm></a></h3><div class=paragraph><p>Las cintas de 8mm son las unidades de cinta SCSI más comunes; son la mejor opción de cintas reemplazables y eso hace que las unidades de cinta Exabyte 8mm de 2 GB sean casi omnipresentes. Las unidades de 8mm son fiables, prácticas y silenciosas. Los cartuchos son baratos y bastante pequeños (4.8 x 3.3 x 0.6 pulgadas; 122 x 84 x 15 mm). Una desventaja de las cintas de 8mm es la vida relativamente corta del cabezal y de la propia cinta debido a la alta tasa de movimiento relativo de la cinta por los cabezales.</p></div><div class=paragraph><p>El ancho de datos varía de aprox. 250 kB/s hasta los 500 kB/s. La capacidad va desde los 300 MB hasta los 7 GB. La compresión por hardware, disponible con la mayoría de estas unidades, dobla aproximadamente la capacidad. Estas unidades están disponibles como unidades solas o como unidades de biblioteca de cinta multi-unidad con 6 unidades y 120 cintas en un solo armario. Las cintas las cambia automáticamente la unidad. La capacidad de dichas bibliotecas alcanza los 840+ GB.</p></div><div class=paragraph><p>El modelo Exabyte "Mammoth" soporta 12 GB en una cinta (24 GB con compresión) y cuesta aproximadamente el doble que las unidades de cinta convencionales.</p></div><div class=paragraph><p>Los datos se graban en cinta utilizando escaneo en espiral. Las cabezas se posicionan en ángulo en relación al medio (6 grados aproximadamente). La cinta se envuelve cerca de 270 grados en el cilindro que soporta las cabezas. El cilindro gira mientras la cinta se desliza sobre el cilindro. El resultado es una alta densidad de datos y pistas almacenadas muy pegadas, dispuestas en ángulo a través de la cinta de un extremo al otro.</p></div></div><div class=sect2><h3 id=backups-tapebackups-qic>18.9.3. QIC<a class=anchor href=#backups-tapebackups-qic></a></h3><div class=paragraph><p>Las cintas y unidades QIC-150 son, quizás, las unidades y medios de cinta más comunes. Las unidades de cinta QIC son las unidades de respaldo "serias" menos caras. La desventaja es el coste del medio. Las cintas QIC son caras comparadas con las cintas de 8mm o de 4mm, hasta 5 veces el precio de almacenamiento de datos por GB. No obstante, si sus necesidades pueden satisfacerse con media docena de cintas, QIC tal vez sea la decisión correcta. QIC es la unidad de cinta <em>más</em> común. Casi en todas partes tienen una unidad QIC de una u otra densidad. Y ese es el problema, QIC ofrece un enorme número de densidades en cintas físicamente similares (algunas veces idénticas). Las unidades QIC son cualquier cosa menos silenciosas. Hacen bastante ruido antes de iniciar la grabación de datos y son claramente audibles siempre que leen, escriben o hacen una búsqueda. Las cintas QIC miden 6 x 4 x 0.7 pulgadas; 152 x 102 x 17 mm.</p></div><div class=paragraph><p>El ancho de datos varía de aprox. 150 kB/s a aprox. 500 kB/s. La capacidad de datos varía de 40 MB a 15 GB. La compresión por hardware existe en muchas de las nuevas unidades QIC. Las unidades QIC se ven con menos frecuencia y además están siendo suplantadas por unidades DAT.</p></div><div class=paragraph><p>Los datos se graban en la cinta en pistas. Las pistas discurren a lo largo del extenso eje de la cinta de un extremo al otro. El número de pistas, y por lo tanto el ancho de una pista varía según la capacidad de la cinta. La mayoría, si no todas las unidades nuevas, ofrecen compatibilidad con modelos anteriores al menos para lectura (y también en muchos casos de escritura). QIC tiene buena reputación en cuanto a seguridad de los datos (las piezas mecánicas son más simples y más robustas que en las unidades de búsqueda en espiral).</p></div><div class=paragraph><p>Las cintas deben ser sustituirse por otras después de 5,000 respaldos.</p></div></div><div class=sect2><h3 id=backups-tapebackups-dlt>18.9.4. DLT<a class=anchor href=#backups-tapebackups-dlt></a></h3><div class=paragraph><p>DLT tiene la tasa de transferencia de datos más rápida de todos los tipos de unidades mostradas aquí. La cinta de 1/2" (12'5mm) está alojada en un cartucho de un solo cilindro (4 x 4 x 1 pulgadas; 100 x 100 x 25 mm). El cartucho tiene una puerta giratoria a lo largo de todo un lado del cartucho. El mecanismo de la unidad abre esta puerta para extraer el "líder". El "lider" de la cinta tiene un agujero oval que la unidad utiliza para "enganchar" la cinta. El cilindro de levantamiento está dentro de la unidad de cinta. Los demás cartuchos descritos en este texto (los cartuchos de 9 pistas son la única excepción) tienen el cilindro proveedor alojados dentro del propio cartucho de cinta.</p></div><div class=paragraph><p>El ancho de datos es aproximadamente de 1'5 MB/s, tres veces el ancho de unidades de cinta de 4mm, de 8mm o QIC. Las capacidades de datos varían entre 10 GB y 20 GB en una sola unidad. Hay unidades multicinta y con cargadores multi-cinta, y bibliotecas multiunidad que pueden albergar de 5 a 900 cintas con una a 20 unidades, con lo que pueden alcanzar desde 50 GB hasta 9 TB de almacenamiento.</p></div><div class=paragraph><p>Con compresión, el formato DLT Type IV soporta hasta 70 GB de capacidad.</p></div><div class=paragraph><p>Los datos se almacenan en cinta en pistas paralelas a la dirección del movimiento de la cinta (como en las cintas QIC). Se escriben dos pistas al mismo tiempo. El tiempo de vida de lectura/escritura es relativamente largo. Una vez que la cinta no hay movimiento relativo entre las cabezas y la cinta.</p></div></div><div class=sect2><h3 id=_ait>18.9.5. AIT<a class=anchor href=#_ait></a></h3><div class=paragraph><p>AIT es un nuevo formato de Sony, y puede almacenar hasta 50 GB (con compresión) por cinta. Las cintas contienen chips de memoria que retienen un índice de los contenidos de la cinta. Este índice puede ser leido rápidamente para determinar la posición de los ficheros en la cinta, en lugar de los varios minutos que requeriría el proceso con otras cintas. SAMS:Alexandria puede gestionar más de 40 bibliotecas de cinta AIT, comunicándose directamente con el chip de memoria de la cinta para desplegar el contenido en pantalla, determinar qué ficheros fueron respaldados a qué cinta, ubicar la cinta correcta, cargarla y restaurar los datos desde la cinta.</p></div><div class=paragraph><p>Las bibliotecas como ésta cuestan alrededor de 20.000 dólares, lo que las aleja bastante del alcance de los aficionados.</p></div></div><div class=sect2><h3 id=_estreno_de_una_cinta>18.9.6. Estreno de una cinta<a class=anchor href=#_estreno_de_una_cinta></a></h3><div class=paragraph><p>La primera vez que trate de leer o escribir una cinta nueva, completamente en blanco, la operación fallará. El mensaje de la consola se parecerá al siguiente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>sa0<span class=o>(</span>ncr1:4:0<span class=o>)</span>: NOT READY asc:4,1
sa0<span class=o>(</span>ncr1:4:0<span class=o>)</span>:  Logical unit is <span class=k>in </span>process of becoming ready</code></pre></div></div><div class=paragraph><p>La cinta no contiene un bloque identificador (bloque número 0). Todas las unidades de cinta QIC desde la adopción del estándar QIC-525 escriben un bloque identificador en la cinta. Existen dos soluciones:</p></div><div class=ulist><ul><li><p><code>mt fsf 1</code> hace que la unidad de cinta escriba un bloque identificador a la cinta.</p></li><li><p>Use el botón del panel frontal para expulsar la cinta.</p><div class=paragraph><p>Inserte nuevamente la cinta y haga un <code>dump</code> de datos a la cinta.</p></div><div class=paragraph><p><code>dump</code> devolverá <code>DUMP: End of tape detected</code> y la consola mostrará <code>HARDWARE FAILURE info:280 asc:80,96</code>.</p></div><div class=paragraph><p>Rebobine la cinta usando: <code>mt rewind</code>.</p></div><div class=paragraph><p>A partir de ese momento podrá utilizar la cinta.</p></div></li></ul></div></div></div></div><div class=sect1><h2 id=backups-floppybackups>18.10. Respaldos en disquetes<a class=anchor href=#backups-floppybackups></a></h2><div class=sectionbody><div class=sect2><h3 id=floppies-using>18.10.1. ?Puedo utilizar disquetes para respaldar mis datos?<a class=anchor href=#floppies-using></a></h3><div class=paragraph><p>Los disquetes no son realmente el medio ideal para hacer respaldos debido a que:</p></div><div class=ulist><ul><li><p>El medio no es fiable, especialmente después de largos periodos de tiempo.</p></li><li><p>El respaldo y la restauración es muy lento.</p></li><li><p>Tienen una capacidad muy limitada (los dís de respaldar un disco duro entero en una docena de disquetes pasaron hace mucho).</p></li></ul></div><div class=paragraph><p>De todas maneras, si no tiene otro método para respaldar sus datos los disquetes son una mejor solución que no tener ningún respaldo.</p></div><div class=paragraph><p>Si tiene que utilizar disquetes asegúrese de usar discos de buena calidad. Los disquetes que han estado almacenados en la oficina durante un par de años son una mala elección. Lo mejor sería que utilizara discos nuevos de un fabricante respetado.</p></div></div><div class=sect2><h3 id=floppies-creating>18.10.2. ?Cómo respaldo mis datos a discos flexibles?<a class=anchor href=#floppies-creating></a></h3><div class=paragraph><p>La mejor manera de respaldar a un disquete es usar <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> con la opción <code>-M</code> (multi volumen), que permite que el respaldo se guarde en varios disquetes.</p></div><div class=paragraph><p>Para respaldar todos los ficheros en el directorio actual y sus subdirectorios use esto (como <code>root</code>):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tar Mcvf /dev/fd0 *</span></code></pre></div></div><div class=paragraph><p>Cuando el primer disquete esté lleno <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> le solicitará que inserte el siguiente volumen (debido a que <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> es independiente del medio se refiere a volúmenes; en éste contexto se refiere a disquetes).</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Prepare volume <span class=c>#2 for /dev/fd0 and hit return:</span></code></pre></div></div><div class=paragraph><p>Esto se repite (con el número de volumen incrementando) hasta que todos los ficheros especificados hayan sido archivados.</p></div></div><div class=sect2><h3 id=floppies-compress>18.10.3. ?Puedo comprimir mis respaldos?<a class=anchor href=#floppies-compress></a></h3><div class=paragraph><p>Desafortunadamente, <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> no permite el uso de la opción <code>-z</code> para archivos multi-volumen. Puede, por supuesto, hacer un <a href="https://man.freebsd.org/cgi/man.cgi?query=gzip&amp;sektion=1&amp;format=html">gzip(1)</a> a todos los ficheros, mandarlos con <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> a los disquetes, <em>y después hacer <a href="https://man.freebsd.org/cgi/man.cgi?query=gunzip&amp;sektion=1&amp;format=html">gunzip(1)</a> a los archivos</em></p></div></div><div class=sect2><h3 id=floppies-restoring>18.10.4. ?Cómo recupero mis respaldos?<a class=anchor href=#floppies-restoring></a></h3><div class=paragraph><p>Para restaurar el archivo completo use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tar Mxvf /dev/fd0</span></code></pre></div></div><div class=paragraph><p>Hay dos maneras que puede usar para restaurar ficheros específicos. La primera, puede comenzar por el primer disco flexible y usar:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tar Mxvf /dev/fd0 nombredefichero</span></code></pre></div></div><div class=paragraph><p>La utilidad <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> le pedirá que inserte el resto de disquetes hasta que encuentre el fichero requerido.</p></div><div class=paragraph><p>La segunda manera es: si sabe en qué disco se encuentra el fichero puede insertar ese disco y usar el comando expuesto arriba. Tenga en cuenta que si el primer fichero en el disquete es la continuación del anterior <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> le advertirá que no puede restaurarlo <em>incluso si no se lo ha solicitado</em></p></div></div></div></div><div class=sect1><h2 id=backup-basics>18.11. Bases para respaldos<a class=anchor href=#backup-basics></a></h2><div class=sectionbody><div class=paragraph><p>Los tres principales programas para respaldos son <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> y <a href="https://man.freebsd.org/cgi/man.cgi?query=cpio&amp;sektion=1&amp;format=html">cpio(1)</a>.</p></div><div class=sect2><h3 id=_dump_y_restore>18.11.1. Dump y Restore<a class=anchor href=#_dump_y_restore></a></h3><div class=paragraph><p>Los programas UNIX® que se han usado durante muchos años para hacer copias de seguridad son <code>dump</code> y <code>restore</code>. Operan en las unidades como una colección de bloques de disco, bajo la abstracción de ficheros, los enlaces y directorios creados por el sistema de ficheros. <code>dump</code> respalda un sistema de ficheros completo en un dispositivo. No es capaz de respaldar solamente parte de un sistema de ficheros o un árbol de directorios que se extienda por más de un sistema de ficheros. <code>dump</code> no escribe ficheros y directorios a cinta, escribe los bloques de datos "crudos" (raw) que conforman los ficheros y directorios.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si utiliza <code>dump</code> en su directorio raíz, no respaldará <span class=filename>/home</span>, <span class=filename>/usr</span> ni muchos otros directorios, ya que suelen ser puntos de montaje de otros sistemas de ficheros o enlaces simbólicos hacia dichos sistemas de ficheros.</p></div></td></tr></tbody></table></div><div class=paragraph><p><code>dump</code> tiene peculiaridades que se mantienen desde sus primeros días en la Version 6 de AT&amp;T UNIX (alrededor de 1975). Los parámetros por defecto son los adecuados para cintas de 9 pistas (6250 bpi), pero no para los medios de alta densidad disponibles hoy en día (hasta 62,182 ftpi). Estos valores por defecto deben obviarse en la línea de comandos para aprovechar la capacidad de las unidades de cinta actuales.</p></div><div class=paragraph><p>También es posible respaldar datos a través de la red a una unidad de cinta conectada a otra computadora con <code>rdump</code> y <code>rrestore</code>. Ambos programas dependen de <a href="https://man.freebsd.org/cgi/man.cgi?query=rcmd&amp;sektion=3&amp;format=html">rcmd(3)</a> y <a href="https://man.freebsd.org/cgi/man.cgi?query=ruserok&amp;sektion=3&amp;format=html">ruserok(3)</a> para acceder a la unidad de cinta remota. Por consiguiente, el usuario que realiza el respaldo debe estar listado en el fichero <span class=filename>.rhosts</span> de la computadora remota. Los argumentos para <code>rdump</code> y <code>rrestore</code> deben ser adecuados para usarse en la computadora remota. Cuando realice un <code>rdump</code> desde FreeBSD a una unidad de cinta Exabyte conectada a una Sun llamada <code>komodo</code>, use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2&gt;&amp;1</span></code></pre></div></div><div class=paragraph><p>Advertencia: existen implicaciones de seguridad al permitir autentificación mediante <span class=filename>.rhosts</span>. Le recomendamos que evalúe la situación cuidadosamente.</p></div><div class=paragraph><p>También es posible usar <code>dump</code> y <code>restore</code> de una forma más segura a través de <code>ssh</code>.</p></div><div class=exampleblock><div class=title>Ejemplo 1. Utilizando <code>dump</code> a través de ssh</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /sbin/dump -0uan -f - /usr | gzip -2 | ssh -c blowfish \</span>
          usuario@maquinaobjetivo.ejemplo.com <span class=nb>dd </span><span class=nv>of</span><span class=o>=</span>/misficherosgrandes/dump-usr-l0.gz</code></pre></div></div></div></div><div class=paragraph><p>Uso del método integrado de <code>dump</code>, configurando la variable de ambiente <code>RSH</code>:</p></div><div class=exampleblock><div class=title>Ejemplo 2. Uso de <code>dump</code> a través de ssh con <code>RSH</code> configurada</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># RSH=/usr/bin/ssh /sbin/dump -0uan -f usuario@maquinaobjetivo.ejemplo.com:/dev/sa0 /usr</span></code></pre></div></div></div></div></div><div class=sect2><h3 id=_tar>18.11.2. <code>tar</code><a class=anchor href=#_tar></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> también es de la época de la Version 6 de AT&amp;T UNIX (alrededor de 1975). <code>tar</code> trabaja en cooperación con el sistema de ficheros; escribe ficheros y directorios a cinta. <code>tar</code> no soporta el rango completo de opciones que ofrece <a href="https://man.freebsd.org/cgi/man.cgi?query=cpio&amp;sektion=1&amp;format=html">cpio(1)</a>, pero no requiere el inusual comando de pipeline que utiliza <code>cpio</code>.</p></div><div class=paragraph><p>En FreeBSD 5.3 y posteriores, tiene a su disposición GNU <code>tar</code> y el comando por defecto <code>bsdtar</code>. La versión GNU puede ser invocada mediante <code>gtar</code>. Soporta dispositivos remotos mediante la misma sintaxis que <code>rdump</code>. Para hacer un <code>tar</code> a una unidad de cinta conectada a una Sun llamada <code>komodo</code>, use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/bin/gtar cf komodo:/dev/nsa8 . 2&gt;&amp;1</span></code></pre></div></div><div class=paragraph><p>Puede hacer lo mismo con o con <code>bsdtar</code> usando un "pipe" y <code>rsh</code> para mandar los datos a una unidad de cinta remota.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tar cf - . | rsh nombredemaquina dd of=dispositivo-de-cinta obs=20b</span></code></pre></div></div><div class=paragraph><p>Si le preocupa la seguridad del proceso de hacer un respaldo a través de una red debe usar <code>ssh</code> en lugar de <code>rsh</code>.</p></div></div><div class=sect2><h3 id=_cpio>18.11.3. <code>cpio</code><a class=anchor href=#_cpio></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=cpio&amp;sektion=1&amp;format=html">cpio(1)</a> es el programa de intercambio de archivos de cinta para medios magnéticos. <code>cpio</code> tiene opciones (entre muchas otras) para realizar intercambio de bytes, escribir un número diferente de formatos de archivo y hacer "pipe" de datos hacia otros programas. Esta última opción hace de <code>cpio</code> una elección excelente para medios de instalación. <code>cpio</code> no sabe cómo recorrer el árbol de directorios, así que debe facilitarle una lista de directorios a través de <span class=filename>stdin</span>.</p></div><div class=paragraph><p><code>cpio</code> no permite respaldos a través de la red. Puede usar un pipe y <code>rsh</code> para mandar los datos a una unidad de cinta remota.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># for f in lista_directorios; do</span>

<span class=c># find $f &lt;&lt; backup.list</span>

<span class=c># done</span>
<span class=c># cpio -v -o --format=newc &lt; backup.list | ssh usuario@máquina &#34;cat &gt; dispositivo_de_respaldo&#34;</span></code></pre></div></div><div class=paragraph><p>Donde <em>lista_directorios</em> es la lista de directorios que desea respaldar, <em>usuario</em>@<em>máquina</em> es la combinación usuario/nombre de equipo que realizará el respaldo y <em>dispositivo_de_respaldo</em> es donde el respaldo se escribirá efectivamente (por ejemplo <span class=filename>/dev/nsa0</span>).</p></div></div><div class=sect2><h3 id=_pax>18.11.4. <code>pax</code><a class=anchor href=#_pax></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=pax&amp;sektion=1&amp;format=html">pax(1)</a> es la respuesta IEEE/POSIX® a <code>tar</code> y <code>cpio</code>. A través de los años las diversas versiones de <code>tar</code> y <code>cpio</code> se han vuelto ligeramente incompatibles, así que en lugar de pelear por hacerlo completamente estándar, POSIX® creó una nueva utilidad de archivado. <code>pax</code> trata de leer y escribir muchos de los diversos formatos de <code>cpio</code> y <code>tar</code>, además de nuevos formatos propios. Su conjunto de comandos se parece más a <code>cpio</code> que a <code>tar</code>.</p></div></div><div class=sect2><h3 id=backups-programs-amanda>18.11.5. Amanda<a class=anchor href=#backups-programs-amanda></a></h3><div class=paragraph><p>Amanda (Advanced Maryland Network Disk Archiver) es un sistema de respaldos cliente/servidor, en lugar de un solo programa. Un servidor Amanda respaldará a una sola unidad de cinta cualquier cantidad de computadoras que tengan clientes Amanda y una conexión de red al servidor Amanda. Un problema común en sitios con gran cantidad de discos grandes es que la cantidad de tiempo requerida para respaldar los datos directamente a cinta excede la cantidad de tiempo disponible para la tarea. Amanda resuelve este problema. Amanda puede usar un "disco intermedio" para respaldar varios sistemas de ficheros al mismo tiempo. Amanda crea "conjuntos de archivo", esto es, un grupo de cintas usadas durante un periodo de tiempo para crear respaldos completos de todos los sistemas de ficheros listados en el fichero de configuración de Amanda. El "conjunto de archivo" también contiene respaldos incrementales nocturnos (o diferenciales) de todos los sistemas de ficheros. Para restaurar un sistema de ficheros dañado hace falta el respaldo completo más reciente y los respaldos incrementales.</p></div><div class=paragraph><p>El fichero de configuración ofrece un control exhaustivo de los respaldos y del tráfico de red que Amanda genera. Amanda usará cualquiera de los programas de respaldo mencionados arriba para escribir los datos a cinta. Puede instalar Amanda como paquete y como port. No forma parte del sistema base.</p></div></div><div class=sect2><h3 id=_no_hacer_nada>18.11.6. No hacer nada<a class=anchor href=#_no_hacer_nada></a></h3><div class=paragraph><p>"No hacer nada" no es un programa, pero es la estrategia de respaldo más extendida. No tiene coste. No hay un calendario de respaldos a seguir. Simplemente hay que decir <em>que no</em>. Si algo le sucediera a sus datos <em>sonría y acostúmbrese a su nueva situación</em>.</p></div><div class=paragraph><p>Si su tiempo y sus datos valen poco o nada, entonces "no hacer nada" es el programa de respaldo más adecuado para usted. Pero cuidado, UNIX® es una herramienta muy poderosa y puede suceder que dentro de seis meses tenga un montón de ficheros que sean valiosos para usted.</p></div><div class=paragraph><p>"No hacer nada" es el método correcto de respaldo para <span class=filename>/usr/obj</span> y otros árboles de directorios que pueden ser fácilmente recreados por su computadora. Un ejemplo son los archivos que forman la versión HTML o PostScript® de este manual. Estos documentos han sido generados desde ficheros SGML. Crear respaldos de los archivos HTML o PostScript® no es necesario dado que los ficheros SGML se respaldan regularmente.</p></div></div><div class=sect2><h3 id=_cuál_es_el_mejor_programa_de_respaldos>18.11.7. ?Cuál es el mejor programa de respaldos?<a class=anchor href=#_cuál_es_el_mejor_programa_de_respaldos></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a>. <em>Y no hay más que hablar.</em> Elizabeth D. Zwicky realizó pruebas de estrés a a todos los programas de copia de seguridad aquí expuestos. La elección clarísima para preservar todos sus datos y todas las peculiaridades de sus sistemas de ficheros UNIX® es <code>dump</code>. Elizabeth creó sistemas de ficheros conteniendo una gran variedad de condiciones inusuales (y algunos no tan inusuales) y probó cada programa haciendo un respaldo y restaurando esos sistemas de ficheros. Esas peculiaridades incluían: ficheros con y un bloque nulo, ficheros con caracteres extraños en sus nombres, ficheros que no se podían leer ni escribir, dispositivos, ficheros que cambiaban de tamaño durante el respaldo, ficheros que eran creados/borrados durante el respaldo y cosas así. Elizabeth presentó los resultados en LISA V en octubre de 1991. Consulte <a href=http://berdmann.dyndns.org/zwicky/testdump.doc.html>torture-testing Backup and Archive Programs</a>.</p></div></div><div class=sect2><h3 id=_procedimiento_de_restauración_de_emergencia>18.11.8. Procedimiento de restauración de emergencia<a class=anchor href=#_procedimiento_de_restauración_de_emergencia></a></h3><div class=sect3><h4 id=_antes_del_desastre>18.11.8.1. Antes del desastre<a class=anchor href=#_antes_del_desastre></a></h4><div class=paragraph><p>Solamente existen cuatro pasos que debe realizar en preparación de cualquier desastre que pudiera ocurrir.</p></div><div class=paragraph><p>Primero, imprima la etiqueta de disco de cada uno de sus discos (<code>disklabel da0 | lpr</code>), su tabla de sistemas de ficheros (<span class=filename>/etc/fstab</span>) y todos los mensajes de arranque, dos copias de cada uno.</p></div><div class=paragraph><p>Segundo, asegúrese que los disquetes de rescate (<span class=filename>boot.flp</span> y <span class=filename>fixit.flp</span>) tienen todos sus dispositivos. La manera más fácil de revisarlo es reiniciar su máquina con el disquete en la unidad y revisar los mensajes de arranque. Si todos sus dispositivos aparecen en la lista y funcionan, pase al tercer paso.</p></div><div class=paragraph><p>Si ha habido algún problema tiene que crear dos disquetes de arranque personalizados, que deben tener un kernel que pueda montar todos sus discos y acceder a su unidad de cinta. Estos discos deben contener: <code>fdisk</code>, <code>disklabel</code>, <code>newfs</code>, <code>mount</code> y cualquier programa de respaldo que utilice. Estos programas deben estar enlazados estáticamente. Si usa <code>dump</code>, el disquete debe contener <code>restore</code>.</p></div><div class=paragraph><p>Tercero, use cintas de respaldo regularmente. Cualquier cambio que haga después de su último respaldo puede perderse irremediablemente. Proteja contra escritura las cintas de respaldo.</p></div><div class=paragraph><p>Cuarto, pruebe los disquetes (ya sea <span class=filename>boot.flp</span> y <span class=filename>fixit.flp</span> o los dos discos personalizados que creó en el segundo paso) y las cintas de respaldo. Documente el procedimiento. Almacene estas notas con los discos de arranque, las impresiones y las cintas de respaldo. Estará tan perturbado cuando restaure su sistema que las notas pueden pueden evitar que destruya sus cintas de respaldo. (?Como? en lugar de <code>tar xvf /dev/sa0</code>, puede teclear accidentalmente <code>tar cvf /dev/sa0</code> y sobreescribir su cinta).</p></div><div class=paragraph><p>Como medida adicional de seguridad haga discos de inicio y dos cintas de respaldo cada vez. Almacene una de cada en una ubicación remota. Una ubicación remota <em>NO</em> es el sótano del mismo edificio. Muchas firmas alojadas en el World Trade Center aprendieron esta leccón de la manera más difícil. Esa ubicación remota debe estar separada físicamente de sus computadoras y unidades de disco por una distancia significativa.</p></div><div class=exampleblock><div class=title>Ejemplo 3. Un "script" para la creación de discos flexibles de arranque</div><div class=content><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# create a restore floppy
#
# format the floppy
#
PATH=/bin:/sbin:/usr/sbin:/usr/bin

fdformat -q fd0
if [ $? -ne 0 ]
then
	 echo &#34;Bad floppy, please use a new one&#34;
	 exit 1
fi

# place boot blocks on the floppy
#
disklabel -w -B /dev/fd0c fd1440

#
# newfs the one and only partition
#
newfs -t 2 -u 18 -l 1 -c 40 -i 5120 -m 5 -o space /dev/fd0a

#
# mount the new floppy
#
mount /dev/fd0a /mnt

#
# create required directories
#
mkdir /mnt/dev
mkdir /mnt/bin
mkdir /mnt/sbin
mkdir /mnt/etc
mkdir /mnt/root
mkdir /mnt/mnt			# for the root partition
mkdir /mnt/tmp
mkdir /mnt/var

#
# populate the directories
#
if [ ! -x /sys/compile/MINI/kernel ]
then
	 cat &amp;lt;&amp;lt; EOM
The MINI kernel does not exist, please create one.
Here is an example config file:
#
# MINI - A kernel to get FreeBSD onto a disk.
#
machine         &#34;i386&#34;
cpu             &#34;I486_CPU&#34;
ident           MINI
maxusers        5

options         INET                    # needed for _tcp _icmpstat _ipstat
                                        #            _udpstat _tcpstat _udb
options         FFS                     #Berkeley Fast File System
options         FAT_CURSOR              #block cursor in syscons or pccons
options         SCSI_DELAY=15           #Be pessimistic about Joe SCSI device
options         NCONS=2                 #1 virtual consoles
options         USERCONFIG              #Allow user configuration with -c XXX

config          kernel	root on da0 swap on da0 and da1 dumps on da0

device          isa0
device          pci0

device          fdc0	at isa? port &#34;IO_FD1&#34; bio irq 6 drq 2 vector fdintr
device          fd0	at fdc0 drive 0

device          ncr0

device          scbus0

device          sc0	at isa? port &#34;IO_KBD&#34; tty irq 1 vector scintr
device          npx0	at isa? port &#34;IO_NPX&#34; irq 13 vector npxintr

device          da0
device          da1
device          da2

device          sa0

pseudo-device   loop            # required by INET
pseudo-device   gzip            # Exec gzipped a.out&#39;s
EOM
	 exit 1
fi

cp -f /sys/compile/MINI/kernel /mnt

gzip -c -best /sbin/init &gt; /mnt/sbin/init
gzip -c -best /sbin/fsck &gt; /mnt/sbin/fsck
gzip -c -best /sbin/mount &gt; /mnt/sbin/mount
gzip -c -best /sbin/halt &gt; /mnt/sbin/halt
gzip -c -best /sbin/restore &gt; /mnt/sbin/restore

gzip -c -best /bin/sh &gt; /mnt/bin/sh
gzip -c -best /bin/sync &gt; /mnt/bin/sync

cp /root/.profile /mnt/root

cp -f /dev/MAKEDEV /mnt/dev
chmod 755 /mnt/dev/MAKEDEV

chmod 500 /mnt/sbin/init
chmod 555 /mnt/sbin/fsck /mnt/sbin/mount /mnt/sbin/halt
chmod 555 /mnt/bin/sh /mnt/bin/sync
chmod 6555 /mnt/sbin/restore

#
# create the devices nodes
#
cd /mnt/dev
./MAKEDEV std
./MAKEDEV da0
./MAKEDEV da1
./MAKEDEV da2
./MAKEDEV sa0
./MAKEDEV pty0
cd /

#
# create minimum file system table
#
cat &gt; /mnt/etc/fstab &amp;lt;&amp;lt;EOM
/dev/fd0a    /    ufs    rw  1  1
EOM

#
# create minimum passwd file
#
cat &gt; /mnt/etc/passwd &amp;lt;&amp;lt;EOM
root:*:0:0:Charlie &amp;amp;:/root:/bin/sh
EOM

cat &gt; /mnt/etc/master.passwd &amp;lt;&amp;lt;EOM
root::0:0::0:0:Charlie &amp;amp;:/root:/bin/sh
EOM

chmod 600 /mnt/etc/master.passwd
chmod 644 /mnt/etc/passwd
/usr/sbin/pwd_mkdb -d/mnt/etc /mnt/etc/master.passwd

#
# umount the floppy and inform the user
#
/sbin/umount /mnt
echo &#34;The floppy has been unmounted and is now ready.&#34;</pre></div></div></div></div></div><div class=sect3><h4 id=_después_del_desastre>18.11.8.2. Después del desastre<a class=anchor href=#_después_del_desastre></a></h4><div class=paragraph><p>La pregunta clave es: ?sobrevivió su hardware? Ha estado haciendo respaldos regularmente, así que no hay necesidad de preocuparse por el software.</p></div><div class=paragraph><p>Si el hardware ha sufrido daños los componentes deben reemplazarse antes de intentar de usar su sistema.</p></div><div class=paragraph><p>Si su hardware está bien revise sus discos de arranque. Si usa disquetes de arranque personalizados arranque en modo monousuario (teclée <code>-s</code> en el en el "prompt" de arranque <code>boot:</code>). Sáltese el siguiente párrafo.</p></div><div class=paragraph><p>Si utiliza usando los discos <span class=filename>boot.flp</span> y <span class=filename>fixit.flp</span>, siga leyendo. Inserte el disco <span class=filename>boot.flp</span> en la primera unidad de disquete y arranque la máquina. El menú de instalación original se desplegará en pantalla. Seleccione la opción <code>Fixit—​Repair mode with CDROM or floppy.</code>. Inserte el disco <span class=filename>fixit.flp</span> cuando se le pida. Tanto <code>restore</code> como los demás programas que necesitará están en <span class=filename>/mnt2/rescue</span> (<span class=filename>/mnt2/stand</span> para versiones de FreeBSD anteriores a 5.2).</p></div><div class=paragraph><p>Recupere cada sistema de ficheros por separado.</p></div><div class=paragraph><p>Trate de montar (por ejemplo <code>mount /dev/da0a /mnt</code>) la partición raíz de su primer disco. Si la etiqueta del disco ha sufrido daños use <code>disklabel</code> para reparticionar y etiquetar el disco de forma que coincida con la etiqueta que imprimió y guardó previamente. Use <code>newfs</code> para crear de nuevo sus sistemas de ficheros. Monte de nuevo la partición raíz del disquete en modo lectura/escritura (<code>mount -u -o rw /mnt</code>). Ejecute su programa de respaldo y utilice las cintas de respaldo para restaurar sus datos en este sistema de ficheros (<code>restore vrf /dev/sa0</code>). Desmonte el sistema de ficheros (<code>umount /mnt</code>). Repita el proceso con cada sistema de ficheros que sufrió daños.</p></div><div class=paragraph><p>Una vez que su sistema esté en marcha respalde sus datos en cintas nuevas. Cualquiera que haya sido la causa de la caída o pérdida de datos puede suceder de nuevo. Una hora más que gaste ahora puede ahorrarle mucho sufrimiento más adelante.</p></div></div></div></div></div><div class=sect1><h2 id=disks-virtual>18.12. Sistemas de ficheros en red, memoria y respaldados en fichero<a class=anchor href=#disks-virtual></a></h2><div class=sectionbody><div class=paragraph><p>Además de los discos que conecta físicamente en su máquina (discos flexibles, CDs, discos duros, etc.) FreeBSD permite usar otro tipo de discos: <em>los discos virtuales</em>.</p></div><div class=paragraph><p>Esto incluye sistemas de ficheros en red como <a href=../advanced-networking/#network-nfs>NFS</a> y Coda, sistemas de ficheros basados en memoria y sistemas de ficheros basados en fichero.</p></div><div class=paragraph><p>Según la versión de FreeBSD que utilice tendrá que utilizar diferentes herramientas para la creación y uso de sistemas de ficheros en memoria y sistemas de ficheros basados en fichero.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Los usuarios de FreeBSD 4.X tendrán que usar <a href="https://man.freebsd.org/cgi/man.cgi?query=MAKEDEV&amp;sektion=8&amp;format=html">MAKEDEV(8)</a> para crear los dispositivos requeridos. FreeBSD 5.0 y posteriores usan <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a> para gestionar los nodos de dispositivo correspondientes de forma transparente para el usuario.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=disks-vnconfig>18.12.1. Sistema de ficheros basado en fichero en FreeBSD 4.X<a class=anchor href=#disks-vnconfig></a></h3><div class=paragraph><p>La utilidad <a href="https://man.freebsd.org/cgi/man.cgi?query=vnconfig&amp;sektion=8&amp;format=html">vnconfig(8)</a> configura y habilita vnodes de dispositivos de pseudodisco. Un <em>vnode</em> es una representación de un fichero y es el enfoque de la actividad de fichero. Esto significa que <a href="https://man.freebsd.org/cgi/man.cgi?query=vnconfig&amp;sektion=8&amp;format=html">vnconfig(8)</a> utiliza ficheros para crear y operar un sistema de ficheros. Un uso posible es el montaje de imágenes de disquetes o CD almacenadas como ficheros.</p></div><div class=paragraph><p>Para poder usar <a href="https://man.freebsd.org/cgi/man.cgi?query=vnconfig&amp;sektion=8&amp;format=html">vnconfig(8)</a> necesitará tener <a href="https://man.freebsd.org/cgi/man.cgi?query=vn&amp;sektion=4&amp;format=html">vn(4)</a> en el fichero de configuración de su kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>pseudo-device vn</pre></div></div><div class=paragraph><p>Para montar una imagen de un sistema de ficheros:</p></div><div class=exampleblock><div class=title>Ejemplo 4. Uso de vnconfig para montar una imagen de un sistema de ficheros bajo FreeBSD 4.X</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vnconfig vn0 imagendedisco</span>
<span class=c># mount /dev/vn0c /mnt</span></code></pre></div></div></div></div><div class=paragraph><p>Para crear una nueva imagen de un sistema de ficheros con <a href="https://man.freebsd.org/cgi/man.cgi?query=vnconfig&amp;sektion=8&amp;format=html">vnconfig(8)</a>:</p></div><div class=exampleblock><div class=title>Ejemplo 5. Creación de una imagen nueva de un sistema de ficheros respaldado en un archivo con <code>vnconfig</code></div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=nuevaimagen bs=1k count=5k</span>
5120+0 records <span class=k>in
</span>5120+0 records out
<span class=c># vnconfig -s labels -c vn0 nuevaimagen</span>
<span class=c># disklabel -r -w vn0 auto</span>
<span class=c># newfs vn0c</span>
Warning: 2048 sector<span class=o>(</span>s<span class=o>)</span> <span class=k>in </span>last cylinder unallocated
/dev/vn0c:     10240 sectors <span class=k>in </span>3 cylinders of 1 tracks, 4096 sectors
        5.0MB <span class=k>in </span>1 cyl <span class=nb>groups</span> <span class=o>(</span>16 c/g, 32.00MB/g, 1280 i/g<span class=o>)</span>
super-block backups <span class=o>(</span><span class=k>for </span>fsck <span class=nt>-b</span> <span class=c>#) at:</span>
 32
<span class=c># mount /dev/vn0c /mnt</span>
<span class=c># df /mnt</span>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/vn0c        4927        1     4532     0%    /mnt</code></pre></div></div></div></div></div><div class=sect2><h3 id=disks-mdconfig>18.12.2. Sistemas de ficheros basados en fichero en FreeBSD 5.X<a class=anchor href=#disks-mdconfig></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> se usa para configurar y habilitar discos habilitar discos de memoria, <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a>, en FreeBSD 5.X. Para usar <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a>, tendrá que cargar el módulo <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> o añadir soporte para el mismo el el fichero de configuración del kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>device md</pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> soporta tres tipos de discos virtuales en memoria: discos de memoria asignados mediante <a href="https://man.freebsd.org/cgi/man.cgi?query=malloc&amp;sektion=9&amp;format=html">malloc(9)</a>, discos de memoria usando un fichero o espacio de swap como respaldo. Un uso posible es montar imágenes de disquetes o CD archivadas.</p></div><div class=paragraph><p>Para montar una imagen de un sistema de ficheros:</p></div><div class=exampleblock><div class=title>Ejemplo 6. Uso de <code>mdconfig</code> para montar una imagen de un sistema de ficheros en FreeBSD 5.X</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdconfig -a -t vnode -f imagendedisco -u 0</span>
<span class=c># mount /dev/md0 /mnt</span></code></pre></div></div></div></div><div class=paragraph><p>Para crear una imagen nueva de un sistema de ficheros con <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a>:</p></div><div class=exampleblock><div class=title>Ejemplo 7. Creación de un disco respaldado en fichero con <code>mdconfig</code></div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=nuevaimagen bs=1k count=5k</span>
5120+0 records <span class=k>in
</span>5120+0 records out
<span class=c># mdconfig -a -t vnode -f nuevaimagen -u 0</span>
<span class=c># disklabel -r -w md0 auto</span>
<span class=c># newfs md0c</span>
/dev/md0c: 5.0MB <span class=o>(</span>10240 sectors<span class=o>)</span> block size 16384, fragment size 2048
	using 4 cylinder <span class=nb>groups </span>of 1.27MB, 81 blks, 256 inodes.
super-block backups <span class=o>(</span><span class=k>for </span>fsck <span class=nt>-b</span> <span class=c>#) at:</span>
 32, 2624, 5216, 7808
<span class=c># mount /dev/md0c /mnt</span>
<span class=c># df /mnt</span>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4846        2     4458     0%    /mnt</code></pre></div></div></div></div><div class=paragraph><p>Si no especifica el número de unidad con la opción <code>-u</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> usará la designación automática de <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> para seleccionar un dispositivo sin usar. El nombre de la unidad designada se enviará a la salida esándar como <span class=filename>md4</span>. Para más información sobre <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> consulte su página de manual.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A partir de FreeBSD 5.1-RELEASE <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> reemplazó a <a href="https://man.freebsd.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;format=html">disklabel(8)</a>. En <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> se eliminaron muchas opciones y parámetros obsoletos. En el ejemplo de arriba ignore la opción <code>-r</code>. Para más información consulte la página de manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> es muy útil, aunque requiere muchas líneas de comando para crear un sistema de ficheros basado en un fichero. FreeBSD 5.0 incorpora <a href="https://man.freebsd.org/cgi/man.cgi?query=mdmfs&amp;sektion=8&amp;format=html">mdmfs(8)</a>, que configura un disco <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> utilizando <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a>, pone un sistema de ficheros UFS en él mediante <a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a> y lo monta usando <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a>. Por ejemplo, si desea crear y montar la misma imagen de sistema de ficheros de arriba, simplemente teclée lo siguiente:</p></div><div class=exampleblock><div class=title>Ejemplo 8. Configurar y montar un disco basado en un fichero con <code>mdmfs</code></div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=nuevaimagen bs=1k count=5k</span>
5120+0 records <span class=k>in
</span>5120+0 records out
<span class=c># mdmfs -F newimage -s 5m md0 /mnt</span>
<span class=c># df /mnt</span>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4846    2  4458     0%    /mnt</code></pre></div></div></div></div><div class=paragraph><p>Si utiliza la opción <code>md</code> sin número de unidad, <a href="https://man.freebsd.org/cgi/man.cgi?query=mdmfs&amp;sektion=8&amp;format=html">mdmfs(8)</a> usará la opción de auto unidad de <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> para selecionar automáticamente un dispositivo sin usar. Para más información sobre <a href="https://man.freebsd.org/cgi/man.cgi?query=mdmfs&amp;sektion=8&amp;format=html">mdmfs(8)</a> diríjase a la página de manual.</p></div></div><div class=sect2><h3 id=disks-md-freebsd4>18.12.3. Sistemas de ficheros basados en memoria en FreeBSD 4.X<a class=anchor href=#disks-md-freebsd4></a></h3><div class=paragraph><p>El controlador <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> es un modo sencillo y eficiente de crear sistemas de ficheros basados en memoria en FreeBSD 4.X. <a href="https://man.freebsd.org/cgi/man.cgi?query=malloc&amp;sektion=9&amp;format=html">malloc(9)</a> se usa para ubicar la memoria.</p></div><div class=paragraph><p>Sencillamete toma un sistema de ficheros que usted ha preparado con, por ejemplo, <a href="https://man.freebsd.org/cgi/man.cgi?query=vnconfig&amp;sektion=8&amp;format=html">vnconfig(8)</a>, y:</p></div><div class=exampleblock><div class=title>Ejemplo 9. Disco de memoria md en FreeBSD 4.X</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=nuevaimagen of=/dev/md0</span>
5120+0 records <span class=k>in
</span>5120+0 records out
<span class=c># mount /dev/md0c /mnt</span>
<span class=c># df /mnt</span>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4927        1     4532     0%    /mnt</code></pre></div></div></div></div><div class=paragraph><p>Para más información por favor consulte la página de manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a>.</p></div></div><div class=sect2><h3 id=disks-md-freebsd5>18.12.4. sistemas de ficheros basados en memoria en FreeBSD 5.X<a class=anchor href=#disks-md-freebsd5></a></h3><div class=paragraph><p>Se usan las mismas herramientas para tratar con sistemas de ficheros basados en memoria o en ficheros: <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> o <a href="https://man.freebsd.org/cgi/man.cgi?query=mdmfs&amp;sektion=8&amp;format=html">mdmfs(8)</a>. El almacenamiento de sistemas de ficheros basados en memoria requiere el uso de <a href="https://man.freebsd.org/cgi/man.cgi?query=malloc&amp;sektion=9&amp;format=html">malloc(9)</a>.</p></div><div class=exampleblock><div class=title>Ejemplo 10. Creación de un nuevo disco basado en memoria con <code>mdconfig</code></div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdconfig -a -t malloc -s 5m -u 1</span>
<span class=c># newfs -U md1</span>
/dev/md1: 5.0MB <span class=o>(</span>10240 sectors<span class=o>)</span> block size 16384, fragment size 2048
	using 4 cylinder <span class=nb>groups </span>of 1.27MB, 81 blks, 256 inodes.
	with soft updates
super-block backups <span class=o>(</span><span class=k>for </span>fsck <span class=nt>-b</span> <span class=c>#) at:</span>
 32, 2624, 5216, 7808
<span class=c># mount /dev/md1 /mnt</span>
<span class=c># df /mnt</span>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4846    2  4458     0%    /mnt</code></pre></div></div></div></div><div class=exampleblock><div class=title>Ejemplo 11. Creación de un nuevo disco basado en memoria con <code>mdmfs</code></div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdmfs -M -s 5m md2 /mnt</span>
<span class=c># df /mnt</span>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</code></pre></div></div></div></div><div class=paragraph><p>En lugar de usar un sistema de ficheros respaldado en <a href="https://man.freebsd.org/cgi/man.cgi?query=malloc&amp;sektion=9&amp;format=html">malloc(9)</a>, es posible utilizar swap; lo único que debe hacer es sustituir <code>malloc</code> por <code>swap</code> en la línea de comando de <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a>. <a href="https://man.freebsd.org/cgi/man.cgi?query=mdmfs&amp;sektion=8&amp;format=html">mdmfs(8)</a> por defecto (sin <code>-M</code>) crea un disco basado en swap). Para más información, consulte las páginas de manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> y de <a href="https://man.freebsd.org/cgi/man.cgi?query=mdmfs&amp;sektion=8&amp;format=html">mdmfs(8)</a>.</p></div></div><div class=sect2><h3 id=_desconexión_del_sistema_de_un_disco_de_memoria>18.12.5. Desconexión del sistema de un disco de memoria<a class=anchor href=#_desconexión_del_sistema_de_un_disco_de_memoria></a></h3><div class=paragraph><p>Cuando un sistema de ficheros basado en memoria o basado en fichero no se usa puede liberar recursos del sistema. Lo primero es desmontar el sistema de ficheros: use <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a> para desconectar el disco del sistema y liberar dichos recursos.</p></div><div class=paragraph><p>Por ejemplo, para desconectar y liberar todos los recursos usados por <span class=filename>/dev/md4</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdconfig -d -u 4</span></code></pre></div></div><div class=paragraph><p>Es posible listar información sobre dispositivos <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> configurados en el sistema mediante <code>mdconfig -l</code>.</p></div><div class=paragraph><p>En FreeBSD 4.X se usa <a href="https://man.freebsd.org/cgi/man.cgi?query=vnconfig&amp;sektion=8&amp;format=html">vnconfig(8)</a> para desconectar el dispositivo. Por ejemplo, para desconectar y liberar todos los recursos usados por <span class=filename>/dev/vn4</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vnconfig -u vn4</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=snapshots>18.13. Instantáneas ("snapshots") de sistemas de ficheros<a class=anchor href=#snapshots></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD 5.0 ofrece una característica relacionada con <a href=../config/#soft-updates>Soft Updates</a>: las instantáneas del sistema de ficheros.</p></div><div class=paragraph><p>Las instantáneas permiten a un usuario crear imágenes de uno o más sistemas de ficheros dados, y tratarlas como un fichero. Los ficheros de instantánea deben crearse en el sistema de ficheros en el que se realiza la acción, y un usuario puede crear hasta 20 (veinte) instantáneas por sistema de ficheros. Las instantáneas activas se graban en el superbloque, lo que hace que sigan ahí independientemente de montajes, remontajes y reinicios del sistema. Cuando ya no necesite una instantánea puede borrarla con <a href="https://man.freebsd.org/cgi/man.cgi?query=rm&amp;sektion=1&amp;format=html">rm(1)</a>. Las instantáneas pueden borrarse en cualquier orden pero puede que no pueda recuperar todo el espacio debido a que otra instantánea puede reclamar algunos bloques liberados.</p></div><div class=paragraph><p>La bandera inalterable de fichero <code>snapshot</code> se activa con <a href="https://man.freebsd.org/cgi/man.cgi?query=mksnap_ffs&amp;sektion=8&amp;format=html">mksnap_ffs(8)</a> después de la creación inicial de un fichero de instantánea. <a href="https://man.freebsd.org/cgi/man.cgi?query=unlink&amp;sektion=1&amp;format=html">unlink(1)</a> hace una excepción con los ficheros de instantánea, ya que permite que se les borre.</p></div><div class=paragraph><p>Las instantáneas se crean con <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a>. Veamos un ejemplo. Vamos a colocar una instantánea de <span class=filename>/var</span> en <span class=filename>/var/snapshot/snap</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -u -o snapshot /var/snapshot/snap /var</span></code></pre></div></div><div class=paragraph><p>También puede usar <a href="https://man.freebsd.org/cgi/man.cgi?query=mksnap_ffs&amp;sektion=8&amp;format=html">mksnap_ffs(8)</a> para crear una instantánea:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mksnap_ffs /var /var/snapshot/snap</span></code></pre></div></div><div class=paragraph><p>Si busca ficheros de instantánea en un sistema de de ficheros (por ejemplo <span class=filename>/var</span>) puede usar <a href="https://man.freebsd.org/cgi/man.cgi?query=find&amp;sektion=1&amp;format=html">find(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># find /var -flags snapshot</span></code></pre></div></div><div class=paragraph><p>Una instantánea tiene distintos usos:</p></div><div class=ulist><ul><li><p>Algunos administradores usan un fichero de instantánea como respaldo, puesto que la instantánea puede guardarse en CD o cinta.</p></li><li><p>Integridad de ficheros; <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> puede ejecutarse en una instantánea. Asumiendo que el sistema de ficheros estuviera limpio cuando se montó se debe obtener un resultado limpio (e intacto). En esencia el proceso <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> hace esto mismo en segundo plano.</p></li><li><p>Ejecución de <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a> en la instantánea. Se obtendrá un dump consistente con el sistema de ficheros y los sellos de hora de la instantánea. <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a> también puede leer una instantánea, crear una imagen dump y eliminar la instantánea en un comando usando la opción <code>-L</code>.</p></li><li><p>Ejecutar un <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> contra la instantánea como una imagen congelada del sistema de ficheros. Para montar la instantánea <span class=filename>/var/snapshot/snap</span> ejecute:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdconfig -a -t vnode -f /var/snapshot/snap -u 4</span>
<span class=c># mount -r /dev/md4 /mnt</span></code></pre></div></div></li></ul></div><div class=paragraph><p>Podrá recorrer la jerarquía de su sistema de ficheros <span class=filename>/var</span> congelado montado en <span class=filename>/mnt</span>. Todo estará en el mismo estado en el que estaba cuando creó la instantánea. La única excepción es que cualquier instantánea anterior aparecerá como un fichero de longitud cero. Cuando haya acabado de usar una instantánea puede desmontarla con:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># umount /mnt</span>
<span class=c># mdconfig -d -u 4</span></code></pre></div></div><div class=paragraph><p>Para más información sobre <code>softupdates</code> e instantáneas de sistemas ficheros, incluyendo textos técnicos, visite el sitio web de Marshall Kirk McKusick: <a href=http://www.mckusick.com/>http://www.mckusick.com/</a>.</p></div></div></div><div class=sect1><h2 id=quotas>18.14. Cuotas en sistemas de ficheros<a class=anchor href=#quotas></a></h2><div class=sectionbody><div class=paragraph><p>Las cuotas son una opción del sistema operativo que le permite limitar la cantidad de espacio en disco y/o el número de fichero que un usuario o miembros de un grupo pueden crear en el sistema, pudiendo además hacerlo de forma independiente en cada sistema de ficheros. Suele usarse principalmente en sistemas de tiempo compartido, donde se busca limitar la cantidad de recursos que cualquier usuario o grupo pueden utilizar. Esto evitará que un usuario o un grupo de usuarios consuma todos el espacio disponible en disco.</p></div><div class=sect2><h3 id=_configuración_del_sistema_para_habilitar_cuotas_de_disco>18.14.1. Configuración del sistema para habilitar cuotas de disco<a class=anchor href=#_configuración_del_sistema_para_habilitar_cuotas_de_disco></a></h3><div class=paragraph><p>Antes de intentar configurar el uso de cuotas de disco hay que asegurarse de que las cuotas están activadas en el kernel. La siguiente línea debe estar en el fichero de de configuración del kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>options QUOTA</pre></div></div><div class=paragraph><p>El kernel <span class=filename>GENERIC</span> no lo tiene activado por defecto, así que tendrá que configurar, compilar e instalar un kernel personalizado para poder usar cuotas de disco. Por favor, consulte el <a href=../kernelconfig/#kernelconfig>Configuración del kernel de FreeBSD</a> para más información sobre la configuración del kernel.</p></div><div class=paragraph><p>A continuación tendrá que habilitar las cuotas de disco en <span class=filename>/etc/rc.conf</span>. Añadale la siguiente línea:</p></div><div class="literalblock programlisting"><div class=content><pre>enable_quotas=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Hay una variable que le permitirá efectuar un control más exhaustivo sobre el arranque de cuotas. Normalmente se revisa la integridad de cuotas de cada sistema de ficheros en el arranque; el responsable es <a href="https://man.freebsd.org/cgi/man.cgi?query=quotacheck&amp;sektion=8&amp;format=html">quotacheck(8)</a>. <a href="https://man.freebsd.org/cgi/man.cgi?query=quotacheck&amp;sektion=8&amp;format=html">quotacheck(8)</a> se asegura de que los datos que hay en su base de datos de cuotas reflejen realmente los datos del sistema de ficheros. Es un proceso que lleva mucho tiempo y que afectará significativamente al tiempo que tardará su sistema en arrancar. Si desea saltarse ese paso puede usar una variable al efecto en <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>check_quotas=&#34;NO&#34;</pre></div></div><div class=paragraph><p>Para concluir tendrá que editar <span class=filename>/etc/fstab</span> para habilitar las cuotas de disco para cada sistema de ficheros. Es aquí donde podrá habilitar cuotas por usuario, por grupo, o ambos en todos sus sistemas de ficheros.</p></div><div class=paragraph><p>Para habilitar cuotas por usuario en un sistema de ficheros añada la opción <code>userquota</code> al campo de opciones en la entrada de <span class=filename>/etc/fstab</span> que corresponda al sistema de ficheros en el que quiere habilitar las cuotas. Veamos un ejemplo:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/da1s2g   /home    ufs rw,userquota 1 2</pre></div></div><div class=paragraph><p>En el caso de las cuotas de grupo es muy similar. Use la opción <code>groupquota</code> en lugar de <code>userquota</code>. Para habilitar cuotas por usuario y por grupo modifique la entrada de este modo:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/da1s2g    /home    ufs rw,userquota,groupquota 1 2</pre></div></div><div class=paragraph><p>Por defecto los ficheros de cuota se guardan en el directorio raíz del sistema de ficheros con los nombres <span class=filename>quota.user</span> y <span class=filename>quota.group</span> para cuotas de usuario y grupo respectivamente. Consulte <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a> para más información. Aunque la página de manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a> diga que puede especificar otra ubicación para los ficheros de cuota, no se recomienda hacerlo debido a que las diversas herramientas de gestió cuotas no parecen sobrellevar esto adecuadamente.</p></div><div class=paragraph><p>Hecho todo esto puede reiniciar su sistema con el nuevo kernel. <span class=filename>/etc/rc</span> ejecutará automáticamente los comandos apropiados para crear los ficheros de cuota iniciales que requieran todas las entradas en en <span class=filename>/etc/fstab</span>, así que no hay necesidad de crear ficheros de cuota de longitud cero.</p></div><div class=paragraph><p>En el curso normal de operaciones no se le debería pedir que ejecute <a href="https://man.freebsd.org/cgi/man.cgi?query=quotacheck&amp;sektion=8&amp;format=html">quotacheck(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=quotaon&amp;sektion=8&amp;format=html">quotaon(8)</a> o <a href="https://man.freebsd.org/cgi/man.cgi?query=quotaoff&amp;sektion=8&amp;format=html">quotaoff(8)</a> manualmente. Sin embargo, tal vez quiera leer sus páginas de manual para familiarizarse con su funcionamiento.</p></div></div><div class=sect2><h3 id=_configuración_de_límites_de_cuota>18.14.2. Configuración de límites de cuota<a class=anchor href=#_configuración_de_límites_de_cuota></a></h3><div class=paragraph><p>Una vez que tenga configurado su sistema para usar cuotas verifique que en realidad estén habilitadas. Una manera sencilla de hacer esto es ejecutar:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># quota -v</span></code></pre></div></div><div class=paragraph><p>Debe ver un resumen de una sola línea de uso del disco y los límites de cuota actuales para cada sistema de ficheros donde estén habilitadas las cuotas.</p></div><div class=paragraph><p>Ahora puede iniciar la asignación de límites de cuota con <a href="https://man.freebsd.org/cgi/man.cgi?query=edquota&amp;sektion=8&amp;format=html">edquota(8)</a>.</p></div><div class=paragraph><p>Tiene varias opciones para imponer límites en el espacio de disco que un usuario o grupo puede ocupar, y cuántos ficheros pueden crear. Puede limitar el uso de disco basándose en el espacio en disco (cuotas de bloque) o en el número de ficheros (cuotas de inodo) o una combinación de ambas. Cada uno de estos límites a su vez se divide en dos categorías: límites duros y suaves.</p></div><div class=paragraph><p>Un límite duro no puede ser excedido. Una vez que un usuario alcanza su límite duro no puede realizar más ubicaciones en el sistema de ficheros en cuestión. Por ejemplo, si el usuario tiene un límite duro de 500 kbytes en un sistema de ficheros y está utilizando 490 kbytes, el usuario solo puede ocupar otros 10 kbytes. Un intento de ocupar 11 kbytes más fallará.</p></div><div class=paragraph><p>Los límites suaves pueden excederse por un periodo Este periodo de tiempo recibe el nombre de periodo de gracia, que por defecto es una semana. Si un usuario sobrepasa su periodo de gracia el límite suave se convertirá en un límite duro y no se permitirán usos de disco adicionales. Cuando el usuario devuelve su cuota de uso de recursos a un punto por debajo de su límite suave el periodo de gracia se reinicia.</p></div><div class=paragraph><p>Veamos un ejemplo de uso de <a href="https://man.freebsd.org/cgi/man.cgi?query=edquota&amp;sektion=8&amp;format=html">edquota(8)</a>. Si se usa <a href="https://man.freebsd.org/cgi/man.cgi?query=edquota&amp;sektion=8&amp;format=html">edquota(8)</a> se entra en el el editor declarado en la variable de entorno <code>EDITOR</code>, o en el editor vi si no ha modificado el valor por defecto de la variable <code>EDITOR</code>, para que pueda editar los límites de cuota.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># edquota -u test</span></code></pre></div></div><div class="literalblock programlisting"><div class=content><pre>Quotas for user test:
/usr: kbytes in use: 65, limits (soft = 50, hard = 75)
        inodes in use: 7, limits (soft = 50, hard = 60)
/usr/var: kbytes in use: 0, limits (soft = 50, hard = 75)
        inodes in use: 0, limits (soft = 50, hard = 60)</pre></div></div><div class=paragraph><p>Debería ver dos líneas por cada sistema de ficheros que tenga habilitadas las cuotas. Una línea para los límites de bloque y una línea para límites de inodo. Por ejemplo, para elevar los límites de este usuario de un límite suave de 50 y un límite duro de 75 a un límite suave de 500 y un límite duro de 600, cambie:</p></div><div class="literalblock programlisting"><div class=content><pre>/usr: kbytes in use: 65, limits (soft = 50, hard = 75)</pre></div></div><div class=paragraph><p>por:</p></div><div class="literalblock programlisting"><div class=content><pre>/usr: kbytes in use: 65, limits (soft = 500, hard = 600)</pre></div></div><div class=paragraph><p>Los nuevos límites de cuota se aplicarán en cuanto salga del editor.</p></div><div class=paragraph><p>Algunas veces se quieren activar límites de cuota en un rango de UIDs. Esto puede realizarse con la opción <code>-p</code> de <a href="https://man.freebsd.org/cgi/man.cgi?query=edquota&amp;sektion=8&amp;format=html">edquota(8)</a>. Primero asigne el límite de cuota deseado a un usuario y luego ejecute <code>edquota -p protouser startuid-enduid</code>. Por ejemplo, si el usuario <code>test</code> tiene el límite de cuota deseado, el siguiente comando puede usarse para duplicar esos límites de cuota para los UIDs de 10,000 hasta 19,999:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># edquota -p test 10000-19999</span></code></pre></div></div><div class=paragraph><p>Para más información consulte la página de manual <a href="https://man.freebsd.org/cgi/man.cgi?query=edquota&amp;sektion=8&amp;format=html">edquota(8)</a>.</p></div></div><div class=sect2><h3 id=_revisión_de_los_límites_de_cuota_y_uso_de_disco>18.14.3. Revisión de los límites de cuota y uso de disco<a class=anchor href=#_revisión_de_los_límites_de_cuota_y_uso_de_disco></a></h3><div class=paragraph><p>Puede usar <a href="https://man.freebsd.org/cgi/man.cgi?query=quota&amp;sektion=1&amp;format=html">quota(1)</a> o <a href="https://man.freebsd.org/cgi/man.cgi?query=repquota&amp;sektion=8&amp;format=html">repquota(8)</a> para revisar los límites de cuota y uso del disco. El comando <a href="https://man.freebsd.org/cgi/man.cgi?query=quota&amp;sektion=1&amp;format=html">quota(1)</a> le permitirá revisar cuotas individuales de usuario o grupo y uso del disco. Un usuario puede sólamente examinar su propia cuota y la cuota de un grupo al que pertenezca. Sólamente el superusuario puede ver las cuotas de todos los usuarios y grupos. <a href="https://man.freebsd.org/cgi/man.cgi?query=repquota&amp;sektion=8&amp;format=html">repquota(8)</a> permite obtener un resumen de todas las cuotas y uso del disco de todos los sistemas de ficheros con cuotas habilitadas.</p></div><div class=paragraph><p>En el siguiente ejemplo vemos la salida de <code>quota -v</code> para un usuario que tiene límites de cuota en dos sistemas de ficheros.</p></div><div class="literalblock programlisting"><div class=content><pre>Disk quotas for user test (uid 1002):
     Filesystem  usage    quota   limit   grace   files   quota   limit   grace
           /usr      65*     50      75   5days       7      50      60
       /usr/var       0      50      75               0      50      60</pre></div></div><div class=paragraph><p>En el sistema de ficheros <span class=filename>/usr</span> del ejemplo este usuario está actualmente 15 kbytes sobre su límite suave de 50 kbytes y le quedan 5 días de su periodo de gracia. Observe el asterisco, <code>*</code> que indica que el usuario está actualmente por encima de su límite de cuota.</p></div><div class=paragraph><p>Normalmente los sistemas de ficheros en los que el usuario no esté utilizando espacio en disco no se mostrarán en la salida del comando <a href="https://man.freebsd.org/cgi/man.cgi?query=quota&amp;sektion=1&amp;format=html">quota(1)</a>, incluso si tiene un límite de cuota asignado para esos sistemas de fichero. La opción <code>-v</code> desplegará esos sistemas de ficheros, en nuestro ejemplo el sistema de ficheros <span class=filename>/usr/var</span>.</p></div></div><div class=sect2><h3 id=_cuotas_en_nfs>18.14.4. Cuotas en NFS<a class=anchor href=#_cuotas_en_nfs></a></h3><div class=paragraph><p>Las cuotas son impuestas por el subsistema de cuotas en el servidor NFS. El dæmon <a href="https://man.freebsd.org/cgi/man.cgi?query=rpc.rquotad&amp;sektion=8&amp;format=html">rpc.rquotad(8)</a> facilita la información a <a href="https://man.freebsd.org/cgi/man.cgi?query=quota&amp;sektion=1&amp;format=html">quota(1)</a> en los clientes NFS, permitiéndoles a los usuarios de esas máquinas ver sus estadísticas de cuota.</p></div><div class=paragraph><p>Habilite <code>rpc.rquotad</code> en <span class=filename>/etc/inetd.conf</span> del siguiente modo:</p></div><div class="literalblock programlisting"><div class=content><pre>rquotad/1      dgram rpc/udp wait root /usr/libexec/rpc.rquotad rpc.rquotad</pre></div></div><div class=paragraph><p>Y reinicie <code>inetd</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -HUP `cat /var/run/inetd.pid`</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=disks-encrypting>18.15. Cifrado de particiones de disco<a class=anchor href=#disks-encrypting></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD ofrece un alto grado de protección contra el acceso no autorizado a los datos. Los Permisos de fichero y MAC (Mandatory Access Control, controles de acceso obligatorio, consulte el <a href=../mac/#mac>Mandatory Access Control</a>) ayudan a evitar que otros tengan acceso no autorizado a los datos mientras el sistema operativo está funcionando y la computadora está encendida. Sin embargo los permisos impuestos por el sistema operativo son irrelevantes si un atacante tiene acceso físico al sistema y puede simplemente mover el disco duro de la computadora a otro sistema para copiar y analizar datos sensibles.</p></div><div class=paragraph><p>Independientemente de cómo un atacante pueda conseguir acceso a un disco duro a a un sistema apagado, el cifrado de disco basado en GEOM (GEOM Based Disk Encryption, gbde) puede proteger los datos de los sistemas de ficheros del sistema incluso contra atacantes muy decididos y con recursos adecuados a su disposición. A diferencia de otros métodos de cifrado más difíciles de usar, que cifran únicamente ficheos individuales, gbde cifra sistemas de ficheros completos de forma transparente. Ni un solo texto en limpio llega a tocar el disco duro.</p></div><div class=sect2><h3 id=_habilitar_gbde_en_el_kernel>18.15.1. Habilitar gbde en el kernel<a class=anchor href=#_habilitar_gbde_en_el_kernel></a></h3><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Conviértase en <code>root</code></p><div class=paragraph><p>La configuración de gbde requiere privilegios de superusuario.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% su -
Password:</code></pre></div></div></li><li><p>Verifique la versión del sistema operativo</p><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=4&amp;format=html">gbde(4)</a> requiere FreeBSD 5.0 o posterior.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># uname -r</span>
5.0-RELEASE</code></pre></div></div></li><li><p>Añada soporte de <a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=4&amp;format=html">gbde(4)</a> al fichero de configuración de su kernel</p><div class=paragraph><p>Añada la siguiente línea al fichero de configuración de su kernel con el editor que prefiera:</p></div><div class=paragraph><p><code>options GEOM_BDE</code></p></div><div class=paragraph><p>Configure, recompile e instale el kernel de FreeBSD. Este proceso se detalla en el <a href=../kernelconfig/#kernelconfig>Configuración del kernel de FreeBSD</a>.</p></div><div class=paragraph><p>Reinicie con el nuevo kernel.</p></div></li></ol></div></div></div></div><div class=sect2><h3 id=_preparación_del_disco_duro_cifrado>18.15.2. Preparación del disco duro cifrado<a class=anchor href=#_preparación_del_disco_duro_cifrado></a></h3><div class=paragraph><p>El siguiente ejemplo asume que añade a su sistema un disco duro nuevo que contendrá una sola partición cifrada. Esta partición se montará como <span class=filename>/private</span>. gbde puede usarse también para cifrar <span class=filename>/home</span> y <span class=filename>/var/mail</span>, pero esto requeriría instrucciones más complejas que las que se pretenden dar en esta introducción.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Añada el nuevo disco</p><div class=paragraph><p>Instale el nuevo disco en el sistema como se explicó en la <a href=#disks-adding>Añadir discos</a>. En nuestro ejemplo hemos añadido una nueva partición de disco como <span class=filename>/dev/ad4s1c</span>. Los dispositivos <span class=filename>/dev/ad0s1*</span> representan particiones FreeBSD estándar que i existían previamente en el sistema.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ls /dev/ad*</span>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4</code></pre></div></div></li><li><p>Crée un directorio para los ficheros "lock" de gbde</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /etc/gbde</span></code></pre></div></div><div class=paragraph><p>Los ficheros "lock" de gbde contienen información que gbde requiere para acceder a las particiones cifradas. Sin el acceso a los ficheros "lock"gbde no podrá descifrar los datos alojados en la partición cifrada sin una cantidad significativa de trabajo, tarea para la que además no le resultará de ayuda este software. Cada partición cifrada utiliza un fichero "lock" separado.</p></div></li><li><p>Inicialice la partición gbde</p><div class=paragraph><p>Una partición gbde debe inicializarse antes de que pueda utilizarse. Esta inicialización sólo debe hacerse una vez:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gbde init /dev/ad4s1c -i -L /etc/gbde/ad4s1c</span></code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=8&amp;format=html">gbde(8)</a> abrirá su editor para que pueda configurar las opciones de configuración que se le presentarán en una plantilla. Para utilizar UFS1 o UFS2, ponga el sector_size a 2048:</p></div><div class="literalblock programlisting"><div class=content><pre>$FreeBSD: src/sbin/gbde/template.txt,v 1.1 2002/10/20 11:16:13 phk Exp $
#
# El tamaño de sector (sector size) es la unidad de datos más
# pequeña que podrá leer o escribir.  Si la elige demasiado
# pequeña reducirá el rendimiento y la cantidad de espacio
# útil.  Si la elige demasiado grande puede hacer que los sistemas
# de ficheros no funcionen.  512 es el tamaño mínimo y
# siempre funciona.  Si va a usar UFS utilice
#
sector_size     =       2048
[...]</pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=8&amp;format=html">gbde(8)</a> le pedirá dos veces que escriba la contraseña que debe usarse para asegurar los datos. La contraseña debe ser la misma las dos veces. La capacidad de gbde de proteger sus datos depende íntegramente de la calidad de la contraseña que elija.</p></div><div class=paragraph><p>El fichero <code>gbde init</code> crea un fichero "lock" para su partición gbde, que en nuestro ejemplo está en <span class=filename>/etc/gbde/ad4s1c</span>.</p></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content><div class=paragraph><p>Es imprescindible que los ficheros "lock" de gbde <em>deben</em> respaldarse junto con el contenido de cualquier partición cifrada. Aunque la sola acció de borrar un fichero "lock" no puede evitar que un atacante motivado descifre una partición gbde sin el fichero "lock", el propietario legítimo no podrá acceder a los datos en la partición cifrada sin una cantidad notable de trabajo, que es necesario señalar que no entra dentro de las funciones de <a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=8&amp;format=html">gbde(8)</a> ni de su diseñador.</p></div></td></tr></tbody></table></div></li><li><p>Conecte al kernel la partición cifrada</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</span></code></pre></div></div><div class=paragraph><p>Se le pedirá la contraseña que elijió al inicializar la partición cifrada. El nuevo dispositivo cifrado aparecerá en <span class=filename>/dev</span> como <span class=filename>/dev/nombre_de_dispositivo.bde</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ls /dev/ad*</span>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4        /dev/ad4s1c.bde</code></pre></div></div></li><li><p>Crée un sistema de ficheros en el dispositivo cifrado</p><div class=paragraph><p>Una vez el dispositivo cifrado está conectado al kernel puede crear un sistema de ficheros en el dispositivo con <a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a>. Dado que es más rápido inicializar un sistema de ficheros del nuevo UFS2 que un sistema de ficheros del tradicional UFS1, le recomendamos encarecidamente usar <a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a> con la opción <code>-O2</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>La opción <code>-O2</code> es el valor por defecto en FreeBSD 5.1-RELEASE y siguientes.</p></div></td></tr></tbody></table></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># newfs -U -O2 /dev/ad4s1c.bde</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a> debe ejecutarse en una partición gbde conectada, que podrá identificar por la extensión <span class=filename>*.bde</span> del nombre del dispositivo.</p></div></td></tr></tbody></table></div></li><li><p>Montar la partición cifrada</p><div class=paragraph><p>Crée un punto de montaje para el sistema cifrado de ficheros.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /private</span></code></pre></div></div><div class=paragraph><p>Montar el sistema cifrado de ficheros.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /dev/ad4s1c.bde /private</span></code></pre></div></div></li><li><p>Verificar que el sistema cifrado de ficheros esté disponible</p><div class=paragraph><p>el sistema cifrado de ficheros debería ser visible para <a href="https://man.freebsd.org/cgi/man.cgi?query=df&amp;sektion=1&amp;format=html">df(1)</a> y estar listo para su uso.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>df</span> <span class=nt>-H</span>
Filesystem        Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a      1037M    72M   883M     8    /
/devfs            1.0K   1.0K     0B   100    /dev
/dev/ad0s1f       8.1G    55K   7.5G     0    /home
/dev/ad0s1e      1037M   1.1M   953M     0    /tmp
/dev/ad0s1d       6.1G   1.9G   3.7G    35    /usr
/dev/ad4s1c.bde   150G   4.1K   138G     0    /private</code></pre></div></div></li></ol></div></div></div></div><div class=sect2><h3 id=_montaje_de_sistemas_cifrados_de_ficheros>18.15.3. Montaje de sistemas cifrados de ficheros<a class=anchor href=#_montaje_de_sistemas_cifrados_de_ficheros></a></h3><div class=paragraph><p>Todos los sistemas cifrados de ficheros deben reconectarse al kernel después de cada arranque. Además, antes de poder utilizarlo debe revisarlo por si contuviera errores y montarlo. Todo el proceso debe ser ejecutado por el usuario <code>root</code>.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Conectar la partición gbde al kernel</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</span></code></pre></div></div><div class=paragraph><p>Se le pedirá la contraseña que elijió en la inicialización de la partición cifrada gbde.</p></div></li><li><p>Revisión de errores en el sistema de ficheros</p><div class=paragraph><p>Como que los sistemas cifrados de ficheros no pueden aparecer en <span class=filename>/etc/fstab</span> (lo que haría que fueran montados automáticamente), los sistemas de ficheros deben revisarse manualmente mediante <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> antes de montarlos.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># fsck -p -t ffs /dev/ad4s1c.bde</span></code></pre></div></div></li><li><p>Montar los sistemas cifrados de ficheros</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /dev/ad4s1c.bde /private</span></code></pre></div></div><div class=paragraph><p>El sistema cifrado de ficheros está listo para su uso.</p></div></li></ol></div></div></div><div class=sect3><h4 id=_montar_automáticamente_particiones_cifradas>18.15.3.1. Montar automáticamente particiones cifradas<a class=anchor href=#_montar_automáticamente_particiones_cifradas></a></h4><div class=paragraph><p>Es posible usar un "script" para automatizar la conexión, revisión y el montaje de una partición cifrada, pero por razones de seguridad el "script" no debe contener la contraseña de <a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=8&amp;format=html">gbde(8)</a>. Se recomienda ejecutar esos "scripts" se ejecuten de forma manual proporcionando la contraseña vía consola o <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>.</p></div></div></div><div class=sect2><h3 id=_protección_criptográfica_que_usa_gbde>18.15.4. Protección criptográfica que usa gbde<a class=anchor href=#_protección_criptográfica_que_usa_gbde></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=8&amp;format=html">gbde(8)</a> cifra el XXX sector payload usando AES de 128 bits en modo CBC. Cada sector en el disco se cifra con una clave AES diferente. Para más información sobre el diseño criptográfico de gbde, incluyendo cómo se derivan las claves de sector a partir de la contraseña consulte <a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=4&amp;format=html">gbde(4)</a>.</p></div></div><div class=sect2><h3 id=_problemas_de_compatibilidad>18.15.5. Problemas de compatibilidad<a class=anchor href=#_problemas_de_compatibilidad></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a> es incompatible con dispositivos gbde cifrados. Todos los dispositivos <span class=filename>*.bde</span> deben desconectarse del kernel antes de iniciar <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a> o se "congelará" durante la prueba inicial de dispositivos. Para desconectar el el dispositivo cifrado de nuestro ejemplo haga lo siguiente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gbde detach /dev/ad4s1c</span></code></pre></div></div><div class=paragraph><p>Tenga en cuenta también que, como <a href="https://man.freebsd.org/cgi/man.cgi?query=vinum&amp;sektion=4&amp;format=html">vinum(4)</a> no utiliza el subsistema <a href="https://man.freebsd.org/cgi/man.cgi?query=geom&amp;sektion=4&amp;format=html">geom(4)</a>, no es posible usar gbde en volúmenes vinum.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 de marzo de 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Anterior></i><div class=container><a href=http://172.16.201.134:1313/es/books/handbook/audit class=direction>Anterior</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Inicio></i><div class=container><a href=../ class=direction>Inicio</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/es/books/handbook/geom class=direction>Siguiente</a></div><i class="fa fa-angle-right" aria-hidden=true title=Siguiente></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Tabla de contenidos</h3><nav id=TableOfContents><ul><li><a href=#disks-synopsis>18.1. Sinopsis</a></li><li><a href=#disks-naming>18.2. Nombres de dispositivo</a></li><li><a href=#disks-adding>18.3. Añadir discos</a></li><li><a href=#raid>18.4. RAID</a></li><li><a href=#usb-disks>18.5. Dispositivos de almacenamiento USB</a></li><li><a href=#creating-cds>18.6. Creación y uso de medios ópticos (CD)</a></li><li><a href=#creating-dvds>18.7. Crear y utilizar medios ópticos (DVDs)</a></li><li><a href=#floppies>18.8. Creación y uso de disquetes (floppies)</a></li><li><a href=#backups-tapebackups>18.9. Creación y uso de cintas de datos</a></li><li><a href=#backups-floppybackups>18.10. Respaldos en disquetes</a></li><li><a href=#backup-basics>18.11. Bases para respaldos</a></li><li><a href=#disks-virtual>18.12. Sistemas de ficheros en red, memoria y respaldados en fichero</a></li><li><a href=#snapshots>18.13. Instantáneas ("snapshots") de sistemas de ficheros</a></li><li><a href=#quotas>18.14. Cuotas en sistemas de ficheros</a></li><li><a href=#disks-encrypting>18.15. Cifrado de particiones de disco</a></li></ul></nav><hr><div class=resources><h3>Recursos</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Descargar PDF"></i><a href=https://download.freebsd.org/doc/es/books/handbook/handbook_es.pdf>Descargar PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Editar esta página"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/es/_index target=_blank>Editar esta página</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/es/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Elegir idioma">
<span>Spanish</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Claro</option><option value=theme-dark>Oscuro</option><option value=theme-high-contrast>Alto contraste</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/es class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/es/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>