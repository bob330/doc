<!doctype html><html class=theme-light lang=es><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Uso de Servidores de Lenguajes para desarrollo en el árbol de src de FreeBSD para obtener resultados precisos para saltar a definiciones o auto completado."><meta name=keywords content="FreeBSD,Language Server,LSP"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/es/articles/freebsd-src-lsp/><title>Uso de Servidores de Lenguajes para Desarrollo en el Árbol Src de FreeBSD | Portal de documentación de FreeBSD</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Uso de Servidores de Lenguajes para Desarrollo en el Árbol Src de FreeBSD"><meta property="og:description" content="Uso de Servidores de Lenguajes para desarrollo en el árbol de src de FreeBSD para obtener resultados precisos para saltar a definiciones o auto completado."><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="es"><meta property="og:url" content="http://172.16.201.134:1313/es/articles/freebsd-src-lsp/"><meta property="og:site_name" content="Portal de documentación de FreeBSD"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/es\/articles\/freebsd-src-lsp\/","name":"Portal de documentación de FreeBSD","headline":"Portal de documentación de FreeBSD","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/es>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/es/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/es/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/es/books>Books</a></li><li><a href=http://172.16.201.134:1313/es/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/es/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=es>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Uso de Servidores de Lenguajes para Desarrollo en el Árbol Src de FreeBSD</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=copyright>Copyright © 2021 The FreeBSD Foundation</div><div class=legalnotice><a id=trademarks></a><details><summary>Marcas registradas</summary><p>FreeBSD es una marca registrada de la Fundación FreeBSD</p></details></div><div class=toc-mobile><h3>Tabla de contenidos</h3><nav id=TableOfContents><ul><li><a href=#intro>1. Introducción</a></li><li><a href=#requirements>2. Requisitos</a></li><li><a href=#editor-settings>3. Configuración del editor</a></li><li><a href=#cdb>4. Base de datos de compilación</a></li><li><a href=#final>5. Final</a></li></ul></nav></div><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=intro>1. Introducción<a class=anchor href=#intro></a></h2><div class=sectionbody><div class=paragraph><p>Esta guía trata sobre cómo configurar el árbol de src de FreeBSD con servidores de lenguajes para realizar la indexación del código fuente. Esta guía describe los pasos para Vim/NeoVim y VSCode. Si usas un editor de texto diferente puedes usar esta guía como referencia y buscar los comandos equivalentes para tu editor.</p></div></div></div><div class=sect1><h2 id=requirements>2. Requisitos<a class=anchor href=#requirements></a></h2><div class=sectionbody><div class=paragraph><p>Para seguir esta guía se necesita tener instalados ciertos requisitos. Necesitamos un servidor de lenguajes, <code>ccls</code> o <code>clangd</code>, y opcionalmente una base de datos de compilación.</p></div><div class=paragraph><p>La instalación del servidor de Lenguajes se puede realizar con <code>pkg</code> o con ports. Si escogemos <code>clangd</code> tenemos que instalar <code>llvm</code>.</p></div><div class=paragraph><p>Usando <code>pkg</code> para instalar <code>ccls</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg install ccls</span></code></pre></div></div><div class=paragraph><p>Si queremos usar <code>clangd</code> necesitamos instalar <code>llvm</code> (El comando de ejemplo usa <code>llvm15</code> pero escoge la versión que quieras):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg install llvm15</span></code></pre></div></div><div class=paragraph><p>Para instalar mediante ports escoge tu combinación favorita de herramientas de la lista que aparece abajo:</p></div><div class=ulist><ul><li><p>Implementaciones de servidores de lenguajes</p><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/ccls/>devel/ccls</a></p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/llvm12/>devel/llvm12</a> (Otras versiones son válidas, pero cuanto más nuevo, mejor. Reemplaza <code>clangd12</code> con clangdN en caso de usar otra versión.)</p></li></ul></div></li><li><p>Editores</p><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/editors/vim/>editors/vim</a></p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/editors/neovim/>editors/neovim</a></p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/editors/vscode/>editors/vscode</a></p></li></ul></div></li><li><p>Generador de base de datos de compilación</p><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/python/>devel/python</a> (Para la implementación de scan-build-py de llvm)</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/py-pip/>devel/py-pip</a> (Para la implementación de scan-build de rizsotto)</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/bear/>devel/bear</a></p></li></ul></div></li></ul></div></div></div><div class=sect1><h2 id=editor-settings>3. Configuración del editor<a class=anchor href=#editor-settings></a></h2><div class=sectionbody><div class=sect2><h3 id=settings-vim>3.1. Vim/Neovim<a class=anchor href=#settings-vim></a></h3><div class=sect3><h4 id=_plugins_de_lsp_para_el_cliente>3.1.1. Plugins de LSP para el cliente<a class=anchor href=#_plugins_de_lsp_para_el_cliente></a></h4><div class=paragraph><p>Este ejemplo utiliza el gestor de plugins incorporado en ambos editores. El plugin de LSP para el cliente es <a href=https://github.com/prabirshrestha/vim-lsp>prabirshrestha/vim-lsp</a>.</p></div><div class=paragraph><p>Para configurar el plugin cliente de LSP en Neovim:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir -p ~/.config/nvim/pack/lsp/start</span>
<span class=c># git clone https://github.com/prabirshrestha/vim-lsp ~/.config/nvim/pack/lsp/start/vim-lsp</span></code></pre></div></div><div class=paragraph><p>y para Vim:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir -p ~/.vim/pack/lsp/start</span>
<span class=c># git clone https://github.com/prabirshrestha/vim-lsp ~/.vim/pack/lsp/start/vim-lsp</span></code></pre></div></div><div class=paragraph><p>Para activar el plugin cliente de LSP en el editor, añade el siguiente fragmento en <span class=filepath>~/.config/nvim/init.vim</span> cuando uses Neovim, o <span class=filepath>~/.vim/vimrc</span> cuando uses Vim:</p></div><div class=listingblock><div class=title>Para ccls</div><div class=content><pre class="rouge highlight"><code data-lang=vim><span class=k>au</span> <span class=nb>User</span> lsp_setup <span class=k>call</span> <span class=nb>lsp</span>#register_server<span class=p>({</span>
<span class=se>    \</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;ccls&#39;</span><span class=p>,</span>
<span class=se>    \</span> <span class=s1>&#39;cmd&#39;</span><span class=p>:</span> <span class=p>{</span>server_info<span class=p>-&gt;[</span><span class=s1>&#39;ccls&#39;</span><span class=p>]},</span>
<span class=se>    \</span> <span class=s1>&#39;allowlist&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;cpp&#39;</span><span class=p>,</span> <span class=s1>&#39;objc&#39;</span><span class=p>],</span>
<span class=se>    \</span> <span class=s1>&#39;initialization_options&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=se>    \</span>     <span class=s1>&#39;cache&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=se>    \</span>         <span class=s1>&#39;hierarchicalPath&#39;</span><span class=p>:</span> <span class=k>v</span><span class=p>:</span>true
<span class=se>    \</span>     <span class=p>}</span>
<span class=se>    \</span> <span class=p>}})</span></code></pre></div></div><div class=listingblock><div class=title>Para clangd</div><div class=content><pre class="rouge highlight"><code data-lang=vim><span class=k>au</span> <span class=nb>User</span> lsp_setup <span class=k>call</span> <span class=nb>lsp</span>#register_server<span class=p>({</span>
<span class=se>    \</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;clangd&#39;</span><span class=p>,</span>
<span class=se>    \</span> <span class=s1>&#39;cmd&#39;</span><span class=p>:</span> <span class=p>{</span>server_info<span class=p>-&gt;[</span><span class=s1>&#39;clangd12&#39;</span><span class=p>,</span> <span class=s1>&#39;--background-index&#39;</span><span class=p>,</span> <span class=s1>&#39;--header-insertion=never&#39;</span><span class=p>]},</span>
<span class=se>    \</span> <span class=s1>&#39;allowlist&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;cpp&#39;</span><span class=p>,</span> <span class=s1>&#39;objc&#39;</span><span class=p>],</span>
<span class=se>    \</span> <span class=s1>&#39;initialization_options&#39;</span><span class=p>:</span> <span class=p>{},</span>
<span class=se>    \</span> <span class=p>})</span></code></pre></div></div><div class=paragraph><p>Dependiendo de la versión de <code>clangd</code> que hayas instalado podrías necesitar actualizar la <code>server-info</code> para apuntar al binario adecuado.</p></div><div class=paragraph><p>Por favor, dirígete a <a href=https://github.com/prabirshrestha/vim-lsp/blob/master/README.md#registering-servers class=bare>https://github.com/prabirshrestha/vim-lsp/blob/master/README.md#registering-servers</a> para aprender cómo configurar los atajos de teclado y el auto completado de código. El sitio oficial de clangd es <a href=https://clangd.llvm.org class=bare>https://clangd.llvm.org</a>, y el enlace al repositorio de ccls es <a href=https://github.com/MaskRay/ccls/ class=bare>https://github.com/MaskRay/ccls/</a>.</p></div><div class=paragraph><p>Abajo se muestra la configuración de referencia para los atajos de teclado y el auto completado de código. Pon el siguiente fragmento en <span class=filepath>~/.config/nvim/init.vim</span>, o <span class=filepath>~/.vim/vimrc</span> para usarlo con Vim:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=vim><span class=k>function</span><span class=p>!</span> <span class=nv>s:on_lsp_buffer_enabled</span><span class=p>()</span> abort
    <span class=k>setlocal</span> <span class=nb>omnifunc</span><span class=p>=</span><span class=nb>lsp</span>#<span class=nb>complete</span>
    <span class=k>setlocal</span> <span class=nb>completeopt</span><span class=p>-=</span>preview
    <span class=k>setlocal</span> <span class=nb>keywordprg</span><span class=p>=:</span>LspHover

    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-]&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>definition<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span>W<span class=p>&gt;]</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>peek<span class=p>-</span>definition<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span>W<span class=p>&gt;&lt;</span>C<span class=p>-]&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>peek<span class=p>-</span>definition<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=k>gr</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>references<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span><span class=k>n</span><span class=p>&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span><span class=k>next</span><span class=p>-</span>reference<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span><span class=k>p</span><span class=p>&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span><span class=k>previous</span><span class=p>-</span>reference<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gI <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>implementation<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=k>go</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>document<span class=p>-</span>symbol<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gS <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>workspace<span class=p>-</span>symbol<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> ga <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>code<span class=p>-</span>action<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gR <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span><span class=nb>rename</span><span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gm <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>signature<span class=p>-</span><span class=k>help</span><span class=p>)</span>
<span class=k>endfunction</span>

augroup lsp_install
    <span class=k>au</span><span class=p>!</span>
    autocmd <span class=nb>User</span> lsp_buffer_enabled <span class=k>call</span> <span class=nv>s:on_lsp_buffer_enabled</span><span class=p>()</span>
augroup END</code></pre></div></div></div></div><div class=sect2><h3 id=settings-vscode>3.2. VSCode<a class=anchor href=#settings-vscode></a></h3><div class=sect3><h4 id=_plugins_de_lsp_para_el_cliente_2>3.2.1. Plugins de LSP para el cliente<a class=anchor href=#_plugins_de_lsp_para_el_cliente_2></a></h4><div class=paragraph><p>Los plugins de cliente de LSP son necesarios para arrancar un demonio de servidor de lenguajes. Presiona <code>Ctrl+Shift+X</code> para mostrar el panel de búsquedas online de extensiones. Teclea <code>llvm-vs-code-extensions.vscode-clangd</code> cuando utilices clangd, o <code>ccls-project.ccls</code> cuando utilices ccls.</p></div><div class=paragraph><p>Después, presiona <code>Ctrl+Shift+P</code> para mostrar la paleta del editor de comandos. Teclea <code>Preferences: Open Settings (JSON)</code> y presiona <code>Enter</code> para abrir <span class=filepath>settings.json</span>. Dependiendo de la implementación del servidor de lenguajes, utiliza uno de los siguientes pares de clave/valor de JSON en <span class=filepath>settings.json</span>:</p></div><div class=listingblock><div class=title>Para clangd</div><div class=content><pre class="rouge highlight"><code data-lang=json><span class=p>[</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>Begin</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=err>...</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>End</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=s2>&#34;clangd.arguments&#34;</span><span class=err>:</span><span class=w> </span><span class=p>[</span><span class=w>
        </span><span class=s2>&#34;--background-index&#34;</span><span class=p>,</span><span class=w>
        </span><span class=s2>&#34;--header-insertion=never&#34;</span><span class=w>
    </span><span class=p>],</span><span class=w>
    </span><span class=s2>&#34;clangd.path&#34;</span><span class=err>:</span><span class=w> </span><span class=s2>&#34;clangd12&#34;</span><span class=w>
</span><span class=p>]</span></code></pre></div></div><div class=listingblock><div class=title>Para ccls</div><div class=content><pre class="rouge highlight"><code data-lang=json><span class=p>[</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>Begin</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=err>...</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>End</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=s2>&#34;ccls.cache.hierarchicalPath&#34;</span><span class=err>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=p>]</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=cdb>4. Base de datos de compilación<a class=anchor href=#cdb></a></h2><div class=sectionbody><div class=paragraph><p>Una base de datos de compilación contiene un array de objetos de comandos de compilación. Cada objeto especifica una forma de compilar un fichero fuente. El fichero de la base de datos de compilación es normalmente <span class=filename>compile_commands.json</span>. La base de datos es utilizada por el servidor de lenguajes con propósitos de indexado.</p></div><div class=paragraph><p>Por favor consulta <a href=https://clang.llvm.org/docs/JSONCompilationDatabase.html#format class=bare>https://clang.llvm.org/docs/JSONCompilationDatabase.html#format</a> para detalles acerca del formato del fichero de la base de datos de compilación.</p></div><div class=sect2><h3 id=cdb-generators>4.1. Generadores<a class=anchor href=#cdb-generators></a></h3><div class=sect3><h4 id=generators-scan-build-py>4.1.1. Utilizando scan-build-py<a class=anchor href=#generators-scan-build-py></a></h4><div class=sect4><h5 id=_instalación>4.1.1.1. Instalación<a class=anchor href=#_instalación></a></h5><div class=paragraph><p>La herramienta <code>intercept-build</code> de scan-build-py se utiliza para generar la base de datos de compilación.</p></div><div class=paragraph><p>Instala <a class=package href=https://cgit.freebsd.org/ports/tree/devel/python/>devel/python</a> primero para tener el intérprete de python. Para obtener <code>intercept-build</code> de LLVM:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># git clone https://github.com/llvm/llvm-project /path/to/llvm-project</span></code></pre></div></div><div class=paragraph><p>donde <span class=filename>/path/to/llvm-project/</span> es la ruta que quieres en el repositorio. Crea un alias en el fichero de configuración del shell para tu comodidad:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nb>alias </span>intercept-build<span class=o>=</span><span class=s1>&#39;/path/to/llvm-project/clang/tools/scan-build-py/bin/intercept-build&#39;</span></code></pre></div></div><div class=paragraph><p>Se puede usar <a href=https://github.com/rizsotto/scan-build>rizsotto/scan-build</a> en lugar del scan-build-py de LLVM. El scan-build-py de LLVM era rizsotto/scan-build que se integró en el árbol de LLVM.Se puede instalar esta implementación mediante <code>pip install --user scan-build</code>. El script <code>intercept-build</code> está en <span class=filename>~/.local/bin</span> por defecto.</p></div></div><div class=sect4><h5 id=_uso>4.1.1.2. Uso<a class=anchor href=#_uso></a></h5><div class=paragraph><p>En el directorio de más alto nivel en el árbol src de FreeBSD, genera la base de datos de compilación con <code>intercept-build</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># intercept-build --append make buildworld buildkernel -j`sysctl -n hw.ncpu`</span></code></pre></div></div><div class=paragraph><p>El flag <code>--apend</code> le dice a <code>intercept-build</code> que lea una base de datos de compilación existente (si es que existe) y que añada los resultados a dicha base de datos. Las entradas con claves duplicadas de comandos son integradas. La base de datos de compilación generada por defecto se salva en el directorio de trabajo actual como <span class=filename>compile_commands.json</span>.</p></div></div></div><div class=sect3><h4 id=generators-bear>4.1.2. Usando devel/bear<a class=anchor href=#generators-bear></a></h4><div class=sect4><h5 id=_uso_2>4.1.2.1. Uso<a class=anchor href=#_uso_2></a></h5><div class=paragraph><p>En el directorio de más alto nivel en el árbol src de FreeBSD, genera la base de datos de compilación con <code>bear</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bear --append -- make buildworld buildkernel -j`sysctl -n hw.ncpu`</span></code></pre></div></div><div class=paragraph><p>El flag <code>--apend</code> le dice a <code>bear</code> que lea una base de datos de compilación existente (si es que existe) y que añada los resultados a dicha base de datos. Las entradas con claves duplicadas de comandos son integradas. La base de datos de compilación generada por defecto se salva en el directorio de trabajo actual como <span class=filename>compile_commands.json</span>.</p></div></div></div></div></div></div><div class=sect1><h2 id=final>5. Final<a class=anchor href=#final></a></h2><div class=sectionbody><div class=paragraph><p>Una vez que la base de datos de compilación ha sido generada, abre cualquier fichero fuente del árbol src de FreeBSD y el demonio servidor de LSP será arrancado también en segundo plano. Abrir ficheros fuente en el árbol src la primera vez lleva significativamente más tiempo antes de que el servidor LSP sea capaz de completar el resultado, debido al indexado inicial en segundo plano que realiza el servidor LSP mediante la compilación de todas las entradas listadas en la base de datos de compilación. Sin embargo el demonio de servicio de lenguajes no indexa ficheros fuente que no aparecen en la base de datos de compilación, por lo tanto no se muestran resultados completos para ficheros fuentes que no se compilan durante la ejecución de <code>make</code>.</p></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 18 de julio de 2023 by <a href="https://cgit.freebsd.org/doc/commit/?id=c06ff83c52" target=_blank>Fernando Apesteguía</a></p></div></div><aside class=toc><div class=toc-content><h3>Tabla de contenidos</h3><nav id=TableOfContents><ul><li><a href=#intro>1. Introducción</a></li><li><a href=#requirements>2. Requisitos</a></li><li><a href=#editor-settings>3. Configuración del editor</a></li><li><a href=#cdb>4. Base de datos de compilación</a></li><li><a href=#final>5. Final</a></li></ul></nav><hr><div class=resources><h3>Recursos</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Descargar PDF"></i><a href=https://download.freebsd.org/doc/es/articles/freebsd-src-lsp/freebsd-src-lsp_es.pdf>Descargar PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Editar esta página"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/es/_index target=_blank>Editar esta página</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/es/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Elegir idioma">
<span>Spanish</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Claro</option><option value=theme-dark>Oscuro</option><option value=theme-high-contrast>Alto contraste</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/es class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/es/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>