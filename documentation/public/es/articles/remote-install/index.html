<!doctype html><html class=theme-light lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Describe la instalación remota del sistema operativo FreeBSD cuando la consola del sistema remoto no está disponible"><meta name=keywords content="Remote,Installation,FreeBSD"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/es/articles/remote-install/><title>Instalación remota del sistema operativo FreeBSD sin una consola remota | Portal de documentación de FreeBSD</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Instalación remota del sistema operativo FreeBSD sin una consola remota"><meta property="og:description" content="Describe la instalación remota del sistema operativo FreeBSD cuando la consola del sistema remoto no está disponible"><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="es"><meta property="og:url" content="https://docs.freebsd.org/es/articles/remote-install/"><meta property="og:site_name" content="Portal de documentación de FreeBSD"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/es\/articles\/remote-install\/","name":"Portal de documentación de FreeBSD","headline":"Portal de documentación de FreeBSD","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/es>Documentation portal</a></li><li><a href=https://docs.freebsd.org/es/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/es/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/es/books>Books</a></li><li><a href=https://docs.freebsd.org/es/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/es/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=es>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Instalación remota del sistema operativo FreeBSD sin una consola remota</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=copyright>Copyright © 2008-2021 The FreeBSD Documentation Project</div><div class=legalnotice><a id=trademarks></a><details><summary>Marcas registradas</summary><p>FreeBSD es una marca registrada de la Fundación FreeBSD</p><p>Muchos de los nombres usados por los fabricantes y vendedores para diferenciar sus productos son designados como marcas comerciales. Allí donde estos nombres aparezcan en este documento y el Proyecto FreeBSD fuera consciente de la alegación de marca comercial, los nombres tienen a continuación el símbolo “™” o “®”.</p></details></div><div class=toc-mobile><h3>Tabla de contenidos</h3><nav id=TableOfContents><ul><li><a href=#background>1. Antecedentes</a></li><li><a href=#intro>2. Introducción</a></li><li><a href=#preparation>3. Preparación - mfsBSD</a></li><li><a href=#installation>4. Instalación del sistema operativo FreeBSD</a></li><li><a href=#zfs>5. ZFS</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>Resumen</p></div><div class=paragraph><p>Este artículo documenta la instalación remota del sistema operativo FreeBSD cuando la consola del sistema remoto no está disponible. La idea principal de este artículo es el resultado de una colaboración con <code>Martin Matuska &lt;<a href=mailto:mm@FreeBSD.org>mm@FreeBSD.org</a>></code> con información valiosa proporcionada por <code>Paweł Jakub Dawidek &lt;<a href=mailto:pjd@FreeBSD.org>pjd@FreeBSD.org</a>></code>.</p></div><hr></div></div><div class=sect1><h2 id=background>1. Antecedentes<a class=anchor href=#background></a></h2><div class=sectionbody><div class=paragraph><p>Hay muchos proveedores de alojamiento en el mundo, pero pocos de ellos proporcionan soporte oficial de FreeBSD. Normalmente proporcionan una distribución Linux® para ser instalada en los servidores que ofrecen.</p></div><div class=paragraph><p>En algunos casos, estas compañías instalarán tu distribución Linux® favorita si lo pides. Usando esta opción, intentaremos instalar FreeBSD. En otros casos, podrían ofrecer un sistema de rescate que se podría usar en una emergencia. Es posible usar esto también para nuestros propósitos.</p></div><div class=paragraph><p>Este artículo cubre los pasos básicos de instalación y configuración que se necesitan para lanzar una instalación remota de FreeBSD con capacidades RAID-1 y ZFS.</p></div></div></div><div class=sect1><h2 id=intro>2. Introducción<a class=anchor href=#intro></a></h2><div class=sectionbody><div class=paragraph><p>Esta sección resumirá el propósito del artículo y explicará mejor lo que se trata en este documento. Las instrucciones incluidas beneficiarán a quienes utilicen los servicios proporcionados por las instalaciones de colocación de servidores que no admiten FreeBSD.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Como hemos mencionado en la sección <a href=#background>Antecedentes</a>, muchas de las compañías reputadas de hospedaje de servidores proporcionan alguna clase de sistema de rescate, el cual es arrancado desde su LAN y es accesible mediante SSH. Normalmente proporcionan este soporte para ayudar a sus clientes a arreglar sus sistemas operativos rotos. Como explicará este artículo, es posible instalar FreeBSD con la ayuda de estos sistemas de rescate.</p></li><li><p>La próxima sección de este articulo describirá cómo configurar y construir un sistema FreeBSD minimalista en la máquina local. Esa versión eventualmente se ejecutará en la máquina remota desde un ramdisk, lo que nos permitirá instalar un sistema operativo FreeBSD completo desde un mirror FTP usando la utilidad sysinstall.</p></li><li><p>El resto de este artículo describirá el procedimiento de instalación en sí mismo, así como la configuración del sistema de ficheros ZFS.</p></li></ol></div></div></div><div class=sect2><h3 id=requirements>2.1. Requisitos<a class=anchor href=#requirements></a></h3><div class=paragraph><p>Para continuar con éxito, debes:</p></div><div class=ulist><ul><li><p>Tener acceso a un sistema operativo con acceso a red y SSH</p></li><li><p>Entender el proceso de instalación de FreeBSD</p></li><li><p>Familiarizarte con la utilidad <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a></p></li><li><p>Tener a mano un CD o imagen ISO de instalación de FreeBSD</p></li></ul></div></div></div></div><div class=sect1><h2 id=preparation>3. Preparación - mfsBSD<a class=anchor href=#preparation></a></h2><div class=sectionbody><div class=paragraph><p>Antes de poder instalar FreeBSD en el sistema de destino, es necesario crear la imagen mínima de FreeBSD que se iniciará desde el disco duro. De esta manera, se puede acceder al nuevo sistema desde la red, y el resto de la instalación se puede hacer sin acceso remoto a la consola del sistema.</p></div><div class=paragraph><p>El conjunto de herramientas msfBS se puede utilizar para construir una imagen FreeBSD diminuta. Como el nombre de msfBSD sugiere ("mfs" significa "memory file system"), la imagen resultante se ejecuta completamente desde un ramdisk. Gracias a esta característica, la manipulación de discos duros no está limitada, por lo tanto será posible instalar un sistema operativo FreeBSD completo. La <a href=http://mfsbsd.vx.sk/>página del proyecto</a> mfsBSD incluye enlaces a la última release de la herramienta.</p></div><div class=paragraph><p>Por favor, ten en cuenta que el funcionamiento interno de mfsBSD y cómo encaja todo junto está fuera del alcance de este artículo. El lector que esté interesado debería consultar la documentación original de mfsBSD para más detalles.</p></div><div class=paragraph><p>Descarga y extrae la última versión de mfsBSD y cambia tu directorio de trabajo al directorio donde residirán los scripts de mfsBSD:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># fetch http://mfsbsd.vx.sk/release/mfsbsd-2.1.tar.gz</span>
<span class=c># tar xvzf mfsbsd-2.1.tar.gz</span>
<span class=c># cd mfsbsd-2.1/</span></code></pre></div></div><div class=sect2><h3 id=mfsbsd-config>3.1. Configuración de mfsBSD<a class=anchor href=#mfsbsd-config></a></h3><div class=paragraph><p>Antes de iniciar mfsBSD, deben establecerse algunas opciones de configuración importantes. Lo más importante que tenemos que hacer bien es, naturalmente, la configuración de red. El método más adecuado para configurar las opciones de red dependerá de si conocemos previamente el tipo de interfaz de red que usaremos, y el controlador de red que se cargará para nuestro hardware. Veremos cómo se puede configurar mfsBSD en cualquier caso.</p></div><div class=paragraph><p>Otra cosa importante que configurar es la contraseña de <code>root</code>. Esto se puede hacer editando <span class=filename>conf/loader.conf</span>. Por favor, lee los comentarios que ahí se incluyen.</p></div><div class=sect3><h4 id=_el_método_confinterfaces_conf>3.1.1. El método <span class=filename>conf/interfaces.conf</span><a class=anchor href=#_el_método_confinterfaces_conf></a></h4><div class=paragraph><p>Cuando se desconoce la tarjeta de red instalada, es posible utilizar las funciones de detección automática de mfsBSD. Los scripts de inicio de mfsBSD pueden detectar el controlador correcto, según la dirección MAC de la interfaz, si configuramos las siguientes opciones en <span class=filename>conf/interfaces.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>mac_interfaces=&#34;ext1&#34;
ifconfig_ext1_mac=&#34;00:00:00:00:00:00&#34;
ifconfig_ext1=&#34;inet 192.168.0.2/24&#34;</pre></div></div><div class=paragraph><p>No te olvides de añadir la información <code>defaultrouter</code> a <span class=filename>conf/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>defaultrouter=&#34;192.168.0.1&#34;</pre></div></div></div><div class=sect3><h4 id=_el_método_confrc_conf>3.1.2. El método <span class=filename>conf/rc.conf</span><a class=anchor href=#_el_método_confrc_conf></a></h4><div class=paragraph><p>Cuando el interfaz de red es conocido, es más conveniente utilizar <span class=filename>conf/rc.conf</span> para las opciones de red. La sintaxis de este fichero es la misma que la usada en el fichero estándar <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> de FreeBSD.</p></div><div class=paragraph><p>Por ejemplo, si sabes que la interfaz de red <a href="https://man.freebsd.org/cgi/man.cgi?query=re&amp;sektion=4&amp;format=html">re(4)</a> va a estar disponible, puedes establecer las siguientes opciones en <span class=filename>conf/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>defaultrouter=&#34;192.168.0.1&#34;
ifconfig_re0=&#34;inet 192.168.0.2/24&#34;</pre></div></div></div></div><div class=sect2><h3 id=mfsbsd-build>3.2. Construyendo una Imagen de mfsBSD<a class=anchor href=#mfsbsd-build></a></h3><div class=paragraph><p>El proceso de construir una imagen mfsBSD es bastante directo.</p></div><div class=paragraph><p>El primer paso es montar el CD de instalación de FreeBSD, o la imagen de instalación ISO en <span class=filename>/cdrom</span>. Para el bien del ejemplo, en este artículo asumiremos que has descargado la ISO 10.1-RELEASE de FreeBSD. Montar esta imagen ISO en el directorio <span class=filename>/cdrom</span> es fácil con la utilidad <a href="https://man.freebsd.org/cgi/man.cgi?query=mdconfig&amp;sektion=8&amp;format=html">mdconfig(8)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdconfig -a -t vnode -u 10 -f FreeBSD-10.1-RELEASE-amd64-disc1.iso</span>
<span class=c># mount_cd9660 /dev/md10 /cdrom</span></code></pre></div></div><div class=paragraph><p>Puesto que las versiones recientes de FreeBSD no contienen los conjuntos de distribución regulares, es necesario extraer los ficheros de la distribución desde los archivos que se encuentran en la imagen ISO:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir DIST</span>
<span class=c># tar -xvf /cdrom/usr/freebsd-dist/base.txz -C DIST</span>
<span class=c># tar -xvf /cdrom/usr/freebsd-dist/kernel.txz -C DIST</span></code></pre></div></div><div class=paragraph><p>Desués, construye la imagen arrancable de mfsBSD:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make BASE=DIST</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>El <code>make</code> anterior se tiene que ejecutar desde el directorio raíz del árbol de directorios de mfsBSD, por ejemplo <span class=filename>~/mfsbsd-2.1/</span>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_arrancando_mfsbsd>3.3. Arrancando mfsBSD<a class=anchor href=#_arrancando_mfsbsd></a></h3><div class=paragraph><p>Ahora que la imagen mfsBSD está lista, se debe subir al sistema remoto ejecutando un sistema de rescate o una distribución de Linux® pre-instalada. La mejor herramienta para esta tarea es scp:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># scp disk.img root@192.168.0.2:.</span></code></pre></div></div><div class=paragraph><p>Para arrancar la imagen mfsBSD de forma apropiada, se tiene que situar en la primera unidad (arrancable) de la máquina. Esto se puede conseguir utilizando el siguiente ejemplo asumiendo que <span class=filename>sda</span> es la primera unidad de disco arrancable:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/root/disk.img of=/dev/sda bs=1m</span></code></pre></div></div><div class=paragraph><p>Si todo fue bien, la imagen debería estar ahora en el MBR de la primera unidad y la máquina se puede reiniciar. Controla que la máquina arranca correctamente con la herramienta <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a>. Una vez que esté on-line, debería ser posible acceder a ella con <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> como usuario <code>root</code> con la contraseña configurada.</p></div></div></div></div><div class=sect1><h2 id=installation>4. Instalación del sistema operativo FreeBSD<a class=anchor href=#installation></a></h2><div class=sectionbody><div class=paragraph><p>El mfsBSD ha arrancado co éxito y debería ser posible conectarse mediante <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>. Esta sección describirá cómo crear y etiquetar "slices" de disco, configurar <code>gmirror</code> para RAID-1, y cómo utilizar <code>sysinstall</code> para instalar una distribución mínima del sistema operativo FreeBSD.</p></div><div class=sect2><h3 id=_preparación_de_los_discos_duros>4.1. Preparación de los discos duros<a class=anchor href=#_preparación_de_los_discos_duros></a></h3><div class=paragraph><p>La primera tarea es reservar espacio de disco para FreeBSD, es decir: crear particiones y "slices". Obviamente, el sistema que está actualmente en ejecución está cargado completamente en memoria y por lo tanto no habrá problemas al manipular los discos duros. Para completar la tarea, es posible usar tanto <code>sysinstall</code> como <a href="https://man.freebsd.org/cgi/man.cgi?query=fdisk&amp;sektion=8&amp;format=html">fdisk(8)</a> junto con <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a>.</p></div><div class=paragraph><p>Al principio, marca todos los discos del sistema como vacíos. Repite el siguiente comando para cada disco duro:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/dev/ad0 count=2</span></code></pre></div></div><div class=paragraph><p>Después, crea los "slices" y etiquétalos con tu herramienta preferida. Aunque <code>sysinstall</code> es considerada más fácil de usar, un método potente y quizás menos propenso a errores será usar herramientas UNIX® estándar en modo texto, como <a href="https://man.freebsd.org/cgi/man.cgi?query=fdisk&amp;sektion=8&amp;format=html">fdisk(8)</a> y <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a>, que se cubrirán también en esta sección. La primera opción está bien documentada en el capítulo <a href=https://docs.freebsd.org/es/books/handbook/#install-steps>Instalar FreeBSD</a> del FreeBSD Handbook. Como se mencionó en la introducción, esta artículo presentará cómo configurara un sistema con RAID-1 y capacidades ZFS. Nuestra configuración consistirá en un pequeño <span class=filename>/</span> (root), <span class=filename>/usr</span> y <span class=filename>/var</span> configurado en espejo con <a href="https://man.freebsd.org/cgi/man.cgi?query=gmirror&amp;sektion=8&amp;format=html">gmirror(8)</a> y el resto del espacio en disco será reservado para un <a href="https://man.freebsd.org/cgi/man.cgi?query=zpool&amp;sektion=8&amp;format=html">zpool(8)</a> en espejo de un sistema de ficheros ZFS. Por favor, date cuenta de que el sistema de ficheros ZFS se configurará después de que el sistema operativo FreeBSD haya sido instalado con éxito y arrancado.</p></div><div class=paragraph><p>El siguiente ejemplo describirá cómo crear "slices" y etiquetas, inicializar <a href="https://man.freebsd.org/cgi/man.cgi?query=gmirror&amp;sektion=8&amp;format=html">gmirror(8)</a> en cada partición y cómo crear un sistema de ficheros UFS2 en cada partición en espejo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># fdisk -BI /dev/ad0 </span><i class=conum data-value=1></i><b>(1)</b>
<span class=c># fdisk -BI /dev/ad1</span>
<span class=c># bsdlabel -wB /dev/ad0s1 </span><i class=conum data-value=2></i><b>(2)</b>
<span class=c># bsdlabel -wB /dev/ad1s1</span>
<span class=c># bsdlabel -e /dev/ad0s1 </span><i class=conum data-value=3></i><b>(3)</b>
<span class=c># bsdlabel /dev/ad0s1 &gt; /tmp/bsdlabel.txt &amp;&amp; bsdlabel -R /dev/ad1s1 /tmp/bsdlabel.txt </span><i class=conum data-value=4></i><b>(4)</b>
<span class=c># gmirror label root /dev/ad[01]s1a </span><i class=conum data-value=5></i><b>(5)</b>
<span class=c># gmirror label var /dev/ad[01]s1d</span>
<span class=c># gmirror label usr /dev/ad[01]s1e</span>
<span class=c># gmirror label -F swap /dev/ad[01]s1b </span><i class=conum data-value=6></i><b>(6)</b>
<span class=c># newfs /dev/mirror/root </span><i class=conum data-value=7></i><b>(7)</b>
<span class=c># newfs /dev/mirror/var</span>
<span class=c># newfs /dev/mirror/usr</span></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Crea una slice que use todo el disco e inicializa el boot code del sector 0 del disco seleccionado. Repite este comando para todos los discos duros en el sistema.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Escribe una etiqueta estándar para cada disco, incluido el código de arranque.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Ahora edita manualmente la etiqueta del disco. Lee la página de manual de <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> para averiguar cómo crear particiones. Crea particiones <code>a</code> para el sistema de ficheros <span class=filename>/</span> (root), <code>b</code> para swap, <code>d</code> para <span class=filename>/var</span>, <code>e</code> para <span class=filename>/usr</span> y finalmente <code>f</code> para ser usada más tarde por ZFS.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Importa la etiqueta creada recientemente para el segundo disco duro, de forma que los dos discos estén etiquetados de la misma forma.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Inicializa <a href="https://man.freebsd.org/cgi/man.cgi?query=gmirror&amp;sektion=8&amp;format=html">gmirror(8)</a> en cada partición.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Ten en cuenta que se utiliza <code>-F</code> para la partición swap. Esto indica a <a href="https://man.freebsd.org/cgi/man.cgi?query=gmirror&amp;sektion=8&amp;format=html">gmirror(8)</a> que asuma que el dispositivo estará en un estado consistente después de un error del sistema/fuente de energía.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Crea un sistema de ficheros UFS2 en cada partición del espejo.</td></tr></tbody></table></div></div><div class=sect2><h3 id=_instalación_del_sistema>4.2. Instalación del sistema<a class=anchor href=#_instalación_del_sistema></a></h3><div class=paragraph><p>Esta es la parte más importante. Esta sección describirá cómo instalar la distribución mínima de FreeBSD en los discos duros que hemos preparado en la sección anterior. Para lograr este objetivo, todos los sistemas de archivos deben montarse, para que <code>sysinstall</code> pueda escribir el contenido de FreeBSD en los discos duros:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /dev/mirror/root /mnt</span>
<span class=c># mkdir /mnt/var /mnt/usr</span>
<span class=c># mount /dev/mirror/var /mnt/var</span>
<span class=c># mount /dev/mirror/usr /mnt/usr</span></code></pre></div></div><div class=paragraph><p>Cuando hayas terminado, arranca <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a>. Selecciona la instalación <span class=guimenuitem>Custom</span> en el menú principal. Selecciona <span class=guimenuitem>Options</span> y presiona <kbd>Enter</kbd>. Con la ayuda de las teclas de dirección, mueve el cursor al elemento <code>Install Root</code>, presiona <kbd>Space</kbd> y cámbialo a <span class=filename>/mnt</span>. Presiona <kbd>Enter</kbd> para hacer los cambios y sal del menú <span class=guimenuitem>Options</span> presionando <kbd>q</kbd>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Ten en cuenta que este paso es muy importante y si lo omites, <code>sysinstall</code> no será capaz de instalar FreeBSD.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ve al menú <span class=guimenuitem>Distributions</span>, mueve el cursor con las teclas de dirección a <code>Minimal</code>, y márcala presionando <kbd>Space</kbd>. Este artículo utiliza la distribución Minimal para ahorrar tráfico de red, porque el sistema en sí mismo será instalado mediante ftp. Sal de este menú escogiendo <code>Exit</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Los menús <span class=guimenuitem>Partition</span> y <span class=guimenuitem>Label</span> se omitirán ya que ahora son inútiles.</p></div></td></tr></tbody></table></div><div class=paragraph><p>En el menú <span class=guimenuitem>Media</span>, selecciona <code>FTP</code>. Selecciona el mirror más cercano y deja que <code>sysinstall</code> asuma que la red ya está configurada. Se te redirigirá de vuelta al menú <span class=guimenuitem>Custom</span>.</p></div><div class=paragraph><p>Finalmente, realiza la instalación del sistema seleccionando la última opción, <span class=guimenuitem>Commit</span>. Sal de <code>sysinstall</code> cuando finalice la instalación.</p></div></div><div class=sect2><h3 id=_pasos_posteriores_a_la_instalación>4.3. Pasos posteriores a la instalación<a class=anchor href=#_pasos_posteriores_a_la_instalación></a></h3><div class=paragraph><p>El sistema operativo FreBSD ya debería estar instalado; sin embargo, el proceso aún no ha terminado. Es necesario realizar algunos pasos posteriores a la instalación para permitir que FreeBSD se inicie en el futuro y para poder iniciar sesión en el sistema.</p></div><div class=paragraph><p>Ahora debes hacer <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> en el sistema recién instalado para poder finalizar la instalación. Utiliza el siguiente comando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chroot /mnt</span></code></pre></div></div><div class=paragraph><p>Para completar nuestro objetivo, sigue estos pasos:</p></div><div class=ulist><ul><li><p>Copia el kernel <code>GENERIC</code> al directorio <span class=filename>/boot/kernel</span>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cp -Rp /boot/GENERIC/* /boot/kernel</span></code></pre></div></div></li><li><p>Crea los ficheros <span class=filename>/etc/rc.conf</span>, <span class=filename>/etc/resolv.conf</span> y <span class=filename>/etc/fstab</span>. No olvides configurar la información de red y habilitar sshd en <span class=filename>/etc/rc.conf</span>. El contenido de <span class=filename>/etc/fstab</span> será similar a lo siguiente:</p><div class="literalblock programlisting"><div class=content><pre># Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/mirror/swap        none            swap    sw              0       0
/dev/mirror/root        /               ufs     rw              1       1
/dev/mirror/usr         /usr            ufs     rw              2       2
/dev/mirror/var         /var            ufs     rw              2       2
/dev/cd0                /cdrom          cd9660  ro,noauto       0       0</pre></div></div></li><li><p>Crea <span class=filename>/boot/loader.conf</span> con el siguiente contenido:</p><div class="literalblock programlisting"><div class=content><pre>geom_mirror_load=&#34;YES&#34;
zfs_load=&#34;YES&#34;</pre></div></div></li><li><p>Ejecuta el siguiente comando, el cual hará que ZFS esté disponible en el siguiente arranque:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysrc zfs_enable=&#34;YES&#34;</span></code></pre></div></div></li><li><p>Añade usuarios adicionales al sistema usando la herramienta <a href="https://man.freebsd.org/cgi/man.cgi?query=adduser&amp;sektion=8&amp;format=html">adduser(8)</a>. No olvides añadir un usuario al grupo <code>wheel</code> de forma que puedas obtener acceso root después del reinicio.</p></li><li><p>Vuelve a comprobar todas sus configuraciones.</p></li></ul></div><div class=paragraph><p>Ahora el sistema debería estar listo para el siguiente arranque. Utiliza el comando <a href="https://man.freebsd.org/cgi/man.cgi?query=reboot&amp;sektion=8&amp;format=html">reboot(8)</a> para reiniciar tu sistema.</p></div></div></div></div><div class=sect1><h2 id=zfs>5. ZFS<a class=anchor href=#zfs></a></h2><div class=sectionbody><div class=paragraph><p>Si tu sistema sobrevivió al reinicio, ahora deberías poder iniciar sesión. ¡Bienvenido a la nueva instalación de FreeBSD, realizada de forma remota sin el uso de una consola remota!</p></div><div class=paragraph><p>El único paso que queda es configurar <a href="https://man.freebsd.org/cgi/man.cgi?query=zpool&amp;sektion=8&amp;format=html">zpool(8)</a> y crear algunos sistemas de ficheros <a href="https://man.freebsd.org/cgi/man.cgi?query=zfs&amp;sektion=8&amp;format=html">zfs(8)</a>. Crear y administrar ZFS es muy directo. Primero crea un pool en mirror:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># zpool create tank mirror /dev/ad[01]s1f</span></code></pre></div></div><div class=paragraph><p>A continuación, crea algunos sistemas de archivos:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># zfs create tank/ports</span>
<span class=c># zfs create tank/src</span>
<span class=c># zfs set compression=gzip tank/ports</span>
<span class=c># zfs set compression=on tank/src</span>
<span class=c># zfs set mountpoint=/usr/ports tank/ports</span>
<span class=c># zfs set mountpoint=/usr/src tank/src</span></code></pre></div></div><div class=paragraph><p>Eso es todo. Si estás interesado en más detalles acerca de ZFS en FreeBSD, por favor dirígete a la sección <a href=https://wiki.freebsd.org/ZFS>ZFS</a> en la Wiki de FreeBSD.</p></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 3 de enero de 2023 by <a href="https://cgit.freebsd.org/doc/commit/?id=f76273c95d" target=_blank>Fernando Apesteguía</a></p></div></div><aside class=toc><div class=toc-content><h3>Tabla de contenidos</h3><nav id=TableOfContents><ul><li><a href=#background>1. Antecedentes</a></li><li><a href=#intro>2. Introducción</a></li><li><a href=#preparation>3. Preparación - mfsBSD</a></li><li><a href=#installation>4. Instalación del sistema operativo FreeBSD</a></li><li><a href=#zfs>5. ZFS</a></li></ul></nav><hr><div class=resources><h3>Recursos</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Descargar PDF"></i><a href=https://download.freebsd.org/doc/es/articles/remote-install/remote-install_es.pdf>Descargar PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Editar esta página"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/es/_index target=_blank>Editar esta página</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/es/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Elegir idioma">
<span>Spanish</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Claro</option><option value=theme-dark>Oscuro</option><option value=theme-high-contrast>Alto contraste</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/es class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/es/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>