<!doctype html><html class=theme-light lang=el><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/el/books/handbook/firewalls/><title>Κεφάλαιο 30. Firewalls | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Κεφάλαιο 30. Firewalls"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="el"><meta property="og:url" content="http://172.16.201.134:1313/el/books/handbook/firewalls/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/el\/books\/handbook\/firewalls\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/el>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/el/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/el/books>Books</a></li><li><a href=http://172.16.201.134:1313/el/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/el/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=el>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Αναζήτηση aria-label=Αναζήτηση maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/preface/>Πρόλογος</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/preface/#preface-audience>Σε Ποιους Απευθύνεται Αυτό το Βιβλίο</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/preface/#preface-changes-from3>Αλλαγές από την Τρίτη Έκδοση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/preface/#preface-changes-from2>Αλλαγές από τη Δεύτερη Έκδοση (2004)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/preface/#preface-changes>Αλλαγές από την Πρώτη Έκδοση (2001)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/preface/#preface-overview>Οργάνωση Αυτού του Βιβλίου</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/preface/#preface-conv>Συμβάσεις που χρησιμοποιούνται σε αυτό το βιβλίο</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/preface/#preface-acknowledgements>Ευχαριστίες</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/parti/>Μέρος I. Ξεκινώντας με το FreeBSD</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/introduction/>Κεφάλαιο 1. Εισαγωγή</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/introduction/#introduction-synopsis>1.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/introduction/#nutshell>1.2. Καλώς ήλθατε στο FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/introduction/#history>1.3. Πληροφορίες για το FreeBSD Project</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/>Κεφάλαιο 2. Εγκατάσταση του FreeBSD 9.x και Μεταγενέστερων Εκδόσεων</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. Απαιτήσεις Υλικού</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-pre>2.3. Εργασίες πριν την Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-start>2.4. Ξεκινώντας την Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#using-bsdinstall>2.5. Εισαγωγή στο bsdinstall</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-netinstall>2.6. Εγκατάσταση από το Δίκτυο</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-partitioning>2.7. Εκχώρηση Χώρου στο Δίσκο</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-final-warning>2.8. Επιβεβαίωση της Εγκατάστασης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-post>2.9. Μετά την Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.10. Αντιμετώπιση Προβλημάτων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bsdinstall/#using-live-cd>2.11. Χρησιμοποιώντας τη Λειτουργία Live CD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/install/>Κεφάλαιο 3. Εγκατάσταση του FreeBSD 8.x και Προγενέστερων Εκδόσεων</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-synopsis>3.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-hardware>3.2. Απαιτήσεις Υλικού</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-pre>3.3. Εργασίες πριν την Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-start>3.4. Ξεκινώντας την Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#using-sysinstall>3.5. Εισαγωγή στο Sysinstall</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-steps>3.6. Εκχώρηση Χώρου στο Δίσκο</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-choosing>3.7. Επιλέγοντας τι θα Εγκαταστήσετε</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-media>3.8. Επιλέγοντας το Μέσο Εγκατάστασης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-final-warning>3.9. Επιβεβαίωση της Εγκατάστασης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-post>3.10. Μετά την Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-trouble>3.11. Αντιμετώπιση Προβλημάτων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-advanced>3.12. Οδηγός Εγκατάστασης για Προχωρημένους</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/install/#install-diff-media>3.13. Προετοιμάζοντας τα Δικά σας Μέσα Εγκατάστασης</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/basics/>Κεφάλαιο 4. Βασικές Έννοιες στο UNIX®</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#basics-synopsis>4.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#consoles>4.2. Εικονικές Κονσόλες και Τερματικά</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#permissions>4.3. Άδειες (Permissions)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#dirstructure>4.4. Δομή Καταλόγου</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#disk-organization>4.5. Οργάνωση Δίσκου</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#mount-unmount>4.6. Προσάρτηση και Αποπροσάρτηση Συστημάτων Αρχείων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#basics-processes>4.7. Διεργασίες</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#basics-daemons>4.8. Δαίμονες, Σήματα, και Τερματισμός Διεργασιών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#shells>4.9. Κελύφη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#editors>4.10. Κειμενογράφοι</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#basics-devices>4.11. Συσκευές και Αρχεία συσκευών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#binary-formats>4.12. Τύποι Εκτελέσιμων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/basics/#basics-more-information>4.13. Για Περισσότερες Πληροφορίες</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/ports/>Κεφάλαιο 5. Εγκατάσταση Εφαρμογών: Πακέτα και Ports</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/ports/#ports-synopsis>5.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ports/#ports-overview>5.2. Επισκόπησή της εγκατάστασης λογισμικού</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ports/#ports-finding-applications>5.3. Βρίσκοντας την Εφαρμογή σας</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ports/#packages-using>5.4. Χρησιμοποιώντας το Σύστημα των Πακέτων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ports/#ports-using>5.5. Χρησιμοποιώντας την Συλλογή των Ports</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ports/#ports-nextsteps>5.6. Ενέργειες μετά την Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ports/#ports-broken>5.7. Αντιμετωπίζοντας Χαλασμένα Ports</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/x11/>Κεφάλαιο 6. Το Σύστημα X Window</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/x11/#x11-synopsis>6.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/x11/#x-understanding>6.2. Κατανόηση του περιβάλλοντος X11</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/x11/#x-install>6.3. Εγκατάσταση του X11</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/x11/#x-config>6.4. Ρύθμιση του X11</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/x11/#x-fonts>6.5. Χρήση Γραμματοσειρών στο X11</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/x11/#x-xdm>6.6. Ο X Display Manager</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/x11/#x11-wm>6.7. Γραφικά Περιβάλλοντα</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/partii/>Μέρος II. Βασικές Εργασίες</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/desktop/>Κεφάλαιο 7. Desktop Εφαρμογές</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/desktop/#desktop-synopsis>7.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/desktop/#desktop-browsers>7.2. Φυλλομετρητές (Browsers)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/desktop/#desktop-productivity>7.3. Εφαρμογές Γραφείου</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/desktop/#desktop-viewers>7.4. Προγράμματα Προβολής Εγγράφων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/desktop/#desktop-finance>7.5. Χρηματοοικονομικές Εφαρμογές</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/desktop/#desktop-summary>7.6. Περίληψη</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/>Κεφάλαιο 8. Πολυμέσα</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/#multimedia-synopsis>8.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/#sound-setup>8.2. Ρύθμιση της Κάρτας Ήχου</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/#sound-mp3>8.3. Ήχος MP3</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/#video-playback>8.4. Αναπαραγωγή Video</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/#tvcard>8.5. Ρύθμιση Κάρτας Τηλεόρασης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/#mythtv>8.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/multimedia/#scanners>8.7. Σαρωτές Εικόνας</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/>Κεφάλαιο 9. Ρυθμίζοντας τον Πυρήνα του FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Γιατί να Φτιάξετε Προσαρμοσμένο Πυρήνα;</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/#kernelconfig-devices>9.3. Ανακαλύπτοντας τις Συσκευές του Συστήματος σας</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Προγράμματα Οδήγησης, Υποσυστήματα και Αρθρώματα (modules)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/#kernelconfig-building>9.5. Δημιουργία και Εγκατάσταση Προσαρμοσμένου Πυρήνα</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/#kernelconfig-config>9.6. Το Αρχείο Ρυθμίσεων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Αν Κάτι Πάει Λάθος</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/printing/>Κεφάλαιο 10. Εκτυπώσεις</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/printing/#printing-synopsis>10.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/printing/#printing-intro-spooler>10.2. Εισαγωγή</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/printing/#printing-intro-setup>10.3. Βασική Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/printing/#printing-advanced>10.4. Ρυθμίσεις Εκτυπωτών για Προχωρημένους</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/printing/#printing-using>10.5. Χρήση Εκτυπωτών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/printing/#printing-lpd-alternatives>10.6. Εναλλακτικές Λύσεις για τον Στάνταρ Spooler</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/printing/#printing-troubleshooting>10.7. Εντοπισμός Βλαβών</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/>Κεφάλαιο 11. Συμβατότητα με Εκτελέσιμα του Linux</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Εγκατάσταση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Εγκαθιστώντας το Mathematica®</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/#linuxemu-maple>11.4. Εγκαθιστώντας το Maple™</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/#linuxemu-matlab>11.5. Εγκαθιστώντας το MATLAB®</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/#linuxemu-oracle>11.6. Εγκατάσταση της Oracle®</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/linuxemu/#linuxemu-advanced>11.7. Προχωρημένα Θέματα</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/partiii/>Μέρος III. Διαχείριση Συστήματος</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/config/>Κεφάλαιο 12. Ρύθμιση και Βελτιστοποίηση</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#config-synopsis>12.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-initial>12.2. Αρχική Ρύθμιση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-core-configuration>12.3. Κύρια Ρύθμιση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-appconfig>12.4. Ρύθμιση Εφαρμογών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-starting-services>12.5. Eκκινώντας Υπηρεσίες</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-cron>12.6. Ρυθμίζοντας Το Πρόγραμμα <code>cron</code></a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-rcd>12.7. Χρησιμοποιώντας Το Σύστημα rc Στο FreeBSD</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#config-network-setup>12.8. Ρυθμίζοντας Τις Κάρτες Δικτύου</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-virtual-hosts>12.9. Εικονικά Hosts</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-configfiles>12.10. Αρχεία Ρυθμίσεων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-sysctl>12.11. Tuning with sysctl</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-disk>12.12. Tuning Disks</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#configtuning-kernel-limits>12.13. Tuning Kernel Limits</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#adding-swap-space>12.14. Adding Swap Space</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#acpi-overview>12.15. Power and Resource Management</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/config/#ACPI-debug>12.16. Using and Debugging FreeBSD ACPI</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/boot/>Κεφάλαιο 13. Η Διαδικασία Εκκίνησης του FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/boot/#boot-synopsis>13.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/boot/#boot-introduction>13.2. Το Πρόβλημα της Εκκίνησης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/boot/#boot-blocks>13.3. Ο Διαχειριστής Εκκίνησης και τα Στάδια Εκκίνησης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/boot/#boot-kernel>13.4. Αλληλεπίδραση με τον Πυρήνα κατά την Εκκίνηση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/boot/#device-hints>13.5. Device Hints</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/boot/#boot-init>13.6. Init: Αρχικοποίηση Ελέγχου Διαδικασιών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/boot/#boot-shutdown>13.7. Ακολουθία Τερματισμού</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/users/>Κεφάλαιο 14. Χρήστες και Βασική Διαχείριση Λογαριασμών</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-synopsis>14.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-introduction>14.2. Εισαγωγή</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-superuser>14.3. Ο Λογαριασμός Υπερχρήστη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-system>14.4. Λογαριασμοί Συστήματος</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-user>14.5. Λογαριασμοί Χρηστών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-modifying>14.6. Τροποποιώντας Λογαριασμούς</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-limiting>14.7. Περιορίζοντας Χρήστες</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/users/#users-groups>14.8. Ομάδες</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/security/>Κεφάλαιο 15. Ασφάλεια</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#security-synopsis>15.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#security-intro>15.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#securing-freebsd>15.3. Securing FreeBSD</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#crypt>15.4. DES, MD5, and Crypt</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#one-time-passwords>15.5. One-time Passwords</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#kerberosIV>15.7. KerberosIV</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#kerberos5>15.8. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#openssl>15.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#ipsec>15.10. VPN over IPsec</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#openssh>15.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#fs-acl>15.12. File System Access Control Lists</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#security-portaudit>15.13. Monitoring Third Party Security Issues</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#security-advisories>15.14. FreeBSD Security Advisories</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/security/#security-accounting>15.15. Process Accounting</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/jails/>Κεφάλαιο 16. Jails</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/jails/#jails-synopsis>16.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/jails/#jails-terms>16.2. Όροι των Jails</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/jails/#jails-intro>16.3. Εισαγωγή</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/jails/#jails-build>16.4. Δημιουργώντας και Ελέγχοντας Jails</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/jails/#jails-tuning>16.5. Λεπτομερής Ρύθμιση και Διαχείριση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/jails/#jails-application>16.6. Εφαρμογή των Jails</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/mac/>Κεφάλαιο 17. Υποχρεωτικός Έλεγχος Πρόσβασης</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-synopsis>17.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-inline-glossary>17.2. Key Terms in this Chapter</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-initial>17.3. Explanation of MAC</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-understandlabel>17.4. Understanding MAC Labels</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-planning>17.5. Planning the Security Configuration</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-modules>17.6. Module Configuration</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-bsdextended>17.7. The MAC bsdextended Module</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-ifoff>17.8. The MAC ifoff Module</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-portacl>17.9. The MAC portacl Module</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-partition>17.10. The MAC partition Module</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-mls>17.11. The MAC Multi-Level Security Module</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-biba>17.12. The MAC Biba Module</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-lomac>17.13. The MAC LOMAC Module</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-implementing>17.14. Nagios in a MAC Jail</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-userlocked>17.15. User Lock Down</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mac/#mac-troubleshoot>17.16. Troubleshooting the MAC Framework</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/audit/>Κεφάλαιο 18. Έλεγχος Συμβάντων Ασφαλείας</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/audit/#audit-synopsis>31.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/audit/#audit-inline-glossary>31.2. Key Terms in this Chapter</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/audit/#audit-install>31.3. Installing Audit Support</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/audit/#audit-config>31.4. Audit Configuration</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/audit/#audit-administration>31.5. Administering the Audit Subsystem</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/disks/>Κεφάλαιο 19. Αποθηκευτικά Μέσα</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#disks-synopsis>19.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#disks-naming>19.2. Device Names</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#disks-adding>19.3. Adding Disks</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#usb-disks>19.4. USB Storage Devices</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#creating-cds>19.5. Creating and Using CD Media</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#creating-dvds>19.6. Creating and Using DVD Media</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#floppies>19.7. Creating and Using Floppy Disks</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#backups-tapebackups>19.8. Creating and Using Data Tapes</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#backup-strategies>19.9. Backup Strategies</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#backup-basics>19.10. Backup Basics</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#disks-virtual>19.11. Network, Memory, and File-Backed File Systems</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#snapshots>19.12. File System Snapshots</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#quotas>19.13. File System Quotas</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#disks-encrypting>19.14. Encrypting Disk Partitions</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#swap-encrypting>19.15. Encrypting Swap Space</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/disks/#disks-hast>19.16. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/geom/>Κεφάλαιο 20. GEOM: Διαχείριση Συστοιχιών Δίσκων</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#GEOM-synopsis>20.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#GEOM-intro>20.2. Εισαγωγή στο GEOM</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#GEOM-striping>20.3. RAID0 - Striping</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#GEOM-mirror>20.4. RAID1 - Mirroring</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#GEOM-raid3>20.5. RAID3 - Striping σε Επίπεδο Byte με Αφοσιωμένο Parity</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#geom-ggate>20.6. Δικτυακές Συσκευές μέσω GEOM Gate</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#geom-glabel>20.7. Δημιουργώντας Ετικέτες (Labels) στις Συσκευές Δίσκων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/geom/#geom-gjournal>20.8. UFS Journaling Μέσω GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/filesystems/>Κεφάλαιο 21. Υποστήριξη Συστημάτων Αρχείων</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/filesystems/#filesystems-synopsis>21.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/filesystems/#filesystems-zfs>21.2. Το Σύστημα Αρχείων Z (ZFS)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/filesystems/#filesystems-linux>21.3. Συστήματα Αρχείων Linux®</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/virtualization/>Κεφάλαιο 22. Εικονικοποίηση</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/virtualization/#virtualization-synopsis>22.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/virtualization/#virtualization-guest>22.2. Το FreeBSD ως φιλοξενούμενο λειτουργικό</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/virtualization/#virtualization-host>22.3. Το FreeBSD ως Ξενιστής (Host)</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/l10n/>Κεφάλαιο 23. Τοπικές Ρυθμίσεις - Χρήση και ρύθμιση I18N/L10N</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/l10n/#l10n-synopsis>23.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/l10n/#l10n-basics>23.2. Βασικές Γνώσεις</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/l10n/#using-localization>23.3. Χρήση των Τοπικών Ρυθμίσεων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/l10n/#l10n-compiling>23.4. Μεταγλώττιση Προγραμμάτων I18N</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/l10n/#lang-setup>23.5. Τοπικές Ρυθμίσεις για Συγκεκριμένες Γλώσσες</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/>Κεφάλαιο 24. Ενημέρωση και Αναβάθμιση του FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. Ενημερώνοντας το FreeBSD</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. Portsnap: Ένα Εργαλείο Ενημέρωσης της Συλλογής των Ports</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. Ενημερώνοντας την Τεκμηρίωση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#current-stable>24.5. Παρακολούθηση Ενός Κλάδου Ανάπτυξης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#synching>24.6. Συγχρονίζοντας τον Πηγαίο σας Κώδικα</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#makeworld>24.7. Μεταγλωττίζοντας το Βασικό Σύστημα ("world")</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#make-delete-old>24.8. Διαγραφή Παρωχημένων Αρχείων, Καταλόγων και Βιβλιοθηκών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/cutting-edge/#small-lan>24.9. Διαδικασία για Πολλαπλά Μηχανήματα</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/dtrace/>Κεφάλαιο 25. DTrace</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/dtrace/#dtrace-synopsis>25.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/dtrace/#dtrace-implementation>25.2. Διαφορές στην Υλοποίηση</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/dtrace/#dtrace-enable>25.3. Ενεργοποίηση της Υποστήριξης DTrace</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/dtrace/#dtrace-using>25.4. Χρησιμοποιώντας το DTrace</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/dtrace/#dtrace-language>25.5. Η Γλώσσα D</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/partiv/>Μέρος IV. Δικτυακές Επικοινωνίες</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/serialcomms/>Κεφάλαιο 26. Σειριακές Επικοινωνίες</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/serialcomms/#serial-synopsis>26.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/serialcomms/#serial>26.2. Εισαγωγή</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/serialcomms/#term>26.3. Τερματικά</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/serialcomms/#dialup>26.4. Υπηρεσία Εισόδου μέσω Επιλογικής Σύνδεσης (dial-in)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/serialcomms/#dialout>26.5. Υπηρεσία Επιλογικής Σύνδεσης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/serialcomms/#serialconsole-setup>26.6. Ρύθμιση της Σειριακής Κονσόλας</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/>Κεφάλαιο 27. PPP και SLIP</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/#userppp>27.2. Χρησιμοποιώντας το PPP Χρήστη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/#ppp>27.3. Χρησιμοποιώντας το PPP του Πυρήνα</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. Αντιμετώπιση Προβλημάτων σε Συνδέσεις PPP</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/#pppoe>27.5. Χρησιμοποιώντας PPP μέσω Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/#pppoa>27.6. Χρησιμοποιώντας PPP μέσω ATM (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/ppp-and-slip/#slip>27.7. Χρησιμοποιώντας το SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/mail/>Κεφάλαιο 28. Ηλεκτρονικό Ταχυδρομείο</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-synopsis>28.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-using>28.2. Χρησιμοποιώντας το Ηλεκτρονικό Ταχυδρομείο</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#sendmail>28.3. Ρύθμιση του sendmail</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-changingmta>28.4. Αλλάζοντας τον Αντιπρόσωπο Μεταφοράς Ταχυδρομείου (MTA)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-trouble>28.5. Αντιμετώπιση Προβλημάτων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-advanced>28.6. Προχωρημένα Θέματα</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#SMTP-UUCP>28.7. SMTP με UUCP</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#outgoing-only>28.8. Ρύθμιση Εξυπηρετητή Μόνο για Αποστολή</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#SMTP-dialup>28.9. Χρησιμοποιώντας το Mail Μέσω Επιλογικής (Dialup) Σύνδεσης</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#SMTP-Auth>28.10. Πιστοποίηση Αυθεντικότητας στο SMTP</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-agents>28.11. Προγράμματα Ταχυδρομείου για τον Χρήστη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-fetchmail>28.12. Χρησιμοποιώντας το fetchmail</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mail/#mail-procmail>28.13. Χρησιμοποιώντας το procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/>Κεφάλαιο 29. Εξυπηρετητές Δικτύου</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-servers-synopsis>29.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-inetd>29.2. The inetd"Super-Server"</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-nfs>29.3. Network File System (NFS)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-nis>29.4. Network Information System (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-dhcp>29.5. Automatic Network Configuration (DHCP)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-dns>29.6. Domain Name System (DNS)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-apache>29.7. Ο εξυπηρετητής HTTP Apache</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-ftp>29.8. Πρωτόκολο Μεταφοράς Αρχείων (FTP)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-samba>29.9. File and Print Services for Microsoft® Windows® clients (Samba)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/network-servers/#network-ntp>29.10. Συγχρονισμός Ρολογιού Συστήματος με NTP</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle checked>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/firewalls/>Κεφάλαιο 30. Firewalls</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/firewalls/#firewalls-intro>30.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/firewalls/#firewalls-concepts>30.2. Βασικές Έννοιες των Firewalls</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/firewalls/#firewalls-apps>30.3. Προγράμματα Firewall</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/firewalls/#firewalls-pf>30.4. Το Packet Filter (PF) και το ALTQ του OpenBSD</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/firewalls/#firewalls-ipf>30.5. Το IPFILTER (IPF) Firewall</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/>Κεφάλαιο 31. Προχωρημένα Θέματα Δικτύωσης</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Σύνοψη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-routing>31.2. Gateways and Routes</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-wireless>31.3. Wireless Networking</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-bridging>31.5. Bridging</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-diskless>31.6. Diskless Operation</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-isdn>31.7. ISDN</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-natd>31.8. Network Address Translation</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-plip>31.9. Parallel Line IP (PLIP)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-ipv6>31.10. IPv6</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#network-atm>31.11. Asynchronous Transfer Mode (ATM)</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking/#carp>31.12. Common Access Redundancy Protocol (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/partv/>Μέρος V. Παραρτήματα</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/>Παράρτημα A. Που θα Βρείτε το FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#mirrors-cdrom>A.1. Εκδόσεις σε CDROM και DVD</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#mirrors-ftp>A.2. Εξυπηρετητές FTP</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#anoncvs>A.3. Ανώνυμο CVS</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#ctm>A.4. Χρησιμοποιώντας το CTM</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#cvsup>A.5. Χρησιμοποιώντας το CVSup</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#cvs-tags>A.6. Ετικέτες (Tags) για το CVS</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#mirrors-afs>A.7. Τοποθεσίες AFS</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/mirrors/#mirrors-rsync>A.8. Τοποθεσίες rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/>Παράρτημα B. Βιβλιογραφία</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-freebsd>B.1. Βιβλία & Περιοδικά σχετικά με το FreeBSD</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-userguides>B.2. Οδηγοί χρήστη</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-adminguides>B.3. Οδηγοί διαχειριστή</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-programmers>B.4. Οδηγοί προγραμματιστών</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-osinternals>B.5. Το εσωτερικό του λειτουργικού συστήματος</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-security>B.6. Αναφορές ασφαλείας</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-hardware>B.7. Αναφορές υλικού</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-history>B.8. Ιστορία του UNIX®</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/bibliography/#bibliography-journals>B.9. Περιοδικά και εφημερίδες</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/eresources/>Παράρτημα C. Πηγές Πληροφόρησης στο Διαδίκτυο</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/eresources/#eresources-mail>C.1. Λίστες Ηλεκτρονικού Ταχυδρομείου</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/eresources/#eresources-news>C.2. Usenet Newsgroups</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/eresources/#eresources-web>C.3. Διακομιστές Ιστοσελίδων</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook/eresources/#eresources-email>C.4. Διευθύνσεις Ηλεκτρονικού Ταχυδρομείου</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/el/books/handbook/pgpkeys/>Παράρτημα D. Κλειδιά PGP</a><ul><li><a href=http://172.16.201.134:1313/el/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Officers</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Κεφάλαιο 30. Firewalls</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Πίνακας περιεχομένων</h3><nav id=TableOfContents><ul><li><a href=#firewalls-intro>30.1. Σύνοψη</a></li><li><a href=#firewalls-concepts>30.2. Βασικές Έννοιες των Firewalls</a></li><li><a href=#firewalls-apps>30.3. Προγράμματα Firewall</a></li><li><a href=#firewalls-pf>30.4. Το Packet Filter (PF) και το ALTQ του OpenBSD</a></li><li><a href=#firewalls-ipf>30.5. Το IPFILTER (IPF) Firewall</a></li><li><a href=#firewalls-ipfw>30.6. IPFW</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=firewalls-intro>30.1. Σύνοψη<a class=anchor href=#firewalls-intro></a></h2><div class=sectionbody><div class=paragraph><p>Το firewall (τείχος προστασίας) καθιστά δυνατό το φιλτράρισμα της εισερχόμενης και εξερχόμενης κίνησης που διέρχεται από το σύστημα σας. Ένα firewall μπορεί να χρησιμοποιεί ένα ή περισσότερα σετ "κανόνων" για να επιθεωρεί τα πακέτα κατά την είσοδο ή έξοδο τους από μια δικτυακή σύνδεση, και να τα επιτρέπει ή να τα απορρίπτει. Οι κανόνες του firewall μπορούν να ελέγχουν ένα ή περισσότερα χαρακτηριστικά των πακέτων, συμπεριλαμβανομένων μεταξύ άλλων και του τύπου του πρωτοκόλλου, καθώς και την διεύθυνση ή/και θύρα (port) της αφετηρίας ή του προορισμού.</p></div><div class=paragraph><p>Τα firewalls μπορούν να ενισχύσουν σημαντικά την ασφάλεια ενός κόμβου ή ενός δικτύου. Μπορούν να χρησιμοποιηθούν για μία ή περισσότερες από τις ακόλουθες λειτουργίες:</p></div><div class=ulist><ul><li><p>Να προστατεύουν και να απομονώνουν τις εφαρμογές, τις υπηρεσίες και τα μηχανήματα του εσωτερικού σας δικτύου από ανεπιθύμητη κίνηση που προέρχεται από το Internet.</p></li><li><p>Να περιορίζουν ή να αποκλείουν την πρόσβαση μηχανημάτων του εσωτερικού δικτύου σε υπηρεσίες του Internet.</p></li><li><p>Να υποστηρίζουν μετάφραση δικτυακών διευθύνσεων (NAT), η οποία επιτρέπει στο εσωτερικό σας δίκτυο να χρησιμοποιεί ιδιωτικές IP διευθύνσεις και να μοιράζεται μία μοναδική σύνδεση με το Internet (είτε μέσω μίας μοναδικής δημόσιας IP διεύθυνσης, είτε μέσω ενός πλήθους δημοσίων διευθύνσεων που ανατίθενται αυτόματα).</p></li></ul></div><div class=paragraph><p>Αφού διαβάσετε αυτό το κεφάλαιο, θα ξέρετε:</p></div><div class=ulist><ul><li><p>Πως να δημιουργήσετε σωστούς κανόνες φιλτραρίσματος πακέτων.</p></li><li><p>Τους διάφορους τύπους firewall που υπάρχουν στο FreeBSD και τις διαφορές τους.</p></li><li><p>Πως να ρυθμίσετε και να χρησιμοποιήσετε το PF firewall του OpenBSD.</p></li><li><p>Πως να ρυθμίσετε και να χρησιμοποιήσετε το IPFILTER.</p></li><li><p>Πως να ρυθμίσετε και να χρησιμοποιήσετε το IPFW.</p></li></ul></div><div class=paragraph><p>Πριν διαβάσετε αυτό το κεφάλαιο, θα πρέπει:</p></div><div class=ulist><ul><li><p>Να κατανοείτε βασικές αρχές του FreeBSD και του Internet.</p></li></ul></div></div></div><div class=sect1><h2 id=firewalls-concepts>30.2. Βασικές Έννοιες των Firewalls<a class=anchor href=#firewalls-concepts></a></h2><div class=sectionbody><div class=paragraph><p>Υπάρχουν δύο βασικοί τρόποι για τη δημιουργία κανόνων σε ένα firewall: ο "inclusive" και ο "exclusive". Ένα exclusive firewall επιτρέπει τη διέλευση όλης της κίνησης, εκτός από αυτή που ταιριάζει με τους κανόνες του. Ένα inclusive firewall κάνει το ανάποδο. Επιτρέπει μόνο τη διέλευση της κίνησης που ταιριάζει με τους κανόνες του, και αποκλείει οτιδήποτε άλλο.</p></div><div class=paragraph><p>Τα inclusive firewalls προσφέρουν πολύ καλύτερο έλεγχο της εξερχόμενης κίνησης και για το λόγο αυτό είναι καλύτερα για συστήματα που προσφέρουν υπηρεσίες στο δημόσιο Internet. Ελέγχουν επίσης και τα πακέτα που προέρχονται από το δημόσιο Internet με προορισμό το ιδιωτικό σας δίκτυο. Από προεπιλογή, όλη η κίνηση που δεν ταιριάζει με τους κανόνες απορρίπτεται και καταγράφεται. Τα inclusive firewalls είναι γενικά ασφαλέστερα από τα exclusive, καθώς μειώνουν σημαντικά την πιθανότητα διέλευσης ανεπιθύμητης κίνησης μέσα από αυτά.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Εκτός και αν αναφέρεται διαφορετικά, όλα τα παραδείγματα ρυθμίσεων και κανόνων που φαίνονται σε αυτό το κεφάλαιο, δημιουργούν inclusive firewalls.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Η ασφάλεια μπορεί να γίνει ακόμα ισχυρότερη με τη χρήση ενός "stateful firewall". Αυτός ο τύπος firewall αποθηκεύει την κατάσταση των συνδέσεων που μεταφέρουν δεδομένα μέσα από αυτό, και επιτρέπει μόνο την κίνηση που είτε ταιριάζει με μια από τις υπάρχουσες συνδέσεις, ή που ξεκινά μια νέα σύνδεση. Το μειονέκτημα ενός stateful firewall είναι ότι μπορεί να είναι ευάλωτο σε επιθέσεις Denial of Service (Άρνησης Υπηρεσίας, DoS) αν δεχθεί ταυτόχρονα πολλές αιτήσεις για άνοιγμα νέων συνδέσεων σε μικρό χρονικό διάστημα. Με τα περισσότερα firewalls, είναι δυνατόν να γίνει συνδυασμός και των δύο συμπεριφορών (τόσο stateful όσο και μη-stateful) ώστε να δημιουργηθεί το βέλτιστο firewall για την συγκεκριμένη χρήση.</p></div></div></div><div class=sect1><h2 id=firewalls-apps>30.3. Προγράμματα Firewall<a class=anchor href=#firewalls-apps></a></h2><div class=sectionbody><div class=paragraph><p>Το FreeBSD έχει τρία διαφορετικά προγράμματα firewall ενσωματωμένα στο βασικό σύστημα. Είναι τα: <em>IPFILTER</em> (γνωστό επίσης και ως IPF), το <em>IPFIREWALL</em> (γνωστό επίσης και ως IPFW), και το <em>PacketFilter</em> του <em>OpenBSD</em> (γνωστό επίσης και ως PF). Το FreeBSD ενσωματώνει επίσης δύο προγράμματα για διαμόρφωση κυκλοφορίας (traffic shaping, έλεγχος του διαθέσιμου εύρους ζώνης): το <a href="https://man.freebsd.org/cgi/man.cgi?query=altq&amp;sektion=4&amp;format=html">altq(4)</a> και το <a href="https://man.freebsd.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;format=html">dummynet(4)</a>. Το Dummynet είναι κατά παράδοση στενά συνδεμένο με το IPFW, και το ALTQ με το PF. Η διαμόρφωση κυκλοφορίας για το IPFILTER μπορεί τη δεδομένη στιγμή να γίνει με το IPFILTER για το NAT και το φιλτράρισμα και με το IPFW σε συνδυασμό με το <a href="https://man.freebsd.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;format=html">dummynet(4)</a> <em>ή</em> χρησιμοποιώντας το PF σε συνδυασμό με το ALTQ. Τόσο το IPFW όσο και το PF χρησιμοποιούν κανόνες για να ελέγξουν την κίνηση των πακέτων από και προς το σύστημά σας, αν και διαθέτουν διαφορετικούς τρόπους για να το επιτύχουν, και οι κανόνες τους χρησιμοποιούν διαφορετική σύνταξη.</p></div><div class=paragraph><p>Ο λόγος για τον οποίο το FreeBSD διαθέτει πολλαπλά firewall, είναι ότι διαφορετικοί άνθρωποι έχουν διαφορετικές ανάγκες και προτιμήσεις. Δεν υπάρχει ένα και μοναδικό firewall που να είναι το καλύτερο.</p></div><div class=paragraph><p>Ο συγγραφέας προτιμά το IPFILTER, καθώς οι κανόνες τύπου stateful που διαθέτει είναι λιγότερο πολύπλοκοι όταν χρησιμοποιούνται σε ένα περιβάλλον NAT, ενώ διαθέτει και ενσωματωμένο ftp proxy το οποίο τους απλοποιεί ακόμα περισσότερο, επιτρέποντας ασφαλή σύνδεση σε εξωτερικούς εξυπηρετητές FTP.</p></div><div class=paragraph><p>Καθώς όλα τα firewall βασίζονται στην επιθεώρηση τιμών ελέγχου των πακέτων, ο διαχειριστής που πρόκειται να δημιουργήσει τους κανόνες πρέπει να κατανοεί τον τρόπο λειτουργίας του TCP/IP, το ρόλο των διαφόρων τιμών στα πεδία ελέγχου των πακέτων και πως χρησιμοποιούνται στην ανταλλαγή πληροφοριών σε μια συνηθισμένη συνεδρία. Για περισσότερες λεπτομέρειες, διαβάστε το <a href=http://www.ipprimer.com/overview.cfm>http://www.ipprimer.com/overview.cfm</a>.</p></div></div></div><div class=sect1><h2 id=firewalls-pf>30.4. Το Packet Filter (PF) και το ALTQ του OpenBSD<a class=anchor href=#firewalls-pf></a></h2><div class=sectionbody><div class=paragraph><p>Τον Ιούλιο του 2003, η εφαρμογή firewall του OpenBSD (γνωστή ως PF) μεταφέρθηκε στο FreeBSD και έγινε διαθέσιμη στην Συλλογή των Ports. Το FreeBSD 5.3 που κυκλοφόρησε το 2004, ήταν η πρώτη επίσημη έκδοση η οποία περιείχε το PF ως τμήμα του βασικού πλέον συστήματος. Το PF είναι ένα ολοκληρωμένο firewall, με πλήθος χαρακτηριστικών, το οποίο επίσης διαθέτει προαιρετικά υποστήριξη για το ALTQ (Alternate Queuing). Το ALTQ προσφέρει υπηρεσίες Διασφάλισης Ποιότητας (Quality of Service, QoS).</p></div><div class=paragraph><p>Το OpenBSD Project κάνει εξαιρετική δουλειά στη συντήρηση του <a href=http://www.openbsd.org/faq/pf/>PF FAQ</a>. Για το λόγο αυτό, η παρούσα ενότητα του Εγχειριδίου εστιάζει κυρίως στις ιδιαιτερότητες του PF όσο αφορά το FreeBSD, ενώ παρέχει και μερικές γενικές πληροφορίες σχετικά με τη χρήση του. Για πιο λεπτομερείς πληροφορίες σχετικά με τη χρήση του PF, παρακαλούμε διαβάστε το <a href=http://www.openbsd.org/faq/pf/>PF FAQ</a>.</p></div><div class=paragraph><p>Περισσότερες πληροφορίες σχετικά με το PF στο FreeBSD μπορείτε να βρείτε στο <a href=http://pf4freebsd.love2party.net/>http://pf4freebsd.love2party.net/</a>.</p></div><div class=sect2><h3 id=_χρησιμοποιώντας_τα_αρθρώματα_πυρήνα_για_το_pf>30.4.1. Χρησιμοποιώντας τα Αρθρώματα Πυρήνα για το PF<a class=anchor href=#_χρησιμοποιώντας_τα_αρθρώματα_πυρήνα_για_το_pf></a></h3><div class=paragraph><p>Για να φορτώσετε το άρθρωμα πυρήνα για το PF, προσθέστε την παρακάτω γραμμή στο στο <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>pf_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Εκτελέστε έπειτα το script εκκίνησης για να φορτώσετε το άρθρωμα:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/pf start</span></code></pre></div></div><div class=paragraph><p>Σημειώστε ότι το άρθρωμα PF δεν πρόκειται να φορτωθεί αν δεν βρει το καθορισμένο αρχείο κανόνων. Το προεπιλεγμένο αρχείο είναι το <span class=filename>/etc/pf.conf</span>. Αν το αρχείο κανόνων βρίσκεται σε κάποια άλλη τοποθεσία, μπορείτε να την καθορίσετε προσθέτοντας μια γραμμή όπως την παρακάτω στο <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>pf_rules=&#34;/path/to/pf.conf&#34;</pre></div></div><div class=paragraph><p>Μπορείτε να βρείτε ένα παράδειγμα του αρχείου <span class=filename>pf.conf</span> στον κατάλογο <span class=filename>/usr/shared/examples/pf</span></p></div><div class=paragraph><p>Το άρθρωμα PF μπορεί επίσης να φορτωθεί χειροκίνητα από την γραμμή εντολών:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload pf.ko</span></code></pre></div></div><div class=paragraph><p>Η υποστήριξης καταγραφής του PF παρέχεται από το άρθρωμα <code>pflog.ko</code> και μπορείτε να την φορτώσετε προσθέτοντας την παρακάτω γραμμή στο <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>pflog_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Εκτελέστε έπειτα το script εκκίνησης για να φορτώσετε το άρθρωμα:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/pflog start</span></code></pre></div></div><div class=paragraph><p>Αν χρειάζεστε κάποιο από τα προχωρημένα χαρακτηριστικά του PF, θα πρέπει να μεταγλωττίσετε την υποστήριξη για το PF απευθείας μέσα στον πυρήνα.</p></div></div><div class=sect2><h3 id=_επιλογές_του_pf_για_τον_πυρήνα>30.4.2. Επιλογές του PF για τον Πυρήνα<a class=anchor href=#_επιλογές_του_pf_για_τον_πυρήνα></a></h3><div class=paragraph><p>Αν και δεν είναι απαραίτητο να μεταγλωττίσετε την υποστήριξη PF μέσα στον πυρήνα του FreeBSD, ίσως να θέλετε να χρησιμοποιήσετε ένα από τα προχωρημένα χαρακτηριστικά του PF το οποίο δεν περιλαμβάνεται στο άρθρωμα του πυρήνα: το <a href="https://man.freebsd.org/cgi/man.cgi?query=pfsync&amp;sektion=4&amp;format=html">pfsync(4)</a>. Πρόκειται για μια ψευδο-συσκευή η οποία αποκαλύπτει συγκεκριμένες αλλαγές στον πίνακα καταστάσεων που χρησιμοποιείται από το PF. Μπορεί να συνδυαστεί με το <a href="https://man.freebsd.org/cgi/man.cgi?query=carp&amp;sektion=4&amp;format=html">carp(4)</a> για να δημιουργηθούν με το PF firewalls με δυνατότητα αυτόματης αλλαγής σε περίπτωση αποτυχίας (failover). Περισσότερες πληροφορίες σχετικά με το CARP μπορείτε να βρείτε στο <a href=../advanced-networking/#carp>Common Access Redundancy Protocol (CARP)</a> του Εγχειριδίου.</p></div><div class=paragraph><p>Μπορείτε να δείτε όλες τις επιλογές πυρήνα για το PF στο αρχείο <span class=filename>/usr/src/sys/conf/NOTES</span>. Οι επιλογές φαίνονται επίσης παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>device pf
device pflog
device pfsync</pre></div></div><div class=paragraph><p>Η επιλογή <code>device pf</code> ενεργοποιεί την υποστήριξη για το firewall "Packet Filter" (<a href="https://man.freebsd.org/cgi/man.cgi?query=pf&amp;sektion=4&amp;format=html">pf(4)</a>).</p></div><div class=paragraph><p>Η επιλογή <code>device pflog</code> ενεργοποιεί την προαιρετική ψευδο-δικτυακή συσκευή <a href="https://man.freebsd.org/cgi/man.cgi?query=pflog&amp;sektion=4&amp;format=html">pflog(4)</a> που μπορεί να χρησιμοποιηθεί για την καταγραφή της κίνησης σε ένα <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> descriptor. Ο δαίμονας <a href="https://man.freebsd.org/cgi/man.cgi?query=pflogd&amp;sektion=8&amp;format=html">pflogd(8)</a> μπορεί να αποθηκεύσει την καταγραφή αυτή στο σκληρό δίσκο.</p></div><div class=paragraph><p>Η επιλογή <code>device pfsync</code> ενεργοποιεί την προαιρετική ψευδό-δικτυακή συσκευή <a href="https://man.freebsd.org/cgi/man.cgi?query=pfsync&amp;sektion=4&amp;format=html">pfsync(4)</a> η οποία χρησιμοποιείται για να ανιχνεύει "αλλαγές κατάστασης".</p></div></div><div class=sect2><h3 id=_επιλογές_στο_rc_conf>30.4.3. Επιλογές στο <span class=filename>rc.conf</span><a class=anchor href=#_επιλογές_στο_rc_conf></a></h3><div class=paragraph><p>Το PF και το <a href="https://man.freebsd.org/cgi/man.cgi?query=pflog&amp;sektion=4&amp;format=html">pflog(4)</a> μπορούν να ρυθμιστούν κατά την εκκίνηση με τις παρακάτω καταχωρίσεις στο <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>:</p></div><div class="literalblock programlisting"><div class=content><pre>pf_enable=&#34;YES&#34;                 # Enable PF (load module if required)
pf_rules=&#34;/etc/pf.conf&#34;         # rules definition file for pf
pf_flags=&#34;&#34;                     # additional flags for pfctl startup
pflog_enable=&#34;YES&#34;              # start pflogd(8)
pflog_logfile=&#34;/var/log/pflog&#34;  # where pflogd should store the logfile
pflog_flags=&#34;&#34;                  # additional flags for pflogd startup</pre></div></div><div class=paragraph><p>Αν πίσω από αυτό το firewall υπάρχει κάποιο τοπικό δίκτυο (LAN) προς το οποίο επιθυμείτε να προωθήσετε πακέτα, ή αν θέλετε να χρησιμοποιήσετε NAT, θα χρειαστείτε επίσης και την παρακάτω επιλογή:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;            # Enable as LAN gateway</pre></div></div></div><div class=sect2><h3 id=_δημιουργία_κανόνων_φιλτραρίσματος>30.4.4. Δημιουργία Κανόνων Φιλτραρίσματος<a class=anchor href=#_δημιουργία_κανόνων_φιλτραρίσματος></a></h3><div class=paragraph><p>Το PF διαβάζει τις ρυθμίσεις του από το <a href="https://man.freebsd.org/cgi/man.cgi?query=pf.conf&amp;sektion=5&amp;format=html">pf.conf(5)</a> (η προεπιλεγμένη τοποθεσία είναι στο <span class=filename>/etc/pf.conf</span>) και τροποποιεί, απορρίπτει ή αποδέχεται πακέτα σύμφωνα με τους κανόνες και τους ορισμούς που περιέχονται σε αυτό. Η εγκατάσταση του FreeBSD περιλαμβάνει αρκετά υποδείγματα αρχείων ρύθμισης, στην τοποθεσία <span class=filename>/usr/shared/examples/pf/</span>. Παρακαλούμε να διαβάσετε το <a href=http://www.openbsd.org/faq/pf/>PF FAQ</a> για πλήρη ανάλυση των κανόνων του PF.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Καθώς διαβάζετε το <a href=http://www.openbsd.org/faq/pf/>PF FAQ</a>, να έχετε υπόψη σας ότι διαφορετικές εκδόσεις του FreeBSD περιέχουν διαφορετικές εκδόσεις του PF. Τη δεδομένη στιγμή, το FreeBSD 8.<em>X</em> και οι προηγούμενες εκδόσεις χρησιμοποιούν την ίδια έκδοση του PF που χρησιμοποιεί και το OpenBSD 4.1. Το FreeBSD 9.<em>X</em> και νεώτερες εκδόσεις χρησιμοποιούν την ίδια έκδοση του PF με το OpenBSD 4.5.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Η <a href=https://lists.FreeBSD.org/subscription/freebsd-pf>ηλεκτρονική λίστα του FreeBSD για το packet filter firewall</a> είναι ένα καλό μέρος για να κάνετε ερωτήσεις σχετικές με τη ρύθμιση και τη λειτουργία του PF firewall. Μη ξεχάσετε να ελέγξετε τα αρχεία της λίστας πριν ξεκινήσετε τις ερωτήσεις!</p></div></div><div class=sect2><h3 id=_δουλεύοντας_με_το_pf>30.4.5. Δουλεύοντας με το PF<a class=anchor href=#_δουλεύοντας_με_το_pf></a></h3><div class=paragraph><p>Χρησιμοποιήστε το <a href="https://man.freebsd.org/cgi/man.cgi?query=pfctl&amp;sektion=8&amp;format=html">pfctl(8)</a> για να ελέγξετε το PF. Παρακάτω θα βρείτε κάποιες χρήσιμες εντολές (βεβαιωθείτε ότι έχετε διαβάσει τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=pfctl&amp;sektion=8&amp;format=html">pfctl(8)</a> για να δείτε όλες τις διαθέσιμες επιλογές):</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Εντολή</th><th class="tableblock halign-left valign-top">Σκοπός</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -e</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Ενεργοποίηση του PF</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -d</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Απενεργοποίηση του PF</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -F all -f /etc/pf.conf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Διαγραφή όλων των κανόνων (nat, filter, state, table, κ.λ.π.) και εκ νέου ανάγνωση από το αρχείο <span class=filename>/etc/pf.conf</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -s [ rules | nat | state ]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Εκτύπωση αναφοράς σχετικά με τους κανόνες του φίλτρου, του NAT, ή του πίνακα κατάστασης</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -vnf /etc/pf.conf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Ελέγχει το <span class=filename>/etc/pf.conf</span> για λάθη, αλλά δεν φορτώνει τους κανόνες</p></td></tr></tbody></table></div><div class=sect2><h3 id=_ενεργοποίηση_του_altq>30.4.6. Ενεργοποίηση του ALTQ<a class=anchor href=#_ενεργοποίηση_του_altq></a></h3><div class=paragraph><p>Το ALTQ διατίθεται μόνο αν μεταγλωττίσετε απευθείας την υποστήριξη του μέσα στον πυρήνα του FreeBSD. Το ALTQ δεν υποστηρίζεται από όλα τα προγράμματα οδήγησης καρτών δικτύου. Παρακαλούμε δείτε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=altq&amp;sektion=4&amp;format=html">altq(4)</a> για τη λίστα των οδηγών που υποστηρίζονται στην έκδοση του FreeBSD που διαθέτετε.</p></div><div class=paragraph><p>Οι παρακάτω επιλογές του πυρήνα ενεργοποιούν το ALTQ και παρέχουν επιπρόσθετες λειτουργίες:</p></div><div class="literalblock programlisting"><div class=content><pre>options         ALTQ
options         ALTQ_CBQ        # Class Bases Queuing (CBQ)
options         ALTQ_RED        # Random Early Detection (RED)
options         ALTQ_RIO        # RED In/Out
options         ALTQ_HFSC       # Hierarchical Packet Scheduler (HFSC)
options         ALTQ_PRIQ       # Priority Queuing (PRIQ)
options         ALTQ_NOPCC      # Required for SMP build</pre></div></div><div class=paragraph><p>Η γραμμή <code>options ALTQ</code> ενεργοποιεί το πλαίσιο λειτουργιών ALTQ.</p></div><div class=paragraph><p>Η γραμμή <code>options ALTQ_CBQ</code> ενεργοποιεί το <em>Class Based Queuing</em> (CBQ). Το CBQ σας επιτρέπει να χωρίσετε το εύρος ζώνης μιας σύνδεσης σε διαφορετικές κλάσεις ή ουρές, ώστε να δίνονται προτεραιότητες στην κίνηση ανάλογα με τους κανόνες του φίλτρου.</p></div><div class=paragraph><p>Η γραμμή <code>options ALTQ_RED</code> ενεργοποιεί το <em>Random Early Detection</em> (RED). Το RED χρησιμοποιείται για να αποφευχθεί η συμφόρηση του δικτύου. Για το σκοπό αυτό, το RED μετράει το μήκος της ουράς και το συγκρίνει με το μέγιστο και ελάχιστο όριο της. Αν η ουρά είναι πάνω από το μέγιστο, όλα τα νέα πακέτα θα απορρίπτονται. Σύμφωνα και με το όνομα του, το RED απορρίπτει πακέτα από διάφορες συνδέσεις με τυχαίο τρόπο.</p></div><div class=paragraph><p>Η γραμμή <code>options ALTQ_RIO</code> ενεργοποιεί το <em>Random Early Detection In and Out</em>.</p></div><div class=paragraph><p>Η γραμμή <code>options ALTQ_HFSC</code> ενεργοποιεί το <em>Hierarchical Fair Service Curve Packet Scheduler</em>. Για περισσότερες πληροφορίες σχετικά με το HFSC δείτε: <a href=http://www-2.cs.cmu.edu/~hzhang/HFSC/main.html>http://www-2.cs.cmu.edu/~hzhang/HFSC/main.html</a>.</p></div><div class=paragraph><p>Η γραμμή <code>options ALTQ_PRIQ</code> ενεργοποιεί το <em>Priority Queuing</em> (PRIQ). Το PRIQ πάντοτε περνάει πρώτα την κίνηση με τη μεγαλύτερη προτεραιότητα.</p></div><div class=paragraph><p>Η γραμμή <code>options ALTQ_NOPCC</code> ενεργοποιεί την υποστήριξη SMP για το ALTQ. Η επιλογή αυτή απαιτείται σε συστήματα SMP.</p></div></div></div></div><div class=sect1><h2 id=firewalls-ipf>30.5. Το IPFILTER (IPF) Firewall<a class=anchor href=#firewalls-ipf></a></h2><div class=sectionbody><div class=paragraph><p>Ο συγγραφέας του IPFILTER είναι ο Darren Reed. Το IPFILTER δεν εξαρτάται από το λειτουργικό σύστημα: είναι μια εφαρμογή ανοικτού κώδικα που έχει μεταφερθεί στο FreeBSD, το NetBSD, το OpenBSD, το SunOS™, το HP/UX και το Solaris™. Το IPFILTER είναι υπό διαρκή και ενεργή ανάπτυξη και συντήρηση, και κυκλοφορούν τακτικά οι νέες εκδόσεις του.</p></div><div class=paragraph><p>Το IPFILTER είναι ένα firewall και μηχανισμός NAT που λειτουργεί στον πυρήνα και μπορεί να ελέγχεται και να παρακολουθείται από προγράμματα χρήστη. Οι κανόνες του firewall μπορούν να τίθενται σε ισχύ ή να διαγράφονται μέσω του βοηθητικού προγράμματος <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a>. Οι κανόνες για το NAT μπορούν να τίθενται σε ισχύ ή να διαγράφονται μέσω του βοηθητικού προγράμματος <a href="https://man.freebsd.org/cgi/man.cgi?query=ipnat&amp;sektion=1&amp;format=html">ipnat(1)</a>. Το βοηθητικό πρόγραμμα <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> μπορεί να εκτυπώσει στατιστικά εκτέλεσης για το τμήμα του IPFILTER που εκτελείται στον πυρήνα. Το πρόγραμμα <a href="https://man.freebsd.org/cgi/man.cgi?query=ipmon&amp;sektion=8&amp;format=html">ipmon(8)</a> μπορεί να καταγράψει τις ενέργειες του IPFILTER στο αρχεία καταγραφής συμβάντων του συστήματος.</p></div><div class=paragraph><p>Το IPF γράφηκε αρχικά χρησιμοποιώντας μια λογική επεξεργασίας κανόνων του τύπου "ο τελευταίο κανόνας που ταιριάζει, είναι και ο νικητής" και χρησιμοποιούσε μόνο κανόνες τύπου stateless. Με την πάροδο του χρόνου, το IPF βελτιώθηκε για να περιλαμβάνει την επιλογή "quick" και την επιλογή "keep state" για stateful κανόνες. Οι επιλογές αυτές εκσυγχρόνισαν δραματικά τη λογική επεξεργασίας των κανόνων. Η επίσημη τεκμηρίωση του IPF καλύπτει μόνο τις παλιές παραμέτρους ρύθμισης και επεξεργασίας των κανόνων. Οι σύγχρονες λειτουργίες καλύπτονται μόνο ως πρόσθετες επιλογές, και έτσι δεν τονίζονται αρκετά τα πλεονεκτήματα τους στη δημιουργία ενός πολύ καλύτερου και ασφαλέστερου firewall.</p></div><div class=paragraph><p>Οι οδηγίες που περιέχονται σε αυτή την ενότητα, βασίζονται στη χρήση κανόνων που περιέχουν την επιλογή "quick" καθώς και την stateful επιλογή "keep state". Αυτό είναι και το βασικό πλαίσιο λειτουργιών για την δημιουργία του σετ κανόνων ενός inclusive firewall.</p></div><div class=paragraph><p>Για λεπτομέρειες σχετικά με τον παλιότερο τρόπο επεξεργασίας των κανόνων, δείτε: <a href=http://www.obfuscation.org/ipf/ipf-howto.html#TOC_1>http://www.obfuscation.org/ipf/ipf-howto.html#TOC_1</a> και <a href=http://coombs.anu.edu.au/~avalon/ip-filter.html>http://coombs.anu.edu.au/~avalon/ip-filter.html</a>.</p></div><div class=paragraph><p>Μπορείτε να δείτε το IPF FAQ στην τοποθεσία <a href=http://www.phildev.net/ipf/index.html>http://www.phildev.net/ipf/index.html</a>.</p></div><div class=paragraph><p>Μπορείτε να βρείτε τις παλαιότερες δημοσιεύσεις τις λίστας ταχυδρομείου του IPFILTER στο <a href="http://marc.theaimsgroup.com/?l=ipfilter">http://marc.theaimsgroup.com/?l=ipfilter</a>. Παρέχεται δυνατότητα αναζήτησης.</p></div><div class=sect2><h3 id=_ενεργοποιώντας_το_ipf>30.5.1. Ενεργοποιώντας το IPF<a class=anchor href=#_ενεργοποιώντας_το_ipf></a></h3><div class=paragraph><p>Το IPF περιλαμβάνεται στη βασική εγκατάσταση του FreeBSD ως άρθρωμα το οποίο μπορεί να φορτωθεί χωριστά. Το σύστημα θα φορτώσει δυναμικά το άρθρωμα του IPF αν υπάρχει η καταχώριση <code>ipfilter_enable="YES"</code> στο αρχείο <span class=filename>/etc/rc.conf</span>. Το άρθρωμα έχει δημιουργηθεί με ενεργοποιημένη την δυνατότητα καταγραφής και με την επιλογή <code>default pass all</code>. Για να αλλάξετε αυτή την προεπιλογή σε <code>block all</code>, μπορείτε απλώς να προσθέσετε τον κανόνα απόρριψης (block all) στο τέλος των κανόνων σας. Δεν χρειάζεται να μεταγλωττίσετε την επιλογή IPF στο πυρήνα του FreeBSD για το σκοπό αυτό.</p></div></div><div class=sect2><h3 id=_επιλογές_για_τον_πυρήνα>30.5.2. Επιλογές για τον Πυρήνα<a class=anchor href=#_επιλογές_για_τον_πυρήνα></a></h3><div class=paragraph><p>Δεν είναι υποχρεωτικό να μεταγλωττίσετε τις παρακάτω επιλογές στον πυρήνα του FreeBSD για να ενεργοποιήσετε το IPF. Η παρουσίαση τους εδώ είναι καθαρά ενημερωτική. Αν μεταγλωττίσετε το IPF απευθείας στον πυρήνα, δεν θα χρησιμοποιηθεί ποτέ το αντίστοιχο άρθρωμα.</p></div><div class=paragraph><p>Στο αρχείο <span class=filename>/usr/src/sys/conf/NOTES</span> θα βρείτε παραδείγματα καταχωρίσεων IPF για το αρχείο ρύθμισης του πυρήνα. Οι επιλογές αυτές φαίνονται επίσης παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>options IPFILTER
options IPFILTER_LOG
options IPFILTER_DEFAULT_BLOCK</pre></div></div><div class=paragraph><p>Η επιλογή <code>options IPFILTER</code> ενεργοποιεί την υποστήριξη για το "IPFILTER" firewall.</p></div><div class=paragraph><p>Η επιλογή <code>options IPFILTER_LOG</code> ενεργοποιεί την υποστήριξη καταγραφής του IPF, η οποία γράφει στην ψευδο-συσκευή καταγραφής πακέτων <span class=filename>ipl</span> για κάθε κανόνα που περιλαμβάνει την επιλογή <code>log</code>.</p></div><div class=paragraph><p>Η επιλογή <code>options IPFILTER_DEFAULT_BLOCK</code> αλλάζει την προεπιλεγμένη συμπεριφορά, ώστε κάθε πακέτο που δεν ταιριάζει με κάποιο κανόνα <code>pass</code> του firewall, να απορρίπτεται αυτόματα.</p></div><div class=paragraph><p>Οι παραπάνω επιλογές θα ενεργοποιηθούν μόνο αφού μεταγλωττίσετε και εγκαταστήσετε ένα προσαρμοσμένο πυρήνα που να τις περιλαμβάνει.</p></div></div><div class=sect2><h3 id=_διαθέσιμες_επιλογές_για_το_rc_conf>30.5.3. Διαθέσιμες Επιλογές για το <span class=filename>rc.conf</span><a class=anchor href=#_διαθέσιμες_επιλογές_για_το_rc_conf></a></h3><div class=paragraph><p>Χρειάζεστε τις παρακάτω καταχωρίσεις στο <span class=filename>/etc/rc.conf</span> για να ενεργοποιήσετε το IPF κατά την εκκίνηση του υπολογιστή:</p></div><div class="literalblock programlisting"><div class=content><pre>ipfilter_enable=&#34;YES&#34;             # Start ipf firewall
ipfilter_rules=&#34;/etc/ipf.rules&#34;   # loads rules definition text file
ipmon_enable=&#34;YES&#34;                # Start IP monitor log
ipmon_flags=&#34;-Ds&#34;                 # D = start as daemon
                                  # s = log to syslog
                                  # v = log tcp window, ack, seq
                                  # n = map IP &amp; port to names</pre></div></div><div class=paragraph><p>Αν πίσω από αυτό το firewall υπάρχει κάποιο LAN που χρησιμοποιεί δεσμευμένες ιδιωτικές διευθύνσεις, θα χρειαστεί να προσθέσετε τις παρακάτω καταχωρίσεις για να ενεργοποιήσετε τη λειτουργία NAT:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;              # Enable as LAN gateway
ipnat_enable=&#34;YES&#34;                # Start ipnat function
ipnat_rules=&#34;/etc/ipnat.rules&#34;    # rules definition file for ipnat</pre></div></div></div><div class=sect2><h3 id=_ipf>30.5.4. IPF<a class=anchor href=#_ipf></a></h3><div class=paragraph><p>Η εντολή <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> χρησιμοποιείται για να φορτώσει το αρχείο των κανόνων. Φυσιολογικά, θα δημιουργήσετε ένα αρχείο με τους δικούς σας προσαρμοσμένους κανόνες και θα αντικαταστήσετε με αυτό εξ’ολοκλήρου τους ενσωματωμένους κανόνες του firewall:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipf -Fa -f /etc/ipf.rules</span></code></pre></div></div><div class=paragraph><p>Η επιλογή <code>-Fa</code> αδειάζει τους κανόνες από τους εσωτερικούς πίνακες του firewall.</p></div><div class=paragraph><p>Η επιλογή <code>-f</code> καθορίζει το αρχείο των κανόνων που θα φορτωθεί.</p></div><div class=paragraph><p>Αυτό σας δίνει την δυνατότητα να αλλάξετε το αρχείο κανόνων σας, να εκτελέσετε την εντολή IPF που αναφέραμε παραπάνω, και να ανανεώσετε με αυτό τον τρόπο τους κανόνες στο firewall που εκτελείται ήδη με καινούργιους, χωρίς να χρειαστεί να επανεκκινήσετε το σύστημα σας. Η μέθοδος αυτή είναι πολύ βολική για να δοκιμάσετε νέους κανόνες, καθώς μπορεί να επαναληφθεί όσες φορές θέλετε.</p></div><div class=paragraph><p>Δείτε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> για λεπτομέρειες σχετικά με τις υπόλοιπες επιλογές που μπορείτε να χρησιμοποιήσετε με την εντολή αυτή.</p></div><div class=paragraph><p>Η εντολή <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> αναμένει ένα απλό αρχείο κειμένου ως αρχείο κανόνων. Δεν θα δεχθεί αρχείο κανόνων γραμμένο ως script με συμβολικές αντικαταστάσεις.</p></div><div class=paragraph><p>Υπάρχει ωστόσο τρόπος να γράψετε κανόνες IPF που να χρησιμοποιούν την ισχύ των συμβολικών αντικαταστάσεων. Για περισσότερες πληροφορίες, δείτε το <a href=#firewalls-ipf-rules-script>Δημιουργία Script Κανόνων με Συμβολική Υποκατάσταση</a>.</p></div></div><div class=sect2><h3 id=_ipfstat>30.5.5. IPFSTAT<a class=anchor href=#_ipfstat></a></h3><div class=paragraph><p>Η προεπιλεγμένη συμπεριφορά του <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> είναι να ανακτά και να απεικονίζει το σύνολο των στατιστικών που συγκεντρώθηκαν ως αποτέλεσμα της εφαρμογής των κανόνων του χρήστη στα πακέτα που εισέρχονται και εξέρχονται από το firewall, από τη στιγμή της τελευταίας του εκκίνησης ή από τον τελευταίο τους μηδενισμό μέσω της εντολής <code>ipf -Z</code>.</p></div><div class=paragraph><p>Δείτε τη σελίδα manual <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> για λεπτομέρειες.</p></div><div class=paragraph><p>Η προεπιλεγμένη έξοδος της εντολής <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> θα μοιάζει με την παρακάτω:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>input packets: blocked 99286 passed 1255609 nomatch 14686 counted 0
 output packets: blocked 4200 passed 1284345 nomatch 14687 counted 0
 input packets logged: blocked 99286 passed 0
 output packets logged: blocked 0 passed 0
 packets logged: input 0 output 0
 log failures: input 3898 output 0
 fragment state<span class=o>(</span><span class=k>in</span><span class=o>)</span>: kept 0 lost 0
 fragment state<span class=o>(</span>out<span class=o>)</span>: kept 0 lost 0
 packet state<span class=o>(</span><span class=k>in</span><span class=o>)</span>: kept 169364 lost 0
 packet state<span class=o>(</span>out<span class=o>)</span>: kept 431395 lost 0
 ICMP replies: 0 TCP RSTs sent: 0
 Result cache hits<span class=o>(</span><span class=k>in</span><span class=o>)</span>: 1215208 <span class=o>(</span>out<span class=o>)</span>: 1098963
 IN Pullups succeeded: 2 failed: 0
 OUT Pullups succeeded: 0 failed: 0
 Fastroute successes: 0 failures: 0
 TCP <span class=nb>cksum </span>fails<span class=o>(</span><span class=k>in</span><span class=o>)</span>: 0 <span class=o>(</span>out<span class=o>)</span>: 0
 Packet log flags <span class=nb>set</span>: <span class=o>(</span>0<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Όταν χρησιμοποιηθεί η επιλογή <code>-i</code> για τα εισερχόμενα ή η επιλογή <code>-o</code> για τα εξερχόμενα πακέτα, η εντολή θα ανακτήσει και θα απεικονίσει την αντίστοιχη λίστα κανόνων που είναι εγκατεστημένη και χρησιμοποιείται από τον πυρήνα τη δεδομένη στιγμή.</p></div><div class=paragraph><p>Η εντολή <code>ipfstat -in</code> δείχνει ένα αριθμημένο πίνακα κανόνων για εισερχόμενα πακέτα.</p></div><div class=paragraph><p>Η εντολή <code>ipfstat -on</code> δείχνει ένα αριθμημένο πίνακα κανόνων για εξερχόμενα πακέτα.</p></div><div class=paragraph><p>Η έξοδος θα μοιάζει με την παρακάτω:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>@1 pass out on xl0 from any to any
@2 block out on dc0 from any to any
@3 pass out quick on dc0 proto tcp/udp from any to any keep state</code></pre></div></div><div class=paragraph><p>Η εντολή <code>ipfstat -ih</code> δείχνει τον πίνακα κανόνων για τα εισερχόμενα πακέτα, τοποθετώντας μπροστά από τον κάθε κανόνα ένα αριθμό που δείχνει πόσες φορές έχει χρησιμοποιηθεί.</p></div><div class=paragraph><p>Η εντολή <code>ipfstat -oh</code> δείχνει τον πίνακα κανόνων για τα εξερχόμενα πακέτα, τοποθετώντας μπροστά από τον κάθε κανόνα ένα αριθμό που δείχνει πόσες φορές έχει χρησιμοποιηθεί.</p></div><div class=paragraph><p>Η έξοδος θα μοιάζει με την παρακάτω:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>2451423 pass out on xl0 from any to any
354727 block out on dc0 from any to any
430918 pass out quick on dc0 proto tcp/udp from any to any keep state</code></pre></div></div><div class=paragraph><p>Μια από τις πιο σημαντικές λειτουργίες της εντολής <code>ipfstat</code> είναι η επιλογή <code>-t</code> η οποία απεικονίζει τον πίνακα καταστάσεων, με τρόπο όμοιο με αυτό που χρησιμοποιεί η εντολή <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> για να δείξει τον πίνακα διεργασιών που εκτελούνται στο FreeBSD. Όταν το firewall σας δέχεται επίθεση, η λειτουργία αυτή σας δίνει την δυνατότητα να αναγνωρίσετε και να εστιάσετε στα ίδια τα πακέτα που την αποτελούν. Οι προαιρετικές υπο-επιλογές σας δίνουν την δυνατότητα να επιλέξετε το IP αφετηρίας ή προορισμού, την θύρα, ή το πρωτόκολλο το οποίο θέλετε να παρακολουθήσετε σε πραγματικό χρόνο. Δείτε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> για περισσότερες λεπτομέρειες.</p></div></div><div class=sect2><h3 id=_ipmon>30.5.6. IPMON<a class=anchor href=#_ipmon></a></h3><div class=paragraph><p>Για να λειτουργήσει σωστά η εντολή <code>ipmon</code>, θα πρέπει να ενεργοποιηθεί η επιλογή <code>IPFILTER_LOG</code> στον πυρήνα. Η εντολή αυτή διαθέτει δύο διαφορετικούς τρόπους λειτουργίας. Ο προεπιλεγμένος κανονικός τρόπος λειτουργίας ενεργοποιείται όταν η εντολή χρησιμοποιείται χωρίς την επιλογή <code>-D</code>.</p></div><div class=paragraph><p>Η εντολή μπορεί να χρησιμοποιηθεί σε λειτουργία δαίμονα όταν επιθυμείτε να έχετε ένα συνεχόμενο αρχείο καταγραφής ώστε να μπορείτε να εξετάσετε τις προηγούμενες εγγραφές. Αυτός είναι και ο τρόπος με τον οποίο έχει ρυθμιστεί να συνεργάζεται το FreeBSD με το IPFILTER. Το FreeBSD έχει ενσωματωμένη δυνατότητα εναλλαγής αρχείων καταγραφής. Για αυτό το λόγο, είναι καλύτερο η καταγραφή να γίνεται μέσω του <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> παρά σε ένα συνηθισμένο αρχείο. Από προεπιλογή, η ρύθμιση <code>ipmon_flags</code> στο αρχείο <span class=filename>rc.conf</span> χρησιμοποιεί τις επιλογές <code>-Ds</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>ipmon_flags=&#34;-Ds&#34; # D = start as daemon
                  # s = log to syslog
                  # v = log tcp window, ack, seq
                  # n = map IP &amp; port to names</pre></div></div><div class=paragraph><p>Τα πλεονεκτήματα της καταγραφής είναι προφανή. Παρέχει την δυνατότητα επισκόπησης πληροφοριών όπως τα πακέτα που απορρίφθηκαν, τις διευθύνσεις από τις οποίες λήφθηκαν, και τον προορισμό τους. Έχετε έτσι ένα σημαντικό πλεονέκτημα όταν προσπαθείτε να αναγνωρίσετε ένα εισβολέα.</p></div><div class=paragraph><p>Ακόμα και όταν ενεργοποιήσετε την δυνατότητα καταγραφής, το IPF δεν θα καταγράψει τίποτα αν δεν έχει γίνει η αντίστοιχη ρύθμιση στους κανόνες. Ο διαχειριστής του firewall αποφασίζει για ποιους κανόνες του σετ θέλει να ενεργοποιήσει την καταγραφή, και προσθέτει σε αυτούς την λέξη log. Φυσιολογικά, η καταγραφή ενεργοποιείται μόνο σε κανόνες που απορρίπτουν πακέτα.</p></div><div class=paragraph><p>Είναι πολύ συνηθισμένο να περιλαμβάνεται ένας κανόνας στο τέλος του συνόλου, που να απορρίπτει από προεπιλογή όλα τα πακέτα που φτάνουν μέχρι εκεί (default deny). Με τον τρόπο αυτό μπορείτε να δείτε όλα τα πακέτα που δεν ταίριαξαν με κανένα κανόνα του σετ.</p></div></div><div class=sect2><h3 id=_καταγραφή_του_ipmon>30.5.7. Καταγραφή του IPMON<a class=anchor href=#_καταγραφή_του_ipmon></a></h3><div class=paragraph><p>Το syslogd χρησιμοποιεί τη δική του ειδική μέθοδο για το διαχωρισμό των δεδομένων καταγραφής. Διαθέτει ειδικές ομαδοποιήσεις που ονομάζονται "facility" και "level". Όταν το IPMON χρησιμοποιείται με την επιλογή <code>-Ds</code>, χρησιμοποιεί από προεπιλογή το <code>local0</code> ως όνομα "facility". Αν το επιθυμείτε, μπορείτε να χρησιμοποιήσετε τα παρακάτω επίπεδα για περαιτέρω διαχωρισμό των δεδομένων καταγραφής:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>LOG_INFO - packets logged using the <span class=s2>&#34;log&#34;</span> keyword as the action rather than pass or block.
LOG_NOTICE - packets logged which are also passed
LOG_WARNING - packets logged which are also blocked
LOG_ERR - packets which have been logged and which can be considered short</code></pre></div></div><div class=paragraph><p>Για να ρυθμίσετε το IPFILTER να καταγράφει όλα τα δεδομένα στο <span class=filename>/var/log/ipfilter.log</span>, θα χρειαστεί να δημιουργήσετε από πριν το αρχείο. Αυτό μπορεί να γίνει με την παρακάτω εντολή:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/log/ipfilter.log</span></code></pre></div></div><div class=paragraph><p>Η λειτουργία του <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> μπορεί να ρυθμιστεί με καταχωρίσεις στο αρχείο <span class=filename>/etc/syslog.conf</span>. Το αρχείο <span class=filename>syslog.conf</span> προσφέρει σημαντική ευελιξία στον τρόπο με τον οποίο το syslog αντιμετωπίζει τα μηνύματα συστήματος που προέρχονται από εφαρμογές όπως το IPF.</p></div><div class=paragraph><p>Προσθέστε την παρακάτω καταχώριση στο αρχείο <span class=filename>/etc/syslog.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>local0.* /var/log/ipfilter.log</pre></div></div><div class=paragraph><p>Το <code>local0.*</code> σημαίνει ότι θα γίνεται καταγραφή όλων των μηνυμάτων αυτού του τύπου στην τοποθεσία που έχει οριστεί.</p></div><div class=paragraph><p>Για να ενεργοποιήσετε τις αλλαγές στο <span class=filename>/etc/syslog.conf</span> θα πρέπει να επανεκκινήσετε το μηχάνημα ή να αναγκάσετε το <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> να ξαναδιαβάσει το <span class=filename>/etc/syslog.conf</span>, εκτελώντας την εντολή <code>/etc/rc.d/syslogd reload</code></p></div><div class=paragraph><p>Μην ξεχάσετε να τροποποιήσετε το <span class=filename>/etc/newsyslog.conf</span> ώστε να εναλλάσσει το αρχείο καταγραφής που δημιουργήσατε παραπάνω.</p></div></div><div class=sect2><h3 id=_η_μορφή_των_μηνυμάτων_καταγραφής>30.5.8. Η Μορφή των Μηνυμάτων Καταγραφής<a class=anchor href=#_η_μορφή_των_μηνυμάτων_καταγραφής></a></h3><div class=paragraph><p>Τα μηνύματα που παράγονται από την <code>ipmon</code> αποτελούνται από πεδία δεδομένων που χωρίζονται από λευκό διάστημα. Τα πεδία που είναι κοινά σε όλα τα μηνύματα, είναι τα παρακάτω:</p></div><div class="olist arabic"><ol class=arabic><li><p>Η ημερομηνία παραλαβής του πακέτου</p></li><li><p>Η ώρα παραλαβής του πακέτου. Έχει την μορφή HH:MM:SS.F, η οποία υποδηλώνει ώρες, λεπτά, δευτερόλεπτα και κλάσματα δευτερολέπτου (τα οποία μπορεί να είναι πολλά δεκαδικά ψηφία).</p></li><li><p>Το όνομα της διεπαφής στην οποία έγινε η επεξεργασία του πακέτου π.χ. <span class=filename>dc0</span>.</p></li><li><p>Ο αριθμός ομάδας και ο αύξων αριθμός του κανόνα, π.χ. <code>@0:17</code>.</p></li></ol></div><div class=paragraph><p>Μπορείτε να δείτε τα παρακάτω με την εντολή <code>ipfstat -in</code>:</p></div><div class="olist arabic"><ol class=arabic><li><p>Το είδος της ενέργειας: p αν το πακέτο πέρασε, b αν το πακέτο απορρίφθηκε, S για σύντομο πακέτο, n αν δεν ταίριαξε με κανένα κανόνα, L για κανόνα με καταγραφή. Η σειρά προτεραιότητας στην απεικόνιση των παραπάνω, είναι S, p, b, n, L. Το κεφαλαίο P ή το B σημαίνουν ότι η καταγραφή του πακέτου έγινε λόγω κάποιας γενικής ρύθμισης καταγραφής και όχι εξαιτίας κάποιου κανόνα.</p></li><li><p>Οι διευθύνσεις. Πρόκειται στην πραγματικότητα για τρία πεδία: τη διεύθυνση και τη θύρα αφετηρίας (χωρίζονται με κόμμα), το σύμβολο → και την διεύθυνση και θύρα προορισμού, π.χ. <code>209.53.17.22,80 → 198.73.220.17,1722</code>.</p></li><li><p>Το <code>PR</code> ακολουθούμενο από το όνομα ή τον αριθμό του πρωτοκόλλου, π.χ. <code>PR tcp</code>.</p></li><li><p>Το <code>len</code> ακολουθούμενο από το μήκος της επικεφαλίδας και το συνολικό μήκος του πακέτου, π.χ. <code>len 20 40</code>.</p></li></ol></div><div class=paragraph><p>Αν πρόκειται για πακέτο TCP, θα υπάρχει ένα επιπλέον πεδίο το οποίο θα ξεκινάει με μια παύλα και θα ακολουθείται από γράμματα τα οποία αντιστοιχούν στις επιλογές (flags) που έχουν τεθεί. Δείτε τη σελίδα manual <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=5&amp;format=html">ipf(5)</a> για τη λίστα των γραμμάτων και των αντίστοιχων flags.</p></div><div class=paragraph><p>Αν πρόκειται για πακέτο ICMP, θα υπάρχουν δύο πεδία στο τέλος, το πρώτο θα είναι πάντα "ICMP" και το επόμενο θα είναι ο τύπος του μηνύματος και του υπό-μηνύματος ICMP, χωρισμένα με μια κάθετο, π.χ. ICMP 3/3 για ένα μήνυμα μη προσβάσιμης θύρας (port unreachable).</p></div></div><div class=sect2><h3 id=firewalls-ipf-rules-script>30.5.9. Δημιουργία Script Κανόνων με Συμβολική Υποκατάσταση<a class=anchor href=#firewalls-ipf-rules-script></a></h3><div class=paragraph><p>Ορισμένοι έμπειροι χρήστες του IPF δημιουργούν ένα αρχείο κανόνων το οποίο μπορεί να εκτελεστεί ως script με δυνατότητα συμβολικής υποκατάστασης. Το βασικό όφελος του παραπάνω, είναι ότι χρειάζεται να αλλάξετε μόνο την τιμή που σχετίζεται με το συμβολικό όνομα και όταν το script εκτελεστεί, η τιμή θα υποκατασταθεί σε όλους τους κανόνες που περιέχουν το όνομα αυτό. Καθώς πρόκειται για script, μπορείτε να χρησιμοποιήσετε συμβολική υποκατάσταση για να κωδικοποιήσετε συχνά χρησιμοποιούμενες τιμές και να τις υποκαθιστάτε σε πολλαπλούς κανόνες. Αυτό φαίνεται και στο παράδειγμα που ακολουθεί.</p></div><div class=paragraph><p>Η σύνταξη του script που χρησιμοποιείται εδώ, είναι συμβατή με τα κελύφη <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=csh&amp;sektion=1&amp;format=html">csh(1)</a>, και <a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a>.</p></div><div class=paragraph><p>Τα πεδία στα οποία γίνεται συμβολική υποκατάσταση προσημειώνονται με το σήμα του δολαρίου: <code>$</code>.</p></div><div class=paragraph><p>Τα συμβολικά πεδία δεν έχουν την προσημείωση με το $.</p></div><div class=paragraph><p>Η τιμή που θα χρησιμοποιηθεί στο συμβολικό πεδίο, θα πρέπει να εσωκλείεται σε διπλά εισαγωγικά (<code>"</code>).</p></div><div class=paragraph><p>Ξεκινήστε το αρχείο των κανόνων σας με κάτι αντίστοιχο με το παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>############# Start of IPF rules script ########################

oif=&#34;dc0&#34;            # name of the outbound interface
odns=&#34;192.0.2.11&#34;    # ISP&#39;s DNS server IP address
myip=&#34;192.0.2.7&#34;     # my static IP address from ISP
ks=&#34;keep state&#34;
fks=&#34;flags S keep state&#34;

# You can choose between building /etc/ipf.rules file
# from this script or running this script &#34;as is&#34;.
#
# Uncomment only one line and comment out another.
#
# 1) This can be used for building /etc/ipf.rules:
#cat &gt; /etc/ipf.rules &lt;&lt; EOF
#
# 2) This can be used to run script &#34;as is&#34;:
/sbin/ipf -Fa -f - &lt;&lt; EOF

# Allow out access to my ISP&#39;s Domain name server.
pass out quick on $oif proto tcp from any to $odns port = 53 $fks
pass out quick on $oif proto udp from any to $odns port = 53 $ks

# Allow out non-secure standard www function
pass out quick on $oif proto tcp from $myip to any port = 80 $fks

# Allow out secure www function https over TLS SSL
pass out quick on $oif proto tcp from $myip to any port = 443 $fks
EOF
################## End of IPF rules script ########################</pre></div></div><div class=paragraph><p>Αυτό είναι όλο. Στο παραπάνω παράδειγμα δεν είναι σημαντικοί οι κανόνες, αλλά ο τρόπος με τον οποίο λειτουργούν και παίρνουν τιμές τα πεδία υποκατάστασης. Αν το παραπάνω παράδειγμα βρίσκονταν σε ένα αρχείο με το όνομα <span class=filename>/etc/ipf.rules.script</span>, θα μπορούσατε να επαναφορτώσετε αυτούς τους κανόνες με την παρακάτω εντολή:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh /etc/ipf.rules.script</span></code></pre></div></div><div class=paragraph><p>Υπάρχει ένα πρόβλημα όταν χρησιμοποιούνται αρχεία κανόνων με ενσωματωμένους συμβολισμούς: Το IPF δεν καταλαβαίνει τη συμβολική υποκατάσταση, και δεν μπορεί να διαβάσει αυτά τα scripts άμεσα.</p></div><div class=paragraph><p>Ένα τέτοιο script μπορεί να χρησιμοποιηθεί με ένα από τους δύο παρακάτω τρόπους:</p></div><div class=ulist><ul><li><p>Αφαιρέστε το σχόλιο από τη γραμμή που ξεκινάει με <code>cat</code>, και μετατρέψτε σε σχόλιο τη γραμμή που ξεκινάει με <code>/sbin/ipf</code>. Τοποθετήστε το <code>ipfilter_enable="YES"</code> στο αρχείο <span class=filename>/etc/rc.conf</span> όπως συνήθως, και εκτελέστε το script μια φορά μετά από κάθε αλλαγή για να δημιουργήσετε ή να ενημερώσετε το <span class=filename>/etc/ipf.rules</span>.</p></li><li><p>Απενεργοποιήστε το IPFILTER στα scripts εκκίνησης του συστήματος, προσθέτοντας την καταχώριση <code>ipfilter_enable="NO"</code> (πρόκειται για την προεπιλεγμένη τιμή) στο αρχείο <span class=filename>/etc/rc.conf</span>.</p><div class=paragraph><p>Προσθέστε ένα script όπως το παρακάτω στον κατάλογο εκκίνησης <span class=filename>/usr/local/etc/rc.d/</span>. Το script θα πρέπει να έχει ένα προφανές όνομα, όπως <span class=filename>ipf.loadrules.sh</span>. Η επέκταση <span class=filename>.sh</span> είναι υποχρεωτική.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
sh /etc/ipf.rules.script</pre></div></div><div class=paragraph><p>Οι άδειες σε αυτό το αρχείο, θα πρέπει να επιτρέπουν ανάγνωση, εγγραφή και εκτέλεση για τον χρήστη <code>root</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 700 /usr/local/etc/rc.d/ipf.loadrules.sh</span></code></pre></div></div></li></ul></div><div class=paragraph><p>Οι κανόνες του IPF θα φορτώνονται πλέον κατά την εκκίνηση του συστήματος σας.</p></div></div><div class=sect2><h3 id=_το_σύνολο_κανόνων_του_ipf>30.5.10. Το Σύνολο Κανόνων του IPF<a class=anchor href=#_το_σύνολο_κανόνων_του_ipf></a></h3><div class=paragraph><p>Ως "σύνολο κανόνων" στο IPF, ορίζουμε μια ομάδα κανόνων που έχουν γραφεί για να επιτρέπουν ή να απορρίπτουν πακέτα ανάλογα με τις τιμές που περιέχονται σε αυτά. Η διπλής κατεύθυνσης ανταλλαγή πακέτων μεταξύ υπολογιστών αποτελεί μια συνεδρία. Το σύνολο κανόνων του firewall επεξεργάζεται τόσο τα πακέτα που έρχονται από το Internet, όσο και τα πακέτα που παράγονται από το σύστημα ως απάντηση σε αυτά. Κάθε υπηρεσία TCP/IP (π.χ. telnet, www, mail, κ.λ.π.) καθορίζεται από το πρωτόκολλο και την προνομιακή (privileged) θύρα που χρησιμοποιεί για να δέχεται αιτήματα εξυπηρέτησης. Τα πακέτα που προορίζονται για μια συγκεκριμένη υπηρεσία, ξεκινούν από τη διεύθυνση αφετηρίας χρησιμοποιώντας μια μη-προνομιακή θύρα και καταλήγουν στη συγκεκριμένη θύρα υπηρεσίας στον προορισμό. Όλες οι παραπάνω παράμετροι (θύρες και διευθύνσεις) μπορούν να χρησιμοποιηθούν ως κριτήρια επιλογής για την δημιουργία κανόνων που επιτρέπουν ή εμποδίζουν την πρόσβαση σε υπηρεσίες.</p></div><div class=paragraph><p>Το IPF γράφτηκε αρχικά χρησιμοποιώντας μια λογική επεξεργασίας κανόνων του τύπου "ο τελευταίος κανόνας που ταιριάζει, είναι ο νικητής" και χρησιμοποιούσε μόνο κανόνες stateless. Με την πάροδο του χρόνου, το IPF ενισχύθηκε με την επιλογή "quick" και με δυνατότητα αποθήκευσης κατάστασης μέσω της επιλογής "keep state". Με τον τρόπο αυτό, εκσυγχρονίστηκε δραματικά η λογική επεξεργασίας των κανόνων.</p></div><div class=paragraph><p>Οι οδηγίες που περιέχονται σε αυτή την ενότητα βασίζονται στη χρήση κανόνων που περιέχουν την επιλογή "quick" και την επιλογή "keep state" για τη διατήρηση της κατάστασης. Αυτές είναι και οι βασικές λειτουργίες για την κωδικοποίηση του συνόλου κανόνων ενός inclusive firewall.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Όταν δουλεύετε με τους κανόνες του firewall, θα πρέπει να είστε <em>πολύ προσεκτικοί</em>. Αν βάλετε λανθασμένες ρυθμίσεις, μπορεί να <em>κλειδωθείτε έξω</em> από τον εξυπηρετητή σας. Για να είστε ασφαλείς, είναι προτιμότερο να κάνετε τις αρχικές σας ρυθμίσεις από την τοπική κονσόλα, παρά μέσω απομακρυσμένης σύνδεσης (π.χ. μέσω ssh).</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_συντακτικό_κανόνων>30.5.11. Συντακτικό Κανόνων<a class=anchor href=#_συντακτικό_κανόνων></a></h3><div class=paragraph><p>Το συντακτικό των κανόνων που παρουσιάζουμε εδώ, έχει απλοποιηθεί ώστε να απεικονίζει τη σύγχρονη stateful υλοποίηση και τη λογική του τύπου "ο πρώτος κανόνας που ταιριάζει είναι και ο νικητής". Για την περιγραφή του παλιότερου τρόπου λειτουργίας, διαβάστε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a>.</p></div><div class=paragraph><p>Ο χαρακτήρας <code>#</code> χρησιμοποιείται για να επισημάνει την αρχή ενός σχολίου, και μπορεί να εμφανίζεται στο τέλος μιας γραμμής κανόνα ή στη δική του γραμμή. Οι κενές γραμμές αγνοούνται.</p></div><div class=paragraph><p>Οι κανόνες περιέχουν λέξεις-κλειδιά. Οι λέξεις αυτές θα πρέπει να κωδικοποιηθούν με συγκεκριμένη σειρά από τα αριστερά προς τα δεξιά της γραμμής. Οι λέξεις-κλειδιά φαίνονται παρακάτω με έντονα γράμματα. Μερικές λέξεις έχουν υπο-επιλογές οι οποίες μπορεί να είναι επίσης λέξεις-κλειδιά και να περιλαμβάνουν επίσης περισσότερες υπο-επιλογές. Κάθε μια από τις επικεφαλίδες στο παράδειγμα που φαίνεται παρακάτω έχει μια κεφαλίδα με έντονα γράμματα η οποία επεξηγεί το περιεχόμενο της.</p></div><div class=paragraph><p><code><em>ACTION IN-OUT OPTIONS SELECTION STATEFUL PROTO SRC_ADDR,DST_ADDR OBJECT PORT_NUM TCP_FLAG STATEFUL</em></code></p></div><div class=paragraph><p><code><em>ACTION</em></code> = block | pass</p></div><div class=paragraph><p><code><em>IN-OUT</em></code> = in | out</p></div><div class=paragraph><p><code><em>OPTIONS</em></code> = log | quick | on interface-name</p></div><div class=paragraph><p><code><em>SELECTION</em></code> = proto value | source/destination IP | port = number | flags flag-value</p></div><div class=paragraph><p><code><em>PROTO</em></code> = tcp/udp | udp | tcp | icmp</p></div><div class=paragraph><p><code><em>SRC_ADD,DST_ADDR</em></code> = all | from object to object</p></div><div class=paragraph><p><code><em>OBJECT</em></code> = IP address | any</p></div><div class=paragraph><p><code><em>PORT_NUM</em></code> = port number</p></div><div class=paragraph><p><code><em>TCP_FLAG</em></code> = S</p></div><div class=paragraph><p><code><em>STATEFUL</em></code> = keep state</p></div><div class=sect3><h4 id=_action>30.5.11.1. ACTION<a class=anchor href=#_action></a></h4><div class=paragraph><p>Η ενέργεια (action) δείχνει τι πρέπει να γίνει με το πακέτο αν ταιριάζει με τον κανόνα του φίλτρου. Κάθε κανόνας <em>πρέπει</em> να διαθέτει μια ενέργεια. Οι ενέργειες που αναγνωρίζονται, φαίνονται παρακάτω:</p></div><div class=paragraph><p>Το <code>block</code> δείχνει ότι το πακέτο θα πρέπει να απορριφθεί αν ταιριάζει με τις παραμέτρους επιλογής του κανόνα.</p></div><div class=paragraph><p>Το <code>pass</code> δείχνει ότι το πακέτο θα πρέπει να εξέλθει από το firewall, αν ταιριάζει με τις παραμέτρους επιλογής του κανόνα.</p></div></div><div class=sect3><h4 id=_in_out>30.5.11.2. IN-OUT<a class=anchor href=#_in_out></a></h4><div class=paragraph><p>Κάθε κανόνας του φίλτρου πρέπει υποχρεωτικά να διευκρινίζει με σαφήνεια αν αναφέρεται στην είσοδο ή την έξοδο πακέτων. Η επόμενη λέξη-κλειδί πρέπει να είναι <code>in</code> ή <code>out</code> και αν δεν υπάρχει, ο κανόνας θα αποτύχει κατά το συντακτικό έλεγχο.</p></div><div class=paragraph><p>Το <code>in</code> σημαίνει ότι ο κανόνας θα εφαρμοστεί σε ένα εισερχόμενο πακέτο το οποίο μόλις λήφθηκε στη διεπαφή που συνδέεται με το Διαδίκτυο.</p></div><div class=paragraph><p>Το <code>out</code> σημαίνει ότι ο κανόνας θα εφαρμοστεί σε ένα πακέτο που προορίζεται για έξοδο μέσω της διεπαφής που συνδέεται με το Διαδίκτυο.</p></div></div><div class=sect3><h4 id=_options>30.5.11.3. OPTIONS<a class=anchor href=#_options></a></h4><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Οι παρακάτω επιλογές πρέπει να χρησιμοποιηθούν με τη σειρά που φαίνονται εδώ.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Το <code>log</code> δείχνει ότι η επικεφαλίδα του πακέτου θα γραφεί στο αρχείο καταγραφής του <span class=filename>ipl</span> (όπως περιγράφεται στην ενότητα LOGGING που ακολουθεί) αν οι παράμετροι της επιλογής ταιριάζουν με το πακέτο.</p></div><div class=paragraph><p>To <code>quick</code> δείχνει ότι αν οι παράμετροι της επιλογής ταιριάζουν με το πακέτο, ο συγκεκριμένος κανόνας θα είναι και ο τελευταίος κανόνας που θα ελεγχθεί. Η επιλογή αυτή είναι υποχρεωτική για τη σύγχρονη λογική επεξεργασίας πακέτων.</p></div><div class=paragraph><p>Το <code>on</code> δείχνει το όνομα της διεπαφής που θα ενσωματωθεί στις παραμέτρους επιλογής. Τα ονόματα των διεπαφών φαίνονται όταν εκτελείται η εντολή <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a>. Χρησιμοποιώντας την επιλογή αυτή, ο κανόνας θα ελεγχθεί μόνο αν το πακέτο διέρχεται μέσω της συγκεκριμένης διεπαφής και προς τη συγκεκριμένη κατεύθυνση (εισερχόμενα/εξερχόμενα). Η επιλογή αυτή είναι υποχρεωτική για την σύγχρονη λογική επεξεργασίας των κανόνων.</p></div><div class=paragraph><p>Όταν γίνεται καταγραφή ενός πακέτου, οι επικεφαλίδες γράφονται στην ψευδο-συσκευή καταγραφής πακέτων IPL. Μετά την εντολή <code>log</code>, μπορούν να χρησιμοποιηθούν οι παρακάτω παράμετροι (με τη σειρά που φαίνονται):</p></div><div class=paragraph><p>Το <code>body</code> δείχνει ότι θα γίνει καταγραφή των πρώτων 128 bytes των περιεχομένων του πακέτου, που βρίσκονται αμέσως μετά την επικεφαλίδα.</p></div><div class=paragraph><p>Η επιλογή <code>first</code> συνίσταται να χρησιμοποιηθεί αν η επιλογή <code>log</code> χρησιμοποιείται σε συνδυασμό με την <code>keep state</code>. Με τον τρόπο αυτό γίνεται καταγραφή μόνο του πρώτου πακέτου (με το οποίο ξεκίνησε η επικοινωνία), και όχι όλων των υπολοίπων τα οποία ταιριάζουν με την πληροφορία "keep state".</p></div></div><div class=sect3><h4 id=_selection>30.5.11.4. SELECTION<a class=anchor href=#_selection></a></h4><div class=paragraph><p>Οι λέξεις κλειδιά που περιγράφονται σε αυτή την ενότητα, χρησιμοποιούνται για να περιγράψουν ποιες ιδιότητες του πακέτου θα διερευνηθούν για να καθοριστεί αν ταιριάζει ή όχι με τους κανόνες. Μια λέξη-κλειδί ορίζει το κεντρικό θέμα και ακολουθείται από άλλες λέξεις που ορίζουν τις ακριβείς επιλογές. Πρέπει πάντοτε να επιλέγεται μια από αυτές τις λέξεις. Παρέχονται οι παρακάτω ιδιότητες γενικής χρήσης οι οποίες πρέπει να χρησιμοποιηθούν με αυτή τη σειρά:</p></div></div><div class=sect3><h4 id=_proto>30.5.11.5. PROTO<a class=anchor href=#_proto></a></h4><div class=paragraph><p>Το <code>proto</code> είναι η βασική λέξη, και πρέπει να γράφεται μαζί με κάποια αντίστοιχη τιμή για περαιτέρω επιλογή. Η τιμή επιτρέπει το ταίριασμα με ένα συγκεκριμένο πρωτόκολλο. Είναι υποχρεωτικό να χρησιμοποιηθεί για να λειτουργεί η σύγχρονη λογική επεξεργασίας των κανόνων.</p></div><div class=paragraph><p>Τα ονόματα πρωτοκόλλων που αναγνωρίζονται και μπορούν να χρησιμοποιηθούν, είναι τα <code>tcp/udp | udp | tcp | icmp</code> ή οποιαδήποτε άλλα εμφανίζονται στο <span class=filename>/etc/protocols</span>. Μπορείτε να χρησιμοποιήσετε το ειδικό όνομα <code>tcp/udp</code> το οποίο ταιριάζει είτε με πακέτο TCP είτε με UDP. Η ειδική αυτή ονομασία προστέθηκε ώστε να αποφεύγονται διπλοί, αλλά κατά τα άλλα όμοιοι, κανόνες.</p></div></div><div class=sect3><h4 id=_src_addrdst_addr>30.5.11.6. SRC_ADDR/DST_ADDR<a class=anchor href=#_src_addrdst_addr></a></h4><div class=paragraph><p>Η λέξη <code>all</code> είναι ουσιαστικά συνώνυμη με την φράση "from any to any" χωρίς να υπάρχουν άλλες παράμετροι για το ταίριασμα.</p></div><div class=paragraph><p>Όταν χρησιμοποιείται το <code>from src to dst</code>, οι λέξεις <code>from</code> και <code>to</code> δηλώνουν διευθύνσεις IP που θα χρησιμοποιηθούν για το ταίριασμα. Οι κανόνες πρέπει να καθορίζουν τις παραμέτρους τόσο της αφετηρίας όσο και του προορισμού. Η λέξη <code>any</code> έχει την ειδική ιδιότητα να ταιριάζει με οποιαδήποτε διεύθυνση IP. Παραδείγματα χρήσης: <code>from any to any</code> ή <code>from 0.0.0.0/0 to any</code> ή <code>from any to 0.0.0.0/0</code> ή <code>from 0.0.0.0 to any</code> ή <code>from any to 0.0.0.0</code>.</p></div><div class=paragraph><p>Δεν υπάρχει τρόπος να περιγραφούν περιοχές IP διευθύνσεων που δεν μπορούν να εκφραστούν εύκολα με τη μορφή αριθμών χωρισμένων με τελείες / μάσκας υποδικτύου. Μπορείτε να χρησιμοποιήσετε το βοηθητικό πρόγραμμα <a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/ipcalc/>net-mgmt/ipcalc</a> για διευκόλυνση σας στους υπολογισμούς. Δείτε την δικτυακή τοποθεσία του προγράμματος για περισσότερες πληροφορίες: <a href=http://jodies.de/ipcalc>http://jodies.de/ipcalc</a>.</p></div></div><div class=sect3><h4 id=_port>30.5.11.7. PORT<a class=anchor href=#_port></a></h4><div class=paragraph><p>Το ταίριασμα με κάποια συγκεκριμένη θύρα αφετηρίας ή/και προορισμού (αν υπάρχει) εφαρμόζεται μόνο σε πακέτα TCP και UDP. Κατά την δημιουργία συγκρίσεων με θύρες, μπορείτε είτε να χρησιμοποιήσετε τον αριθμό της θύρας, είτε το όνομα της αντίστοιχης υπηρεσίας από το αρχείο <span class=filename>/etc/services</span>. Όταν η θύρα εμφανίζεται ως τμήμα του αντικειμένου <code>from</code>, το ταίριασμα θα γίνει με την θύρα της αφετηρίας. Όταν εμφανίζεται ως τμήμα του αντικειμένου <code>to</code>, το ταίριασμα θα γίνει με τη θύρα προορισμού. Για να λειτουργεί η σύγχρονη λογική ταιριάσματος κανόνων, θα πρέπει οπωσδήποτε να υπάρχει η επιλογή θύρας στο αντικείμενο <code>to</code>. Παράδειγμα χρήσης: <code>from any to any port = 80</code></p></div><div class=paragraph><p>Οι συγκρίσεις που αναφέρονται σε μια μόνο θύρα, μπορούν να γίνουν με πολλούς διαφορετικούς τρόπους, χρησιμοποιώντας διαφορετικούς τελεστές σύγκρισης. Είναι επίσης δυνατόν να καθοριστούν ολόκληρες περιοχές από θύρες.</p></div><div class=paragraph><p>port "=" | "!=" | "&lt;" | ">" | "⇐" | ">=" | "eq" | "ne" | "lt" | "gt" | "le" | "ge".</p></div><div class=paragraph><p>Για να καθορίσετε περιοχές θυρών, χρησιμοποιήστε port "&lt;>" | ">&lt;"</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Μετά τις παραμέτρους για το ταίριασμα της αφετηρίας και του προορισμού, οι παρακάτω δύο παράμετροι είναι υποχρεωτικές για να λειτουργεί η σύγχρονη λογική επεξεργασίας των κανόνων.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_tcp_flag>30.5.11.8. TCP_FLAG<a class=anchor href=#_tcp_flag></a></h4><div class=paragraph><p>Τα flags είναι ενεργά μόνο στο φιλτράρισμα του πρωτοκόλλου TCP. Το κάθε γράμμα αντιπροσωπεύει ένα πιθανό flag το για το οποίο γίνεται ανίχνευση στην επικεφαλίδα του πακέτου TCP.</p></div><div class=paragraph><p>Η σύγχρονη λογική επεξεργασίας των κανόνων, χρησιμοποιεί την παράμετρο <code>flags S</code> για την αναγνώριση της έναρξης μια συνεδρίας tcp.</p></div></div><div class=sect3><h4 id=_stateful>30.5.11.9. STATEFUL<a class=anchor href=#_stateful></a></h4><div class=paragraph><p>Σε ένα κανόνα που επιτρέπει (pass) το πέρασμα των πακέτων, η επιλογή <code>keep state</code> δείχνει ότι θα πρέπει να ενεργοποιείται η λειτουργία stateful filtering όταν το πακέτο ταιριάζει με τα κριτήρια επιλογής.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Η επιλογή αυτή είναι υποχρεωτική για τη λειτουργία της σύγχρονης λογικής επεξεργασίας κανόνων.</p></div></td></tr></tbody></table></div></div></div><div class=sect2><h3 id=_φιλτράρισμα_με_διατήρηση_της_κατάστασης_stateful>30.5.12. Φιλτράρισμα με Διατήρηση της Κατάστασης (stateful)<a class=anchor href=#_φιλτράρισμα_με_διατήρηση_της_κατάστασης_stateful></a></h3><div class=paragraph><p>Το stateful φιλτράρισμα, αντιμετωπίζει την κίνηση του δικτύου ως μιας διπλής κατεύθυνσης ανταλλαγή πακέτων τα οποία δημιουργούν μια συνεδρία. Όταν ενεργοποιηθεί, η διατήρηση της κατάστασης (keep-state) δημιουργεί δυναμικά εσωτερικούς κανόνες για κάθε πακέτο το οποίο ανταλλάσσεται κατά τη διάρκεια αυτής της συνεδρίας. Έχει επίσης τη δυνατότητα να διερευνήσει αν ακολουθούνται οι έγκυροι κανόνες ανταλλαγής μηνυμάτων μεταξύ του αποστολέα και του παραλήπτη. Οποιαδήποτε πακέτα δεν ταιριάζουν με το πρότυπο αυτής της επικοινωνίας, απορρίπτονται ως ψεύτικα.</p></div><div class=paragraph><p>Η διατήρηση της κατάστασης επιτρέπει επίσης να περάσουν τα πακέτα ICMP που σχετίζονται με μια συνεδρία TCP ή UDP. Έτσι, αν ληφθούν πακέτα ICMP τύπου 3 code 4 ως απάντηση κατά τη διάρκεια της επίσκεψης σας σε μια ιστοσελίδα, (η οποία επιτρέπεται από τον αντίστοιχο κανόνα εξερχομένων), θα τους επιτραπεί η είσοδος. Οποιοδήποτε πακέτο για το οποίο το IPF είναι σίγουρο ότι πρόκειται για τμήμα μιας ενεργής συνεδρίας, θα περάσει ακόμα και αν είναι διαφορετικό πρωτόκολλο.</p></div><div class=paragraph><p>Αυτό που συμβαίνει είναι το παρακάτω:</p></div><div class=paragraph><p>Τα πακέτα που προορίζονται να εξέλθουν μέσω της διεπαφής που συνδέεται στο Internet, ελέγχονται αρχικά σύμφωνα με το δυναμικό πίνακα καταστάσεων. Αν το πακέτο ταιριάζει με το επόμενο που αναμένεται σε μια ενεργή συνεδρία, εξέρχεται από το firewall και ταυτόχρονα ενημερώνεται η κατάσταση της συγκεκριμένης συνεδρίας στον παραπάνω δυναμικό πίνακα. Τα υπόλοιπα πακέτα (που δεν ταιριάζουν με κάποια συνεδρία σε εξέλιξη) ελέγχονται σύμφωνα με το σύνολο κανόνων για τα εξερχόμενα πακέτα.</p></div><div class=paragraph><p>Τα πακέτα που έρχονται από τη διεπαφή που είναι συνδεμένη με το Internet, ελέγχονται αρχικά μέσω του δυναμικού πίνακα καταστάσεων. Αν το πακέτο ταιριάζει με το επόμενο που αναμένεται σε μια ενεργή συνεδρία, εξέρχεται από το firewall και ταυτόχρονα ενημερώνεται η κατάσταση της συγκεκριμένης συνεδρίας στον παραπάνω πίνακα. Τα υπόλοιπα πακέτα (που δεν ταιριάζουν με κάποια συνεδρία σε εξέλιξη) ελέγχονται σύμφωνα με το σύνολο κανόνων για τα εισερχόμενα πακέτα.</p></div><div class=paragraph><p>Όταν η επικοινωνία ολοκληρωθεί, διαγράφεται από τον δυναμικό πίνακα καταστάσεων.</p></div><div class=paragraph><p>Το stateful φιλτράρισμα επιτρέπει να εστιάσουμε την προσοχή μας στην αποδοχή ή απόρριψη των νέων συνδέσεων. Αν επιτραπεί μια νέα συνεδρία, όλα τα υπόλοιπα πακέτα της θα επιτρέπονται αυτόματα, ενώ τυχόν ψεύτικα πακέτα θα απορρίπτονται επίσης αυτόματα. Το stateful φιλτράρισμα διαθέτει μια σειρά από προχωρημένες ικανότητες διερεύνησης των πακέτων, με δυνατότητα να αμύνεται σε πολλές διαφορετικές μεθόδους που χρησιμοποιούν οι επιτιθέμενοι.</p></div></div><div class=sect2><h3 id=_παράδειγμα_συνόλου_κανόνων_για_ένα_inclusive_firewall>30.5.13. Παράδειγμα Συνόλου Κανόνων για ένα Inclusive Firewall<a class=anchor href=#_παράδειγμα_συνόλου_κανόνων_για_ένα_inclusive_firewall></a></h3><div class=paragraph><p>Το παρακάτω σύνολο κανόνων δίνεται ως παράδειγμα για να φτιάξετε ένα ιδιαίτερα ασφαλές inclusive firewall. Ένα inclusive firewall επιτρέπει το πέρασμα μόνο των υπηρεσιών που ταιριάζουν με τους κανόνες που έχει για αποδοχή πακέτων, και απορρίπτει όλα τα υπόλοιπα. Τα firewalls που προστατεύουν άλλα μηχανήματα (τα οποία καλούνται και "network firewalls") θα πρέπει να διαθέτουν τουλάχιστον δύο διεπαφές. Η μια διεπαφή συνδέεται με το τοπικό δίκτυο (LAN) το οποίο θεωρείται έμπιστο, και η άλλη με το δημόσιο Internet. Εναλλακτικά, ένα firewall μπορεί να προστατεύει μόνο το σύστημα στο οποίο εκτελείται-αυτό καλείται "host based firewall" και είναι κατάλληλο ιδιαίτερα για εξυπηρετητές που λειτουργούν σε μη έμπιστα δίκτυα.</p></div><div class=paragraph><p>Όλα τα συστήματα τύπου UNIX®, συμπεριλαμβανομένου και του FreeBSD, έχουν σχεδιαστεί να χρησιμοποιούν την διεπαφή <span class=filename>lo0</span> και την IP διεύθυνση <code>127.0.0.1</code> για εσωτερική επικοινωνία μέσα στο ίδιο το λειτουργικό σύστημα. Το firewall πρέπει να περιέχει κανόνες που να επιτρέπουν την ελεύθερη και χωρίς περιορισμούς κίνηση των ειδικών αυτών εσωτερικών πακέτων.</p></div><div class=paragraph><p>Οι κανόνες που εξουσιοδοτούν την πρόσβαση προς το Internet, ορίζονται στην διεπαφή του δικτύου που συνδέεται σε αυτό. Οι κανόνες αυτοί ελέγχουν τόσο την εισερχόμενη όσο και την εξερχόμενη κίνηση στο Internet. Η διεπαφή αυτή μπορεί να είναι η <span class=filename>tun0</span> που χρησιμοποιείται στο PPP χρήστη, ή ακόμα και η κάρτα δικτύου που συνδέεται σε ένα DSL router ή modem.</p></div><div class=paragraph><p>Σε περίπτωση που μια ή περισσότερες κάρτες δικτύου συνδέονται σε εσωτερικά ιδιωτικά δίκτυα πίσω από το firewall, θα πρέπει να υπάρχουν οι αντίστοιχοι κανόνες που να επιτρέπουν την ελεύθερη διακίνηση των πακέτων ανάμεσα στις διεπαφές αυτές ή/και στο Internet.</p></div><div class=paragraph><p>Οι κανόνες πρέπει να οργανώνονται σε τρεις κύριες ενότητες: αρχικά όλες οι διεπαφές στις οποίες επιτρέπεται η ελεύθερη διακίνηση δεδομένων, έπειτα η διεπαφή από την οποία εξέρχονται τα πακέτα προς το δημόσιο δίκτυο (Internet) και τέλος η διεπαφή από την οποία λαμβάνονται πακέτα από το Internet.</p></div><div class=paragraph><p>Σε κάθε μια από τις ενότητες των διεπαφών που συνδέονται στο Internet, πρέπει να τοποθετούνται πρώτοι οι κανόνες που ταιριάζουν συχνότερα με την αντίστοιχη κίνηση. Ο τελευταίος κανόνας της ενότητας θα πρέπει να απορρίπτει και να καταγράφει όλα τα πακέτα της συγκεκριμένης διεπαφής/κατεύθυνσης.</p></div><div class=paragraph><p>Η ενότητα των Εξερχομένων (Outbound) στο ακόλουθο σύνολο κανόνων, περιέχει μόνο κανόνες τύπου <code>pass</code> οι οποίοι επιτρέπουν (μέσω κατάλληλων τιμών στις παραμέτρους τους) σε συγκεκριμένες υπηρεσίες να αποκτήσουν πρόσβαση στο Internet. Όλοι οι κανόνες διαθέτουν τις επιλογές <code>quick</code>, <code>on</code>, <code>proto</code>, <code>port</code> και <code>keep state</code>. Οι κανόνες <code>proto tcp</code> περιλαμβάνουν την επιλογή <code>flag</code> ώστε να αναγνωρίζουν την αίτηση έναρξης της συνεδρίας και να ενεργοποιούν τη λειτουργία διατήρησης της κατάστασης (stateful).</p></div><div class=paragraph><p>Στην ενότητα των εισερχόμενων πακέτων (Inbound) που φαίνεται παρακάτω, πρώτοι εμφανίζονται οι κανόνες που χρησιμοποιούνται για την απόρριψη των ανεπιθύμητων πακέτων. Αυτό γίνεται για δύο διαφορετικούς λόγους. Ο πρώτος είναι ότι τα κακόβουλα πακέτα μπορεί εν μέρει να ταιριάζουν με κάποια χαρακτηριστικά της έγκυρης κίνησης. Τα πακέτα αυτά θα πρέπει να απορριφθούν, αντί να γίνουν δεκτά από κάποιο επόμενο κανόνα <code>allow</code>. Ο δεύτερος είναι ότι μπορείτε να απορρίψετε συγκεκριμένα πακέτα τα οποία γνωρίζετε ότι δεν είναι έγκυρα, αλλά σας είναι αδιάφορη η καταγραφή τους. Με τον τρόπο αυτό εμποδίζεται η λήψη και καταγραφή τους από τον τελευταίο κανόνα. Ο τελευταίος κανόνας τυπικά απορρίπτει και καταγράφει όλα τα πακέτα που έφτασαν μέχρι αυτόν. Ο κανόνας αυτός χρησιμοποιείται για την παροχή νομικών αποδείξεων σε περίπτωση που κινήσετε δικαστική διαδικασία κατά ατόμων που προέβησαν σε επιθέσεις στο σύστημα σας.</p></div><div class=paragraph><p>Θα πρέπει επίσης να εξασφαλίσετε ότι το σύστημα σας δεν θα δώσει καμιά απάντηση σε κανένα από τα ανεπιθύμητα πακέτα. Τα πακέτα αυτά θα πρέπει να απορριφθούν και να εξαφανιστούν. Με τον τρόπο αυτό, ο επιτιθέμενος δεν έχει καμιά γνώση αν τα πακέτα του έφτασαν μέχρι το σύστημα σας. Όσο λιγότερα μπορούν να μάθουν οι επιτιθέμενοι σχετικά με το σύστημα σας, τόσο περισσότερο χρόνο θα χρειαστεί να επενδύσουν για να καταφέρουν να σας βλάψουν στα αλήθεια. Οι κανόνες με την επιλογή <code>log first</code> καταγράφουν το συμβάν μόνο την πρώτη φορά που ενεργοποιούνται. Η επιλογή αυτή περιλαμβάνεται στον κανόνα <code>nmap OS fingerprint</code> στο παράδειγμα που φαίνεται παρακάτω. Το βοηθητικό πρόγραμμα <a class=package href=https://cgit.freebsd.org/ports/tree/security/nmap/>security/nmap</a> χρησιμοποιείται συχνά από κακόβουλα άτομα, που προσπαθούν με αυτό τον τρόπο να αναγνωρίσουν το λειτουργικό σύστημα του μηχανήματος σας.</p></div><div class=paragraph><p>Κάθε φορά που υπάρχει καταγραφή από κάποιο κανόνα με την επιλογή <code>log first</code>, θα πρέπει να εκτελέσετε την εντολή <code>ipfstat -hio</code> για να δείτε πόσες φορές έχει ενεργοποιηθεί αυτός ο κανόνας συνολικά. Έτσι θα ξέρετε αν π.χ. σας κάνουν επίθεση υπερχείλισης (flood).</p></div><div class=paragraph><p>Δείτε το αρχείο <span class=filename>/etc/services</span> για να βρείτε αριθμούς θυρών που δεν αναγνωρίζετε. Μπορείτε επίσης να επισκεφθείτε την τοποθεσία <a href=http://www.securitystats.com/tools/portsearch.php>http://www.securitystats.com/tools/portsearch.php</a> και να κάνετε αναζήτηση για τη συγκεκριμένη θύρα, ώστε να δείτε ποια υπηρεσία εξυπηρετεί.</p></div><div class=paragraph><p>Δείτε την επόμενη τοποθεσία για τις θύρες που χρησιμοποιούνται συνήθως από κακόβουλα προγράμματα (trojans): <a href=http://www.simovits.com/trojans/trojans.html>http://www.simovits.com/trojans/trojans.html</a>.</p></div><div class=paragraph><p>Το παρακάτω σύνολο κανόνων είναι αρκετά πλήρες και πολύ ασφαλές. Δημιουργεί firewall τύπου <code>inclusive</code>, και έχει δοκιμαστεί σε πραγματικές συνθήκες λειτουργίας. Μπορεί να εξυπηρετήσει το ίδιο καλά και το δικό σας σύστημα. Απλώς μετατρέψτε σε σχόλιο τους κανόνες για τις υπηρεσίες που δεν θέλετε να ενεργοποιήσετε.</p></div><div class=paragraph><p>Για να αποφύγετε την καταγραφή ανεπιθύμητων μηνυμάτων, απλώς προσθέστε ένα αντίστοιχο κανόνα απόρριψης (<code>block</code>) στην ενότητα των εισερχομένων (inbound).</p></div><div class=paragraph><p>Θα πρέπει να αλλάξετε το όνομα της διεπαφής <span class=filename>dc0</span> του παραδείγματος, με το πραγματικό όνομα της κάρτας δικτύου που συνδέει το σύστημα σας με το Internet. Για όσους χρησιμοποιούν το PPP χρήστη, το όνομα θα είναι <span class=filename>tun0</span>.</p></div><div class=paragraph><p>Προσθέστε τις ακόλουθες καταχωρίσεις στο αρχείο <span class=filename>/etc/ipf.rules</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>#################################################################
# No restrictions on Inside LAN Interface for private network
# Not needed unless you have LAN
#################################################################

#pass out quick on xl0 all
#pass in quick on xl0 all

#################################################################
# No restrictions on Loopback Interface
#################################################################
pass in quick on lo0 all
pass out quick on lo0 all

#################################################################
# Interface facing Public Internet (Outbound Section)
# Match session start requests originating from behind the
# firewall on the private network
# or from this gateway server destined for the public Internet.
#################################################################

# Allow out access to my ISP&#39;s Domain name server.
# xxx must be the IP address of your ISP&#39;s DNS.
# Dup these lines if your ISP has more than one DNS server
# Get the IP addresses from /etc/resolv.conf file
pass out quick on dc0 proto tcp from any to xxx port = 53 flags S keep state
pass out quick on dc0 proto udp from any to xxx port = 53 keep state

# Allow out access to my ISP&#39;s DHCP server for cable or DSL networks.
# This rule is not needed for &#39;user ppp&#39; type connection to the
# public Internet, so you can delete this whole group.
# Use the following rule and check log for IP address.
# Then put IP address in commented out rule &amp; delete first rule
pass out log quick on dc0 proto udp from any to any port = 67 keep state
#pass out quick on dc0 proto udp from any to z.z.z.z port = 67 keep state

# Allow out non-secure standard www function
pass out quick on dc0 proto tcp from any to any port = 80 flags S keep state

# Allow out secure www function https over TLS SSL
pass out quick on dc0 proto tcp from any to any port = 443 flags S keep state

# Allow out send &amp; get email function
pass out quick on dc0 proto tcp from any to any port = 110 flags S keep state
pass out quick on dc0 proto tcp from any to any port = 25 flags S keep state

# Allow out Time
pass out quick on dc0 proto tcp from any to any port = 37 flags S keep state

# Allow out nntp news
pass out quick on dc0 proto tcp from any to any port = 119 flags S keep state

# Allow out gateway &amp; LAN users&#39; non-secure FTP ( both passive &amp; active modes)
# This function uses the IPNAT built in FTP proxy function coded in
# the nat rules file to make this single rule function correctly.
# If you want to use the pkg_add command to install application packages
# on your gateway system you need this rule.
pass out quick on dc0 proto tcp from any to any port = 21 flags S keep state

# Allow out ssh/sftp/scp (telnet/rlogin/FTP replacements)
# This function is using SSH (secure shell)
pass out quick on dc0 proto tcp from any to any port = 22 flags S keep state

# Allow out insecure Telnet
pass out quick on dc0 proto tcp from any to any port = 23 flags S keep state

# Allow out FreeBSD CVSup function
pass out quick on dc0 proto tcp from any to any port = 5999 flags S keep state

# Allow out ping to public Internet
pass out quick on dc0 proto icmp from any to any icmp-type 8 keep state

# Allow out whois from LAN to public Internet
pass out quick on dc0 proto tcp from any to any port = 43 flags S keep state

# Block and log only the first occurrence of everything
# else that&#39;s trying to get out.
# This rule implements the default block
block out log first quick on dc0 all

#################################################################
# Interface facing Public Internet (Inbound Section)
# Match packets originating from the public Internet
# destined for this gateway server or the private network.
#################################################################

# Block all inbound traffic from non-routable or reserved address spaces
block in quick on dc0 from 192.168.0.0/16 to any    #RFC 1918 private IP
block in quick on dc0 from 172.16.0.0/12 to any     #RFC 1918 private IP
block in quick on dc0 from 10.0.0.0/8 to any        #RFC 1918 private IP
block in quick on dc0 from 127.0.0.0/8 to any       #loopback
block in quick on dc0 from 0.0.0.0/8 to any         #loopback
block in quick on dc0 from 169.254.0.0/16 to any    #DHCP auto-config
block in quick on dc0 from 192.0.2.0/24 to any      #reserved for docs
block in quick on dc0 from 204.152.64.0/23 to any   #Sun cluster interconnect
block in quick on dc0 from 224.0.0.0/3 to any       #Class D &amp; E multicast

##### Block a bunch of different nasty things. ############
# That I do not want to see in the log

# Block frags
block in quick on dc0 all with frags

# Block short tcp packets
block in quick on dc0 proto tcp all with short

# block source routed packets
block in quick on dc0 all with opt lsrr
block in quick on dc0 all with opt ssrr

# Block nmap OS fingerprint attempts
# Log first occurrence of these so I can get their IP address
block in log first quick on dc0 proto tcp from any to any flags FUP

# Block anything with special options
block in quick on dc0 all with ipopts

# Block public pings
block in quick on dc0 proto icmp all icmp-type 8

# Block ident
block in quick on dc0 proto tcp from any to any port = 113

# Block all Netbios service. 137=name, 138=datagram, 139=session
# Netbios is MS/Windows sharing services.
# Block MS/Windows hosts2 name server requests 81
block in log first quick on dc0 proto tcp/udp from any to any port = 137
block in log first quick on dc0 proto tcp/udp from any to any port = 138
block in log first quick on dc0 proto tcp/udp from any to any port = 139
block in log first quick on dc0 proto tcp/udp from any to any port = 81

# Allow traffic in from ISP&#39;s DHCP server. This rule must contain
# the IP address of your ISP&#39;s DHCP server as it&#39;s the only
# authorized source to send this packet type. Only necessary for
# cable or DSL configurations. This rule is not needed for
# &#39;user ppp&#39; type connection to the public Internet.
# This is the same IP address you captured and
# used in the outbound section.
pass in quick on dc0 proto udp from z.z.z.z to any port = 68 keep state

# Allow in standard www function because I have apache server
pass in quick on dc0 proto tcp from any to any port = 80 flags S keep state

# Allow in non-secure Telnet session from public Internet
# labeled non-secure because ID/PW passed over public Internet as clear text.
# Delete this sample group if you do not have telnet server enabled.
#pass in quick on dc0 proto tcp from any to any port = 23 flags S keep state

# Allow in secure FTP, Telnet, and SCP from public Internet
# This function is using SSH (secure shell)
pass in quick on dc0 proto tcp from any to any port = 22 flags S keep state

# Block and log only first occurrence of all remaining traffic
# coming into the firewall. The logging of only the first
# occurrence avoids filling up disk with Denial of Service logs.
# This rule implements the default block.
block in log first quick on dc0 all
################### End of rules file #####################################</pre></div></div></div><div class=sect2><h3 id=_nat>30.5.14. NAT<a class=anchor href=#_nat></a></h3><div class=paragraph><p>Το NAT είναι ακρωνύμιο των λέξεων <em>Network Address Translation</em> ή Μετάφραση Διευθύνσεων Δικτύου. Για όσους είναι εξοικειωμένοι με το Linux®, βασίζεται στην αρχή του IP Masquerading. Στην πραγματικότητα το NAT και το IP Masquerading είναι το ίδιο πράγμα. Μια από τις πολλές δυνατότητες που παρέχει η λειτουργία NAT του IPF, είναι και η δυνατότητα να έχουμε ένα ιδιωτικό τοπικό δίκτυο (LAN) πίσω από το firewall το οποίο να μοιράζεται μια μοναδική δημόσια διεύθυνση IP στο Internet.</p></div><div class=paragraph><p>Ίσως να αναρωτηθείτε γιατί να θέλει κάποιος να το κάνει αυτό. Οι ISPs συνήθως αποδίδουν δυναμικές διευθύνσεις σε μη εταιρικούς πελάτες. Αυτό ουσιαστικά σημαίνει ότι η διεύθυνση IP που αποδίδεται στο μηχάνημα σας, μπορεί να είναι διαφορετική κάθε φορά που κάνετε κλήση για να συνδεθείτε. Για τους χρήστες DSL modem και router, η αλλαγή διεύθυνσης πραγματοποιείται κάθε φορά που ενεργοποιείται το modem. Η διεύθυνση IP που σας αποδίδεται από τον ISP σας, είναι αυτή με την οποία φαίνεστε στο Internet.</p></div><div class=paragraph><p>Ας υποθέσουμε τώρα ότι έχετε πέντε PC στο σπίτι σας, και χρειάζεστε σε όλα σύνδεση Internet. Κανονικά, θα έπρεπε να πληρώσετε τον ISP σας χωριστό λογαριασμό για κάθε PC και να διαθέτετε πέντε γραμμές τηλεφώνου.</p></div><div class=paragraph><p>Με το NAT, χρειάζεστε μόνο ένα λογαριασμό με τον ISP σας. Μπορείτε απλώς να συνδέσετε τα τέσσερα PC σε ένα διανομέα ή switch στο οποίο θα συνδέσετε επίσης και το FreeBSD μηχάνημα σας. Το μηχάνημα αυτό θα ενεργεί ως πύλη του τοπικού σας δικτύου για το Internet. Το NAT θα μεταφράσει αυτόματα τις ιδιωτικές διευθύνσεις IP του κάθε μηχανήματος στην μοναδική δημόσια IP διεύθυνση που έχετε, καθώς το πακέτο φεύγει από το firewall και κατευθύνεται προς το Internet. Εκτελεί επίσης και την αντίστροφη μετάφραση για τα πακέτα που επιστρέφουν.</p></div><div class=paragraph><p>Υπάρχει μια ειδική περιοχή διευθύνσεων IP που έχουν παραχωρηθεί για χρήση σε τοπικά δίκτυα με NAT. Σύμφωνα με το RFC 1918, μπορείτε να χρησιμοποιήσετε για αυτό το σκοπό τις παρακάτω περιοχές, οι οποίες δεν δρομολογούνται ποτέ απευθείας στο δημόσιο Internet:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Αρχικό IP <code>10.0.0.0</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>-</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Τελικό IP <code>10.255.255.255</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Αρχικό IP <code>172.16.0.0</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>-</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Τελικό IP <code>172.31.255.255</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Αρχικό IP <code>192.168.0.0</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>-</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Τελικό IP <code>192.168.255.255</code></p></td></tr></tbody></table></div><div class=sect2><h3 id=_ipnat>30.5.15. IPNAT<a class=anchor href=#_ipnat></a></h3><div class=paragraph><p>Οι κανόνες του NAT φορτώνονται με τη χρήση της εντολής <code>ipnat</code>. Τυπικά, οι κανόνες του NAT αποθηκεύονται στο αρχείο <span class=filename>/etc/ipnat.rules</span>. Δείτε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=ipnat&amp;sektion=1&amp;format=html">ipnat(1)</a> για λεπτομέρειες.</p></div><div class=paragraph><p>Για να αλλάξετε τους κανόνες του NAT καθώς αυτό εκτελείται, τροποποιήστε το αρχείο που τους περιέχει, και εκτελέστε την εντολή <code>ipnat</code> με την παράμετρο <code>-CF</code> για να διαγράψετε τους εσωτερικούς κανόνες του NAT και να αδειάσετε όλες τις ενεργές καταχωρίσεις του πίνακα μεταφράσεων.</p></div><div class=paragraph><p>Για να φορτώσετε τους κανόνες του NAT από την αρχή, εκτελέστε μια εντολή όπως την παρακάτω:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -CF -f /etc/ipnat.rules</span></code></pre></div></div><div class=paragraph><p>Για να δείτε κάποια στατιστικά σχετικά με το NAT, χρησιμοποιήστε την παρακάτω εντολή:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -s</span></code></pre></div></div><div class=paragraph><p>Για να δείτε μια λίστα με τις τρέχουσες καταχωρίσεις του πίνακα NAT, χρησιμοποιήστε την παρακάτω εντολή:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -l</span></code></pre></div></div><div class=paragraph><p>Για να ενεργοποιήσετε την λεπτομερή απεικόνιση μηνυμάτων και να δείτε πληροφορίες που σχετίζονται με την επεξεργασία των κανόνων και τους ενεργούς κανόνες και καταχωρίσεις στον πίνακα, γράψτε:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -v</span></code></pre></div></div></div><div class=sect2><h3 id=_κανόνες_του_ipnat>30.5.16. Κανόνες του IPNAT<a class=anchor href=#_κανόνες_του_ipnat></a></h3><div class=paragraph><p>Οι κανόνες του NAT είναι αρκετά ευέλικτοι, και διαθέτουν πλήθος δυνατοτήτων ώστε να καλύπτουν τις ανάγκες των οικιακών αλλά και των επιχειρησιακών χρηστών.</p></div><div class=paragraph><p>Η σύνταξη των κανόνων που παρουσιάζεται εδώ, έχει απλοποιηθεί ώστε να συμβαδίζει με τη συνήθη χρήση σε μη-εμπορικά περιβάλλοντα. Για πιο πλήρη περιγραφή της σύνταξης, δείτε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=ipnat&amp;sektion=5&amp;format=html">ipnat(5)</a>.</p></div><div class=paragraph><p>Η σύνταξη ενός κανόνα NAT μοιάζει με την παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>map IF LAN_IP_RANGE -&gt; PUBLIC_ADDRESS</pre></div></div><div class=paragraph><p>Ο κανόνας ξεκινάει με τη λέξη <code>map</code>.</p></div><div class=paragraph><p>Αντικαταστήστε το <em>IF</em> με την εξωτερική διεπαφή (τη κάρτα δικτύου που συνδέεται στο Internet).</p></div><div class=paragraph><p>Η παράμετρος <code><em>LAN_IP_RANGE</em></code> είναι η περιοχή διευθύνσεων που χρησιμοποιείται από το εσωτερικό σας δίκτυο. Στην πραγματικότητα θα μοιάζει με κάτι σαν το <code>192.168.1.0/24</code>.</p></div><div class=paragraph><p>Η παράμετρος <code><em>PUBLIC_ADDRESS</em></code> μπορεί να είναι είτε η εξωτερική IP διεύθυνση, είτε η ειδική λέξη <code>0/32</code>, η οποία σημαίνει ότι θα χρησιμοποιηθεί η IP διεύθυνση που έχει αποδοθεί στο <em>IF</em>.</p></div></div><div class=sect2><h3 id=_πως_λειτουργεί_το_nat>30.5.17. Πως Λειτουργεί το NAT<a class=anchor href=#_πως_λειτουργεί_το_nat></a></h3><div class=paragraph><p>Ένα πακέτο φτάνει στο firewall από το LAN με προορισμό το Internet. Περνάει διαμέσου των κανόνων φιλτραρίσματος εξερχομένων, όπου γίνεται η επεξεργασία του από το NAT. Οι κανόνες εφαρμόζονται από τον πρώτο και προς τα κάτω, και κερδίζει ο πρώτος που ταιριάζει. Ο έλεγχος γίνεται με βάση τη διεπαφή από την οποία λήφθηκε το πακέτο και τη διεύθυνση IP από την οποία προέρχεται. Όταν το όνομα της διεπαφής ενός πακέτου ταιριάζει με κάποιο κανόνα του NAT, η διεύθυνση IP της αφετηρίας (που προέρχεται από το ιδιωτικό δίκτυο) ελέγχεται για να εξακριβωθεί αν ταιριάζει με την περιοχή διευθύνσεων που καθορίζεται στην αριστερά πλευρά του συμβόλου (βέλος) του κανόνα NAT. Αν ταιριάζει, η διεύθυνση του πακέτου ξαναγράφεται, χρησιμοποιώντας τη δημόσια διεύθυνση IP η οποία παρέχεται από το <code>0/32</code>. Το NAT δημιουργεί μια καταχώριση στον εσωτερικό του πίνακα, έτσι ώστε όταν επιστρέψει η απάντηση από το Internet, να μπορεί να αντιστοιχηθεί ξανά στην αρχική ιδιωτική διεύθυνση IP και να περάσει έπειτα από τους κανόνες του φίλτρου για περαιτέρω επεξεργασία.</p></div></div><div class=sect2><h3 id=_ενεργοποιώντας_το_ipnat>30.5.18. Ενεργοποιώντας το IPNAT<a class=anchor href=#_ενεργοποιώντας_το_ipnat></a></h3><div class=paragraph><p>Για να ενεργοποιήσετε το IPNAT, προσθέστε τις παρακάτω γραμμές στο <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>Για να επιτρέψετε στο μηχάνημα σας να δρομολογεί πακέτα μεταξύ διεπαφών δικτύου:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Για να ξεκινάει αυτόματα το IPNAT σε κάθε εκκίνηση:</p></div><div class="literalblock programlisting"><div class=content><pre>ipnat_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Για να καθορίσετε από που επιθυμείτε να φορτώνονται οι κανόνες του IPNAT:</p></div><div class="literalblock programlisting"><div class=content><pre>ipnat_rules=&#34;/etc/ipnat.rules&#34;</pre></div></div></div><div class=sect2><h3 id=_το_nat_σε_ένα_μεγάλο_τοπικό_δίκτυο>30.5.19. Το NAT σε Ένα Μεγάλο Τοπικό Δίκτυο<a class=anchor href=#_το_nat_σε_ένα_μεγάλο_τοπικό_δίκτυο></a></h3><div class=paragraph><p>Για τοπικά δίκτυα με μεγάλο αριθμό υπολογιστών, ή για δίκτυα που διασυνδέουν περισσότερα από ένα LAN, η διαδικασία της μετατροπής όλων αυτών των ιδιωτικών διευθύνσεων σε μια μοναδική δημόσια διεύθυνση, δημιουργεί πρόβλημα κατανομής πόρων, καθώς χρησιμοποιούνται πολλές φορές οι ίδιοι αριθμοί θυρών, οδηγώντας τα PC του δικτύου σε συγκρούσεις. Υπάρχουν δύο τρόποι για να ελαττώσουμε αυτό το πρόβλημα.</p></div><div class=sect3><h4 id=_ανάθεση_των_θυρών_που_θα_χρησιμοποιηθούν>30.5.19.1. Ανάθεση των θυρών που θα Χρησιμοποιηθούν<a class=anchor href=#_ανάθεση_των_θυρών_που_θα_χρησιμοποιηθούν></a></h4><div class=paragraph><p>Ένα συνηθισμένος κανόνας NAT μοιάζει με τον παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 0/32</pre></div></div><div class=paragraph><p>Στον παραπάνω κανόνα, η θύρα αφετηρίας του πακέτου παραμένει αναλλοίωτη καθώς το πακέτο διέρχεται μέσω του IPNAT. Αν προσθέσετε την λέξη-κλειδί <code>portmap</code>, μπορείτε να ρυθμίσετε το IPNAT να χρησιμοποιεί θύρες που ανήκουν σε μια καθορισμένη περιοχή. Για παράδειγμα, ο παρακάτω κανόνας θα οδηγήσει το NAT να τροποποιήσει την θύρα της αφετηρίας, ώστε να είναι μέσα στην περιοχή που φαίνεται:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 0/32 portmap tcp/udp 20000:60000</pre></div></div><div class=paragraph><p>Μπορούμε επίσης να απλοποιήσουμε ακόμα περισσότερο τη διαδικασία χρησιμοποιώντας τη λέξη <code>auto</code> ώστε το IPNAT να καθορίζει από μόνο του ποιες θύρες είναι διαθέσιμες για χρήση:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 0/32 portmap tcp/udp auto</pre></div></div></div><div class=sect3><h4 id=_χρησιμοποιώντας_ένα_απόθεμα_δυναμικών_διευθύνσεων>30.5.19.2. Χρησιμοποιώντας ένα Απόθεμα Δυναμικών Διευθύνσεων<a class=anchor href=#_χρησιμοποιώντας_ένα_απόθεμα_δυναμικών_διευθύνσεων></a></h4><div class=paragraph><p>Σε ένα πολύ μεγάλο τοπικό δίκτυο, αργά ή γρήγορα φτάνουμε στο σημείο που μια μοναδική δημόσια διεύθυνση δεν επαρκεί για να καλύψει τόσες πολλές ιδιωτικές. Αν υπάρχει διαθέσιμο ένα εύρος δημοσίων διευθύνσεων, μπορούν να χρησιμοποιηθούν ως "απόθεμα (pool)", επιτρέποντας στην IPNAT να επιλέξει μια από αυτές καθώς αντιστοιχεί τα πακέτα κατά την έξοδο τους προς το δημόσιο δίκτυο.</p></div><div class=paragraph><p>Για παράδειγμα, αντί να αντιστοιχούν όλα τα πακέτα μέσω μιας μοναδικής δημόσιας IP διεύθυνσης όπως παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 204.134.75.1</pre></div></div><div class=paragraph><p>μπορούμε να χρησιμοποιήσουμε ένα εύρος IP διευθύνσεων, είτε με τη χρήση μάσκας δικτύου:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 204.134.75.0/255.255.255.0</pre></div></div><div class=paragraph><p>είτε με συμβολισμό CIDR:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 204.134.75.0/24</pre></div></div></div></div><div class=sect2><h3 id=_ανακατεύθυνση_θυρών>30.5.20. Ανακατεύθυνση Θυρών<a class=anchor href=#_ανακατεύθυνση_θυρών></a></h3><div class=paragraph><p>Είναι κοινή πρακτική να εγκαθίστανται υπηρεσίες όπως ο εξυπηρετητής ιστοσελίδων, ταχυδρομείου, βάσης δεδομένων και DNS σε διαφορετικά PC στο τοπικό δίκτυο. Στην περίπτωση αυτή, η κίνηση πακέτων από αυτά τα μηχανήματα εξακολουθεί να χρειάζεται το NAT, αλλά χρειάζεται επίσης να υπάρχει κάποιος τρόπος να κατευθύνεται η εισερχόμενη κίνηση στα σωστά PC του δικτύου. Το IPNAT έχει τις κατάλληλες δυνατότητες για την επίλυση αυτού του προβλήματος. Για παράδειγμα, έστω ότι ένας εξυπηρετητής ιστοσελίδων βρίσκεται στην διεύθυνση LAN <code>10.0.10.25</code> και η μοναδική δημόσια IP είναι <code>20.20.20.5</code>. Ο κανόνας που θα γράφατε θα έμοιαζε με τον παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>rdr dc0 20.20.20.5/32 port 80 -&gt; 10.0.10.25 port 80</pre></div></div><div class=paragraph><p>ή:</p></div><div class="literalblock programlisting"><div class=content><pre>rdr dc0 0.0.0.0/0 port 80 -&gt; 10.0.10.25 port 80</pre></div></div><div class=paragraph><p>ή για ένα εξυπηρετητή DNS με διεύθυνση στο τοπικό δίκτυο <code>10.0.10.33</code> ο οποίος πρέπει να δέχεται αναζητήσεις από το δημόσιο δίκτυο:</p></div><div class="literalblock programlisting"><div class=content><pre>rdr dc0 20.20.20.5/32 port 53 -&gt; 10.0.10.33 port 53 udp</pre></div></div></div><div class=sect2><h3 id=_ftp_και_nat>30.5.21. FTP και NAT<a class=anchor href=#_ftp_και_nat></a></h3><div class=paragraph><p>Το FTP είναι ένας δεινόσαυρος που έχει απομείνει από την εποχή που το Internet ήταν στα αρχικά του στάδια, όπου τα ερευνητικά εργαστήρια των πανεπιστήμιων ήταν συνδεμένα μεταξύ τους με μισθωμένες γραμμές και οι ερευνητές το χρησιμοποιούσαν για να στέλνουν αρχεία ο ένας στον άλλο. Την εποχή εκείνη, δεν υπήρχαν ανησυχίες σχετικά με την ασφάλεια. Με το πέρασμα του χρόνου, το FTP θάφτηκε στο πίσω μέρος του ταχέως εξελισσόμενου Internet. Δεν εξελίχθηκε ποτέ ώστε να ξεπεράσει προβλήματα ασφάλειας, όπως π.χ. το γεγονός ότι στέλνει το όνομα και τον κωδικό του χρήστη ως απλό κείμενο. Το FTP έχει δυο καταστάσεις λειτουργίας, την ενεργή και την παθητική. Η διαφορά είναι στο πως γίνεται η ανάκτηση του καναλιού δεδομένων. Η παθητική λειτουργία είναι πιο ασφαλής, καθώς το κανάλι δεδομένων αποτελεί το κύριο κανάλι της συνεδρίας. Μπορείτε να βρείτε πολύ καλή περιγραφή του πρωτοκόλλου και των διαφορετικών τρόπων λειτουργίας του, στο <a href=http://www.slacksite.com/other/ftp.html>http://www.slacksite.com/other/ftp.html</a>.</p></div><div class=sect3><h4 id=_κανόνες_του_ipnat_2>30.5.21.1. Κανόνες του IPNAT<a class=anchor href=#_κανόνες_του_ipnat_2></a></h4><div class=paragraph><p>Το IPNAT διαθέτει μια ειδική επιλογή για διαμεσολάβηση FTP (proxy) η οποία μπορεί να καθοριστεί στον κατάλληλο κανόνα του NAT. Μπορεί να παρακολουθήσει όλα τα εξερχόμενα πακέτα για να ανιχνεύσει την έναρξη μιας ενεργής ή παθητικής συνεδρίας FTP, και να δημιουργήσει δυναμικά προσωρινούς κανόνες στο φίλτρο που να περιέχουν μόνο τον αριθμό της θύρας που χρησιμοποιείται από το κανάλι δεδομένων. Αυτό εξαλείφει το πρόβλημα ασφάλειας που δημιουργείται από το γεγονός ότι διαφορετικά θα χρειαζόταν να ανοιχθεί μια μεγάλη περιοχή θυρών (στην υψηλή περιοχή) στο firewall.</p></div><div class=paragraph><p>Ο παρακάτω κανόνας χειρίζεται όλα τα δεδομένα για το εσωτερικό δίκτυο (LAN):</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 10.0.10.0/29 -&gt; 0/32 proxy port 21 ftp/tcp</pre></div></div><div class=paragraph><p>Ο παρακάτω κανόνας χειρίζεται την κίνηση FTP από την πύλη (gateway):</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 0.0.0.0/0 -&gt; 0/32 proxy port 21 ftp/tcp</pre></div></div><div class=paragraph><p>Ο παρακάτω κανόνας χειρίζεται όλη την κίνηση από το εσωτερικό LAN που δεν ανήκει στο πρωτόκολλο FTP:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 10.0.10.0/29 -&gt; 0/32</pre></div></div><div class=paragraph><p>Ο κανόνας χαρτογράφησης του FTP τοποθετείται πριν από τον κανονικό κανόνα χαρτογράφησης. Κάθε πακέτο ελέγχεται αρχικά από τον κανόνα που βρίσκεται στην κορυφή. Αν ταιριάζει στη διεπαφή και στην ιδιωτική διεύθυνση IP και πρόκειται για πακέτο FTP, ο διαμεσολαβητής FTP δημιουργεί προσωρινούς κανόνες στο φίλτρο οι οποίοι επιτρέπουν την εισερχόμενη και εξερχόμενη κίνηση FTP ενώ ταυτόχρονα εκτελούν και την απαραίτητη μετάφραση NAT. Όλα τα πακέτα που δεν ανήκουν σε μετάδοση FTP δεν ταιριάζουν με τον πρώτο κανόνα, έτσι κατευθύνονται στον τρίτο κανόνα, εξετάζονται όσο αφορά τη διεπαφή και το IP από το οποίο προέρχονται, και γίνεται η αντίστοιχη μετάφραση τους από το NAT.</p></div></div><div class=sect3><h4 id=_κανόνες_φίλτρου_για_το_ipnat>30.5.21.2. Κανόνες Φίλτρου για το IPNAT<a class=anchor href=#_κανόνες_φίλτρου_για_το_ipnat></a></h4><div class=paragraph><p>Όταν χρησιμοποιείται ο μεσολαβητής FTP, χρειάζεται μόνο ένας κανόνας για το NAT.</p></div><div class=paragraph><p>Χωρίς το μεσολαβητή FTP, χρειάζονται οι παρακάτω τρεις κανόνες:</p></div><div class="literalblock programlisting"><div class=content><pre># Allow out LAN PC client FTP to public Internet
# Active and passive modes
pass out quick on rl0 proto tcp from any to any port = 21 flags S keep state

# Allow out passive mode data channel high order port numbers
pass out quick on rl0 proto tcp from any to any port &gt; 1024 flags S keep state

# Active mode let data channel in from FTP server
pass in quick on rl0 proto tcp from any to any port = 20 flags S keep state</pre></div></div></div></div></div></div><div class=sect1><h2 id=firewalls-ipfw>30.6. IPFW<a class=anchor href=#firewalls-ipfw></a></h2><div class=sectionbody><div class=paragraph><p>Το IPFIREWALL (IPFW) είναι λογισμικό που αναπτύχθηκε για το FreeBSD. Έχει γραφεί και συντηρείται από εθελοντές που ανήκουν στο Project. Χρησιμοποιεί τους κλασικούς κανόνες χωρίς διατήρηση της κατάστασης (stateless) καθώς και μια τεχνική κωδικοποίησης που επιτυγχάνει αυτό που αναφέρεται ως Απλή Stateful Λογική (Simple Stateful Logic).</p></div><div class=paragraph><p>Το υπόδειγμα κανόνων για το IPFW (στα αρχεία <span class=filename>/etc/rc.firewall</span> και <span class=filename>/etc/rc.firewall6</span>) της τυπικής εγκατάστασης του FreeBSD είναι μάλλον απλό και θα χρειαστεί να κάνετε κάποιες αλλαγές πριν το χρησιμοποιήσετε. Το παράδειγμα δεν χρησιμοποιεί φιλτράρισμα τύπου stateful. Η stateful λειτουργία είναι ευεργετική στις περισσότερες περιπτώσεις, έτσι δεν θα χρησιμοποιήσουμε αυτό το παράδειγμα ως βάση αυτής της ενότητας.</p></div><div class=paragraph><p>Η σύνταξη των κανόνων stateless του IPFW έχει ενισχυθεί με εξελιγμένες δυνατότητες επιλογής οι οποίες συνήθως ξεπερνάνε κατά πολύ τις τυπικές γνώσεις του ατόμου που καλείται να το ρυθμίσει. Το IPFW απευθύνεται στον επαγγελματία χρήστη ή τον τεχνικά προχωρημένο χομπίστα, ο οποίος έχει ανάγκη προχωρημένου φιλτραρίσματος πακέτων. Η πραγματική δύναμη των κανόνων του IPFW αποκαλύπτεται μόνο αν διαθέτετε προχωρημένες γνώσεις σχετικά με το πως διαφορετικά πρωτόκολλα δημιουργούν και χρησιμοποιούν την επικεφαλίδα των πακέτων τους. Τέτοιο επίπεδο επεξηγήσεων είναι πέρα από το σκοπό αυτής της ενότητας του Εγχειριδίου.</p></div><div class=paragraph><p>Το IPFW αποτελείται από επτά εξαρτήματα. Το βασικό εξάρτημα είναι ο επεξεργαστής κανόνων του firewall στον πυρήνα, με ενσωματωμένη τη δυνατότητα καταγραφής. Τα υπόλοιπα εξαρτήματα είναι το σύστημα καταγραφής (logging), ο κανόνας <code>divert</code> ο οποίος ενεργοποιεί τη λειτουργία NAT, καθώς και οι προχωρημένες δυνατότητες ειδικού σκοπού: το σύστημα διαμόρφωσης κίνησης (traffic shaper) dummynet, η δυνατότητα προώθησης μέσω του <code>fwd rule</code>, η δυνατότητα γεφύρωσης (bridge) καθώς και η δυνατότητα απόκρυψης (ipstealth). To IPFW υποστηρίζει τόσο το πρωτόκολλο IPv4 όσο και το IPv6.</p></div><div class=sect2><h3 id=firewalls-ipfw-enable>30.6.1. Ενεργοποιώντας το IPFW<a class=anchor href=#firewalls-ipfw-enable></a></h3><div class=paragraph><p>Το IPFW περιλαμβάνεται στην βασική εγκατάσταση του FreeBSD ως άρθρωμα του πυρήνα το οποίο μπορεί να φορτωθεί δυναμικά. Το σύστημα θα φορτώσει δυναμικά το άρθρωμα όταν βρει την καταχώριση <code>firewall_enable="YES"</code> στο αρχείο <span class=filename>/etc/rc.conf</span>. Δεν χρειάζεται να μεταγλωττίσετε το IPFW μέσα στον πυρήνα.</p></div><div class=paragraph><p>Αφού επανεκκινήσετε το σύστημα σας με την καταχώριση <code>firewall_enable="YES"</code> στο <span class=filename>rc.conf</span>, θα δείτε με άσπρα έντονα γράμματα το ακόλουθο μήνυμα κατά τη διαδικασία της εκκίνησης:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ipfw2 initialized, divert disabled, rule-based forwarding disabled, default to deny, logging disabled</code></pre></div></div><div class=paragraph><p>Το άρθρωμα έχει ενσωματωμένη τη δυνατότητα καταγραφής. Για να ενεργοποιήσετε την καταγραφή και να θέσετε το επίπεδο λεπτομέρειας, υπάρχουν κάποιες ρυθμίσεις που μπορείτε να θέσετε στο <span class=filename>/etc/sysctl.conf</span>. Προσθέτοντας τις παρακάτω καταχωρίσεις, θα ενεργοποιηθεί η καταγραφή στις επόμενες εκκινήσεις:</p></div><div class="literalblock programlisting"><div class=content><pre>net.inet.ip.fw.verbose=1
net.inet.ip.fw.verbose_limit=5</pre></div></div></div><div class=sect2><h3 id=firewalls-ipfw-kernel>30.6.2. Επιλογές του Πυρήνα<a class=anchor href=#firewalls-ipfw-kernel></a></h3><div class=paragraph><p>Δεν είναι υποχρεωτικό να ενεργοποιήσετε το IPFW μεταγλωττίζοντας τις παρακάτω επιλογές στον πυρήνα του FreeBSD. Ο σκοπός αυτής της παρουσίασης είναι καθαρά ενημερωτικός.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL</pre></div></div><div class=paragraph><p>Η επιλογή αυτή ενεργοποιεί το IPFW ως μέρος του πυρήνα.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL_VERBOSE</pre></div></div><div class=paragraph><p>Ενεργοποιεί την καταγραφή των πακέτων που περνούν μέσω του IPFW και περιλαμβάνουν τη λέξη <code>log</code> στον κανόνα τους.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL_VERBOSE_LIMIT=5</pre></div></div><div class=paragraph><p>Περιορίζει τον πλήθος των πακέτων που καταγράφονται μέσω του <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> σε συγκεκριμένο αριθμό ανά καταχώριση. Η ρύθμιση είναι χρήσιμη σε εχθρικά περιβάλλοντα στα οποία είναι επιθυμητή η καταγραφή. Με αυτό τον τρόπο μπορεί να αποφευχθεί μια πιθανή επίθεση με στόχο την υπερχείλιση των αρχείων καταγραφής.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL_DEFAULT_TO_ACCEPT</pre></div></div><div class=paragraph><p>Η επιλογή αυτή αφήνει τα πάντα να περνάνε μέσα από το firewall, το οποίο είναι καλή ιδέα την πρώτη φορά που ρυθμίζετε το firewall σας.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPDIVERT</pre></div></div><div class=paragraph><p>Η επιλογή αυτή ενεργοποιεί τη λειτουργία NAT.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Το firewall θα απορρίπτει όλα τα πακέτα που κατευθύνονται από και προς το μηχάνημα, αν δεν περιλάβετε την επιλογή <code>IPFIREWALL_DEFAULT_TO_ACCEPT</code> ή αν δεν ρυθμίσετε ένα κατάλληλο κανόνα που να επιτρέπει αυτές τις συνδέσεις.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=firewalls-ipfw-rc>30.6.3. Επιλογές στο <span class=filename>/etc/rc.conf</span><a class=anchor href=#firewalls-ipfw-rc></a></h3><div class=paragraph><p>Ενεργοποιήστε το firewall:</p></div><div class="literalblock programlisting"><div class=content><pre>firewall_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Για να επιλέξετε ένα από τους προεπιλεγμένους τύπους firewall που υποστηρίζονται από το FreeBSD, διαβάστε το αρχείο <span class=filename>/etc/rc.firewall</span> και δημιουργήστε μια εγγραφή όπως την παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>firewall_type=&#34;open&#34;</pre></div></div><div class=paragraph><p>Οι διαθέσιμες τιμές για αυτή τη ρύθμιση είναι:</p></div><div class=ulist><ul><li><p><code>open</code> - επιτρέπει τη διέλευση όλης της κίνησης.</p></li><li><p><code>client</code> - προστατεύει μόνο το συγκεκριμένο μηχάνημα.</p></li><li><p><code>simple</code> - προστατεύει ολόκληρο το δίκτυο.</p></li><li><p><code>closed</code> - απενεργοποιεί εντελώς την κίνηση πακέτων, εκτός από την εσωτερική διεπαφή (loopback).</p></li><li><p><code>UNKNOWN</code> - απενεργοποιεί την φόρτωση κανόνων του firewall.</p></li><li><p><span class=filename>filename</span> - το πλήρες μονοπάτι του αρχείου που περιέχει τους κανόνες του firewall.</p></li></ul></div><div class=paragraph><p>Μπορείτε να χρησιμοποιήσετε δύο διαφορετικούς τρόπους για να φορτώσετε προσαρμοσμένους κανόνες στο ipfw firewall. Ο ένας είναι θέτοντας τη μεταβλητή <code>firewall_type</code> στην απόλυτη διαδρομή του αρχείου που περιέχει τους <em>κανόνες του firewall</em>, χωρίς να δώσετε ορίσματα στην γραμμή εντολών για το ίδιο το <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a>. Το αρχείο κανόνων που φαίνεται παρακάτω, απορρίπτει όλη την εισερχόμενη και εξερχόμενη κίνηση:</p></div><div class="literalblock programlisting"><div class=content><pre>add deny in
add deny out</pre></div></div><div class=paragraph><p>Από την άλλη μεριά, είναι επίσης δυνατό να θέσετε τη μεταβλητή <code>firewall_script</code> στην απόλυτη διαδρομή ενός εκτελέσιμου script που περιλαμβάνει μια σειρά από εντολές <code>ipfw</code> που θα εκτελεστούν κατά την εκκίνηση. Ένα έγκυρο τέτοιο script το οποίο είναι αντίστοιχο με το αρχείο κανόνων που δείξαμε παραπάνω, είναι το ακόλουθο:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh

ipfw -q flush

ipfw add deny in
ipfw add deny out</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Αν θέσετε την τιμή του <code>firewall_type</code> είτε σε <code>client</code> είτε σε <code>simple</code>, θα πρέπει να ελέγξετε ότι οι προεπιλεγμένοι κανόνες που περιέχονται στο <span class=filename>/etc/rc.firewall</span> ταιριάζουν με τις ρυθμίσεις του συγκεκριμένου μηχανήματος. Παρατηρήστε επίσης ότι τα παραδείγματα που χρησιμοποιούνται σε αυτό το κεφάλαιο αναμένουν να να έχετε θέσει τη μεταβλητή <code>firewall_script</code> στην τιμή <span class=filename>/etc/ipfw.rules</span>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ενεργοποιήστε την καταγραφή:</p></div><div class="literalblock programlisting"><div class=content><pre>firewall_logging=&#34;YES&#34;</pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Το μόνο πράγμα που κάνει η μεταβλητή <code>firewall_logging</code> είναι να θέσει την τιμή της μεταβλητής sysctl <code>net.inet.ip.fw.verbose</code> στην τιμή <code>1</code> (δείτε το <a href=#firewalls-ipfw-enable>Ενεργοποιώντας το IPFW</a>). Δεν υπάρχει μεταβλητή του <span class=filename>rc.conf</span> που να ορίζει περιορισμούς στην καταγραφή, αλλά αυτό μπορεί να ρυθμιστεί μέσω της παραπάνω μεταβλητής sysctl είτε χειροκίνητα, είτε μέσω του αρχείου <span class=filename>/etc/sysctl.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>net.inet.ip.fw.verbose_limit=5</pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Αν το μηχάνημα σας λειτουργεί ως πύλη (gateway), δηλαδή παρέχει υπηρεσία μετάφρασης διευθύνσεων δικτύου (Network Address Translation, NAT) μέσω του <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>, παρακαλούμε να διαβάσετε το <a href=../advanced-networking/#network-natd>Network Address Translation</a> για πληροφορίες σχετικά με τις ρυθμίσεις που απαιτούνται στο αρχείο <span class=filename>/etc/rc.conf</span>.</p></div></div><div class=sect2><h3 id=firewalls-ipfw-cmd>30.6.4. Η Εντολή IPFW<a class=anchor href=#firewalls-ipfw-cmd></a></h3><div class=paragraph><p>Η εντολή <code>ipfw</code> είναι ο συνήθης τρόπος για την προσθήκη η διαγραφή κανόνων στους εσωτερικούς ενεργούς κανόνες του firewall, καθώς αυτό εκτελείται. Το πρόβλημα με τη χρήση αυτής της μεθόδου είναι ότι οι αλλαγές χάνονται με τον τερματισμό λειτουργίας του μηχανήματος. Μπορείτε να γράψετε όλους τους κανόνες σας σε ένα αρχείο και να το χρησιμοποιείτε για να τους φορτώνετε στην εκκίνηση. Μπορείτε να χρησιμοποιήσετε το ίδιο αρχείο για να αντικαταστήσετε τους τρέχοντες κανόνες του firewall, την ώρα που αυτό εκτελείται. Αυτός είναι και ο συνιστώμενος τρόπος που χρησιμοποιούμε στα παραδείγματα μας.</p></div><div class=paragraph><p>Η εντολή <code>ipfw</code> είναι επίσης χρήσιμη για να απεικονίζει τους τρέχοντες κανόνες στη κονσόλα σας. Το σύστημα καταγραφής χρήσης της IPFW δημιουργεί αυτόματα ένα μετρητή για κάθε κανόνα, ο οποίος μετράει πόσα πακέτα ταίριαξαν με αυτόν. Κατά τη διάρκεια των δοκιμών, η δυνατότητα να ελέγξετε την τιμή του μετρητή είναι ένας τρόπος για να διαπιστώσετε αν ο κανόνας λειτουργεί κανονικά.</p></div><div class=paragraph><p>Για να δείτε όλους τους κανόνες με τη σειρά:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw list</span></code></pre></div></div><div class=paragraph><p>Για να δείτε μια λίστα όλων των κανόνων, μαζί με την ώρα που ενεργοποιήθηκε τελευταία φορά ο κάθε κανόνας, γράψτε:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -t list</span></code></pre></div></div><div class=paragraph><p>Το επόμενο παράδειγμα δείχνει τον αριθμό των πακέτων που ταίριαξαν μαζί με τον αντίστοιχο κανόνα. Η πρώτη στήλη δείχνει τον αριθμό του κανόνα, ακολουθείται από τον αριθμό πακέτων που ταίριαξαν (πρώτα τα εξερχόμενα και μετά τα εισερχόμενα) και τέλος από τον ίδιο τον κανόνα.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -a list</span></code></pre></div></div><div class=paragraph><p>Για να δείτε μια λίστα που να περιλαμβάνει τόσο τους δυναμικούς όσο και τους στατικούς κανόνες:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -d list</span></code></pre></div></div><div class=paragraph><p>Για να δείτε και τους δυναμικούς κανόνες που έχουν λήξει:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -d -e list</span></code></pre></div></div><div class=paragraph><p>Για να μηδενίσετε τους μετρητές:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw zero</span></code></pre></div></div><div class=paragraph><p>Για να μηδενίσετε τους μετρητές μόνο για τον κανόνα με τον αριθμό <em>NUM</em>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw zero NUM</span></code></pre></div></div></div><div class=sect2><h3 id=firewalls-ipfw-rules>30.6.5. Το Σύνολο Κανόνων του IPFW<a class=anchor href=#firewalls-ipfw-rules></a></h3><div class=paragraph><p>Ως "σύνολο κανόνων" στο IPFW, ορίζουμε μια ομάδα κανόνων που έχουν γραφεί για να επιτρέπουν ή να απορρίπτουν πακέτα ανάλογα με τις τιμές που περιέχονται σε αυτά. Η διπλής κατεύθυνσης ανταλλαγή πακέτων μεταξύ υπολογιστών αποτελεί μια συνεδρία. Το σύνολο κανόνων του firewall επεξεργάζεται τόσο τα πακέτα που έρχονται από το Internet, όσο και τα πακέτα που παράγονται από το σύστημα ως απάντηση σε αυτά. Κάθε υπηρεσία TCP/IP (π.χ. telnet, www, mail, κ.λ.π.) καθορίζεται από το πρωτόκολλο και την προνομιακή (privileged) θύρα που χρησιμοποιεί για να δέχεται αιτήματα εξυπηρέτησης. Τα πακέτα που προορίζονται για μια συγκεκριμένη υπηρεσία, ξεκινούν από τη διεύθυνση αφετηρίας χρησιμοποιώντας μια μη-προνομιακή θύρα και καταλήγουν στη συγκεκριμένη θύρα υπηρεσίας στον προορισμό. Όλες οι παραπάνω παράμετροι (θύρες και διευθύνσεις) μπορούν να χρησιμοποιηθούν ως κριτήρια επιλογής για την δημιουργία κανόνων που επιτρέπουν ή εμποδίζουν την πρόσβαση σε υπηρεσίες.</p></div><div class=paragraph><p>Όταν ένα πακέτο εισέρχεται στο firewall, συγκρίνεται με βάση τον πρώτο κανόνα. Η σύγκριση συνεχίζεται διαδοχικά με τους υπόλοιπους κανόνες, από τον πρώτο προς τον τελευταίο, με βάση τον αύξοντα αριθμό τους. Όταν το πακέτο ταιριάξει με τις παραμέτρους επιλογής κάποιου κανόνα, εκτελείται η οδηγία που αναφέρεται στο πεδίο ενεργειών του κανόνα αυτού και η αναζήτηση κανόνων για το συγκεκριμένο πακέτο τερματίζεται. Σε αυτή τη μέθοδο αναζήτησης, "ο πρώτος κανόνας που ταιριάζει, είναι ο νικητής". Αν το πακέτο δεν ταιριάζει με κανένα από τους κανόνες, θα ληφθεί από τον υποχρεωτικό προεπιλεγμένο κανόνα του IPFW, με αριθμό 65535, ο οποίος εμποδίζει τη διέλευση όλων των πακέτων, και τα απορρίπτει χωρίς να στείλει καμιά απάντηση στον αρχικό αποστολέα τους.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Η αναζήτηση συνεχίζεται μετά από κανόνες τύπου <code>count</code>, <code>skipto</code> και <code>tee</code>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Οι οδηγίες που φαίνονται εδώ, βασίζονται στη χρήση κανόνων που περιέχουν τις οδηγίες <code>keep state</code>, <code>limit</code>, <code>in</code>, <code>out</code> και <code>via</code>. Αυτές είναι και οι βασικές λειτουργίες για την δόμηση ενός firewall τύπου inclusive με stateful λειτουργία.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Να δίνετε μεγάλη προσοχή όταν δουλεύετε με τους κανόνες ενός firewall. Μπορεί άθελα σας να κλειδωθείτε έξω από το σύστημα σας.</p></div></td></tr></tbody></table></div><div class=sect3><h4 id=firewalls-ipfw-rules-syntax>30.6.5.1. Σύνταξη Κανόνων<a class=anchor href=#firewalls-ipfw-rules-syntax></a></h4><div class=paragraph><p>Στην ενότητα αυτή, θα παρουσιάσουμε μια απλοποιημένη σύνταξη κανόνων. Δείχνουμε μόνο ότι χρειάζεται για να δημιουργηθεί ένα τυποποιημένο σύνολο κανόνων για ένα inclusive firewall. Για πλήρη περιγραφή, δείτε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a>.</p></div><div class=paragraph><p>Οι κανόνες περιέχουν λέξεις-κλειδιά. Οι λέξεις αυτές θα πρέπει να κωδικοποιηθούν με συγκεκριμένη σειρά από τα αριστερά προς τα δεξιά της γραμμής. Οι λέξεις-κλειδιά φαίνονται παρακάτω με έντονα γράμματα. Μερικές λέξεις έχουν υπο-επιλογές οι οποίες μπορεί να είναι επίσης λέξεις-κλειδιά και να περιλαμβάνουν επίσης ακόμα περισσότερες υπο-επιλογές.</p></div><div class=paragraph><p>Η αρχή ενός σχολίου, σηματοδοτείται με το σύμβολο <code>#</code>, το οποίο μπορεί να εμφανίζεται στο τέλος μιας γραμμής κανόνα, ή και σε μια δική του γραμμή. Οι κενές γραμμές αγνοούνται.</p></div><div class=paragraph><p><code><em>CMD RULE_NUMBER ACTION LOGGING SELECTION STATEFUL</em></code></p></div><div class=sect4><h5 id=_cmd>30.6.5.1.1. CMD<a class=anchor href=#_cmd></a></h5><div class=paragraph><p>Για να γίνει η προσθήκη ενός νέου κανόνα στον εσωτερικό πίνακα, τοποθετείται μπροστά από αυτόν η παράμετρος <span class=parameter>add</span>.</p></div></div><div class=sect4><h5 id=_rule_number>30.6.5.1.2. RULE_NUMBER<a class=anchor href=#_rule_number></a></h5><div class=paragraph><p>Κάθε κανόνας σχετίζεται με ένα αριθμό κανόνα (rule_number) στην περιοχή 1..65535.</p></div></div><div class=sect4><h5 id=_action_2>30.6.5.1.3. ACTION<a class=anchor href=#_action_2></a></h5><div class=paragraph><p>Ένας κανόνας μπορεί να σχετίζεται με μια ή περισσότερες ενέργειες, οι οποίες εκτελούνται όταν το πακέτο ταιριάζει με τα κριτήρια επιλογής αυτού του κανόνα.</p></div><div class=paragraph><p><span class=parameter>allow | accept | pass | permit</span></p></div><div class=paragraph><p>Όλα τα παραπάνω έχουν το ίδιο αποτέλεσμα: το πακέτο εξέρχεται από την σύστημα του firewall. Η αναζήτηση για το συγκεκριμένο πακέτο τερματίζεται σε αυτό τον κανόνα.</p></div><div class=paragraph><p><span class=parameter>check-state</span></p></div><div class=paragraph><p>Ελέγχει το πακέτο με βάση το δυναμικό πίνακα κανόνων. Αν βρεθεί κανόνας που να ταιριάζει, θα εκτελεστεί η ενέργεια του κανόνα ο οποίος δημιούργησε τον συγκεκριμένο δυναμικό κανόνα. Διαφορετικά, η αναζήτηση συνεχίζεται με τον επόμενο κανόνα. Ένας κανόνας check-state δεν έχει κριτήρια επιλογής. Αν δεν υπάρχει κανόνας check-state στο σύνολο κανόνων, ο έλεγχος του πίνακα δυναμικών κανόνων ξεκινάει από τον πρώτο κανόνα τύπου keep-state ή limit.</p></div><div class=paragraph><p><span class=parameter>deny | drop</span></p></div><div class=paragraph><p>Και οι δύο λέξεις σημαίνουν το ίδιο πράγμα: τα πακέτα που ταιριάζουν με αυτό τον κανόνα απορρίπτονται. Η αναζήτηση τερματίζεται.</p></div></div><div class=sect4><h5 id=_καταγραφή>30.6.5.1.4. Καταγραφή<a class=anchor href=#_καταγραφή></a></h5><div class=paragraph><p><span class=parameter>log</span> ή <span class=parameter>logamount</span></p></div><div class=paragraph><p>Όταν ένα πακέτο ταιριάζει με ένα κανόνα που περιέχει τη λέξη <code>log</code>, γίνεται καταγραφή του μηνύματος μέσω του <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> στη δυνατότητα SECURITY. Η καταγραφή συμβαίνει μόνο αν ο αριθμός των πακέτων που έχει καταγραφεί μέχρι στιγμής δεν υπερβαίνει την παράμετρο <code>logamount</code>. Αν η παράμετρος αυτή δεν έχει καθοριστεί, το όριο ρυθμίζεται με βάση την τιμή της μεταβλητής sysctl <code>net.inet.ip.fw.verbose_limit</code>. Και στις δύο περιπτώσεις, μια μηδενική τιμή σημαίνει ότι δεν θα υπάρχει όριο στην καταγραφή. Μόλις η καταγραφή φτάσει στο όριο, μπορεί να γίνει επανενεργοποίηση της με το μηδενισμό του μετρητή καταγραφής, ή του μετρητή για το συγκεκριμένο κανόνα. Δείτε την εντολή <code>ipfw reset log</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Η καταγραφή γίνεται μόνο αφού επαληθευθούν όλες οι άλλες συνθήκες ταιριάσματος του πακέτου, και πριν την τελική αποδοχή ή απόρριψη του. Είναι στη δική σας ευχέρεια να αποφασίσετε σε ποιους κανόνες θα ενεργοποιήσετε την καταγραφή.</p></div></td></tr></tbody></table></div></div><div class=sect4><h5 id=_επιλογή>30.6.5.1.5. Επιλογή<a class=anchor href=#_επιλογή></a></h5><div class=paragraph><p>Οι λέξεις-κλειδιά που περιγράφονται σε αυτή την ενότητα, χρησιμοποιούνται για να περιγράψουν χαρακτηριστικά του πακέτου που θα πρέπει να διερευνηθούν για να καθοριστεί αν το πακέτο ταιριάζει ή όχι με τον κανόνα. Η επιλογή μπορεί να γίνει με βάση τα παρακάτω γενικής φύσεως χαρακτηριστικά, τα οποία και θα πρέπει να χρησιμοποιηθούν με τη σειρά που φαίνονται:</p></div><div class=paragraph><p><span class=parameter>udp | tcp | icmp</span></p></div><div class=paragraph><p>Μπορούν επίσης να χρησιμοποιηθούν τα πρωτόκολλα που περιέχονται στο αρχείο <span class=filename>/etc/protocols</span>. Η τιμή που καθορίζεται χρησιμοποιείται για το ταίριασμα του πρωτοκόλλου. Πρόκειται για υποχρεωτική παράμετρο.</p></div><div class=paragraph><p><span class=parameter>from src to dst</span></p></div><div class=paragraph><p>Οι λέξεις <code>from</code> και <code>to</code> χρησιμοποιούνται για το ταίριασμα IP διευθύνσεων. Οι κανόνες πρέπει να καθορίζουν <em>τόσο</em> την πηγή όσο και τον προορισμό. Η λέξη <code>any</code> μπορεί να χρησιμοποιηθεί για ταίριασμα με οποιαδήποτε διεύθυνση. Η λέξη <code>me</code> έχει επίσης ειδική σημασία. Ταιριάζει με οποιαδήποτε διεύθυνση που έχει ρυθμιστεί σε κάποια διεπαφή του συστήματος σας, αντιπροσωπεύοντας έτσι το PC στο οποίο εκτελείται το firewall. Μπορούν έτσι να γραφούν κανόνες του τύπου <code>from me to any</code> ή <code>from any to me</code> ή <code>from any to 0.0.0.0/0</code> ή <code>from 0.0.0.0/0 to me</code> ή <code>from any to 0.0.0.0</code> ή <code>from me to 0.0.0.0</code>. Οι διευθύνσεις IP καθορίζονται ως αριθμητικές οκτάδες χωρισμένες με τελείες και ακολουθούνται από το μήκος της μάσκας υποδικτύου. Μια IP διεύθυνση μπορεί να καθορίζεται με αριθμούς που χωρίζονται με τελείες. Μπορεί επίσης να ακολουθείται από το μέγεθος της μάσκας υποδικτύου (μορφή CIDR). Πρόκειται για υποχρεωτική παράμετρο. Μπορείτε να χρησιμοποιήσετε το βοηθητικό πρόγραμμα <a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/ipcalc/>net-mgmt/ipcalc</a> για διευκόλυνση σας στους υπολογισμούς. Δείτε την δικτυακή τοποθεσία του προγράμματος για περισσότερες πληροφορίες: <a href=http://jodies.de/ipcalc>http://jodies.de/ipcalc</a>.</p></div><div class=paragraph><p><span class=parameter>port number</span></p></div><div class=paragraph><p>Χρησιμοποιείται σε πρωτόκολλα που υποστηρίζουν αριθμούς θυρών (όπως είναι τα TCP και UDP). Είναι υποχρεωτικό να δίνεται ο αριθμός θύρας της υπηρεσίας που θέλετε να ταιριάξετε. Μπορείτε να χρησιμοποιήσετε τα ονόματα των υπηρεσιών (μπορείτε να τα βρείτε στο αρχείο <span class=filename>/etc/services</span>) αντί για τους κανονικούς αριθμούς θυρών.</p></div><div class=paragraph><p><span class=parameter>in | out</span></p></div><div class=paragraph><p>Με το παραπάνω μπορεί να καθοριστεί αν το ταίριασμα θα γίνεται σε εισερχόμενα ή σε εξερχόμενα πακέτα αντίστοιχα. Είναι υποχρεωτικό να έχετε ως μέρος των κριτηρίων του κανόνα σας, είτε τη λέξη <code>in</code> είτε τη λέξη <code>out</code>.</p></div><div class=paragraph><p><span class=parameter>via IF</span></p></div><div class=paragraph><p>Ταιριάζει τα πακέτα τα οποία διέρχονται μέσω της διεπαφής με το όνομα που καθορίζεται. Η λέξη <code>via</code> εξασφαλίζει ότι το όνομα της διεπαφής θα είναι πάντα μέρος των κριτηρίων κατά τη διαδικασία ταιριάσματος.</p></div><div class=paragraph><p><span class=parameter>setup</span></p></div><div class=paragraph><p>Πρόκειται για υποχρεωτική παράμετρο που αναγνωρίζει την αίτηση έναρξης μιας συνεδρίας για πακέτα TCP.</p></div><div class=paragraph><p><span class=parameter>keep-state</span></p></div><div class=paragraph><p>Πρόκειται για υποχρεωτική παράμετρο. Μόλις υπάρξει ταίριασμα, το firewall θα δημιουργήσει ένα δυναμικό κανόνα, του οποίου η προεπιλεγμένη συμπεριφορά είναι να ταιριάζει επικοινωνία διπλής κατεύθυνσης μεταξύ της διεύθυνσης IP και της θύρας αφετηρίας και προορισμού, χρησιμοποιώντας το ίδιο πρωτόκολλο.</p></div><div class=paragraph><p><span class=parameter>limit {src-addr | src-port | dst-addr | dst-port}</span></p></div><div class=paragraph><p>Το firewall θα επιτρέψει μόνο <em>N</em> πλήθος συνδέσεων με τις παραμέτρους που περιγράφονται σε αυτό τον κανόνα. Μπορούν να καθοριστούν περισσότερες από μια διευθύνσεις και πόρτες αφετηρίας και προορισμού. Δεν μπορούν να χρησιμοποιηθούν στον ίδιο κανόνα οι παράμετροι <code>limit</code> και <code>keep-state</code>. Η επιλογή <code>limit</code> παρέχει την ίδια λειτουργία stateful με την <code>keep-state</code>, καθώς και επιπρόσθετες δικές της λειτουργίες.</p></div></div></div><div class=sect3><h4 id=_επιλογή_για_stateful_κανόνες>30.6.5.2. Επιλογή για Stateful Κανόνες<a class=anchor href=#_επιλογή_για_stateful_κανόνες></a></h4><div class=paragraph><p>Το stateful φιλτράρισμα, αντιμετωπίζει την κίνηση του δικτύου ως διπλής κατεύθυνσης ανταλλαγή πακέτων τα οποία δημιουργούν μια συνεδρία. Έχει επίσης τη δυνατότητα να διερευνήσει αν τηρούνται οι έγκυροι κανόνες ανταλλαγής μηνυμάτων μεταξύ του αποστολέα και του παραλήπτη. Οποιαδήποτε πακέτα δεν ταιριάζουν με το πρότυπο αυτής της επικοινωνίας, απορρίπτονται ως ψεύτικα.</p></div><div class=paragraph><p>Η επιλογή <code>check-state</code> χρησιμοποιείται για να αναγνωριστεί σε ποιο σημείο του συνόλου κανόνων του IPFW θα ελεγχθεί το πακέτο με βάση τη δυνατότητα των δυναμικών κανόνων. Σε περίπτωση ταιριάσματος, το πακέτο εξέρχεται από το firewall και συνεχίζει την πορεία του, ενώ την ίδια στιγμή δημιουργείται ένας νέος δυναμικός κανόνας για το επόμενο πακέτο που αναμένεται να έρθει με βάση τη συγκεκριμένη διπλής κατεύθυνσης επικοινωνία. Σε περίπτωση που το πακέτο δεν ταιριάζει με το δυναμικό κανόνα, θα προχωρήσει για να ελεγχθεί από τον επόμενο κανόνα του firewall.</p></div><div class=paragraph><p>Η δυνατότητα δυναμικών κανόνων είναι ευάλωτη σε εξάντληση πόρων σε περίπτωση επίθεσης υπερχείλισης (flood) SYN. Η επίθεση αυτή μπορεί να δημιουργήσει πολύ μεγάλο πλήθος δυναμικών κανόνων. Για την αντιμετώπιση μιας τέτοιας επίθεσης, το FreeBSD χρησιμοποιεί μια ακόμα επιλογή που ονομάζεται <code>limit</code>. Η επιλογή αυτή μπορεί να περιορίσει τον αριθμό των ταυτόχρονων συνεδριών, εξετάζοντας τα πεδία αφετηρίας και προορισμού των κανόνων. Ανιχνεύει με αυτό τον τρόπο το πλήθος των δυναμικών κανόνων και πόσες φορές έχει χρησιμοποιηθεί ο καθένας από τη συγκεκριμένη IP διεύθυνση. Αν ο αριθμός αυτός ξεπερνάει το όριο που έχει τεθεί με την επιλογή <code>limit</code>, το πακέτο απορρίπτεται.</p></div></div><div class=sect3><h4 id=_καταγραφή_μηνυμάτων_του_firewall>30.6.5.3. Καταγραφή Μηνυμάτων του Firewall<a class=anchor href=#_καταγραφή_μηνυμάτων_του_firewall></a></h4><div class=paragraph><p>Τα πλεονεκτήματα της καταγραφής συμβάντων του firewall, είναι προφανή: παρέχουν τη δυνατότητα να δείτε για ποιο λόγο ενεργοποιήθηκαν οι κανόνες στους οποίους έχετε ενεργοποιήσει την καταγραφή. Οι πληροφορίες περιλαμβάνουν τα πακέτα που απορρίφθηκαν, τις διευθύνσεις από τις οποίες προήλθαν και που κατευθύνονταν. Με αυτό τον τρόπο, έχετε ένα σημαντικό πλεονέκτημα στην ανίχνευση των εισβολέων.</p></div><div class=paragraph><p>Ακόμα και αν ενεργοποιήσετε τη λειτουργία καταγραφής, το IPFW δεν θα αρχίσει από μόνο του την καταγραφή για κανένα κανόνα. Ο διαχειριστής του firewall θα αποφασίσει σε ποιους από όλους τους κανόνες θα ενεργοποιήσει την καταγραφή, και θα προσθέσει την λέξη <code>log</code> στην αντίστοιχη καταχώριση. Φυσιολογικά, γίνεται καταγραφή μόνο για κανόνες που απορρίπτουν πακέτα (κανόνες <code>deny</code>), όπως για παράδειγμα ο κανόνας απόρριψης των εισερχόμενων ICMP pings. Είναι κοινή πρακτική, να αντιγράφεται στο τέλος των κανόνων ο κανόνας "ipfw default deny everything" και να προστίθεται σε αυτόν η επιλογή <code>log</code>. Με τον τρόπο αυτό, μπορείτε να δείτε όλα τα πακέτα που δεν ταίριαξαν με κανένα κανόνα του συνόλου.</p></div><div class=paragraph><p>Η καταγραφή συμβάντων είναι δίκοπο μαχαίρι. Αν δεν είστε προσεκτικός, θα χαθείτε μέσα στο πλήθος των δεδομένων της καταγραφής και θα γεμίσετε το δίσκο σας με άχρηστα αρχεία. Οι πιο παλιές και κοινές επιθέσεις τύπου άρνησης υπηρεσίας (DoS), είναι αυτές που προσπαθούν να γεμίσουν τους δίσκους σας. Τα μηνύματα αυτά όχι μόνο καταγράφονται στο syslogd, αλλά εμφανίζονται και στην κονσόλα του συστήματος σας, και σύντομα γίνονται πολύ ενοχλητικά.</p></div><div class=paragraph><p>Η επιλογή <code>IPFIREWALL_VERBOSE_LIMIT=5</code> στον πυρήνα, περιορίζει τον αριθμό των συνεχόμενων όμοιων μηνυμάτων που στέλνονται στον καταγραφέα συστήματος <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> σχετικά με το ταίριασμα πακέτων ενός συγκεκριμένου κανόνα. Όταν ενεργοποιείται αυτή η επιλογή στον πυρήνα, ο αριθμός των συνεχόμενων μηνυμάτων ενός συγκεκριμένου κανόνα, σταματάει μετά τον αριθμό που καθορίζεται. Δεν υπάρχει κανένα όφελος από 200 συνεχόμενα μηνύματα με το ίδιο ακριβώς περιεχόμενο. Για παράδειγμα, πέντε συνεχόμενα μηνύματα για ένα συγκεκριμένο κανόνα θα καταγράφονταν κανονικά στο syslogd. Τα υπόλοιπα όμοια μηνύματα θα καταμετρηθούν και θα καταγραφούν όπως φαίνεται παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>last message repeated 45 times</pre></div></div><div class=paragraph><p>Όλα τα μηνύματα καταγραφής των πακέτων, γράφονται από προεπιλογή στο αρχείο <span class=filename>/var/log/security</span> το οποίο καθορίζεται στο αρχείο <span class=filename>/etc/syslog.conf</span>.</p></div></div><div class=sect3><h4 id=firewalls-ipfw-rules-script>30.6.5.4. Δημιουργία Ενός Script Κανόνων<a class=anchor href=#firewalls-ipfw-rules-script></a></h4><div class=paragraph><p>Οι περισσότεροι έμπειροι χρήστες του IPFW, δημιουργούν ένα αρχείο που περιέχει τους κανόνες και το γράφουν με τέτοιο τρόπο ώστε να να μπορεί να εκτελεστεί ως script. Το βασικό πλεονέκτημα του παραπάνω τρόπου, είναι ότι οι κανόνες του firewall μπορούν να ανανεωθούν χωρίς την ανάγκη να επανεκκινήσει το σύστημα για να φορτωθούν οι νέοι. Η μέθοδος αυτή είναι πολύ βολική για την δοκιμή νέων κανόνων, καθώς η διαδικασία μπορεί να επαναληφθεί όσες φορές χρειάζεται. Καθώς πρόκειται για κανονικό script, μπορείτε να χρησιμοποιήσετε συμβολική υποκατάσταση για να κωδικοποιήσετε και να υποκαταστήσετε συχνά χρησιμοποιούμενες τιμές σε πολλαπλούς κανόνες. Αυτό φαίνεται στο παρακάτω παράδειγμα.</p></div><div class=paragraph><p>Η σύνταξη που χρησιμοποιείται εδώ, είναι συμβατή με τα κελύφη <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=csh&amp;sektion=1&amp;format=html">csh(1)</a> και <a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a>. Μπροστά από τα πεδία της συμβολικής υποκατάστασης, υπάρχει το σήμα του δολαρίου, $. Το σύμβολο αυτό δεν υπάρχει μπροστά από τα συμβολικά πεδία. Η τιμή που θα αποδοθεί στο συμβολικό πεδίο, πρέπει να εσωκλείεται σε διπλά εισαγωγικά.</p></div><div class=paragraph><p>Ξεκινήστε το αρχείο των κανόνων σας όπως φαίνεται παρακάτω:</p></div><div class="literalblock programlisting"><div class=content><pre>############### start of example ipfw rules script #############
#
ipfw -q -f flush       # Delete all rules
# Set defaults
oif=&#34;tun0&#34;             # out interface
odns=&#34;192.0.2.11&#34;      # ISP&#39;s DNS server IP address
cmd=&#34;ipfw -q add &#34;     # build rule prefix
ks=&#34;keep-state&#34;        # just too lazy to key this each time
$cmd 00500 check-state
$cmd 00502 deny all from any to any frag
$cmd 00501 deny tcp from any to any established
$cmd 00600 allow tcp from any to any 80 out via $oif setup $ks
$cmd 00610 allow tcp from any to $odns 53 out via $oif setup $ks
$cmd 00611 allow udp from any to $odns 53 out via $oif $ks
################### End of example ipfw rules script ############</pre></div></div><div class=paragraph><p>Αυτό είναι όλο. Στο παράδειγμα αυτό δεν είναι σημαντικοί οι κανόνες, αλλά ο τρόπος με τον οποίο λειτουργούν και παίρνουν τιμές τα πεδία συμβολικής υποκατάστασης.</p></div><div class=paragraph><p>Αν το παραπάνω παράδειγμα ήταν στο αρχείο <span class=filename>/etc/ipfw.rules</span> θα μπορούσατε να φορτώσετε αυτούς τους κανόνες, γράφοντας την παρακάτω εντολή:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh /etc/ipfw.rules</span></code></pre></div></div><div class=paragraph><p>Το αρχείο <span class=filename>/etc/ipfw.rules</span> μπορεί να βρίσκεται σε όποιο κατάλογο θέλετε, και να ονομάζεται επίσης όπως θέλετε.</p></div><div class=paragraph><p>Θα μπορούσατε να επιτύχετε το ίδιο πράγμα, εκτελώντας τις παρακάτω εντολές χειροκίνητα:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -q -f flush</span>
<span class=c># ipfw -q add check-state</span>
<span class=c># ipfw -q add deny all from any to any frag</span>
<span class=c># ipfw -q add deny tcp from any to any established</span>
<span class=c># ipfw -q add allow tcp from any to any 80 out via tun0 setup keep-state</span>
<span class=c># ipfw -q add allow tcp from any to 192.0.2.11 53 out via tun0 setup keep-state</span>
<span class=c># ipfw -q add 00611 allow udp from any to 192.0.2.11 53 out via tun0 keep-state</span></code></pre></div></div></div><div class=sect3><h4 id=_σύνολο_κανόνων_stateful>30.6.5.5. Σύνολο Κανόνων Stateful<a class=anchor href=#_σύνολο_κανόνων_stateful></a></h4><div class=paragraph><p>Το παρακάτω σύνολο κανόνων (που δεν περιέχει κανόνες για NAT) είναι ένα παράδειγμα γραφής ενός inclusive firewall. Ένα inclusive firewall επιτρέπει την είσοδο μόνο των πακέτων που ταιριάζουν με τους κανόνες αποδοχής (pass) και απορρίπτει από προεπιλογή όλα τα άλλα. Τα firewalls που έχουν σχεδιαστεί να προστατεύουν ολόκληρα δίκτυα, διαθέτουν το λιγότερο δύο διεπαφές, στις οποίες πρέπει να υπάρχουν κανόνες ώστε το firewall να λειτουργεί.</p></div><div class=paragraph><p>Όλα τα λειτουργικά συστήματα τύπου UNIX®, συμπεριλαμβανομένου και του FreeBSD, έχουν σχεδιαστεί να χρησιμοποιούν τη διεπαφή <span class=filename>lo0</span> και τη διεύθυνση IP <code>127.0.0.1</code> για εσωτερική επικοινωνία με το λειτουργικό σύστημα. Το firewall πρέπει να περιέχει κανόνες που να επιτρέπουν την απρόσκοπτη κίνηση αυτών των ειδικών, για εσωτερική χρήση, πακέτων.</p></div><div class=paragraph><p>Οι κανόνες που ορίζουν την πρόσβαση εισερχόμενων και εξερχόμενων πακέτων, γράφονται για τη διεπαφή που συνδέεται στο δημόσιο Internet. Η διεπαφή αυτή μπορεί να είναι για παράδειγμα η <span class=filename>tun0</span> (σε περίπτωση που χρησιμοποιείτε το PPP χρήστη), ή η κάρτα δικτύου που συνδέεται στο καλωδιακό ή DSL modem σας.</p></div><div class=paragraph><p>Σε περίπτωση που μια ή περισσότερες κάρτες δικτύου συνδέονται σε εσωτερικά ιδιωτικά δίκτυα πίσω από το firewall, θα πρέπει να υπάρχουν οι αντίστοιχοι κανόνες που να επιτρέπουν την ελεύθερη διακίνηση των πακέτων ανάμεσα στις διεπαφές αυτές ή/και στο Internet.</p></div><div class=paragraph><p>Οι κανόνες πρέπει να οργανώνονται σε τρεις κύριες ενότητες: αρχικά όλες οι διεπαφές στις οποίες επιτρέπεται η ελεύθερη διακίνηση δεδομένων, έπειτα η διεπαφή από την οποία εξέρχονται τα πακέτα προς το δημόσιο δίκτυο (Internet) και τέλος η διεπαφή από την οποία λαμβάνονται πακέτα από το Internet.</p></div><div class=paragraph><p>Σε κάθε μια από τις ενότητες των διεπαφών που συνδέονται στο Internet, πρέπει να τοποθετούνται πρώτοι οι κανόνες που ταιριάζουν συχνότερα με την αντίστοιχη κίνηση. Ο τελευταίος κανόνας της ενότητας θα πρέπει να απορρίπτει και να καταγράφει όλα τα πακέτα της συγκεκριμένης διεπαφής/κατεύθυνσης.</p></div><div class=paragraph><p>Η ενότητα εξερχομένων (Outbound) στο σύνολο κανόνων που φαίνεται παρακάτω, περιέχει μόνο κανόνες τύπου <code>allow</code>. Οι κανόνες αυτοί περιέχουν συγκεκριμένες επιλεγμένες τιμές, με τις οποίες αναγνωρίζεται με μοναδικό τρόπο η υπηρεσία στην οποία επιτρέπεται η πρόσβαση από το δημόσιο Internet. Όλοι οι κανόνες έχουν τις επιλογές <code>proto</code>, <code>port</code>, <code>in/out</code> και <code>keep-state</code>. Οι κανόνες τύπου <code>proto tcp</code> περιέχουν την επιλογή <code>setup</code> για την αναγνώριση του πακέτου έναρξης της συνεδρίας, ώστε να γίνει η καταχώριση της στον πίνακα συνδέσεων (stateful).</p></div><div class=paragraph><p>Στην ενότητα των εισερχόμενων πακέτων (Inbound) που φαίνεται παρακάτω, εμφανίζονται πρώτοι οι κανόνες που χρησιμοποιούνται για την απόρριψη των ανεπιθύμητων πακέτων. Αυτό γίνεται για δύο διαφορετικούς λόγους. Ο πρώτος είναι ότι τα κακόβουλα πακέτα μπορεί εν μέρει να ταιριάζουν με κάποια χαρακτηριστικά της έγκυρης κίνησης. Τα πακέτα αυτά θα πρέπει να απορριφθούν, αντί να γίνουν δεκτά από κάποιο επόμενο κανόνα <code>allow</code>. Ο δεύτερος είναι ότι μπορείτε να απορρίψετε συγκεκριμένα πακέτα τα οποία γνωρίζετε ότι δεν είναι έγκυρα, αλλά σας είναι αδιάφορη η καταγραφή τους. Με τον τρόπο αυτό εμποδίζεται η λήψη και καταγραφή τους από τον τελευταίο κανόνα. Ο τελευταίος κανόνας τυπικά απορρίπτει και καταγράφει όλα τα πακέτα που έφτασαν μέχρι αυτόν. Ο κανόνας αυτός χρησιμοποιείται για την παροχή νομικών αποδείξεων σε περίπτωση που κινήσετε νομική διαδικασία κατά ατόμων που προέβησαν σε επιθέσεις στο σύστημα σας.</p></div><div class=paragraph><p>Θα πρέπει επίσης να εξασφαλίσετε ότι το σύστημα σας δεν θα δώσει καμιά απάντηση σε κανένα από τα ανεπιθύμητα πακέτα. Τα πακέτα αυτά θα πρέπει να απορριφθούν και να εξαφανιστούν. Με τον τρόπο αυτό, ο επιτιθέμενος δεν έχει καμιά γνώση αν τα πακέτα του έφτασαν μέχρι το σύστημα σας. Όσο λιγότερα μπορούν να μάθουν οι επιτιθέμενοι σχετικά με το σύστημα σας, τόσο πιο ασφαλές είναι. Όταν εκτελείτε καταγραφή πακέτων με αριθμούς θυρών που δεν αναγνωρίζετε, κοιτάξτε στο αρχείο <span class=filename>/etc/services/</span> ή δείτε το <a href=http://www.securitystats.com/tools/portsearch.php>http://www.securitystats.com/tools/portsearch.php</a> και αναζητήστε τον αριθμό της θύρας για να δείτε ποιος είναι ο σκοπός της. Ελέγξτε την παρακάτω τοποθεσία για τους αριθμούς θυρών που χρησιμοποιούνται συχνά από κακόβουλα προγράμματα (Trojans): <a href=http://www.simovits.com/trojans/trojans.html>http://www.simovits.com/trojans/trojans.html</a>.</p></div></div><div class=sect3><h4 id=_ένα_υπόδειγμα_συνόλου_κανόνων_inclusive>30.6.5.6. Ένα Υπόδειγμα Συνόλου Κανόνων Inclusive<a class=anchor href=#_ένα_υπόδειγμα_συνόλου_κανόνων_inclusive></a></h4><div class=paragraph><p>Το παρακάτω σύνολο κανόνων (στο οποίο δεν υλοποιείται λειτουργία NAT) είναι αρκετά πλήρες και πολύ ασφαλές. Δημιουργεί firewall τύπου inclusive, και έχει δοκιμαστεί σε πραγματικές συνθήκες λειτουργίας. Μπορεί να εξυπηρετήσει το ίδιο καλά και το δικό σας σύστημα. Απλώς μετατρέψτε σε σχόλιο τους κανόνες <code>pass</code> για τις υπηρεσίες που δεν θέλετε να ενεργοποιήσετε. Για να αποφύγετε την καταγραφή ανεπιθύμητων μηνυμάτων, απλώς προσθέστε ένα κανόνα τύπου <code>deny</code> στην ενότητα των εισερχομένων. Σε όλους τους κανόνες, Θα πρέπει να αλλάξετε το όνομα της διεπαφής από <span class=filename>dc0</span> στο πραγματικό όνομα της διεπαφής που συνδέεται στο δημόσιο Internet. Σε περίπτωση που χρησιμοποιείτε το PPP χρήστη, το όνομα της διεπαφής θα είναι <span class=filename>tun0</span>.</p></div><div class=paragraph><p>Θα διαπιστώσετε ότι υπάρχει μια συγκεκριμένη λογική στη χρήση αυτών των κανόνων.</p></div><div class=ulist><ul><li><p>Όλοι οι κανόνες που αποτελούν αίτηση για έναρξη μιας νέας συνεδρίας με το δημόσιο Internet, χρησιμοποιούν την επιλογή <code>keep-state</code>.</p></li><li><p>Όλες οι διαπιστευμένες υπηρεσίες που προέρχονται από το δημόσιο Internet, διαθέτουν την επιλογή <code>limit</code>, για την αποφυγή επιθέσεων υπερχείλισης (flooding).</p></li><li><p>Όλοι οι κανόνες χρησιμοποιούν τις επιλογές <code>in</code> ή <code>out</code> για να διευκρινίζουν την κατεύθυνση της επικοινωνίας.</p></li><li><p>Όλοι οι κανόνες χρησιμοποιούν την επιλογή <code>via όνομα-διεπαφής</code> για να καθορίσουν τη διεπαφή από την οποία διέρχεται το πακέτο.</p></li></ul></div><div class=paragraph><p>Οι κανόνες που φαίνονται παρακάτω, θα πρέπει να γραφούν στο <span class=filename>/etc/ipfw.rules</span>.</p></div><div class="literalblock programlisting"><div class=content><pre>################ Start of IPFW rules file ###############################
# Flush out the list before we begin.
ipfw -q -f flush

# Set rules command prefix
cmd=&#34;ipfw -q add&#34;
pif=&#34;dc0&#34;     # public interface name of NIC
              # facing the public Internet

#################################################################
# No restrictions on Inside LAN Interface for private network
# Not needed unless you have LAN.
# Change xl0 to your LAN NIC interface name
#################################################################
#$cmd 00005 allow all from any to any via xl0

#################################################################
# No restrictions on Loopback Interface
#################################################################
$cmd 00010 allow all from any to any via lo0

#################################################################
# Allow the packet through if it has previous been added to the
# the &#34;dynamic&#34; rules table by a allow keep-state statement.
#################################################################
$cmd 00015 check-state

#################################################################
# Interface facing Public Internet (Outbound Section)
# Check session start requests originating from behind the
# firewall on the private network or from this gateway server
# destined for the public Internet.
#################################################################

# Allow out access to my ISP&#39;s Domain name server.
# x.x.x.x must be the IP address of your ISP.s DNS
# Dup these lines if your ISP has more than one DNS server
# Get the IP addresses from /etc/resolv.conf file
$cmd 00110 allow tcp from any to x.x.x.x 53 out via $pif setup keep-state
$cmd 00111 allow udp from any to x.x.x.x 53 out via $pif keep-state

# Allow out access to my ISP&#39;s DHCP server for cable/DSL configurations.
# This rule is not needed for .user ppp. connection to the public Internet.
# so you can delete this whole group.
# Use the following rule and check log for IP address.
# Then put IP address in commented out rule &amp; delete first rule
$cmd 00120 allow log udp from any to any 67 out via $pif keep-state
#$cmd 00120 allow udp from any to x.x.x.x 67 out via $pif keep-state

# Allow out non-secure standard www function
$cmd 00200 allow tcp from any to any 80 out via $pif setup keep-state

# Allow out secure www function https over TLS SSL
$cmd 00220 allow tcp from any to any 443 out via $pif setup keep-state

# Allow out send &amp; get email function
$cmd 00230 allow tcp from any to any 25 out via $pif setup keep-state
$cmd 00231 allow tcp from any to any 110 out via $pif setup keep-state

# Allow out FBSD (make install &amp; CVSUP) functions
# Basically give user root &#34;GOD&#34; privileges.
$cmd 00240 allow tcp from me to any out via $pif setup keep-state uid root

# Allow out ping
$cmd 00250 allow icmp from any to any out via $pif keep-state

# Allow out Time
$cmd 00260 allow tcp from any to any 37 out via $pif setup keep-state

# Allow out nntp news (i.e. news groups)
$cmd 00270 allow tcp from any to any 119 out via $pif setup keep-state

# Allow out secure FTP, Telnet, and SCP
# This function is using SSH (secure shell)
$cmd 00280 allow tcp from any to any 22 out via $pif setup keep-state

# Allow out whois
$cmd 00290 allow tcp from any to any 43 out via $pif setup keep-state

# deny and log everything else that.s trying to get out.
# This rule enforces the block all by default logic.
$cmd 00299 deny log all from any to any out via $pif

#################################################################
# Interface facing Public Internet (Inbound Section)
# Check packets originating from the public Internet
# destined for this gateway server or the private network.
#################################################################

# Deny all inbound traffic from non-routable reserved address spaces
$cmd 00300 deny all from 192.168.0.0/16 to any in via $pif  #RFC 1918 private IP
$cmd 00301 deny all from 172.16.0.0/12 to any in via $pif     #RFC 1918 private IP
$cmd 00302 deny all from 10.0.0.0/8 to any in via $pif          #RFC 1918 private IP
$cmd 00303 deny all from 127.0.0.0/8 to any in via $pif        #loopback
$cmd 00304 deny all from 0.0.0.0/8 to any in via $pif            #loopback
$cmd 00305 deny all from 169.254.0.0/16 to any in via $pif   #DHCP auto-config
$cmd 00306 deny all from 192.0.2.0/24 to any in via $pif       #reserved for docs
$cmd 00307 deny all from 204.152.64.0/23 to any in via $pif  #Sun cluster interconnect
$cmd 00308 deny all from 224.0.0.0/3 to any in via $pif         #Class D &amp; E multicast

# Deny public pings
$cmd 00310 deny icmp from any to any in via $pif

# Deny ident
$cmd 00315 deny tcp from any to any 113 in via $pif

# Deny all Netbios service. 137=name, 138=datagram, 139=session
# Netbios is MS/Windows sharing services.
# Block MS/Windows hosts2 name server requests 81
$cmd 00320 deny tcp from any to any 137 in via $pif
$cmd 00321 deny tcp from any to any 138 in via $pif
$cmd 00322 deny tcp from any to any 139 in via $pif
$cmd 00323 deny tcp from any to any 81 in via $pif

# Deny any late arriving packets
$cmd 00330 deny all from any to any frag in via $pif

# Deny ACK packets that did not match the dynamic rule table
$cmd 00332 deny tcp from any to any established in via $pif

# Allow traffic in from ISP&#39;s DHCP server. This rule must contain
# the IP address of your ISP.s DHCP server as it.s the only
# authorized source to send this packet type.
# Only necessary for cable or DSL configurations.
# This rule is not needed for .user ppp. type connection to
# the public Internet. This is the same IP address you captured
# and used in the outbound section.
#$cmd 00360 allow udp from any to x.x.x.x 67 in via $pif keep-state

# Allow in standard www function because I have apache server
$cmd 00400 allow tcp from any to me 80 in via $pif setup limit src-addr 2

# Allow in secure FTP, Telnet, and SCP from public Internet
$cmd 00410 allow tcp from any to me 22 in via $pif setup limit src-addr 2

# Allow in non-secure Telnet session from public Internet
# labeled non-secure because ID &amp; PW are passed over public
# Internet as clear text.
# Delete this sample group if you do not have telnet server enabled.
$cmd 00420 allow tcp from any to me 23 in via $pif setup limit src-addr 2

# Reject &amp; Log all incoming connections from the outside
$cmd 00499 deny log all from any to any in via $pif

# Everything else is denied by default
# deny and log all packets that fell through to see what they are
$cmd 00999 deny log all from any to any
################ End of IPFW rules file ###############################</pre></div></div></div><div class=sect3><h4 id=_ένα_υπόδειγμα_nat_με_stateful_σύνολο_κανόνων>30.6.5.7. Ένα Υπόδειγμα NAT με Stateful Σύνολο Κανόνων<a class=anchor href=#_ένα_υπόδειγμα_nat_με_stateful_σύνολο_κανόνων></a></h4><div class=paragraph><p>Για να ενεργοποιηθεί η λειτουργία NAT στο IPFW, χρειάζονται κάποιες επιπλέον ρυθμίσεις. Θα πρέπει να προσθέσετε την επιλογή <code>option IPDIVERT</code> μαζί με τις υπόλοιπες επιλογές για το IPFIREWALL στο αρχείο ρυθμίσεων του πυρήνα. Θα πρέπει έπειτα να μεταγλωττίσετε και να εγκαταστήσετε το νέο σας προσαρμοσμένο πυρήνα.</p></div><div class=paragraph><p>Εκτός από τις συνηθισμένες επιλογές για το IPFW, θα πρέπει να προσθέσετε και τις παρακάτω στο αρχείο <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>natd_enable=&#34;YES&#34;                   # Enable NATD function
natd_interface=&#34;rl0&#34;                # interface name of public Internet NIC
natd_flags=&#34;-dynamic -m&#34;            # -m = preserve port numbers if possible</pre></div></div><div class=paragraph><p>Η χρήση κανόνων stateful μαζί με τον κανόνα <code>divert natd</code> (NAT), περιπλέκει πολύ την λογική συγγραφής των κανόνων. Η θέση εμφάνισης των κανόνων <code>check-state</code> και <code>divert natd</code> μέσα στο σύνολο κανόνων γίνεται πολύ κρίσιμη. Δεν πρόκειται πλέον για απλή λογική περάσματος από τον ένα κανόνα στον επόμενο. Χρησιμοποιείται ένα νέο είδος ενέργειας που ονομάζεται <code>skipto</code>. Για να χρησιμοποιηθεί η εντολή <code>skipto</code>, είναι υποχρεωτικό να έχετε αριθμήσει τους κανόνες, ώστε να ξέρετε σε ποιο κανόνα θα καταλήξει το άλμα που θα εκτελεστεί από την εντολή αυτή.</p></div><div class=paragraph><p>Παρακάτω θα βρείτε ένα υπόδειγμα (χωρίς πρόσθετα σχόλια) μιας μεθόδου συγγραφής που επιλέξαμε εδώ για να εξηγήσουμε την ακολουθία ροής του πακέτου μέσα στο σύνολο κανόνων.</p></div><div class=paragraph><p>Η ροή της επεξεργασίας ξεκινάει με τον πρώτο από την κορυφή κανόνα και συνεχίζει ένα κανόνα κάθε φορά προς τα κάτω, είτε μέχρι να φτάσει τον τελευταίο, ή μέχρι το πακέτο να ταιριάξει με τα κριτήρια επιλογής κάποιου κανόνα και να ελευθερωθεί από το firewall. Είναι σημαντικό να παρατηρήσουμε τη θέση των κανόνων με αριθμούς 100, 101, 450, 500 και 510. Οι κανόνες αυτοί ελέγχουν την μετάφραση των εξερχόμενων και εισερχόμενων πακέτων, ώστε οι καταχωρήσεις τους στο δυναμικό πίνακα καταστάσεων να περιέχουν πάντα την ιδιωτική IP διεύθυνση του τοπικού δικτύου. Παρατηρήστε επίσης ότι όλοι οι κανόνες allow και deny καθορίζουν την κατεύθυνση κίνησης του πακέτου καθώς και την διεπαφή. Επίσης, όλες οι εξερχόμενες αιτήσεις για νέες συνεδρίες μεταφέρονται απευθείας (μέσω του <code>skipto rule 500</code>) στον κανόνα 500 για να γίνει η μετάφραση διευθύνσεων δικτύου (NAT).</p></div><div class=paragraph><p>Ας υποθέσουμε ότι ένα χρήστης του τοπικού δικτύου χρησιμοποιεί τον φυλλομετρητή του για να δει μια ιστοσελίδα. Οι ιστοσελίδες χρησιμοποιούν την πόρτα 80 για την επικοινωνία. Το πακέτο εισέρχεται στο firewall. Δεν ταιριάζει με τον κανόνα 100 γιατί είναι εξερχόμενο και όχι εισερχόμενο. Περνάει τον κανόνα 101 γιατί πρόκειται για νέα επικοινωνία και έτσι δεν υπάρχει ακόμα στον δυναμικό πίνακα καταστάσεων. Το πακέτο τελικά φτάνει στον κανόνα 125 με τον οποίο και ταιριάζει. Εξέρχεται μέσω της κάρτας δικτύου που συνδέεται στο δημόσιο Internet. Το πακέτο έχει ακόμα ως IP αφετηρίας την ιδιωτική διεύθυνση του τοπικού δικτύου. Το ταίριασμα με αυτό τον κανόνα προκαλεί δύο ενέργειες. Η επιλογή <code>keep-state</code> θα δημιουργήσει ένα νέο δυναμικό κανόνα, θα τον καταχωρήσει στον πίνακα, και θα εκτελέσει την αντίστοιχη ενέργεια. Η ενέργεια αυτή είναι μέρος της πληροφορίας που γράφεται στον δυναμικό πίνακα. Στην περίπτωση αυτή είναι η "skipto rule 500". Ο κανόνας 500 μεταφράζει μέσω NAT τη διεύθυνση IP του πακέτου, πριν αυτό εξέλθει προς το Internet. Αυτό είναι ιδιαίτερα σημαντικό. Το πακέτο κατευθύνεται προς τον προορισμό του, όπου δημιουργείται και αποστέλλεται ένα νέο πακέτο ως απάντηση. Το νέο αυτό πακέτο εισέρχεται ξανά στο firewall, στον κανόνα που είναι στην κορυφή της λίστας. Αυτή τη φορά ταιριάζει με τον κανόνα 100 και η διεύθυνση προορισμού του αλλάζει ξανά στην αρχική του τοπικού δικτύου. Έπειτα, γίνεται η επεξεργασία του από τον κανόνα <code>check-state</code> ο οποίος ανακαλύπτει ότι πρόκειται για πακέτο συνεδρίας σε εξέλιξη και το απελευθερώνει στο τοπικό δίκτυο. Κατευθύνεται προς τον υπολογιστή του τοπικού δικτύου που το έστειλε, ο οποίος στέλνει ένα νέο πακέτο ζητώντας περισσότερα δεδομένα από τον απομακρυσμένο εξυπηρετητή. Το πακέτο αυτό ελέγχεται από τον κανόνα <code>check-state</code>, ο οποίος βρίσκει την καταχώριση του στα εξερχόμενα και εκτελεί την αντίστοιχη ενέργεια που σε αυτή την περίπτωση είναι "skipto 500". Το πακέτο προωθείται στον κανόνα 500, γίνεται η μετάφραση της διεύθυνσης του μέσω NAT και απελευθερώνεται στο Internet.</p></div><div class=paragraph><p>Από την μεριά των εισερχόμενων, όποιο πακέτο αναγνωρίζεται ως μέρος μιας υπάρχουσας συνεδρίας, ελέγχεται αυτόματα από τον κανόνα <code>check-state</code> και τους αντίστοιχους κανόνες <code>divert natd</code>. Το μόνο που χρειάζεται να αντιμετωπίσουμε είναι η απόρριψη όλων των προβληματικών πακέτων και η έγκριση μόνο των πακέτων που προορίζονται για εγκεκριμένες υπηρεσίες. Ας υποθέσουμε ότι έχουμε ένα εξυπηρετητή apache ο οποίος εκτελείται στο μηχάνημα με το firewall, και επιθυμούμε το τοπικό site να είναι προσβάσιμο από το δημόσιο Internet. Η εισερχόμενη αίτηση νέας συνεδρίας ταιριάζει με τον κανόνα 100 και η IP διεύθυνση της αντιστοιχίζεται στο τοπικό IP του μηχανήματος με το firewall. Το πακέτο έπειτα ελέγχεται για οποιοδήποτε πρόβλημα μπορεί να έχει σύμφωνα με τους κανόνες που χρησιμοποιούμε, και τελικά ταιριάζει με τον κανόνα 425. Στην περίπτωση αυτή συμβαίνουν δύο πράγματα. Ο κανόνας για το πακέτο γράφεται στο δυναμικό πίνακα καταστάσεων, αλλά αυτή τη φορά περιορίζεται ο αριθμός αιτήσεων νέας συνεδρίας από το συγκεκριμένο IP σε 2. Με αυτό τον τρόπο μπορούμε να αμυνθούμε σε επιθέσεις τύπου άρνησης υπηρεσίας (DoS) όσο αφορά τη συγκεκριμένη θύρα επικοινωνίας. Η ενέργεια του κανόνα είναι το <code>allow</code>, και έτσι το πακέτο απελευθερώνεται στο τοπικό δίκτυο. Το πακέτο που παράγεται ως απάντηση, ελέγχεται από τον κανόνα <code>check-state</code>, ο οποίος αναγνωρίζει ότι ανήκει σε μια ήδη ενεργή συνεδρία, και αποστέλλεται στον κανόνα 500 όπου γίνεται η μετάφραση της διεύθυνσης του μέσω NAT. Το πακέτο τελικά απελευθερώνεται μέσω της διεπαφής εξερχομένων.</p></div><div class=paragraph><p>Υπόδειγμα Κανόνων #1:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
cmd=&#34;ipfw -q add&#34;
skip=&#34;skipto 500&#34;
pif=rl0
ks=&#34;keep-state&#34;
good_tcpo=&#34;22,25,37,43,53,80,443,110,119&#34;

ipfw -q -f flush

$cmd 002 allow all from any to any via xl0  # exclude LAN traffic
$cmd 003 allow all from any to any via lo0  # exclude loopback traffic

$cmd 100 divert natd ip from any to any in via $pif
$cmd 101 check-state

# Authorized outbound packets
$cmd 120 $skip udp from any to xx.168.240.2 53 out via $pif $ks
$cmd 121 $skip udp from any to xx.168.240.5 53 out via $pif $ks
$cmd 125 $skip tcp from any to any $good_tcpo out via $pif setup $ks
$cmd 130 $skip icmp from any to any out via $pif $ks
$cmd 135 $skip udp from any to any 123 out via $pif $ks

# Deny all inbound traffic from non-routable reserved address spaces
$cmd 300 deny all from 192.168.0.0/16  to any in via $pif  #RFC 1918 private IP
$cmd 301 deny all from 172.16.0.0/12   to any in via $pif  #RFC 1918 private IP
$cmd 302 deny all from 10.0.0.0/8      to any in via $pif  #RFC 1918 private IP
$cmd 303 deny all from 127.0.0.0/8     to any in via $pif  #loopback
$cmd 304 deny all from 0.0.0.0/8       to any in via $pif  #loopback
$cmd 305 deny all from 169.254.0.0/16  to any in via $pif  #DHCP auto-config
$cmd 306 deny all from 192.0.2.0/24    to any in via $pif  #reserved for docs
$cmd 307 deny all from 204.152.64.0/23 to any in via $pif  #Sun cluster
$cmd 308 deny all from 224.0.0.0/3     to any in via $pif  #Class D &amp; E multicast

# Authorized inbound packets
$cmd 400 allow udp from xx.70.207.54 to any 68 in $ks
$cmd 420 allow tcp from any to me 80 in via $pif setup limit src-addr 1

$cmd 450 deny log ip from any to any

# This is skipto location for outbound stateful rules
$cmd 500 divert natd ip from any to any out via $pif
$cmd 510 allow ip from any to any

######################## end of rules  ##################</pre></div></div><div class=paragraph><p>Οι παρακάτω κανόνες είναι σχεδόν ίδιοι με τους παραπάνω, αλλά περιέχουν περισσότερα σχόλια για να βοηθήσουν τον αρχάριο χρήστη του IPFW να καταλάβει καλύτερα πως λειτουργούν.</p></div><div class=paragraph><p>Υπόδειγμα Κανόνων #2:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
################ Start of IPFW rules file ###############################
# Flush out the list before we begin.
ipfw -q -f flush

# Set rules command prefix
cmd=&#34;ipfw -q add&#34;
skip=&#34;skipto 800&#34;
pif=&#34;rl0&#34;     # public interface name of NIC
              # facing the public Internet

#################################################################
# No restrictions on Inside LAN Interface for private network
# Change xl0 to your LAN NIC interface name
#################################################################
$cmd 005 allow all from any to any via xl0

#################################################################
# No restrictions on Loopback Interface
#################################################################
$cmd 010 allow all from any to any via lo0

#################################################################
# check if packet is inbound and nat address if it is
#################################################################
$cmd 014 divert natd ip from any to any in via $pif

#################################################################
# Allow the packet through if it has previous been added to the
# the &#34;dynamic&#34; rules table by a allow keep-state statement.
#################################################################
$cmd 015 check-state

#################################################################
# Interface facing Public Internet (Outbound Section)
# Check session start requests originating from behind the
# firewall on the private network or from this gateway server
# destined for the public Internet.
#################################################################

# Allow out access to my ISP&#39;s Domain name server.
# x.x.x.x must be the IP address of your ISP&#39;s DNS
# Dup these lines if your ISP has more than one DNS server
# Get the IP addresses from /etc/resolv.conf file
$cmd 020 $skip tcp from any to x.x.x.x 53 out via $pif setup keep-state

# Allow out access to my ISP&#39;s DHCP server for cable/DSL configurations.
$cmd 030 $skip udp from any to x.x.x.x 67 out via $pif keep-state

# Allow out non-secure standard www function
$cmd 040 $skip tcp from any to any 80 out via $pif setup keep-state

# Allow out secure www function https over TLS SSL
$cmd 050 $skip tcp from any to any 443 out via $pif setup keep-state

# Allow out send &amp; get email function
$cmd 060 $skip tcp from any to any 25 out via $pif setup keep-state
$cmd 061 $skip tcp from any to any 110 out via $pif setup keep-state

# Allow out FreeBSD (make install &amp; CVSUP) functions
# Basically give user root &#34;GOD&#34; privileges.
$cmd 070 $skip tcp from me to any out via $pif setup keep-state uid root

# Allow out ping
$cmd 080 $skip icmp from any to any out via $pif keep-state

# Allow out Time
$cmd 090 $skip tcp from any to any 37 out via $pif setup keep-state

# Allow out nntp news (i.e. news groups)
$cmd 100 $skip tcp from any to any 119 out via $pif setup keep-state

# Allow out secure FTP, Telnet, and SCP
# This function is using SSH (secure shell)
$cmd 110 $skip tcp from any to any 22 out via $pif setup keep-state

# Allow out whois
$cmd 120 $skip tcp from any to any 43 out via $pif setup keep-state

# Allow ntp time server
$cmd 130 $skip udp from any to any 123 out via $pif keep-state

#################################################################
# Interface facing Public Internet (Inbound Section)
# Check packets originating from the public Internet
# destined for this gateway server or the private network.
#################################################################

# Deny all inbound traffic from non-routable reserved address spaces
$cmd 300 deny all from 192.168.0.0/16  to any in via $pif  #RFC 1918 private IP
$cmd 301 deny all from 172.16.0.0/12   to any in via $pif  #RFC 1918 private IP
$cmd 302 deny all from 10.0.0.0/8      to any in via $pif  #RFC 1918 private IP
$cmd 303 deny all from 127.0.0.0/8     to any in via $pif  #loopback
$cmd 304 deny all from 0.0.0.0/8       to any in via $pif  #loopback
$cmd 305 deny all from 169.254.0.0/16  to any in via $pif  #DHCP auto-config
$cmd 306 deny all from 192.0.2.0/24    to any in via $pif  #reserved for docs
$cmd 307 deny all from 204.152.64.0/23 to any in via $pif  #Sun cluster
$cmd 308 deny all from 224.0.0.0/3     to any in via $pif  #Class D &amp; E multicast

# Deny ident
$cmd 315 deny tcp from any to any 113 in via $pif

# Deny all Netbios service. 137=name, 138=datagram, 139=session
# Netbios is MS/Windows sharing services.
# Block MS/Windows hosts2 name server requests 81
$cmd 320 deny tcp from any to any 137 in via $pif
$cmd 321 deny tcp from any to any 138 in via $pif
$cmd 322 deny tcp from any to any 139 in via $pif
$cmd 323 deny tcp from any to any 81  in via $pif

# Deny any late arriving packets
$cmd 330 deny all from any to any frag in via $pif

# Deny ACK packets that did not match the dynamic rule table
$cmd 332 deny tcp from any to any established in via $pif

# Allow traffic in from ISP&#39;s DHCP server. This rule must contain
# the IP address of your ISP&#39;s DHCP server as it&#39;s the only
# authorized source to send this packet type.
# Only necessary for cable or DSL configurations.
# This rule is not needed for &#39;user ppp&#39; type connection to
# the public Internet. This is the same IP address you captured
# and used in the outbound section.
$cmd 360 allow udp from x.x.x.x to any 68 in via $pif keep-state

# Allow in standard www function because I have Apache server
$cmd 370 allow tcp from any to me 80 in via $pif setup limit src-addr 2

# Allow in secure FTP, Telnet, and SCP from public Internet
$cmd 380 allow tcp from any to me 22 in via $pif setup limit src-addr 2

# Allow in non-secure Telnet session from public Internet
# labeled non-secure because ID &amp; PW are passed over public
# Internet as clear text.
# Delete this sample group if you do not have telnet server enabled.
$cmd 390 allow tcp from any to me 23 in via $pif setup limit src-addr 2

# Reject &amp; Log all unauthorized incoming connections from the public Internet
$cmd 400 deny log all from any to any in via $pif

# Reject &amp; Log all unauthorized out going connections to the public Internet
$cmd 450 deny log all from any to any out via $pif

# This is skipto location for outbound stateful rules
$cmd 800 divert natd ip from any to any out via $pif
$cmd 801 allow ip from any to any

# Everything else is denied by default
# deny and log all packets that fell through to see what they are
$cmd 999 deny log all from any to any
################ End of IPFW rules file ###############################</pre></div></div></div></div></div></div></div><hr><div class=last-modified><p><strong>Τελευταία τροποποίηση</strong>: 9 Μαρτίου 2024 από <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Προηγούμενη></i><div class=container><a href=http://172.16.201.134:1313/el/books/handbook/network-servers class=direction>Προηγούμενη</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Αρχική></i><div class=container><a href=../ class=direction>Αρχική</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/el/books/handbook/advanced-networking class=direction>Επόμενη</a></div><i class="fa fa-angle-right" aria-hidden=true title=Επόμενη></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Πίνακας περιεχομένων</h3><nav id=TableOfContents><ul><li><a href=#firewalls-intro>30.1. Σύνοψη</a></li><li><a href=#firewalls-concepts>30.2. Βασικές Έννοιες των Firewalls</a></li><li><a href=#firewalls-apps>30.3. Προγράμματα Firewall</a></li><li><a href=#firewalls-pf>30.4. Το Packet Filter (PF) και το ALTQ του OpenBSD</a></li><li><a href=#firewalls-ipf>30.5. Το IPFILTER (IPF) Firewall</a></li><li><a href=#firewalls-ipfw>30.6. IPFW</a></li></ul></nav><hr><div class=resources><h3>Πηγές</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Λήψη PDF"></i><a href=https://download.freebsd.org/doc/el/books/handbook/handbook_el.pdf>Λήψη PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Τροποποίηση αυτής της σελίδας"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/el/_index target=_blank>Τροποποίηση αυτής της σελίδας</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/el/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Επιλογή γλώσσας">
<span>Greek</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Σύστημα</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>Υψηλή αντίθεση</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/el class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/el/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>