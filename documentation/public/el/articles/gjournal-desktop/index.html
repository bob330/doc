<!doctype html><html class=theme-light lang=el><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/el/articles/gjournal-desktop/><title>Υλοποίηση του UFS Journaling σε ένα Desktop Υπολογιστή | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Υλοποίηση του UFS Journaling σε ένα Desktop Υπολογιστή"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="el"><meta property="og:url" content="http://172.16.201.134:1313/el/articles/gjournal-desktop/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/el\/articles\/gjournal-desktop\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/el>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/el/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/el/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/el/books>Books</a></li><li><a href=http://172.16.201.134:1313/el/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/el/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=el>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Υλοποίηση του UFS Journaling σε ένα Desktop Υπολογιστή</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=legalnotice><a id=trademarks></a><details><summary>Εμπορικά σύμβολα</summary><p>Το FreeBSD είναι ένα κατοχυρωμένο εμπορικό σύμβολο του FreeBSD Foundation.</p><p>Πολλές από τις λέξεις ή φράσεις οι οποίες χρησιμοποιούνται από τους κατασκευαστές ή τους πωλητές τους για να διακρίνουν τα προϊόντα τους θεωρούνται εμπορικά σύμβολα. Όπου αυτές εμφανίζονται σε αυτό το κείμενο και για όσες από αυτές γνωρίζει η Ομάδα Ανάπτυξης του FreeBSD ότι είναι πιθανόν να είναι εμπορικά σύμβολα, θα δείτε ένα από τα σύμβολα: “™” ή “®”.</p></details></div><div class=toc-mobile><h3>Πίνακας περιεχομένων</h3><nav id=TableOfContents><ul><li><a href=#introduction>1. Εισαγωγή</a></li><li><a href=#understanding-journaling>2. Κατανόηση του Journaling στο FreeBSD</a></li><li><a href=#reserve-space>3. Βήματα Κατά την Εγκατάσταση του FreeBSD</a></li><li><a href=#configure-journal>4. Ρύθμιση του Journaling</a></li><li><a href=#troubleshooting-gjournal>5. Αντιμετώπιση Προβλημάτων</a></li><li><a href=#further-reading>6. Επιπλέον Πληροφορίες</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>Περίληψη</p></div><div class=paragraph><p>Ένα σύστημα αρχείων που διαθέτει δυνατότητα journaling, χρησιμοποιεί ένα αρχείο καταγραφής (journal ή ημερολόγιο) στο οποίο γίνονται αρχικά οι εγγραφές πριν καταχωρηθούν στο κανονικό σύστημα αρχείων. Με τον τρόπο αυτό μπορεί να εξασφαλιστεί η ακεραιότητα του συστήματος αρχείων στην περίπτωση κατάρρευσης ή απότομης διακοπής της τροφοδοσίας του. Η χρήση του journaling διασφαλίζει την συνολική ακεραιότητα του συστήματος αρχείων, αλλά δεν μπορεί να διασφαλίσει ότι δεν θα έχουμε απώλεια δεδομένων σε μεμονωμένα αρχεία τα οποία ήταν ενδεχομένως σε χρήση την ώρα της κατάρρευσης. Ένα πλεονέκτημα του journaling είναι η ελαχιστοποίηση του χρόνου που απαιτείται για τον έλεγχο του συστήματος αρχείων σε περίπτωση κακού τερματισμού. Το σύστημα αρχείων UFS που χρησιμοποιείται από το FreeBSD δεν διαθέτει δικό του ενσωματωμένο journaling. Ωστόσο, το πλαίσιο λειτουργιών GEOM στο FreeBSD 7.<em>X</em> παρέχει ένα νέο journal class το οποίο δίνει αυτή τη δυνατότητα, και μάλιστα ανεξάρτητα από το σύστημα αρχείων που χρησιμοποιείται. Στο άρθρο αυτό εξετάζουμε πως μπορούμε να χρησιμοποιήσουμε το journaling σε ένα τυπικό desktop μηχάνημα για εργασία γραφείου.</p></div><hr></div></div><div class=sect1><h2 id=introduction>1. Εισαγωγή<a class=anchor href=#introduction></a></h2><div class=sectionbody><div class=paragraph><p>Αν και οι περισσότεροι εξυπηρετητές που χρησιμοποιούνται σε περιβάλλοντα παραγωγής είναι καλά προστατευμένοι από μη-αναμενόμενους τερματισμούς, δεν συμβαίνει το ίδιο και με το συνηθισμένο desktop μηχάνημα το οποίο βρίσκεται στα χέρια του τελικού χρήστη. Αυτό συνήθως δεν προστατεύεται από διακοπές ρεύματος, ενώ δεν είναι και οι λίγες οι περιπτώσεις που ο κακός τερματισμός οφείλεται σε λανθασμένο χειρισμό του χρήστη (κατά λάθος πίεση του reset κ.α.). Στις περισσότερες από αυτές τις περιπτώσεις, τα Soft Updates που χρησιμοποιεί το σύστημα αρχείων UFS μπορούν να το προστατεύσουν αρκετά καλά, αν και μετά τον προβληματικό τερματισμό απαιτείται συνήθως έλεγχος του συστήματος αρχείων, ο οποίος ακόμα και όταν γίνεται στο παρασκήνιο, διαρκεί αρκετό χρόνο. Σε σπάνιες περιπτώσεις, το σύστημα αρχείων μπορεί να υποστεί ζημιά η οποία να χρειάζεται χειροκίνητη επέμβαση για να διορθωθεί, ενώ είναι πιθανή και η απώλεια δεδομένων.</p></div><div class=paragraph><p>Η νέα δυνατότητα για journaling που παρέχεται από το GEOM μπορεί να βοηθήσει ιδιαίτερα στις παραπάνω περιπτώσεις, ελαχιστοποιώντας το χρόνο που απαιτείται για τον έλεγχο του συστήματος αρχείων και εξασφαλίζοντας ότι το σύστημα θα επανέλθει πολύ σύντομα σε σταθερή κατάσταση.</p></div><div class=paragraph><p>Το άρθρο αυτό περιγράφει μια διαδικασία για την υλοποίηση του UFS journaling σε ένα τυπικό desktop PC (στο οποίο χρησιμοποιείται ένας σκληρός δίσκος τόσο για το σύστημα όσο και για τα δεδομένα). Θα πρέπει να ακολουθήσετε αυτές τις οδηγίες κατά τη διάρκεια μιας νέας εγκατάστασης του FreeBSD. Τα βήματα είναι αρκετά απλά και δεν απαιτούν ιδιαίτερα πολύπλοκες εντολές.</p></div><div class=paragraph><p>Αφού διαβάσετε αυτό το άρθρο, θα ξέρετε:</p></div><div class=ulist><ul><li><p>Πως να δεσμεύσετε κάποιο χώρο στο δίσκο για το journaling κατά τη διάρκεια μιας νέας εγκατάστασης του FreeBSD.</p></li><li><p>Πως να φορτώσετε και να ενεργοποιήσετε το άρθρωμα (module) <code>geom_journal</code> (ή πως να ενσωματώσετε τη λειτουργία του στον προσαρμοσμένο πυρήνα σας).</p></li><li><p>Πως να μετατρέψετε τα υπάρχοντα συστήματα αρχείων σας ώστε να χρησιμοποιούν journaling, και τι παραμέτρους θα πρέπει να δώσετε στο <span class=filename>/etc/fstab</span> ώστε να τα προσαρτήσετε.</p></li><li><p>Πως να ενεργοποιήσετε το journaling σε νέες (άδειες) κατατμήσεις.</p></li><li><p>Πως να αντιμετωπίσετε προβλήματα που σχετίζονται με το journaling.</p></li></ul></div><div class=paragraph><p>Πριν διαβάσετε αυτό το άρθρο, θα πρέπει:</p></div><div class=ulist><ul><li><p>Να κατανοείτε βασικές έννοιες του UNIX® και του FreeBSD.</p></li><li><p>Να είστε εξοικειωμένος με τη διαδικασία εγκατάστασης του FreeBSD και το βοηθητικό πρόγραμμα Sysinstall.</p></li></ul></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Η διαδικασία που περιγράφεται εδώ, προορίζεται για χρήση σε νέες εγκαταστάσεις, όπου δεν υπάρχουν ακόμα αποθηκευμένα δεδομένα χρήστη. Αν και είναι δυνατόν να τροποποιήσετε και να επεκτείνετε τη διαδικασία αυτή σε μηχανήματα που βρίσκονται ήδη σε κανονική χρήση, θα πρέπει οπωσδήποτε να <em>πάρετε αντίγραφα ασφαλείας</em> όλων των σημαντικών δεδομένων πριν επιχειρήσετε οποιαδήποτε αλλαγή. Όταν κάνετε αλλαγές στα συστήματα αρχείων και στις κατατμήσεις των δίσκων σε τέτοιο επίπεδο, είναι πιθανόν να κάνετε λάθη τα οποία θα αποβούν μοιραία για τα δεδομένα σας.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=understanding-journaling>2. Κατανόηση του Journaling στο FreeBSD<a class=anchor href=#understanding-journaling></a></h2><div class=sectionbody><div class=paragraph><p>Το journaling που παρέχεται από το GEOM στο FreeBSD 7.<em>X</em> δεν είναι προσανατολισμένο σε κάποιο συγκεκριμένο σύστημα αρχείων (όπως για παράδειγμα συμβαίνει με το σύστημα αρχείων ext3 στο Linux®) αλλά λειτουργεί σε επίπεδο block. Αν και αυτό σημαίνει ότι μπορεί να χρησιμοποιηθεί σε διαφορετικά συστήματα αρχείων, για το FreeBSD 7.0-RELEASE, είναι δυνατή η χρήση του μόνο στο UFS2.</p></div><div class=paragraph><p>Οι λειτουργίες journaling παρέχονται φορτώνοντας το άρθρωμα <span class=filename>geom_journal.ko</span> στον πυρήνα (ή ενσωματώνοντας τη λειτουργία του σε ένα προσαρμοσμένο πυρήνα) και χρησιμοποιώντας την εντολή <code>gjournal</code> για τη ρύθμιση των συστημάτων αρχείων. Η χρήση του journaling είναι γενικά θεμιτή σε μεγάλα συστήματα αρχείων, όπως είναι το <span class=filename>/usr</span>. Θα χρειαστεί ωστόσο να έχετε δεσμεύσει από πριν κάποιο ελεύθερο χώρο στο δίσκο.</p></div><div class=paragraph><p>Όταν γίνεται χρήση του journaling σε ένα σύστημα αρχείων, απαιτείται κάποιος ελεύθερος χώρος για να αποθηκεύονται τα δεδομένα του ημερολογίου καταγραφής (journal). Ο χώρος του δίσκου που αποθηκεύονται τα πραγματικά δεδομένα αναφέρεται ως <em>παροχέας δεδομένων (data provider)</em>, ενώ ο χώρος στον οποίο αποθηκεύεται το ημερολόγιο ονομάζεται <em>παροχέας ημερολογίου (journal provider).</em> Σε περίπτωση που το journaling γίνεται σε σύστημα αρχείων το οποίο έχει ήδη δεδομένα, οι δύο παροχείς πρέπει να βρίσκονται σε διαφορετικές κατατμήσεις. Σε περίπτωση χρήσης journaling σε νέα κατάτμηση, έχετε την επιλογή να χρησιμοποιήσετε τον ίδιο παροχέα και για τα δεδομένα και για το ημερολόγιο. Σε κάθε περίπτωση, με τη χρήση της εντολής <code>gjournal</code>, οι δύο παροχείς συνδυάζονται για να δημιουργήσουν το τελικό σύστημα αρχείων που υποστηρίζει journaling. Για παράδειγμα:</p></div><div class=ulist><ul><li><p>Θέλετε να χρησιμοποιήσετε journaling στο σύστημα αρχείων <span class=filename>/usr</span>, το οποίο βρίσκεται στο <span class=filename>/dev/ad0s1f</span> (το σύστημα αρχείων περιέχει ήδη δεδομένα).</p></li><li><p>Έχετε κρατήσει κάποιο κενό χώρο στο δίσκο, σε μια κατάτμηση στο <span class=filename>/dev/ad0s1g</span>.</p></li><li><p>Με την χρήση της εντολής <code>gjournal</code>, θα δημιουργηθεί μια νέα συσκευή, η <span class=filename>/dev/ad0s1f.journal</span>, όπου το <span class=filename>/dev/ad0s1f</span> θα είναι ο παροχέας δεδομένων και το <span class=filename>/dev/ad0s1g</span> θα είναι ο παροχέας ημερολογίου. Η νέα αυτή συσκευή θα χρησιμοποιείται πλέον για όλες τις εργασίες που θα εκτελούνται στο σύστημα αρχείων.</p></li></ul></div><div class=paragraph><p>Ο χώρος στο δίσκο που απαιτείται για το ημερολόγιο εξαρτάται από τη χρήση του συστήματος αρχείων, και όχι από το μέγεθος του παροχέα δεδομένων. Για παράδειγμα, σε ένα τυπικό μηχάνημα γραφείου, θα είναι αρκετό να χρησιμοποιήσετε 1 GB για τον παροχέα ημερολογίου του συστήματος αρχείων <span class=filename>/usr</span>, ενώ σε ένα μηχάνημα το οποίο χρησιμοποιείται σε εργασίες όπου οι εγγραφές στο δίσκο είναι πολύ συχνές και μεγάλες σε μέγεθος (π.χ. επεξεργασία video) θα χρειαστείτε περισσότερο χώρο. Σε περίπτωση που ο χώρος που έχει δεσμευθεί για το ημερολόγιο εξαντληθεί πριν γίνει δυνατή η εγγραφή δεδομένων στο κανονικό σύστημα αρχείων, το σύστημα θα καταρρεύσει με kernel panic.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Τα μεγέθη που προτείνονται εδώ για τον παροχέα ημερολογίου, είναι απίθανο να προκαλέσουν πρόβλημα σε τυπική χρήση γραφείου (περιήγηση στο διαδίκτυο, επεξεργασία κειμένου, αναπαραγωγή πολυμέσων). Αν ωστόσο το είδος της εργασίας σας περιλαμβάνει έντονη χρήση του σκληρού δίσκου, μπορείτε να χρησιμοποιήσετε τον ακόλουθο κανόνα για τη μεγαλύτερη δυνατή αξιοπιστία: όλη η μνήμη RAM του συστήματος σας πρέπει να χωράει στο 30% του χώρου του ημερολογίου. Για παράδειγμα, αν το σύστημα σας έχει 1 GB RAM, θα πρέπει να δημιουργήσετε ημερολόγιο μεγέθους περίπου 3.3 GB. (Πολλαπλασιάστε το μέγεθος της RAM με το 3.3 για να βρείτε το μέγεθος του ημερολογίου.)</p></div></td></tr></tbody></table></div><div class=paragraph><p>Για περισσότερες πληροφορίες σχετικά με το journaling, παρακαλούμε διαβάστε τη σελίδα manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=gjournal&amp;sektion=8&amp;format=html">gjournal(8)</a>.</p></div></div></div><div class=sect1><h2 id=reserve-space>3. Βήματα Κατά την Εγκατάσταση του FreeBSD<a class=anchor href=#reserve-space></a></h2><div class=sectionbody><div class=sect2><h3 id=_δέσμευση_χώρου_στο_δίσκο_για_το_journaling>3.1. Δέσμευση Χώρου στο Δίσκο για το Journaling<a class=anchor href=#_δέσμευση_χώρου_στο_δίσκο_για_το_journaling></a></h3><div class=paragraph><p>Ένα τυπικό desktop μηχάνημα, έχει συνήθως ένα σκληρό δίσκο στον οποίο αποθηκεύονται τόσο το λειτουργικό όσο και τα δεδομένα του χρήστη. Συνήθως, οι προεπιλεγμένες κατατμήσεις που δημιουργούνται από το Sysinstall είναι περίπου σωστές: Ένα desktop μηχάνημα δεν χρειάζεται μεγάλη κατάτμηση <span class=filename>/var</span>, ενώ το μεγαλύτερο μέρος του ελεύθερου χώρου αποδίδεται στο <span class=filename>/usr</span>, αφού στους υποκαταλόγους του αποθηκεύονται τα δεδομένα του χρήστη και γίνονται και οι εγκαταστάσεις του λογισμικού.</p></div><div class=paragraph><p>Χρησιμοποιώντας τις προεπιλεγμένες κατατμήσεις (αυτές που δημιουργεί ο επεξεργαστής Disklabel όταν πιέσετε το <kbd>A</kbd>), δεν μένει καθόλου ελεύθερος χώρος. Ωστόσο κάθε κατάτμηση στην οποία θέλετε να χρησιμοποιήσετε journaling, χρειάζεται ακόμα μία για την αποθήκευση του ημερολογίου. Καθώς η κατάτμηση <span class=filename>/usr</span> είναι η μεγαλύτερη, το πλέον λογικό είναι να την μικρύνουμε ελαφρά ώστε να εξασφαλίσουμε το χώρο που απαιτείται για το journaling.</p></div><div class=paragraph><p>Στο παράδειγμα μας, χρησιμοποιείται ένας δίσκος μεγέθους 80 GB. Στην ακόλουθη εικόνα φαίνονται οι προεπιλεγμένες κατατμήσεις όπως δημιουργούνται από τον επεξεργαστή Disklabel κατά την εγκατάσταση:</p></div><div class=imageblock><div class=content><img src=../../../images/articles/gjournal-desktop/disklabel1.png alt=disklabel1></div></div><div class=paragraph><p>Αν τα παραπάνω μεγέθη είναι περίπου τα επιθυμητά για την εγκατάσταση σας, είναι αρκετά εύκολο να ρυθμιστούν ώστε να γίνει δυνατή η χρήση του journaling. Απλώς χρησιμοποιήστε τα πλήκτρα με τα βελάκια για να μετακινήσετε την μπάρα επιλογής στην κατάτμηση <span class=filename>/usr</span> και πιέστε το <kbd>D</kbd> για να την διαγράψετε.</p></div><div class=paragraph><p>Τώρα, μετακινήστε την μπάρα επιλογής στο όνομα του σκληρού δίσκου στο άνω μέρος της οθόνης, και πιέστε <kbd>C</kbd> για να δημιουργήσετε μια νέα κατάτμηση για το <span class=filename>/usr</span>. Η νέα αυτή κατάτμηση θα πρέπει να είναι μικρότερη κατά 1 GB (αν έχετε σκοπό να χρησιμοποιήσετε journaling μόνο στο <span class=filename>/usr</span>), ή κατά 2 GB (αν έχετε σκοπό να χρησιμοποιήσετε journaling τόσο στο <span class=filename>/usr</span> όσο και στο <span class=filename>/var</span>). Στο διάλογο που θα εμφανιστεί, επιλέξτε να δημιουργήσετε σύστημα αρχείων (file system) και γράψτε <span class=filename>/usr</span> ως το σημείο προσάρτησης (mount point).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Είναι αναγκαία η χρήση journaling στην κατάτμηση <span class=filename>/var</span> partition; Φυσιολογικά, το journaling έχει νόημα μόνο σε αρκετά μεγάλες κατατμήσεις. Δεν πρόκειται ωστόσο να δημιουργηθεί κάποιο πρόβλημα αν χρησιμοποιήσετε journaling στο <span class=filename>/var</span>. Αν η χρήση του συγκεκριμένου συστήματος αρχείων είναι μικρή (το οποίο είναι και το πιθανότερο σε ένα dekstop μηχάνημα) ίσως είναι καλή ιδέα να χρησιμοποιήσετε λιγότερο χώρο στο δίσκο για το ημερολόγιο του.</p></div><div class=paragraph><p>Στο παράδειγμα μας, θα ενεργοποιήσουμε το journaling τόσο στο <span class=filename>/usr</span> όσο και στο <span class=filename>/var</span>. Μπορείτε φυσικά να προσαρμόσετε αυτή τη διαδικασία σύμφωνα με τις ανάγκες σας.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Για να απλοποιήσουμε, όσο είναι δυνατόν, τη διαδικασία, θα χρησιμοποιήσουμε το Sysinstall για να δημιουργήσουμε τις κατατμήσεις που απαιτούνται για το journaling. Ωστόσο, κατά τη διάρκεια της εγκατάστασης, το Sysinstall επιμένει να ρωτάει για σημεία προσάρτησης σε κάθε κατάτμηση που δημιουργείται. Στο σημείο αυτό, δεν υπάρχουν σημεία προσάρτησης για τις κατατμήσεις μας, και στην πραγματικότητα <em>δεν τα χρειαζόμαστε καν</em>. Οι κατατμήσεις που χρησιμοποιούνται για τα ημερολόγια, δεν προσαρτώνται κάπου.</p></div><div class=paragraph><p>Για να αποφύγουμε αυτά τα προβλήματα με το Sysinstall, θα δημιουργήσουμε αυτές τις κατατμήσεις ως χώρο swap. Στο swap δεν γίνεται ποτέ προσάρτηση, ενώ και το Sysinstall δεν έχει κανένα πρόβλημα να δημιουργήσει όσες τέτοιες κατατμήσεις χρειαζόμαστε. Μετά την πρώτη εκκίνηση, θα πρέπει ωστόσο να επεξεργαστούμε το αρχείο <span class=filename>/etc/fstab</span> και να αφαιρέσουμε τις έξτρα καταχωρήσεις swap που δημιουργήθηκαν κατά την εγκατάσταση.</p></div><div class=paragraph><p>Για να δημιουργήσετε τους χώρους swap, χρησιμοποιήστε πάλι τα πλήκτρα με τα βελάκια για να μετακινήσετε την μπάρα επιλογής στο άνω μέρος της οθόνης του επεξεργαστή Disklabel, έτσι ώστε να είναι επιλεγμένο το όνομα του σκληρού δίσκου. Κατόπιν, πιέστε <kbd>N</kbd>, δώστε το επιθυμητό μέγεθος (<em>1024M</em>), και επιλέξτε "swap space" από το μενού που εμφανίζεται. Επαναλάβετε για κάθε ημερολόγιο που επιθυμείτε να δημιουργήσετε. Στο παράδειγμα μας, δημιουργούμε δύο κατατμήσεις στις οποίες θα αποθηκεύονται τα ημερολόγια των <span class=filename>/usr</span> και <span class=filename>/var</span>. Το τελικό αποτέλεσμα φαίνεται στην παρακάτω εικόνα:</p></div><div class=imageblock><div class=content><img src=../../../images/articles/gjournal-desktop/disklabel2.png alt=disklabel2></div></div><div class=paragraph><p>Μόλις ολοκληρώσετε τη δημιουργία των κατατμήσεων, σας συνιστούμε να σημειώσετε τα ονόματα τους και τα σημεία προσάρτησης για να τα έχετε πρόχειρα κατά τη φάση των ρυθμίσεων. Με τον τρόπο αυτό θα αποφύγετε τυχόν λάθη που μπορεί να καταστρέψουν την εγκατάσταση σας. Ο παρακάτω πίνακας δείχνει τις σημειώσεις μας για το παράδειγμα μας:</p></div><table class="tableblock frame-all grid-all stretch"><caption class=title>Πίνακας 1. Κατατμήσεις και Ημερολόγια</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Κατάτμηση</th><th class="tableblock halign-left valign-top">Σημείο Προσάρτησης</th><th class="tableblock halign-left valign-top">Ημερολόγιο</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ad0s1d</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>/var</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ad0s1h</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ad0s1f</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>/usr</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ad0s1g</p></td></tr></tbody></table><div class=paragraph><p>Συνεχίστε την εγκατάσταση όπως συνήθως. Σας συνιστούμε ωστόσο να μην εγκαταστήσετε εφαρμογές (πακέτα) μέχρι να ολοκληρώσετε τη διαδικασία του journaling.</p></div></div><div class=sect2><h3 id=first-boot>3.2. Πρώτη Εκκίνηση<a class=anchor href=#first-boot></a></h3><div class=paragraph><p>Το σύστημα σας θα ξεκινήσει φυσιολογικά, αλλά θα χρειαστεί να επεξεργαστείτε το <span class=filename>/etc/fstab</span> και να διαγράψετε τις καταχωρήσεις για τις κατατμήσεις swap που θα χρησιμοποιηθούν στα ημερολόγια. Φυσιολογικά, η κατάτμηση που χρησιμοποιείται ως κανονικό swap τελειώνει με το γράμμα "b" (π.χ. ad0s1b στο παράδειγμα μας). Διαγράψτε όλες τις άλλες καταχωρήσεις για το swap και επανεκκινήστε το σύστημα σας, ώστε να σταματήσει το FreeBSD να τις χρησιμοποιεί.</p></div><div class=paragraph><p>Μόλις το σύστημα εκκινήσει ξανά, θα είμαστε έτοιμοι να ρυθμίσουμε το journaling.</p></div></div></div></div><div class=sect1><h2 id=configure-journal>4. Ρύθμιση του Journaling<a class=anchor href=#configure-journal></a></h2><div class=sectionbody><div class=sect2><h3 id=running-gjournal>4.1. Εκτέλεση της Εντολής <code>gjournal</code><a class=anchor href=#running-gjournal></a></h3><div class=paragraph><p>Έχοντας προετοιμάσει όλες τις απαραίτητες κατατμήσεις, είναι σχετικά απλό να ρυθμίσουμε το journaling. Θα πρέπει να μεταβούμε σε κατάσταση ενός χρήστη, για το λόγο αυτό εισέλθετε στο σύστημα ως <code>root</code> και γράψτε:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown now</span></code></pre></div></div><div class=paragraph><p>Πιέστε <kbd>Enter</kbd> για να βγείτε στο προεπιλεγμένο κέλυφος. Θα πρέπει να αποπροσαρτήσουμε τις κατατμήσεις στις οποίες θα γίνει το journaling, στο παράδειγμα μας τις <span class=filename>/usr</span> και <span class=filename>/var</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># umount /usr /var</span></code></pre></div></div><div class=paragraph><p>Φορτώστε το άρθρωμα του πυρήνα που απαιτείται για το journaling:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal load</span></code></pre></div></div><div class=paragraph><p>Χρησιμοποιήστε τώρα τις σημειώσεις σας για να καθορίσετε ποια κατάτμηση χρησιμοποιείται για κάθε ημερολόγιο. Στο παράδειγμα μας, το <span class=filename>/usr</span> βρίσκεται στο <span class=filename>ad0s1f</span> και το ημερολόγιο του θα είναι στο <span class=filename>ad0s1g</span>, ενώ το <span class=filename>/var</span> είναι στο <span class=filename>ad0s1d</span> και το ημερολόγιο του θα είναι στο <span class=filename>ad0s1h</span>. Θα χρειαστείτε τις παρακάτω εντολές:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal label ad0s1f ad0s1g</span>
GEOM_JOURNAL: Journal 2948326772: ad0s1f contains data.
GEOM_JOURNAL: Journal 2948326772: ad0s1g contains journal.
<span class=c># gjournal label ad0s1d ad0s1h</span>
GEOM_JOURNAL: Journal 3193218002: ad0s1d contains data.
GEOM_JOURNAL: Journal 3193218002: ad0s1h contains journal.</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Αν ο τελευταίος τομέας κάποιας από τις κατατμήσεις είναι σε χρήση, η εντολή <code>gjournal</code> θα σας επιστρέψει ένα μήνυμα λάθους. Θα πρέπει να εκτελέσετε την εντολή χρησιμοποιώντας την παράμετρο <code>-F</code> με την οποία θα υποχρεώσετε την επανεγγραφή του τομέα, π.χ.:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal label -f ad0s1d ad0s1h</span></code></pre></div></div><div class=paragraph><p>Μια που πρόκειται για νέα εγκατάσταση, είναι μάλλον απίθανο να προκαλέσετε κάποιο πρόβλημα.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Στο σημείο αυτό δημιουργούνται δύο νέες συσκευές, οι <span class=filename>ad0s1d.journal</span> και <span class=filename>ad0s1f.journal</span>. Αυτές αντιπροσωπεύουν τις κατατμήσεις <span class=filename>/var</span> και <span class=filename>/usr</span> που θα πρέπει να προσαρτήσουμε. Πριν τις προσαρτήσουμε ωστόσο, θα πρέπει να θέσουμε την επιλογή journal και να αναιρέσουμε την επιλογή Soft Updates:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tunefs -J enable -n disable ad0s1d.journal</span>
tunefs: gjournal <span class=nb>set
</span>tunefs: soft updates cleared

<span class=c># tunefs -J enable -n disable ad0s1f.journal</span>
tunefs: gjournal <span class=nb>set
</span>tunefs: soft updates cleared</code></pre></div></div><div class=paragraph><p>Προσαρτήστε τώρα χειροκίνητα τις νέες συσκευές στα αντίστοιχα σημεία προσάρτησης (σημειώστε ότι μπορούμε πλέον να χρησιμοποιήσουμε την επιλογή <code>async</code> κατά την προσάρτηση):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -o async /dev/ad0s1d.journal /var</span>
<span class=c># mount -o async /dev/ad0s1f.journal /usr</span></code></pre></div></div><div class=paragraph><p>Επεξεργαστείτε το αρχείο <span class=filename>/etc/fstab</span> και ανανεώστε τις καταχωρήσεις για τις κατατμήσεις <span class=filename>/usr</span> και <span class=filename>/var</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/ad0s1f.journal     /usr            ufs     rw,async      2       2
/dev/ad0s1d.journal     /var            ufs     rw,async      2       2</pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Βεβαιωθείτε ότι οι παραπάνω καταχωρήσεις είναι σωστές, διαφορετικά θα έχετε πρόβλημα να εκκινήσετε κανονικά στην επόμενη επανεκκίνηση του συστήματος σας.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Τέλος, επεξεργαστείτε το αρχείο <span class=filename>/boot/loader.conf</span> και προσθέστε την ακόλουθη γραμμή ώστε να φορτώνεται το άρθρωμα <a href="https://man.freebsd.org/cgi/man.cgi?query=gjournal&amp;sektion=8&amp;format=html">gjournal(8)</a> σε κάθε εκκίνηση:</p></div><div class="literalblock programlisting"><div class=content><pre>geom_journal_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Συγχαρητήρια! Το σύστημα σας είναι τώρα έτοιμο για journaling. Μπορείτε να γράψετε <code>exit</code> για να επιστρέψετε στην κανονική λειτουργία (πολλαπλών χρηστών) ή να επανεκκινήσετε το σύστημα σας (συνίσταται) για να ελέγξετε τις ρυθμίσεις σας. Κατά την εκκίνηση, θα δείτε μηνύματα όπως το παρακάτω:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ad0: 76293MB XEC XE800JD-00HBC0 08.02D08 at ata0-master SATA150
GEOM_JOURNAL: Journal 2948326772: ad0s1g contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1h contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1d contains data.
GEOM_JOURNAL: Journal ad0s1d clean.
GEOM_JOURNAL: Journal 2948326772: ad0s1f contains data.
GEOM_JOURNAL: Journal ad0s1f clean.</code></pre></div></div><div class=paragraph><p>Μετά από ένα προβληματικό τερματισμό θα δείτε μηνύματα όπως το παρακάτω:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>GEOM_JOURNAL: Journal ad0s1d consistent.</code></pre></div></div><div class=paragraph><p>Αυτό συνήθως σημαίνει ότι το <a href="https://man.freebsd.org/cgi/man.cgi?query=gjournal&amp;sektion=8&amp;format=html">gjournal(8)</a> χρησιμοποίησε τις πληροφορίες του ημερολογίου για να επιστρέψει το σύστημα αρχείων σε σταθερή κατάσταση.</p></div></div><div class=sect2><h3 id=gjournal-new>4.2. Χρήση του Journaling σε Νέες Κατατμήσεις<a class=anchor href=#gjournal-new></a></h3><div class=paragraph><p>Αν και η παραπάνω διαδικασία είναι απαραίτητη για να χρησιμοποιήσετε journaling σε κατατμήσεις που έχουν ήδη δεδομένα, η αντίστοιχη διαδικασία για νέες κατατμήσεις είναι πιο απλή. Στην περίπτωση αυτή, μπορεί να χρησιμοποιηθεί ο ίδιος παροχέας τόσο για τα δεδομένα όσο και για το ημερολόγιο. Για παράδειγμα, υποθέστε ότι έχετε προσθέσει ένα νέο δίσκο και έχετε δημιουργήσει την κατάτμηση <span class=filename>/dev/ad1s1d</span>. Η δημιουργία του ημερολογίου είναι αρκετά απλή και φαίνεται παρακάτω:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal label ad1s1d</span></code></pre></div></div><div class=paragraph><p>Το προεπιλεγμένο μέγεθος του ημερολογίου είναι 1 GB. Μπορείτε ωστόσο να το ρυθμίσετε χρησιμοποιώντας την επιλογή <code>-s</code>. Μπορείτε να δώσετε τιμές σε bytes, ή να βάλετε μετά την τιμή ένα από τα γράμματα <code>K</code>, <code>M</code> ή <code>G</code> για να δηλώσετε Kilobytes, Megabytes ή Gigabytes αντίστοιχα. Σημειώστε ότι η εντολή <code>gjournal</code>, δεν θα σας επιτρέψει να δημιουργήσετε ημερολόγιο που να είναι ακατάλληλο λόγω μικρού μεγέθους.</p></div><div class=paragraph><p>Για παράδειγμα, για να δημιουργήσετε ένα ημερολόγιο μεγέθους 2 GB, μπορείτε να χρησιμοποιήσετε την ακόλουθη εντολή:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal label -s 2G ad1s1d</span></code></pre></div></div><div class=paragraph><p>Μπορείτε έπειτα να δημιουργήσετε ένα σύστημα αρχείων στη νέα σας κατάτμηση, και ταυτόχρονα να ενεργοποιήσετε το journaling, χρησιμοποιώντας την επιλογή <code>-J</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># newfs -J /dev/ad1s1d.journal</span></code></pre></div></div></div><div class=sect2><h3 id=configure-kernel>4.3. Ενσωμάτωση του Journaling σε Προσαρμοσμένο Πυρήνα<a class=anchor href=#configure-kernel></a></h3><div class=paragraph><p>Αν δεν θέλετε να φορτώσετε το <code>geom_journal</code> ως άρθρωμα, μπορείτε να ενσωματώσετε τις λειτουργίες του στον προσαρμοσμένο πυρήνα σας. Επεξεργαστείτε το αρχείο ρυθμίσεων του πυρήνα, και βεβαιωθείτε ότι περιλαμβάνει τις ακόλουθες δύο γραμμές:</p></div><div class="literalblock programlisting"><div class=content><pre>options UFS_GJOURNAL # Σημείωση: η επιλογή αυτή υπάρχει στο GENERIC

options GEOM_JOURNAL # Θα πρέπει να προσθέσετε αυτή τη γραμμή</pre></div></div><div class=paragraph><p>Μεταγλωττίστε και επανεγκαταστήστε τον πυρήνα σας χρησιμοποιώντας τις σχετικές <a href=https://docs.freebsd.org/el/books/handbook/kernelconfig#kernelconfig>οδηγίες στο Εγχειρίδιο του FreeBSD.</a></p></div><div class=paragraph><p>Μην ξεχάσετε να αφαιρέσετε την αντίστοιχη καταχώρηση "load" από το αρχείο <span class=filename>/boot/loader.conf</span> αν την είχατε χρησιμοποιήσει προηγουμένως.</p></div></div></div></div><div class=sect1><h2 id=troubleshooting-gjournal>5. Αντιμετώπιση Προβλημάτων<a class=anchor href=#troubleshooting-gjournal></a></h2><div class=sectionbody><div class=paragraph><p>Το ακόλουθο τμήμα καλύπτει συχνές ερωτήσεις σχετικά με προβλήματα που μπορείτε να συναντήσετε στην υλοποίηση του jounaling.</p></div><div class=sect2><h3 id=_κατά_τη_διάρκεια_έντονης_χρήσης_του_δίσκου_το_σύστημα_μου_σταματάει_με_kernel_panic_υπάρχει_περίπτωση_αυτό_να_σχετίζεται_με_το_journaling>5.1. Κατά τη διάρκεια έντονης χρήσης του δίσκου, το σύστημα μου σταματάει με kernel panic. Υπάρχει περίπτωση αυτό να σχετίζεται με το journaling;<a class=anchor href=#_κατά_τη_διάρκεια_έντονης_χρήσης_του_δίσκου_το_σύστημα_μου_σταματάει_με_kernel_panic_υπάρχει_περίπτωση_αυτό_να_σχετίζεται_με_το_journaling></a></h3><div class=paragraph><p>Είναι πιθανό το ημερολόγιο να γεμίζει πριν προλάβουν τα προηγούμενα δεδομένα του να μεταφερθούν στο σύστημα αρχείων. Θα πρέπει να θυμάστε ότι το μέγεθος του ημερολογίου δεν εξαρτάται από το μέγεθος του παροχέα δεδομένων, αλλά από το φόρτο εργασίας του. Αν η δραστηριότητα του δίσκου σας είναι υψηλή, θα χρειαστείτε μεγαλύτερο μέγεθος για την κατάτμηση του ημερολογίου. Δείτε τη σχετική σημείωση στην ενότητα <a href=#understanding-journaling>Κατανόηση του Journaling στο FreeBSD</a>.</p></div></div><div class=sect2><h3 id=_έκανα_κάποιο_λάθος_στις_ρυθμίσεις_και_δεν_μπορώ_πλέον_να_ξεκινήσω_κανονικά_το_σύστημα_μου_υπάρχει_τρόπος_να_το_διορθώσω>5.2. Έκανα κάποιο λάθος στις ρυθμίσεις, και δεν μπορώ πλέον να ξεκινήσω κανονικά το σύστημα μου. Υπάρχει τρόπος να το διορθώσω;<a class=anchor href=#_έκανα_κάποιο_λάθος_στις_ρυθμίσεις_και_δεν_μπορώ_πλέον_να_ξεκινήσω_κανονικά_το_σύστημα_μου_υπάρχει_τρόπος_να_το_διορθώσω></a></h3><div class=paragraph><p>Πιθανόν ξεχάσατε να προσθέσετε (ή έχετε κάνει λάθος) την καταχώρηση στο <span class=filename>/boot/loader.conf</span>, ή ίσως υπάρχει λάθος στο αρχείο <span class=filename>/etc/fstab</span>. Τα λάθη αυτά συνήθως διορθώνονται εύκολα. Πιέστε <kbd>Enter</kbd> για να ξεκινήσετε το προεπιλεγμένο κέλυφος λειτουργίας ενός χρήστη. Μετά εντοπίστε την πηγή του προβλήματος:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat /boot/loader.conf</span></code></pre></div></div><div class=paragraph><p>Αν λείπει ή υπάρχει λάθος στην καταχώρηση <code>geom_journal_load</code>, οι αντίστοιχες συσκευές δεν δημιουργούνται καν. Μπορείτε να φορτώσετε το άρθρωμα χειροκίνητα, να προσαρτήσετε όλες τις κατατμήσεις, και να συνεχίσετε με την κανονική εκκίνηση:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal load</span>

GEOM_JOURNAL: Journal 2948326772: ad0s1g contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1h contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1d contains data.
GEOM_JOURNAL: Journal ad0s1d clean.
GEOM_JOURNAL: Journal 2948326772: ad0s1f contains data.
GEOM_JOURNAL: Journal ad0s1f clean.

<span class=c># mount -a</span>
<span class=c># exit</span>
<span class=o>(</span>η εκκίνηση συνεχίζεται<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Αν ωστόσο η καταχώρηση αυτή είναι σωστή, ρίξτε μια ματιά στο αρχείο <span class=filename>/etc/fstab</span>. Το πιο πιθανό είναι να βρείτε ότι κάποια καταχώρηση λείπει, ή είναι λάθος. Στην περίπτωση αυτή, προσαρτήστε χειροκίνητα όλες τις κατατμήσεις και συνεχίστε την εκκίνηση κανονικά.</p></div></div><div class=sect2><h3 id=_μπορώ_να_καταργήσω_το_journaling_και_να_επιστρέψω_στο_κανονικό_σύστημα_αρχείων_με_τα_soft_updates>5.3. Μπορώ να καταργήσω το journaling και να επιστρέψω στο κανονικό σύστημα αρχείων με τα Soft Updates;<a class=anchor href=#_μπορώ_να_καταργήσω_το_journaling_και_να_επιστρέψω_στο_κανονικό_σύστημα_αρχείων_με_τα_soft_updates></a></h3><div class=paragraph><p>Βέβαια. Χρησιμοποιήστε την ακόλουθη διαδικασία η οποία αναιρεί τις αλλαγές. Μπορείτε έπειτα να χρησιμοποιήσετε τις κατατμήσεις των ημερολογίων για άλλο σκοπό, εφόσον το επιθυμείτε.</p></div><div class=paragraph><p>Εισέλθετε ως <code>root</code> και μεταβείτε σε κατάσταση ενός χρήστη:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown now</span></code></pre></div></div><div class=paragraph><p>Αποπροσαρτήστε τις κατατμήσεις που χρησιμοποιούν journaling:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># umount /usr /var</span></code></pre></div></div><div class=paragraph><p>Συγχρονίστε τα ημερολόγια:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal sync</span></code></pre></div></div><div class=paragraph><p>Σταματήστε τους παροχείς ημερολογίου:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal stop ad0s1d.journal</span>
<span class=c># gjournal stop ad0s1f.journal</span></code></pre></div></div><div class=paragraph><p>Διαγράψτε τα metadata του journaling από όλες τις συσκευές που χρησιμοποιήσατε:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gjournal clear ad0s1d</span>
<span class=c># gjournal clear ad0s1f</span>
<span class=c># gjournal clear ad0s1g</span>
<span class=c># gjournal clear ad0s1h</span></code></pre></div></div><div class=paragraph><p>Αναιρέστε την επιλογή του journaling, και θέστε ξανά την επιλογή για Soft Updates:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tunefs -J disable -n enable ad0s1d</span>
tunefs: gjournal cleared
tunefs: soft updates <span class=nb>set</span>

<span class=c># tunefs-J disable -n enable ad0s1f</span>
tunefs: gjournal cleared
tunefs: soft updates <span class=nb>set</span></code></pre></div></div><div class=paragraph><p>Προσαρτήστε χειροκίνητα τις κανονικές κατατμήσεις:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -o rw /dev/ad0s1d  /var</span>
<span class=c># mount -o rw /dev/ad0s1f  /usr</span></code></pre></div></div><div class=paragraph><p>Επεξεργαστείτε το <span class=filename>/etc/fstab</span> και επαναφέρατε τις προηγούμενες ρυθμίσεις:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/ad0s1f     /usr            ufs     rw      2       2
/dev/ad0s1d     /var            ufs     rw      2       2</pre></div></div><div class=paragraph><p>Τέλος, επεξεργαστείτε το αρχείο <span class=filename>/boot/loader.conf</span>, αφαιρέστε την καταχώρηση που φορτώνει το άρθρωμα <code>geom_journal</code> και επανεκκινήστε το σύστημα σας.</p></div></div></div></div><div class=sect1><h2 id=further-reading>6. Επιπλέον Πληροφορίες<a class=anchor href=#further-reading></a></h2><div class=sectionbody><div class=paragraph><p>Το journaling είναι μια σχετικά νέα δυνατότητα του FreeBSD, και έτσι δεν είναι ακόμα καλά τεκμηριωμένη. Ίσως όμως να βρείτε χρήσιμες πληροφορίες στις παρακάτω αναφορές:</p></div><div class=ulist><ul><li><p>Υπάρχει ένα <a href=https://docs.freebsd.org/el/books/handbook/geom#geom-gjournal>νέο τμήμα για το journaling</a> στο Εγχειρίδιο του FreeBSD.</p></li><li><p><a href=http://lists.freebsd.org/pipermail/freebsd-current/2006-June/064043.html>Αυτή η δημοσίευση</a> στη λίστα <a href=https://lists.FreeBSD.org/subscription/freebsd-current>ηλεκτρονική λίστα της έκδοσης FreeBSD-CURRENT</a> από τον δημιουργό του <a href="https://man.freebsd.org/cgi/man.cgi?query=gjournal&amp;sektion=8&amp;format=html">gjournal(8)</a>, <code>Paweł Jakub Dawidek &lt;<a href=mailto:pjd@FreeBSD.org>pjd@FreeBSD.org</a>></code>.</p></li><li><p><a href=http://lists.freebsd.org/pipermail/freebsd-questions/2008-April/173501.html>Αυτή η δημοσίευση</a> στη λίστα <a href=https://lists.FreeBSD.org/subscription/freebsd-questions>ηλεκτρονική λίστα γενικών ερωτήσεων του FreeBSD</a> από τον <code>Ivan Voras &lt;<a href=mailto:ivoras@FreeBSD.org>ivoras@FreeBSD.org</a>></code>.</p></li><li><p>Οι σελίδες manual του <a href="https://man.freebsd.org/cgi/man.cgi?query=gjournal&amp;sektion=8&amp;format=html">gjournal(8)</a> και <a href="https://man.freebsd.org/cgi/man.cgi?query=geom&amp;sektion=8&amp;format=html">geom(8)</a>.</p></li></ul></div></div></div><hr><div class=last-modified><p><strong>Τελευταία τροποποίηση</strong>: 3 Νοεμβρίου 2021 από <a href="https://cgit.freebsd.org/doc/commit/?id=64acd169b8" target=_blank>Sergio Carlavilla Delgado</a></p></div></div><aside class=toc><div class=toc-content><h3>Πίνακας περιεχομένων</h3><nav id=TableOfContents><ul><li><a href=#introduction>1. Εισαγωγή</a></li><li><a href=#understanding-journaling>2. Κατανόηση του Journaling στο FreeBSD</a></li><li><a href=#reserve-space>3. Βήματα Κατά την Εγκατάσταση του FreeBSD</a></li><li><a href=#configure-journal>4. Ρύθμιση του Journaling</a></li><li><a href=#troubleshooting-gjournal>5. Αντιμετώπιση Προβλημάτων</a></li><li><a href=#further-reading>6. Επιπλέον Πληροφορίες</a></li></ul></nav><hr><div class=resources><h3>Πηγές</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Λήψη PDF"></i><a href=https://download.freebsd.org/doc/el/articles/gjournal-desktop/gjournal-desktop_el.pdf>Λήψη PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Τροποποίηση αυτής της σελίδας"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/el/_index target=_blank>Τροποποίηση αυτής της σελίδας</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/el/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Επιλογή γλώσσας">
<span>Greek</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Σύστημα</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>Υψηλή αντίθεση</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/el class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/el/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>