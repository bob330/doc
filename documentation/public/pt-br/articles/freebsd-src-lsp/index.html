<!doctype html><html class=theme-light lang=pt-br><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Utilize servidores de linguagem para o desenvolvimento na árvore src do FreeBSD para obter resultados precisos e completos ao buscar a definição de um termo no código fonte."><meta name=keywords content="FreeBSD,Language Server,LSP"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/pt-br/articles/freebsd-src-lsp/><title>Utilize Servidores de Linguagem para o Desenvolvimento na Árvore Src do FreeBSD | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Utilize Servidores de Linguagem para o Desenvolvimento na Árvore Src do FreeBSD"><meta property="og:description" content="Utilize servidores de linguagem para o desenvolvimento na árvore src do FreeBSD para obter resultados precisos e completos ao buscar a definição de um termo no código fonte."><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="pt-br"><meta property="og:url" content="http://172.16.201.134:1313/pt-br/articles/freebsd-src-lsp/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/pt-br\/articles\/freebsd-src-lsp\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/pt-br>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/pt-br/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/pt-br/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/pt-br/books>Books</a></li><li><a href=http://172.16.201.134:1313/pt-br/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/pt-br/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=pt-br>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Utilize Servidores de Linguagem para o Desenvolvimento na Árvore Src do FreeBSD</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Esta tradução pode estar desatualizada. Para ajudar com as traduções, acesse a <a href=https://translate-dev.freebsd.org/ target=_blank>ferramenta de traduções do FreeBSD</a>.</p></div><div class=copyright>Copyright © 2021 The FreeBSD Foundation</div><div class=legalnotice><a id=trademarks></a><details><summary>trademarks</summary><p>FreeBSD is a registered trademark of the FreeBSD Foundation.</p></details></div><div class=toc-mobile><h3>Índice</h3><nav id=TableOfContents><ul><li><a href=#intro>1. Introdução</a></li><li><a href=#requirements>2. Requisitos</a></li><li><a href=#editor-settings>3. Configurações do editor</a></li><li><a href=#cdb>4. Banco de dados de compilação</a></li><li><a href=#final>5. Finalizando</a></li></ul></nav></div><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=intro>1. Introdução<a class=anchor href=#intro></a></h2><div class=sectionbody><div class=paragraph><p>Este guia é sobre como configurar uma árvore src do FreeBSD com servidores de linguagem realizando a indexação de código fonte. O guia descreve os passos para o Vim/NeoVim e o VSCode. Se você usar um editor de texto diferente, pode usar este guia como referência e procurar os comandos equivalentes para o seu editor preferido.</p></div></div></div><div class=sect1><h2 id=requirements>2. Requisitos<a class=anchor href=#requirements></a></h2><div class=sectionbody><div class=paragraph><p>Para seguir este guia, precisamos instalar certos requisitos. Precisamos de um servidor de linguagem, <code>ccls</code> ou <code>clangd</code>, e opcionalmente um banco de dados de compilação.</p></div><div class=paragraph><p>A instalação do servidor de linguagem pode ser realizada via <code>pkg</code> ou via ports. Se escolhermos <code>clangd</code>, precisaremos instalar o <code>llvm</code>.</p></div><div class=paragraph><p>Usando o <code>pkg</code> para instalar o <code>ccls</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg install ccls</span></code></pre></div></div><div class=paragraph><p>Se quisermos usar o <code>clangd</code>, precisaremos instalar o <code>llvm</code> (O comando de exemplo usa o <code>llvm15</code>, mas escolha a versão que desejar):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg install llvm15</span></code></pre></div></div><div class=paragraph><p>Para instalar via ports, escolha a sua combinação favorita de ferramentas de cada categoria abaixo:</p></div><div class=ulist><ul><li><p>Implementações de servidores de linguagem</p><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/ccls/>devel/ccls</a></p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/llvm12/>devel/llvm12</a> (Outras versões também são aceitáveis, mas as mais novas são melhores. Substitua <code>clangd12</code> por <code>clangdN</code> no caso de outras versões serem usadas.)</p></li></ul></div></li><li><p>Editores</p><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/editors/vim/>editors/vim</a></p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/editors/neovim/>editors/neovim</a></p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/editors/vscode/>editors/vscode</a></p></li></ul></div></li><li><p>Gerador de banco de dados de compilação</p><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/python/>devel/python</a> (Para a implementação do scan-build-py do llvm)</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/py-pip/>devel/py-pip</a> (Para a implementação do scan-build do rizsotto)</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/devel/bear/>devel/bear</a></p></li></ul></div></li></ul></div></div></div><div class=sect1><h2 id=editor-settings>3. Configurações do editor<a class=anchor href=#editor-settings></a></h2><div class=sectionbody><div class=sect2><h3 id=settings-vim>3.1. Vim/Neovim<a class=anchor href=#settings-vim></a></h3><div class=sect3><h4 id=_plugins_de_cliente_lsp>3.1.1. Plugins de cliente LSP<a class=anchor href=#_plugins_de_cliente_lsp></a></h4><div class=paragraph><p>O gerenciador de plugin integrado é usado para ambos os editores neste exemplo. O plugin do cliente LSP usado é o <a href=https://github.com/prabirshrestha/vim-lsp>prabirshrestha/vim-lsp</a>.</p></div><div class=paragraph><p>Para configurar o plugin do cliente LSP para o Neovim:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir -p ~/.config/nvim/pack/lsp/start</span>
<span class=c># git clone https://github.com/prabirshrestha/vim-lsp ~/.config/nvim/pack/lsp/start/vim-lsp</span></code></pre></div></div><div class=paragraph><p>e para o Vim:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir -p ~/.vim/pack/lsp/start</span>
<span class=c># git clone https://github.com/prabirshrestha/vim-lsp ~/.vim/pack/lsp/start/vim-lsp</span></code></pre></div></div><div class=paragraph><p>Para habilitar o plugin do cliente LSP no editor, adicione o seguinte trecho em <span class=filepath>~/.config/nvim/init.vim</span> ao usar o Neovim, ou <span class=filepath>~/.vim/vimrc</span> ao usar o Vim:</p></div><div class=listingblock><div class=title>Para o ccls</div><div class=content><pre class="rouge highlight"><code data-lang=vim><span class=k>au</span> <span class=nb>User</span> lsp_setup <span class=k>call</span> <span class=nb>lsp</span>#register_server<span class=p>({</span>
<span class=se>    \</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;ccls&#39;</span><span class=p>,</span>
<span class=se>    \</span> <span class=s1>&#39;cmd&#39;</span><span class=p>:</span> <span class=p>{</span>server_info<span class=p>-&gt;[</span><span class=s1>&#39;ccls&#39;</span><span class=p>]},</span>
<span class=se>    \</span> <span class=s1>&#39;allowlist&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;cpp&#39;</span><span class=p>,</span> <span class=s1>&#39;objc&#39;</span><span class=p>],</span>
<span class=se>    \</span> <span class=s1>&#39;initialization_options&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=se>    \</span>     <span class=s1>&#39;cache&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=se>    \</span>         <span class=s1>&#39;hierarchicalPath&#39;</span><span class=p>:</span> <span class=k>v</span><span class=p>:</span>true
<span class=se>    \</span>     <span class=p>}</span>
<span class=se>    \</span> <span class=p>}})</span></code></pre></div></div><div class=listingblock><div class=title>Para o clangd</div><div class=content><pre class="rouge highlight"><code data-lang=vim><span class=k>au</span> <span class=nb>User</span> lsp_setup <span class=k>call</span> <span class=nb>lsp</span>#register_server<span class=p>({</span>
<span class=se>    \</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;clangd&#39;</span><span class=p>,</span>
<span class=se>    \</span> <span class=s1>&#39;cmd&#39;</span><span class=p>:</span> <span class=p>{</span>server_info<span class=p>-&gt;[</span><span class=s1>&#39;clangd15&#39;</span><span class=p>,</span> <span class=s1>&#39;--background-index&#39;</span><span class=p>,</span> <span class=s1>&#39;--header-insertion=never&#39;</span><span class=p>]},</span>
<span class=se>    \</span> <span class=s1>&#39;allowlist&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;cpp&#39;</span><span class=p>,</span> <span class=s1>&#39;objc&#39;</span><span class=p>],</span>
<span class=se>    \</span> <span class=s1>&#39;initialization_options&#39;</span><span class=p>:</span> <span class=p>{},</span>
<span class=se>    \</span> <span class=p>})</span></code></pre></div></div><div class=paragraph><p>Dependendo da versão que você instalou para o <code>clangd</code>, pode ser necessário atualizar o <code>server-info</code> para apontar para o binário correto.</p></div><div class=paragraph><p>Por favor, consulte <a href=https://github.com/prabirshrestha/vim-lsp/blob/master/README.md#registering-servers class=bare>https://github.com/prabirshrestha/vim-lsp/blob/master/README.md#registering-servers</a> para aprender sobre como configurar atalhos e as funções para autocompletar o código. O site oficial do clangd é <a href=https://clangd.llvm.org class=bare>https://clangd.llvm.org</a>, e o repositório do ccls é <a href=https://github.com/MaskRay/ccls/ class=bare>https://github.com/MaskRay/ccls/</a>.</p></div><div class=paragraph><p>Abaixo estão as configurações de referência para atalhos de teclado e o autocomplemento de código. Insira o seguinte trecho em <span class=filepath>~/.config/nvim/init.vim</span> ou <span class=filepath>~/.vim/vimrc</span> para que usuários do Vim possam utilizá-las:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=vim><span class=k>function</span><span class=p>!</span> <span class=nv>s:on_lsp_buffer_enabled</span><span class=p>()</span> abort
    <span class=k>setlocal</span> <span class=nb>omnifunc</span><span class=p>=</span><span class=nb>lsp</span>#<span class=nb>complete</span>
    <span class=k>setlocal</span> <span class=nb>completeopt</span><span class=p>-=</span>preview
    <span class=k>setlocal</span> <span class=nb>keywordprg</span><span class=p>=:</span>LspHover

    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-]&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>definition<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span>W<span class=p>&gt;]</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>peek<span class=p>-</span>definition<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span>W<span class=p>&gt;&lt;</span>C<span class=p>-]&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>peek<span class=p>-</span>definition<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=k>gr</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>references<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span><span class=k>n</span><span class=p>&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span><span class=k>next</span><span class=p>-</span>reference<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span>C<span class=p>-</span><span class=k>p</span><span class=p>&gt;</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span><span class=k>previous</span><span class=p>-</span>reference<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gI <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>implementation<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> <span class=k>go</span> <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>document<span class=p>-</span>symbol<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gS <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>workspace<span class=p>-</span>symbol<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> ga <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>code<span class=p>-</span>action<span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gR <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span><span class=nb>rename</span><span class=p>)</span>
    nmap <span class=p>&lt;</span><span class=k>buffer</span><span class=p>&gt;</span> gm <span class=p>&lt;</span>plug<span class=p>&gt;(</span><span class=nb>lsp</span><span class=p>-</span>signature<span class=p>-</span><span class=k>help</span><span class=p>)</span>
<span class=k>endfunction</span>

augroup lsp_install
    <span class=k>au</span><span class=p>!</span>
    autocmd <span class=nb>User</span> lsp_buffer_enabled <span class=k>call</span> <span class=nv>s:on_lsp_buffer_enabled</span><span class=p>()</span>
augroup END</code></pre></div></div></div></div><div class=sect2><h3 id=settings-vscode>3.2. VSCode<a class=anchor href=#settings-vscode></a></h3><div class=sect3><h4 id=_plugins_de_cliente_lsp_2>3.2.1. Plugins de cliente LSP<a class=anchor href=#_plugins_de_cliente_lsp_2></a></h4><div class=paragraph><p>Plugins de cliente LSP são necessários para iniciar o daemon do servidor de linguagem. Pressione <code>Ctrl+Shift+X</code> para exibir o painel de pesquisa de extensões online. Digite <code>llvm-vs-code-extensions.vscode-clangd</code> quando estiver usando o clangd, ou <code>ccls-project.ccls</code> quando estiver usando o ccls.</p></div><div class=paragraph><p>Em seguida, pressione <code>Ctrl+Shift+P</code> para exibir a paleta de comandos do editor. Digite <code>Preferences: Open Settings (JSON)</code> na paleta e pressione <code>Enter</code> para abrir o <span class=filepath>settings.json</span>. Dependendo das implementações do servidor de linguagem, adicione um dos seguintes pares chave/valor JSON em <span class=filepath>settings.json</span>:</p></div><div class=listingblock><div class=title>Para o clangd</div><div class=content><pre class="rouge highlight"><code data-lang=json><span class=p>[</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>Begin</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=err>...</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>End</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=s2>&#34;clangd.arguments&#34;</span><span class=err>:</span><span class=w> </span><span class=p>[</span><span class=w>
        </span><span class=s2>&#34;--background-index&#34;</span><span class=p>,</span><span class=w>
        </span><span class=s2>&#34;--header-insertion=never&#34;</span><span class=w>
    </span><span class=p>],</span><span class=w>
    </span><span class=s2>&#34;clangd.path&#34;</span><span class=err>:</span><span class=w> </span><span class=s2>&#34;clangd12&#34;</span><span class=w>
</span><span class=p>]</span></code></pre></div></div><div class=listingblock><div class=title>Para o ccls</div><div class=content><pre class="rouge highlight"><code data-lang=json><span class=p>[</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>Begin</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=err>...</span><span class=w>
    </span><span class=err>/*</span><span class=w> </span><span class=err>End</span><span class=w> </span><span class=err>of</span><span class=w> </span><span class=err>your</span><span class=w> </span><span class=err>existing</span><span class=w> </span><span class=err>configurations</span><span class=w> </span><span class=err>*/</span><span class=w>
    </span><span class=s2>&#34;ccls.cache.hierarchicalPath&#34;</span><span class=err>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=p>]</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=cdb>4. Banco de dados de compilação<a class=anchor href=#cdb></a></h2><div class=sectionbody><div class=paragraph><p>Um banco de dados de compilação contém um array de objetos de comando de compilação. Cada objeto especifica uma maneira de compilar um arquivo de origem. O arquivo de banco de dados de compilação geralmente é chamado de <span class=filename>compile_commands.json</span>. O banco de dados é usado por implementações de servidores de linguagem para fins de indexação.</p></div><div class=paragraph><p>Por favor, consulte <a href=https://clang.llvm.org/docs/JSONCompilationDatabase.html#format class=bare>https://clang.llvm.org/docs/JSONCompilationDatabase.html#format</a> para obter detalhes sobre o formato do arquivo do banco de dados de compilação.</p></div><div class=sect2><h3 id=cdb-generators>4.1. Geradores<a class=anchor href=#cdb-generators></a></h3><div class=sect3><h4 id=generators-scan-build-py>4.1.1. Usando scan-build-py<a class=anchor href=#generators-scan-build-py></a></h4><div class=sect4><h5 id=_instalação>4.1.1.1. Instalação<a class=anchor href=#_instalação></a></h5><div class=paragraph><p>A ferramenta <code>intercept-build</code> do scan-build-py é usada para gerar o banco de dados de compilação.</p></div><div class=paragraph><p>Primeiro instale o <a class=package href=https://cgit.freebsd.org/ports/tree/devel/python/>devel/python</a> para obter o interpretador Python. Para obter o <code>intercept-build</code> do LLVM:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># git clone https://github.com/llvm/llvm-project /path/to/llvm-project</span></code></pre></div></div><div class=paragraph><p>onde <span class=filename>/path/to/llvm-project/</span> é o caminho desejado para o repositório. Crie um alias no arquivo de configuração do shell para conveniência:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nb>alias </span>intercept-build<span class=o>=</span><span class=s1>&#39;/path/to/llvm-project/clang/tools/scan-build-py/bin/intercept-build&#39;</span></code></pre></div></div><div class=paragraph><p>Você também pode usar o <a href=https://github.com/rizsotto/scan-build>rizsotto/scan-build</a> em vez do scan-build-py do LLVM. O scan-build-py do LLVM foi incorporado ao repositório do LLVM. Essa implementação pode ser instalada com o comando <code>pip install --user scan-build</code>. O script <code>intercept-build</code> é instalado por padrão em <span class=filename>~/.local/bin</span>.</p></div></div><div class=sect4><h5 id=_uso>4.1.1.2. Uso<a class=anchor href=#_uso></a></h5><div class=paragraph><p>No diretório raiz da árvore src do FreeBSD, gere o banco de dados de compilação com o <code>intercept-build</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># intercept-build --append make buildworld buildkernel -j`sysctl -n hw.ncpu`</span></code></pre></div></div><div class=paragraph><p>A opção <code>--append</code> instrui o <code>intercept-build</code> a ler um banco de dados de compilação existente (se existir) e adicionar os resultados ao banco de dados. As entradas com chaves de comando duplicadas são mescladas. O banco de dados de compilação gerado por padrão é salvo no diretório de trabalho atual como <span class=filename>compile_commands.json</span>.</p></div></div></div><div class=sect3><h4 id=generators-bear>4.1.2. Usando o devel/bear<a class=anchor href=#generators-bear></a></h4><div class=sect4><h5 id=_uso_2>4.1.2.1. Uso<a class=anchor href=#_uso_2></a></h5><div class=paragraph><p>No diretório raiz da árvore src do FreeBSD, para gerar o banco de dados de compilação com o <code>bear</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bear --append -- make buildworld buildkernel -j`sysctl -n hw.ncpu`</span></code></pre></div></div><div class=paragraph><p>A opção <code>--append</code> instrui o <code>bear</code> a ler um banco de dados de compilação existente, se estiver presente, e adicionar os resultados ao banco de dados. As entradas com chave de comando duplicada são mescladas. O banco de dados de compilação gerado por padrão é salvo no diretório de trabalho atual como <span class=filename>compile_commands.json</span>.</p></div></div></div></div></div></div><div class=sect1><h2 id=final>5. Finalizando<a class=anchor href=#final></a></h2><div class=sectionbody><div class=paragraph><p>Depois que o banco de dados de compilação for gerado, abra qualquer arquivo de código fonte na árvore src do FreeBSD e o daemon do servidor LSP será lançado em segundo plano. Abrir arquivos de código fonte na árvore src pela primeira vez leva significativamente mais tempo antes que o servidor LSP seja capaz de fornecer um resultado completo, devido à indexação de segundo plano inicial pelo servidor LSP compilando todas as entradas listadas no banco de dados de compilação. No entanto, o daemon do servidor de linguagem não indexa os arquivos de origem que não aparecem no banco de dados de compilação, portanto, nenhum resultado completo é mostrado em arquivos de origem que não estão sendo compilados durante o <code>make</code>.</p></div></div></div><hr><div class=last-modified><p><strong>Última alteração em</strong>: 8 de maio de 2023 por <a href="https://cgit.freebsd.org/doc/commit/?id=3219cd782e" target=_blank>Edson Brandi</a></p></div></div><aside class=toc><div class=toc-content><h3>Índice</h3><nav id=TableOfContents><ul><li><a href=#intro>1. Introdução</a></li><li><a href=#requirements>2. Requisitos</a></li><li><a href=#editor-settings>3. Configurações do editor</a></li><li><a href=#cdb>4. Banco de dados de compilação</a></li><li><a href=#final>5. Finalizando</a></li></ul></nav><hr><div class=resources><h3>Recursos</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/pt-br/articles/freebsd-src-lsp/freebsd-src-lsp_pt-br.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edite essa página"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/pt-br/_index target=_blank>Edite essa página</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/pt-br/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Escolha o idioma">
<span>Brazilian Portuguese</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>Alto contraste</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/pt-br class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/pt-br/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>