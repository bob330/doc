<!doctype html><html class=theme-light lang=pt-br><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="O guia completo para espelhar o site do FreeBSD, servidores FTP e muito mais"><meta name=keywords content="Mirroring,FreeBSD,Hub"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/pt-br/articles/hubs/><title>Espelhando o FreeBSD | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Espelhando o FreeBSD"><meta property="og:description" content="O guia completo para espelhar o site do FreeBSD, servidores FTP e muito mais"><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="pt-br"><meta property="og:url" content="http://172.16.201.134:1313/pt-br/articles/hubs/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/pt-br\/articles\/hubs\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/pt-br>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/pt-br/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/pt-br/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/pt-br/books>Books</a></li><li><a href=http://172.16.201.134:1313/pt-br/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/pt-br/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=pt-br>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Espelhando o FreeBSD</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Esta tradução pode estar desatualizada. Para ajudar com as traduções, acesse a <a href=https://translate-dev.freebsd.org/ target=_blank>ferramenta de traduções do FreeBSD</a>.</p></div><div class=legalnotice><a id=trademarks></a><details><summary>trademarks</summary><p>FreeBSD is a registered trademark of the FreeBSD Foundation.</p><p>Many of the designations used by manufacturers and sellers to distinguish their products are claimed as trademarks. Where those designations appear in this document, and the FreeBSD Project was aware of the trademark claim, the designations have been followed by the “™” or the “®” symbol.</p></details></div><div class=toc-mobile><h3>Índice</h3><nav id=TableOfContents><ul><li><a href=#mirror-contact>1. Informações de contato</a></li><li><a href=#mirror-requirements>2. Requisitos para um site espelho do FreeBSD</a></li><li><a href=#mirror-howto>3. Como espelhar o FreeBSD</a></li><li><a href=#mirror-where>4. De onde fazer o espelhamento</a></li><li><a href=#mirror-official>5. Espelhos Oficiais</a></li><li><a href=#mirror-statpages>6. Algumas estatísticas dos sites espelho</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>Resumo</p></div><div class=paragraph><p>Um artigo em andamento sobre como espelhar o FreeBSD, destinado à administradores de hubs.</p></div><hr><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Não estamos aceitando novos espelhos da comunidade neste momento.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=mirror-contact>1. Informações de contato<a class=anchor href=#mirror-contact></a></h2><div class=sectionbody><div class=paragraph><p>Os coordenadores do Sistema de Espelhamento podem ser contatados por e-mail através de <a href=mailto:mirror-admin@FreeBSD.org>mirror-admin@FreeBSD.org</a>. Também existe a <a href=https://lists.FreeBSD.org/subscription/freebsd-hubs>lista de discussão sobre sites espelhos do FreeBSD</a>.</p></div></div></div><div class=sect1><h2 id=mirror-requirements>2. Requisitos para um site espelho do FreeBSD<a class=anchor href=#mirror-requirements></a></h2><div class=sectionbody><div class=sect2><h3 id=mirror-diskspace>2.1. Espaço em disco<a class=anchor href=#mirror-diskspace></a></h3><div class=paragraph><p>O espaço em disco é um dos requisitos mais importantes. Dependendo do conjunto de versões, arquiteturas e grau de completude que você deseja espelhar, uma enorme quantidade de espaço em disco pode ser consumida. Além disso, espelhos <em>oficiais</em> provavelmente precisam ser completos. As páginas da web devem sempre ser espelhadas completamente. Observe também que os números aqui declarados refletem o estado atual (em 12.0-RELEASE/11.3-RELEASE). O desenvolvimento e os lançamentos futuros só aumentarão a quantidade necessária. Certifique-se também de manter cerca de 10-20% de espaço extra apenas para garantir. Aqui estão alguns números aproximados:</p></div><div class=ulist><ul><li><p>Distribuição FTP completa: 1.4 TB</p></li><li><p>Deltas do CTM: 10 GB</p></li><li><p>Páginas Web: 1GB</p></li></ul></div><div class=paragraph><p>O uso atual de disco da distribuição FTP pode ser encontrado em <a href=ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes>ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes</a>.</p></div></div><div class=sect2><h3 id=mirror-bandwidth>2.2. Conexão de Rede/Largura de Banda<a class=anchor href=#mirror-bandwidth></a></h3><div class=paragraph><p>Claro, você precisa estar conectado à Internet. A largura de banda necessária depende do uso pretendido do site espelho. Se você quiser espelhar apenas algumas partes do FreeBSD para uso na sua rede local/intranet, a demanda pode ser muito menor do que se você quiser disponibilizar os arquivos publicamente. Se você pretende se tornar um site espelho oficial, a largura de banda necessária será ainda maior. Podemos apenas dar estimativas aproximadas aqui:</p></div><div class=ulist><ul><li><p>Site local, sem acesso público: basicamente não há mínimo, mas menos de 2 Mbps pode tornar a sincronização muito lenta.</p></li><li><p>Site público não oficial: 34 Mbps provavelmente é um bom começo.</p></li><li><p>Site oficial: é recomendado ter mais de 100 Mbps, e seu host deve estar conectado o mais próximo possível do seu roteador de borda.</p></li></ul></div></div><div class=sect2><h3 id=mirror-system>2.3. Requisitos de Sistema, CPU, RAM<a class=anchor href=#mirror-system></a></h3><div class=paragraph><p>Uma coisa que isso depende é o número esperado de clientes, que é determinado pela política do servidor. Também é afetado pelos tipos de serviços que você deseja oferecer. Serviços FTP ou HTTP simples podem não requerer uma quantidade enorme de recursos. Tenha cuidado se você fornecer o rsync. Isso pode ter um grande impacto nos requisitos de CPU e memória, pois ele é considerado um devorador de memória. Os dados seguintes são apenas exemplos para dar uma ideia aproximada.</p></div><div class=paragraph><p>Para um site moderadamente visitado que oferece rsync, você pode considerar uma CPU atual com cerca de 800 MHz - 1 GHz e pelo menos 512MB de RAM. Isso provavelmente é o mínimo que você deseja para um site <em>oficial</em>.</p></div><div class=paragraph><p>Para um site com visitação frequente, você definitivamente vai precisar de mais memória RAM (considere 2 GB como um bom ponto de partida) e possivelmente de mais poder de processamento (CPU), o que pode significar que você precisará ir para um sistema multiprocessado (SMP).</p></div><div class=paragraph><p>Você também deve considerar um subsistema de disco rápido. As operações no repositório SVN requerem um subsistema de disco rápido (RAID é altamente recomendado). Um controlador SCSI que tenha seu próprio cache também pode acelerar as coisas, uma vez que a maioria desses serviços incorre em um grande número de pequenas modificações no disco.</p></div></div><div class=sect2><h3 id=mirror-services>2.4. Serviços para oferecer<a class=anchor href=#mirror-services></a></h3><div class=paragraph><p>Cada site espelho deve ter um conjunto de serviços básicos disponíveis. Além desses serviços obrigatórios, há vários serviços opcionais que os administradores de servidor podem escolher oferecer. Esta seção explica quais serviços você pode fornecer e como implementá-los.</p></div><div class=sect3><h4 id=mirror-serv-ftp>2.4.1. FTP (necessário para o conjunto de arquivos do FTP)<a class=anchor href=#mirror-serv-ftp></a></h4><div class=paragraph><p>Este é um dos serviços mais básicos e é necessário para cada espelho que oferece distribuições por meio de FTP publico. O acesso FTP deve ser anônimo e não são permitidas proporções de upload/download (algo ridículo de qualquer maneira). A capacidade de upload não é necessária (e <em>nunca</em> deve ser permitida para o espaço de arquivos do FreeBSD). Além disso, os arquivos do FreeBSD devem estar disponíveis sob o caminho <span class=filename>/pub/FreeBSD</span>.</p></div><div class=paragraph><p>Existem diversos softwares disponíveis que podem ser configurados para operar como um servidor de FTP anônimo. Por exemplo (em ordem alfabética).</p></div><div class=ulist><ul><li><p><code>/usr/libexec/ftpd</code>: O próprio ftpd do FreeBSD pode ser usado. Certifique-se de ler <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpd&amp;sektion=8&amp;format=html">ftpd(8)</a>.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/ncftpd/>ftp/ncftpd</a> Um pacote comercial, gratuito para uso educacional.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/oftpd/>ftp/oftpd</a>: Um servidor FTP projetado com segurança como foco principal.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/proftpd/>ftp/proftpd</a>: Um ftpd modular e muito flexível.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/pure-ftpd/>ftp/pure-ftpd</a>: Outro servidor FTP desenvolvido com segurança em mente.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/twoftpd/>ftp/twoftpd</a>: Como acima.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/vsftpd/>ftp/vsftpd</a>: O ftpd "muito seguro".</p></li></ul></div><div class=paragraph><p>O <code>ftpd</code> do FreeBSD, o <code>proftpd</code> e talvez o <code>ncftpd</code> estão entre os FTPds mais comumente usados. Os outros não têm uma grande base de usuários entre os sites espelho. Uma coisa a considerar é que você pode precisar de flexibilidade para limitar quantas conexões simultâneas são permitidas, limitando assim quanto de largura de banda de rede e recursos do sistema são consumidos.</p></div></div><div class=sect3><h4 id=mirror-serv-rsync>2.4.2. Rsync (opcional para o conjunto de arquivos do FTP)<a class=anchor href=#mirror-serv-rsync></a></h4><div class=paragraph><p>O Rsync é frequentemente oferecido para acesso ao conteúdo da área FTP do FreeBSD, para que outros sites espelho possam usar seu sistema como fonte. O protocolo é diferente do FTP de muitas maneiras. É muito mais amigável para a largura de banda, pois apenas as diferenças entre os arquivos são transferidas em vez de arquivos inteiros quando são alterados. O Rsync requer uma quantidade significativa de memória para cada instância. O tamanho depende do tamanho do módulo sincronizado em termos do número de diretórios e arquivos. O Rsync pode usar <code>rsh</code> e <code>ssh</code> (agora padrão) como transporte ou usar seu próprio protocolo para acesso autônomo (este é o método preferido para servidores Rsync públicos). A autenticação, limites de conexão e outras restrições podem ser aplicadas. Há apenas um pacote de software disponível:</p></div><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/net/rsync/>net/rsync</a></p></li></ul></div></div><div class=sect3><h4 id=mirror-serv-http>2.4.3. HTTP (necessário para as páginas web, opcional para o conjunto de arquivos do FTP)<a class=anchor href=#mirror-serv-http></a></h4><div class=paragraph><p>Se você deseja oferecer as páginas web do FreeBSD, precisará instalar um servidor web. Você pode opcionalmente oferecer o conjunto de arquivos FTP via HTTP. A escolha do software do servidor web é deixada a critério do administrador do espelho. Algumas das opções mais populares são:</p></div><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/apache24/>www/apache24</a>: O Apache ainda é um dos servidores da Web mais amplamente implantados na Internet. Ele é usado extensivamente pelo Projeto FreeBSD.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/boa/>www/boa</a>: O Boa é um servidor HTTP de single-task. Ao contrário dos servidores web tradicionais, ele não faz um fork para cada conexão recebida, nem faz muitas cópias de si mesmo para lidar com várias conexões. contudo, ele deve fornecer um desempenho consideravelmente melhor para conteúdo puramente estático.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/cherokee/>www/cherokee</a>: O Cherokee é um servidor web muito rápido, flexível e fácil de configurar. Ele suporta as tecnologias amplamente utilizadas hoje em dia: FastCGI, SCGI, PHP, CGI, conexões criptografadas SSL/TLS, vhosts, autenticação de usuários, codificação on the fly e balanceamento de carga. Ele também gera arquivos de log compatíveis com o Apache.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/lighttpd/>www/lighttpd</a>: O lighttpd é um servidor web seguro, rápido, compatível com os padrões e muito flexível o qual foi otimizado para ambientes de alto desempenho. Tem um consumo de memória muito baixo em comparação com outros servidores Web, bem como um baixo consumo de CPU.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/nginx/>www/nginx</a>: O nginx é um servidor web de borda de alta performance com uma pegada de memória baixa e recursos importantes para construir uma infraestrutura web moderna e eficiente. Os recursos incluem um servidor HTTP, proxy reverso HTTP e de e-mail, cache, balanceamento de carga, compressão, limitação de solicitações, multiplexação e reutilização de conexões, offload SSL e streaming de mídia HTTP.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/thttpd/>www/thttpd</a>: Se você vai servir uma grande quantidade de conteúdo estático, pode descobrir que usar um aplicativo como o thttpd é mais eficiente do que outros. Ele também é otimizado para ter um excelente desempenho no FreeBSD.</p></li></ul></div></div></div></div></div><div class=sect1><h2 id=mirror-howto>3. Como espelhar o FreeBSD<a class=anchor href=#mirror-howto></a></h2><div class=sectionbody><div class=paragraph><p>Ok, agora você conhece os requisitos e sabe como oferecer os serviços, mas não sabe como obtê-los. :-) Esta seção explica como realmente espelhar as várias partes do FreeBSD, quais ferramentas utilizar e de onde espelhar.</p></div><div class=sect2><h3 id=mirror-ftp-rsync>3.1. Espelhando o site FTP<a class=anchor href=#mirror-ftp-rsync></a></h3><div class=paragraph><p>A área FTP possui a maior quantidade de dados que precisa ser espelhada. Inclui os <em>conjuntos de distribuição</em> necessários para instalação via rede, os <em>branches</em>, que são na verdade snapshots dos diretórios de código fonte, as <em>imagens ISO</em> para gravar CD-ROMs com a distribuição de instalação, um sistema de arquivos live (ao vivo) e um snapshot da árvore de ports. Tudo, é claro, para várias versões do FreeBSD e várias arquiteturas.</p></div><div class=paragraph><p>A melhor maneira de espelhar a área FTP é com o rsync. Você pode instalar o pacote pelo port: net/rsync[] e, em seguida, usar o rsync para sincronizar com seu host upstream. O rsync já foi mencionado em <a href=#mirror-serv-rsync>Rsync (opcional para o conjunto de arquivos do FTP)</a>. Como o acesso rsync não é obrigatório, seu site upstream preferido pode não permiti-lo. Você pode precisar procurar um pouco para encontrar um site que permita o acesso rsync.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Como o número de clientes rsync terá um impacto significativo no processamento do servidor, a maioria dos administradores impõe limitações em seu servidor. Para um espelho, você deve perguntar ao mantenedor do site de onde está sincronizando sobre sua política e talvez pedir uma exceção para seu host (já que você é um espelho).</p></div></td></tr></tbody></table></div><div class=paragraph><p>Um exemplo de linha de comando para espelhar o FreeBSD pode ser verificada abaixo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% rsync <span class=nt>-vaHz</span> <span class=nt>--delete</span> rsync://ftp4.de.FreeBSD.org/FreeBSD/ /pub/FreeBSD/</code></pre></div></div><div class=paragraph><p>Consulte a documentação do rsync, que também está disponível em <a href=http://rsync.samba.org/>http://rsync.samba.org/</a>, sobre as várias opções a serem usadas com o rsync. Se você sincronizar o módulo inteiro (ao contrário de subdiretórios), esteja ciente de que o diretório do módulo (aqui "FreeBSD") não será criado, portanto, você não pode omitir o diretório de destino. Além disso, você pode querer configurar um framework de script que chame esse comando via <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>.</p></div></div><div class=sect2><h3 id=mirror-www>3.2. Espelhando as páginas WWW<a class=anchor href=#mirror-www></a></h3><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Desde a migração da documentação para Hugo/Asciidoctor em 25/01/2021, a sincronização do site com rsync não funciona mais.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Existem estudos em andamento para implementar um espelho do website com <a href=https://docs.freebsd.org/pt-br/books/handbook/book/mirrors/>infraestrutura oficial</a>.</p></div><div class=paragraph><p>Para os antigos espelhos do website, uma maneira de obter o espelhamento hoje em dia é construir o site localmente com o endereço correspondente em que será hospedado.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd </span>website <span class=o>&amp;&amp;</span> <span class=nb>env </span><span class=nv>HUGO_baseURL</span><span class=o>=</span><span class=s2>&#34;https://www.XX.freebsd.org/&#34;</span> make</code></pre></div></div><div class=paragraph><p>Verifique mais detalhes sobre as ferramentas de construção no livro <a href=https://docs.freebsd.org/pt-br/books/fdp-primer/overview/#overview-quick-start>Primer do Projeto de Documentação do FreeBSD para Novos Contribuidores</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Observe que o site foi dividido em www.FreeBSD.org e docs.FreeBSD.org, e existem links entre eles; além disso, no momento, a variável <code>HUGO_baseURL</code> não cobrirá todos os links, dessa forma, o espelhamento do site não é encorajado.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=mirror-pkgs>3.3. Espelhando os Pacotes<a class=anchor href=#mirror-pkgs></a></h3><div class=paragraph><p>Devido aos requisitos muito altos de largura de banda, armazenamento e administração, o Projeto FreeBSD decidiu não permitir espelhos públicos de pacotes pré compilados. Para sites com muitas máquinas, pode ser vantajoso executar um proxy HTTP com cache habilitado para o processo <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a>. Alternativamente, pacotes específicos e suas dependências podem ser baixados executando algo como o seguinte:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% pkg fetch <span class=nt>-d</span> <span class=nt>-o</span> /usr/local/mirror vim</code></pre></div></div><div class=paragraph><p>Quando esses pacotes forem baixados, os metadados do repositório devem ser gerados executando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% pkg repo /usr/local/mirror</code></pre></div></div><div class=paragraph><p>Depois que os pacotes forem baixados e os metadados do repositório forem gerados, sirva os pacotes para as máquinas clientes via HTTP. Para obter informações adicionais, consulte as páginas man do <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a>, especificamente a página <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-repo&amp;sektion=8&amp;format=html">pkg-repo(8)</a>.</p></div></div><div class=sect2><h3 id=mirror-how-often>3.4. Com que frequência eu devo atualizar o conteúdo do meu site espelho?<a class=anchor href=#mirror-how-often></a></h3><div class=paragraph><p>Todo espelho deve ser atualizado pelo menos uma vez por dia. Certamente, um script com bloqueio para evitar que várias execuções ocorram ao mesmo tempo será necessário para ser executado pelo <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>. Como cada administrador faz isso de sua própria maneira, instruções específicas não podem ser fornecidas. Este processo poderia funcionar , por exemplo, desta forma:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Coloque o comando para executar sua aplicação de espelhamento em um script. O uso de um script <code>/bin/sh</code> simples é recomendado.</p></li><li><p>Adicione alguns redirecionamentos de saída para que as mensagens de diagnóstico sejam registradas em um arquivo.</p></li><li><p>Teste se o seu script funciona. Verifique os logs.</p></li><li><p>Use o <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=1&amp;format=html">crontab(1)</a> para adicionar o script ao <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=5&amp;format=html">crontab(5)</a> do usuário apropriado. Este deve ser um usuário diferente do que seu daemon FTP é executado, para que, se as permissões de arquivo dentro de sua área FTP não forem legíveis por todo o mundo, esses arquivos não possam ser acessados pelo FTP anônimo. Isso é usado para "preparar" as releases - garantindo que todos os sites de espelho oficiais tenham todos os arquivos da release necessários no dia do seu lançamento.</p></li></ol></div></div></div><div class=paragraph><p>Aqui estão alguns agendamentos recomendados:</p></div><div class=ulist><ul><li><p>Conjunto de arquivos FTP: diariamente</p></li><li><p>Páginas WWW: diariamente</p></li></ul></div></div></div></div><div class=sect1><h2 id=mirror-where>4. De onde fazer o espelhamento<a class=anchor href=#mirror-where></a></h2><div class=sectionbody><div class=paragraph><p>Esta é uma questão importante. Portanto, esta seção dedicará algum esforço para explicar o os motivos que estão por trás desta orientação. Diremos isso várias vezes: em nenhuma circunstância você deve espelhar a partir de <code>ftp.FreeBSD.org</code>.</p></div><div class=sect2><h3 id=mirror-where-organization>4.1. Algumas palavras sobre a organização<a class=anchor href=#mirror-where-organization></a></h3><div class=paragraph><p>Os espelhos são organizados por país. Todos os espelhos oficiais têm uma entrada DNS com a forma <code>ftpN.CC.FreeBSD.org</code>. <em>CC</em> (ou seja, código do país) é o <em>domínio de nível superior</em> (TLD) do país onde esse espelho está localizado. <em>N</em> é um número, indicando que o host seria o <em>N-ésimo</em> espelho nesse país. (O mesmo se aplica a <code>wwwN.CC.FreeBSD.org</code>, etc.) Existem espelhos sem a parte <em>CC</em>. Esses são os sites de espelho que estão muito bem conectados e permitem um grande número de usuários simultâneos. O <code>ftp.FreeBSD.org</code> na verdade são duas máquinas, uma atualmente localizada na Dinamarca e outra nos Estados Unidos. Não é um site principal e nunca deve ser usado para se espelhar a partir dele. Muita documentação online direciona usuários "interativos" para <code>ftp.FreeBSD.org</code>, portanto, sistemas automatizados de espelhamento devem encontrar um servidor diferente para espelhar.</p></div><div class=paragraph><p>Além disso, existe uma hierarquia de espelhos, que é descrita em termos de <em>níveis</em>. Os sites principais não são mencionados, mas podem ser descritos como <em>Nível-0</em>. Espelhos que espelham a partir desses sites podem ser considerados <em>Nível-1</em>, espelhos de espelhos <em>Nível-1</em> são <em>Nível-2</em>, etc. Sites oficiais são incentivados a ter um nível baixo, mas quanto mais baixo o nível, maiores os requisitos como descrito em <a href=#mirror-requirements>Requisitos para um site espelho do FreeBSD</a>. O acesso a espelhos de baixo nível pode ser restrito e o acesso a sites principais é definitivamente restrito. A hierarquia de <em>nível</em> não é refletida pelo DNS e geralmente não é documentada em nenhum lugar, exceto para os sites principais. No entanto, espelhos oficiais com números baixos como 1-4, geralmente são <em>Nível-1</em> (isso é apenas uma dica aproximada e não há regra).</p></div></div><div class=sect2><h3 id=mirror-where-where>4.2. Ok, mas de onde devo baixar os arquivos agora?<a class=anchor href=#mirror-where-where></a></h3><div class=paragraph><p>Em nenhuma circunstância você deve espelhar a partir de <code>ftp.FreeBSD.org</code>. A resposta curta é: a partir do site que estiver mais próximo de você em termos de Internet ou que oferecer o acesso mais rápido.</p></div><div class=sect3><h4 id=mirror-where-simple>4.2.1. Eu só quero espelhar de algum lugar!<a class=anchor href=#mirror-where-simple></a></h4><div class=paragraph><p>Se você não tem intenções ou requisitos especiais, a afirmação em <a href=#mirror-where-where>Ok, mas de onde devo baixar os arquivos agora?</a> se aplica. Isso significa:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Verifique quais sites oferecem o acesso mais rápido (número de saltos, tempos de ida e volta) e oferecem os serviços que você pretende usar (como rsync).</p></li><li><p>Entre em contato com os administradores do site escolhido, informando sua solicitação e perguntando sobre seus termos e políticas.</p></li><li><p>Configure o seu site espelho conforme descrito acima.</p></li></ol></div></div></div></div><div class=sect3><h4 id=mirror-where-official>4.2.2. Sou um site espelho oficial, qual é o site certo para mim?<a class=anchor href=#mirror-where-official></a></h4><div class=paragraph><p>Em geral, a descrição em <a href=#mirror-where-simple>Eu só quero espelhar de algum lugar!</a> ainda se aplica. Claro, você pode querer dar mais importância ao fato de que o site upstream deve ter um nível baixo. Existem algumas outras considerações sobre espelhos <em>oficiais</em> que são descritas em <a href=#mirror-official>Espelhos Oficiais</a>.</p></div></div><div class=sect3><h4 id=mirror-where-master>4.2.3. Eu quero acessar os sites principais!<a class=anchor href=#mirror-where-master></a></h4><div class=paragraph><p>Se você tiver bons motivos e bons pré-requisitos, poderá querer e obter acesso a um dos sites principais. O acesso a esses sites geralmente é restrito e existem políticas especiais para acesso. Se você já é um espelho <em>oficial</em>, certamente isso ajuda a obter acesso. Em qualquer outro caso, certifique-se de que seu país realmente precisa de outro espelho. Se já tiver três ou mais, pergunte ao "administrador de zona" (<a href=mailto:hostmaster@CC.FreeBSD.org>hostmaster@CC.FreeBSD.org</a>) ou na <a href=https://lists.FreeBSD.org/subscription/freebsd-hubs>lista de discussão sobre sites espelhos do FreeBSD</a> primeiro.</p></div><div class=paragraph><p>Quem o ajudou a se tornar um espelho <em>oficial</em> deve ter lhe ajudado a obter acesso a um host upstream apropriado, seja um dos sites principais ou um site Tier-1 adequado. Se não, você pode enviar um e-mail para <a href=mailto:mirror-admin@FreeBSD.org>mirror-admin@FreeBSD.org</a> para solicitar ajuda com isso.</p></div><div class=paragraph><p>Existe um site principal para o conjunto de arquivos FTP.</p></div><div class=sect4><h5 id=mirror-where-master-ftp>4.2.3.1. ftp-master.FreeBSD.org<a class=anchor href=#mirror-where-master-ftp></a></h5><div class=paragraph><p>Este é o site principal do conjunto de arquivos FTP.</p></div><div class=paragraph><p>O <code>ftp-master.FreeBSD.org</code> disponibiliza acesso via rsync, além do FTP. Consulte <a href=#mirror-ftp-rsync>Espelhando o site FTP</a> para obter mais informações.</p></div><div class=paragraph><p>Também é encorajado que os espelhos permitam o acesso ao rsync para o conteúdo FTP, já que eles são espelhos <em>Tier-1</em>.</p></div></div></div></div></div></div><div class=sect1><h2 id=mirror-official>5. Espelhos Oficiais<a class=anchor href=#mirror-official></a></h2><div class=sectionbody><div class=paragraph><p>Espelhos oficiais são os espelhos que</p></div><div class=ulist><ul><li><p>a) ter uma entrada DNS <code>FreeBSD.org</code> (geralmente um CNAME).</p></li><li><p>b) são listados como um espelho oficial na documentação do FreeBSD (como no Handbook).</p></li></ul></div><div class=paragraph><p>Até agora, para distinguir espelhos oficiais. Espelhos oficiais não necessariamente são espelhos <em>Tier-1</em>. No entanto, provavelmente você não encontrará um espelho <em>Tier-1</em> que não seja oficial.</p></div><div class=sect2><h3 id=mirror-official-requirements>5.1. Requisitos especiais para sites espelhos oficiais (Tier-1)<a class=anchor href=#mirror-official-requirements></a></h3><div class=paragraph><p>Não é tão fácil estabelecer requisitos para todos os espelhos oficiais, já que o projeto é bastante tolerante nesse aspecto. É mais fácil dizer o que é exigido dos <em>espelhos oficiais de nível 1</em>. Todos os outros espelhos oficiais devem considerar isso uma grande <em>recomendação</em>.</p></div><div class=paragraph><p>Os sites espelhos Tier-1 precisam:</p></div><div class=ulist><ul><li><p>ter o conjunto completo de arquivos</p></li><li><p>permitir acesso a outros sites espelho</p></li><li><p>fornecer acesso FTP e rsync</p></li></ul></div><div class=paragraph><p>Além disso, os administradores devem se inscrever no <a href=https://lists.FreeBSD.org/subscription/freebsd-hubs>lista de discussão sobre sites espelhos do FreeBSD</a>. Consulte <a href=https://docs.freebsd.org/pt-br/books/handbook/book/#eresources-mail>este link</a> para obter detalhes sobre como se inscrever.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>É <em>muito</em> importante para um administrador de um site espelho, especialmente administradores de espelhos Tier-1, verificar o <a href=https://www.FreeBSD.org/releng/>calendário de lançamento</a> para o próximo release do FreeBSD. Isso é importante porque informará quando o próximo release está programado para sair, dando tempo para se preparar para o grande aumento de tráfego que o segue.</p></div><div class=paragraph><p>É importante também que os administradores dos hubs tentem manter seus espelhos atualizados o máximo possível (novamente, ainda mais crucial para os espelhos Tier-1). Se o Mirror1 não atualizar por um tempo, os espelhos de nível inferior começarão a espelhar dados antigos do Mirror1 e, assim, começa uma espiral descendente…​ Mantenha seus espelhos atualizados!</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=mirror-official-become>5.2. Como se tornar um site espelho oficial?<a class=anchor href=#mirror-official-become></a></h3><div class=paragraph><p>Por favor, entre em contato com os Administradores do Cluster conforme documentado em <a href=https://www.FreeBSD.org/administration/#t-clusteradm class=bare>https://www.FreeBSD.org/administration/#t-clusteradm</a>.</p></div></div></div></div><div class=sect1><h2 id=mirror-statpages>6. Algumas estatísticas dos sites espelho<a class=anchor href=#mirror-statpages></a></h2><div class=sectionbody><div class=paragraph><p>Aqui estão os links para as páginas de estatísticas dos seus sites espelho favoritos (também conhecidos como os únicos que têm a boa vontade de fornecer as estatísticas).</p></div><div class=sect2><h3 id=mirror-statpagesftp>6.1. Estatísticas do site FTP<a class=anchor href=#mirror-statpagesftp></a></h3><div class=ulist><ul><li><p>ftp.is.FreeBSD.org - <a href=mailto:hostmaster@is.FreeBSD.org>hostmaster@is.FreeBSD.org</a> - <a href=http://www.rhnet.is/status/draupnir/draupnir.html>(Largura de banda)</a> <a href=http://www.rhnet.is/status/ftp/ftp-notendur.html>(Processos FTP)</a> <a href=http://www.rhnet.is/status/ftp/http-notendur.html>(Processos HTTP)</a></p></li><li><p>ftp2.ru.FreeBSD.org - <a href=mailto:mirror@macomnet.ru>mirror@macomnet.ru</a> - <a href=http://mirror.macomnet.net/mrtg/mirror.macomnet.net_195.128.64.25.html>(Largura de banda)</a> <a href=http://mirror.macomnet.net/mrtg/mirror.macomnet.net_proc.html>(Usuários de HTTP e FTP)</a></p></li></ul></div></div></div></div><hr><div class=last-modified><p><strong>Última alteração em</strong>: 10 de setembro de 2023 por <a href="https://cgit.freebsd.org/doc/commit/?id=46cedbaca8" target=_blank>Danilo G. Baio</a></p></div></div><aside class=toc><div class=toc-content><h3>Índice</h3><nav id=TableOfContents><ul><li><a href=#mirror-contact>1. Informações de contato</a></li><li><a href=#mirror-requirements>2. Requisitos para um site espelho do FreeBSD</a></li><li><a href=#mirror-howto>3. Como espelhar o FreeBSD</a></li><li><a href=#mirror-where>4. De onde fazer o espelhamento</a></li><li><a href=#mirror-official>5. Espelhos Oficiais</a></li><li><a href=#mirror-statpages>6. Algumas estatísticas dos sites espelho</a></li></ul></nav><hr><div class=resources><h3>Recursos</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/pt-br/articles/hubs/hubs_pt-br.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edite essa página"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/pt-br/_index target=_blank>Edite essa página</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/pt-br/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Escolha o idioma">
<span>Brazilian Portuguese</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>Alto contraste</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/pt-br class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/pt-br/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>