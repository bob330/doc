<!doctype html><html class=theme-light lang=pl><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/pl/books/handbook/config/><title>Rozdział 11. Configuration and Tuning | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Rozdział 11. Configuration and Tuning"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="pl"><meta property="og:url" content="https://docs.freebsd.org/pl/books/handbook/config/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/pl\/books\/handbook\/config\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/pl>Documentation portal</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/pl/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/pl/books>Books</a></li><li><a href=https://docs.freebsd.org/pl/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/pl/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=pl>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/preface/>Przedmowa</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/preface/#preface-audience>Docelowy czytelnik</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/preface/#preface-changes-from2>Zmiany od wydania drugiego</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/preface/#preface-changes>Zmiany od wydania pierwszego</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/preface/#preface-overview>Układ książki</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/preface/#preface-conv>Konwencje użyte w tej książce</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/preface/#preface-acknowledgements>Podziękowania</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/parti/>Część I. Pierwsze kroki</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/introduction/>Rozdział 1. Wprowadzenie</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/introduction/#introduction-synopsis>1.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/introduction/#nutshell>1.2. Witamy w świecie FreeBSD!</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/introduction/#history>1.3. O Projekcie FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/install/>Rozdział 2. Instalacja FreeBSD</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-synopsis>2.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-pre>2.2. Czynności wstępne</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-start>2.3. Rozpoczęcie instalacji</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#using-sysinstall>2.4. Wprowadzenie do sysinstall</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-steps>2.5. Przydział miejsca na dysku</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-choosing>2.6. Wybór składników instalacji</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-media>2.7. Wybór nośnika instalacji</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-final-warning>2.8. Przystąpienie do instalacji</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-post>2.9. Po instalacji</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-supported-hardware>2.10. Obsługiwany sprzęt</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-trouble>2.11. Rozwiązywanie problemów</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-advanced>2.12. Instalacja zaawansowana</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/install/#install-diff-media>2.13. Przygotowanie własnego nośnika instalacji</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/basics/>Rozdział 3. Podstawy Uniksa</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#basics-synopsis>3.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#consoles>3.2. Konsole wirtualne i terminale</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#permissions>3.3. Prawa dostępu</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#dirstructure>3.4. Struktura katalogów</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#disk-organization>3.5. Organizacja dysku</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#mount-unmount>3.6. Montowanie i odmontowywanie systemów plików</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#basics-processes>3.7. Procesy</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#basics-daemons>3.8. Demony, sygnały i unicestwianie procesów</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#shells>3.9. Powłoki</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#editors>3.10. Edytory tekstu</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#basics-devices>3.11. Urządzenia i pliki urządzeń</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#binary-formats>3.12. Formaty binarne</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/basics/#basics-more-information>3.13. Więcej informacji</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/ports/>Rozdział 4. Instalacja programów: pakiety i porty</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/ports/#ports-synopsis>4.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ports/#ports-overview>4.2. Omówienie instalacji oprogramowania</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ports/#ports-finding-applications>4.3. Odnalezienie programu dla siebie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ports/#packages-using>4.4. Korzystanie z systemu pakietów</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ports/#ports-using>4.5. Korzystanie z kolekcji portów</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ports/#ports-nextsteps>4.6. Czynności po-instalacyjne</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ports/#ports-broken>4.7. Jak radzić sobie ze źle przygotowanymi portami</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/x11/>Rozdział 5. System okien X</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/x11/#x11-synopsis>5.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/x11/#x-understanding>5.2. Zrozumieć X</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/x11/#x-install>5.3. Instalacja X11</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/x11/#x-config>5.4. Konfiguracja X11</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/x11/#x-fonts>5.5. Korzystanie z czcionek w X11</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/x11/#x-xdm>5.6. Menedżer pulpitów X</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/x11/#x11-wm>5.7. Środowiska graficzne</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/partii/>Część II. Codzienne czynności</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/desktop/>Rozdział 6. Aplikacje biurowe</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#desktop-synopsis>6.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#desktop-browsers>6.2. Przeglądarki internetowe</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#moz-flash-plugin>6.3. Firefox, Mozilla i moduł Macromedia® Flash®</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#_opera>6.4. Opera</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#_konqueror>6.5. Konqueror</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#desktop-productivity>6.6. Programy codziennego użytku</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#desktop-viewers>6.7. Przeglądarki dokumentów</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#desktop-finance>6.8. Finanse</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/desktop/#desktop-summary>6.9. Podsumowanie</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/>Rozdział 7. Multimedia</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/#multimedia-synopsis>7.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/#sound-setup>7.2. Setting Up the Sound Card</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/#sound-mp3>7.3. MP3 Audio</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/#video-playback>7.4. Video Playback</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/#tvcard>7.5. TV Cards</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/#mythtv>7.6. MythTV</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/multimedia/#scanners>7.7. Image Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/kernelconfig/>Rozdział 8. Konfiguracja jądra FreeBSD</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Po co budować indywidualne jądro?</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/kernelconfig/#kernelconfig-building>8.3. Budowanie i instalowanie indywidualnego jądra</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/kernelconfig/#kernelconfig-config>8.4. Plik konfiguracyjny</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/kernelconfig/#kernelconfig-trouble>8.5. Jeśli pojawią się kłopoty</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/printing/>Rozdział 9. Printing</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/printing/#printing-quick-start>9.1. Quick Start</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/printing/#printing-connections>9.2. Printer Connections</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/printing/#printing-pdls>9.3. Common Page Description Languages</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/printing/#printing-direct>9.4. Direct Printing</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/printing/#printing-lpd>9.5. LPD (Line Printer Daemon)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/printing/#printing-other>9.6. Other Printing Systems</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/linuxemu/>Rozdział 10. Linux® Binary Compatibility</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Configuring Linux® Binary Compatibility</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/linuxemu/#linuxemu-advanced>10.3. Advanced Topics</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/partiii/>Część III. Administracja systemem</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle checked>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/config/>Rozdział 11. Configuration and Tuning</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#config-synopsis>11.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-starting-services>11.2. Starting Services</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-cron>11.3. Configuring cron(8)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-rcd>11.4. Managing Services in FreeBSD</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#config-network-setup>11.5. Setting Up Network Interface Cards</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-virtual-hosts>11.6. Virtual Hosts</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-syslog>11.7. Configuring System Logging</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-configfiles>11.8. Configuration Files</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-sysctl>11.9. Tuning with sysctl(8)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-disk>11.10. Tuning Disks</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#configtuning-kernel-limits>11.11. Tuning Kernel Limits</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#adding-swap-space>11.12. Adding Swap Space</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/config/#acpi-overview>11.13. Power and Resource Management</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/boot/>Rozdział 12. The FreeBSD Booting Process</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/boot/#boot-synopsis>12.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/boot/#boot-introduction>12.2. FreeBSD Boot Process</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/boot/#boot-splash>12.3. Configuring Boot Time Splash Screens</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/boot/#device-hints>12.4. Device Hints</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/boot/#boot-shutdown>12.5. Shutdown Sequence</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/users/>Rozdział 13. Użytkownicy i podstawy zarządzania kontami</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-synopsis>13.1. Streszczenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-introduction>13.2. Wprowadzenie</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-superuser>13.3. Konto superużytkownika</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-system>13.4. Konta systemowe</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-user>13.5. Konta użytkowników</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-modifying>13.6. Modyfikacja ustawień kont</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-limiting>13.7. Ograniczanie użytkowników</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/users/#users-groups>13.8. Grupy</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/security/>Rozdział 14. Security</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#security-synopsis>14.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#security-intro>14.2. Introduction</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#one-time-passwords>14.3. One-time Passwords</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#tcpwrappers>14.4. TCP Wrapper</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#kerberos5>14.5. Kerberos</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#openssl>14.6. OpenSSL</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#ipsec>14.7. VPN over IPsec</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#openssh>14.8. OpenSSH</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#fs-acl>14.9. Access Control Lists</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#security-pkg>14.10. Monitoring Third Party Security Issues</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#security-advisories>14.11. FreeBSD Security Advisories</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#security-accounting>14.12. Process Accounting</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#security-resourcelimits>14.13. Resource Limits</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/security/#security-sudo>14.14. Shared Administration with Sudo</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/jails/>Rozdział 15. Jails</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/jails/#jails-synopsis>15.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/jails/#jails-terms>15.2. Terms Related to Jails</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/jails/#jails-build>15.3. Creating and Controlling Jails</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/jails/#jails-tuning>15.4. Fine Tuning and Administration</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/jails/#jails-application>15.5. Updating Multiple Jails</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/jails/#jails-ezjail>15.6. Managing Jails with ezjail</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/mac/>Rozdział 16. Mandatory Access Control</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-synopsis>16.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-inline-glossary>16.2. Key Terms</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-understandlabel>16.3. Understanding MAC Labels</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-planning>16.4. Planning the Security Configuration</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-policies>16.5. Available MAC Policies</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-userlocked>16.6. User Lock Down</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-implementing>16.7. Nagios in a MAC Jail</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mac/#mac-troubleshoot>16.8. Troubleshooting the MAC Framework</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/audit/>Rozdział 17. Security Event Auditing</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/audit/#audit-synopsis>17.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/audit/#audit-inline-glossary>17.2. Key Terms</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/audit/#audit-config>17.3. Audit Configuration</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/audit/#audit-administration>17.4. Working with Audit Trails</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/disks/>Rozdział 18. Storage</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#disks-synopsis>18.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#disks-adding>18.2. Adding Disks</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#disks-growing>18.3. Resizing and Growing Disks</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#usb-disks>18.4. USB Storage Devices</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#creating-cds>18.5. Creating and Using CD Media</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#creating-dvds>18.6. Creating and Using DVD Media</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#floppies>18.7. Creating and Using Floppy Disks</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#backup-basics>18.8. Backup Basics</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#disks-virtual>18.9. Memory Disks</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#snapshots>18.10. File System Snapshots</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#quotas>18.11. Disk Quotas</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#disks-encrypting>18.12. Encrypting Disk Partitions</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#swap-encrypting>18.13. Encrypting Swap</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/disks/#disks-hast>18.14. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/geom/>Rozdział 19. GEOM: Modular Disk Transformation Framework</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-synopsis>19.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-striping>19.2. RAID0 - Striping</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-mirror>19.3. RAID1 - Mirroring</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-raid3>19.4. RAID3 - Byte-level Striping with Dedicated Parity</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-graid>19.5. Software RAID Devices</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-ggate>19.6. GEOM Gate Network</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-glabel>19.7. Labeling Disk Devices</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/geom/#geom-gjournal>19.8. UFS Journaling Through GEOM</a></li></ul></li><li><input type=checkbox id=chapter-73e82560fcb7145b7c0e2ec47af8fc04 class=toggle>
<label class="icon cursor" for=chapter-73e82560fcb7145b7c0e2ec47af8fc04><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/zfs/>Rozdział 20. The Z File System (ZFS)</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-differences>20.1. What Makes ZFS Different</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-quickstart>20.2. Quick Start Guide</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-zpool>20.3. <code>zpool</code> Administration</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-zfs>20.4. <code>zfs</code> Administration</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-zfs-allow>20.5. Delegated Administration</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-advanced>20.6. Advanced Topics</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-links>20.7. Additional Resources</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/zfs/#zfs-term>20.8. ZFS Features and Terminology</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/filesystems/>Rozdział 21. Other File Systems</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/filesystems/#filesystems-synopsis>21.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/filesystems/#filesystems-linux>21.2. Linux® File Systems</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/>Rozdział 22. Virtualization</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-synopsis>22.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-guest-parallels>22.2. FreeBSD as a Guest on Parallels for Mac OS® X</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-guest-virtualpc>22.3. FreeBSD as a Guest on Virtual PC for Windows®</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-guest-vmware>22.4. FreeBSD as a Guest on VMware Fusion for Mac OS®</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-guest-virtualbox>22.5. FreeBSD as a Guest on VirtualBox™</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-host-virtualbox>22.6. FreeBSD as a Host with VirtualBox™</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-host-bhyve>22.7. FreeBSD as a Host with bhyve</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/virtualization/#virtualization-host-xen>22.8. FreeBSD as a Xen™-Host</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/l10n/>Rozdział 23. Localization - i18n/L10n Usage and Setup</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/l10n/#l10n-synopsis>23.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/l10n/#using-localization>23.2. Using Localization</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/l10n/#l10n-compiling>23.3. Finding i18n Applications</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/l10n/#lang-setup>23.4. Locale Configuration for Specific Languages</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/cutting-edge/>Rozdział 24. Updating and Upgrading FreeBSD</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. FreeBSD Update</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/cutting-edge/#updating-upgrading-documentation>24.3. Updating the Documentation Set</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/cutting-edge/#current-stable>24.4. Tracking a Development Branch</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/cutting-edge/#makeworld>24.5. Updating FreeBSD from Source</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/cutting-edge/#small-lan>24.6. Tracking for Multiple Machines</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/dtrace/>Rozdział 25. DTrace</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/dtrace/#dtrace-synopsis>25.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/dtrace/#dtrace-implementation>25.2. Implementation Differences</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/dtrace/#dtrace-enable>25.3. Enabling DTrace Support</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/dtrace/#dtrace-using>25.4. Using DTrace</a></li></ul></li><li><input type=checkbox id=chapter-913e72bfb3d6947b2869d3e9447a6eaa class=toggle>
<label class="icon cursor" for=chapter-913e72bfb3d6947b2869d3e9447a6eaa><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/usb-device-mode/>Rozdział 26. USB Device Mode / USB OTG</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/usb-device-mode/#usb-device-mode-synopsis>26.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/usb-device-mode/#usb-device-mode-terminals>26.2. USB Virtual Serial Ports</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/usb-device-mode/#usb-device-mode-network>26.3. USB Device Mode Network Interfaces</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/usb-device-mode/#usb-device-mode-storage>26.4. USB Virtual Storage Device</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/partiv/>Część IV. Komunikacja sieciowa</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/serialcomms/>Rozdział 27. Serial Communications</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/serialcomms/#serial-synopsis>27.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/serialcomms/#serial>27.2. Serial Terminology and Hardware</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/serialcomms/#term>27.3. Terminals</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/serialcomms/#dialup>27.4. Dial-in Service</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/serialcomms/#dialout>27.5. Dial-out Service</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/serialcomms/#serialconsole-setup>27.6. Setting Up the Serial Console</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/ppp-and-slip/>Rozdział 28. PPP</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>28.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ppp-and-slip/#userppp>28.2. Configuring PPP</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ppp-and-slip/#ppp-troubleshoot>28.3. Troubleshooting PPP Connections</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ppp-and-slip/#pppoe>28.4. Using PPP over Ethernet (PPPoE)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/ppp-and-slip/#pppoa>28.5. Using PPP over ATM (PPPoA)</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/mail/>Rozdział 29. Electronic Mail</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-synopsis>29.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-using>29.2. Mail Components</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#sendmail>29.3. Sendmail Configuration Files</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-changingmta>29.4. Changing the Mail Transfer Agent</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-trouble>29.5. Troubleshooting</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-advanced>29.6. Advanced Topics</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#outgoing-only>29.7. Setting Up to Send Only</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#SMTP-dialup>29.8. Using Mail with a Dialup Connection</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#SMTP-Auth>29.9. SMTP Authentication</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-agents>29.10. Mail User Agents</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-fetchmail>29.11. Using fetchmail</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mail/#mail-procmail>29.12. Using procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/>Rozdział 30. Network Servers</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-servers-synopsis>30.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-inetd>30.2. The inetd Super-Server</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-nfs>30.3. Network File System (NFS)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-nis>30.4. Network Information System (NIS)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-ldap>30.5. Lightweight Directory Access Protocol (LDAP)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-dhcp>30.6. Dynamic Host Configuration Protocol (DHCP)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-dns>30.7. Domain Name System (DNS)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-apache>30.8. Apache HTTP Server</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-ftp>30.9. File Transfer Protocol (FTP)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-samba>30.10. File and Print Services for Microsoft® Windows® Clients (Samba)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-ntp>30.11. Clock Synchronization with NTP</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/network-servers/#network-iscsi>30.12. iSCSI Initiator and Target Configuration</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/firewalls/>Rozdział 31. Firewalls</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/firewalls/#firewalls-intro>31.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/firewalls/#firewalls-concepts>31.2. Firewall Concepts</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/firewalls/#firewalls-pf>31.3. PF</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/firewalls/#firewalls-ipfw>31.4. IPFW</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/firewalls/#firewalls-ipf>31.5. IPFILTER (IPF)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/firewalls/#firewalls-blacklistd>31.6. Blacklistd</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/>Rozdział 32. Advanced Networking</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#advanced-networking-synopsis>32.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-routing>32.2. Gateways and Routes</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-wireless>32.3. Wireless Networking</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-usb-tethering>32.4. USB Tethering</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-bluetooth>32.5. Bluetooth</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-bridging>32.6. Bridging</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-aggregation>32.7. Link Aggregation and Failover</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-diskless>32.8. Diskless Operation with PXE</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-ipv6>32.9. IPv6</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#carp>32.10. Common Address Redundancy Protocol (CARP)</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/advanced-networking/#network-vlan>32.11. VLANs</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/partv/>Część V. Dodatki</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/mirrors/>Dodatek A. Obtaining FreeBSD</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/mirrors/#mirrors-cdrom>A.1. CD and DVD Sets</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mirrors/#mirrors-ftp>A.2. FTP Sites</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mirrors/#svn>A.3. Using Subversion</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/mirrors/#mirrors-rsync>A.4. Using rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/bibliography/>Dodatek B. Bibliografia</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/bibliography/#bibliography-freebsd>B.1. Książki i czasopisma poświęcone FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/eresources/>Dodatek C. Resources on the Internet</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/eresources/#eresources-www>C.1. Websites</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/eresources/#eresources-mail>C.2. Mailing Lists</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/eresources/#eresources-news>C.3. Usenet Newsgroups</a></li><li><a href=https://docs.freebsd.org/pl/books/handbook/eresources/#eresources-web>C.4. Official Mirrors</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/pl/books/handbook/pgpkeys/>Dodatek D. Klucze PGP</a><ul><li><a href=https://docs.freebsd.org/pl/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Oficerowie</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Rozdział 11. Configuration and Tuning</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#config-synopsis>11.1. Synopsis</a></li><li><a href=#configtuning-starting-services>11.2. Starting Services</a></li><li><a href=#configtuning-cron>11.3. Configuring cron(8)</a></li><li><a href=#configtuning-rcd>11.4. Managing Services in FreeBSD</a></li><li><a href=#config-network-setup>11.5. Setting Up Network Interface Cards</a></li><li><a href=#configtuning-virtual-hosts>11.6. Virtual Hosts</a></li><li><a href=#configtuning-syslog>11.7. Configuring System Logging</a></li><li><a href=#configtuning-configfiles>11.8. Configuration Files</a></li><li><a href=#configtuning-sysctl>11.9. Tuning with sysctl(8)</a></li><li><a href=#configtuning-disk>11.10. Tuning Disks</a></li><li><a href=#configtuning-kernel-limits>11.11. Tuning Kernel Limits</a></li><li><a href=#adding-swap-space>11.12. Adding Swap Space</a></li><li><a href=#acpi-overview>11.13. Power and Resource Management</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=config-synopsis>11.1. Synopsis<a class=anchor href=#config-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>One of the important aspects of FreeBSD is proper system configuration. This chapter explains much of the FreeBSD configuration process, including some of the parameters which can be set to tune a FreeBSD system.</p></div><div class=paragraph><p>After reading this chapter, you will know:</p></div><div class=ulist><ul><li><p>The basics of <span class=filename>rc.conf</span> configuration and <span class=filename>/usr/local/etc/rc.d</span> startup scripts.</p></li><li><p>How to configure and test a network card.</p></li><li><p>How to configure virtual hosts on network devices.</p></li><li><p>How to use the various configuration files in <span class=filename>/etc</span>.</p></li><li><p>How to tune FreeBSD using <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variables.</p></li><li><p>How to tune disk performance and modify kernel limitations.</p></li></ul></div><div class=paragraph><p>Before reading this chapter, you should:</p></div><div class=ulist><ul><li><p>Understand UNIX® and FreeBSD basics (<a href=../basics/#basics>FreeBSD Basics</a>).</p></li><li><p>Be familiar with the basics of kernel configuration and compilation (<a href=../kernelconfig/#kernelconfig>Configuring the FreeBSD Kernel</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=configtuning-starting-services>11.2. Starting Services<a class=anchor href=#configtuning-starting-services></a></h2><div class=sectionbody><div class=paragraph><p>Many users install third party software on FreeBSD from the Ports Collection and require the installed services to be started upon system initialization. Services, such as <a class=package href=https://cgit.freebsd.org/ports/tree/mail/postfix/>mail/postfix</a> or <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a> are just two of the many software packages which may be started during system initialization. This section explains the procedures available for starting third party software.</p></div><div class=paragraph><p>In FreeBSD, most included services, such as <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>, are started through the system startup scripts.</p></div><div class=sect2><h3 id=_extended_application_configuration>11.2.1. Extended Application Configuration<a class=anchor href=#_extended_application_configuration></a></h3><div class=paragraph><p>Now that FreeBSD includes <span class=filename>rc.d</span>, configuration of application startup is easier and provides more features. Using the key words discussed in <a href=#configtuning-rcd>Managing Services in FreeBSD</a>, applications can be set to start after certain other services and extra flags can be passed through <span class=filename>/etc/rc.conf</span> in place of hard coded flags in the startup script. A basic script may look similar to the following:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# PROVIDE: utility
# REQUIRE: DAEMON
# KEYWORD: shutdown

. /etc/rc.subr

name=utility
rcvar=utility_enable

command=&#34;/usr/local/sbin/utility&#34;

load_rc_config $name

#
# DO NOT CHANGE THESE DEFAULT VALUES HERE
# SET THEM IN THE /etc/rc.conf FILE
#
utility_enable=${utility_enable-&#34;NO&#34;}
pidfile=${utility_pidfile-&#34;/var/run/utility.pid&#34;}

run_rc_command &#34;$1&#34;</pre></div></div><div class=paragraph><p>This script will ensure that the provided <code>utility</code> will be started after the <code>DAEMON</code> pseudo-service. It also provides a method for setting and tracking the process ID (PID).</p></div><div class=paragraph><p>This application could then have the following line placed in <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>utility_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>This method allows for easier manipulation of command line arguments, inclusion of the default functions provided in <span class=filename>/etc/rc.subr</span>, compatibility with <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a>, and provides for easier configuration via <span class=filename>rc.conf</span>.</p></div></div><div class=sect2><h3 id=_using_services_to_start_services>11.2.2. Using Services to Start Services<a class=anchor href=#_using_services_to_start_services></a></h3><div class=paragraph><p>Other services can be started using <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>. Working with <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> and its configuration is described in depth in <a href=../network-servers/#network-inetd>“The inetd Super-Server”</a>.</p></div><div class=paragraph><p>In some cases, it may make more sense to use <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> to start system services. This approach has a number of advantages as <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> runs these processes as the owner of the <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=5&amp;format=html">crontab(5)</a>. This allows regular users to start and maintain their own applications.</p></div><div class=paragraph><p>The <code>@reboot</code> feature of <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>, may be used in place of the time specification. This causes the job to run when <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> is started, normally during system initialization.</p></div></div></div></div><div class=sect1><h2 id=configtuning-cron>11.3. Configuring <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a><a class=anchor href=#configtuning-cron></a></h2><div class=sectionbody><div class=paragraph><p>One of the most useful utilities in FreeBSD is cron. This utility runs in the background and regularly checks <span class=filename>/etc/crontab</span> for tasks to execute and searches <span class=filename>/var/cron/tabs</span> for custom crontab files. These files are used to schedule tasks which cron runs at the specified times. Each entry in a crontab defines a task to run and is known as a <em>cron job</em>.</p></div><div class=paragraph><p>Two different types of configuration files are used: the system crontab, which should not be modified, and user crontabs, which can be created and edited as needed. The format used by these files is documented in <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=5&amp;format=html">crontab(5)</a>. The format of the system crontab, <span class=filename>/etc/crontab</span> includes a <code>who</code> column which does not exist in user crontabs. In the system crontab, cron runs the command as the user specified in this column. In a user crontab, all commands run as the user who created the crontab.</p></div><div class=paragraph><p>User crontabs allow individual users to schedule their own tasks. The <code>root</code> user can also have a user <span class=filename>crontab</span> which can be used to schedule tasks that do not exist in the system <span class=filename>crontab</span>.</p></div><div class=paragraph><p>Here is a sample entry from the system crontab, <span class=filename>/etc/crontab</span>:</p></div><div class="literalblock programlisting"><div class=content><pre># /etc/crontab - root&#39;s crontab for FreeBSD
#
# $FreeBSD$
<i class=conum data-value=1></i><b>(1)</b>
SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <i class=conum data-value=2></i><b>(2)</b>
#
#minute	hour	mday	month	wday	who	command <i class=conum data-value=3></i><b>(3)</b>
#
*/5	*	*	*	*	root	/usr/libexec/atrun <i class=conum data-value=4></i><b>(4)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Lines that begin with the <code>#</code> character are comments. A comment can be placed in the file as a reminder of what and why a desired action is performed. Comments cannot be on the same line as a command or else they will be interpreted as part of the command; they must be on a new line. Blank lines are ignored.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>The equals (<code>=</code>) character is used to define any environment settings. In this example, it is used to define the <code>SHELL</code> and <code>PATH</code>. If the <code>SHELL</code> is omitted, cron will use the default Bourne shell. If the <code>PATH</code> is omitted, the full path must be given to the command or script to run.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>This line defines the seven fields used in a system crontab: <code>minute</code>, <code>hour</code>, <code>mday</code>, <code>month</code>, <code>wday</code>, <code>who</code>, and <code>command</code>. The <code>minute</code> field is the time in minutes when the specified command will be run, the <code>hour</code> is the hour when the specified command will be run, the <code>mday</code> is the day of the month, <code>month</code> is the month, and <code>wday</code> is the day of the week. These fields must be numeric values, representing the twenty-four hour clock, or a <code>*</code>, representing all values for that field. The <code>who</code> field only exists in the system crontab and specifies which user the command should be run as. The last field is the command to be executed.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>This entry defines the values for this cron job. The <code>*/5</code>, followed by several more <code>*</code> characters, specifies that <code>/usr/libexec/atrun</code> is invoked by <code>root</code> every five minutes of every hour, of every day and day of the week, of every month.Commands can include any number of switches. However, commands which extend to multiple lines need to be broken with the backslash "\" continuation character.</td></tr></tbody></table></div><div class=sect2><h3 id=configtuning-installcrontab>11.3.1. Creating a User Crontab<a class=anchor href=#configtuning-installcrontab></a></h3><div class=paragraph><p>To create a user crontab, invoke <code>crontab</code> in editor mode:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% crontab <span class=nt>-e</span></code></pre></div></div><div class=paragraph><p>This will open the user’s crontab using the default text editor. The first time a user runs this command, it will open an empty file. Once a user creates a crontab, this command will open that file for editing.</p></div><div class=paragraph><p>It is useful to add these lines to the top of the crontab file in order to set the environment variables and to remember the meanings of the fields in the crontab:</p></div><div class="literalblock programlisting"><div class=content><pre>SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin
# Order of crontab fields
# minute	hour	mday	month	wday	command</pre></div></div><div class=paragraph><p>Then add a line for each command or script to run, specifying the time to run the command. This example runs the specified custom Bourne shell script every day at two in the afternoon. Since the path to the script is not specified in <code>PATH</code>, the full path to the script is given:</p></div><div class="literalblock programlisting"><div class=content><pre>0	14	*	*	*	/usr/home/dru/bin/mycustomscript.sh</pre></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Before using a custom script, make sure it is executable and test it with the limited set of environment variables set by cron. To replicate the environment that would be used to run the above cron entry, use:</p></div><div class="literalblock programlisting"><div class=content><pre>env -i SHELL=/bin/sh PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin HOME=/home/dru LOGNAME=dru /usr/home/dru/bin/mycustomscript.sh</pre></div></div><div class=paragraph><p>The environment set by cron is discussed in <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=5&amp;format=html">crontab(5)</a>. Checking that scripts operate correctly in a cron environment is especially important if they include any commands that delete files using wildcards.</p></div></td></tr></tbody></table></div><div class=paragraph><p>When finished editing the crontab, save the file. It will automatically be installed and cron will read the crontab and run its cron jobs at their specified times. To list the cron jobs in a crontab, use this command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% crontab <span class=nt>-l</span>
0	14	<span class=k>*</span>	<span class=k>*</span>	<span class=k>*</span>	/usr/home/dru/bin/mycustomscript.sh</code></pre></div></div><div class=paragraph><p>To remove all of the cron jobs in a user crontab:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% crontab <span class=nt>-r</span>
remove crontab <span class=k>for </span>dru? y</code></pre></div></div></div></div></div><div class=sect1><h2 id=configtuning-rcd>11.4. Managing Services in FreeBSD<a class=anchor href=#configtuning-rcd></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD uses the <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> system of startup scripts during system initialization and for managing services. The scripts listed in <span class=filename>/etc/rc.d</span> provide basic services which can be controlled with the <code>start</code>, <code>stop</code>, and <code>restart</code> options to <a href="https://man.freebsd.org/cgi/man.cgi?query=service&amp;sektion=8&amp;format=html">service(8)</a>. For instance, <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> can be restarted with the following command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd restart</span></code></pre></div></div><div class=paragraph><p>This procedure can be used to start services on a running system. Services will be started automatically at boot time as specified in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>. For example, to enable <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> at system startup, add the following line to <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>natd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>If a <code>natd_enable="NO"</code> line is already present, change the <code>NO</code> to <code>YES</code>. The <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> scripts will automatically load any dependent services during the next boot, as described below.</p></div><div class=paragraph><p>Since the <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> system is primarily intended to start and stop services at system startup and shutdown time, the <code>start</code>, <code>stop</code> and <code>restart</code> options will only perform their action if the appropriate <span class=filename>/etc/rc.conf</span> variable is set. For instance, <code>sshd restart</code> will only work if <code>sshd_enable</code> is set to <code>YES</code> in <span class=filename>/etc/rc.conf</span>. To <code>start</code>, <code>stop</code> or <code>restart</code> a service regardless of the settings in <span class=filename>/etc/rc.conf</span>, these commands should be prefixed with "one". For instance, to restart <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> regardless of the current <span class=filename>/etc/rc.conf</span> setting, execute the following command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd onerestart</span></code></pre></div></div><div class=paragraph><p>To check if a service is enabled in <span class=filename>/etc/rc.conf</span>, run the appropriate <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> script with <code>rcvar</code>. This example checks to see if <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> is enabled in <span class=filename>/etc/rc.conf</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd rcvar</span>
<span class=c># sshd</span>
<span class=c>#</span>
<span class=nv>sshd_enable</span><span class=o>=</span><span class=s2>&#34;YES&#34;</span>
<span class=c>#   (default: &#34;&#34;)</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code># sshd</code> line is output from the above command, not a <code>root</code> console.</p></div></td></tr></tbody></table></div><div class=paragraph><p>To determine whether or not a service is running, use <code>status</code>. For instance, to verify that <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> is running:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd status</span>
sshd is running as pid 433.</code></pre></div></div><div class=paragraph><p>In some cases, it is also possible to <code>reload</code> a service. This attempts to send a signal to an individual service, forcing the service to reload its configuration files. In most cases, this means sending the service a <code>SIGHUP</code> signal. Support for this feature is not included for every service.</p></div><div class=paragraph><p>The <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> system is used for network services and it also contributes to most of the system initialization. For instance, when the <span class=filename>/etc/rc.d/bgfsck</span> script is executed, it prints out the following message:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Starting background file system checks <span class=k>in </span>60 seconds.</code></pre></div></div><div class=paragraph><p>This script is used for background file system checks, which occur only during system initialization.</p></div><div class=paragraph><p>Many system services depend on other services to function properly. For example, <a href="https://man.freebsd.org/cgi/man.cgi?query=yp&amp;sektion=8&amp;format=html">yp(8)</a> and other RPC-based services may fail to start until after the <a href="https://man.freebsd.org/cgi/man.cgi?query=rpcbind&amp;sektion=8&amp;format=html">rpcbind(8)</a> service has started. To resolve this issue, information about dependencies and other meta-data is included in the comments at the top of each startup script. The <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a> program is used to parse these comments during system initialization to determine the order in which system services should be invoked to satisfy the dependencies.</p></div><div class=paragraph><p>The following key word must be included in all startup scripts as it is required by <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.subr&amp;sektion=8&amp;format=html">rc.subr(8)</a> to "enable" the startup script:</p></div><div class=ulist><ul><li><p><code>PROVIDE</code>: Specifies the services this file provides.</p></li></ul></div><div class=paragraph><p>The following key words may be included at the top of each startup script. They are not strictly necessary, but are useful as hints to <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a>:</p></div><div class=ulist><ul><li><p><code>REQUIRE</code>: Lists services which are required for this service. The script containing this key word will run <em>after</em> the specified services.</p></li><li><p><code>BEFORE</code>: Lists services which depend on this service. The script containing this key word will run <em>before</em> the specified services.</p></li></ul></div><div class=paragraph><p>By carefully setting these keywords for each startup script, an administrator has a fine-grained level of control of the startup order of the scripts, without the need for "runlevels" used by some UNIX® operating systems.</p></div><div class=paragraph><p>Additional information can be found in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.subr&amp;sektion=8&amp;format=html">rc.subr(8)</a>. Refer to <a href=https://docs.freebsd.org/en/articles/rc-scripting/>this article</a> for instructions on how to create custom <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> scripts.</p></div><div class=sect2><h3 id=configtuning-core-configuration>11.4.1. Managing System-Specific Configuration<a class=anchor href=#configtuning-core-configuration></a></h3><div class=paragraph><p>The principal location for system configuration information is <span class=filename>/etc/rc.conf</span>. This file contains a wide range of configuration information and it is read at system startup to configure the system. It provides the configuration information for the <span class=filename>rc*</span> files.</p></div><div class=paragraph><p>The entries in <span class=filename>/etc/rc.conf</span> override the default settings in <span class=filename>/etc/defaults/rc.conf</span>. The file containing the default settings should not be edited. Instead, all system-specific changes should be made to <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>A number of strategies may be applied in clustered applications to separate site-wide configuration from system-specific configuration in order to reduce administration overhead. The recommended approach is to place system-specific configuration into <span class=filename>/etc/rc.conf.local</span>. For example, these entries in <span class=filename>/etc/rc.conf</span> apply to all systems:</p></div><div class="literalblock programlisting"><div class=content><pre>sshd_enable=&#34;YES&#34;
keyrate=&#34;fast&#34;
defaultrouter=&#34;10.1.1.254&#34;</pre></div></div><div class=paragraph><p>Whereas these entries in <span class=filename>/etc/rc.conf.local</span> apply to this system only:</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;node1.example.org&#34;
ifconfig_fxp0=&#34;inet 10.1.1.1/8&#34;</pre></div></div><div class=paragraph><p>Distribute <span class=filename>/etc/rc.conf</span> to every system using an application such as rsync or puppet, while <span class=filename>/etc/rc.conf.local</span> remains unique.</p></div><div class=paragraph><p>Upgrading the system will not overwrite <span class=filename>/etc/rc.conf</span>, so system configuration information will not be lost.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Both <span class=filename>/etc/rc.conf</span> and <span class=filename>/etc/rc.conf.local</span> are parsed by <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>. This allows system operators to create complex configuration scenarios. Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> for further information on this topic.</p></div></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=config-network-setup>11.5. Setting Up Network Interface Cards<a class=anchor href=#config-network-setup></a></h2><div class=sectionbody><div class=paragraph><p>Adding and configuring a network interface card (NIC) is a common task for any FreeBSD administrator.</p></div><div class=sect2><h3 id=_locating_the_correct_driver>11.5.1. Locating the Correct Driver<a class=anchor href=#_locating_the_correct_driver></a></h3><div class=paragraph><p>First, determine the model of the NIC and the chip it uses. FreeBSD supports a wide variety of NICs. Check the Hardware Compatibility List for the FreeBSD release to see if the NIC is supported.</p></div><div class=paragraph><p>If the NIC is supported, determine the name of the FreeBSD driver for the NIC. Refer to <span class=filename>/usr/src/sys/conf/NOTES</span> and <span class=filename>/usr/src/sys/arch/conf/NOTES</span> for the list of NIC drivers with some information about the supported chipsets. When in doubt, read the manual page of the driver as it will provide more information about the supported hardware and any known limitations of the driver.</p></div><div class=paragraph><p>The drivers for common NICs are already present in the <span class=filename>GENERIC</span> kernel, meaning the NIC should be probed during boot. The system’s boot messages can be viewed by typing <code>more /var/run/dmesg.boot</code> and using the spacebar to scroll through the text. In this example, two Ethernet NICs using the <a href="https://man.freebsd.org/cgi/man.cgi?query=dc&amp;sektion=4&amp;format=html">dc(4)</a> driver are present on the system:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-0xd38
000ff irq 15 at device 11.0 on pci0
miibus0: &lt;MII bus&gt; on dc0
bmtphy0: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus0
bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc0: Ethernet address: 00:a0:cc:da:da:da
dc0: <span class=o>[</span>ITHREAD]
dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-0xd30
000ff irq 11 at device 12.0 on pci0
miibus1: &lt;MII bus&gt; on dc1
bmtphy1: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus1
bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc1: Ethernet address: 00:a0:cc:da:da:db
dc1: <span class=o>[</span>ITHREAD]</code></pre></div></div><div class=paragraph><p>If the driver for the NIC is not present in <span class=filename>GENERIC</span>, but a driver is available, the driver will need to be loaded before the NIC can be configured and used. This may be accomplished in one of two ways:</p></div><div class=ulist><ul><li><p>The easiest way is to load a kernel module for the NIC using <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a>. To also automatically load the driver at boot time, add the appropriate line to <span class=filename>/boot/loader.conf</span>. Not all NIC drivers are available as modules.</p></li><li><p>Alternatively, statically compile support for the NIC into a custom kernel. Refer to <span class=filename>/usr/src/sys/conf/NOTES</span>, <span class=filename>/usr/src/sys/arch/conf/NOTES</span> and the manual page of the driver to determine which line to add to the custom kernel configuration file. For more information about recompiling the kernel, refer to <a href=../kernelconfig/#kernelconfig>Configuring the FreeBSD Kernel</a>. If the NIC was detected at boot, the kernel does not need to be recompiled.</p></li></ul></div><div class=sect3><h4 id=config-network-ndis>11.5.1.1. Using Windows® NDIS Drivers<a class=anchor href=#config-network-ndis></a></h4><div class=paragraph><p>Unfortunately, there are still many vendors that do not provide schematics for their drivers to the open source community because they regard such information as trade secrets. Consequently, the developers of FreeBSD and other operating systems are left with two choices: develop the drivers by a long and pain-staking process of reverse engineering or using the existing driver binaries available for Microsoft® Windows® platforms.</p></div><div class=paragraph><p>FreeBSD provides "native" support for the Network Driver Interface Specification (NDIS). It includes <a href="https://man.freebsd.org/cgi/man.cgi?query=ndisgen&amp;sektion=8&amp;format=html">ndisgen(8)</a> which can be used to convert a Windows® XP driver into a format that can be used on FreeBSD. Because the <a href="https://man.freebsd.org/cgi/man.cgi?query=ndis&amp;sektion=4&amp;format=html">ndis(4)</a> driver uses a Windows® XP binary, it only runs on i386™ and amd64 systems. PCI, CardBus, PCMCIA, and USB devices are supported.</p></div><div class=paragraph><p>To use <a href="https://man.freebsd.org/cgi/man.cgi?query=ndisgen&amp;sektion=8&amp;format=html">ndisgen(8)</a>, three things are needed:</p></div><div class="olist arabic"><ol class=arabic><li><p>FreeBSD kernel sources.</p></li><li><p>A Windows® XP driver binary with a <span class=filename>.SYS</span> extension.</p></li><li><p>A Windows® XP driver configuration file with a <span class=filename>.INF</span> extension.</p></li></ol></div><div class=paragraph><p>Download the <span class=filename>.SYS</span> and <span class=filename>.INF</span> files for the specific NIC. Generally, these can be found on the driver CD or at the vendor’s website. The following examples use <span class=filename>W32DRIVER.SYS</span> and <span class=filename>W32DRIVER.INF</span>.</p></div><div class=paragraph><p>The driver bit width must match the version of FreeBSD. For FreeBSD/i386, use a Windows® 32-bit driver. For FreeBSD/amd64, a Windows® 64-bit driver is needed.</p></div><div class=paragraph><p>The next step is to compile the driver binary into a loadable kernel module. As <code>root</code>, use <a href="https://man.freebsd.org/cgi/man.cgi?query=ndisgen&amp;sektion=8&amp;format=html">ndisgen(8)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ndisgen /path/to/W32DRIVER.INF /path/to/W32DRIVER.SYS</span></code></pre></div></div><div class=paragraph><p>This command is interactive and prompts for any extra information it requires. A new kernel module will be generated in the current directory. Use <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a> to load the new module:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload ./W32DRIVER_SYS.ko</span></code></pre></div></div><div class=paragraph><p>In addition to the generated kernel module, the <span class=filename>ndis.ko</span> and <span class=filename>if_ndis.ko</span> modules must be loaded. This should happen automatically when any module that depends on <a href="https://man.freebsd.org/cgi/man.cgi?query=ndis&amp;sektion=4&amp;format=html">ndis(4)</a> is loaded. If not, load them manually, using the following commands:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload ndis</span>
<span class=c># kldload if_ndis</span></code></pre></div></div><div class=paragraph><p>The first command loads the <a href="https://man.freebsd.org/cgi/man.cgi?query=ndis&amp;sektion=4&amp;format=html">ndis(4)</a> miniport driver wrapper and the second loads the generated NIC driver.</p></div><div class=paragraph><p>Check <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a> to see if there were any load errors. If all went well, the output should be similar to the following:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
ndis0: NDIS API version: 5.0
ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</code></pre></div></div><div class=paragraph><p>From here, <span class=filename>ndis0</span> can be configured like any other NIC.</p></div><div class=paragraph><p>To configure the system to load the <a href="https://man.freebsd.org/cgi/man.cgi?query=ndis&amp;sektion=4&amp;format=html">ndis(4)</a> modules at boot time, copy the generated module, <span class=filename>W32DRIVER_SYS.ko</span>, to <span class=filename>/boot/modules</span>. Then, add the following line to <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>W32DRIVER_SYS_load=&#34;YES&#34;</pre></div></div></div></div><div class=sect2><h3 id=_configuring_the_network_card>11.5.2. Configuring the Network Card<a class=anchor href=#_configuring_the_network_card></a></h3><div class=paragraph><p>Once the right driver is loaded for the NIC, the card needs to be configured. It may have been configured at installation time by <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdinstall&amp;sektion=8&amp;format=html">bsdinstall(8)</a>.</p></div><div class=paragraph><p>To display the NIC configuration, enter the following command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ifconfig
dc0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:da
        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect <span class=o>(</span>100baseTX &lt;full-duplex&gt;<span class=o>)</span>
        status: active
dc1: <span class=nv>flags</span><span class=o>=</span>8802&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:db
        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255
        media: Ethernet 10baseT/UTP
        status: no carrier
lo0: <span class=nv>flags</span><span class=o>=</span>8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        <span class=nv>options</span><span class=o>=</span>3&lt;RXCSUM,TXCSUM&gt;
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
        nd6 <span class=nv>options</span><span class=o>=</span>3&lt;PERFORMNUD,ACCEPT_RTADV&gt;</code></pre></div></div><div class=paragraph><p>In this example, the following devices were displayed:</p></div><div class=ulist><ul><li><p><span class=filename>dc0</span>: The first Ethernet interface.</p></li><li><p><span class=filename>dc1</span>: The second Ethernet interface.</p></li><li><p><span class=filename>lo0</span>: The loopback device.</p></li></ul></div><div class=paragraph><p>FreeBSD uses the driver name followed by the order in which the card is detected at boot to name the NIC. For example, <span class=filename>sis2</span> is the third NIC on the system using the <a href="https://man.freebsd.org/cgi/man.cgi?query=sis&amp;sektion=4&amp;format=html">sis(4)</a> driver.</p></div><div class=paragraph><p>In this example, <span class=filename>dc0</span> is up and running. The key indicators are:</p></div><div class="olist arabic"><ol class=arabic><li><p><code>UP</code> means that the card is configured and ready.</p></li><li><p>The card has an Internet (<code>inet</code>) address, <code>192.168.1.3</code>.</p></li><li><p>It has a valid subnet mask (<code>netmask</code>), where <code>0xffffff00</code> is the same as <code>255.255.255.0</code>.</p></li><li><p>It has a valid broadcast address, <code>192.168.1.255</code>.</p></li><li><p>The MAC address of the card (<code>ether</code>) is <code>00:a0:cc:da:da:da</code>.</p></li><li><p>The physical media selection is on autoselection mode (<code>media: Ethernet autoselect (100baseTX &lt;full-duplex>)</code>). In this example, <span class=filename>dc1</span> is configured to run with <code>10baseT/UTP</code> media. For more information on available media types for a driver, refer to its manual page.</p></li><li><p>The status of the link (<code>status</code>) is <code>active</code>, indicating that the carrier signal is detected. For <span class=filename>dc1</span>, the <code>status: no carrier</code> status is normal when an Ethernet cable is not plugged into the card.</p></li></ol></div><div class=paragraph><p>If the <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> output had shown something similar to:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>dc0: <span class=nv>flags</span><span class=o>=</span>8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	<span class=nv>options</span><span class=o>=</span>80008&lt;VLAN_MTU,LINKSTATE&gt;
	ether 00:a0:cc:da:da:da
	media: Ethernet autoselect <span class=o>(</span>100baseTX &lt;full-duplex&gt;<span class=o>)</span>
	status: active</code></pre></div></div><div class=paragraph><p>it would indicate the card has not been configured.</p></div><div class=paragraph><p>The card must be configured as <code>root</code>. The NIC configuration can be performed from the command line with <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> but will not persist after a reboot unless the configuration is also added to <span class=filename>/etc/rc.conf</span>. If a DHCP server is present on the LAN, just add this line:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_dc0=&#34;DHCP&#34;</pre></div></div><div class=paragraph><p>Replace <em>dc0</em> with the correct value for the system.</p></div><div class=paragraph><p>The line added, then, follow the instructions given in <a href=#config-network-testing>Testing and Troubleshooting</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If the network was configured during installation, some entries for the NIC(s) may be already present. Double check <span class=filename>/etc/rc.conf</span> before adding any lines.</p></div></td></tr></tbody></table></div><div class=paragraph><p>If there is no DHCP server, the NIC(s) must be configured manually. Add a line for each NIC present on the system, as seen in this example:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_dc0=&#34;inet 192.168.1.3 netmask 255.255.255.0&#34;
ifconfig_dc1=&#34;inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP&#34;</pre></div></div><div class=paragraph><p>Replace <span class=filename>dc0</span> and <span class=filename>dc1</span> and the IP address information with the correct values for the system. Refer to the man page for the driver, <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a>, and <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> for more details about the allowed options and the syntax of <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>If the network is not using DNS, edit <span class=filename>/etc/hosts</span> to add the names and IP addresses of the hosts on the LAN, if they are not already there. For more information, refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> and to <span class=filename>/usr/shared/examples/etc/hosts</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If there is no DHCP server and access to the Internet is needed, manually configure the default gateway and the nameserver:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#39;defaultrouter=&#34;your_default_router&#34;&#39; &gt;&gt; /etc/rc.conf</span>
<span class=c># echo &#39;nameserver your_DNS_server&#39; &gt;&gt; /etc/resolv.conf</span></code></pre></div></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=config-network-testing>11.5.3. Testing and Troubleshooting<a class=anchor href=#config-network-testing></a></h3><div class=paragraph><p>Once the necessary changes to <span class=filename>/etc/rc.conf</span> are saved, a reboot can be used to test the network configuration and to verify that the system restarts without any configuration errors. Alternatively, apply the settings to the networking system with this command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif restart</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If a default gateway has been set in <span class=filename>/etc/rc.conf</span>, also issue this command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service routing restart</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Once the networking system has been relaunched, test the NICs.</p></div><div class=sect3><h4 id=_testing_the_ethernet_card>11.5.3.1. Testing the Ethernet Card<a class=anchor href=#_testing_the_ethernet_card></a></h4><div class=paragraph><p>To verify that an Ethernet card is configured correctly, <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> the interface itself, and then <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> another machine on the LAN:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ping <span class=nt>-c5</span> 192.168.1.3
PING 192.168.1.3 <span class=o>(</span>192.168.1.3<span class=o>)</span>: 56 data bytes
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>0 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.082 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>1 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.074 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>2 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.076 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>3 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.108 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>4 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.076 ms

<span class=nt>---</span> 192.168.1.3 ping statistics <span class=nt>---</span>
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev <span class=o>=</span> 0.074/0.083/0.108/0.013 ms</code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ping <span class=nt>-c5</span> 192.168.1.2
PING 192.168.1.2 <span class=o>(</span>192.168.1.2<span class=o>)</span>: 56 data bytes
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>0 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.726 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>1 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.766 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>2 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.700 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>3 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.747 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>4 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.704 ms

<span class=nt>---</span> 192.168.1.2 ping statistics <span class=nt>---</span>
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev <span class=o>=</span> 0.700/0.729/0.766/0.025 ms</code></pre></div></div><div class=paragraph><p>To test network resolution, use the host name instead of the IP address. If there is no DNS server on the network, <span class=filename>/etc/hosts</span> must first be configured. To this purpose, edit <span class=filename>/etc/hosts</span> to add the names and IP addresses of the hosts on the LAN, if they are not already there. For more information, refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> and to <span class=filename>/usr/shared/examples/etc/hosts</span>.</p></div></div><div class=sect3><h4 id=_troubleshooting>11.5.3.2. Troubleshooting<a class=anchor href=#_troubleshooting></a></h4><div class=paragraph><p>When troubleshooting hardware and software configurations, check the simple things first. Is the network cable plugged in? Are the network services properly configured? Is the firewall configured correctly? Is the NIC supported by FreeBSD? Before sending a bug report, always check the Hardware Notes, update the version of FreeBSD to the latest STABLE version, check the mailing list archives, and search the Internet.</p></div><div class=paragraph><p>If the card works, yet performance is poor, read through <a href="https://man.freebsd.org/cgi/man.cgi?query=tuning&amp;sektion=7&amp;format=html">tuning(7)</a>. Also, check the network configuration as incorrect network settings can cause slow connections.</p></div><div class=paragraph><p>Some users experience one or two <code>device timeout</code> messages, which is normal for some cards. If they continue, or are bothersome, determine if the device is conflicting with another device. Double check the cable connections. Consider trying another card.</p></div><div class=paragraph><p>To resolve <code>watchdog timeout</code> errors, first check the network cable. Many cards require a PCI slot which supports bus mastering. On some old motherboards, only one PCI slot allows it, usually slot 0. Check the NIC and the motherboard documentation to determine if that may be the problem.</p></div><div class=paragraph><p><code>No route to host</code> messages occur if the system is unable to route a packet to the destination host. This can happen if no default route is specified or if a cable is unplugged. Check the output of <code>netstat -rn</code> and make sure there is a valid route to the host. If there is not, read <a href=../advanced-networking/#network-routing>“Gateways and Routes”</a>.</p></div><div class=paragraph><p><code>ping: sendto: Permission denied</code> error messages are often caused by a misconfigured firewall. If a firewall is enabled on FreeBSD but no rules have been defined, the default policy is to deny all traffic, even <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a>. Refer to <a href=../firewalls/#firewalls>Firewalls</a> for more information.</p></div><div class=paragraph><p>Sometimes performance of the card is poor or below average. In these cases, try setting the media selection mode from <code>autoselect</code> to the correct media selection. While this works for most hardware, it may or may not resolve the issue. Again, check all the network settings, and refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=tuning&amp;sektion=7&amp;format=html">tuning(7)</a>.</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-virtual-hosts>11.6. Virtual Hosts<a class=anchor href=#configtuning-virtual-hosts></a></h2><div class=sectionbody><div class=paragraph><p>A common use of FreeBSD is virtual site hosting, where one server appears to the network as many servers. This is achieved by assigning multiple network addresses to a single interface.</p></div><div class=paragraph><p>A given network interface has one "real" address, and may have any number of "alias" addresses. These aliases are normally added by placing alias entries in <span class=filename>/etc/rc.conf</span>, as seen in this example:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0_alias0=&#34;inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx&#34;</pre></div></div><div class=paragraph><p>Alias entries must start with <code>alias<em>0</em></code> using a sequential number such as <code>alias0</code>, <code>alias1</code>, and so on. The configuration process will stop at the first missing number.</p></div><div class=paragraph><p>The calculation of alias netmasks is important. For a given interface, there must be one address which correctly represents the network’s netmask. Any other addresses which fall within this network must have a netmask of all <code>1</code>s, expressed as either <code>255.255.255.255</code> or <code>0xffffffff</code>.</p></div><div class=paragraph><p>For example, consider the case where the <span class=filename>fxp0</span> interface is connected to two networks: <code>10.1.1.0</code> with a netmask of <code>255.255.255.0</code> and <code>202.0.75.16</code> with a netmask of <code>255.255.255.240</code>. The system is to be configured to appear in the ranges <code>10.1.1.1</code> through <code>10.1.1.5</code> and <code>202.0.75.17</code> through <code>202.0.75.20</code>. Only the first address in a given network range should have a real netmask. All the rest (<code>10.1.1.2</code> through <code>10.1.1.5</code> and <code>202.0.75.18</code> through <code>202.0.75.20</code>) must be configured with a netmask of <code>255.255.255.255</code>.</p></div><div class=paragraph><p>The following <span class=filename>/etc/rc.conf</span> entries configure the adapter correctly for this scenario:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0=&#34;inet 10.1.1.1 netmask 255.255.255.0&#34;
ifconfig_fxp0_alias0=&#34;inet 10.1.1.2 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias1=&#34;inet 10.1.1.3 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias2=&#34;inet 10.1.1.4 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias3=&#34;inet 10.1.1.5 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias4=&#34;inet 202.0.75.17 netmask 255.255.255.240&#34;
ifconfig_fxp0_alias5=&#34;inet 202.0.75.18 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias6=&#34;inet 202.0.75.19 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias7=&#34;inet 202.0.75.20 netmask 255.255.255.255&#34;</pre></div></div><div class=paragraph><p>A simpler way to express this is with a space-separated list of IP address ranges. The first address will be given the indicated subnet mask and the additional addresses will have a subnet mask of <code>255.255.255.255</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0_aliases=&#34;inet 10.1.1.1-5/24 inet 202.0.75.17-20/28&#34;</pre></div></div></div></div><div class=sect1><h2 id=configtuning-syslog>11.7. Configuring System Logging<a class=anchor href=#configtuning-syslog></a></h2><div class=sectionbody><div class=paragraph><p>Generating and reading system logs is an important aspect of system administration. The information in system logs can be used to detect hardware and software issues as well as application and system configuration errors. This information also plays an important role in security auditing and incident response. Most system daemons and applications will generate log entries.</p></div><div class=paragraph><p>FreeBSD provides a system logger, syslogd, to manage logging. By default, syslogd is started when the system boots. This is controlled by the variable <code>syslogd_enable</code> in <span class=filename>/etc/rc.conf</span>. There are numerous application arguments that can be set using <code>syslogd_flags</code> in <span class=filename>/etc/rc.conf</span>. Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> for more information on the available arguments.</p></div><div class=paragraph><p>This section describes how to configure the FreeBSD system logger for both local and remote logging and how to perform log rotation and log management.</p></div><div class=sect2><h3 id=_configuring_local_logging>11.7.1. Configuring Local Logging<a class=anchor href=#_configuring_local_logging></a></h3><div class=paragraph><p>The configuration file, <span class=filename>/etc/syslog.conf</span>, controls what syslogd does with log entries as they are received. There are several parameters to control the handling of incoming events. The <em>facility</em> describes which subsystem generated the message, such as the kernel or a daemon, and the <em>level</em> describes the severity of the event that occurred. This makes it possible to configure if and where a log message is logged, depending on the facility and level. It is also possible to take action depending on the application that sent the message, and in the case of remote logging, the hostname of the machine generating the logging event.</p></div><div class=paragraph><p>This configuration file contains one line per action, where the syntax for each line is a selector field followed by an action field. The syntax of the selector field is <em>facility.level</em> which will match log messages from <em>facility</em> at level <em>level</em> or higher. It is also possible to add an optional comparison flag before the level to specify more precisely what is logged. Multiple selector fields can be used for the same action, and are separated with a semicolon (<code>;</code>). Using <code>*</code> will match everything. The action field denotes where to send the log message, such as to a file or remote log host. As an example, here is the default <span class=filename>syslog.conf</span> from FreeBSD:</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$
#
#       Spaces ARE valid field separators in this file. However,
#       other *nix-like systems still insist on using tabs as field
#       separators. If you are sharing this file between systems, you
#       may want to use only tabs as field separators here.
#       Consult the syslog.conf(5) manpage.
*.err;kern.warning;auth.notice;mail.crit                /dev/console
*.notice;authpriv.none;kern.debug;lpr.info;mail.crit;news.err   /var/log/messages
security.*                                      /var/log/security
auth.info;authpriv.info                         /var/log/auth.log
mail.info                                       /var/log/maillog
lpr.info                                        /var/log/lpd-errs
ftp.info                                        /var/log/xferlog
cron.*                                          /var/log/cron
!-devd
*.=debug                                        /var/log/debug.log
*.emerg                                         *
# uncomment this to log all writes to /dev/console to /var/log/console.log
#console.info                                   /var/log/console.log
# uncomment this to enable logging of all log messages to /var/log/all.log
# touch /var/log/all.log and chmod it to mode 600 before it will work
#*.*                                            /var/log/all.log
# uncomment this to enable logging to a remote loghost named loghost
#*.*                                            @loghost
# uncomment these if you&#39;re running inn
# news.crit                                     /var/log/news/news.crit
# news.err                                      /var/log/news/news.err
# news.notice                                   /var/log/news/news.notice
# Uncomment this if you wish to see messages produced by devd
# !devd
# *.&gt;=info
!ppp
*.*                                             /var/log/ppp.log
!*</pre></div></div><div class=paragraph><p>In this example:</p></div><div class=ulist><ul><li><p>Line 8 matches all messages with a level of <code>err</code> or higher, as well as <code>kern.warning</code>, <code>auth.notice</code> and <code>mail.crit</code>, and sends these log messages to the console (<span class=filename>/dev/console</span>).</p></li><li><p>Line 12 matches all messages from the <code>mail</code> facility at level <code>info</code> or above and logs the messages to <span class=filename>/var/log/maillog</span>.</p></li><li><p>Line 17 uses a comparison flag (<code>=</code>) to only match messages at level <code>debug</code> and logs them to <span class=filename>/var/log/debug.log</span>.</p></li><li><p>Line 33 is an example usage of a program specification. This makes the rules following it only valid for the specified program. In this case, only the messages generated by ppp are logged to <span class=filename>/var/log/ppp.log</span>.</p></li></ul></div><div class=paragraph><p>The available levels, in order from most to least critical are <code>emerg</code>, <code>alert</code>, <code>crit</code>, <code>err</code>, <code>warning</code>, <code>notice</code>, <code>info</code>, and <code>debug</code>.</p></div><div class=paragraph><p>The facilities, in no particular order, are <code>auth</code>, <code>authpriv</code>, <code>console</code>, <code>cron</code>, <code>daemon</code>, <code>ftp</code>, <code>kern</code>, <code>lpr</code>, <code>mail</code>, <code>mark</code>, <code>news</code>, <code>security</code>, <code>syslog</code>, <code>user</code>, <code>uucp</code>, and <code>local0</code> through <code>local7</code>. Be aware that other operating systems might have different facilities.</p></div><div class=paragraph><p>To log everything of level <code>notice</code> and higher to <span class=filename>/var/log/daemon.log</span>, add the following entry:</p></div><div class="literalblock programlisting"><div class=content><pre>daemon.notice                                        /var/log/daemon.log</pre></div></div><div class=paragraph><p>For more information about the different levels and facilities, refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a>. For more information about <span class=filename>/etc/syslog.conf</span>, its syntax, and more advanced usage examples, see <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a>.</p></div></div><div class=sect2><h3 id=_log_management_and_rotation>11.7.2. Log Management and Rotation<a class=anchor href=#_log_management_and_rotation></a></h3><div class=paragraph><p>Log files can grow quickly, taking up disk space and making it more difficult to locate useful information. Log management attempts to mitigate this. In FreeBSD, newsyslog is used to manage log files. This built-in program periodically rotates and compresses log files, and optionally creates missing log files and signals programs when log files are moved. The log files may be generated by syslogd or by any other program which generates log files. While newsyslog is normally run from <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>, it is not a system daemon. In the default configuration, it runs every hour.</p></div><div class=paragraph><p>To know which actions to take, newsyslog reads its configuration file, <span class=filename>/etc/newsyslog.conf</span>. This file contains one line for each log file that newsyslog manages. Each line states the file owner, permissions, when to rotate that file, optional flags that affect log rotation, such as compression, and programs to signal when the log is rotated. Here is the default configuration in FreeBSD:</p></div><div class="literalblock programlisting"><div class=content><pre># configuration file for newsyslog
# $FreeBSD$
#
# Entries which do not specify the &#39;/pid_file&#39; field will cause the
# syslogd process to be signalled when that log file is rotated.  This
# action is only appropriate for log files which are written to by the
# syslogd process (ie, files listed in /etc/syslog.conf).  If there
# is no process which needs to be signalled when a given log file is
# rotated, then the entry for that file should include the &#39;N&#39; flag.
#
# The &#39;flags&#39; field is one or more of the letters: BCDGJNUXZ or a &#39;-&#39;.
#
# Note: some sites will want to select more restrictive protections than the
# defaults.  In particular, it may be desirable to switch many of the 644
# entries to 640 or 600.  For example, some sites will consider the
# contents of maillog, messages, and lpd-errs to be confidential.  In the
# future, these defaults may change to more conservative ones.
#
# logfilename          [owner:group]    mode count size when  flags [/pid_file] [sig_num]
/var/log/all.log                        600  7     *    @T00  J
/var/log/amd.log                        644  7     100  *     J
/var/log/auth.log                       600  7     100  @0101T JC
/var/log/console.log                    600  5     100  *     J
/var/log/cron                           600  3     100  *     JC
/var/log/daily.log                      640  7     *    @T00  JN
/var/log/debug.log                      600  7     100  *     JC
/var/log/kerberos.log                   600  7     100  *     J
/var/log/lpd-errs                       644  7     100  *     JC
/var/log/maillog                        640  7     *    @T00  JC
/var/log/messages                       644  5     100  @0101T JC
/var/log/monthly.log                    640  12    *    $M1D0 JN
/var/log/pflog                          600  3     100  *     JB    /var/run/pflogd.pid
/var/log/ppp.log        root:network    640  3     100  *     JC
/var/log/devd.log                       644  3     100  *     JC
/var/log/security                       600  10    100  *     JC
/var/log/sendmail.st                    640  10    *    168   B
/var/log/utx.log                        644  3     *    @01T05 B
/var/log/weekly.log                     640  5     1    $W6D0 JN
/var/log/xferlog                        600  7     100  *     JC</pre></div></div><div class=paragraph><p>Each line starts with the name of the log to be rotated, optionally followed by an owner and group for both rotated and newly created files. The <code>mode</code> field sets the permissions on the log file and <code>count</code> denotes how many rotated log files should be kept. The <code>size</code> and <code>when</code> fields tell newsyslog when to rotate the file. A log file is rotated when either its size is larger than the <code>size</code> field or when the time in the <code>when</code> field has passed. An asterisk (<code>*</code>) means that this field is ignored. The <em>flags</em> field gives further instructions, such as how to compress the rotated file or to create the log file if it is missing. The last two fields are optional and specify the name of the Process ID (PID) file of a process and a signal number to send to that process when the file is rotated.</p></div><div class=paragraph><p>For more information on all fields, valid flags, and how to specify the rotation time, refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog.conf&amp;sektion=5&amp;format=html">newsyslog.conf(5)</a>. Since newsyslog is run from <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>, it cannot rotate files more often than it is scheduled to run from <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>.</p></div></div><div class=sect2><h3 id=network-syslogd>11.7.3. Configuring Remote Logging<a class=anchor href=#network-syslogd></a></h3><div class=paragraph><p>Monitoring the log files of multiple hosts can become unwieldy as the number of systems increases. Configuring centralized logging can reduce some of the administrative burden of log file administration.</p></div><div class=paragraph><p>In FreeBSD, centralized log file aggregation, merging, and rotation can be configured using syslogd and newsyslog. This section demonstrates an example configuration, where host <code>A</code>, named <code>logserv.example.com</code>, will collect logging information for the local network. Host <code>B</code>, named <code>logclient.example.com</code>, will be configured to pass logging information to the logging server.</p></div><div class=sect3><h4 id=_log_server_configuration>11.7.3.1. Log Server Configuration<a class=anchor href=#_log_server_configuration></a></h4><div class=paragraph><p>A log server is a system that has been configured to accept logging information from other hosts. Before configuring a log server, check the following:</p></div><div class=ulist><ul><li><p>If there is a firewall between the logging server and any logging clients, ensure that the firewall ruleset allows UDP port 514 for both the clients and the server.</p></li><li><p>The logging server and all client machines must have forward and reverse entries in the local DNS. If the network does not have a DNS server, create entries in each system’s <span class=filename>/etc/hosts</span>. Proper name resolution is required so that log entries are not rejected by the logging server.</p></li></ul></div><div class=paragraph><p>On the log server, edit <span class=filename>/etc/syslog.conf</span> to specify the name of the client to receive log entries from, the logging facility to be used, and the name of the log to store the host’s log entries. This example adds the hostname of <code>B</code>, logs all facilities, and stores the log entries in <span class=filename>/var/log/logclient.log</span>.</p></div><div class=exampleblock><div class=title>Przykład 1. Sample Log Server Configuration</div><div class=content><div class="literalblock programlisting"><div class=content><pre>+logclient.example.com
*.*     /var/log/logclient.log</pre></div></div></div></div><div class=paragraph><p>When adding multiple log clients, add a similar two-line entry for each client. More information about the available facilities may be found in <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a>.</p></div><div class=paragraph><p>Next, configure <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_enable=&#34;YES&#34;
syslogd_flags=&#34;-a logclient.example.com -v -v&#34;</pre></div></div><div class=paragraph><p>The first entry starts syslogd at system boot. The second entry allows log entries from the specified client. The <code>-v -v</code> increases the verbosity of logged messages. This is useful for tweaking facilities as administrators are able to see what type of messages are being logged under each facility.</p></div><div class=paragraph><p>Multiple <code>-a</code> options may be specified to allow logging from multiple clients. IP addresses and whole netblocks may also be specified. Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> for a full list of possible options.</p></div><div class=paragraph><p>Finally, create the log file:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/log/logclient.log</span></code></pre></div></div><div class=paragraph><p>At this point, syslogd should be restarted and verified:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span>
<span class=c># pgrep syslog</span></code></pre></div></div><div class=paragraph><p>If a PID is returned, the server restarted successfully, and client configuration can begin. If the server did not restart, consult <span class=filename>/var/log/messages</span> for the error.</p></div></div><div class=sect3><h4 id=_log_client_configuration>11.7.3.2. Log Client Configuration<a class=anchor href=#_log_client_configuration></a></h4><div class=paragraph><p>A logging client sends log entries to a logging server on the network. The client also keeps a local copy of its own logs.</p></div><div class=paragraph><p>Once a logging server has been configured, edit <span class=filename>/etc/rc.conf</span> on the logging client:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_enable=&#34;YES&#34;
syslogd_flags=&#34;-s -v -v&#34;</pre></div></div><div class=paragraph><p>The first entry enables syslogd on boot up. The second entry prevents logs from being accepted by this client from other hosts (<code>-s</code>) and increases the verbosity of logged messages.</p></div><div class=paragraph><p>Next, define the logging server in the client’s <span class=filename>/etc/syslog.conf</span>. In this example, all logged facilities are sent to a remote system, denoted by the <code>@</code> symbol, with the specified hostname:</p></div><div class="literalblock programlisting"><div class=content><pre>*.*		@logserv.example.com</pre></div></div><div class=paragraph><p>After saving the edit, restart syslogd for the changes to take effect:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span></code></pre></div></div><div class=paragraph><p>To test that log messages are being sent across the network, use <a href="https://man.freebsd.org/cgi/man.cgi?query=logger&amp;sektion=1&amp;format=html">logger(1)</a> on the client to send a message to syslogd:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># logger &#34;Test message from logclient&#34;</span></code></pre></div></div><div class=paragraph><p>This message should now exist both in <span class=filename>/var/log/messages</span> on the client and <span class=filename>/var/log/logclient.log</span> on the log server.</p></div></div><div class=sect3><h4 id=_debugging_log_servers>11.7.3.3. Debugging Log Servers<a class=anchor href=#_debugging_log_servers></a></h4><div class=paragraph><p>If no messages are being received on the log server, the cause is most likely a network connectivity issue, a hostname resolution issue, or a typo in a configuration file. To isolate the cause, ensure that both the logging server and the logging client are able to <code>ping</code> each other using the hostname specified in their <span class=filename>/etc/rc.conf</span>. If this fails, check the network cabling, the firewall ruleset, and the hostname entries in the DNS server or <span class=filename>/etc/hosts</span> on both the logging server and clients. Repeat until the <code>ping</code> is successful from both hosts.</p></div><div class=paragraph><p>If the <code>ping</code> succeeds on both hosts but log messages are still not being received, temporarily increase logging verbosity to narrow down the configuration issue. In the following example, <span class=filename>/var/log/logclient.log</span> on the logging server is empty and <span class=filename>/var/log/messages</span> on the logging client does not indicate a reason for the failure. To increase debugging output, edit the <code>syslogd_flags</code> entry on the logging server and issue a restart:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_flags=&#34;-d -a logclient.example.com -v -v&#34;</pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span></code></pre></div></div><div class=paragraph><p>Debugging data similar to the following will flash on the console immediately after the restart:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel
Logging to FILE /var/log/messages
syslogd: kernel boot file is /boot/kernel/kernel
cvthname<span class=o>(</span>192.168.1.10<span class=o>)</span>
validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com<span class=p>;</span>
rejected <span class=k>in </span>rule 0 due to name mismatch.</code></pre></div></div><div class=paragraph><p>In this example, the log messages are being rejected due to a typo which results in a hostname mismatch. The client’s hostname should be <code>logclient</code>, not <code>logclien</code>. Fix the typo, issue a restart, and verify the results:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span>
logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel
syslogd: kernel boot file is /boot/kernel/kernel
logmsg: pri 166, flags 17, from logserv.example.com,
msg Dec 10 20:55:02 &lt;syslog.err&gt; logserv.example.com syslogd: exiting on signal 2
cvthname<span class=o>(</span>192.168.1.10<span class=o>)</span>
validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com<span class=p>;</span>
accepted <span class=k>in </span>rule 0.
logmsg: pri 15, flags 0, from logclient.example.com, msg Dec 11 02:01:28 trhodes: Test message 2
Logging to FILE /var/log/logclient.log
Logging to FILE /var/log/messages</code></pre></div></div><div class=paragraph><p>At this point, the messages are being properly received and placed in the correct file.</p></div></div><div class=sect3><h4 id=_security_considerations>11.7.3.4. Security Considerations<a class=anchor href=#_security_considerations></a></h4><div class=paragraph><p>As with any network service, security requirements should be considered before implementing a logging server. Log files may contain sensitive data about services enabled on the local host, user accounts, and configuration data. Network data sent from the client to the server will not be encrypted or password protected. If a need for encryption exists, consider using <a class=package href=https://cgit.freebsd.org/ports/tree/security/stunnel/>security/stunnel</a>, which will transmit the logging data over an encrypted tunnel.</p></div><div class=paragraph><p>Local security is also an issue. Log files are not encrypted during use or after log rotation. Local users may access log files to gain additional insight into system configuration. Setting proper permissions on log files is critical. The built-in log rotator, newsyslog, supports setting permissions on newly created and rotated log files. Setting log files to mode <code>600</code> should prevent unwanted access by local users. Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog.conf&amp;sektion=5&amp;format=html">newsyslog.conf(5)</a> for additional information.</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-configfiles>11.8. Configuration Files<a class=anchor href=#configtuning-configfiles></a></h2><div class=sectionbody><div class=sect2><h3 id=_etc_layout>11.8.1. <span class=filename>/etc</span> Layout<a class=anchor href=#_etc_layout></a></h3><div class=paragraph><p>There are a number of directories in which configuration information is kept. These include:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Generic system-specific configuration information.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/defaults</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Default versions of system configuration files.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extra <a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a> configuration and other MTA configuration files.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/ppp</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Configuration for both user- and kernel-ppp programs.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/local/etc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Configuration files for installed applications. May contain per-application subdirectories.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/local/etc/rc.d</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> scripts for installed applications.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/var/db</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Automatically generated system-specific database files, such as the package database and the <a href="https://man.freebsd.org/cgi/man.cgi?query=locate&amp;sektion=1&amp;format=html">locate(1)</a> database.</p></td></tr></tbody></table></div><div class=sect2><h3 id=_hostnames>11.8.2. Hostnames<a class=anchor href=#_hostnames></a></h3><div class=sect3><h4 id=_etcresolv_conf>11.8.2.1. <span class=filename>/etc/resolv.conf</span><a class=anchor href=#_etcresolv_conf></a></h4><div class=paragraph><p>How a FreeBSD system accesses the Internet Domain Name System (DNS) is controlled by <a href="https://man.freebsd.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5&amp;format=html">resolv.conf(5)</a>.</p></div><div class=paragraph><p>The most common entries to <span class=filename>/etc/resolv.conf</span> are:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>nameserver</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The IP address of a name server the resolver should query. The servers are queried in the order listed with a maximum of three.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>search</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Search list for hostname lookup. This is normally determined by the domain of the local hostname.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>domain</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The local domain name.</p></td></tr></tbody></table><div class=paragraph><p>A typical <span class=filename>/etc/resolv.conf</span> looks like this:</p></div><div class="literalblock programlisting"><div class=content><pre>search example.com
nameserver 147.11.1.11
nameserver 147.11.100.30</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Only one of the <code>search</code> and <code>domain</code> options should be used.</p></div></td></tr></tbody></table></div><div class=paragraph><p>When using DHCP, <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a> usually rewrites <span class=filename>/etc/resolv.conf</span> with information received from the DHCP server.</p></div></div><div class=sect3><h4 id=_etchosts>11.8.2.2. <span class=filename>/etc/hosts</span><a class=anchor href=#_etchosts></a></h4><div class=paragraph><p><span class=filename>/etc/hosts</span> is a simple text database which works in conjunction with DNS and NIS to provide host name to IP address mappings. Entries for local computers connected via a LAN can be added to this file for simplistic naming purposes instead of setting up a <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> server. Additionally, <span class=filename>/etc/hosts</span> can be used to provide a local record of Internet names, reducing the need to query external DNS servers for commonly accessed names.</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$
#
#
# Host Database
#
# This file should contain the addresses and aliases for local hosts that
# share this file.  Replace &#39;my.domain&#39; below with the domainname of your
# machine.
#
# In the presence of the domain name service or NIS, this file may
# not be consulted at all; see /etc/nsswitch.conf for the resolution order.
#
#
::1			localhost localhost.my.domain
127.0.0.1		localhost localhost.my.domain
#
# Imaginary network.
#10.0.0.2		myname.my.domain myname
#10.0.0.3		myfriend.my.domain myfriend
#
# According to RFC 1918, you can use the following IP networks for
# private nets which will never be connected to the Internet:
#
#	10.0.0.0	-   10.255.255.255
#	172.16.0.0	-   172.31.255.255
#	192.168.0.0	-   192.168.255.255
#
# In case you want to be able to connect to the Internet, you need
# real official assigned numbers.  Do not try to invent your own network
# numbers but instead get one from your network provider (if any) or
# from your regional registry (ARIN, APNIC, LACNIC, RIPE NCC, or AfriNIC.)
#</pre></div></div><div class=paragraph><p>The format of <span class=filename>/etc/hosts</span> is as follows:</p></div><div class="literalblock programlisting"><div class=content><pre>[Internet address] [official hostname] [alias1] [alias2] ...</pre></div></div><div class=paragraph><p>For example:</p></div><div class="literalblock programlisting"><div class=content><pre>10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2</pre></div></div><div class=paragraph><p>Consult <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> for more information.</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-sysctl>11.9. Tuning with <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a><a class=anchor href=#configtuning-sysctl></a></h2><div class=sectionbody><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> is used to make changes to a running FreeBSD system. This includes many advanced options of the TCP/IP stack and virtual memory system that can dramatically improve performance for an experienced system administrator. Over five hundred system variables can be read and set using <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>.</p></div><div class=paragraph><p>At its core, <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> serves two functions: to read and to modify system settings.</p></div><div class=paragraph><p>To view all readable variables:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl <span class=nt>-a</span></code></pre></div></div><div class=paragraph><p>To read a particular variable, specify its name:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl kern.maxproc
kern.maxproc: 1044</code></pre></div></div><div class=paragraph><p>To set a particular variable, use the <em>variable</em>=<em>value</em> syntax:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.maxfiles=5000</span>
kern.maxfiles: 2088 -&gt; 5000</code></pre></div></div><div class=paragraph><p>Settings of sysctl variables are usually either strings, numbers, or booleans, where a boolean is <code>1</code> for yes or <code>0</code> for no.</p></div><div class=paragraph><p>To automatically set some variables each time the machine boots, add them to <span class=filename>/etc/sysctl.conf</span>. For more information, refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl.conf&amp;sektion=5&amp;format=html">sysctl.conf(5)</a> and <a href=#configtuning-sysctlconf><span class=filename>sysctl.conf</span></a>.</p></div><div class=sect2><h3 id=configtuning-sysctlconf>11.9.1. <span class=filename>sysctl.conf</span><a class=anchor href=#configtuning-sysctlconf></a></h3><div class=paragraph><p>The configuration file for <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>, <span class=filename>/etc/sysctl.conf</span>, looks much like <span class=filename>/etc/rc.conf</span>. Values are set in a <code>variable=value</code> form. The specified values are set after the system goes into multi-user mode. Not all variables are settable in this mode.</p></div><div class=paragraph><p>For example, to turn off logging of fatal signal exits and prevent users from seeing processes started by other users, the following tunables can be set in <span class=filename>/etc/sysctl.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre># Do not log fatal signal exits (e.g., sig 11)
kern.logsigexit=0

# Prevent users from seeing information about processes that
# are being run under another UID.
security.bsd.see_other_uids=0</pre></div></div></div><div class=sect2><h3 id=sysctl-readonly>11.9.2. <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> Read-only<a class=anchor href=#sysctl-readonly></a></h3><div class=paragraph><p>In some cases it may be desirable to modify read-only <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> values, which will require a reboot of the system.</p></div><div class=paragraph><p>For instance, on some laptop models the <a href="https://man.freebsd.org/cgi/man.cgi?query=cardbus&amp;sektion=4&amp;format=html">cardbus(4)</a> device will not probe memory ranges and will fail with errors similar to:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>cbb0: Could not map register memory
device_probe_and_attach: cbb0 attach returned 12</code></pre></div></div><div class=paragraph><p>The fix requires the modification of a read-only <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> setting. Add <code>hw.pci.allow_unsupported_io_range=1</code> to <span class=filename>/boot/loader.conf</span> and reboot. Now <a href="https://man.freebsd.org/cgi/man.cgi?query=cardbus&amp;sektion=4&amp;format=html">cardbus(4)</a> should work properly.</p></div></div></div></div><div class=sect1><h2 id=configtuning-disk>11.10. Tuning Disks<a class=anchor href=#configtuning-disk></a></h2><div class=sectionbody><div class=paragraph><p>The following section will discuss various tuning mechanisms and options which may be applied to disk devices. In many cases, disks with mechanical parts, such as SCSI drives, will be the bottleneck driving down the overall system performance. While a solution is to install a drive without mechanical parts, such as a solid state drive, mechanical drives are not going away anytime in the near future. When tuning disks, it is advisable to utilize the features of the <a href="https://man.freebsd.org/cgi/man.cgi?query=iostat&amp;sektion=8&amp;format=html">iostat(8)</a> command to test various changes to the system. This command will allow the user to obtain valuable information on system IO.</p></div><div class=sect2><h3 id=_sysctl_variables>11.10.1. Sysctl Variables<a class=anchor href=#_sysctl_variables></a></h3><div class=sect3><h4 id=_vfs_vmiodirenable>11.10.1.1. <code>vfs.vmiodirenable</code><a class=anchor href=#_vfs_vmiodirenable></a></h4><div class=paragraph><p>The <code>vfs.vmiodirenable</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable may be set to either <code>0</code> (off) or <code>1</code> (on). It is set to <code>1</code> by default. This variable controls how directories are cached by the system. Most directories are small, using just a single fragment (typically 1 K) in the file system and typically 512 bytes in the buffer cache. With this variable turned off, the buffer cache will only cache a fixed number of directories, even if the system has a huge amount of memory. When turned on, this <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> allows the buffer cache to use the VM page cache to cache the directories, making all the memory available for caching directories. However, the minimum in-core memory used to cache a directory is the physical page size (typically 4 K) rather than 512 bytes. Keeping this option enabled is recommended if the system is running any services which manipulate large numbers of files. Such services can include web caches, large mail systems, and news systems. Keeping this option on will generally not reduce performance, even with the wasted memory, but one should experiment to find out.</p></div></div><div class=sect3><h4 id=_vfs_write_behind>11.10.1.2. <code>vfs.write_behind</code><a class=anchor href=#_vfs_write_behind></a></h4><div class=paragraph><p>The <code>vfs.write_behind</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable defaults to <code>1</code> (on). This tells the file system to issue media writes as full clusters are collected, which typically occurs when writing large sequential files. This avoids saturating the buffer cache with dirty buffers when it would not benefit I/O performance. However, this may stall processes and under certain circumstances should be turned off.</p></div></div><div class=sect3><h4 id=_vfs_hirunningspace>11.10.1.3. <code>vfs.hirunningspace</code><a class=anchor href=#_vfs_hirunningspace></a></h4><div class=paragraph><p>The <code>vfs.hirunningspace</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable determines how much outstanding write I/O may be queued to disk controllers system-wide at any given instance. The default is usually sufficient, but on machines with many disks, try bumping it up to four or five <em>megabytes</em>. Setting too high a value which exceeds the buffer cache’s write threshold can lead to bad clustering performance. Do not set this value arbitrarily high as higher write values may add latency to reads occurring at the same time.</p></div><div class=paragraph><p>There are various other buffer cache and VM page cache related <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> values. Modifying these values is not recommended as the VM system does a good job of automatically tuning itself.</p></div></div><div class=sect3><h4 id=_vm_swap_idle_enabled>11.10.1.4. <code>vm.swap_idle_enabled</code><a class=anchor href=#_vm_swap_idle_enabled></a></h4><div class=paragraph><p>The <code>vm.swap_idle_enabled</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable is useful in large multi-user systems with many active login users and lots of idle processes. Such systems tend to generate continuous pressure on free memory reserves. Turning this feature on and tweaking the swapout hysteresis (in idle seconds) via <code>vm.swap_idle_threshold1</code> and <code>vm.swap_idle_threshold2</code> depresses the priority of memory pages associated with idle processes more quickly then the normal pageout algorithm. This gives a helping hand to the pageout daemon. Only turn this option on if needed, because the tradeoff is essentially pre-page memory sooner rather than later which eats more swap and disk bandwidth. In a small system this option will have a determinable effect, but in a large system that is already doing moderate paging, this option allows the VM system to stage whole processes into and out of memory easily.</p></div></div><div class=sect3><h4 id=_hw_ata_wc>11.10.1.5. <code>hw.ata.wc</code><a class=anchor href=#_hw_ata_wc></a></h4><div class=paragraph><p>Turning off IDE write caching reduces write bandwidth to IDE disks, but may sometimes be necessary due to data consistency issues introduced by hard drive vendors. The problem is that some IDE drives lie about when a write completes. With IDE write caching turned on, IDE hard drives write data to disk out of order and will sometimes delay writing some blocks indefinitely when under heavy disk load. A crash or power failure may cause serious file system corruption. Check the default on the system by observing the <code>hw.ata.wc</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable. If IDE write caching is turned off, one can set this read-only variable to <code>1</code> in <span class=filename>/boot/loader.conf</span> in order to enable it at boot time.</p></div><div class=paragraph><p>For more information, refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=ata&amp;sektion=4&amp;format=html">ata(4)</a>.</p></div></div><div class=sect3><h4 id=_scsi_delay_kern_cam_scsi_delay>11.10.1.6. <code>SCSI_DELAY</code> (<code>kern.cam.scsi_delay</code>)<a class=anchor href=#_scsi_delay_kern_cam_scsi_delay></a></h4><div class=paragraph><p>The <code>SCSI_DELAY</code> kernel configuration option may be used to reduce system boot times. The defaults are fairly high and can be responsible for <code>15</code> seconds of delay in the boot process. Reducing it to <code>5</code> seconds usually works with modern drives. The <code>kern.cam.scsi_delay</code> boot time tunable should be used. The tunable and kernel configuration option accept values in terms of <em>milliseconds</em> and <em>not seconds</em>.</p></div></div></div><div class=sect2><h3 id=soft-updates>11.10.2. Soft Updates<a class=anchor href=#soft-updates></a></h3><div class=paragraph><p>To fine-tune a file system, use <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a>. This program has many different options. To toggle Soft Updates on and off, use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tunefs -n enable /filesystem</span>
<span class=c># tunefs -n disable /filesystem</span></code></pre></div></div><div class=paragraph><p>A file system cannot be modified with <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> while it is mounted. A good time to enable Soft Updates is before any partitions have been mounted, in single-user mode.</p></div><div class=paragraph><p>Soft Updates is recommended for UFS file systems as it drastically improves meta-data performance, mainly file creation and deletion, through the use of a memory cache. There are two downsides to Soft Updates to be aware of. First, Soft Updates guarantee file system consistency in the case of a crash, but could easily be several seconds or even a minute behind updating the physical disk. If the system crashes, unwritten data may be lost. Secondly, Soft Updates delay the freeing of file system blocks. If the root file system is almost full, performing a major update, such as <code>make installworld</code>, can cause the file system to run out of space and the update to fail.</p></div><div class=sect3><h4 id=_more_details_about_soft_updates>11.10.2.1. More Details About Soft Updates<a class=anchor href=#_more_details_about_soft_updates></a></h4><div class=paragraph><p>Meta-data updates are updates to non-content data like inodes or directories. There are two traditional approaches to writing a file system’s meta-data back to disk.</p></div><div class=paragraph><p>Historically, the default behavior was to write out meta-data updates synchronously. If a directory changed, the system waited until the change was actually written to disk. The file data buffers (file contents) were passed through the buffer cache and backed up to disk later on asynchronously. The advantage of this implementation is that it operates safely. If there is a failure during an update, meta-data is always in a consistent state. A file is either created completely or not at all. If the data blocks of a file did not find their way out of the buffer cache onto the disk by the time of the crash, <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> recognizes this and repairs the file system by setting the file length to <code>0</code>. Additionally, the implementation is clear and simple. The disadvantage is that meta-data changes are slow. For example, <code>rm -r</code> touches all the files in a directory sequentially, but each directory change will be written synchronously to the disk. This includes updates to the directory itself, to the inode table, and possibly to indirect blocks allocated by the file. Similar considerations apply for unrolling large hierarchies using <code>tar -x</code>.</p></div><div class=paragraph><p>The second approach is to use asynchronous meta-data updates. This is the default for a UFS file system mounted with <code>mount -o async</code>. Since all meta-data updates are also passed through the buffer cache, they will be intermixed with the updates of the file content data. The advantage of this implementation is there is no need to wait until each meta-data update has been written to disk, so all operations which cause huge amounts of meta-data updates work much faster than in the synchronous case. This implementation is still clear and simple, so there is a low risk for bugs creeping into the code. The disadvantage is that there is no guarantee for a consistent state of the file system. If there is a failure during an operation that updated large amounts of meta-data, like a power failure or someone pressing the reset button, the file system will be left in an unpredictable state. There is no opportunity to examine the state of the file system when the system comes up again as the data blocks of a file could already have been written to the disk while the updates of the inode table or the associated directory were not. It is impossible to implement a <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> which is able to clean up the resulting chaos because the necessary information is not available on the disk. If the file system has been damaged beyond repair, the only choice is to reformat it and restore from backup.</p></div><div class=paragraph><p>The usual solution for this problem is to implement <em>dirty region logging</em>, which is also referred to as <em>journaling</em>. Meta-data updates are still written synchronously, but only into a small region of the disk. Later on, they are moved to their proper location. Because the logging area is a small, contiguous region on the disk, there are no long distances for the disk heads to move, even during heavy operations, so these operations are quicker than synchronous updates. Additionally, the complexity of the implementation is limited, so the risk of bugs being present is low. A disadvantage is that all meta-data is written twice, once into the logging region and once to the proper location, so performance "pessimization" might result. On the other hand, in case of a crash, all pending meta-data operations can be either quickly rolled back or completed from the logging area after the system comes up again, resulting in a fast file system startup.</p></div><div class=paragraph><p>Kirk McKusick, the developer of Berkeley FFS, solved this problem with Soft Updates. All pending meta-data updates are kept in memory and written out to disk in a sorted sequence ("ordered meta-data updates"). This has the effect that, in case of heavy meta-data operations, later updates to an item "catch" the earlier ones which are still in memory and have not already been written to disk. All operations are generally performed in memory before the update is written to disk and the data blocks are sorted according to their position so that they will not be on the disk ahead of their meta-data. If the system crashes, an implicit "log rewind" causes all operations which were not written to the disk appear as if they never happened. A consistent file system state is maintained that appears to be the one of 30 to 60 seconds earlier. The algorithm used guarantees that all resources in use are marked as such in their blocks and inodes. After a crash, the only resource allocation error that occurs is that resources are marked as "used" which are actually "free". <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> recognizes this situation, and frees the resources that are no longer used. It is safe to ignore the dirty state of the file system after a crash by forcibly mounting it with <code>mount -f</code>. In order to free resources that may be unused, <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> needs to be run at a later time. This is the idea behind the <em>background <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a></em>: at system startup time, only a <em>snapshot</em> of the file system is recorded and <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> is run afterwards. All file systems can then be mounted "dirty", so the system startup proceeds in multi-user mode. Then, background <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> is scheduled for all file systems where this is required, to free resources that may be unused. File systems that do not use Soft Updates still need the usual foreground <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a>.</p></div><div class=paragraph><p>The advantage is that meta-data operations are nearly as fast as asynchronous updates and are faster than <em>logging</em>, which has to write the meta-data twice. The disadvantages are the complexity of the code, a higher memory consumption, and some idiosyncrasies. After a crash, the state of the file system appears to be somewhat "older". In situations where the standard synchronous approach would have caused some zero-length files to remain after the <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a>, these files do not exist at all with Soft Updates because neither the meta-data nor the file contents have been written to disk. Disk space is not released until the updates have been written to disk, which may take place some time after running <a href="https://man.freebsd.org/cgi/man.cgi?query=rm&amp;sektion=1&amp;format=html">rm(1)</a>. This may cause problems when installing large amounts of data on a file system that does not have enough free space to hold all the files twice.</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-kernel-limits>11.11. Tuning Kernel Limits<a class=anchor href=#configtuning-kernel-limits></a></h2><div class=sectionbody><div class=sect2><h3 id=file-process-limits>11.11.1. File/Process Limits<a class=anchor href=#file-process-limits></a></h3><div class=sect3><h4 id=kern-maxfiles>11.11.1.1. <code>kern.maxfiles</code><a class=anchor href=#kern-maxfiles></a></h4><div class=paragraph><p>The <code>kern.maxfiles</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable can be raised or lowered based upon system requirements. This variable indicates the maximum number of file descriptors on the system. When the file descriptor table is full, <code>file: table is full</code> will show up repeatedly in the system message buffer, which can be viewed using <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a>.</p></div><div class=paragraph><p>Each open file, socket, or fifo uses one file descriptor. A large-scale production server may easily require many thousands of file descriptors, depending on the kind and number of services running concurrently.</p></div><div class=paragraph><p>In older FreeBSD releases, the default value of <code>kern.maxfiles</code> is derived from <code>maxusers</code> in the kernel configuration file. <code>kern.maxfiles</code> grows proportionally to the value of <code>maxusers</code>. When compiling a custom kernel, consider setting this kernel configuration option according to the use of the system. From this number, the kernel is given most of its pre-defined limits. Even though a production machine may not have 256 concurrent users, the resources needed may be similar to a high-scale web server.</p></div><div class=paragraph><p>The read-only <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable <code>kern.maxusers</code> is automatically sized at boot based on the amount of memory available in the system, and may be determined at run-time by inspecting the value of <code>kern.maxusers</code>. Some systems require larger or smaller values of <code>kern.maxusers</code> and values of <code>64</code>, <code>128</code>, and <code>256</code> are not uncommon. Going above <code>256</code> is not recommended unless a huge number of file descriptors is needed. Many of the tunable values set to their defaults by <code>kern.maxusers</code> may be individually overridden at boot-time or run-time in <span class=filename>/boot/loader.conf</span>. Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a> and <span class=filename>/boot/defaults/loader.conf</span> for more details and some hints.</p></div><div class=paragraph><p>In older releases, the system will auto-tune <code>maxusers</code> if it is set to <code>0</code>. <sup class=footnote>[<a id=_footnoteref_1 class=footnote href=#_footnotedef_1 title="View footnote.">1</a>]</sup>. When setting this option, set <code>maxusers</code> to at least <code>4</code>, especially if the system runs Xorg or is used to compile software. The most important table set by <code>maxusers</code> is the maximum number of processes, which is set to <code>20 + 16 * maxusers</code>. If <code>maxusers</code> is set to <code>1</code>, there can only be <code>36</code> simultaneous processes, including the <code>18</code> or so that the system starts up at boot time and the <code>15</code> or so used by Xorg. Even a simple task like reading a manual page will start up nine processes to filter, decompress, and view it. Setting <code>maxusers</code> to <code>64</code> allows up to <code>1044</code> simultaneous processes, which should be enough for nearly all uses. If, however, the error is displayed when trying to start another program, or a server is running with a large number of simultaneous users, increase the number and rebuild.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>maxusers</code> does <em>not</em> limit the number of users which can log into the machine. It instead sets various table sizes to reasonable values considering the maximum number of users on the system and how many processes each user will be running.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_kern_ipc_soacceptqueue>11.11.1.2. <code>kern.ipc.soacceptqueue</code><a class=anchor href=#_kern_ipc_soacceptqueue></a></h4><div class=paragraph><p>The <code>kern.ipc.soacceptqueue</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable limits the size of the listen queue for accepting new <code>TCP</code> connections. The default value of <code>128</code> is typically too low for robust handling of new connections on a heavily loaded web server. For such environments, it is recommended to increase this value to <code>1024</code> or higher. A service such as <a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a>, or Apache may itself limit the listen queue size, but will often have a directive in its configuration file to adjust the queue size. Large listen queues do a better job of avoiding Denial of Service (DoS) attacks.</p></div></div></div><div class=sect2><h3 id=nmbclusters>11.11.2. Network Limits<a class=anchor href=#nmbclusters></a></h3><div class=paragraph><p>The <code>NMBCLUSTERS</code> kernel configuration option dictates the amount of network Mbufs available to the system. A heavily-trafficked server with a low number of Mbufs will hinder performance. Each cluster represents approximately 2 K of memory, so a value of <code>1024</code> represents <code>2</code> megabytes of kernel memory reserved for network buffers. A simple calculation can be done to figure out how many are needed. A web server which maxes out at <code>1000</code> simultaneous connections where each connection uses a 6 K receive and 16 K send buffer, requires approximately 32 MB worth of network buffers to cover the web server. A good rule of thumb is to multiply by <code>2</code>, so 2x32 MB / 2 KB = 64 MB / 2 kB = <code>32768</code>. Values between <code>4096</code> and <code>32768</code> are recommended for machines with greater amounts of memory. Never specify an arbitrarily high value for this parameter as it could lead to a boot time crash. To observe network cluster usage, use <code>-m</code> with <a href="https://man.freebsd.org/cgi/man.cgi?query=netstat&amp;sektion=1&amp;format=html">netstat(1)</a>.</p></div><div class=paragraph><p>The <code>kern.ipc.nmbclusters</code> loader tunable should be used to tune this at boot time. Only older versions of FreeBSD will require the use of the <code>NMBCLUSTERS</code> kernel <a href="https://man.freebsd.org/cgi/man.cgi?query=config&amp;sektion=8&amp;format=html">config(8)</a> option.</p></div><div class=paragraph><p>For busy servers that make extensive use of the <a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a> system call, it may be necessary to increase the number of <a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a> buffers via the <code>NSFBUFS</code> kernel configuration option or by setting its value in <span class=filename>/boot/loader.conf</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a> for details). A common indicator that this parameter needs to be adjusted is when processes are seen in the <code>sfbufa</code> state. The <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable <code>kern.ipc.nsfbufs</code> is read-only. This parameter nominally scales with <code>kern.maxusers</code>, however it may be necessary to tune accordingly.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>Even though a socket has been marked as non-blocking, calling <a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a> on the non-blocking socket may result in the <a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a> call blocking until enough <code>struct sf_buf</code>'s are made available.</p></div></td></tr></tbody></table></div><div class=sect3><h4 id=_net_inet_ip_portrange>11.11.2.1. <code>net.inet.ip.portrange.*</code><a class=anchor href=#_net_inet_ip_portrange></a></h4><div class=paragraph><p>The <code>net.inet.ip.portrange.*</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variables control the port number ranges automatically bound to <code>TCP</code> and <code>UDP</code> sockets. There are three ranges: a low range, a default range, and a high range. Most network programs use the default range which is controlled by <code>net.inet.ip.portrange.first</code> and <code>net.inet.ip.portrange.last</code>, which default to <code>1024</code> and <code>5000</code>, respectively. Bound port ranges are used for outgoing connections and it is possible to run the system out of ports under certain circumstances. This most commonly occurs when running a heavily loaded web proxy. The port range is not an issue when running a server which handles mainly incoming connections, such as a web server, or has a limited number of outgoing connections, such as a mail relay. For situations where there is a shortage of ports, it is recommended to increase <code>net.inet.ip.portrange.last</code> modestly. A value of <code>10000</code>, <code>20000</code> or <code>30000</code> may be reasonable. Consider firewall effects when changing the port range. Some firewalls may block large ranges of ports, usually low-numbered ports, and expect systems to use higher ranges of ports for outgoing connections. For this reason, it is not recommended that the value of <code>net.inet.ip.portrange.first</code> be lowered.</p></div></div><div class=sect3><h4 id=_tcp_bandwidth_delay_product>11.11.2.2. <code>TCP</code> Bandwidth Delay Product<a class=anchor href=#_tcp_bandwidth_delay_product></a></h4><div class=paragraph><p><code>TCP</code> bandwidth delay product limiting can be enabled by setting the <code>net.inet.tcp.inflight.enable</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable to <code>1</code>. This instructs the system to attempt to calculate the bandwidth delay product for each connection and limit the amount of data queued to the network to just the amount required to maintain optimum throughput.</p></div><div class=paragraph><p>This feature is useful when serving data over modems, Gigabit Ethernet, high speed <code>WAN</code> links, or any other link with a high bandwidth delay product, especially when also using window scaling or when a large send window has been configured. When enabling this option, also set <code>net.inet.tcp.inflight.debug</code> to <code>0</code> to disable debugging. For production use, setting <code>net.inet.tcp.inflight.min</code> to at least <code>6144</code> may be beneficial. Setting high minimums may effectively disable bandwidth limiting, depending on the link. The limiting feature reduces the amount of data built up in intermediate route and switch packet queues and reduces the amount of data built up in the local host’s interface queue. With fewer queued packets, interactive connections, especially over slow modems, will operate with lower <em>Round Trip Times</em>. This feature only effects server side data transmission such as uploading. It has no effect on data reception or downloading.</p></div><div class=paragraph><p>Adjusting <code>net.inet.tcp.inflight.stab</code> is <em>not</em> recommended. This parameter defaults to <code>20</code>, representing 2 maximal packets added to the bandwidth delay product window calculation. The additional window is required to stabilize the algorithm and improve responsiveness to changing conditions, but it can also result in higher <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> times over slow links, though still much lower than without the inflight algorithm. In such cases, try reducing this parameter to <code>15</code>, <code>10</code>, or <code>5</code> and reducing <code>net.inet.tcp.inflight.min</code> to a value such as <code>3500</code> to get the desired effect. Reducing these parameters should be done as a last resort only.</p></div></div></div><div class=sect2><h3 id=_virtual_memory>11.11.3. Virtual Memory<a class=anchor href=#_virtual_memory></a></h3><div class=sect3><h4 id=_kern_maxvnodes>11.11.3.1. <code>kern.maxvnodes</code><a class=anchor href=#_kern_maxvnodes></a></h4><div class=paragraph><p>A vnode is the internal representation of a file or directory. Increasing the number of vnodes available to the operating system reduces disk I/O. Normally, this is handled by the operating system and does not need to be changed. In some cases where disk I/O is a bottleneck and the system is running out of vnodes, this setting needs to be increased. The amount of inactive and free RAM will need to be taken into account.</p></div><div class=paragraph><p>To see the current number of vnodes in use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl vfs.numvnodes</span>
vfs.numvnodes: 91349</code></pre></div></div><div class=paragraph><p>To see the maximum vnodes:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.maxvnodes</span>
kern.maxvnodes: 100000</code></pre></div></div><div class=paragraph><p>If the current vnode usage is near the maximum, try increasing <code>kern.maxvnodes</code> by a value of <code>1000</code>. Keep an eye on the number of <code>vfs.numvnodes</code>. If it climbs up to the maximum again, <code>kern.maxvnodes</code> will need to be increased further. Otherwise, a shift in memory usage as reported by <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> should be visible and more memory should be active.</p></div></div></div></div></div><div class=sect1><h2 id=adding-swap-space>11.12. Adding Swap Space<a class=anchor href=#adding-swap-space></a></h2><div class=sectionbody><div class=paragraph><p>Sometimes a system requires more swap space. This section describes two methods to increase swap space: adding swap to an existing partition or new hard drive, and creating a swap file on an existing partition.</p></div><div class=paragraph><p>For information on how to encrypt swap space, which options exist, and why it should be done, refer to <a href=../disks/#swap-encrypting>“Encrypting Swap”</a>.</p></div><div class=sect2><h3 id=new-drive-swap>11.12.1. Swap on a New Hard Drive or Existing Partition<a class=anchor href=#new-drive-swap></a></h3><div class=paragraph><p>Adding a new hard drive for swap gives better performance than using a partition on an existing drive. Setting up partitions and hard drives is explained in <a href=../disks/#disks-adding>“Adding Disks”</a> while <a href=../bsdinstall/#configtuning-initial>“Designing the Partition Layout”</a> discusses partition layouts and swap partition size considerations.</p></div><div class=paragraph><p>Use <code>swapon</code> to add a swap partition to the system. For example:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># swapon /dev/ada1s1b</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>It is possible to use any partition not currently mounted, even if it already contains data. Using <code>swapon</code> on a partition that contains data will overwrite and destroy that data. Make sure that the partition to be added as swap is really the intended partition before running <code>swapon</code>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>To automatically add this swap partition on boot, add an entry to <span class=filename>/etc/fstab</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/ada1s1b	none	swap	sw	0	0</pre></div></div><div class=paragraph><p>See <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a> for an explanation of the entries in <span class=filename>/etc/fstab</span>. More information about <code>swapon</code> can be found in <a href="https://man.freebsd.org/cgi/man.cgi?query=swapon&amp;sektion=8&amp;format=html">swapon(8)</a>.</p></div></div><div class=sect2><h3 id=create-swapfile>11.12.2. Creating a Swap File<a class=anchor href=#create-swapfile></a></h3><div class=paragraph><p>These examples create a 512M swap file called <span class=filename>/usr/swap0</span> instead of using a partition.</p></div><div class=paragraph><p>Using swap files requires that the module needed by <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> has either been built into the kernel or has been loaded before swap is enabled. See <a href=../kernelconfig/#kernelconfig>Configuring the FreeBSD Kernel</a> for information about building a custom kernel.</p></div><div id=swapfile-10-and-later class=exampleblock><div class=title>Przykład 2. Creating a Swap File</div><div class=content><div class="olist arabic procedure"><ol class=arabic><li><p>Create the swap file:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/usr/swap0 bs=1m count=512</span></code></pre></div></div></li><li><p>Set the proper permissions on the new file:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 0600 /usr/swap0</span></code></pre></div></div></li><li><p>Inform the system about the swap file by adding a line to <span class=filename>/etc/fstab</span>:</p><div class="literalblock programlisting"><div class=content><pre>md99	none	swap	sw,file=/usr/swap0,late	0	0</pre></div></div><div class=paragraph><p>The <a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a> device <span class=filename>md99</span> is used, leaving lower device numbers available for interactive use.</p></div></li><li><p>Swap space will be added on system startup. To add swap space immediately, use <a href="https://man.freebsd.org/cgi/man.cgi?query=swapon&amp;sektion=8&amp;format=html">swapon(8)</a>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># swapon -aL</span></code></pre></div></div></li></ol></div></div></div></div></div></div><div class=sect1><h2 id=acpi-overview>11.13. Power and Resource Management<a class=anchor href=#acpi-overview></a></h2><div class=sectionbody><div class=paragraph><p>It is important to utilize hardware resources in an efficient manner. Power and resource management allows the operating system to monitor system limits and to possibly provide an alert if the system temperature increases unexpectedly. An early specification for providing power management was the Advanced Power Management (APM) facility. APM controls the power usage of a system based on its activity. However, it was difficult and inflexible for operating systems to manage the power usage and thermal properties of a system. The hardware was managed by the BIOS and the user had limited configurability and visibility into the power management settings. The APMBIOS is supplied by the vendor and is specific to the hardware platform. An APM driver in the operating system mediates access to the APM Software Interface, which allows management of power levels.</p></div><div class=paragraph><p>There are four major problems in APM. First, power management is done by the vendor-specific BIOS, separate from the operating system. For example, the user can set idle-time values for a hard drive in the APMBIOS so that, when exceeded, the BIOS spins down the hard drive without the consent of the operating system. Second, the APM logic is embedded in the BIOS, and it operates outside the scope of the operating system. This means that users can only fix problems in the APMBIOS by flashing a new one into the ROM, which is a dangerous procedure with the potential to leave the system in an unrecoverable state if it fails. Third, APM is a vendor-specific technology, meaning that there is a lot of duplication of efforts and bugs found in one vendor’s BIOS may not be solved in others. Lastly, the APMBIOS did not have enough room to implement a sophisticated power policy or one that can adapt well to the purpose of the machine.</p></div><div class=paragraph><p>The Plug and Play BIOS (PNPBIOS) was unreliable in many situations. PNPBIOS is 16-bit technology, so the operating system has to use 16-bit emulation in order to interface with PNPBIOS methods. FreeBSD provides an APM driver as APM should still be used for systems manufactured at or before the year 2000. The driver is documented in <a href="https://man.freebsd.org/cgi/man.cgi?query=apm&amp;sektion=4&amp;format=html">apm(4)</a>.</p></div><div class=paragraph><p>The successor to APM is the Advanced Configuration and Power Interface (ACPI). ACPI is a standard written by an alliance of vendors to provide an interface for hardware resources and power management. It is a key element in <em>Operating System-directed configuration and Power Management</em> as it provides more control and flexibility to the operating system.</p></div><div class=paragraph><p>This chapter demonstrates how to configure ACPI on FreeBSD. It then offers some tips on how to debug ACPI and how to submit a problem report containing debugging information so that developers can diagnosis and fix ACPI issues.</p></div><div class=sect2><h3 id=acpi-config>11.13.1. Configuring ACPI<a class=anchor href=#acpi-config></a></h3><div class=paragraph><p>In FreeBSD the <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a> driver is loaded by default at system boot and should <em>not</em> be compiled into the kernel. This driver cannot be unloaded after boot because the system bus uses it for various hardware interactions. However, if the system is experiencing problems, ACPI can be disabled altogether by rebooting after setting <code>hint.acpi.0.disabled="1"</code> in <span class=filename>/boot/loader.conf</span> or by setting this variable at the loader prompt, as described in <a href=../boot/#boot-loader>“Stage Three”</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>ACPI and APM cannot coexist and should be used separately. The last one to load will terminate if the driver notices the other is running.</p></div></td></tr></tbody></table></div><div class=paragraph><p>ACPI can be used to put the system into a sleep mode with <code>acpiconf</code>, the <code>-s</code> flag, and a number from <code>1</code> to <code>5</code>. Most users only need <code>1</code> (quick suspend to RAM) or <code>3</code> (suspend to RAM). Option <code>5</code> performs a soft-off which is the same as running <code>halt -p</code>.</p></div><div class=paragraph><p>Other options are available using <code>sysctl</code>. Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=acpiconf&amp;sektion=8&amp;format=html">acpiconf(8)</a> for more information.</p></div></div><div class=sect2><h3 id=ACPI-comprob>11.13.2. Common Problems<a class=anchor href=#ACPI-comprob></a></h3><div class=paragraph><p>ACPI is present in all modern computers that conform to the ia32 (x86) and amd64 (AMD) architectures. The full standard has many features including CPU performance management, power planes control, thermal zones, various battery systems, embedded controllers, and bus enumeration. Most systems implement less than the full standard. For instance, a desktop system usually only implements bus enumeration while a laptop might have cooling and battery management support as well. Laptops also have suspend and resume, with their own associated complexity.</p></div><div class=paragraph><p>An ACPI-compliant system has various components. The BIOS and chipset vendors provide various fixed tables, such as FADT, in memory that specify things like the APIC map (used for SMP), config registers, and simple configuration values. Additionally, a bytecode table, the Differentiated System Description Table DSDT, specifies a tree-like name space of devices and methods.</p></div><div class=paragraph><p>The ACPI driver must parse the fixed tables, implement an interpreter for the bytecode, and modify device drivers and the kernel to accept information from the ACPI subsystem. For FreeBSD, Intel® has provided an interpreter (ACPI-CA) that is shared with Linux® and NetBSD. The path to the ACPI-CA source code is <span class=filename>src/sys/contrib/dev/acpica</span>. The glue code that allows ACPI-CA to work on FreeBSD is in <span class=filename>src/sys/dev/acpica/Osd</span>. Finally, drivers that implement various ACPI devices are found in <span class=filename>src/sys/dev/acpica</span>.</p></div><div class=paragraph><p>For ACPI to work correctly, all the parts have to work correctly. Here are some common problems, in order of frequency of appearance, and some possible workarounds or fixes. If a fix does not resolve the issue, refer to <a href=#ACPI-submitdebug>Getting and Submitting Debugging Info</a> for instructions on how to submit a bug report.</p></div><div class=sect3><h4 id=_mouse_issues>11.13.2.1. Mouse Issues<a class=anchor href=#_mouse_issues></a></h4><div class=paragraph><p>In some cases, resuming from a suspend operation will cause the mouse to fail. A known work around is to add <code>hint.psm.0.flags="0x3000"</code> to <span class=filename>/boot/loader.conf</span>.</p></div></div><div class=sect3><h4 id=_suspendresume>11.13.2.2. Suspend/Resume<a class=anchor href=#_suspendresume></a></h4><div class=paragraph><p>ACPI has three suspend to RAM (STR) states, <code>S1</code>-<code>S3</code>, and one suspend to disk state (STD), called <code>S4</code>. STD can be implemented in two separate ways. The <code>S4</code>BIOS is a BIOS-assisted suspend to disk and <code>S4</code>OS is implemented entirely by the operating system. The normal state the system is in when plugged in but not powered up is "soft off" (<code>S5</code>).</p></div><div class=paragraph><p>Use <code>sysctl hw.acpi</code> to check for the suspend-related items. These example results are from a Thinkpad:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>hw.acpi.supported_sleep_state: S3 S4 S5
hw.acpi.s4bios: 0</code></pre></div></div><div class=paragraph><p>Use <code>acpiconf -s</code> to test <code>S3</code>, <code>S4</code>, and <code>S5</code>. An <code>s4bios</code> of one (<code>1</code>) indicates <code>S4</code>BIOS support instead of <code>S4</code> operating system support.</p></div><div class=paragraph><p>When testing suspend/resume, start with <code>S1</code>, if supported. This state is most likely to work since it does not require much driver support. No one has implemented <code>S2</code>, which is similar to <code>S1</code>. Next, try <code>S3</code>. This is the deepest STR state and requires a lot of driver support to properly reinitialize the hardware.</p></div><div class=paragraph><p>A common problem with suspend/resume is that many device drivers do not save, restore, or reinitialize their firmware, registers, or device memory properly. As a first attempt at debugging the problem, try:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl debug.bootverbose=1</span>
<span class=c># sysctl debug.acpi.suspend_bounce=1</span>
<span class=c># acpiconf -s 3</span></code></pre></div></div><div class=paragraph><p>This test emulates the suspend/resume cycle of all device drivers without actually going into <code>S3</code> state. In some cases, problems such as losing firmware state, device watchdog time out, and retrying forever, can be captured with this method. Note that the system will not really enter <code>S3</code> state, which means devices may not lose power, and many will work fine even if suspend/resume methods are totally missing, unlike real <code>S3</code> state.</p></div><div class=paragraph><p>Harder cases require additional hardware, such as a serial port and cable for debugging through a serial console, a Firewire port and cable for using <a href="https://man.freebsd.org/cgi/man.cgi?query=dcons&amp;sektion=4&amp;format=html">dcons(4)</a>, and kernel debugging skills.</p></div><div class=paragraph><p>To help isolate the problem, unload as many drivers as possible. If it works, narrow down which driver is the problem by loading drivers until it fails again. Typically, binary drivers like <span class=filename>nvidia.ko</span>, display drivers, and USB will have the most problems while Ethernet interfaces usually work fine. If drivers can be properly loaded and unloaded, automate this by putting the appropriate commands in <span class=filename>/etc/rc.suspend</span> and <span class=filename>/etc/rc.resume</span>. Try setting <code>hw.acpi.reset_video</code> to <code>1</code> if the display is messed up after resume. Try setting longer or shorter values for <code>hw.acpi.sleep_delay</code> to see if that helps.</p></div><div class=paragraph><p>Try loading a recent Linux® distribution to see if suspend/resume works on the same hardware. If it works on Linux®, it is likely a FreeBSD driver problem. Narrowing down which driver causes the problem will assist developers in fixing the problem. Since the ACPI maintainers rarely maintain other drivers, such as sound or ATA, any driver problems should also be posted to the <a href=https://lists.FreeBSD.org/subscription/freebsd-current>FreeBSD-CURRENT mailing list</a> and mailed to the driver maintainer. Advanced users can include debugging <a href="https://man.freebsd.org/cgi/man.cgi?query=printf&amp;sektion=3&amp;format=html">printf(3)</a>s in a problematic driver to track down where in its resume function it hangs.</p></div><div class=paragraph><p>Finally, try disabling ACPI and enabling APM instead. If suspend/resume works with APM, stick with APM, especially on older hardware (pre-2000). It took vendors a while to get ACPI support correct and older hardware is more likely to have BIOS problems with ACPI.</p></div></div><div class=sect3><h4 id=_system_hangs>11.13.2.3. System Hangs<a class=anchor href=#_system_hangs></a></h4><div class=paragraph><p>Most system hangs are a result of lost interrupts or an interrupt storm. Chipsets may have problems based on boot, how the BIOS configures interrupts before correctness of the APIC (MADT) table, and routing of the System Control Interrupt (SCI).</p></div><div class=paragraph><p>Interrupt storms can be distinguished from lost interrupts by checking the output of <code>vmstat -i</code> and looking at the line that has <code>acpi0</code>. If the counter is increasing at more than a couple per second, there is an interrupt storm. If the system appears hung, try breaking to DDB (<span class=keyseq><kbd>CTRL</kbd>+<kbd>ALT</kbd>+<kbd>ESC</kbd></span> on console) and type <code>show interrupts</code>.</p></div><div class=paragraph><p>When dealing with interrupt problems, try disabling APIC support with <code>hint.apic.0.disabled="1"</code> in <span class=filename>/boot/loader.conf</span>.</p></div></div><div class=sect3><h4 id=_panics>11.13.2.4. Panics<a class=anchor href=#_panics></a></h4><div class=paragraph><p>Panics are relatively rare for ACPI and are the top priority to be fixed. The first step is to isolate the steps to reproduce the panic, if possible, and get a backtrace. Follow the advice for enabling <code>options DDB</code> and setting up a serial console in <a href=../serialcomms/#serialconsole-ddb>“Entering the DDB Debugger from the Serial Line”</a> or setting up a dump partition. To get a backtrace in DDB, use <code>tr</code>. When handwriting the backtrace, get at least the last five and the top five lines in the trace.</p></div><div class=paragraph><p>Then, try to isolate the problem by booting with ACPI disabled. If that works, isolate the ACPI subsystem by using various values of <code>debug.acpi.disable</code>. See <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a> for some examples.</p></div></div><div class=sect3><h4 id=_system_powers_up_after_suspend_or_shutdown>11.13.2.5. System Powers Up After Suspend or Shutdown<a class=anchor href=#_system_powers_up_after_suspend_or_shutdown></a></h4><div class=paragraph><p>First, try setting <code>hw.acpi.disable_on_poweroff="0"</code> in <span class=filename>/boot/loader.conf</span>. This keeps ACPI from disabling various events during the shutdown process. Some systems need this value set to <code>1</code> (the default) for the same reason. This usually fixes the problem of a system powering up spontaneously after a suspend or poweroff.</p></div></div><div class=sect3><h4 id=ACPI-aslanddump>11.13.2.6. BIOS Contains Buggy Bytecode<a class=anchor href=#ACPI-aslanddump></a></h4><div class=paragraph><p>Some BIOS vendors provide incorrect or buggy bytecode. This is usually manifested by kernel console messages like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ACPI-1287: <span class=k>***</span> Error: Method execution failed <span class=o>[</span><span class=se>\\</span>_SB_.PCI0.LPC0.FIGD._STA] <span class=se>\\</span>
<span class=o>(</span>Node 0xc3f6d160<span class=o>)</span>, AE_NOT_FOUND</code></pre></div></div><div class=paragraph><p>Often, these problems may be resolved by updating the BIOS to the latest revision. Most console messages are harmless, but if there are other problems, like the battery status is not working, these messages are a good place to start looking for problems.</p></div></div></div><div class=sect2><h3 id=_overriding_the_default_aml>11.13.3. Overriding the Default AML<a class=anchor href=#_overriding_the_default_aml></a></h3><div class=paragraph><p>The BIOS bytecode, known as ACPI Machine Language (AML), is compiled from a source language called ACPI Source Language (ASL). The AML is found in the table known as the Differentiated System Description Table (DSDT).</p></div><div class=paragraph><p>The goal of FreeBSD is for everyone to have working ACPI without any user intervention. Workarounds are still being developed for common mistakes made by BIOS vendors. The Microsoft® interpreter (<span class=filename>acpi.sys</span> and <span class=filename>acpiec.sys</span>) does not strictly check for adherence to the standard, and thus many BIOS vendors who only test ACPI under Windows® never fix their ASL. FreeBSD developers continue to identify and document which non-standard behavior is allowed by Microsoft®'s interpreter and replicate it so that FreeBSD can work without forcing users to fix the ASL.</p></div><div class=paragraph><p>To help identify buggy behavior and possibly fix it manually, a copy can be made of the system’s ASL. To copy the system’s ASL to a specified file name, use <code>acpidump</code> with <code>-t</code>, to show the contents of the fixed tables, and <code>-d</code>, to disassemble the AML:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># acpidump -td &gt; my.asl</span></code></pre></div></div><div class=paragraph><p>Some AML versions assume the user is running Windows®. To override this, set <code>hw.acpi.osname=<em>"Windows 2009"</em></code> in <span class=filename>/boot/loader.conf</span>, using the most recent Windows® version listed in the ASL.</p></div><div class=paragraph><p>Other workarounds may require <span class=filename>my.asl</span> to be customized. If this file is edited, compile the new ASL using the following command. Warnings can usually be ignored, but errors are bugs that will usually prevent ACPI from working correctly.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># iasl -f my.asl</span></code></pre></div></div><div class=paragraph><p>Including <code>-f</code> forces creation of the AML, even if there are errors during compilation. Some errors, such as missing return statements, are automatically worked around by the FreeBSD interpreter.</p></div><div class=paragraph><p>The default output filename for <code>iasl</code> is <span class=filename>DSDT.aml</span>. Load this file instead of the BIOS’s buggy copy, which is still present in flash memory, by editing <span class=filename>/boot/loader.conf</span> as follows:</p></div><div class="literalblock programlisting"><div class=content><pre>acpi_dsdt_load=&#34;YES&#34;
acpi_dsdt_name=&#34;/boot/DSDT.aml&#34;</pre></div></div><div class=paragraph><p>Be sure to copy <span class=filename>DSDT.aml</span> to <span class=filename>/boot</span>, then reboot the system. If this fixes the problem, send a <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> of the old and new ASL to <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailing list</a> so that developers can work around the buggy behavior in <span class=filename>acpica</span>.</p></div></div><div class=sect2><h3 id=ACPI-submitdebug>11.13.4. Getting and Submitting Debugging Info<a class=anchor href=#ACPI-submitdebug></a></h3><div class=paragraph><p>The ACPI driver has a flexible debugging facility. A set of subsystems and the level of verbosity can be specified. The subsystems to debug are specified as layers and are broken down into components (<code>ACPI_ALL_COMPONENTS</code>) and ACPI hardware support (<code>ACPI_ALL_DRIVERS</code>). The verbosity of debugging output is specified as the level and ranges from just report errors (<code>ACPI_LV_ERROR</code>) to everything (<code>ACPI_LV_VERBOSE</code>). The level is a bitmask so multiple options can be set at once, separated by spaces. In practice, a serial console should be used to log the output so it is not lost as the console message buffer flushes. A full list of the individual layers and levels is found in <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a>.</p></div><div class=paragraph><p>Debugging output is not enabled by default. To enable it, add <code>options ACPI_DEBUG</code> to the custom kernel configuration file if ACPI is compiled into the kernel. Add <code>ACPI_DEBUG=1</code> to <span class=filename>/etc/make.conf</span> to enable it globally. If a module is used instead of a custom kernel, recompile just the <span class=filename>acpi.ko</span> module as follows:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /sys/modules/acpi/acpi &amp;&amp; make clean &amp;&amp; make ACPI_DEBUG=1</span></code></pre></div></div><div class=paragraph><p>Copy the compiled <span class=filename>acpi.ko</span> to <span class=filename>/boot/kernel</span> and add the desired level and layer to <span class=filename>/boot/loader.conf</span>. The entries in this example enable debug messages for all ACPI components and hardware drivers and output error messages at the least verbose level:</p></div><div class="literalblock programlisting"><div class=content><pre>debug.acpi.layer=&#34;ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS&#34;
debug.acpi.level=&#34;ACPI_LV_ERROR&#34;</pre></div></div><div class=paragraph><p>If the required information is triggered by a specific event, such as a suspend and then resume, do not modify <span class=filename>/boot/loader.conf</span>. Instead, use <code>sysctl</code> to specify the layer and level after booting and preparing the system for the specific event. The variables which can be set using <code>sysctl</code> are named the same as the tunables in <span class=filename>/boot/loader.conf</span>.</p></div><div class=paragraph><p>Once the debugging information is gathered, it can be sent to <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailing list</a> so that it can be used by the FreeBSD ACPI maintainers to identify the root cause of the problem and to develop a solution.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Before submitting debugging information to this mailing list, ensure the latest BIOS version is installed and, if available, the embedded controller firmware version.</p></div></td></tr></tbody></table></div><div class=paragraph><p>When submitting a problem report, include the following information:</p></div><div class=ulist><ul><li><p>Description of the buggy behavior, including system type, model, and anything that causes the bug to appear. Note as accurately as possible when the bug began occurring if it is new.</p></li><li><p>The output of <code>dmesg</code> after running <code>boot -v</code>, including any error messages generated by the bug.</p></li><li><p>The <code>dmesg</code> output from <code>boot -v</code> with ACPI disabled, if disabling ACPI helps to fix the problem.</p></li><li><p>Output from <code>sysctl hw.acpi</code>. This lists which features the system offers.</p></li><li><p>The URL to a pasted version of the system’s ASL. Do <em>not</em> send the ASL directly to the list as it can be very large. Generate a copy of the ASL by running this command:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># acpidump -dt &gt; name-system.asl</span></code></pre></div></div><div class=paragraph><p>Substitute the login name for <em>name</em> and manufacturer/model for <em>system</em>. For example, use <span class=filename>njl-FooCo6000.asl</span>.</p></div></li></ul></div><div class=paragraph><p>Most FreeBSD developers watch the <a href=https://lists.FreeBSD.org/subscription/freebsd-current>FreeBSD-CURRENT mailing list</a>, but one should submit problems to <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailing list</a> to be sure it is seen. Be patient when waiting for a response. If the bug is not immediately apparent, submit a bug report. When entering a PR, include the same information as requested above. This helps developers to track the problem and resolve it. Do not send a PR without emailing <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailing list</a> first as it is likely that the problem has been reported before.</p></div></div><div class=sect2><h3 id=ACPI-References>11.13.5. References<a class=anchor href=#ACPI-References></a></h3><div class=paragraph><p>More information about ACPI may be found in the following locations:</p></div><div class=ulist><ul><li><p>The FreeBSD ACPI Mailing List Archives (<a href=https://lists.freebsd.org/pipermail/freebsd-acpi/>https://lists.freebsd.org/pipermail/freebsd-acpi/</a>)</p></li><li><p>The <a href=https://uefi.org/specifications#ACPI>ACPI Specification</a></p></li><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi_thermal&amp;sektion=4&amp;format=html">acpi_thermal(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acpidump&amp;sektion=8&amp;format=html">acpidump(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=iasl&amp;sektion=8&amp;format=html">iasl(8)</a>, and <a href="https://man.freebsd.org/cgi/man.cgi?query=acpidb&amp;sektion=8&amp;format=html">acpidb(8)</a></p></li></ul></div></div></div></div><div id=footnotes><hr><div class=footnote id=_footnotedef_1><a href=#_footnoteref_1>1</a>. The auto-tuning algorithm sets maxusers equal to the amount of memory in the system, with a minimum of 32, and a maximum of 384.</div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 marca 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/pl/books/handbook/partiii class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/pl/books/handbook/boot class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#config-synopsis>11.1. Synopsis</a></li><li><a href=#configtuning-starting-services>11.2. Starting Services</a></li><li><a href=#configtuning-cron>11.3. Configuring cron(8)</a></li><li><a href=#configtuning-rcd>11.4. Managing Services in FreeBSD</a></li><li><a href=#config-network-setup>11.5. Setting Up Network Interface Cards</a></li><li><a href=#configtuning-virtual-hosts>11.6. Virtual Hosts</a></li><li><a href=#configtuning-syslog>11.7. Configuring System Logging</a></li><li><a href=#configtuning-configfiles>11.8. Configuration Files</a></li><li><a href=#configtuning-sysctl>11.9. Tuning with sysctl(8)</a></li><li><a href=#configtuning-disk>11.10. Tuning Disks</a></li><li><a href=#configtuning-kernel-limits>11.11. Tuning Kernel Limits</a></li><li><a href=#adding-swap-space>11.12. Adding Swap Space</a></li><li><a href=#acpi-overview>11.13. Power and Resource Management</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/pl/books/handbook/handbook_pl.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/pl/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/pl/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>Polish</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/pl class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/pl/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>