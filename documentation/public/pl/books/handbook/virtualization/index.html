<!doctype html><html class=theme-light lang=pl><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/pl/books/handbook/virtualization/><title>Rozdział 22. Virtualization | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Rozdział 22. Virtualization"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="pl"><meta property="og:url" content="http://172.16.201.134:1313/pl/books/handbook/virtualization/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/pl\/books\/handbook\/virtualization\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/pl>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/pl/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/pl/books>Books</a></li><li><a href=http://172.16.201.134:1313/pl/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/pl/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=pl>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/preface/>Przedmowa</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/preface/#preface-audience>Docelowy czytelnik</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/preface/#preface-changes-from2>Zmiany od wydania drugiego</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/preface/#preface-changes>Zmiany od wydania pierwszego</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/preface/#preface-overview>Układ książki</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/preface/#preface-conv>Konwencje użyte w tej książce</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/preface/#preface-acknowledgements>Podziękowania</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/parti/>Część I. Pierwsze kroki</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/introduction/>Rozdział 1. Wprowadzenie</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/introduction/#introduction-synopsis>1.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/introduction/#nutshell>1.2. Witamy w świecie FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/introduction/#history>1.3. O Projekcie FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/install/>Rozdział 2. Instalacja FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-synopsis>2.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-pre>2.2. Czynności wstępne</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-start>2.3. Rozpoczęcie instalacji</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#using-sysinstall>2.4. Wprowadzenie do sysinstall</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-steps>2.5. Przydział miejsca na dysku</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-choosing>2.6. Wybór składników instalacji</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-media>2.7. Wybór nośnika instalacji</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-final-warning>2.8. Przystąpienie do instalacji</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-post>2.9. Po instalacji</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-supported-hardware>2.10. Obsługiwany sprzęt</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-trouble>2.11. Rozwiązywanie problemów</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-advanced>2.12. Instalacja zaawansowana</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/install/#install-diff-media>2.13. Przygotowanie własnego nośnika instalacji</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/basics/>Rozdział 3. Podstawy Uniksa</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#basics-synopsis>3.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#consoles>3.2. Konsole wirtualne i terminale</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#permissions>3.3. Prawa dostępu</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#dirstructure>3.4. Struktura katalogów</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#disk-organization>3.5. Organizacja dysku</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#mount-unmount>3.6. Montowanie i odmontowywanie systemów plików</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#basics-processes>3.7. Procesy</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#basics-daemons>3.8. Demony, sygnały i unicestwianie procesów</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#shells>3.9. Powłoki</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#editors>3.10. Edytory tekstu</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#basics-devices>3.11. Urządzenia i pliki urządzeń</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#binary-formats>3.12. Formaty binarne</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/basics/#basics-more-information>3.13. Więcej informacji</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/ports/>Rozdział 4. Instalacja programów: pakiety i porty</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/ports/#ports-synopsis>4.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ports/#ports-overview>4.2. Omówienie instalacji oprogramowania</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ports/#ports-finding-applications>4.3. Odnalezienie programu dla siebie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ports/#packages-using>4.4. Korzystanie z systemu pakietów</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ports/#ports-using>4.5. Korzystanie z kolekcji portów</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ports/#ports-nextsteps>4.6. Czynności po-instalacyjne</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ports/#ports-broken>4.7. Jak radzić sobie ze źle przygotowanymi portami</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/x11/>Rozdział 5. System okien X</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/x11/#x11-synopsis>5.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/x11/#x-understanding>5.2. Zrozumieć X</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/x11/#x-install>5.3. Instalacja X11</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/x11/#x-config>5.4. Konfiguracja X11</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/x11/#x-fonts>5.5. Korzystanie z czcionek w X11</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/x11/#x-xdm>5.6. Menedżer pulpitów X</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/x11/#x11-wm>5.7. Środowiska graficzne</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/partii/>Część II. Codzienne czynności</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/>Rozdział 6. Aplikacje biurowe</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#desktop-synopsis>6.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#desktop-browsers>6.2. Przeglądarki internetowe</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#moz-flash-plugin>6.3. Firefox, Mozilla i moduł Macromedia® Flash®</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#_opera>6.4. Opera</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#_konqueror>6.5. Konqueror</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#desktop-productivity>6.6. Programy codziennego użytku</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#desktop-viewers>6.7. Przeglądarki dokumentów</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#desktop-finance>6.8. Finanse</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/desktop/#desktop-summary>6.9. Podsumowanie</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/>Rozdział 7. Multimedia</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/#multimedia-synopsis>7.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/#sound-setup>7.2. Setting Up the Sound Card</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/#sound-mp3>7.3. MP3 Audio</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/#video-playback>7.4. Video Playback</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/#tvcard>7.5. TV Cards</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/#mythtv>7.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/multimedia/#scanners>7.7. Image Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/kernelconfig/>Rozdział 8. Konfiguracja jądra FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Po co budować indywidualne jądro?</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/kernelconfig/#kernelconfig-building>8.3. Budowanie i instalowanie indywidualnego jądra</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/kernelconfig/#kernelconfig-config>8.4. Plik konfiguracyjny</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/kernelconfig/#kernelconfig-trouble>8.5. Jeśli pojawią się kłopoty</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/printing/>Rozdział 9. Printing</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/printing/#printing-quick-start>9.1. Quick Start</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/printing/#printing-connections>9.2. Printer Connections</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/printing/#printing-pdls>9.3. Common Page Description Languages</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/printing/#printing-direct>9.4. Direct Printing</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/printing/#printing-lpd>9.5. LPD (Line Printer Daemon)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/printing/#printing-other>9.6. Other Printing Systems</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/linuxemu/>Rozdział 10. Linux® Binary Compatibility</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Configuring Linux® Binary Compatibility</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/linuxemu/#linuxemu-advanced>10.3. Advanced Topics</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/partiii/>Część III. Administracja systemem</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/config/>Rozdział 11. Configuration and Tuning</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#config-synopsis>11.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-starting-services>11.2. Starting Services</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-cron>11.3. Configuring cron(8)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-rcd>11.4. Managing Services in FreeBSD</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#config-network-setup>11.5. Setting Up Network Interface Cards</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-virtual-hosts>11.6. Virtual Hosts</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-syslog>11.7. Configuring System Logging</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-configfiles>11.8. Configuration Files</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-sysctl>11.9. Tuning with sysctl(8)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-disk>11.10. Tuning Disks</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#configtuning-kernel-limits>11.11. Tuning Kernel Limits</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#adding-swap-space>11.12. Adding Swap Space</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/config/#acpi-overview>11.13. Power and Resource Management</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/boot/>Rozdział 12. The FreeBSD Booting Process</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/boot/#boot-synopsis>12.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/boot/#boot-introduction>12.2. FreeBSD Boot Process</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/boot/#boot-splash>12.3. Configuring Boot Time Splash Screens</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/boot/#device-hints>12.4. Device Hints</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/boot/#boot-shutdown>12.5. Shutdown Sequence</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/users/>Rozdział 13. Użytkownicy i podstawy zarządzania kontami</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-synopsis>13.1. Streszczenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-introduction>13.2. Wprowadzenie</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-superuser>13.3. Konto superużytkownika</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-system>13.4. Konta systemowe</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-user>13.5. Konta użytkowników</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-modifying>13.6. Modyfikacja ustawień kont</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-limiting>13.7. Ograniczanie użytkowników</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/users/#users-groups>13.8. Grupy</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/security/>Rozdział 14. Security</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#security-synopsis>14.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#security-intro>14.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#one-time-passwords>14.3. One-time Passwords</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#tcpwrappers>14.4. TCP Wrapper</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#kerberos5>14.5. Kerberos</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#openssl>14.6. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#ipsec>14.7. VPN over IPsec</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#openssh>14.8. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#fs-acl>14.9. Access Control Lists</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#security-pkg>14.10. Monitoring Third Party Security Issues</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#security-advisories>14.11. FreeBSD Security Advisories</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#security-accounting>14.12. Process Accounting</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#security-resourcelimits>14.13. Resource Limits</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/security/#security-sudo>14.14. Shared Administration with Sudo</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/jails/>Rozdział 15. Jails</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/jails/#jails-synopsis>15.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/jails/#jails-terms>15.2. Terms Related to Jails</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/jails/#jails-build>15.3. Creating and Controlling Jails</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/jails/#jails-tuning>15.4. Fine Tuning and Administration</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/jails/#jails-application>15.5. Updating Multiple Jails</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/jails/#jails-ezjail>15.6. Managing Jails with ezjail</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/mac/>Rozdział 16. Mandatory Access Control</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-synopsis>16.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-inline-glossary>16.2. Key Terms</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-understandlabel>16.3. Understanding MAC Labels</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-planning>16.4. Planning the Security Configuration</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-policies>16.5. Available MAC Policies</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-userlocked>16.6. User Lock Down</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-implementing>16.7. Nagios in a MAC Jail</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mac/#mac-troubleshoot>16.8. Troubleshooting the MAC Framework</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/audit/>Rozdział 17. Security Event Auditing</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/audit/#audit-synopsis>17.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/audit/#audit-inline-glossary>17.2. Key Terms</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/audit/#audit-config>17.3. Audit Configuration</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/audit/#audit-administration>17.4. Working with Audit Trails</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/disks/>Rozdział 18. Storage</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#disks-synopsis>18.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#disks-adding>18.2. Adding Disks</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#disks-growing>18.3. Resizing and Growing Disks</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#usb-disks>18.4. USB Storage Devices</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#creating-cds>18.5. Creating and Using CD Media</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#creating-dvds>18.6. Creating and Using DVD Media</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#floppies>18.7. Creating and Using Floppy Disks</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#backup-basics>18.8. Backup Basics</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#disks-virtual>18.9. Memory Disks</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#snapshots>18.10. File System Snapshots</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#quotas>18.11. Disk Quotas</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#disks-encrypting>18.12. Encrypting Disk Partitions</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#swap-encrypting>18.13. Encrypting Swap</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/disks/#disks-hast>18.14. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/geom/>Rozdział 19. GEOM: Modular Disk Transformation Framework</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-synopsis>19.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-striping>19.2. RAID0 - Striping</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-mirror>19.3. RAID1 - Mirroring</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-raid3>19.4. RAID3 - Byte-level Striping with Dedicated Parity</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-graid>19.5. Software RAID Devices</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-ggate>19.6. GEOM Gate Network</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-glabel>19.7. Labeling Disk Devices</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/geom/#geom-gjournal>19.8. UFS Journaling Through GEOM</a></li></ul></li><li><input type=checkbox id=chapter-73e82560fcb7145b7c0e2ec47af8fc04 class=toggle>
<label class="icon cursor" for=chapter-73e82560fcb7145b7c0e2ec47af8fc04><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/>Rozdział 20. The Z File System (ZFS)</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-differences>20.1. What Makes ZFS Different</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-quickstart>20.2. Quick Start Guide</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-zpool>20.3. <code>zpool</code> Administration</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-zfs>20.4. <code>zfs</code> Administration</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-zfs-allow>20.5. Delegated Administration</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-advanced>20.6. Advanced Topics</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-links>20.7. Additional Resources</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/zfs/#zfs-term>20.8. ZFS Features and Terminology</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/filesystems/>Rozdział 21. Other File Systems</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/filesystems/#filesystems-synopsis>21.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/filesystems/#filesystems-linux>21.2. Linux® File Systems</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle checked>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/>Rozdział 22. Virtualization</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-synopsis>22.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-guest-parallels>22.2. FreeBSD as a Guest on Parallels for Mac OS® X</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-guest-virtualpc>22.3. FreeBSD as a Guest on Virtual PC for Windows®</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-guest-vmware>22.4. FreeBSD as a Guest on VMware Fusion for Mac OS®</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-guest-virtualbox>22.5. FreeBSD as a Guest on VirtualBox™</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-host-virtualbox>22.6. FreeBSD as a Host with VirtualBox™</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-host-bhyve>22.7. FreeBSD as a Host with bhyve</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/virtualization/#virtualization-host-xen>22.8. FreeBSD as a Xen™-Host</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/l10n/>Rozdział 23. Localization - i18n/L10n Usage and Setup</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/l10n/#l10n-synopsis>23.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/l10n/#using-localization>23.2. Using Localization</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/l10n/#l10n-compiling>23.3. Finding i18n Applications</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/l10n/#lang-setup>23.4. Locale Configuration for Specific Languages</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/cutting-edge/>Rozdział 24. Updating and Upgrading FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. FreeBSD Update</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/cutting-edge/#updating-upgrading-documentation>24.3. Updating the Documentation Set</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/cutting-edge/#current-stable>24.4. Tracking a Development Branch</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/cutting-edge/#makeworld>24.5. Updating FreeBSD from Source</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/cutting-edge/#small-lan>24.6. Tracking for Multiple Machines</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/dtrace/>Rozdział 25. DTrace</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/dtrace/#dtrace-synopsis>25.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/dtrace/#dtrace-implementation>25.2. Implementation Differences</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/dtrace/#dtrace-enable>25.3. Enabling DTrace Support</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/dtrace/#dtrace-using>25.4. Using DTrace</a></li></ul></li><li><input type=checkbox id=chapter-913e72bfb3d6947b2869d3e9447a6eaa class=toggle>
<label class="icon cursor" for=chapter-913e72bfb3d6947b2869d3e9447a6eaa><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/usb-device-mode/>Rozdział 26. USB Device Mode / USB OTG</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/usb-device-mode/#usb-device-mode-synopsis>26.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/usb-device-mode/#usb-device-mode-terminals>26.2. USB Virtual Serial Ports</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/usb-device-mode/#usb-device-mode-network>26.3. USB Device Mode Network Interfaces</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/usb-device-mode/#usb-device-mode-storage>26.4. USB Virtual Storage Device</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/partiv/>Część IV. Komunikacja sieciowa</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/serialcomms/>Rozdział 27. Serial Communications</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/serialcomms/#serial-synopsis>27.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/serialcomms/#serial>27.2. Serial Terminology and Hardware</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/serialcomms/#term>27.3. Terminals</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/serialcomms/#dialup>27.4. Dial-in Service</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/serialcomms/#dialout>27.5. Dial-out Service</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/serialcomms/#serialconsole-setup>27.6. Setting Up the Serial Console</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/ppp-and-slip/>Rozdział 28. PPP</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>28.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ppp-and-slip/#userppp>28.2. Configuring PPP</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ppp-and-slip/#ppp-troubleshoot>28.3. Troubleshooting PPP Connections</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ppp-and-slip/#pppoe>28.4. Using PPP over Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/ppp-and-slip/#pppoa>28.5. Using PPP over ATM (PPPoA)</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/mail/>Rozdział 29. Electronic Mail</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-synopsis>29.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-using>29.2. Mail Components</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#sendmail>29.3. Sendmail Configuration Files</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-changingmta>29.4. Changing the Mail Transfer Agent</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-trouble>29.5. Troubleshooting</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-advanced>29.6. Advanced Topics</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#outgoing-only>29.7. Setting Up to Send Only</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#SMTP-dialup>29.8. Using Mail with a Dialup Connection</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#SMTP-Auth>29.9. SMTP Authentication</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-agents>29.10. Mail User Agents</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-fetchmail>29.11. Using fetchmail</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mail/#mail-procmail>29.12. Using procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/>Rozdział 30. Network Servers</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-servers-synopsis>30.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-inetd>30.2. The inetd Super-Server</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-nfs>30.3. Network File System (NFS)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-nis>30.4. Network Information System (NIS)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-ldap>30.5. Lightweight Directory Access Protocol (LDAP)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-dhcp>30.6. Dynamic Host Configuration Protocol (DHCP)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-dns>30.7. Domain Name System (DNS)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-apache>30.8. Apache HTTP Server</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-ftp>30.9. File Transfer Protocol (FTP)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-samba>30.10. File and Print Services for Microsoft® Windows® Clients (Samba)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-ntp>30.11. Clock Synchronization with NTP</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/network-servers/#network-iscsi>30.12. iSCSI Initiator and Target Configuration</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/firewalls/>Rozdział 31. Firewalls</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/firewalls/#firewalls-intro>31.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/firewalls/#firewalls-concepts>31.2. Firewall Concepts</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/firewalls/#firewalls-pf>31.3. PF</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/firewalls/#firewalls-ipfw>31.4. IPFW</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/firewalls/#firewalls-ipf>31.5. IPFILTER (IPF)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/firewalls/#firewalls-blacklistd>31.6. Blacklistd</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/>Rozdział 32. Advanced Networking</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#advanced-networking-synopsis>32.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-routing>32.2. Gateways and Routes</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-wireless>32.3. Wireless Networking</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-usb-tethering>32.4. USB Tethering</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-bluetooth>32.5. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-bridging>32.6. Bridging</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-aggregation>32.7. Link Aggregation and Failover</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-diskless>32.8. Diskless Operation with PXE</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-ipv6>32.9. IPv6</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#carp>32.10. Common Address Redundancy Protocol (CARP)</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/advanced-networking/#network-vlan>32.11. VLANs</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/partv/>Część V. Dodatki</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/mirrors/>Dodatek A. Obtaining FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/mirrors/#mirrors-cdrom>A.1. CD and DVD Sets</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mirrors/#mirrors-ftp>A.2. FTP Sites</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mirrors/#svn>A.3. Using Subversion</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/mirrors/#mirrors-rsync>A.4. Using rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/bibliography/>Dodatek B. Bibliografia</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/bibliography/#bibliography-freebsd>B.1. Książki i czasopisma poświęcone FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/eresources/>Dodatek C. Resources on the Internet</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/eresources/#eresources-www>C.1. Websites</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/eresources/#eresources-mail>C.2. Mailing Lists</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/eresources/#eresources-news>C.3. Usenet Newsgroups</a></li><li><a href=http://172.16.201.134:1313/pl/books/handbook/eresources/#eresources-web>C.4. Official Mirrors</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/pl/books/handbook/pgpkeys/>Dodatek D. Klucze PGP</a><ul><li><a href=http://172.16.201.134:1313/pl/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Oficerowie</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Rozdział 22. Virtualization</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#virtualization-synopsis>22.1. Synopsis</a></li><li><a href=#virtualization-guest-parallels>22.2. FreeBSD as a Guest on Parallels for Mac OS® X</a></li><li><a href=#virtualization-guest-virtualpc>22.3. FreeBSD as a Guest on Virtual PC for Windows®</a></li><li><a href=#virtualization-guest-vmware>22.4. FreeBSD as a Guest on VMware Fusion for Mac OS®</a></li><li><a href=#virtualization-guest-virtualbox>22.5. FreeBSD as a Guest on VirtualBox™</a></li><li><a href=#virtualization-host-virtualbox>22.6. FreeBSD as a Host with VirtualBox™</a></li><li><a href=#virtualization-host-bhyve>22.7. FreeBSD as a Host with bhyve</a></li><li><a href=#virtualization-host-xen>22.8. FreeBSD as a Xen™-Host</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=virtualization-synopsis>22.1. Synopsis<a class=anchor href=#virtualization-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Virtualization software allows multiple operating systems to run simultaneously on the same computer. Such software systems for PCs often involve a host operating system which runs the virtualization software and supports any number of guest operating systems.</p></div><div class=paragraph><p>After reading this chapter, you will know:</p></div><div class=ulist><ul><li><p>The difference between a host operating system and a guest operating system.</p></li><li><p>How to install FreeBSD on an Intel®-based Apple® Mac® computer.</p></li><li><p>How to install FreeBSD on Microsoft® Windows® with Virtual PC.</p></li><li><p>How to install FreeBSD as a guest in bhyve.</p></li><li><p>How to tune a FreeBSD system for best performance under virtualization.</p></li></ul></div><div class=paragraph><p>Before reading this chapter, you should:</p></div><div class=ulist><ul><li><p>Understand the <a href=../basics/#basics>basics of UNIX® and FreeBSD</a>.</p></li><li><p>Know how to <a href=../bsdinstall/#bsdinstall>install FreeBSD</a>.</p></li><li><p>Know how to <a href=../advanced-networking/#advanced-networking>set up a network connection</a>.</p></li><li><p>Know how to <a href=../ports/#ports>install additional third-party software</a>.</p></li></ul></div></div></div><div class=sect1><h2 id=virtualization-guest-parallels>22.2. FreeBSD as a Guest on Parallels for Mac OS® X<a class=anchor href=#virtualization-guest-parallels></a></h2><div class=sectionbody><div class=paragraph><p>Parallels Desktop for Mac® is a commercial software product available for Intel® based Apple® Mac® computers running Mac OS® 10.4.6 or higher. FreeBSD is a fully supported guest operating system. Once Parallels has been installed on Mac OS® X, the user must configure a virtual machine and then install the desired guest operating system.</p></div><div class=sect2><h3 id=virtualization-guest-parallels-install>22.2.1. Installing FreeBSD on Parallels/Mac OS® X<a class=anchor href=#virtualization-guest-parallels-install></a></h3><div class=paragraph><p>The first step in installing FreeBSD on Parallels is to create a new virtual machine for installing FreeBSD. Select <span class=guimenuitem>FreeBSD</span> as the <b class=menuref>Guest OS Type</b> when prompted:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd1.png alt="parallels freebsd1"></div></div><div class=paragraph><p>Choose a reasonable amount of disk and memory depending on the plans for this virtual FreeBSD instance. 4GB of disk space and 512MB of RAM work well for most uses of FreeBSD under Parallels:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd2.png alt="parallels freebsd2"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd3.png alt="parallels freebsd3"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd4.png alt="parallels freebsd4"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd5.png alt="parallels freebsd5"></div></div><div class=paragraph><p>Select the type of networking and a network interface:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd6.png alt="parallels freebsd6"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd7.png alt="parallels freebsd7"></div></div><div class=paragraph><p>Save and finish the configuration:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd8.png alt="parallels freebsd8"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd9.png alt="parallels freebsd9"></div></div><div class=paragraph><p>After the FreeBSD virtual machine has been created, FreeBSD can be installed on it. This is best done with an official FreeBSD CD/DVD or with an ISO image downloaded from an official FTP site. Copy the appropriate ISO image to the local Mac® filesystem or insert a CD/DVD in the Mac®'s CD-ROM drive. Click on the disc icon in the bottom right corner of the FreeBSD Parallels window. This will bring up a window that can be used to associate the CD-ROM drive in the virtual machine with the ISO file on disk or with the real CD-ROM drive.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd11.png alt="parallels freebsd11"></div></div><div class=paragraph><p>Once this association with the CD-ROM source has been made, reboot the FreeBSD virtual machine by clicking the reboot icon. Parallels will reboot with a special BIOS that first checks if there is a CD-ROM.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd10.png alt="parallels freebsd10"></div></div><div class=paragraph><p>In this case it will find the FreeBSD installation media and begin a normal FreeBSD installation. Perform the installation, but do not attempt to configure Xorg at this time.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd12.png alt="parallels freebsd12"></div></div><div class=paragraph><p>When the installation is finished, reboot into the newly installed FreeBSD virtual machine.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/parallels-freebsd13.png alt="parallels freebsd13"></div></div></div><div class=sect2><h3 id=virtualization-guest-parallels-configure>22.2.2. Configuring FreeBSD on Parallels<a class=anchor href=#virtualization-guest-parallels-configure></a></h3><div class=paragraph><p>After FreeBSD has been successfully installed on Mac OS® X with Parallels, there are a number of configuration steps that can be taken to optimize the system for virtualized operation.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Set Boot Loader Variables</p><div class=paragraph><p>The most important step is to reduce the <code>kern.hz</code> tunable to reduce the CPU utilization of FreeBSD under the Parallels environment. This is accomplished by adding the following line to <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>kern.hz=100</pre></div></div><div class=paragraph><p>Without this setting, an idle FreeBSD Parallels guest will use roughly 15% of the CPU of a single processor iMac®. After this change the usage will be closer to 5%.</p></div></li><li><p>Create a New Kernel Configuration File</p><div class=paragraph><p>All of the SCSI, FireWire, and USB device drivers can be removed from a custom kernel configuration file. Parallels provides a virtual network adapter used by the <a href="https://man.freebsd.org/cgi/man.cgi?query=ed&amp;sektion=4&amp;format=html">ed(4)</a> driver, so all network devices except for <a href="https://man.freebsd.org/cgi/man.cgi?query=ed&amp;sektion=4&amp;format=html">ed(4)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=miibus&amp;sektion=4&amp;format=html">miibus(4)</a> can be removed from the kernel.</p></div></li><li><p>Configure Networking</p><div class=paragraph><p>The most basic networking setup uses DHCP to connect the virtual machine to the same local area network as the host Mac®. This can be accomplished by adding <code>ifconfig_ed0="DHCP"</code> to <span class=filename>/etc/rc.conf</span>. More advanced networking setups are described in <a href=../advanced-networking/#advanced-networking>Advanced Networking</a>.</p></div></li></ol></div></div></div></div><div class=sect1><h2 id=virtualization-guest-virtualpc>22.3. FreeBSD as a Guest on Virtual PC for Windows®<a class=anchor href=#virtualization-guest-virtualpc></a></h2><div class=sectionbody><div class=paragraph><p>Virtual PC for Windows® is a Microsoft® software product available for free download. See this website for the <a href=http://www.microsoft.com/windows/downloads/virtualpc/sysreq.mspx>system requirements</a>. Once Virtual PC has been installed on Microsoft® Windows®, the user can configure a virtual machine and then install the desired guest operating system.</p></div><div class=sect2><h3 id=virtualization-guest-virtualpc-install>22.3.1. Installing FreeBSD on Virtual PC<a class=anchor href=#virtualization-guest-virtualpc-install></a></h3><div class=paragraph><p>The first step in installing FreeBSD on Virtual PC is to create a new virtual machine for installing FreeBSD. Select <span class=guimenuitem>Create a virtual machine</span> when prompted:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd1.png alt="virtualpc freebsd1"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd2.png alt="virtualpc freebsd2"></div></div><div class=paragraph><p>Select <span class=guimenuitem>Other</span> as the <span class=guimenuitem>Operating system</span> when prompted:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd3.png alt="virtualpc freebsd3"></div></div><div class=paragraph><p>Then, choose a reasonable amount of disk and memory depending on the plans for this virtual FreeBSD instance. 4GB of disk space and 512MB of RAM work well for most uses of FreeBSD under Virtual PC:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd4.png alt="virtualpc freebsd4"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd5.png alt="virtualpc freebsd5"></div></div><div class=paragraph><p>Save and finish the configuration:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd6.png alt="virtualpc freebsd6"></div></div><div class=paragraph><p>Select the FreeBSD virtual machine and click <b class=menuref>Settings</b>, then set the type of networking and a network interface:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd7.png alt="virtualpc freebsd7"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd8.png alt="virtualpc freebsd8"></div></div><div class=paragraph><p>After the FreeBSD virtual machine has been created, FreeBSD can be installed on it. This is best done with an official FreeBSD CD/DVD or with an ISO image downloaded from an official FTP site. Copy the appropriate ISO image to the local Windows® filesystem or insert a CD/DVD in the CD drive, then double click on the FreeBSD virtual machine to boot. Then, click <b class=menuref>CD</b> and choose <b class=menuref>Capture ISO Image…​</b> on the Virtual PC window. This will bring up a window where the CD-ROM drive in the virtual machine can be associated with an ISO file on disk or with the real CD-ROM drive.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd9.png alt="virtualpc freebsd9"></div></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd10.png alt="virtualpc freebsd10"></div></div><div class=paragraph><p>Once this association with the CD-ROM source has been made, reboot the FreeBSD virtual machine by clicking <b class=menuref>Action</b> and <b class=menuref>Reset</b>. Virtual PC will reboot with a special BIOS that first checks for a CD-ROM.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd11.png alt="virtualpc freebsd11"></div></div><div class=paragraph><p>In this case it will find the FreeBSD installation media and begin a normal FreeBSD installation. Continue with the installation, but do not attempt to configure Xorg at this time.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd12.png alt="virtualpc freebsd12"></div></div><div class=paragraph><p>When the installation is finished, remember to eject the CD/DVD or release the ISO image. Finally, reboot into the newly installed FreeBSD virtual machine.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/virtualpc-freebsd13.png alt="virtualpc freebsd13"></div></div></div><div class=sect2><h3 id=virtualization-guest-virtualpc-configure>22.3.2. Configuring FreeBSD on Virtual PC<a class=anchor href=#virtualization-guest-virtualpc-configure></a></h3><div class=paragraph><p>After FreeBSD has been successfully installed on Microsoft® Windows® with Virtual PC, there are a number of configuration steps that can be taken to optimize the system for virtualized operation.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Set Boot Loader Variables</p><div class=paragraph><p>The most important step is to reduce the <code>kern.hz</code> tunable to reduce the CPU utilization of FreeBSD under the Virtual PC environment. This is accomplished by adding the following line to <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>kern.hz=100</pre></div></div><div class=paragraph><p>Without this setting, an idle FreeBSD Virtual PC guest OS will use roughly 40% of the CPU of a single processor computer. After this change, the usage will be closer to 3%.</p></div></li><li><p>Create a New Kernel Configuration File</p><div class=paragraph><p>All of the SCSI, FireWire, and USB device drivers can be removed from a custom kernel configuration file. Virtual PC provides a virtual network adapter used by the <a href="https://man.freebsd.org/cgi/man.cgi?query=de&amp;sektion=4&amp;format=html">de(4)</a> driver, so all network devices except for <a href="https://man.freebsd.org/cgi/man.cgi?query=de&amp;sektion=4&amp;format=html">de(4)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=miibus&amp;sektion=4&amp;format=html">miibus(4)</a> can be removed from the kernel.</p></div></li><li><p>Configure Networking</p><div class=paragraph><p>The most basic networking setup uses DHCP to connect the virtual machine to the same local area network as the Microsoft® Windows® host. This can be accomplished by adding <code>ifconfig_de0="DHCP"</code> to <span class=filename>/etc/rc.conf</span>. More advanced networking setups are described in <a href=../advanced-networking/#advanced-networking>Advanced Networking</a>.</p></div></li></ol></div></div></div></div><div class=sect1><h2 id=virtualization-guest-vmware>22.4. FreeBSD as a Guest on VMware Fusion for Mac OS®<a class=anchor href=#virtualization-guest-vmware></a></h2><div class=sectionbody><div class=paragraph><p>VMware Fusion for Mac® is a commercial software product available for Intel® based Apple® Mac® computers running Mac OS® 10.4.9 or higher. FreeBSD is a fully supported guest operating system. Once VMware Fusion has been installed on Mac OS® X, the user can configure a virtual machine and then install the desired guest operating system.</p></div><div class=sect2><h3 id=virtualization-guest-vmware-install>22.4.1. Installing FreeBSD on VMware Fusion<a class=anchor href=#virtualization-guest-vmware-install></a></h3><div class=paragraph><p>The first step is to start VMware Fusion which will load the Virtual Machine Library. Click <span class=guimenuitem>New</span> to create the virtual machine:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd01.png alt="vmware freebsd01"></div></div><div class=paragraph><p>This will load the New Virtual Machine Assistant. Click <span class=guimenuitem>Continue</span> to proceed:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd02.png alt="vmware freebsd02"></div></div><div class=paragraph><p>Select <span class=guimenuitem>Other</span> as the <span class=guimenuitem>Operating System</span> and either <span class=guimenuitem>FreeBSD</span> or <span class=guimenuitem>FreeBSD 64-bit</span>, as the <b class=menuref>Version</b> when prompted:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd03.png alt="vmware freebsd03"></div></div><div class=paragraph><p>Choose the name of the virtual machine and the directory where it should be saved:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd04.png alt="vmware freebsd04"></div></div><div class=paragraph><p>Choose the size of the Virtual Hard Disk for the virtual machine:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd05.png alt="vmware freebsd05"></div></div><div class=paragraph><p>Choose the method to install the virtual machine, either from an ISO image or from a CD/DVD:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd06.png alt="vmware freebsd06"></div></div><div class=paragraph><p>Click <span class=guimenuitem>Finish</span> and the virtual machine will boot:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd07.png alt="vmware freebsd07"></div></div><div class=paragraph><p>Install FreeBSD as usual:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd08.png alt="vmware freebsd08"></div></div><div class=paragraph><p>Once the install is complete, the settings of the virtual machine can be modified, such as memory usage:</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The System Hardware settings of the virtual machine cannot be modified while the virtual machine is running.</p></div></td></tr></tbody></table></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd09.png alt="vmware freebsd09"></div></div><div class=paragraph><p>The number of CPUs the virtual machine will have access to:</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd10.png alt="vmware freebsd10"></div></div><div class=paragraph><p>The status of the CD-ROM device. Normally the CD/DVD/ISO is disconnected from the virtual machine when it is no longer needed.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd11.png alt="vmware freebsd11"></div></div><div class=paragraph><p>The last thing to change is how the virtual machine will connect to the network. To allow connections to the virtual machine from other machines besides the host, choose <span class=guimenuitem>Connect directly to the physical network (Bridged)</span>. Otherwise, <span class=guimenuitem>Share the host’s internet connection (NAT)</span> is preferred so that the virtual machine can have access to the Internet, but the network cannot access the virtual machine.</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/virtualization/vmware-freebsd12.png alt="vmware freebsd12"></div></div><div class=paragraph><p>After modifying the settings, boot the newly installed FreeBSD virtual machine.</p></div></div><div class=sect2><h3 id=virtualization-guest-vmware-configure>22.4.2. Configuring FreeBSD on VMware Fusion<a class=anchor href=#virtualization-guest-vmware-configure></a></h3><div class=paragraph><p>After FreeBSD has been successfully installed on Mac OS® X with VMware Fusion, there are a number of configuration steps that can be taken to optimize the system for virtualized operation.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Set Boot Loader Variables</p><div class=paragraph><p>The most important step is to reduce the <code>kern.hz</code> tunable to reduce the CPU utilization of FreeBSD under the VMware Fusion environment. This is accomplished by adding the following line to <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>kern.hz=100</pre></div></div><div class=paragraph><p>Without this setting, an idle FreeBSD VMware Fusion guest will use roughly 15% of the CPU of a single processor iMac®. After this change, the usage will be closer to 5%.</p></div></li><li><p>Create a New Kernel Configuration File</p><div class=paragraph><p>All of the FireWire, and USB device drivers can be removed from a custom kernel configuration file. VMware Fusion provides a virtual network adapter used by the <a href="https://man.freebsd.org/cgi/man.cgi?query=em&amp;sektion=4&amp;format=html">em(4)</a> driver, so all network devices except for <a href="https://man.freebsd.org/cgi/man.cgi?query=em&amp;sektion=4&amp;format=html">em(4)</a> can be removed from the kernel.</p></div></li><li><p>Configure Networking</p><div class=paragraph><p>The most basic networking setup uses DHCP to connect the virtual machine to the same local area network as the host Mac®. This can be accomplished by adding <code>ifconfig_em0="DHCP"</code> to <span class=filename>/etc/rc.conf</span>. More advanced networking setups are described in <a href=../advanced-networking/#advanced-networking>Advanced Networking</a>.</p></div></li></ol></div></div></div></div><div class=sect1><h2 id=virtualization-guest-virtualbox>22.5. FreeBSD as a Guest on VirtualBox™<a class=anchor href=#virtualization-guest-virtualbox></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD works well as a guest in VirtualBox™. The virtualization software is available for most common operating systems, including FreeBSD itself.</p></div><div class=paragraph><p>The VirtualBox™ guest additions provide support for:</p></div><div class=ulist><ul><li><p>Clipboard sharing.</p></li><li><p>Mouse pointer integration.</p></li><li><p>Host time synchronization.</p></li><li><p>Window scaling.</p></li><li><p>Seamless mode.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>These commands are run in the FreeBSD guest.</p></div></td></tr></tbody></table></div><div class=paragraph><p>First, install the <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/virtualbox-ose-additions/>emulators/virtualbox-ose-additions</a> package or port in the FreeBSD guest. This will install the port:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/emulators/virtualbox-ose-additions &amp;&amp; make install clean</span></code></pre></div></div><div class=paragraph><p>Add these lines to <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>vboxguest_enable=&#34;YES&#34;
vboxservice_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>If <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> or <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> is used, disable host time synchronization:</p></div><div class="literalblock programlisting"><div class=content><pre>vboxservice_flags=&#34;--disable-timesync&#34;</pre></div></div><div class=paragraph><p>Xorg will automatically recognize the <code>vboxvideo</code> driver. It can also be manually entered in <span class=filename>/etc/X11/xorg.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>Section &#34;Device&#34;
	Identifier &#34;Card0&#34;
	Driver &#34;vboxvideo&#34;
	VendorName &#34;InnoTek Systemberatung GmbH&#34;
	BoardName &#34;VirtualBox Graphics Adapter&#34;
EndSection</pre></div></div><div class=paragraph><p>To use the <code>vboxmouse</code> driver, adjust the mouse section in <span class=filename>/etc/X11/xorg.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>Section &#34;InputDevice&#34;
	Identifier &#34;Mouse0&#34;
	Driver &#34;vboxmouse&#34;
EndSection</pre></div></div><div class=paragraph><p>HAL users should create the following <span class=filename>/usr/local/etc/hal/fdi/policy/90-vboxguest.fdi</span> or copy it from <span class=filename>/usr/local/shared/hal/fdi/policy/10osvendor/90-vboxguest.fdi</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;!--
# Sun VirtualBox
# Hal driver description for the vboxmouse driver
# $Id: chapter.xml,v 1.33 2012-03-17 04:53:52 eadler Exp $

	Copyright (C) 2008-2009 Sun Microsystems, Inc.

	This file is part of VirtualBox Open Source Edition (OSE, as
	available from http://www.virtualbox.org. This file is free software;
	you can redistribute it and/or modify it under the terms of the GNU
	General Public License (GPL) as published by the Free Software
	Foundation, in version 2 as it comes in the &#34;COPYING&#34; file of the
	VirtualBox OSE distribution. VirtualBox OSE is distributed in the
	hope that it will be useful, but WITHOUT ANY WARRANTY of any kind.

	Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa
	Clara, CA 95054 USA or visit http://www.sun.com if you need
	additional information or have any questions.
--&gt;
&lt;deviceinfo version=&#34;0.2&#34;&gt;
  &lt;device&gt;
    &lt;match key=&#34;info.subsystem&#34; string=&#34;pci&#34;&gt;
      &lt;match key=&#34;info.product&#34; string=&#34;VirtualBox guest Service&#34;&gt;
        &lt;append key=&#34;info.capabilities&#34; type=&#34;strlist&#34;&gt;input&lt;/append&gt;
	&lt;append key=&#34;info.capabilities&#34; type=&#34;strlist&#34;&gt;input.mouse&lt;/append&gt;
        &lt;merge key=&#34;input.x11_driver&#34; type=&#34;string&#34;&gt;vboxmouse&lt;/merge&gt;
	&lt;merge key=&#34;input.device&#34; type=&#34;string&#34;&gt;/dev/vboxguest&lt;/merge&gt;
      &lt;/match&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;</pre></div></div><div class=paragraph><p>Shared folders for file transfers between host and VM are accessible by mounting them using <code>mount_vboxvfs</code>. A shared folder can be created on the host using the VirtualBox GUI or via <code>vboxmanage</code>. For example, to create a shared folder called <em>myshare</em> under <span class=filename>/mnt/bsdboxshare</span> for the VM named <em>BSDBox</em>, run:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vboxmanage sharedfolder add &#39;BSDBox&#39; --name myshare --hostpath /mnt/bsdboxshare</span></code></pre></div></div><div class=paragraph><p>Note that the shared folder name must not contain spaces. Mount the shared folder from within the guest system like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount_vboxvfs -w myshare /mnt</span></code></pre></div></div></div></div><div class=sect1><h2 id=virtualization-host-virtualbox>22.6. FreeBSD as a Host with VirtualBox™<a class=anchor href=#virtualization-host-virtualbox></a></h2><div class=sectionbody><div class=paragraph><p>VirtualBox™ is an actively developed, complete virtualization package, that is available for most operating systems including Windows®, Mac OS®, Linux® and FreeBSD. It is equally capable of running Windows® or UNIX®-like guests. It is released as open source software, but with closed-source components available in a separate extension pack. These components include support for USB 2.0 devices. More information may be found on the <a href=http://www.virtualbox.org/wiki/Downloads>Downloads page of the VirtualBox™ wiki</a>. Currently, these extensions are not available for FreeBSD.</p></div><div class=sect2><h3 id=virtualization-virtualbox-install>22.6.1. Installing VirtualBox™<a class=anchor href=#virtualization-virtualbox-install></a></h3><div class=paragraph><p>VirtualBox™ is available as a FreeBSD package or port in <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/virtualbox-ose/>emulators/virtualbox-ose</a>. The port can be installed using these commands:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/emulators/virtualbox-ose</span>
<span class=c># make install clean</span></code></pre></div></div><div class=paragraph><p>One useful option in the port’s configuration menu is the <code>GuestAdditions</code> suite of programs. These provide a number of useful features in guest operating systems, like mouse pointer integration (allowing the mouse to be shared between host and guest without the need to press a special keyboard shortcut to switch) and faster video rendering, especially in Windows® guests. The guest additions are available in the <b class=menuref>Devices</b> menu, after the installation of the guest is finished.</p></div><div class=paragraph><p>A few configuration changes are needed before VirtualBox™ is started for the first time. The port installs a kernel module in <span class=filename>/boot/modules</span> which must be loaded into the running kernel:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload vboxdrv</span></code></pre></div></div><div class=paragraph><p>To ensure the module is always loaded after a reboot, add this line to <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>vboxdrv_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>To use the kernel modules that allow bridged or host-only networking, add this line to <span class=filename>/etc/rc.conf</span> and reboot the computer:</p></div><div class="literalblock programlisting"><div class=content><pre>vboxnet_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>The <code>vboxusers</code> group is created during installation of VirtualBox™. All users that need access to VirtualBox™ will have to be added as members of this group. <code>pw</code> can be used to add new members:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw groupmod vboxusers -m yourusername</span></code></pre></div></div><div class=paragraph><p>The default permissions for <span class=filename>/dev/vboxnetctl</span> are restrictive and need to be changed for bridged networking:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chown root:vboxusers /dev/vboxnetctl</span>
<span class=c># chmod 0660 /dev/vboxnetctl</span></code></pre></div></div><div class=paragraph><p>To make this permissions change permanent, add these lines to <span class=filename>/etc/devfs.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>own     vboxnetctl root:vboxusers
perm    vboxnetctl 0660</pre></div></div><div class=paragraph><p>To launch VirtualBox™, type from a Xorg session:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% VirtualBox</code></pre></div></div><div class=paragraph><p>For more information on configuring and using VirtualBox™, refer to the <a href=http://www.virtualbox.org>official website</a>. For FreeBSD-specific information and troubleshooting instructions, refer to the <a href=http://wiki.FreeBSD.org/VirtualBox>relevant page in the FreeBSD wiki</a>.</p></div></div><div class=sect2><h3 id=virtualization-virtualbox-usb-support>22.6.2. VirtualBox™ USB Support<a class=anchor href=#virtualization-virtualbox-usb-support></a></h3><div class=paragraph><p>VirtualBox™ can be configured to pass USB devices through to the guest operating system. The host controller of the OSE version is limited to emulating USB 1.1 devices until the extension pack supporting USB 2.0 and 3.0 devices becomes available on FreeBSD.</p></div><div class=paragraph><p>For VirtualBox™ to be aware of USB devices attached to the machine, the user needs to be a member of the <code>operator</code> group.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw groupmod operator -m yourusername</span></code></pre></div></div><div class=paragraph><p>Then, add the following to <span class=filename>/etc/devfs.rules</span>, or create this file if it does not exist yet:</p></div><div class="literalblock programlisting"><div class=content><pre>[system=10]
add path &#39;usb/*&#39; mode 0660 group operator</pre></div></div><div class=paragraph><p>To load these new rules, add the following to <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>devfs_system_ruleset=&#34;system&#34;</pre></div></div><div class=paragraph><p>Then, restart devfs:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service devfs restart</span></code></pre></div></div><div class=paragraph><p>Restart the login session and VirtualBox™ for these changes to take effect, and create USB filters as necessary.</p></div></div><div class=sect2><h3 id=virtualization-virtualbox-host-dvd-cd-access>22.6.3. VirtualBox™ Host DVD/CD Access<a class=anchor href=#virtualization-virtualbox-host-dvd-cd-access></a></h3><div class=paragraph><p>Access to the host DVD/CD drives from guests is achieved through the sharing of the physical drives. Within VirtualBox™, this is set up from the Storage window in the Settings of the virtual machine. If needed, create an empty IDECD/DVD device first. Then choose the Host Drive from the popup menu for the virtual CD/DVD drive selection. A checkbox labeled <code>Passthrough</code> will appear. This allows the virtual machine to use the hardware directly. For example, audio CDs or the burner will only function if this option is selected.</p></div><div class=paragraph><p>HAL needs to run for VirtualBox™DVD/CD functions to work, so enable it in <span class=filename>/etc/rc.conf</span> and start it if it is not already running:</p></div><div class="literalblock programlisting"><div class=content><pre>hald_enable=&#34;YES&#34;</pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service hald start</span></code></pre></div></div><div class=paragraph><p>In order for users to be able to use VirtualBox™DVD/CD functions, they need access to <span class=filename>/dev/xpt0</span>, <span class=filename>/dev/cdN</span>, and <span class=filename>/dev/passN</span>. This is usually achieved by making the user a member of <code>operator</code>. Permissions to these devices have to be corrected by adding these lines to <span class=filename>/etc/devfs.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>perm cd* 0660
perm xpt0 0660
perm pass* 0660</pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service devfs restart</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=virtualization-host-bhyve>22.7. FreeBSD as a Host with bhyve<a class=anchor href=#virtualization-host-bhyve></a></h2><div class=sectionbody><div class=paragraph><p>The bhyveBSD-licensed hypervisor became part of the base system with FreeBSD 10.0-RELEASE. This hypervisor supports a number of guests, including FreeBSD, OpenBSD, and many Linux® distributions. By default, bhyve provides access to serial console and does not emulate a graphical console. Virtualization offload features of newer CPUs are used to avoid the legacy methods of translating instructions and manually managing memory mappings.</p></div><div class=paragraph><p>The bhyve design requires a processor that supports Intel® Extended Page Tables (EPT) or AMD® Rapid Virtualization Indexing (RVI) or Nested Page Tables (NPT). Hosting Linux® guests or FreeBSD guests with more than one vCPU requires VMX unrestricted mode support (UG). Most newer processors, specifically the Intel® Core™ i3/i5/i7 and Intel® Xeon™ E3/E5/E7, support these features. UG support was introduced with Intel’s Westmere micro-architecture. For a complete list of Intel® processors that support EPT, refer to <a href="https://ark.intel.com/content/www/us/en/ark/search/featurefilter.html?productType=873&amp;0_ExtendedPageTables=True" class=bare>https://ark.intel.com/content/www/us/en/ark/search/featurefilter.html?productType=873&amp;0_ExtendedPageTables=True</a>. RVI is found on the third generation and later of the AMD Opteron™ (Barcelona) processors. The easiest way to tell if a processor supports bhyve is to run <code>dmesg</code> or look in <span class=filename>/var/run/dmesg.boot</span> for the <code>POPCNT</code> processor feature flag on the <code>Features2</code> line for AMD® processors or <code>EPT</code> and <code>UG</code> on the <code>VT-x</code> line for Intel® processors.</p></div><div class=sect2><h3 id=virtualization-bhyve-prep>22.7.1. Preparing the Host<a class=anchor href=#virtualization-bhyve-prep></a></h3><div class=paragraph><p>The first step to creating a virtual machine in bhyve is configuring the host system. First, load the bhyve kernel module:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload vmm</span></code></pre></div></div><div class=paragraph><p>Then, create a <span class=filename>tap</span> interface for the network device in the virtual machine to attach to. In order for the network device to participate in the network, also create a bridge interface containing the <span class=filename>tap</span> interface and the physical interface as members. In this example, the physical interface is <em>igb0</em>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig tap0 create</span>
<span class=c># sysctl net.link.tap.up_on_open=1</span>
net.link.tap.up_on_open: 0 -&gt; 1
<span class=c># ifconfig bridge0 create</span>
<span class=c># ifconfig bridge0 addm igb0 addm tap0</span>
<span class=c># ifconfig bridge0 up</span></code></pre></div></div></div><div class=sect2><h3 id=virtualization-bhyve-freebsd>22.7.2. Creating a FreeBSD Guest<a class=anchor href=#virtualization-bhyve-freebsd></a></h3><div class=paragraph><p>Create a file to use as the virtual disk for the guest machine. Specify the size and name of the virtual disk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># truncate -s 16G guest.img</span></code></pre></div></div><div class=paragraph><p>Download an installation image of FreeBSD to install:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/10.3/FreeBSD-10.3-RELEASE-amd64-bootonly.iso</span>
FreeBSD-10.3-RELEASE-amd64-bootonly.iso       100% of  230 MB  570 kBps 06m17s</code></pre></div></div><div class=paragraph><p>FreeBSD comes with an example script for running a virtual machine in bhyve. The script will start the virtual machine and run it in a loop, so it will automatically restart if it crashes. The script takes a number of options to control the configuration of the machine: <code>-c</code> controls the number of virtual CPUs, <code>-m</code> limits the amount of memory available to the guest, <code>-t</code> defines which <span class=filename>tap</span> device to use, <code>-d</code> indicates which disk image to use, <code>-i</code> tells bhyve to boot from the CD image instead of the disk, and <code>-I</code> defines which CD image to use. The last parameter is the name of the virtual machine, used to track the running machines. This example starts the virtual machine in installation mode:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh /usr/shared/examples/bhyve/vmrun.sh -c 1 -m 1024M -t tap0 -d guest.img -i -I FreeBSD-10.3-RELEASE-amd64-bootonly.iso guestname</span></code></pre></div></div><div class=paragraph><p>The virtual machine will boot and start the installer. After installing a system in the virtual machine, when the system asks about dropping in to a shell at the end of the installation, choose <b class=button>Yes</b>.</p></div><div class=paragraph><p>Reboot the virtual machine. While rebooting the virtual machine causes bhyve to exit, the <span class=filename>vmrun.sh</span> script runs <code>bhyve</code> in a loop and will automatically restart it. When this happens, choose the reboot option from the boot loader menu in order to escape the loop. Now the guest can be started from the virtual disk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh /usr/shared/examples/bhyve/vmrun.sh -c 4 -m 1024M -t tap0 -d guest.img guestname</span></code></pre></div></div></div><div class=sect2><h3 id=virtualization-bhyve-linux>22.7.3. Creating a Linux® Guest<a class=anchor href=#virtualization-bhyve-linux></a></h3><div class=paragraph><p>In order to boot operating systems other than FreeBSD, the <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/grub2-bhyve/>sysutils/grub2-bhyve</a> port must be first installed.</p></div><div class=paragraph><p>Next, create a file to use as the virtual disk for the guest machine:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># truncate -s 16G linux.img</span></code></pre></div></div><div class=paragraph><p>Starting a virtual machine with bhyve is a two step process. First a kernel must be loaded, then the guest can be started. The Linux® kernel is loaded with <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/grub2-bhyve/>sysutils/grub2-bhyve</a>. Create a <span class=filename>device.map</span> that grub will use to map the virtual devices to the files on the host system:</p></div><div class="literalblock programlisting"><div class=content><pre>(hd0) ./linux.img
(cd0) ./somelinux.iso</pre></div></div><div class=paragraph><p>Use <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/grub2-bhyve/>sysutils/grub2-bhyve</a> to load the Linux® kernel from the ISO image:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># grub-bhyve -m device.map -r cd0 -M 1024M linuxguest</span></code></pre></div></div><div class=paragraph><p>This will start grub. If the installation CD contains a <span class=filename>grub.cfg</span>, a menu will be displayed. If not, the <code>vmlinuz</code> and <code>initrd</code> files must be located and loaded manually:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>grub&gt; <span class=nb>ls</span>
<span class=o>(</span>hd0<span class=o>)</span> <span class=o>(</span>cd0<span class=o>)</span> <span class=o>(</span>cd0,msdos1<span class=o>)</span> <span class=o>(</span>host<span class=o>)</span>
grub&gt; <span class=nb>ls</span> <span class=o>(</span>cd0<span class=o>)</span>/isolinux
boot.cat boot.msg grub.conf initrd.img isolinux.bin isolinux.cfg memtest
splash.jpg TRANS.TBL vesamenu.c32 vmlinuz
grub&gt; linux <span class=o>(</span>cd0<span class=o>)</span>/isolinux/vmlinuz
grub&gt; initrd <span class=o>(</span>cd0<span class=o>)</span>/isolinux/initrd.img
grub&gt; boot</code></pre></div></div><div class=paragraph><p>Now that the Linux® kernel is loaded, the guest can be started:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s 3:0,virtio-blk,./linux.img \</span>
    <span class=nt>-s</span> 4:0,ahci-cd,./somelinux.iso <span class=nt>-l</span> com1,stdio <span class=nt>-c</span> 4 <span class=nt>-m</span> 1024M linuxguest</code></pre></div></div><div class=paragraph><p>The system will boot and start the installer. After installing a system in the virtual machine, reboot the virtual machine. This will cause bhyve to exit. The instance of the virtual machine needs to be destroyed before it can be started again:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyvectl --destroy --vm=linuxguest</span></code></pre></div></div><div class=paragraph><p>Now the guest can be started directly from the virtual disk. Load the kernel:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># grub-bhyve -m device.map -r hd0,msdos1 -M 1024M linuxguest</span>
grub&gt; <span class=nb>ls</span>
<span class=o>(</span>hd0<span class=o>)</span> <span class=o>(</span>hd0,msdos2<span class=o>)</span> <span class=o>(</span>hd0,msdos1<span class=o>)</span> <span class=o>(</span>cd0<span class=o>)</span> <span class=o>(</span>cd0,msdos1<span class=o>)</span> <span class=o>(</span>host<span class=o>)</span>
<span class=o>(</span>lvm/VolGroup-lv_swap<span class=o>)</span> <span class=o>(</span>lvm/VolGroup-lv_root<span class=o>)</span>
grub&gt; <span class=nb>ls</span> <span class=o>(</span>hd0,msdos1<span class=o>)</span>/
lost+found/ grub/ efi/ System.map-2.6.32-431.el6.x86_64 config-2.6.32-431.el6.x
86_64 symvers-2.6.32-431.el6.x86_64.gz vmlinuz-2.6.32-431.el6.x86_64
initramfs-2.6.32-431.el6.x86_64.img
grub&gt; linux <span class=o>(</span>hd0,msdos1<span class=o>)</span>/vmlinuz-2.6.32-431.el6.x86_64 <span class=nv>root</span><span class=o>=</span>/dev/mapper/VolGroup-lv_root
grub&gt; initrd <span class=o>(</span>hd0,msdos1<span class=o>)</span>/initramfs-2.6.32-431.el6.x86_64.img
grub&gt; boot</code></pre></div></div><div class=paragraph><p>Boot the virtual machine:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 \</span>
    <span class=nt>-s</span> 3:0,virtio-blk,./linux.img <span class=nt>-l</span> com1,stdio <span class=nt>-c</span> 4 <span class=nt>-m</span> 1024M linuxguest</code></pre></div></div><div class=paragraph><p>Linux® will now boot in the virtual machine and eventually present you with the login prompt. Login and use the virtual machine. When you are finished, reboot the virtual machine to exit bhyve. Destroy the virtual machine instance:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyvectl --destroy --vm=linuxguest</span></code></pre></div></div></div><div class=sect2><h3 id=virtualization-bhyve-uefi>22.7.4. Booting bhyve Virtual Machines with UEFI Firmware<a class=anchor href=#virtualization-bhyve-uefi></a></h3><div class=paragraph><p>In addition to bhyveload and grub-bhyve, the bhyve hypervisor can also boot virtual machines using the UEFI userspace firmware. This option may support guest operating systems that are not supported by the other loaders.</p></div><div class=paragraph><p>In order to make use of the UEFI support in bhyve, first obtain the UEFI firmware images. This can be done by installing <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/bhyve-firmware/>sysutils/bhyve-firmware</a> port or package.</p></div><div class=paragraph><p>With the firmware in place, add the flags <code>-l bootrom,<em>/path/to/firmware</em></code> to your bhyve command line. The actual bhyve command may look like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyve -AHP -s 0:0,hostbridge -s 1:0,lpc \</span>
<span class=nt>-s</span> 2:0,virtio-net,tap1 <span class=nt>-s</span> 3:0,virtio-blk,./disk.img <span class=se>\</span>
<span class=nt>-s</span> 4:0,ahci-cd,./install.iso <span class=nt>-c</span> 4 <span class=nt>-m</span> 1024M <span class=se>\</span>
<span class=nt>-l</span> bootrom,/usr/local/shared/uefi-firmware/BHYVE_UEFI.fd <span class=se>\</span>
guest</code></pre></div></div><div class=paragraph><p><a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/bhyve-firmware/>sysutils/bhyve-firmware</a> also contains a CSM-enabled firmware, to boot guests with no UEFI support in legacy BIOS mode:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyve -AHP -s 0:0,hostbridge -s 1:0,lpc \</span>
<span class=nt>-s</span> 2:0,virtio-net,tap1 <span class=nt>-s</span> 3:0,virtio-blk,./disk.img <span class=se>\</span>
<span class=nt>-s</span> 4:0,ahci-cd,./install.iso <span class=nt>-c</span> 4 <span class=nt>-m</span> 1024M <span class=se>\</span>
<span class=nt>-l</span> bootrom,/usr/local/shared/uefi-firmware/BHYVE_UEFI_CSM.fd <span class=se>\</span>
guest</code></pre></div></div></div><div class=sect2><h3 id=virtualization-bhyve-framebuffer>22.7.5. Graphical UEFI Framebuffer for bhyve Guests<a class=anchor href=#virtualization-bhyve-framebuffer></a></h3><div class=paragraph><p>The UEFI firmware support is particularly useful with predominantly graphical guest operating systems such as Microsoft Windows®.</p></div><div class=paragraph><p>Support for the UEFI-GOP framebuffer may also be enabled with the <code>-s 29,fbuf,tcp=<em>0.0.0.0:5900</em></code> flags. The framebuffer resolution may be configured with <code>w=<em>800</em></code> and <code>h=<em>600</em></code>, and bhyve can be instructed to wait for a VNC connection before booting the guest by adding <code>wait</code>. The framebuffer may be accessed from the host or over the network via the VNC protocol. Additionally, <code>-s 30,xhci,tablet</code> can be added to achieve precise mouse cursor synchronization with the host.</p></div><div class=paragraph><p>The resulting bhyve command would look like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyve -AHP -s 0:0,hostbridge -s 31:0,lpc \</span>
<span class=nt>-s</span> 2:0,virtio-net,tap1 <span class=nt>-s</span> 3:0,virtio-blk,./disk.img <span class=se>\</span>
<span class=nt>-s</span> 4:0,ahci-cd,./install.iso <span class=nt>-c</span> 4 <span class=nt>-m</span> 1024M <span class=se>\</span>
<span class=nt>-s</span> 29,fbuf,tcp<span class=o>=</span>0.0.0.0:5900,w<span class=o>=</span>800,h<span class=o>=</span>600,wait <span class=se>\</span>
<span class=nt>-s</span> 30,xhci,tablet <span class=se>\</span>
<span class=nt>-l</span> bootrom,/usr/local/shared/uefi-firmware/BHYVE_UEFI.fd <span class=se>\</span>
guest</code></pre></div></div><div class=paragraph><p>Note, in BIOS emulation mode, the framebuffer will cease receiving updates once control is passed from firmware to guest operating system.</p></div></div><div class=sect2><h3 id=virtualization-bhyve-zfs>22.7.6. Using ZFS with bhyve Guests<a class=anchor href=#virtualization-bhyve-zfs></a></h3><div class=paragraph><p>If ZFS is available on the host machine, using ZFS volumes instead of disk image files can provide significant performance benefits for the guest VMs. A ZFS volume can be created by:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># zfs create -V16G -o volmode=dev zroot/linuxdisk0</span></code></pre></div></div><div class=paragraph><p>When starting the VM, specify the ZFS volume as the disk drive:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s3:0,virtio-blk,/dev/zvol/zroot/linuxdisk0 \</span>
    <span class=nt>-l</span> com1,stdio <span class=nt>-c</span> 4 <span class=nt>-m</span> 1024M linuxguest</code></pre></div></div></div><div class=sect2><h3 id=virtualization-bhyve-nmdm>22.7.7. Virtual Machine Consoles<a class=anchor href=#virtualization-bhyve-nmdm></a></h3><div class=paragraph><p>It is advantageous to wrap the bhyve console in a session management tool such as <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/tmux/>sysutils/tmux</a> or <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/screen/>sysutils/screen</a> in order to detach and reattach to the console. It is also possible to have the console of bhyve be a null modem device that can be accessed with <code>cu</code>. To do this, load the <span class=filename>nmdm</span> kernel module and replace <code>-l com1,stdio</code> with <code>-l com1,/dev/nmdm0A</code>. The <span class=filename>/dev/nmdm</span> devices are created automatically as needed, where each is a pair, corresponding to the two ends of the null modem cable (<span class=filename>/dev/nmdm0A</span> and <span class=filename>/dev/nmdm0B</span>). See <a href="https://man.freebsd.org/cgi/man.cgi?query=nmdm&amp;sektion=4&amp;format=html">nmdm(4)</a> for more information.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload nmdm</span>
<span class=c># bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s 3:0,virtio-blk,./linux.img \</span>
    <span class=nt>-l</span> com1,/dev/nmdm0A <span class=nt>-c</span> 4 <span class=nt>-m</span> 1024M linuxguest
<span class=c># cu -l /dev/nmdm0B</span>
Connected

Ubuntu 13.10 handbook ttyS0

handbook login:</code></pre></div></div></div><div class=sect2><h3 id=virtualization-bhyve-managing>22.7.8. Managing Virtual Machines<a class=anchor href=#virtualization-bhyve-managing></a></h3><div class=paragraph><p>A device node is created in <span class=filename>/dev/vmm</span> for each virtual machine. This allows the administrator to easily see a list of the running virtual machines:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ls -al /dev/vmm</span>
total 1
dr-xr-xr-x   2 root  wheel    512 Mar 17 12:19 ./
dr-xr-xr-x  14 root  wheel    512 Mar 17 06:38 ../
crw-------   1 root  wheel  0x1a2 Mar 17 12:20 guestname
crw-------   1 root  wheel  0x19f Mar 17 12:19 linuxguest
crw-------   1 root  wheel  0x1a1 Mar 17 12:19 otherguest</code></pre></div></div><div class=paragraph><p>A specified virtual machine can be destroyed using <code>bhyvectl</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># bhyvectl --destroy --vm=guestname</span></code></pre></div></div></div><div class=sect2><h3 id=virtualization-bhyve-onboot>22.7.9. Persistent Configuration<a class=anchor href=#virtualization-bhyve-onboot></a></h3><div class=paragraph><p>In order to configure the system to start bhyve guests at boot time, the following configurations must be made in the specified files:</p></div><div class="olist arabic procedure"><ol class=arabic><li><p><span class=filename>/etc/sysctl.conf</span></p><div class="literalblock programlisting"><div class=content><pre>net.link.tap.up_on_open=1</pre></div></div></li><li><p><span class=filename>/etc/rc.conf</span></p><div class="literalblock programlisting"><div class=content><pre>cloned_interfaces=&#34;bridge0 tap0&#34;
ifconfig_bridge0=&#34;addm igb0 addm tap0&#34;
kld_list=&#34;nmdm vmm&#34;</pre></div></div></li></ol></div></div></div></div><div class=sect1><h2 id=virtualization-host-xen>22.8. FreeBSD as a Xen™-Host<a class=anchor href=#virtualization-host-xen></a></h2><div class=sectionbody><div class=paragraph><p>Xen is a GPLv2-licensed <a href=https://en.wikipedia.org/wiki/Hypervisor#Classification>type 1 hypervisor</a> for Intel® and ARM® architectures. FreeBSD has included i386™ and AMD® 64-Bit <a href=https://wiki.xenproject.org/wiki/DomU>DomU</a> and <a href=https://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud>Amazon EC2</a> unprivileged domain (virtual machine) support since FreeBSD 8.0 and includes Dom0 control domain (host) support in FreeBSD 11.0. Support for para-virtualized (PV) domains has been removed from FreeBSD 11 in favor of hardware virtualized (HVM) domains, which provides better performance.</p></div><div class=paragraph><p>Xen™ is a bare-metal hypervisor, which means that it is the first program loaded after the BIOS. A special privileged guest called the Domain-0 (<code>Dom0</code> for short) is then started. The Dom0 uses its special privileges to directly access the underlying physical hardware, making it a high-performance solution. It is able to access the disk controllers and network adapters directly. The Xen™ management tools to manage and control the Xen™ hypervisor are also used by the Dom0 to create, list, and destroy VMs. Dom0 provides virtual disks and networking for unprivileged domains, often called <code>DomU</code>. Xen™ Dom0 can be compared to the service console of other hypervisor solutions, while the DomU is where individual guest VMs are run.</p></div><div class=paragraph><p>Xen™ can migrate VMs between different Xen™ servers. When the two xen hosts share the same underlying storage, the migration can be done without having to shut the VM down first. Instead, the migration is performed live while the DomU is running and there is no need to restart it or plan a downtime. This is useful in maintenance scenarios or upgrade windows to ensure that the services provided by the DomU are still provided. Many more features of Xen™ are listed on the <a href=https://wiki.xenproject.org/wiki/Category:Overview>Xen Wiki Overview page</a>. Note that not all features are supported on FreeBSD yet.</p></div><div class=sect2><h3 id=virtualization-host-xen-requirements>22.8.1. Hardware Requirements for Xen™ Dom0<a class=anchor href=#virtualization-host-xen-requirements></a></h3><div class=paragraph><p>To run the Xen™ hypervisor on a host, certain hardware functionality is required. Hardware virtualized domains require Extended Page Table (<a href=http://en.wikipedia.org/wiki/Extended_Page_Table>EPT</a>) and Input/Output Memory Management Unit (<a href=http://en.wikipedia.org/wiki/List_of_IOMMU-supporting_hardware>IOMMU</a>) support in the host processor.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In order to run a FreeBSD Xen™ Dom0 the box must be booted using legacy boot (BIOS).</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=virtualization-host-xen-dom0-setup>22.8.2. Xen™ Dom0 Control Domain Setup<a class=anchor href=#virtualization-host-xen-dom0-setup></a></h3><div class=paragraph><p>Users of FreeBSD 11 should install the <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/xen-kernel47/>emulators/xen-kernel47</a> and <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/xen-tools47/>sysutils/xen-tools47</a> packages that are based on Xen version 4.7. Systems running on FreeBSD-12.0 or newer can use Xen 4.11 provided by <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/xen-kernel411/>emulators/xen-kernel411</a> and <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/xen-tools411/>sysutils/xen-tools411</a>, respectively.</p></div><div class=paragraph><p>Configuration files must be edited to prepare the host for the Dom0 integration after the Xen packages are installed. An entry to <span class=filename>/etc/sysctl.conf</span> disables the limit on how many pages of memory are allowed to be wired. Otherwise, DomU VMs with higher memory requirements will not run.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#39;vm.max_wired=-1&#39; &gt;&gt; /etc/sysctl.conf</span></code></pre></div></div><div class=paragraph><p>Another memory-related setting involves changing <span class=filename>/etc/login.conf</span>, setting the <code>memorylocked</code> option to <code>unlimited</code>. Otherwise, creating DomU domains may fail with <code>Cannot allocate memory</code> errors. After making the change to <span class=filename>/etc/login.conf</span>, run <code>cap_mkdb</code> to update the capability database. See <a href=../security/#security-resourcelimits>Resource Limits</a> for details.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sed -i &#39;&#39; -e &#39;s/memorylocked=64K/memorylocked=unlimited/&#39; /etc/login.conf</span>
<span class=c># cap_mkdb /etc/login.conf</span></code></pre></div></div><div class=paragraph><p>Add an entry for the Xen™ console to <span class=filename>/etc/ttys</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#39;xc0     &#34;/usr/libexec/getty Pc&#34;         xterm   onifconsole  secure&#39; &gt;&gt; /etc/ttys</span></code></pre></div></div><div class=paragraph><p>Selecting a Xen™ kernel in <span class=filename>/boot/loader.conf</span> activates the Dom0. Xen™ also requires resources like CPU and memory from the host machine for itself and other DomU domains. How much CPU and memory depends on the individual requirements and hardware capabilities. In this example, 8 GB of memory and 4 virtual CPUs are made available for the Dom0. The serial console is also activated and logging options are defined.</p></div><div class=paragraph><p>The following command is used for Xen 4.7 packages:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysrc -f /boot/loader.conf hw.pci.mcfg=0</span>
<span class=c># sysrc -f /boot/loader.conf if_tap_load=&#34;YES&#34;</span>
<span class=c># sysrc -f /boot/loader.conf xen_kernel=&#34;/boot/xen&#34;</span>
<span class=c># sysrc -f /boot/loader.conf xen_cmdline=&#34;dom0_mem=8192M dom0_max_vcpus=4 dom0pvh=1 console=com1,vga com1=115200,8n1 guest_loglvl=all loglvl=all&#34;</span></code></pre></div></div><div class=paragraph><p>For Xen versions 4.11 and higher, the following command should be used instead:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysrc -f /boot/loader.conf if_tap_load=&#34;YES&#34;</span>
<span class=c># sysrc -f /boot/loader.conf xen_kernel=&#34;/boot/xen&#34;</span>
<span class=c># sysrc -f /boot/loader.conf xen_cmdline=&#34;dom0_mem=8192M dom0_max_vcpus=4 dom0=pvh console=com1,vga com1=115200,8n1 guest_loglvl=all loglvl=all&#34;</span></code></pre></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Log files that Xen™ creates for the DomU VMs are stored in <span class=filename>/var/log/xen</span>. Please be sure to check the contents of that directory if experiencing issues.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Activate the xencommons service during system startup:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysrc xencommons_enable=yes</span></code></pre></div></div><div class=paragraph><p>These settings are enough to start a Dom0-enabled system. However, it lacks network functionality for the DomU machines. To fix that, define a bridged interface with the main NIC of the system which the DomU VMs can use to connect to the network. Replace <em>em0</em> with the host network interface name.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysrc cloned_interfaces=&#34;bridge0&#34;</span>
<span class=c># sysrc ifconfig_bridge0=&#34;addm em0 SYNCDHCP&#34;</span>
<span class=c># sysrc ifconfig_em0=&#34;up&#34;</span></code></pre></div></div><div class=paragraph><p>Restart the host to load the Xen™ kernel and start the Dom0.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># reboot</span></code></pre></div></div><div class=paragraph><p>After successfully booting the Xen™ kernel and logging into the system again, the Xen™ management tool <code>xl</code> is used to show information about the domains.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># xl list</span>
Name                                        ID   Mem VCPUs      State   Time<span class=o>(</span>s<span class=o>)</span>
Domain-0                                     0  8192     4     r-----     962.0</code></pre></div></div><div class=paragraph><p>The output confirms that the Dom0 (called <code>Domain-0</code>) has the ID <code>0</code> and is running. It also has the memory and virtual CPUs that were defined in <span class=filename>/boot/loader.conf</span> earlier. More information can be found in the <a href=https://www.xenproject.org/help/documentation.html>Xen™ Documentation</a>. DomU guest VMs can now be created.</p></div></div><div class=sect2><h3 id=virtualization-host-xen-domu-setup>22.8.3. Xen™ DomU Guest VM Configuration<a class=anchor href=#virtualization-host-xen-domu-setup></a></h3><div class=paragraph><p>Unprivileged domains consist of a configuration file and virtual or physical hard disks. Virtual disk storage for the DomU can be files created by <a href="https://man.freebsd.org/cgi/man.cgi?query=truncate&amp;sektion=1&amp;format=html">truncate(1)</a> or ZFS volumes as described in <a href=../zfs/#zfs-zfs-volume>“Creating and Destroying Volumes”</a>. In this example, a 20 GB volume is used. A VM is created with the ZFS volume, a FreeBSD ISO image, 1 GB of RAM and two virtual CPUs. The ISO installation file is retrieved with <a href="https://man.freebsd.org/cgi/man.cgi?query=fetch&amp;sektion=1&amp;format=html">fetch(1)</a> and saved locally in a file called <span class=filename>freebsd.iso</span>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/12.0/FreeBSD-12.0-RELEASE-amd64-bootonly.iso -o freebsd.iso</span></code></pre></div></div><div class=paragraph><p>A ZFS volume of 20 GB called <span class=filename>xendisk0</span> is created to serve as the disk space for the VM.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># zfs create -V20G -o volmode=dev zroot/xendisk0</span></code></pre></div></div><div class=paragraph><p>The new DomU guest VM is defined in a file. Some specific definitions like name, keymap, and VNC connection details are also defined. The following <span class=filename>freebsd.cfg</span> contains a minimum DomU configuration for this example:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat freebsd.cfg</span>
builder <span class=o>=</span> <span class=s2>&#34;hvm&#34;</span> <i class=conum data-value=1></i><b>(1)</b>
name <span class=o>=</span> <span class=s2>&#34;freebsd&#34;</span> <i class=conum data-value=2></i><b>(2)</b>
memory <span class=o>=</span> 1024 <i class=conum data-value=3></i><b>(3)</b>
vcpus <span class=o>=</span> 2 <i class=conum data-value=4></i><b>(4)</b>
vif <span class=o>=</span> <span class=o>[</span> <span class=s1>&#39;mac=00:16:3E:74:34:32,bridge=bridge0&#39;</span> <span class=o>]</span> <i class=conum data-value=5></i><b>(5)</b>
disk <span class=o>=</span> <span class=o>[</span>
<span class=s1>&#39;/dev/zvol/tank/xendisk0,raw,hda,rw&#39;</span>, <i class=conum data-value=6></i><b>(6)</b>
<span class=s1>&#39;/root/freebsd.iso,raw,hdc:cdrom,r&#39;</span> <i class=conum data-value=7></i><b>(7)</b>
  <span class=o>]</span>
vnc <span class=o>=</span> 1 <i class=conum data-value=8></i><b>(8)</b>
vnclisten <span class=o>=</span> <span class=s2>&#34;0.0.0.0&#34;</span>
serial <span class=o>=</span> <span class=s2>&#34;pty&#34;</span>
usbdevice <span class=o>=</span> <span class=s2>&#34;tablet&#34;</span></code></pre></div></div><div class=paragraph><p>These lines are explained in more detail:</p></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>This defines what kind of virtualization to use. <code>hvm</code> refers to hardware-assisted virtualization or hardware virtual machine. Guest operating systems can run unmodified on CPUs with virtualization extensions, providing nearly the same performance as running on physical hardware. <code>generic</code> is the default value and creates a PV domain.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Name of this virtual machine to distinguish it from others running on the same Dom0. Required.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Quantity of RAM in megabytes to make available to the VM. This amount is subtracted from the hypervisor’s total available memory, not the memory of the Dom0.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Number of virtual CPUs available to the guest VM. For best performance, do not create guests with more virtual CPUs than the number of physical CPUs on the host.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Virtual network adapter. This is the bridge connected to the network interface of the host. The <code>mac</code> parameter is the MAC address set on the virtual network interface. This parameter is optional, if no MAC is provided Xen™ will generate a random one.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Full path to the disk, file, or ZFS volume of the disk storage for this VM. Options and multiple disk definitions are separated by commas.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Defines the Boot medium from which the initial operating system is installed. In this example, it is the ISO imaged downloaded earlier. Consult the Xen™ documentation for other kinds of devices and options to set.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>Options controlling VNC connectivity to the serial console of the DomU. In order, these are: active VNC support, define IP address on which to listen, device node for the serial console, and the input method for precise positioning of the mouse and other input methods. <code>keymap</code> defines which keymap to use, and is <code>english</code> by default.</td></tr></tbody></table></div><div class=paragraph><p>After the file has been created with all the necessary options, the DomU is created by passing it to <code>xl create</code> as a parameter.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># xl create freebsd.cfg</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Each time the Dom0 is restarted, the configuration file must be passed to <code>xl create</code> again to re-create the DomU. By default, only the Dom0 is created after a reboot, not the individual VMs. The VMs can continue where they left off as they stored the operating system on the virtual disk. The virtual machine configuration can change over time (for example, when adding more memory). The virtual machine configuration files must be properly backed up and kept available to be able to re-create the guest VM when needed.</p></div></td></tr></tbody></table></div><div class=paragraph><p>The output of <code>xl list</code> confirms that the DomU has been created.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># xl list</span>
Name                                        ID   Mem VCPUs      State   Time<span class=o>(</span>s<span class=o>)</span>
Domain-0                                     0  8192     4     r-----  1653.4
freebsd                                      1  1024     1     <span class=nt>-b----</span>   663.9</code></pre></div></div><div class=paragraph><p>To begin the installation of the base operating system, start the VNC client, directing it to the main network address of the host or to the IP address defined on the <code>vnclisten</code> line of <span class=filename>freebsd.cfg</span>. After the operating system has been installed, shut down the DomU and disconnect the VNC viewer. Edit <span class=filename>freebsd.cfg</span>, removing the line with the <code>cdrom</code> definition or commenting it out by inserting a <code>#</code> character at the beginning of the line. To load this new configuration, it is necessary to remove the old DomU with <code>xl destroy</code>, passing either the name or the id as the parameter. Afterwards, recreate it using the modified <strong class=filename>freebsd.cfg</strong>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># xl destroy freebsd</span>
<span class=c># xl create freebsd.cfg</span></code></pre></div></div><div class=paragraph><p>The machine can then be accessed again using the VNC viewer. This time, it will boot from the virtual disk where the operating system has been installed and can be used as a virtual machine.</p></div></div><div class=sect2><h3 id=virtualization-host-xen-troubleshooting>22.8.4. Troubleshooting<a class=anchor href=#virtualization-host-xen-troubleshooting></a></h3><div class=paragraph><p>This section contains basic information in order to help troubleshoot issues found when using FreeBSD as a Xen™ host or guest.</p></div><div class=sect3><h4 id=virtualization-host-xen-troubleshooting-host>22.8.4.1. Host Boot Troubleshooting<a class=anchor href=#virtualization-host-xen-troubleshooting-host></a></h4><div class=paragraph><p>Please note that the following troubleshooting tips are intended for Xen™ 4.11 or newer. If you are still using Xen™ 4.7 and having issues consider migrating to a newer version of Xen™.</p></div><div class=paragraph><p>In order to troubleshoot host boot issues you will likely need a serial cable, or a debug USB cable. Verbose Xen™ boot output can be obtained by adding options to the <code>xen_cmdline</code> option found in <span class=filename>loader.conf</span>. A couple of relevant debug options are:</p></div><div class=ulist><ul><li><p><code>iommu=debug</code>: can be used to print additional diagnostic information about the iommu.</p></li><li><p><code>dom0=verbose</code>: can be used to print additional diagnostic information about the dom0 build process.</p></li><li><p><code>sync_console</code>: flag to force synchronous console output. Useful for debugging to avoid losing messages due to rate limiting. Never use this option in production environments since it can allow malicious guests to perform DoS attacks against Xen™ using the console.</p></li></ul></div><div class=paragraph><p>FreeBSD should also be booted in verbose mode in order to identify any issues. To activate verbose booting, run this command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysrc -f /boot/loader.conf boot_verbose=&#34;YES&#34;</span></code></pre></div></div><div class=paragraph><p>If none of these options help solving the problem, please send the serial boot log to <a href=mailto:freebsd-xen@FreeBSD.org>freebsd-xen@FreeBSD.org</a> and <a href=mailto:xen-devel@lists.xenproject.org>xen-devel@lists.xenproject.org</a> for further analysis.</p></div></div><div class=sect3><h4 id=virtualization-host-xen-troubleshooting-guest>22.8.4.2. Guest Creation Troubleshooting<a class=anchor href=#virtualization-host-xen-troubleshooting-guest></a></h4><div class=paragraph><p>Issues can also arise when creating guests, the following attempts to provide some help for those trying to diagnose guest creation issues.</p></div><div class=paragraph><p>The most common cause of guest creation failures is the <code>xl</code> command spitting some error and exiting with a return code different than 0. If the error provided is not enough to help identify the issue, more verbose output can also be obtained from <code>xl</code> by using the <code>v</code> option repeatedly.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># xl -vvv create freebsd.cfg</span>
Parsing config from freebsd.cfg
libxl: debug: libxl_create.c:1693:do_domain_create: Domain 0:ao 0x800d750a0: create: <span class=nv>how</span><span class=o>=</span>0x0 <span class=nv>callback</span><span class=o>=</span>0x0 <span class=nv>poller</span><span class=o>=</span>0x800d6f0f0
libxl: debug: libxl_device.c:397:libxl__device_disk_set_backend: Disk <span class=nv>vdev</span><span class=o>=</span>xvda spec.backend<span class=o>=</span>unknown
libxl: debug: libxl_device.c:432:libxl__device_disk_set_backend: Disk <span class=nv>vdev</span><span class=o>=</span>xvda, using backend phy
libxl: debug: libxl_create.c:1018:initiate_domain_create: Domain 1:running bootloader
libxl: debug: libxl_bootloader.c:328:libxl__bootloader_run: Domain 1:not a PV/PVH domain, skipping bootloader
libxl: debug: libxl_event.c:689:libxl__ev_xswatch_deregister: watch <span class=nv>w</span><span class=o>=</span>0x800d96b98: deregister unregistered
domainbuilder: detail: xc_dom_allocate: <span class=nv>cmdline</span><span class=o>=</span><span class=s2>&#34;&#34;</span>, <span class=nv>features</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
domainbuilder: detail: xc_dom_kernel_file: <span class=nv>filename</span><span class=o>=</span><span class=s2>&#34;/usr/local/lib/xen/boot/hvmloader&#34;</span>
domainbuilder: detail: xc_dom_malloc_filemap    : 326 kB
libxl: debug: libxl_dom.c:988:libxl__load_hvm_firmware_module: Loading BIOS: /usr/local/shared/seabios/bios.bin
...</code></pre></div></div><div class=paragraph><p>If the verbose output does not help diagnose the issue there are also QEMU and Xen™ toolstack logs in <span class=filename>/var/log/xen</span>. Note that the name of the domain is appended to the log name, so if the domain is named <code>freebsd</code> you should find a <span class=filename>/var/log/xen/xl-freebsd.log</span> and likely a <span class=filename>/var/log/xen/qemu-dm-freebsd.log</span>. Both log files can contain useful information for debugging. If none of this helps solve the issue, please send the description of the issue you are facing and as much information as possible to <a href=mailto:freebsd-xen@FreeBSD.org>freebsd-xen@FreeBSD.org</a> and <a href=mailto:xen-devel@lists.xenproject.org>xen-devel@lists.xenproject.org</a> in order to get help.</p></div></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 marca 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/pl/books/handbook/filesystems class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/pl/books/handbook/l10n class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#virtualization-synopsis>22.1. Synopsis</a></li><li><a href=#virtualization-guest-parallels>22.2. FreeBSD as a Guest on Parallels for Mac OS® X</a></li><li><a href=#virtualization-guest-virtualpc>22.3. FreeBSD as a Guest on Virtual PC for Windows®</a></li><li><a href=#virtualization-guest-vmware>22.4. FreeBSD as a Guest on VMware Fusion for Mac OS®</a></li><li><a href=#virtualization-guest-virtualbox>22.5. FreeBSD as a Guest on VirtualBox™</a></li><li><a href=#virtualization-host-virtualbox>22.6. FreeBSD as a Host with VirtualBox™</a></li><li><a href=#virtualization-host-bhyve>22.7. FreeBSD as a Host with bhyve</a></li><li><a href=#virtualization-host-xen>22.8. FreeBSD as a Xen™-Host</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/pl/books/handbook/handbook_pl.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/pl/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/pl/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>Polish</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/pl class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/pl/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>