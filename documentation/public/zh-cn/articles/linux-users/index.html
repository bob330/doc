<!doctype html><html class=theme-light lang=zh-cn><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/zh-cn/articles/linux-users/><title>Linux® 用户的 FreeBSD 快速入门向导 | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Linux® 用户的 FreeBSD 快速入门向导"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="zh-cn"><meta property="og:url" content="http://172.16.201.134:1313/zh-cn/articles/linux-users/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/zh-cn\/articles\/linux-users\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/zh-cn>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/zh-cn/books>Books</a></li><li><a href=http://172.16.201.134:1313/zh-cn/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/zh-cn/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=zh-cn>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Linux® 用户的 FreeBSD 快速入门向导</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=copyright>Copyright © 2008 The FreeBSD Documentation Project</div><div class=legalnotice><a id=trademarks></a><details><summary>trademarks</summary><p>FreeBSD 是 FreeBSD 基金会的注册商标</p><p>Red Hat, RPM, 是 Red Hat, Inc. 在美国和其他国家的注册商标。</p><p>Intel, Celeron, Centrino, Core, EtherExpress, i386, i486, Itanium, Pentium, 和 Xeon 是 Intel Corporation 及其分支机构在美国和其他国家的商标或注册商标。</p><p>Linux 是 Linus Torvalds 的注册商标。</p><p>UNIX是 Open Group 在美国和其它国家的注册商标。</p><p>许多制造商和经销商使用一些称为商标的图案或文字设计来彰显自己的产品。 本文档中出现的， 为 FreeBSD Project 所知晓的商标，后面将以 “™” 或 “®” 符号来标注。</p></details></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#intro>1. 简介</a></li><li><a href=#shells>2. Shell程序：没有Bash吗？</a></li><li><a href=#software>3. Packages和Ports：在 FreeBSD 中添加软件</a></li><li><a href=#startup>4. 系统启动：运行级别在哪里？</a></li><li><a href=#network>5. 网络配置</a></li><li><a href=#firewall>6. 防火墙</a></li><li><a href=#updates>7. 升级 FreeBSD</a></li><li><a href=#procfs>8. procfs：已是过去式但仍未被遗忘</a></li><li><a href=#commands>9. 常用命令</a></li><li><a href=#conclusion>10. 总结</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>摘要</p></div><div class=paragraph><p>本文档旨在快速使那些高级 Linux® 用户熟悉FreeBSD的一些基础知识。</p></div><hr></div></div><div class=sect1><h2 id=intro>1. 简介<a class=anchor href=#intro></a></h2><div class=sectionbody><div class=paragraph><p>本文档将突出介绍 FreeBSD 与 Linux® 的差别， 以使得那些 Linux® 高级用户能自己快速熟悉 FreeBSD 的基础内容。这只是份技术上的快速入门， 并非是试图描绘这两种操作系统之间的"哲学"上的差异。</p></div><div class=paragraph><p>此文档假定认为你已经安装好了 FreeBSD。 如果你还没有安装 FreeBSD 或者对 FreeBSD 的安装过程方面需要帮助，请参考 FreeBSD 手册的 <a href=https://docs.freebsd.org/zh-cn/books/handbook/install#install>安装 FreeBSD</a> 一章。</p></div></div></div><div class=sect1><h2 id=shells>2. Shell程序：没有Bash吗？<a class=anchor href=#shells></a></h2><div class=sectionbody><div class=paragraph><p>那些从 Linux® 转过来的用户经常会惊讶于 Bash 不是 FreeBSD 的默认 Shell。 事实上，Bash 甚至没有包括在 FreeBSD 的默认安装中。代替的是，FreeBSD 使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a> 作为自己的默认 Shell，尽管如此，Bash 和其他你喜爱的 Shell 程序在 FreeBSD 的 <a href=./#SOFTWARE>Packages 和 Ports 套件</a> 里都可以找到。</p></div><div class=paragraph><p>如果你安装了其他的 Shell 你可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=chsh&amp;sektion=1&amp;format=html">chsh(1)</a> 来设置一个用户的默认 Shell。 通常情况下， 强烈建议不要去更改 <code>root</code> 用户的默认 Shell。原因是这些 Shell 没有包括在基本系统中，正常情况下它们会被安装到 <span class=filename>/usr/local/bin</span> 和 <span class=filename>/usr/bin</span> 目录下。万一某天 <span class=filename>/usr/local/bin</span> 和 <span class=filename>/usr/bin</span> 的文件系统不能被挂载， 这样情况下 <code>root</code> 将不能进入自己默认的 Shell，从而 <code>root</code> 将不能够登录进去。 鉴于这个原因，第二个系统管理员帐户 <code>toor</code> 创建时使用的是非默认的 Shell。在安全 FAQ 可以查阅到关于 <a href=https://docs.freebsd.org/en/books/faq/#TOOR-ACCOUNT>toor 帐户</a> 的信息。</p></div></div></div><div class=sect1><h2 id=software>3. Packages和Ports：在 FreeBSD 中添加软件<a class=anchor href=#software></a></h2><div class=sectionbody><div class=paragraph><p>除了经典的 UNIX® 安装软件的方法 （下载源码包，解压，编辑源码，编译）外，FreeBSD 还提供了另外两种方法来安装应用程序：packages 和 ports。 你可以在 <a href=http://www.freebsd.org/ports/>这里</a> 到一份完整可用的 ports 和 packages 的软件清单。</p></div><div class=sect2><h3 id=packages>3.1. Packages<a class=anchor href=#packages></a></h3><div class=paragraph><p>Packages 是预编译好的应用程序，在 FreeBSD 中等价于基于 Debian/Ubuntu 的系统中的 <span class=filename>.deb</span> 软件包以及基于 Red Hat/Fedora 的系统中的 <span class=filename>.rpm</span> 软件包。 Packages使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> 来进行安装。 例如，下面的命令将用来安装 Apache 2.2：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg_add /tmp/apache-2.2.6_2.tbz</span></code></pre></div></div><div class=paragraph><p>使用 <code>-r</code> 操作将告诉 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> 来自动获取并安装一个软件包，以及解决所有的依赖关系：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg_add -r apache22</span>
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/Latest/apache22.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/expat-2.0.0_1.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/perl-5.8.8_1.tbz... Done.
<span class=o>[</span>snip]

To run apache www server from startup, add <span class=nv>apache22_enable</span><span class=o>=</span><span class=s2>&#34;YES&#34;</span>
<span class=k>in </span>your /etc/rc.conf. Extra options can be found <span class=k>in </span>startup script.</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>如果你正运行着 release 版本的 FreeBSD （6.2，6.3，7.0等， 通常从 CD-ROM 被安装的）<code>pkg_add -r</code> 会为其下载专门为这些特定版本构建好的软件包。 这些软件包 <em>可能</em> 不是当前最新的程序。 你可以使用 <code>PACKAGESITE</code> 变量来覆盖默认的动作。 例如，把 <code>PACHAGESITE</code> 设置成 <a href=ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6-stable/Latest/>ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6-stable/Latest/</a> 来下载 6.X 系列最新的包。</p></div></td></tr></tbody></table></div><div class=paragraph><p>想了解更多的 packages 信息请查阅 FreeBSD 手册的 4.4 小节：<a href=https://docs.freebsd.org/zh-cn/books/handbook/ports#packages-using>使用 Packages 系统</a>。</p></div></div><div class=sect2><h3 id=ports>3.2. Ports<a class=anchor href=#ports></a></h3><div class=paragraph><p>FreeBSD 的第二种安装应用程序的方法就是使用 Ports 套件了。 Ports 套件是 FreeBSD 上的一个利用 <span class=filename>Makefile</span> 和一些补丁文件来特定从源码定制安装各种软件程序的框架。 当安装一个 port 时系统会获取程序源码， 应用任何所需要的补丁，编译源码， 并安装应用程序（并针对依赖关系以同样的方式安装解决）。</p></div><div class=paragraph><p>Ports 套件，常被称作 ports 树，可以在 <span class=filename>/usr/ports</span> 下找到。 假设Ports套件已经在安装 FreeBSD 时安装过了。 如果 Ports 套件还没有被安装可以通过 <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a> 来进行安装，或者使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=csup&amp;sektion=1&amp;format=html">csup(1)</a> 或 <a href="https://man.freebsd.org/cgi/man.cgi?query=portsnap&amp;sektion=8&amp;format=html">portsnap(8)</a> 来从 FreeBSD 的服务器上面拉下来。在手册的 <a href=https://docs.freebsd.org/zh-cn/books/handbook/ports#ports-using>4.5.1 小节</a> 可以找到安装 Ports 套件的详细介绍。</p></div><div class=paragraph><p>安装一个 port 就像进入 port 的目录并开始构建过程一样简单（通常情况下）， 下面是从 Ports 套件安装 Apache 2.2 的例子：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/www/apache22</span>
<span class=c># make install clean</span></code></pre></div></div><div class=paragraph><p>使用 ports 安装软件的最大好处就是能够自定义安装选项。 例如，从 ports 安装 Apache 2.2 时你可以通过设置 <code>WITH_LDAP</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> 变量来启用 mod_ldap：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/www/apache22</span>
<span class=c># make WITH_LDAP=&#34;YES&#34; install clean</span></code></pre></div></div><div class=paragraph><p>请查看 FreeBSD 手册的 4.5 小节，<a href=https://docs.freebsd.org/zh-cn/books/handbook/ports#ports-using>使用 Ports Collection</a>， 以获取更多关于Ports Collection 的信息。</p></div></div><div class=sect2><h3 id=which>3.3. Ports还是packages，我应该使用哪个？<a class=anchor href=#which></a></h3><div class=paragraph><p>Packages 就是预编译好的 ports， 所以从源码（ports）安装与从二进制 packages 安装这两者间确实有很大关联。每种方法各有自己的优点：</p></div><div class=ulist><div class=title>Packages（二进制）</div><ul><li><p>更快速的安装 （比较大的应用程序编译起来会花很长时间）。</p></li><li><p>你不需要知道如何编译软件。</p></li><li><p>不需要在操作系统上安装编译器。</p></li></ul></div><div class=ulist><div class=title>Ports（源码）</div><ul><li><p>能够定制安装选项。 （Packages通常都是使用标准选项构建的。使用 ports 你能够定义各种各样的选项， 比如类似构建附加的模块或是更改安装路径之类的。）</p></li><li><p>如果你喜欢的话还可以使用自己的补丁。</p></li></ul></div><div class=paragraph><p>如果你没有一些特别的需求， packages 可能刚好最适合你的情况。如果你需要进一步定制， ports 是最适合的方法了。（请记得， 如果你需要定制而自己又更倾向于使用 packages， 你可以使用 make`package` 从 ports 构建一个定制的 package，然后复制到其他的服务器。）</p></div></div></div></div><div class=sect1><h2 id=startup>4. 系统启动：运行级别在哪里？<a class=anchor href=#startup></a></h2><div class=sectionbody><div class=paragraph><p>Linux® 使用 Sysv init 初始化系统，而 FreeBSD 使用的是传统的 BSD 风格的 <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a>。在 BSD 风格的 <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> 中没有运行级别和 <span class=filename>/etc/inittab</span>， 代替控制启动的是 <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> 实用程序。 <span class=filename>/etc/rc</span> 脚本读取 <span class=filename>/etc/defaults/rc.conf</span> 和 <span class=filename>/etc/rc.conf</span> 文件来决定哪个服务将被启动。 特殊服务在此后由处于 <span class=filename>/etc/rc.d/</span> 和 <span class=filename>/usr/local/etc/rc.d/</span> 下的相应服务初始化脚本文件所启动。 这些脚本类似于位于 Linux® 系统中的 <span class=filename>/etc/init.d/</span> 目录下的脚本。</p></div><div class=sidebarblock><div class=content><div class=paragraph><p><em>为何会有两个服务初始化脚本的目录呢？</em> <span class=filename>/etc/rc.d/</span> 下的脚本是属于 "基本" 系统一部分的应用程序所使用的。（<a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>，<a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a>，<a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a>，以及其他。） <span class=filename>/usr/local/etc/rc.d/</span> 下的脚本是用户安装的应用程序如 Apache，Squid 等使用的。</p></div><div class=paragraph><p><em>"基本" 系统和用户安装的应用程序之间的区别是什么？</em> FreeBSD 是一套开发出来的完整的操作系统，也就是说，内核，系统类库， 还有实用应用程序（如 <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a>，<a href="https://man.freebsd.org/cgi/man.cgi?query=cat&amp;sektion=1&amp;format=html">cat(1)</a>，<a href="https://man.freebsd.org/cgi/man.cgi?query=cp&amp;sektion=1&amp;format=html">cp(1)</a> 等） 全部被做为一个整体一起开发并释出。这就是被认为归属于 "基本"系统的程序。用户安装的程序并不是 "基本"系统的一部分，如 Apache，X11， Mozilla Firefox，等等。这 些用户安装的应用程序通常是使用 FreeBSD 的 Packages 和 Ports 套件安装上去的。为了将这些程序和 "基本" 系统区分开来，用户安装的应用程序通常被安装到 <span class=filename>/usr/local/</span> 下。 因此用户安装的二进制执行文件存在于 <span class=filename>/usr/local/bin</span> 下，配置文件在 <span class=filename>/usr/local/etc</span> 下，以此类推。</p></div></div></div><div class=paragraph><p>您可以通过在 <span class=filename>/etc/rc.conf</span>（<a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>） 文件中增加与之对应的 <code>ServiceName_enable="YES"</code> 配置来启用服务。 看一下系统默认的 <span class=filename>/etc/defaults/rc.conf</span> 文件， 这些默认配置可以使用 <span class=filename>/etc/rc.conf</span> 文件来改变。 因此， 当安装附加应用程序时最好回顾下文档来决定到底该如何启用任何相关的服务。</p></div><div class=paragraph><p>下面的一小段内容用来在 <span class=filename>/etc/rc.conf</span> 中启用 <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> 和 Apache 2.2。 还指定了 Apache 应该通过 SSL 方式启动。</p></div><div class="literalblock programlisting"><div class=content><pre># enable SSHD
sshd_enable=&#34;YES&#34;
# enable Apache with SSL
apache22_enable=&#34;YES&#34;
apache22_flags=&#34;-DSSL&#34;</pre></div></div><div class=paragraph><p>一旦服务已经在 <span class=filename>/etc/rc.conf</span> 中启用，服务将能够从命令行启动（不需要重新启动系统）：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/sshd start</span></code></pre></div></div><div class=paragraph><p>如果服务还没有被启用，可以使用 <code>forcestart</code> 来从命令行启动：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/sshd forcestart</span></code></pre></div></div></div></div><div class=sect1><h2 id=network>5. 网络配置<a class=anchor href=#network></a></h2><div class=sectionbody><div class=sect2><h3 id=interfaces>5.1. 网络接口<a class=anchor href=#interfaces></a></h3><div class=paragraph><p>代替 Linux® 中所使用的标识网络接口所常用的 <em>ethX</em> 格式的是，FreeBSD 使用驱动名字后跟一个数字来标识。下面 <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> 的输出显示了两个 Intel® Pro 1000 的网络接口（<span class=filename>em0</span> 和 <span class=filename>em1</span>）：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ifconfig
em0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        <span class=nv>options</span><span class=o>=</span>b&lt;RXCSUM,TXCSUM,VLAN_MTU&gt;
        inet 10.10.10.100 netmask 0xffffff00 broadcast 10.10.10.255
        ether 00:50:56:a7:70:b2
        media: Ethernet autoselect <span class=o>(</span>1000baseTX &lt;full-duplex&gt;<span class=o>)</span>
        status: active
em1: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        <span class=nv>options</span><span class=o>=</span>b&lt;RXCSUM,TXCSUM,VLAN_MTU&gt;
        inet 192.168.10.222 netmask 0xffffff00 broadcast 192.168.10.255
        ether 00:50:56:a7:03:2b
        media: Ethernet autoselect <span class=o>(</span>1000baseTX &lt;full-duplex&gt;<span class=o>)</span>
        status: active</code></pre></div></div></div><div class=sect2><h3 id=ipaddress>5.2. IP配置<a class=anchor href=#ipaddress></a></h3><div class=paragraph><p>一个 IP 地址可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> 来指定到一个网络接口。通常，要保持重启后依然能够使用的 IP 配置信息需要包含在 <span class=filename>/etc/rc.conf</span> 中。下列例子指定了主机名，IP 地址，以及默认网关：</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;server1.example.com&#34;
ifconfig_em0=&#34;inet 10.10.10.100  netmask 255.255.255.0&#34;
defaultrouter=&#34;10.10.10.1&#34;</pre></div></div><div class=paragraph><p>使用下面内容来为网络接口配置DHCP：</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;server1.example.com&#34;
ifconfig_em0=&#34;DHCP&#34;</pre></div></div></div></div></div><div class=sect1><h2 id=firewall>6. 防火墙<a class=anchor href=#firewall></a></h2><div class=sectionbody><div class=paragraph><p>像 Linux® 中的 IPTABLES 一样， FreeBSD 也提供了一个内核级的防火墙； 实际上 FreeBSD 提供了三个防火墙：</p></div><div class=ulist><ul><li><p><a href=https://docs.freebsd.org/zh-cn/books/handbook/firewalls#firewalls-ipfw>IPFIREWALL</a></p></li><li><p><a href=https://docs.freebsd.org/zh-cn/books/handbook/firewalls#firewalls-ipf>IPFILTER</a></p></li><li><p><a href=https://docs.freebsd.org/zh-cn/books/handbook/firewalls#firewalls-pf>PF</a></p></li></ul></div><div class=paragraph><p>IPFIREWALL 或是 IPFW（管理 IPFW 规则的 <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a> 命令） 是 FreeBSD 开发者开发并维持的。 IPFW 能够与 <a href="https://man.freebsd.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;format=html">dummynet(4)</a> 配合使用来提供流量图形功能以及模拟不同网络连接类型的功能。</p></div><div class=paragraph><p>允许 SSH 进入的 IPFW 规则样例如下：</p></div><div class="literalblock programlisting"><div class=content><pre>ipfw add allow tcp from any to me 22 in via $ext_if</pre></div></div><div class=paragraph><p>IPFILTER 是 Darren Reed 所开发的防火墙程序。不是专门针对 FreeBSD 的，它已经被移植到 NetBSD，OpenBSD，SunOS，HP/UX， 还有Solaris等一些操作系统之上。</p></div><div class=paragraph><p>允许 SSH 进入的 IPFILTER 命令样例如下：</p></div><div class="literalblock programlisting"><div class=content><pre>pass in on $ext_if proto tcp from any to any port = 22</pre></div></div><div class=paragraph><p>最后一种防火墙程序，PF， 是 OpenBSD 项目所开发的。PF 是被作为 IPFILTER 的一个替代品而被创建出的。就这点而言， PF 的语法与 IPFILTER 的非常相似。 PF 可以与 <a href="https://man.freebsd.org/cgi/man.cgi?query=altq&amp;sektion=4&amp;format=html">altq(4)</a> 配合来提供 QoS 的特性。</p></div><div class=paragraph><p>允许 SSH 进入的 PF 命令样例如下：</p></div><div class="literalblock programlisting"><div class=content><pre>pass in on $ext_if inet proto tcp from any to ($ext_if) port 22</pre></div></div></div></div><div class=sect1><h2 id=updates>7. 升级 FreeBSD<a class=anchor href=#updates></a></h2><div class=sectionbody><div class=paragraph><p>共有三种方法来升级 FreeBSD 系统： 源码，二进制更新，还有安装光盘。</p></div><div class=paragraph><p>从源码升级是最复杂的升级方法，但是提供了最棒的总体灵活性。 这个过程包含了使用 FreeBSD CVS （并行版本系统）来同步一个本地的 FreeBSD 源代码。 一旦本地源码已经更新到当前最新你便可以构建新版本的内核以及应用程序。 关于源码更新的更多信息可见于 FreeBSD 手册 <a href=https://docs.freebsd.org/zh-cn/books/handbook/#cutting-edge>关于如何更新操作系统的章节</a>。</p></div><div class=paragraph><p>二进制更新类似于使用 <code>yum</code> 或 <code>apt-get</code> 更新 Linux® 系统。<a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a> 命令会获取新的更新并安装它们。 这些更新可以通过 <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> 使用程序来调度。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>如果你使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> 来预定更新， 请确信在你的 <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=1&amp;format=html">crontab(1)</a> 中使用了 <code>freebsd-update cron</code> 来控制大数目的机器同时获取更新。</p></div><div class="literalblock programlisting"><div class=content><pre>0 3 * * * root /usr/sbin/freebsd-update cron</pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>最后一种更新的方法，从安装光盘来升级，是个直接的过程。 从安装光盘启动并选择该选项来更新。</p></div></div></div><div class=sect1><h2 id=procfs>8. procfs：已是过去式但仍未被遗忘<a class=anchor href=#procfs></a></h2><div class=sectionbody><div class=paragraph><p>Linux® 中，你可能会通过看一看 <span class=filename>/proc/sys/net/ipv4/ip_forward</span> 来确定 IP 转发是否被启用。在 FreeBSD 中你应该使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> 来查看这和其他方面的系统设置，在当前的 FreeBSD 版本中 <a href="https://man.freebsd.org/cgi/man.cgi?query=procfs&amp;sektion=5&amp;format=html">procfs(5)</a> 已经不赞成使用了。（虽然 `sysctl`在 FreeBSD 也同样可用。）</p></div><div class=paragraph><p>在 IP 转发样例中，你应该使用下列内容来确定 FreeBSD 系统中是否已经开启了 IP 转发：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl net.inet.ip.forwarding
net.inet.ip.forwarding: 0</code></pre></div></div><div class=paragraph><p><code>-a</code> 标志用来列出所有的系统设置：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl <span class=nt>-a</span>
kern.ostype: FreeBSD
kern.osrelease: 6.2-RELEASE-p9
kern.osrevision: 199506
kern.version: FreeBSD 6.2-RELEASE-p9 0: Thu Nov 29 04:07:33 UTC 2007
    root@i386-builder.daemonology.net:/usr/obj/usr/src/sys/GENERIC

kern.maxvnodes: 17517
kern.maxproc: 1988
kern.maxfiles: 3976
kern.argmax: 262144
kern.securelevel: <span class=nt>-1</span>
kern.hostname: server1
kern.hostid: 0
kern.clockrate: <span class=o>{</span> hz <span class=o>=</span> 1000, tick <span class=o>=</span> 1000, profhz <span class=o>=</span> 666, stathz <span class=o>=</span> 133 <span class=o>}</span>
kern.posix1version: 200112
...</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>某些 <code>sysctl</code> 的参数是只读的。</p></div></td></tr></tbody></table></div><div class=paragraph><p>需要 procfs 的情况是，运行一些较老的软件，使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=truss&amp;sektion=1&amp;format=html">truss(1)</a> 来跟踪系统信号，以及 <a href=https://docs.freebsd.org/zh-cn/books/handbook/linuxemu#linuxemu>Linux® 二进制兼容</a>. （尽管，Linux® 二进制兼容性使用其本身的 procfs，<a href="https://man.freebsd.org/cgi/man.cgi?query=linprocfs&amp;sektion=5&amp;format=html">linprocfs(5)</a>。） 如果你需要挂载 procfs 你可以在 <span class=filename>/etc/fstab</span> 中加入如下内容：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>proc                /proc           procfs  rw,noauto       0       0</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>noauto</code> 会防止 <span class=filename>/proc</span> 在启动时被自动挂载。</p></div></td></tr></tbody></table></div><div class=paragraph><p>然后使用如下命令挂载 procfs：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /proc</span></code></pre></div></div></div></div><div class=sect1><h2 id=commands>9. 常用命令<a class=anchor href=#commands></a></h2><div class=sectionbody><div class=sect2><h3 id=packageCommands>9.1. 软件包管理<a class=anchor href=#packageCommands></a></h3><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Linux® 命令 (Red Hat/Debian)</th><th class="tableblock halign-left valign-top">FreeBSD 等价命令</th><th class="tableblock halign-left valign-top">目的</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>yum install package</code> / <code>apt-get install package</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>pkg_add -r package</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>从远程仓库安装 <em>package</em></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>rpm -ivh package</code> / <code>dpkg -i package</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>pkg_add -v package</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>安装 package</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>rpm -qa</code> / <code>dpkg -l</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>pkg_info</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>列出已安装的软件包</p></td></tr></tbody></table></div><div class=sect2><h3 id=systemCommands>9.2. 系统管理<a class=anchor href=#systemCommands></a></h3><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Linux® 命令</th><th class="tableblock halign-left valign-top">FreeBSD 等价命令</th><th class="tableblock halign-left valign-top">目的</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>lspci</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>pciconf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>列出 PCI 设备</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>lsmod</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>kldstat</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>列出已载入的内核模块</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>modprobe</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>kldload</code> / <code>kldunload</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>载入/卸载内核模块</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>strace</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>truss</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>跟踪系统调用</p></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=conclusion>10. 总结<a class=anchor href=#conclusion></a></h2><div class=sectionbody><div class=paragraph><p>非常希望这篇文档能够给予你足够的帮助来开始你的 FreeBSD 之路。务必要再去看一下 <a href=https://docs.freebsd.org/zh-cn/books/handbook/>FreeBSD 手册</a> 所提到的但并没有被包含在本文档中的那些更深入广泛的主题。</p></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: November 3, 2021 by <a href="https://cgit.freebsd.org/doc/commit/?id=64acd169b8" target=_blank>Sergio Carlavilla Delgado</a></p></div></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#intro>1. 简介</a></li><li><a href=#shells>2. Shell程序：没有Bash吗？</a></li><li><a href=#software>3. Packages和Ports：在 FreeBSD 中添加软件</a></li><li><a href=#startup>4. 系统启动：运行级别在哪里？</a></li><li><a href=#network>5. 网络配置</a></li><li><a href=#firewall>6. 防火墙</a></li><li><a href=#updates>7. 升级 FreeBSD</a></li><li><a href=#procfs>8. procfs：已是过去式但仍未被遗忘</a></li><li><a href=#commands>9. 常用命令</a></li><li><a href=#conclusion>10. 总结</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/zh-cn/articles/linux-users/linux-users_zh-cn.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/zh-cn/_index target=_blank>Edit this page</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/zh-cn/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>简体中文</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/zh-cn class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/zh-cn/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>