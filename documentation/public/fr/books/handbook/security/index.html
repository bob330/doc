<!doctype html><html class=theme-light lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/fr/books/handbook/security/><title>Chapitre 14. Sécurité | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapitre 14. Sécurité"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="fr"><meta property="og:url" content="https://docs.freebsd.org/fr/books/handbook/security/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/fr\/books\/handbook\/security\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/fr>Documentation portal</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/fr/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/fr/books>Books</a></li><li><a href=https://docs.freebsd.org/fr/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/fr/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=fr>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/preface/>Préface</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/preface/#preface-audience>Public visé</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/preface/#preface-changes-from2>Modifications depuis la Seconde Edition</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/preface/#preface-changes>Modifications depuis la Première Edition</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/preface/#preface-overview>Organisation de cet ouvrage</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/preface/#preface-conv>Conventions utilisées dans ce livre</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/preface/#preface-acknowledgements>Remerciements</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/parti/>Partie I. Pour commencer</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/introduction/>Chapitre 1. Introduction</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/introduction/#introduction-synopsis>1.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/introduction/#nutshell>1.2. Bienvenue à FreeBSD!</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/introduction/#history>1.3. A propos du Projet FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/>Chapitre 2. Installer FreeBSD</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. Configuration matérielle minimale</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-pre>2.3. Tâches de pré-installation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-start>2.4. Lancer l’installation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#using-bsdinstall>2.5. Utilisation de bsdinstall</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-partitioning>2.6. Allouer l’espace disque</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-fetching-distribution>2.7. Récupération des fichiers de distribution</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-post>2.8. Comptes utilisateurs, fuseau horaire, services et renforcement de la sécurité</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-network>2.9. Interfaces réseau</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.10. Dépannage</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bsdinstall/#using-live-cd>2.11. Utilisation du CD Live</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/basics/>Chapitre 3. Quelques bases d'UNIX</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#basics-synopsis>3.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#consoles>3.2. Consoles virtuelles terminaux</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#permissions>3.3. Permissions</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#dirstructure>3.4. Organisation de l’arborescence des répertoires</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#disk-organization>3.5. Organisation des disques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#mount-unmount>3.6. Monter et démonter des systèmes de fichiers</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#basics-processes>3.7. Processus</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#basics-daemons>3.8. Daemons, signaux, et comment tuer un processus</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#shells>3.9. Interpréteurs de commandes - "Shells"</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#editors>3.10. Editeurs de texte</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#basics-devices>3.11. Périphériques et fichiers spéciaux de périphérique</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#binary-formats>3.12. Le format des fichiers binaires</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/basics/#basics-more-information>3.13. Pour plus d’information</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/ports/>Chapitre 4. Installer des applications: les logiciels pré-compilés et les logiciels portés</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/ports/#ports-synopsis>4.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ports/#ports-overview>4.2. Généralités sur l’installation de logiciels</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ports/#ports-finding-applications>4.3. Trouver votre application</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ports/#packages-using>4.4. Utiliser le système des logiciels pré-compilés</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ports/#ports-using>4.5. Utiliser le catalogue des logiciels portés</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ports/#ports-nextsteps>4.6. Activités de post-installation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ports/#ports-broken>4.7. Que faire avec les logiciels portés ne fonctionnant pas?</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/x11/>Chapitre 5. Le système X Window</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x11-synopsis>5.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x-understanding>5.2. Terminologie</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x-install>5.3. Installer X11</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x-config>5.4. Configuration d’Xorg</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x-fonts>5.5. Utilisation des polices de caractères sous Xorg</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x-xdm>5.6. Le gestionnaire de connexion graphique XDM</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x11-wm>5.7. Environnements de bureau</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/x11/#x-compiz-fusion>5.8. Installation de Compiz Fusion</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/partii/>Partie II. Tâches courantes</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/desktop/>Chapitre 6. Bureautique</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/desktop/#desktop-synopsis>6.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/desktop/#desktop-browsers>6.2. Navigateurs</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/desktop/#desktop-productivity>6.3. Productivité</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/desktop/#desktop-viewers>6.4. Lecteurs de document</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/desktop/#desktop-finance>6.5. Finance</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/desktop/#desktop-summary>6.6. Résumé</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/multimedia/>Chapitre 7. Multimédia</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/multimedia/#multimedia-synopsis>7.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/multimedia/#sound-setup>7.2. Configurer une carte son</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/multimedia/#sound-mp3>7.3. Fichiers MP3</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/multimedia/#video-playback>7.4. Lecture des Vidéos</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/multimedia/#tvcard>7.5. Configuration des cartes TV</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/multimedia/#scanners>7.6. Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/kernelconfig/>Chapitre 8. Configurer le noyau de FreeBSD</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Pourquoi compiler un noyau sur mesure?</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/kernelconfig/#kernelconfig-building>8.3. Compiler et installer un noyau sur mesure</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/kernelconfig/#kernelconfig-config>8.4. Le fichier de configuration</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/kernelconfig/#kernelconfig-trouble>8.5. Si quelque chose se passe mal</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/printing/>Chapitre 9. Imprimer</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/printing/#printing-synopsis>9.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/printing/#printing-intro-spooler>9.2. Introduction</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/printing/#printing-intro-setup>9.3. Configuration de base</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/printing/#printing-advanced>9.4. Configuration avancée de l’imprimante</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/printing/#printing-using>9.5. Using Printers <strong>Traduction en Cours</strong></a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/printing/#printing-lpd-alternatives>9.6. Alternatives to the Standard Spooler <strong>Traduction en Cours</strong></a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/printing/#printing-troubleshooting>9.7. Troubleshooting <strong>Traduction en Cours</strong></a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/linuxemu/>Chapitre 10. Compatibilité binaire avec Linux</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Configurer la compatibilité binaire avec Linux</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/linuxemu/#linuxemu-packages>10.3. Système de base CentOS à partir des paquets binaires FreeBSD</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/linuxemu/#linuxemu-debootstrap>10.4. Système de base Debian / Ubuntu avec debootstrap(8)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/linuxemu/#linuxemu-advanced>10.5. Sujets avancés</a></li></ul></li><li><input type=checkbox id=chapter-54c06b703788dcba4081bec5a0407412 class=toggle>
<label class="icon cursor" for=chapter-54c06b703788dcba4081bec5a0407412><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/wine/>Chapitre 11. WINE</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#wine-synopsis>11.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#wine-overview-concepts>11.2. WINE généralités et concepts</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#installing-wine-on-freebsd>11.3. Installer WINE sur FreeBSD</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#running-first-wine-program>11.4. Lancer un premier programme WINE sous FreeBSD</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#configuring-wine-installation>11.5. Configurer WINE après installation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#wine-management-guis>11.6. Interfaces graphiques de gestion de WINE</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#wine-in-multi-user-os-installations>11.7. WINE sur un système FreeBSD avec plusieurs utilisateurs</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/wine/#wine-on-os-faq>11.8. WINE sur FreeBSD Foire Aux Questions</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/partiii/>Partie III. Administration Système</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/config/>Chapitre 11. Configuration et optimisation</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#config-synopsis>11.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-core-configuration>11.2. Configuration principale</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-appconfig>11.3. Configuration des applications</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-starting-services>11.4. Démarrer des services</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-cron>11.5. Configuration de l’utilitaire <code>cron</code></a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-rcd>11.6. Utilisation du système rc(8) sous FreeBSD</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#config-network-setup>11.7. Configuration des cartes réseaux</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-virtual-hosts>11.8. Hôtes virtuels</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-configfiles>11.9. Fichiers de configuration</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-sysctl>11.10. Optimisation avec sysctl(8)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-disk>11.11. Optimiser les disques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#configtuning-kernel-limits>11.12. Optimisation des limitations du noyau</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#adding-swap-space>11.13. Ajouter de l’espace de pagination</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#acpi-overview>11.14. Gestion de l’énergie et des ressources</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/config/#ACPI-debug>11.15. Utiliser et déboguer l’ACPI sous FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/boot/>Chapitre 12. Processus de démarrage de FreeBSD</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/boot/#boot-synopsis>12.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/boot/#boot-introduction>12.2. Le problème du démarrage</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/boot/#boot-blocks>12.3. Le gestionnaire de démarrage et les étapes de démarrage</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/boot/#boot-kernel>12.4. Interaction avec le noyau au démarrage</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/boot/#device-hints>12.5. "Device Hints"-Paramétrage des périphériques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/boot/#boot-init>12.6. Init: Initialisation de la gestion des processus</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/boot/#boot-shutdown>12.7. Séquence d’arrêt du système</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/users/>Chapitre 13. Gestion des comptes et des utilisateurs</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-synopsis>13.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-introduction>13.2. Introduction</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-superuser>13.3. Le compte super-utilisateur</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-system>13.4. Comptes système</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-user>13.5. Comptes utilisateur</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-modifying>13.6. Modifier des comptes</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-limiting>13.7. Mettre en place des restrictions pour les utilisateurs</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/users/#users-groups>13.8. Groupes</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle checked>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/security/>Chapitre 14. Sécurité</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#security-synopsis>14.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#security-intro>14.2. Introduction</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#securing-freebsd>14.3. Securing FreeBSD <strong>Traduction en Cours</strong></a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#crypt>14.4. DES, MD5, et chiffrement</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#one-time-passwords>14.5. Mots de passe non réutilisables</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#tcpwrappers>14.6. L’encapsuleur TCP ("TCP Wrappers")</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#kerberosIV>14.7. Kerberos</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#kerberos5>14.8. Kerberos5 <strong>Traduction en Cours</strong></a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#ipsec>14.10. IPsec</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#fs-acl>14.12. Listes de contrôle d’accès au système de fichiers</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#security-portaudit>14.13. Surveillance des problèmes de sécurité relatifs aux programmes tierce-partie</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#security-advisories>14.14. Avis de sécurité de FreeBSD</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/security/#security-accounting>14.15. Comptabilité des processus</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/jails/>Chapitre 15. Environnements jail</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/jails/#jails-synopsis>15.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/jails/#jails-terms>15.2. Termes relatifs aux environnements jail</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/jails/#jails-intro>15.3. Introduction</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/jails/#jails-build>15.4. Création et contrôle de l’environnement jail</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/jails/#jails-tuning>15.5. Optimisation et administration</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/mac/>Chapitre 16. Mandatory Access Control ** Traduction en Cours **</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-synopsis>16.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-glossary>16.2. Key Terms in this Chapter</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-initial>16.3. Explanation of MAC</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-understandlabel>16.4. Understanding MAC Labels</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-modules>16.5. Module Configuration</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-bsdextended>16.6. The MAC bsdextended Module</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-ifoff>16.7. The MAC ifoff Module</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-portacl>16.8. The MAC portacl Module</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-labelingpolicies>16.9. MAC Policies with Labeling Features</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-partition>16.10. The MAC partition Module</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-mls>16.11. The MAC Multi-Level Security Module</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-biba>16.12. The MAC Biba Module</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-lomac>16.13. The MAC LOMAC Module</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-implementing>16.14. Implementing a Secure Environment with MAC</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#MAC-examplehttpd>16.15. Another Example: Using MAC to Constrain a Web Server</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mac/#mac-troubleshoot>16.16. Troubleshooting the MAC Framework</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/audit/>Chapitre 17. Audit des événements relatifs à la sécurité du système</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/audit/#audit-synopsis>17.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/audit/#audit-inline-glossary>17.2. Mots-clés</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/audit/#audit-config>17.3. Configuration de l’audit</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/audit/#audit-administration>17.4. Travailler avec les traces d’audit</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/disks/>Chapitre 18. Stockage des données</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#disks-synopsis>18.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#disks-naming>18.2. Noms des périphériques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#disks-adding>18.3. Ajouter des disques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#usb-disks>18.5. Périphériques de stockage USB</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#creating-cds>18.6. Création et utilisation de supports optiques (CDs)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#creating-dvds>18.7. Création et utilisation de supports optiques (DVDs)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#floppies>18.8. Création et utilisation de disquettes</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#backups-tapebackups>18.9. Créer et utiliser les bandes magnétiques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#backups-floppybackups>18.10. Sauvegardes sur disquettes</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#backup-strategies>18.11. Stratégies de sauvegarde</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#backup-basics>18.12. Sauvegardes</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#disks-virtual>18.13. Systèmes de fichiers réseaux, en mémoire et sauvegardés sur fichier</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#snapshots>18.14. Instantané ("Snapshot") d’un système de fichiers</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#quotas>18.15. Quotas d’utilisation des disques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#disks-encrypting>18.16. Chiffrer les partitions d’un disque</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/disks/#swap-encrypting>18.17. Chiffrage de l’espace de pagination</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/geom/>Chapitre 19. GEOM: architecture modulaire de gestion des disques</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/geom/#GEOM-synopsis>19.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/geom/#GEOM-intro>19.2. Introduction à GEOM</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/geom/#GEOM-striping>19.3. RAID0 - "Striping"</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - "mirroring"</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/geom/#geom-ggate>19.5. Périphériques réseau "GEOM Gate"</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/geom/#geom-glabel>19.6. Ajouter un label à un disque</a></li></ul></li><li><input type=checkbox id=chapter-73e82560fcb7145b7c0e2ec47af8fc04 class=toggle>
<label class="icon cursor" for=chapter-73e82560fcb7145b7c0e2ec47af8fc04><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/zfs/>Chapitre 20. The Z File System (ZFS) ** Traduction en Cours **</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/zfs/#zfs-differences>20.1. What Makes ZFS Different</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/zfs/#zfs-quickstart>20.2. Quick Start Guide</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/zfs/#zfs-zpool>20.3. <code>zpool</code> Administration</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/zfs/#zfs-zfs>20.4. <code>zfs</code> Administration</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/zfs/#zfs-zfs-allow>20.5. Delegated Administration</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/zfs/#zfs-links>20.6. Additional Resources</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/zfs/#zfs-term>20.7. ZFS Features and Terminology</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/filesystems/>Chapitre 21. Autres systèmes de fichiers</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/filesystems/#filesystems-synopsis>21.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/filesystems/#filesystems-linux>21.2. Systèmes de fichiers Linux®</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/vinum/>Chapitre 22. Le gestionnaire de volume Vinum</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#vinum-synopsis>22.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#vinum-intro>22.2. Les disques sont trop petits</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#_les_goulots_détranglement_daccès_aux_données>22.3. Les goulots d’étranglement d’accès aux données</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#_intégrité_des_données>22.4. Intégrité des données</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#vinum-objects>22.5. Objets Vinum</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#vinum-examples>22.6. Quelques exemples</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#_appellation_des_objets>22.7. Appellation des objets</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/vinum/#vinum-config>22.8. Configuration de Vinum</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/virtualization/>Chapitre 23. Virtualisation</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/virtualization/#virtualization-synopsis>23.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/virtualization/#virtualization-guest>23.2. FreeBSD comme système d’exploitation invité</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/virtualization/#virtualization-host>23.3. FreeBSD comme système d’exploitation hôte</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/l10n/>Chapitre 24. Localisation - Utilisation et configuration de l'I18N/L10N</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/l10n/#l10n-synopsis>24.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/l10n/#l10n-basics>24.2. Les bases</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/l10n/#using-localization>24.3. Utiliser la localisation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/l10n/#l10n-compiling>24.4. Compiler des programmes I18N</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/l10n/#lang-setup>24.5. Localiser FreeBSD pour des langues spécifiques</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/>Chapitre 25. Mise à jour de FreeBSD</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#updating-upgrading-synopsis>25.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>25.2. Mise à jour de FreeBSD</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#updating-upgrading-portsnap>25.3. Portsnap: un outil de mise à jour du catalogue des logiciels portés</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#updating-upgrading-documentation>25.4. Updating the Documentation Set <strong>Traduction en Cours</strong></a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#current-stable>25.5. Suivre une branche de développement</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#synching>25.6. Synchroniser vos sources</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#makeworld>25.7. Recompiler le système</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/cutting-edge/#small-lan>25.8. Suivre les mises à jour pour plusieurs machines</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/dtrace/>Chapitre 26. DTrace</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/dtrace/#dtrace-synopsis>26.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/dtrace/#dtrace-implementation>26.2. Des différences de mise en oeuvre</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/dtrace/#dtrace-enable>26.3. Activer la prise en charge de DTrace</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/dtrace/#dtrace-using>26.4. Utiliser DTrace</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/dtrace/#dtrace-language>26.5. Le langage D</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/partiv/>Partie IV. Réseau</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/serialcomms/>Chapitre 27. Serial Communications ** Traduction en Cours **</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/serialcomms/#serial-synopsis>27.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/serialcomms/#serial>27.2. Introduction</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/serialcomms/#term>27.3. Terminals</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/serialcomms/#dialup>27.4. Dial-in Service</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/serialcomms/#dialout>27.5. Dial-out Service</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/serialcomms/#serialconsole-setup>27.6. Setting Up the Serial Console</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/ppp-and-slip/>Chapitre 28. PPP et SLIP</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>28.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ppp-and-slip/#userppp>28.2. Using User PPP <strong>Traduction en Cours</strong></a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ppp-and-slip/#ppp>28.3. Utiliser PPP intégré au noyau</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ppp-and-slip/#pppoe>28.4. Utiliser PPP sur Ethernet (PPPoE)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ppp-and-slip/#pppoa>28.5. Utiliser PPP sur ATM (PPPoA)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/ppp-and-slip/#slip>28.6. Utiliser SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/mail/>Chapitre 29. Courrier électronique</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-synopsis>29.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-using>29.2. Utilisation du courrier électronique</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#sendmail>29.3. Configuration de sendmail</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-changingmta>29.4. Changer votre agent de transfert de courrier</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-trouble>29.5. Dépannage</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-advanced>29.6. Sujets avancés</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#SMTP-UUCP>29.7. SMTP avec UUCP</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#outgoing-only>29.8. Configuration pour l’envoi seul</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#SMTP-dialup>29.9. Utiliser le courrier électronique avec une connexion temporaire</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#SMTP-Auth>29.10. Authentification SMTP</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-agents>29.11. Clients de messagerie</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-fetchmail>29.12. Utiliser fetchmail</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mail/#mail-procmail>29.13. Utiliser procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/>Chapitre 30. Serveurs réseau</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-servers-synopsis>30.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-inetd>30.2. Le "super-serveur" inetd</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-nfs>30.3. Système de fichiers réseau (NFS)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-nis>30.4. Services d’information réseau (NIS/YP)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-dhcp>30.5. Configuration réseau automatique (DHCP)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-dns>30.6. Serveurs de noms (DNS)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-apache>30.7. Serveur HTTP Apache</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-ftp>30.8. Protocole de transfert de fichiers (FTP)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-samba>30.9. Serveur de fichiers et d’impression pour clients Microsoft® Windows® (Samba)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/network-servers/#network-ntp>30.10. Synchronisation de l’horloge avec NTP</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/firewalls/>Chapitre 31. Firewalls ** Traduction en Cours **</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/firewalls/#firewalls-intro>31.1. Introduction</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/firewalls/#firewalls-concepts>31.2. Firewall Concepts</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/firewalls/#firewalls-apps>31.3. Firewall Packages</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/firewalls/#firewalls-pf>31.4. The OpenBSD Packet Filter (PF) and ALTQ</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/firewalls/#firewalls-ipf>31.5. The IPFILTER (IPF) Firewall</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/firewalls/#firewalls-ipfw>31.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/>Chapitre 32. Administration réseau avancée</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#advanced-networking-synopsis>32.1. Synopsis</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-routing>32.2. Passerelles et routes</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-wireless>32.3. Réseau sans fil</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-bluetooth>32.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-bridging>32.5. Bridging</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-diskless>32.6. Système sans disque dur</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-isdn>32.7. ISDN</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-natd>32.8. Translation d’adresses</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-plip>32.9. IP sur liaison parallèle (PLIP)</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-ipv6>32.10. IPv6</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/advanced-networking/#network-atm>32.11. ATM ("Asynchronous Transfer Mode")</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/partv/>Partie V. Annexes</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/>Annexe A. Se procurer FreeBSD</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#mirrors-cdrom>A.1. Editeurs de CD-ROMs et DVDs</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#mirrors-ftp>A.2. Sites FTP</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#anoncvs>A.3. CVS anonyme</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#ctm>A.4. Utiliser CTM</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#cvsup>A.5. Utiliser CVSup</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#portsnap>A.6. Utiliser Portsnap</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#cvs-tags>A.7. Etiquettes CVS</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#mirrors-afs>A.8. Sites AFS</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/mirrors/#mirrors-rsync>A.9. Sites rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/>Annexe B. Bibliographie</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-freebsd>B.1. Livres magazines consacrés à FreeBSD</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-userguides>B.2. Manuels d’utilisation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-adminguides>B.3. Manuels d’administration</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-programmers>B.4. Manuels de programmation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-osinternals>B.5. "Internes" du système d’exploitation</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-security>B.6. Ouvrages de référence en matière de sécurité</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-hardware>B.7. Ouvrages de référence sur le matériel</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-history>B.8. Histoire d’UNIX®</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/bibliography/#bibliography-journals>B.9. Revues et journaux</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/eresources/>Annexe C. Ressources sur Internet</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/eresources/#eresources-mail>C.1. Listes de diffusion</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/eresources/#eresources-news>C.2. Forums de discussion</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/eresources/#eresources-web>C.3. Serveurs World Wide Web</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/eresources/#eresources-email>C.4. Adresses électroniques</a></li><li><a href=https://docs.freebsd.org/fr/books/handbook/eresources/#eresources-shell>C.5. Comptes</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/fr/books/handbook/pgpkeys/>Annexe D. Clés OpenPGP</a><ul><li><a href=https://docs.freebsd.org/fr/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Officers</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapitre 14. Sécurité</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Sommaire</h3><nav id=TableOfContents><ul><li><a href=#security-synopsis>14.1. Synopsis</a></li><li><a href=#security-intro>14.2. Introduction</a></li><li><a href=#securing-freebsd>14.3. Securing FreeBSD <strong>Traduction en Cours</strong></a></li><li><a href=#crypt>14.4. DES, MD5, et chiffrement</a></li><li><a href=#one-time-passwords>14.5. Mots de passe non réutilisables</a></li><li><a href=#tcpwrappers>14.6. L’encapsuleur TCP ("TCP Wrappers")</a></li><li><a href=#kerberosIV>14.7. Kerberos</a></li><li><a href=#kerberos5>14.8. Kerberos5 <strong>Traduction en Cours</strong></a></li><li><a href=#openssl>14.9. OpenSSL</a></li><li><a href=#ipsec>14.10. IPsec</a></li><li><a href=#openssh>14.11. OpenSSH</a></li><li><a href=#fs-acl>14.12. Listes de contrôle d’accès au système de fichiers</a></li><li><a href=#security-portaudit>14.13. Surveillance des problèmes de sécurité relatifs aux programmes tierce-partie</a></li><li><a href=#security-advisories>14.14. Avis de sécurité de FreeBSD</a></li><li><a href=#security-accounting>14.15. Comptabilité des processus</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=security-synopsis>14.1. Synopsis<a class=anchor href=#security-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Ce chapitre sera une introduction aux concepts de base de la sécurité système, à certaines règles empiriques, et à des sujets avancés sous FreeBSD. De nombreux sujets abordés ici peuvent être appliqués à la sécurité système et à l’Internet en général. L’Internet n’est plus un endroit "amical" dans lequel chacun désire être votre gentil voisin. Sécuriser votre système est impératif pour protéger vos données, la propriété intellectuelle, votre temps, et bien plus des mains des "hackers" et équivalents.</p></div><div class=paragraph><p>FreeBSD fournit un ensemble d’utilitaires et de mécanismes pour assurer l’intégrité et la sécurité de votre système et votre réseau.</p></div><div class=paragraph><p>Après la lecture de ce chapitre, vous connaîtrez:</p></div><div class=ulist><ul><li><p>Les concepts de base de la sécurité système en ce qui concerne FreeBSD.</p></li><li><p>Les différents mécanismes de chiffrement disponibles sous FreeBSD, comme DES et MD5.</p></li><li><p>Comment mettre en place une authentification par mot de passe non réutilisable.</p></li><li><p>Comment configurer l’encapsuleur TCP pour une utilisation avec inetd.</p></li><li><p>Comment configurer KerberosIV sous les versions de FreeBSD antérieures à la 5.0.</p></li><li><p>Comment configurer Kerberos5 sous FreeBSD.</p></li><li><p>Comment configurer IPsec et mettre en place un VPN entre machines FreeBSD et Windows®.</p></li><li><p>Comment configurer et utiliser OpenSSH, la version de SSH implémentée sous FreeBSD.</p></li><li><p>Ce que sont les ACLs et comment les utiliser.</p></li><li><p>Comment employer l’utilitaire Portaudit pour l’audit des logiciels tierce-partie installés à partir du catalogue des logiciels portés.</p></li><li><p>Comment utiliser les avis de sécurité de FreeBSD.</p></li><li><p>Ce qu’est la comptabilité des processus et comment l’activer sous FreeBSD.</p></li></ul></div><div class=paragraph><p>Avant de lire ce chapitre, vous devrez:</p></div><div class=ulist><ul><li><p>Comprendre les concepts de base de FreeBSD et d’Internet.</p></li></ul></div><div class=paragraph><p>D’autres sujets relatifs à la sécurité sont abordés par ailleurs dans ce Manuel. Par exemple, le contrôle d’accès obligatoire est présenté dans le <a href=../mac/#mac>Mandatory Access Control</a> et les coupe-feux Internet sont développés dans le <a href=../firewalls/#firewalls>Firewalls</a>.</p></div></div></div><div class=sect1><h2 id=security-intro>14.2. Introduction<a class=anchor href=#security-intro></a></h2><div class=sectionbody><div class=paragraph><p>La sécurité est un domaine qui débute et se termine au niveau de l’administrateur système. Alors que tous les systèmes multi-utilisateurs UNIX® BSD ont des sécurités inhérentes, la mise en place et la maintenance des mécanismes supplémentaires de sécurité pour conserver des utilisateurs "honnêtes" est probablement une des tâches les plus vastes de l’administrateur système. La sécurité des machines est celle que vous voulez bien mettre en oeuvre, de plus les préoccupations en matière de sécurité sont plus que jamais en concurrence avec les besoins de confort des utilisateurs. Les systèmes UNIX® sont, en général, capables d’exécuter un nombre important de processus simultanément et plusieurs de ces processus fonctionnent en tant que serveur - cela signifiant que des entités extérieures peuvent se connecter et échanger avec ces processus. Comme les mini-ordinateurs et les gros ordinateurs d’hier deviennent aujourd’hui nos ordinateurs de bureau, et comme les ordinateurs sont désormais en réseau et reliés à Internet, la sécurité devient d’autant plus un problème majeur.</p></div><div class=paragraph><p>La sécurité système concerne également la lutte contre les diverses formes d’attaque, y compris les attaques destinées à faire planter, ou à rendre inutilisable le système, mais qui ne cherchent pas à compromettre le compte <code>root</code>. Les problèmes de sécurité peuvent être divisés en plusieurs catégories:</p></div><div class="olist arabic"><ol class=arabic><li><p>Attaques par déni de service.</p></li><li><p>Compte utilisateur compromis.</p></li><li><p>Le compte <code>root</code> compromis par l’intermédiaire de serveurs accessibles.</p></li><li><p>Le compte <code>root</code> compromis par l’intermédiaire de comptes utilisateur.</p></li><li><p>Création d’une "Backdoor" (porte dérobée).</p></li></ol></div><div class=paragraph><p>Une attaque par déni de service ("DoS") est une action qui prive la machine de ressources nécessaires à son bon fonctionnement. Généralement, les attaques par déni de service sont des mécanismes de force brute qui tentent de faire planter ou tout au moins de rendre inutilisable la machine en saturant ses serveurs ou sa pile réseau. Certaines attaques par déni de service peuvent se servir de bogues présents dans la pile réseau pour faire planter une machine avec un seul paquet. Ces problèmes ne peuvent être corrigés que par l’application d’un correctif sur le noyau. On peut souvent remédier aux attaques sur les serveurs en fixant correctement des options pour limiter la charge que provoquent ces serveurs sur le système lors de conditions critiques. Les attaques réseau par force brute sont plus difficiles à traiter. Une attaque par paquets usurpés ("spoofed-packet"), par exemple, est quasi-impossible à arrêter, à moins de déconnecter de l’Internet votre système. Elle peut ne pas être en mesure de stopper votre machine, mais elle peut saturer votre connexion Internet.</p></div><div class=paragraph><p>La compromission d’un compte utilisateur est bien plus fréquente qu’une attaque de type DoS. De nombreux administrateurs utilisent toujours sur leurs machines les versions standards des serveurs telnetd, rlogind, rshd, et ftpd. Par défaut, ces serveurs ne fonctionnent pas avec des connexions chiffrées. Cela aura pour résultat si vous disposez d’un nombre d’utilisateurs conséquent qu’un ou plusieurs de ces utilisateurs ayant l’habitude de se connecter à partir d’une machine distante (ce qui représente la manière la plus courante et la plus pratique pour ouvrir une session sur un système) auront leur mot de passe "sniffé". L’administrateur système méticuleux analysera ses journaux de connexions effectuées à partir de machines distantes à la recherche d’adresses sources suspectes même pour les ouvertures de sessions ayant réussies.</p></div><div class=paragraph><p>Il faut toujours supposer qu’une fois l’attaquant a l’accès à un compte utilisateur, il pourra s’attaquer et avoir accès au compte <code>root</code>. Cependant, la réalité est que dans un système bien sécurisé et surveillé, l’accès à un compte utilisateur ne donne pas nécessairement à l’attaquant l’accès au compte <code>root</code>. Cette distinction est importante car sans accès aux droits de <code>root</code>, l’attaquant ne peut généralement pas dissimuler ses traces et peut, dans le meilleur des cas, ne rien faire d’autre que mettre la pagaille dans les fichiers de l’utilisateur ou faire planter la machine. La compromission de comptes utilisateur est très fréquente parce que les utilisateurs n’ont pas l’habitude de prendre les précautions que prennent les administrateurs système.</p></div><div class=paragraph><p>Les administrateurs doivent garder à l’esprit qu’il existe potentiellement de nombreuses manières d’avoir accès au compte <code>root</code> sur une machine. L’attaquant peut connaître le mot de passe <code>root</code>, l’attaquant peut trouver un bogue dans un serveur tournant avec les droits de <code>root</code> et être en mesure de devenir <code>root</code> par l’intermédiaire d’une connexion réseau à ce serveur, ou l’attaquant peut connaître un bogue dans un programme suid-root qui permet de devenir <code>root</code> une fois qu’il a accédé à un compte utilisateur. Si un attaquant a trouvé un moyen de devenir <code>root</code> sur une machine, il n’aura peut-être pas besoin d’installer une "backdoor" (porte dérobée). De nombreux trous de sécurité <code>root</code> trouvés et fermés à temps demandent un travail considérable à l’attaquant pour effacer ses traces, aussi la plupart des attaquants installe des portes dérobées. Une porte dérobée offre à l’attaquant un moyen aisé d’avoir à nouveau accès aux droits de <code>root</code> sur le système, mais cela donne également à l’administrateur système intelligent un bon moyen de détecter l’intrusion. Rendre impossible à un attaquant l’installation d’une porte dérobée peut en fait être préjudiciable à votre sécurité, parce que cela ne fermera pas le trou qu’a découvert en premier lieu l’attaquant pour pénétrer sur le système.</p></div><div class=paragraph><p>Les solutions aux problèmes de sécurité devraient toujours être mises en place suivant l’approche multi-couches de "la pelure d’oignon", elles peuvent être classées comme suit:</p></div><div class="olist arabic"><ol class=arabic><li><p>Sécuriser les comptes <code>root</code> et d’administration.</p></li><li><p>Sécuriser les serveurs exécutés avec les droits de <code>root</code> et les binaires suid/sgid.</p></li><li><p>Sécuriser les comptes utilisateurs.</p></li><li><p>Sécuriser le fichier des mots de passe.</p></li><li><p>Sécuriser le noyau, les périphériques et les systèmes de fichiers.</p></li><li><p>Installer un mécanisme de détection rapide des modifications inappropriées apportées au système.</p></li><li><p>La paranoïa.</p></li></ol></div><div class=paragraph><p>La section suivante de ce chapitre abordera de manière plus approfondie les points énoncés ci-dessus.</p></div></div></div><div class=sect1><h2 id=securing-freebsd>14.3. Securing FreeBSD <strong>Traduction en Cours </strong><a class=anchor href=#securing-freebsd></a></h2><div class=sectionbody></div></div><div class=sect1><h2 id=crypt>14.4. DES, MD5, et chiffrement<a class=anchor href=#crypt></a></h2><div class=sectionbody><div class=paragraph><p>Chaque utilisateur d’un système UNIX® possède un mot de passe associé à son compte. Il semble évident que ces mots de passe ne doivent être connus que de l’utilisateur et du système d’exploitation. Afin de conserver ces mots de passe secrets, ils sont chiffrés avec ce que l’on appelle un "hachage irréversible", ce qui signifie que le mot de passe peut être aisément chiffré mais pas déchiffré. En d’autres mots, ce que nous vous disions précédemment n’est même pas vrai: le système d’exploitation lui-même ne connaît pas <em>vraiment</em> le mot de passe. Il ne connaît que la forme <em>chiffrée</em> du mot de passe. La seule manière d’obtenir le mot de passe en <em>clair</em> est d’effectuer une recherche par force brute de tous les mots de passe possibles.</p></div><div class=paragraph><p>Malheureusement, la seule méthode sécurisée pour chiffrer les mots de passe quand UNIX® a vu le jour était basée sur DES, le "Data Encryption Standard" (standard de chiffrement des données). C’était un problème mineur pour les utilisateurs résidants aux Etats-Unis, mais puisque le code source de DES ne pouvait être exporté en dehors des Etats-Unis, FreeBSD dû trouver un moyen de respecter la législation américaine et de rester compatible avec les autres systèmes UNIX® qui utilisaient encore DES.</p></div><div class=paragraph><p>La solution fut de séparer les bibliothèques de chiffrement de façon à ce que les utilisateurs américains puissent installer les bibliothèques DES et utiliser DES, mais que les utilisateurs internationaux disposent d’une méthode de chiffrement non restreinte à l’exportation. C’est comment FreeBSD est venu à utiliser MD5 comme méthode de chiffrement par défaut. MD5 est reconnu comme étant plus sure que DES, l’installation de DES est proposée principalement pour des raisons de compatibilité.</p></div><div class=sect2><h3 id=_identifier_votre_mécanisme_de_chiffrement>14.4.1. Identifier votre mécanisme de chiffrement<a class=anchor href=#_identifier_votre_mécanisme_de_chiffrement></a></h3><div class=paragraph><p>Avant FreeBSD 4.4 <span class=filename>libcrypt.a</span> était un lien symbolique pointant sur la bibliothèque utilisée pour le chiffrement. FreeBSD 4.4 modifia <span class=filename>libcrypt.a</span> pour fournir une bibliothèque de hachage pour l’authentification des mots de passe configurable. Actuellement la bibliothèque supporte les fonctions de hachage DES, MD5 et Blowfish. Par défaut FreeBSD utilise MD5 pour chiffrer les mots de passe.</p></div><div class=paragraph><p>Il est relativement facile d’identifier quelle méthode de chiffrement FreeBSD utilise. Examiner les mots de passe chiffrés dans le fichier <span class=filename>/etc/master.passwd</span> est une méthode. Les mots de passe MD5 sont plus longs que les mots de passe DES, et commencent par les caractères <code>$1$</code>. Les mots de passe débutant par <code>$2$</code> sont chiffrés suivant la méthode Blowfish. Les mots de passe DES n’ont pas de caractéristique particulière, mais sont plus courts que les mots de passe MD5 et utilisent un alphabet de 64 caractères qui ne contient pas le caractère <code>$</code>, aussi une chaîne relativement courte qui ne commence pas par un dollar a donc de très fortes chances d’être un mot de passe DES.</p></div><div class=paragraph><p>Le format utilisé par les nouveaux mots de passe est contrôlé par la capacité de classe de session <code>passwd_format</code> dans <span class=filename>/etc/login.conf</span>, qui prend comme valeur <code>des</code>, <code>md5</code> ou <code>blf</code>. Voir la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=login.conf&amp;sektion=5&amp;format=html">login.conf(5)</a> pour plus d’information sur les capacités de classe de session.</p></div></div></div></div><div class=sect1><h2 id=one-time-passwords>14.5. Mots de passe non réutilisables<a class=anchor href=#one-time-passwords></a></h2><div class=sectionbody><div class=paragraph><p>S/Key est un système de mots de passe non réutilisables basé sur une fonction de hachage irréversible. FreeBSD utilise le hachage MD4 pour des raisons de compatibilité mais d’autres système utilisent MD5 et DES-MAC. S/Key fait partie du système de base de FreeBSD depuis la version 1.1.5 et est aussi utilisé sur un nombre toujours plus important d’autres systèmes d’exploitation. S/Key est une marque déposée de Bell Communications Research, Inc.</p></div><div class=paragraph><p>Depuis la version 5.0 de FreeBSD, S/Key a été remplacé par la fonction équivalente OPIE ("One-time Passwords In Everything" - Mots de passe non réutilisables dans toutes les applications). OPIE utilise le hachage MD5 par défaut.</p></div><div class=paragraph><p>Il existe trois types de mots de passe dont nous parlerons dans ce qui suit. Le premier est votre mot de passe UNIX® habituel ou mot de passe Kerberos; nous appellerons "mot de passe UNIX®". Le deuxième type est le mot de passe généré par les programmes S/Key <code>key</code> ou OPIE <a href="https://man.freebsd.org/cgi/man.cgi?query=opiekey&amp;sektion=1&amp;format=html">opiekey(1)</a> et reconnu par les programmes <code>keyinit</code> ou <a href="https://man.freebsd.org/cgi/man.cgi?query=opiepasswd&amp;sektion=1&amp;format=html">opiepasswd(1)</a> et l’invite de session; nous appellerons ceci un "mot de passe non réutilisable". Le dernier type de mot de passe est le mot de passe secret que vous donnez aux programmes <code>key</code>/<code>opiekey</code> (et parfois aux programmes <code>keyinit</code>/<code>opiepasswd</code>) qui l’utilisent pour générer des mots de passe non réutilisable; nous l’appellerons "mot de passe secret" ou tout simplement "mot de passe".</p></div><div class=paragraph><p>Le mot de passe secret n’a rien à voir avec votre mot de passe UNIX®; ils peuvent être identique, mais c’est déconseillé. Les mots de passe secret S/Key et OPIE ne sont pas limités à 8 caractères comme les anciens mots de passe UNIX®, ils peuvent avoir la longueur que vous désirez. Des mots de passe de six ou sept mots de long sont relativement communs. La plupart du temps, le système S/Key ou OPIE fonctionne de façon complètement indépendante du système de mot de passe UNIX®.</p></div><div class=paragraph><p>En plus du mot de passe, deux autres types de données sont importantes pour S/Key et OPIE. L’une d’elles est connue sous le nom de "germe" ("seed") ou "clé", formé de deux lettres et cinq chiffres. L’autre est ce que l’on appelle le "compteur d’itérations", un nombre compris entre 1 et 100. S/Key génère un mot de passe non réutilisable en concaténant le germe et le mot de passe secret, puis en appliquant la fonction de hachage MD4/MD5 autant de fois qu’indiqué par le compteur d’itérations, et en convertissant le résultat en six courts mots anglais. Ces six mots anglais constituent votre mot de passe non réutilisable. Le système d’authentification (principalement PAM) conserve une trace du dernier mot de passe non réutilisable utilisé, et l’utilisateur est authentifié si la valeur de hachage du mot de passe fourni par l’utilisateur est la même que celle du mot de passe précédent. Comme le hachage utilisé est irréversible, il est impossible de générer de mot de passe non réutilisable si on a surpris un de ceux qui a été utilisé avec succès; le compteur d’itérations est décrémenté après chaque ouverture de session réussie, de sorte que l’utilisateur et le programme d’ouverture de session restent en phase. Quand le compteur d’itération passe à 1, S/Key et OPIE doivent être réinitialisés.</p></div><div class=paragraph><p>Il y a trois programmes impliqués dans chacun des systèmes que nous aborderons plus bas. Les programmes <code>key</code> et <code>opiekey</code> ont pour paramètres un compteur d’itérations, un germe, et un mot de passe secret, et génère un mot de passe non réutilisable ou une liste de mots de passe non réutilisable. Les programmes <code>keyinit</code> et <code>opiepasswd</code> sont utilisés pour initialiser respectivement S/Key et OPIE, et pour modifier les mots de passe, les compteurs d’itérations, ou les germes; ils prennent pour paramètres soit un mot de passe secret, soit un compteur d’itérations, soit un germe, et un mot de passe non réutilisable. Le programme <code>keyinfo</code> ou <code>opieinfo</code> consulte le fichier d’identification correspondant (<span class=filename>/etc/skeykeys</span> ou <span class=filename>/etc/opiekeys</span>) et imprime la valeur du compteur d’itérations et le germe de l’utilisateur qui l’a invoqué.</p></div><div class=paragraph><p>Nous décrirons quatre sortes d’opérations. La première est l’utilisation du programme <code>keyinit</code> ou <code>opiepasswd</code> sur une connexion sécurisée pour initialiser les mots de passe non réutilisables pour la première fois, ou pour modifier votre mot de passe ou votre germe. La seconde opération est l’emploi des programmes <code>keyinit</code> ou <code>opiepasswd</code> sur une connexion non sécurisée, en conjonction avec <code>key</code> ou <code>opiekey</code> sur une connexion sécurisée, pour faire la même chose. La troisième est l’utilisation de <code>key</code>/<code>opiekey</code> pour ouvrir une session sur une connexion non sécurisée. La quatrième est l’emploi de <code>key</code> ou <code>opiekey</code> pour générer un certain nombre de clés qui peuvent être notées ou imprimées et emportées avec vous quand vous allez quelque part ou il n’y a aucune connexion sécurisée.</p></div><div class=sect2><h3 id=_initialisation_depuis_une_connexion_sécurisée>14.5.1. Initialisation depuis une connexion sécurisée<a class=anchor href=#_initialisation_depuis_une_connexion_sécurisée></a></h3><div class=paragraph><p>Pour initialiser S/Key pour la première fois, changer votre mot de passe, ou changer votre germe quand vous êtes attaché sous votre compte par l’intermédiaire d’une connexion sécurisée (e.g., sur la console d’une machine ou via ssh), utilisez la commande <code>keyinit</code> sans paramètres:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% keyinit
Adding unfurl:
Reminder - Only use this method <span class=k>if </span>you are directly connected.
If you are using telnet or rlogin <span class=nb>exit </span>with no password and use keyinit <span class=nt>-s</span><span class=nb>.</span>
Enter secret password:
Again secret password:

ID unfurl s/key is 99 to17757
DEFY CLUB PRO NASH LACE SOFT</code></pre></div></div><div class=paragraph><p>Pour OPIE, <code>opiepasswd</code> est utilisé à la place:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiepasswd <span class=nt>-c</span>
<span class=o>[</span>grimreaper] ~ <span class=nv>$ </span>opiepasswd <span class=nt>-f</span> <span class=nt>-c</span>
Adding unfurl:
Only use this method from the console<span class=p>;</span> NEVER from remote. If you are using
telnet, xterm, or a dial-in, <span class=nb>type</span> ^C now or <span class=nb>exit </span>with no password.
Then run opiepasswd without the <span class=nt>-c</span> parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:
ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED</code></pre></div></div><div class=paragraph><p>A l’invite <code>Enter new secret pass phrase:</code> ou <code>Enter secret password:</code>, vous devez entrer un mot de passe ou une phrase. Rappelez-vous que ce n’est pas le mot de passe que vous utiliserez pour ouvrir une session, mais celui utilisé pour générer vos clés non réutilisables. La ligne commençant par "ID" liste les paramètres de votre instance: votre nom d’utilisateur, la valeur de votre compteur d’itérations et votre germe. Quand vous ouvrirez une session, le système aura mémorisé ces paramètres et vous les redonnera, vous n’avez donc pas besoin de les retenir. La dernière ligne donne le mot de passe non réutilisable correspondant à ces paramètres et à votre mot de passe secret; si vous devez vous reconnectez immédiatement, c’est ce mot de passe que vous utiliseriez.</p></div></div><div class=sect2><h3 id=_initialisation_depuis_une_connexion_non_sécurisée>14.5.2. Initialisation depuis une connexion non sécurisée<a class=anchor href=#_initialisation_depuis_une_connexion_non_sécurisée></a></h3><div class=paragraph><p>Pour initialiser ou changer votre mot de passe secret par l’intermédiaire d’une connexion non sécurisée, il faudra avoir déjà une connexion sécurisée sur une machine où vous pouvez exécuter <code>key</code> ou <code>opiekey</code>; ce peut être depuis une icone sur le bureau d’un Macintosh ou depuis la ligne de commande d’une machine sûre. Il vous faudra également donner une valeur au compteur d’itération (100 est probablement une bonne valeur), et indiquer un germe ou utiliser la valeur aléatoire générée par le programme. Sur la connexion non sécurisée (vers la machine que vous initialisez), employez la commande <code>keyinit -s</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% keyinit <span class=nt>-s</span>
Updating unfurl:
Old key: to17758
Reminder you need the 6 English words from the key command.
Enter sequence count from 1 to 9999: 100
Enter new key <span class=o>[</span>default to17759]:
s/key 100 to 17759
s/key access password:
s/key access password:CURE MIKE BANE HIM RACY GORE</code></pre></div></div><div class=paragraph><p>Pour OPIE, vous devez utiliser <code>opiepasswd</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiepasswd

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY</code></pre></div></div><div class=paragraph><p>Pour accepter le germe par défaut (que le programme <code>keyinit</code> appelle <code>key</code>, ce qui prête à confusion), appuyez sur <kbd>Entrée</kbd>. Ensuite avant d’entrer un mot de passe d’accès, passez sur votre connexion sécurisée et donnez lui les mêmes paramètres:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% key 100 to17759
Reminder - Do not use this program <span class=k>while </span>logged <span class=k>in </span>via telnet or rlogin.
Enter secret password: &lt;secret password&gt;
CURE MIKE BANE HIM RACY GORE</code></pre></div></div><div class=paragraph><p>Ou pour OPIE:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey 498 to4268
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</span></code></pre></div></div><div class=paragraph><p>Retournez maintenant sur votre connexion non sécurisée, et copiez le mot de passe non réutilisable généré par le programme adapté.</p></div></div><div class=sect2><h3 id=_générer_un_unique_mot_de_passe_non_réutilisable>14.5.3. Générer un unique mot de passe non réutilisable<a class=anchor href=#_générer_un_unique_mot_de_passe_non_réutilisable></a></h3><div class=paragraph><p>Une fois que vous avez initialisé S/Key ou OPIE, lorsque que vous ouvrez une session, une invite de ce type apparaîtra:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% telnet example.com
Trying 10.0.0.1...
Connected to example.com
Escape character is <span class=s1>&#39;^]&#39;</span><span class=nb>.</span>

FreeBSD/i386 <span class=o>(</span>example.com<span class=o>)</span> <span class=o>(</span>ttypa<span class=o>)</span>

login: &lt;username&gt;
s/key 97 fw13894
Password:</code></pre></div></div><div class=paragraph><p>Ou pour OPIE:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% telnet example.com
Trying 10.0.0.1...
Connected to example.com
Escape character is <span class=s1>&#39;^]&#39;</span><span class=nb>.</span>

FreeBSD/i386 <span class=o>(</span>example.com<span class=o>)</span> <span class=o>(</span>ttypa<span class=o>)</span>

login: &lt;username&gt;
otp-md5 498 gr4269 ext
Password:</code></pre></div></div><div class=paragraph><p>Les invites S/Key et OPIE disposent d’une fonction utile (qui n’est pas illustrée ici): si vous appuyez sur la touche <kbd>Entrée</kbd> lorsque l’on vous demande votre mot de passe, le programme active l’écho au terminal, de sorte que vous voyez ce que vous êtes en train de taper. Ceci est très utile si vous essayez de taper un mot de passe à la main, à partir d’un résultat imprimé par exemple.</p></div><div class=paragraph><p>A ce moment vous devez générer votre mot de passe non réutilisable pour répondre à cette invite de session. Cela doit être effectué sur une machine de confiance sur laquelle vous pouvez exécuter <code>key</code> ou <code>opiekey</code> (il y a des versions de ces programmes pour DOS, Windows et MacOS). Ces programmes ont besoin du compteur d’itérations et du germe comme paramètres. Vous pouvez les copier-coller de l’invite de session de la machine sur laquelle vous voulez ouvrir une session.</p></div><div class=paragraph><p>Sur le système sûr:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% key 97 fw13894
Reminder - Do not use this program <span class=k>while </span>logged <span class=k>in </span>via telnet or rlogin.
Enter secret password:
WELD LIP ACTS ENDS ME HAAG</code></pre></div></div><div class=paragraph><p>Pour OPIE:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey 498 to4268
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</span></code></pre></div></div><div class=paragraph><p>Maintenant que vous disposez de votre mot de passe non réutilisable vous pouvez continuer et vous connecter:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>login: &lt;username&gt;
s/key 97 fw13894
Password: &lt;<span class=k>return </span>to <span class=nb>enable echo</span><span class=o>&gt;</span>
s/key 97 fw13894
Password <span class=o>[</span><span class=nb>echo </span>on]: WELD LIP ACTS ENDS ME HAAG
Last login: Tue Mar 21 11:56:41 from 10.0.0.2 ...</code></pre></div></div></div><div class=sect2><h3 id=_générer_de_multiples_mots_de_passe_non_réutilisables>14.5.4. Générer de multiples mots de passe non réutilisables<a class=anchor href=#_générer_de_multiples_mots_de_passe_non_réutilisables></a></h3><div class=paragraph><p>Il faut parfois se rendre en des endroits où vous n’avez pas accès à une machine de confiance ou à une connexion sécurisée. Dans ce cas, vous pouvez utiliser la commande <code>key</code> ou <code>opiekey</code> pour générer plusieurs mots de passe non réutilisables que vous pouvez imprimer et transporter avec vous. Par exemple:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% key <span class=nt>-n</span> 5 30 zz99999
Reminder - Do not use this program <span class=k>while </span>logged <span class=k>in </span>via telnet or rlogin.
Enter secret password: &lt;secret password&gt;
26: SODA RUDE LEA LIND BUDD SILT
27: JILT SPY DUTY GLOW COWL ROT
28: THEM OW COLA RUNT BONG SCOT
29: COT MASH BARR BRIM NAN FLAG
30: CAN KNEE CAST NAME FOLK BILK</code></pre></div></div><div class=paragraph><p>Ou pour OPIE:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey <span class=nt>-n</span> 5 30 zz99999
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: &lt;secret password&gt;
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</span></code></pre></div></div><div class=paragraph><p>L’option <code>-n 5</code> demande cinq clés en séquence, l’option <code>30</code> indique quel doit être le rang de la dernière itération. Notez que les clés sont imprimées dans l’ordre <em>inverse</em> de celui où elles seront éventuellement utilisées. Si vous êtes vraiment paranoïaque, vous pouvez les recopier à la main, sinon vous pouvez les copier-coller vers la commande <code>lpr</code>. Remarquez que chaque ligne liste le compteur d’itération et le mot de passe non réutilisable; vous trouverez peut-être utile de rayer les mots de passe au fur et à mesure de leur utilisation.</p></div></div><div class=sect2><h3 id=_restreindre_lutilisation_des_mots_de_passe_unix>14.5.5. Restreindre l’utilisation des mots de passe UNIX®<a class=anchor href=#_restreindre_lutilisation_des_mots_de_passe_unix></a></h3><div class=paragraph><p>S/Key peut placer des restrictions sur l’utilisation des mots de passe UNIX® en fonction des noms de machine, d’utilisateur, de la ligne utilisée par le terminal ou de l’adresse IP de la machine connectée à distance. Ces restrictions peuvent être trouvées dans le fichier de configuration <span class=filename>/etc/skey.access</span>. La page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=skey.access&amp;sektion=5&amp;format=html">skey.access(5)</a> donne de plus amples informations sur le format de ce fichier et elle détaille également certains avertissements relatifs à la sécurité qu’il faut lire avant de se fier à ce fichier pour sa sécurité.</p></div><div class=paragraph><p>S’il n’y a pas de fichier <span class=filename>/etc/skey.access</span> (ce qui est le cas par défaut sur les systèmes FreeBSD 4.X), tous les utilisateurs pourront se servir de mots de passe UNIX®. Si le fichier existe, alors tous les utilisateurs devront passer par S/Key, à moins qu’ils ne soient explicitement autorisés à ne pas le faire par des instructions du fichier <span class=filename>/etc/skey.access</span>. Dans tous les cas l’usage des mots de passe UNIX® est autorisé sur la console.</p></div><div class=paragraph><p>Voici un exemple de configuration du fichier <span class=filename>skey.access</span> qui illustre les trois types d’instructions les plus courantes:</p></div><div class="literalblock programlisting"><div class=content><pre>permit internet 192.168.0.0 255.255.0.0
permit user fnord
permit port ttyd0</pre></div></div><div class=paragraph><p>La première ligne (<code>permit internet</code>) autorise les utilisateurs dont l’adresse IP (ce qui rend vulnérable en cas d’usurpation) appartient au sous-réseau spécifié à employer les mots de passe UNIX®. Cela ne doit pas être considéré comme une mesure de sécurité, mais plutôt comme un moyen de rappeler aux utilisateurs autorisés qu’ils sont sur un réseau non sécurisé et doivent utiliser S/Key pour s’authentifier.</p></div><div class=paragraph><p>La seconde ligne (<code>permit user</code>) autorise l’utilisateur désigné, dans notre cas <code>fnord</code>, à employer n’importe quand les mots de passe UNIX®. En général, il faut se servir de cette possibilité si les personnes soit n’ont pas moyen d’utiliser le programme <code>key</code>, s’ils ont par exemple des terminaux passifs, soit s’ils sont définitivement réfractaires au système.</p></div><div class=paragraph><p>La troisième ligne (<code>permit port</code>) autorise tous les utilisateurs d’un terminal sur une liaison particulière à utiliser les mots de passe UNIX®; cela devrait être employé pour les connexions téléphoniques.</p></div><div class=paragraph><p>OPIE peut restreindre l’usage des mots de passe UNIX® sur la base de l’adresse IP lors de l’ouverture d’une session comme peut le faire S/Key. Le fichier impliqué est <span class=filename>/etc/opieaccess</span>, qui est présent par défaut sous FreeBSD 5.0 et versions suivantes. Veuillez consulter la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=opieaccess&amp;sektion=5&amp;format=html">opieaccess(5)</a> pour plus d’information sur ce fichier et certaines considérations sur la sécurité dont vous devez être au courant en l’utilisant.</p></div><div class=paragraph><p>Voici un exemple de fichier <span class=filename>opieaccess</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>permit 192.168.0.0 255.255.0.0</pre></div></div><div class=paragraph><p>Cette ligne autorise les utilisateurs dont l’adresse IP (ce qui rend vulnérable en cas d’usurpation) appartient au sous-réseau spécifié à employer les mots de passe UNIX® à tout moment.</p></div><div class=paragraph><p>Si aucune règle du fichier <span class=filename>opieaccess</span> ne correspond, le comportement par défaut est de refuser toute ouverture de session non-OPIE.</p></div></div></div></div><div class=sect1><h2 id=tcpwrappers>14.6. L’encapsuleur TCP ("TCP Wrappers")<a class=anchor href=#tcpwrappers></a></h2><div class=sectionbody><div class=paragraph><p>Toute personne familière avec <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> a probablement entendu parlé à un moment ou à un autre de l’encapsuleur TCP ("TCP Wrappers"). Mais peu sont ceux qui semblent saisir complètement son intérêt dans un réseau. Il semble que tout le monde désire installer un coupe-feu pour contrôler les connexions réseaux. Alors qu’un coupe-feu peut avoir de nombreuses utilisations, il existe des choses qu’un coupe-feu ne peut gérer comme renvoyer un message à l’initiateur d’une connexion. L’encapsuleur TCP en est capable ainsi que bien d’autres choses. Dans les sections suivantes plusieurs fonctionnalités de l’encapsuleur TCP seront abordées, et, dès que ce sera possible, un exemple de configuration sera proposé.</p></div><div class=paragraph><p>L’encapsuleur TCP étend les capacités d’inetd au niveau du support pour chaque serveur sous son contrôle. En utilisant cette méthode il est possible d’offrir le support des ouvertures de session, de retourner des messages lors des connexions, de permettre à un "daemon" de n’accepter que les connexions internes, etc. Bien que certaines de ces fonctionnalités peuvent être obtenues par l’implémentation d’un coupe-feu, ce système ajoutera non seulement une couche supplémentaire de protection mais ira plus loin dans le contrôle que ce que peut fournir un coupe-feu.</p></div><div class=paragraph><p>Les fonctionnalités apportées par l’encapsuleur TCP ne peuvent se substituer à l’utilisation d’un bon coupe-feu. L’encapsuleur TCP peut être utilisé de paire avec un coupe-feu ou tout autre système de sécurité et il pourra alors servir comme une couche supplémentaire de protection pour le système.</p></div><div class=paragraph><p>Etant donné que ce programme est une extension à la configuration du programme inetd, le lecteur est supposé avoir pris connaissance de la section de <a href=../network-servers/#network-inetd>configuration d’inetd</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Bien que les programmes lancés par <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> ne soient pas tout à fait des "daemons", ils sont traditionnellement appelés "daemons". C’est le terme que nous utiliserons également dans le reste de cette section.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=_configuration_initiale>14.6.1. Configuration initiale<a class=anchor href=#_configuration_initiale></a></h3><div class=paragraph><p>Le seul pré-requis à l’utilisation de l’encapsuleur TCP sous FreeBSD est de s’assurer que le serveur inetd est lancé à partir de <span class=filename>rc.conf</span> avec l’option <code>-Ww</code>; c’est la configuration par défaut. Bien évidemment une configuration correcte du fichier <span class=filename>/etc/hosts.allow</span> est également sous-entendue, mais dans le cas contraire <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> émettra des messages d’avertissement dans les journaux du système.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Contrairement à d’autres implémentations de l’encapsuleur TCP, l’emploi du fichier <span class=filename>hosts.deny</span> est obsolète. Toutes les options de configuration doivent être placées dans le fichier <span class=filename>/etc/hosts.allow</span>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Dans la configuration la plus simple, la politique de connexion aux "daemons" est soit de tout autoriser ou soit de tout bloquer en fonctions des options choisies dans <span class=filename>/etc/hosts.allow</span>. La configuration par défaut sous FreeBSD est d’autoriser les connexions à chaque "daemon" lancé à l’aide d’inetd. La modification de ce réglage par défaut sera discutée une fois que la configuration de base aura été vue.</p></div><div class=paragraph><p>Une configuration de base prend en général la forme <code>daemon : adresse : action</code>. Où <code>daemon</code> est le nom du "daemon" lancé par inetd. L'<code>adresse</code> peut être un nom de machine valide, une adresse IP ou une adresse IPv6 entre crochets ([ ]). Le champ <code>action</code> pourra avoir comme valeur <code>allow</code> ou <code>deny</code> pour autoriser ou interdire l’accès. Gardez à l’esprit que ce type de configuration fonctionne de manière à honorer la première règle sémantique correspondante, cela signifie que le fichier de configuration est parcouru à la recherche d’une règle correspondant à la requête. Quand une correspondance est trouvée, la règle est appliquée et la recherche s’arrête.</p></div><div class=paragraph><p>Plusieurs autres options existent mais elles seront exposées dans une section ultérieure. Une simple ligne de configuration peut être construite avec peu d’information. Par exemple, pour autoriser les connexions POP3 via le "daemon"<a class=package href=https://cgit.freebsd.org/ports/tree/mail/qpopper/>mail/qpopper</a>, les lignes suivantes doivent être ajoutées au fichier <span class=filename>hosts.allow</span>:</p></div><div class="literalblock programlisting"><div class=content><pre># This line is required for POP3 connections:
qpopper : ALL : allow</pre></div></div><div class=paragraph><p>Après l’ajout de cette ligne, inetd devra être redémarré. Cela sera fait en utilisant la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=kill&amp;sektion=1&amp;format=html">kill(1)</a>, ou avec le passage du paramètre <span class=parameter>restart</span> à la commande <span class=filename>/etc/rc.d/inetd</span>.</p></div></div><div class=sect2><h3 id=_configuration_avancée>14.6.2. Configuration avancée<a class=anchor href=#_configuration_avancée></a></h3><div class=paragraph><p>L’encapsuleur TCP dispose également d’options avancées; elles permettrons plus de contrôle sur la manière dont sont gérées les connexions. Dans certains cas cela peut être une bonne idée de renvoyer un commentaire à certaines machines ou lors de connexions à certains "daemon"s. Dans d’autres cas, peut-être qu’un fichier journal pourrait être enregistré ou un courrier électronique pourrait être envoyé à l’administrateur. D’autres situations peuvent nécessiter l’utilisation d’un service uniquement pour les connexions locales. Tout cela est possible à l’aide des options de configuration connues sous le nom de <code>jokers</code>, caractères d’expansion et d’exécution de commandes externes. Les deux sections suivantes abordent ces situations.</p></div><div class=sect3><h4 id=_commandes_externes>14.6.2.1. Commandes externes<a class=anchor href=#_commandes_externes></a></h4><div class=paragraph><p>Imaginez une situation dans laquelle une connexion doit être refusée et que la raison de ce refus doit être envoyée à la personne qui a tenté d’établir cette connexion. Comment cela peut-il être mis en place? Ce type d’action est rendu possible par l’emploi de l’option <code>twist</code>. Quand une tentative de connexion est faite, <code>twist</code> sera appelée pour exécuter une commande ou une procédure d’interpréteur de commande. Un exemple est déjà présent dans le fichier <span class=filename>hosts.allow</span>:</p></div><div class="literalblock programlisting"><div class=content><pre># The rest of the daemons are protected.
ALL : ALL \
        : severity auth.info \
        : twist /bin/echo &#34;You are not welcome to use %d from %h.&#34;</pre></div></div><div class=paragraph><p>Cet exemple montre que le message "You are not allowed to use <code>daemon</code> from <code>hostname</code>." sera retourné pour tout "daemon" qui n’a pas été précédemment configuré dans le fichier d’accès. Cette fonction est très utile pour envoyer une réponse à l’initiateur de la connexion juste après le refus de la connexion. Notez que tout message à retourner <em>doit</em> être placé entre des guillemets <code>"</code>; il n’y a pas d’exception possible à cette règle.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Il est possible de lancer une attaque par déni de service sur le serveur si un agresseur, ou un groupe d’agresseurs sont en mesure de submerger ces "daemon"s avec des demandes de connexion.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Une autre possibilité dans ce cas est d’employer l’option <code>spawn</code>. Tout comme l’option <code>twist</code>, <code>spawn</code> interdit implicitement les connexions et peut être utilisée pour lancer une commande ou une procédure externe. Contrairement à <code>twist</code>, <code>spawn</code> n’enverra pas de réponse à la personne qui a établi la connexion. Examinons par exemple la ligne de configuration suivante:</p></div><div class="literalblock programlisting"><div class=content><pre># We do not allow connections from example.com:
ALL : .example.com \
	: spawn (/bin/echo %a from %h attempted to access %d  \
	  /var/log/connections.log) \
	: deny</pre></div></div><div class=paragraph><p>Cela interdira toute tentative de connexion à partir du domaine <code>*.example.com</code>, enregistrant simultanément dans le fichier <span class=filename>/var/log/connections.log</span> le nom de machine, l’adresse IP et le "daemon" auquel on tente d’accéder.</p></div><div class=paragraph><p>Il existe d’autres caractères de substitution en dehors de ceux déjà présentés, par exemple <code>%a</code>. Consultez la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a> pour une liste complète.</p></div></div><div class=sect3><h4 id=_les_options_jokers>14.6.2.2. Les options jokers<a class=anchor href=#_les_options_jokers></a></h4><div class=paragraph><p>Jusqu’ici l’option <code>ALL</code> a été utilisée dans tous les exemples. Il existe d’autres options pour étendre un peu plus les fonctionnalités. Par exemple, l’option <code>ALL</code> peut être utilisée pour prendre en compte chaque instance d’un "daemon", d’un domaine ou d’une adresse IP. Un autre joker disponible est l’option <code>PARANOID</code> qui peut être employée pour prendre en compte toute machine qui fournirait une adresse IP susceptible d’être falsifiée. En d’autres termes, l’option <code>PARANOID</code> peut être utilisée pour définir l’action a effectuer dès qu’une connexion se fait à partir d’une adresse IP qui diffère de celle attachée à une machine. L’exemple suivant apporte un éclairage sur cette option:</p></div><div class="literalblock programlisting"><div class=content><pre># Block possibly spoofed requests to sendmail:
sendmail : PARANOID : deny</pre></div></div><div class=paragraph><p>Dans cet exemple, toutes les requêtes de connexion à sendmail à partir d’adresses IP différentes de celle correspondant au nom de la machine seront refusées.</p></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content><div class=paragraph><p>Utiliser l’option <code>PARANOID</code> peut gravement paralyser les serveurs si le client ou le serveur a une configuration de DNS défectueuse. Les administrateurs sont maintenant prévenus.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Pour en apprendre plus sur les jokers et leurs fonctionnalités associées, consultez la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a>.</p></div><div class=paragraph><p>Avant que n’importe quelle des lignes de configuration données ci-dessus ne fonctionne, la première ligne de configuration du fichier <span class=filename>hosts.allow</span> devra être dé-commentée. Cela a été noté en début de section.</p></div></div></div></div></div><div class=sect1><h2 id=kerberosIV>14.7. Kerberos<a class=anchor href=#kerberosIV></a></h2><div class=sectionbody><div class=paragraph><p>Kerberos est un protocole réseau supplémentaire qui permet aux utilisateurs de s’authentifier par l’intermédiaire d’un serveur sécurisé. Des services comme l’ouverture de session et la copie à distance, la copie sécurisée de fichiers entre systèmes et autres fonctionnalités à haut risque deviennent ainsi considérablement plus sûrs et contrôlables.</p></div><div class=paragraph><p>Les instructions qui suivent peuvent être utilisées comme guide d’installation de Kerberos dans la version distribuée pour FreeBSD. Vous devriez cependant vous référer aux pages de manuel correspondantes pour avoir une description complète.</p></div><div class=sect2><h3 id=_installation_de_kerberos>14.7.1. Installation de Kerberos<a class=anchor href=#_installation_de_kerberos></a></h3><div class=paragraph><p>Kerberos est un composant optionnel de FreeBSD. La manière la plus simple d’installer ce logiciel est de sélectionner la distribution <code>krb4</code> ou <code>krb5</code> dans sysinstall lors de l’installation de FreeBSD. Cela installera les implémentations "eBones" (KerberosIV) ou "Heimdal" (Kerberos5) de Kerberos. Ces implémentations sont distribuées car elles sont développées en dehors des USA ou du Canada et étaient par conséquent disponibles aux utilisateurs hors de ces pays durant l’ère restrictive du contrôle des exportations de code de chiffrement à partir des USA.</p></div><div class=paragraph><p>Alternativement, l’implémentation du MIT de Kerberos est disponible dans le catalogue des logiciels portés sous <a class=package href=https://cgit.freebsd.org/ports/tree/security/krb5/>security/krb5</a>.</p></div></div><div class=sect2><h3 id=_créer_la_base_de_données_initiale>14.7.2. Créer la base de données initiale<a class=anchor href=#_créer_la_base_de_données_initiale></a></h3><div class=paragraph><p>Cela se fait uniquement sur le serveur Kerberos. Vérifiez tout d’abord qu’il ne traîne pas d’anciennes bases Kerberos. Allez dans le répertoire <span class=filename>/etc/kerberosIV</span> et assurez-vous qu’il ne contient que les fichiers suivants:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /etc/kerberosIV</span>
<span class=c># ls</span>
README		krb.conf        krb.realms</code></pre></div></div><div class=paragraph><p>S’il y a d’autres fichiers (comme <span class=filename>principal.*</span> ou <span class=filename>master_key</span>), utilisez alors la commande <code>kdb_destroy</code> pour supprimer l’ancienne base de données Kerberos, ou si Kerberos ne tourne pas, effacez simplement les fichiers supplémentaires.</p></div><div class=paragraph><p>Vous devez maintenant éditer les fichiers <span class=filename>krb.conf</span> et <span class=filename>krb.realms</span> pour définir votre domaine Kerberos. Dans notre cas, le domaine sera <code>EXAMPLE.COM</code> et le serveur <code>grunt.example.com</code>. Nous éditons ou créons le fichier <span class=filename>krb.conf</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat krb.conf</span>
EXAMPLE.COM
EXAMPLE.COM grunt.example.com admin server
CS.BERKELEY.EDU okeeffe.berkeley.edu
ATHENA.MIT.EDU kerberos.mit.edu
ATHENA.MIT.EDU kerberos-1.mit.edu
ATHENA.MIT.EDU kerberos-2.mit.edu
ATHENA.MIT.EDU kerberos-3.mit.edu
LCS.MIT.EDU kerberos.lcs.mit.edu
TELECOM.MIT.EDU bitsy.mit.edu
ARC.NASA.GOV trident.arc.nasa.gov</code></pre></div></div><div class=paragraph><p>Dans notre cas les autres domaines n’ont pas besoin d’être mentionnés. Ils ne sont là que pour montrer comment une machine peut avoir connaissance de plusieurs domaines. Pour plus de simplicité, vous pouvez ne pas les inclure.</p></div><div class=paragraph><p>La première ligne indique pour quel domaine cette machine agit. Les autre lignes définissent les autres domaines/machines. Le premier élément sur une ligne est le domaine, le second le nom de la machine qui est le "centre de distribution de clés" de ce domaine. Les mots <code>admin server</code> qui suivent un nom de machine signifient que la machine est aussi serveur d’administration de la base de données. Pour plus d’explication sur cette terminologie, consultez les pages de manuel de Kerberos.</p></div><div class=paragraph><p>Nous devons maintenant ajouter <code>grunt.example.com</code> au domaine <code>EXAMPLE.COM</code> et ajouter une entrée pour mettre toutes les machines du domaine DNS <code>.example.com</code> dans le domaine Kerberos <code>EXAMPLE.COM</code>. Le fichier <span class=filename>krb.realms</span> aura alors l’allure suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat krb.realms</span>
grunt.example.com EXAMPLE.COM
.example.com EXAMPLE.COM
.berkeley.edu CS.BERKELEY.EDU
.MIT.EDU ATHENA.MIT.EDU
.mit.edu ATHENA.MIT.EDU</code></pre></div></div><div class=paragraph><p>Encore une fois, les autres domaines n’ont pas besoin d’être mentionnés. Ils ne sont là que pour montrer comment une machine peut avoir connaissance de plusieurs domaines. Pour plus de simplicité, vous pouvez ne pas les inclure.</p></div><div class=paragraph><p>La première ligne assigne un système <em>particulier</em> au domaine désigné. Les lignes restantes montrent comment affecter par défaut les systèmes d’un sous-domaine DNS particulier à un domaine Kerberos donné.</p></div><div class=paragraph><p>Nous sommes maintenant prêt pour la création de la base de données. Il n’y a à le faire que sur le serveur Kerberos (ou Centre de Distribution de Clés). Cela se fait avec la commande <code>kdb_init</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_init</span>
Realm name <span class=o>[</span>default  ATHENA.MIT.EDU <span class=o>]</span>: EXAMPLE.COM
You will be prompted <span class=k>for </span>the database Master Password.
It is important that you NOT FORGET this password.

Enter Kerberos master key:</code></pre></div></div><div class=paragraph><p>Nous devons maintenant sauvegarder la clé pour que les serveurs sur la machine locale puissent la lire. Utilisons la commande <code>kstash</code> pour faire cela:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kstash</span>

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered. BEWARE!</code></pre></div></div><div class=paragraph><p>Le mot de passe maître chiffré est sauvegardé dans <span class=filename>/etc/kerberosIV/master_key</span>.</p></div></div><div class=sect2><h3 id=_installer_les_services>14.7.3. Installer les services<a class=anchor href=#_installer_les_services></a></h3><div class=paragraph><p>Il faut ajouter deux entrées ("principals") à la base de données pour <em>chaque</em> système qui sera sécurisé par Kerberos. Ce sont <code>kpasswd</code> et <code>rcmd</code>. Ces deux entrées sont définies pour chaque système, chacune de leurs instances se voyant attribuer le nom du système.</p></div><div class=paragraph><p>Ces "daemons", kpasswd et rcmd permettent aux autres systèmes de changer les mots de passe Kerberos et d’exécuter des commandes comme <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a>, et <a href="https://man.freebsd.org/cgi/man.cgi?query=rsh&amp;sektion=1&amp;format=html">rsh(1)</a>.</p></div><div class=paragraph><p>Ajoutons donc maintenant ces entrées:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_edit</span>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are <span class=k>in</span> <span class=o>[</span>brackets] ,
enter <span class=k>return </span>to leave the same, or new value.

Principal name: passwd
Instance: grunt

&lt;Not found&gt;, Create <span class=o>[</span>y] ? y

Principal: passwd, Instance: grunt, kdc_key_ver: 1
New Password:                    &lt;<span class=nt>----</span> entrez RANDOM ici
Verifying password

New Password: &lt;<span class=nt>----</span> enter RANDOM here

Random password <span class=o>[</span>y] ? y

Principal<span class=s1>&#39;s new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name: rcmd
Instance: grunt

&lt;Not found&gt;, Create [y] ?

Principal: rcmd, Instance: grunt, kdc_key_ver: 1
New Password:		&lt;---- entrez RANDOM ici
Verifying password

New Password:           &lt;---- entrez RANDOM ici

Random password [y] ?

Principal&#39;</span>s new key version <span class=o>=</span> 1
Expiration <span class=nb>date</span> <span class=o>(</span>enter yyyy-mm-dd<span class=o>)</span> <span class=o>[</span> 2000-01-01 <span class=o>]</span> ?
Max ticket lifetime <span class=o>(</span><span class=k>*</span>5 minutes<span class=o>)</span> <span class=o>[</span> 255 <span class=o>]</span> ?
Attributes <span class=o>[</span> 0 <span class=o>]</span> ?
Edit O.K.
Principal name:         &lt;<span class=nt>----</span> ne rien entrer ici permet de quitter le programme</code></pre></div></div></div><div class=sect2><h3 id=_créer_le_fichier_des_services>14.7.4. Créer le fichier des services<a class=anchor href=#_créer_le_fichier_des_services></a></h3><div class=paragraph><p>Il faut maintenant extraire les instances qui définissent les services sur chaque machine. Pour cela on utilise la commande <code>ext_srvtab</code>. Cela créera un fichier qui doit être copié ou déplacé <em>par un moyen sûr</em> dans le répertoire <span class=filename>/etc/kerberosIV</span> de chaque client Kerberos. Ce fichier doit être présent sur chaque serveur et client, et est crucial au bon fonctionnement de Kerberos.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ext_srvtab grunt</span>
Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered. BEWARE!
Generating <span class=s1>&#39;grunt-new-srvtab&#39;</span>....</code></pre></div></div><div class=paragraph><p>Cette commande ne génère qu’un fichier temporaire qui doit être renommé en <span class=filename>srvtab</span> pour que tous les serveurs puissent y accéder. Utilisez la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=mv&amp;sektion=1&amp;format=html">mv(1)</a> pour l’installer sur le système d’origine:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mv grunt-new-srvtab srvtab</span></code></pre></div></div><div class=paragraph><p>Si le fichier est destiné à un client, et que le réseau n’est pas considéré comme sûr, alors copiez le fichier <span class=filename>client-new-srvtab</span> sur un support amovible et transportez-le par un moyen physiquement sûr. Assurez-vous de le renommer en <span class=filename>srvtab</span> dans le répertoire <span class=filename>/etc/kerberosIV</span> du client, et mettez-le bien en mode 600:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mv grumble-new-srvtab srvtab</span>
<span class=c># chmod 600 srvtab</span></code></pre></div></div></div><div class=sect2><h3 id=_renseigner_la_base_de_données>14.7.5. Renseigner la base de données<a class=anchor href=#_renseigner_la_base_de_données></a></h3><div class=paragraph><p>Nous devons maintenant créer des entrées utilisateurs dans la base de données. Tout d’abord créons une entrée pour l’utilisateur <code>jane</code>. Utilisez la commande <code>kdb_edit</code> pour cela:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_edit</span>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are <span class=k>in</span> <span class=o>[</span>brackets] ,
enter <span class=k>return </span>to leave the same, or new value.

Principal name: jane
Instance:

&lt;Not found&gt;, Create <span class=o>[</span>y] ? y

Principal: jane, Instance: , kdc_key_ver: 1
New Password:                &lt;<span class=nt>----</span> entrez un mot de passe sûr ici
Verifying password

New Password:                &lt;<span class=nt>----</span> réentrez le mot de passe sûr là
Principal<span class=s1>&#39;s new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name:		   &lt;---- ne rien entrer ici permet de quitter le programme</span></code></pre></div></div></div><div class=sect2><h3 id=_tester_lensemble>14.7.6. Tester l’ensemble<a class=anchor href=#_tester_lensemble></a></h3><div class=paragraph><p>Il faut tout d’abord démarrer les "daemons" Kerberos. Notez que si vous avez correctement modifié votre fichier <span class=filename>/etc/rc.conf</span>, cela se fera automatiquement au redémarrage du système. Ceci n’est nécessaire que sur le serveur Kerberos. Les clients Kerberos récupéreront automatiquement les informations dont ils ont besoin via leur répertoire <span class=filename>/etc/kerberosIV</span>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kerberos &amp;</span>
Kerberos server starting
Sleep forever on error
Log file is /var/log/kerberos.log
Current Kerberos master key version is 1.

Master key entered. BEWARE!

Current Kerberos master key version is 1
Local realm: EXAMPLE.COM
<span class=c># kadmind -n &amp;</span>
KADM Server KADM0.0A initializing
Please <span class=k>do </span>not use <span class=s1>&#39;kill -9&#39;</span> to <span class=nb>kill </span>this job, use a
regular <span class=nb>kill </span>instead

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</code></pre></div></div><div class=paragraph><p>Nous pouvons maintenant utiliser la commande <code>kinit</code> pour obtenir un "ticket d’entrée" pour l’utilisateur <code>jane</code> que nous avons créé plus haut:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit jane
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Kerberos Initialization <span class=k>for</span> <span class=s2>&#34;jane&#34;</span>
Password:</code></pre></div></div><div class=paragraph><p>Essayons de lister les informations associées avec la commande <code>klist</code> pour voir si nous avons vraiment tout ce qu’il faut:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% klist
Ticket file:    /tmp/tkt245
Principal:      jane@EXAMPLE.COM

  Issued           Expires          Principal
Apr 30 11:23:22  Apr 30 19:23:22  krbtgt.EXAMPLE.COM@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>Essayons maintenant de modifier le mot de passe en utilisant la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> pour vérifier si le "daemon" kpasswd est autorisé à accéder à la base de données Kerberos:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% passwd
realm EXAMPLE.COM
Old password <span class=k>for </span>jane:
New Password <span class=k>for </span>jane:
Verifying password
New Password <span class=k>for </span>jane:
Password changed.</code></pre></div></div></div><div class=sect2><h3 id=_autoriser_lutilisation_de_la_commande_su>14.7.7. Autoriser l’utilisation de la commande <code>su</code><a class=anchor href=#_autoriser_lutilisation_de_la_commande_su></a></h3><div class=paragraph><p>Kerberos permet d’attribuer à <em>chaque</em> utilisateur qui a besoin des droits du super-utilisateur son <em>propre</em> mot de passe <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a>. Nous pouvons créer un identifiant qui est autorisé à utiliser <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> pour devenir <code>root</code>. Cela se fait en associant une instance <code>root</code> un identificateur ("principal") de base. En utilisant la commande <code>kdb_edit</code> nous pouvons créer l’entrée <code>jane.root</code> dans la base de données Kerberos:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_edit</span>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are <span class=k>in</span> <span class=o>[</span>brackets] ,
enter <span class=k>return </span>to leave the same, or new value.

Principal name: jane
Instance: root

&lt;Not found&gt;, Create <span class=o>[</span>y] ? y

Principal: jane, Instance: root, kdc_key_ver: 1
New Password:                    &lt;<span class=nt>----</span> entrez un mot de passe SUR ici
Verifying password

New Password:    	 	 &lt;<span class=nt>----</span> réentrez le mot de passe ici

Principal<span class=s1>&#39;s new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ? 12 &lt;--- Laissez une valeur faible!
Attributes [ 0 ] ?
Edit O.K.
Principal name:		         &lt;---- ne rien entrer ici permet de quitter le programme</span></code></pre></div></div><div class=paragraph><p>Vérifions maintenant les caractéristiques associées pour voir si cela fonctionne:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kinit jane.root</span>
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Kerberos Initialization <span class=k>for</span> <span class=s2>&#34;jane.root&#34;</span>
Password:</code></pre></div></div><div class=paragraph><p>Nous devons maintenant ajouter l’utilisateur au fichier <span class=filename>.klogin</span> de <code>root</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat /root/.klogin</span>
jane.root@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>Essayons maintenant la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% su
Password:</code></pre></div></div><div class=paragraph><p>et voyons quelles sont nos caractéristiques:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># klist</span>
Ticket file:	/tmp/tkt_root_245
Principal:      jane.root@EXAMPLE.COM

  Issued           Expires          Principal
May  2 20:43:12  May  3 04:43:12  krbtgt.EXAMPLE.COM@EXAMPLE.COM</code></pre></div></div></div><div class=sect2><h3 id=_utiliser_dautres_commandes>14.7.8. Utiliser d’autres commandes<a class=anchor href=#_utiliser_dautres_commandes></a></h3><div class=paragraph><p>Dans l’exemple précédent, nous avons créé une entrée principale nommée <code>jane</code> avec une instance <code>root</code>. Cette entrée reposait sur un utilisateur ayant le même nom que l’entrée principale, c’est ce que fait par défaut Kerberos; une <code>entrée_principale.instance</code> de la forme <code>nom_d_utilisateur</code>. <code>root</code> autorisera <code>nom_d_utilisateur.</code> à utiliser <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> pour devenir <code>root</code> si le fichier <span class=filename>.klogin</span> du répertoire personnel de l’utilisateur <code>root</code> est correctement renseigné:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat /root/.klogin</span>
jane.root@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>De même, si un utilisateur a dans son répertoire des lignes de la forme:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cat</span> ~/.klogin
jane@EXAMPLE.COM
jack@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>Cela permet à quiconque dans le domaine <code>EXAMPLE.COM</code> s’étant authentifié en tant que <code>jane</code> ou <code>jack</code> (via <code>kinit</code>, voir plus haut) d’accéder avec <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a> au compte de <code>jane</code> ou à ses fichiers sur le système (<code>grunt</code>) via <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=rsh&amp;sektion=1&amp;format=html">rsh(1)</a> ou <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a>.</p></div><div class=paragraph><p>Par exemple, <code>jane</code> ouvre maintenant une session sur un autre système en utilisant Kerberos:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Password:
% rlogin grunt
Last login: Mon May  1 21:14:47 from grumble
Copyright <span class=o>(</span>c<span class=o>)</span> 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 <span class=o>(</span>GR386<span class=o>)</span> <span class=c>#0: Sat Apr 29 17:50:09 SAT 1995</span></code></pre></div></div><div class=paragraph><p>Ou bien <code>jack</code> ouvre une session sur le compte de <code>jane</code> sur la même machine (<code>jane</code> ayant modifié son fichier <span class=filename>.klogin</span> comme décrit plus haut, et la personne an charge de Kerberos ayant défini une entrée principale <em>jack</em> sans instance):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit
% rlogin grunt <span class=nt>-l</span> jane
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Password:
Last login: Mon May  1 21:16:55 from grumble
Copyright <span class=o>(</span>c<span class=o>)</span> 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.
FreeBSD BUILT-19950429 <span class=o>(</span>GR386<span class=o>)</span> <span class=c>#0: Sat Apr 29 17:50:09 SAT 1995</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=kerberos5>14.8. Kerberos5 <strong>Traduction en Cours </strong><a class=anchor href=#kerberos5></a></h2><div class=sectionbody></div></div><div class=sect1><h2 id=openssl>14.9. OpenSSL<a class=anchor href=#openssl></a></h2><div class=sectionbody><div class=paragraph><p>Une des caractéristiques que de nombreux utilisateurs ignorent souvent est la présence des outils OpenSSL dans le système FreeBSD. OpenSSL fournit une couche de transport des données chiffrée par-dessus la couche de communication, lui permettant ainsi d’être liée à de nombreux services et applications réseau.</p></div><div class=paragraph><p>Les applications d’OpenSSL pourront être l’authentification chiffrée de clients de messagerie, les transactions via le Web comme les paiements par carte bancaire et bien plus encore. De nombreux logiciels portés tels que <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13-ssl/>www/apache13-ssl</a>, et <a class=package href=https://cgit.freebsd.org/ports/tree/mail/sylpheed-claws/>mail/sylpheed-claws</a> offriront un support pour OpenSSL lors de leur compilation.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Dans la plupart des cas le catalogue des logiciels portés tentera de compiler le logiciel porté <a class=package href=https://cgit.freebsd.org/ports/tree/security/openssl/>security/openssl</a> à moins que la variable <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> <code>WITH_OPENSSL_BASE</code> ne soit explicitement fixée à la valeur "yes".</p></div></td></tr></tbody></table></div><div class=paragraph><p>La version d’OpenSSL fournie avec FreeBSD supporte les protocoles de sécurité réseau <em>Secure Sockets Layer v2/v3</em> (SSLv2/SSLv3), et <em>Transport Layer Security v1</em> (TLSv1) et peut être utilisée comme bibliothèque de chiffrement d’usage général.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Bien que OpenSSL supporte l’algorithme IDEA, il est désactivé par défaut en raison des problèmes de brevets aux USA. Pour l’utiliser, le texte de la licence devrait être consulté et si les termes de cette licence sont acceptables, la variable <code>MAKE_IDEA</code> doit être activée dans le fichier <span class=filename>make.conf</span>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Une des utilisations les plus courantes d’OpenSSL est de fournir des certificats utilisables avec des applications logicielles. Ces certificats assurent que les références de la société ou d’un individu sont valides et non frauduleuses. Si le certificat en question n’a pas été vérifié par une des nombreuses "autorité de certification" ("Certificate Authorities") ou CAs, une alerte est généralement produite. Une autorité de certification est une société, comme <a href=http://www.verisign.com>VeriSign</a>, qui signera les certificats afin de valider les références d’individus ou de sociétés. Ce processus a un coût et n’est pas obligatoire pour utiliser des certificats, cependant cela pourra mettre plus à l’aise les utilisateurs les plus paranoïaques.</p></div><div class=sect2><h3 id=_générer_des_certificats>14.9.1. Générer des certificats<a class=anchor href=#_générer_des_certificats></a></h3><div class=paragraph><p>Pour générer un certificat, la commande suivante est disponible:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl req -new -nodes -out req.pem -keyout cert.pem</span>
Generating a 1024 bit RSA private key
................++++++
.......................................++++++
writing new private key to <span class=s1>&#39;cert.pem&#39;</span>
<span class=nt>-----</span>
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter <span class=s1>&#39;.&#39;</span>, the field will be left blank.
<span class=nt>-----</span>
Country Name <span class=o>(</span>2 letter code<span class=o>)</span> <span class=o>[</span>AU]:US
State or Province Name <span class=o>(</span>full name<span class=o>)</span> <span class=o>[</span>Some-State]:PA
Locality Name <span class=o>(</span>eg, city<span class=o>)</span> <span class=o>[]</span>:Pittsburgh
Organization Name <span class=o>(</span>eg, company<span class=o>)</span> <span class=o>[</span>Internet Widgits Pty Ltd]:My Company
Organizational Unit Name <span class=o>(</span>eg, section<span class=o>)</span> <span class=o>[]</span>:Systems Administrator
Common Name <span class=o>(</span>eg, YOUR name<span class=o>)</span> <span class=o>[]</span>:localhost.example.org
Email Address <span class=o>[]</span>:trhodes@FreeBSD.org

Please enter the following <span class=s1>&#39;extra&#39;</span> attributes
to be sent with your certificate request
A challenge password <span class=o>[]</span>:SOME PASSWORD
An optional company name <span class=o>[]</span>:Another Name</code></pre></div></div><div class=paragraph><p>Notez la réponse à la question "Common Name" qui est un nom de domaine. Cette question demande l’entrée d’un serveur de noms à des fins de vérification; entrer autre chose qu’un nom de domaine produira un certificat inutilisable. D’autres options sont disponibles comme par exemple: la date d’expiration, des algorithmes de chiffrement alternatifs, etc. Une liste complète peut être obtenue en consultant la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=openssl&amp;sektion=1&amp;format=html">openssl(1)</a>.</p></div><div class=paragraph><p>Deux fichiers doivent maintenant être présents dans le répertoire dans lequel la commande a été exécutée. La demande de certificat, <span class=filename>req.pem</span>, peut être envoyée à une autorité de certification qui validera les références que vous avez saisies, signera la demande et vous retournera le certificat. Le deuxième fichier s’appellera <span class=filename>cert.pem</span> et sera la clé privée du certificat et devra être à tout prix protégée; si ce fichier tombe dans d’autres mains, il pourra être utilisé pour imiter votre identité (ou votre serveur).</p></div><div class=paragraph><p>Pour les cas où une signature d’une CA n’est pas indispensable, un certificat auto-signé peut être créé. Générez tout d’abord la clé RSA:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl dsaparam -rand -genkey -out myRSA.key 1024</span></code></pre></div></div><div class=paragraph><p>Générez ensuite la clé de la CA:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl gendsa -des3 -out myca.key myRSA.key</span></code></pre></div></div><div class=paragraph><p>Utilisez cette clé pour créer le certificat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl req -new -x509 -days 365 -key myca.key -out new.crt</span></code></pre></div></div><div class=paragraph><p>Deux fichiers devraient être présents maintenant dans le répertoire: un fichier de signature de l’autorité de certification, <span class=filename>myca.key</span>, et le certificat lui-même, <span class=filename>new.crt</span>. Ces fichiers doivent être placés dans un répertoire, de préférence sous <span class=filename>/etc</span>, qui est uniquement lisible que par <code>root</code>. Les permissions 0700 devraient convenir et peuvent être fixées à l’aide de l’utilitaire <code>chmod</code>.</p></div></div><div class=sect2><h3 id=_utilisation_des_certificats_un_exemple>14.9.2. Utilisation des certificats, un exemple<a class=anchor href=#_utilisation_des_certificats_un_exemple></a></h3><div class=paragraph><p>A quoi peuvent servir ces fichiers? Un bon exemple serait le chiffrage des connexions au MTAsendmail. Cela permettra de faire disparaître l’utilisation d’une authentification en clair pour les utilisateurs qui envoient du courrier via le MTA local.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ce n’est pas la meilleure utilisation au monde étant donné que certains clients de messagerie afficheront une erreur si le certificat n’a pas été installé localement. Reportez-vous à la documentation du logiciel pour plus d’information sur l’installation de certificats.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Les lignes suivantes doivent être ajoutées dans le fichier <span class=filename>.mc</span> local:</p></div><div class="literalblock programlisting"><div class=content><pre>dnl SSL Options
define(`confCACERT_PATH&#39;,`/etc/certs&#39;)dnl
define(`confCACERT&#39;,`/etc/certs/new.crt&#39;)dnl
define(`confSERVER_CERT&#39;,`/etc/certs/new.crt&#39;)dnl
define(`confSERVER_KEY&#39;,`/etc/certs/myca.key&#39;)dnl
define(`confTLS_SRV_OPTIONS&#39;, `V&#39;)dnl</pre></div></div><div class=paragraph><p>Où <span class=filename>/etc/certs/</span> est le répertoire à utiliser pour stocker localement les certificats et les clés. La dernière condition nécessaire étant une reconstruction du fichier <span class=filename>.cf</span>. Cela se fait facilement en tapant <code>make</code><span class=parameter>install</span> à l’intérieur du répertoire <span class=filename>/etc/mail</span>. Suivi d’un <code>make</code><span class=parameter>restart</span> qui devrait relancer le "daemon"sendmail.</p></div><div class=paragraph><p>Si tout s’est bien passé il n’y aura pas de message d’erreur dans le fichier <span class=filename>/var/log/maillog</span> et sendmail apparaîtra dans la liste des processus.</p></div><div class=paragraph><p>Comme test simple, connectez vous au serveur de messagerie à l’aide de l’utilitaire <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># telnet example.com 25</span>
Trying 192.0.34.166...
Connected to example.com.
Escape character is <span class=s1>&#39;^]&#39;</span><span class=nb>.</span>
220 example.com ESMTP Sendmail 8.12.10/8.12.10<span class=p>;</span> Tue, 31 Aug 2004 03:41:22 <span class=nt>-0400</span> <span class=o>(</span>EDT<span class=o>)</span>
ehlo example.com
250-example.com Hello example.com <span class=o>[</span>192.0.34.166], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
quit
221 2.0.0 example.com closing connection
Connection closed by foreign host.</code></pre></div></div><div class=paragraph><p>Si la ligne "STARTTLS" apparaît dans la sortie, cela signifie alors que tout fonctionne correctement.</p></div></div></div></div><div class=sect1><h2 id=ipsec>14.10. IPsec<a class=anchor href=#ipsec></a></h2><div class=sectionbody><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=title>Caractères de terminaison</div><div class=paragraph><p>Dans tous les exemples de cette section, et d’autres sections, vous remarquerez qu’il y aura un "^D" à la fin de certains exemples. Cela signifie qu’il faut maintenir la touche <kbd>Ctrl</kbd> enfoncée et appuyer sur la touche <kbd>D</kbd>. Un autre caractère couramment utilisé est "^C", qui signifie de maintenir enfoncé la touche <kbd>Ctrl</kbd> et d’appuyer sur <kbd>C</kbd>.</p></div></td></tr></tbody></table></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Pour d’autres documents détaillant l’implémentation d’IPsec, jetez un oeil à <a href=http://www.daemonnews.org/200101/ipsec-howto.html>http://www.daemonnews.org/200101/ipsec-howto.html</a> et <a href=http://www.freebsddiary.org/ipsec.php>http://www.freebsddiary.org/ipsec.php</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Le mécanisme IPsec fournit des communications sécurisées sur couche IP ou à travers les <em>sockets</em>. Cette section explique comment l’utiliser. Pour des détails concernant l’implémentation d’IPsec, reportez-vous au <a href=https://docs.freebsd.org/fr/books/developers-handbook/#ipv6>Manuel du développeur</a>.</p></div><div class=paragraph><p>L’implémentation actuelle d’IPsec supporte le mode transport et le mode tunnel. Cependant, il y a des restrictions au mode tunnel. <a href=http://www.kame.net/newsletter/>http://www.kame.net/newsletter/</a> fournit des exemples plus exhaustifs.</p></div><div class=paragraph><p>Soyez informé que pour utiliser cette fonctionnalité, vous devez avoir les options suivantes présentes dans votre fichier de configuration du noyau:</p></div><div class="literalblock programlisting"><div class=content><pre>options          IPSEC              #IP security
options          IPSEC_ESP          #IP security (crypto; define w/IPSEC)</pre></div></div><div class=sect2><h3 id=_exemple_en_mode_transport_avec_ipv4>14.10.1. Exemple en mode transport avec IPv4<a class=anchor href=#_exemple_en_mode_transport_avec_ipv4></a></h3><div class=paragraph><p>Configurons une association de sécurité pour déployer un canal sécurisé entre la Machine A (<code>10.2.3.4</code>) et la Machine B (<code>10.6.7.8</code>). Notre exemple est un peu compliqué. De A vers B, nous n’utilisons que l’ancien AH. De B vers A, le nouvel AH et le nouvel ESP sont combinés.</p></div><div class=paragraph><p>Nous devons maintenant choisir les algorithmes correspondant à "AH"/"nouvel AH"/"ESP"/ "nouvel ESP". Reportez-vous à la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=setkey&amp;sektion=8&amp;format=html">setkey(8)</a> pour connaître les noms des algorithmes. Nous utiliserons MD5 pour AH, new-HMAC-SHA1 pour le nouvel AH, et new-DES-expIV avec 8 octets IV pour le nouvel ESP.</p></div><div class=paragraph><p>La longueur de la clé dépend de chaque algorithme. Par exemple, elle doit être égale à 16 octets pour MD5, 20 pour new-HMAC-SHA1, et 8 pour new-DES-expIV. Nous choisissons maintenant "MYSECRETMYSECRET", "KAMEKAMEKAMEKAMEKAME", "PASSWORD", respectivement.</p></div><div class=paragraph><p>Définissons maintenant le SPI (<em>Security Parameter Index</em>) pour chaque protocole. Remarquez qu’il nous faut 3 SPIs pour ce canal sécurisé puisqu’il y aura trois entêtes de sécurité (une de la Machine A vers la Machine B et deux de la Machine B vers la Machine A). Notez également que les SPIs doivent être supérieurs à 256. Nous choisirions 1000, 2000 et 3000 respectivement.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>	          <span class=o>(</span>1<span class=o>)</span>
	Machine A <span class=nt>------</span><span class=o>&gt;</span> Machine B

	<span class=o>(</span>1<span class=o>)</span><span class=nv>PROTO</span><span class=o>=</span>AH
		<span class=nv>ALG</span><span class=o>=</span>MD5<span class=o>(</span>RFC1826<span class=o>)</span>
		<span class=nv>KEY</span><span class=o>=</span>MYSECRETMYSECRET
		<span class=nv>SPI</span><span class=o>=</span>1000

	           <span class=o>(</span>2.1<span class=o>)</span>
	Machine A &lt;<span class=nt>------</span> Machine B
	          &lt;<span class=nt>------</span>
	           <span class=o>(</span>2.2<span class=o>)</span>

	<span class=o>(</span>2.1<span class=o>)</span>
	<span class=nv>PROTO</span><span class=o>=</span>AH
		<span class=nv>ALG</span><span class=o>=</span>new-HMAC-SHA1<span class=o>(</span>new AH<span class=o>)</span>
		<span class=nv>KEY</span><span class=o>=</span>KAMEKAMEKAMEKAMEKAME
		<span class=nv>SPI</span><span class=o>=</span>2000

	<span class=o>(</span>2.2<span class=o>)</span>
	<span class=nv>PROTO</span><span class=o>=</span>ESP
		<span class=nv>ALG</span><span class=o>=</span>new-DES-expIV<span class=o>(</span>new ESP<span class=o>)</span>
			IV length <span class=o>=</span> 8
		<span class=nv>KEY</span><span class=o>=</span>PASSWORD
		<span class=nv>SPI</span><span class=o>=</span>3000</code></pre></div></div><div class=paragraph><p>Maintenant, définissons l’association de sécurité. Exécutons <a href="https://man.freebsd.org/cgi/man.cgi?query=setkey&amp;sektion=8&amp;format=html">setkey(8)</a> sur la Machine A et la Machine B:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setkey -c</span>
    add 10.2.3.4 10.6.7.8 ah-old  1000 <span class=nt>-m</span> transport <span class=nt>-A</span> keyed-md5 <span class=s2>&#34;MYSECRETMYSECRET&#34;</span> <span class=p>;</span>
    add 10.6.7.8 10.2.3.4 ah  2000 <span class=nt>-m</span> transport <span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;KAMEKAMEKAMEKAMEKAME&#34;</span> <span class=p>;</span>
    add 10.6.7.8 10.2.3.4 esp 3000 <span class=nt>-m</span> transport <span class=nt>-E</span> des-cbc <span class=s2>&#34;PASSWORD&#34;</span> <span class=p>;</span>
    ^D</code></pre></div></div><div class=paragraph><p>En fait, la communication IPsec n’aura pas lieu avant que les entrées de politique de sécurité ne soient définies. Dans notre cas, il faut le faire sur les deux machines.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Côté A:

<span class=c># setkey -c</span>
    spdadd 10.2.3.4 10.6.7.8 any <span class=nt>-P</span> out ipsec
	ah/transport/10.2.3.4-10.6.7.8/require <span class=p>;</span>
    ^D

Côté B:

<span class=c># setkey -c</span>
    spdadd 10.6.7.8 10.2.3.4 any <span class=nt>-P</span> out ipsec
	esp/transport/10.6.7.8-10.2.3.4/require <span class=p>;</span>
    spdadd 10.6.7.8 10.2.3.4 any <span class=nt>-P</span> out ipsec
	ah/transport/10.6.7.8-10.2.3.4/require <span class=p>;</span>
    ^D

   Machine A <span class=nt>--------------------------</span><span class=o>&gt;</span> Machine E
   10.2.3.4                               10.6.7.8
      |                                     |
      <span class=o>=========</span> ancien AH keyed-md5 <span class=o>========&gt;</span>

      &lt;<span class=o>========</span> nouveau AH hmac-sha1 <span class=o>========</span>
      &lt;<span class=o>========</span> nouveau ESP des-cbc <span class=o>=========</span></code></pre></div></div></div><div class=sect2><h3 id=_exemple_en_mode_transport_avec_ipv6>14.10.2. Exemple en mode transport avec IPv6<a class=anchor href=#_exemple_en_mode_transport_avec_ipv6></a></h3><div class=paragraph><p>Un autre exemple utilisant IPv6.</p></div><div class=paragraph><p>Le mode de transport ESP est recommandé pour le port TCP numéro 110 entre la Machine-A et la Machine-B.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>              <span class=o>============</span> ESP <span class=o>============</span>
              |                           |
          Machine-A                   Machine-B
          fec0::10 <span class=nt>--------------------</span> fec0::11</code></pre></div></div><div class=paragraph><p>L’algorithme de chiffrement est blowfish-cbc avec la clé "kamekame", et l’algorithme d’authentification est hmac-sha1 avec la clé "this is the test key". Configuration de la Machine-A:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setkey -c &lt;&lt;EOF</span>
    spdadd fec0::10[any] fec0::11[110] tcp <span class=nt>-P</span> out ipsec
	esp/transport/fec0::10-fec0::11/use <span class=p>;</span>
    spdadd fec0::11[110] fec0::10[any] tcp <span class=nt>-P</span> <span class=k>in </span>ipsec
	esp/transport/fec0::11-fec0::10/use <span class=p>;</span>
    add fec0::10 fec0::11 esp 0x10001
	<span class=nt>-m</span> transport
	<span class=nt>-E</span> blowfish-cbc <span class=s2>&#34;kamekame&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    add fec0::11 fec0::10 esp 0x10002
	<span class=nt>-m</span> transport
	<span class=nt>-E</span> blowfish-cbc <span class=s2>&#34;kamekame&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    EOF</code></pre></div></div><div class=paragraph><p>et de la Machine-B:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setkey -c &lt;&lt;EOF</span>
    spdadd fec0::11[110] fec0::10[any] tcp <span class=nt>-P</span> out ipsec
	esp/transport/fec0::11-fec0::10/use <span class=p>;</span>
    spdadd fec0::10[any] fec0::11[110] tcp <span class=nt>-P</span> <span class=k>in </span>ipsec
	esp/transport/fec0::10-fec0::11/use <span class=p>;</span>
    add fec0::10 fec0::11 esp 0x10001 <span class=nt>-m</span> transport
	<span class=nt>-E</span> blowfish-cbc <span class=s2>&#34;kamekame&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    add fec0::11 fec0::10 esp 0x10002 <span class=nt>-m</span> transport
	<span class=nt>-E</span> blowfish-cbc <span class=s2>&#34;kamekame&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    EOF</code></pre></div></div><div class=paragraph><p>Remarquez la direction de SP.</p></div></div><div class=sect2><h3 id=_exemple_en_mode_tunnel_avec_ipv4>14.10.3. Exemple en mode tunnel avec IPv4<a class=anchor href=#_exemple_en_mode_tunnel_avec_ipv4></a></h3><div class=paragraph><p>Mode tunnel entre deux passerelles de sécurité</p></div><div class=paragraph><p>Le protocole de sécurité est l’ancien mode tunnel AH, i.e. spécifié par la RFC1826, avec keyed-md5 comme algorithme d’authentification et "this is the test" comme clé.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>                             <span class=o>=======</span> AH <span class=o>=======</span>
                             |                |
         Réseau-A       Passerelle-A     Passerelle-B       Réseau-B
        10.0.1.0/24 <span class=nt>----</span> 172.16.0.1 <span class=nt>-----</span> 172.16.0.2 <span class=nt>----</span> 10.0.2.0/24</code></pre></div></div><div class=paragraph><p>Configuration de la Passerelle-A:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setkey -c &lt;&lt;EOF</span>
    spdadd 10.0.1.0/24 10.0.2.0/24 any <span class=nt>-P</span> out ipsec
	ah/tunnel/172.16.0.1-172.16.0.2/require <span class=p>;</span>
    spdadd 10.0.2.0/24 10.0.1.0/24 any <span class=nt>-P</span> <span class=k>in </span>ipsec
	ah/tunnel/172.16.0.2-172.16.0.1/require <span class=p>;</span>
    add 172.16.0.1 172.16.0.2 ah-old 0x10003 <span class=nt>-m</span> any
	<span class=nt>-A</span> keyed-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>
    add 172.16.0.2 172.16.0.1 ah-old 0x10004 <span class=nt>-m</span> any
	<span class=nt>-A</span> keyed-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>

EOF</code></pre></div></div><div class=paragraph><p>Si le numéro de port n’est pas précisé comme ci-dessus, alors <code>[any]</code> est utilisé. <code>-m</code> définit le mode de SA à utiliser. <code>-m any</code> signifie tout mode de protocole de sécurité. Vous pouvez utiliser cette SA à la fois en mode transport et en mode tunnel.</p></div><div class=paragraph><p>et de la Passerelle-B:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setkey -c &lt;&lt;EOF</span>
    spdadd 10.0.2.0/24 10.0.1.0/24 any <span class=nt>-P</span> out ipsec
	ah/tunnel/172.16.0.2-172.16.0.1/require <span class=p>;</span>
    spdadd 10.0.1.0/24 10.0.2.0/24 any <span class=nt>-P</span> <span class=k>in </span>ipsec
	ah/tunnel/172.16.0.1-172.16.0.2/require <span class=p>;</span>
    add 172.16.0.1 172.16.0.2 ah-old 0x10003 <span class=nt>-m</span> any
	<span class=nt>-A</span> keyed-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>
    add 172.16.0.2 172.16.0.1 ah-old 0x10004 <span class=nt>-m</span> any
	<span class=nt>-A</span> keyed-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>

EOF</code></pre></div></div><div class=paragraph><p>Etablir une SA regroupée entre deux passerelles de sécurité</p></div><div class=paragraph><p>On désire le mode de transport AH et le mode tunnel ESP entre Passerelle-A et Passerelle-B. Dans ce cas, on applique d’abord le mode tunnel ESP puis le mode de transport AH.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>                            <span class=o>==========</span> AH <span class=o>=========</span>
                            |  <span class=o>=======</span> ESP <span class=o>=====</span>  |
                            |  |               |  |
       Réseau-A         Passerelle-A        Passerelle-B        Réseau-B
    fec0:0:0:1::/64 <span class=nt>---</span> fec0:0:0:1::1 <span class=nt>----</span> fec0:0:0:2::1 <span class=nt>---</span> fec0:0:0:2::/64</code></pre></div></div></div><div class=sect2><h3 id=_exemple_en_mode_tunnel_avec_ipv6>14.10.4. Exemple en mode tunnel avec IPv6<a class=anchor href=#_exemple_en_mode_tunnel_avec_ipv6></a></h3><div class=paragraph><p>L’algorithme de chiffrement est 3des-cbc, et l’algorithme d’authentification est hmac-sha1. L’algorithme d’authentification pour AH est hmac-md5. Configuration de la Passerelle-A:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setkey -c &lt;&lt;EOF</span>
    spdadd fec0:0:0:1::/64 fec0:0:0:2::/64 any <span class=nt>-P</span> out ipsec
	esp/tunnel/fec0:0:0:1::1-fec0:0:0:2::1/require
	ah/transport/fec0:0:0:1::1-fec0:0:0:2::1/require <span class=p>;</span>
    spdadd fec0:0:0:2::/64 fec0:0:0:1::/64 any <span class=nt>-P</span> <span class=k>in </span>ipsec
	esp/tunnel/fec0:0:0:2::1-fec0:0:0:1::1/require
	ah/transport/fec0:0:0:2::1-fec0:0:0:1::1/require <span class=p>;</span>
    add fec0:0:0:1::1 fec0:0:0:2::1 esp 0x10001 <span class=nt>-m</span> tunnel
	<span class=nt>-E</span> 3des-cbc <span class=s2>&#34;kamekame12341234kame1234&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    add fec0:0:0:1::1 fec0:0:0:2::1 ah 0x10001 <span class=nt>-m</span> transport
	<span class=nt>-A</span> hmac-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>
    add fec0:0:0:2::1 fec0:0:0:1::1 esp 0x10001 <span class=nt>-m</span> tunnel
	<span class=nt>-E</span> 3des-cbc <span class=s2>&#34;kamekame12341234kame1234&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    add fec0:0:0:2::1 fec0:0:0:1::1 ah 0x10001 <span class=nt>-m</span> transport
	<span class=nt>-A</span> hmac-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>

    EOF</code></pre></div></div><div class=paragraph><p>Etablir des SAs avec les différentes extrémités</p></div><div class=paragraph><p>On désire un mode tunnel ESP entre Machine-A et Passerelle-A. L’algorithme de chiffrement est cast128-cbc, et l’algorithme d’authentification pour ESP est hmac-sha1. Le mode de transport ESP est recommandé entre Machine-A et Machine-B. L’algorithme de chiffrement est rc5-cbc, et l’algorithme d’authentification pour ESP est hmac-md5.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>              <span class=o>==================</span> ESP <span class=o>=================</span>
              |  <span class=o>=======</span> ESP <span class=o>=======</span>                 |
              |  |                 |                 |
            Machine-A        Passerelle-A         Machine-B
          fec0:0:0:1::1 <span class=nt>----</span> fec0:0:0:2::1 <span class=nt>----</span> fec0:0:0:2::2</code></pre></div></div><div class=paragraph><p>Configuration de la Machine-A:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setkey -c &lt;&lt;EOF</span>
    spdadd fec0:0:0:1::1[any] fec0:0:0:2::2[80] tcp <span class=nt>-P</span> out ipsec
	esp/transport/fec0:0:0:1::1-fec0:0:0:2::2/use
	esp/tunnel/fec0:0:0:1::1-fec0:0:0:2::1/require <span class=p>;</span>
    spdadd fec0:0:0:2::1[80] fec0:0:0:1::1[any] tcp <span class=nt>-P</span> <span class=k>in </span>ipsec
	esp/transport/fec0:0:0:2::2-fec0:0:0:l::1/use
	esp/tunnel/fec0:0:0:2::1-fec0:0:0:1::1/require <span class=p>;</span>
    add fec0:0:0:1::1 fec0:0:0:2::2 esp 0x10001
	<span class=nt>-m</span> transport
	<span class=nt>-E</span> cast128-cbc <span class=s2>&#34;12341234&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    add fec0:0:0:1::1 fec0:0:0:2::1 esp 0x10002
	<span class=nt>-E</span> rc5-cbc <span class=s2>&#34;kamekame&#34;</span>
	<span class=nt>-A</span> hmac-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>
    add fec0:0:0:2::2 fec0:0:0:1::1 esp 0x10003
	<span class=nt>-m</span> transport
	<span class=nt>-E</span> cast128-cbc <span class=s2>&#34;12341234&#34;</span>
	<span class=nt>-A</span> hmac-sha1 <span class=s2>&#34;this is the test key&#34;</span> <span class=p>;</span>
    add fec0:0:0:2::1 fec0:0:0:1::1 esp 0x10004
	<span class=nt>-E</span> rc5-cbc <span class=s2>&#34;kamekame&#34;</span>
	<span class=nt>-A</span> hmac-md5 <span class=s2>&#34;this is the test&#34;</span> <span class=p>;</span>

    EOF</code></pre></div></div></div></div></div><div class=sect1><h2 id=openssh>14.11. OpenSSH<a class=anchor href=#openssh></a></h2><div class=sectionbody><div class=paragraph><p>OpenSSH est un ensemble d’outils de connexion réseau utilisés pour accéder à des machines distantes de façon sécurisée. Ils peuvent être utilisés comme remplaçants directs de <code>rlogin</code>, <code>rsh</code>, <code>rcp</code>, et <code>telnet</code>. De plus, OpenSSH peut sécuriser n’importe quelle connexion TCP/IP via un tunnel. OpenSSH chiffre tout le trafic de façon à déjouer les écoutes réseau, les prises de contrôle de connexion, et aux attaques au niveau du réseau.</p></div><div class=paragraph><p>OpenSSH est maintenu par le projet OpenBSD, et est basé sur SSH v1.2.12 avec tous les récentes corrections et mises à jour. Il est compatible avec les protocoles SSH 1 et 2. OpenSSH est présent dans le système de base depuis FreeBSD 4.0.</p></div><div class=sect2><h3 id=_les_avantages_à_utiliser_openssh>14.11.1. Les avantages à utiliser OpenSSH<a class=anchor href=#_les_avantages_à_utiliser_openssh></a></h3><div class=paragraph><p>Normalement, quand on utilise <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> ou <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a>, les données sont envoyées sur le réseau en clair, sous forme non chiffrée. Des "renifleurs de paquets" placés n’importe où entre le client et le serveur peuvent prendre connaissance de votre nom d’utilisateur, de votre mot de passe et des données transmises lors de votre session. OpenSSH offre une variété de méthodes d’authentification et de chiffrage pour éviter ce genre de problème.</p></div></div><div class=sect2><h3 id=_activer_sshd>14.11.2. Activer sshd<a class=anchor href=#_activer_sshd></a></h3><div class=paragraph><p>Assurez-vous d’ajouter la ligne suivante à votre fichier <span class=filename>rc.conf</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nv>sshd_enable</span><span class=o>=</span><span class=s2>&#34;YES&#34;</span></code></pre></div></div><div class=paragraph><p>Cela chargera le "daemon" ssh à l’initialisation suivante du système. Alternativement, vous pouvez tout simplement exécuter le "daemon" sshd directement en tapant <code>sshd</code> sur la ligne de commande.</p></div></div><div class=sect2><h3 id=_client_ssh>14.11.3. Client SSH<a class=anchor href=#_client_ssh></a></h3><div class=paragraph><p>L’utilitaire <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> fonctionne de la même manière que <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ssh user@example.com</span>
Host key not found from the list of known hosts.
Are you sure you want to <span class=k>continue </span>connecting <span class=o>(</span><span class=nb>yes</span>/no<span class=o>)</span>? <span class=nb>yes
</span>Host <span class=s1>&#39;example.com&#39;</span> added to the list of known hosts.
user@example.com<span class=s1>&#39;s password: *******</span></code></pre></div></div><div class=paragraph><p>L’ouverture de session se poursuit comme si elle avait lancée par <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a> ou <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a>. Le système SSH utilise un système d’empreinte de clé pour vérifier l’authenticité du serveur quand le client se connecte. L’utilisateur est invité à entrer <code>yes</code> uniquement à la première connexion. Lors des futures connexions, l’empreinte de la clé sauvegardé est vérifiée. Le client SSH vous avertira si l’empreinte sauvée diffère de l’empreinte reçue lors de futures tentatives de connexion. Les empreintes sont sauvées dans le fichier <span class=filename>~/.ssh/known_hosts</span>, ou <span class=filename>~/.ssh/known_hosts2</span> pour les empreintes du protocole SSH 2.</p></div><div class=paragraph><p>Par défaut, les serveurs OpenSSH sont configurés pour accepter les connexions dans les deux protocoles SSH 1 et 2. Le client peut, cependant, choisir entre les deux. Le protocole 2 est connu pour être plus robuste et plus sécurisé que son prédécesseur.</p></div><div class=paragraph><p><code>ssh</code> peut être forcé à utilisé l’un des protocole en passant l’argument <code>-1</code> ou <code>-2</code> pour le protocole 1 ou 2 respectivement.</p></div></div><div class=sect2><h3 id=_copie_sécurisée>14.11.4. Copie sécurisée<a class=anchor href=#_copie_sécurisée></a></h3><div class=paragraph><p>La commande <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> fonctionne de la même manière que <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a>; elle copie un fichier vers ou à partir d’une machine distante à la différence qu’elle le fait d’une façon sécurisé.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c>#  scp user@example.com:/COPYRIGHT COPYRIGHT</span>
user@example.com<span class=s1>&#39;s password: *******
COPYRIGHT            100% |*****************************|  4735
00:00
#</span></code></pre></div></div><div class=paragraph><p>Puisque l’empreinte a déjà été sauvée pour cette machine dans l’exemple précédent, cela se vérifie ici quand on utilise <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a>.</p></div><div class=paragraph><p>Les arguments passés à <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> sont similaires à ceux de <a href="https://man.freebsd.org/cgi/man.cgi?query=cp&amp;sektion=1&amp;format=html">cp(1)</a>, avec le ou les fichiers en premier argument, et la destination en second. Puisque que le fichier est copié via le réseau, par l’intermédiaire de SSH, un ou plusieurs des arguments prennent la forme <code>utilisateur@machine_distante:chemin_du_fichier</code>.</p></div></div><div class=sect2><h3 id=_configuration>14.11.5. Configuration<a class=anchor href=#_configuration></a></h3><div class=paragraph><p>Les fichiers de configuration général au système pour le "daemon" et le client OpenSSH résident dans le répertoire <span class=filename>/etc/ssh</span>.</p></div><div class=paragraph><p><span class=filename>ssh_config</span> permet de paramétrer le client, tandis que <span class=filename>sshd_config</span> s’occupe de la configuration du "daemon".</p></div><div class=paragraph><p>De plus, les options <code>sshd_program</code> (<span class=filename>/usr/sbin/sshd</span> par défaut), et <code>sshd_flags</code> du fichier <span class=filename>rc.conf</span> peut fournir un niveau supplémentaire de configuration.</p></div></div><div class=sect2><h3 id=_ssh_keygen>14.11.6. ssh-keygen<a class=anchor href=#_ssh_keygen></a></h3><div class=paragraph><p>Au lieu d’utiliser des mots de passe, <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> peut être employé pour générer des clés RSA pour authentifier un utilisateur:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh-keygen <span class=nt>-t</span> rsa1
Initializing random number generator...
Generating p:  .++ <span class=o>(</span>distance 66<span class=o>)</span>
Generating q:  ..............................++ <span class=o>(</span>distance 498<span class=o>)</span>
Computing the keys...
Key generation complete.
Enter file <span class=k>in </span>which to save the key <span class=o>(</span>/home/user/.ssh/identity<span class=o>)</span>:
Enter passphrase:
Enter the same passphrase again:
Your identification has been saved <span class=k>in</span> /home/user/.ssh/identity.
...</code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> créera une paire de clés publique et privée à utiliser pour l’authentification. La clé privée est stockée dans le fichier <span class=filename>~/.ssh/identity</span>, alors que la clé publique l’est dans le fichier <span class=filename>~/.ssh/identity.pub</span>. La clé publique doit être placée dans le fichier <span class=filename>~/.ssh/authorized_keys</span> sur la machine distante pour que cela fonctionne.</p></div><div class=paragraph><p>Ceci autorisera les connexions sur la machine distante en utilisant l’authentification RSA à la place des mots de passe.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>L’option <code>-t rsa1</code> créera des clés RSA pour le protocole SSH 1. Si vous désirez utiliser des clés RSA avec le protocole SSH 2, vous devez employer la commande <code>ssh-keygen -t rsa</code>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Si une phrase d’authentification est utilisée avec <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a>, l’utilisateur se verra demandé d’entrer un mot de passe à chaque utilisation de la clé privé.</p></div><div class=paragraph><p>Une clé DSA SSH protocole 2 peut être créée pour le même objectif en utilisant la commande <code>ssh-keygen -t dsa</code>. Cela créera une paire de clés DSA pour les sessions SSH utilisant le protocole 2. La clé publique est conservée dans <span class=filename>~/.ssh/id_dsa.pub</span>, tandis que la clé privée se trouve dans <span class=filename>~/.ssh/id_dsa</span>.</p></div><div class=paragraph><p>Les clés publiques DSA sont placées dans le fichier <span class=filename>~/.ssh/authorized_keys</span> sur la machine distante.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> et <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> sont des utilitaires employés pour la gestion de multiples clés privées protégées par mots de passe.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Les divers fichiers et options peuvent être différents selon la version d’OpenSSH dont vous disposez, pour éviter les problèmes vous devez consultez la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=security-ssh-tunneling>14.11.7. Tunnels SSH<a class=anchor href=#security-ssh-tunneling></a></h3><div class=paragraph><p>OpenSSH a la capacité de créer un tunnel pour encapsuler un autre protocole dans une session chiffrée.</p></div><div class=paragraph><p>La commande suivante demande à <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> de créer un tunnel pour telnet:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 5023:localhost:23 user@foo.example.com
%</code></pre></div></div><div class=paragraph><p>La commande <code>ssh</code> est utilisée avec les options suivantes:</p></div><div class=dlist><dl><dt class=hdlist1><code>-2</code></dt><dd><p>Force <code>ssh</code> à utiliser la version du protocole (à ne pas utiliser si vous travaillez avec de vieux serveurs SSH).</p></dd><dt class=hdlist1><code>-N</code></dt><dd><p>N’exécute aucune commande à distance, ou mode se place en mode tunnel. Si cette option est omise <code>ssh</code> initiera une session normale.</p></dd><dt class=hdlist1><code>-f</code></dt><dd><p>Force <code>ssh</code> à s’exécuter en arrière-plan.</p></dd><dt class=hdlist1><code>-L</code></dt><dd><p>Spécifie un tunnel local de la manière <code><em>port_local:machine_distante:port_distant</em></code>.</p></dd><dt class=hdlist1><code>user@foo.example.com</code></dt><dd><p>Le serveur SSH distant.</p></dd></dl></div><div class=paragraph><p>Un tunnel SSH fonctionne grâce à l’allocation d’une "socket" qui écoute sur le port spécifié de la machine <code>localhost</code>. Il transfère ensuite toute connexion reçue sur la/le machine/port local(e) via la connexion SSH vers la machine et le port distants spécifiés.</p></div><div class=paragraph><p>Dans l’exemple, le port <em>5023</em> sur la machine locale transfère toute connexion sur ce port vers le port <em>23</em> de la machine distante (le <code>localhost</code> de la commande). Puisque le port <em>23</em> est celui de telnet, cela créerai une session telnet sécurisée par l’intermédiaire d’un tunnel SSH.</p></div><div class=paragraph><p>Cela peut être utilisé pour encapsuler n’importe quel nombre de protocoles TCP non sécurisé comme SMTP, POP3, FTP, etc.</p></div><div class=exampleblock><div class=title>Exemple 1. Utiliser SSH pour créer un tunnel sécurisé pour SMTP</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 5025:localhost:25 user@mailserver.example.com
user@mailserver.example.com<span class=s1>&#39;s password: *****
% telnet localhost 5025
Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;</span>^]<span class=s1>&#39;.
220 mailserver.example.com ESMTP</span></code></pre></div></div><div class=paragraph><p>Ceci peut être utilisé en conjonction avec <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> et des comptes utilisateurs supplémentaires pour la création et l’accès au tunnel SSH sans trop de problème. Des clés peuvent être utilisées à la place de la saisie d’un mot de passe, et les tunnels peuvent être exécutés sous un utilisateur séparé.</p></div></div></div><div class=sect3><h4 id=_exemples_pratiques_de_tunnels_ssh>14.11.7.1. Exemples pratiques de tunnels SSH<a class=anchor href=#_exemples_pratiques_de_tunnels_ssh></a></h4><div class=sect4><h5 id=_accès_sécurisé_à_un_serveur_pop3>14.11.7.1.1. Accès sécurisé à un serveur POP3<a class=anchor href=#_accès_sécurisé_à_un_serveur_pop3></a></h5><div class=paragraph><p>Au travail, il y a un serveur SSH qui accepte les connexions de l’extérieur. Sur le même réseau d’entreprise réside un serveur de courrier électronique faisant fonctionner un serveur POP3. Le réseau ou le chemin entre chez vous et le bureau peut ou peut ne pas être complètement sûr. Pour cette raison, vous devez récupérer votre courrier électronique d’une façon sécurisée. La solution est de créer une connexion SSH vers le serveur SSH de votre entreprise, et d’utiliser ce tunnel vers le serveur de courrier.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 2110:mail.example.com:110 user@ssh-server.example.com
user@ssh-server.example.com<span class=s1>&#39;s password: ******</span></code></pre></div></div><div class=paragraph><p>Quand le tunnel est configuré et fonctionne, vous pouvez demander à votre client de courrier électronique d’envoyer ses requêtes POP3 sur le port 2110 de la machine locale: <code>localhost</code>. Les connexions seront transférées de façon sécurisé à travers le tunnel jusqu’à <code>mail.example.com</code>.</p></div></div><div class=sect4><h5 id=_passer_à_travers_un_coupe_feu_restrictif>14.11.7.1.2. Passer à travers un coupe-feu restrictif<a class=anchor href=#_passer_à_travers_un_coupe_feu_restrictif></a></h5><div class=paragraph><p>Certains administrateurs réseau imposent des règles draconiennes au niveau du coupe-feu, filtrant non seulement les connexions entrantes, mais également les connexions sortantes. Il se peut que vous n’ayez accès qu’aux ports 22 et 80 de machines distantes pour SSH ou la navigation Internet.</p></div><div class=paragraph><p>Vous pouvez vouloir accéder à un autre (n’ayant peut-être aucun rapport avec votre travail) service, comme un serveur Ogg Vorbis pour écouter de la musique. Si le serveur Ogg Vorbis diffuse ("streaming") ses données à partir d’un port différent des ports 22 ou 80, vous ne serez alors pas en mesure d’y accéder.</p></div><div class=paragraph><p>La solution est de créer une connexion SSH vers une machine à l’extérieur du réseau protégé par le coupe-feu, et l’utiliser pour créer un tunnel vers le serveur Ogg Vorbis.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 8888:music.example.com:8000 user@unfirewalled-system.example.org
user@unfirewalled-system.example.org<span class=s1>&#39;s password: *******</span></code></pre></div></div><div class=paragraph><p>Vous pouvez maintenant faire pointer votre client pour la récupération du flux de données sur le port 8888 de la machine locale, qui sera transféré jusqu’au port 8000 de la machine <code>music.example.com</code>, passant ainsi outre les restrictions du coupe-feu.</p></div></div></div></div><div class=sect2><h3 id=_lectures_supplémentaires>14.11.8. Lectures supplémentaires<a class=anchor href=#_lectures_supplémentaires></a></h3><div class=paragraph><p><a href=http://www.openssh.com/>OpenSSH</a></p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a></p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=sftp-server&amp;sektion=8&amp;format=html">sftp-server(8)</a></p></div></div></div></div><div class=sect1><h2 id=fs-acl>14.12. Listes de contrôle d’accès au système de fichiers<a class=anchor href=#fs-acl></a></h2><div class=sectionbody><div class=paragraph><p>Avec les améliorations des systèmes de fichiers comme les "snapshots", FreeBSD 5.0 et versions suivantes offrent une nouveauté en matière de sécurité: les listes de contrôle d’accès au système de fichiers (ACLs - "Access Control Lists").</p></div><div class=paragraph><p>Les listes de contrôle d’accès étendent le système de permission standard d’UNIX d’une manière hautement compatible (POSIX.1e). Cette caractéristique permet à un administrateur d’utiliser avantageusement un modèle de sécurité plus sophistiqué.</p></div><div class=paragraph><p>Pour activer le support ACL pour les systèmes de fichiers UFS, ce qui suit:</p></div><div class="literalblock programlisting"><div class=content><pre>options UFS_ACL</pre></div></div><div class=paragraph><p>doit être compilé dans le noyau. Si cette option n’a pas été ajoutée, un avertissement sera affiché lors d’une tentative de montage d’un système de fichiers supportant les ACLs. Cette option est présente dans le noyau <span class=filename>GENERIC</span>. Les ACLs reposent sur des attributs étendus rajoutés au système de fichiers. Les attributs étendus sont nativement supportés par la prochaine génération du système de fichiers UNIX, UFS2.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Un supplément de travail d’administration est requis pour configurer les attributs étendus sous UFS1 par rapport à UFS2. Les performances des attributs étendus sous UFS2 sont sensiblement meilleures également. Il en résulte donc, que l’UFS2 est généralement recommandé par rapport à l’UFS1 pour une utilisation des listes de contrôle d’accès.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Les ACLs sont activés grâce l’option utilisée lors du montage, <code>acls</code>, qui peut être ajouté dans le fichier <span class=filename>/etc/fstab</span>. Cette option de montage peut être également automatiquement fixée d’une manière définitive en utilisant <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> pour modifier l’indicateur ACL du "superblock" dans l’entête du système de fichiers. Il est en général préférable d’utiliser cet indicateur pour plusieurs raisons:</p></div><div class=ulist><ul><li><p>L’option de montage pour les ACLs ne peut être modifiée par un simple remontage (<a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> <code>-u</code>), mais uniquement par un <a href="https://man.freebsd.org/cgi/man.cgi?query=umount&amp;sektion=8&amp;format=html">umount(8)</a> complet et suivi d’un <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a>. Cela signifie que les ACLs ne peuvent être activées sur le système de fichiers racine après le démarrage. Cela signifie également que vous ne pouvez pas modifier la disposition d’un système de fichier une fois que c’est activé.</p></li><li><p>Positionner l’indicateur du "superblock" fera que le système de fichiers sera toujours monté avec les ACLs activées même s’il n’y a pas d’entrée dans le fichier <span class=filename>fstab</span>, ou s’il y a une réorganisation des périphériques. Cela prévient le montage accidentel du système de fichiers sans les ACLs activées, ce qui peut provoquer une activation impropre des ACLs et par conséquent des problèmes de sécurité.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Nous pourrions modifier le comportement des ACLs pour permettre l’activation de l’indicateur sans le besoin d’un nouveau <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> complet, mais nous considérons qu’il est préférable d’éviter un montage accidentel sans les ACLs activées, parce que vous pouvez vous "tirer facilement dans les pieds" si vous activez les ACLs, puis les désactivez, et ensuite les réactivez à nouveau sans réinitialiser les attributs étendus. En général, une fois que vous avez activé les ACLs sur un système de fichiers, elles ne devraient pas être désactivées étant donné que les protections de fichiers résultantes peuvent ne pas être compatible avec celles prévues par les utilisateurs du système, et réactiver les ACLs peut réaffecter les précédentes ACLs aux fichiers qui ont depuis eût leur permissions modifiées, avec pour résultat un comportement imprévisible.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Les systèmes de fichiers avec les ACLs activées présenteront un signe <code>+</code> au niveau de leurs permissions quand elles seront affichées. Par exemple:</p></div><div class="literalblock programlisting"><div class=content><pre>drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directory1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directory2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directory3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre></div></div><div class=paragraph><p>Ici nous voyons que les répertoires <span class=filename>directory1</span>, <span class=filename>directory2</span>, et <span class=filename>directory3</span> utilisent les ACLs. Ce n’est pas le cas du répertoire <span class=filename>public_html</span>.</p></div><div class=sect2><h3 id=_utilisation_des_acls>14.12.1. Utilisation des ACLs<a class=anchor href=#_utilisation_des_acls></a></h3><div class=paragraph><p>Les ACLs peuvent être affichées par l’utilitaire <a href="https://man.freebsd.org/cgi/man.cgi?query=getfacl&amp;sektion=1&amp;format=html">getfacl(1)</a>. Par exemple pour voir les ACLs sur le fichier <span class=filename>test</span>, on utilisera la commande:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% getfacl <span class=nb>test</span>
	<span class=c>#file:test</span>
	<span class=c>#owner:1001</span>
	<span class=c>#group:1001</span>
	user::rw-
	group::r--
	other::r--</code></pre></div></div><div class=paragraph><p>Pour modifier le paramétrage des ACLs sur ce fichier, invoquez la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=setfacl&amp;sektion=1&amp;format=html">setfacl(1)</a>. Intéressons-nous à la ligne:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% setfacl <span class=nt>-k</span> <span class=nb>test</span></code></pre></div></div><div class=paragraph><p>L’indicateur <code>-k</code> supprimera toutes les ACLs actuellement définies pour un fichier ou un système de fichiers. Une méthode plus adaptée est d’utiliser l’option <code>-b</code> étant donné qu’elle conserve les champs de base nécessaires au bon fonctionnement des ACLs.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% setfacl <span class=nt>-m</span> u:trhodes:rwx,group:web:r--,o::--- <span class=nb>test</span></code></pre></div></div><div class=paragraph><p>Dans la commande ci-dessus, l’option <code>-m</code> a été utilisée pour modifier les entrées ACL par défaut. Comme il n’y avait pas d’entrées pré-définies, puisqu’elles ont été supprimées par la commande précédente, cela restaurera les options par défaut et prendra en compte les options précisées. Prenez soin de noter que si vous ajoutez un utilisateur ou un groupe qui n’existe pas sur le système, une erreur <code>Invalid argument</code> sera affichée sur la sortie standard.</p></div></div></div></div><div class=sect1><h2 id=security-portaudit>14.13. Surveillance des problèmes de sécurité relatifs aux programmes tierce-partie<a class=anchor href=#security-portaudit></a></h2><div class=sectionbody><div class=paragraph><p>Ces dernières années, le monde de la sécurité a fait beaucoup de progrès dans la manière d’évaluer les vulnérabilités. Le risque d’une intrusion dans le système augmente avec l’installation et la configuration d’utilitaires tierce-partie et cela pour quasiment n’importe quel système d’exploitation disponible aujourd’hui.</p></div><div class=paragraph><p>L’évaluation des vulnérabilités est un facteur clé de la politique de sécurité, alors que FreeBSD publie des avis pour le système de base, faire de même pour les programmes tierce-partie dépasse les capacités du projet FreeBSD. Il existe un moyen d’atténuer les vulnérabilités des logiciels tierce-partie et de prévenir les administrateurs des problèmes de sécurité connus. Un outil FreeBSD connu sous le nom de Portaudit existe dans cet unique but.</p></div><div class=paragraph><p>Le logiciel porté <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portaudit/>ports-mgmt/portaudit</a> consulte une base de données, mise à jour et maintenue par l’équipe de sécurité de FreeBSD et les développeurs des logiciels portés, à la recherche de problèmes de sécurité connus.</p></div><div class=paragraph><p>Pour utiliser Portaudit, ce dernier doit être installé à partir du catalogue des logiciels portés:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/ports-mgmt/portaudit &amp;&amp; make install clean</span></code></pre></div></div><div class=paragraph><p>Lors du processus d’installation, les fichiers de configuration de <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a> seront mis à jour, autorisant l’ajout des résultats de Portaudit dans l’exécution quotidienne du rapport de sécurité. Assurez-vous que les rapports de sécurité quotidiens, qui sont envoyés au compte messagerie de <code>root</code>, sont bien lus. Pas plus de configuration ne sera nécessaire.</p></div><div class=paragraph><p>Après l’installation, un administrateur peut mettre à jour la base de données et afficher les vulnérabilités connues des logiciels installés en invoquant la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portaudit -Fda</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>La base de données sera automatiquement mise à jour lors de l’exécution de <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a>, cela rendant par conséquent facultative la commande précédente. Elle n’est requise que pour les exemples qui vont suivre.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Pour contrôler à n’importe quel moment les programmes tierce-partie installés à partir du catalogue des logiciels portés, un administrateur n’aura qu’à exécuter la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portaudit -a</span></code></pre></div></div><div class=paragraph><p>Portaudit produira pour les logiciels vulnérables quelque chose comme ceci:</p></div><div class="literalblock programlisting"><div class=content><pre>Affected package: cups-base-1.1.22.0_1
Type of problem: cups-base -- HPGL buffer overflow vulnerability.
Reference: http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html

1 problem(s) in your installed packages found.

You are advised to update or deinstall the affected package(s) immediately.</pre></div></div><div class=paragraph><p>En faisant pointer un navigateur Web sur l’URL proposée, un administrateur pourra obtenir plus d’information au sujet de la vulnérabilité en question. Cela comprendra les versions affectées, listées par version du logiciel porté FreeBSD, ainsi que des liens vers d’autres sites Web pouvant contenir des avis de sécurité.</p></div><div class=paragraph><p>En résumé, Portaudit est un outil puissant et extrêmement utile quand il est employé conjointement avec le logiciel Portupgrade.</p></div></div></div><div class=sect1><h2 id=security-advisories>14.14. Avis de sécurité de FreeBSD<a class=anchor href=#security-advisories></a></h2><div class=sectionbody><div class=paragraph><p>Comme plusieurs systèmes d’exploitation destinés à la production, FreeBSD publie des "Avis de sécurité". Ces avis sont généralement envoyés aux listes de diffusion traitant de la sécurité et ajoutés dans l’errata une fois seulement que les versions correspondantes ont été corrigées. Cette section aura pour objectif d’expliquer ce qu’est un avis, comment le comprendre, et quelles mesures sont à prendre pour appliquer des correctifs à un système.</p></div><div class=sect2><h3 id=_a_quoi_ressemble_un_avis_de_sécurité>14.14.1. A quoi ressemble un avis de sécurité?<a class=anchor href=#_a_quoi_ressemble_un_avis_de_sécurité></a></h3><div class=paragraph><p>Les avis de sécurité de FreeBSD ressemblent à celui présenté ci-dessous qui provient de la liste de diffusion <a href=https://lists.FreeBSD.org/subscription/freebsd-security-notifications>liste de diffusion des avis de sécurité pour FreeBSD</a>.</p></div><div class="literalblock programlisting"><div class=content><pre>=============================================================================
FreeBSD-SA-XX:XX.UTIL                                     Security Advisory
                                                          The FreeBSD Project

Topic:          denial of service due to some problem <i class=conum data-value=1></i><b>(1)</b>

Category:       core <i class=conum data-value=2></i><b>(2)</b>
Module:         sys <i class=conum data-value=3></i><b>(3)</b>
Announced:      2003-09-23 <i class=conum data-value=4></i><b>(4)</b>
Credits:        Person@EMAIL-ADDRESS <i class=conum data-value=5></i><b>(5)</b>
Affects:        All releases of FreeBSD <i class=conum data-value=6></i><b>(6)</b>
                FreeBSD 4-STABLE prior to the correction date
Corrected:      2003-09-23 16:42:59 UTC (RELENG_4, 4.9-PRERELEASE)
                2003-09-23 20:08:42 UTC (RELENG_5_1, 5.1-RELEASE-p6)
                2003-09-23 20:07:06 UTC (RELENG_5_0, 5.0-RELEASE-p15)
                2003-09-23 16:44:58 UTC (RELENG_4_8, 4.8-RELEASE-p8)
                2003-09-23 16:47:34 UTC (RELENG_4_7, 4.7-RELEASE-p18)
                2003-09-23 16:49:46 UTC (RELENG_4_6, 4.6-RELEASE-p21)
                2003-09-23 16:51:24 UTC (RELENG_4_5, 4.5-RELEASE-p33)
                2003-09-23 16:52:45 UTC (RELENG_4_4, 4.4-RELEASE-p43)
                2003-09-23 16:54:39 UTC (RELENG_4_3, 4.3-RELEASE-p39) <i class=conum data-value=7></i><b>(7)</b>
FreeBSD only:   NO <i class=conum data-value=8></i><b>(8)</b>

For general information regarding FreeBSD Security Advisories,
including descriptions of the fields above, security branches, and the
following sections, please visit
http://www.freebsd.org/security/.

I.   Background <i class=conum data-value=9></i><b>(9)</b>

II.  Problem Description <i class=conum data-value=10></i><b>(10)</b>

III. Impact <i class=conum data-value=11></i><b>(11)</b>

IV.  Workaround <i class=conum data-value=12></i><b>(12)</b>

V.   Solution <i class=conum data-value=13></i><b>(13)</b>

VI.  Correction details <i class=conum data-value=14></i><b>(14)</b>

VII. References <i class=conum data-value=15></i><b>(15)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Le champ <code>Topic</code> indique exactement quel est le problème. C’est basiquement une introduction à l’avis de sécurité en tant que tel et mentionne l’utilitaire contenant la vulnérabilité.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Le champ <code>Category</code> fait référence à la partie du système affectée qui peut être une parmi <code>core</code>, <code>contrib</code>, ou <code>ports</code>. La catégorie <code>core</code> signifie que la vulnérabilité affecte un composant système du système d’exploitation FreeBSD. La catégorie <code>contrib</code> précise que la vulnérabilité affecte du logiciel contribué au projet FreeBSD, comme sendmail. Et enfin la catégorie <code>ports</code> indique que la vulnérabilité affecte un logiciel du catalogue des logiciels portés.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Le champ <code>Module</code> fait référence à l’emplacement du composant, par exemple <code>sys</code>. Dans notre exemple, nous voyons que le module <code>sys</code> est affecté, par conséquent, cette vulnérabilité concerne un composant utilisé dans le noyau.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Le champ <code>Announced</code> reflète la date à laquelle l’avis de sécurité a été publié, ou annoncé au monde entier. Cela signifie que l’équipe de sécurité a vérifié que le problème existait vraiment et qu’un correctif a été ajouté au référentiel des sources de FreeBSD.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Le champ <code>Credits</code> donne le crédit de la découverte du problème à la personne ou l’organisation qui a constaté et rapporté le problème.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Le champ <code>Affects</code> explique quelles versions de FreeBSD sont affectées par cette vulnérabilité. Pour le noyau, un coup d’oeil rapide à la sortie de la commande <code>ident</code> sur les fichiers affectés aidera à déterminer la révision. Pour les logiciels portés, le numéro de version est listé après le nom du logiciel dans <span class=filename>/var/db/pkg</span>. Si le système ne se synchronise pas avec le référentiel CVS FreeBSD et ne recompile pas les sources quotidiennement, il y a des chances qu’il soit affecté par le problème.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Le champ <code>Corrected</code> indique la date, l’heure, le fuseau horaire, et la version de publication qui a été corrigée.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>Le champ <code>FreeBSD only</code> précise si cette vulnérabilité affecte juste FreeBSD, ou si elle concerne d’autres systèmes d’exploitation également.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>Le champ <code>Background</code> donne une information précise sur ce qu’est l’utilitaire affecté. La plupart du temps, ce champ indique pourquoi l’utilitaire existe sous FreeBSD, son rôle, et quelques informations sur la naissance de l’utilitaire.</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>Le champ <code>Problem Description</code> explique en profondeur le problème de sécurité. Cela peut comprendre des informations sur le code défectueux, ou même comment l’utilitaire pourrait être utilisé pour ouvrir un faille de sécurité.</td></tr><tr><td><i class=conum data-value=11></i><b>11</b></td><td>Le champ <code>Impact</code> décrit l’impact sur le système du problème de sécurité. Par exemple, cela peut aller de l’attaque par refus de service, au gain de droits supplémentaires par les utilisateurs, en passant par l’obtention des droits de super-utilisateur par l’attaquant.</td></tr><tr><td><i class=conum data-value=12></i><b>12</b></td><td>Le champ <code>Workaround</code> offre une solution de contournement possible pour les administrateurs qui ne sont pas en mesure de mettre à jour le système. Cela pouvant être due à des contraintes de temps, à une disponibilité réseau, ou une tout autre raison. Cependant, la sécurité ne devrait pas être prise à la légère, et un système affecté devrait soit être corrigé soit implémenter une solution de contournement du problème de sécurité.</td></tr><tr><td><i class=conum data-value=13></i><b>13</b></td><td>Le champ <code>Solution</code> donne les instructions sur l’application de correctifs sur le système affecté. C’est une méthode pas à pas vérifiée et testée pour obtenir un système corrigé et fonctionnant de manière sécurisée.</td></tr><tr><td><i class=conum data-value=14></i><b>14</b></td><td>Le champ <code>Correction Details</code> liste la branche CVS ou la version de publication avec les points remplacés par des caractères souligné. Il donne également le numéro de révision des fichiers affectés sur chaque branche.</td></tr><tr><td><i class=conum data-value=15></i><b>15</b></td><td>Le champ <code>References</code> donne en général d’autres sources d’informations. Cela peut être des URLs web, des ouvrages, des listes de diffusions, et des forums de discussion.</td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=security-accounting>14.15. Comptabilité des processus<a class=anchor href=#security-accounting></a></h2><div class=sectionbody><div class=paragraph><p>La comptabilité des processus est une mesure de sécurité avec laquelle un administrateur peut suivre l’utilisation des ressources du système, leur répartition entre les utilisateurs, surveiller le système et avoir un suivi minimal des commandes exécutées par un utilisateur.</p></div><div class=paragraph><p>Ce système possède des avantages et des inconvénients. Un de ses avantages est qu’une intrusion pourra être remontée jusqu’à son point d’entrée. Un des inconvénients est la quantité de journaux générée par cette comptabilité et l’espace disque que cela peut demander. Cette section guidera l’administrateur au travers des bases de la comptabilité des processus.</p></div><div class=sect2><h3 id=_activer_et_utiliser_la_comptabilité_des_processus>14.15.1. Activer et utiliser la comptabilité des processus<a class=anchor href=#_activer_et_utiliser_la_comptabilité_des_processus></a></h3><div class=paragraph><p>Avant de pouvoir utiliser la comptabilité des processus, il faut l’activer. Cela se fait en exécutant les commandes suivantes:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/account/acct</span>

<span class=c># accton /var/account/acct</span>

<span class=c># echo &#39;accounting_enable=&#34;YES&#34;&#39; &gt;&gt; /etc/rc.conf</span></code></pre></div></div><div class=paragraph><p>Une fois activée, les statistiques concernant le CPU, les commandes, etc. commenceront à être comptabilisée. Tous les journaux de comptabilisation des processus sont dans un format directement illisible pour l’utilisateur, ils pourront être examinés à l’aide de l’utilitaire <a href="https://man.freebsd.org/cgi/man.cgi?query=sa&amp;sektion=8&amp;format=html">sa(8)</a>. Si elle est utilisée sans paramètre, la commande <code>sa</code> affichera les informations relatives au nombre d’appels par utilisateur, le temps écoulé en minutes, la durée totale des temps CPU et utilisateur en minutes, le nombre moyen des opérations d’E/S, etc.</p></div><div class=paragraph><p>Pour afficher les informations sur les commandes utilisées, on emploiera l’utilitaire <a href="https://man.freebsd.org/cgi/man.cgi?query=lastcomm&amp;sektion=1&amp;format=html">lastcomm(1)</a>. La commande <code>lastcomm</code> peut être employée pour afficher les commandes tapées par les utilisateurs sur des terminaux (<a href="https://man.freebsd.org/cgi/man.cgi?query=ttys&amp;sektion=5&amp;format=html">ttys(5)</a>) spécifiques; par exemple:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lastcomm ls</span>
	trhodes ttyp1</code></pre></div></div><div class=paragraph><p>imprimera toute utilisation de la commande <code>ls</code> par l’utilisateur <code>trhodes</code> sur le terminal <code>ttyp1</code>.</p></div><div class=paragraph><p>De nombreuses autres options utiles existent et sont détaillées dans les pages de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=lastcomm&amp;sektion=1&amp;format=html">lastcomm(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acct&amp;sektion=5&amp;format=html">acct(5)</a> et <a href="https://man.freebsd.org/cgi/man.cgi?query=sa&amp;sektion=8&amp;format=html">sa(8)</a>.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 mars 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/fr/books/handbook/users class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/fr/books/handbook/jails class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Sommaire</h3><nav id=TableOfContents><ul><li><a href=#security-synopsis>14.1. Synopsis</a></li><li><a href=#security-intro>14.2. Introduction</a></li><li><a href=#securing-freebsd>14.3. Securing FreeBSD <strong>Traduction en Cours</strong></a></li><li><a href=#crypt>14.4. DES, MD5, et chiffrement</a></li><li><a href=#one-time-passwords>14.5. Mots de passe non réutilisables</a></li><li><a href=#tcpwrappers>14.6. L’encapsuleur TCP ("TCP Wrappers")</a></li><li><a href=#kerberosIV>14.7. Kerberos</a></li><li><a href=#kerberos5>14.8. Kerberos5 <strong>Traduction en Cours</strong></a></li><li><a href=#openssl>14.9. OpenSSL</a></li><li><a href=#ipsec>14.10. IPsec</a></li><li><a href=#openssh>14.11. OpenSSH</a></li><li><a href=#fs-acl>14.12. Listes de contrôle d’accès au système de fichiers</a></li><li><a href=#security-portaudit>14.13. Surveillance des problèmes de sécurité relatifs aux programmes tierce-partie</a></li><li><a href=#security-advisories>14.14. Avis de sécurité de FreeBSD</a></li><li><a href=#security-accounting>14.15. Comptabilité des processus</a></li></ul></nav><hr><div class=resources><h3>Ressources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Téléchargement en PDF"></i><a href=https://download.freebsd.org/doc/fr/books/handbook/handbook_fr.pdf>Téléchargement en PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Éditer cette page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/fr/_index target=_blank>Éditer cette page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/fr/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>French</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Clair</option><option value=theme-dark>Sombre</option><option value=theme-high-contrast>Contraste élevé</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/fr class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/fr/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>