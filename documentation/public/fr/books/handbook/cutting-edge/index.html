<!doctype html><html class=theme-light lang=fr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/><title>Chapitre 25. Mise à jour de FreeBSD | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapitre 25. Mise à jour de FreeBSD"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="fr"><meta property="og:url" content="http://172.16.201.134:1313/fr/books/handbook/cutting-edge/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/fr\/books\/handbook\/cutting-edge\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/fr>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/fr/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/fr/books>Books</a></li><li><a href=http://172.16.201.134:1313/fr/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/fr/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=fr>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/preface/>Préface</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/preface/#preface-audience>Public visé</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/preface/#preface-changes-from2>Modifications depuis la Seconde Edition</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/preface/#preface-changes>Modifications depuis la Première Edition</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/preface/#preface-overview>Organisation de cet ouvrage</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/preface/#preface-conv>Conventions utilisées dans ce livre</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/preface/#preface-acknowledgements>Remerciements</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/parti/>Partie I. Pour commencer</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/introduction/>Chapitre 1. Introduction</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/introduction/#introduction-synopsis>1.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/introduction/#nutshell>1.2. Bienvenue à FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/introduction/#history>1.3. A propos du Projet FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/>Chapitre 2. Installer FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. Configuration matérielle minimale</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-pre>2.3. Tâches de pré-installation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-start>2.4. Lancer l’installation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#using-bsdinstall>2.5. Utilisation de bsdinstall</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-partitioning>2.6. Allouer l’espace disque</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-fetching-distribution>2.7. Récupération des fichiers de distribution</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-post>2.8. Comptes utilisateurs, fuseau horaire, services et renforcement de la sécurité</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-network>2.9. Interfaces réseau</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.10. Dépannage</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bsdinstall/#using-live-cd>2.11. Utilisation du CD Live</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/basics/>Chapitre 3. Quelques bases d'UNIX</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#basics-synopsis>3.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#consoles>3.2. Consoles virtuelles terminaux</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#permissions>3.3. Permissions</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#dirstructure>3.4. Organisation de l’arborescence des répertoires</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#disk-organization>3.5. Organisation des disques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#mount-unmount>3.6. Monter et démonter des systèmes de fichiers</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#basics-processes>3.7. Processus</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#basics-daemons>3.8. Daemons, signaux, et comment tuer un processus</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#shells>3.9. Interpréteurs de commandes - "Shells"</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#editors>3.10. Editeurs de texte</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#basics-devices>3.11. Périphériques et fichiers spéciaux de périphérique</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#binary-formats>3.12. Le format des fichiers binaires</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/basics/#basics-more-information>3.13. Pour plus d’information</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/ports/>Chapitre 4. Installer des applications: les logiciels pré-compilés et les logiciels portés</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/ports/#ports-synopsis>4.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ports/#ports-overview>4.2. Généralités sur l’installation de logiciels</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ports/#ports-finding-applications>4.3. Trouver votre application</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ports/#packages-using>4.4. Utiliser le système des logiciels pré-compilés</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ports/#ports-using>4.5. Utiliser le catalogue des logiciels portés</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ports/#ports-nextsteps>4.6. Activités de post-installation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ports/#ports-broken>4.7. Que faire avec les logiciels portés ne fonctionnant pas?</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/x11/>Chapitre 5. Le système X Window</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x11-synopsis>5.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x-understanding>5.2. Terminologie</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x-install>5.3. Installer X11</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x-config>5.4. Configuration d’Xorg</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x-fonts>5.5. Utilisation des polices de caractères sous Xorg</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x-xdm>5.6. Le gestionnaire de connexion graphique XDM</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x11-wm>5.7. Environnements de bureau</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/x11/#x-compiz-fusion>5.8. Installation de Compiz Fusion</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/partii/>Partie II. Tâches courantes</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/desktop/>Chapitre 6. Bureautique</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/desktop/#desktop-synopsis>6.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/desktop/#desktop-browsers>6.2. Navigateurs</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/desktop/#desktop-productivity>6.3. Productivité</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/desktop/#desktop-viewers>6.4. Lecteurs de document</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/desktop/#desktop-finance>6.5. Finance</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/desktop/#desktop-summary>6.6. Résumé</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/multimedia/>Chapitre 7. Multimédia</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/multimedia/#multimedia-synopsis>7.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/multimedia/#sound-setup>7.2. Configurer une carte son</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/multimedia/#sound-mp3>7.3. Fichiers MP3</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/multimedia/#video-playback>7.4. Lecture des Vidéos</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/multimedia/#tvcard>7.5. Configuration des cartes TV</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/multimedia/#scanners>7.6. Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/kernelconfig/>Chapitre 8. Configurer le noyau de FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Pourquoi compiler un noyau sur mesure?</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/kernelconfig/#kernelconfig-building>8.3. Compiler et installer un noyau sur mesure</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/kernelconfig/#kernelconfig-config>8.4. Le fichier de configuration</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/kernelconfig/#kernelconfig-trouble>8.5. Si quelque chose se passe mal</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/printing/>Chapitre 9. Imprimer</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/printing/#printing-synopsis>9.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/printing/#printing-intro-spooler>9.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/printing/#printing-intro-setup>9.3. Configuration de base</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/printing/#printing-advanced>9.4. Configuration avancée de l’imprimante</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/printing/#printing-using>9.5. Using Printers <strong>Traduction en Cours</strong></a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/printing/#printing-lpd-alternatives>9.6. Alternatives to the Standard Spooler <strong>Traduction en Cours</strong></a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/printing/#printing-troubleshooting>9.7. Troubleshooting <strong>Traduction en Cours</strong></a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/linuxemu/>Chapitre 10. Compatibilité binaire avec Linux</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Configurer la compatibilité binaire avec Linux</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/linuxemu/#linuxemu-packages>10.3. Système de base CentOS à partir des paquets binaires FreeBSD</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/linuxemu/#linuxemu-debootstrap>10.4. Système de base Debian / Ubuntu avec debootstrap(8)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/linuxemu/#linuxemu-advanced>10.5. Sujets avancés</a></li></ul></li><li><input type=checkbox id=chapter-54c06b703788dcba4081bec5a0407412 class=toggle>
<label class="icon cursor" for=chapter-54c06b703788dcba4081bec5a0407412><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/wine/>Chapitre 11. WINE</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#wine-synopsis>11.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#wine-overview-concepts>11.2. WINE généralités et concepts</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#installing-wine-on-freebsd>11.3. Installer WINE sur FreeBSD</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#running-first-wine-program>11.4. Lancer un premier programme WINE sous FreeBSD</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#configuring-wine-installation>11.5. Configurer WINE après installation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#wine-management-guis>11.6. Interfaces graphiques de gestion de WINE</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#wine-in-multi-user-os-installations>11.7. WINE sur un système FreeBSD avec plusieurs utilisateurs</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/wine/#wine-on-os-faq>11.8. WINE sur FreeBSD Foire Aux Questions</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/partiii/>Partie III. Administration Système</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/config/>Chapitre 11. Configuration et optimisation</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#config-synopsis>11.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-core-configuration>11.2. Configuration principale</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-appconfig>11.3. Configuration des applications</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-starting-services>11.4. Démarrer des services</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-cron>11.5. Configuration de l’utilitaire <code>cron</code></a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-rcd>11.6. Utilisation du système rc(8) sous FreeBSD</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#config-network-setup>11.7. Configuration des cartes réseaux</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-virtual-hosts>11.8. Hôtes virtuels</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-configfiles>11.9. Fichiers de configuration</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-sysctl>11.10. Optimisation avec sysctl(8)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-disk>11.11. Optimiser les disques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#configtuning-kernel-limits>11.12. Optimisation des limitations du noyau</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#adding-swap-space>11.13. Ajouter de l’espace de pagination</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#acpi-overview>11.14. Gestion de l’énergie et des ressources</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/config/#ACPI-debug>11.15. Utiliser et déboguer l’ACPI sous FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/boot/>Chapitre 12. Processus de démarrage de FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/boot/#boot-synopsis>12.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/boot/#boot-introduction>12.2. Le problème du démarrage</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/boot/#boot-blocks>12.3. Le gestionnaire de démarrage et les étapes de démarrage</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/boot/#boot-kernel>12.4. Interaction avec le noyau au démarrage</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/boot/#device-hints>12.5. "Device Hints"-Paramétrage des périphériques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/boot/#boot-init>12.6. Init: Initialisation de la gestion des processus</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/boot/#boot-shutdown>12.7. Séquence d’arrêt du système</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/users/>Chapitre 13. Gestion des comptes et des utilisateurs</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-synopsis>13.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-introduction>13.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-superuser>13.3. Le compte super-utilisateur</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-system>13.4. Comptes système</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-user>13.5. Comptes utilisateur</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-modifying>13.6. Modifier des comptes</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-limiting>13.7. Mettre en place des restrictions pour les utilisateurs</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/users/#users-groups>13.8. Groupes</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/security/>Chapitre 14. Sécurité</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#security-synopsis>14.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#security-intro>14.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#securing-freebsd>14.3. Securing FreeBSD <strong>Traduction en Cours</strong></a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#crypt>14.4. DES, MD5, et chiffrement</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#one-time-passwords>14.5. Mots de passe non réutilisables</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#tcpwrappers>14.6. L’encapsuleur TCP ("TCP Wrappers")</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#kerberosIV>14.7. Kerberos</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#kerberos5>14.8. Kerberos5 <strong>Traduction en Cours</strong></a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#ipsec>14.10. IPsec</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#fs-acl>14.12. Listes de contrôle d’accès au système de fichiers</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#security-portaudit>14.13. Surveillance des problèmes de sécurité relatifs aux programmes tierce-partie</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#security-advisories>14.14. Avis de sécurité de FreeBSD</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/security/#security-accounting>14.15. Comptabilité des processus</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/jails/>Chapitre 15. Environnements jail</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/jails/#jails-synopsis>15.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/jails/#jails-terms>15.2. Termes relatifs aux environnements jail</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/jails/#jails-intro>15.3. Introduction</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/jails/#jails-build>15.4. Création et contrôle de l’environnement jail</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/jails/#jails-tuning>15.5. Optimisation et administration</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/mac/>Chapitre 16. Mandatory Access Control ** Traduction en Cours **</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-synopsis>16.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-glossary>16.2. Key Terms in this Chapter</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-initial>16.3. Explanation of MAC</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-understandlabel>16.4. Understanding MAC Labels</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-modules>16.5. Module Configuration</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-bsdextended>16.6. The MAC bsdextended Module</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-ifoff>16.7. The MAC ifoff Module</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-portacl>16.8. The MAC portacl Module</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-labelingpolicies>16.9. MAC Policies with Labeling Features</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-partition>16.10. The MAC partition Module</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-mls>16.11. The MAC Multi-Level Security Module</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-biba>16.12. The MAC Biba Module</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-lomac>16.13. The MAC LOMAC Module</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-implementing>16.14. Implementing a Secure Environment with MAC</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#MAC-examplehttpd>16.15. Another Example: Using MAC to Constrain a Web Server</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mac/#mac-troubleshoot>16.16. Troubleshooting the MAC Framework</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/audit/>Chapitre 17. Audit des événements relatifs à la sécurité du système</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/audit/#audit-synopsis>17.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/audit/#audit-inline-glossary>17.2. Mots-clés</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/audit/#audit-config>17.3. Configuration de l’audit</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/audit/#audit-administration>17.4. Travailler avec les traces d’audit</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/disks/>Chapitre 18. Stockage des données</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#disks-synopsis>18.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#disks-naming>18.2. Noms des périphériques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#disks-adding>18.3. Ajouter des disques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#usb-disks>18.5. Périphériques de stockage USB</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#creating-cds>18.6. Création et utilisation de supports optiques (CDs)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#creating-dvds>18.7. Création et utilisation de supports optiques (DVDs)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#floppies>18.8. Création et utilisation de disquettes</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#backups-tapebackups>18.9. Créer et utiliser les bandes magnétiques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#backups-floppybackups>18.10. Sauvegardes sur disquettes</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#backup-strategies>18.11. Stratégies de sauvegarde</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#backup-basics>18.12. Sauvegardes</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#disks-virtual>18.13. Systèmes de fichiers réseaux, en mémoire et sauvegardés sur fichier</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#snapshots>18.14. Instantané ("Snapshot") d’un système de fichiers</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#quotas>18.15. Quotas d’utilisation des disques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#disks-encrypting>18.16. Chiffrer les partitions d’un disque</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/disks/#swap-encrypting>18.17. Chiffrage de l’espace de pagination</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/geom/>Chapitre 19. GEOM: architecture modulaire de gestion des disques</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/geom/#GEOM-synopsis>19.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/geom/#GEOM-intro>19.2. Introduction à GEOM</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/geom/#GEOM-striping>19.3. RAID0 - "Striping"</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - "mirroring"</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/geom/#geom-ggate>19.5. Périphériques réseau "GEOM Gate"</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/geom/#geom-glabel>19.6. Ajouter un label à un disque</a></li></ul></li><li><input type=checkbox id=chapter-73e82560fcb7145b7c0e2ec47af8fc04 class=toggle>
<label class="icon cursor" for=chapter-73e82560fcb7145b7c0e2ec47af8fc04><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/>Chapitre 20. The Z File System (ZFS) ** Traduction en Cours **</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/#zfs-differences>20.1. What Makes ZFS Different</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/#zfs-quickstart>20.2. Quick Start Guide</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/#zfs-zpool>20.3. <code>zpool</code> Administration</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/#zfs-zfs>20.4. <code>zfs</code> Administration</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/#zfs-zfs-allow>20.5. Delegated Administration</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/#zfs-links>20.6. Additional Resources</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/zfs/#zfs-term>20.7. ZFS Features and Terminology</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/filesystems/>Chapitre 21. Autres systèmes de fichiers</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/filesystems/#filesystems-synopsis>21.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/filesystems/#filesystems-linux>21.2. Systèmes de fichiers Linux®</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/>Chapitre 22. Le gestionnaire de volume Vinum</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#vinum-synopsis>22.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#vinum-intro>22.2. Les disques sont trop petits</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#_les_goulots_détranglement_daccès_aux_données>22.3. Les goulots d’étranglement d’accès aux données</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#_intégrité_des_données>22.4. Intégrité des données</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#vinum-objects>22.5. Objets Vinum</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#vinum-examples>22.6. Quelques exemples</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#_appellation_des_objets>22.7. Appellation des objets</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/vinum/#vinum-config>22.8. Configuration de Vinum</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/virtualization/>Chapitre 23. Virtualisation</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/virtualization/#virtualization-synopsis>23.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/virtualization/#virtualization-guest>23.2. FreeBSD comme système d’exploitation invité</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/virtualization/#virtualization-host>23.3. FreeBSD comme système d’exploitation hôte</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/l10n/>Chapitre 24. Localisation - Utilisation et configuration de l'I18N/L10N</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/l10n/#l10n-synopsis>24.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/l10n/#l10n-basics>24.2. Les bases</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/l10n/#using-localization>24.3. Utiliser la localisation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/l10n/#l10n-compiling>24.4. Compiler des programmes I18N</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/l10n/#lang-setup>24.5. Localiser FreeBSD pour des langues spécifiques</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle checked>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/>Chapitre 25. Mise à jour de FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#updating-upgrading-synopsis>25.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>25.2. Mise à jour de FreeBSD</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#updating-upgrading-portsnap>25.3. Portsnap: un outil de mise à jour du catalogue des logiciels portés</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#updating-upgrading-documentation>25.4. Updating the Documentation Set <strong>Traduction en Cours</strong></a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#current-stable>25.5. Suivre une branche de développement</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#synching>25.6. Synchroniser vos sources</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#makeworld>25.7. Recompiler le système</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/cutting-edge/#small-lan>25.8. Suivre les mises à jour pour plusieurs machines</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/dtrace/>Chapitre 26. DTrace</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/dtrace/#dtrace-synopsis>26.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/dtrace/#dtrace-implementation>26.2. Des différences de mise en oeuvre</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/dtrace/#dtrace-enable>26.3. Activer la prise en charge de DTrace</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/dtrace/#dtrace-using>26.4. Utiliser DTrace</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/dtrace/#dtrace-language>26.5. Le langage D</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/partiv/>Partie IV. Réseau</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/serialcomms/>Chapitre 27. Serial Communications ** Traduction en Cours **</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/serialcomms/#serial-synopsis>27.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/serialcomms/#serial>27.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/serialcomms/#term>27.3. Terminals</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/serialcomms/#dialup>27.4. Dial-in Service</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/serialcomms/#dialout>27.5. Dial-out Service</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/serialcomms/#serialconsole-setup>27.6. Setting Up the Serial Console</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/ppp-and-slip/>Chapitre 28. PPP et SLIP</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>28.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ppp-and-slip/#userppp>28.2. Using User PPP <strong>Traduction en Cours</strong></a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ppp-and-slip/#ppp>28.3. Utiliser PPP intégré au noyau</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ppp-and-slip/#pppoe>28.4. Utiliser PPP sur Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ppp-and-slip/#pppoa>28.5. Utiliser PPP sur ATM (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/ppp-and-slip/#slip>28.6. Utiliser SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/mail/>Chapitre 29. Courrier électronique</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-synopsis>29.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-using>29.2. Utilisation du courrier électronique</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#sendmail>29.3. Configuration de sendmail</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-changingmta>29.4. Changer votre agent de transfert de courrier</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-trouble>29.5. Dépannage</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-advanced>29.6. Sujets avancés</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#SMTP-UUCP>29.7. SMTP avec UUCP</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#outgoing-only>29.8. Configuration pour l’envoi seul</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#SMTP-dialup>29.9. Utiliser le courrier électronique avec une connexion temporaire</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#SMTP-Auth>29.10. Authentification SMTP</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-agents>29.11. Clients de messagerie</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-fetchmail>29.12. Utiliser fetchmail</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mail/#mail-procmail>29.13. Utiliser procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/>Chapitre 30. Serveurs réseau</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-servers-synopsis>30.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-inetd>30.2. Le "super-serveur" inetd</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-nfs>30.3. Système de fichiers réseau (NFS)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-nis>30.4. Services d’information réseau (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-dhcp>30.5. Configuration réseau automatique (DHCP)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-dns>30.6. Serveurs de noms (DNS)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-apache>30.7. Serveur HTTP Apache</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-ftp>30.8. Protocole de transfert de fichiers (FTP)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-samba>30.9. Serveur de fichiers et d’impression pour clients Microsoft® Windows® (Samba)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/network-servers/#network-ntp>30.10. Synchronisation de l’horloge avec NTP</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/firewalls/>Chapitre 31. Firewalls ** Traduction en Cours **</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/firewalls/#firewalls-intro>31.1. Introduction</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/firewalls/#firewalls-concepts>31.2. Firewall Concepts</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/firewalls/#firewalls-apps>31.3. Firewall Packages</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/firewalls/#firewalls-pf>31.4. The OpenBSD Packet Filter (PF) and ALTQ</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/firewalls/#firewalls-ipf>31.5. The IPFILTER (IPF) Firewall</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/firewalls/#firewalls-ipfw>31.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/>Chapitre 32. Administration réseau avancée</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#advanced-networking-synopsis>32.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-routing>32.2. Passerelles et routes</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-wireless>32.3. Réseau sans fil</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-bluetooth>32.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-bridging>32.5. Bridging</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-diskless>32.6. Système sans disque dur</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-isdn>32.7. ISDN</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-natd>32.8. Translation d’adresses</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-plip>32.9. IP sur liaison parallèle (PLIP)</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-ipv6>32.10. IPv6</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/advanced-networking/#network-atm>32.11. ATM ("Asynchronous Transfer Mode")</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/partv/>Partie V. Annexes</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/>Annexe A. Se procurer FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#mirrors-cdrom>A.1. Editeurs de CD-ROMs et DVDs</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#mirrors-ftp>A.2. Sites FTP</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#anoncvs>A.3. CVS anonyme</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#ctm>A.4. Utiliser CTM</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#cvsup>A.5. Utiliser CVSup</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#portsnap>A.6. Utiliser Portsnap</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#cvs-tags>A.7. Etiquettes CVS</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#mirrors-afs>A.8. Sites AFS</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/mirrors/#mirrors-rsync>A.9. Sites rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/>Annexe B. Bibliographie</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-freebsd>B.1. Livres magazines consacrés à FreeBSD</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-userguides>B.2. Manuels d’utilisation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-adminguides>B.3. Manuels d’administration</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-programmers>B.4. Manuels de programmation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-osinternals>B.5. "Internes" du système d’exploitation</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-security>B.6. Ouvrages de référence en matière de sécurité</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-hardware>B.7. Ouvrages de référence sur le matériel</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-history>B.8. Histoire d’UNIX®</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/bibliography/#bibliography-journals>B.9. Revues et journaux</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/eresources/>Annexe C. Ressources sur Internet</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/eresources/#eresources-mail>C.1. Listes de diffusion</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/eresources/#eresources-news>C.2. Forums de discussion</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/eresources/#eresources-web>C.3. Serveurs World Wide Web</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/eresources/#eresources-email>C.4. Adresses électroniques</a></li><li><a href=http://172.16.201.134:1313/fr/books/handbook/eresources/#eresources-shell>C.5. Comptes</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/fr/books/handbook/pgpkeys/>Annexe D. Clés OpenPGP</a><ul><li><a href=http://172.16.201.134:1313/fr/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Officers</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapitre 25. Mise à jour de FreeBSD</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Sommaire</h3><nav id=TableOfContents><ul><li><a href=#updating-upgrading-synopsis>25.1. Synopsis</a></li><li><a href=#updating-upgrading-freebsdupdate>25.2. Mise à jour de FreeBSD</a></li><li><a href=#updating-upgrading-portsnap>25.3. Portsnap: un outil de mise à jour du catalogue des logiciels portés</a></li><li><a href=#updating-upgrading-documentation>25.4. Updating the Documentation Set <strong>Traduction en Cours</strong></a></li><li><a href=#current-stable>25.5. Suivre une branche de développement</a></li><li><a href=#synching>25.6. Synchroniser vos sources</a></li><li><a href=#makeworld>25.7. Recompiler le système</a></li><li><a href=#small-lan>25.8. Suivre les mises à jour pour plusieurs machines</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=updating-upgrading-synopsis>25.1. Synopsis<a class=anchor href=#updating-upgrading-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD est en constant développement entre deux versions. Certains utilisateurs préfèrent utiliser les versions publiées officiellement alors que d’autres voudront rester à jour avec les tous derniers développements. Mêmes les versions officielles sont souvent mises à jour avec les correctifs de problèmes critiques et de sécurité. Indépendamment de la version utilisée, FreeBSD fournit tous les outils nécessaires à la mise à jour de votre système, et permet également des mises à jour aisées entre versions. Ce chapitre vous aidera à décider si vous voulez suivre les développements, ou vous en tenir aux versions publiées. Les outils de base pour le maintien à jour de votre système seront également présentés.</p></div><div class=paragraph><p>Après la lecture de ce chapitre, vous connaîtrez:</p></div><div class=ulist><ul><li><p>Quels utilitaires peuvent être employés pour mettre à jour le système et le catalogue des logiciels portés.</p></li><li><p>Comment maintenir votre système à jour avec freebsd-update, CVSup, CVS, ou CTM.</p></li><li><p>Comment comparer l’état d’un système installé avec une copie de confiance.</p></li><li><p>La différence entre les deux branches de développement: FreeBSD-STABLE et FreeBSD-CURRENT.</p></li><li><p>Comment recompiler et réinstaller l’intégralité du système de base avec la commande <code>make buildworld</code> (etc.).</p></li></ul></div><div class=paragraph><p>Avant de lire ce chapitre, vous devrez:</p></div><div class=ulist><ul><li><p>Correctement configurer votre connexion réseau (<a href=../advanced-networking/#advanced-networking>Administration réseau avancée</a>).</p></li><li><p>Savoir comment installer des logiciels tiers (<a href=../ports/#ports>Installer des applications. les logiciels pré-compilés et les logiciels portés</a>).</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Tout au long de ce chapitre, la commande <code>cvsup</code> sera utilisée pour récupérer et mettre à jour les sources de FreeBSD. Pour l’utiliser, vous devrez installer un logiciel porté ou pré-compilé tel que <a class=package href=https://cgit.freebsd.org/ports/tree/net/cvsup-without-gui/>net/cvsup-without-gui</a>. Si vous utilisez FreeBSD 6.2-RELEASE ou une version ultérieure, vous pouvez remplacer cette commande par <a href="https://man.freebsd.org/cgi/man.cgi?query=csup&amp;sektion=1&amp;format=html">csup(1)</a>, qui fait désormais partie du système de base.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=updating-upgrading-freebsdupdate>25.2. Mise à jour de FreeBSD<a class=anchor href=#updating-upgrading-freebsdupdate></a></h2><div class=sectionbody><div class=paragraph><p>Appliquer des correctifs de sécurité est une part importante de la maintenance de logiciels informatiques tout particulièrement dans le cas du système d’exploitation. Pendant très longtemps sous FreeBSD, ce processus n’était pas aisé. Les correctifs devaient être appliqués au code source, le code ensuite recompilé sous forme de binaires, et enfin les binaires devaient être ré-installés.</p></div><div class=paragraph><p>Ce processus n’est plus de mise comme FreeBSD dispose désormais d’un utilitaire appelé simplement <code>freebsd-update</code>. Cet utilitaire fournit deux fonctions distinctes. Tout d’abord, il permet l’application de mises à jour de correction et de sécurité sur le système de base de FreeBSD sans nécessiter une compilation et une ré-installation. En second lieu, l’utilitaire supporte les mises à jour mineures et majeures des versions publiées.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Les mise à jour binaires sont disponibles pour toutes les architectures actuellement supportées par l’équipe de sécurité. Avant de mettre à jour vers une nouvelle version, les annonces concernant la version devront être passées en revue sachant qu’elles peuvent contenir des informations importantes au sujet de cette version. Ces annonces peuvent être consultées à l’adresse suivante: <a href=http://www.FreeBSD.org/releases/>http://www.FreeBSD.org/releases/</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>S’il existe une table <code>crontab</code> utilisant <code>freebsd-update</code>, elle doit être désactivée avant de démarrer les opérations qui vont suivre.</p></div><div class=sect2><h3 id=freebsdupdate-config-file>25.2.1. Le fichier de configuration<a class=anchor href=#freebsdupdate-config-file></a></h3><div class=paragraph><p>Certains utilisateurs peuvent souhaiter adapter le fichier de configuration par défaut <span class=filename>/etc/freebsd-update.conf</span>, permettant un meilleur contrôle du processus. Les options sont très bien documentées, mais les suivantes demandent un peu plus d’explication:</p></div><div class="literalblock programlisting"><div class=content><pre># Composants du système de base qui doivent être maintenus à jour.
Components src world kernel</pre></div></div><div class=paragraph><p>Ce paramètre contrôle quelles sont les parties de FreeBSD qui seront mises à jour. Par défaut on met à jour le code source, l’intégralité du système de base et le noyau. Les composants sont les mêmes que ceux disponibles durant l’installation, par exemple, ajouter <code>world/games</code> ici permettrait d’appliquer les correctifs relatifs aux jeux. Utiliser <code>src/bin</code> permettrait la mise à jour du code source du répertoire <span class=filename>src/bin</span>.</p></div><div class=paragraph><p>La meilleure option est de laisser telle quelle la configuration par défaut car la modifier pour ajouter des éléments particuliers demandera à l’utilisateur de lister chaque élément qu’il désire mettre à jour. Cela pourrait avoir des conséquences désastreuses puisque le code source et les binaires peuvent à terme ne plus être en phase.</p></div><div class="literalblock programlisting"><div class=content><pre># Les chemins d&#39;accès commençant par quelque chose correspondant à une
# entrée de type IgnorePaths seront ignorés.
IgnorePaths</pre></div></div><div class=paragraph><p>Ajoute les chemins d’accès comme <span class=filename>/bin</span> ou <span class=filename>/sbin</span> pour préserver intacts ces répertoires durant le processus de mise à jour. Cette option peut être utilisée pour empêcher <code>freebsd-update</code> d’écraser des modifications locales.</p></div><div class="literalblock programlisting"><div class=content><pre># Les chemins d&#39;accès qui commencent par quelque chose correspondant à
# une entrée de type UpdateIfUnmodified seront mis à jour que si le
# contenu du fichier n&#39;a pas été modifié par l&#39;utilisateur (à moins
# que les modifications ne soient fusionnées; voir plus bas).
UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile</pre></div></div><div class=paragraph><p>Met à jour les fichiers de configuration dans les répertoires désignés seulement s’ils n’ont pas été modifiés. Tout changement effectué par l’utilisateur invalidera automatiquement la mise à jour de ces fichiers. Il existe une autre option <code>KeepModifiedMetadata</code> qui indiquera à <code>freebsd-update</code> de sauvegarder les changements durant la fusion.</p></div><div class="literalblock programlisting"><div class=content><pre># Quand on met à jour vers une nouvelle version de FreeBSD, les fichiers
# correspondant à une entrée de type MergeChanges verront leurs
# différences locales fusionnées avec le fichier de la nouvelle
# version de FreeBSD.
MergeChanges /etc/ /var/named/etc/</pre></div></div><div class=paragraph><p>Liste des répertoires avec des fichiers de configuration que <code>freebsd-update</code> devrait tenter de fusionner. Le processus de fusion des fichiers est l’application d’une série de correctifs <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> similaires à ceux de <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> avec cependant moins d’options, les fusions sont soit acceptées, ouvrant un éditeur, soit abandonnées par <code>freebsd-update</code>. En cas de doute, sauvegardez <span class=filename>/etc</span> et acceptez les fusions. Consultez la section sur <a href=#mergemaster><code>mergemaster</code></a> pour plus d’information sur la commande <code>mergemaster</code>.</p></div><div class="literalblock programlisting"><div class=content><pre># Répertoire dans lequel stocker les mise à jour téléchargées et les
# fichiers temporaires utilisés par la mise à jour de FreeBSD.
# WorkDir /var/db/freebsd-update</pre></div></div><div class=paragraph><p>Ce répertoire est l’endroit où tous les correctifs et les fichiers temporaires seront placés. Dans les cas où l’utilisateur effectue une mise à jour de version, cet emplacement doit disposer d’au moins un gigaoctet d’espace disponible.</p></div><div class="literalblock programlisting"><div class=content><pre># Lors de mises à jour entre versions de FreeBSD, doit-on lire la liste
# de composants de manière stricte (StrictComponents yes)
# ou tout simplement comme une liste de composants qui *pourraient*
# être installés et pour lesquels la mise à jour de FreeBSD devrait
# déterminer lesquels sont effectivement installés et les mettre à
# jour (StrictComponents no)?
# StrictComponents no</pre></div></div><div class=paragraph><p>Cette option fixée à <code>yes</code>, <code>freebsd-update</code> supposera que la liste de composants est complète et n’essaiera pas d’effectuer des modifications en dehors de cette liste. Concrètement, <code>freebsd-update</code> tentera de mettre à jour chaque fichier appartenant à la liste de composants.</p></div></div><div class=sect2><h3 id=freebsdupdate-security-patches>25.2.2. Correctifs de sécurité<a class=anchor href=#freebsdupdate-security-patches></a></h3><div class=paragraph><p>Les correctifs de sécurité sont stockés sur une machine distante et peuvent être téléchargés et installés en utilisant la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update fetch</span>
<span class=c># freebsd-update install</span></code></pre></div></div><div class=paragraph><p>Si des correctifs ont été appliqués au noyau le système devra être redémarré. Si tout s’est bien passé le système est corrigé et <code>freebsd-update</code> pourra être exécuté chaque nuit via un processus <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>. Une entrée dans le fichier <span class=filename>/etc/crontab</span> devrait être suffisante pour accomplir cette tâche:</p></div><div class="literalblock programlisting"><div class=content><pre>@daily                                  root    freebsd-update cron</pre></div></div><div class=paragraph><p>Cette entrée indique qu’une fois par jour, l’utilitaire <code>freebsd-update</code> sera exécuté. De cette manière, en employant l’option <code>cron</code>, <code>freebsd-update</code> vérifiera seulement l’existence de mises à jour. Si des correctifs existent, il seront automatiquement téléchargés sur le disque local mais non-appliqués. L’utilisateur <code>root</code> sera contacté par courrier électronique, il pourra ainsi les installer manuellement.</p></div><div class=paragraph><p>Si quelque s’est mal passé, <code>freebsd-update</code> a la capacité d’annuler le dernier ensemble de changements avec la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update rollback</span></code></pre></div></div><div class=paragraph><p>Une fois la commande achevée, le système devra être redémarré si le noyau ou un de ses modules ont été modifiés. Cela permettra à FreeBSD de charger en mémoire les nouveaux binaires.</p></div><div class=paragraph><p>L’utilitaire <code>freebsd-update</code> peut mettre à jour uniquement et automatiquement le noyau <code>GENERIC</code>. Si un noyau personnalisé est utilisé, il devra être recompilé et réinstallé après que la commande <code>freebsd-update</code> ait achevé l’installation du reste des mises à jour. Cependant <code>freebsd-update</code> détectera et mettra à jour le noyau <code>GENERIC</code> dans <span class=filename>/boot/GENERIC</span> (s’il existe), et cela même si ce n’est pas le noyau actuel (qui tourne) du système.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>C’est toujours une bonne idée de conserver une copie du noyau <code>GENERIC</code> dans <span class=filename>/boot/GENERIC</span>. Cela sera utile pour diagnostiquer une variété de problèmes, et lors des mises à jour utilisant <code>freebsd-update</code> comme décrit dans la <a href=#freebsdupdate-upgrade>Mises à jour mineures et majeures</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A moins que la configuration par défaut présente dans <span class=filename>/etc/freebsd-update.conf</span> n’ait été modifiée, <code>freebsd-update</code> installera les sources du noyau mises à jour avec le reste des mises à jour. La recompilation et la réinstallation d’un noyau personnalisé peuvent effectuées de la manière classique.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Les mises à jour distribuées via <code>freebsd-update</code>, n’impliquent pas toujours le noyau. Il ne sera pas nécessaire de recompiler votre noyau personnalisé si les sources du noyau n’ont pas été modifiées par l’exécution de <code>freebsd-update install</code>. Cependant <code>freebsd-update</code> met toujours à jour le fichier <span class=filename>/usr/src/sys/conf/newvers.sh</span>. Le niveau ou la version de correctifs (comme indiqué par le nombre <code>-p</code> rapporté par <code>uname -r</code>) est obtenu à partir de ce fichier. Recompiler votre noyau personnalisé, même si rien d’autre n’a changé, permettra à la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=uname&amp;sektion=1&amp;format=html">uname(1)</a> de rapporter précisément le niveau de correctifs du système. C’est particulièrement utile quand on gère de multiples systèmes, car cela permet une évaluation rapide des mises à jour présentes sur chacun d’eux.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=freebsdupdate-upgrade>25.2.3. Mises à jour mineures et majeures<a class=anchor href=#freebsdupdate-upgrade></a></h3><div class=paragraph><p>Ce processus supprimera les anciens fichiers objets et bibliothèques qui rendent inutilisables la plupart des applications tierce-partie. Il est recommandé que tous les logiciels portés soient supprimés et réinstallés ou mis à jour ultérieurement en utilisant l’outil <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portupgrade/>ports-mgmt/portupgrade</a>. La plupart des utilisateurs voudront lancer une compilation test à l’aide de la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portupgrade -af</span></code></pre></div></div><div class=paragraph><p>Cela garantira que tout sera réinstallé correctement. Notez que fixer la variable d’environnement <code>BATCH</code> à <code>yes</code> répondra <code>yes</code> à toute question lors de ce processus, supprimant ainsi la nécessité d’une intervention humaine durant le processus de compilation.</p></div><div class=paragraph><p>Si un noyau personnalisé est utilisé, le processus de mise à jour est un peu plus complexe. Une copie du noyau <code>GENERIC</code> est nécessaire et devrait être placée dans le répertoire <span class=filename>/boot/GENERIC</span>. Si le noyau <code>GENERIC</code> n’est pas présent sur le système, il peut être obtenu en utilisant une des méthodes suivantes:</p></div><div class=ulist><ul><li><p>Si un noyau personnalisé a déjà été compilé, le noyau présent dans <span class=filename>/boot/kernel.old</span> est en fait le noyau <code>GENERIC</code>. Renommer ce répertoire en <span class=filename>/boot/GENERIC</span>.</p></li><li><p>En supposant qu’un accès physique à la machine est possible, une copie du noyau <code>GENERIC</code> peut être installé à partir d’un CD-ROM. Insérer votre disque d’installation et utiliser les commandes suivantes:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /cdrom</span>
<span class=c># cd /cdrom/X.Y-RELEASE/kernels</span>
<span class=c># ./install.sh GENERIC</span></code></pre></div></div><div class=paragraph><p>Remplacer <span class=filename>X.Y-RELEASE</span> avec la version que vous utilisez. Le noyau <code>GENERIC</code> sera installé par défaut dans <span class=filename>/boot/GENERIC</span>.</p></div></li><li><p>En dehors de ce qui précède le noyau <code>GENERIC</code> peut être recompilé et installé à partir des sources:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># env DESTDIR=/boot/GENERIC make kernel</span>
<span class=c># mv /boot/GENERIC/boot/kernel/* /boot/GENERIC</span>
<span class=c># rm -rf /boot/GENERIC/boot</span></code></pre></div></div><div class=paragraph><p>Pour que ce noyau soit pris en compte comme <code>GENERIC</code> par <code>freebsd-update</code>, le fichier de configuration <code>GENERIC</code> devra ne pas avoir été modifié. Il est également suggéré qu’il soit compilé sans aucune option particulière (de préférence avec un fichier <span class=filename>/etc/make.conf</span> vide).</p></div></li></ul></div><div class=paragraph><p>Redémarrer avec le noyau <code>GENERIC</code> n’est pas nécessaire à ce stade.</p></div><div class=paragraph><p>Les mises à jour de versions majeures et mineures peuvent être effectuées en passant à la commande <code>freebsd-update</code> la version vers laquelle on désire mettre à jour, par exemple, la commande suivante effectuera la mise à jour vers FreeBSD 8.1:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update -r 8.1-RELEASE upgrade</span></code></pre></div></div><div class=paragraph><p>La commande <code>freebsd-update</code> analysera le fichier de configuration et le système afin de récupérer les informations nécessaires à la mise à jour du système. A l’écran s’affichera quels sont les composants détectés et quels sont ceux qui n’ont pas été détectés. Par exemple:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Looking up update.FreeBSD.org mirrors... 1 mirrors found.
Fetching metadata signature <span class=k>for </span>8.0-RELEASE from update1.FreeBSD.org... <span class=k>done</span><span class=nb>.</span>
Fetching metadata index... <span class=k>done</span><span class=nb>.</span>
Inspecting system... <span class=k>done</span><span class=nb>.</span>

The following components of FreeBSD seem to be installed:
kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games
src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue
src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin
world/base world/info world/lib32 world/manpages

The following components of FreeBSD <span class=k>do </span>not seem to be installed:
kernel/generic world/catpages world/dict world/doc world/games
world/proflibs

Does this look reasonable <span class=o>(</span>y/n<span class=o>)</span>? y</code></pre></div></div><div class=paragraph><p>A ce niveau <code>freebsd-update</code> tentera de télécharger tous les fichiers nécessaires à la mise à jour. Dans certains cas l’utilisateur sera interrogé sur ce qu’il faut installer ou sur comment procéder à certaines actions.</p></div><div class=paragraph><p>Si un noyau personnalisé est utilisé, l’étape précédente produira un avertissement semblable au suivant:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>WARNING: This system is running a <span class=s2>&#34;MYKERNEL&#34;</span> kernel, which is not a
kernel configuration distributed as part of FreeBSD 8.0-RELEASE.
This kernel will not be updated: you MUST update the kernel manually
before running <span class=s2>&#34;/usr/sbin/freebsd-update install&#34;</span></code></pre></div></div><div class=paragraph><p>Cet avertissement peut sans risque être ignoré à ce niveau. Le noyau <span class=filename>GENERIC</span> mis à jour sera utilisé comme une étape intermédiaire dans le processus de mise à jour.</p></div><div class=paragraph><p>Une fois l’ensemble des correctifs téléchargé sur le système local, ils seront appliqués. Ce processus peut prendre plus ou moins de temps en fonction de la vitesse et de la charge de la machine. Les fichiers de configuration seront fusionnés - cette partie du processus demande l’intervention de l’utilisateur car un fichier peut être automatiquement fusionné ou en cas de besoin un éditeur peut apparaître sur l’écran pour une fusion manuelle. Les résultats des fusions réussies seront affichés au fur et à mesure que se déroule l’opération. Un échec ou une fusion ignorée provoqueront l’arrêt du processus. Certains utilisateurs peuvent vouloir conserver une sauvegarde du répertoire <span class=filename>/etc</span> et fusionner plus tard à la main les fichiers importants comme <span class=filename>master.passwd</span> ou <span class=filename>group</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Le système n’a pas encore été réellement modifié, les fusions et l’application des correctifs ont lieu dans un autre répertoire. Quand tous les correctifs ont été appliqués avec succès, que tous les fichiers de configuration ont été fusionnés et que le processus s’est déroulé sans problème, les modifications devront être appliquées définitivement au système par l’utilisateur.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Une fois les opérations précédentes achevées, la mise à jour peut être appliquée en utilisant la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update install</span></code></pre></div></div><div class=paragraph><p>Le noyau et les modules seront corrigés les premiers. A ce moment la machine doit être obligatoirement redémarrée. Si le système utilisait un noyau personnalisé, utiliser la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=nextboot&amp;sektion=8&amp;format=html">nextboot(8)</a> pour indiquer le noyau <span class=filename>/boot/GENERIC</span> (qui a été mis à jour) pour le prochain démarrage:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># nextboot -k GENERIC</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Avant de redémarrer sur le noyau <code>GENERIC</code>, assurez-vous qu’il contient tous les pilotes nécessaires pour que votre système démarre correctement (et se connecte au réseau, si la mise à jour de la machine se fait à distance). En particulier, si le noyau précédemment utilisé contient des fonctions généralement fournies par des modules, faites en sorte de charger temporairement ces modules avec le noyau <span class=filename>GENERIC</span> à l’aide de <span class=filename>/boot/loader.conf</span>. Vous pouvez également avoir intérêt à désactiver les services non-indispensables, les montages réseaux ou disques, etc. avant que le processus de mise à jour ne soit achevé.</p></div></td></tr></tbody></table></div><div class=paragraph><p>La machine doit maintenant être redémarrée avec le noyau mis à jour:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown -r now</span></code></pre></div></div><div class=paragraph><p>Une fois la machine de nouveau active, <code>freebsd-update</code> devra être lancée à nouveau. L’état du processus de mise à jour a été sauvegardé, et donc <code>freebsd-update</code> ne recommencera pas au début, mais supprimera les anciens fichiers objet et bibliothèques partagées. Afin de poursuivre les opérations, taper la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update install</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>En fonction d’un changement ou non de numérotation d’une ou plusieurs bibliothèques, il pourra y avoir deux phases d’installation au lieu de trois.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Tous les logiciels tierce-partie doivent être maintenant recompilés et réinstallés. Cela est nécessaire comme certains logiciels peuvent dépendre de bibliothèques qui ont été supprimées lors du processus de mise à jour. La commande <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portupgrade/>ports-mgmt/portupgrade</a> peut être employée pour automatiser la chose. Les commandes suivantes peuvent être utilisées pour initier le processus:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portupgrade -f ruby</span>
<span class=c># rm /var/db/pkg/pkgdb.db</span>
<span class=c># portupgrade -f ruby18-bdb</span>
<span class=c># rm /var/db/pkg/pkgdb.db /usr/ports/INDEX-*.db</span>
<span class=c># portupgrade -af</span></code></pre></div></div><div class=paragraph><p>Une fois cela effectué, terminer le processus de mise à jour avec un dernier appel à <code>freebsd-update</code>. Taper la commande suivante pour régler les derniers détails:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update install</span></code></pre></div></div><div class=paragraph><p>Si le noyau <code>GENERIC</code> a été utilisé temporairement, il est temps de compiler et d’installer un nouveau noyau personnalisé suivant la méthode habituelle.</p></div><div class=paragraph><p>Redémarrer la machine avec la nouvelle version de FreeBSD. Le processus de mise à jour est terminé.</p></div></div><div class=sect2><h3 id=freebsdupdate-system-comparison>25.2.4. Comparaison de l’état du système<a class=anchor href=#freebsdupdate-system-comparison></a></h3><div class=paragraph><p>L’utilitaire <code>freebsd-update</code> peut être utilisé pour comparer l’état du système FreeBSD installé avec une copie de confiance. Cette fonctionnalité inspecte la version actuelle des utilitaires système, des bibliothèques et des fichiers de configuration. Pour lancer la comparaison, utiliser la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update IDS &gt;&gt; outfile.ids</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Bien que le nom de la commande soit IDS, elle ne devrait en aucun cas être considérée comme un système de détection d’intrusion du type de <a class=package href=https://cgit.freebsd.org/ports/tree/security/snort/>security/snort</a>. Etant donné que <code>freebsd-update</code> stocke des données sur le disque, le risque de modification des données est évident. Alors que cette possibilité peut être minimisée en utilisant le paramétrage <code>kern.securelevel</code> et en stockant les données <code>freebsd-update</code> sur un système de fichiers en lecture seule quand elles ne sont pas utilisées, une bien meilleure solution serait de comparer le système avec un disque sécurisé comme un DVD ou un disque USB conservé à l’extérieur.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Le système sera analysé, et une liste de fichiers ainsi que la valeur de leur empreinte numérique <a href="https://man.freebsd.org/cgi/man.cgi?query=sha256&amp;sektion=1&amp;format=html">sha256(1)</a>, celle de la version d’origine et celle de la version actuellement installée, seront affichés. C’est pour cela que cet affichage est copié dans le fichier <span class=filename>outfile.ids</span>. L’affichage défile trop rapidement une comparaison visuelle et remplira rapidement le tampon de la console.</p></div><div class=paragraph><p>Ces lignes sont également très longues mais le format de sortie peut être facilement passé par une analyse syntaxique. Par exemple, pour obtenir une liste des fichiers qui diffèrent avec ceux de la version d’origine, utiliser la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat outfile.ids | awk &#39;{ print $1 }&#39; | more</span>
/etc/master.passwd
/etc/motd
/etc/passwd
/etc/pf.conf</code></pre></div></div><div class=paragraph><p>La sortie de cette commande a été tronquée, bien plus de fichiers sont concernés. Certains de ces fichiers sont naturellement modifiés, le fichier <span class=filename>/etc/passwd</span> a été modifié en raison de l’ajout d’utilisateurs au système. Dans certains cas, d’autres fichiers apparaîtrons, comme les modules du noyau, qui diffèrent puisque <code>freebsd-update</code> peut les avoir mis à jour. Pour exclure des fichiers ou des répertoires spécifiques, ajoutez-les au paramètre <code>IDSIgnorePaths</code> dans le fichier <span class=filename>/etc/freebsd-update.conf</span>.</p></div><div class=paragraph><p>Ce système peut prendre part à une méthode de mise à jour élaboré, en dehors de ce qui a été présenté précédemment.</p></div></div></div></div><div class=sect1><h2 id=updating-upgrading-portsnap>25.3. Portsnap: un outil de mise à jour du catalogue des logiciels portés<a class=anchor href=#updating-upgrading-portsnap></a></h2><div class=sectionbody><div class=paragraph><p>Le système de base de FreeBSD dispose également d’un utilitaire pour la mise à jour du catalogue des logiciels portés: <a href="https://man.freebsd.org/cgi/man.cgi?query=portsnap&amp;sektion=8&amp;format=html">portsnap(8)</a>. Lors de son exécution, il se connectera sur un site distant, contrôlera la clé de sécurité et téléchargera une nouvelle copie du catalogue des logiciels portés. La clé est utilisée pour vérifier l’intégrité de tous les fichiers téléchargés, s’assurant qu’ils n’ont pas été modifiés au vol. Pour récupérer les tout derniers fichiers du catalogue des logiciels portés, utiliser la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portsnap fetch</span>
Looking up portsnap.FreeBSD.org mirrors... 3 mirrors found.
Fetching snapshot tag from portsnap1.FreeBSD.org... <span class=k>done</span><span class=nb>.</span>
Fetching snapshot metadata... <span class=k>done</span><span class=nb>.</span>
Updating from Wed Aug  6 18:00:22 EDT 2008 to Sat Aug 30 20:24:11 EDT 2008.
Fetching 3 metadata patches.. <span class=k>done</span><span class=nb>.</span>
Applying metadata patches... <span class=k>done</span><span class=nb>.</span>
Fetching 3 metadata files... <span class=k>done</span><span class=nb>.</span>
Fetching 90 patches.....10....20....30....40....50....60....70....80....90. <span class=k>done</span><span class=nb>.</span>
Applying patches... <span class=k>done</span><span class=nb>.</span>
Fetching 133 new ports or files... <span class=k>done</span>.</code></pre></div></div><div class=paragraph><p>Cet exemple nous montre que <a href="https://man.freebsd.org/cgi/man.cgi?query=portsnap&amp;sektion=8&amp;format=html">portsnap(8)</a> a trouvé et contrôlé plusieurs mises à jour pour les données actuelles du catalogue. Est également indiqué si l’utilitaire a été précédemment exécuté, si cela avait été une première exécution, le catalogue aurait été tout simplement téléchargé.</p></div><div class=paragraph><p>Lorsque <a href="https://man.freebsd.org/cgi/man.cgi?query=portsnap&amp;sektion=8&amp;format=html">portsnap(8)</a> termine avec succès une opération de récupération (<code>fetch</code>), le catalogue des logiciels portés et ses mises à jour sont présents sur le système. A la première exécution de <code>portsnap</code> vous devez utiliser la commande <code>extract</code> pour installer les fichiers téléchargés:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portsnap extract</span>
/usr/ports/.cvsignore
/usr/ports/CHANGES
/usr/ports/COPYRIGHT
/usr/ports/GIDs
/usr/ports/KNOBS
/usr/ports/LEGAL
/usr/ports/MOVED
/usr/ports/Makefile
/usr/ports/Mk/bsd.apache.mk
/usr/ports/Mk/bsd.autotools.mk
/usr/ports/Mk/bsd.cmake.mk
...</code></pre></div></div><div class=paragraph><p>Pour mettre à jour un catalogue des logiciels portés déjà installé utilisez la commande <code>portsnap update</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portsnap update</span></code></pre></div></div><div class=paragraph><p>Le processus est maintenant terminé et les applications peuvent être installées ou mises à jour à l’aide du catalogue à jour.</p></div><div class=paragraph><p>Les opérations <code>fetch</code> et <code>extract</code> ou <code>update</code> peuvent être exécutées à la suite comme montré dans l’exemple suivant:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portsnap fetch update</span></code></pre></div></div><div class=paragraph><p>Cette commande téléchargera la dernière version du catalogue des logiciels portés et mettra à jour votre version locale située dans <span class=filename>/usr/ports</span>.</p></div></div></div><div class=sect1><h2 id=updating-upgrading-documentation>25.4. Updating the Documentation Set <strong>Traduction en Cours </strong><a class=anchor href=#updating-upgrading-documentation></a></h2><div class=sectionbody><div class=sect2><h3 id=updating-installed-documentation>25.4.1. Updating Documentation from Source<a class=anchor href=#updating-installed-documentation></a></h3></div><div class=sect2><h3 id=doc-ports-install-package>25.4.2. Updating Documentation from Ports<a class=anchor href=#doc-ports-install-package></a></h3></div></div></div><div class=sect1><h2 id=current-stable>25.5. Suivre une branche de développement<a class=anchor href=#current-stable></a></h2><div class=sectionbody><div class=paragraph><p>Il existe deux branches de développement de FreeBSD: FreeBSD-CURRENT et FreeBSD-STABLE. Cette section détaillera un peu chacune d’elles et décrira comment garder à jour votre système avec chaque arborescence respective. FreeBSD-CURRENT sera tout d’abord traité, suivit de FreeBSD-STABLE.</p></div><div class=sect2><h3 id=current>25.5.1. Se synchroniser avec la version -CURRENT de FreeBSD<a class=anchor href=#current></a></h3><div class=paragraph><p>En lisant ces lignes, gardez à l’esprit que FreeBSD-CURRENT représente "les tout derniers" développement de FreeBSD. On attend des utilisateurs de FreeBSD-CURRENT un degré élevé de compétences techniques, et devraient être capables de résoudre des problèmes système compliqués par eux-mêmes. Si vous êtes nouveau à FreeBSD, pensez à deux fois avant de l’installer.</p></div><div class=sect3><h4 id=_quest_ce_que_freebsd_current>25.5.1.1. Qu’est-ce que FreeBSD-CURRENT?<a class=anchor href=#_quest_ce_que_freebsd_current></a></h4><div class=paragraph><p>FreeBSD-CURRENT est la toute dernière version des sources de FreeBSD en cours de développement. Cela inclut des évolutions en cours, des modifications expérimentales, et des mécanismes de transition qui feront ou ne feront pas partie de la prochaine version officielle du logiciel. Bien que de nombreux développeurs de FreeBSD compilent les sources de FreeBSD-CURRENT quotidiennement, il arrive que celles-ci ne soient pas compilables pendant une certaine période de temps. Ces problèmes sont résolus aussi rapidement que possible, mais que FreeBSD-CURRENT soit à l’origine d’un désastre ou de l’apport d’une nouvelle fonctionnalité attendue peut parfois dépendre que du moment auquel vous avez chargé le code source.</p></div></div><div class=sect3><h4 id=_qui_a_besoin_de_freebsd_current>25.5.1.2. Qui a besoin de FreeBSD-CURRENT?<a class=anchor href=#_qui_a_besoin_de_freebsd_current></a></h4><div class=paragraph><p>FreeBSD-CURRENT est mis à disposition pour 3 types de personnes:</p></div><div class="olist arabic"><ol class=arabic><li><p>Les membres de la communauté FreeBSD qui travaillent activement sur une partie de l’arborescence des sources et pour qui rester constamment à jour est une nécessité absolue.</p></li><li><p>Les membres de la communauté FreeBSD qui participent activement aux tests et sont disposés à passer du temps à résoudre les problèmes pour garantir que FreeBSD-CURRENT reste aussi saine que possible. Il y a également ceux qui désirent faire des suggestions dans certains domaines sur les modifications à faire et la direction générale que prend FreeBSD, et soumettent des correctifs pour les implémenter.</p></li><li><p>Ceux qui veulent simplement garder un oeil sur les évolutions, ou utiliser les dernières sources comme référence (e.g. pour les <em>lire</em>, et non pour les utiliser). Ces personnes font parfois des remarques ou contribuent au code.</p></li></ol></div></div><div class=sect3><h4 id=_quest_ce_que_nest_pas_freebsd_current>25.5.1.3. Qu’est-ce que <em>n’est pas</em> FreeBSD-CURRENT?<a class=anchor href=#_quest_ce_que_nest_pas_freebsd_current></a></h4><div class="olist arabic"><ol class=arabic><li><p>Un raccourci pour se procurer des pré-versions parce que vous avez entendu dire qu’il y a de nouvelles fonctionnalités géniales et que vous voulez être le premier du coin à les avoir. Etre le premier à avoir la nouvelle fonctionnalité signifie être le premier à avoir les nouveaux bogues également.</p></li><li><p>Une moyen rapide d’avoir des corrections de bogues. N’importe quelle version de FreeBSD-CURRENT apportera probablement de nouveaux bogues comme elle corrigera ceux déjà présents.</p></li><li><p>Nous ne le "supportons officiellement" en aucun cas. Nous faisons du mieux que nous pouvons pour aider les personnes qui font vraiment partie des trois groupes "légitimes" à qui s’adresse FreeBSD-CURRENT, mais nous n’avons tout simplement "pas le temps" de fournir un support technique. Ce n’est pas parce que nous sommes des personnes détestables qui n’aiment pas aider les autres (nous ne ferions pas FreeBSD si tel était le cas), nous ne pouvons simplement pas répondre à des centaines de messages par jour <em>et</em> travailler sur FreeBSD! Entre améliorer FreeBSD et répondre à de nombreuses questions sur le code expérimental, les développeurs optent pour le premier choix.</p></li></ol></div></div><div class=sect3><h4 id=_utiliser_freebsd_current>25.5.1.4. Utiliser FreeBSD-CURRENT<a class=anchor href=#_utiliser_freebsd_current></a></h4><div class="olist arabic"><ol class=arabic><li><p>Inscrivez-vous à la <a href=https://lists.FreeBSD.org/subscription/freebsd-current>liste de diffusion à propos de la branche FreeBSD-CURRENT</a> et la <a href=https://lists.FreeBSD.org/subscription/svn-src-head>messages SVN de modification pour l’arbre pour head/-current</a>. Ce n’est pas seulement une bonne idée, c’est <em>indispensable</em>. Si vous n’êtes pas sur la liste <em><a href=https://lists.FreeBSD.org/subscription/freebsd-current>liste de diffusion à propos de la branche FreeBSD-CURRENT</a></em>, vous ne verrez pas les commentaires qui sont faits sur l’état courant du système et vous vous retrouverez probablement confrontés à de nombreux problèmes que d’autres ont déjà identifiés et résolus. Encore plus grave, vous manqueriez des bulletins importants potentiellement critiques pour la bonne santé de votre système.</p><div class=paragraph><p>La liste <a href=https://lists.FreeBSD.org/subscription/svn-src-head>messages SVN de modification pour l’arbre pour head/-current</a> vous permettra de voir les courriers de trace des soumissions de toutes les modifications dès qu’elles sont faites et des informations pertinentes sur les éventuels effets de bord.</p></div><div class=paragraph><p>Pour vous inscrire à ces listes, ou à une autre, rendez vous à <a href=https://lists.freebsd.org class=bare>https://lists.freebsd.org</a> et cliquez sur la liste à laquelle vous désirez vous inscrire. Des instructions sur le reste de la procédure sont alors données. Si vous êtes intéressé par le suivi des modifications appliquées à l’ensemble de l’arborescence des sources, nous vous recommandons de vous inscrire à <a href=https://lists.FreeBSD.org/subscription/svn-src-all>messages SVN de modification concernant l’intégrélité de l’arbre src (en dehors des arbres "user" et "projects")</a>.</p></div></li><li><p>Récupérez les sources sur un <a href=../mirrors/#mirrors>site miroir</a> FreeBSD. Vous pouvez le faire de deux manières:</p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>Utilisez le programme <a href=../mirrors/#cvsup>cvsup</a> avec le fichier <span class=filename>supfile</span> nommé <span class=filename>standard-supfile</span> disponible dans le répertoire <span class=filename>/usr/shared/examples/cvsup</span>. C’est la méthode recommandée, puisqu’elle permet de récupérer la totalité des sources la première fois et par la suite uniquement ce qui a été modifié. De nombreuses personnes exécutent <code>cvsup</code> depuis <code>cron</code> et maintiennent ainsi automatiquement à jour leurs sources. Vous devez personnaliser l’exemple de <span class=filename>supfile</span> précédent, et configurer <a href=../mirrors/#cvsup>cvsup</a> pour votre environnement.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Le fichier d’exemple <span class=filename>standard-supfile</span> est destiné au suivi d’une branche de sécurité FreeBSD spécifique et non pas à celui de FreeBSD-CURRENT. Vous devrez éditer ce fichier et remplacer la ligne suivante:</p></div><div class="literalblock programlisting"><div class=content><pre>*default release=cvs tag=RELENG_X_Y</pre></div></div><div class=paragraph><p>Par celle-ci:</p></div><div class="literalblock programlisting"><div class=content><pre>*default release=cvs tag=.</pre></div></div><div class=paragraph><p>Pour une explication détaillée des étiquettes utilisables, veuillez vous référer à la section <a href=../mirrors/#cvs-tags>Etiquettes CVS</a> de ce manuel.</p></div></td></tr></tbody></table></div></li><li><p>Utilisez CTM. Si vous disposez d’une mauvaise connexion (connexions chères ou seulement un accès au courrier électronique) CTM est une bonne solution. Cependant, c’est une source de problèmes et peut donner lieu à des fichiers endommagés. C’est pourquoi cette méthode est rarement utilisée, ce qui augmente les chances que cela ne fonctionne pas pendant d’assez longue périodes. Nous recommandons d’utiliser CVSup à tous ceux disposant d’un modem 9600 bps ou d’une connexion plus rapide.</p></li></ol></div></li><li><p>Si vous récupérez les sources pour compiler un système opérationnel, et pas simplement pour les lire, alors récupérez <em>tout</em> FreeBSD-CURRENT, et pas uniquement certaines portions. La raison de cela est que diverses parties des sources dépendent de modifications effectuées ailleurs, et si vous essayez de compiler juste une partie des source, il est quasiment certain que vous aurez des problèmes.</p></li><li><p>Avant de compiler FreeBSD-CURRENT, lisez attentivement le <span class=filename>Makefile</span> dans <span class=filename>/usr/src</span>. Vous devriez au moins la première fois <a href=#makeworld>installer un nouveau noyau et recompiler le système</a>, comme étape nécessaire à votre processus de mise à jour. La lecture de la <a href=https://lists.FreeBSD.org/subscription/freebsd-current>liste de diffusion à propos de la branche FreeBSD-CURRENT</a> et du fichier <span class=filename>/usr/src/UPDATING</span> vous tiendra au courant des autres procédures de transition qui sont parfois nécessaires lorsque nous préparons la prochaine version.</p></li><li><p>Participez! Si vous utilisez FreeBSD-CURRENT, nous aimerions savoir ce que vous en pensez, tout particulièrement si vous avez des améliorations à nous suggérer ou des corrections de bogues à nous soumettre. Les suggestions accompagnées de code sont accueillies avec enthousiasme!</p></li></ol></div></div></div><div class=sect2><h3 id=stable>25.5.2. Se synchroniser avec la version -STABLE de FreeBSD<a class=anchor href=#stable></a></h3><div class=sect3><h4 id=_quest_ce_que_freebsd_stable>25.5.2.1. Qu’est-ce que FreeBSD-STABLE?<a class=anchor href=#_quest_ce_que_freebsd_stable></a></h4><div class=paragraph><p>FreeBSD-STABLE est notre branche de développement à partir de laquelle sont extraites les versions majeures. Les modifications sur cette branche se font à une allure différente, et en supposant généralement qu’elles ont été tout d’abord testées sur FreeBSD-CURRENT. Cela reste cependant <em>toujours</em> une branche de développement, et cela signifie qu’à certains moments, les sources de FreeBSD-STABLE pourront être ou pas utilisables pour une quelconque raison. C’est tout simplement une autre branche de mise au point, et non pas une ressource pour l’utilisateur final.</p></div></div><div class=sect3><h4 id=_qui_a_besoin_de_freebsd_stable>25.5.2.2. Qui a besoin de FreeBSD-STABLE?<a class=anchor href=#_qui_a_besoin_de_freebsd_stable></a></h4><div class=paragraph><p>Si vous désirez suivre ou contribuer au processus de développement de FreeBSD, tout particulièrement si cela a rapport avec la prochaine version de FreeBSD, alors vous devriez penser à suivre FreeBSD-STABLE.</p></div><div class=paragraph><p>Bien qu’il soit vrai que les correctifs de sécurité vont également dans la branche FreeBSD-STABLE, vous n’avez pas <em>besoin</em> de suivre FreeBSD-STABLE pour cela. Chaque rapport de sécurité concernant FreeBSD explique comment corriger le problème sur les versions affectées , et suivre intégralement une branche de développement juste pour des raisons de sécurité apportera également de nombreux changements non désirés.</p></div><div class=paragraph><p>Bien que nous tentons de nous assurer que la branche FreeBSD-STABLE soit compilable et constamment stable, cela ne peut être garanti. De plus, alors que le code est développé sous FreeBSD-CURRENT avant de l’inclure dans FreeBSD-STABLE, le nombre de personnes utilisant FreeBSD-STABLE est plus nombreux que celui utilisant FreeBSD-CURRENT, aussi il est inévitable que des bogues et des problèmes pourront parfois apparaître sous FreeBSD-STABLE alors qu’ils n’existaient pas sous FreeBSD-CURRENT.</p></div><div class=paragraph><p>Pour ces raisons, nous ne recommandons <em>pas</em> de suivre aveuglément FreeBSD-STABLE, et il est tout particulièrement important que vous ne mettiez pas à jour des serveurs de production sous FreeBSD-STABLE sans avoir tout d’abord testé le code dans votre environnement de travail.</p></div><div class=paragraph><p>Si vous ne disposez pas des ressources pour faire cela alors nous recommandons que vous utilisiez la version de FreeBSD la plus récente, et que vous utilisiez le mécanisme de mise à jour binaire pour passer d’une version à une autre.</p></div></div><div class=sect3><h4 id=_utiliser_freebsd_stable>25.5.2.3. Utiliser FreeBSD-STABLE<a class=anchor href=#_utiliser_freebsd_stable></a></h4><div class="olist arabic"><ol class=arabic><li><p>Inscrivez-vous à à la liste <a href=https://lists.FreeBSD.org/subscription/freebsd-stable>liste de diffusion à propos de la branche FreeBSD-STABLE;</a>. Vous serez tenu au courant des dépendances de compilation qui peuvent apparaître dans la branche FreeBSD-STABLE ou de tout autre problème demandant une attention particulière. Les développeurs publieront également des annonces sur cette liste lorsqu’ils envisagent une correction ou modification controversée, offrant la possibilité aux utilisateurs de répondre s’ils ont des questions à soulever en rapport avec la modification proposée.</p><div class=paragraph><p>Inscrivez-vous à la liste SVN correspondant à la branche que vous suivez. Par exemple, si vous suivez la branche 7-STABLE, inscrivez-vous à la liste <a href=https://lists.FreeBSD.org/subscription/svn-src-stable-7>svn-src-stable-7</a>. Cela vous permettra de lire les courriers de trace des soumissions de toutes les modifications dès qu’elles sont faites et des informations pertinentes sur les éventuels effets de bord.</p></div><div class=paragraph><p>Pour vous inscrire à ces listes, ou à une autre, rendez vous à <a href=https://lists.freebsd.org class=bare>https://lists.freebsd.org</a> et cliquez sur la liste à laquelle vous désirez vous inscrire. Des instructions sur le reste de la procédure sont alors données. Si vous êtes intéressé par le suivi des modifications appliquées à l’ensemble de l’arborescence des sources, nous vous recommandons de vous inscrire à <a href=https://lists.FreeBSD.org/subscription/svn-src-all>messages SVN de modification concernant l’intégrélité de l’arbre src (en dehors des arbres "user" et "projects")</a>.</p></div></li><li><p>Si vous installez un nouveau système et vous voulez qu’il utilise le dernier instantané publié tous les mois à partir de la branche FreeBSD-STABLE, consultez la page sur les <a href=https://www.FreeBSD.org/snapshots/>instantanés</a> pour plus d’information. D’autre part, vous pouvez installer la version FreeBSD-STABLE la plus récente à partir des <a href=../mirrors/#mirrors>sites miroirs</a> et suivre les instructions ci-dessous pour mettre à jour votre système avec les sources FreeBSDstable; les plus récentes.</p><div class=paragraph><p>Si vous faites tourner une version précédente de FreeBSD et que vous désirez mettre à jour via les sources vous pouvez aisément le faire à partir d’un <a href=../mirrors/#mirrors>site miroir</a> FreeBSD. Cela peut être fait de deux manières:
.. Utilisez le programme <a href=../mirrors/#cvsup>cvsup</a> avec le fichier <span class=filename>supfile</span> nommé <span class=filename>stable-supfile</span> disponible dans le répertoire <span class=filename>/usr/shared/examples/cvsup</span>. C’est la méthode recommandée, puisqu’elle permet de récupérer la totalité des sources la première fois et par la suite uniquement ce qui a été modifié. De nombreuses personnes exécutent <code>cvsup</code> depuis <code>cron</code> et maintiennent ainsi automatiquement à jour leurs sources. Vous devez personnaliser l’exemple de <span class=filename>supfile</span> précédent, et configurer <a href=../mirrors/#cvsup>cvsup</a> pour votre environnement.
.. Utilisez CTM. Si vous ne disposez pas d’une connexion Internet rapide et peu coûteuse, c’est la méthode que vous devriez penser à utiliser.</p></div></li><li><p>Avant tout, si vous avez besoin d’un accès rapide à la demande aux sources et que la bande passante n’est pas un problème, utilisez <code>cvsup</code> ou <code>ftp</code>. Sinon, utilisez CTM.</p></li><li><p>Avant de compiler FreeBSD-STABLE, lisez attentivement le <span class=filename>Makefile</span> dans <span class=filename>/usr/src</span>. Vous devriez au moins la première fois <a href=#makeworld>installer un nouveau noyau et recompiler le système</a>, comme étape nécessaire à votre processus de mise à jour. La lecture de la <a href=https://lists.FreeBSD.org/subscription/freebsd-stable>liste de diffusion à propos de la branche FreeBSD-STABLE;</a> et du fichier <span class=filename>/usr/src/UPDATING</span> vous tiendra au courant des autres procédures de transition qui sont parfois nécessaires lorsque nous préparons la prochaine version.</p></li></ol></div></div></div></div></div><div class=sect1><h2 id=synching>25.6. Synchroniser vos sources<a class=anchor href=#synching></a></h2><div class=sectionbody><div class=paragraph><p>Il existe différentes façons d’utiliser une connexion Internet (ou le courrier électronique) pour garder à jour les sources de n’importe quelle partie, ou de l’ensemble, du projet FreeBSD, selon ce qui vous intéresse. Les principaux services que nous fournissons sont le <a href=../mirrors/#anoncvs>CVS anonyme</a>, <a href=../mirrors/#cvsup>CVSup</a>, et <a href=../mirrors/#ctm>CTM</a>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Alors qu’il est possible de mettre à jour seulement certaines parties de l’arbre des sources, la seule procédure de mise à jour supportée est celle consistant à mettre à jour l’intégralité de l’arborescence et de recompiler les sources des applicatifs de base-"userland" (i.e., tous les programmes qui tournent dans l’espace utilisateur, comme ceux des répertoires <span class=filename>/bin</span> et <span class=filename>/sbin</span>) et du noyau. Ne mettre à jour qu’une partie des sources, uniquement le noyau, ou seul le "userland" mènera souvent à des problèmes. Ces problèmes pourront aller d’erreurs de compilation à des paniques du noyau ou même des corruptions de données.</p></div></td></tr></tbody></table></div><div class=paragraph><p>CVS anonyme et CVSup utilisent une méthode de mise à jour pilotée par le client-<em>pull</em>. Dans le cas de CVSup, l’utilisateur (ou une procédure <code>cron</code>) appelle le programme <code>cvsup</code>, qui interagit avec un serveur <code>cvsupd</code> distant, pour mettre à jour vos fichiers. Les mises à jour que vous recevez sont les plus récentes, et vous ne les recevez seulement lorsque vous le désirez. Vous pouvez aisément restreindre vos mises à jour aux fichiers ou répertoires particuliers qui vous intéressent. Les mises à jour sont générées à la volée par le serveur, en fonction de ce que vous avez déjà et de ce que vous voulez. CVS anonyme est plus simpliste que CVSup, car ce n’est qu’une extension de CVS qui permet de récupérer des modifications directement d’une archive CVS distante. Pour cela, CVSup est bien plus efficace mais CVS anonyme est plus facile à utiliser.</p></div><div class=paragraph><p>CTM, à l’inverse, ne compare pas interactivement les sources dont vous disposez avec celles qui sont sur l’archive de référence. Au lieu de cela, une procédure qui identifie les modifications intervenues depuis qu’elle a été exécutée pour la dernière fois, est lancée plusieurs fois par jour sur la machine CTM de référence (maître), les modifications détectées sont compressées, affectées d’un numéro de séquence et encodées pour pouvoir être envoyées par courrier électronique (en ASCII imprimable uniquement). Une fois reçus, ces "deltas CTM" peuvent être passés à l’utilitaire <a href="https://man.freebsd.org/cgi/man.cgi?query=ctm_rmail&amp;sektion=1&amp;format=html">ctm_rmail(1)</a> qui décodera, contrôlera et appliquera automatiquement les modifications à l’exemplaire des sources de l’utilisateur. Cette méthode est beaucoup plus efficace que CVSup et consomme beaucoup moins de ressources sur notre serveur, parce que c’est un modèle piloté par le serveur-<em>push</em> plutôt que par l’utilisateur-<em>pull</em>.</p></div><div class=paragraph><p>Il y a, bien sûr, quelques contreparties. Si vous effacez par inadvertance des parties de votre archive, CVSup s’en apercevra et vous reconstruira les parties endommagées. CTM ne le fera pas, et si vous effacez des parties de votre l’arborescence des sources (et que vous n’avez pas fait de sauvegarde) alors vous devrez repartir de zéro (à partir du plus récent "delta de base" CVS) et tout reconstituer avec CTM ou CVS anonyme, effacer les parties endommagées et resynchroniser.</p></div></div></div><div class=sect1><h2 id=makeworld>25.7. Recompiler le système<a class=anchor href=#makeworld></a></h2><div class=sectionbody><div class=paragraph><p>Une fois que vous avez synchronisé votre arborescence des sources avec une version donnée de FreeBSD (FreeBSD-STABLE, FreeBSD-CURRENT, et ainsi de suite) vous pouvez alors utiliser cette arborescence des sources pour recompiler le système.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=title>Faites une sauvegarde</div><div class=paragraph><p>On n’insistera jamais assez sur l’importance de faire une sauvegarde de votre système <em>avant</em> tout autre chose. Bien qu’il soit facile de "refaire le monde" (recompiler FreeBSD), si vous suivez ces instructions, vous ferez inévitablement des erreurs à un moment ou un autre, ou d’autres feront des erreurs au niveau de l’arborescence des sources qui empêcheraient votre système de redémarrer.</p></div><div class=paragraph><p>Assurez-vous que vous avez bien fait une sauvegarde. Ayez une disquette de maintenance, ou un CD démarrable à portée de la main. Vous ne l’utiliserez probablement pas, mais prudence est mère de sûreté!</p></div></td></tr></tbody></table></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=title>S’abonner à la bonne liste de diffusion</div><div class=paragraph><p>Les branches FreeBSD-STABLE et FreeBSD-CURRENT sont, par nature, <em>en développement</em>. Les personnes qui participent à FreeBSD sont des humains, et des erreurs se produisent occasionnellement.</p></div><div class=paragraph><p>Ces erreurs sont parfois bénignes, provocant simplement l’affichage d’un nouveau message d’avertissement par votre système. Elles peuvent aussi être catastrophiques, et empêcher votre système de redémarrer ou détruire vos systèmes de fichiers (ou pire).</p></div><div class=paragraph><p>Quand de tels problèmes se produisent, un avertissement "heads up" est posté sur la liste de diffusion appropriée, décrivant la nature du problème et quels systèmes sont concernés. Un message "all clear" est posté quand le problème est résolu.</p></div><div class=paragraph><p>Si vous tentez de suivre FreeBSD-STABLE ou FreeBSD-CURRENT et que vous ne lisez pas la <a href=https://lists.FreeBSD.org/subscription/freebsd-stable>liste de diffusion à propos de la branche FreeBSD-STABLE;</a> ou la <a href=https://lists.FreeBSD.org/subscription/freebsd-current>liste de diffusion à propos de la branche FreeBSD-CURRENT</a>, vous allez au devant d’ennuis.</p></div></td></tr></tbody></table></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=title>N’utilisez pas la commande <code>make world</code></div><div class=paragraph><p>De nombreuses anciennes documentations préconisent d’utiliser la commande <code>make world</code>. Cette commande n’effectue pas un certain nombre d’étapes importantes et ne devrait être utilisée que si vous êtes sûr de ce que vous faites. Dans presque tout les cas <code>make world</code> n’est pas une bonne chose à faire, et la procédure décrite dans la suite de ce document devrait être utilisée à la place.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=_la_méthode_générique_de_mise_à_jour_du_système>25.7.1. La méthode générique de mise à jour du système<a class=anchor href=#_la_méthode_générique_de_mise_à_jour_du_système></a></h3><div class=paragraph><p>Pour mettre à jour votre système, vous devriez consulter <span class=filename>/usr/src/UPDATING</span> pour toute opération préliminaire nécessaire en fonction de la version de vos sources et ensuite utiliser la procédure suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make buildworld</span>
<span class=c># make buildkernel</span>
<span class=c># make installkernel</span>
<span class=c># shutdown -r now</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Dans quelques rares cas, il est nécessaire de lancer un <code>mergemaster -p</code> avant l’étape <code>buildworld</code>. Ces cas sont décrits dans le fichier <span class=filename>UPDATING</span>. Généralement, vous pouvez omettre cette opération si vous ne mettez pas à jour d’une version majeure de FreeBSD à une autre.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Une fois l’opération <code>installkernel</code> terminée avec succès, vous devrez démarrer en mode mono-utilisateur (en utilisant par exemple la commande <code>boot -s</code> à l’invite du chargeur). Exécutez ensuite:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -a -t ufs</span>
<span class=c># mergemaster -p</span>
<span class=c># cd /usr/src</span>
<span class=c># make installworld</span>
<span class=c># mergemaster</span>
<span class=c># reboot</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=title>Lisez les explications supplémentaires</div><div class=paragraph><p>La séquence décrite ci-dessus n’est qu’un court résumé pour vous aider à démarrer. Vous devriez cependant lire les sections suivantes afin de comprendre clairement chaque étape, tout particulièrement si vous désirez utiliser une configuration du noyau personnalisée.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_lire_usrsrcupdating>25.7.2. Lire <span class=filename>/usr/src/UPDATING</span><a class=anchor href=#_lire_usrsrcupdating></a></h3><div class=paragraph><p>Avant tout autre chose, lisez <span class=filename>/usr/src/UPDATING</span> (ou le fichier équivalent en fonction de l’endroit où se trouve vos sources). Ce fichier devrait contenir les informations importantes au sujet des problèmes que vous pourriez rencontrer, ou indique l’ordre dans lequel vous devriez exécuter certaines commandes. Si le fichier <span class=filename>UPDATING</span> contredit quelque chose d’écrit ici, <span class=filename>UPDATING</span> prime sur tout le reste.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>La lecture du fichier <span class=filename>UPDATING</span> n’est pas un substitut à l’abonnement à la liste de diffusion correcte, comme décrit précédemment. Ces deux prérequis sont complémentaires, et non pas exclusifs.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_contrôler_etcmake_conf>25.7.3. Contrôler <span class=filename>/etc/make.conf</span><a class=anchor href=#_contrôler_etcmake_conf></a></h3><div class=paragraph><p>Contrôlez les fichiers <span class=filename>/usr/shared/examples/etc/make.conf</span> et <span class=filename>/etc/make.conf</span>. Le premier contient des paramètres par défaut - la plupart étant placés en commentaires. Pour les utiliser quand vous recompilez votre système à partir des sources, rajoutés-les au fichier <span class=filename>/etc/make.conf</span>. Gardez à l’esprit que tout ce que vous ajoutez au fichier <span class=filename>/etc/make.conf</span> est utilisé chaque fois que vous invoquez la commande <code>make</code>, il est donc bon de s’assurer que les valeurs par défaut sont appropriées à votre système.</p></div><div class=paragraph><p>Un utilisateur typique voudra probablement copier les lignes <code>CFLAGS</code> et <code>NO_PROFILE</code> se trouvant dans <span class=filename>/usr/shared/examples/etc/make.conf</span> vers <span class=filename>/etc/make.conf</span> et les décommenter.</p></div><div class=paragraph><p>Examinez les autres définitions (<code>COPTFLAGS</code>, <code>NOPORTDOCS</code> et ainsi de suite) et décidez si elles vous conviennent.</p></div></div><div class=sect2><h3 id=_mettre_à_jour_les_fichiers_dans_etc>25.7.4. Mettre à jour les fichiers dans <span class=filename>/etc</span><a class=anchor href=#_mettre_à_jour_les_fichiers_dans_etc></a></h3><div class=paragraph><p>Le répertoire <span class=filename>/etc</span> contient la plupart des informations de configuration de votre système, ainsi que les procédures de démarrage. Certaines de ces procédures changent d’une version à l’autre de FreeBSD.</p></div><div class=paragraph><p>Certains fichiers de configuration sont également utilisés en permanence par le système. En particulier <span class=filename>/etc/group</span>.</p></div><div class=paragraph><p>Il est arrivé que la phase d’installation <code>make installworld</code> ait besoin que certains utilisateurs et groupes existent. Il y a de fortes chances qu’ils n’aient pas été définis avant la mise à jour. C’est une source de problèmes. Dans certains cas <code>make buildworld</code> contrôlera si ces utilisateurs ou groupes existent.</p></div><div class=paragraph><p>Un exemple de cela fut l’addition de l’utilisateur <code>smmsp</code>. Le processus d’installation échouait quand <code>mtree</code> tentait de créer <span class=filename>/var/spool/clientmqueue</span>.</p></div><div class=paragraph><p>La solution est d’exécuter <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> dans le mode pré-"buildworld" en ajoutant l’option <code>-p</code>. Cela effectuera la comparaison uniquement des fichiers essentiels pour le succès de la procédure <code>buildworld</code> ou <code>installworld</code>. Si votre vieille version de <code>mergemaster</code> ne supporte pas l’option <code>-p</code>, utilisez la nouvelle version présente dans l’arborescence des sources quand vous l’exécutez pour la première fois:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src/usr.sbin/mergemaster</span>
<span class=c># ./mergemaster.sh -p</span></code></pre></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Si vous êtes particulièrement paranoïaque, vous pouvez contrôler votre système afin de voir quels fichiers appartiennent au groupe que vous renommez ou effacez:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># find / -group GID -print</span></code></pre></div></div><div class=paragraph><p>affichera les fichiers appartenant au groupe <em>GID</em> (qui peut être soit un nom de groupe ou un identifiant numérique de groupe).</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=makeworld-singleuser>25.7.5. Passer en mode mono-utilisateur<a class=anchor href=#makeworld-singleuser></a></h3><div class=paragraph><p>Il vaut mieux recompiler le système en mode mono-utilisateur. En dehors du fait que cela sera légèrement plus rapide, la réinstallation va modifier un grand nombre de fichiers systèmes importants, tous les binaires de base du système, les bibliothèques, les fichiers d’include et ainsi de suite. Les modifier sur un système en fonctionnement (en particulier s’il y a des utilisateurs connectés à ce moment là), c’est aller au devant de problèmes.</p></div><div class=paragraph><p>Une autre méthode consiste à compiler le système en mode multi-utilisateurs, et passer dans le mode mono-utilisateur pour l’installation. Si vous désirez utiliser cette méthode, conservez les étapes suivantes pour le moment où la compilation sera terminée. Vous pouvez reporter le passage en mode mono-utilisateur jusqu’à l’exécution de <code>installkernel</code> ou <code>installworld</code>.</p></div><div class=paragraph><p>En tant que super-utilisateur, vous pouvez exécuter la commande:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown now</span></code></pre></div></div><div class=paragraph><p>sur un système en fonctionnement, pour passer en mode mono-utilisateur.</p></div><div class=paragraph><p>Ou bien, redémarrer le système, et à l’invite de démarrage, sélectionnez l’option "single user". Le système démarrera alors en mode mono-utilisateur. A l’invite de l’interpréteur de commandes, exécutez alors:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># fsck -p</span>
<span class=c># mount -u /</span>
<span class=c># mount -a -t ufs</span>
<span class=c># swapon -a</span></code></pre></div></div><div class=paragraph><p>Cela effectue une vérification des systèmes de fichiers, remonte <span class=filename>/</span> en mode lecture/écriture, et monte tous les autres systèmes de fichiers UFS listés dans le fichier <span class=filename>/etc/fstab</span>, puis active la pagination.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si votre horloge CMOS est réglée sur l’heure locale et non pas sur le fuseau GMT (cela est vrai si la sortie de la commande <code>date</code> ne donne pas l’heure et le fuseau correct), vous aurez également peut-être besoin d’exécuter la commande suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># adjkerntz -i</span></code></pre></div></div><div class=paragraph><p>Cela permettra de s’assurer que vos paramètres de fuseaux horaires sont correctement configurés - sans cela, vous risquez de faire face, plus tard, à des problèmes.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_effacer_usrobj>25.7.6. Effacer <span class=filename>/usr/obj</span><a class=anchor href=#_effacer_usrobj></a></h3><div class=paragraph><p>Au fur et à mesure que les différentes parties du système sont recompilées, elles sont placées dans des répertoires qui (par défaut) sont sous <span class=filename>/usr/obj</span>. Les répertoires sont agencés comme sous <span class=filename>/usr/src</span>.</p></div><div class=paragraph><p>Vous pouvez accélérer le processus <code>make buildworld</code>, et également vous éviter d’éventuels problèmes de dépendances en effaçant ce répertoire.</p></div><div class=paragraph><p>Certains fichiers dans <span class=filename>/usr/obj</span> peuvent avoir l’indicateur immuable positionné (consultez la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=chflags&amp;sektion=1&amp;format=html">chflags(1)</a> pour plus d’informations) qui doit être retiré en premier.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/obj</span>
<span class=c># chflags -R noschg *</span>
<span class=c># rm -rf *</span></code></pre></div></div></div><div class=sect2><h3 id=updating-upgrading-compilebase>25.7.7. Recompiler le système de base<a class=anchor href=#updating-upgrading-compilebase></a></h3><div class=sect3><h4 id=_enregistrer_la_sortie>25.7.7.1. Enregistrer la sortie<a class=anchor href=#_enregistrer_la_sortie></a></h4><div class=paragraph><p>C’est une bonne idée d’enregistrer la sortie de <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> dans un fichier. Si quelque chose se passe mal, vous aurez une trace des messages d’erreur. Même si cela ne vous aide pas à diagnostiquer ce qui n’a pas fonctionné, cela peut aider les autres si vous postez votre problème sur une des listes de diffusion de FreeBSD.</p></div><div class=paragraph><p>La méthode la plus aisée pour faire cela est d’utiliser la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=script&amp;sektion=1&amp;format=html">script(1)</a>, avec en paramètre le nom du fichier où enregistrer les résultats. Vous devez faire cela immédiatement juste avant de recompiler le système, et taper <code>exit</code> une fois que c’est terminé.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># script /var/tmp/mw.out</span>
Script started, output file is /var/tmp/mw.out
<span class=c># make TARGET</span>
… compile, compile, compile …
<span class=c># exit</span>
Script <span class=k>done</span>, …</code></pre></div></div><div class=paragraph><p>Si vous le faites, <em>n’enregistrez pas</em> le résultat dans <span class=filename>/tmp</span>. Ce répertoire peut être vidé au prochain redémarrage du système. Un meilleur endroit de sauvegarde est <span class=filename>/var/tmp</span> (comme dans l’exemple précédent) ou dans le répertoire utilisateur de <code>root</code>.</p></div></div><div class=sect3><h4 id=make-buildworld>25.7.7.2. Compiler le nouveau système<a class=anchor href=#make-buildworld></a></h4><div class=paragraph><p>Vous devez être dans le répertoire <span class=filename>/usr/src</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span></code></pre></div></div><div class=paragraph><p>(à moins, bien sûr, que votre code source ne soit ailleurs, auquel cas vous devrez aller dans le répertoire correspondant).</p></div><div class=paragraph><p>Pour recompiler le système, on utilise la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>. Cette commande lit ses instructions dans le fichier <span class=filename>Makefile</span>, qui décrit comment devraient être reconstruits les programmes qui constituent FreeBSD, dans quel ordre, et ainsi de suite.</p></div><div class=paragraph><p>Le format général de la ligne de commande que vous taperez sera la suivante:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -x -DVARIABLE cible</span></code></pre></div></div><div class=paragraph><p>Dans cet exemple, <code>-<em>x</em></code> est une option que vous passez à <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>. Reportez-vous à la page de manuel pour un exemple d’options que vous pouvez passer.</p></div><div class=paragraph><p><code>-D_VARIABLE_</code> transmet un variable au fichier <span class=filename>Makefile</span>. Le comportement du <span class=filename>Makefile</span> est défini par ces variables. Ce sont les mêmes variables que l’on trouve dans <span class=filename>/etc/make.conf</span>, et c’est un autre moyen de les positionner.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -DNO_PROFILE cible</span></code></pre></div></div><div class=paragraph><p>est une autre manière de dire qu’il ne faut pas compiler les bibliothèques profilées et correspond à la ligne:</p></div><div class="literalblock programlisting"><div class=content><pre>NO_PROFILE=    true	#    Avoid compiling profiled libraries</pre></div></div><div class=paragraph><p>dans <span class=filename>/etc/make.conf</span>.</p></div><div class=paragraph><p><em>cible</em> indique à <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> ce que vous voulez faire. Chaque <span class=filename>Makefile</span> définit un certain nombre de "cibles", et votre choix de cible détermine ce qui se passe.</p></div><div class=paragraph><p>Certaines cibles listées dans le fichier <span class=filename>Makefile</span>, ne doivent pas être employées. Ce sont des étapes intermédiaires utilisées par le processus de recompilation pour décomposer les étapes importantes de la recompilation du système en sous-étapes.</p></div><div class=paragraph><p>La plupart du temps, vous n’aurez pas besoin de passer de paramètres à <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>, et votre commande ressemblera à ceci:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make cible</span></code></pre></div></div><div class=paragraph><p>Où <em>cible</em> sera une des nombreuses options de compilation. La première cible devrait toujours être <code>buildworld</code>.</p></div><div class=paragraph><p>Comme leurs noms l’indiquent, <code>buildworld</code> reconstruit la nouvelle arborescence dans <span class=filename>/usr/obj</span>, et <code>installworld</code>, une autre cible, l’installe sur la machine.</p></div><div class=paragraph><p>Disposer d’options séparées est très utile pour deux raisons. Tout d’abord cela vous permet de recompiler en toute sûreté en sachant qu’aucun composant du système actuel ne sera affecté. La compilation est "autonome". En raison de cela vous pouvez exécuter <code>buildworld</code> sur une machine en mode multi-utilisateurs sans redouter d’effets fâcheux. Il est néanmoins recommandé de toujours exécuter l’étape <code>installworld</code> en mode mono-utilisateur.</p></div><div class=paragraph><p>En second lieu, cela vous permet d’utiliser des systèmes montés par NFS pour mettre à jour plusieurs machines de votre réseau. Si vous avez trois machines <code>A</code>, <code>B</code> et <code>C</code> que vous voulez mettre à jour, exécutez <code>make buildworld</code> et <code>make installworld</code> sur <code>A</code>. <code>B</code> et <code>C</code> doivent ensuite monter par NFS <span class=filename>/usr/src</span> et <span class=filename>/usr/obj</span> depuis <code>A</code>, et vous pouvez alors exécuter <code>make installworld</code> pour installer le système recompilé sur <code>B</code> et <code>C</code>.</p></div><div class=paragraph><p>Bien que la cible <code>world</code> existe toujours, vous êtes fortement encouragé à ne pas l’utiliser.</p></div><div class=paragraph><p>Exécutez:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make buildworld</span></code></pre></div></div><div class=paragraph><p>Il est possible de passer l’option <code>-j</code> à <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> ce qui lui permettra d’exécuter plusieurs processus simultanément. C’est particulièrement utile sur une machine avec plusieurs processeurs. Cependant, comme la compilation est plus gourmande en E/S plutôt qu’en CPU, c’est également utile sur des machines mono-processeur.</p></div><div class=paragraph><p>Typiquement sur une machine mono-processeur, vous exécuteriez:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -j4 buildworld</span></code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> pourra exécuter jusqu’à 4 processus simultanément. Des constatations empiriques postées sur les listes de diffusion montrent que c’est en général ce qui apporte le plus de gain en performances.</p></div><div class=paragraph><p>Si vous avez une machine multi-processeurs et que vous avez configuré un noyau SMP, essayez des valeurs entre 6 et 19 et voyez quel bénéfice vous en tirez.</p></div></div><div class=sect3><h4 id=_durée>25.7.7.3. Durée<a class=anchor href=#_durée></a></h4><div class=paragraph><p>De nombreux facteurs influencent la durée de compilation, mais les machines récentes devraient mettrent seulement de une à deux heures pour compiler l’arborescence FreeBSD-STABLE, sans modification ni raccourcis durant le processus. Une arborescence FreeBSD-CURRENT nécessitera un peu plus de temps.</p></div></div></div><div class=sect2><h3 id=_compiler_et_installer_un_nouveau_noyau>25.7.8. Compiler et installer un nouveau noyau<a class=anchor href=#_compiler_et_installer_un_nouveau_noyau></a></h3><div class=paragraph><p>Pour tirer pleinement parti de votre nouveau système, vous devrez recompiler le noyau. C’est pratiquement indispensable, parce que certaines structures mémoires peuvent avoir changées, et des programmes comme <a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> et <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> ne fonctionneront pas tant que le système et le noyau n’utilisent pas les mêmes versions de code source.</p></div><div class=paragraph><p>La manière la plus simple et la plus sûre est de compiler et installer un noyau basé sur le noyau <span class=filename>GENERIC</span>. Alors que le noyau <span class=filename>GENERIC</span> peut ne pas comporter les pilotes de périphériques nécessaires pour votre système, il devrait contenir tout ce qui est nécessaire pour faire démarrer votre système en mode mono-utilisateur. C’est une bonne façon de tester le fonctionnement de votre nouveau système. Après avoir démarré à partir du noyau <span class=filename>GENERIC</span> et vérifié que votre système fonctionne vous pouvez alors compiler un nouveau noyau basé sur votre fichier de configuration normal du noyau.</p></div><div class=paragraph><p>Sur FreeBSD, il est important de <a href=#make-buildworld>recompiler le système</a> avant de compiler un nouveau noyau.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si vous désirez compiler un noyau personnalisé, et que vous avez déjà un fichier de configuration, utilisez juste <code>KERNCONF=<em>MONNOYAU</em></code> comme suit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make buildkernel KERNCONF=MONNOYAU</span>
<span class=c># make installkernel KERNCONF=MONNOYAU</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Notez que si vous avez augmenté la variable <code>kern.securelevel</code> à une valeur supérieure à 1 <em>et</em> que vous avez positionné l’indicateur <code>noschg</code> ou similaire sur votre noyau, il sera intéressant de passer en mode mono-utilisateur pour utiliser <code>installkernel</code>. Sinon vous devriez être en mesure d’exécuter ces commandes à partir du mode multi-utilisateur sans problèmes. Voir la page de manuel de <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> pour plus de détails à propos de <code>kern.securelevel</code> et la page <a href="https://man.freebsd.org/cgi/man.cgi?query=chflags&amp;sektion=1&amp;format=html">chflags(1)</a> pour des informations sur les différents indicateurs de fichiers.</p></div></div><div class=sect2><h3 id=_redémarrer_en_mode_mono_utilisateur>25.7.9. Redémarrer en mode mono-utilisateur<a class=anchor href=#_redémarrer_en_mode_mono_utilisateur></a></h3><div class=paragraph><p>Vous devriez redémarrer en mode mono-utilisateur pour tester le fonctionnement du nouveau noyau. Pour cela suivez les instructions de <a href=#makeworld-singleuser>Passer en mode mono-utilisateur</a>.</p></div></div><div class=sect2><h3 id=make-installworld>25.7.10. Installer les nouveaux binaires système<a class=anchor href=#make-installworld></a></h3><div class=paragraph><p>Si vous avez compilé une version de FreeBSD assez récente pour avoir utilisé <code>make buildworld</code> alors vous devriez utiliser maintenant <code>installworld</code> pour installer les nouveaux binaires système.</p></div><div class=paragraph><p>Lancez:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make installworld</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Si vous spécifiez des variables sur la ligne de commande de <code>make buildworld</code>, vous devez utiliser les mêmes variables avec la commande <code>make installworld</code>. Cela ne reste pas forcément vrai pour d’autres options; par exemple, <code>-j</code> ne doit jamais être utilisée avec <code>installworld</code>.</p></div><div class=paragraph><p>Par exemple, si vous exécutez:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -DNO_PROFILE buildworld</span></code></pre></div></div><div class=paragraph><p>vous devrez ensuite installer les résultats avec:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -DNO_PROFILE installworld</span></code></pre></div></div><div class=paragraph><p>sinon il essayera d’installer les bibliothèques profilées qui n’ont pas été recompilées à l’étape <code>make buildworld</code>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_mettre_à_jour_les_fichiers_non_modifiés_par_make_installworld>25.7.11. Mettre à jour les fichiers non modifiés par <code>make installworld</code><a class=anchor href=#_mettre_à_jour_les_fichiers_non_modifiés_par_make_installworld></a></h3><div class=paragraph><p>La recompilation du système ne mettra pas à jour certains répertoires (en particulier, <span class=filename>/etc</span>, <span class=filename>/var</span> et <span class=filename>/usr</span>) avec les fichiers nouveaux ou modifiés.</p></div><div class=paragraph><p>La manière la plus simple de mettre à jour ces fichiers est d’utiliser <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a>, bien qu’il soit possible de le faire manuellement si vous le désirez. Indépendamment de la manière que vous choisissez, assurez-vous de faire une sauvegarde du répertoire <span class=filename>/etc</span> au cas où quelque chose se passerait mal.</p></div><div class=sect3><h4 id=mergemaster>25.7.11.1. <code>mergemaster</code><a class=anchor href=#mergemaster></a></h4><div class=paragraph><p>L’utilitaire <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> est une procédure Bourne qui vous aidera à déterminer les différences entre vos fichiers de configuration dans le répertoire <span class=filename>/etc</span>, et les fichiers de configuration dans l’arborescence des sources <span class=filename>/usr/src/etc</span>. C’est la solution recommandée pour maintenir à jour les fichiers de configuration du système avec ceux situés dans l’arborescence des sources.</p></div><div class=paragraph><p>Pour commencer, tapez simplement <code>mergemaster</code> à l’invite, et observez-le travailler. <code>mergemaster</code> commencera à constituer une arborescence temporaire, à partir de <span class=filename>/</span>, et la remplira avec divers fichiers de configuration. Ces fichiers sont alors comparés avec ceux actuellement installés sur votre système. A ce point, les fichiers qui diffèrent seront affichés dans le format <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a>, avec le signe <code>+</code> représentant les lignes modifiées ou ajoutées, et le <code>-</code> représentant les lignes qui seront soit complètement supprimées, soit remplacées avec une nouvelle ligne. Voir la page de manuel <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> pour plus d’informations au sujet de la syntaxe <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> et comment sont affichées les différences.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> vous affichera ensuite chaque fichier présentant des différences, et vous aurez à ce moment-là le choix de soit supprimer le nouveau fichier (le fichier temporaire), soit d’installer le fichier temporaire non modifié, soit de fusionner le fichier temporaire et le fichier actuellement installé, soit enfin de revoir les résultats de l’opération <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a>.</p></div><div class=paragraph><p>Choisir de supprimer le fichier temporaire indiquera à <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> que nous désirons conserver notre fichier actuel intacte, et effacera la nouvelle version. Cette option n’est pas recommandée, à moins que vous ne voyez aucune raison de modifier le fichier actuel. Vous pouvez obtenir de l’aide à n’importe quel moment en tapant <kbd>?</kbd> à l’invite de <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a>. Si l’utilisateur choisit de passer un fichier, il sera présenté à nouveau une fois que tous les autres fichiers auront été traités.</p></div><div class=paragraph><p>Choisir d’installer un fichier temporaire intact remplacera le fichier actuel avec le nouveau. Pour la plupart des fichiers non modifiées, c’est la meilleure option.</p></div><div class=paragraph><p>Choisir de fusionner le fichier, vous affichera un éditeur de texte, et le contenu des deux fichiers. Vous pouvez maintenant les fusionner en les visionnant côte à côte sur l’écran, et en sélectionnant des parties des deux fichiers pour créer un fichier final. Quand les fichiers sont comparés côte à côte, la touche <kbd>l</kbd> sélectionnera le contenu de gauche et la touche <kbd>r</kbd> sélectionnera celui de droite. Le résultat final sera un fichier constitué des deux parties, qui peut alors être installé. Cette option est habituellement utilisée pour les fichiers où les des paramètres ont été modifiés par l’utilisateur.</p></div><div class=paragraph><p>Choisir de revoir les résultats de l’opération <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> vous affichera les différences entre fichiers tout comme la fait <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> avant de vous demander un choix.</p></div><div class=paragraph><p>Après que <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> en ait terminé avec les fichiers système, il vous proposera de nouvelles opérations. <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> vous demandera si vous désirez reconstruire le fichier des mots de passe et terminera en vous proposant de supprimer les fichiers temporaires restants.</p></div></div><div class=sect3><h4 id=_mise_à_jour_manuelle>25.7.11.2. Mise à jour manuelle<a class=anchor href=#_mise_à_jour_manuelle></a></h4><div class=paragraph><p>Si vous désirez faire la mise à jour manuellement, vous ne pouvez cependant pas vous contenter de copier les fichiers de <span class=filename>/usr/src/etc</span> dans <span class=filename>/etc</span> pour que cela fonctionne. Certains de ces fichiers doivent d’abord être "installés". En effet le répertoire <span class=filename>/usr/src/etc</span> "n’est pas" une copie de ce que devrait contenir votre répertoire <span class=filename>/etc</span>. De plus, il a des fichiers qui doivent être dans <span class=filename>/etc</span> et qui ne sont pas dans <span class=filename>/usr/src/etc</span>.</p></div><div class=paragraph><p>Si vous utilisez <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> (comme recommandé), vous pouvez passer cette section et aller directement à la <a href=#updating-upgrading-rebooting>section suivante</a>.</p></div><div class=paragraph><p>La façon la plus simple de procéder est d’installer les fichiers dans un nouveau répertoire, puis de passer en revue les différences.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=title>Sauvegardez votre répertoire <span class=filename>/etc</span> actuel</div><div class=paragraph><p>Bien qu’en principe rien ne sera modifié automatiquement dans ce répertoire, prudence est mère de sûreté. Copiez donc votre répertoire <span class=filename>/etc</span> dans un endroit sûr. Quelque chose du genre:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cp -Rp /etc /etc.old</span></code></pre></div></div><div class=paragraph><p>conviendra; l’option <code>-R</code> fait une copie récursive, <code>-p</code> préserve la date, les autorisations des fichiers et ainsi de suite.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Vous devez créer un ensemble de répertoires provisoires pour y installer les fichiers du répertoire <span class=filename>/etc</span> et autres. <span class=filename>/var/tmp/root</span> est un bon choix, il y a un certain nombre de sous-répertoires à créer également:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /var/tmp/root</span>
<span class=c># cd /usr/src/etc</span>
<span class=c># make DESTDIR=/var/tmp/root distrib-dirs distribution</span></code></pre></div></div><div class=paragraph><p>Cela va créer l’arborescence nécessaire et y installera les fichiers. Un grand nombre des sous-répertoires créés dans <span class=filename>/var/tmp/root</span> sont vides et devront être supprimés. La façon la plus simple de le faire est:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /var/tmp/root</span>
<span class=c># find -d . -type d | xargs rmdir 2&gt;/dev/null</span></code></pre></div></div><div class=paragraph><p>Ceci supprimera tous les répertoires vides (la sortie d’erreur standard est redirigée vers <span class=filename>/dev/null</span> pour empêcher les avertissements à propos des répertoires non vides).</p></div><div class=paragraph><p><span class=filename>/var/tmp/root</span> contient maintenant tous les fichiers à installer à l’endroit requis sous <span class=filename>/</span>. Vous devez maintenant examiner chacun de ces fichiers pour déterminer en quoi ils diffèrent de vos propres fichiers.</p></div><div class=paragraph><p>Notez que certains des fichiers qui seront installés dans <span class=filename>/var/tmp/root</span> commencent par un ".". Au moment où sont écrites ces lignes, les seuls fichiers concernés sont les fichiers d’initialisation des interpréteurs de commandes dans <span class=filename>/var/tmp/root/</span> et <span class=filename>/var/tmp/root/root/</span>, mais il pourrait y en avoir d’autres (cela dépend de quand vous lirez ces lignes). Assurez-vous d’utiliser la commande <code>ls -a</code> pour ne pas les oublier.</p></div><div class=paragraph><p>La manière la plus simple de procéder est d’utiliser la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> pour comparer les deux fichiers:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># diff /etc/shells /var/tmp/root/etc/shells</span></code></pre></div></div><div class=paragraph><p>Cela vous indiquera les différences entre votre fichier <span class=filename>/etc/shells</span> et le nouveau fichier <span class=filename>/var/tmp/root//etc/shells</span>. A partir de là, décidez si vous aller reporter les modifications que vous y avez apportée ou si vous allez simplement recopier le nouveau fichier.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=title>Donnez au nouveau répertoire racine (<span class=filename>/var/tmp/root</span>) un nom qui inclue une date, pour pouvoir facilement comparer les différentes versions</div><div class=paragraph><p>Si vous recompilez fréquemment votre système, cela signifie que vous devez également souvent mettre à jour le répertoire <span class=filename>/etc</span>, ce qui peut rapidement devenir une corvée.</p></div><div class=paragraph><p>Vous pouvez accélérer le processus en conservant une copie du dernier ensemble de fichiers modifiés que vous avez reportés dans <span class=filename>/etc</span>. La procédure suivante présente une façon de faire.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Recompilez le système comme à l’accoutumé. Au moment de mettre à jour <span class=filename>/etc</span> et les autre répertoires, donnez au répertoire cible un nom basé sur la date du jour. Si vous faisiez cela le 14 février 1998, vous pourriez procéder comme suit:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /var/tmp/root-19980214</span>
<span class=c># cd /usr/src/etc</span>
<span class=c># make DESTDIR=/var/tmp/root-19980214 \</span>
    distrib-dirs distribution</code></pre></div></div></li><li><p>Reporter les modifications depuis ce répertoire comme décrit plus haut.</p><div class=paragraph><p><em>Ne supprimez pas</em> le répertoire <span class=filename>/var/tmp/root-19980214</span> quand vous aurez terminé.</p></div></li><li><p>Quand vous récupérez la dernière version des sources et la recompilerez, suivez l’étape 1. Vous aurez alors un nouveau répertoire, qui pourrait s’appeler <span class=filename>/var/tmp/root-19980221</span> (si vous faites une mise à jour chaque semaine).</p></li><li><p>Vous pouvez maintenant voir les modifications intervenues d’une semaine à l’autre en utilisant <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> pour afficher les différences entre tous les fichiers deux répertoires:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /var/tmp</span>
<span class=c># diff -r root-19980214 root-19980221</span></code></pre></div></div><div class=paragraph><p>Généralement, il y aura beaucoup moins de différences qu’entre <span class=filename>/var/tmp/root-19980221/etc</span> et <span class=filename>/etc</span>. Comme il y a beaucoup moins de différences, il est beaucoup plus facile de les reporter dans le répertoire <span class=filename>/etc</span>.</p></div></li><li><p>Vous pouvez maintenant supprimer le plus ancien des deux répertoires <span class=filename>/var/tmp/root-*</span>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rm -rf /var/tmp/root-19980214</span></code></pre></div></div></li><li><p>Répétez l’opération chaque fois que vous devez reporter des modifications dans <span class=filename>/etc</span>.</p></li></ol></div></div></div><div class=paragraph><p>Vous pouvez utiliser <a href="https://man.freebsd.org/cgi/man.cgi?query=date&amp;sektion=1&amp;format=html">date(1)</a> pour automatiser la génération des noms de répertoires:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /var/tmp/root-`date &#34;+%Y%m%d&#34;`</span></code></pre></div></div></td></tr></tbody></table></div></div></div><div class=sect2><h3 id=updating-upgrading-rebooting>25.7.12. Redémarrer<a class=anchor href=#updating-upgrading-rebooting></a></h3><div class=paragraph><p>Vous en avez terminé. Après avoir vérifié que tout semble être en place, vous pouvez alors redémarrez votre système. Un simple <a href="https://man.freebsd.org/cgi/man.cgi?query=shutdown&amp;sektion=8&amp;format=html">shutdown(8)</a> devrait suffire:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown -r now</span></code></pre></div></div></div><div class=sect2><h3 id=_cest_fini>25.7.13. C’est fini<a class=anchor href=#_cest_fini></a></h3><div class=paragraph><p>Vous devriez maintenant avoir mis à jour avec succès votre système FreeBSD. Félicitations.</p></div><div class=paragraph><p>Si les choses se sont légèrement mal passées, il est facile de recompiler un élément particulier du système. Par exemple, si vous avez accidentellement effacé <span class=filename>/etc/magic</span> lors de la mise à jour de <span class=filename>/etc</span>, la commande <a href="https://man.freebsd.org/cgi/man.cgi?query=file&amp;sektion=1&amp;format=html">file(1)</a> ne fonctionnerait plus. Dans ce cas, la solution serait d’exécuter:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src/usr.bin/file</span>
<span class=c># make all install</span></code></pre></div></div></div><div class=sect2><h3 id=_questions>25.7.14. Questions<a class=anchor href=#_questions></a></h3></div><div class=sect2><h3 id=_dois_je_refaire_le_monde_à_chaque_évolution>25.7.15. Dois-je refaire le monde à chaque évolution?<a class=anchor href=#_dois_je_refaire_le_monde_à_chaque_évolution></a></h3><div class=paragraph><p>Il n’y a pas de réponse toute faite à cette question, tout dépend de la nature des évolutions. Par exemple, si vous venez juste d’exécuter CVSup, et que les fichiers suivants on été mis à jour:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>src/games/cribbage/instr.c
src/games/sail/pl_main.c
src/release/sysinstall/config.c
src/release/sysinstall/media.c
src/shared/mk/bsd.port.mk</code></pre></div></div><div class=paragraph><p>cela ne vaut probablement pas la peine de recompiler tout le système. Vous pouvez tout simplement aller dans les sous-répertoires appropriés, exécuter <code>make all install</code>, et c’est à peu près tout. Mais s’il y a des évolutions importantes, par exemple sur <span class=filename>src/lib/libc/stdlib</span> alors vous devrez soit refaire le monde, ou recompiler au moins toutes les parties du système qui sont liées statiquement (de même que tout ce vous pourriez avoir ajouté qui y serait lié statiquement).</p></div><div class=paragraph><p>C’est à vous de voir. Vous préférerez peut-être recompiler votre système tous les quinze jours, et laisser les modifications s’empiler pendant quinze jours. Ou bien vous préférerez ne recompiler que ce qui a changé et vous faire confiance pour tout ce qui en dépend.</p></div><div class=paragraph><p>Et, bien sûr, cela dépend de la fréquence avec laquelle vous voulez faire vos mises à jour, et de si vous suivez la branche FreeBSD-STABLE ou FreeBSD-CURRENT.</p></div></div><div class=sect2><h3 id=_ma_compilation_échoue_avec_de_nombreuses_erreurs_signal_11_signal_11_ou_tout_autre_numéro_de_signal_que_sest_il_passé>25.7.16. Ma compilation échoue avec de nombreuses erreurs "signal 11" signal 11 (ou tout autre numéro de signal). Que s’est-il passé?<a class=anchor href=#_ma_compilation_échoue_avec_de_nombreuses_erreurs_signal_11_signal_11_ou_tout_autre_numéro_de_signal_que_sest_il_passé></a></h3><div class=paragraph><p>Cela indique généralement un problème matériel. (Re)compiler le système est un bon moyen de mettre votre matériel sous pression, et mettra souvent en évidence des défaillances de la mémoire vive. Elles se manifestent normalement d’elles-mêmes, la compilation échouant lors de la réception de mystérieux signaux.</p></div><div class=paragraph><p>Un bon indicateur de cet état de fait, est que vous pouvez relancer la compilation et qu’elle échouera en un endroit différent.</p></div><div class=paragraph><p>Dans ce cas, vous ne pouvez guère faire autre chose que d’intervertir les différents composants de votre matériel pour déterminer lequel est en cause.</p></div></div><div class=sect2><h3 id=_puis_je_effacer_usrobj_après_avoir_fini>25.7.17. Puis-je effacer /usr/obj après avoir fini?<a class=anchor href=#_puis_je_effacer_usrobj_après_avoir_fini></a></h3><div class=paragraph><p>Une réponse courte est oui.</p></div><div class=paragraph><p><span class=filename>/usr/obj</span> contient tous les fichiers objets générés à la compilation. Normalement, une des premières étapes de <code>make buildworld</code> est de supprimer ce répertoire et de repartir à zéro. Dans ce cas, conserver le répertoire <span class=filename>/usr/obj</span> après avoir terminé ne sert pas à grand chose, alors que vous économiseriez pas mal d’espace disque (actuellement environ 340 MO).</p></div><div class=paragraph><p>Cependant, si vous savez ce que vous faites, vous pouvez faire en sorte que <code>make buildworld</code> saute cette étape. Cela rendra les compilations ultérieures plus rapides, puisque la plupart des sources n’auront pas besoin d’être recompilées. Le revers de la médaille est que des problèmes subtils de dépendance peuvent se manifester, provoquant l’échec de votre compilation de manière étrange. Cela génère fréquemment du bruit sur les listes de diffusion de FreeBSD, quand quelqu’un se plaint que sa mise à jour a échoué, sans réaliser que c’est parce qu’il a tenté de brûler les étapes.</p></div></div><div class=sect2><h3 id=_une_recompilation_interrompue_peut_elle_être_reprise>25.7.18. Une recompilation interrompue peut-elle être reprise?<a class=anchor href=#_une_recompilation_interrompue_peut_elle_être_reprise></a></h3><div class=paragraph><p>Tout dépend de jusqu’où vous êtes aller avant de rencontrer un problème.</p></div><div class=paragraph><p><em>En général</em> (et ceci n’est pas une règle absolue) <code>make buildworld</code> crée de nouveaux exemplaires des outils indispensables (comme <a href="https://man.freebsd.org/cgi/man.cgi?query=gcc&amp;sektion=1&amp;format=html">gcc(1)</a> et <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>) et des bibliothèques système. Ces outils et bibliothèques sont ensuite installés. Puis ils sont utilisés pour se reconstruire eux-mêmes, et installés de nouveau. L’intégralité du système (y compris maintenant les programmes utilisateurs classiques, comme <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> ou <a href="https://man.freebsd.org/cgi/man.cgi?query=grep&amp;sektion=1&amp;format=html">grep(1)</a>) est alors recompilé avec les nouveaux fichiers système.</p></div><div class=paragraph><p>Si vous êtes à cette dernière étape, et que vous le savez (parce que vous avez consulté les résultats que vous avez enregistrés) alors vous pouvez (sans trop de risque) faire:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>… fix the problem …
<span class=c># cd /usr/src</span>
<span class=c># make -DNO_CLEAN all</span></code></pre></div></div><div class=paragraph><p>Cela ne détruira pas les résultats du travail qu’à déjà effectué <code>make buildworld</code>.</p></div><div class=paragraph><p>Si vous voyez le message:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nt>--------------------------------------------------------------</span>
Building everything..
<span class=nt>--------------------------------------------------------------</span></code></pre></div></div><div class=paragraph><p>dans les comptes-rendus de <code>make buildworld</code> alors cette façon de procéder est probablement bonne.</p></div><div class=paragraph><p>Si vous ne voyez pas ce message, ou que vous doutez de vous, alors prudence est mère de sûreté, et il vaut mieux tout reprendre depuis le début.</p></div></div><div class=sect2><h3 id=_comment_puis_je_accélérer_la_compilation_du_système>25.7.19. Comment puis-je accélérer la compilation du système?<a class=anchor href=#_comment_puis_je_accélérer_la_compilation_du_système></a></h3><div class=ulist><ul><li><p>Passez en mode mono-utilisateur.</p></li><li><p>Mettez les répertoires <span class=filename>/usr/src</span> et <span class=filename>/usr/obj</span> sur des systèmes de fichiers et des disques différents. Si possible, installez ces disques sur des contrôleurs différents.</p></li><li><p>Encore mieux, mettez ces systèmes de fichiers sur plusieurs disques utilisant le système <a href="https://man.freebsd.org/cgi/man.cgi?query=ccd&amp;sektion=4&amp;format=html">ccd(4)</a> (pilote de disques concaténés).</p></li><li><p>Ne compilez pas les bibliothèques profilées (mettez "NO_PROFILE=true" dans le fichier <span class=filename>/etc/make.conf</span>). Vous n’en avez certainement pas besoin.</p></li><li><p>Egalement dans <span class=filename>/etc/make.conf</span>, positionnez <code>CFLAGS</code> à quelque chose comme <code>-O -pipe</code>. L’optimisation <code>-O2</code> est bien plus lente, et la différence d’optimisation entre <code>-O</code> et <code>-O2</code> est en général négligeable. <code>-pipe</code> demande au compilateur d’utiliser des tuyaux à la place de fichiers temporaires, ce qui économise des accès disque (mais utilise plus de mémoire).</p></li><li><p>Passez l’option <code>-j<em>n</em></code> à <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> pour permettre l’exécution de plusieurs processus en parallèle. Cela améliore généralement les choses, que vous ayez une machine mono- ou multi-processeurs.</p></li><li><p>Le système de fichiers qui contient <span class=filename>/usr/src</span> peut être monté (ou remonté) avec l’option <code>noatime</code>. Cela empêche l’enregistrement des dates d’accès aux fichiers par le système de fichiers. Vous n’avez de toute façon probablement pas besoin de cette information.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -u -o noatime /usr/src</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Cet exemple suppose que <span class=filename>/usr/src</span> constitue à lui seul un système de fichiers. Si ce n’est pas le cas (s’il fait partie de <span class=filename>/usr</span> par exemple) vous devez alors indiquer le point de montage de ce système de fichiers, et non <span class=filename>/usr/src</span>.</p></div></td></tr></tbody></table></div></li><li><p>Le système de fichiers où se trouve <span class=filename>/usr/obj</span> peut être monté (ou remonté) avec l’option <code>async</code>. Les écritures sur le disque se feront alors de façon asynchrone. En d’autres termes, le programme reprend immédiatement la main, et l’écriture des données sur le disque se fait quelques secondes plus tard. Cela permet le groupement des écritures sur le disque, et le gain en performance peut être spectaculaire.</p><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Gardez à l’esprit que cette option rend votre système de fichiers plus fragile. Avec cette option, les risques ne sont accrus qu’en cas de coupure d’alimentation, le système de fichiers soit irrécupérable quand la machine redémarrera.</p></div><div class=paragraph><p>S’il n’y a que <span class=filename>/usr/obj</span> sur ce système de fichiers, ce n’est alors pas un problème. Si vous avez d’autres données importantes sur ce système de fichiers, assurez-vous que vos sauvegardes soient à jour avant d’activer cette option.</p></div></td></tr></tbody></table></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -u -o async /usr/obj</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Comme auparavant, si <span class=filename>/usr/obj</span> ne constitue pas un système de fichiers en soit, remplacez-le dans l’exemple par le nom du point de montage approprié.</p></div></td></tr></tbody></table></div></li></ul></div></div><div class=sect2><h3 id=_que_faire_si_quelque_chose_se_passe_mal>25.7.20. Que faire si quelque chose se passe mal?<a class=anchor href=#_que_faire_si_quelque_chose_se_passe_mal></a></h3><div class=paragraph><p>Soyez absolument sûr que votre environnement ne contient pas des restes de compilation précédentes. Cela est plutôt simple:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chflags -R noschg /usr/obj/usr</span>
<span class=c># rm -rf /usr/obj/usr</span>
<span class=c># cd /usr/src</span>
<span class=c># make cleandir</span>
<span class=c># make cleandir</span></code></pre></div></div><div class=paragraph><p>En effet, <code>make cleandir</code> doit vraiment être exécutée deux fois.</p></div><div class=paragraph><p>Ensuite relancez l’ensemble du processus, en commençant avec <code>make buildworld</code>.</p></div><div class=paragraph><p>Si vous avez toujours des problèmes, envoyez l’erreur et le résultat de la commande <code>uname -a</code> à la <a href=https://lists.FreeBSD.org/subscription/freebsd-questions>liste de diffusion pour les questions d’ordre général à propos de FreeBSD</a>. Tenez-vous prêt à répondre à d’autres concernant votre configuration!</p></div></div></div></div><div class=sect1><h2 id=small-lan>25.8. Suivre les mises à jour pour plusieurs machines<a class=anchor href=#small-lan></a></h2><div class=sectionbody><div class=paragraph><p>Si vous avez plusieurs machines dont vous voulez maintenir à jour l’arborescence des sources, alors faire télécharger et recompiler à chacune d’entre elles les sources semble un gaspillage de ressources: espace disque, bande passante réseau, et cycles CPU. C’est en effet bien le cas, et la solution est d’avoir une machine qui fait la majeure partie du travail, pendant que le reste des machines montent ce travail par NFS. Cette section décrit une façon de le faire.</p></div><div class=sect2><h3 id=small-lan-preliminaries>25.8.1. Préliminaires<a class=anchor href=#small-lan-preliminaries></a></h3><div class=paragraph><p>Premièrement, identifiez un ensemble de machines qui va utiliser le même ensemble de binaires, que nous appellerons un <em>ensemble de compilation</em>. Chaque machine peut avoir un noyau personnalisé, mais elles exécuteront les mêmes binaires utilisateur du système de base. Dans cet ensemble de machine, choisissez une machine qui sera la <em>machine de compilation</em>. Cela sera la machine sur laquelle le monde et le noyau seront compilés. Idéalement, cela devrait être une machine rapide avec un CPU suffisamment disponible pour exécuter la commande <code>make buildworld</code> et <code>make buildkernel</code>. Vous voudrez également utiliser une <em>machine de test</em>, qui testera les mises à jour logicielles avant d’être utilisées en production. Cela <em>doit</em> être une machine que vous pouvez vous permettre d’avoir hors service pour une longue période. Cela peut être la machine de compilation, mais cela n’est pas obligatoire.</p></div><div class=paragraph><p>Toutes les machines de cet ensemble de compilation doivent monter <span class=filename>/usr/obj</span> et <span class=filename>/usr/src</span> à partir de la même machine, et du même point de montage. Idéalement, ces derniers sont sur deux disques différents sur la machine de compilation, mais peuvent également être montés par NFS sur cette machine. Si vous avez plusieurs ensembles de compilation, <span class=filename>/usr/src</span> devrait être sur une machine de compilation, et monté par NFS sur les autres.</p></div><div class=paragraph><p>Finalement assurez-vous que <span class=filename>/etc/make.conf</span> et <span class=filename>/etc/src.conf</span> sur toutes les machines de l’ensemble de compilation sont en accord avec la machine de compilation. Cela signifie que la machine de compilation doit compiler toutes les parties du système de base que toute machine de l’ensemble de compilation va installer. De plus, chaque machine de compilation devra avoir son nom de noyau défini avec <code>KERNCONF</code> dans <span class=filename>/etc/make.conf</span>, et la machine de compilation devrait tous les lister dans <code>KERNCONF</code>, en listant son noyau en premier. La machine de compilation doit avoir les fichiers de configuration des noyaux de chaque machine dans <span class=filename>/usr/src/sys/arch/conf</span> si elle va compiler leur noyau.</p></div></div><div class=sect2><h3 id=_le_système_de_base>25.8.2. Le système de base<a class=anchor href=#_le_système_de_base></a></h3><div class=paragraph><p>Maintenant que tout est configuré, vous êtes fin prêt pour tout compiler. Compilez le noyau et le monde sur la machine de compilation comme décrit dans la <a href=#make-buildworld>Compiler le nouveau système</a>, mais n’installez rien. La compilation une fois terminée, allez sur la machine de test, et installez le noyau que vous venez juste de compiler. Si la machine monte <span class=filename>/usr/src</span> et <span class=filename>/usr/obj</span> via NFS, quand vous redémarrez en mode mono-utilisateur vous devrez activer le réseau et monter ces répertoires. La méthode la plus simple est de démarrer en mode multi-utilisateur, puis exécutez <code>shutdown now</code> pour passer en mode mono-utilisateur. Une fois à ce niveau, vous pouvez installer le nouveau noyau et monde puis exécuter <code>mergemaster</code> comme vous le feriez habituellement. Une fois cela effectué, redémarrez pour retourner en mode multi-utilisateur pour cette machine.</p></div><div class=paragraph><p>Après que vous soyez certain que tout fonctionne correctement sur la machine de test, utilisez la même procédure pour installer le nouvel ensemble logiciel sur chacune des autres machines de l’ensemble de compilation.</p></div></div><div class=sect2><h3 id=_les_logiciels_portés>25.8.3. Les logiciels portés<a class=anchor href=#_les_logiciels_portés></a></h3><div class=paragraph><p>La même idée peut être utilisée pour le catalogue des logiciels portés. La première étape critique est de monter <span class=filename>/usr/ports</span> depuis la même machine vers toutes les machines de l’ensemble de compilation. Vous pouvez alors configurer correctement <span class=filename>/etc/make.conf</span> pour partager les archives. Vous devrez faire pointer <code>DISTDIR</code> sur un répertoire de partage commun dans lequel peut écrire n’importe quel utilisateur utilisé pour correspondance de l’utilisateur <code>root</code> par vos montages NFS. Chaque machine devrait faire pointer <code>WRKDIRPREFIX</code> sur une répertoire de compilation local. Et enfin, si vous projetez de compiler et distribuer des logiciels précompilés, vous devriez fixer <code>PACKAGES</code> sur un répertoire similaire à <code>DISTDIR</code>.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 mars 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/fr/books/handbook/l10n class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/fr/books/handbook/dtrace class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Sommaire</h3><nav id=TableOfContents><ul><li><a href=#updating-upgrading-synopsis>25.1. Synopsis</a></li><li><a href=#updating-upgrading-freebsdupdate>25.2. Mise à jour de FreeBSD</a></li><li><a href=#updating-upgrading-portsnap>25.3. Portsnap: un outil de mise à jour du catalogue des logiciels portés</a></li><li><a href=#updating-upgrading-documentation>25.4. Updating the Documentation Set <strong>Traduction en Cours</strong></a></li><li><a href=#current-stable>25.5. Suivre une branche de développement</a></li><li><a href=#synching>25.6. Synchroniser vos sources</a></li><li><a href=#makeworld>25.7. Recompiler le système</a></li><li><a href=#small-lan>25.8. Suivre les mises à jour pour plusieurs machines</a></li></ul></nav><hr><div class=resources><h3>Ressources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Téléchargement en PDF"></i><a href=https://download.freebsd.org/doc/fr/books/handbook/handbook_fr.pdf>Téléchargement en PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Éditer cette page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/fr/_index target=_blank>Éditer cette page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/fr/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>French</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Clair</option><option value=theme-dark>Sombre</option><option value=theme-high-contrast>Contraste élevé</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/fr class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/fr/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>