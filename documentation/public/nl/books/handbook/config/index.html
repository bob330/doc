<!doctype html><html class=theme-light lang=nl><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/nl/books/handbook/config/><title>Hoofdstuk 12. Instellingen en optimalisatie | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Hoofdstuk 12. Instellingen en optimalisatie"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="nl"><meta property="og:url" content="http://172.16.201.134:1313/nl/books/handbook/config/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/nl\/books\/handbook\/config\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/nl>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/nl/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/nl/books>Books</a></li><li><a href=http://172.16.201.134:1313/nl/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/nl/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=nl>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/preface/>Voorwoord</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-audience>Bedoeld publiek</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-changes-from3>Wijzigingen ten opzichte van de derde editie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-changes-from2>Wijzigingen ten opzichte van de tweede editie (2004)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-changes>Veranderingen ten opzichte van de eerste editie (2001)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-overview>De opbouw van dit boek</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-conv>Overeenkomsten in dit boek</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-acknowledgements>Dankwoorden</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/parti/>Deel I. Beginnen</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/>Hoofdstuk 1. Introductie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/#introduction-synopsis>1.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/#nutshell>1.2. Welkom bij FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/#history>1.3. Over het FreeBSD Project</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/install/>Hoofdstuk 2. FreeBSD installeren op FreeBSD 8.X en eerder</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-synopsis>2.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-hardware>2.2. Hardware-eisen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-pre>2.3. Voorbereidende taken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-start>2.4. Beginnen met de installatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#using-sysinstall>2.5. Inleiding Sysinstall</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-steps>2.6. Schijfruimte toewijzen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-choosing>2.7. Wat installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-media>2.8. Installatiemedia kiezen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-final-warning>2.9. De installatie bevestigen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-post>2.10. Instellingen na de installatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-trouble>2.11. Problemen oplossen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-advanced>2.12. Installeren voor gevorderden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-diff-media>2.13. Aangepaste installatiemedia maken</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/bsdinstall/>Hoofdstuk 3. FreeBSD 9.X en nieuwer installeren</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/bsdinstall/#bsdinstall-synopsis>33.1. Overzicht</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/basics/>Hoofdstuk 4. UNIX® beginselen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-synopsis>4.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#consoles>4.2. Virtuele consoles en terminals</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#permissions>4.3. Rechten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#dirstructure>4.4. Mappenstructuur</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#disk-organization>4.5. Organisatie van schijven</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#mount-unmount>4.6. Het koppelen en ontkoppelen van bestandssystemen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-processes>4.7. Processen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-daemons>4.8. Daemons, signalen en het stoppen van processen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#shells>4.9. Shells</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#editors>4.10. Teksteditors</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-devices>4.11. Apparaten en apparaatnodes</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#binary-formats>4.12. Binaire formaten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-more-information>4.13. Meer informatie</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/ports/>Hoofdstuk 5. Applicaties installeren: pakketten en ports</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-synopsis>5.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-overview>5.2. Overzicht van softwareinstallatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-finding-applications>5.3. Applicaties zoeken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#packages-using>5.4. Het pakkettensysteem gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-using>5.5. De Portscollectie gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-nextsteps>5.6. Activiteiten na het installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-broken>5.7. Omgaan met kapotte ports</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/x11/>Hoofdstuk 6. Het X Window systeem</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x11-synopsis>6.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-understanding>6.2. X begrijpen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-install>6.3. X11 installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-config>6.4. X11 instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-fonts>6.5. Lettertypen gebruiken in X11</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-xdm>6.6. De X beeldschermmanager</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x11-wm>6.7. Bureaubladomgevingen</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partii/>Deel II. Algemene taken</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/>Hoofdstuk 7. Bureaubladapplicaties</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-synopsis>7.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-browsers>7.2. Browsers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-productivity>7.3. Productiviteit</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-viewers>7.4. Documentviewers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-finance>7.5. Financiën</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-summary>7.6. Samenvatting</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/>Hoofdstuk 8. Multimedia</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#multimedia-synopsis>8.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#sound-setup>8.2. Geluidskaart installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#sound-mp3>8.3. MP3 audio</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#video-playback>8.4. Video afspelen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#tvcard>8.5. TV-kaarten installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#mythtv>8.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#scanners>8.7. Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/>Hoofdstuk 9. De FreeBSD-kernel instellen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Samenvatting</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Redenen om een aangepaste kernel te bouwen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-devices>9.3. De systeemhardware vinden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Kernel stuurprogramma’s, subsystemen, en modules</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-building>9.5. Bouwen en installeren van een aangepaste kernel</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-config>9.6. Het instellingenbestand</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/printing/>Hoofdstuk 10. Afdrukken</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-synopsis>10.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-intro-spooler>10.2. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-intro-setup>10.3. Standaardinstallatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-advanced>10.4. Geavanceerde printerinstallatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-using>10.5. Printers gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-lpd-alternatives>10.6. Alternatieven voor het standaard wachtrijsysteem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-troubleshooting>10.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/>Hoofdstuk 11. Linux® binaire compatibiliteit</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Installatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Mathematica® installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-maple>11.4. Maple™ installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-matlab>11.5. MATLAB® installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-oracle>11.6. Oracle® installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-advanced>11.7. Gevorderde onderwerpen</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partiii/>Deel III. Systeembeheer</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle checked>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/config/>Hoofdstuk 12. Instellingen en optimalisatie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#config-synopsis>12.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-initial>12.2. Initiële instellingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-core-configuration>12.3. Hoofdinstellingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-appconfig>12.4. Toepassingen instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-starting-services>12.5. Diensten starten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-cron>12.6. <code>cron</code> instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-rcd>12.7. Gebruik van rc met FreeBSD</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#config-network-setup>12.8. Netwerkkaarten instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-virtual-hosts>12.9. Virtuele hosts</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-syslog>12.10. De systeemlogger syslogd configureren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-configfiles>12.11. Instellingenbestanden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-sysctl>12.12. Optimaliseren met sysctl</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-disk>12.13. Harde schijven optimaliseren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-kernel-limits>12.14. Fijnafstemming van kernellimieten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#adding-swap-space>12.15. Wisselbestandruimte toevoegen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#acpi-overview>12.16. Energie- en bronnenbeheer</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#ACPI-debug>12.17. FreeBSD ACPI gebruiken en debuggen</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/boot/>Hoofdstuk 13. Het FreeBSD opstartproces</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-synopsis>13.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-introduction>13.2. Het bootprobleem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-blocks>13.3. De bootmanager en opstartstadia</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-kernel>13.4. Interactie met de kernel tijdens opstarten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#device-hints>13.5. Device hints</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-init>13.6. Init: start van procesbesturing</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-shutdown>13.7. Afsluitvolgorde</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/users/>Hoofdstuk 14. Gebruikers- en basisaccountbeheer</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-synopsis>14.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-introduction>14.2. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-superuser>14.3. Het superuser-account</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-system>14.4. Systeemaccounts</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-user>14.5. Gebruikersaccounts</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-modifying>14.6. Accounts wijzigen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-limiting>14.7. Gebruikers beperken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-groups>14.8. Groepen</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/security/>Hoofdstuk 15. Beveiliging</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-synopsis>15.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-intro>15.2. Introductie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#securing-freebsd>15.3. FreeBSD beveiligen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 en crypt</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#one-time-passwords>15.5. Eenmalige wachtwoorden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#kerberos5>15.7. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#openssl>15.8. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#ipsec>15.9. VPN via IPsec</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#openssh>15.10. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#fs-acl>15.11. Bestandssysteem toegangscontrolelijsten (ACLs)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-portaudit>15.12. Monitoren van beveiligingsproblemen met andere software</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-advisories>15.13. FreeBSD beveiligingswaarschuwingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-accounting>15.14. Procesaccounting</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/jails/>Hoofdstuk 16. Jails</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-synopsis>16.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-terms>16.2. Termen en begrippen van jails</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-intro>16.3. Introductie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-build>16.4. Creeëren en controleren van jails</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-tuning>16.5. Optimaliseren en administratie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-application>16.6. Toepassing van jails</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/mac/>Hoofdstuk 17. Verplichte Toegangscontrole (MAC)</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-synopsis>17.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-inline-glossary>17.2. Sleuteltermen in dit hoofdstuk</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-initial>17.3. Uitleg over MAC</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-understandlabel>17.4. MAC-labels begrijpen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-planning>17.5. De beveiligingsconfiguratie plannen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-modules>17.6. Module-instellingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-seeotheruids>17.7. MAC-module seeotheruids</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-bsdextended>17.8. MAC-module bsdextended</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-ifoff>17.9. MAC-module ifoff</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-portacl>17.10. MAC-module portacl</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-partition>17.11. MAC-module partition</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-mls>17.12. MAC-module Multi-Level Security</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-biba>17.13. MAC-module Biba</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-lomac>17.14. MAC-module LOMAC</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-implementing>17.15. Nagios in een MAC-jail</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-userlocked>17.16. Gebruikers afsluiten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-troubleshoot>17.17. Problemen oplossen met het MAC-raamwerk</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/audit/>Hoofdstuk 18. Security Event Auditing</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-synopsis>18.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-inline-glossary>18.2. Sleutelwoorden in dit hoofdstuk</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-install>18.3. Installeren van audit ondersteuning.</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-config>18.4. Audit Configuratie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-administration>18.5. Het audit subsysteem beheren.</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/disks/>Hoofdstuk 19. Opslag</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-synopsis>19.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-naming>19.2. Apparaatnamen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-adding>19.3. Schijven toevoegen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#raid>19.4. RAID</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#usb-disks>19.5. USB-opslagapparaten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#creating-cds>19.6. Optische media (CD’s) aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#creating-dvds>19.7. Optische media (DVD’s) aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#floppies>19.8. Diskettes aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backups-tapebackups>19.9. Gegevensbanden aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backups-floppybackups>19.10. Naar diskettes back-uppen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backup-strategies>19.11. Back-up strategieën</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backup-basics>19.12. Back-upbeginselen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-virtual>19.13. Netwerk-, geheugen-, en bestandsgebaseerde bestandssystemen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#snapshots>19.14. Snapshots van bestandssystemen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#quotas>19.15. Bestandssysteemquota</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-encrypting>19.16. Schijfpartities versleutelen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#swap-encrypting>19.17. Het versleutelen van de wisselbestand ruimte</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-hast>19.18. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/geom/>Hoofdstuk 20. GEOM: Modulair schijftransformatie raamwerk</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-synopsis>20.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-intro>20.2. GEOM inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-striping>20.3. RAID0 - aaneengeschakeld</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-mirror>20.4. RAID1 - spiegelen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-raid3>20.5. RAID3 - Striping op byte-niveau met toegewijde pariteit</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-ggate>20.6. GEOM Gate netwerk apparaten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-glabels>20.7. Het labelen van schijven</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-gjournal>20.8. UFS logboeken door middel van GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/>Hoofdstuk 21. Ondersteuning van bestandssystemen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/#filesystems-synopsis>21.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/#filesystems-zfs>21.2. Het Z File System (ZFS)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/#filesystems-linux>21.3. Linux® bestandssystemen</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/>Hoofdstuk 22. Virtualisatie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/#virtualization-synopsis>22.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/#virtualization-guest>22.2. FreeBSD als een gast-besturingssysteem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/#virtualization-host>22.3. FreeBSD als een gastheer-besturingssysteem</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/>Hoofdstuk 23. Lokalisatie - I18N/L10N gebruiken en instellen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#l10n-synopsis>23.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#l10n-basics>23.2. Beginselen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#using-localization>23.3. Lokalisatie gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#l10n-compiling>23.4. I18N-programma’s compileren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#lang-setup>23.5. FreeBSD lokaliseren naar talen</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/>Hoofdstuk 24. FreeBSD updaten en upgraden</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. FreeBSD Update</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. Portsnap: een updategereedschap voor de Portscollectie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. De documentatie bijwerken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#current-stable>24.5. Een ontwikkelingstak volgen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#synching>24.6. Broncode synchroniseren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#makeworld>24.7. De "wereld" opnieuw bouwen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#make-delete-old>24.8. Het verwijderen van overbodige bestanden, directories en bibliotheken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#small-lan>24.9. Meerdere machines bijwerken</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/>Hoofdstuk 25. DTrace</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-synopsis>25.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-implementation>25.2. Implementatieverschillen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-enable>25.3. Ondersteuning voor DTrace aanzetten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-using>25.4. DTrace gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-language>25.5. De taal D</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partiv/>Deel IV. Netwerkcommunicatie</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/>Hoofdstuk 26. Seriële communicatie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#serial-synopsis>26.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#serial>26.2. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#term>26.3. Terminals</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#dialup>26.4. Inbeldienst</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#dialout>26.5. Uitbeldienst</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#serialconsole-setup>26.6. Seriële console opzetten</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/>Hoofdstuk 27. PPP en SLIP</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#userppp>27.2. Gebruikmaken van gebruiker-PPP</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#ppp>27.3. Kernel-PPP gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. Het problemen oplossen van PPP-verbindingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#pppoe>27.5. PPP gebruiken over Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#pppoa>27.6. Gebruik maken van PPP over ATM (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#slip>27.7. Gebruik maken van SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/mail/>Hoofdstuk 28. Elektronische mail</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-synopsis>28.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-using>28.2. Gebruik maken van elektronische mail</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#sendmail>28.3. sendmail instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-changingmta>28.4. De Mail Transfer Agent vervangen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-trouble>28.5. Problemen oplossen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-advanced>28.6. Geavanceerde onderwerpen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#SMTP-UUCP>28.7. SMTP met UUCP</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#outgoing-only>28.8. Instellen om alleen te versturen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#SMTP-dialup>28.9. Mail gebruiken met een inbelverbinding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#SMTP-Auth>28.10. SMTP-authenticatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-agents>28.11. Mail User Agents</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-fetchmail>28.12. fetchmail gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-procmail>28.13. procmail gebruiken</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/>Hoofdstuk 29. Netwerkdiensten</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-servers-synopsis>29.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-inetd>29.2. De inetd"Super-Server"</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-nfs>29.3. Netwerkbestandssysteem (NFS)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-nis>29.4. Netwerkinformatiesysteem (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-dhcp>29.5. Automatisch netwerk instellen (DHCP)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-dns>29.6. Domeinnaamsysteem (DNS)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-apache>29.7. Apache HTTP server</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-ftp>29.8. File Transfer Protocol (FTP)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-samba>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-ntp>29.10. Tijd synchroniseren met NTP</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-syslogd>29.11. Hosts op afstand loggen met <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/>Hoofdstuk 30. Firewalls</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-intro>30.1. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-concepts>30.2. Firewallconcepten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-apps>30.3. Firewallsoftware</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-pf>30.4. De OpenBSD Packet Filter (PF) en ALTQ</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-ipf>30.5. De IPFILTER (IPF) firewall</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/>Hoofdstuk 31. Geavanceerde netwerken</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Samenvatting</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-routing>31.2. Gateways en routes</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-wireless>31.3. Draadloze netwerken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-bridging>31.5. Bridging</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-aggregation>31.6. Verbindingsaggregatie en failover</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-diskless>31.7. Schijfloos werken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-pxe-nfs>31.8. Met PXE en een NFS-root-bestandssysteem opstarten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-isdn>31.9. ISDN</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-natd>31.10. Network Address Translation</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-ipv6>31.11. IPv6</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-atm>31.12. Asynchronous Transfer Mode (ATM)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#carp>31.13. Common Address Redundancy Protocol (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partv/>Deel V. Appendix</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/>Bijlage A. FreeBSD verkrijgen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-cdrom>A.1. CD-ROM en DVD uitgevers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-ftp>A.2. FTP sites</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-svn>A.3. Subversion-sites</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#anoncvs>A.4. Anonieme CVS</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#ctm>A.5. CTM gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#cvsup>A.6. CVSup gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#cvs-tags>A.7. CVS labels</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-rsync>A.8. rsync sites</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/>Bijlage B. Bibliografie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-freebsd>B.1. Boeken & tijdschriften over FreeBSD</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-userguides>B.2. Voor gebruikers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-adminguides>B.3. Voor beheerders</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-programmers>B.4. Voor programmeurs</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-osinternals>B.5. Dieper in het besturingssysteem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-security>B.6. Over beveiliging</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-hardware>B.7. Over hardware</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-history>B.8. UNIX® geschiedenis</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-journals>B.9. Tijdschriften en periodieken</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/>Bijlage C. Bronnen op Internet</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-mail>C.1. Mailinglijsten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-news>C.2. Usenet-nieuwsgroepen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-web>C.3. World wide webservers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-email>C.4. Email-adressen</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/pgpkeys/>Bijlage D. PGP sleutels</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Beambten</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Hoofdstuk 12. Instellingen en optimalisatie</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#config-synopsis>12.1. Overzicht</a></li><li><a href=#configtuning-initial>12.2. Initiële instellingen</a></li><li><a href=#configtuning-core-configuration>12.3. Hoofdinstellingen</a></li><li><a href=#configtuning-appconfig>12.4. Toepassingen instellen</a></li><li><a href=#configtuning-starting-services>12.5. Diensten starten</a></li><li><a href=#configtuning-cron>12.6. <code>cron</code> instellen</a></li><li><a href=#configtuning-rcd>12.7. Gebruik van rc met FreeBSD</a></li><li><a href=#config-network-setup>12.8. Netwerkkaarten instellen</a></li><li><a href=#configtuning-virtual-hosts>12.9. Virtuele hosts</a></li><li><a href=#configtuning-syslog>12.10. De systeemlogger syslogd configureren</a></li><li><a href=#configtuning-configfiles>12.11. Instellingenbestanden</a></li><li><a href=#configtuning-sysctl>12.12. Optimaliseren met sysctl</a></li><li><a href=#configtuning-disk>12.13. Harde schijven optimaliseren</a></li><li><a href=#configtuning-kernel-limits>12.14. Fijnafstemming van kernellimieten</a></li><li><a href=#adding-swap-space>12.15. Wisselbestandruimte toevoegen</a></li><li><a href=#acpi-overview>12.16. Energie- en bronnenbeheer</a></li><li><a href=#ACPI-debug>12.17. FreeBSD ACPI gebruiken en debuggen</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=config-synopsis>12.1. Overzicht<a class=anchor href=#config-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Systeeminstellingen zijn een belangrijk aspect van FreeBSD. Correcte instellingen helpen moeilijkheden bij toekomstige upgrades te voorkomen. In dit hoofdstuk wordt het instellen van FreeBSD beschreven, alsmede een aantal prestatiebevorderende maatregelen waarmee een FreeBSD systeem geoptimaliseerd kan worden.</p></div><div class=paragraph><p>Na het lezen van dit hoofdstuk weet de lezer:</p></div><div class=ulist><ul><li><p>Hoe efficiënt om te gaan met bestandssystemen en wisselpartities;</p></li><li><p>De grondbeginselen van het <span class=filename>rc.conf</span> instellingensysteem en van het opstarten van toepassingen (diensten) met <span class=filename>/usr/local/etc/rc.d</span>;</p></li><li><p>Hoe een netwerkkaart ingesteld en getest wordt;</p></li><li><p>Hoe virtuele hosts op netwerkapparatuur ingesteld worden;</p></li><li><p>Hoe de instellingenbestanden in <span class=filename>/etc</span> gebruikt worden;</p></li><li><p>Hoe FreeBSD geoptimaliseerd kan worden met <code>sysctl</code>-variabelen;</p></li><li><p>Hoe schijfprestaties te verbeteren en hoe kernelbeperkingen gewijzigd kunnen worden.</p></li></ul></div><div class=paragraph><p>Veronderstelde voorkennis:</p></div><div class=ulist><ul><li><p>De grondbeginselen van UNIX® en FreeBSD (<a href=../basics/#basics>UNIX® beginselen</a>) begrijpen;</p></li><li><p>Bekend zijn met de grondbeginselen van kernelinstellingen en compilatie (<a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=configtuning-initial>12.2. Initiële instellingen<a class=anchor href=#configtuning-initial></a></h2><div class=sectionbody><div class=sect2><h3 id=_partitioneren>12.2.1. Partitioneren<a class=anchor href=#_partitioneren></a></h3><div class=sect3><h4 id=_basispartities>12.2.1.1. Basispartities<a class=anchor href=#_basispartities></a></h4><div class=paragraph><p>Bij het aanmaken van bestandssystemen met <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> of <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a> is het van belang dat op een harde schijf de gegevensoverdracht het snelst is aan de buitenste sporen en het langzaamst aan de binnenste. Kleinere en veelgebruikte bestandssystemen kunnen daarom het beste aan de buitenkant van de schijf geplaatst worden, terwijl grotere partities als <span class=filename>/usr</span> meer naar de binnenkant van de schijf geplaatst kunnen worden. Het is een goed idee om partities aan te maken in deze of gelijksoortige volgorde: root, swap, <span class=filename>/var</span>, <span class=filename>/usr</span>.</p></div><div class=paragraph><p>De grootte van de partitie <span class=filename>/var</span> hangt af van de wijze waarop de machine gebruikt gaat worden. Het bestandssysteem <span class=filename>/var</span> wordt gebruikt voor onder meer postbussen, logbestanden en printergegevens en -wachtrijen. Postbussen en logbestanden kunnen onverwacht groot worden, afhankelijk van het aantal systeemgebruikers en de bewaarduur van logbestanden. De meeste gebruikers zullen zelden meer dan ongeveer een gigabyte aan vrije schijfruimte op <span class=filename>/var</span> nodig hebben.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Er zijn een aantal gevallen waar een grote hoeveelheid ruimte in <span class=filename>/var/tmp</span> nodig is. Wanneer er nieuwe software wordt geïnstalleerd met <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> pakken de pakketprogramma’s een tijdelijke kopie van de pakketten uit in <span class=filename>/var/tmp</span>. Grote softwarepakketten, zoals Firefox, OpenOffice of LibreOffice kunnen lastig zijn om te installeren wanneer er onvoldoende vrije schijfruimte beschikbaar is onder <span class=filename>/var/tmp</span>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>De partitie <span class=filename>/usr</span> bevat veel van de benodigde systeembestanden, waaronder de <a href="https://man.freebsd.org/cgi/man.cgi?query=ports&amp;sektion=7&amp;format=html">ports(7)</a> collectie (aanbevolen) en de broncode (optioneel). Beide zijn optioneel tijdens de installatie, maar we raden voor deze partitie tenminste 2 gigabyte aan.</p></div><div class=paragraph><p>Het is verstandig rekening te houden met de vereiste schijfruimte bij het kiezen van partitiegroottes. Als in een partitie onvoldoende vrije schijfruimte is, terwijl een andere vrijwel niet gebruikt wordt, is dat een vervelend en niet optimaal oplosbaar probleem.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a>'s <code>Auto-defaults</code> partitiekeuze kan in de ervaring van sommige gebruikers mogelijk te kleine <span class=filename>/var</span> en <span class=filename>/</span> partities opleveren. Partitioneren moet verstandig en niet te zuinig gebeuren.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=swap-design>12.2.1.2. Wisselpartities (swap)<a class=anchor href=#swap-design></a></h4><div class=paragraph><p>De vuistregel is dat het wisselbestand ongeveer het dubbele van de grootte van het systeemgeheugen (RAM) moet zijn. Als de machine bijvoorbeeld 128 megabytes geheugen heeft, kan het beste een wisselbestand van (tenminste) 256 megabytes gebruikt worden. Minder dan 256 megabytes swap is in dit geval af te raden. Systemen met weinig geheugen kunnen overigens beter functioneren met meer swap. Ook is het verstandig rekening te houden met eventuele geheugenuitbreiding in de toekomst. Bovendien zijn de VM paging-algoritmen van de kernel zo afgestemd dat ze het beste presteren bij een wisselbestand van tenminste tweemaal de grootte van het geheugen. Een te kleine swap kan dus inefficiënties in de VM-code tot gevolg hebben en mogelijk problemen veroorzaken als het systeemgeheugen uitgebreid wordt.</p></div><div class=paragraph><p>Op grotere systemen met meerdere SCSI-schijven (of meerdere IDE-schijven op verschillende controllers) is het aan te raden om op elke schijf een wisselpartitie in te stellen (dit kan tot en met vier schijven), elk met ongeveer dezelfde grootte. De kernel kan met arbitraire groottes werken, maar interne datastructuren schalen tot viermaal de grootste swappartitie. De kernel kan de beschikbare ruimte voor het wisselbestand het meest optimaal indelen als de partities ongeveer even groot zijn. Een grote swap is prima, ook als ze zelden gebruikt wordt. Zo kan het gemakkelijker zijn om een (uit de hand gelopen) proces dat het systeem grotendeels bezet houdt te beëindigen, voordat er opnieuw opgestart moet worden.</p></div></div><div class=sect3><h4 id=_waarom_partitioneren>12.2.1.3. Waarom partitioneren?<a class=anchor href=#_waarom_partitioneren></a></h4><div class=paragraph><p>Waarom niet één enkele grote partitie gebruiken? Er zijn verscheidene redenen waarom dit niet zo’n goed idee is. De verschillende partities hebben hun eigen karakteristieke operationele gedrag en vereisten. Door ze te scheiden zijn er betere mogelijkheden om het systeem te optimaliseren. Vanaf de <span class=filename>/</span> en <span class=filename>/usr</span> partities wordt bijvoorbeeld vooral gelezen en er wordt weinig naar geschreven, terwijl er in <span class=filename>/var</span> en <span class=filename>/var/tmp</span> zowel veel gelezen als geschreven wordt.</p></div><div class=paragraph><p>Door een systeem goed te partitioneren wordt vermeden dat fragmentatie die optreedt in de kleinere partities met veel schrijfactiviteit doorsijpelt naar partities die vooral lees-intensief zijn. Door schrijf-intensieve partities aan het begin van de schijf te plaatsen, zijn de prestaties wat betreft invoer/uitvoer het beste daar waar het het meest nodig is. Ofschoon er natuurlijk ook de best mogelijke in/uit prestaties wenselijk zijn in de grotere partities, weegt het plaatsen van deze bestandssystemen aan het begin van de schijf niet tegen de voordelen van het plaatsen van <span class=filename>/var</span> aan het begin van de schijf (na root en swap) voor de totale snelheid van het systeem. Tenslotte zijn er veiligheidsoverwegingen. Een compacte en nette rootpartitie die vrijwel alleen-lezen is, heeft een betere kans om een nare crash te overleven.</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-core-configuration>12.3. Hoofdinstellingen<a class=anchor href=#configtuning-core-configuration></a></h2><div class=sectionbody><div class=paragraph><p>De voornaamste lokatie voor systeeminstellingen is <span class=filename>/etc/rc.conf</span>. Dit bestand bevat een scala aan instellingen, die gebruikt wordt om het systeem in te stellen bij het opstarten. De naam impliceert dit al. Het is informatie voor de <span class=filename>rc*</span> bestanden (rc staat voor "resource configuration" of broninstellingen).</p></div><div class=paragraph><p>De systeembeheerder wordt geacht regels toe te voegen aan <span class=filename>rc.conf</span> om de standaardinstellingen uit <span class=filename>/etc/defaults/rc.conf</span> aan te passen. Het standaardbestand moet niet letterlijk gekopiëerd worden naar <span class=filename>/etc</span>. Het bevat standaardwaardes en is niet bedoeld als voorbeeld. Alle wijzigingen die specifiek zijn voor een systeem horen in <span class=filename>/etc/rc.conf</span> thuis.</p></div><div class=paragraph><p>In een clusterscenario is het nuttig om systeemspecifieke instellingen te scheiden van algemene instellingen die voor het hele cluster gelden. Hiervoor kunnen een aantal strategieën worden gebruikt. De aanbevolen benadering is om systeem-specifieke instellingen in <span class=filename>/etc/rc.conf.local</span> te plaatsen. Een voorbeeld:</p></div><div class=ulist><ul><li><p><span class=filename>/etc/rc.conf</span>:</p><div class="literalblock programlisting"><div class=content><pre>sshd_enable=&#34;YES&#34;
keyrate=&#34;fast&#34;
defaultrouter=&#34;10.1.1.254&#34;</pre></div></div></li><li><p><span class=filename>/etc/rc.conf.local</span>:</p><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;node1.example.org&#34;
ifconfig_fxp0=&#34;inet 10.1.1.1/8&#34;</pre></div></div></li></ul></div><div class=paragraph><p><span class=filename>rc.conf</span> kan vervolgens naar elk systeem gedistribueerd worden met <code>rsync</code> of een gelijksoortig programma, terwijl <span class=filename>rc.conf.local</span> uniek blijft.</p></div><div class=paragraph><p>Het actualiseren van het systeem met <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a> of <code>make world</code> overschrijft <span class=filename>rc.conf</span> niet, zodat de bestaande systeeminstellingen niet verloren gaan.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Het instellingenbestand <span class=filename>/etc/rc.conf</span> wordt gelezen door <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>. Dit stelt systeembeheerders in staat om een zekere hoeveelheid logica aan dit bestand toe te voegen, dat kan helpen in het creëren van zeer ingewikkelde configuratiescenario’s. Bekijk <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> voor meer informatie over dit onderwerp.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=configtuning-appconfig>12.4. Toepassingen instellen<a class=anchor href=#configtuning-appconfig></a></h2><div class=sectionbody><div class=paragraph><p>Geïnstalleerde toepassingen hebben meestal hun eigen instellingenbestanden, met hun eigen syntaxis, etc. Het is van belang deze bestanden apart te houden van het basissysteem, zodat ze makkelijk gelokaliseerd kunnen worden en beheerd kunnen worden met de hulpmiddelen voor pakketbeheer.</p></div><div class=paragraph><p>Deze bestanden worden meestal geïnstalleerd in <span class=filename>/usr/local/etc</span>. Als een toepassing een uitgebreide verzameling bestanden voor instellingen heeft, wordt er een submap voor aangemaakt.</p></div><div class=paragraph><p>Bij de installatie van een port of pakket, worden normaliter ook voorbeeldbestanden met instellingen geïnstalleerd. Deze zijn doorgaans te herkennen aan een toevoegsel <span class=filename>.default</span>. Als er geen bestaande instellingenbestanden voor de toepassing zijn, kunnen ze gemaakt worden door de <span class=filename>.default</span>-bestanden te kopiëren.</p></div><div class=paragraph><p>Een voorbeeld is de map <span class=filename>/usr/local/etc/apache</span>:</p></div><div class=literalblock><div class=content><pre>-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf
-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf.default
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf.default
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic.default
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types.default
-rw-r--r--  1 root  wheel   7980 May 20  1998 srm.conf
-rw-r--r--  1 root  wheel   7933 May 20  1998 srm.conf.default</pre></div></div><div class=paragraph><p>Aan de grootte van de bestanden is te zien dat alleen <span class=filename>srm.conf</span> gewijzigd is. Als later de port Apache wordt vernieuwd, wordt dit bestand niet overschreven.</p></div></div></div><div class=sect1><h2 id=configtuning-starting-services>12.5. Diensten starten<a class=anchor href=#configtuning-starting-services></a></h2><div class=sectionbody><div class=paragraph><p>Veel gebruikers kiezen ervoor om software van derden te installeren op FreeBSD vanuit de Portscollectie. In veel gevallen is het noodzakelijk om de software dusdanig in te stellen dat het opstart tijdens het opstarten van de computer. Diensten zoals <a class=package href=https://cgit.freebsd.org/ports/tree/mail/postfix/>mail/postfix</a> of <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a> zijn slechts twee voorbeelden van softwarepakketten die gestart kunnen worden tijdens de systeemstart. In deze paragraaf wordt toegelicht hoe software van derde partijen kan worden gestart.</p></div><div class=paragraph><p>In FreeBSD worden de meeste diensten, zoals <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>, door de opstartscripts van het systeem gestart. Deze scripts kunnen verschillen tussen FreeBSD en leverancierversies, echter het meest belangrijke aspect om in gedachten te houden is dat hun opstartinstellingen verwerkt kunnen worden door simpele opstartscripts.</p></div><div class=sect2><h3 id=_uitgebreide_applicatieinstellingen>12.5.1. Uitgebreide applicatieinstellingen<a class=anchor href=#_uitgebreide_applicatieinstellingen></a></h3><div class=paragraph><p>Nu FreeBSD <span class=filename>rc.d</span> heeft, zijn de instellingen van applicaties die mee moeten opstarten versimpeld en rijker aan mogelijkheden. Door gebruik te maken van de sleutelwoorden die in de paragraaf <a href=#configtuning-rcd><span class=filename>rc.d</span></a> behandeld worden, kunnen applicaties nu starten na andere diensten. DNS kan bijvoorbeeld extra opties meekrijgen van <span class=filename>/etc/rc.conf</span> in plaats van hard ingestelde opties in het opstartscript. Een basisscript ziet er ongeveer als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# PROVIDE: utility
# REQUIRE: DAEMON
# KEYWORD: shutdown

. /etc/rc.subr

name=utility
rcvar=utility_enable

command=&#34;/usr/local/sbin/utility&#34;

load_rc_config $name

#
# VERANDER DE STANDAARDWAARDEN HIER NIET
# STEL ZE IN HET BESTAND /etc/rc.conf IN
#
utility_enable=${utility_enable-&#34;NO&#34;}
pidfile=${utility_pidfile-&#34;/var/run/utility.pid&#34;}

run_rc_command &#34;$1&#34;</pre></div></div><div class=paragraph><p>Dit script zorgt ervoor dat utility wordt gestart na de pseudodienst <code>DAEMON</code>. Het biedt ook de mogelijkheid voor het instellingen en volgen van het PID of het proces-ID bestand.</p></div><div class=paragraph><p>Voor deze applicatie kan dan de volgende regel in <span class=filename>/etc/rc.conf</span> geplaatst worden:</p></div><div class="literalblock programlisting"><div class=content><pre>utility_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Deze methode maakt het volgende mogelijk: makkelijker commandoregelopties manipuleren, importeren van standaardfuncties uit <span class=filename>/etc/rc.subr</span>, compatibiliteit met het gereedschap <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a> en het levert makkelijkere configuratie via <span class=filename>rc.conf</span>.</p></div></div><div class=sect2><h3 id=_diensten_met_diensten_starten>12.5.2. Diensten met diensten starten<a class=anchor href=#_diensten_met_diensten_starten></a></h3><div class=paragraph><p>Andere diensten, zoals POP3-server daemons, IMAP, enzovoort, kunnen gestart worden door gebruik te maken van <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>. Daaraan is voorafgegaan dat die dienst uit de Portscollectie is geïstalleerd en dat er een regel met instellingen is toegevoegd aan <span class=filename>/etc/inetd.conf</span> of één van de bestaande niet-actieve regels is geactiveerd. Werken met inetd en zijn instellingen wordt uitgebreid toegelicht in de paragraaf over <a href=../network-servers/#network-inetd>inetd</a>.</p></div><div class=paragraph><p>In sommige gevallen is het handiger om <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> te gebruiken om diensten te starten. Deze aanpak heeft een aantal voordelen omdat <code>cron</code> start als de eigenaar van <span class=filename>crontab</span>. Dit stelt reguliere gebruikers in staat om sommige applicaties te starten en te onderhouden.</p></div><div class=paragraph><p><code>cron</code> levert een unieke optie: in plaats van een tijdsspecificatie kan <code>@reboot</code> gebruikt worden. Dit zorgt ervoor dat de taak gestart wordt als <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> gestart wordt, meestal tijdens een systeemstart.</p></div></div></div></div><div class=sect1><h2 id=configtuning-cron>12.6. <code>cron</code> instellen<a class=anchor href=#configtuning-cron></a></h2><div class=sectionbody><div class=paragraph><p>Een zeer nuttig hulpprogramma in FreeBSD is <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>. De daemon <code>cron</code> draait op de achtergrond en controleert voortdurend <span class=filename>/etc/crontab</span>. Ook controleert <code>cron</code> de map <span class=filename>/var/cron/tabs</span>, op zoek naar nieuwe <span class=filename>crontab</span> bestanden. Deze <span class=filename>crontab</span> bestanden bevatten informatie over specifieke taken die <code>cron</code> moet verrichten op gezette tijden.</p></div><div class=paragraph><p><code>cron</code> gebruikt twee verschillende soorten instellingenbestanden: de systeemcrontab en gebruikerscrontabs. Deze formaten verschillen alleen in het zesde en verdere velden. In de systeemcrontab zal <code>cron</code> het commando draaien als de gebruiker die in het zesde veld is opgegeven. In een gebruikerscrontab draaien alle commando’s onder de gebruiker die de crontab heeft aangemaakt, dus is het zesde veld het laatste veld; dit is een belangrijk beveiligingsaspect. Het laatste veld is altijd het commando dat gedraaid wordt.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Gebruikerscrontabs geven individuele gebruikers de mogelijkheid om bepaalde terugkerende taken automatisch te laten uitvoeren zonder dat <code>root</code>-rechten noodig zijn. Commando’s in de crontab van een gebruiker worden uitgevoerd met de rechten van de eigenaar.</p></div><div class=paragraph><p><code>root</code> kan ook een gebruikerscrontab aanleggen net als elke andere gebruiker. Dit is niet dezelfde als <span class=filename>/etc/crontab</span>, de systeemcrontab. Omdat de systeemcrontab in de praktijk de commando’s als root uitvoert, is het doorgaans niet nodig om een gebruikerscrontab voor <code>root</code> te maken.</p></div></td></tr></tbody></table></div><div class=paragraph><p><span class=filename>/etc/crontab</span> (de systeemcrontab) ziet er uit als volgt:</p></div><div class="literalblock programlisting"><div class=content><pre># /etc/crontab - root&#39;s crontab for FreeBSD
#
# $FreeBSD: src/etc/crontab,v 1.32 2002/11/22 16:13:39 tom Exp $
#<i class=conum data-value=1></i><b>(1)</b>
#
SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <i class=conum data-value=2></i><b>(2)</b>
HOME=/var/log
#
#
#minuut uur     mdag    maand   wdag    wie     commando <i class=conum data-value=3></i><b>(3)</b>
#
#
*/5     *       *       *       *       root    /usr/libexec/atrun <i class=conum data-value=4></i><b>(4)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Zoals in de meeste instellingenbestanden van FreeBSD zijn regels die met het karakter <code>#</code> beginnen commentaar. Commentaar wordt gebruikt als uitleg en geheugensteun. Commentaar dient niet vermengd te worden met commando’s, anders wordt het commentaar opgevat als deel van het commando. Blanco regels worden genegeerd.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Eerst worden omgevingsvariabelen gedefiniëerd. Hoervoor wordt het is-gelijk karakter (<code>=</code>) gebruikt. In het bovenstaande voorbeeld wordt het gebruikt voor de variabelen <code>SHELL</code>, <code>PATH</code> en <code>HOME</code>. Als de regel <code>SHELL</code> ontbreekt, gebruikt <code>cron</code> standaard <code>sh</code> als shell. Voor de omgevingsvariabele <code>PATH</code> bestaat geen standaardwaarde. Als <code>PATH</code> ontbreekt moeten absolute paden gebruikt worden. Als <code>HOME</code> ontbreekt, gebruikt <code>cron</code> de thuismap van de gebruiker die <code>cron</code> aanroept.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>In deze commentaarregel staan de zeven velden van een crontabdefinitie. Dit zijn <code>minuut</code>, <code>uur</code>, <code>mdag</code>, <code>maand</code>, <code>wdag</code>, <code>wie</code> en <code>commando</code>. De betekenissen liggen voor de hand: <code>minuut</code> is het aantal minuten van het tijdstip waarop het commando moet worden uitgevoerd; <code>uur</code> geeft het uur aan; <code>mdag</code> staat voor de dag van de maand; <code>maand</code> staat voor het maandnummer en <code>wdag</code> geeft de dag van de week aan. Het veld <code>wie</code> is bijzonder en bestaat alleen in <span class=filename>/etc/crontab</span>. Het geeft aan als welke gebruiker het commando uitgevoerd moet worden. Het laatste veld bevat het uit te voeren commando.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>In deze regel worden aan de hierboven besproken opties waarden toegekend. Er wordt gebruik gemaakt van <code><strong>/5</strong></code><strong> en <code></code></strong> karakters. Deze betekenen "eerst-laatst" en kunnen gezien worden als <em>telkens</em>. In deze regel staat dus dat <code>atrun</code> elke vijf minuten moet worden uitgevoerd door <code>root</code>, ongeacht welke dag of maand het is. Meer informatie over <code>atrun</code> staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=atrun&amp;sektion=8&amp;format=html">atrun(8)</a>.Commando’s kunnen een willekeurig aantal opties of argumenten meekrijgen. Als commando’s echter meerdere regels nodig hebben moeten deze regels afgebroken worden met een backslash "\" karakter, om aan te geven dat ze op de volgende regel vervolgd worden.</td></tr></tbody></table></div><div class=paragraph><p>Dit is de basisopzet voor elk <span class=filename>crontab</span> bestand. De enige uitzondering is de aanwezigheid van veld zes, waar de gebruikersnaam wordt aangegeven. Dit veld bestaat alleen in de systeemversie van <span class=filename>/etc/crontab</span>. Voor <span class=filename>crontab</span>-bestanden van individuele gebruikers moet dit veld worden weggelaten.</p></div><div class=sect2><h3 id=configtuning-installcrontab>12.6.1. Een crontab installeren<a class=anchor href=#configtuning-installcrontab></a></h3><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>De onderstaande procedure moet niet gebruikt worden om de systeemcrontab <span class=filename>/etc/crontab</span> te wijzigen of te installeren. Er kan een gewone editor gebruikt worden. <code>cron</code> ziet dat het bestand veranderd is en begint direct met het gebruiken van de nieuwe versie. <a href=https://docs.freebsd.org/en/books/faq/#ROOT-NOT-FOUND-CRON-ERRORS>Deze FAQ vraag</a> geeft verdere uitleg.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Om een nieuwe <span class=filename>crontab</span> te installeren moet eerst een bestand in het juiste formaat gemaakt worden en daarna moet het geiuml;nstalleerd worden met commando <code>crontab</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># crontab crontabbestand</span></code></pre></div></div><div class=paragraph><p>In dit voorbeeld is <span class=filename>crontabbestand</span> de naam van een eerder gemaakt <span class=filename>crontab</span>-bestand.</p></div><div class=paragraph><p>Er bestaat ook een optie om een lijst van geïnstalleerde <span class=filename>crontab</span>-bestanden op te vragen, namelijk de optie <code>-l</code> van <code>crontab</code>.</p></div><div class=paragraph><p>Gebruikers die hun eigen crontabbestand willen schrijven zonder het gebruik van een sjabloon, kunnen gebruik maken van <code>crontab -e</code>. Dit opent de <code>EDITOR</code> met een leeg bestand. Als het bestand wordt opgeslagen en de editor wordt afgesloten, wordt het bestand automatisch als <span class=filename>crontab</span> geïnstalleerd.</p></div><div class=paragraph><p>Een gebruikers <span class=filename>crontab</span> kan verwijderd worden door de met <code>crontab</code> de optie <code>-r</code> te gebruiken.</p></div></div></div></div><div class=sect1><h2 id=configtuning-rcd>12.7. Gebruik van rc met FreeBSD<a class=anchor href=#configtuning-rcd></a></h2><div class=sectionbody><div class=paragraph><p>Sinds 2002 gebruikt FreeBSD het NetBSD <span class=filename>rc.d</span> systeem bij het opstarten van het systeem. Veel van de bestanden in <span class=filename>/etc/rc.d</span> zijn scripts voor basisdiensten die werken met de opties <code>start</code>, <code>stop</code> en <code>restart</code>, analoog aan hoe diensten die via een port of pakket zijn geïnstalleerd gestart worden met de scripts in <span class=filename>/usr/local/etc/rc.d</span>. <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> kan bijvoorbeeld als volgt herstart worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service restart</span></code></pre></div></div><div class=paragraph><p>Deze procedure is vrijwel gelijk voor andere diensten. Uiteraard worden diensten meestal automatisch tijdens het opstarten van de computer gestart zoals in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> staat. Om de Network Address Translation daemon bij het opstarten te laten starten is de volgende regel in <span class=filename>/etc/rc.conf</span> bijvoorbeeld voldoende:</p></div><div class="literalblock programlisting"><div class=content><pre>natd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Als er reeds een <code>natd_enable="NO"</code> regel is, kan <code>NO</code> gewoon in <code>YES</code> veranderd worden. De rc scripts starten, voor zover nodig, automatisch andere afhankelijke diensten.</p></div><div class=paragraph><p>Omdat het <span class=filename>rc.d</span> systeem in eerste instantie bedoeld is om diensten te starten en stoppen bij het opstarten en afsluiten van het systeem, werken de standaardopties <code>start</code>, <code>stop</code> en <code>restart</code> alleen als de juiste variabelen in <span class=filename>/etc/rc.conf</span> zijn ingesteld. Het commando <code>sshd restart</code> alleen dan als <code>sshd_enable</code> de waarde <code>YES</code> heeft in <span class=filename>/etc/rc.conf</span>. Als er een dienst gestart, gestopt of herstart moet worden, ongeacht de definities in <span class=filename>/etc/rc.conf</span>, moet het commando voorafgegaan worden door "one". Dus om <code>sshd</code> te herstarten ongeacht de instellingen in <span class=filename>/etc/rc.conf</span>, voldoet het volgende commando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd onerestart</span></code></pre></div></div><div class=paragraph><p>Het is eenvoudig te controleren of een dienst is ingeschakeld is in <span class=filename>/etc/rc.conf</span> door het bijpassende <span class=filename>rc.d</span>-script uit te voeren met de optie <code>rcvar</code>. Voor <code>sshd</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd rcvar</span>
<span class=c># sshd</span>
<span class=nv>$sshd_enable</span><span class=o>=</span>YES</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>De tweede regel (<code># sshd</code>) is de uitvoer van <code>sshd</code>, geen <code>root</code>-console.</p></div></td></tr></tbody></table></div><div class=paragraph><p>De optie <code>status</code> wordt gebruikt om vast te stellen of een dienst gestart is. Om bijvoorbeeld te controleren of <code>sshd</code> gestart is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd status</span>
sshd is running as pid 433.</code></pre></div></div><div class=paragraph><p>In sommige gevallen is het ook mogelijk om een dienst te herstarten met de optie <code>reload</code>. Dan wordt er getracht een signaal te sturen aan een individuele dienst, waarbij de dienst de bestanden met instellingen opnieuw in moet lezen. Meestal komt dit neer op het verzenden van het signaal <code>SIGHUP</code>. Deze optie wordt niet door alle diensten ondersteund.</p></div><div class=paragraph><p>Het rc.d-systeem wordt niet alleen gebruikt voor netwerkdiensten, maar ook voor het merendeel van de systeemstart. In dit kader is bijvoorbeeld het bestand <span class=filename>bgfsck</span> interessant. Als dit script wordt uitgevoerd, wordt de volgende boodschap getoond:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Starting background file system checks <span class=k>in </span>60 seconds.</code></pre></div></div><div class=paragraph><p>Dit script wordt dus gebruikt voor bestandssysteemcontrole in de achtergrond, hetgeen alleen tijdens de systeemstart gebeurt.</p></div><div class=paragraph><p>Veel systeemdiensten zijn afhankelijk van andere diensten om correct te kunnen functioneren. Zo starten NIS en andere RPC-gebaseerde diensten niet als de dienst <code>rpcbind</code> (portmapper) nog niet draait. Om dit te stroomlijnen wordt informatie over afhankelijkheden en andere metagegevens ingevoegd in het commentaar bovenaan het opstartscript. Deze commentaarregels worden vervolgens tijdens de systeemstart met <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a> verwerkt om zo vast te stellen in welke volgorde de systeemdiensten gestart moeten worden.</p></div><div class=paragraph><p>De volgende woorden moeten in alle opstartscripts staan (ze zijn benodigd door <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.subr&amp;sektion=8&amp;format=html">rc.subr(8)</a> om het opstartscript te activeren):</p></div><div class=ulist><ul><li><p><code>PROVIDE</code>: geeft aan in welke diensten dit bestand voorziet.</p></li><li><p><code>REQUIRE</code>: geeft aan welke andere diensten vereist zijn voor deze dienst. Dit script wordt uitgevoerd <em>na</em> de aangegeven diensten.</p></li><li><p><code>BEFORE</code>: geeft diensten aan die afhankelijk zijn van deze dienst. Dit bestand wordt uitgevoerd <em>vóór</em> de aangegeven diensten.</p></li></ul></div><div class=paragraph><p>Met deze methode kan een systeembeheerder gemakkelijk systeemdiensten besturen, zonder gedoe met "runlevels" zoals bij sommige andere UNIX® systemen.</p></div><div class=paragraph><p>Meer informatie over het <span class=filename>rc.d</span>-systeem staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.subr&amp;sektion=8&amp;format=html">rc.subr(8)</a>. Als u geïnteresseerd bent in het schrijven van uw eigen <span class=filename>rc.d</span>-script of om de huidige scripts te verbeteren is wellicht <a href=https://docs.freebsd.org/en/articles/rc-scripting/>dit artikel</a> interessant.</p></div></div></div><div class=sect1><h2 id=config-network-setup>12.8. Netwerkkaarten instellen<a class=anchor href=#config-network-setup></a></h2><div class=sectionbody><div class=paragraph><p>Het is tegenwoordig nauwelijks voorstelbaar dat een computer geen netwerkverbinding heeft. Het toevoegen en instellen van een netwerkkaart is een gebruikelijke taak voor een FreeBSD-beheerder.</p></div><div class=sect2><h3 id=_het_juiste_stuurprogramma_vinden>12.8.1. Het juiste stuurprogramma vinden<a class=anchor href=#_het_juiste_stuurprogramma_vinden></a></h3><div class=paragraph><p>Voor het zoeken begint, moet duidelijk zijn om welke kaart het gaat, welke chip erop zit en of het een PCI- of ISA-kaart is. FreeBSD ondersteunt vele kaarten. Op de Hardware Compatibiliteitslijst voor de betreffende uitgave staan de kaarten die ondersteund worden.</p></div><div class=paragraph><p>Als duidelijk is dat een kaart ondersteund wordt, moet vastgesteld worden wat het geschikte stuurprogramma is. In het bestand <span class=filename>/usr/src/sys/conf/NOTES</span> staat een lijst van stuurprogramma’s voor netwerkinterfaces met wat informatie over de ondersteunde chipsets of kaarten. In geval van twijfel biedt de hulppagina voor het stuurprogramma (<code>man</code>) vaak uitkomst. In het algemeen bevat deze meer informatie over de ondersteunde hardware en mogelijke problemen die kunnen optreden.</p></div><div class=paragraph><p>Als een veelgebruikte kaart gebruikt wordt, hoeft meestal niet ver gezocht te worden. Stuurprogramma’s voor veelvoorkomende netwerkinterfaces zijn al aanwezig in de algemene kernel <span class=filename>GENERIC</span>. In dat geval wordt zo’n kaart al gevonden bij het opstarten, bijvoorbeeld met het volgende bericht:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-0xd38
000ff irq 15 at device 11.0 on pci0
miibus0: &lt;MII bus&gt; on dc0
bmtphy0: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus0
bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc0: Ethernet address: 00:a0:cc:da:da:da
dc0: <span class=o>[</span>ITHREAD]
dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-0xd30
000ff irq 11 at device 12.0 on pci0
miibus1: &lt;MII bus&gt; on dc1
bmtphy1: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus1
bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc1: Ethernet address: 00:a0:cc:da:da:db
dc1: <span class=o>[</span>ITHREAD]</code></pre></div></div><div class=paragraph><p>In dit voorbeeld zitten er twee kaarten in het systeem die het stuurprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=dc&amp;sektion=4&amp;format=html">dc(4)</a> gebruiken.</p></div><div class=paragraph><p>Als het stuurprogramma voor een NIC geen onderdeel is van de kernel <span class=filename>GENERIC</span>, dan dient het juiste stuurprogramma voor die NIC geladen te worden. Dit kan op twee manieren:</p></div><div class=ulist><ul><li><p>De meest eenvoudige manier is het laden van een kernelmodule voor een netwerkkaart met <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a> of automatisch tijdens het opstarten van het systeem door de benodigde regel toe te voegen aan <span class=filename>/boot/loader.conf</span>. Niet alle NIC-stuurprogramma’s zijn als module beschikbaar. Zo zijn er bijvoorbeeld geen modules beschikbaar voor ISA-kaarten.</p></li><li><p>Ondersteuning voor een kaart kan ook in de kernel gecompileerd worden. In <span class=filename>/usr/src/sys/conf/NOTES</span>, <span class=filename>/usr/src/sys/arch/conf/NOTES</span> en de hulppagina van het stuurprogramma is na te lezen wat er in het kernelinstellingenbestand moet staan. In <a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a> staat meer informatie over het compileren van een eigen kernel. Als een netwerkkaart al bij het opstarten wordt herkend door de kernel <span class=filename>GENERIC</span>, is er geen reden om een andere kernel te bouwen.</p></li></ul></div><div class=sect3><h4 id=config-network-ndis>12.8.1.1. Gebruik maken van Windows® NDIS-stuurprogramma’s<a class=anchor href=#config-network-ndis></a></h4><div class=paragraph><p>Helaas zijn er nog steeds veel leveranciers die geen schema’s leveren voor stuurprogramma’s aan de open-source gemeenschap, omdat ze deze informatie beschouwen als handelsgeheimen. Als gevolg daarvan hebben de ontwikkelaars van FreeBSD en andere projecten twee keuzes: zelf de stuurprogramma’s ontwikkelen door een langdurig en pijnlijk proces van de huidige stuurprogramma’s te ontcijferen, of door gebruik te maken van de huidige binaire bestanden voor het Microsoft® Windows® platform. De meeste ontwikkelaars, inclusief diegeen die gekoppeld zijn aan FreeBSD, hebben voor het laatste gekozen.</p></div><div class=paragraph><p>Dankzij de bijdragen van Bill Paul (wpaul) is er "native" ondersteuning voor de Network Driver Interface Specification (NDIS). De FreeBSD NDISulator (ook wel bekend als Project Evil) neemt een binair Windows® stuurprogramma en doet net alsof deze in een Windows® systeem draait. Omdat het stuurprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=ndis&amp;sektion=4&amp;format=html">ndis(4)</a> een Windows® binary gebruikt; draait het alleen op i386™- en amd64-systemen. PCI, CardBus, PCMCIA (PC-Card) en USB-apparaten worden ondersteund.</p></div><div class=paragraph><p>Om de NDISulator te gebruiken zijn drie dingen nodig:</p></div><div class="olist arabic"><ol class=arabic><li><p>De bronbestanden van de kernel</p></li><li><p>Een Windows® XP stuurprogramma (met de extensie <span class=filename>.SYS</span>)</p></li><li><p>Een instellingenbestand van het Windows® XP stuurprogramma (met de extensie <span class=filename>.INF</span>)</p></li></ol></div><div class=paragraph><p>Lokaliseer de bestanden voor uw specifieke kaart. Over het algemeen kunnen deze gevonden worden op de bijgeleverde CD’s of op de website van de leverancier. In de volgende voorbeelden maken we gebruik van <span class=filename>W32DRIVER.SYS</span> en <span class=filename>W32DRIVER.INF</span>.</p></div><div class=paragraph><p>De bit-breedte van het stuurprogramma moet overeenkomen met die van het stuurprogramma. Gebruik voor FreeBSD/i386 een 32-bits Windows® stuurprogramma. Voor FreeBSD/amd64 is een 64-bits Windows® stuurprogramma nodig.</p></div><div class=paragraph><p>De volgende stap is het compileren van het binaire stuurprogramma in een laadbare kernelmodule. Gebruik <a href="https://man.freebsd.org/cgi/man.cgi?query=ndisgen&amp;sektion=8&amp;format=html">ndisgen(8)</a> als <code>root</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ndisgen /pad/naar/W32DRIVER.INF</span>
/pad/naar/W32DRIVER.SYS</code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ndisgen&amp;sektion=8&amp;format=html">ndisgen(8)</a> is interactief en vraagt om extra informatie als het dat nodig heeft. Een nieuwe kernel-module wordt in de huidige map geschreven. Gebruik <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a> om de nieuwe module te laden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload ./W32DRIVER_SYS.ko</span></code></pre></div></div><div class=paragraph><p>Naast de gegenereerde kernelmodule, moeten ook de modules <span class=filename>ndis.ko</span> en <span class=filename>if_ndis.ko</span> geladen worden. Dit zou automatisch moeten gebeuren als er een module geladen wordt dit afhankelijk is van <a href="https://man.freebsd.org/cgi/man.cgi?query=ndis&amp;sektion=4&amp;format=html">ndis(4)</a>. Als ze handmatig ingeladen moeten worden gebruik dan de volgende commando’s:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload ndis</span>
<span class=c># kldload if_ndis</span></code></pre></div></div><div class=paragraph><p>Het eerste commando laadt de stuurprogrammawrapper voor de NDIS miniport, de tweede laadt de daadwerkelijke netwerkinterface.</p></div><div class=paragraph><p>Controleer nu <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a> om te zien of er ergens fouten voorkomen. Als alles goed gegaan is ziet u ongeveer het volgende:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
ndis0: NDIS API version: 5.0
ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</code></pre></div></div><div class=paragraph><p>Vanaf dit moment kan de <span class=filename>ndis0</span> net zo gebruikt worden als elke andere netwerkkaart (bv. <span class=filename>dc0</span>).</p></div><div class=paragraph><p>Het systeem kan geconfigureerd worden zodat de NDIS-modules automatisch gestart worden tijdens het opstarten van het systeem, net zoals bij andere modules. Kopieer eerst de gegenereerde module <span class=filename>W32DRIVER_SYS.ko</span> naar de map <span class=filename>/boot/modules</span>. Voeg daarna de volgende regel toe aan <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>W32DRIVER_SYS_load=&#34;YES&#34;</pre></div></div></div></div><div class=sect2><h3 id=_de_netwerkkaart_instellen>12.8.2. De netwerkkaart instellen<a class=anchor href=#_de_netwerkkaart_instellen></a></h3><div class=paragraph><p>Nadat een geschikt stuurprogramma geladen is, moet de kaart nog ingesteld worden. Mogelijk is dit al gebeurd door sysinstall tijdens de installatie.</p></div><div class=paragraph><p>Om de instellen van de netwerkkaarten weer te geven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ifconfig
dc0: <span class=nv>flags</span><span class=o>=</span>8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:da
        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect <span class=o>(</span>100baseTX &lt;full-duplex&gt;<span class=o>)</span>
        status: active
dc1: <span class=nv>flags</span><span class=o>=</span>8802&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:db
        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255
        media: Ethernet 10baseT/UTP
        status: no carrier
lo0: <span class=nv>flags</span><span class=o>=</span>8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        <span class=nv>options</span><span class=o>=</span>3&lt;RXCSUM,TXCSUM&gt;
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4
        inet6 ::1 prefixlen 128
        nd6 <span class=nv>options</span><span class=o>=</span>3&lt;PERFORMNUD,ACCEPT_RTADV&gt;</code></pre></div></div><div class=paragraph><p>In dit voorbeeld werden de volgende apparaten weergegeven:</p></div><div class=ulist><ul><li><p><span class=filename>dc0</span>: de eerste Ethernet-interface;</p></li><li><p><span class=filename>dc1</span>: de tweede Ethernet-interface;</p></li><li><p><span class=filename>lo0</span>: het loopback-apparaat;</p></li></ul></div><div class=paragraph><p>FreeBSD gebruikt de naam van het stuurprogramma gevolgd door een nummer voor de volgorde waarop de kaarten gedetecteerd zijn bij het opstarten. <span class=filename>sis2</span> is de derde netwerkkaart in het systeem die het stuurprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=sis&amp;sektion=4&amp;format=html">sis(4)</a> gebruikt.</p></div><div class=paragraph><p>In het vorige voorbeeld is het apparaat <span class=filename>dc0</span> volledig operationeel. Dit blijkt uit de volgende indicatoren:</p></div><div class="olist arabic"><ol class=arabic><li><p><code>UP</code> betekent dat de kaart ingesteld is en klaar is voor gebruik;</p></li><li><p>De kaart heeft een Internet (<code>inet</code>) adres (in dit geval <code>192.168.1.3</code>);</p></li><li><p>Het heeft een geldig subnetmasker (<code>netmask</code>; <code>0xffffff00</code> is hetzelfde als <code>255.255.255.0</code>);</p></li><li><p>Het heeft een geldig broadcastadres (in dit geval <code>192.168.1.255</code>);</p></li><li><p>Het MAC-adres van de kaart (<code>ether</code>) is <code>00:a0:cc:da:da:da</code>;</p></li><li><p>De fysieke mediaselectie staat in autoselectiemodus (<code>media: Ethernet autoselect (100baseTX full-duplex)</code>). <span class=filename>dc1</span> is ingesteld om met <code>10baseT/UTP</code>-media te werken. Meer informatie over de mogelijke mediatypes staan in de hulppagina’s voor het betreffende stuurprogramma.</p></li><li><p>De status van de verbinding (<code>status</code>) is <code>active</code>, dat wil zeggen dat de drager is gevonden. Bij <span class=filename>dc1</span> staat echter <code>status: no carrier</code>. Dit is normaal als er geen Ethernetkabel in de kaart gestoken is.</p></li></ol></div><div class=paragraph><p>Als de uitvoer <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> er ongeveer zoals hieronder uitziet, dan is de netwerkkaart nog niet ingesteld:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>dc0: <span class=nv>flags</span><span class=o>=</span>8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        <span class=nv>options</span><span class=o>=</span>80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:da
        media: Ethernet autoselect <span class=o>(</span>100baseTX &lt;full-duplex&gt;<span class=o>)</span>
        status: active</code></pre></div></div><div class=paragraph><p>Om de kaart in te stellen zijn <code>root</code>-rechten nodig. De netwerkkaart kan vanaf de console worden ingesteld met <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a>, maar dan moet dat na elke herstart herhaald worden. Daarom wordt het vrijwel altijd in <span class=filename>/etc/rc.conf</span> gezet.</p></div><div class=paragraph><p>In <span class=filename>/etc/rc.conf</span> moet voor elke netwerkkaart in een systeem een regel toegevoegd worden. In het huidige voorbeeld zou dat het volgende kunnen zijn:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_dc0=&#34;inet 192.168.1.3 netmask 255.255.255.0&#34;
ifconfig_dc1=&#34;inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP&#34;</pre></div></div><div class=paragraph><p><span class=filename>dc0</span>, <span class=filename>dc1</span>, enzovoort, moeten vervangen worden door de correcte stuurprogramma’s voor de netwerkkaarten, zo ook de IP-adressen. In de handleiding van het stuurprogramma en van <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> staan meer details over de mogelijke opties en in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> staat meer informatie over <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>Als het netwerk al is ingesteld tijdens het installeren van FreeBSD staan er al enkele regels met betrekking tot de netwerkkaart(en) in <span class=filename>/etc/rc.conf</span>. Het is dus handig <span class=filename>/etc/rc.conf</span> te controleren voordat er regels toegevoegd worden.</p></div><div class=paragraph><p>Ook <span class=filename>/etc/hosts</span> moet worden gewijzigd om de namen en IP adressen van verschillende machines op het lokale netwerk, als ze er nog niet in staan. Meer informatie staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> en <span class=filename>/usr/shared/examples/etc/hosts</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als internettoegang nodig is met dit apparaat, kan het zijn dat de default gateway en de naamserver handmatig moeten worden ingesteld:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#39;defaultrouter=&#34;your_default_router&#34;&#39; &gt;&gt; /etc/rc.conf</span>
<span class=c># echo &#39;nameserver your_DNS_server&#39; &gt;&gt; /etc/resolv.conf</span></code></pre></div></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_testen_en_problemen_oplossen>12.8.3. Testen en problemen oplossen<a class=anchor href=#_testen_en_problemen_oplossen></a></h3><div class=paragraph><p>Als de veranderingen in <span class=filename>/etc/rc.conf</span> zijn gemaakt, moet het systeem opnieuw gestarten worden (of moeten nauwkeurig alle daemons gestart of herstart worden). Veranderingen aan de interface(s) worden dan toegepast en dan kan er controleerd worden of herstarten goed werkt zonder foutmeldingen. Als alternatief kan ook het netwerk systeem herstart worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service netif restart</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als er ook een default gateway ingesteld is in het <span class=filename>/etc/rc.conf</span> bestand, moet ook onderstaand command worden gegeven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service routing restart</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Zodra het netwerk systeem is herstart, moeten de netwerk interfaces opnieuw getest worden.</p></div><div class=sect3><h4 id=_testen_van_de_netwerkkaart>12.8.3.1. Testen van de netwerkkaart<a class=anchor href=#_testen_van_de_netwerkkaart></a></h4><div class=paragraph><p>Om te controleren of een ethernet kaart goed geconfigureerd is, moeten er twee dingen gedaan worden. Allereerst, ping de interface zelf, en daarna een andere machine op het LAN.</p></div><div class=paragraph><p>Test eerst de lokale interface:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ping <span class=nt>-c5</span> 192.168.1.3
PING 192.168.1.3 <span class=o>(</span>192.168.1.3<span class=o>)</span>: 56 data bytes
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>0 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.082 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>1 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.074 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>2 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.076 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>3 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.108 ms
64 bytes from 192.168.1.3: <span class=nv>icmp_seq</span><span class=o>=</span>4 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.076 ms

<span class=nt>---</span> 192.168.1.3 ping statistics <span class=nt>---</span>
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev <span class=o>=</span> 0.074/0.083/0.108/0.013 ms</code></pre></div></div><div class=paragraph><p>Nu kan er een andere machine op het LAN gepinged worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ping <span class=nt>-c5</span> 192.168.1.2
PING 192.168.1.2 <span class=o>(</span>192.168.1.2<span class=o>)</span>: 56 data bytes
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>0 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.726 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>1 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.766 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>2 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.700 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>3 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.747 ms
64 bytes from 192.168.1.2: <span class=nv>icmp_seq</span><span class=o>=</span>4 <span class=nv>ttl</span><span class=o>=</span>64 <span class=nb>time</span><span class=o>=</span>0.704 ms

<span class=nt>---</span> 192.168.1.2 ping statistics <span class=nt>---</span>
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev <span class=o>=</span> 0.700/0.729/0.766/0.025 ms</code></pre></div></div><div class=paragraph><p>Dit kan ook worden geprobeerd met de machine naam in plaats van met <code>192.168.1.2</code> als dit geconfigureerd is in <span class=filename>/etc/hosts</span>.</p></div></div><div class=sect3><h4 id=_problemen_oplossen>12.8.3.2. Problemen oplossen<a class=anchor href=#_problemen_oplossen></a></h4><div class=paragraph><p>Het testen en zoeken van problemen is altijd een pijnpunt, welke verminderd kan worden door een aantal simpele dingen eerst te controleren. Is de netwerkkabel ingestoken? Zijn de netwerk instellingen correct opgegeven? Is de firewall goed geconfigureerd? Is de netwerkkaart ondersteund door FreeBSD? Controleer altijd de hardware notities voordat er een probleem rapport wordt verstuurd. Update naar de laatste -STABLE versie, en controleer de mailing lijsten en misschien zelfs het internet.</p></div><div class=paragraph><p>Als de kaart werkt, maar de prestaties zijn slecht, dan kan het de moeite waard zijn om <a href="https://man.freebsd.org/cgi/man.cgi?query=tuning&amp;sektion=7&amp;format=html">tuning(7)</a> door te nemen. Incorrecte netwerkinstellingen kunnen ook tot langzame verbindingen leiden.</p></div><div class=paragraph><p>Soms kunnen enkele <code>device timeouts</code> optreden. Met sommige kaarten is dit normaal gedrag. Maar als dit continu gebeurt of storend is, is het verstandig uit te zoeken of er geen sprake is van een hardwareconfict tussen de netwerkkaart en een ander apparaat. Ook dient nogmaals de bekabeling gecontroleerd te worden. Misschien zit er niets anders op dan een andere netwerkkaart te gebruiken.</p></div><div class=paragraph><p>Het is ook mogelijk dat er <code>watchdog timeout</code> foutmeldingen optreden. Als eerste moet dan de netwerkkabel gecontroleerd worden. Veel kaarten hebben een PCI-slot nodig dat Bus Mastering ondersteunt. Sommige oudere moederborden hebben maar één PCI-slot waarmee dit kan (meestal slot 0). In de documentatie van de netwerkkaart en het moederbord is na te gaan of dit het probleem is.</p></div><div class=paragraph><p><code>No route to host</code> meldingen treden op als het systeem niet in staat is om een pakket naar de eindbestemming te routeren. Dit kan gebeuren als er geen standaardroute aangegeven is of als er een kabel niet verbonden is. De uitvoer van <code>netstat -rn</code> moet gecontroleerd worden of er een geldige route is naar de bestemming. Mocht dit niet het geval zijn, dan staat er meer informatie in <a href=../advanced-networking/#advanced-networking>Netwerken voor gevorderden</a>.</p></div><div class=paragraph><p><code>ping: sendto: Permission denied</code> foutmeldingen worden vaak veroorzaakt door een verkeerd ingestelde firewall. Als de kernel <code>ipfw</code> activeert bij het opstarten zonder dat er firewallregels zijn gedefiniëerd, is het standaardbeleid om alle verkeer te weigeren, zelfs pings! In <a href=../firewalls/#firewalls>Firewalls</a> staat meer informatie.</p></div><div class=paragraph><p>Er kan ook sprake zijn van onvoldoende prestaties doordat de instelling van de mediaselectie niet optimaal is. In dergelijke gevallen is het mogelijk om de mediaselectie niet als <code>autoselect</code> in te stellen, maar expliciet aan te geven wat de mediaselectie moet zijn, bijvoorbeeld 10baseT/UTP voor twisted pair. Hoewel dit voor de meeste hardware helpt, kan het zijn dat de problemen blijven. Dan moeten nogmaals de netwerkinstellingen gecontroleerd worden en geeft de <a href="https://man.freebsd.org/cgi/man.cgi?query=tuning&amp;sektion=7&amp;format=html">tuning(7)</a> handleiding wellicht meer informatie.</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-virtual-hosts>12.9. Virtuele hosts<a class=anchor href=#configtuning-virtual-hosts></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD wordt veel gebruikt voor virtuele sitehosting, waarbij één fysieke server er op het netwerk uitziet alsof het meerdere servers zijn. Dit kan bereikt worden door meerdere IP-adressen toe te kennen aan dezelfde interface.</p></div><div class=paragraph><p>Een bepaalde netwerkinterface heeft een "echt" adres en kan daarnaast een willekeurig aantal "alias"-adressen hebben. Normaliter worden dergelijke aliassen toegevoegd door aliasregels toe te voegen aan <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>Een aliasregel voor de interface <span class=filename>fxp0</span> ziet er zo uit:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0_alias0=&#34;inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx&#34;</pre></div></div><div class=paragraph><p>De aliasregels moeten beginnen met <code>alias0</code> en moete elkaar dan opvolgen (bijvoorbeeld <code>_alias1,</code>, <code>_alias2</code>, enzovoort). Het instelproces stopt als er een nummer ontbreekt.</p></div><div class=paragraph><p>Het is belangrijk dat aliassen het juiste netmasker hebben. Dit is eenvoudig: Een bepaalde interface moet altijd één adres hebben dat het netmasker van het netwerk correct representeert. Elk ander adres binnen dit netwerk op deze interface (alias) moet een netmasker van allemaal <code>1</code>'en (bits) hebben (getoond als <code>255.255.255.255</code> of <code>0xffffffff</code>).</p></div><div class=paragraph><p>Een voorbeeld. Stel de interface <span class=filename>fxp0</span> is verbonden met twee netwerken, het netwerk <code>10.1.1.0</code> met masker <code>255.255.255.0</code> en het netwerk <code>202.0.75.16</code> met netmasker <code>255.255.255.240</code>. Het systeem moet ook de adressen <code>10.1.1.1</code> tot en met <code>10.1.1.5</code> en <code>202.0.75.17</code> tot en met <code>202.0.75.20</code> krijgen. Zoals hierboven vermeld, heeft alleen het eerste adres in een netwerkreeks (in dit geval <code>10.0.1.1</code> en <code>202.0.75.17</code>) een geldig netmasker. Alle overige (<code>10.1.1.2</code> tot en met <code>10.1.1.5</code> en <code>202.0.75.18</code> tot en met <code>202.0.75.20</code>) moeten ingesteld worden met het netmasker <code>255.255.255.255</code>.</p></div><div class=paragraph><p>De volgende regels voor <span class=filename>/etc/rc.conf</span> stellen een adapter in voor het bovenstaande scenario:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0=&#34;inet 10.1.1.1 netmask 255.255.255.0&#34;
ifconfig_fxp0_alias0=&#34;inet 10.1.1.2 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias1=&#34;inet 10.1.1.3 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias2=&#34;inet 10.1.1.4 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias3=&#34;inet 10.1.1.5 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias4=&#34;inet 202.0.75.17 netmask 255.255.255.240&#34;
ifconfig_fxp0_alias5=&#34;inet 202.0.75.18 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias6=&#34;inet 202.0.75.19 netmask 255.255.255.255&#34;
ifconfig_fxp0_alias7=&#34;inet 202.0.75.20 netmask 255.255.255.255&#34;</pre></div></div></div></div><div class=sect1><h2 id=configtuning-syslog>12.10. De systeemlogger syslogd configureren<a class=anchor href=#configtuning-syslog></a></h2><div class=sectionbody><div class=paragraph><p>Systeemlogging is een belangrijk aspect van systeembeheer. Het wordt zowel gebruikt voor het opsporen van hardware-problemen als voor software-problemen in het systeem. Het speelt ook zeer belangrijke rol bij het controleren van de beveiliging en het reageren op incidenten. Systeem-daemons die niet in een terminal beheerd worden, loggen gewoonlijk informatie naar een systeemlogfaciliteit of een ander logbestand.</p></div><div class=paragraph><p>Deze sectie beschrijft hoe de FreeBSD systeemlogger, <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a>, te configureren en te gebruiken, en behandelt logrotatie en logbeheer met <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a>. De focus ligt bij het opzetten en gebruiken van <code>syslogd</code> op een lokale machine. Meer geavanceerdere opstellingen die een aparte loghost gebruiken staan in <a href=../network-servers/#network-syslogd>Hosts op afstand loggen met syslogd</a>.</p></div><div class=sect2><h3 id=_syslogd_gebruiken>12.10.1. syslogd gebruiken<a class=anchor href=#_syslogd_gebruiken></a></h3><div class=paragraph><p>In de standaardconfiguratie van FreeBSD wordt <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> gestart tijdens het opstarten. Dit wordt bepaald door de variabele <code>syslogd_enable</code> in <span class=filename>/etc/rc.conf</span>. Er zijn vele toepassingsargumenten die het gedrag van <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> beïnvloeden. Gebruik <code>syslogd_flags</code> in <span class=filename>/etc/rc.conf</span> om ze te veranderen. Bekijk <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> voor meer informatie over de argumenten, en <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>, <a href=#configtuning-core-configuration>Hoofdinstellingen</a> en <a href=#configtuning-rcd>Gebruik van rc met FreeBSD</a> voor meer informatie over <span class=filename>/etc/rc.conf</span> en het deelsysteem <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>.</p></div></div><div class=sect2><h3 id=_syslogd_configureren>12.10.2. syslogd configureren<a class=anchor href=#_syslogd_configureren></a></h3><div class=paragraph><p>Het configuratiebestand, standaard <span class=filename>/etc/syslog.conf</span>, bepaalt wat <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> doet met de logregels nadat ze eenmaal ontvangen zijn. Er zijn verschillende parameters om de afhandeling van binnenkomende gebeurtenissen te beheren, waarvan de twee basaalste <em>faciliteit</em> en <em>niveau</em> zijn. De faciliteit beschrijft welk deelsysteem het bericht genereerde, zoals de kernel of een daemon, het niveau beschrijft de ernst van de opgetreden gebeurtenis. Dit maakt het mogelijk om het bericht naar verschillende logbestanden te loggen, of het weg te gooien, afhankelijk van de faciliteit en het niveau. Het is ook mogelijk om actie te nemen afhankelijk van de toepassing dat het bericht verstuurde, en in het geval van loggen op afstand, ook de hostnaam van de machine dat het logbericht genereerde.</p></div><div class=paragraph><p>Het configureren van <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> is vrij rechttoe-rechtaan. Het configuratiebestand bevat één regel per actie, de syntaxis van elke regel is een selecteerderveld gevolgd door een actieveld. De syntaxis van het selecteerderveld is <em>faciliteit.niveau</em> dat overeenkomt met logberichten van <em>faciliteit</em> op niveau <em>niveau</em> of hoger. Het is ook mogelijk om een optionele vergelijkingsvlag voor het niveau toe te voegen om meer precies te specificeren wat er gelogd wordt. Er kunnen meerdere selecteerdervelden worden gebruikt voor dezelfde actie, ze worden gescheiden door een puntkomma (<code>;</code>). Het gebruik van <code>*</code> zal met alles overeenkomen. Het actieveld bepaalt waar het logbericht naar toe wordt gezonden, zoals een bestand of een loghost op afstand. Als voorbeeld is hier de standaard <span class=filename>syslog.conf</span> van FreeBSD:</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$
#
#       Spaces ARE valid field separators in this file. However,
#       other *nix-like systems still insist on using tabs as field
#       separators. If you are sharing this file between systems, you
#       may want to use only tabs as field separators here.
#       Consult the man:syslog.conf[5] manpage.
*.err;kern.warning;auth.notice;mail.crit                /dev/console <i class=conum data-value=1></i><b>(1)</b>
*.notice;authpriv.none;kern.debug;lpr.info;mail.crit;news.err   /var/log/messages
security.*                                      /var/log/security
auth.info;authpriv.info                         /var/log/auth.log
mail.info                                       /var/log/maillog <i class=conum data-value=2></i><b>(2)</b>
lpr.info                                        /var/log/lpd-errs
ftp.info                                        /var/log/xferlog
cron.*                                          /var/log/cron
*.=debug                                        /var/log/debug.log <i class=conum data-value=3></i><b>(3)</b>
*.emerg                                         *
# uncomment this to log all writes to /dev/console to /var/log/console.log
#console.info                                   /var/log/console.log
# uncomment this to enable logging of all log messages to /var/log/all.log
# touch /var/log/all.log and chmod it to mode 600 before it will work
#*.*                                            /var/log/all.log
# uncomment this to enable logging to a remote loghost named loghost
#*.*                                            @loghost
# uncomment these if you&#39;re running inn
# news.crit                                     /var/log/news/news.crit
# news.err                                      /var/log/news/news.err
# news.notice                                   /var/log/news/news.notice
!ppp <i class=conum data-value=4></i><b>(4)</b>
*.*                                             /var/log/ppp.log
!*</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Komt overeen met alle berichten met een <code>err</code> of hoger, alsook met <code>kern.warning</code>, <code>auth.notice</code> en <code>mail.crit</code>, en stuur deze logberichten naar de console ( <span class=filename>/dev/console</span>).</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Komt overeen met alle berichten van de faciliteit <code>mail</code> op niveau <code>info</code> of hoger, en logt de berichten in <span class=filename>/var/log/maillog</span>.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Deze regel gebruikt een vergelijkingsvlag, <code>=</code> om alleen met de berichten op niveau <code>debug</code> overeen te komen en ze op te slaan in <span class=filename>/var/log/debug.log</span>.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Hier volgt een gebruiksvoorbeeld van een <em>programmaspecificatie</em>. Dit zorgt ervoor dat de regels alleen geldig zijn voor het programma in de programmaspecificatie. In dit geval zorgen deze en de volgende regel ervoor dat alle berichten van <code>ppp</code>, maar niet van andere programma’s, in <span class=filename>/var/log/ppp.log</span> terechtkomen.</td></tr></tbody></table></div><div class=paragraph><p>Dit voorbeeld toont dat er vele niveaus en deelsystemen zijn. De niveaus zijn, in volgorde van meest naar minst kritisch: <code>emerg</code>, <code>alert</code>, <code>crit</code>, <code>err</code>, <code>warning</code>, <code>notice</code>, <code>info</code> en <code>debug</code>.</p></div><div class=paragraph><p>De faciliteiten zijn, in geen specifieke volgorde: <code>auth</code>, <code>authpriv</code>, <code>console</code>, <code>cron</code>, <code>daemon</code>, <code>ftp</code>, <code>kern</code>, <code>lpr</code>, <code>mail</code>, <code>mark</code>, <code>news</code>, <code>security</code>, <code>syslog</code>, <code>user</code>, <code>uucp</code> en <code>local0</code> tot en met <code>local7</code>. Let erop dat andere besturingssystemen andere faciliteiten kunnen hebben.</p></div><div class=paragraph><p>Met deze kennis is het eenvoudig om een nieuwe regel aan <span class=filename>/etc/syslog.conf</span> toe te voegen om alles van de verschillende daemons op niveau <code>notice</code> en hoger naar <span class=filename>/var/log/daemon.log</span> te loggen:</p></div><div class="literalblock programlisting"><div class=content><pre>daemon.notice                                        /var/log/daemon.log</pre></div></div><div class=paragraph><p>Bekijk <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> voor meer informatie over de verschillende niveaus en faciliteiten. Zie <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a> en <a href=../network-servers/#network-syslogd>Hosts op afstand loggen met syslogd</a> voor meer informatie over <span class=filename>syslog.conf</span>, de syntaxis, en geavanceerdere gebruiksvoorbeelden.</p></div></div><div class=sect2><h3 id=_logbeheer_en_rotatie_met_newsyslog>12.10.3. Logbeheer en -rotatie met newsyslog<a class=anchor href=#_logbeheer_en_rotatie_met_newsyslog></a></h3><div class=paragraph><p>Logbestanden hebben de neiging om snel te groeien en gestadig opgehoopt te raken. Dit leidt tot bestanden die vol zitten met minder direct bruikbare informatie en de harde schijf volmaken. Logbeheer kan gebruikt worden om dit te beheersen. In FreeBSD wordt <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> gebruikt om logbestanden te beheren. Dit programma wordt gebruikt om periodiek logbestanden te roteren en te comprimeren en om optioneel ontbrekende logbestanden aan te maken en programma’s te signaleren dat logbestanden zijn verplaatst. De logbestanden hoeven niet per sé van syslog afkomstig te zijn; <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> werkt met elke log van elk programma. Het is belangrijk om op te merken dat <code>newsyslog</code> normaliter vanuit <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> wordt gedraaid en niet een systeem-daemon is. In de standaardconfiguratie wordt het elk uur gedraaid.</p></div><div class=sect3><h4 id=_newsyslog_configureren>12.10.3.1. newsyslog configureren<a class=anchor href=#_newsyslog_configureren></a></h4><div class=paragraph><p>Om te weten wat het moet doen leest <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> zijn configuratiebestand, standaard is dit <span class=filename>/etc/newsyslog.conf</span>. Dit configuratiebestand bevat één regel voor elk bestand dat <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> beheert. Elke regel noemt de eigenaar van het bestand, rechten, en wanneer dat bestand te roteren, alsook optionele vlaggen die de logrotatie beïnvloeden (zoals compressie) en naar welke programma’s een signaal te sturen wanner de log is geroteerd. Als voorbeeld is hier de standaard configuratie in FreeBSD:</p></div><div class="literalblock programlisting"><div class=content><pre># configuration file for newsyslog
# $FreeBSD$
#
# Entries which do not specify the &#39;/pid_file&#39; field will cause the
# syslogd process to be signalled when that log file is rotated.  This
# action is only appropriate for log files which are written to by the
# syslogd process (ie, files listed in /etc/syslog.conf).  If there
# is no process which needs to be signalled when a given log file is
# rotated, then the entry for that file should include the &#39;N&#39; flag.
#
# The &#39;flags&#39; field is one or more of the letters: BCDGJNUXZ or a &#39;-&#39;.
#
# Note: some sites will want to select more restrictive protections than the
# defaults.  In particular, it may be desirable to switch many of the 644
# entries to 640 or 600.  For example, some sites will consider the
# contents of maillog, messages, and lpd-errs to be confidential.  In the
# future, these defaults may change to more conservative ones.
#
# logfilename          [owner:group]    mode count size when  flags [/pid_file] [sig_num]
/var/log/all.log                        600  7     *    @T00  J
/var/log/amd.log                        644  7     100  *     J
/var/log/auth.log                       600  7     100  @0101T JC
/var/log/console.log                    600  5     100  *     J
/var/log/cron                           600  3     100  *     JC
/var/log/daily.log                      640  7     *    @T00  JN
/var/log/debug.log                      600  7     100  *     JC
/var/log/init.log                       644  3     100  *     J
/var/log/kerberos.log                   600  7     100  *     J
/var/log/lpd-errs                       644  7     100  *     JC
/var/log/maillog                        640  7     *    @T00  JC
/var/log/messages                       644  5     100  @0101T JC
/var/log/monthly.log                    640  12    *    $M1D0 JN
/var/log/pflog                          600  3     100  *     JB    /var/run/pflogd.pid
/var/log/ppp.log        root:network    640  3     100  *     JC
/var/log/security                       600  10    100  *     JC
/var/log/sendmail.st                    640  10    *    168   B
/var/log/utx.log                        644  3     *    @01T05 B
/var/log/weekly.log                     640  5     1    $W6D0 JN
/var/log/xferlog                        600  7     100  *     JC</pre></div></div><div class=paragraph><p>Elke regel begint met de naam van het bestand dat geroteerd moet worden, optioneel gevolgd door een eigenaar en groep voor zowel de geroteerde als nieuw aangemaakte bestanden. Het volgende veld, <code>mode</code> is de modus van de bestanden en <code>count</code> geeft aan hoeveel geroteerde logbestanden bewaard moeten worden. De velden <code>size</code> en <code>when</code> vertellen <code>newyslog</code> wanneer het bestand geroteerd moet worden. Een logbestand wordt geroteerd wanneer òfwel de grootte meer is dan de waarde in het veld <code>size</code>, òfwel wanneer de tijd in het veld <code>when</code> is verstreken. <code>*</code> geeft aan dat dit veld genegeerd wordt. Het veld <em>flags</em> geeft <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> verdere instructies, zoals hoe het geroteerde bestand te comprimeren of om het logbestand aan te maken als het ontbreekt. De laatste twee velden zijn optioneel en specificeren het PID-bestand van een proces en een naar dat proces te verzenden signaalnummer wanneer het bestand wordt geroteerd. Raadpleeg <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog.conf&amp;sektion=5&amp;format=html">newsyslog.conf(5)</a> voor meer informatie over alle velden, geldige vlaggen en hoe de rotatietijd te specificeren. Herinner dat <code>newsyslog</code> wordt gedraaid vanuit <code>cron</code> en niet vaker bestanden kan roteren dan dat het gedraaid wordt vanuit <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>.</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-configfiles>12.11. Instellingenbestanden<a class=anchor href=#configtuning-configfiles></a></h2><div class=sectionbody><div class=sect2><h3 id=_etc_layout>12.11.1. <span class=filename>/etc</span> layout<a class=anchor href=#_etc_layout></a></h3><div class=paragraph><p>Instellingengegevens wordt in een aantal mappen bewaard. Daar zijn onder andere:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Generieke systeeminstellingenbestanden, specifiek voor het systeem.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/defaults</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>De standaardversies van systeeminstellingenbestanden.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extra <a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a> instellingenbestanden of instellingenbestanden voor andere MTAs.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/ppp</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Instellingen voor zowel gebruiker- als kernel-ppp programma’s.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Standaardlocatie voor <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> gegevens. Normaal gesproken bevinden zich hier <span class=filename>named.conf</span> en zonebestanden.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/local/etc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Instellingenbestanden voor geïnstalleerde software. Kan submappen hebben waarin bij elkaar horende instellingengegevens van een applicatie gegroepeerd zijn.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/local/etc/rc.d</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Start- en stopscripts voor geïnstalleerde diensten.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/var/db</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Automatisch gemaakte systeemspecifieke databasebestanden, zoals de pakketdatabase, de <a href="https://man.freebsd.org/cgi/man.cgi?query=locate&amp;sektion=1&amp;format=html">locate(1)</a> database, enzovoort.</p></td></tr></tbody></table></div><div class=sect2><h3 id=_hostnamen>12.11.2. Hostnamen<a class=anchor href=#_hostnamen></a></h3><div class=sect3><h4 id=_etcresolv_conf>12.11.2.1. <span class=filename>/etc/resolv.conf</span><a class=anchor href=#_etcresolv_conf></a></h4><div class=paragraph><p>In <span class=filename>/etc/resolv.conf</span> wordt voorgeschreven op welke wijze FreeBSD het Domain Name System (DNS) moet gebruiken.</p></div><div class=paragraph><p>De meest voorkomende termen in <span class=filename>resolv.conf</span> zijn:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>nameserver</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Het IP-adres van een naamserver die ondervraagd moet worden voor naam/IP-conversie. De servers worden in volgorde geprobeerd en het maximale aantal is drie.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>search</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Zoeklijst voor het opzoeken van hostnamen. Meestal wordt deze bepaald door het domein waarop de lokale hostnaam zich bevindt.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>domain</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>De lokale domeinnaam.</p></td></tr></tbody></table><div class=paragraph><p>Een typisch <span class=filename>resolv.conf</span> bestand:</p></div><div class="literalblock programlisting"><div class=content><pre>search example.com
nameserver 147.11.1.11
nameserver 147.11.100.30</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>search</code> en <code>domain</code> dienen niet tegelijk gebruikt te worden.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Als DHCP wordt gebruikt: <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a> overschrijft meestal <span class=filename>resolv.conf</span> met informatie ontvangen van de DHCP-server.</p></div></div><div class=sect3><h4 id=_etchosts>12.11.2.2. <span class=filename>/etc/hosts</span><a class=anchor href=#_etchosts></a></h4><div class=paragraph><p><span class=filename>/etc/hosts</span> is een eenvoudige tekstdatabase uit de dagen van het oude Internet. Het werkt samen met DNS en NIS om namen en IP adressen over en weer te vertalen. Lokale computers, verbonden via een LAN, kunnen hier het beste in opgenomen worden om zo op simpele wijze naam/IP conversie voor een LAN te hebben, zonder noodzaak voor een <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> server. Ook kunnen naamaliassen toegekend worden (vergelijkbaar met CNAMES bij DNS). Op soortgelijke wijze kan <span class=filename>/etc/hosts</span> gebruikt worden als een (zeer beperkte) lokale DNS cache.</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$
#
# Host Database
# Dit bestand hoort de adressen en aliassen te bevatten
# voor de lokale hosts die dit bestand gebruiken.
# Bij gebruik van DNS of NIS hoeft dit bestand helemaal niet gebruikt
# te worden.  Zie /etc/nsswitch.conf voor de volgorde van resolutie.
#
#
::1                      localhost localhost.my.domain myname.my.domain
127.0.0.1                localhost localhost.my.domain myname.my.domain

#
# Verzonnen netwerk.
#10.0.0.2                myname.my.domain myname
#10.0.0.3                myfriend.my.domain myfriend
#
# Volgens RFC 1918 mogen de volgende IP netwerken gebruikt worden
# als private netwerken die niet met Internet verbonden zijn:
#
#        10.0.0.0        -   10.255.255.255
#        172.16.0.0      -   172.31.255.255
#        192.168.0.0     -   192.168.255.255
#
# Als er toch verbinding moet zijn met Internet, zijn echte
# officieel toegewezen nummers nodig.  Probeer ECHT GEEN eigen
# netwerknummers te verzinnen, maar vraag ze op bij de provider
# (als die er is) of bij de Internet Registry (ftp naar
# rs.internic.net, map `/templates&#39;).
#</pre></div></div><div class=paragraph><p><span class=filename>/etc/hosts</span> heeft als formaat:</p></div><div class="literalblock programlisting"><div class=content><pre>[Internet address] [official hostname] [alias1] [alias2] ...</pre></div></div><div class=paragraph><p>Bijvoorbeeld:</p></div><div class="literalblock programlisting"><div class=content><pre>10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2</pre></div></div><div class=paragraph><p>In <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> staat meer informatie.</p></div></div></div><div class=sect2><h3 id=configtuning-sysctlconf>12.11.3. <span class=filename>sysctl.conf</span><a class=anchor href=#configtuning-sysctlconf></a></h3><div class=paragraph><p><span class=filename>sysctl.conf</span> lijkt veel op <span class=filename>rc.conf</span>. Waardetoekenning heeft weer de vorm <code>variable=value</code>. De ingestelde <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>-waarden worden doorgevoerd op het moment dat het systeem naar multi-user modus gaat. Niet alle variabelen kunnen in deze modus gewijzigd worden.</p></div><div class=paragraph><p>Om te voorkomen dat er logregels geplaatst worden als processen crashen en om te voorkomen dat andere gebruikers kunnen zien welke processen er gestart zijn door een andere gebruiker, kunnen de volgende instellingen worden gezet in <span class=filename>sysctl.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>#Log exits met fatale signalen niet (bv. sig 11)
kern.logsigexit=0

# Voorkom dat gebruikers informatie zien over processen die
# worden gedraaid onder een ander UID.
security.bsd.see_other_uids=0</pre></div></div></div></div></div><div class=sect1><h2 id=configtuning-sysctl>12.12. Optimaliseren met sysctl<a class=anchor href=#configtuning-sysctl></a></h2><div class=sectionbody><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> is een interface waarmee veranderingen gemaakt kunnen worden aan een draaiend FreeBSD-systeem. Er zijn onder meer vele geavanceerde opties voor de TCP/IP-stack en het virtuele geheugensysteem, waarmee een ervaren systeembeheerder de systeemprestaties drastisch kan verbeteren. Met <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> kunnen meer dan vijfhonderd systeemvariabelen opgevraagd en ingesteld worden.</p></div><div class=paragraph><p>In essentie heeft <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> twee functies: het lezen en wijzigen van systeeminstellingen.</p></div><div class=paragraph><p>Om alle leesbare variabelen te tonen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl <span class=nt>-a</span></code></pre></div></div><div class=paragraph><p>Om een bepaalde variabele op te vragen, bijvoorbeeld <code>kern.maxproc</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl kern.maxproc
kern.maxproc: 1044</code></pre></div></div><div class=paragraph><p>Om een bepaalde variabele toe te kennen (te wijzigen), is de syntaxis <em>variable</em>=<em>value</em>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.maxfiles=5000</span>
kern.maxfiles: 2088 -&gt; 5000</code></pre></div></div><div class=paragraph><p>Waarden van sysctl-variabelen zijn doorgaans strings (tekst), getallen of booleans (<code>1</code> als waar, <code>0</code> als onwaar).</p></div><div class=paragraph><p>Om automatisch variabelen in te stellen als de machine start, kunnen ze toegevoegd worden aan <span class=filename>/etc/sysctl.conf</span>. Meer informatie staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl.conf&amp;sektion=5&amp;format=html">sysctl.conf(5)</a> en <a href=#configtuning-sysctlconf><span class=filename>sysctl.conf</span></a>.</p></div><div class=sect2><h3 id=sysctl-readonly>12.12.1. <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> alleen-lezen<a class=anchor href=#sysctl-readonly></a></h3><div class=paragraph><p>In sommige gevallen is het wenselijk om <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>-waarden die alleen-lezen zijn toch te wijzigen. Hoewel dit soms onontkoombaar is, kan het alleen bij een (her)start gedaan worden.</p></div><div class=paragraph><p>Op sommige laptops is bijvoorbeeld het apparaat <a href="https://man.freebsd.org/cgi/man.cgi?query=cardbus&amp;sektion=4&amp;format=html">cardbus(4)</a> niet in staat om geheugenregio’s af te tasten, met als gevolg foutmeldingen als:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>cbb0: Could not map register memory
device_probe_and_attach: cbb0 attach returned 12</code></pre></div></div><div class=paragraph><p>In dergelijke gevallen moeten er meestal enkele <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>-instellingen gewijzigd worden die alleen-lezen zijn en een standaardwaarde hebben. Dit kan bereikt worden door <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> "OIDs" in de lokale <span class=filename>/boot/loader.conf</span> te zetten. Standaardinstellingen staan in <span class=filename>/boot/defaults/loader.conf</span>.</p></div><div class=paragraph><p>Om het bovenstaande probleem op te lossen moet in <span class=filename>/boot/loader.conf</span><code>hw.pci.allow_unsupported_io_range=1</code> ingesteld worden. Dan werkt <a href="https://man.freebsd.org/cgi/man.cgi?query=cardbus&amp;sektion=4&amp;format=html">cardbus(4)</a> wel goed.</p></div></div></div></div><div class=sect1><h2 id=configtuning-disk>12.13. Harde schijven optimaliseren<a class=anchor href=#configtuning-disk></a></h2><div class=sectionbody><div class=sect2><h3 id=_sysctl_variabelen>12.13.1. Sysctl-variabelen<a class=anchor href=#_sysctl_variabelen></a></h3><div class=sect3><h4 id=_vfs_vmiodirenable>12.13.1.1. <code>vfs.vmiodirenable</code><a class=anchor href=#_vfs_vmiodirenable></a></h4><div class=paragraph><p>De sysctl-variabele <code>vfs.vmiodirenable</code> kan de waarde 0 (uit) of 1 (aan) hebben. De standaardwaarde is 1. Deze variabele bepaalt hoe mappen door het systeem in een cache bewaard worden. De meeste mappen zijn klein en gebruiken slechts een klein fragment (typisch 1 K) in het bestandssysteem en nog minder (typisch 512 bytes) in de buffercache. Als deze variabele uit staat (op 0) bewaart de buffercache slechts een bepaald aantal mappen in de cache, ook al is er een overvloed aan geheugen beschikbaar. Wanneer deze aan staat (op 1), wordt de VM paginacache gebruikt, waardoor voor het cachen van mappen al het geheugen kan worden gebruikt. Het is echter wel zo dat het minimale in-core geheugen dat gebruikt wordt om een map te cachen in dat geval de fysieke paginagrootte is (typisch 4 K) in plaats van 512 bytes. Het is aan te raden deze optie aan te laten staan als gebruik gemaakt wordt van diensten die met grote aantallen bestanden werken, zoals webcaches, grote mailsystemen en newsservers. Als deze optie aan blijft staan, verlaagt die de prestaties niet, ook al kost het meer geheugen. Door experimenteren is dit voor een systeem na te gaan.</p></div></div><div class=sect3><h4 id=_vfs_write_behind>12.13.1.2. <code>vfs.write_behind</code><a class=anchor href=#_vfs_write_behind></a></h4><div class=paragraph><p>De sysctl-variabele <code>vfs.write_behind</code> staat standaard aan (<code>1</code>). Dit betekent dat het bestandssysteem gegevens naar het medium gaat schrijven op het moment dat er een volledig cluster aan gegevens verzameld is. Dit is meestal het geval bij het schrijven van grote sequentiële bestanden. Het idee is om te voorkomen dat de buffercache verzadigd raakt met vuile buffers zonder dat dit bijdraagt aan de I/O-prestaties. Dit kan echter processen ophouden en onder sommige omstandigheden is het wellicht beter deze sysctl uit te zetten.</p></div></div><div class=sect3><h4 id=_vfs_hirunningspace>12.13.1.3. <code>vfs.hirunningspace</code><a class=anchor href=#_vfs_hirunningspace></a></h4><div class=paragraph><p>De sysctl-variabele <code>vfs.hirunningspace</code> bepaalt hoeveel nog te schrijven gegevens er in het complete systeem op elk moment in de wachtrij naar schijfcontrollers mag staan. De standaardwaarde is meestal voldoende, maar op machines met veel schijven, is het beter deze te verhogen naar vier of vijf <em>megabyte</em>. Het instellen van een te hoge waarde (groter dan de schrijfdrempel van de buffercache) kan leiden tot zeer slechte prestaties bij clustering. Stel deze waarde niet arbitrair hoog in! Hogere schrijfwaarden kunnen vertraging veroorzaken in het lezen, als dit tegelijk plaatsvindt.</p></div><div class=paragraph><p>Er zijn verscheidene andere sysctl’s voor buffercache en VM-pagecache. Het wordt afgeraden deze te wijzigen. Het VM-systeem is zeer goed in staat zichzelf automatisch te optimaliseren.</p></div></div><div class=sect3><h4 id=_vm_swap_idle_enabled>12.13.1.4. <code>vm.swap_idle_enabled</code><a class=anchor href=#_vm_swap_idle_enabled></a></h4><div class=paragraph><p>De sysctl-variabele <code>vm.swap_idle_enabled</code> is nuttig in grote meergebruikersystemen met veel gebruikers die af- en aanmelden en veel onbenutte processen. Dergelijke systemen hebben de neiging om voortdurend de vrije geheugenreserves onder druk te zetten. Het is mogelijk om de prioriteit van geheugenpagina’s die verband houden met onbenutte processen sneller te laten dalen dan met het normale pageout-algoritme, door deze sysctl aan te zetten en via <code>vm.swap_idle_threshold1</code> en <code>vm.swap_idle_threshold2</code> de swapout hysterese (in seconden onbenut) af te stemmen. Deze optie dient alleen gebruikt te worden als ze echt nodig is, want de andere kant van de medaille is dat dit eerder pre-page geheugen inhoudt in plaats van later, waardoor het meer wisselbestand- en schijfbandbreedte kost. In een klein systeem heeft deze optie een voorspelbaar effect, maar in grote systemen waar al sprake is van een matige paging kan deze optie het mogelijk maken voor het VM-systeem om hele processen gemakkelijk in en uit het geheugen te halen.</p></div></div><div class=sect3><h4 id=_hw_ata_wc>12.13.1.5. <code>hw.ata.wc</code><a class=anchor href=#_hw_ata_wc></a></h4><div class=paragraph><p>Ten tijde van FreeBSD 4.3 is er geflirt met het uitzetten van IDE-schrijfcaching. Hierdoor neemt de bandbraadte naar IDE-schijven af, maar het werd als noodzakelijk beschouwd vanwege ernstige problemen met gegevensinconsistentie die door harde schijfproducenten geëintroduceerd waren. Het probleem is dat IDE-schijven niet de waarheid vertellen over wanneer een schrijfactie klaar is. Door IDE-schrijfcaching wordt data niet alleen ongeordend geschreven, maar soms kan zelfs het schrijven van sommige blokken voortdurend uitgesteld worden als er sprake is van een hoge schijfbelasting. Een crash of stroomstoring kan dan ernstige corruptie aan het bestandssysteem veroorzaken. Daarom werd de standaardinstelling van FreeBSD voor alle zekerheid gewijzigd. Helaas was het resultaat een groot verlies aan prestaties en na die uitgave is de standaardwaarde weer terug veranderd. Met de sysctl-variabele <code>hw.ata.wc</code> kan gecontroleerd worden of schrijfcaching aan of uit staat. Als schrijfcaching uit staat, kan het die weer aangezet worden door <code>hw.ata.wc</code> op 1 te zetten. Aangezien dit een kernelvariabele is, moet deze ingesteld worden vanuit de bootloader tijdens het opstarten. Nadat de kernel eenmaal opgestart is, heeft het wijzigen van deze sysctl geen effect.</p></div><div class=paragraph><p>Meer informatie staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=ata&amp;sektion=4&amp;format=html">ata(4)</a>.</p></div></div><div class=sect3><h4 id=_scsi_delay_kern_cam_scsi_delay>12.13.1.6. <code>SCSI_DELAY</code> (<code>kern.cam.scsi_delay</code>)<a class=anchor href=#_scsi_delay_kern_cam_scsi_delay></a></h4><div class=paragraph><p>De kernelinstelling <code>SCSI_DELAY</code> kan gebruikt worden om de opstarttijd te versnellen. De standaardwaarde is nogal hoog en kan <code>15</code> seconden vertraging veroorzaken. Met modernere SCSI-systemen is <code>5</code> seconden al voldoende (zeker met moderne schijven). De <code>kern.cam.scsi_delay</code> opstart variabele moet hier gebruikt worden. De variabele en kernelconfiguratie-optie accepteren waarden uitgedrukt in <em>milliseconden</em> en <em>niet</em> in <em>seconden</em>.</p></div></div></div><div class=sect2><h3 id=soft-updates>12.13.2. Softupdates<a class=anchor href=#soft-updates></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> kan gebruikt worden om een bestandsysteem nauwkeurig af te stellen. Het heeft veel opties, maar nu wordt alleen het aan- en uitzetten van softupdates besproken. Dat gaat als volgt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tunefs -n enable /filesystem</span>
<span class=c># tunefs -n disable /filesystem</span></code></pre></div></div><div class=paragraph><p>Een bestandssysteem kan niet met <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> gewijzigd worden als het aangekoppeld is. Softupdates aanzetten wordt dus in het algemeen gedaan vanuit enkelegebruikermodus, voordat partities aangekoppeld zijn.</p></div><div class=paragraph><p>Softupdates zorgen voor een drastische verbetering van de prestaties met betrekking tot metagegevens, met name het aanmaken en verwijderen van bestanden, door gebruik van een geheugencache. Het wordt dan ook aangeraden om op alle bestandssystemen softupdates te gebruiken. Er zijn twee nadelen aan softupdates: softupdates garanderen een consistent bestandssysteem in geval van een crash, maar het kan makkelijk enkele seconden (zelfs een minuut) achter liggen met het daadwerkelijk bijwerken op de fysieke harde schijf. Als een systeem crasht gaat wellicht meer werk verloren dan anders het geval zou zijn. Daarnaast vertragen softupdates het vrijgeven van bestandssysteemblokken. Als een bestandssysteem (zoals de rootpartitie) bijna vol is, dan kan het verrichten van een grote update, zoals <code>make installworld</code>, ertoe leiden dat het bestandssysteem ruimtegebrek krijgt en dat daardoor de operatie mislukt.</p></div><div class=sect3><h4 id=_meer_over_softupdates>12.13.2.1. Meer over softupdates<a class=anchor href=#_meer_over_softupdates></a></h4><div class=paragraph><p>Er zijn traditioneel twee methodes om de metagegevens van een bestandssysteem terug naar de schijf te schrijven. Het bijwerken van metagegevens houdt het bijwerken van van niet-inhoudelijke gegevens zoals inodes of mappen in.</p></div><div class=paragraph><p>Historisch gezien was het gebruikelijk om updates aan metagegevens synchroon weg te schrijven. Als een map bijvoorbeeld gewijzigd was, wachtte het systeem totdat de verandering daadwerkelijk naar de schijf geschreven was. De gegevensbuffers (de inhoud van een bestand) werden doorgeschoven naar de buffercache en op een later moment asynchroon op de schijf opgeslagen. Het voordeel van deze benadering is dat ze altijd veilig is. Als het systeem faalt tijdens het bijwerken, zijn de metagegevens nog altijd consistent. Een bestand kan volledig gecreëerd zijn of helemaal niet. Als de gegevensblokken van een bestand nog niet van de buffercache naar de schijf geschreven zijn ten tijde van de crash, is <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> in staat om dit te herkennen en het bestandssysteem te repareren door de lengte van het bestand nul te maken. Deze implementatie is ook helder en eenvoudig. Het nadeel is echter dat het wijzigen van metagegevens een traag proces is. Een <code>rm -r</code> benadert bijvoorbeeld alle bestanden in een map sequentiëel, maar elke mapverandering (verwijderen van een bestand) wordt synchroon naar de schijf geschreven. Dit omvat ook het bijwerken van de map zelf, van de inodetabel en mogelijk ook van indirecte blokken die voor het bestand in kwestie zijn gealloceerd. Gelijksoortige processen spelen zich af bij een commando als <code>tar -x</code>, waarbij een grote bestandshiëearchie wordt uitgepakt.</p></div><div class=paragraph><p>De tweede mogelijkheid is om het bijwerken van metagegevens asynchroon weg te schrijven. Dit is standaard in Linux®/ext2fs en als een *BSD UFS-bestandssysteem met <code>mount -o async</code> aangekoppeld is, is de werking hetzelfde. Alle bijwerkingen aan metagegevens worden eenvoudigweg doorgegeven aan de buffercache en vermengd met inhoudelijke updates van de bestandsgegevens. Het voordeel is een grote winst aan snelheid, omdat er niet telkens gewacht hoeft te worden op het bijwerken van metagegevens tot deze daadwerkelijk naar de schijf geschreven zijn. De implementatie is ook in dit geval helder en eenvoudig. Het grote nadeel is uiteraard dat er geen enkele garantie is voor de consistentie van het bestandssysteem. Als het systeem faalt tijdens een operatie waarbij veel metagegevens worden bijgewerkt (bijvoorbeeld door een stroomstoring of iemand drukt op de resetknop), blijft het bestandssysteem in een onvoorspelbare toestand achter. Er is geen mogelijkheid om de toestand van het bestandssysteem te onderzoeken als het systeem weer opstart, want de gegevensblokken van een bestand kunnen al weggeschreven zijn geweest terwijl het wegschrijven van bijwerkingen aan de inodetabel of de bijhorende map nog niet plaats heeft gevonden. Het is zelfs onmogelijk om een <code>fsck</code> te implementeren die de overgebleven chaos kan opruimen: de benodigde informatie is gewoon niet volledig aanwezig op de schijf. Als een bestandssysteem op deze manier onherstelbaar beschadigd is, is de enige optie <a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a> te gebruiken en vervolgens te herstellen van een back-up.</p></div><div class=paragraph><p>De gebruikelijke oplossing voor dit probleem is het implementeren van <em>dirty region logging</em>, ook wel <em>journaling</em> genoemd, hoewel deze term niet consistent gebruikt wordt en soms ook wordt gebruikt voor andere vormen van transactielogging. Het bijwerken van metagegevens wordt nog steeds synchroon geschreven, maar slechts naar een klein gebied van de schijf. Later worden ze dan naar de juiste locatie verplaatst. Omdat het loggebied klein is, hoeven de koppen van de schijf zelfs tijdens schrijfintensieve operaties nog maar over een kleine fysieke afstand te bewegen en door deze snellere respons zijn dit soort operaties sneller dan op de traditionele manier. De extra complexiteit van de implementatie is nogal beperkt, dus het risico van introductie van extra bugs valt mee. Een nadeel is dat alle metagegevens tweemaal geschreven worden (eerst naar het loggebied en later nog eens naar de definitieve locatie). Dus bij normaal gebruik kan er sprake zijn van wat men wel noemt een "performance pessimization". Anderzijds kunnen in geval van een crash alle nog uitstaande metagegevensoperaties snel worden teruggedraaid of vanuit het loggebied alsnog worden afgemaakt wanneer de machine weer opstart. Het bestandssysteem start dan snel op.</p></div><div class=paragraph><p>Kirk McKusick, de vader van het Berkeley FFS, loste dit probleem op met softupdates, wat betekent dat alle uitstaande acties voor het bijwerken van metagegevens in het geheugen bewaard worden en dan geordend naar de schijf geschreven worden. Dit heeft het gevolg dat in geval van intensieve operaties met betrekking tot metagegevens, latere bijwerkingen aan een item eerdere bewerkingen opvangen ("catch") als deze nog in het geheugen zitten en nog niet weggeschreven waren. Dus alle operaties, op bijvoorbeeld een map, worden in het algemeen eerst in het geheugen uitgevoerd voordat er wordt bijgewerkt naar schijf. De gegevensblokken worden geordend conform hun positie, zodat ze nooit weggeschreven worden voordat hun metagegevens geschreven zijn. Als het systeem een crash ondervindt, veroorzaakt dat impliciet het terugdraaien van uitstaande operaties ("log rewind"): alle operaties die nog niet weggeschreven waren lijken nooit gebeurd te zijn. Zo wordt een consistent bestandssysteem in stand gehouden dat eruit ziet alsof het 30 tot 60 seconden eerder was. Het gebruikte algoritme garandeert dat alle bronnen die in gebruik zijn als zodanig gemarkeerd worden in hun daarvoor geschikte bitmaps: blokken en inodes. Na een crash is de enige allocatiefout die kan optreden dat bronnen gemarkeerd kunnen zijn als in gebruik ("used"), terwijl ze feitelijk alweer beschikbaar ("free") zijn. <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> herkent deze situatie en stelt dergelijke vrij te maken bronnen opnieuw beschikbaar. Het is volkomen veilig om na een crash te negeren dat het bestandssysteem niet schoon is en het tot aankoppelen te dwingen met <code>mount -f</code>. Om niet langer gebruikte bronnen vrij te maken moet later <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> uitgevoerd worden. Dit is dan ook het idee achter <em>background fsck</em>: op het moment dat het systeem aan het opstarten is, wordt er alleen een <em>snapshot</em> van het systeem bewaard. <code>fsck</code> kan later uitgevoerd worden. Alle bestandssystemen kunnen "dirty" aangekoppeld worden en het systeem kan gewoon verder opstarten naar meergebruikermodus. Vervolgens zijn er <code>fsck</code>s gepland die in de achtergrond draaien voor elk bestandssysteem dat niet schoon is en waarmee bezette bronnen vrijgegeven worden. Bestandssystemen die geen gebruik maken van softupdates moeten echter nog steeds gebruik maken van de normale <code>fsck</code> in de voorgrond.</p></div><div class=paragraph><p>Het voordeel van softupdates is dat operaties op metagegevens bijna net zo snel zijn als asynchrone updates (dat wil zeggen sneller dan met <em>logging</em>, waarbij de metagegevens keer op keer geschreven worden). Nadelen zijn de complexiteit van de code (wat een groter risico op bugs impliceert in een gebied dat bijzonder gevoelig is voor verlies van gebruikersgegevens) en een groter geheugenverbruik. Tevens moet de gebruiker wennen aan enkele eigenaardigheden. Na een crash lijkt de toestand van het bestandssysteem wat "ouder". In situaties waar de standaard synchrone benadering een aantal lege bestanden zou hebben achtergelaten na <code>fsck</code>, is het met softupdates juist zo dat dergelijke bestanden er helemaal niet zijn, omdat de metagegevens of de bestandsinhoud nooit naar de schijf zijn geschreven. Schijfruimte wordt pas vrijgegeven als de bijwerkingen aan metagegevens en inhoudelijke bestandsgegevens weggeschreven zijn, wat mogelijk pas enige tijd na het uitvoeren van <code>rm</code> plaatsvindt. Dit kan problemen veroorzaken als er grote hoeveelheden gegevens naar een bestandssysteem geschreven worden dat onvoldoende vrije ruimte heeft om alle bestanden twee keer te kunnen bevatten (bijvoorbeeld in <span class=filename>/tmp</span>).</p></div></div></div></div></div><div class=sect1><h2 id=configtuning-kernel-limits>12.14. Fijnafstemming van kernellimieten<a class=anchor href=#configtuning-kernel-limits></a></h2><div class=sectionbody><div class=sect2><h3 id=file-process-limits>12.14.1. Bestandsproceslimieten<a class=anchor href=#file-process-limits></a></h3><div class=sect3><h4 id=kern-maxfiles>12.14.1.1. <code>kern.maxfiles</code><a class=anchor href=#kern-maxfiles></a></h4><div class=paragraph><p><code>kern.maxfiles</code> kan worden verhoogd of verlaagd, afhankelijk van de systeembehoeften. Deze variabele geeft het maximale aantal bestandsdescriptors op een systeem. Als de bestandsdescriptortabel vol is, toont de systeembuffer meerdere malen <code>file: table is full</code>, hetgeen achteraf te zien is met <code>dmesg</code>.</p></div><div class=paragraph><p>Elk geopend bestand, socket of fifo heeft een bestandsdescriptor. Een grote produktieserver kan makkelijk enige duizenden bestandsdescriptors nodig hebben, afhankelijk van het soort en aantal diensten die tegelijk draaien.</p></div><div class=paragraph><p>In oudere versies van FreeBSD werd de standaard waarde van <code>kern.maxfiles</code> afgeleid van de optie <code>maxusers</code> in het kernelconfiguratiebestand. <code>kern.maxfiles</code> groeit evenredig met de waarde van <code>maxusers</code>. Als een aangepaste kernel wordt gebouwd, is het een goed idee om deze kerneloptie in te stellen afhankelijk van het gebruikt van een systeem (maar niet te laag). Hoewel een produktieserver misschien niet 256 gelijktijdige gebruikers heeft, kunnen de benodigde systeembronnen het beste vergeleken worden met een grootschalige webserver.</p></div><div class=paragraph><p>De optie <code>maxusers</code> stelt de grootte van een aantal belangrijke systeemtabellen in. Dit aantal moet ruwweg gelijk zijn aan het aantal gebruikers dat verwacht wordt gelijktijdig van de machine gebruik te maken.</p></div><div class=paragraph><p>Vanaf FreeBSD 4.5 wordt <code>kern.maxusers</code> automatisch ingesteld tijdens het opstarten gebaseerd op de hoeveelheid beschikbare geheugen in het systeem en kan worden vastgesteld tijdens het draaien door te kijken naar de alleen-lezen sysctl <code>kern.maxusers</code>. Sommige configuraties hebben grotere of kleinere waarden nodig van <code>kern.maxusers</code>, deze kunnen worden gezet als een opstartvariabele. Waardes van 64, 128 en 256 zijn daarin niet ongewoon. We raden aan om niet boven de 256 te gaan tenzij er heel veel bestandsdescriptors benodigd zijn; veel van de aanpasbaare waarden die standaard worden bepaald door <code>kern.maxusers</code> kunnen individueel worden overschreven tijdens het opstarten en/of tijdens het draaien van het systeem in <span class=filename>/boot/loader.conf</span> (zie de handleiding <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a> of <span class=filename>/boot/defaults/loader.conf</span> voor een paar aanwijzingen) of zoals elders beschreven in dit document.</p></div><div class=paragraph><p>Voor oudere versies stelt het systeem deze waarde zelf in als deze uitdrukkelijk op <code>0</code> is gezet. Als het gewenst is om deze waarde zelf aan te geven, wordt aangeraden om <code>maxusers</code> minstens op 4 te zetten, met name als het X Window systeem in gebruik is of als er software gecompileerd wordt. De reden hiervoor is dat de belangrijkste tabel die door <code>maxusers</code> ingesteld wordt, het maximum aantal processen is, dat ingesteld wordt op <code>20 + 16 * maxusers</code>, dus als <code>maxusers</code> op 1 ingesteld wordt, zijn er maar 36 gelijktijdige processen mogelijk, inclusief de ongeveer achttien processen die door het systeem tijdens het opstarten start en de ongeveer vijftien processen die waarschijnlijk aangemaakt worden door het opstarten van het X Window systeem. Zelfs een eenvoudige taak als het afbeelden van een hulppagina start negen processen op om de pagina te filteren, te decomprimeren en af te beelden. Als <code>maxusers</code> op 64 ingesteld wordt, zijn er 1044 gelijktijdige processen mogelijk, wat genoeg moet zijn voor bijna alle soorten gebruik. Als echter de gevreesde fout verschijnt als er geprobeerd wordt om een programma op te starten of als er een server gedraaid wordt met een groot aantal gelijktijdige gebruikers, zoals <code>ftp.FreeBSD.org</code>, kan het getal altijd verhoogd worden en kan de kernel opnieuw gebouwd worden.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>maxusers</code> stelt <em>geen</em> grens aan het aantal gebruikers dat zich op de machine kan aanmelden. Het stelt gewoon verschillende tabelgroottes in op redelijke waardes, uitgaande van het maximum aantal gebruikers dat waarschijnlijk de machine gebruikt en van het aantal processen dat elk van deze gebruikers zal draaien. Een sleutelwoord dat <em>wel</em> het aantal gelijktijdige aanmeldingen op afstand en X-terminalvensters begrensd is <a href=../kernelconfig/#kernelconfig-ptys><code>pseudo-device pty 16</code></a>. In FreeBSD 5.X kan dit getal genegeerd worden omdat daar het stuurprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=pty&amp;sektion=4&amp;format=html">pty(4)</a> "auto-cloning" is. Er kan eenvoudig gebruik worden gemaakt van de regel <code>device pty</code> in het instellingenbestand.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_kern_ipc_somaxconn>12.14.1.2. <code>kern.ipc.somaxconn</code><a class=anchor href=#_kern_ipc_somaxconn></a></h4><div class=paragraph><p>De sysctl-variabele <code>kern.ipc.somaxconn</code> beparkt de grootte van de luisterwachtrij voor het accepteren van nieuwe TCP-verbindingen. De standaardwaarde van <code>128</code> is meestal te laag voor robuuste behandeling van nieuwe verbindingen in een zwaarbeladen webserveromgeving. Voor zulke omgevingen wordt aangeraden deze waarde te verhogen tot <code>1024</code> of hoger. De dienstdaemon beperkt misschien zelf de luisterwachtrij (bijvoorbeeld <a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a> of Apache), maar heeft vaak een mogelijkheid in een configuratiebestand de wachtrijgrootte aan te passen. Grote luisterwachtrijen zijn ook beter in het ontwijken van Ontzegging van Dienst () aanvallen.</p></div></div></div><div class=sect2><h3 id=nmbclusters>12.14.2. Netwerkbeperkingen<a class=anchor href=#nmbclusters></a></h3><div class=paragraph><p>De kerneloptie <code>NMBCLUSTERS</code> bepaalt het aantal netwerk-Mbufs dat beschikbaar is voor een systeem. Een veel bezochte server met een laag aantal Mbufs beperkt de mogelijkheden van FreeBSD. Elk cluster staat voor ongeveer 2 K geheugen, dus een waarde van 1024 stelt 2 megabyte aan kernelgeheugen voor, dat is gereserveerd voor netwerkbuffers. Een simpele berekening geeft aan hoeveel er nodig is. Stel dat een webserver met een maximum van 1000 simultane verbindingen voor elke verbinding 16 K aan ontvangstnetwerkbuffers en 16 K aan zendbuffers kost, dan is ongeveer 32 MB aan netbuffers nodig voor de webserver. Een goede vuistregel is te vermeniguldigen met twee, dus 2x32 MB / 2 KB = 64 MB / 2 kB = 32768. Voor machines met veel geheugen wordt 4096 tot 32768 aangeraden. Er moet in geen geval een arbitrair hoge waarde voor deze sysctl opgegeven worden, want dat kan leiden tot een crash tijdens het opstarten. Met de optie <code>-m</code> van <a href="https://man.freebsd.org/cgi/man.cgi?query=netstat&amp;sektion=1&amp;format=html">netstat(1)</a> kan het clustergebruik van het netwerk bekeken worden.</p></div><div class=paragraph><p>De loaderparameter <code>kern.ipc.nmbclusters</code> moet gebruikt worden om dit tijdens het opstarten toe te passen. Alleen voor oudere versies van FreeBSD is het nodig om de kerneloptie <code>NMBCLUSTERS</code> te gebruiken.</p></div><div class=paragraph><p>Voor drukke servers die extensief gebruik maken van de systeemaanroep <a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a>, kan het nodig zijn het aantal <a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a>-buffers te verhogen via de kerneloptie <code>NSFBUFS</code> of door de waarde in te stellen in <span class=filename>/boot/loader.conf</span> (in <a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a> staan details). Als er in de procestabel processen staan met een status <code>sfbufa</code> is dat een algemene indicator dat deze parameter aangepast moet worden. De sysctl-variabele <code>kern.ipc.nsfbufs</code> is alleen-lezen en laat zien op welke waarde deze kernelvariabele is ingesteld. Deze parameter schaalt engiszins met de variabele <code>kern.maxusers</code>, maar het kan nodig zijn om deze bij te stellen.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>Zelfs als een socket als non-blocking gemarkeerd is, dan nog kan het aanroepen van <a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a> op de non-blocking socket ertoe leiden dat er toch blokkade optreedt totdat er voldoende <code>struct sf_buf</code>'s vrijgemaakt zijn.</p></div></td></tr></tbody></table></div><div class=sect3><h4 id=_net_inet_ip_portrange>12.14.2.1. <code>net.inet.ip.portrange.*</code><a class=anchor href=#_net_inet_ip_portrange></a></h4><div class=paragraph><p>De sysctl-variabelen <code>net.inet.ip.portrange.*</code> bepalen welke reeks poortnummers automatisch gebonden wordt aan TCP- en UDP-sockets. Er zijn drie gebieden: een laag gebied, een (standaard) middengebied en een hoog gebied. De meeste netwerkprogramma’s gebruiken het standaardbereik, wat begrensd wordt door <code>net.inet.ip.portrange.first</code> en <code>net.inet.ip.portrange.last</code> met standaardwaarden van respectievelijk 1024 en 5000. Gebonden poortreeksen worden gebruikt voor uitgaande verbindingen en het is onder bepaalde omstandigheden mogelijk dat poorten op raken. Dit gebeurt meestal in het geval van een zwaar belaste webproxy. Poortbereik is niet van belang als vooral diensten draaien die zich bezighouden met inkomende verbindingen, zoals een normale webserver, of als het aantal uitgaande verbindingen beperkt is, zoals bij een mailrelay. Voor situaties waarin een tekort aan poorten dreigt, wordt aangeraden om <code>net.inet.ip.portrange.last</code> bescheiden op te hogen. Een waarde van <code>10000</code>, <code>20000</code> of <code>30000</code> is redelijk. Er moet ook rekening met effecten op firewalls gehouden worden als de poortreeks gewijzigd wordt. Sommige firewalls kunnen grote poortreeksen blokkeren, meestal de lagere poorten, en verwachten dat andere systemen hogere poorten gebruiken voor uitgaande verbindingen. Om deze reden wordt het niet aanbevolen om <code>net.inet.ip.portrange.first</code> te verlagen.</p></div></div><div class=sect3><h4 id=_tcp_bandbreedtevertragingsproduct_tcp_bandwidth_delay_product>12.14.2.2. TCP Bandbreedtevertragingsproduct (TCP Bandwidth Delay Product)<a class=anchor href=#_tcp_bandbreedtevertragingsproduct_tcp_bandwidth_delay_product></a></h4><div class=paragraph><p>De TCP-bandbreedtevertragingsproductlimitatie lijkt op TCP/Vegas in NetBSD. Het kan aangezet worden door de sysctl-variabele <code>net.inet.tcp.inflight.enable</code> de waarde <code>1</code> te geven. Het systeem tracht dan het bandbreedtevertragingssprodukt te berekenen voor elke verbinding en beperkt dan de hoeveelheid gegevens in de wachtrij naar het netwerk tot de hoeveelheid die vereist is om maximale doorvoer te kunnen handhaven.</p></div><div class=paragraph><p>Dit is nuttig bij gebruik van modems, Gigabit Ethernet of zelfs bij WAN-verbindingen met hoge snelheid (of elke andere verbinding met een groot bandbreedtevertragingsprodukt), in het bijzonder als ook windowschaling of een groot verzendwindow gebruikt wordt. Als deze optie aangezet wordt, dient ook <code>net.inet.tcp.inflight.debug</code> de waarde <code>0</code> te krijgen (geen debugging) en voor produktiegebruik kan het instellen van <code>net.inet.tcp.inflight.min</code> naar minstens <code>6144</code> voordeel opleveren. Het instellen van hoge minima kan effectief het beperken van bandbreedte ondermijnen, afhankelijk van de verbinding. De mogelijkheid tot limitering zorgt ervoor dat de hoeveelheid gegevens die opgebouwd wordt, in tussentijdse route- en switchwachtrijen verlaagd kan worden en tevens kan de hoeveelheid gegevens die opgebouwd wordt in de interfacewachtrij van de lokale host verlaagd worden. Met minder pakketten in wachtrijen kunnen interactieve verbindingen opereren met lagere <em>Round Trip</em> tijden, met name over langzame modems. Deze optie gaat alleen over datatransmissie (upload / serverkant) en heeft geen effect gegevensontvangst (download / cliëntkant).</p></div><div class=paragraph><p>Aanpassen van <code>net.inet.tcp.inflight.stab</code> wordt <em>niet</em> aangeraden. Deze parameter krijgt standaard een waarde van 20, wat 2 maximale pakketten opgeteld bij de bandbreedtevensterberekening representeert. Het extra venster is nodig om het algoritme stabiel te houden en om de reactietijd bij veranderende omstandigheden te verbeteren, maar het kan ook leiden tot langere pingtijden over langzame verbindingen (zonder het inflight-algoritme kan dit echter nog erger zijn). In dergelijke gevallen kan deze parameter misschien verlaagd worden naar 15, 10 of 5 en misschien moet voor het gewenste effect ook <code>net.inet.tcp.inflight.min</code> verlaagd worden (bijvoorbeeld naar 3500). Het verlagen van deze parameters moet pas in laatste instantie overwogen worden.</p></div></div></div><div class=sect2><h3 id=_virtueel_geheugen>12.14.3. Virtueel Geheugen<a class=anchor href=#_virtueel_geheugen></a></h3><div class=sect3><h4 id=_kern_maxvnodes>12.14.3.1. <code>kern.maxvnodes</code><a class=anchor href=#_kern_maxvnodes></a></h4><div class=paragraph><p>Een vnode is de interne representatie van een bestand of een map. Het verlagen van het aantal beschikbare vnodes voor het besturingssysteem leidt dus tot een daling van schijf-I/O. Normaliter wordt dit door het besturingssysteem afgehandeld en hoeft de instelling niet gewijzigd te worden. Im sommige gevallen kan schijf-I/O de beperkende factor zijn en kan het systeem alle beschikbare vnodes in gebruik hebben. Dan dient deze instelling gewijzigd te worden. De hoeveelheid inactief en beschikbaar RAM dient meegenomen te worden in de beslissing.</p></div><div class=paragraph><p>Het huidige aantal gebruikte vnodes kan als volgt bekeken worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl vfs.numvnodes</span>
vfs.numvnodes: 91349</code></pre></div></div><div class=paragraph><p>Om het maximale aantal vnodes weer te geven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.maxvnodes</span>
kern.maxvnodes: 100000</code></pre></div></div><div class=paragraph><p>Als het huidige aantal gebruikte vnodes dicht bij het maximale aantal ligt, is het verstandig om <code>kern.maxvnodes</code> op te hogen met 1.000. Ook <code>vfs.numvnodes</code> dient in de gaten gehouden te worden. Als de waarde weer tot aan het maximum stijgt, dan moet <code>kern.maxvnodes</code> verder opgehoogd worden. Er dient een verschuiving op te treden in het door <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> gerapporteerde geheugengebruik. Er hoort meer geheugen actief te zijn.</p></div></div></div></div></div><div class=sect1><h2 id=adding-swap-space>12.15. Wisselbestandruimte toevoegen<a class=anchor href=#adding-swap-space></a></h2><div class=sectionbody><div class=paragraph><p>Hoe goed er ook gepland wordt, soms draait een systeem gewoon niet zoals verwacht. Een oorzaak hiervoor kan een tekort aan wisselbestandruimte zijn. Als blijkt dat er meer wisselbestandruimte nodig is, kan dat eenvoudig. Er zijn drie manieren om de totale ruimte beschikbaar als wisselbestand te vergroten: een nieuwe harde schijf toevoegen, swappen over NFS of een wisselbestand maken op een bestaande (UFS of andere) partitie.</p></div><div class=paragraph><p>Kijk voor informatie over het beveiligen van het wisselbestand, welke opties hiervoor bestaan, en waarom dit gedaan zou moeten worden in <a href=../disks/#swap-encrypting>Het versleutelen van de wisselbestand ruimte</a> van het handboek.</p></div><div class=sect2><h3 id=new-drive-swap>12.15.1. Swap op een nieuwe of bestaande harde schijf<a class=anchor href=#new-drive-swap></a></h3><div class=paragraph><p>Een nieuwe harde schijf voor swap toevoegen geeft betere prestaties dan een partitie aan een bestaande schijf toevoegen. Het aanmaken van partities en harde schijven wordt uitgelegd in <a href=../disks/#disks-adding>Schijven toevoegen</a>. <a href=#configtuning-initial>Initiële instellingen</a> bespreekt de overwegingen van partitie-indelingen en de grootte van swap-partities.</p></div><div class=paragraph><p>Gebruik <a href="https://man.freebsd.org/cgi/man.cgi?query=swapon&amp;sektion=8&amp;format=html">swapon(8)</a> om een swap-partitie aan het systeem toe te voegen, bijvoorbeeld:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># swapon /dev/ada1s1b</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Het is mogelijk om elke partitie te gebruiken die momenteel niet aangekoppeld is, zelfs als deze al gegevens bevat. Het gebruik van <a href="https://man.freebsd.org/cgi/man.cgi?query=swapon&amp;sektion=8&amp;format=html">swapon(8)</a> op een partitie die gegevens bevat zal deze gegevens overschrijven en vernietigen. Zorg ervoor dat de partitie die als swap toegevoegd wordt echt de bedoelde partitie is voordat <a href="https://man.freebsd.org/cgi/man.cgi?query=swapon&amp;sektion=8&amp;format=html">swapon(8)</a> gebruikt wordt.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Voeg een regel toe aan <span class=filename>/etc/fstab</span> voor de partitie om deze swap-partitie automatisch toe te voegen tijdens het opstarten:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/ada1s1b	none	swap	sw	0	0</pre></div></div><div class=paragraph><p>Raadpleeg <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a> voor een uitleg over de regels in <span class=filename>/etc/fstab</span>.</p></div></div><div class=sect2><h3 id=nfs-swap>12.15.2. Swappen over NFS<a class=anchor href=#nfs-swap></a></h3><div class=paragraph><p>In het algemeen wordt swappen over NFS niet aangeraden behalve als het onmogelijk is om naar een lokale schijf te swappen. NFS-swappen wordt gelimiteerd door de hoeveelheid beschikbare bandbreedte en belast het de NFS-server.</p></div></div><div class=sect2><h3 id=create-swapfile>12.15.3. Wisselbestanden<a class=anchor href=#create-swapfile></a></h3><div class=paragraph><p>Het is mogelijk om een bestand aan te maken van een bepaalde grootte en dit als swap te gebruiken. In dit voorbeeld wordt een bestand van 64 MB gebruikt, <span class=filename>/usr/swap0</span>. Uiteraard kan een willekeurige naam gebruikt worden.</p></div><div class=exampleblock><div class=title>Voorbeeld 1. Een wisselbestand aanmaken op FreeBSD</div><div class=content><div class="olist arabic"><ol class=arabic><li><p>De kernel <span class=filename>GENERIC</span> bevat reeds het stuurprogramma voor geheugenschijven (<a href="https://man.freebsd.org/cgi/man.cgi?query=md&amp;sektion=4&amp;format=html">md(4)</a>) dat nodig is voor deze bewerking. Zorg ervoor dat tijdens het bouwen van een eigen kernel de volgende regel in uw configuratiebestand zit:</p><div class="literalblock programlisting"><div class=content><pre>device md</pre></div></div><div class=paragraph><p>Kijk voor meer informatie over het bouwen van een eigen kernel in <a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a>.</p></div></li><li><p>Het wisselbestand <span class=filename>/usr/swap0</span> aanmaken:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/usr/swap0 bs=1024k count=64</span></code></pre></div></div></li><li><p>De correcte rechten op <span class=filename>/usr/swap0</span> instellen:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 0600 /usr/swap0</span></code></pre></div></div></li><li><p>Het wisselbestand opnemen in <span class=filename>/etc/rc.conf</span>:</p><div class="literalblock programlisting"><div class=content><pre>swapfile=&#34;/usr/swap0&#34;   # Instellen op naam van wisselbestand als hulpwisselbestand gewenst is</pre></div></div></li><li><p>De machine moet herstart worden of om het wisselbestand direct in te schakelen:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mdconfig -a -t vnode -f /usr/swap0 -u 0  swapon /dev/md0</span></code></pre></div></div></li></ol></div></div></div></div></div></div><div class=sect1><h2 id=acpi-overview>12.16. Energie- en bronnenbeheer<a class=anchor href=#acpi-overview></a></h2><div class=sectionbody><div class=paragraph><p>Het is belangrijk om hardwarebronnen op een efficiënte wijze te benutten. Voordat ACPI geïntroduceerd werd was het lastig en onflexibel om het energieverbruik en de thermische eigenschappen van een systeem te beheersen. De hardware werd beheerst de BIOS en dus had de gebruiker minder controle en zichtbaarheid in de energiebeheerinstellingen. Enige gelimiteerde configuratie was mogelijk via <em>Advanced Power Management (APM)</em>. Energie- en bronnenbeheer is een belangrijk onderdeel van moderne machines. Het besturingssysteem moet bijvoorbeeld systeemlimieten in de gaten houdt (en mogelijk een SMS sturen of iets dergelijks) als de systeemtemperatuur onverwacht toeneemt.</p></div><div class=paragraph><p>In dit deel van het FreeBSD handboek wordt uitgebreide informatie verschaft over ACPI. Aan het einde worden referenties geleverd naar meer leesmateriaal.</p></div><div class=sect2><h3 id=acpi-intro>12.16.1. Wat is ACPI?<a class=anchor href=#acpi-intro></a></h3><div class=paragraph><p>Advanced Configuration and Power Interface (ACPI) is een standaard die door een alliantie van producenten geschreven is, met als doel te voorzien in een standaardinterface voor hardwarebronnen- en energiebeheer. Een belangrijk element is dat het meer flexibiliteit en beheersmogelijkheden biedt aan het besturingssysteem (OS). Moderne systemen hebben de limieten van de huidige PNP-interfaces verder opgerekt dan wenselijk en misschien wel mogelijk was. ACPI is de directe opvolger van APM (Advanced Power Management). Centraal is het verleggen van hardwarebeheer en -monitoring naar de OS-laag in plaats van de zeer beperkte BIOS-laag.</p></div></div><div class=sect2><h3 id=acpi-old-spec>12.16.2. Tekortkomingen van APM<a class=anchor href=#acpi-old-spec></a></h3><div class=paragraph><p>Met de <em>Advanced Power Management (APM)</em> faciliteit kan het energieverbruik van een systeem geregeld worden op basis van de systeemactiviteit. Het APM-BIOS wordt geleverd door de systeemproducent of -verkoper en het is specifiek voor dat betreffende hardwareplatform. Een APM-stuurprogramma in het besturingssysteem regelt vervolgens de toegang tot de <em>APM Software Interface</em>, die het besturen van vermogensniveau mogelijk maakt. APM dient nog steeds gebruikt te worden met systemen die gefabriceerd zijn voor het jaar 2000.</p></div><div class=paragraph><p>Er zijn vier hoofdproblemen met APM te onderscheiden: ten eerste wordt het energiebeheer verricht door een BIOS (afhankelijk van producent) en het besturingssysteem heeft daar geen kennis van. De gebruiker die idle-time waarden instelt voor een harde schijf in het APM-BIOS is hier een voorbeeld van. Dan zal het BIOS de harde schijf langzamer kunnen laten draaien zonder dat het besturingssysteem de noodzaak ziet of het goedkeurt. Ten tweede: de APM-logica is ingebed in de BIOS, waardoor het buiten het besturingssysteem om opereert. Dit houdt in dat gebruikers problemen met hun APM-BIOS alleen kunnen verhelpen door een nieuw BIOS in het ROM te flashen, wat een gevaarlijke en mogelijk onherstelbare operatie is. Ten derde is APM een producent-specifieke technologie, in de zin dat er altijd een hoge mate van duplicatie zal zijn van al dan niet geslaagde pogingen om het wiel opnieuw uit te vinden en uiteraard ook van bugs. Er is geen enkele garantie dat het wegnemen van een bug door een producent ook een zelfde bug wegneemt bij een concurrent. Tenslotte is het van belang te weten dat de APM-BIOS in het algemeen gewoon te weing geheugen kon gebruiken om een ingewikkeld energiebeheer te kunnen implementeren. Laat staan dat deze goed aanpasbaar was aan veranderlijke doelstellingen voor de betreffende machine.</p></div><div class=paragraph><p><em>Plug-n-play BIOS (PNPBIOS)</em> was in veel situaties onbetrouwbaar. PNPBIOS is 16-bitstechnologie, dus het besturingssysteem moet 16-bit emulatie gebruiken om met PNPBIOS-methoden te kunnen samenwerken.</p></div><div class=paragraph><p>Het FreeBSD-stuurprogramma APM is gedocumenteerd in <a href="https://man.freebsd.org/cgi/man.cgi?query=apm&amp;sektion=4&amp;format=html">apm(4)</a>.</p></div></div><div class=sect2><h3 id=acpi-config>12.16.3. ACPI instellen<a class=anchor href=#acpi-config></a></h3><div class=paragraph><p>Het stuurprogramma <span class=filename>acpi.ko</span> wordt standaard geladen bij het opstarten door de <a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a> en hoeft <em>niet</em> gecompileerd te worden. De redenatie is dat er met modules gemakkelijker gewerkt kan worden, bijvoorbeeld een andere <span class=filename>acpi.ko</span> gebruiken zonder dat er een nieuwe kernel gebouwd moet worden. Dit heeft het voordeel dat testen eenvoudiger is. Een andere reden is dat het opstarten van ACPI nadat een systeem eenmaal volledig opgestart is meestal niet goed werkt. Mocht er hinder ondervonden worden, dan kan ACPI beter uitgeschakeld worden. Dit stuurprogramma kan niet gestopt worden als het eenmaal geladen is, omdat de systeembus het gebruikt voor allerlei interacties met hardware. ACPI kan uitgezet worden door het instellen van <code>hint.acpi.0.disabled="1"</code> in <span class=filename>/boot/loader.conf</span> of in de <a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a> prompt.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>ACPI en APM kunnen niet samenleven en moeten afzonderlijk en exclusief gebruikt worden. De laatste die gestart wordt bepaalt of het stuurprogramma de ander wel of niet ziet.</p></div></td></tr></tbody></table></div><div class=paragraph><p>In haar eenvoudigste vorm kan ACPI gebruikt worden om het systeem in slaapmodus te zetten met <a href="https://man.freebsd.org/cgi/man.cgi?query=acpiconf&amp;sektion=8&amp;format=html">acpiconf(8)</a> met de vlag <code>-s</code> en een optie <code>1-5</code>. De meeste gebruikers hebben alleen <code>1</code> of <code>3</code> nodig. De optie <code>5</code> verricht een "soft-off", wat hetzelfde is als:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># halt -p</span></code></pre></div></div><div class=paragraph><p>Andere opties zijn mogelijk via <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>. Zie de handleidingen van <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=acpiconf&amp;sektion=8&amp;format=html">acpiconf(8)</a> voor meer informatie.</p></div></div></div></div><div class=sect1><h2 id=ACPI-debug>12.17. FreeBSD ACPI gebruiken en debuggen<a class=anchor href=#ACPI-debug></a></h2><div class=sectionbody><div class=paragraph><p>ACPI is een totaal nieuwe manier om apparaten te ontdekken, om energieverbruik te beheren en om een gestandaardiseerde toegang te bieden tot allerlei apparaten die eerder via het BIOS beheerd werden. Er wordt voortdurend vooruitgang geboekt om ACPI op alle systemen te laten werken, maar bugs in de <em>ACPIMachine Language</em> (AML) bytecode van sommige moederborden, onvolledigheden in de subsystemen van de kernel van FreeBSD en bugs in de Intel® ACPI-CA interpreter blijven opduiken.</p></div><div class=paragraph><p>Deze tekst is bedoeld om u te helpen met het bijstaan van de FreeBSD ACPI beheerders met het vinden van de hoofdoorzaken van problemen die u opmerkt en met het debuggen en het vinden van een oplossing.</p></div><div class=sect2><h3 id=ACPI-submitdebug>12.17.1. Debuginformatie aanleveren<a class=anchor href=#ACPI-submitdebug></a></h3><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Voordat een probleem wordt gemeld, moet het zeker zijn dat de laatste BIOS versie draait en indien beschikbaar de geïntregeerde controller firmware versie.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Diegenen die meteen een probleem willen indienen, sturen de volgende informatie naar <a href=mailto:freebsd-acpi@FreeBSD.org></a><a href=mailto:freebsd-acpi@FreeBSD.org>freebsd-acpi@FreeBSD.org</a>:</p></div><div class=ulist><ul><li><p>Omschrijving van het foutieve gedrag, inclusief systeemtype en -model en alles wat de fout kan veroorzaken. Als het een nieuw fenomeen is, dan dient ook zo accuraat mogelijk aangegeven te worden wanneer de fout het eerst optrad.</p></li><li><p>De uitvoer van <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a> van <code>boot -v</code>, inclusief foutmeldingen die gegenereerd worden als de fout optreedt.</p></li><li><p>De uitvoer van <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a> van <code>boot -v</code> met ACPI uitgeschakeld, indien het uitzetten van ACPI het probleem oplost.</p></li><li><p>Uitvoer van <code>sysctl hw.acpi</code>. Dit is tevens een goede manier om uit te vinden welke ACPI-mogelijkheden een systeem heeft.</p></li><li><p>Een URL waar de <em>ACPISource Language</em> (ASL) gevonden kan worden. De ASL dient <em>niet</em> rechtstreeks naar de lijst gezonden te worden, omdat deze nogal groot kan zijn. Een kopie van een ASL kan gemaakt worden met het volgende commando:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># acpidump -dt &gt; naam-systeem.asl</span></code></pre></div></div><div class=paragraph><p>(Vervang uw aanmeldnaam door <span class=filename>$NAME</span> en producent/model door <span class=filename>$SYSTEM</span>. Bijvoorbeeld: <span class=filename>njl-FooCo6000.asl</span>)</p></div></li></ul></div><div class=paragraph><p>De meeste FreeBSD-programmeurs lezen de <a href=https://lists.FreeBSD.org/subscription/freebsd-current>FreeBSD-CURRENT mailinglijst</a>, maar problemen gaan bij voorkeur ook naar <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailinglijst</a> zodat ze zeker gezien worden. Het kan enige tijd duren voordat er antwoord komt, omdat deze mensen elders ook nog volledige banen hebben. Als de bug niet meteen duidelijk is, komt er waarschijnlijk en verzoek om een PR in te dienen via <a href="https://man.freebsd.org/cgi/man.cgi?query=send-pr&amp;sektion=1&amp;format=html">send-pr(1)</a>. Als er een PR moet worden opgesteld, dan dient alle hierboven gevraagde informatie vermeld te worden. Dit helpt om het probleem te kunnen volgen en oplossen. Het sturen van een PR zonder eerst <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailinglijst</a> te mailen is niet wenselijk, aangezien men PRs gebruikt als herinnering van bestaande problemen, niet als rapportagesysteem. Mogelijk is een probleem al eens door iemand anders gemeld.</p></div></div><div class=sect2><h3 id=ACPI-background>12.17.2. Achtergrond<a class=anchor href=#ACPI-background></a></h3><div class=paragraph><p>ACPI is aanwezig op alle moderne computers die voldoen aan de ia32 (x86), ia64 (Itanium) of amd64 (AMD) architecturen. De volledige standaard heeft vele mogelijkheden zoals CPU-prestatiebeheer, energiebeheer, thermische zones, diverse batterijsystemen, ingebedde controllers en busnummering. De meeste systemen implementeren minder dan de volledige standaard. Een desktopsysteem implementeert bijvoorbeeld meestal alleen busnummering, terwijl laptops mogelijk ook koeling- en batterijbeheer ondersteunen. Laptops hebben ook suspend en resume (slapen en wakker worden) met hun eigen aanverwante comlexiteit.</p></div><div class=paragraph><p>Een ACPI-compliant systeem heeft verscheidene componenten. Het BIOS- en chipsetverkopers bieden verscheidene vaste tabellen aan zoals FADT in het geheugen die zaken als de APIC-afbeelding (gebruikt voor SMP), configuratieregisters, en eenvoudige configuratiewaarden specificeren. Ook wordt er een tabel van bytecode (de <em>Differentiated System Description Table</em> of DSDT) geleverd die een op een boomstructuur lijkende namespace biedt voor apparaten en methoden.</p></div><div class=paragraph><p>Het stuurprogramma ACPI moet de voorgedefinieerde tabellen verwerken, een interpreter voor de bytecode implementeren en apparaatstuurprogramma’s en de kernel aanpassen om informatie van het ACPI-subsysteem te accepteren. Intel® heeft een interpreter beschikbaar gesteld (ACPI-CA) die door FreeBSD en ook door Linux® en NetBSD gebruikt wordt. De ACPI-CA-broncode staat in <span class=filename>src/sys/contrib/dev/acpica</span>. De lijmcode die ACPI-CA laat werken met FreeBSD staat in <span class=filename>src/sys/dev/acpica/Osd</span>. Stuurprogramma’s die verscheidene ACPI-apparaten implementeren staan in <span class=filename>src/sys/dev/acpica</span>.</p></div></div><div class=sect2><h3 id=ACPI-comprob>12.17.3. Algemene problemen<a class=anchor href=#ACPI-comprob></a></h3><div class=paragraph><p>Wil ACPI goed werken, dan moeten alle onderdelen goed werken. Hieronder staan enkele algemene problemen in volgorde van hoe vaak ze optreden en enkele mogelijke oplossingen of manieren om de problemen te vermijden.</p></div><div class=sect3><h4 id=_muisproblemen>12.17.3.1. Muisproblemen<a class=anchor href=#_muisproblemen></a></h4><div class=paragraph><p>Soms doet een muis het niet bij het opstarten uit de slaapstand. Een bekend lapmiddel is het toevoegen van <code>hint.psm.0.flags="0x3000"</code> aan <span class=filename>/boot/loader.conf</span>. Als dat niet werkt, dan wordt aangeraden een bugrapport in te sturen, zoals eerder is beschreven.</p></div></div><div class=sect3><h4 id=_suspendresume>12.17.3.2. Suspend/resume<a class=anchor href=#_suspendresume></a></h4><div class=paragraph><p>ACPI heeft drie slaapstanden waarbij het geheugen (RAM) wordt ingezet. Dit zijn de STR-toestanden <code>S1</code>-<code>S3</code>, en nog een slaap-met-gebruik-van-harde-schijf toestand (<code>STD</code>) die <code>S4</code> heet. <code>S5</code> is "zacht uit" en is de normale status van een systeem als het is aangesloten maar niet is aangezet. <code>S4</code> kan feitelijk op twee manieren geïmplementeerd worden: <code>S4</code>BIOS is een slaapstand naar schijf met behulp van het BIOS en <code>S4</code>OS wordt volledig door het besturingssysteem geïmplenteerd.</p></div><div class=paragraph><p>als eerste dienen de <code>sysctl hw.acpi</code> items die iets met de slaapstand te maken hebben gecontroleerd te worden. Hieronder staan de resultaten voor een Thinkpad:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>hw.acpi.supported_sleep_state: S3 S4 S5
hw.acpi.s4bios: 0</code></pre></div></div><div class=paragraph><p>Dit betekent dat hier <code>acpiconf -s</code> gebruikt kan worden om <code>S3</code>, <code>S4</code>OS en <code>S5</code> te testen. Als <code>s4bios</code> gelijk was aan (<code>1</code>), dan zou er <code>S4</code>BIOS ondersteuning zijn in plaats van <code>S4</code>OS.</p></div><div class=paragraph><p>Als suspend/resume getest moet worden, dient, indien ondersteund, bij <code>S1</code> begonnen te worden. Deze toestand heeft de grootste kans om te werken, omdat deze niet veel stuurprogrammaondersteuning vereist. Niemand heeft nog <code>S2</code> geïmplementeerd, maar het is ongeveer hetzelfde als <code>S1</code>. Daarna wordt <code>S3</code> getest. Dit is het diepste STR-niveau en heeft uitgebreide ondersteuning van stuurprogramma’s nodig om hardware goed opnieuw te kunnen starten. Mochten er blokkades optreden, dan kan naar de <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailinglijst</a> lijst gemaild worden. Er kan echter geen snelle oplossing verwacht worden, omdat er nog de nodige stuurprogramma’s/hardware liggen om getest en bewerkt te worden.</p></div><div class=paragraph><p>Een veelvoorkomend probleem met suspend/resume is dat veel apparaatstuurprogramma’s hun firmware, registers of apparaatgeheugen niet fatsoenlijk opslaan, herstellen, of herinitialiseren. Een eerste poging om het probleem te vinden omvat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl debug.bootverbose=1</span>
<span class=c># sysctl debug.acpi.suspend_bounce=1</span>
<span class=c># acpiconf -s 3</span></code></pre></div></div><div class=paragraph><p>Deze test emuleert de suspend/resume-cyclus van alle apparaten zonder daadwerkelijk naar de toestand <code>S3</code> te gaan. In sommige gevallen kunt u zo eenvoudig problemen vaststellen (bijvoorbeeld het verliezen van de firmware-toestand, timeout van de apparaatwaakhond, en steeds opnieuw iets proberen). Merk op dat het systeem niet werkelijk naar de toestand <code>S3</code> gaat, wat inhoudt dat apparaten geen spanning verliezen waardoor velen prima zullen werken zelfs als de suspend/resume-methoden geheel ontbreken, dit in tegenstelling tot de echte toestand <code>S3</code>.</p></div><div class=paragraph><p>Moeilijkere gevallen vereisen aanvullende hardware, dat is een serieële poort/kabel voor de serieële console of een Firewire poort/kabel voor <a href="https://man.freebsd.org/cgi/man.cgi?query=dcons&amp;sektion=4&amp;format=html">dcons(4)</a>, en vaardigheden in het debuggen van de kernel.</p></div><div class=paragraph><p>Om een probleem te kunnen isoleren helpt het om zoveel mogelijk stuurprogramma’s uit de kernel te halen. Als dit werkt, kan er teruggewerkt worden naar het stuurprogramma dat schuldig is aan het falen. Meestal vertonen binaire stuurprogramma’s als <span class=filename>nvidia.ko</span>, X11 beeldschermstuurprogramma’s en USB de meeste problemen, terwijl bijvoorbeeld Ethernet-interfaces meestal meteen goed werken. Als de stuurprogramma’s zonder problemen geladen en verwijderd kunnen worden, dan is dit te automatiseren door de juiste commando’s in <span class=filename>/etc/rc.suspend</span> en <span class=filename>/etc/rc.resume</span> te zetten. Er staat een voorbeeld (achter commentaartekens) voor het laden en verwijderen van een stuurprogramma. Als het beeldscherm er na wakker worden vreemd uitziet, kan geprobeerd worden <code>hw.acpi.reset_video</code> op nul te zetten. Met langere of kortere waarden voor <code>hw.acpi.sleep_delay</code> kan bekeken worden of dat helpt.</p></div><div class=paragraph><p>In geval van problemen is het ook een optie om een recente Linux® distibutie met ondersteuning voor ACPI support te starten en daarvan de suspend/resume ondersteuning op dezelfde hardware uit te proberen. Als het werkt met Linux®, dan is het waarschijnlijk een FreeBSD stuurprogrammaprobleem en als het mogelijk is uit te vinden over welk stuurprogramma het gaat, kan dat bijdragen aan het oplossen van het probleem. ACPI houdt zich in het algemeen niet bezig met andere stuurprogramma’s zoals geluid, ATA, enzovoort. Als er dus een echt probleem met een stuurprogramma is, dan is waarchijnlijk uiteindelijk ook nodig naar de <a href=https://lists.FreeBSD.org/subscription/freebsd-current>FreeBSD-CURRENT mailinglijst</a> lijst te posten en naar de beheerder van het stuurprogramma. Voor degenen met moed is het vooral aan te raden een paar <a href="https://man.freebsd.org/cgi/man.cgi?query=printf&amp;sektion=3&amp;format=html">printf(3)</a>s in problematische stukken van een stuurprogramma te plaatsen voor debugging om na te gaan waar de resumefunctie precies hangt.</p></div><div class=paragraph><p>Tot slot kan geprobeerd worden om ACPI uit te zetten en in plaats daarvan APM aan te zetten. Als suspend/resume werkt met APM, is het wellicht verstandig het daarbij te houden, vooral met wat oudere apparatuur (voor 2000). Producenten hebben nogal wat tijd nodig gehad om ACPI ondersteuning goed te krijgen en voor oudere hardware is het waarschijnlijker dat er BIOS-problemen zijn met ACPI.</p></div></div><div class=sect3><h4 id=_systeem_hangt_tijdelijk_of_permanent>12.17.3.3. Systeem hangt (tijdelijk of permanent)<a class=anchor href=#_systeem_hangt_tijdelijk_of_permanent></a></h4><div class=paragraph><p>Meestal is het hangen van het systeem het gevolg van verloren interrupts of een interruptstorm. Chipsets kunnen een heleboel problemen hebben, afhankelijk van hoe het BIOS interrupts instelt voor het opstarten, of de APIC (MADT) tabel correct is en de routering van het <em>System Control Interrupt</em> (SCI).</p></div><div class=paragraph><p>Interruptstorms kunnen onderscheiden worden van verloren geraakte interrupts door de uitvoer van <code>vmstat -i</code> te controleren en de regel met <code>acpi0</code> goed te lezen. Als de teller in toenemende mate hoger staat dan enkele per seconde, dan is sprake van een interruptstorm. Als het systeem lijkt te hangen, is het wellicht nog mogelijk door te dringen tot de DDB (<span class=keyseq><kbd>CTRL</kbd>+<kbd>ALT</kbd>+<kbd>ESC</kbd></span>) en <code>show interrupts</code> uit te voeren.</p></div><div class=paragraph><p>De beste hoop in geval van interruptproblemen is om APIC-ondersteuning uit te zetten met <code>hint.apic.0.disabled="1"</code> in <span class=filename>loader.conf</span>.</p></div></div><div class=sect3><h4 id=_panics>12.17.3.4. Panics<a class=anchor href=#_panics></a></h4><div class=paragraph><p>Panics zijn relatief zeldzaam met ACPI en krijgen de hoogste prioriteit bij het oplossen. Eerst moeten de verschillende gebeurtenissen waarmee de panic (als mogelijk) te reproduceren is geïsoleerd worden en moet een backtrace gemaakt worden. <code>options DDB</code> dient aangezet te worden en er dient een seriële console (<a href=../serialcomms/#serialconsole-ddb>De debugger DDB gebruiken via de seriële verbinding</a>) of een <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a> partitie te komen. In DDB is een backtrace te maken met <code>tr</code>. Als de backtrace handmatig opgeschreven moet worden, is het belangrijk dat in ieder geval de bovenste en onderste vijf (5) regels van de backtrace genoteerd worden.</p></div><div class=paragraph><p>Daarna dient getracht te worden het systeem te starten zonder ACPI. Als dat werkt, is het ACPI-subsysteem geïsoleerd en kunnen de verschillende <code>debug.acpi.disable</code>-waarden uitgeprobeerd worden. In <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a> staan enkele voorbeelden.</p></div></div><div class=sect3><h4 id=_systeem_slaat_aan_na_slaapstand_of_stop>12.17.3.5. Systeem slaat aan na slaapstand of stop<a class=anchor href=#_systeem_slaat_aan_na_slaapstand_of_stop></a></h4><div class=paragraph><p><code>hw.acpi.disable_on_poweroff="0"</code> kan uitgezet worden in <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a>. Hierdoor schakelt ACPI bepaalde gebeurtenissen tijdens het afsluitproces niet uit. Om dezelfde redenen moeten sommige systemen deze waarde altijd op <code>1</code> (standaard) hebben staan. In het algemeen lost dit een probleem op waarbij een systeem spontaan weer opkomt nadat het in slaapstand is gezet of geheel gestopt is.</p></div></div><div class=sect3><h4 id=_overige_problemen>12.17.3.6. Overige problemen<a class=anchor href=#_overige_problemen></a></h4><div class=paragraph><p>Als er nog andere problemen zijn met ACPI (met een docking station of apparaten niet gedetecteerd, enzovoort), dan kan een mail met beschijving naar de mailinglijst gezonden worden. Sommige zaken kunnen echter gerelateerd zijn aan delen van het ACPI-subsysteem die nog niet af zijn, dus het kan in sommige gevallen een tijd duren. Gebruikers moeten soms geduld en de bereidheid om eventuele patches uit te proberen hebben.</p></div></div></div><div class=sect2><h3 id=ACPI-aslanddump>12.17.4. ASL, <code>acpidump</code> en IASL<a class=anchor href=#ACPI-aslanddump></a></h3><div class=paragraph><p>Het grootste probleem is dat BIOS-producenten vaak incorrecte (of gewoon foutieve) bytecode leveren. Dit blijkt doorgaans uit kernelboodschappen als:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ACPI-1287: <span class=k>***</span> Error: Method execution failed <span class=o>[</span><span class=se>\\</span>_SB_.PCI0.LPC0.FIGD._STA] <span class=se>\\</span>
<span class=o>(</span>Node 0xc3f6d160<span class=o>)</span>, AE_NOT_FOUND</code></pre></div></div><div class=paragraph><p>Vaak kunnen dergelijke problemen geoplost worden door de BIOS bij te werken tot de laatste revisie. De meeste consoleberichten zijn onschuldig, maar als er andere problemen zijn, zoals batterijstatus die niet werkt, dan ligt het voor de hand te zoeken naar problemen in de AML-code. De bytecode die AML genoemd wordt, wordt gecompileerd van een broncodetaal ASL. Deze staat weer in een tabel DSDT. Met <a href="https://man.freebsd.org/cgi/man.cgi?query=acpidump&amp;sektion=8&amp;format=html">acpidump(8)</a> kan een kopie van de ASL gemaakt worden. Dan moeten zowel de opties <code>-t</code> (laat inhoud van vaste tabellen zien) als <code>-d</code> (disassembleer AML naar ASL) gebruikt worden. In <a href=#ACPI-submitdebug>Debuginformatie aanleveren</a> staat een voorbeeld.</p></div><div class=paragraph><p>De eenvoudigste eerste controle is de ASL-code opnieuw compileren en kijken of er foutmeldingen optreden. Waarschuwingen kunnen doorgaans genegeerd worden, maar fouten zijn bugs die er meestal toe leiden dat ACPI niet correct werkt. Om ASL te hercompileren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># iasl eigen.asl</span></code></pre></div></div></div><div class=sect2><h3 id=ACPI-fixasl>12.17.5. ASL repareren<a class=anchor href=#ACPI-fixasl></a></h3><div class=paragraph><p>Op langere termijn is het de bedoeling dat voor vrijwel elke machine ACPI werkt zonder enig ingrijpen van de gebruiker. Op dit moment wordt er echter nog gewerkt aan oplossingen voor veel voorkomende vergissingen die BIOS-producenten maken. De Microsoft® interpreter (<span class=filename>acpi.sys</span> en <span class=filename>acpiec.sys</span>) controleert niet strikt of het BIOS volledig aan de standaard voldoet, waardoor het voorkomt dat BIOS-makers die alleen testen onder Windows® bepaalde fouten in hun ASL nooit correct repareren. FreeBSD hoopt door te gaan met de identificatie en documentatie van welk niet-standaard gedrag precies wordt toegelaten door Microsoft®'s interpreter en te dit te repliceren zodat FreeBSD kan werken zonder dat gebruikers zich gedwongen zien om de ASL te repareren. Als een tijdelijke oplossing en om te helpen met het in kaart brengen van bepaald gedrag, kan de ASL handmatig gerepareerd worden. Mocht dit lukken, dan wordt erop aangedrongen een <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> van de oude en de nieuwe ASL te mailen, zodat het foutieve gedrag mogelijk in ACPI-CA kan worden verwerkt, waardoor andere gebruikers niet meer handmatig met hun ASL aan de gang hoeven.</p></div><div class=paragraph><p>Hieronder staat een lijst algemene foutmeldingen, hun oorzaken en hoe ze op te lossen:</p></div><div class=sect3><h4 id=_os_afhankelijkheden>12.17.5.1. _OS afhankelijkheden<a class=anchor href=#_os_afhankelijkheden></a></h4><div class=paragraph><p>Sommige AMLs gaan ervan uit dat de wereld enkel bestaat uit Windows® versies. FreeBSD kan zich voordoen als elk OS om te kijken of dit problemen oplost. Een gemakkelijke manier om dit te doen is <code>hw.acpi.osname="Windows 2001"</code> in te stellen in <span class=filename>/boot/loader.conf</span> of andere gelijksoortige strings die in een ASL staan.</p></div></div><div class=sect3><h4 id=_ontbrekende_return_opdrachten>12.17.5.2. Ontbrekende return-opdrachten<a class=anchor href=#_ontbrekende_return_opdrachten></a></h4><div class=paragraph><p>Sommige methoden hebben geen specifieke returnwaarde, zoals wel vereist wordt door de standaard. Hoewel ACPI-CA hier niets mee doet, heeft FreeBSD de mogelijkheid tot impliciete returns. Er kunnen ook expliciete return-opdrachten toegevoegd worden waar vereist, als het bekend is welke waarden teruggevoerd moeten worden. Om <code>iasl</code> te dwingen tot compilatie van ASL kan de schakeloptie <code>-f</code> gebruikt worden.</p></div></div><div class=sect3><h4 id=_de_standaard_aml_aanpassen>12.17.5.3. De standaard AML aanpassen<a class=anchor href=#_de_standaard_aml_aanpassen></a></h4><div class=paragraph><p>Nadat <span class=filename>eigen.asl</span> aangepast is, kan deze als volgt gecompileerd worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># iasl eigen.asl</span></code></pre></div></div><div class=paragraph><p>Met de optie <code>-f</code> is af te dwingen dat de AML gemaakt wordt, zelfs als er compileerfouten optreden. Sommige fouten (zoals ontbrekende return-opdrachten) worden automatisch opgelost door de interpreter.</p></div><div class=paragraph><p><span class=filename>DSDT.aml</span> is de standaardnaam voor het bestand dat door <code>iasl</code> wordt geproduceerd. Dit is in plaats van de foutieve versie uit het BIOS (die nog steeds aanwezig is in het flashgeneugen) te laden door <span class=filename>/boot/loader.conf</span> als volgt te wijzigen:</p></div><div class="literalblock programlisting"><div class=content><pre>acpi_dsdt_load=&#34;YES&#34;
acpi_dsdt_name=&#34;/boot/DSDT.aml&#34;</pre></div></div><div class=paragraph><p><span class=filename>DSDT.aml</span> moet in de map <span class=filename>/boot</span> staan.</p></div></div></div><div class=sect2><h3 id=ACPI-debugoutput>12.17.6. Debuguitvoer van ACPI verkrijgen<a class=anchor href=#ACPI-debugoutput></a></h3><div class=paragraph><p>Het stuurprogramma ACPI heeft een zeer flexibele debugfaciliteit. Er kan zowel een verzameling van subsystemen aangegeven worden als het niveau van uitvoerigheid. De te debuggen subsystemen worden aangegeven als lagen ("layers") en zijn opgedeeld in ACPI-CA-componenten (ACPI_ALL_COMPONENTS) en ACPI-hardware-ondersteuning (ACPI_ALL_DRIVERS). De uitvoerigheid van debuguitvoer wordt aangegeven als het niveau ("level") en gaat van CPI_LV_ERROR (alleen fouten rapporteren) tot ACPI_LV_VERBOSE (alles). Het niveau is een bitmasker en dus kunnen er meerdere opties tegelijk ingeschakeld worden (gescheiden door spaties). In de praktijk wordt wellicht een seriële console gebruikt om de uitvoer te loggen als deze zo omvangrijk is dat de console berichtbuffer vol loopt (misschien wel meerdere keren). Een complete lijst van de individuele lagen en niveaus staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a>.</p></div><div class=paragraph><p>Debuguitvoer staat standaard niet aan. Door <code>options ACPI_DEBUG</code> toe te voegen aan het bestand met kernelinstellingen als ACPI als de kernel is gebouwd, wordt het ingeschakeld. Door <code>ACPI_DEBUG=1</code> toe te voegen aan <span class=filename>/etc/make.conf</span> wordt het systeembreed ingeschakeld. Als ACPI als module wordt gebruikt (de normale situatie), dan hoeft slechts de module <span class=filename>acpi.ko</span> opnieuw gecompileerd te worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /sys/modules/acpi/acpi</span>
 make clean
make <span class=nv>ACPI_DEBUG</span><span class=o>=</span>1</code></pre></div></div><div class=paragraph><p><span class=filename>acpi.ko</span> moet in <span class=filename>/boot/kernel</span> komen te staan en de gewenste debuglaag en het gewenste niveau van uitvoerigheid dienen toegevoegd te worden aan <span class=filename>loader.conf</span>. Hieronder een voorbeeld waarmee debuguitvoer wordt aangezet voor alle ACPI-CA-componenten en alle ACPI-hardware-stuurprogramma’s (CPU, LID, enzovoort. Het niveau van uitvoerigheid is het laagst mogelijke. Er worden alleen fouten gemeld.</p></div><div class="literalblock programlisting"><div class=content><pre>debug.acpi.layer=&#34;ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS&#34;
debug.acpi.level=&#34;ACPI_LV_ERROR&#34;</pre></div></div><div class=paragraph><p>Als de gezochte informatie wordt veroorzaakt door een specifieke gebeurtenis (bijvoorbeeld in en uit slaapstand gaan), dan kunnen wijzigingen aan <span class=filename>loader.conf</span> achterwege blijven en in plaats daarvan kan <code>sysctl</code> gebruikt worden om laag en niveau in te stellen na het opstarten en zo het systeem voor te bereiden op die specifieke gebeurtenis. De <code>sysctl</code>s hebben dezelfde namen als de parameters in <span class=filename>loader.conf</span>.</p></div></div><div class=sect2><h3 id=ACPI-References>12.17.7. Verwijzingen<a class=anchor href=#ACPI-References></a></h3><div class=paragraph><p>Meer informatie over ACPI staat op de volgende locaties:</p></div><div class=ulist><ul><li><p>De <a href=https://lists.FreeBSD.org/subscription/freebsd-acpi>FreeBSD ACPI mailinglijst</a></p></li><li><p>De ACPI mailinglijst archieven <a href=http://lists.freebsd.org/pipermail/freebsd-acpi/>http://lists.freebsd.org/pipermail/freebsd-acpi/</a></p></li><li><p>De oude ACPI mailinglijst archieven <a href=http://home.jp.FreeBSD.org/mail-list/acpi-jp/>http://home.jp.FreeBSD.org/mail-list/acpi-jp/</a></p></li><li><p>De <a href=https://uefi.org/specifications#ACPI>ACPI specificatie</a></p></li><li><p>FreeBSD Handleidingen: <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi_thermal&amp;sektion=4&amp;format=html">acpi_thermal(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acpidump&amp;sektion=8&amp;format=html">acpidump(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=iasl&amp;sektion=8&amp;format=html">iasl(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acpidb&amp;sektion=8&amp;format=html">acpidb(8)</a></p></li><li><p><a href=http://www.cpqlinux.com/acpi-howto.html#fix_broken_dsdt>DSDT debugging informatie</a>. (Gebruikt Compaq als voorbeeld, maar van algemeen nut).</p></li></ul></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 maart 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/nl/books/handbook/partiii class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/nl/books/handbook/boot class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#config-synopsis>12.1. Overzicht</a></li><li><a href=#configtuning-initial>12.2. Initiële instellingen</a></li><li><a href=#configtuning-core-configuration>12.3. Hoofdinstellingen</a></li><li><a href=#configtuning-appconfig>12.4. Toepassingen instellen</a></li><li><a href=#configtuning-starting-services>12.5. Diensten starten</a></li><li><a href=#configtuning-cron>12.6. <code>cron</code> instellen</a></li><li><a href=#configtuning-rcd>12.7. Gebruik van rc met FreeBSD</a></li><li><a href=#config-network-setup>12.8. Netwerkkaarten instellen</a></li><li><a href=#configtuning-virtual-hosts>12.9. Virtuele hosts</a></li><li><a href=#configtuning-syslog>12.10. De systeemlogger syslogd configureren</a></li><li><a href=#configtuning-configfiles>12.11. Instellingenbestanden</a></li><li><a href=#configtuning-sysctl>12.12. Optimaliseren met sysctl</a></li><li><a href=#configtuning-disk>12.13. Harde schijven optimaliseren</a></li><li><a href=#configtuning-kernel-limits>12.14. Fijnafstemming van kernellimieten</a></li><li><a href=#adding-swap-space>12.15. Wisselbestandruimte toevoegen</a></li><li><a href=#acpi-overview>12.16. Energie- en bronnenbeheer</a></li><li><a href=#ACPI-debug>12.17. FreeBSD ACPI gebruiken en debuggen</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/nl/books/handbook/handbook_nl.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/nl/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/nl/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>Dutch</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/nl class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/nl/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>