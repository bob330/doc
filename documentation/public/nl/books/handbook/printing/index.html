<!doctype html><html class=theme-light lang=nl><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/nl/books/handbook/printing/><title>Hoofdstuk 10. Afdrukken | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Hoofdstuk 10. Afdrukken"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="nl"><meta property="og:url" content="http://172.16.201.134:1313/nl/books/handbook/printing/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/nl\/books\/handbook\/printing\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/nl>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/nl/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/nl/books>Books</a></li><li><a href=http://172.16.201.134:1313/nl/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/nl/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=nl>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/preface/>Voorwoord</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-audience>Bedoeld publiek</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-changes-from3>Wijzigingen ten opzichte van de derde editie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-changes-from2>Wijzigingen ten opzichte van de tweede editie (2004)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-changes>Veranderingen ten opzichte van de eerste editie (2001)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-overview>De opbouw van dit boek</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-conv>Overeenkomsten in dit boek</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/preface/#preface-acknowledgements>Dankwoorden</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/parti/>Deel I. Beginnen</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/>Hoofdstuk 1. Introductie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/#introduction-synopsis>1.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/#nutshell>1.2. Welkom bij FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/introduction/#history>1.3. Over het FreeBSD Project</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/install/>Hoofdstuk 2. FreeBSD installeren op FreeBSD 8.X en eerder</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-synopsis>2.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-hardware>2.2. Hardware-eisen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-pre>2.3. Voorbereidende taken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-start>2.4. Beginnen met de installatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#using-sysinstall>2.5. Inleiding Sysinstall</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-steps>2.6. Schijfruimte toewijzen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-choosing>2.7. Wat installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-media>2.8. Installatiemedia kiezen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-final-warning>2.9. De installatie bevestigen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-post>2.10. Instellingen na de installatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-trouble>2.11. Problemen oplossen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-advanced>2.12. Installeren voor gevorderden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/install/#install-diff-media>2.13. Aangepaste installatiemedia maken</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/bsdinstall/>Hoofdstuk 3. FreeBSD 9.X en nieuwer installeren</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/bsdinstall/#bsdinstall-synopsis>33.1. Overzicht</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/basics/>Hoofdstuk 4. UNIX® beginselen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-synopsis>4.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#consoles>4.2. Virtuele consoles en terminals</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#permissions>4.3. Rechten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#dirstructure>4.4. Mappenstructuur</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#disk-organization>4.5. Organisatie van schijven</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#mount-unmount>4.6. Het koppelen en ontkoppelen van bestandssystemen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-processes>4.7. Processen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-daemons>4.8. Daemons, signalen en het stoppen van processen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#shells>4.9. Shells</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#editors>4.10. Teksteditors</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-devices>4.11. Apparaten en apparaatnodes</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#binary-formats>4.12. Binaire formaten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/basics/#basics-more-information>4.13. Meer informatie</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/ports/>Hoofdstuk 5. Applicaties installeren: pakketten en ports</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-synopsis>5.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-overview>5.2. Overzicht van softwareinstallatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-finding-applications>5.3. Applicaties zoeken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#packages-using>5.4. Het pakkettensysteem gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-using>5.5. De Portscollectie gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-nextsteps>5.6. Activiteiten na het installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ports/#ports-broken>5.7. Omgaan met kapotte ports</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/x11/>Hoofdstuk 6. Het X Window systeem</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x11-synopsis>6.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-understanding>6.2. X begrijpen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-install>6.3. X11 installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-config>6.4. X11 instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-fonts>6.5. Lettertypen gebruiken in X11</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x-xdm>6.6. De X beeldschermmanager</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/x11/#x11-wm>6.7. Bureaubladomgevingen</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partii/>Deel II. Algemene taken</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/>Hoofdstuk 7. Bureaubladapplicaties</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-synopsis>7.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-browsers>7.2. Browsers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-productivity>7.3. Productiviteit</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-viewers>7.4. Documentviewers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-finance>7.5. Financiën</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/desktop/#desktop-summary>7.6. Samenvatting</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/>Hoofdstuk 8. Multimedia</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#multimedia-synopsis>8.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#sound-setup>8.2. Geluidskaart installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#sound-mp3>8.3. MP3 audio</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#video-playback>8.4. Video afspelen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#tvcard>8.5. TV-kaarten installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#mythtv>8.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/multimedia/#scanners>8.7. Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/>Hoofdstuk 9. De FreeBSD-kernel instellen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Samenvatting</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Redenen om een aangepaste kernel te bouwen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-devices>9.3. De systeemhardware vinden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Kernel stuurprogramma’s, subsystemen, en modules</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-building>9.5. Bouwen en installeren van een aangepaste kernel</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-config>9.6. Het instellingenbestand</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle checked>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/printing/>Hoofdstuk 10. Afdrukken</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-synopsis>10.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-intro-spooler>10.2. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-intro-setup>10.3. Standaardinstallatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-advanced>10.4. Geavanceerde printerinstallatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-using>10.5. Printers gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-lpd-alternatives>10.6. Alternatieven voor het standaard wachtrijsysteem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/printing/#printing-troubleshooting>10.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/>Hoofdstuk 11. Linux® binaire compatibiliteit</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Installatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Mathematica® installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-maple>11.4. Maple™ installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-matlab>11.5. MATLAB® installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-oracle>11.6. Oracle® installeren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu/#linuxemu-advanced>11.7. Gevorderde onderwerpen</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partiii/>Deel III. Systeembeheer</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/config/>Hoofdstuk 12. Instellingen en optimalisatie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#config-synopsis>12.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-initial>12.2. Initiële instellingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-core-configuration>12.3. Hoofdinstellingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-appconfig>12.4. Toepassingen instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-starting-services>12.5. Diensten starten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-cron>12.6. <code>cron</code> instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-rcd>12.7. Gebruik van rc met FreeBSD</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#config-network-setup>12.8. Netwerkkaarten instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-virtual-hosts>12.9. Virtuele hosts</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-syslog>12.10. De systeemlogger syslogd configureren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-configfiles>12.11. Instellingenbestanden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-sysctl>12.12. Optimaliseren met sysctl</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-disk>12.13. Harde schijven optimaliseren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#configtuning-kernel-limits>12.14. Fijnafstemming van kernellimieten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#adding-swap-space>12.15. Wisselbestandruimte toevoegen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#acpi-overview>12.16. Energie- en bronnenbeheer</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/config/#ACPI-debug>12.17. FreeBSD ACPI gebruiken en debuggen</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/boot/>Hoofdstuk 13. Het FreeBSD opstartproces</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-synopsis>13.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-introduction>13.2. Het bootprobleem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-blocks>13.3. De bootmanager en opstartstadia</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-kernel>13.4. Interactie met de kernel tijdens opstarten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#device-hints>13.5. Device hints</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-init>13.6. Init: start van procesbesturing</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/boot/#boot-shutdown>13.7. Afsluitvolgorde</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/users/>Hoofdstuk 14. Gebruikers- en basisaccountbeheer</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-synopsis>14.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-introduction>14.2. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-superuser>14.3. Het superuser-account</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-system>14.4. Systeemaccounts</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-user>14.5. Gebruikersaccounts</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-modifying>14.6. Accounts wijzigen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-limiting>14.7. Gebruikers beperken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/users/#users-groups>14.8. Groepen</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/security/>Hoofdstuk 15. Beveiliging</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-synopsis>15.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-intro>15.2. Introductie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#securing-freebsd>15.3. FreeBSD beveiligen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 en crypt</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#one-time-passwords>15.5. Eenmalige wachtwoorden</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#kerberos5>15.7. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#openssl>15.8. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#ipsec>15.9. VPN via IPsec</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#openssh>15.10. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#fs-acl>15.11. Bestandssysteem toegangscontrolelijsten (ACLs)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-portaudit>15.12. Monitoren van beveiligingsproblemen met andere software</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-advisories>15.13. FreeBSD beveiligingswaarschuwingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/security/#security-accounting>15.14. Procesaccounting</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/jails/>Hoofdstuk 16. Jails</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-synopsis>16.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-terms>16.2. Termen en begrippen van jails</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-intro>16.3. Introductie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-build>16.4. Creeëren en controleren van jails</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-tuning>16.5. Optimaliseren en administratie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/jails/#jails-application>16.6. Toepassing van jails</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/mac/>Hoofdstuk 17. Verplichte Toegangscontrole (MAC)</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-synopsis>17.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-inline-glossary>17.2. Sleuteltermen in dit hoofdstuk</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-initial>17.3. Uitleg over MAC</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-understandlabel>17.4. MAC-labels begrijpen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-planning>17.5. De beveiligingsconfiguratie plannen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-modules>17.6. Module-instellingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-seeotheruids>17.7. MAC-module seeotheruids</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-bsdextended>17.8. MAC-module bsdextended</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-ifoff>17.9. MAC-module ifoff</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-portacl>17.10. MAC-module portacl</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-partition>17.11. MAC-module partition</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-mls>17.12. MAC-module Multi-Level Security</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-biba>17.13. MAC-module Biba</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-lomac>17.14. MAC-module LOMAC</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-implementing>17.15. Nagios in een MAC-jail</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-userlocked>17.16. Gebruikers afsluiten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mac/#mac-troubleshoot>17.17. Problemen oplossen met het MAC-raamwerk</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/audit/>Hoofdstuk 18. Security Event Auditing</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-synopsis>18.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-inline-glossary>18.2. Sleutelwoorden in dit hoofdstuk</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-install>18.3. Installeren van audit ondersteuning.</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-config>18.4. Audit Configuratie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/audit/#audit-administration>18.5. Het audit subsysteem beheren.</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/disks/>Hoofdstuk 19. Opslag</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-synopsis>19.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-naming>19.2. Apparaatnamen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-adding>19.3. Schijven toevoegen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#raid>19.4. RAID</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#usb-disks>19.5. USB-opslagapparaten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#creating-cds>19.6. Optische media (CD’s) aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#creating-dvds>19.7. Optische media (DVD’s) aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#floppies>19.8. Diskettes aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backups-tapebackups>19.9. Gegevensbanden aanmaken en gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backups-floppybackups>19.10. Naar diskettes back-uppen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backup-strategies>19.11. Back-up strategieën</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#backup-basics>19.12. Back-upbeginselen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-virtual>19.13. Netwerk-, geheugen-, en bestandsgebaseerde bestandssystemen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#snapshots>19.14. Snapshots van bestandssystemen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#quotas>19.15. Bestandssysteemquota</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-encrypting>19.16. Schijfpartities versleutelen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#swap-encrypting>19.17. Het versleutelen van de wisselbestand ruimte</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/disks/#disks-hast>19.18. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/geom/>Hoofdstuk 20. GEOM: Modulair schijftransformatie raamwerk</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-synopsis>20.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-intro>20.2. GEOM inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-striping>20.3. RAID0 - aaneengeschakeld</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-mirror>20.4. RAID1 - spiegelen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#GEOM-raid3>20.5. RAID3 - Striping op byte-niveau met toegewijde pariteit</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-ggate>20.6. GEOM Gate netwerk apparaten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-glabels>20.7. Het labelen van schijven</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/geom/#geom-gjournal>20.8. UFS logboeken door middel van GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/>Hoofdstuk 21. Ondersteuning van bestandssystemen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/#filesystems-synopsis>21.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/#filesystems-zfs>21.2. Het Z File System (ZFS)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/filesystems/#filesystems-linux>21.3. Linux® bestandssystemen</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/>Hoofdstuk 22. Virtualisatie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/#virtualization-synopsis>22.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/#virtualization-guest>22.2. FreeBSD als een gast-besturingssysteem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/virtualization/#virtualization-host>22.3. FreeBSD als een gastheer-besturingssysteem</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/>Hoofdstuk 23. Lokalisatie - I18N/L10N gebruiken en instellen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#l10n-synopsis>23.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#l10n-basics>23.2. Beginselen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#using-localization>23.3. Lokalisatie gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#l10n-compiling>23.4. I18N-programma’s compileren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/l10n/#lang-setup>23.5. FreeBSD lokaliseren naar talen</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/>Hoofdstuk 24. FreeBSD updaten en upgraden</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. FreeBSD Update</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. Portsnap: een updategereedschap voor de Portscollectie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. De documentatie bijwerken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#current-stable>24.5. Een ontwikkelingstak volgen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#synching>24.6. Broncode synchroniseren</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#makeworld>24.7. De "wereld" opnieuw bouwen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#make-delete-old>24.8. Het verwijderen van overbodige bestanden, directories en bibliotheken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/cutting-edge/#small-lan>24.9. Meerdere machines bijwerken</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/>Hoofdstuk 25. DTrace</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-synopsis>25.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-implementation>25.2. Implementatieverschillen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-enable>25.3. Ondersteuning voor DTrace aanzetten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-using>25.4. DTrace gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/dtrace/#dtrace-language>25.5. De taal D</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partiv/>Deel IV. Netwerkcommunicatie</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/>Hoofdstuk 26. Seriële communicatie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#serial-synopsis>26.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#serial>26.2. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#term>26.3. Terminals</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#dialup>26.4. Inbeldienst</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#dialout>26.5. Uitbeldienst</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/serialcomms/#serialconsole-setup>26.6. Seriële console opzetten</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/>Hoofdstuk 27. PPP en SLIP</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#userppp>27.2. Gebruikmaken van gebruiker-PPP</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#ppp>27.3. Kernel-PPP gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. Het problemen oplossen van PPP-verbindingen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#pppoe>27.5. PPP gebruiken over Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#pppoa>27.6. Gebruik maken van PPP over ATM (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/ppp-and-slip/#slip>27.7. Gebruik maken van SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/mail/>Hoofdstuk 28. Elektronische mail</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-synopsis>28.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-using>28.2. Gebruik maken van elektronische mail</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#sendmail>28.3. sendmail instellen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-changingmta>28.4. De Mail Transfer Agent vervangen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-trouble>28.5. Problemen oplossen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-advanced>28.6. Geavanceerde onderwerpen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#SMTP-UUCP>28.7. SMTP met UUCP</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#outgoing-only>28.8. Instellen om alleen te versturen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#SMTP-dialup>28.9. Mail gebruiken met een inbelverbinding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#SMTP-Auth>28.10. SMTP-authenticatie</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-agents>28.11. Mail User Agents</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-fetchmail>28.12. fetchmail gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mail/#mail-procmail>28.13. procmail gebruiken</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/>Hoofdstuk 29. Netwerkdiensten</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-servers-synopsis>29.1. Overzicht</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-inetd>29.2. De inetd"Super-Server"</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-nfs>29.3. Netwerkbestandssysteem (NFS)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-nis>29.4. Netwerkinformatiesysteem (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-dhcp>29.5. Automatisch netwerk instellen (DHCP)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-dns>29.6. Domeinnaamsysteem (DNS)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-apache>29.7. Apache HTTP server</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-ftp>29.8. File Transfer Protocol (FTP)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-samba>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-ntp>29.10. Tijd synchroniseren met NTP</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/network-servers/#network-syslogd>29.11. Hosts op afstand loggen met <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/>Hoofdstuk 30. Firewalls</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-intro>30.1. Inleiding</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-concepts>30.2. Firewallconcepten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-apps>30.3. Firewallsoftware</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-pf>30.4. De OpenBSD Packet Filter (PF) en ALTQ</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-ipf>30.5. De IPFILTER (IPF) firewall</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/>Hoofdstuk 31. Geavanceerde netwerken</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Samenvatting</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-routing>31.2. Gateways en routes</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-wireless>31.3. Draadloze netwerken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-bridging>31.5. Bridging</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-aggregation>31.6. Verbindingsaggregatie en failover</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-diskless>31.7. Schijfloos werken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-pxe-nfs>31.8. Met PXE en een NFS-root-bestandssysteem opstarten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-isdn>31.9. ISDN</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-natd>31.10. Network Address Translation</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-ipv6>31.11. IPv6</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#network-atm>31.12. Asynchronous Transfer Mode (ATM)</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/advanced-networking/#carp>31.13. Common Address Redundancy Protocol (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/partv/>Deel V. Appendix</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/>Bijlage A. FreeBSD verkrijgen</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-cdrom>A.1. CD-ROM en DVD uitgevers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-ftp>A.2. FTP sites</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-svn>A.3. Subversion-sites</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#anoncvs>A.4. Anonieme CVS</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#ctm>A.5. CTM gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#cvsup>A.6. CVSup gebruiken</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#cvs-tags>A.7. CVS labels</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/mirrors/#mirrors-rsync>A.8. rsync sites</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/>Bijlage B. Bibliografie</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-freebsd>B.1. Boeken & tijdschriften over FreeBSD</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-userguides>B.2. Voor gebruikers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-adminguides>B.3. Voor beheerders</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-programmers>B.4. Voor programmeurs</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-osinternals>B.5. Dieper in het besturingssysteem</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-security>B.6. Over beveiliging</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-hardware>B.7. Over hardware</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-history>B.8. UNIX® geschiedenis</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/bibliography/#bibliography-journals>B.9. Tijdschriften en periodieken</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/>Bijlage C. Bronnen op Internet</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-mail>C.1. Mailinglijsten</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-news>C.2. Usenet-nieuwsgroepen</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-web>C.3. World wide webservers</a></li><li><a href=http://172.16.201.134:1313/nl/books/handbook/eresources/#eresources-email>C.4. Email-adressen</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/nl/books/handbook/pgpkeys/>Bijlage D. PGP sleutels</a><ul><li><a href=http://172.16.201.134:1313/nl/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Beambten</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Hoofdstuk 10. Afdrukken</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#printing-synopsis>10.1. Overzicht</a></li><li><a href=#printing-intro-spooler>10.2. Inleiding</a></li><li><a href=#printing-intro-setup>10.3. Standaardinstallatie</a></li><li><a href=#printing-advanced>10.4. Geavanceerde printerinstallatie</a></li><li><a href=#printing-using>10.5. Printers gebruiken</a></li><li><a href=#printing-lpd-alternatives>10.6. Alternatieven voor het standaard wachtrijsysteem</a></li><li><a href=#printing-troubleshooting>10.7. Problemen oplossen</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=printing-synopsis>10.1. Overzicht<a class=anchor href=#printing-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD kan gebruikt worden om op een scala aan printers af te drukken, van de oudste matrixprinter tot de nieuwste laserprinters en alles er tussenin, waardoor op hoge kwaliteit afgedrukt kan worden vanuit de gebruikte programma’s.</p></div><div class=paragraph><p>FreeBSD kan ook ingesteld worden als printserver in een netwerk. Dan kan FreeBSD afdrukopdrachten ontvangen van uiteenlopende computers, waaronder FreeBSD computers, Windows® en Mac OS® hosts. FreeBSD zorgt ervoor dat er één afdrukopdracht per keer wordt afgedrukt, houdt statistieken bij van gebruikers en computers die de meeste afdrukken maken, drukt "voorbladen" af, zodat duidelijk is van wie de afdruk is en nog veel meer.</p></div><div class=paragraph><p>Na het lezen van dit hoofdstuk weet de lezer:</p></div><div class=ulist><ul><li><p>Hoe het FreeBSD afdrukwachtrijsysteem moet worden ingesteld;</p></li><li><p>Hoe afdrukfilters kunnen worden geïnstalleerd, om bepaalde afdrukopdrachten op een andere manier af te handelen, zoals het omzetten van documenten naar formaten die een printer begrijpt;</p></li><li><p>Hoe voorbladen kunnen worden afgedrukt;</p></li><li><p>Hoe er op printers die op andere computers zijn aangesloten kan worden afgedrukt;</p></li><li><p>Hoe er op printers die direct op het netwerk zijn aangesloten kan worden afgedrukt;</p></li><li><p>Hoe afdrukbeperkingen kunnen worden opgelegd, zoals het beperken van de grootte van de afdrukopdracht, en bepaalde gebruikers verbieden af te drukken;</p></li><li><p>Hoe afdrukstatistieken kunnen worden bijgehouden en het printergebruik in de gaten kan worden gehouden;</p></li><li><p>Hoe problemen met afdrukken kunnen worden opgelost.</p></li></ul></div><div class=paragraph><p>Aangeraden voorkennis:</p></div><div class=ulist><ul><li><p>Hoe een nieuwe kernel wordt ingesteld, gebouwd en geïnstalleerd (<a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=printing-intro-spooler>10.2. Inleiding<a class=anchor href=#printing-intro-spooler></a></h2><div class=sectionbody><div class=paragraph><p>Om printers onder FreeBSD te kunnen gebruiken moeten ze kunnen werken met het Berkeley lijnafdrukwachtrijsysteem, ook wel bekend als het wachtrijsysteem LPD of simpelweg LPD. Dit is het standaard afdruksysteem onder FreeBSD. Dit hoofdstuk introduceert LPD en begeleidt bij het instellen.</p></div><div class=paragraph><p>Als de gebruiker al bekend is met LPD of een ander afdrukwachtrijsysteem, dan kan verder worden lezen vanaf <a href=#printing-intro-setup>Standaardinstallatie</a>.</p></div><div class=paragraph><p>LPD regelt alles met betrekking tot de printer van een host. Het is verantwoordelijk voor een aantal zaken:</p></div><div class=ulist><ul><li><p>Het regelt de toegang tot aangesloten printers en printers die op andere hosts op het netwerk zijn aangesloten;</p></li><li><p>Het geeft gebruikers de mogelijkheid bestanden aan te bieden die afgedrukt moeten worden; deze aangeboden bestanden worden <em>afdrukopdrachten</em> genoemd;</p></li><li><p>Het voorkomt dat gebruikers tegelijkertijd een printer benaderen door een <em>wachtrij</em> bij te houden voor elke printer;</p></li><li><p>Het kan <em>voorbladen</em> afdrukken (in het Engels ook wel bekend als <em>banner</em>, of <em>burst</em> pagina’s) zodat gebruikers hun afdruk tussen andere afdrukken makkelijk terug kunnen vinden;</p></li><li><p>Het handelt de communicatie af voor printers die op een seriële poort zijn aangesloten;</p></li><li><p>Het kan afdrukopdrachten over een netwerk versturen naar een LPD wachtrij op een andere host;</p></li><li><p>Het kan speciale filters aanroepen die afdrukopdrachten converteren voor verschillende printertalen of afdrukmogelijkheden;</p></li><li><p>Het houdt statistieken bij van het printergebruik.</p></li></ul></div><div class=paragraph><p>Middels een instellingenbestand (<span class=filename>/etc/printcap</span>) en door speciale filters beschikbaar te stellen, kan het LPD systeem alle, of enkele van bovenstaande taken uitvoeren op een grote verscheidenheid aan afdrukhardware.</p></div><div class=sect2><h3 id=printing-intro-why>10.2.1. Waarom het wachtrijsysteem gebruikt zou moeten worden<a class=anchor href=#printing-intro-why></a></h3><div class=paragraph><p>Het wachtrijsysteem biedt nog steeds voordelen op een systeem met een enkele gebruiker en dient gebruikt te worden omdat:</p></div><div class=ulist><ul><li><p>LPD afdrukopdrachten in de achtergrond afhandelt. Dan is het niet nodig te wachten tot de gegevens naar de printer zijn verzonden;</p></li><li><p>LPD op eenvoudige wijze een afdrukopdracht door een filter kan afdrukken om kopteksten met datum/tijd toe te voegen of een speciaal bestandsformaat (zoals een TeX DVI-bestand) om te zetten naar een formaat dat de printer begrijpt. Deze handelingen hoeven dan niet handmatig uitgevoerd te worden;</p></li><li><p>Veel gratis en commerciële software met een afdrukfunctie verwacht dat er een wachtrijsysteem aanwezig is op een systeem om afdrukopdrachten naar te sturen. Door een wachtrijsysteem op te zetten, wordt toekomstig te installeren of reeds geïstalleerde software op eenvoudige wijze ondersteund.</p></li></ul></div></div></div></div><div class=sect1><h2 id=printing-intro-setup>10.3. Standaardinstallatie<a class=anchor href=#printing-intro-setup></a></h2><div class=sectionbody><div class=paragraph><p>Om printers met het LPD wachtrijsysteem te kunnen gebruiken, dienen zowel de printerhardware als de LPD software geïnstalleerd te worden. Dit document beschrijft deze installatie in twee stappen:</p></div><div class=ulist><ul><li><p>In het onderdeel <a href=#printing-simple>Eenvoudige printerinstallatie</a> staat hoe een printer moet worden aangesloten, hoe LPD er mee kan communiceren en hoe tekstbestanden afgedrukt kunnen worden.</p></li><li><p>In <a href=#printing-advanced>Geavanceerde printerinstallatie</a> staat beschreven hoe een scala aan bestandsformaten afgedrukt kan worden, hoe voorbladen kunnen worden afgedrukt en hoe statistieken van de printer kunnen worden bijgehouden.</p></li></ul></div><div class=sect2><h3 id=printing-simple>10.3.1. Eenvoudige printerinstallatie<a class=anchor href=#printing-simple></a></h3><div class=paragraph><p>Nu wordt toegelicht hoe de printerhardware en de LPD software ingesteld moeten worden om een printer te kunnen gebruiken. Het behandelt de basis:</p></div><div class=ulist><ul><li><p><a href=#printing-hardware>Hardware-instellingen</a> geeft een aantal aanwijzingen voor het aansluiten van een printer op een poort van een computer.</p></li><li><p><a href=#printing-software>Software-instellingen</a> toont hoe het instellingenbestand (<span class=filename>/etc/printcap</span>) voor het LPD-systeem moet worden opgezet.</p></li></ul></div><div class=paragraph><p>Hoe een printer geïnstalleerd moet worden die via een netwerkprotocol gegevens ontvangt, in plaats van een seriële of parallelle poort, staat in <a href=#printing-advanced-network-net-if>Printers met netwerkinterfaces</a>.</p></div><div class=paragraph><p>Hoewel dit onderdeel "Eenvoudige printerinstallatie" heet, is het redelijk complex. De printer met de computer en het LPD-systeem laten samenwerken is het moeilijkste. De geavanceerde opties, zoals voorbladen en statistieken, zijn relatief makkelijk als de printer eenmaal werkt.</p></div><div class=sect3><h4 id=printing-hardware>10.3.1.1. Hardware-instellingen<a class=anchor href=#printing-hardware></a></h4><div class=paragraph><p>Hier worden de verschillende manieren waarop een printer op een computer kan worden aangesloten beschreven. Het bespreekt de soorten poorten en kabels en de kernelinstellingen die nodig kunnen zijn om FreeBSD met een printer te laten communiceren.</p></div><div class=paragraph><p>Als een printer al is aangesloten en succesvol is gebruikt onder een ander besturingssysteem, dan kan waarschijnlijk verder gelezen worden in <a href=#printing-software>Software-instellingen</a>.</p></div><div class=sect4><h5 id=printing-ports>10.3.1.1.1. Poorten en kabels<a class=anchor href=#printing-ports></a></h5><div class=paragraph><p>De printers die tegenwoordig voor PC’s verkocht worden hebben eigenlijk altijd een van de volgende drie poorten:</p></div><div class=ulist><ul><li><p><em>Seriële</em> poort, ook bekend als RS-232- of COM-poorten, gebruiken een seriële poort op een computer om gegevens naar een printer te sturen. Seriële poorten zijn heel gebruikelijk in de computerindustrie en kabels zijn eenvoudig verkrijgbaar en makkelijk te maken. Seriële poorten hebben soms speciale kabels nodig en vereisen soms het instellen van ingewikkelde communicatieparameters. De meeste seriële poorten hebben een maximale doorvoersnelheid van 115.200 bps waardoor het afdrukken van grote grafische afdrukopdrachten erg onpraktisch wordt.</p></li><li><p><em>Parallelle</em> poorten gebruiken een parallelle poort op een computer om gegevens naar een printer te sturen. Parallelle poorten zijn gebruikelijk in de PC-markt en zijn sneller dan RS-232 serieel. Kabels zijn goed verkrijgbaar, maar moeilijker handmatig te vervaardigen. Meestal zijn er geen communicatieparameters bij parallelle poorten, wat het instellen erg eenvoudig maakt.</p><div class=paragraph><p>Parallelle poorten staan ook wel bekend als "Centronics" poorten, genoemd naar het soort aansluiting op de printer.</p></div></li><li><p>USB poorten, genoemd naar de Universal Serial Bus, kunnen zelfs op nog hogere snelheid werken dan parallelle of RS-232 seriële poorten. De kabels zijn eenvoudig en goedkoop. USB is voor afdrukken superieur aan RS-232 Serieel en Parallel, maar wordt op UNIX®-systemen niet altijd goed ondersteund. Een van de manieren om dit te omzeilen is de aanschaf van een printer met zowel een USB als een parallelle poort, zoals veel printers die hebben.</p></li></ul></div><div class=paragraph><p>Over het algemeen kunnen parallelle poorten meestal in één richting communiceren (van computer naar printer), terwijl seriële en USB poorten in twee richtingen kunnen communiceren. Nieuwere parallelle poorten (EPP en ECP) en printers kunnen onder FreeBSD in beide richtingen communiceren, mits een IEEE-1284 gekeurde kabel wordt gebruikt.</p></div><div class=paragraph><p>Tweewegcommunicatie met een printer over een parallelle poort verloopt meestal op een van de volgende twee manieren. De eerste manier is door gebruik te maken van een op maat gemaakt stuurprogramma voor FreeBSD dat de taal spreekt die door de printer wordt gebruikt. Dit geldt meestal voor inkjet printers en er kan dan gebruikt gemaakt worden van rapportagemogelijkheden over bijvoorbeeld inktniveaus en andere statusinformatie. De tweede methode wordt gebruikt als een printer PostScript® ondersteunt.</p></div><div class=paragraph><p>PostScript®-taken zijn eigenlijk programma’s die naar de printer worden gestuurd. Het hoeft zelfs niet in een afdruk te resulteren; het resultaat van de opdracht kan direct weer naar de computer worden gestuurd. PostScript® gebruikt ook tweewegcommunicatie om een computer op de hoogte te stellen van opgetreden fouten, zoals fouten in het PostScript®-programma of vastgelopen papier. Gebruikers kunnen dit soort informatie handig vinden. De beste manier om bij een PostScript®-printer effectief bij te houden wat het printergebruik is, vraagt om tweewegcommunicatie: de printer wordt gevraagd om het totaal aantal afgedrukt pagina’s, de afdrukopdracht wordt verzonden en vervolgens wordt nogmaals om het totaal aantal afgedrukte pagina’s gevraagd. Het verschil van deze getallen geeft het aantal afgedrukte pagina’s van de afdrukopdracht van de betreffende gebruiker.</p></div></div><div class=sect4><h5 id=printing-parallel>10.3.1.1.2. Parallelle poorten<a class=anchor href=#printing-parallel></a></h5><div class=paragraph><p>Om een printer met een parallelle poort aan te sluiten, moet een Centronics kabel de printer met de computer verbinden. De instructies die geleverd zijn bij de printer, de computer of beide, moeten voldoende zijn om dit te verduidelijken.</p></div><div class=paragraph><p>Onthoud op welke parallelle poort de printer is aangesloten. De eerste parallelle poort heet onder FreeBSD <span class=filename>ppc0</span>, de tweede <span class=filename>ppc1</span>, enzovoort. De benaming voor de printer gaat analoog: <span class=filename>/dev/lpt0</span> voor de printer op de eerste parallelle poort enzovoort.</p></div></div><div class=sect4><h5 id=printing-serial>10.3.1.1.3. Seriële poorten<a class=anchor href=#printing-serial></a></h5><div class=paragraph><p>Gebruik de juiste seriële kabel om een printer met een seriële poort op een computer aan te sluiten. De instructies die geleverd zijn bij de printer, de computer of beide, moeten voldoende zijn om dit te verduidelijken.</p></div><div class=paragraph><p>Als onduidelijk is wat de "juiste seriële kabel" is, kan een van onderstaande opties geprobeerd worden:</p></div><div class=ulist><ul><li><p>Een <em>modem</em>kabel verbindt elke pin van de stekker aan het ene eind direct met de corresponderende pin van de stekker aan het andere eind. Dit type kabel heet ook wel een "DTE-naar-DCE"-kabel.</p></li><li><p>Een <em>null-modem</em> kabel verbindt enkele pinnetjes direct, verwisselt andere (bijvoorbeeld van verstuur gegevens naar ontvang gegevens) en sluit sommige draden kort in de stekker. Dit type kabel heet ook wel een "DTE-to-DTE"-kabel.</p></li><li><p>Een <em>seriële printer</em>kabel, nodig bij sommige ongebruikelijke printers, is als een null-modem kabel, maar stuurt sommige signalen naar hun tegenhangers in plaats van ze intern kort te sluiten.</p></li></ul></div><div class=paragraph><p>Het is ook nodig de communicatieparameters voor de printer in te stellen, meestal via het bedieningspaneel of middels DIP-schakelaars op de printer. Selecteer de hoogste <code>bps</code> (bits per seconde, soms <em>baud</em>) die zowel door de computer als de printer wordt ondersteund. Kies 7 of 8 data bits. Geen, even of oneven pariteit en 1 of 2 stop bits. Selecteer ook het flow-control protocol: ofwel geen, ofwel XON/XOFF (ook bekend als "in-band" of "software") flow-control. Onthoud deze instellingen voor de hier op volgende software-instellingen.</p></div></div></div><div class=sect3><h4 id=printing-software>10.3.1.2. Software-instellingen<a class=anchor href=#printing-software></a></h4><div class=paragraph><p>Nu wordt beschreven welke software-instellingen nodig zijn om onder FreeBSD af te drukken met behulp van het wachtrijsysteem LPD.</p></div><div class=paragraph><p>Een overzicht van de te doorlopen stappen:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Maak, indien nodig, de kernel geschikt voor de poort die door de printer wordt gebruikt. In <a href=#printing-kernel>Kernelinstellingen</a> is te lezen hoe dit gedaan kan worden.</p></li><li><p>Stel de communicatievorm voor de parallelle poort in, als gebruik wordt gemaakt van een parallelle printer. In <a href=#printing-parallel-port-mode>Communicatietype instellen voor een parallelle poort</a> staan de details.</p></li><li><p>Test of het besturingssysteem gegevens naar de printer kan sturen. In <a href=#printing-testing>Printercommunicatie controleren</a> staat een aantal suggesties.</p></li><li><p>Stel LPD in voor de printer door <span class=filename>/etc/printcap</span> aan te passen. Dat wordt later in het hoofdstuk beschreven.</p></li></ol></div></div></div><div class=sect4><h5 id=printing-kernel>10.3.1.2.1. Kernelinstellingen<a class=anchor href=#printing-kernel></a></h5><div class=paragraph><p>Het besturingssysteem is gecompileerd om met een beperkte verzameling apparaten te kunnen werken. De seriële en parallelle poorten zijn onderdeel van deze verzameling. Daarom kan het nodig zijn om ondersteuning voor een extra seriële of parallelle poort toe te voegen als een kernel hier nog niet voor is ingesteld.</p></div><div class=paragraph><p>Om te achterhalen of de huidige kernel een seriële poort ondersteunt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># grep sioN /var/run/dmesg.boot</span></code></pre></div></div><div class=paragraph><p>Hier is <em>N</em> het aantal seriële poorten, beginnende bij nul. Als de uitvoer op het volgende lijkt, dan wordt de poort door de kernel ondersteund:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>sio2 at port 0x3e8-0x3ef irq 5 on isa
sio2: <span class=nb>type </span>16550A</code></pre></div></div><div class=paragraph><p>Om te achterhalen of de kernel een parallelle poort ondersteunt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># grep ppcN /var/run/dmesg.boot</span></code></pre></div></div><div class=paragraph><p>Hier is <em>N</em> het aantal parallelle poorten beginnende bij nul. Als de uitvoer er ongeveer als volgt uit ziet, dan wordt de poort door de kernel ondersteund:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset <span class=o>(</span>ECP/EPP/PS2/NIBBLE<span class=o>)</span> <span class=k>in </span>COMPATIBLE mode
ppc0: FIFO with 16/16/8 bytes threshold</code></pre></div></div><div class=paragraph><p>Het kan nodig zijn een kernel aan te passen om het besturingssysteem in staat te stellen een parallelle of seriële poort die voor een printer wordt gebruikt te herkennen en te gebruiken.</p></div><div class=paragraph><p>In het onderdeel over kernelinstellingen staat meer informatie om ondersteuning voor een seriële poort toe te voegen. Lees de betreffende <em>en</em> de volgende sectie om ondersteuning voor een parallelle poort toe te voegen.</p></div></div></div><div class=sect3><h4 id=printing-parallel-port-mode>10.3.1.3. Communicatietype instellen voor een parallelle poort<a class=anchor href=#printing-parallel-port-mode></a></h4><div class=paragraph><p>Wanneer een parallelle poort wordt gebruikt, kan worden aangegeven of FreeBSD voor de printer interrupt-gestuurde of "polled" communicatie moet gebruiken. Het generieke printerapparaatstuurprogramma (<a href="https://man.freebsd.org/cgi/man.cgi?query=lpt&amp;sektion=4&amp;format=html">lpt(4)</a>) onder FreeBSD gebruikt het systeem <a href="https://man.freebsd.org/cgi/man.cgi?query=ppbus&amp;sektion=4&amp;format=html">ppbus(4)</a>. Dit bestuurt de chipset van de poort met het stuurprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=ppc&amp;sektion=4&amp;format=html">ppc(4)</a>.</p></div><div class=ulist><ul><li><p>De <em>interrupt-gestuurde</em> methode is standaard in de GENERIC kernel. In dit geval gebruikt het besturingssysteem een IRQ om te bepalen of de printer klaar is om gegevens te ontvangen.</p></li><li><p>Bij de <em>polled</em> methode vraagt het besturingssysteem met vaste intervallen aan de printer of deze klaar is om gegevens te ontvangen. Als de printer antwoordt met "klaar", stuurt de kernel meer gegevens.</p></li></ul></div><div class=paragraph><p>De interrupt-gestuurde methode is meestal iets sneller, maar gebruikt een kostbaar IRQ-nummer. Van sommige HP printers wordt beweerd dat ze niet goed werken in interruptmodus, schijnbaar door een (nog niet begrepen) timing-probleem. Deze printers moeten gebruik maken van de polled methode. Gebruik de methode die werkt. Sommige printers werken met beide methodes, maar zijn tergend langzaam in de interrupt modus.</p></div><div class=paragraph><p>Het communicatietype kan op twee manieren worden ingesteld: door de kernel in te stellen of door gebruik te maken van <a href="https://man.freebsd.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8&amp;format=html">lptcontrol(8)</a>.</p></div><div class=paragraph><p><em>Het communicatietype instellen door de kernel aan te passen:</em></p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Pas het kernelinstellingenbestand aan. Zoek naar een <code>ppc0</code> ingang. Gebruik <code>ppc1</code> voor het opzetten van een tweede parallelle poort. Gebruik <code>ppc2</code> voor de derde poort, enzovoort.</p><div class=ulist><ul><li><p>Als u gebruik wilt maken van de interrupt gestuurde modus, bewerk dan de regel hieronder:</p><div class="literalblock programlisting"><div class=content><pre>hint.ppc.0.irq=&#34;N&#34;</pre></div></div><div class=paragraph><p>Het kernelinstellingenbestand moet ook het stuurprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=ppc&amp;sektion=4&amp;format=html">ppc(4)</a> bevatten:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>device ppc</code></pre></div></div></li><li><p>Om gebruik te maken van polled modus verwijder dan het volgende regel uit <span class=filename>/boot/device.hints</span>:</p><div class="literalblock programlisting"><div class=content><pre>hint.ppc.0.irq=&#34;N&#34;</pre></div></div><div class=paragraph><p>In sommige gevallen is het onder FreeBSD niet voldoende om een poort in polled modus te zetten. In veel gevallen komt dat door het stuurprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a>. Dit is in staat om apparaten te testen en aan te sluiten en kan zodoende het communicatietype van de printer wijzigen. Raadpleeg de instellingen voor <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a> om dit probleem te verhelpen.</p></div></li></ul></div></li><li><p>Sla het bestand op. Maak en installeer de nieuwe kernel en herstart de computer. In <a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a> staan meer details.</p></li></ol></div></div></div><div class=paragraph><p><em>Communicatietype instellen met</em> <a href="https://man.freebsd.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8&amp;format=html">lptcontrol(8)</a>:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Typ:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptcontrol -i -d /dev/lptN</span></code></pre></div></div><div class=paragraph><p>om <code>lptN</code> op interrupt-gestuurde modus in te stellen.</p></div></li><li><p>Typ:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptcontrol -p -d /dev/lptN</span></code></pre></div></div><div class=paragraph><p>om <code>lptN</code> op polled modus in te stellen.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptcontrol -p -d /dev/lptN</span></code></pre></div></div></li></ol></div></div></div><div class=paragraph><p>Zet deze commando’s in het bestand <span class=filename>/etc/rc.local</span> zodat het communicatietype juist wordt ingesteld bij het opstarten. In <a href="https://man.freebsd.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8&amp;format=html">lptcontrol(8)</a> staat meer informatie.</p></div></div><div class=sect3><h4 id=printing-testing>10.3.1.4. Printercommunicatie controleren<a class=anchor href=#printing-testing></a></h4><div class=paragraph><p>Voor het instellen van het wachtrijsysteem, is het verstandig te controleren of het besturingssysteem gegevens naar een printer kan versturen. Het is een stuk makkelijker om problemen met printercommunicatie en het wachtrijsysteem apart op te lossen.</p></div><div class=paragraph><p>De printer wordt getest door er tekst naar toe te sturen. Voor printers die direct tekens kunnen afdrukken is het programma <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> handig: het genereert alle 96 afdrukbare ASCII-tekens op 96 regels.</p></div><div class=paragraph><p>Voor PostScript® (of andere op taal gebaseerde) printers, is een meer geavanceerde test nodig. Een eenvoudig PostScript®-programma zoals het volgende volstaat:</p></div><div class="literalblock programlisting"><div class=content><pre>%!PS
100 100 moveto 300 300 lineto stroke
310 310 moveto /Helvetica findfont 12 scalefont setfont
(Werkt dit?) show
showpage</pre></div></div><div class=paragraph><p>Bovenstaande PostScript®-code kan in een bestand worden opgeslagen en in de voorbeelden in de volgende paragrafen gebruikt worden.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als in dit document wordt gesproken over een printertaal, wordt uitgegaan van een taal als PostScript® en niet PCL van HP. Hoewel PCL zeer functioneel is, kan het direct platte tekst afdrukken door gebruik te maken van escape-tekens. PostScript® kan niet direct platte tekst afdrukken. Voor dat soort printertalen zijn speciale aanpassingen nodig.</p></div></td></tr></tbody></table></div><div class=sect4><h5 id=printing-checking-parallel>10.3.1.4.1. Parallelle printer controleren<a class=anchor href=#printing-checking-parallel></a></h5><div class=paragraph><p>In deze sectie wordt beschreven hoe te controleren of FreeBSD kan communiceren met een printer die op een parallelle poort is aangesloten.</p></div><div class=paragraph><p><em>Voer de volgende stappen uit om een printer op een parallelle poort te testen:</em></p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> naar <code>root</code>.</p></li><li><p>Stuur gegevens naar de printer.</p><div class=ulist><ul><li><p>Gebruik <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> als de printer platte tekst af kan drukken:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptest &gt; /dev/lptN</span></code></pre></div></div><div class=paragraph><p>Hier is <em>N</em> het nummer van de parallelle poort, beginnende bij nul.</p></div></li><li><p>Als de printer PostScript® of een andere printertaal begrijpt, stuur dan een klein programma naar de printer:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat &gt; /dev/lptN</span></code></pre></div></div><div class=paragraph><p>Geef het programma regel voor regel <em>heel nauwkeurig</em> in. Een regel kan niet worden gewijzigd als er op <code>RETURN</code> of <code>ENTER</code> is gedrukt. Geef na het afronden van de invoer voor het programma het einde-van-invoer-teken. Dit is meestal <code>CONTROL+D</code>.</p></div><div class=paragraph><p>Het programma kan ook in een bestand worden opgeslagen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat bestand &gt; /dev/lptN</span></code></pre></div></div><div class=paragraph><p>Hier is <em>bestand</em> de naam van het bestand waarin het programma is opgeslagen dat naar een printer gestuurd kan worden.</p></div></li></ul></div></li></ol></div></div></div><div class=paragraph><p>Nu moet er iets worden afgedrukt. Tekst die er niet goed uitziet is geen probleem. Dit wordt later gerepareerd.</p></div></div><div class=sect4><h5 id=printing-checking-serial>10.3.1.4.2. Seriële printer controleren<a class=anchor href=#printing-checking-serial></a></h5><div class=paragraph><p>In deze sectie wordt beschreven hoe te controleren of FreeBSD kan communiceren met een printer die op een seriële poort is aangesloten.</p></div><div class=paragraph><p><em>Voer de volgende stappen uit om een printer op de seriële poort te testen:</em></p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> naar <code>root</code>.</p></li><li><p>Voeg de volgende regel toe aan <span class=filename>/etc/remote</span>:</p><div class="literalblock programlisting"><div class=content><pre>printer:dv=/dev/poort:br#bps-snelheid:pa=pariteit</pre></div></div><div class=paragraph><p>Hier is <em>poort</em> de apparaatingave voor de seriële poort (<code>ttyu0</code>, <code>ttyu1</code>, enzovoort), <em>bps-snelheid</em> is het aantal bits per seconde waarop de printer communiceert en <em>pariteit</em> is de pariteit die door de printer wordt vereist (<code>even</code>, <code>odd</code>, <code>none</code> of <code>zero</code>).</p></div><div class=paragraph><p>Hier volgt een voorbeeldregel voor een printer verbonden met een seriële lijn op de derde seriële poort op 19200 bps, zonder pariteit:</p></div><div class="literalblock programlisting"><div class=content><pre>printer:dv=/dev/ttyu2:br#19200:pa=none</pre></div></div></li><li><p>Maak verbinding met de printer met <a href="https://man.freebsd.org/cgi/man.cgi?query=tip&amp;sektion=1&amp;format=html">tip(1)</a>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tip printer</span></code></pre></div></div><div class=paragraph><p>Als dit niet werkt, pas dan <span class=filename>/etc/remote</span> opnieuw aan en probeer gebruik te maken van <span class=filename>/dev/cuaaN</span> in plaats van <span class=filename>/dev/ttyuN</span>.</p></div></li><li><p>Stuur gegevens naar de printer.</p><div class=ulist><ul><li><p>Gebruik <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> als de printer platte tekst af kan drukken:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nv>$lptest</span></code></pre></div></div></li><li><p>Als de printer PostScript® of een andere printertaal begrijpt, stuur dan een klein programma naar de printer. Geef het programma regel voor regel <em>heel nauwkeurig</em> in. Backspace of andere speciale toetsen kunnen een speciale betekenis hebben voor de printer. Het kan ook nodig zijn een speciaal einde-van-invoer-teken te geven zodat de printer weet dat het gehele programma ontvangen is. Druk voor PostScript®-printers <code>CONTROL+D</code>.</p><div class=paragraph><p>Het programma kan ook in een bestand worden opgeslagen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=o>&gt;</span>bestand</code></pre></div></div><div class=paragraph><p>Hier is <em>bestand</em> de naam van het bestand waarin het programma is opgeslagen. Nadat <a href="https://man.freebsd.org/cgi/man.cgi?query=tip&amp;sektion=1&amp;format=html">tip(1)</a> het bestand heeft verstuurd kan het juiste einde-van-invoer-teken ingegeven worden.</p></div></li></ul></div></li></ol></div></div></div><div class=paragraph><p>Nu moet er iets worden afgedrukt. Tekst die er niet goed uitziet is geen probleem. Dit wordt later gerepareerd.</p></div></div></div><div class=sect3><h4 id=printing-printcap>10.3.1.5. De wachtrij aanzetten: <span class=filename>/etc/printcap</span><a class=anchor href=#printing-printcap></a></h4><div class=paragraph><p>Op dit punt moet de printer zijn aangesloten, de kernel ingesteld zijn om met de printer te communiceren (indien nodig) en is het mogelijk eenvoudige gegevens naar de printer te sturen. Nu kan LPD ingesteld worden zodat de toegang tot de printer wordt geregeld.</p></div><div class=paragraph><p>LPD wordt ingesteld door het bestand <span class=filename>/etc/printcap</span> aan te passen. Het wachtrijsysteem LPD leest dit bestand iedere keer dat het systeem wordt aangeroepen zodat wijzigingen direct van toepassing zijn.</p></div><div class=paragraph><p>De opmaak van het bestand <a href="https://man.freebsd.org/cgi/man.cgi?query=printcap&amp;sektion=5&amp;format=html">printcap(5)</a> is voor de hand liggend. Met een willekeurige tekstverwerker kunnen wijzigen in <span class=filename>/etc/printcap</span> aangebracht worden. De opmaak is identiek aan die van andere bestanden die voor dergelijke instellingen worden gebruik, zoals <span class=filename>/usr/shared/misc/termcap</span> en <span class=filename>/etc/remote</span>. In <a href="https://man.freebsd.org/cgi/man.cgi?query=cgetent&amp;sektion=3&amp;format=html">cgetent(3)</a> staat een uitgebreid overzicht van dit formaat.</p></div><div class=paragraph><p>De vereenvoudigde instellingen bestaan uit de volgende stappen:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Kies een naam (en een paar handige aliassen) voor de printer en voeg ze toe aan <span class=filename>/etc/printcap</span>. In <a href=#printing-naming>Printernaamgeving</a> staat meer informatie over het toekennen van een naam aan een printer.</p></li><li><p>Het afdrukken van voorbladen (standaard) kan uitgezet worden met de optie <code>sh</code>. In <a href=#printing-no-header-pages>Voorbladen onderdrukken</a> staat meer informatie.</p></li><li><p>Maak een wachtrijmap aan en specificeer de locatie door middel van de optie <code>sd</code>. In <a href=#printing-spooldir>Wachtrijmap aanmaken</a> staat meer informatie.</p></li><li><p>Bepaal welke ingave in <span class=filename>/dev</span> voor de printer wordt gebruikt en geef dit in <span class=filename>/etc/printcap</span> aan door gebruik te maken van de optie <code>lp</code>. In <a href=#printing-device>Printerapparaat identificeren</a> staat meer informatie. Als de printer is aangesloten op een seriële poort moeten de communicatieparameters worden ingesteld met de optie <code>ms#</code>. Dit wordt beschreven in <a href=#printing-commparam>Communicatieparameters voor het wachtrijsysteem instellen</a>.</p></li><li><p>Installeer een filter voor platte tekst. In <a href=#printing-textfilter>Tekstfilter installeren</a> staan details.</p></li><li><p>Test de instellingen door iets met <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> af te drukken. Details staan in <a href=#printing-trying>Printer uitproberen</a> en <a href=#printing-troubleshooting>Problemen oplossen</a>.</p></li></ol></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Op taal gebaseerde printers, zoals PostScript®-printers, kunnen niet direct platte tekst afdrukken. De vereenvoudigde instellingen, zoals hierboven beschreven en hieronder verder beschreven, gaan er van uit dat alleen bestanden naar een printer worden gestuurd die de printer begrijpt.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Gebruikers verwachten vaak dat ze platte tekst naar printers op een systeem kunnen sturen. Programma’s die LPD gebruiken om af te drukken gaan hier ook vaak van uit. Als een dergelijke printer wordt geïnstalleerd en het moet mogelijk zijn zowel afdrukopdrachten in de printertaal als in platte tekst naar een printer te sturen, dan is het zeer aan te raden een extra stap in deze vereenvoudigde opzet in te voegen: installeer een conversieprogramma dat automatisch platte tekst omzet in PostScript® (of een andere printertaal). In <a href=#printing-advanced-if-conversion>Platte tekst op PostScript®-printers afdrukken</a> staat hoe dit in zijn werk gaat.</p></div><div class=sect4><h5 id=printing-naming>10.3.1.5.1. Printernaamgeving<a class=anchor href=#printing-naming></a></h5><div class=paragraph><p>De eerste (makkelijke) stap is het kiezen van een naam voor een printer. Het maakt niet uit of een naam functioneel of grappig is, aangezien ook een aantal aliassen aan een printer toegekend kunnen worden.</p></div><div class=paragraph><p>Ten minste één van de printers die in <span class=filename>/etc/printcap</span> worden genoemd moet het alias <code>lp</code> hebben. Dit is de standaardnaam voor de printer. Als gebruikers de omgevingsvariabele <code>PRINTER</code> niet ingesteld hebben en ook geen printernaam specificeren als ze LPD gebruiken, dan wordt standaard de printer <code>lp</code> gebruikt.</p></div><div class=paragraph><p>Het is verder gebruikelijk om het laatste alias zo te kiezen dat het een volledige beschrijving van de printer is, inclusief merk en model.</p></div><div class=paragraph><p>Als een naam en een aantal aliassen zijn gekozen, kunnen ze aan <span class=filename>/etc/printcap</span> worden toegevoegd. De naam van een printer wordt in de meest linker kolom geplaatst. Scheid ieder alias met een verticale streep en plaats een dubbele punt achter het laatste alias.</p></div><div class=paragraph><p>In het volgende voorbeeld is de beginsituatie een uitgekleed <span class=filename>/etc/printcap</span> waarin twee printers worden gedefinieerd (een Diablo 630 lijnprinter en een Panasonic KX-P4455 PostScript®-laserprinter):</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose
#
rattan|line|diablo|lp|Diablo 630 Line Printer:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:</pre></div></div><div class=paragraph><p>In dit voorbeeld heet de eerste printer <code>rattan</code> en heeft de volgende aliassen: <code>line</code>, <code>diablo</code>, <code>lp</code> en <code>Diablo 630 Line Printer</code>. Omdat deze printer het alias <code>lp</code> heeft, is het de standaard printer. De tweede printer heet <code>bamboo</code> en heeft de aliassen <code>ps</code>, <code>PS</code>, <code>S</code>, <code>panasonic</code> en <code>Panasonic KX-P4455 PostScript v51.4</code>.</p></div></div><div class=sect4><h5 id=printing-no-header-pages>10.3.1.5.2. Voorbladen onderdrukken<a class=anchor href=#printing-no-header-pages></a></h5><div class=paragraph><p>Het wachtrijsysteem LPD drukt standaard een <em>voorblad</em> af voor elke afdrukopdracht. Het voorblad bevat de gebruikersnaam van de gebruiker die de afdrukopdracht gaf, de computer waar de opdracht is gegeven en, in mooie grote letters, de naam van de afdrukopdracht. Het nadeel hiervan is dat al deze extra tekst het debuggen van de eenvoudige printerinstallatie bemoeilijkt. Daarom wordt het afdrukken van voorbladen onderdrukt.</p></div><div class=paragraph><p>Om voorbladen te onderdrukken, wordt de optie <code>sh</code> toegevoegd voor de relevante printer in <span class=filename>/etc/printcap</span>. Hieronder staat een voorbeeld van <span class=filename>/etc/printcap</span> met de optie <code>sh</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose - nergens worden voorbladen afgedrukt
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:</pre></div></div><div class=paragraph><p>Het juiste formaat is gebruikt: de eerste regel begint in de meest linker kolom, volgende regels springen in. Elke regel eindigt met een backslash, behalve de laatste.</p></div></div><div class=sect4><h5 id=printing-spooldir>10.3.1.5.3. Wachtrijmap aanmaken<a class=anchor href=#printing-spooldir></a></h5><div class=paragraph><p>De volgende stap in deze eenvoudige opzet is het aanmaken van een <em>wachtrijmap</em>. Dit is een map waar afdrukopdrachten geplaatst worden totdat ze worden afgedrukt. Ook wordt er een aantal bestanden geplaatst die nodig zijn voor het functioneren van het wachtrijsysteem.</p></div><div class=paragraph><p>Vanwege het veranderlijke karakter van wachtrijmappen is het gebruikelijk om deze mappen onder <span class=filename>/var/spool</span> te plaatsen. Het is niet nodig om een reservekopie van de inhoud van deze mappen te maken. Ze kunnen eenvoudigweg opnieuw worden aangemaakt met <a href="https://man.freebsd.org/cgi/man.cgi?query=mkdir&amp;sektion=1&amp;format=html">mkdir(1)</a>.</p></div><div class=paragraph><p>Het is ook gebruikelijk om de naam van de map overeen te laten komen met die van de printer, zoals onder is weergegeven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /var/spool/printernaam</span></code></pre></div></div><div class=paragraph><p>Als er veel printers zijn aangesloten op een netwerk, is het beter de wachtrijmappen aan te maken in een enkele map die speciaal wordt gebruikt voor afdrukken met LPD. In dit voorbeeld wordt dat gedaan voor de printers <code>rattan</code> en <code>bamboo</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /var/spool/lpd</span>
<span class=c># mkdir /var/spool/lpd/rattan</span>
<span class=c># mkdir /var/spool/lpd/bamboo</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als de afdrukopdrachten privé moeten blijven, dan is het belangrijk de wachtrijmap niet algemeen toegankelijk te maken. Wachtrijmappen moeten eigendom zijn van gebruiker <code>daemon</code> en groep <code>daemon</code>. Uitsluitend deze gebruiker en groep moeten de map kunnen lezen, schrijven en doorzoeken. We doen dit voor onze voorbeeldprinters:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chown daemon:daemon /var/spool/lpd/rattan</span>
<span class=c># chown daemon:daemon /var/spool/lpd/bamboo</span>
<span class=c># chmod 770 /var/spool/lpd/rattan</span>
<span class=c># chmod 770 /var/spool/lpd/bamboo</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Tenslotte moet LPD verteld worden dat deze mappen bestaan. Dit kan met het bestand <span class=filename>/etc/printcap</span>. De locatie van de wachtrijmap wordt opgegeven met de optie <code>sd</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose - wachtrijmappen toegevoegd
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:</pre></div></div><div class=paragraph><p>De naam van de printer staat in de eerste kolom, maar alle andere regels die de printer beschrijven worden ingesprongen en elke regel eindigt met een backslash.</p></div><div class=paragraph><p>Als geen wachtrijmap wordt opgegeven met <code>sd</code>, dan wordt standaard <span class=filename>/var/spool/lpd</span> gebruikt.</p></div></div><div class=sect4><h5 id=printing-device>10.3.1.5.4. Printerapparaat identificeren<a class=anchor href=#printing-device></a></h5><div class=paragraph><p>In de sectie <a href=#printing-hardware>Hardware-instellingen</a> is bepaald welke poort en ingang in de map <span class=filename>/dev</span> door FreeBSD worden gebruikt om met een printer te communiceren. Nu moet LPD dit ook weten. Als het wachtrijsysteem een afdrukopdracht krijgt, opent het het relevante apparaat namens het filterprogramma (dat verantwoordelijk is voor het sturen van gegevens naar een printer).</p></div><div class=paragraph><p>Geef de locatie van de ingang in <span class=filename>/dev</span> op in <span class=filename>/etc/printcap</span> door gebruik te maken van de optie <code>lp</code>.</p></div><div class=paragraph><p>In het huidige voorbeeld wordt aangenomen dat <code>rattan</code> op de eerste parallelle poort is aangesloten en <code>bamboo</code> op de zesde seriële poort. Hier volgen de toevoegingen voor <span class=filename>/etc/printcap</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose - bepaald welke apparaten te gebruiken
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyu5:</pre></div></div><div class=paragraph><p>Als voor een printer de optie <code>lp</code> niet wordt gebruikt in <span class=filename>/etc/printcap</span>, dan gebruikt LPD standaard <span class=filename>/dev/lp</span>. Momenteel bestaat <span class=filename>/dev/lp</span> niet in FreeBSD.</p></div><div class=paragraph><p>Als de te installeren printer is aangesloten op een parallelle poort, dan staan verdere instructies in <a href=#printing-textfilter>Tekstfilter installeren</a>. In andere gevallen kunnen de instructies in de volgende paragraaf gevold worden.</p></div></div><div class=sect4><h5 id=printing-commparam>10.3.1.5.5. Communicatieparameters voor het wachtrijsysteem instellen<a class=anchor href=#printing-commparam></a></h5><div class=paragraph><p>Voor printers die zijn aangesloten op een seriële poort kan LPD de bps-snelheid, pariteit en andere seriële communicatie parameters instellen voor het filterprogramma dat gegevens naar een printer stuurt. Dit is gunstig omdat:</p></div><div class=ulist><ul><li><p>De verschillende communicatieparameters uitgeprobeerd kunnen worden door <span class=filename>/etc/printcap</span> aan te passen. Het is niet nodig het filterprogramma opnieuw te compileren;</p></li><li><p>Het wachtrijsysteem kan hetzelfde filter gebruiken voor verschillende printers die mogelijk verschillende seriële communicatie-instellingen hebben.</p></li></ul></div><div class=paragraph><p>Met de volgende opties in <span class=filename>/etc/printcap</span> kunnen seriële communicatieparameters worden ingesteld voor het apparaat waar <code>lp</code> naar verwijst:</p></div><div class=dlist><dl><dt class=hdlist1><code>br#bps-snelheid</code></dt><dd><p>Stelt de communicatiesnelheid van het apparaat in op <em>bps-snelheid</em>, waarbij <em>bps-snelheid</em> de waarde 50, 75, 110, 134, 150, 200, 300, 600, 1200, 1800, 2400, 4800, 9600, 19200, 38400, 57600 of 115200 bits-per-seconde kan aannemen.</p></dd><dt class=hdlist1><code>ms#stty-modus</code></dt><dd><p>Bepaalt de opties voor het geval het printerapparaat een terminal is. In <a href="https://man.freebsd.org/cgi/man.cgi?query=stty&amp;sektion=1&amp;format=html">stty(1)</a> staat uitleg over de beschikbare opties.</p></dd></dl></div><div class=paragraph><p>Als LPD het apparaat opent dat met <code>lp</code> is opgegeven, worden de eigenschappen van het apparaat bepaald door de optie <code>ms#</code>. Met name van belang zijn de modi <code>parenb</code>, <code>parodd</code>, <code>cs5</code>, <code>cs6</code>, <code>cs7</code>, <code>cs8</code>, <code>cstopb</code>, <code>crtscts</code> en <code>ixon</code>. Deze worden uitgelegd in <a href="https://man.freebsd.org/cgi/man.cgi?query=stty&amp;sektion=1&amp;format=html">stty(1)</a>.</p></div><div class=paragraph><p>Nu wordt de voorbeeldprinter op de zesde seriële poort aangepast. De bps-snelheid wordt ingesteld op 38400. Als modus wordt gekozen: geen pariteit met <code>-parenb</code>, 8-bit tekens met <code>cs8</code>, geen modemcontrole met <code>clocal</code> en hardware flow-control met <code>crtscts</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyu5:ms#-parenb cs8 clocal crtscts:</pre></div></div></div><div class=sect4><h5 id=printing-textfilter>10.3.1.5.6. Tekstfilter installeren<a class=anchor href=#printing-textfilter></a></h5><div class=paragraph><p>Nu kan LPD verteld worden welke tekstfilters gebruikt moeten worden bij het versturen van afdrukopdrachten. Een <em>tekstfilter</em> is een programma dat LPD aanroept als het een afdrukopdracht krijgt. Wanneer LPD het tekstfilter aanroept, wordt de standaard invoer van het filter gekoppeld aan de afdrukopdracht en de standaard uitvoer aan het printerapparaat dat door de optie <code>lp</code> is opgegeven. Er wordt aangenomen dat het filter van standaard invoer leest, vervolgens de nodige handelingen uitvoert en het resultaat naar de standaard uitvoer schrijft, zodat het afgedrukt wordt. In <a href=#printing-advanced-filters>Filters</a> staat meer informatie over het tekstfilter.</p></div><div class=paragraph><p>Voor deze eenvoudige printerinstallatie kan het tekstfilter een klein shellscript zijn dat <code>/bin/cat</code> aanroept om de afdrukopdracht naar de printer te sturen. FreeBSD wordt geleverd met een ander filter, <span class=filename>lpf</span>, dat backspaces en onderlijnde tekst afhandelt voor printers die hier niet mee overweg kunnen. Natuurlijk kan elk filter gebruikt worden dat gewenst is. Het filter <code>lpf</code> wordt uitgebreid beschreven in <a href=#printing-advanced-lpf>lpf: een tekstfilter</a>.</p></div><div class=paragraph><p>Nu wordt eerst het shellscript <span class=filename>/usr/local/libexec/if-simple</span> gemaakt dat als simpel tekstfilter dient. Plaats de volgende tekst in het bestand met een tekstverwerker naar keuze:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# if-simple - Eenvoudig tekstfilter voor lpd
# Geïnstalleerd in /usr/local/libexec/if-simple
#
# Kopieert eenvoudigweg stdin naar stdout.
# Filterargumenten worden genegeerd.

/bin/cat &amp;&amp; exit 0
exit 2</pre></div></div><div class=paragraph><p>Zorg dat het bestand uitvoerbaar is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 555 /usr/local/libexec/if-simple</span></code></pre></div></div><div class=paragraph><p>Zorg dat LPD het filter gebruikt door dit aan te geven met de optie <code>if</code> in <span class=filename>/etc/printcap</span>. Nu volgt hoe dit te doen voor de twee printers uit het voorbeeld:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose - met tekstfilter
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\ :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyu5:ms#-parenb cs8 clocal crtscts:\
        :if=/usr/local/libexec/if-simple:</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Een kopie van het script <span class=filename>if-simple</span> staat in de map <span class=filename>/usr/shared/examples/printing</span>.</p></div></td></tr></tbody></table></div></div><div class=sect4><h5 id=_lpd_aanzetten>10.3.1.5.7. LPD aanzetten<a class=anchor href=#_lpd_aanzetten></a></h5><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=lpd&amp;sektion=8&amp;format=html">lpd(8)</a> wordt gestart vanuit <span class=filename>/etc/rc</span> door de variabele <code>lpd_enable</code>. Standaard staat deze variabele op <code>NO</code>. Als dit nog niet is gedaan, voeg dan de volgende regel toe aan <span class=filename>/etc/rc.conf</span> en herstart de computer:</p></div><div class="literalblock programlisting"><div class=content><pre>lpd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Of voer het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpd&amp;sektion=8&amp;format=html">lpd(8)</a> uit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lpd</span></code></pre></div></div></div><div class=sect4><h5 id=printing-trying>10.3.1.5.8. Printer uitproberen<a class=anchor href=#printing-trying></a></h5><div class=paragraph><p>Nu volgt het laatste onderdeel van de eenvoudige LPD installatie. Helaas zijn felicitaties nog niet gepast. De printer moet worden getest en eventuele problemen moeten worden opgelost. Om de installatie te testen kan iets afgedrukt worden. Afdrukken gaat met het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>. Dit stuurt een opdracht naar een printer.</p></div><div class=paragraph><p>Het programma <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> is te combineren met het programma <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> uit <a href=#printing-testing>Printercommunicatie controleren </a>om tekst te genereren.</p></div><div class=paragraph><p><em>Om de eenvoudige installatie van LPD te testen:</em></p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptest 20 5 | lpr -Pprinternaam</span></code></pre></div></div><div class=paragraph><p>Hier is <em>printernaam</em> de naam van een printer (of een alias) die in <span class=filename>/etc/printcap</span> wordt genoemd. De standaard printer kan worden getest door bij het aanroepen van <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> de optie <code>-P</code> weg te laten. Nogmaals: test een PostScript®-printer door een PostScript®-programma naar een printer te sturen en maak geen gebruik van <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a>. Dit kan door het programma in een bestand op te slaan en de volgende commandoregel uit te voeren: <code>lpr bestand</code>.</p></div><div class=paragraph><p>Voor een PostScript®-printer moet het resultaat van het programma verschijnen. Als gebruik wordt gemaakt van <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> ziet het resultaat er ongeveer zo uit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>!</span><span class=s2>&#34;#</span><span class=nv>$%</span><span class=s2>&amp;&#39;()*+,-./01234
&#34;</span><span class=c>#$%&amp;&#39;()*+,-./012345</span>
<span class=c>#$%&amp;&#39;()*+,-./0123456</span>
<span class=nv>$%</span>&amp;<span class=s1>&#39;()*+,-./01234567
%&amp;&#39;</span><span class=o>()</span><span class=k>*</span>+,-./012345678</code></pre></div></div><div class=paragraph><p>Om de printer uitvoeriger te testen kunnen grotere programma’s geprobeerd worden (voor taalgebaseerde printers) of kan <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> aangeroepen worden met andere argumenten. Bijvoorbeeld: <code>lptest 80 60</code>, drukt 60 regels af met elk 80 karakters.</p></div><div class=paragraph><p>Als de printer niet werkt, lees dan verder in <a href=#printing-troubleshooting>Problemen oplossen</a>.</p></div></div></div></div></div></div><div class=sect1><h2 id=printing-advanced>10.4. Geavanceerde printerinstallatie<a class=anchor href=#printing-advanced></a></h2><div class=sectionbody><div class=paragraph><p>Deze sectie behandelt het gebruik van filters om speciaal opgemaakte tekst en voorbladen af te drukken, via het netwerk af te drukken en printergebruik te beperken en statistieken bij te houden.</p></div><div class=sect2><h3 id=printing-advanced-filter-intro>10.4.1. Filters<a class=anchor href=#printing-advanced-filter-intro></a></h3><div class=paragraph><p>Hoewel LPD veel van het afdrukwerk afhandelt (netwerkverkeer, wachtrijafhandeling, toegangscontrole, enzovoort), wordt het <em>echte</em> werk door de filters gedaan. Filters zijn programma’s die met een printer communiceren en inspelen op printerspecifieke eigenschappen. In de eenvoudige printeropzet is een filter geïnstalleerd voor platte tekst, een zeer eenvoudig filter dat met de meeste printers zou moeten werken (<a href=#printing-textfilter>Tekstfilter installeren</a>).</p></div><div class=paragraph><p>Om echter gebruik te maken van formaatomzetting, printeradministratie, printerspecifieke aanpassingen, enzovoort, is het nodig te weten hoe filters werken. Uiteindelijk is het de verantwoordelijkheid van het filter om deze zaken af te handelen. Het slechte nieuws is dat <em>de beheerder</em> in het merendeel van de gevallen het filter moet aanleveren. Het goede nieuws is dat veel filters algemeen beschikbaar zijn en als ze dat niet zijn, zijn ze vaak makkelijk te schrijven.</p></div><div class=paragraph><p>FreeBSD heeft een ingebouwd filter, <span class=filename>/usr/libexec/lpr/lpf</span>, die met veel printers werkt die platte tekst kunnen afdrukken. Het filter regelt backspace en tabs in bestanden en administreert printergebruik, maar dat is zo’n beetje alles wat dit filter doet. Er zijn ook diverse filters en filtercomponenten in de FreeBSD Portscollectie.</p></div><div class=paragraph><p>Hieronder wordt het volgende beschreven:</p></div><div class=ulist><ul><li><p>In <a href=#printing-advanced-filters>Hoe filters werken</a> staat een overzicht van de rol die een filter speelt in het afdrukproces. Lees dat onderdeel om een indruk te krijgen wat er "onder de motorkap" gebeurt als LPD filters gebruikt. Deze kennis helpt mogelijke problemen te voorkomen of op te lossen als meerdere filters worden geïnstalleerd voor printers.</p></li><li><p>LPD gaat er van uit dat elke printer standaard platte tekst af kan drukken. Dit geeft problemen voor PostScript® (of andere op taal gebaseerde) printers die niet in staat zijn direct platte tekst af te drukken. In <a href=#printing-advanced-if-conversion>Platte tekst op PostScript®-printers afdrukken</a> staat wat er kan worden gedaan om dit probleem te verhelpen. Lees verder in dit onderdeel als het om PostScript®-printers gaat.</p></li><li><p>Voor veel programma’s is PostScript® een populair uitvoerformaat. Sommige mensen schrijven PostScript® code zelfs direct. PostScript®-printers zijn echter kostbaar. In <a href=#printing-advanced-ps>PostScript® simuleren op niet-PostScript®-printers</a> staat hoe de tekstfilter van een printer aangepast moet worden zodat die PostScript® accepteert en afdrukt op een <em>niet-PostScript®</em>-printer. Dit onderdeel is van toepassing voor niet-PostScript®-printers.</p></li><li><p>In <a href=#printing-advanced-convfilters>Conversiefilters</a> wordt een methode beschreven om de conversie van bepaalde bestandsformaten te automatiseren, zoals van grafische of tekstopmaakprogramma’s, naar formaten die een printer kan begrijpen. Na het lezen van dit onderdeel is een beheerder in staat om een printer zodanig in te stellen dat gebruikers <code>lpr -t</code> kunnen invoeren om troff-gegevens af te drukken, <code>lpr -d</code> om TeX DVI-gegevens af te drukken of <code>lpr -v</code> om rasterplaatjes af te drukken, enzovoorts. Het wordt aangeraden deze sectie te lezen.</p></li><li><p>In <a href=#printing-advanced-of>Uitvoerfilters</a> wordt een niet vaak gebruikte functionaliteit van LPD behandeld: uitvoerfilters. Tenzij voorbladen worden afgedrukt (<a href=#printing-advanced-header-pages>Voorbladen</a>), kan deze sectie waarschijnlijk overgeslagen worden.</p></li><li><p><a href=#printing-advanced-lpf>lpf: een tekstfilter</a> beschrijft <code>lpf</code>, een redelijk complete, eenvoudige tekstfilter voor lijnprinters (en laserprinters die zich als lijnprinters voordoen) dat wordt geleverd bij FreeBSD. Voor een snelle manier om printeradministratie aan de praat te krijgen voor platte tekst of voor printers waar rook uit komt bij het zien van backspace karakters, is het serieus te overwegen gebruik te maken van <code>lpf</code>.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Een kopie van de scripts die hieronder worden beschreven, staan in de map <span class=filename>/usr/shared/examples/printing</span>.</p></div></td></tr></tbody></table></div><div class=sect3><h4 id=printing-advanced-filters>10.4.1.1. Hoe filters werken<a class=anchor href=#printing-advanced-filters></a></h4><div class=paragraph><p>Zoals eerder genoemd, is een filter een programma dat wordt uitgevoerd door LPD voor het afhandelen van het apparaatafhankelijke deel van de communicatie met een printer.</p></div><div class=paragraph><p>Als LPD een bestand wil afdrukken uit een afdrukopdracht, start het een filterprogramma. Het koppelt de standaard invoer van de filter aan het af te drukken bestand, de standaard uitvoer aan de printer en de standaard foutmelding aan het logboekbestand voor foutmeldingen (zoals opgegeven via de optie <code>lf</code> in <span class=filename>/etc/printcap</span> of standaard <span class=filename>/dev/console</span>).</p></div><div class=paragraph><p>Welk filter LPD start en de argumenten van het filter hangen af van wat er in het bestand <span class=filename>/etc/printcap</span> wordt opgegeven en de argumenten die de gebruiker geeft op de commandoregel van <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>. Als een gebruiker bijvoorbeeld <code>lpr -t</code> ingeeft, start LPD het filter troff, zoals wordt opgegeven via de optie <code>tf</code> voor de betreffende printer. Als een gebruiker platte tekst wilt afdrukken, dan wordt het filter <code>if</code> gestart (dit klopt bijna: zie <a href=#printing-advanced-of>Uitvoerfilters</a> voor de details).</p></div><div class=paragraph><p>Er zijn drie soorten filters die in <span class=filename>/etc/printcap</span> kunnen worden opgegeven:</p></div><div class=ulist><ul><li><p>Het tekstfilter, dat in de LPD documentatie verwarrend genoeg <em>input filter</em> wordt genoemd, verwerkt het afdrukken van gewone tekst. Beschouw het als het standaardfilter. LPD verwacht dat elke printer standaard platte tekst kan afdrukken en het is de taak van het tekstfilter om er voor te zorgen dat backspaces, tabs en andere speciale karakters de printer niet in de war sturen. In een omgeving waar moet worden bijgehouden hoeveel er wordt afgedrukt, moet het tekstfilter ook administreren hoeveel pagina’s er zijn afgedrukt. Dit gaat meestal door het aantal afgedrukte regels te tellen en dit te vergelijken met het aantal regels per pagina dat door de printer wordt ondersteund. Het tekstfilter wordt aangeroepen met de volgende lijst argumenten:</p><div class=paragraph><p><code>filter-name</code> [ -c ] -w <em>width</em> -l <em>length</em> -i <em>indent</em> -n <em>login</em> -h <em>host</em> <em>acct-file</em></p></div><div class=paragraph><p>met</p></div><div class=dlist><dl><dt class=hdlist1><code>-c</code></dt><dd><p>wordt gebruikt als de afdrukopdracht is gegeven met <code>lpr -l</code></p></dd><dt class=hdlist1><em>width</em></dt><dd><p>is de waarde van de optie <code>pw</code> (<em>page width</em>: paginabreedte), zoals opgegeven in <span class=filename>/etc/printcap</span>, standaard 132</p></dd><dt class=hdlist1><em>length</em></dt><dd><p>is de waarde van de optie <code>pl</code> (<em>page length</em>: paginalengte), standaard 66</p></dd><dt class=hdlist1><em>indent</em></dt><dd><p>geeft aan hoeveel wordt ingesprongen door <code>lpr -i</code>, standaard 0</p></dd><dt class=hdlist1><em>login</em></dt><dd><p>de gebruikersnaam van de gebruiker die de afdrukopdracht gaf</p></dd><dt class=hdlist1><em>host</em></dt><dd><p>de hostnaam waar de afdrukopdracht gegeven is</p></dd><dt class=hdlist1><em>acct-file</em></dt><dd><p>de naam van het administratiebestand zoals opgegeven via de optie <code>af</code>.</p></dd></dl></div></li><li><p>Een <em>conversiefilter</em> converteert een specifiek bestandsformaat naar een formaat dat een printer begrijpt. Bijvoorbeeld: ditroff typesettinggegevens kunnen niet direct worden afgedrukt, maar er bestaat wel een conversiefilter om ditroff-gegevens te converteren naar een formaat dat een printer kan verteren en afdrukken. Dit wordt in <a href=#printing-advanced-convfilters>Conversiefilters</a> beschreven. Conversiefilters zijn ook nodig om printergebruik te administreren, mocht dat nodig zijn. Conversiefilters worden met de volgende argumenten aangeroepen:</p><div class=paragraph><p><code>filter-name</code> -x <em>pixel-width</em> -y <em>pixel-height</em> -n <em>login</em> -h <em>host</em> <em>acct-file</em></p></div><div class=paragraph><p>Hier is <em>pixel-width</em> de waarde van de optie <code>px</code> (standaard 0) en <em>pixel-height</em> is de waarde van de optie <code>py</code> (standaard 0).</p></div></li><li><p>Het <em>uitvoerfilter</em> wordt alleen gebruikt als er geen tekstfilter is of als er voorbladen worden afgedrukt. De ervaring leert dat uitvoerfilters zelden worden gebruikt. In sectie <a href=#printing-advanced-of>Uitvoerfilters</a> worden ze beschreven. Er zijn slechts twee argumenten die aan een uitvoerfilter worden meegegeven:</p><div class=paragraph><p><code>filter-name</code> -w <em>width</em> -l <em>length</em></p></div><div class=paragraph><p>Deze zijn identiek aan de argumenten <code>-w</code> en <code>-l</code> van het tekstfilter.</p></div></li></ul></div><div class=paragraph><p>Filters moeten <em>afsluiten</em> met de volgende waarde:</p></div><div class=dlist><dl><dt class=hdlist1>exit 0</dt><dd><p>Als het filter een bestand succesvol heeft afgedrukt.</p></dd><dt class=hdlist1>exit 1</dt><dd><p>Als het filter niet geslaagd is om een bestand af te drukken, maar wil dat LPD het nogmaals probeert. LPD herstart het filter als die afsluit met deze status.</p></dd><dt class=hdlist1>exit 2</dt><dd><p>Als het filter niet geslaagd is om een bestand af te drukken, maar niet wil dat LPD het nogmaals probeert. LPD verwijdert het bestand uit de wachtrij.</p></dd></dl></div><div class=paragraph><p>Het tekstfilter dat bij FreeBSD wordt geleverd, <span class=filename>/usr/libexec/lpr/lpf</span>, benut de argumenten voor paginabreedte en -lengte om te bepalen wanneer een nieuwe pagina moet worden begonnen en om het printergebruik bij te houden. Het gebruikt de argumenten voor login, host en administratiebestand om accountingregels aan te maken.</p></div><div class=paragraph><p>Controleer bij het zoeken naar filters of ze LPD-compatibel zijn. Zo ja, dan ondersteunen ze de argumenten zoals hierboven beschreven. Zorg bij het zelf schrijven van filters voor algemeen gebruik dat ze dezelfde argumenten en exitcodes ondersteunen.</p></div></div><div class=sect3><h4 id=printing-advanced-if-conversion>10.4.1.2. Platte tekst op PostScript®-printers afdrukken<a class=anchor href=#printing-advanced-if-conversion></a></h4><div class=paragraph><p>Als een computer en PostScript® (of andere op taal gebaseerde) printer maar één gebruiker hebben die belooft nooit platte tekst naar de printer te sturen of programma’s te gebruiken die dat doen, dan is dit onderdeel overbodig.</p></div><div class=paragraph><p>Als gebruikers zowel PostScript® als platte tekst naar een printer willen sturen, dan is het aan te raden de printerinstellingen hierop aan te passen. Hiervoor moet het tekstfilter bij elke nieuwe opdracht bepalen of het om platte tekst of PostScript® gaat. Alle PostScript®-opdrachten beginnen met <code>%!</code> (raadpleeg de printerhandleiding voor andere printertalen). Als dit de eerste twee karakters zijn van een opdracht is het PostScript® en kan de rest van een opdracht direct doorgestuurd worden. Is dit niet het geval, dan moet de filter de tekst omzetten in PostScript® en het resultaat afdrukken.</p></div><div class=paragraph><p>Hoe gaat dat werken?</p></div><div class=paragraph><p>Voor seriële printers kan het meest eenvoudig <code>lprps</code> geïnstalleerd worden. <code>lprps</code> is een PostScript®-afdrukfilter die tweewegcommunicatie met een printer heeft. Het werkt het statusbestand van een printer bij met uitgebreide informatie afkomstig van een printer, zodat gebruikers en beheerders precies kunnen zien wat de status van een printer is (zoals: <code>toner bijna op</code> of <code>papier vastgelopen</code>). Maar belangrijker, het omvat het programma <code>psif</code> dat bepaalt of een binnenkomende opdracht platte tekst is en <code>textps</code> (dat ook geleverd wordt met <code>lprps</code>) om opdrachten om te zetten naar PostScript®. Vervolgens wordt een opdracht met <code>lprps</code> naar een printer gestuurd.</p></div><div class=paragraph><p><code>lprps</code> is onderdeel van de FreeBSD Portscollectie (zie <a href=../ports/#ports>De Portscollectie</a>). U kunt één van de ports <a class=package href=https://cgit.freebsd.org/ports/tree/print/lprps-a4/>print/lprps-a4</a> of <a class=package href=https://cgit.freebsd.org/ports/tree/print-lprps-letter/>print-lprps-letter</a> installeren afhankelijk van de gebruikte papiermaat. Nadat <code>lprps</code> is geïnstalleerd moet de installatielocatie ervan aan <code>psif</code> worden doorgeven dat onderdeel is van <code>lprps</code>. Als <code>lprps</code> is geïnstalleerd via de Portscollectie, gebruik dan het volgende voor de seriële PostScript®-printer in <span class=filename>/etc/printcap</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>:if=/usr/local/libexec/psif:</pre></div></div><div class=paragraph><p>Ook moet de optie <code>rw</code> worden opgeven, die LPD vertelt om een printer in lezen/schrijvenmodus te openen.</p></div><div class=paragraph><p>Als een parallelle PostScript®-printer wordt ingesteld (en dus geen tweewegcommunicatie toegepast kan worden met de printer, zoals vereist door <code>lprps</code>), dan kan het volgende shellscript gebruikt worden als tekstfilter:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  psif - Druk PostScript(R) of platte tekst af op een PostScript(R)
#  printer. Script versie; NIET de versie die wordt geleverd bij lprps
#  Geïnstalleerd in /usr/local/libexec/psif
#

IFS=&#34;&#34; read -r first_line
first_two_chars=`expr &#34;$first_line&#34; : &#39;\(..\)&#39;`

if [ &#34;$first_two_chars&#34; = &#34;%!&#34; ]; then
    #
    #  PostScript(R) opdracht, afdrukken.
    #
    echo &#34;$first_line&#34; &amp;&amp; cat &amp;&amp; printf &#34;\004&#34; &amp;&amp; exit 0
    exit 2
else
    #
    #  Platte tekst, converteren en dan afdrukken.
    #
    ( echo &#34;$first_line&#34;; cat ) | /usr/local/bin/textps &amp;&amp; printf &#34;\004&#34; &amp;&amp; exit 0
    exit 2
fi</pre></div></div><div class=paragraph><p>In bovenstaand script is <code>textps</code> een programma dat geïnstalleerd is om platte tekst om te zetten naar PostScript®. Elk tekst-naar-PostScript® programma volstaat. De FreeBSD Portscollectie (zie <a href=../ports/#ports>De Portscollectie</a>) bevat een uitgebreid tekst-naar-PostScript®-programma, <code>a2ps</code>, dat wellicht handig is om te gebruiken.</p></div></div><div class=sect3><h4 id=printing-advanced-ps>10.4.1.3. PostScript® simuleren op niet-PostScript®-printers<a class=anchor href=#printing-advanced-ps></a></h4><div class=paragraph><p>PostScript® is <em>de facto</em> de standaard voor op hoge kwaliteit typesetten en afdrukken. PostScript® is echter een <em>dure</em> standaard. Gelukkig heeft Aladdin Enterprises een gratis PostScript®-kloon, Ghostscript, die werkt onder FreeBSD. Ghostscript kan de meeste PostScript®-bestanden lezen en de pagina’s op verschillende soorten apparaten weergeven, waaronder veel niet-PostScript®-printers. Door Ghostscript te installeren en een printer gebruik te laten maken van een speciaal tekstfilter voor uw printer, kan uw niet-PostScript®-printer zich gedragen als een echte PostScript®-printer.</p></div><div class=paragraph><p>Ghostscript is beschikbaar via de FreeBSD Portscollectie, vele versies zijn beschikbaar, de meest gebruikte versie is <a class=package href=https://cgit.freebsd.org/ports/tree/print/ghostscript-gpl/>print/ghostscript-gpl</a>.</p></div><div class=paragraph><p>Om PostScript® te simuleren moet een tekstfilter detecteren of het een PostScript®-bestand aan het afdrukken is. Zo niet, dan stuurt het filter het bestand direct naar een printer, anders gebruikt het filter Ghostscript om het bestand om te zetten naar een formaat dat door een printer wordt begrepen.</p></div><div class=paragraph><p>Een voorbeeld: het volgende script is een tekstfilter voor Hewlett Packard DeskJet 500 printers. Voor andere printers moet het argument <code>-sDEVICE</code> voor het commando <code>gs</code> (Ghostscript) vervangen worden. (Met <code>gs -h</code> wordt een lijst met apparaten getoond worden die de huidige installatie van Ghostscript ondersteunt.)</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  ifhp - Druk Ghostscript-gesimuleerd PostScript(R) af op een DeskJet
#  500.  Geïnstalleerd in /usr/local/libexec/ifhp

#
#  Behandel LF als CR+LF (om een &#34;trapeffect&#34; op HP/PCL
#  printer te voorkomen):
#
printf &#34;\033&amp;k2G&#34; || exit 2

#
#  Lees de eerste twee karakters van het bestand
#
IFS=&#34;&#34; read -r first_line
first_two_chars=`expr &#34;$first_line&#34; : &#39;\(..\)&#39;`

if [ &#34;$first_two_chars&#34; = &#34;%!&#34; ]; then
    #
    #  Het is PostScript(R). Gebruik Ghostscript om te converteren
    #  en druk het af.
    #
    /usr/local/bin/gs -dSAFER -dNOPAUSE -q -sDEVICE=djet500 \
        -sOutputFile=- - &amp;&amp; exit 0
else
    #
    #  Platte tekst of HP/PCL, dus direct afdrukken;  druk een
    #  pagina-einde af om de laatste pagina te ejecteren.
    #
    echo &#34;$first_line&#34; &amp;&amp; cat &amp;&amp; printf &#34;\033&amp;l0H&#34; &amp;&amp;
exit 0
fi

exit 2</pre></div></div><div class=paragraph><p>Tot slot moet LPD op de hoogte gebracht worden van het filter via de optie <code>if</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>:if=/usr/local/libexec/ifhp:</pre></div></div><div class=paragraph><p>Dat is alles. Nu kan <code>lpr platte.tekst</code> en <code>lpr watdanook.ps</code> ingevoerd worden en beiden worden juist afgedrukt.</p></div></div><div class=sect3><h4 id=printing-advanced-convfilters>10.4.1.4. Conversiefilters<a class=anchor href=#printing-advanced-convfilters></a></h4><div class=paragraph><p>Na de eenvoudige installatie, zoals beschreven in <a href=#printing-simple>Eenvoudige printerinstallatie</a>, te hebben voltooid, is het waarschijnlijk wenselijk om conversiefilters te installeren voor favoriete bestandsformaten (naast platte ASCII-tekst).</p></div><div class=sect4><h5 id=_waarom_conversiefilters_installeren>10.4.1.4.1. Waarom conversiefilters installeren?<a class=anchor href=#_waarom_conversiefilters_installeren></a></h5><div class=paragraph><p>Conversiefilters maken het afdrukken van verschillende bestanden eenvoudig. Stel dat veel gebruik gemaakt wordt van het tekstverwerkingsprogramma TeX en een PostScript® printer. Elke keer als door TeX een DVI-bestand wordt gegenereerd, kan dat niet direct afgedrukt worden. Het DVI-bestand moet omgezet worden naar PostScript®. De te geven opdrachten zijn de volgende:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dvips zeewieranalyse.dvi
% lpr zeewieranalyse.ps</code></pre></div></div><div class=paragraph><p>Na installatie van een conversiefilter voor DVI-bestanden kan deze handmatige conversie overgeslagen worden door LPD de conversie te laten uitvoeren. Elke keer als een DVI-bestand wordt afgedrukt, hoeft alleen de volgende opdracht gegeven te worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-d</span> zeewieranalyse.dvi</code></pre></div></div><div class=paragraph><p>LPD voert de DVI-bestandsconversie uit door <code>-d</code> te geven. In <a href=#printing-lpr-options-format>Opties voor opmaak en conversie</a> staat een lijst van conversie-opties.</p></div><div class=paragraph><p>Voor elke conversie-optie moet een <em>conversiefilter</em> geïnstalleerd worden en moet in <span class=filename>/etc/printcap</span> de locatie worden opgegeven. Een conversiefilter is als het tekstfilter voor de eenvoudige printerinstallatie (<a href=#printing-textfilter>Tekstfilter installeren</a>), behalve dat in plaats van platte tekst af te drukken, het conversiefilter het bestand converteert naar een formaat dat een printer begrijpt.</p></div></div><div class=sect4><h5 id=_welke_conversiefilters_installeren>10.4.1.4.2. Welke conversiefilters installeren?<a class=anchor href=#_welke_conversiefilters_installeren></a></h5><div class=paragraph><p>Installeer de conversiefilters die nodig zijn. Als veel DVI-bestanden worden afgedrukt, dan is het handig een DVI-filter te installeren. Als veel troff wordt afgedrukt, dan is het waarschijnlijk handig een troff-filter te installeren.</p></div><div class=paragraph><p>De volgende tabel geeft een samenvatting van filters waarmee LPD kan werken, hoe ze in <span class=filename>/etc/printcap</span> kunnen worden aangeroepen en hoe ze met <code>lpr</code> kunnen worden aangeroepen:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Bestandsformaat</th><th class="tableblock halign-left valign-top">/etc/printcap optie</th><th class="tableblock halign-left valign-top">lpr optie</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>cifplot</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>cf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-c</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DVI</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>df</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-d</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>plot</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>gf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-g</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ditroff</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>nf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-n</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>FORTRAN-tekst</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>rf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-f</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>troff</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>tf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-f</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>raster</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>vf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-v</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>platte tekst</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>if</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>geen, <code>-p</code>, of <code>-l</code></p></td></tr></tbody></table><div class=paragraph><p>In het voorbeeld waarbij <code>lpr -d</code> wordt gebruikt, moet voor de printer een optie <code>df</code> gedefinieerd staan in <span class=filename>/etc/printcap</span>.</p></div><div class=paragraph><p>Ondanks wat anderen mogelijk beweren, zijn formaten als FORTRAN-tekst en plot waarschijnlijk verouderd. Dit biedt de mogelijkheid een nieuwe betekenis te geven aan deze opties door zelf een filter te installeren. Stel dat direct Printerleaf-bestanden afgedrukt moeten worden (bestanden van het bureaubladpublicatieprogramma Interleaf), maar nooit plotbestanden worden afgedrukt. Dan kan een Printerleaf-conversiefilter geïnstalleerd worden onder de optie <code>gf</code> en gebruikers kunnen geïnstrueerd worden om <code>lpr -g</code> te gebruiken om Printerleaf-bestanden af te drukken.</p></div></div><div class=sect4><h5 id=_conversiefilters_installeren>10.4.1.4.3. Conversiefilters installeren<a class=anchor href=#_conversiefilters_installeren></a></h5><div class=paragraph><p>Aangezien conversiefilters programma’s zijn die niet onder de FreeBSD-basisinstallatie vallen, kunnen ze het best onder <span class=filename>/usr/local</span> geplaatst worden. De map <span class=filename>/usr/local/libexec</span> is een veelgebruikte locatie, omdat hier programma’s te vinden zijn die alleen door LPD gebruikt worden. Gewone gebruikers hoeven ze nooit te gebruiken.</p></div><div class=paragraph><p>Om een conversiefilter te activeren, moet de bestandslocatie onder de juiste optie voor de betreffende printer in <span class=filename>/etc/printcap</span> opgegeven worden.</p></div><div class=paragraph><p>In het onderstaande voorbeeld wordt het DVI-conversiefilter toegevoegd onder de sectie van de printer <code>bamboo</code>. Hieronder staat opnieuw het voorbeeldbestand <span class=filename>/etc/printcap</span>, nu met de nieuwe optie <code>df</code> voor de printer <code>bamboo</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose - df-filter voor bamboo toegevoegd
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyu5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>Het DVI-filter is een shellscript met de naam <span class=filename>/usr/local/libexec/psdf</span>. Het script ziet er als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  psdf - DVI naar PostScript afdrukfilter
#  Geïnstalleerd in /usr/local/libexec/psdf
#
# Aangeroepen door lpd wanneer een gebruiker lpr -d uitvoert
#
exec /usr/local/bin/dvips -f | /usr/local/libexec/lprps &#34;$@&#34;</pre></div></div><div class=paragraph><p>Dit script roept <code>dvips</code> in filtermodus aan (het <code>-f</code> argument) op de standaard uitvoer, de af te drukken opdracht. Vervolgens start het PostScript® afdrukfilter <code>lprps</code> (zie <a href=#printing-advanced-if-conversion>Platte tekst op PostScript®-printers afdrukken</a>) met de argumenten die LPD aan het script doorgeeft. <code>lprps</code> gebruikt deze argumenten om de afgedrukte pagina’s te administreren.</p></div></div><div class=sect4><h5 id=_meer_voorbeelden_van_conversiefilters>10.4.1.4.4. Meer voorbeelden van conversiefilters<a class=anchor href=#_meer_voorbeelden_van_conversiefilters></a></h5><div class=paragraph><p>Er is geen vaste procedure om conversiefilters te installeren, er worden in deze sectie wat werkende voorbeelden gegeven. Gebruik deze als hulp bij het zelf maken van filters. Gebruik ze zonder aanpassingen indien mogelijk.</p></div><div class=paragraph><p>Dit voorbeeldscript is een raster (eigenlijk een GIF-bestand) conversiefilter voor een HP LaserJet III-Si printer:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  hpvf - Converteer GIF-bestanden naar HP/PCL, druk vervolgens af
#  Geïnstalleerd in /usr/local/libexec/hpvf

PATH=/usr/X11R6/bin:$PATH; export PATH
giftopnm | ppmtopgm | pgmtopbm | pbmtolj -resolution 300 \
    &amp;&amp; exit 0 \
    || exit 2</pre></div></div><div class=paragraph><p>Het script converteert achtereenvolgens het GIF-bestand naar een PNM-bestand (portable anymap), een PGM-bestand (portable graymap), een PBM-bestand (portable bitmap) en tenslotte naar LaserJet/PCL formaat.</p></div><div class=paragraph><p>Een <span class=filename>/etc/printcap</span> bestand dat bovenstaand filter gebruikt ziet er als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host orchid
#
teak|hp|laserjet|HP LaserJet 3Si:\
        :lp=/dev/lpt0:sh:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:\
        :vf=/usr/local/libexec/hpvf:</pre></div></div><div class=paragraph><p>Het volgende script is een conversiefilter voor troff-gegevens afkomstig van het groff-typesettingsysteem voor de PostScript®-printer <code>bamboo</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  pstf - Converteert groff&#39;s troffgegevens naar PS, drukt vervolgens af.
#  Geïnstalleerd in /usr/local/libexec/pstf
#
exec grops | /usr/local/libexec/lprps &#34;$@&#34;</pre></div></div><div class=paragraph><p>Bovenstaande script maakt eveneens gebruik van <code>lprps</code> om de communicatie met een printer af te handelen. Als een printer op een parallelle poort is aangesloten, ziet het er als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  pstf - Converteert groff&#39;s troff naar PS, drukt vervolgens af.
#  Geïnstalleerd in /usr/local/libexec/pstf
#
exec grops</pre></div></div><div class=paragraph><p>Dat is alles. In <span class=filename>/etc/printcap</span> moet het volgende toegevoegd worden om het filter beschikbaar te maken:</p></div><div class="literalblock programlisting"><div class=content><pre>:tf=/usr/local/libexec/pstf:</pre></div></div><div class=paragraph><p>Hieronder een voorbeeld waarvan FORTRAN-programmeurs waarschijnlijk tranen in hun ogen krijgen: een FORTRAN-tekstfilter voor een willekeurige printer die in staat is platte tekst af te drukken. Het filter wordt actief gemaakt voor <code>teak</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# hprf - FORTRAN tekstfilter voor LaserJet 3si:
# Geïnstalleerd in /usr/local/libexec/hprf
#

printf &#34;\033&amp;k2G&#34; &amp;&amp; fpr &amp;&amp; printf &#34;\033&amp;l0H&#34; &amp;&amp;
 exit 0
exit 2</pre></div></div><div class=paragraph><p>De onderstaande regel wordt toegevoegd aan <span class=filename>/etc/printcap</span> voor de printer <code>teak</code> om het filter beschikbaar te maken:</p></div><div class="literalblock programlisting"><div class=content><pre>:rf=/usr/local/libexec/hprf:</pre></div></div><div class=paragraph><p>Het laatste voorbeeld is wellicht complexer. Er wordt een DVI-filter toegevoegd voor de eerder genoemde LaserJet printer <code>teak</code>. Eerst het makkelijke gedeelte: in <span class=filename>/etc/printcap</span> wordt de locatie van het DVI-filter opgegeven:</p></div><div class="literalblock programlisting"><div class=content><pre>:df=/usr/local/libexec/hpdf:</pre></div></div><div class=paragraph><p>Nu het moeilijke gedeelte: het schrijven van het filter. Daarvoor is een DVI-naar-LaserJet/PCL conversieprogramma nodig. De FreeBSD Portscollectie (zie <a href=../ports/#ports>Portscollectie</a>) heeft er een: <a class=package href=https://cgit.freebsd.org/ports/tree/print/dvi2xx/>print/dvi2xx</a>. Door deze port te installeren komt het programma dat nodig is beschikbaar, <code>dvilj2p</code>, waarmee DVI geconverteerd kan worden naar LaserJet IIp-, LaserJet III- en LaserJet 2000-formaten.</p></div><div class=paragraph><p>Het hulpprogramma <code>dvilj2p</code> maakt het filter <code>hpdf</code> redelijk complex, omdat <code>dvilj2p</code> niet van de standaard invoer kan lezen. Het wil werken met een bestandsnaam. Nog lastiger is dat de bestandsnaam moet eindigen op <span class=filename>.dvi</span>, zodat moeilijk gebruik gemaakt kan worden van <span class=filename>/dev/fd/0</span> als standaard. Dit probleem kan omzeild worden door een (symbolische) koppeling aan te maken van een tijdelijk bestand (eindigend op <span class=filename>.dvi</span>) naar <span class=filename>/dev/fd/0</span>. Hiermee wordt <code>dvilj2p</code> gedwongen van de standaard invoer te lezen.</p></div><div class=paragraph><p>De enige andere hobbel die genomen moet worden, is dat <span class=filename>/tmp</span> niet gebruikt kan worden als tijdelijke koppeling. Symbolische koppelingen zijn eigendom van de gebruiker en groep <code>bin</code>. Het filter wordt uitgevoerd door de gebruiker <code>daemon</code>. De map <span class=filename>/tmp</span> heeft het sticky-bit aan staan. Het filter kan de koppeling wel aanmaken, maar het is niet mogelijk de koppeling te verwijderen als de opdracht is uitgevoerd, omdat de koppeling eigendom is van een andere gebruiker.</p></div><div class=paragraph><p>In plaats hiervan maakt het filter een symbolische koppeling aan in de huidige werkmap, de wachtrijmap (zoals opgegeven in de optie <code>sd</code> in <span class=filename>/etc/printcap</span>). Dit is een perfecte plaats voor filters om hun werk te doen, zeker gezien er (soms) meer vrije schijfruimte is in de wachtrijmap dan onder <span class=filename>/tmp</span>.</p></div><div class=paragraph><p>Dit is het uiteindelijke filter:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  hpdf - Druk DVI-gegevens af op een HP/PCL printer
#  Geïnstalleerd in /usr/local/libexec/hpdf

PATH=/usr/local/bin:$PATH; export PATH

#
#  Definieer een functie om tijdelijke bestanden op te ruimen. Deze
#  staan in de huidige map; de wachtrijmap voor de printer.
#
cleanup() {
   rm -f hpdf$$.dvi
}

#
#  Definieer een functie om fatale fouten te verwerken: geef de
#  opgegeven boodschap weer en sluit af met 2. Afsluiten met 2 vertelt
#  LPD niet nog eens te proberen de afdrukopdracht af te drukken.
#
fatal() {
    echo &#34;$@&#34; 1&gt;&amp;2
    cleanup
    exit 2
}

#
#  Als de gebruiker de opdracht annuleert, stuurt LPD een SIGINT, dus
#  ondervang SIGINT (en enkele andere signalen) om onze rommel op te
#  ruimen.
#
trap cleanup 1 2 15

#
#  Voor de zekerheid bestaande tijdelijke bestanden opruimen
#
cleanup

#
#  Koppel het DVI-invoerbestand aan de standaard invoer (het af te
#  drukken bestand).
#
ln -s /dev/fd/0 hpdf$$.dvi || fatal &#34;Cannot symlink /dev/fd/0&#34;

#
#  Maak LF = CR+LF
#
printf &#34;\033&amp;k2G&#34; || fatal &#34;Cannot initialize printer&#34;

#
#  Converteer en druk af.  De retourneerwaarde van dvilj2p lijkt niet
#  betrouwbaar, dus negeren we het.
#
dvilj2p -M1 -q -e- dfhp$$.dvi

#
#  Opruimen en afsluiten
#
cleanup
exit 0</pre></div></div></div><div class=sect4><h5 id=printing-advanced-autoconv>10.4.1.4.5. Automatische conversie: een alternatief voor conversiefilters<a class=anchor href=#printing-advanced-autoconv></a></h5><div class=paragraph><p>Al deze conversiefilters bieden vele mogelijkheden voor afdrukomgevingen, maar dwingen de gebruiker aan te geven (op de <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> commandoregel) welk filter gebruikt moet worden. Als gebruikers niet zo vaardig zijn in het gebruik van computers, wordt het al snel vervelend steeds aan te moeten geven welk filter gebruikt moet worden. Vervelender is echter wanneer een gebruiker een verkeerd filter gebruikt voor een bepaald bestandsformaat. Het resultaat kan zijn dat een printer honderden pagina’s papier uitspuugt.</p></div><div class=paragraph><p>In plaats van het installeren van conversiefilters, is het te proberen om het (standaard) tekstfilter het bestandstype van het af te drukken bestand te laten detecteren en dan automatisch het juiste conversiefilter aan te laten roepen. Programma’s als <code>file</code> kunnen hierbij handig zijn. Voor <em>sommige</em> bestandsformaten kan het moeilijk zijn de verschillen te ontdekken en voor deze bestanden kan alsnog een conversiefilter beschikbaar worden gesteld.</p></div><div class=paragraph><p>De FreeBSD Portscollectie heeft een tekstfilter dat automatisch converteert genaamd <code>apsfilter</code> (<a class=package href=https://cgit.freebsd.org/ports/tree/print/apsfilter/>print/apsfilter</a>). Het detecteert platte tekst, PostScript® en DVI-bestanden, voert de juiste conversie uit en druk de bestanden af.</p></div></div></div><div class=sect3><h4 id=printing-advanced-of>10.4.1.5. Uitvoerfilters<a class=anchor href=#printing-advanced-of></a></h4><div class=paragraph><p>Het wachtrijsysteem LPD ondersteunt een ander type filter waar nog geen aandacht aan is besteed: een uitvoerfilter. Een uitvoerfilter is bedoeld om alleen platte tekst af te drukken, net als een tekstfilter, maar met veel vereenvoudigingen. Wanneer een uitvoerfilter wordt gebruikt, maar geen tekstfilter, dan:</p></div><div class=ulist><ul><li><p>start LPD een uitvoerfilter voor de gehele opdracht, in plaats van voor elk bestand in de opdracht;</p></li><li><p>biedt LPD het uitvoerfilter niet de voorziening van het identificeren van het begin of eind van de bestanden in de afdrukopdracht;</p></li><li><p>stuurt LPD de gebruikersnaam en de hostnaam niet door aan het filter. Het is dus niet bedoeld om een afdrukadministratie bij te houden. In feite zijn er maar twee argumenten:</p><div class=paragraph><p><code>filter-name</code> -w_width_ -l_length_</p></div><div class=paragraph><p>Hierbij is <em>width</em> afkomstig van de optie <code>pw</code> en <em>length</em> afkomstig van de optie <code>pl</code> voor de betreffende printer.</p></div></li></ul></div><div class=paragraph><p>De eenvoud van een uitvoerfilter is verleidelijk. Als elk bestand in een afdrukopdracht op een nieuwe pagina moet beginnen, is een uitvoerfilter <em>niet geschikt</em>. In dat geval dient een tekstfilter (ook wel invoerfilter) gebruikt te worden (zie <a href=#printing-textfilter>Tekstfilter installeren</a>. Verder is een uitvoerfilter eigenlijk <em>veel ingewikkelder</em>, omdat de te verwerken bytestroom gecontroleerd moet worden op speciale tekens en steeds signalen naar zichzelf moet sturen in opdracht van LPD.</p></div><div class=paragraph><p>Een uitvoerfilter is <em>noodzakelijk</em> als voorbladen gewenst zijn en het nodig is om escape-reeksen of andere initialisatietekens te sturen voor het afdrukken van het voorblad. Maar het is tevens <em>nutteloos</em> als het voorblad voor rekening van de afkomstige gebruiker moet komen, aangezien LPD geen gebruiker of hostinformatie naar het uitvoerfilter stuurt.</p></div><div class=paragraph><p>Op een enkele printer staat LPD het gebruik van zowel een uitvoerfilter als van een tekst of andere filter toe. In deze gevallen start LPD het uitvoerfilter alleen voor het afdrukken van het voorblad (zie <a href=#printing-advanced-header-pages>Voorbladen</a>). LPD verwacht vervolgens van het uitvoerfilter dat deze <em>zichzelf stopt</em> door twee bytes naar het filter te sturen: ASCII 031 gevolgd door ASCII 001. Als een uitvoerfilter deze twee bytes ziet (031, 001), moet die stoppen door een <code>SIGSTOP</code> naar zichzelf te sturen. Als LPD klaar is met het uitvoeren van alle andere filters, dan herstart deze het uitvoerfilter door er een <code>SIGCONT</code> naar toe te sturen.</p></div><div class=paragraph><p>Als er wel een uitvoerfilter, maar <em>geen</em> tekstfilter is en LPD is niet bezig met het verwerken van een opdracht met platte tekst, dan gebruikt LPD het uitvoerfilter voor het afdrukken van de opdracht. Zoals eerder vermeld, drukt het uitvoerfilter elk bestand van de opdracht achter elkaar af zonder pagina-einden of andere signalen voor paginavoortgang. Dit is waarschijnlijk <em>niet</em> gewenst. In bijna alle gevallen is een tekstfilter nodig.</p></div><div class=paragraph><p>Het programma <code>lpf</code>, dat eerder geïntoduceerd is als tekstfilter, kan ook worden uitgevoerd als uitvoerfilter. Als een ad-hoc uitvoerfilter nodig is, maar het schrijven van de bytedetectie en signaalverzending code niet wenselijk is, dan is <code>lpf</code> het proberen waard. <code>lpf</code> kan ook opgenomen worden in een shellscript om initialisatiecode af te handelen die eventueel nodig is voor een printer.</p></div></div><div class=sect3><h4 id=printing-advanced-lpf>10.4.1.6. <code>lpf</code>: een tekstfilter<a class=anchor href=#printing-advanced-lpf></a></h4><div class=paragraph><p>Het programma <span class=filename>/usr/libexec/lpr/lpf</span> uit de gecompileerde FreeBSD-distributie is een tekstfilter (invoerfilter) die uitvoer kan inspringen (een opdracht gegeven met <code>lpr -i</code>), karakters onveranderd kan doorlaten (een opdracht gegeven met <code>lpr -l</code>), de printpositie voor backspaces en tabs in de opdracht kan aanpassen en afgedrukte pagina’s kan administreren. Het kan ook functioneren als uitvoerfilter.</p></div><div class=paragraph><p>Het filter <code>lpf</code> is geschikt voor vele afdrukomgevingen. Hoewel het zelf niet in staat is initialisatiesequenties naar een printer te sturen, is het vrij eenvoudig om een shellscript te schrijven dat de initialisatie doet en vervolgens <code>lpf</code> aanroept.</p></div><div class=paragraph><p>Als <code>lpf</code> afgedrukte pagina’s moet administreren, is het nodig om de juiste waarden in te vullen voor de opties <code>pw</code> en <code>pl</code> in het bestand <span class=filename>/etc/printcap</span>. Deze waarden worden gebruikt om te bepalen hoeveel tekst er op een pagina past en hoeveel pagina’s er in een afdrukopdracht zijn afgedrukt. Zie <a href=#printing-advanced-acct>Printergebruik administreren</a> voor meer informatie.</p></div></div></div><div class=sect2><h3 id=printing-advanced-header-pages>10.4.2. Voorbladen<a class=anchor href=#printing-advanced-header-pages></a></h3><div class=paragraph><p>Als er <em>veel</em> gebruikers zijn die allemaal verschillende printers gebruiken, dan is het te overwegen gebruik te maken van <em>voorbladen</em> als noodzakelijk kwaad.</p></div><div class=paragraph><p>Voorbladen, in het Engels ook wel bekend als <em>banner</em> of <em>burst</em> pagina’s, identificeren wie een bepaalde opdracht heeft afgedrukt. Ze worden meestal bedrukt met grote, dikgedrukte letters, eventueel met een decoratieve rand, zodat ze in een stapel afdrukken opvallen tussen de afgedrukte documenten. Ze maken het gebruikers mogelijk hun afdrukopdracht snel te vinden. Het nadeel van het gebruik van voorbladen is dat er een extra blad moet worden afgedrukt voor elke opdracht, waarmee hun nut niet langer duurt dan een paar minuten. Uiteindelijk belanden ze in een papierbak of afvalberg. Voorbladen gaan vooraf aan elke opdracht, niet aan elk bestand in een opdracht, waardoor de verspilling beperkt blijft.</p></div><div class=paragraph><p>Het LPD-systeem kan automatisch voorbladen afdrukken <em>als</em> een printer direct platte tekst kan afdrukken. In geval van een PostScript®-printer, is het nodig een extern programma aan te roepen om een voorblad te genereren (zie <a href=#printing-advanced-header-pages-ps>Voorbladen op PostScript®-printers</a>.</p></div><div class=sect3><h4 id=printing-advanced-header-pages-enabling>10.4.2.1. Voorbladen afdrukken<a class=anchor href=#printing-advanced-header-pages-enabling></a></h4><div class=paragraph><p>In de sectie <a href=#printing-simple>Eenvoudige printerinstallatie</a> is het afdrukken van voorbladen uitgeschakeld door de optie <code>sh</code> ("suppress header") in het bestand <span class=filename>/etc/printcap</span> op te geven. Om wel voorbladen af te drukken, hoeft alleen de optie <code>sh</code> verwijderd te worden.</p></div><div class=paragraph><p>Dit klinkt wat al te makkelijk, of niet?</p></div><div class=paragraph><p>Dat klopt. Het <em>kan</em> nodig zijn een uitvoerfilter op te geven die initialisatiestrings naar een printer stuurt. Hier is een voorbeeld uitvoerfilter voor HP PCL-compatible printers:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  hpof - Uitvoerfilter voor HP PCL-compatible printers
#  Geïnstalleerd in /usr/local/libexec/hpof

printf &#34;\033&amp;k2G&#34; || exit 2
exec /usr/libexec/lpr/lpf</pre></div></div><div class=paragraph><p>Geef de locatie van het uitvoerfilter op met de optie <code>of</code>. Zie <a href=#printing-advanced-of>Uitvoerfilters</a> voor meer informatie.</p></div><div class=paragraph><p>Hier is een voorbeeldbestand <span class=filename>/etc/printcap</span> voor de printer <code>teak</code> die eerder is geïntroduceerd;. Het afdrukken van voorbladen is geactiveerd en bovenstaande uitvoerfilter is toegevoegd:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host orchid
#
teak|hp|laserjet|HP LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:\
        :vf=/usr/local/libexec/hpvf:\
        :of=/usr/local/libexec/hpof:</pre></div></div><div class=paragraph><p>Als gebruikers nu een opdracht sturen naar <code>teak</code>, wordt er bij elke opdracht een voorblad afgedrukt. Als gebruikers liever willen zoeken naar hun afdrukken, dan kunnen ze de voorbladen onderdrukken door de opdracht te geven met het commando <code>lpr -h</code>. Zie <a href=#printing-lpr-options-misc>Voorbladopties</a> voor meer opties voor <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>LPD drukt een karakter voor pagina-einde af na elk voorblad. Als een printer een ander teken of sequentie gebruikt voor het beëindigen van een pagina, dan kan dit opgeven worden met de optie <code>ff</code> in <span class=filename>/etc/printcap</span>.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=printing-advanced-header-pages-controlling>10.4.2.2. Voorbladen beheren<a class=anchor href=#printing-advanced-header-pages-controlling></a></h4><div class=paragraph><p>Door het afdrukken van voorbladen aan te zetten, produceert LPD een <em>lang voorblad</em> waarop in grote letters de gebruiker, host en opdracht te lezen zijn. Hier volgt een voorbeeld (<code>kelly</code> heeft de opdracht "outline" afgedrukt vanaf host <code>rose</code>):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>      k                   ll       ll
      k                    l        l
      k                    l        l
      k   k     eeee       l        l     y    y
      k  k     e    e      l        l     y    y
      k k      eeeeee      l        l     y    y
      kk k     e           l        l     y    y
      k   k    e    e      l        l     y   yy
      k    k    eeee      lll      lll     yyy y
                                               y
                                          y    y
                                           yyyy

                                   ll
                          t         l        i
                          t         l
       oooo    u    u   ttttt       l       ii     n nnn     eeee
      o    o   u    u     t         l        i     nn   n   e    e
      o    o   u    u     t         l        i     n    n   eeeeee
      o    o   u    u     t         l        i     n    n   e
      o    o   u   uu     t  t      l        i     n    n   e    e
       oooo     uuu u      tt      lll      iii    n    n    eeee

      r rrr     oooo     ssss     eeee
      rr   r   o    o   s    s   e    e
      r        o    o    ss      eeeeee
      r        o    o      ss    e
      r        o    o   s    s   e    e
      r         oooo     ssss     eeee

                                              Job:  outline
                                              Date: Sun Sep 17 11:04:58 1995</code></pre></div></div><div class=paragraph><p>LPD geeft een paginabegin na deze tekst, zodat de opdracht op een nieuwe pagina begint (tenzij de optie <code>sf</code> (<em>suppress form feeds</em>, "onderdruk paginabegin") is toegevoegd bij de desbetreffende printer in <span class=filename>/etc/printcap</span>).</p></div><div class=paragraph><p>Als dit wenselijk is, kan LPD ook een <em>korte tekst</em> op het voorblad afdrukken; geef hiervoor de optie <code>sb</code> (<em>short banner</em>, "kort voorblad") op in het bestand <span class=filename>/etc/printcap</span>. Het voorblad ziet er dan als volgt uit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>rose:kelly  Job: outline  Date: Sun Sep 17 11:07:51 1995</code></pre></div></div><div class=paragraph><p>Standaard drukt LPD het voorblad als eerste af en vervolgens de opdracht. Om dat om te keren, moet de optie <code>hl</code> (<em>header last</em>, "voorblad laatst") in <span class=filename>/etc/printcap</span> worden opgeven.</p></div></div><div class=sect3><h4 id=printing-advanced-header-pages-accounting>10.4.2.3. Voorbladen administreren<a class=anchor href=#printing-advanced-header-pages-accounting></a></h4><div class=paragraph><p>Het gebruik van LPD’s ingebouwde voorbladen dwingt een bepaald paradigma af wat betreft het administreren van printergebruik: voorbladen moeten <em>gratis</em> zijn.</p></div><div class=paragraph><p>Waarom?</p></div><div class=paragraph><p>Omdat het uitvoerfilter het enige externe programma is dat controle heeft als het voorblad afgedrukt wordt dat het gebruik zou kunnen administreren. Het heeft echter geen beschikking over informatie over <em>gebruiker of host</em> of een administratiebestand. Het heeft dus geen idee wie voor het gebruik moet worden belast. Het volstaat ook niet om gewoon "het aantal pagina’s met één op te hogen" door het tekstfilter of een van de conversiefilters (dat wel beschikt over gebruiker- en hostinformatie) te veranderen, omdat gebruikers het afdrukken van een voorblad kunnen onderdrukken met <code>lpr -h</code>. Ze worden dan aangeslagen voor voorbladen die niet zijn afgedrukt. Milieubewuste gebruikers gebruiken vast <code>lpr -h</code>, maar dit kan niet worden afgedwongen.</p></div><div class=paragraph><p>Het is <em>ook niet voldoende</em> om elk filter zijn eigen voorblad te laten genereren (om zo het gebruik te kunnen administreren). Als gebruikers het afdrukken van voorbladen willen onderdrukken met <code>lpr -h</code>, krijgen ze toch een voorblad en worden er ook voor belast, aangezien LPD geen kennis over de optie <code>-h</code> doorgeeft aan de filters.</p></div><div class=paragraph><p>Wat zijn dan de mogelijkheden?</p></div><div class=ulist><ul><li><p>Accepteer het paradigma van LPD en maak voorbladen gratis;</p></li><li><p>Installeer een alternatief voor LPD, zoals LPRng. In <a href=#printing-lpd-alternatives>Alternatieven voor het standaard wachtrijsysteem</a> staat meer over andere afdruksoftware die in plaats van LPD geïnstalleerd kan worden;</p></li><li><p>Schrijf een <em>slim</em> uitvoerfilter. Gewoonlijk is een uitvoerfilter bedoeld om niet meer te doen dan het initialiseren van een printer of wat eenvoudige karakterconversie. Het is geschikt voor voorbladen en opdrachten met platte tekst (als er een tekstfilter is). Maar als er een tekstfilter is voor opdrachten met platte tekst, dan start LPD het uitvoerfilter alleen voor voorbladen. Het uitvoerfilter kan dan het voorblad dat LPD genereert analyseren om te bepalen welke gebruiker en host belast moeten worden voor het afdrukken van het voorblad. Het enige probleem is dat het uitvoerfilter nog steeds niet weet in welk bestand het gebruik moet worden bijgehouden (de naam van het bestand opgegeven in de <code>af</code> wordt niet meegegeven), maar als een bekend bestand gebruikt wordt, kan dit in het uitvoerfilter worden opgeven. Om het parsen af te handelen kan gebruik gemaakt worden van de optie <code>sh</code> (<em>short header</em>, "kort voorblad") in <span class=filename>/etc/printcap</span>. Dit kan echter wat omslachtig zijn en gebruikers waarderen zeker de meer gulle systeembeheerder die voorbladen gratis maakt.</p></li></ul></div></div><div class=sect3><h4 id=printing-advanced-header-pages-ps>10.4.2.4. Voorbladen op PostScript®-printers<a class=anchor href=#printing-advanced-header-pages-ps></a></h4><div class=paragraph><p>Zoals hierboven beschreven, kan LPD een voorblad in platte tekst genereren, dat geschikt is voor de meeste printers. Natuurlijk kan PostScript® platte tekst niet direct afdrukken, zodat de voorbladfunctie van LPD nutteloos is.</p></div><div class=paragraph><p>Een voor de hand liggende manier om voorbladen te krijgen, is elk conversiefilter en tekstfilter zijn eigen voorblad te laten genereren. De filters moeten gebruik maken van de argumenten gebruiker en host om een geschikt voorblad te genereren. Het nadeel van deze methode is dat gebruikers altijd een voorblad krijgen, ook wanneer zij een opdracht geven met <code>lpr -h</code>.</p></div><div class=paragraph><p>Deze methode wordt nader beschreven. Het volgende script heeft drie argumenten (gebruikersnaam, hostnaam en de naam van de opdracht) en maakt een eenvoudig PostScript®-voorblad:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  make-ps-header - genereer een PostScript-voorblad op stdout
#  Geïnstalleerd in /usr/local/libexec/make-ps-header
#

#
#  Dit zijn PostScript-eenheden (72 in een inch). Pas dit aan voor A4
#  of het gebruikte formaat:
#
page_width=612
page_height=792
border=72

#
#  Controleer argumenten
#
if [ $# -ne 3 ]; then
    echo &#34;Usage: `basename $0` &lt;user&gt; &lt;host&gt; &lt;job&gt;&#34; 1&gt;&amp;2
    exit 1
fi

#
#  Bewaar deze, voornamelijk voor de leesbaarheid in de PostScript(R)-code.
#
user=$1
host=$2
job=$3
date=`date`

#
#  Stuur de PostScript(R)-code naar stdout.
#
exec cat &lt;&lt;EOF
%!PS

%
%  Vermijd conflicten met de opdracht van de gebruiker die volgt.
%
save

%
%  Maak een dikke, onaangename border in de marge van het papier.
%
$border $border moveto
$page_width $border 2 mul sub 0 rlineto
0 $page_height $border 2 mul sub rlineto
currentscreen 3 -1 roll pop 100 3 1 roll setscreen
$border 2 mul $page_width sub 0 rlineto closepath
0.8 setgray 10 setlinewidth stroke 0 setgray

%
%  Toon de gebruikersnaam duidelijk, groot en prominent
%
/Helvetica-Bold findfont 64 scalefont setfont
$page_width ($user) stringwidth pop sub 2 div $page_height 200 sub moveto
($user) show

%
%  Nu volgen de saaie bijzonderheden
%
/Helvetica findfont 14 scalefont setfont
/y 200 def
[ (Job:) (Host:) (Date:) ] {
200 y moveto show /y y 18 sub def }
forall

/Helvetica-Bold findfont 14 scalefont setfont
/y 200 def
[ ($job) ($host) ($date) ] {
        270 y moveto show /y y 18 sub def
} forall

%
% Dat is alles
%
restore
showpage
EOF</pre></div></div><div class=paragraph><p>Nu kan zowel het conversiefilter als het tekstfilter dit script aanroepen om eerst een voorblad te genereren en vervolgens de opdracht van de gebruiker af te drukken. Hier volgt het eerder gebruikte DVI-conversieprogramma, aangepast om een voorblad te maken:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  psdf - DVI naar PostScript printfilter
#  Geïnstalleerd in /usr/local/libexec/psdf
#
#  Aangeroepen door lpd, wanneer de gebruiker lpr -d uitvoert
#

orig_args=&#34;$@&#34;

fail() {
    echo &#34;$@&#34; 1&gt;&amp;2
    exit 2
}

while getopts &#34;x:y:n:h:&#34; option; do
    case $option in
        x|y)  ;; # Ignore
        n)    login=$OPTARG ;;
        h)    host=$OPTARG ;;
        *)    echo &#34;LPD started `basename $0` wrong.&#34; 1&gt;&amp;2
              exit 2
              ;;
    esac
done

[ &#34;$login&#34; ] || fail &#34;No login name&#34;
[ &#34;$host&#34; ] || fail &#34;No host name&#34;

( /usr/local/libexec/make-ps-header $login $host &#34;DVI File&#34;
  /usr/local/bin/dvips -f ) | eval /usr/local/libexec/lprps $orig_args</pre></div></div><div class=paragraph><p>Merk op hoe het filter eerst de argumentenlijst moet nagaan om te bepalen wat de gebruikers- en hostnaam zijn. Dit is gelijk voor de andere conversiefilters. Het tekstfilter heeft echter een andere verzameling argumenten (zie <a href=#printing-advanced-filters>Hoe filters werken</a>).</p></div><div class=paragraph><p>Zoals eerder is beschreven, is het in bovenstaande opzet, hoewel deze simpel is, niet mogelijk "voorbladen te onderdrukken" (de optie <code>-h</code> in <code>lpr</code>). Als gebruikers een boom willen sparen (of een paar centen bij betaalde voorbladen) dan is dit dus niet mogelijk, aangezien elk filter een voorblad afdrukt voor iedere opdracht.</p></div><div class=paragraph><p>Om gebruikers in staat te stellen per opdracht voorbladen te onderdrukken, moet gebruik gemaakt worden van de truc uit <a href=#printing-advanced-header-pages-accounting>Voorbladen administreren</a>: schrijf een uitvoerfilter dat het door LPD gegenereerde voorblad inleest en een PostScript®-versie genereert. Als de gebruiker de opdracht geeft met <code>lpr -h</code>, dan genereert LPD geen voorblad en het uitvoerfilter ook niet. Anders leest het uitvoerfilter de tekst van LPD in en stuurt een geschikt voorblad in PostScript® naar de printer.</p></div><div class=paragraph><p>Voor een PostScript®-printer op een seriële lijn kan gebruik gemaakt worden van <code>lprps</code>, dat met een uitvoerfilter wordt geleverd en het bovenstaande kan doen. Voorbladen worden door <code>psof</code> niet geteld.</p></div></div></div><div class=sect2><h3 id=printing-advanced-network-printers>10.4.3. Afdrukken via het netwerk<a class=anchor href=#printing-advanced-network-printers></a></h3><div class=paragraph><p>FreeBSD ondersteunt afdrukken via het netwerk: het sturen van opdrachten naar printers op afstand. Afdrukken via een netwerk betekent over het algemeen twee verschillende dingen:</p></div><div class=ulist><ul><li><p>Het benaderen van een printer aangesloten op een andere computer. Een printer met een conventionele seriële of parallelle verbinding wordt op een bepaalde computer geïnstalleerd. Vervolgens wordt LPD zodanig ingesteld dat afdrukken vanaf andere computers in het netwerk mogelijk is. In <a href=#printing-advanced-network-rm>Printers geïnstalleerd op andere hosts</a> staat hoe dit te doen.</p></li><li><p>Het benaderen van een printer die direct is aangesloten op een netwerk. Een printer heeft een netwerkinterface naast (of in plaats van) een gewone seriële of parallelle poort. Zo een printer kan als volgt werken:</p><div class=ulist><ul><li><p>Het begrijpt het LPD protocol en kan zelfs opdrachten van andere hosts in de wachtrij plaatsen. In dit geval werkt een printer als een gewone host die LPD heeft draaien. Volg de procedure in <a href=#printing-advanced-network-rm>Printers geïnstalleerd op andere hosts</a> om een dergelijke printer te installeren</p></li><li><p>Het kan zijn dat een printer een netwerkverbinding ondersteunt. In dit geval kan een printer worden "aangesloten" op een bepaalde host op het netwerk door deze host verantwoordelijk te maken voor het plaatsen van opdrachten in een wachtrij en het versturen van opdrachten naar de printer. In <a href=#printing-advanced-network-net-if>Printers met netwerkinterfaces</a> staan enkele suggesties om zulke printers te installeren.</p></li></ul></div></li></ul></div><div class=sect3><h4 id=printing-advanced-network-rm>10.4.3.1. Printers geïnstalleerd op andere hosts<a class=anchor href=#printing-advanced-network-rm></a></h4><div class=paragraph><p>Het wachtrijsysteem LPD heeft een ingebouwde mogelijkheid om opdrachten naar andere hosts te sturen die ook LPD draaien (of een systeem dat compatibel is met LPD). Deze eigenschap maakt het mogelijk om een printer op een host te installeren en deze toegankelijk te maken voor andere hosts. Het werkt ook met printers die over een netwerkinterface beschikken en het LPD-protocol begrijpen.</p></div><div class=paragraph><p>Om dit soort afdrukken op afstand mogelijk te maken, moet een printer eerst op een host geïnstalleerd worden, de <em>printerhost</em>, door de printerinstallatie te volgen als beschreven in <a href=#printing-simple>Eenvoudige printerinstallatie</a>. Stel desgewenst de printer in voor geavanceerde taken volgens <a href=#printing-advanced>Geavanceerde printerinstallatie</a>. Test de printer en controleer of deze werkt met eventueel speciaal ingestelde opties voor LPD. De <em>lokale host</em> moet geautoriseerd zijn om de LPD-dienst op de <em>verre host</em> te gebruiken (zie <a href=#printing-advanced-restricting-remote>Opdrachten van hosts op afstand beperken</a>).</p></div><div class=paragraph><p>Als een printer een netwerkinterface heeft die compatibel is met LPD, dan is de <em>printerhost</em> in onderstaande beschrijving de printer zelf en de <em>printernaam</em> is de naam die voor de printer is ingesteld. Meer informatie staat in de documentatie bij de printer en/of de printernetwerkinterface.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Bij een HP LaserJet voert de printernaam <code>text</code> automatisch de CRLF-conversie uit. Het is dan niet nodig het script <span class=filename>hpif</span> te gebruiken.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Op hosts die toegang moeten krijgen tot de printer, moet in <span class=filename>/etc/printcap</span> een regel worden toegevoegd met het volgende:</p></div><div class="olist arabic"><ol class=arabic><li><p>Geef de regel een willekeurige naam. Om het eenvoudig te houden kunnen wellicht het beste dezelfde namen en aliassen worden gebruikt als op de printerhost;</p></li><li><p>Laat de optie <code>lp</code> expliciet leeg (<code>:lp=:</code>);</p></li><li><p>Maak een wachtrijmap aan en geef de locatie op met de optie <code>sd</code>. LPD slaat hier afdrukopdrachten op alvorens ze naar de printerhost te sturen;</p></li><li><p>Geef de naam van de printerhost op met de optie <code>rm</code>;</p></li><li><p>Geef de naam van de printer op de <em>printerhost</em> op met de optie <code>rp</code>.</p></li></ol></div><div class=paragraph><p>Dit is het. Conversiefilters, paginadimensies, enzovoort, hoeven niet in <span class=filename>/etc/printcap</span> opgegeven te worden.</p></div><div class=paragraph><p>Hier volgt een voorbeeld. De host <code>rose</code> heeft twee printers: <code>bamboo</code> en <code>rattan</code>. Gebruikers op de host <code>orchid</code> krijgen toegang tot deze printers. Hier volgt <span class=filename>/etc/printcap</span> voor <code>orchid</code> (uit <a href=#printing-advanced-header-pages-enabling>Voorbladen afdrukken</a>). Er stond in het bestand al een regel voor de printer <code>teak</code>. Voor de twee printers op de host <code>rose</code> zijn twee regels toegevoegd:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host orchid - printers (op afstand) op rose toegevoegd
#

#
#  teak is lokaal; het is direct aangesloten op orchid:
#
teak|hp|laserjet|HP LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/ifhp:\
        :vf=/usr/local/libexec/vfhp:\
        :of=/usr/local/libexec/ofhp:

#
#  rattan is aangesloten op rose; stuur opdrachten voor rattan naar rose:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=/var/spool/lpd/rattan:

#
#  bamboo is ook aangesloten op rose:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=/var/spool/lpd/bamboo:</pre></div></div><div class=paragraph><p>Op <code>orchid</code> moeten wachtrijmappen worden aangemaakt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir -p /var/spool/lpd/rattan /var/spool/lpd/bamboo</span>
<span class=c># chmod 770 /var/spool/lpd/rattan /var/spool/lpd/bamboo</span>
<span class=c># chown daemon:daemon /var/spool/lpd/rattan /var/spool/lpd/bamboo</span></code></pre></div></div><div class=paragraph><p>Nu kunnen gebruikers op <code>orchid</code> afdrukken op <code>rattan</code> en <code>bamboo</code>. Een gebruiker op <code>orchid</code> geeft bijvoorbeeld de volgende invoer:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> bamboo <span class=nt>-d</span> sushi-review.dvi</code></pre></div></div><div class=paragraph><p>Dan kopieert LPD op <code>orchid</code> de opdracht naar de wachtrijmap <span class=filename>/var/spool/lpd/bamboo</span> en ziet dat het een DVI-opdracht is. Zodra de host <code>rose</code> ruimte heeft in zijn wachtrijmap <code>bamboo</code>, sturen de twee LPD’s het bestand naar <code>rose</code>. Het bestand wacht in de wachtrij van <code>rose</code> totdat het succesvol is afgedrukt. Het wordt geconverteerd naar PostScript® (aangezien <code>bamboo</code> een PostScript®-printer is) op <code>rose</code>.</p></div></div><div class=sect3><h4 id=printing-advanced-network-net-if>10.4.3.2. Printers met netwerkinterfaces<a class=anchor href=#printing-advanced-network-net-if></a></h4><div class=paragraph><p>Netwerkkaarten voor printers zijn er in twee versies: een versie die een wachtrij nabootst (de duurdere versies), of versies die alleen de mogelijkheid geven om er informatie naar te sturen alsof het een seriële of parallelle poort is (de goedkopere versies). In <a href=#printing-advanced-network-rm>Printers geïnstalleerd op andere hosts</a> wordt het voor de duurdere beschreven.</p></div><div class=paragraph><p>Het formaat van <span class=filename>/etc/printcap</span> maakt het mogelijk om op te geven welke seriële, of parallelle poort gebruikt moet worden en (in geval van een seriële poort) de baud-snelheid, of er communicatie moet worden toegepast, vertragingen voor tabs, conversies voor nieuwe regelkarakters en meer. Er is geen mogelijkheid om een verbinding met een printer op te geven die op een TCP/IP of andere netwerkpoort luistert.</p></div><div class=paragraph><p>Om informatie naar een netwerkprinter te sturen, is het nodig een programma te ontwikkelen dat door tekst- en conversiefilters kan worden aangeroepen. Hier volgt een voorbeeld: het script <code>netprint</code> stuurt alle informatie van de standaard invoer naar een netwerkprinter. Als eerste argument wordt de hostnaam van de printer opgegeven en als tweede argument het poortnummer waarmee de verbinding moet worden opgezet. Er wordt alleen eenrichtingcommunicatie ondersteund (FreeBSD naar printer). Veel netwerkprinters ondersteunen tweewegcommunicatie. Het kan wenselijk zijn hiervan gebruik te maken (om printerstatus op te vragen, statistieken bij te houden, enzovoort).</p></div><div class="literalblock programlisting"><div class=content><pre>#!/usr/bin/perl
#
#  netprint - Tekstfilter voor printer aangesloten op het netwerk
#  Geïnstalleerd in /usr/local/libexec/netprint
#
$#ARGV eq 1 || die &#34;Usage: $0 &lt;printer-hostname&gt; &lt;port-number&gt;&#34;;

$printer_host = $ARGV[0];
$printer_port = $ARGV[1];

require &#39;sys/socket.ph&#39;;

($ignore, $ignore, $protocol) = getprotobyname(&#39;tcp&#39;);
($ignore, $ignore, $ignore, $ignore, $address)
    = gethostbyname($printer_host);

$sockaddr = pack(&#39;S n a4 x8&#39;, &amp;AF_INET, $printer_port, $address);

socket(PRINTER, &amp;PF_INET, &amp;SOCK_STREAM, $protocol)
    || die &#34;Can&#39;t create TCP/IP stream socket: $!&#34;;
connect(PRINTER, $sockaddr) || die &#34;Can&#39;t contact $printer_host: $!&#34;;
while (&lt;STDIN&gt;) { print PRINTER; }
exit 0;</pre></div></div><div class=paragraph><p>Dit script kan vervolgens in verschillende filters gebruikt worden. Stel dat een Diablo 750-N matrixprinter op het netwerk is aangesloten. Op poort 5100 accepteert de printer informatie om af te drukken. De hostnaam van de printer is <code>scrivener</code>. Hier volgt het tekstfilter voor de printer:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  diablo-if-net - Tekstfilter voor Diablo printer &#39;scrivener&#39; luistert
#  op poort 5100. Geïnstalleerd in /usr/local/libexec/diablo-if-net
#
exec /usr/libexec/lpr/lpf &#34;$@&#34; | /usr/local/libexec/netprint scrivener 5100</pre></div></div></div></div><div class=sect2><h3 id=printing-advanced-restricting>10.4.4. Printergebruik beperken<a class=anchor href=#printing-advanced-restricting></a></h3><div class=paragraph><p>Nu volgt informatie over het beperken van printergebruik. Het LPD-systeem maakt het mogelijk te bepalen wie er toegang heeft tot een printer, zowel lokaal als op afstand, of meerdere kopieën afgedrukt mogen worden, hoe lang opdrachten mogen zijn en hoe lang wachtrijen mogen worden.</p></div><div class=sect3><h4 id=printing-advanced-restricting-copies>10.4.4.1. Meerdere kopieën beperken<a class=anchor href=#printing-advanced-restricting-copies></a></h4><div class=paragraph><p>Het LPD systeem maakt het heel makkelijk voor gebruikers om meerdere afdrukken van een bestand te maken. Gebruikers kunnen opdrachten afdrukken met bijvoorbeeld <code>lpr -#5</code> en krijgen dan vijf kopieën van elk bestand in de opdracht. De systeembeheerder kan beslissen of dit wenselijk is.</p></div><div class=paragraph><p>Wanneer meerdere kopieën onwenselijk zijn, kan de optie <code>-<mark></mark></code> van <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> worden uitgeschakeld door de optie <code>sc</code> in <span class=filename>/etc/printcap</span> op te nemen. Als gebruikers opdrachten versturen met de optie <code>-</code>, zien ze het volgende:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>lpr: multiple copies are not allowed</code></pre></div></div><div class=paragraph><p>Als het mogelijk is van andere hosts af te drukken (zie <a href=#printing-advanced-network-rm>Printers geïnstalleerd op andere hosts</a>), moet de optie <code>sc</code> ook in <span class=filename>/etc/printcap</span> van de andere hosts aanwezig zijn. Anders kunnen gebruikers nog steeds multi-kopie opdrachten van andere hosts sturen.</p></div><div class=paragraph><p>Hier volgt een voorbeeld. Hieronder staat <span class=filename>/etc/printcap</span> voor de host <code>rose</code>. De printer <code>rattan</code> is redelijk krachtig, dus meerdere kopieën zijn toegestaan. De laserprinter <code>bamboo</code> is wat gevoeliger, dus meerdere kopieë zijn uitgeschakeld door de optie <code>sc</code> toe te voegen:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose - beperk meerdere kopieën op bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:\
        :lp=/dev/ttyu5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>Nu moet ook de optie <code>sc</code> worden toegevoegd in <span class=filename>/etc/printcap</span> van host <code>orchid</code> (tegelijk worden meerdere kopieën voor de printer <code>teak</code> uitgeschakeld):</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host orchid - geen meerdere kopieën voor lokale
#  printer teak of printer op afstand bamboo
teak|hp|laserjet|HP LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:sc:\
        :if=/usr/local/libexec/ifhp:\
        :vf=/usr/local/libexec/vfhp:\
        :of=/usr/local/libexec/ofhp:

rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=/var/spool/lpd/rattan:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=/var/spool/lpd/bamboo:sc:</pre></div></div><div class=paragraph><p>Door de optie <code>sc</code> te gebruiken, wordt het gebruik van <code>lpr -#i</code> voorkomen, maar dat weerhoudt gebruikers er nog steeds niet van om <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> meerdere keren te aanroepen of meerdere keren hetzelfde bestand te versturen in een opdracht:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr voorverkoop.teken voorverkoop.teken voorverkoop.teken voorverkoop.teken voorverkoop.teken</code></pre></div></div><div class=paragraph><p>Er zijn vele manieren om dit misbruik te voorkomen (onder andere door het te negeren), welke vrij zijn om te verkennen.</p></div></div><div class=sect3><h4 id=printing-advanced-restricting-access>10.4.4.2. Printertoegang beperken<a class=anchor href=#printing-advanced-restricting-access></a></h4><div class=paragraph><p>Door gebruik te maken van het UNIX® groepmechanisme en de optie <code>rg</code> in <span class=filename>/etc/printcap</span> kan geregeld worden wie er op welke printer kan afdrukken. De gebruikers die toegang hebben tot een printer moeten in een groep worden geplaatst en deze groep moet in de optie <code>rg</code> worden genoemd.</p></div><div class=paragraph><p>Als gebruikers buiten de groep (inclusief <code>root</code>) naar de beheerde printer proberen te printen, worden ze begroet met het volgende bericht:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>lpr: Not a member of the restricted group</code></pre></div></div><div class=paragraph><p>Net als met de optie <code>sc</code> (<em>suppress multiple copies</em>: onderdruk meerdere kopieën) moet <code>rg</code>, indien wenselijk, ook op andere hosts worden opgegeven die ook toegang hebben tot printers (zie <a href=#printing-advanced-network-rm>Printers geïnstalleerd op andere hosts</a>).</p></div><div class=paragraph><p>In het volgende voorbeeld heeft iedereen toegang tot de printer <code>rattan</code>, maar alleen gebruikers in de groep <code>artists</code> kunnen gebruik maken van <code>bamboo</code>. Hier volgt het bekende <span class=filename>/etc/printcap</span> voor de host <code>rose</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose - beperkte toegang voor groep bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:\
        :lp=/dev/ttyu5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>De andere voorbeeldbestanden <span class=filename>/etc/printcap</span> (voor de host <code>orchid</code>) worden niet aangepast. Natuurlijk kan iedereen op <code>orchid</code> afdrukken op <code>bamboo</code>. Het kan zijn dat er sowieso alleen bepaalde gebruikers op <code>orchid</code> zijn toegestaan en dat deze gebruikers toegang mogen hebben tot de printer. Of wellicht niet.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Er kan per printer slechts één groep worden opgegeven.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=printing-advanced-restricting-sizes>10.4.4.3. Grootte van afdrukopdrachten bepalen<a class=anchor href=#printing-advanced-restricting-sizes></a></h4><div class=paragraph><p>Als veel gebruikers toegang hebben tot printers kan het nodig zijn een limiet op te geven voor de grootte van de bestanden die gebruikers naar een printer kunnen sturen. Er is immers slechts beperkte ruimte op het bestandssysteem en er moet ook voldoende ruimte zijn voor opdrachten van andere gebruikers.</p></div><div class=paragraph><p>LPD heeft de mogelijkheid om met de optie <code>mx</code> een limiet op te geven voor het maximum aantal bytes van een bestand in een afdrukopdracht. De eenheden worden opgegeven in <code>BUFSIZ</code> blokken, die 1024 bytes groot zijn. Een nul voor deze optie betekent geen limiet aan de bestandsgrootte. Als de optie wordt weggelaten, wordt een standaardlimiet van 1000 blokken gebruikt.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>De limiet heeft betrekking op de <em>bestanden</em> in een opdracht, <em>niet</em> op de totale grootte van een opdracht.</p></div></td></tr></tbody></table></div><div class=paragraph><p>LPD weigert een bestand dat groter is dan de opgegeven limiet niet. In plaats daarvan plaatst het zo veel mogelijk van het bestand op de wachtrij, om dit vervolgens af te drukken. De rest wordt genegeerd. Of dit gedrag wenselijk is, is onderwerp van debat.</p></div><div class=paragraph><p>Nu worden limieten voor de voorbeeldprinters <code>rattan</code> en <code>bamboo</code> opgegeven. Aangezien de PostScript®-bestanden van die <code>artists</code> nogal groot kunnen worden, krijgen ze een limiet van vijf megabyte opgelegd. Er wordt geen limiet opgelegd voor de platte tekst printer:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host rose
#

#
#  Geen limiet op opdrachtgrootte:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:mx#0:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

#
#  Limiet van vijf megabyte:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:mx#5000:\
        :lp=/dev/ttyu5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>Ook hier zijn de limieten alleen van toepassing op lokale gebruikers. Als toegang tot deze printers van andere hosts mogelijk is, worden deze gebruikers niet beperkt. Het is daarom nodig de optie <code>mx</code> ook in de <span class=filename>/etc/printcap</span> van de betreffende hosts op te geven. In <a href=#printing-advanced-network-rm>Printers geïnstalleerd op andere hosts</a> staat meer informatie over afdrukken op andere hosts.</p></div><div class=paragraph><p>Er is een andere gespecialiseerde manier om opdrachtgrootte voor printers op afstand te beperken (zie <a href=#printing-advanced-restricting-remote>Opdrachten van hosts op afstand beperken</a>.</p></div></div><div class=sect3><h4 id=printing-advanced-restricting-remote>10.4.4.4. Opdrachten van hosts op afstand beperken<a class=anchor href=#printing-advanced-restricting-remote></a></h4><div class=paragraph><p>Het wachtrijsysteem LPD beschikt over verschillende methoden om afdrukopdrachten van hosts op afstand te beperken:</p></div><div class=dlist><dl><dt class=hdlist1>Hostbeperkingen</dt><dd><p>Met de bestanden <span class=filename>/etc/hosts.equiv</span> en <span class=filename>/etc/hosts.lpd</span> kan worden ingesteld van welke hosts op afstand een lokale LPD-opdracht wordt geaccepteerd. LPD controleert of een inkomend verzoek afkomstig is van een host die wordt genoemd in een van deze bestanden. Zo niet, dan weigert LPD het verzoek.</p><div class=paragraph><p>Het formaat van deze bestanden is eenvoudig: één host per regel. <span class=filename>/etc/hosts.equiv</span> wordt ook gebruikt door het protocol <a href="https://man.freebsd.org/cgi/man.cgi?query=ruserok&amp;sektion=3&amp;format=html">ruserok(3)</a> en heeft invloed op programma’s als <a href="https://man.freebsd.org/cgi/man.cgi?query=rsh&amp;sektion=1&amp;format=html">rsh(1)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a>. Voorzichtigheid is dus geboden.</p></div><div class=paragraph><p>Als voorbeeld volgt hier <span class=filename>/etc/hosts.lpd</span> voor de host <code>rose</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>orchid
violet
madrigal.fishbaum.de</pre></div></div><div class=paragraph><p>Dit betekent dat <code>rose</code> verzoeken accepteert van de hosts <code>orchid</code>, <code>violet</code> en <code>madrigal.fishbaum.de</code>. Voor iedere andere host die verbinding probeert te maken met LPD op <code>rose</code>, wordt de opdracht geweigerd.</p></div></dd><dt class=hdlist1>Omvangbeperkingen</dt><dd><p>De hoeveelheid vrije ruimte die over moet blijven op een bestandssysteem waar een wachtrij zich bevindt kan ook worden ingesteld. Hiervoor moet een bestand met de naam <span class=filename>minfree</span> in de wachtrijmap worden aangemaakt. In dit bestand kan een getal worden gezet dat het aantal schijfblokken (512 bytes) aan vrije ruimte aangeeft dat beschikbaar moet blijven wil een opdracht worden geaccepteerd.</p><div class=paragraph><p>Hiermee kan worden gegarandeerd dat gebruikers op afstand een bestandssysteem niet vol kunnen schrijven. Ook kan hierdoor een soort voorrang worden gegeven aan lokale gebruikers: zij kunnen nog opdrachten plaatsen als de vrije schijfruimte al lang beneden de opgegeven limiet uit <span class=filename>minfree</span> is gekomen.</p></div><div class=paragraph><p>Als voorbeeld wordt een bestand <span class=filename>minfree</span> voor de printer <code>bamboo</code> toegevoegd. In <span class=filename>/etc/printcap</span> staat de juiste wachtrijmap:</p></div><div class="literalblock programlisting"><div class=content><pre>bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:mx#5000:\
        :lp=/dev/ttyu5:ms#-parenb cs8 clocal crtscts:rw:mx#5000:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>De wachtrijmap wordt opgegeven met de optie <code>sd</code>. Er wordt een limiet van drie megabyte ingesteld (wat gelijk staat aan 6144 schijfblokken) voor de hoeveelheid vrije schijfruimte die op het bestandssysteem beschikbaar moet zijn voordat LPD een opdracht op afstand accepteert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo 6144 &gt; /var/spool/lpd/bamboo/minfree</span></code></pre></div></div></dd><dt class=hdlist1>Gebruikersbeperkingen</dt><dd><p>Met de optie <code>rs</code> in <span class=filename>/etc/printcap</span> kan worden geregeld welke gebruikers op afstand kunnen afdrukken op lokale printers. Als <code>rs</code> voorkomt voor een lokale printer accepteert LPD opdrachten van hosts op afstand <em>als</em> de gebruiker die de opdracht wil plaatsen ook een account heeft met dezelfde gebruikersnaam op de lokale host. Anders weigert LPD de opdracht.</p><div class=paragraph><p>Deze optie is met name nuttig in een omgeving waar (bijvoorbeeld) verschillende afdelingen een netwerk delen en gebruikers de grenzen van de afdeling overschrijden. Door ze een account te geven op een systeem kunnen ze de aangesloten printers gebruiken vanaf het systeem van hun eigen afdeling. Wanneer ze <em>alleen</em> gebruik mogen maken van de printers en niet van overige diensten op de computer, kunnen "tokenaccounts" worden aangemaakt, zonder thuismap en met een nutteloze shell als <span class=filename>/usr/bin/false</span>.</p></div></dd></dl></div></div></div><div class=sect2><h3 id=printing-advanced-acct>10.4.5. Printergebruik administreren<a class=anchor href=#printing-advanced-acct></a></h3><div class=paragraph><p>Het kan nodig zijn om afdrukken te doorbelasten. Inkt en papier kosten geld en er zijn onderhoudskosten. Printers zitten vol met bewegende delen en hebben de neiging kapot te gaan. Nu is er gekeken naar de printers, het gebruikerspatroon en de onderhoudskosten en op basis hiervan is een prijs vastgesteld per pagina (of per centimeter, per meter, of per wat dan ook). Hoe wordt nu een administratie bijgehouden van gemaakte afdrukken?</p></div><div class=paragraph><p>Het slechte nieuws is dat het wachtrijsysteem LPD hierbij niet echt helpt. Het administreren van afdrukken is erg afhankelijk van het type printer, het afdrukformaat en de wensen die een systeembeheerder heeft ten aanzien van het doorbelasten van printergebruik.</p></div><div class=paragraph><p>Om het administreren te implementeren, is het nodig om aanpassingen te maken in de tekstfilter (om platte tekst opdrachten te belasten) en de conversiefilters (om opdrachten in andere bestandsformaten te belasten), om pagina’s te tellen, of de printer te vragen hoeveel pagina’s er zijn afgedrukt. Het volstaat niet om het eenvoudige uitvoerfilter te gebruiken, aangezien dit niet in staat is het gebruik te administreren. Zie <a href=#printing-advanced-filter-intro>Filters</a>.</p></div><div class=paragraph><p>In het algemeen zijn er twee manieren om gebruik te administreren:</p></div><div class=ulist><ul><li><p><em>Periodiek administreren</em> is de meer gebruikelijke manier, omdat het waarschijnlijk makkelijker is. Als iemand een opdracht afdrukt, schrijft het filter de gebruiker, host en het aantal pagina’s in een administratiebestand. Elke maand, semester, jaar, of een andere gewenste periode kunnen de administratiebestanden verzameld worden om het aantal afgedrukte pagina’s op te tellen en het gebruik in rekening te brengen. De logboekbestanden kunnen vervolgens geschoond worden, zodat met een schone lei de volgende periode begonnen kan worden.</p></li><li><p><em>Directe administratie</em> is minder gebruikelijk, waarschijnlijk omdat het moeilijker is. Met deze methode zorgen de filters ervoor dat gebruikers voor hun printergebruik worden afgerekend op het moment dat ze er gebruik van maken. Net als schijfquota is de administratie onmiddellijk. Hiermee wordt voorkomen dat gebruikers kunnen afdrukken wanneer ze over hun limiet zijn gegaan. Ook biedt dit de mogelijkheid voor gebruikers om hun afdrukquotum te controleren, of aan te passen. Deze methode vereist databasecode om gebruikers en hun quota bij te houden.</p></li></ul></div><div class=paragraph><p>Het wachtrijsysteem LPD ondersteunt beide methoden op eenvoudige wijze. Aangezien de filters (meestal) moeten worden aangeleverd, moet ook de code voor de administratie worden geleverd. Er is echter een voordeel: er is grote flexibiliteit in de administratiemethode. Zo kan bijvoorbeeld gekozen worden tussen periodieke of directe administratie. Er kan gekozen worden welke informatie opgeslagen wordt: gebruikersnamen, hostnamen, type opdracht, aantal afgedrukte pagina’s, hoe lang het afdrukken duurde, enzovoort. Dit alles kan worden gedaan door de filters aan te passen.</p></div><div class=sect3><h4 id=_kort_door_de_bocht_printeradministratie>10.4.5.1. Kort door de bocht printeradministratie<a class=anchor href=#_kort_door_de_bocht_printeradministratie></a></h4><div class=paragraph><p>FreeBSD wordt met twee programma’s geleverd waarmee periodieke administratie direct kan worden opgezet. Het zijn het tekstfilter <code>lpf</code>, beschreven in <a href=#printing-advanced-lpf>lpf: een tekstfilter</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a>, een programma dat posten uit administratiebestanden verzamelt en optelt.</p></div><div class=paragraph><p>Zoals beschreven in de sectie over filters (<a href=#printing-advanced-filters>Filters</a>), roept LPD de tekst- en conversiefilters aan met de naam van het administratiebestand als argument. De filters kunnen dit argument gebruiken om te bepalen in welk bestand de gegevens voor de administratie moeten worden weggeschreven. De naam van dit bestand is afkomstig van de optie <code>af</code> uit <span class=filename>/etc/printcap</span>. Als er geen absoluut pad wordt opgegeven, dan is de locatie relatief aan de wachtrijmap.</p></div><div class=paragraph><p>LPD start <code>lpf</code> met paginabreedte en -lengte argumenten (afkomstig uit de opties <code>pw</code> en <code>pl</code>). Het filter <code>lpf</code> gebruikt deze argumenten om te bepalen hoeveel papier er gebruikt zal worden. Nadat het bestand naar de printer is gestuurd, schrijft het een post in het administratiebestand. De posten zien er als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>2.00 rose:andy
3.00 rose:kelly
3.00 orchid:mary
5.00 orchid:mary
2.00 orchid:zhang</pre></div></div><div class=paragraph><p>Aangezien <code>lpf</code> geen ingebouwde logica voor bestandslocking kent, moet voor elke printer een apart administratiebestand gebruikt worden. Twee <code>lpf</code>s kunnen elkaars posten corrumperen als ze tegelijk in hetzelfde bestand schrijven. De optie <code>af=acct</code> in <span class=filename>/etc/printcap</span> biedt een makkelijke manier om er zeker van te zijn dat aparte bestanden worden gebruikt. Dan bevindt elk administratiebestand zich in de wachtrijmap van de betreffende printer en krijgt de naam <span class=filename>acct</span> krijgen</p></div><div class=paragraph><p>Wanneer het tijd is om met gebruikers af te rekenen voor hun afdrukken, kan het programma <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> gedraaid worden. Ga naar de wachtrijmap van de printer waarvoor betaald moet worden en typ <code>pac</code>. Er verschijnt een dollar-centrische samenvatting zoals het volgende:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>  Login               pages/feet   runs    price
orchid:kelly                5.00    1   <span class=nv>$ </span> 0.10
orchid:mary                31.00    3   <span class=nv>$ </span> 0.62
orchid:zhang                9.00    1   <span class=nv>$ </span> 0.18
rose:andy                   2.00    1   <span class=nv>$ </span> 0.04
rose:kelly                177.00  104   <span class=nv>$ </span> 3.54
rose:mary                  87.00   32   <span class=nv>$ </span> 1.74
rose:root                  26.00   12   <span class=nv>$ </span> 0.52

total                     337.00  154   <span class=nv>$ </span> 6.74</code></pre></div></div><div class=paragraph><p>Dit zijn de argumenten die <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> verwacht:</p></div><div class=dlist><dl><dt class=hdlist1><code>-P <em>printer</em></code></dt><dd><p>De <em>printer</em> waarvoor een samenvatting moet worden gegenereerd. Deze optie werkt alleen als er een absoluut pad is gegeven in de optie <code>af</code> in <span class=filename>/etc/printcap</span>.</p></dd><dt class=hdlist1><code>-c</code></dt><dd><p>Sorteer de uitvoer op kosten, in plaats van alfabetisch op gebruikersnaam.</p></dd><dt class=hdlist1><code>-m</code></dt><dd><p>Negeer de hostnamen in het administratiebestand. Met deze optie is de gebruiker <code>smith</code> op host <code>alpha</code> dezelfde gebruiker als <code>smith</code> op host <code>gamma</code>. Zonder deze optie zijn het verschillende gebruikers.</p></dd><dt class=hdlist1><code>-p <em>prijs</em></code></dt><dd><p>Bereken de prijs met <em>prijs</em> dollar per pagina of per voet, in plaats van de prijs uit de optie <code>pc</code> in <span class=filename>/etc/printcap</span> of twee cent (de standaard). De <em>prijs</em> kan worden opgegeven als een decimaal getal.</p></dd><dt class=hdlist1><code>-r</code></dt><dd><p>Keer de sorteervolgorde om.</p></dd><dt class=hdlist1><code>-s</code></dt><dd><p>Maak een bestand met een samenvatting van de administratie en leeg het administratiebestand.</p></dd><dt class=hdlist1><em>namen…​</em></dt><dd><p>Druk de administratiegegevens alleen af voor gebruikersnamen <em>namen</em>.</p></dd></dl></div><div class=paragraph><p>In de standaard samenvatting die <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> genereert, is het aantal pagina’s te zien dat iedere gebruiker vanaf een bepaalde host heeft afgedrukt. Wanneer de hostnaam niet van belang is (bijvoorbeeld omdat gebruikers iedere host kunnen gebruiken), gebruik dan <code>pac -m</code> om de volgende samenvatting te genereren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>  Login               pages/feet   runs    price
andy                        2.00    1   <span class=nv>$ </span> 0.04
kelly                     182.00  105   <span class=nv>$ </span> 3.64
mary                      118.00   35   <span class=nv>$ </span> 2.36
root                       26.00   12   <span class=nv>$ </span> 0.52
zhang                       9.00    1   <span class=nv>$ </span> 0.18

total                     337.00  154   <span class=nv>$ </span> 6.74</code></pre></div></div><div class=paragraph><p>Om het verschuldigde bedrag te berekenen gebruikt <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> de optie <code>pc</code> uit <span class=filename>/etc/printcap</span> (standaard aantal van 200 of 2 cent per pagina). Specificeer, in honderden centen, de prijs per pagina of per voet die berekent moet worden. Deze waarde kan worden aangepast door <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> aan te roepen met de optie <code>-p</code>. De eenheden van de optie <code>-p</code> zijn echter in dollars, niet in honderden centen. Bijvoorbeeld,</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pac -p1.50</span></code></pre></div></div><div class=paragraph><p>zorgt ervoor dat elke pagina 1,50 dollar kost. U kunt echt grote winsten maken met deze optie.</p></div><div class=paragraph><p>Tenslotte kan met <code>pac -s</code> de samenvatting worden opgeslagen in een bestand dat dezelfde naam krijgt als het administratiebestand van de printer, maar dan met <code>_sum</code> toegevoegd aan de naam. Vervolgens wordt het administratiebestand geleegd. Als <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> opnieuw wordt aangeroepen, herleest <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> het samenvattingsbestand om de startwaarden te bepalen en telt daar de informatie bij op van het standaard administratiebestand.</p></div></div><div class=sect3><h4 id=_hoe_kan_het_aantal_afgedrukte_paginas_worden_geteld>10.4.5.2. Hoe kan het aantal afgedrukte pagina’s worden geteld?<a class=anchor href=#_hoe_kan_het_aantal_afgedrukte_paginas_worden_geteld></a></h4><div class=paragraph><p>Om ook maar de minste nauwkeurigheid bij het administreren te verkrijgen, is het nodig te weten hoeveel papier een afdrukopdracht gebruikt. Dit is het centrale probleem van het bijhouden van printerstatistieken.</p></div><div class=paragraph><p>Voor opdrachten met platte tekst is het probleem niet zo moeilijk op te lossen: het aantal regels in een opdracht wordt geteld en vergeleken met het aantal regels per pagina dat door een printer wordt ondersteund. Hierbij moet niet worden vergeten dat backspaces in het bestand regels overschrijven en dat lange logische regels worden afgedrukt als meerdere fysieke regels.</p></div><div class=paragraph><p>Het tekstfilter <code>lpf</code> (geïntroduceerd in <a href=#printing-advanced-lpf>lpf: een tekstfilter</a>) houdt met deze zaken rekening bij het administreren. Als het nodig is een tekstfilter te schrijven dat ook het printergebruik moet bijhouden, dan is het nuttig de broncode van <code>lpf</code> te bestuderen.</p></div><div class=paragraph><p>Hoe worden andere bestandsformaten dan verwerkt?</p></div><div class=paragraph><p>Voor een DVI-naar-LaserJet, of DVI-naar-PostScript® conversie kan het filter de diagnostische uitvoer van <code>dvilj</code> of <code>dvips</code> bekijken om te bepalen hoeveel pagina’s er zijn geconverteerd. Voor andere formaten kan hetzelfde worden gedaan met behulp van de betreffende conversieprogramma’s.</p></div><div class=paragraph><p>Deze methoden hebben echter als nadeel dat een printer eventueel niet alle pagina’s ook daadwerkelijk afdrukt. Zo kan het papier vast komen te zitten, de toner opraken of de printer ontploffen, terwijl de gebruiker toch moet betalen.</p></div><div class=paragraph><p>Dus, wat kan hieraan worden gedaan?</p></div><div class=paragraph><p>Er is slechts één <em>betrouwbare</em> manier om <em>nauwkeurig</em> te administreren. Dat is met behulp van een printer die kan vertellen hoeveel papier er is gebruikt. Deze moet vervolgens worden aangesloten met een seriële lijn, of een netwerkverbinding. Bijna alle PostScript®-printers hebben deze mogelijkheid, andere modellen en merken mogelijk ook (bijvoorbeeld Imagen netwerklaserprinters). De filters dienen voor deze printers aangepast te worden om het papierverbruik na elke opdracht te achterhalen en de administratieve informatie <em>alleen</em> op deze waarde te baseren. Er is geen noodzaak om foutgevoelig regels te tellen of bestanden te analyseren.</p></div><div class=paragraph><p>Natuurlijk kan een beheerder ook vrijgevig zijn en alle afdrukken gratis maken.</p></div></div></div></div></div><div class=sect1><h2 id=printing-using>10.5. Printers gebruiken<a class=anchor href=#printing-using></a></h2><div class=sectionbody><div class=paragraph><p>Hieronder wordt beschreven hoe printers die onder FreeBSD geïnstalleerd zijn gebruikt moeten worden. Nu volgt een overzicht van de commando’s op gebruikersniveau:</p></div><div class=dlist><dl><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a></dt><dd><p>Druk opdrachten af</p></dd><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a></dt><dd><p>Controleer printerwachtrijen</p></dd><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a></dt><dd><p>Verwijder opdrachten uit de wachtrij van een printer</p></dd></dl></div><div class=paragraph><p>Er is ook een administratief commando, <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a>, beschreven in <a href=#printing-lpc>Printers beheren</a>, dat gebruikt wordt om printers en hun wachtrijen in te stellen.</p></div><div class=paragraph><p>Alledrie de commando’s <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> accepteren een optie <code>-P<em>printernaam</em></code> om aan te geven op welke printer uit <span class=filename>/etc/printcap</span> een opdracht van toepassing is. Dit biedt de mogelijkheid opdrachten te versturen, verwijderen en controleren voor verschillende printers. Als <code>-P</code> niet wordt gebruikt, werken deze commando’s op de printer gedefinieerd in de omgevingsvariabele <code>PRINTER</code>. Tot slot, wanneer de omgevingsvariabele <code>PRINTER</code> niet is gedefinieerd, wordt standaard verwezen naar de printer met de naam <code>lp</code>.</p></div><div class=sect2><h3 id=printing-lpr>10.5.1. Opdrachten afdrukken<a class=anchor href=#printing-lpr></a></h3><div class=paragraph><p>Om bestanden af te drukken:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr bestandsnaam ...</code></pre></div></div><div class=paragraph><p>Dit drukt elk van de opgegeven bestanden af op de standaard printer. Als geen bestanden worden opgegeven, drukt <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> de standaard invoer af. De volgende opdracht drukt bijvoorbeeld een paar belangrijke systeembestanden af:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr /etc/host.conf /etc/hosts.equiv</code></pre></div></div><div class=paragraph><p>Om een specifieke printer te selecteren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> printernaam bestandsnaam ...</code></pre></div></div><div class=paragraph><p>Dit voorbeeld drukt een lange opgave van de huidige map af op de printer <code>rattan</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>ls</span> <span class=nt>-l</span> | lpr <span class=nt>-P</span> rattan</code></pre></div></div><div class=paragraph><p>Omdat er geen bestanden worden meegegeven aan het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>, drukt <code>lpr</code> de gegevens af die het van de standaard invoer leest: de uitvoer van het commando <code>ls -l</code>.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> accepteert ook een breed scala aan opties om de vorm aan te passen, bestandsconversies toe te passen, meerdere kopieën af te drukken, enzovoort. Meer informatie staat in <a href=#printing-lpr-options>Afdrukopties</a>.</p></div></div><div class=sect2><h3 id=printing-lpq>10.5.2. Opdrachten controleren<a class=anchor href=#printing-lpq></a></h3><div class=paragraph><p>Als <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> wordt gebruikt om af te drukken, dan worden de gegevens die afdrukt moet worden in een pakketje samengevoegd dat een "afdrukopdracht" wordt genoemd en naar het wachtrijsysteem LPD gestuurd. Elke printer heeft een wachtrij met opdrachten van alle gebruikers. Een printer drukt deze opdrachten op volgorde van binnenkomst af.</p></div><div class=paragraph><p>De wachtrij voor de standaardprinter kan worden weergegeven met <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a>. Voor een specifieke printer moet de optie <code>-P</code> meegegeven worden. Het volgende commando toont de wachtrij van printer <code>bamboo</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpq <span class=nt>-P</span> bamboo</code></pre></div></div><div class=paragraph><p>Hieronder volgt een voorbeeld van de uitvoer van het commando <code>lpq</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>bamboo is ready and printing
Rank   Owner    Job  Files                              Total Size
active kelly    9    /etc/host.conf, /etc/hosts.equiv   88 bytes
2nd    kelly    10   <span class=o>(</span>standard input<span class=o>)</span>                   1635 bytes
3rd    mary     11   ...                                78519 bytes</code></pre></div></div><div class=paragraph><p>Dit laat drie opdrachten zien in de wachtrij voor <code>bamboo</code>. De eerste opdracht, gegeven door gebruiker <code>kelly</code>, heeft opdrachtnummer 9 gekregen. Elke opdracht voor een printer krijgt een uniek opdrachtnummer. Dit nummer kan in de meeste gevallen genegeerd worden, maar is nodig om een opdracht te annuleren. In <a href=#printing-lprm>Opdrachten verwijderen</a> staan meer details.</p></div><div class=paragraph><p>Opdrachtnummer negen bestaat uit twee bestanden; meerdere bestanden opgegeven naar <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>, worden als één enkele opdracht behandeld. Het is de actieve opdracht (<code>active</code> onder de kolom "Rank"), wat betekent dat de printer deze opdracht momenteel aan het afdrukken is. De tweede opdracht bestaat uit gegevens doorgegeven aan <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> als standaard invoer. De derde opdracht is afkomstig van gebruiker <code>mary</code>. Het is een veel grotere opdracht. De bestandsnaam van het bestand dat ze probeert af te drukken is te lang voor het overzicht, daarom toont <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> drie puntjes.</p></div><div class=paragraph><p>De allereerste regel uitvoer van <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> is ook handig: die vertelt wat de printer momenteel aan het doen is; dat wil zeggen, wat LPD denkt dat de printer aan het doen is.</p></div><div class=paragraph><p>Het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> ondersteunt ook een optie <code>-l</code> om een gedetailleerd, lang overzicht te geven. Hieronder volgt voorbeelduitvoer van <code>lpq -l</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>waiting <span class=k>for </span>bamboo to become ready <span class=o>(</span>offline ?<span class=o>)</span>
kelly: 1st				 <span class=o>[</span>job 009rose]
       /etc/host.conf                    73 bytes
       /etc/hosts.equiv                  15 bytes

kelly: 2nd				 <span class=o>[</span>job 010rose]
       <span class=o>(</span>standard input<span class=o>)</span>                  1635 bytes

mary: 3rd                                <span class=o>[</span>job 011rose]
      /home/orchid/mary/research/venus/alpha-regio/mapping 78519 bytes</code></pre></div></div></div><div class=sect2><h3 id=printing-lprm>10.5.3. Opdrachten verwijderen<a class=anchor href=#printing-lprm></a></h3><div class=paragraph><p>Een gebruiker die van gedachten verandert over een af te drukken opdracht, kan een opdracht uit een wachtrij halen met het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a>. Vaak kan met <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> zelfs een actieve opdracht worden verwijderd, maar een deel of alles van de opdracht kan desondanks toch worden afgedrukt.</p></div><div class=paragraph><p>Om een opdracht van de standaardprinter te verwijderen dient eerst met <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> het opdrachtnummer gevonden te worden. Typ vervolgens:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lprm opdrachtnummer</code></pre></div></div><div class=paragraph><p>Om een opdracht van een specifieke printer te verwijderen, moet de optie <code>-P</code> worden toegevoegd. Het volgende commando verwijdert opdrachtnummer 10 uit de wachtrij van printer <code>bamboo</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lprm <span class=nt>-P</span> bamboo 10</code></pre></div></div><div class=paragraph><p>Het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> heeft een aantal snelkoppelingen:</p></div><div class=dlist><dl><dt class=hdlist1>lprm -</dt><dd><p>Verwijder alle opdrachten (voor de standaardprinter) van de huidige gebruiker.</p></dd><dt class=hdlist1>lprm <em>gebruiker</em></dt><dd><p>Verwijder alle opdrachten (voor de standaardprinter) die van <em>gebruiker</em> zijn. De supergebruiker kan opdrachten van andere gebruikers verwijderen. Andere gebruikers kunnen alleen hun eigen opdrachten verwijderen.</p></dd><dt class=hdlist1>lprm</dt><dd><p>Zonder een opdrachtnummer, gebruikersnaam of <code>-</code> op de opdrachtregel, verwijdert <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> de huidige actieve opdracht van de huidige gebruiker op de standaard printer. Alleen de supergebruiker kan iedere actieve opdracht verwijderen.</p></dd></dl></div><div class=paragraph><p>Gebruik de optie <code>-P</code> met bovenstaande snelkoppelingen om een specifieke printer in plaats van de standaard printer te selecteren. Het volgende voorbeeld verwijdert alle opdrachten van de huidige gebruiker uit de wachtrij van printer <code>rattan</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lprm <span class=nt>-P</span> rattan -</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als in een netwerkomgeving wordt gewerkt, staat <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> alleen toe opdrachten te verwijderen vanaf hosts waarvan de afdrukopdrachten zijn gegeven, ook als dezelfde printer vanaf andere hosts bereikbaar is. Het volgende voorbeeld demonstreert dit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> rattan mijnbestand
% rlogin orchid
% lpq <span class=nt>-P</span> rattan
Rank   Owner	  Job  Files                          Total Size
active seeyan	  12	...                           49123 bytes
2nd    kelly      13   myfile                         12 bytes
% lprm <span class=nt>-P</span> rattan 13
rose: Permission denied
% <span class=nb>logout</span>
% lprm <span class=nt>-P</span> rattan 13
dfA013rose dequeued
cfA013rose dequeued</code></pre></div></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=printing-lpr-options>10.5.4. Meer dan platte tekst: afdrukopties<a class=anchor href=#printing-lpr-options></a></h3><div class=paragraph><p>Het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> ondersteunt een aantal opties voor de opmaak van platte tekst, het converteren van grafische en andere bestandsformaten, het afdrukken van meerdere kopieën, afwikkeling van een opdracht en meer. In deze sectie worden die opties beschreven.</p></div><div class=sect3><h4 id=printing-lpr-options-format>10.5.4.1. Opties voor opmaak en conversie<a class=anchor href=#printing-lpr-options-format></a></h4><div class=paragraph><p>De volgende opties voor <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> zorgen voor de opmaak van de bestanden in de opdracht. Gebruik deze opties als de opdracht geen platte tekst bevat of als platte tekst opgemaakt dient te worden met behulp van <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a>.</p></div><div class=paragraph><p>Het volgende commando drukt bijvoorbeeld een DVI-bestand af (van het TeX typesettingsysteem) met de naam <span class=filename>visrapport.dvi</span> op de printer <code>bamboo</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> bamboo <span class=nt>-d</span> visrapport.dvi</code></pre></div></div><div class=paragraph><p>Deze opties zijn van toepassing op alle bestanden in de opdracht. Het is dus niet mogelijk om bijvoorbeeld DVI- en ditroff-bestanden in een opdracht samen te voegen. In plaats hiervan moeten deze bestanden als aparte opdrachten worden gegeven, elk met een andere conversie-optie.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Al deze opties, behalve <code>-p</code> en <code>-T</code>, vereisen dat er conversiefilters zijn geïnstalleerd voor een printer. De optie <code>-d</code> vereist bijvoorbeeld het DVI-conversiefilter. In <a href=#printing-advanced-convfilters>Conversiefilters</a> staan de details beschreven.</p></div></td></tr></tbody></table></div><div class=dlist><dl><dt class=hdlist1><code>-c</code></dt><dd><p>Afdrukken van cifplot-bestanden.</p></dd><dt class=hdlist1><code>-d</code></dt><dd><p>Afdrukken van DVI-bestanden.</p></dd><dt class=hdlist1><code>-f</code></dt><dd><p>Afdrukken van FORTRAN tekstbestanden.</p></dd><dt class=hdlist1><code>-g</code></dt><dd><p>Afdrukken van plotgegevens.</p></dd><dt class=hdlist1><code>-i <em>aantal</em></code></dt><dd><p>De uitvoer wordt <em>aantal</em> kolommen ingesprongen. Als <em>nummer</em> wordt weggelaten, wordt acht kolommen ingesprongen. Deze optie werkt alleen met bepaalde conversiefilters.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Plaats geen spatie tussen de <code>-i</code> en het nummer.</p></div></td></tr></tbody></table></div></dd><dt class=hdlist1><code>-l</code></dt><dd><p>Drukt letterlijke tekstgegevens af, inclusief controlekarakters.</p></dd><dt class=hdlist1><code>-n</code></dt><dd><p>Afdrukken van ditroff (apparaatonafhankelijke troff) gegevens.</p></dd><dt class=hdlist1>-p</dt><dd><p>Opmaak van platte tekst met <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a> alvorens af te drukken. Zie <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a> voor meer informatie.</p></dd><dt class=hdlist1><code>-T <em>titel</em></code></dt><dd><p>Gebruik <em>titel</em> op de <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a> koptekst in plaats van de bestandsnaam. Deze optie heeft alleen effect in combinatie met de optie <code>-p</code>.</p></dd><dt class=hdlist1><code>-t</code></dt><dd><p>Afdrukken van troffgegevens.</p></dd><dt class=hdlist1><code>-v</code></dt><dd><p>Afdrukken van rastergegevens.</p></dd></dl></div><div class=paragraph><p>In het volgende voorbeeld wordt een mooi opgemaakte versie van de handleiding <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> afgedrukt op de standaardprinter:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% zcat /usr/shared/man/man1/ls.1.gz | troff <span class=nt>-t</span> <span class=nt>-man</span> | lpr <span class=nt>-t</span></code></pre></div></div><div class=paragraph><p>Het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=zcat&amp;sektion=1&amp;format=html">zcat(1)</a> pakt de broncode van de <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> handleiding uit en geeft het door aan het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=troff&amp;sektion=1&amp;format=html">troff(1)</a>, dat de broncode opmaakt, er GNU troff van maakt en dit doorstuurt naar <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>, dat de opdracht naar de LPD wachtrij stuurt. Omdat de optie <code>-t</code> meegeven wordt aan <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>, converteert het wachtrijsysteem de GNU troff uitvoer naar een formaat dat de standaardprinter begrijpt als de opdracht wordt afgedrukt.</p></div></div><div class=sect3><h4 id=printing-lpr-options-job-handling>10.5.4.2. Opties voor opdrachtafhandeling<a class=anchor href=#printing-lpr-options-job-handling></a></h4><div class=paragraph><p>De volgende opties voor <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> geven LPD aan de opdracht speciaal te behandelen:</p></div><div class=dlist><dl><dt class=hdlist1>-# <em>kopieën</em></dt><dd><p>Produceer een aantal van <em>kopieën</em> kopieën van elk bestand in de opdracht, in plaats van één kopie. Een beheerder kan deze optie uitschakelen om slijtage van de printer te voorkomen en gebruik van een kopieerapparaat aan te moedigen. Zie <a href=#printing-advanced-restricting-copies>Meerdere kopieën beperken</a>.</p><div class=paragraph><p>Dit voorbeeld drukt drie kopieën af van <span class=filename>parser.c</span> gevolgd door drie kopieën van <span class=filename>parser.h</span> op de standaardprinter:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr -#3 parser.c parser.h</code></pre></div></div></dd><dt class=hdlist1>-m</dt><dd><p>Stuur een email na voltooiing van de afdrukopdracht. Met deze optie stuurt het LPD-systeem een email als een opdracht is afgehandeld. In dit bericht vertelt het of de opdracht succesvol is uitgevoerd of dat er een fout was met (vaak) de aard van de fout.</p></dd><dt class=hdlist1>-s</dt><dd><p>Kopieer de bestanden niet naar de wachtrijmap, maar maak in plaats hiervan een symbolische link.</p><div class=paragraph><p>Bij het afdrukken van een grote opdracht is het handig van deze optie gebruik te maken. Het spaart ruimte in de wachtrijmap (het kan zijn dat de opdracht de vrije ruimte verbruikt in het bestandssysteem waarin de wachtrijmap zich bevindt). Het bespaart ook tijd, omdat LPD niet elke byte van de opdracht naar de wachtrijmap hoeft te kopieëren.</p></div><div class=paragraph><p>Er is echter een nadeel: aangezien LPD het originele bestand nodig heeft, is het niet mogelijk dit te wijzigen, of te verwijderen totdat het is afgedrukt.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Bij het afdrukken op een printer in een netwerk, moet LPD een bestand uiteindelijk toch kopieëren van een lokale host naar een netwerkhost. De optie <code>-s</code> bespaart dus ruimte in een lokale wachtrijmap, niet in die van een host in een netwerk. Het blijft echter nuttig.</p></div></td></tr></tbody></table></div></dd><dt class=hdlist1>-r</dt><dd><p>Verwijder bestanden in een opdracht na ze naar een wachtrij gekopieerd te hebben of na ze te hebben afgedrukt als de optie <code>-s</code> is gebruikt. Wees voorzichtig met deze optie!</p></dd></dl></div></div><div class=sect3><h4 id=printing-lpr-options-misc>10.5.4.3. Voorbladopties<a class=anchor href=#printing-lpr-options-misc></a></h4><div class=paragraph><p>Deze opties voor <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> passen de tekst aan die gewoonlijk op het voorblad van een opdracht verschijnt. Deze opties hebben geen effect als het afdrukken van voorbladen wordt onderdrukt op een gebruikte printer. Zie <a href=#printing-advanced-header-pages>Voorbladen</a> voor meer informatie over het opzetten van voorbladen.</p></div><div class=dlist><dl><dt class=hdlist1>-C <em>tekst</em></dt><dd><p>Vervang de hostnaam op het voorblad door <em>tekst</em>. De hostnaam is gewoonlijk de naam van de host waarvan de opdracht is verstuurd.</p></dd><dt class=hdlist1>-J <em>tekst</em></dt><dd><p>Vervang de naam van de opdracht op het voorblad door <em>tekst</em>. De naam van de opdracht is standaard de naam van het eerste bestand in de opdracht of <span class=filename>stdin</span> als de standaard uitvoer wordt afgedrukt.</p></dd><dt class=hdlist1>-h</dt><dd><p>Druk geen voorblad af.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Bij sommige installaties kan het zijn dat deze optie geen effect heeft door de manier waarop de voorbladen worden gegenereerd. Zie <a href=#printing-advanced-header-pages>Voorbladen</a> voor de details.</p></div></td></tr></tbody></table></div></dd></dl></div></div></div><div class=sect2><h3 id=printing-lpc>10.5.5. Printers beheren<a class=anchor href=#printing-lpc></a></h3><div class=paragraph><p>De beheerder van de printers in een netwerk heeft deze moeten installeren, opzetten en testen. Met het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> kan een beheerder op nog meer manieren communiceren met printers. Met <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> is het mogelijk om:</p></div><div class=ulist><ul><li><p>Printers te starten en te stoppen;</p></li><li><p>Wachtrijen aan en uit te zetten;</p></li><li><p>De volgorde van opdrachten in elke wachtrij aan te passen.</p></li></ul></div><div class=paragraph><p>Ten eerste een opmerking over terminologie: als een printer is <em>gestopt</em>, drukt die niets uit een wachtrij af. Gebruikers kunnen nog steeds opdrachten geven, maar opdrachten wachten in een wachtrij totdat de bijbehorende printer is <em>gestart</em> of als de wachtrij vrij is.</p></div><div class=paragraph><p>Als een wachtrij is <em>uitgeschakeld</em>, kan geen enkele gebruiker (behalve <code>root</code>) opdrachten naar een printer versturen. Een <em>ingeschakelde</em> wachtrij accepteert opdrachten. Een printer met een uitgeschakelde wachtrij kan worden <em>gestart</em> en drukt dan alle afdrukopdrachten in de wachtrij af tot deze leeg is.</p></div><div class=paragraph><p>In het algemeen is het nodig <code>root</code>-rechten te hebben om het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> te gebruiken. Gewone gebruikers kunnen het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> gebruiken om een printerstatus op te vragen en om een vastgelopen printer te herstarten.</p></div><div class=paragraph><p>Nu volgt een samenvatting van de <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> commando’s. De meeste commando’s accepteren een argument <em>printernaam</em>, om aan te geven op welke printer te werken. Om op alle printers te werken die in <span class=filename>/etc/printcap</span> genoemd worden, kan <code>all</code> worden gebruikt als <em>printernaam</em>.</p></div><div class=dlist><dl><dt class=hdlist1><code>abort printernaam</code></dt><dd><p>Annuleer de huidige opdracht en stop de printer. Gebruikers kunnen nog steeds opdrachten versturen als de wachtrij is ingeschakeld.</p></dd><dt class=hdlist1><code>clean printernaam</code></dt><dd><p>Verwijder oude bestanden uit de wachtrijmap van de betreffende printer. Het kan wel eens gebeuren dat de bestanden waaruit een opdracht bestaat niet juist worden verwijderd door LPD. Dit gebeurt bijvoorbeeld wanneer er fouten zijn opgetreden tijdens het afdrukken of tijdens grote administratieve activiteit. Dit commando vindt en verwijdert bestanden die niet in de wachtrijmap thuishoren.</p></dd><dt class=hdlist1><code>disable printernaam</code></dt><dd><p>Nieuwe opdrachten kunnen niet meer in de wachtrij worden geplaatst. Als de printer nog draait, drukt die de opdrachten die zich nog in de wachtrij bevinden af. De supergebruiker (<code>root</code>) kan altijd opdrachten versturen, ook naar een uitgeschakelde wachtrij.</p><div class=paragraph><p>Dit commando is handig bij het testen van een nieuwe printer of een filterinstallatie: schakel de wachtrij uit en verstuur als <code>root</code> opdrachten. Andere gebruikers kunnen geen opdrachten versturen totdat het testen is voltooid en de wachtrij weer is ingeschakeld met het commando <code>enable</code>.</p></div></dd><dt class=hdlist1><code>down printernaam boodschap</code></dt><dd><p>Schakel een printer uit. Equivalent aan <code>disable</code> gevolgd door <code>stop</code>. De <em>boodschap</em> verschijnt als de status van de printer als een gebruiker de wachtrij van de printer controleert met <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> of de status met <code>lpc status</code>.</p></dd><dt class=hdlist1><code>enable printernaam</code></dt><dd><p>Schakel de wachtrij van een printer in. Gebruikers kunnen opdrachten versturen, maar de printer drukt ze pas af als deze is gestart.</p></dd><dt class=hdlist1><code>help commandonaam</code></dt><dd><p>Geef hulp over het commando <em>commandonaam</em>. Zonder <em>commandonaam</em>, wordt een samenvatting van de beschikbare commando’s getoond.</p></dd><dt class=hdlist1><code>restart printernaam</code></dt><dd><p>Start de printer. Gewone gebruikers kunnen dit commando gebruiken als door een uitzonderlijke omstandigheid LPD hangt, maar ze kunnen een printer niet starten die gestopt is met een van de commando’s <code>stop</code> of <code>down</code>. Het commando <code>restart</code> is equivalent aan <code>abort</code> gevolgd door <code>start</code>.</p></dd><dt class=hdlist1><code>start printernaam</code></dt><dd><p>Start de printer. De printer drukt opdrachten in zijn wachtrij af.</p></dd><dt class=hdlist1><code>stop printernaam</code></dt><dd><p>Stop de printer. De printer maakt de huidige opdracht af en drukt opdrachten in de wachtrij niet af. Gebruikers kunnen nog steeds opdrachten versturen naar een ingeschakelde wachtrij, ook al is de printer gestopt.</p></dd><dt class=hdlist1><code>topq printernaam opdracht-of-gebruikersnaam</code></dt><dd><p>Herschik de wachtrij voor <em>printernaam</em> door de opdrachten met de opgegeven <em>opdracht</em> nummers of opdrachten van <em>gebruikersnaam</em> bovenaan de wachtrij te plaatsen. Voor dit commando is het niet mogelijk <code>all</code> te gebruiken als <em>printernaam</em>.</p></dd><dt class=hdlist1><code>up printernaam</code></dt><dd><p>Schakel een printer in. Het omgekeerde van het commando <code>down</code>. Equivalent aan <code>start</code> gevolgd door <code>enable</code>.</p></dd></dl></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> accepteert bovenstaande commando’s op de opdrachtregel. Als er geen commando’s worden gegeven, schakelt <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> over op een interactieve modus, waar opdrachten gegeven kunnen worden totdat het commando <code>exit</code>, <code>quit</code> of einde-van-bestand wordt gegeven.</p></div></div></div></div><div class=sect1><h2 id=printing-lpd-alternatives>10.6. Alternatieven voor het standaard wachtrijsysteem<a class=anchor href=#printing-lpd-alternatives></a></h2><div class=sectionbody><div class=paragraph><p>Na het lezen van deze handleiding, heeft de lezer zo’n beetje alles gelezen wat er te leren valt over het wachtrijsysteem LPD zoals het te vinden is in FreeBSD. Er zijn veel tekortkomingen te onderkennen, wat vanzelf leidt tot de vraag: "Welke andere wachtrijsystemen zijn er beschikbaar (en werken onder FreeBSD)?"</p></div><div class=dlist><dl><dt class=hdlist1>LPRng</dt><dd><p>LPRng, dat "LPR: the Next Generation" betekent, is een compleet herschreven PLP. Patrick Powell en Justin Mason (de voornaamste beheerder van PLP) hebben samengewerkt om LPRng te maken. De thuispagina voor LPRng is <a href=http://www.lprng.org/>http://www.lprng.org/</a>.</p></dd><dt class=hdlist1>CUPS</dt><dd><p>CUPS, het Common UNIX Printing System, voorziet in een overzetbare printlaag voor UNIX®-achtige besturingssystemen. Het is ontwikkeld door Easy Software Product, om een standaard afdrukoplossing voor alle UNIX®-producenten en gebruikers te promoten.</p><div class=paragraph><p>CUPS gebruikt het Internet Printing Protocol (IPP) als basis voor het beheren van afdrukopdrachten en wachtrijen. De protocollen Line Printer Daemon (LPD), Server Message Block (SMB) en AppSocket (ook bekend als JetDirect) worden ook ondersteund met minder functionaliteit. CUPS biedt bladeren naar netwerkprinters en PostScript® Printer Description (PPD) gebaseerde afdrukopties om echt printen onder UNIX® te ondersteunen.</p></div><div class=paragraph><p>De thuispagina voor CUPS is <a href=http://www.cups.org/>http://www.cups.org/</a>.</p></div></dd><dt class=hdlist1>HPLIP</dt><dd><p>HPLIP, het HP Linux® Imaging and Printing systeem, is een suite van programma’s ontwikkeld door HP dat printen, scannen en faxen voor toepassingen van HP ondersteunt. Deze suite van programma’s maakt gebruikt van het printsysteem CUPS als een backend voor sommige van de printmogelijkheden.</p><div class=paragraph><p>De thuispagina voor HPLIP is <a href=http://hplipopensource.com/hplip-web/index.html>http://hplipopensource.com/hplip-web/index.html</a>.</p></div></dd></dl></div></div></div><div class=sect1><h2 id=printing-troubleshooting>10.7. Problemen oplossen<a class=anchor href=#printing-troubleshooting></a></h2><div class=sectionbody><div class=paragraph><p>Na het uitvoeren van een simpele test met <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> is mogelijk een van onderstaande resultaten verkregen, in plaats van de juiste uitvoer:</p></div><div class=dlist><dl><dt class=hdlist1>Het werkte na enige tijd of er kwam geen volle pagina.</dt><dd><p>De printer drukte bovenstaande af, maar wachtte enige tijd zonder iets te doen. Het was zelfs nodig om een PRINT REMAINING, of FORM FEED-knop op te printer in te drukken om enig resultaat te krijgen.</p><div class=paragraph><p>Als dit het geval is, dan stond de printer waarschijnlijk te wachten of er nog meer gegevens van de opdracht zouden komen, alvorens iets af te drukken. Om dit probleem op te lossen, kan het tekstfilter worden aangepast zodat deze een FORM FEED-karakter (of wat er ook nodig is) naar de printer stuurt. Dit is meestal voldoende om een printer zover te krijgen om tekst af te drukken die zich nog in de interne buffer bevindt. Het is ook nuttig om er zeker van te zijn dat elke afdrukopdracht eindigt op een hele pagina, zodat de volgende opdracht niet ergens midden op de laatste pagina van de vorige opdracht begint.</p></div><div class=paragraph><p>De volgende vervanging voor het shellscript <span class=filename>/usr/local/libexec/if-simple</span> drukt een form feed af nadat de opdracht naar een printer is gestuurd:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# if-simple - Eenvoudige tekst invoerfilter voor lpd
# Geïinstalleerd in /usr/local/libexec/if-simple
#
# Kopieert eenvoudig stdin naar stdout.  Negeer alle filterargumenten.
# Schrijft een form feed karakter (\f) na het afdrukken van de opdracht.

/bin/cat &amp;&amp; printf &#34;\f&#34; &amp;&amp; exit 0
exit 2</pre></div></div></dd><dt class=hdlist1>De opdracht produceerde een getrapt effect.</dt><dd><p>Het resultaat ziet er als volgt uit:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>!</span><span class=s2>&#34;#</span><span class=nv>$%</span><span class=s2>&amp;&#39;()*+,-./01234
                &#34;</span><span class=c>#$%&amp;&#39;()*+,-./012345</span>
                                 <span class=c>#$%&amp;&#39;()*+,-./0123456</span></code></pre></div></div><div class=paragraph><p>Dit krijgen slachtoffers van het <em>trapeffect</em> te zien. Het wordt veroorzaakt door conflicterende interpretaties van de karakters die een regeleinde aangeven. UNIX®-achtige besturingssystemen gebruiken een enkel karakter: ASCII-code 10, de line feed (LF). MS-DOS®, OS/2® en andere besturingssystemen gebruiken twee karakters: ASCII-code 10 <em>en</em> ASCII-code 13 (de carriage return, CR). Veel printers gebruiken de MS-DOS®-conventie voor het representeren van regeleinden.</p></div><div class=paragraph><p>Als onder FreeBSD wordt afgedrukt, bevat de tekst alleen het line feed-karakter. Na het zien van een line feed-karakter vervolgt de printer zijn werk op de volgende regel, maar behoudt dezelfde horizontale positie op de pagina voor het afdrukken van het volgende teken. Hier is de carriage return voor bedoeld: om het volgende karakter af te drukken aan de linkerkant van de pagina.</p></div><div class=paragraph><p>Dit is wat FreeBSD wil dat de printer doet:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Printer ontvangt CR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Printer drukt CR af</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Printer ontvangt LF</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Printer drukt CR + LF af</p></td></tr></tbody></table><div class=paragraph><p>Hier volgen een aantal manieren om dit te bereiken:</p></div><div class=ulist><ul><li><p>Gebruik de instellingentoetsen of het bedieningspaneel van de printer om de interpretatie van deze karakters aan te passen. Controleer de handleiding van de printer om uit te vinden hoe dit moet.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als een systeem in een ander besturingssysteem dan FreeBSD wordt opgestart, kan het nodig zijn een printer <em>opnieuw</em> in te stellen, zodat die een interpretatie voor CR- en LF-karakters gebruikt die bij dat andere besturingssysteem horen. Het kan de voorkeur genieten een van onderstaande oplossingen te gebruiken.</p></div></td></tr></tbody></table></div></li><li><p>Zorg dat het seriële lijnstuurprogramma van FreeBSD automatisch LF naar CR+LF converteert. Dit werkt natuurlijk <em>alleen</em> voor printers op een seriële poort. Gebruik de optie <code>ms#</code> en zet de modus <code>onlcr</code> in het bestand <span class=filename>/etc/printcap</span> voor de printer om deze functionaliteit in te schakelen.</p></li><li><p>Stuur een <em>escape-code</em> naar een printer om tijdelijk LF-karakters anders te behandelen. Raadpleeg hiervoor de handleiding van de printer om escape-codes te achterhalen die de printer ondersteunt. Als de juiste escape-code is gevonden, moet de tekstfilter worden aangepast zodat deze eerst de code stuurt en vervolgens de afdrukopdracht.</p><div class=paragraph><p>Hier volgt een eenvoudig tekstfilter voor printers die HP PCL-escape-codes begrijpen. Dit filter zorgt dat een printer LF-karakters behandelt als LF en CR, vervolgens verstuurt het de opdracht en tot slot een form feed om de laatste pagina in de opdracht uit te voeren. Het zou met alle HP printers moeten werken.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# hpif - Eenvoudig tekst invoerfilter voor lpd voor HP PCL-printers
# Geïnstalleerd in /usr/local/libexec/hpif
#
# Kopieert eenvoudig stdin naar stdout.  Negeert alle filterargumenten.
# Vertelt de printer om LF te zien als CR+LF.
# Werpt de pagina uit na voltooiing.

printf &#34;\033&amp;k2G&#34; &amp;&amp; cat &amp;&amp; printf &#34;\033&amp;l0H&#34; &amp;&amp; exit 0
exit 2</pre></div></div><div class=paragraph><p>Nu volgt een voorbeeldbestand <span class=filename>/etc/printcap</span> voor host <code>orchid</code>. Er is een printer aangesloten op de eerste parallelle poort; een HP LaserJet 3Si, genaamd <code>teak</code>. Die gebruikt bovenstaand script als tekstfilter:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap voor host orchid
#
teak|hp|laserjet|HP LaserJet 3Si:\
        :lp=/dev/lpt0:sh:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:</pre></div></div></li></ul></div></dd><dt class=hdlist1>De regels zijn over elkaar afgedrukt.</dt><dd><p>De printer is nooit een regel opgeschoven. Alle regels tekst lopen over elkaar en zijn op dezelfde regel afgedrukt.</p><div class=paragraph><p>Dit probleem is het "omgekeerde" van het trapeffect, zoals boven beschreven, en is veel zeldzamer. Ergens worden de LF-karakters die FreeBSD gebruikt om een regel te eindigen gezien als CR-karakters om de afdruklocatie te verplaatsen naar de linkerkant van het papier, zonder óók een regel naar beneden te gaan.</p></div><div class=paragraph><p>Gebruik de instellingentoetsen, of het bedieningspaneel van de printer om de volgende interpretatie van LF en CR af te dwingen:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Printer ontvangt</th><th class="tableblock halign-left valign-top">Printer drukt af</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>CR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>CR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>LF</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>CR + LF</p></td></tr></tbody></table></dd><dt class=hdlist1>De printer is karakters kwijt.</dt><dd><p>Tijdens het afdrukken heeft de printer een paar karakters per regel niet afgedrukt. Het kan zijn dat het probleem erger werd naarmate de printer zijn werk deed, steeds meer karakters verliezend.</p><div class=paragraph><p>Het probleem is dat de printer de snelheid waarmee de computer gegevens over een seriële lijn stuurt niet bij kan houden (dit probleem zou zich niet voor moeten doen met printers op een parallelle poort). Er zijn twee manieren om dit probleem te verhelpen:</p></div><div class=ulist><ul><li><p>Als de printer XON/XOFF flow-control ondersteunt, zorg dan dat FreeBSD dit gebruikt door de modus <code>ixon</code> in de optie <code>ms#</code> te specificeren.</p></li><li><p>Als de printer de Request to Send / Clear to Send hardware-handshake ondersteunt, (ook bekend als <code>RTS/CTS</code>), specificeer dan de modus <code>crtscts</code> in de optie <code>ms#</code>. Zorg dat de bedrading van de kabel die printer met de computer verbindt juist is voor hardware flow-control.</p></li></ul></div></dd><dt class=hdlist1>Er werd onzin afgedrukt.</dt><dd><p>Het lijkt alsof de printer willekeurige onzin afdrukte en niet de gewenste tekst.</p><div class=paragraph><p>Dit is meestal een ander symptoom van verkeerde communicatieparameters voor een seriële printer. Controleer de bps-snelheid in de optie <code>br</code> en de instelling voor pariteit in de optie <code>ms#</code>. Wees er zeker van dat de printer dezelfde instellingen gebruikt als in het bestand <span class=filename>/etc/printcap</span> worden opgegeven.</p></div></dd><dt class=hdlist1>Er gebeurde niets.</dt><dd><p>Als er niets gebeurde, ligt het probleem waarschijnlijk bij FreeBSD en niet bij de hardware. Voeg de optie logboekbestand (<code>lf</code>) toe in <span class=filename>/etc/printcap</span> voor de betreffende printer. Hier is bijvoorbeeld de definitie voor <code>rattan</code> met de optie <code>lf</code>:</p><div class="literalblock programlisting"><div class=content><pre>rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:\
        :lf=/var/log/rattan.log</pre></div></div><div class=paragraph><p>Probeer vervolgens nogmaals af te drukken. Controleer het logboekbestand (in dit voorbeeld <span class=filename>/var/log/rattan.log</span>) op mogelijke foutmeldingen. Probeer op basis van deze melding het probleem te verhelpen.</p></div><div class=paragraph><p>Als er geen optie <code>lf</code> is opgegeven, gebruikt LPD <span class=filename>/dev/console</span> als standaard.</p></div></dd></dl></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 maart 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/nl/books/handbook/kernelconfig class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/nl/books/handbook/linuxemu class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#printing-synopsis>10.1. Overzicht</a></li><li><a href=#printing-intro-spooler>10.2. Inleiding</a></li><li><a href=#printing-intro-setup>10.3. Standaardinstallatie</a></li><li><a href=#printing-advanced>10.4. Geavanceerde printerinstallatie</a></li><li><a href=#printing-using>10.5. Printers gebruiken</a></li><li><a href=#printing-lpd-alternatives>10.6. Alternatieven voor het standaard wachtrijsysteem</a></li><li><a href=#printing-troubleshooting>10.7. Problemen oplossen</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/nl/books/handbook/handbook_nl.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/nl/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/nl/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>Dutch</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/nl class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/nl/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>