<!doctype html><html class=theme-light lang=nl><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/nl/books/handbook/security/><title>Hoofdstuk 15. Beveiliging | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Hoofdstuk 15. Beveiliging"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="nl"><meta property="og:url" content="https://docs.freebsd.org/nl/books/handbook/security/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/nl\/books\/handbook\/security\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/nl>Documentation portal</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/nl/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/nl/books>Books</a></li><li><a href=https://docs.freebsd.org/nl/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/nl/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=nl>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/preface/>Voorwoord</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-audience>Bedoeld publiek</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-changes-from3>Wijzigingen ten opzichte van de derde editie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-changes-from2>Wijzigingen ten opzichte van de tweede editie (2004)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-changes>Veranderingen ten opzichte van de eerste editie (2001)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-overview>De opbouw van dit boek</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-conv>Overeenkomsten in dit boek</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-acknowledgements>Dankwoorden</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/parti/>Deel I. Beginnen</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/introduction/>Hoofdstuk 1. Introductie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/introduction/#introduction-synopsis>1.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/introduction/#nutshell>1.2. Welkom bij FreeBSD!</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/introduction/#history>1.3. Over het FreeBSD Project</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/install/>Hoofdstuk 2. FreeBSD installeren op FreeBSD 8.X en eerder</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-synopsis>2.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-hardware>2.2. Hardware-eisen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-pre>2.3. Voorbereidende taken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-start>2.4. Beginnen met de installatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#using-sysinstall>2.5. Inleiding Sysinstall</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-steps>2.6. Schijfruimte toewijzen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-choosing>2.7. Wat installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-media>2.8. Installatiemedia kiezen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-final-warning>2.9. De installatie bevestigen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-post>2.10. Instellingen na de installatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-trouble>2.11. Problemen oplossen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-advanced>2.12. Installeren voor gevorderden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-diff-media>2.13. Aangepaste installatiemedia maken</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/bsdinstall/>Hoofdstuk 3. FreeBSD 9.X en nieuwer installeren</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/bsdinstall/#bsdinstall-synopsis>33.1. Overzicht</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/basics/>Hoofdstuk 4. UNIX® beginselen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-synopsis>4.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#consoles>4.2. Virtuele consoles en terminals</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#permissions>4.3. Rechten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#dirstructure>4.4. Mappenstructuur</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#disk-organization>4.5. Organisatie van schijven</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#mount-unmount>4.6. Het koppelen en ontkoppelen van bestandssystemen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-processes>4.7. Processen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-daemons>4.8. Daemons, signalen en het stoppen van processen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#shells>4.9. Shells</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#editors>4.10. Teksteditors</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-devices>4.11. Apparaten en apparaatnodes</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#binary-formats>4.12. Binaire formaten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-more-information>4.13. Meer informatie</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/ports/>Hoofdstuk 5. Applicaties installeren: pakketten en ports</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-synopsis>5.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-overview>5.2. Overzicht van softwareinstallatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-finding-applications>5.3. Applicaties zoeken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#packages-using>5.4. Het pakkettensysteem gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-using>5.5. De Portscollectie gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-nextsteps>5.6. Activiteiten na het installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-broken>5.7. Omgaan met kapotte ports</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/x11/>Hoofdstuk 6. Het X Window systeem</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x11-synopsis>6.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-understanding>6.2. X begrijpen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-install>6.3. X11 installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-config>6.4. X11 instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-fonts>6.5. Lettertypen gebruiken in X11</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-xdm>6.6. De X beeldschermmanager</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x11-wm>6.7. Bureaubladomgevingen</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partii/>Deel II. Algemene taken</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/desktop/>Hoofdstuk 7. Bureaubladapplicaties</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-synopsis>7.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-browsers>7.2. Browsers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-productivity>7.3. Productiviteit</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-viewers>7.4. Documentviewers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-finance>7.5. Financiën</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-summary>7.6. Samenvatting</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/>Hoofdstuk 8. Multimedia</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#multimedia-synopsis>8.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#sound-setup>8.2. Geluidskaart installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#sound-mp3>8.3. MP3 audio</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#video-playback>8.4. Video afspelen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#tvcard>8.5. TV-kaarten installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#mythtv>8.6. MythTV</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#scanners>8.7. Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/>Hoofdstuk 9. De FreeBSD-kernel instellen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Samenvatting</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Redenen om een aangepaste kernel te bouwen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-devices>9.3. De systeemhardware vinden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Kernel stuurprogramma’s, subsystemen, en modules</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-building>9.5. Bouwen en installeren van een aangepaste kernel</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-config>9.6. Het instellingenbestand</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/printing/>Hoofdstuk 10. Afdrukken</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-synopsis>10.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-intro-spooler>10.2. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-intro-setup>10.3. Standaardinstallatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-advanced>10.4. Geavanceerde printerinstallatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-using>10.5. Printers gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-lpd-alternatives>10.6. Alternatieven voor het standaard wachtrijsysteem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-troubleshooting>10.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/>Hoofdstuk 11. Linux® binaire compatibiliteit</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Installatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Mathematica® installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-maple>11.4. Maple™ installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-matlab>11.5. MATLAB® installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-oracle>11.6. Oracle® installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-advanced>11.7. Gevorderde onderwerpen</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partiii/>Deel III. Systeembeheer</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/config/>Hoofdstuk 12. Instellingen en optimalisatie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#config-synopsis>12.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-initial>12.2. Initiële instellingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-core-configuration>12.3. Hoofdinstellingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-appconfig>12.4. Toepassingen instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-starting-services>12.5. Diensten starten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-cron>12.6. <code>cron</code> instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-rcd>12.7. Gebruik van rc met FreeBSD</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#config-network-setup>12.8. Netwerkkaarten instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-virtual-hosts>12.9. Virtuele hosts</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-syslog>12.10. De systeemlogger syslogd configureren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-configfiles>12.11. Instellingenbestanden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-sysctl>12.12. Optimaliseren met sysctl</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-disk>12.13. Harde schijven optimaliseren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-kernel-limits>12.14. Fijnafstemming van kernellimieten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#adding-swap-space>12.15. Wisselbestandruimte toevoegen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#acpi-overview>12.16. Energie- en bronnenbeheer</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#ACPI-debug>12.17. FreeBSD ACPI gebruiken en debuggen</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/boot/>Hoofdstuk 13. Het FreeBSD opstartproces</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-synopsis>13.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-introduction>13.2. Het bootprobleem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-blocks>13.3. De bootmanager en opstartstadia</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-kernel>13.4. Interactie met de kernel tijdens opstarten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#device-hints>13.5. Device hints</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-init>13.6. Init: start van procesbesturing</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-shutdown>13.7. Afsluitvolgorde</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/users/>Hoofdstuk 14. Gebruikers- en basisaccountbeheer</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-synopsis>14.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-introduction>14.2. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-superuser>14.3. Het superuser-account</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-system>14.4. Systeemaccounts</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-user>14.5. Gebruikersaccounts</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-modifying>14.6. Accounts wijzigen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-limiting>14.7. Gebruikers beperken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-groups>14.8. Groepen</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle checked>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/security/>Hoofdstuk 15. Beveiliging</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-synopsis>15.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-intro>15.2. Introductie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#securing-freebsd>15.3. FreeBSD beveiligen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 en crypt</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#one-time-passwords>15.5. Eenmalige wachtwoorden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#kerberos5>15.7. Kerberos5</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#openssl>15.8. OpenSSL</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#ipsec>15.9. VPN via IPsec</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#openssh>15.10. OpenSSH</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#fs-acl>15.11. Bestandssysteem toegangscontrolelijsten (ACLs)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-portaudit>15.12. Monitoren van beveiligingsproblemen met andere software</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-advisories>15.13. FreeBSD beveiligingswaarschuwingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-accounting>15.14. Procesaccounting</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/jails/>Hoofdstuk 16. Jails</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-synopsis>16.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-terms>16.2. Termen en begrippen van jails</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-intro>16.3. Introductie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-build>16.4. Creeëren en controleren van jails</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-tuning>16.5. Optimaliseren en administratie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-application>16.6. Toepassing van jails</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/mac/>Hoofdstuk 17. Verplichte Toegangscontrole (MAC)</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-synopsis>17.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-inline-glossary>17.2. Sleuteltermen in dit hoofdstuk</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-initial>17.3. Uitleg over MAC</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-understandlabel>17.4. MAC-labels begrijpen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-planning>17.5. De beveiligingsconfiguratie plannen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-modules>17.6. Module-instellingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-seeotheruids>17.7. MAC-module seeotheruids</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-bsdextended>17.8. MAC-module bsdextended</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-ifoff>17.9. MAC-module ifoff</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-portacl>17.10. MAC-module portacl</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-partition>17.11. MAC-module partition</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-mls>17.12. MAC-module Multi-Level Security</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-biba>17.13. MAC-module Biba</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-lomac>17.14. MAC-module LOMAC</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-implementing>17.15. Nagios in een MAC-jail</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-userlocked>17.16. Gebruikers afsluiten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-troubleshoot>17.17. Problemen oplossen met het MAC-raamwerk</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/audit/>Hoofdstuk 18. Security Event Auditing</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-synopsis>18.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-inline-glossary>18.2. Sleutelwoorden in dit hoofdstuk</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-install>18.3. Installeren van audit ondersteuning.</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-config>18.4. Audit Configuratie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-administration>18.5. Het audit subsysteem beheren.</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/disks/>Hoofdstuk 19. Opslag</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-synopsis>19.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-naming>19.2. Apparaatnamen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-adding>19.3. Schijven toevoegen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#raid>19.4. RAID</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#usb-disks>19.5. USB-opslagapparaten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#creating-cds>19.6. Optische media (CD’s) aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#creating-dvds>19.7. Optische media (DVD’s) aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#floppies>19.8. Diskettes aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backups-tapebackups>19.9. Gegevensbanden aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backups-floppybackups>19.10. Naar diskettes back-uppen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backup-strategies>19.11. Back-up strategieën</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backup-basics>19.12. Back-upbeginselen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-virtual>19.13. Netwerk-, geheugen-, en bestandsgebaseerde bestandssystemen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#snapshots>19.14. Snapshots van bestandssystemen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#quotas>19.15. Bestandssysteemquota</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-encrypting>19.16. Schijfpartities versleutelen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#swap-encrypting>19.17. Het versleutelen van de wisselbestand ruimte</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-hast>19.18. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/geom/>Hoofdstuk 20. GEOM: Modulair schijftransformatie raamwerk</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-synopsis>20.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-intro>20.2. GEOM inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-striping>20.3. RAID0 - aaneengeschakeld</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-mirror>20.4. RAID1 - spiegelen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-raid3>20.5. RAID3 - Striping op byte-niveau met toegewijde pariteit</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-ggate>20.6. GEOM Gate netwerk apparaten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-glabels>20.7. Het labelen van schijven</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-gjournal>20.8. UFS logboeken door middel van GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/>Hoofdstuk 21. Ondersteuning van bestandssystemen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/#filesystems-synopsis>21.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/#filesystems-zfs>21.2. Het Z File System (ZFS)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/#filesystems-linux>21.3. Linux® bestandssystemen</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/>Hoofdstuk 22. Virtualisatie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/#virtualization-synopsis>22.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/#virtualization-guest>22.2. FreeBSD als een gast-besturingssysteem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/#virtualization-host>22.3. FreeBSD als een gastheer-besturingssysteem</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/l10n/>Hoofdstuk 23. Lokalisatie - I18N/L10N gebruiken en instellen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#l10n-synopsis>23.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#l10n-basics>23.2. Beginselen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#using-localization>23.3. Lokalisatie gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#l10n-compiling>23.4. I18N-programma’s compileren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#lang-setup>23.5. FreeBSD lokaliseren naar talen</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/>Hoofdstuk 24. FreeBSD updaten en upgraden</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. FreeBSD Update</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. Portsnap: een updategereedschap voor de Portscollectie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. De documentatie bijwerken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#current-stable>24.5. Een ontwikkelingstak volgen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#synching>24.6. Broncode synchroniseren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#makeworld>24.7. De "wereld" opnieuw bouwen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#make-delete-old>24.8. Het verwijderen van overbodige bestanden, directories en bibliotheken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#small-lan>24.9. Meerdere machines bijwerken</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/>Hoofdstuk 25. DTrace</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-synopsis>25.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-implementation>25.2. Implementatieverschillen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-enable>25.3. Ondersteuning voor DTrace aanzetten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-using>25.4. DTrace gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-language>25.5. De taal D</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partiv/>Deel IV. Netwerkcommunicatie</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/>Hoofdstuk 26. Seriële communicatie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#serial-synopsis>26.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#serial>26.2. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#term>26.3. Terminals</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#dialup>26.4. Inbeldienst</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#dialout>26.5. Uitbeldienst</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#serialconsole-setup>26.6. Seriële console opzetten</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/>Hoofdstuk 27. PPP en SLIP</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#userppp>27.2. Gebruikmaken van gebruiker-PPP</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#ppp>27.3. Kernel-PPP gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. Het problemen oplossen van PPP-verbindingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#pppoe>27.5. PPP gebruiken over Ethernet (PPPoE)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#pppoa>27.6. Gebruik maken van PPP over ATM (PPPoA)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#slip>27.7. Gebruik maken van SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/mail/>Hoofdstuk 28. Elektronische mail</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-synopsis>28.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-using>28.2. Gebruik maken van elektronische mail</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#sendmail>28.3. sendmail instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-changingmta>28.4. De Mail Transfer Agent vervangen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-trouble>28.5. Problemen oplossen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-advanced>28.6. Geavanceerde onderwerpen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#SMTP-UUCP>28.7. SMTP met UUCP</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#outgoing-only>28.8. Instellen om alleen te versturen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#SMTP-dialup>28.9. Mail gebruiken met een inbelverbinding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#SMTP-Auth>28.10. SMTP-authenticatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-agents>28.11. Mail User Agents</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-fetchmail>28.12. fetchmail gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-procmail>28.13. procmail gebruiken</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/>Hoofdstuk 29. Netwerkdiensten</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-servers-synopsis>29.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-inetd>29.2. De inetd"Super-Server"</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-nfs>29.3. Netwerkbestandssysteem (NFS)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-nis>29.4. Netwerkinformatiesysteem (NIS/YP)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-dhcp>29.5. Automatisch netwerk instellen (DHCP)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-dns>29.6. Domeinnaamsysteem (DNS)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-apache>29.7. Apache HTTP server</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-ftp>29.8. File Transfer Protocol (FTP)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-samba>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-ntp>29.10. Tijd synchroniseren met NTP</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-syslogd>29.11. Hosts op afstand loggen met <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/>Hoofdstuk 30. Firewalls</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-intro>30.1. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-concepts>30.2. Firewallconcepten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-apps>30.3. Firewallsoftware</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-pf>30.4. De OpenBSD Packet Filter (PF) en ALTQ</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-ipf>30.5. De IPFILTER (IPF) firewall</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/>Hoofdstuk 31. Geavanceerde netwerken</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Samenvatting</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-routing>31.2. Gateways en routes</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-wireless>31.3. Draadloze netwerken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-bridging>31.5. Bridging</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-aggregation>31.6. Verbindingsaggregatie en failover</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-diskless>31.7. Schijfloos werken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-pxe-nfs>31.8. Met PXE en een NFS-root-bestandssysteem opstarten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-isdn>31.9. ISDN</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-natd>31.10. Network Address Translation</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-ipv6>31.11. IPv6</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-atm>31.12. Asynchronous Transfer Mode (ATM)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#carp>31.13. Common Address Redundancy Protocol (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partv/>Deel V. Appendix</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/>Bijlage A. FreeBSD verkrijgen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-cdrom>A.1. CD-ROM en DVD uitgevers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-ftp>A.2. FTP sites</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-svn>A.3. Subversion-sites</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#anoncvs>A.4. Anonieme CVS</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#ctm>A.5. CTM gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#cvsup>A.6. CVSup gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#cvs-tags>A.7. CVS labels</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-rsync>A.8. rsync sites</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/>Bijlage B. Bibliografie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-freebsd>B.1. Boeken & tijdschriften over FreeBSD</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-userguides>B.2. Voor gebruikers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-adminguides>B.3. Voor beheerders</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-programmers>B.4. Voor programmeurs</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-osinternals>B.5. Dieper in het besturingssysteem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-security>B.6. Over beveiliging</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-hardware>B.7. Over hardware</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-history>B.8. UNIX® geschiedenis</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-journals>B.9. Tijdschriften en periodieken</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/eresources/>Bijlage C. Bronnen op Internet</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-mail>C.1. Mailinglijsten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-news>C.2. Usenet-nieuwsgroepen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-web>C.3. World wide webservers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-email>C.4. Email-adressen</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/pgpkeys/>Bijlage D. PGP sleutels</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Beambten</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Hoofdstuk 15. Beveiliging</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#security-synopsis>15.1. Overzicht</a></li><li><a href=#security-intro>15.2. Introductie</a></li><li><a href=#securing-freebsd>15.3. FreeBSD beveiligen</a></li><li><a href=#crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 en crypt</a></li><li><a href=#one-time-passwords>15.5. Eenmalige wachtwoorden</a></li><li><a href=#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=#kerberos5>15.7. Kerberos5</a></li><li><a href=#openssl>15.8. OpenSSL</a></li><li><a href=#ipsec>15.9. VPN via IPsec</a></li><li><a href=#openssh>15.10. OpenSSH</a></li><li><a href=#fs-acl>15.11. Bestandssysteem toegangscontrolelijsten (ACLs)</a></li><li><a href=#security-portaudit>15.12. Monitoren van beveiligingsproblemen met andere software</a></li><li><a href=#security-advisories>15.13. FreeBSD beveiligingswaarschuwingen</a></li><li><a href=#security-accounting>15.14. Procesaccounting</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=security-synopsis>15.1. Overzicht<a class=anchor href=#security-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Dit hoofdstuk biedt een basisinleiding in systeembeveiligingsconcepten, een aantal goede basisregels en een paar gevorderde onderwerpen binnen FreeBSD. Veel van de onderwerpen die worden behandeld kunnen ook worden toegepast op systemen en Internet in het algemeen. Het Internet is niet langer een "vriendelijke" omgeving waar iedereen een goede buur wil zijn. Het beveiligen van een systeem is onontbeerlijk als gegevens, intellectueel eigendom, tijd en wat dan ook uit de handen van hackers en dergelijke gehouden moeten worden.</p></div><div class=paragraph><p>FreeBSD biedt veel hulpmiddelen en mechanismen om te zorgen voor de integriteit en veiligheid van een systeem en netwerk.</p></div><div class=paragraph><p>Na het lezen van dit hoofdstuk weet de lezer:</p></div><div class=ulist><ul><li><p>Van basis systeembeveiligingsconcepten in relatie tot FreeBSD.</p></li><li><p>Meer over verschillende versleutelingsmechanismen die beschikbaar zijn in FreeBSD zoals DES en MD5.</p></li><li><p>Hoe eenmalige wachtwoordautenticatie opgezet kan worden.</p></li><li><p>Hoe TCP Wrappers in te stellen voor gebruik met inetd.</p></li><li><p>Hoe Kerberos5 op FreeBSD opgezet kan worden.</p></li><li><p>Hoe IPsec wordt ingesteld en hoe een VPN op te zetten tussen FreeBSD en Microsoft® Windows® machines.</p></li><li><p>Hoe OpenSSH, FreeBSD’s SSH implementatie, in te stellen en te gebruiken.</p></li><li><p>Wat bestandssysteem-ACLs zijn en hoe die te gebruiken;</p></li><li><p>Hoe het hulpprogramma Portaudit gebruikt kan worden om softwarepakketten uit de Portscollectie te auditen.</p></li><li><p>Hoe om te gaan met publicaties van FreeBSD beveiligingswaarschuwingen.</p></li><li><p>Iets van procesaccounting en hoe dat is in te schakelen in FreeBSD.</p></li></ul></div><div class=paragraph><p>Er wordt aangenomen dat de lezer van dit hoofdstuk:</p></div><div class=ulist><ul><li><p>Basisbegrip heeft van FreeBSD en Internetconcepten.</p></li></ul></div><div class=paragraph><p>In dit boek worden nog meer onderwerpen met betrekking tot beveiliging beschreven. Zo wordt bijvoorbeeld Verplichte Toegangscontrole (Mandatory Access Control) besproken in <a href=../mac/#mac>Mandatory Access Control</a> en Internet Firewalls in <a href=../firewalls/#firewalls>Firewalls</a>.</p></div></div></div><div class=sect1><h2 id=security-intro>15.2. Introductie<a class=anchor href=#security-intro></a></h2><div class=sectionbody><div class=paragraph><p>Beveiliging is een taak die begint en eindigt bij de systeembeheerder. Hoewel alle BSD UNIX® meergebruikerssystemen enige inherente beveiliging kennen, is het bouwen en onderhouden van additionele beveiligingsmechanismen om de gebruikers "eerlijk" te houden waarschijnlijk een van de zwaarste taken voor de systeembeheerder. Machines zijn zo veilig als ze gemaakt worden en beveiligingsoverwegingen staan altijd op gespannen voet met de wens om gebruiksvriendelijkheid. UNIX® systemen zijn in het algemeen in staat tot het tegelijkertijd uitvoeren van een enorm aantal processen en veel van die processen acteren als server - daarmee wordt bedoeld dat externe entiteiten er verbindingen mee kunnen maken en ertegen kunnen praten. Nu de minicomputers en mainframes van gisteren de desktops van vandaag zijn en computers onderdeel zijn van netwerken en internetwerken, wordt beveiliging nog belangrijker.</p></div><div class=paragraph><p>Systeembeveiliging heeft ook te maken met het omgaan met verschillende vormen van aanvallen, zoals een poging om een systeem te crashen of op een andere manier onstabiel te maken, zonder te proberen de <code>root</code> account aan te vallen ("break root"). Aandachtspunten voor beveiliging kunnen opgesplitst worden in categorieën:</p></div><div class="olist arabic"><ol class=arabic><li><p>Ontzeggen van dienst aanvallen ("Denial of Service").</p></li><li><p>Gebruikersaccounts compromitteren.</p></li><li><p><code>root</code> compromitteren via toegankelijke servers.</p></li><li><p><code>root</code> compromitteren via gebruikersaccounts.</p></li><li><p>Achterdeur creëren ("Backdoor").</p></li></ol></div><div class=paragraph><p>Een ontzegging van dienst (DoS) aanval is een techniek die de machine middelen ontneemt. In het algemeen zijn DoS aanvallen brute kracht mechanismen die proberen de machine te crashen of op een andere manier onbruikbaar te maken door de machine of de netwerkcode te overvragen. Sommige DoS aanvallen proberen misbruik te maken van bugs in de netwerkcode om een machine met een enkel pakket te crashen. Zoiets kan alleen gerepareerd worden door een aanpassing aan de kernel te maken. Aanvallen op servers kunnen vaak hersteld worden door op de juiste wijze opties in stellen om de belasting van servers te limiteren in ongunstige omstandigheden. Omgaan met brute kracht aanvallen is lastiger. Zo is een aanval met gefingeerde pakketten ("spoofed-packet") vrijwel niet te stoppen, behalve dan door het systeem van Internet los te koppelen. Misschien gaat de machine er niet door plat, maar het kan wel een volledige Internetverbinding verzadigen.</p></div><div class=paragraph><p>Een gecompromitteerde gebruikersaccount komt nog veel vaker voor dan een DoS aanval. Veel systeembeheerders draaien nog steeds standaard telnetd, rlogind, rshd en ftpd servers op hun machines. Deze servers communiceren standaard niet over beveiligde verbindingen. Het resultaat is dat als er een redelijk grote gebruikersgroep is, er altijd wel van een of meer van de gebruikers die van afstand op dat systeem aanmelden (wat toch de meest normale en makkelijke manier is om op een systeem aan te melden) het wachtwoord is afgeluisterd ("sniffed"). Een oplettende systeembeheerder analyseert zijn logboekbestanden om te zoeken naar verdachte bronadressen, zelfs als het om succesvolle aanmeldpogingen gaat.</p></div><div class=paragraph><p>Uitgangspunt moet altijd zijn dat als een aanvaller toegang heeft tot een gebruikersaccount, de aanvaller de <code>root</code> account kan compromitteren. In werkelijkheid is het wel zo dat voor een systeem dat goed beveiligd is en goed wordt onderhouden, toegang tot een gebruikersaccount niet automatisch betekent dat de aanvaller ook <code>root</code> privileges kan krijgen. Het is van belang dit onderscheid te maken, omdat een aanvaller zonder toegang tot <code>root</code> in het algemeen zijn sporen niet kan wissen en op z’n best wat kan rommelen met bestanden van de gebruiker of de machine kan crashen. Gecompromitteerde gebruikersaccounts zijn vrij normaal omdat gebruikers normaliter niet de voorzorgsmaatregelen nemen die systeembeheerders nemen.</p></div><div class=paragraph><p>Systeembeheerders moeten onthouden dat er in potentie heel veel manieren zijn om toegang tot <code>root</code> te krijgen. Een aanvaller zou het <code>root</code> wachtwoord kunnen kennen, een bug kunnen ontdekken in een dienst die onder <code>root</code> draait en daar via een netwerkverbinding op in kunnen breken of een aanvaller zou een probleem kennen met een suid-root programma dat de aanvaller in staat stelt <code>root</code> te worden als hij eenmaal toegang heeft tot een gebruikersaccount. Als een aanvaller een manier heeft gevonden om <code>root</code> te worden op een machine, dan hoeft hij misschien geen achterdeur ("backdoor") te installeren. Veel bekende manieren die zijn gevonden om <code>root</code> te worden, en weer zijn afgesloten, vereisen veel werk van de aanvaller om zijn rommel achter zich op te ruimen, dus de meeste aanvallers installeren een achterdeur. Een achterdeur biedt de aanvaller een manier om makkelijk opnieuw <code>root</code> toegang tot het systeem te krijgen, maar dit geeft de slimme systeembeheerder ook een makkelijke manier om de inbraak te ontdekken. Het onmogelijk maken een achterdeur te installeren zou best wel eens nadelig kunnen zijn voor beveiliging, omdat hiermee nog niet het gat gedicht is waardoor er in eerste instantie is ingebroken.</p></div><div class=paragraph><p>Beveiligingsmaatregelen moeten altijd geïmplementeerd worden in een meerlagenmodel en worden als volgt gecategoriseerd:</p></div><div class="olist arabic"><ol class=arabic><li><p>Beveiligen van <code>root</code> en medewerkersaccounts.</p></li><li><p>Beveiligen van <code>root</code> - servers onder <code>root</code> en suid-/sgid-binaire bestanden.</p></li><li><p>Beveiligen van gebruikersaccounts.</p></li><li><p>Beveiligen van het wachtwoordbestand.</p></li><li><p>Beveiligen van de kern van de kernel, ruwe apparaten en bestandssystemen.</p></li><li><p>Snel detecteren van ongeoorloofde wijzigingen aan het systeem.</p></li><li><p>Paranoia.</p></li></ol></div><div class=paragraph><p>In het volgende onderdeel van dit hoofdstuk gaan we dieper in op de bovenstaande punten.</p></div></div></div><div class=sect1><h2 id=securing-freebsd>15.3. FreeBSD beveiligen<a class=anchor href=#securing-freebsd></a></h2><div class=sectionbody><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=title>Commando versus protocol</div><div class=paragraph><p>In dit hele document gebruiken we vette tekst om te verwijzen naar een commando of applicatie en een <code>monospaced</code> lettertype om te verwijzen naar specifieke commando’s. Protocollen staan vermeld in een normaal lettertype. Dit typografische onderscheid is zinvol omdat bijvoorbeeld ssh zowel een protocol als een commando is.</p></div></td></tr></tbody></table></div><div class=paragraph><p>In de volgende onderdelen behandelen we de methodes uit de <a href=#security-intro>vorige paragraaf</a> om een FreeBSD-systeem te beveiligen.</p></div><div class=sect2><h3 id=securing-root-and-staff>15.3.1. Beveiligen van <code>root</code> en medewerkersaccounts.<a class=anchor href=#securing-root-and-staff></a></h3><div class=paragraph><p>Om te beginnen: doe geen moeite om medewerkersaccounts te beveiligen als de <code>root</code> account niet beveiligd is. Op de meeste systemen heeft de <code>root</code> account een wachtwoord. Als eerste moet aangenomen worden dat dit wachtwoord <em>altijd</em> gecompromitteerd is. Dit betekent niet dat het wachtwoord verwijderd moet worden. Het wachtwoord is namelijk bijna altijd nodig voor toegang via het console van de machine. Het betekent wel dat het niet mogelijk gemaakt moet worden om het wachtwoord te gebruiken buiten het console om en mogelijk zelfs niet via het <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> commando. Pty’s moeten bijvoorbeeld gemarkeerd staan als onveilig ("insecure") in het bestand <span class=filename>/etc/ttys</span> zodat direct aanmelden met <code>root</code> via <code>telnet</code> of <code>rlogin</code> niet wordt toegestaan. Als andere aanmelddiensten zoals sshd gebruikt worden, dan hoort direct aanmelden via <code>root</code> uitgeschakeld staat. Dit kan door het bestand <span class=filename>/etc/ssh/sshd_config</span> te bewerken en ervoor te zorgen dat <code>PermitRootLogin</code> op <code>no</code> staat. Dit moet gebeuren voor iedere methode van toegang - diensten zoals FTP worden vaak over het hoofd gezien. Het direct aanmelden van <code>root</code> hoort alleen te mogen via het systeemconsole.</p></div><div class=paragraph><p>Natuurlijk moet een systeembeheerder de mogelijkheid hebben om <code>root</code> te worden. Daarvoor kunnen een paar gaatjes geprikt worden. Maar dan moet ervoor gezorgd worden dat er voor deze gaatjes extra aanmelden met een wachtwoord nodig is. Eén manier om <code>root</code> toegankelijk te maken is door het toevoegen van de juiste medewerkersaccounts aan de <code>wheel</code> groep (in <span class=filename>/etc/group</span>). De medewerkers die lid zijn van de groep <code>wheel</code> mogen <code>su</code>-en naar <code>root</code>. Maak medewerkers nooit "native" lid van de groep <code>wheel</code> door ze in de groep <code>wheel</code> te plaatsen in <span class=filename>/etc/group</span>. Medewerkersaccounts horen lid te zijn van de groep <code>staff</code> en horen dan pas toegevoegd te worden aan de groep <code>wheel</code> in het bestand <span class=filename>/etc/group</span>. Alleen medewerkers die ook echt toegang tot <code>root</code> nodig hebben horen in de groep <code>wheel</code> geplaatst te worden. Het is ook mogelijk, door een autenticatiemethode als Kerberos te gebruiken, om het bestand <span class=filename>.k5login</span> van Kerberos in de <code>root</code> account te gebruiken om een <a href="https://man.freebsd.org/cgi/man.cgi?query=ksu&amp;sektion=1&amp;format=html">ksu(1)</a> naar <code>root</code> toe te staan zonder ook maar iemand lid te maken van de groep <code>wheel</code>. Dit is misschien wel een betere oplossing, omdat het <code>wheel</code>-mechanisme het nog steeds mogelijk maakt voor een inbreker <code>root</code> te breken als de inbreker een wachtwoordbestand te pakken heeft gekregen en toegang kan krijgen tot één van de medewerkersaccounts. Hoewel het instellen van het <code>wheel</code>-mechanisme beter is dan niets, is het niet per se de meest veilige optie.</p></div><div class=paragraph><p>Om een account volledig op slot te zetten, dient het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> gebruikt te worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw lock staff</span></code></pre></div></div><div class=paragraph><p>Dit voorkomt dat de gebruiker zich aanmeldt via enig mechanisme, inclusief <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>.</p></div><div class=paragraph><p>Een andere manier om toegang tot accounts te blokkeren is om het versleutelde wachtwoord door een enkel “*”-karakter te vervangen. Dit karakter zal nooit overeenkomen met het versleutelde wachtwoord en dus gebruikerstoegang blokkeren. Het volgende medewerkersaccount bijvoorbeeld:</p></div><div class="literalblock programlisting"><div class=content><pre>foobar:R9DT/Fa1/LV9U:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre></div></div><div class=paragraph><p>zou veranderd moeten worden in:</p></div><div class="literalblock programlisting"><div class=content><pre>foobar:*:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre></div></div><div class=paragraph><p>Dit voorkomt dat de gebruiker <code>foobar</code> zich aanmeldt met conventionele methoden. Deze methode om toegang te beperken werkt niet op sites die Kerberos gebruiken of in situaties waarin de gebruiker met <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> sleutels heeft geïnstalleerd.</p></div><div class=paragraph><p>Deze beveiligingsmechanismen hebben ook als uitgangspunt dat vanaf een zwaarder beveiligde machine wordt aangemeld op een minder beveiligd systeem. Als een hoofdserver bijvoorbeeld allerlei servers draait, zou het werkstation er geen moeten draaien. Om een werkstation redelijk veilig te laten zijn, dienen er zo min mogelijk servers op te draaien, bij voorkeur zelfs geen en er zou een schermbeveiliging met wachtwoordbeveiliging op moeten draaien. Maar als een aanvaller fysieke toegang heeft tot een werkstation, dan kan hij elke beveiliging die erop is aangebracht omzeilen. Dit probleem dient echt overwogen te worden, net als het feit dat de meeste aanvallen van een afstand plaatsvinden, via het netwerk, door mensen die geen fysieke toegang hebben tot werkstations of servers.</p></div><div class=paragraph><p>Het gebruik van iets als Kerberos geeft de mogelijkheid om het wachtwoord van de account van een medewerker buiten gebruik te stellen of te wijzigen op één plaats, waarbij het meteen actief is op alle machines waarop die medewerker een account heeft. Als de account van een medewerker gecompromitteerd raakt, moet vooral de mogelijkheid om per direct het wachtwoord voor machines te kunnen aanpassen niet onderschat worden. Met afzonderlijke wachtwoorden kan het veranderen van wachtwoorden op N systemen een puinhoop worden. Met Kerberos kunnen ook wachtwoordrestricties opgelegd worden: het is niet alleen mogelijk om een Kerberos "ticket" na een bepaalde tijd te laten verlopen, maar het Kerberos systeem kan afdwingen dat de gebruiker na een bepaalde tijd een nieuw wachtwoord kiest (na bijvoorbeeld een maand).</p></div></div><div class=sect2><h3 id=_beveiligen_van_root_servers_onder_root_en_suid_sgid_binaire_bestanden>15.3.2. Beveiligen van <code>root</code> - servers onder <code>root</code> en suid-/sgid-binaire bestanden<a class=anchor href=#_beveiligen_van_root_servers_onder_root_en_suid_sgid_binaire_bestanden></a></h3><div class=paragraph><p>Een voorzichtige systeembeheerder draait alleen die servers die nodig zijn, niets meer, niets minder. Bedenk dat servers van derde partijen vaak de meeste neiging hebben tot het vertonen van bugs. Zo staat bijvoorbeeld het draaien van een oude versie van imapd of popper gelijk aan het weggeven van de <code>root</code> account aan de hele wereld. Draai nooit een server die niet zorgvuldig is onderzocht. Veel servers hoeven niet te draaien als <code>root</code>. Zo kunnen de ntalk, comsat en finger daemons bijvoorbeeld draaien in speciale gebruikerszandbakken ("<em>sandboxes</em>"). Een zandbak is niet perfect, tenzij er heel veel moeite gedaan wordt, maar de meerlagenbenadering blijft bestaan: als iemand via een server die in een zandbak draait weet in te breken, dan moeten ze eerst nog uit de zandbak komen. Hoe groter het aantal lagen is waar een inbreker doorheen moet, hoe kleiner de kans op succes is. <code>root</code> gaten zijn historisch gezien aanwezig geweest in vrijwel iedere server die ooit als <code>root</code> gedraaid heeft, inclusief de basisservers van een systeem. Op een machine waarop mensen alleen aanmelden via sshd en nooit via telnetd of rshd of rlogind dienen die servers uitgeschakeld te worden!</p></div><div class=paragraph><p>FreeBSD draait ntalkd, comsat en finger tegenwoordig standaard in een zandbak. Een ander programma dat misschien beter in een zandbak kan draaien is <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a>. In <span class=filename>/etc/defaults/rc.conf</span> staat als commentaar welke parameters er nodig zijn om named in een zandbak te draaien. Afhankelijk van of het een nieuwe systeeminstallatie of het bijwerken van een bestaand systeem betreft, worden de speciale gebruikersaccounts die bij die zandbakken horen misschien niet geïnstalleerd. Een voorzichtige systeembeheerder onderzoekt en implementeert zandbakken voor servers waar dat ook maar mogelijk is.</p></div><div class=paragraph><p>Er zijn een aantal diensten die vooral niet in een zandbak draaien: sendmail, popper, imapd, ftpd en andere. Voor sommige servers zijn alternatieven, maar dat kost misschien meer tijd dan er te besteden is (gemak dient de mens). Het kan voorkomen dat deze servers als <code>root</code> moeten draaien en dat er vertrouwd moet worden op andere mechanismen om een inbraak via die servers te detecteren.</p></div><div class=paragraph><p>De andere grote mogelijkheid voor <code>root</code> gaten in een systeem zijn de suid-root en sgid-binaire bestanden die geïnstalleerd zijn op een systeem. Veel van die bestanden, zoals rlogin, staan in <span class=filename>/bin</span>, <span class=filename>/sbin</span>, <span class=filename>/usr/bin</span> of <span class=filename>/usr/sbin</span>. Hoewel het niet 100% veilig is, mag aangenomen worden dat de suid- en sgid-binaire bestanden van een standaardsysteem redelijk veilig zijn. Toch worden er nog wel eens <code>root</code> gaten gevonden in deze bestanden. Zo is er in 1998 een <code>root</code> gat gevonden in <code>Xlib</code> waardoor xterm (die normaliter suid is) kwetsbaar bleek. Een voorzichtige systeembeheerder kiest voor "better to be safe than sorry" door de suid-bestanden die alleen medewerkers hoeven uit te voeren aan een speciale groep toe te wijzen en de suid-bestanden die niemand gebruikt te lozen (<code>chmod 000</code>). Een server zonder monitor heeft normaal gezien xterm niet nodig. Sgid-bestanden kunnen bijna net zo gevaarlijk zijn. Als een inbreker een sgid-kmem stuk kan krijgen, dan kan hij wellicht <span class=filename>/dev/kmem</span> lezen en dus het gecodeerde wachtwoordbestand, waardoor mogelijk ieder account met een wachtwoord besmet is. Een inbreker toegang tot de groep <code>kmem</code> kan krijgen, zou bijvoorbeeld mee kunnen kijken met de toetsaanslagen die ingegeven worden via de pty’s, inclusief die pty’s die gebruikt worden door gebruikers die via beveiligde methodes aanmelden. Een inbreker die toegang krijgt tot de groep <code>tty</code> kan naar bijna alle tty’s van gebruikers schrijven. Als een gebruiker een terminalprogramma of een terminalemulator met een toetsenbordsimulatieoptie draait, dan kan de inbreker in potentie een gegevensstroom genereren die ervoor zorgt dat de terminal van de gebruiker een commando echot, dat dan wordt uitgevoerd door die gebruiker.</p></div></div><div class=sect2><h3 id=secure-users>15.3.3. Beveiligen van gebruikersaccounts<a class=anchor href=#secure-users></a></h3><div class=paragraph><p>Gebruikersaccounts zijn gewoonlijk het meest lastig om te beveiligen. Hoewel er allerlei draconische maatregelen genomen kunnen worden met betrekking tot de medewerkers en hun wachtwoorden "weggesterd" kunnen worden, gaat dat waarschijnlijk niet lukken met de gewone gebruikersaccounts. Als er toch voldoende vrijheid is, dan prijst de beheerder zich gelukkig en is het misschien toch mogelijk de accounts voldoende te beveiligen. Als die vrijheid er niet is, dan moeten die accounts gewoon netter gemonitord worden. Het gebruik van ssh en Kerberos voor gebruikersaccounts is problematischer vanwege het extra beheer en de ondersteuning, maar nog steeds een prima oplossing in vergelijking met een versleuteld wachtwoordbestand.</p></div></div><div class=sect2><h3 id=_beveiligen_van_het_wachtwoordbestand>15.3.4. Beveiligen van het wachtwoordbestand<a class=anchor href=#_beveiligen_van_het_wachtwoordbestand></a></h3><div class=paragraph><p>De enige echte oplossing is zoveel mogelijk wachtwoorden wegsterren en ssh of Kerberos gebruiken voor toegang tot die accounts. Hoewel een gecodeerd wachtwoordbestand (<span class=filename>/etc/spwd.db</span>) alleen gelezen kan worden door <code>root</code>, is het wel mogelijk dat een inbreker leestoegang krijgt tot dat bestand zonder dat de aanvaller root-schrijftoegang krijgt.</p></div><div class=paragraph><p>Beveiligingsscripts moeten altijd controleren op en rapporteren over wijzigingen in het wachtwoordbestand (zie ook <a href=#security-integrity>Bestandsintegriteit Controleren</a> hieronder).</p></div></div><div class=sect2><h3 id=_beveiligen_van_de_kern_van_de_kernel_ruwe_apparaten_en_bestandssystemen>15.3.5. Beveiligen van de kern van de kernel, ruwe apparaten en bestandssystemen<a class=anchor href=#_beveiligen_van_de_kern_van_de_kernel_ruwe_apparaten_en_bestandssystemen></a></h3><div class=paragraph><p>Als een aanvaller toegang krijgt tot <code>root</code> dan kan hij ongeveer alles, maar er zijn een paar slimmigheidjes. Zo hebben bijvoorbeeld de meeste moderne kernels een ingebouwd pakketsnuffelstuurprogramma ("packet sniffing"). Bij FreeBSD is dat het <span class=filename>bpf</span> apparaat. Een inbreker zal in het algemeen proberen een pakketsnuffelaar te draaien op een gecompromitteerde machine. De inbreker hoeft deze mogelijkheid niet te hebben en bij de meeste systemen is het niet verplicht het <span class=filename>bpf</span> apparaat mee te compileren.</p></div><div class=paragraph><p>Maar zelfs als het <span class=filename>bpf</span> apparaat is uitgeschakeld, dan zijn er nog <span class=filename>/dev/mem</span> en <span class=filename>/dev/kmem</span>. De inbreker kan namelijk nog schrijven naar ruwe schrijfapparaten. En er is ook nog een optie in de kernel die modulelader ("module loader") heet, <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a>. Een ondernemende inbreker kan een KLD-module gebruiken om zijn eigen <span class=filename>bpf</span>-apparaat of een ander snuffelapparaat te installeren in een draaiende kernel. Om deze problemen te voorkomen, moet de kernel op een hoger veiligheidsniveau draaien, ten minste securelevel 1.</p></div><div class=paragraph><p>Het veiligheidsniveau van de kernel kan op een aantal manieren worden ingesteld. De eenvoudigste manier om het veiligheidsniveau van een draaiende kernel te verhogen is met <code>sysctl</code> op de kernelvariabele <code>kern.securelevel</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.securelevel=1</span></code></pre></div></div><div class=paragraph><p>Standaard start de kernel van FreeBSD op met een veiligheidsniveau van -1. Het veiligheidsniveau blijft -1 tenzij het is veranderd, òfwel door de beheerder òfwel door <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> vanwege een instelling in de opstartscripts. Het veiligheidsniveau kan tijdens het opstarten van het systeem verhoogd worden door de variabele <code>kern_securelevel_enable</code> op <code>YES</code> te zetten in het bestand <span class=filename>/etc/rc.conf</span>, en de waarde van de variabele <code>kern_securelevel</code> op het gewenste veiligheidsniveau in te stellen.</p></div><div class=paragraph><p>Het standaard veiligheidsniveau van een FreeBSD-systeem direct nadat de opstartscripts zijn uitgevoerd is -1. Dit wordt "onveilige modus" genoemd omdat de onveranderlijke bestandsvlag uitgezet kan worden, er van/naar alle apparaten mag worden gelezen en geschreven, enzovoorts.</p></div><div class=paragraph><p>Als eenmaal het veiligheidsniveau op 1 of een hogere waarde is ingesteld, worden de alleen-toevoegen en onveranderlijke bestanden gehonoreerd, deze kunnen niet worden uitgezet, en wordt toegang tot rauwe apparaten ontzegd. Hogere niveaus beperken nog meer bewerkingen. Lees, voor een volledige beschrijving van het effect van de verschillende veiligheidsniveaus, de handleidingpagina <a href="https://man.freebsd.org/cgi/man.cgi?query=security&amp;sektion=7&amp;format=html">security(7)</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Het ophogen van het veiligheidsniveau naar 1 of hoger kan enkele problemen met X11 (toegang tot <span class=filename>/dev/io</span> zal worden geblokkeerd), of met de installatie van FreeBSD wanneer die vanaf de broncode is gebouwd (het gedeelte <code>installword</code> van het proces moet tijdelijk de alleen-toevoegen en onveranderlijke vlaggen van sommige bestanden uitzetten), en met enkele andere gevallen veroorzaken. Soms, zoals het geval is met X11, is het mogelijk om dit te omzeilen door <a href="https://man.freebsd.org/cgi/man.cgi?query=xdm&amp;sektion=1&amp;format=html">xdm(1)</a> behoorlijk vroeg in het opstartproces te starten, wanneer het veiligheidsniveau nog laag genoeg is. Omzeilmethoden zoals deze zijn misschien niet voor alle veiligheidsniveaus of voor alle beperkingen die ze opleggen mogelijk. Wat vooruit plannen is een goed idee. Het is belangrijk om de beperkingen die door elk veiligheidsniveau worden opgelegd te begrijpen omdat ze het gebruiksgemak van het systeem sterk verminderen. Het vergemakkelijkt ook het kiezen van eens standaardinstelling en voorkomt allerlei verassingen.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Als het veiligheidsniveau van de kernel naar 1 of hoger wordt verhoogd, kan het nuttig zijn om de vlag <code>schg</code> aan te zetten voor kritieke opstartprogramma’s, mappen, en scriptbestanden (i.e., alles dat gedraaid wordt tot het punt waar het veiligheidsniveau wordt ingesteld). Dit kan overdreven zijn, en het bijwerken van het systeem is veel moeilijker wanneer het op een hoog veiligheidsniveau werkt. Een minder beperkend compromis is om het systeem op een hoger veiligheidsniveau te draaien maar het aanzetten van de vlag <code>schg</code> voor elk systeembestand en -map onder de zon over te slaan. Een andere mogelijkheid is om <span class=filename>/</span> en <span class=filename>/usr</span> simpelweg als alleen-lezen aan te koppelen. Het dient opgemerkt te worden dat het te draconisch zijn over wat is toegestaan het belangrijke detecteren van een inbraak kan verhinderen.</p></div></div><div class=sect2><h3 id=security-integrity>15.3.6. Bestandsintegriteit controleren: binaire bestanden, instellingenbestanden, enzovoort<a class=anchor href=#security-integrity></a></h3><div class=paragraph><p>Als puntje bij paaltje komt kan de kern van een systeem maar tot een bepaald punt beveiligd worden zonder dat het minder prettig werken wordt. Zo werk het zetten van de <code>schg</code> bit met <code>chflags</code> op de meeste bestanden in <span class=filename>/</span> en <span class=filename>/usr</span> waarschijnlijk averechts, omdat, hoewel de bestanden beschermd zijn, ook het venster waarin detectie plaats kan vinden is gesloten. De laatste laag van beveiliging is waarschijnlijk de meest belangrijke: detectie. Alle overige beveiliging is vrijwel waardeloos (of nog erger: geeft een vals gevoel van beveiliging) als een mogelijke inbraak niet gedetecteerd kan worden. Een belangrijk doel van het meerlagenmodel is het vertragen van een aanvaller, nog meer dan hem te stoppen, om hem op heterdaad te kunnen betrappen.</p></div><div class=paragraph><p>De beste manier om te zoeken naar een inbraak is zoeken naar gewijzigde, ontbrekende of onverwachte bestanden. De beste manier om te zoeken naar gewijzigde bestanden is vanaf een ander (vaak gecentraliseerd) systeem met beperkte toegang. Met zelfgeschreven scripts op dat extra beveiligde systeem met beperkte toegang is een beheerder vrijwel onzichtbaar voor mogelijke aanvallers en dat is belangrijk. Om het nut te maximaliseren moeten in het algemeen dat systeem met beperkte toegang best veel rechten gegeven worden op de andere machines in het netwerk, vaak via een alleen-lezen NFS-export van de andere machines naar het systeem met beperkte toegang of door ssh sleutelparen in te stellen om het systeem met beperkte toegang een ssh verbinding te laten maken met de andere machines. Buiten het netwerkverkeer, is NFS de minst zichtbare methode. Hierdoor kunnen de bestandssystemen op alle cliëntmachines vrijwel ongezien gemonitord worden. Als de server met beperkte toegang verbonden is met de cliëntmachines via een switch, dan is de NFS-methode vaak de beste keus. Als de server met beperkte toegang met de andere machines is verbonden via een hub of door meerdere routers, dan is de NFS-methode wellicht niet veilig genoeg (vanuit een netwerk standpunt) en kan beter ssh gebruikt worden, ondanks de audit-sporen die ssh achterlaat.</p></div><div class=paragraph><p>Als de machine met beperkte toegang eenmaal minstens leestoegang heeft tot een cliëntsysteem dat het moet gaan monitoren, dan moeten scripts gemaakt worden om dat monitoren ook echt uit te voeren. Uitgaande van een NFS-koppeling, kunnen de scripts gebruik maken van eenvoudige systeem hulpprogramma’s als <a href="https://man.freebsd.org/cgi/man.cgi?query=find&amp;sektion=1&amp;format=html">find(1)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=md5&amp;sektion=1&amp;format=html">md5(1)</a>. We adviseren minstens één keer per dag een md5 te maken van alle bestanden op de cliëntmachine en van instellingenbestanden als in <span class=filename>/etc</span> en <span class=filename>/usr/local/etc</span> zelfs vaker. Als er verschillen worden aangetroffen ten opzichte van de basis md5 informatie op het systeem met beperkte toegang, dan hoort het script te gillen om een beheerder die het moet gaan uitzoeken. Een goed beveiligingsscript controleert ook op onverwachte suid-bestanden en op nieuwe en verwijderde bestanden op systeempartities als <span class=filename>/</span> en <span class=filename>/usr</span>.</p></div><div class=paragraph><p>Als ssh in plaats van NFS wordt gebruikt, dan is het schrijven van het script lastiger. Dan moeten de scripts met <code>scp</code> naar de cliënt verplaatst worden om ze uit te voeren, waardoor ze zichtbaar worden. Voor de veiligheid dienen ook de binaire bestanden die het script gebruikt, zoals <a href="https://man.freebsd.org/cgi/man.cgi?query=find&amp;sektion=1&amp;format=html">find(1)</a>, gekopieerd te worden. De ssh-cliënt op de cliënt zou al gecompromitteerd kunnen zijn. Het is misschien noodzakelijk ssh te gebruiken over onveilige verbindingen, maar dat maakt alles een stuk lastiger.</p></div><div class=paragraph><p>Een goed beveiligingsscript voert ook controles uit op de instellingenbestanden van gebruikers en medewerkers: <span class=filename>.rhosts</span>, <span class=filename>.shosts</span>, <span class=filename>.ssh/authorized_keys</span>, enzovoort. Dat zijn bestanden die buiten het bereik van de <code>MD5</code>-controle vallen.</p></div><div class=paragraph><p>Als gebruikers veel schijfruimte hebben, dan kan het te lang duren om alle bestanden op deze partitie te controleren. In dat geval is het verstandig de koppelvlaggen zo in te stellen dat suid-binaire bestanden op die partities niet zijn toegestaan. Zie daarvoor de optie <code>nosuid</code> (zie <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a>). Die partities moeten wel toch nog minstens eens per week doorzocht worden, omdat het doel van deze beveiligingslaag het ontdekken van een inbraakpoging is, of die nu succesvol is of niet.</p></div><div class=paragraph><p>Procesverantwoording (zie <a href="https://man.freebsd.org/cgi/man.cgi?query=accton&amp;sektion=8&amp;format=html">accton(8)</a>) kost relatief gezien weinig en kan bijdragen aan een evaluatie mechanisme voor na inbraken. Het is erg handig om uit te zoeken hoe iemand precies heeft ingebroken op het systeem, mits het bestand nog onbeschadigd is na de inbraak.</p></div><div class=paragraph><p>Tenslotte horen beveiligingsscripts de logboekbestanden te verwerken en de logboekbestanden zelf horen zo veilig mogelijk tot stand te komen. "remote syslog" kan erg zinvol zijn. Een aanvaller zal proberen zijn sporen uit te wissen en logboekbestanden zijn van groot belang voor een systeembeheerder als het gaat om uitzoeken wanneer en hoe er is ingebroken. Een manier om logboekbestanden veilig te stellen is door het systeemconsole via een seriële poort aan te sluiten op een veilige machine en zo informatie te verzamelen.</p></div></div><div class=sect2><h3 id=_paranoia>15.3.7. Paranoia<a class=anchor href=#_paranoia></a></h3><div class=paragraph><p>Een beetje paranoia is niet verkeerd. Eigenlijk kan de systeembeheerder zoveel beveiligingsopties inschakelen als hij wil, als deze maar geen impact hebben op het gebruiksgemak en de beveiligingsopties die <em>wel</em> impact hebben op het gebruiksgemak kunnen ingeschakeld worden als daar zorgvuldig mee wordt omgegaan. Nog belangrijker is misschien dat er een juiste combinatie wordt gevonden. Als de aanbevelingen uit dit document woord voor woord worden opgevolgd, dan worden daarmee de methodes aan een toekomstige aanvaller verraden, die ook toegang heeft tot dit document.</p></div></div><div class=sect2><h3 id=_ontzeggen_van_dienst_aanvallen>15.3.8. Ontzeggen van Dienst aanvallen<a class=anchor href=#_ontzeggen_van_dienst_aanvallen></a></h3><div class=paragraph><p>In deze paragraaf worden Ontzeggen van Dienst aanvallen ("Denial of Service" of DoS) behandeld. Een DoS-aanval wordt meestal uitgevoerd als pakketaanval. Hoewel er weinig gedaan kan worden tegen de huidige aanvallen met gefingeerde pakketten die een netwerk kunnen verzadigen, kan de schade geminimaliseerd worden door ervoor te zorgen dat servers er niet door plat gaan door:</p></div><div class="olist arabic"><ol class=arabic><li><p>Limiteren van server forks.</p></li><li><p>Limiteren van springplank ("springboard") aanvallen (ICMP response aanvallen, ping broadcast, etc.).</p></li><li><p>De Kernel Route Cache overloaden.</p></li></ol></div><div class=paragraph><p>Een veelvoorkomende DoS-aanval is om een server aan te vallen door het zoveel kindprocessen aan te laten maken dat het hostsysteem uiteindelijk geen bestandsdescriptors, geheugen enzovoort meer heeft en het dan opgeeft. inetd (zie <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>) kent een aantal instellingen om dit type aanval af te zwakken. Hoewel het mogelijk is ervoor te zorgen dat een machine niet plat gaat, is het in het algemeen niet mogelijk te voorkomen dat de dienstverlening door de aanval wordt verstoord. Meer is te lezen in de handleiding van inetd en het advies is in het bijzonder aandacht aan de <code>-c</code>, <code>-C</code> en <code>-R</code> opties te besteden. Aanvallen met gefingeerde IP adressen omzeilen de <code>-C</code> optie naar inetd, dus in het algemeen moet een combinatie van opties gebruikt worden. Sommige op zichzelf staande servers hebben parameters waarmee het aantal forks gelimiteerd kan worden.</p></div><div class=paragraph><p>Sendmail heeft de optie <code>-OMaxDaemonChildren</code> die veel beter blijkt te werken dan het gebruik van de opties van Sendmail waarmee de werklast gelimiteerd kan worden. De parameter <code>MaxDaemonChildren</code> moet zodanig ingesteld worden dat als sendmail start; deze hoog genoeg is om de te verwachten belasting aan te kunnen, maar niet zo hoog is dat de computer het aantal instanties van Sendmails niet aankan zonder plat te gaan. Het is ook verstandig om Sendmail in de wachtrijmodus (<code>-ODeliveryMode=queued</code>) te draaien en de daemon (<code>sendmail -bd</code>) los te koppelen van de verwerking van de wachtrij (<code>sendmail -q15m</code>). Als de verwerking van wachtrij real-time moet, kunnen de tussenpozen voor verwerking verkort worden door deze bijvoorbeeld op <code>-q1m</code> in te stellen, maar dan is een redelijke instelling van <code>MaxDaemonChildren</code> van belang om <em>die</em> Sendmail te beschermen tegen trapsgewijze fouten.</p></div><div class=paragraph><p>Syslogd kan direct aangevallen worden en het is sterk aan te raden de <code>-s</code> optie te gebruiken waar dat ook maar mogelijk is en anders de <code>-a</code> optie.</p></div><div class=paragraph><p>Er dient voorzichtig omgesprongen te worden met diensten die terugverbinden zoals TCP Wrapper’s reverse-identd die direct aangevallen kan worden. In het algemeen is het hierom onverstandig gebruik te maken van de reverse-ident optie van TCP Wrapper.</p></div><div class=paragraph><p>Het is een goed idee om interne diensten af te schermen voor toegang van buitenaf door ze te firewallen op de routers aan de rand van een netwerk ("border routers"). Dit heeft als achtergrond dat verzadigingsaanvallen voorkomen van buiten het LAN voorkomen kunnen worden. Daarmee wordt geen aanval op <code>root</code> via het netwerk en die diensten daaraan voorkomen. Er dient altijd een exclusieve firewall te zijn, dat wil zeggen "firewall alles <em>behalve</em> poorten A, B, C, D en M-Z". Zo worden alle lage poorten gefirewalled behalve die voor specifieke diensten als named (als er een primary is voor een zone), ntalkd, sendmail en andere diensten die vanaf Internet toegankelijk moeten zijn. Als de firewall andersom wordt ingesteld, als een inclusieve of tolerante firewall, dan is de kans groot dat er wordt vergeten een aantal diensten af te "sluiten" of dat er een nieuwe interne dienst wordt toegevoegd en de firewall niet wordt bijgewerkt. Er kan nog steeds voor gekozen worden de hoge poorten open te zetten, zodat een tolerante situatie ontstaat, zonder de lage poorten open te stellen. FreeBSD biedt ook de mogelijkheid een reeks poortnummers die gebruikt worden voor dynamische verbindingen in te stellen via de verscheidene <code>net.inet.ip.portrange``sysctl`s (`sysctl -a | fgrep portrange</code>), waardoor ook de complexiteit van de firewall instellingen kan vereenvoudigen. Zo kan bijvoorbeeld een normaal begin tot eindbereik ingesteld worden van 4000 tot 5000 en een hoog poortbereik van 49152 tot 65535. Daarna kan alles onder 4000 op de firewall geblokkeerd worden (met uitzondering van bepaalde poorten die vanaf Internet bereikbaar moeten zijn natuurlijk).</p></div><div class=paragraph><p>Een andere veelvoorkomende DoS-aanval is de springplankaanval: een server zo aanvallen dat de respons van die server de server zelf, het lokale netwerk of een andere machine overbelast. De meest voorkomende aanval van dit type is de <em>ICMP ping broadcast aanval</em>. De aanvaller fingeert ping-pakketten die naar het broadcast-adres van het LAN worden gezonden met als bron het IP-adres van de machine die hij eigenlijk aan wil vallen. Als de routers aan de rand van het netwerk niet zijn ingesteld om een ping-pakketten aan een broadcast-adres te blokkeren, dan kan het LAN genoeg antwoorden produceren om de verbinding van het slachtoffer (het gefingeerde bronadres) te verzadigen, zeker als de aanvaller hetzelfde doet met tientallen andere netwerken. Broadcastaanvallen met een volume van meer dan 120 megabit zijn al voorgekomen. Een tweede springplankaanval is er een tegen het ICMP-foutmeldingssysteem. Door een pakket te maken waarop een ICMP-foutmelding komt, kan een aanvaller de inkomende verbinding van een server verzadigen en de uitgaande verbinding laten verzadigen met ICMP-foutmeldingen. Dit type aanval kan een server ook laten crashen door te zorgen dat het geheugen ervan vol zit, zeker als de server de ICMP-antwoorden niet zo snel kwijt kan als dat het ze genereert. Gebruik de sysctl-variabele <code>net.inet.icmp.icmplim</code> om deze aanvallen te beperken. De laatste belangrijke klasse springplankaanvallen hangt samen met een aantal interne diensten van inetd zoals de UDP-echodienst. Een aanvaller fingeert eenvoudigweg een UDP-pakket met als bronadres de echopoort van Server A en als bestemming de echopoort van Server B, waar Server A en B allebei op een LAN staan. Die twee servers gaan dat pakket dan heen en weer kaatsen. Een aanvaller kan beide servers overbelasten door een aantal van deze pakketten te injecteren. Soortgelijke problemen kunnen ontstaan met de poort chargen. Een competente systeembeheerder zal al deze interne inetd testdiensten uitschakelen.</p></div><div class=paragraph><p>Gefingeerde pakketten kunnen ook gebruikt worden om de kernel route cache te overbelasten. Raadpleeg daarvoor de <code>net.inet.ip.rtexpire</code>, <code>rtminexpire</code> en <code>rtmaxcache``sysctl</code> parameters. Een aanval met gefingeerde pakketten met een willekeurig bron-IP zorgt ervoor dat de kernel een tijdelijke gecachede route maakt in de routetabel, die uitgelezen kan worden met <code>netstat -rna | fgrep W3</code>. Deze routes hebben een levensduur van ongeveer 1600 seconden. Als de kernel merkt dat de gecachede routetabel te groot is geworden, dan wordt <code>rtexpire</code> dynamisch verkleind, maar deze waarde wordt nooit lager dan <code>rtminexpire</code>. Er zijn twee problemen:</p></div><div class="olist arabic"><ol class=arabic><li><p>De kernel reageert niet snel genoeg als een laag belaste server wordt aangevallen.</p></li><li><p><code>rtminexpire</code> is niet laag genoeg om de kernel de aanval te laten overleven.</p></li></ol></div><div class=paragraph><p>Als servers verbonden zijn met het Internet via een E3 of sneller, dan is het verstandig om handmatig <code>rtexpire</code> en <code>rtminexpire</code> aan te passen via <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>. Als de een van de parameters op nul wordt gezet, dan crasht de machine. Het instellen van beide waarden op 2 seconden is voldoende om de routetabel tegen een aanval te beschermen.</p></div></div><div class=sect2><h3 id=_aandachtspunten_voor_toegang_met_kerberos_en_ssh>15.3.9. Aandachtspunten voor toegang met Kerberos en SSH<a class=anchor href=#_aandachtspunten_voor_toegang_met_kerberos_en_ssh></a></h3><div class=paragraph><p>Er zijn een aantal aandachtspunten die in acht genomen moeten worden als Kerberos of ssh gebruikt worden. Kerberos 5 is een prima autenticatieprotocol, maar er zitten bugs in de Kerberos-versies van telnet en rlogin waardoor ze niet geschikt zijn voor binair verkeer. Kerberos codeert standaard de sessie niet, tenzij de optie <code>-x</code> wordt gebruikt. ssh codeert standaard wel alles.</p></div><div class=paragraph><p>Ssh werkt prima, maar het stuurt coderingssleutels standaard door. Dit betekent dat als gegeven een veilig werkstation met sleutels die toegang geven tot de rest van het systeem en ssh wordt gebruikt om verbinding te maken met een onveilige machine, die sleutels gebruikt kunnen worden. De sleutels zelf zijn niet bekend, maar ssh stelt een doorstuurpoort in zolang als een gebruikers aangemeld blijft. Als de aanvaller `root`toegang heeft op de onveilige machine, dan kan hij die poort gebruiken om toegang te krijgen tot alle machines waar de sleutels van de gebruiker toegang toe geven.</p></div><div class=paragraph><p>Het advies is ssh in combinatie met Kerberos te gebruiken voor het aanmelden door medewerkers wanneer dat ook maar mogelijk is. Ssh kan gecompileerd worden met Kerberos-ondersteuning. Dit vermindert de kans op blootstelling van ssh-sleutels en beschermt tegelijkertijd de wachtwoorden met Kerberos. Ssh-sleutels zouden alleen gebruikt moeten worden voor geautomatiseerde taken vanaf veilige machines (iets waar Kerberos ongeschikt voor is). Het advies is om het doorsturen van sleutels uit te schakelen in de ssh-instellingen of om de <code>from=IP/DOMAIN</code> optie te gebruiken die ssh in staat stelt het bestand <span class=filename>authorized_keys</span> te gebruiken om de sleutel alleen bruikbaar te maken voor entiteiten die zich aanmelden vanaf vooraf aangewezen machines.</p></div></div></div></div><div class=sect1><h2 id=crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 en crypt<a class=anchor href=#crypt></a></h2><div class=sectionbody><div class=paragraph><p>Iedere gebruiker op een UNIX® systeem heeft een wachtwoord bij zijn account. Het lijkt voor de hand liggend dat deze wachtwoorden alleen bekend horen te zijn bij de gebruiker en het eigenlijke besturingssysteem. Om deze wachtwoorden geheim te houden, zijn ze gecodeerd in een "eenweg hash" ("one-way hash"), wat betekent dat ze eenvoudig gecodeerd kunnen worden maar niet gedecodeerd. Met andere woorden, wat net gesteld werd is helemaal niet waar: het besturingssysteem kent het <em>echte</em> wachtwoord niet. De enige manier om een wachtwoord in "platte tekst" te verkrijgen, is door er met brute kracht naar te zoeken in alle mogelijke wachtwoorden.</p></div><div class=paragraph><p>Helaas was DES, de Data Encryption Standard, de enige manier om wachtwoorden veilig te coderen toen UNIX® ontstond. Dit was geen probleem voor gebruikers in de VS, maar omdat de broncode van DES niet geëxporteerd mocht worden moest FreeBSD een manier vinden om zowel te gehoorzamen aan de wetten van de Verenigde Staten als aansluiting te houden bij alle andere varianten van UNIX® die nog steeds DES gebruikten.</p></div><div class=paragraph><p>De oplossing werd gevonden in het splitsen van de coderingsbibliotheken zodat gebruikers in de Verenigde Staten de DES-bibliotheken konden installeren en gebruiken en internationale gebruikers een coderingsmethode konden gebruiken die geëxporteerd mocht worden. Zo is het gekomen dat FreeBSD MD5 is gaan gebruiken als coderingsmethode. Van MD5 wordt aangenomen dat het veiliger is dan DES, dus de mogelijkheid om DES te installeren is vooral beschikbaar om aansluiting te kunnen houden.</p></div><div class=sect2><h3 id=_het_crypt_mechanisme_herkennen>15.4.1. Het crypt-mechanisme herkennen<a class=anchor href=#_het_crypt_mechanisme_herkennen></a></h3><div class=paragraph><p>Op dit moment ondersteunt de bibliotheek DES, MD5, Blowfish, SHA256 en SHA512 hashfuncties. Standaard gebruikt FreeBSD 9.1 en nieuwer SHA512 om wachtwoorden te coderen. Oudere versies gebruiken standaard MD5.</p></div><div class=paragraph><p>Het is vrij makkelijk om uit te vinden welke coderingsmethode FreeBSD op een bepaald moment gebruikt. De gecodeerde wachtwoorden in <span class=filename>/etc/master.passwd</span> bekijken is een manier. Wachtwoorden die gecodeerd zijn met MD5 zijn langer dan wanneer ze gecodeerd zijn met DES-hash. Daarnaast beginnen ze met de karakters <code>$1$</code>. Wachtwoorden die beginnen met <code>$2a$</code> zijn gecodeerd met de Blowfish hashfunctie. DES-wachtwoordstrings hebben geen bijzondere kenmerken, maar ze zijn korter dan MD5 wachtwoorden en gecodeerd in een 64-karakter alfabet waar geen <code>$</code> karakter in zit. Een relatief korte string die niet begint met een dollar teken is dus waarschijnlijk een DES-wachtwoord. Zowel SHA256 als SHA512 beginnen met de tekens <code>$6$</code>.</p></div><div class=paragraph><p>Het wachtwoordformaat voor nieuwe wachtwoorden wordt ingesteld met de <code>passwd_format</code> aanmeldinstelling in <span class=filename>/etc/login.conf</span> waar <code>des</code>, <code>md5</code>, <code>blf</code>, <code>sha256</code> of <code>sha512</code> in mag staan. Zie de <a href="https://man.freebsd.org/cgi/man.cgi?query=login.conf&amp;sektion=5&amp;format=html">login.conf(5)</a> handleiding voor meer informatie over aanmeldinstellingen.</p></div></div></div></div><div class=sect1><h2 id=one-time-passwords>15.5. Eenmalige wachtwoorden<a class=anchor href=#one-time-passwords></a></h2><div class=sectionbody><div class=paragraph><p>Standaard biedt FreeBSD ondersteuning voor OPIE (Eenmalige Wachtwoorden in Alles - "One-time Passwords In Everything"), wat standaard een MD5-hash gebruikt.</p></div><div class=paragraph><p>Hier worden drie verschillende soorten wachtwoorden besproken. De eerste is het normale UNIX® of Kerberos wachtwoord. Dit heet het "UNIX® wachtwoord". Het tweede type is een eenmalig wachtwoord dat wordt gemaakt met het OPIE-programma <a href="https://man.freebsd.org/cgi/man.cgi?query=opiekey&amp;sektion=1&amp;format=html">opiekey(1)</a> en dat wordt geaccepteerd door <a href="https://man.freebsd.org/cgi/man.cgi?query=opiepasswd&amp;sektion=1&amp;format=html">opiepasswd(1)</a> en de aanmeldprocedure. Dit heet het "eenmalige wachtwoord". Het laatste type wachtwoord is het wachtwoord dat wordt opgegeven aan het programma <code>opiekey</code> (en soms aan het programma <code>opiepasswd</code>) dat gebruikt wordt om eenmalige wachtwoorden te maken. Dit type heet "geheim wachtwoord" of gewoon een "wachtwoord" zonder toevoeging.</p></div><div class=paragraph><p>Het geheime wachtwoord heeft niets te maken met het UNIX® wachtwoord; ze kunnen hetzelfde zijn, dat wordt afgeraden. OPIE geheime wachtwoorden kennen niet de beperking van 8 karakters zoals de oude UNIX® wachtwoorden. Ze mogen onbeperkt lang zijn. Wachtwoorden van een zes of zeven woorden lange zin zijn niet ongewoon. Voor het overgrote deel werkt het OPIE-systeem volledig onafhankelijk van het UNIX® wachtwoordsysteem.</p></div><div class=paragraph><p>Buiten het wachtwoord zijn er nog twee stukjes gegevens die van belang zijn voor OPIE. Het eerste wordt "zaad" ("seed") of "sleutel" ("key") genoemd en bestaat uit twee letters en vijf cijfers. Het tweede stukje gegevens heet de "iteratieteller", een nummer tussen 1 en 100. OPIE maakt een eenmalig wachtwoord door het zaad en het geheime wachtwoord aaneen te schakelen en daarop het door de iteratieteller aangegeven keren MD5-hash toe te passen. Daarna wordt het resultaat omgezet in zes korte Engelse woorden. Deze zes woorden zijn een eenmalige wachtwoord. Het autenticatiesysteem (hoofdzakelijk PAM) houdt bij welk eenmalig wachtwoord het laatst is gebruikt en de gebruiker wordt geautenticeerd als de hash van het door de gebruiker ingegeven wachtwoord gelijk is aan het vorige wachtwoord. Omdat er een eenweg hash wordt gebruikt, is het onmogelijk om toekomstige eenmalige wachtwoorden te maken als iemand toch een eenmalig wachtwoord heeft afgevangen. De iteratieteller wordt verlaagd na iedere succesvolle aanmelding om de gebruiker en het aanmeldprogramma synchroon te houden. Als de iteratieteller op 1 staat, moet OPIE opnieuw ingesteld worden.</p></div><div class=paragraph><p>Er zijn enkele programma’s bij ieder systeem betrokken die hieronder worden besproken. Het programma <code>opiekey</code> heeft een iteratieteller, zaad en een geheim wachtwoord nodig en maakt dan een eenmalig wachtwoord of een lijst van opeenvolgende eenmalige wachtwoorden. Het programma <code>opiepasswd</code> wordt gebruikt om OPIE te initialiseren en om wachtwoorden, iteratietellers en zaad te wijzigen. Het accepteert zowel wachtwoordzinnen als een iteratieteller, zaad en een eenmalig wachtwoord. Het programma <code>opieinfo</code> bekijkt de relevante bestanden waarin de eigenschappen staan (<span class=filename>/etc/opiekeys</span>) en toont de huidige iteratieteller en zaad van de gebruiker die het commando uitvoert.</p></div><div class=paragraph><p>Nu worden vier verschillende acties besproken. Bij de eerste wordt <code>opiepasswd</code> gebruikt in een beveiligde verbinding om voor het eerst eenmalige wachtwoorden in te stellen of om een wachtwoord of zaad aan te passen. Bij de tweede wordt <code>opiepasswd</code> gebruikt over een onbeveiligde verbinding samen met <code>opiekey</code> over een beveiligde verbinding om hetzelfde te bereiken. In een derde scenario wordt <code>opiekey</code> gebruikt om aan te melden over een onveilige verbinding. Het vierde scenario behandelt het gebruik van <code>opiekey</code> om een aantal sleutels aan te maken die opgeschreven of afgedrukt kunnen worden, zodat ze meegenomen kunnen worden naar een plaats van waar geen enkele veilige verbinding opgezet kan worden.</p></div><div class=sect2><h3 id=_veilige_verbinding_initialiseren>15.5.1. Veilige verbinding initialiseren<a class=anchor href=#_veilige_verbinding_initialiseren></a></h3><div class=paragraph><p>Gebruik het commando <code>opiepasswd</code> om OPIE voor de eerste keer te initialiseren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiepasswd <span class=nt>-c</span>
<span class=o>[</span>grimreaper] ~ <span class=nv>$ </span>opiepasswd <span class=nt>-f</span> <span class=nt>-c</span>
Adding unfurl:
Only use this method from the console<span class=p>;</span> NEVER from remote. If you are using
telnet, xterm, or a dial-in, <span class=nb>type</span> ^C now or <span class=nb>exit </span>with no password.
Then run opiepasswd without the <span class=nt>-c</span> parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:

ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED</code></pre></div></div><div class=paragraph><p>Als <code>Enter new secret pass phrase:</code> of <code>Enter secret password:</code> op het scherm verschijnt, dient een wachtwoord of wachtwoordzin ingevoerd te worden. Dit is dus niet het aanmeldwachtwoord is, maar dit wordt gebruikt om eenmalige wachtwoorden te maken. De "ID" regel geeft de parameters van het verzoek weer: de aanmeldnaam, de iteratieteller en zaad. Bij het aanmelden kent het systeem deze parameters en worden deze weergegeven zodat ze niet onthouden hoeven te worden. Op de laatste regel staat het eenmalige wachtwoord dat overeenkomt met die parameters en het geheime wachtwoord. Als de gebruiker direct opnieuw zou aanmelden, zou hij dat eenmalige wachtwoord moeten gebruiken.</p></div></div><div class=sect2><h3 id=_onveilige_verbinding_initialiseren>15.5.2. Onveilige verbinding initialiseren<a class=anchor href=#_onveilige_verbinding_initialiseren></a></h3><div class=paragraph><p>Om een wachtwoord te initialiseren of te wijzigen over een onveilige verbinding, moet er al ergens een veilige verbinding bestaan waar de gebruiker <code>opiekey</code> kan uitvoeren. Dit kan een shellprompt zijn op een machine die vertrouwd wordt. De gebruiker moet ook een iteratieteller verzinnen (100 is wellicht een prima getal) en een eigen zaad bedenken of er een laten fabriceren. Over de onveilige verbinding (naar de machine die de gebruiker wil initialiseren) wordt het commando <code>opiepasswd</code> gebruikt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiepasswd

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
	otp-md5 498 to4268 ext
	Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
	otp-md5 499 to4269
	Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY</code></pre></div></div><div class=paragraph><p>Druk op <kbd>Return</kbd> om het standaardzaad te accepteren. Voor een toegangswachtwoord wordt ingevoerd, dient eerst gewisseld te worden naar de veilige verbinding en dienen dezelfde parameters ingegeven te worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey 498 to4268
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</span></code></pre></div></div><div class=paragraph><p>In de onveilige verbinding wordt nu het eenmalige wachtwoord in het relevante programma gekopieerd.</p></div></div><div class=sect2><h3 id=_een_enkel_eenmalig_wachtwoord_maken>15.5.3. Een enkel eenmalig wachtwoord maken<a class=anchor href=#_een_enkel_eenmalig_wachtwoord_maken></a></h3><div class=paragraph><p>Als OPIE eenmaal is ingesteld staat er bij het aanmelden iets als het volgende:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% telnet example.com
Trying 10.0.0.1...
Connected to example.com
Escape character is <span class=s1>&#39;^]&#39;</span><span class=nb>.</span>

FreeBSD/i386 <span class=o>(</span>example.com<span class=o>)</span> <span class=o>(</span>ttypa<span class=o>)</span>

login: &lt;gebruikersnaam&gt;
otp-md5 498 gr4269 ext
Password:</code></pre></div></div><div class=paragraph><p>NB: de OPIE-prompt heeft een handige optie (die hier niet te zien is): als er op <kbd>Return</kbd> wordt gedrukt bij de wachtwoordregel, wordt de echo aangezet, zodat de invoer zichtbaar is. Dit is erg handig als er met de hand een wachtwoord wordt ingegeven, zoals wanneer het wordt ingevoerd vanaf een afdruk.</p></div><div class=paragraph><p>Nu moet het eenmalige wachtwoord gemaakt worden om het aanmeldprompt mee te antwoorden. Dit moet gedaan worden op een vertrouwd systeem waarop <code>opiekey</code> beschikbaar is. Er zijn ook versies voor MS-DOS®, Windows® en Mac OS®. Voor het commando moet zowel de iteratieteller als het zaad ingeven worden op de commandoregel. Deze kan zo overgenomen worden vanaf het aanmeldprompt op de machine waarop de gebruiker zich wil aanmelden.</p></div><div class=paragraph><p>Op het vertrouwde systeem:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey 498 to4268
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</span></code></pre></div></div><div class=paragraph><p>Nu het eenmalige wachtwoord er is, kan het aanmelden doorgang vinden.</p></div></div><div class=sect2><h3 id=_meerdere_eenmalige_wachtwoorden_maken>15.5.4. Meerdere eenmalige wachtwoorden maken<a class=anchor href=#_meerdere_eenmalige_wachtwoorden_maken></a></h3><div class=paragraph><p>Soms moet een gebruiker ergens naar toe gaan waar er geen toegang is tot een vertrouwde machine of een beveiligde verbinding. In dat geval is het mogelijk om met het commando <code>opiekey</code> een aantal eenmalige wachtwoorden te maken om uit te printen en mee te nemen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey <span class=nt>-n</span> 5 30 zz99999
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: &lt;geheim wachtwoord&gt;
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</span></code></pre></div></div><div class=paragraph><p>Met <code>-n 5</code> worden vijf opeenvolgende sleutels aangevraagd, <code>30</code> geeft aan wat het laatste iteratiegetal moet zijn. Deze wachtwoorden worden weergegeven in <em>omgekeerde</em> volgorde voor gebruik. Als de gebruiker echt paranoïde bent kan hij ze opschrijven of hij kan er ook voor kiezen ze af te drukken met <code>lpr</code>. Op iedere regel staat dus de iteratieteller en het eenmalige wachtwoord, maar misschien is het toch handig om ze na gebruik af te strepen.</p></div></div><div class=sect2><h3 id=_gebruik_van_unix_wachtwoorden_beperken>15.5.5. Gebruik van UNIX® wachtwoorden beperken<a class=anchor href=#_gebruik_van_unix_wachtwoorden_beperken></a></h3><div class=paragraph><p>Met OPIE kan paal en perk gesteld worden aan het gebruik van UNIX® wachtwoorden op basis van het IP-adres van een aanmeldsessie. Dat kan met het bestand <span class=filename>/etc/opieaccess</span> dat standaard aanwezig is. Bij <a href="https://man.freebsd.org/cgi/man.cgi?query=opieaccess&amp;sektion=5&amp;format=html">opieaccess(5)</a> staat meer informatie over dit bestand en welke beveiligingsoverwegingen bestaan bij het gebruik.</p></div><div class=paragraph><p>Hieronder een voorbeeld voor een <span class=filename>opieaccess</span> bestand:</p></div><div class="literalblock programlisting"><div class=content><pre>permit 192.168.0.0 255.255.0.0</pre></div></div><div class=paragraph><p>In deze regel (<code>permit Internet</code>) staat dat gebruikers met een bron IP adres (wat gefingeerd kan worden) dat past binnen de aangegeven waarde en masker altijd UNIX® wachtwoorden mogen gebruiken.</p></div><div class=paragraph><p>Als geen van de regels uit <span class=filename>opieaccess</span> van toepassing is, worden standaard pogingen zonder OPIE geweigerd.</p></div></div></div></div><div class=sect1><h2 id=tcpwrappers>15.6. TCP Wrappers<a class=anchor href=#tcpwrappers></a></h2><div class=sectionbody><div class=paragraph><p>Iedereen die bekend is met <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> heeft waarschijnlijk wel eens van TCP Wrappers gehoord. Maar slechts weinigen lijken volledig te begrijpen hoe ze in een netwerkomgeving toegepast kunnen worden. Het schijnt dat iedereen een firewall wil hebben om netwerkverbindingen af te handelen. Ondanks dat een firewall veel kan, zijn er toch dingen die het niet kan, zoals tekst terugsturen naar de bron van een verbinding. De TCP Wrappers software kan dat en nog veel meer. In dit onderdeel worden de mogelijkheden van TCP Wrappers besproken en, waar dat van toepassing is, worden ook voorbeelden voor implementatie gegeven.</p></div><div class=paragraph><p>De TCP Wrappers software vergroot de mogelijkheden van inetd door de mogelijkheid al zijn serverdaemons te controleren. Met deze methode is het mogelijk om te loggen, berichten te zenden naar verbindingen, een daemon toe te staan alleen interne verbindingen te accepteren, etc. Hoewel een aantal van deze mogelijkheden ook ingesteld kunnen worden met een firewall, geeft deze manier niet alleen een extra laag beveiliging, maar gaat dit ook verder dan wat een firewall kan bieden.</p></div><div class=paragraph><p>De toegevoegde waarde van TCP Wrappers is niet dat het een goede firewall vervangt. TCP Wrappers kunnen samen met een firewall en andere beveiligingsinstellingen gebruikt worden om een extra laag van beveiliging voor het systeem te bieden.</p></div><div class=paragraph><p>Omdat dit een uitbreiding is op de instellingen van inetd, wordt aangenomen dat de lezer het onderdeel <a href=../network-servers/#network-inetd>inetd configuratie</a> heeft gelezen.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Hoewel programma’s die onder <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> draaien niet echt "daemons" zijn, heten ze traditioneel wel zo. Deze term wordt hier dus ook gebruikt.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=_voor_het_eerst_instellen>15.6.1. Voor het eerst instellen<a class=anchor href=#_voor_het_eerst_instellen></a></h3><div class=paragraph><p>De enige voorwaarde voor het gebruiken van TCP Wrappers in FreeBSD is ervoor te zorgen dat de server inetd gestart wordt vanuit <span class=filename>rc.conf</span> met de optie <code>-Ww</code>; dit is de standaardinstelling. Er wordt vanuit gegaan dat <span class=filename>/etc/hosts.allow</span> juist is ingesteld, maar als dat niet zo is, dan zal <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> dat melden.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In tegenstelling tot bij andere implementaties van TCP Wrappers is het gebruik van <span class=filename>hosts.deny</span> niet langer mogelijk. Alle instellingen moeten in <span class=filename>/etc/hosts.allow</span> staan.</p></div></td></tr></tbody></table></div><div class=paragraph><p>In de meest eenvoudige instelling worden verbindingen naar daemons toegestaan of geweigerd afhankelijk van de opties in <span class=filename>/etc/hosts.allow</span>. De standaardinstelling in FreeBSD is verbindingen toe te staan naar iedere daemon die met inetd is gestart. Na de basisinstelling wordt aangegeven hoe dit gewijzigd kan worden.</p></div><div class=paragraph><p>De basisinstelling heeft meestal de vorm <code>daemon : adres : actie</code>. <code>daemon</code> is de daemonnaam die <code>inetd</code> heeft gestart. Het <code>adres</code> kan een geldige hostnaam, een IP-adres of een IPv6-adres tussen blokhaken ([ ]) zijn. Het veld <code>actie</code> kan <code>allow</code> of <code>deny</code> zijn, afhankelijk van of toegang toegestaan of geweigerd moet worden. De instellingen werken zo dat ze worden doorlopen van onder naar boven om te kijken welke regel als eerste van toepassing is. Als een regel van toepassing is gevonden, dan stop het zoekproces.</p></div><div class=paragraph><p>Er zijn nog andere mogelijkheden, maar die worden elders toegelicht. Een eenvoudige instelling kan al van met deze informatie worden gemaakt. Om bijvoorbeeld POP3 verbindingen toe te staan via de <a class=package href=https://cgit.freebsd.org/ports/tree/mail/qpopper/>mail/qpopper</a> daemon, zouden de volgende instellingen moeten worden toegevoegd aan <span class=filename>hosts.allow</span>:</p></div><div class="literalblock programlisting"><div class=content><pre># Deze regel is nodig voor POP3-verbindingen
qpopper : ALL : allow</pre></div></div><div class=paragraph><p>Nadat deze regel is toegevoegd moet inetd herstart worden door gebruik te maken van <a href="https://man.freebsd.org/cgi/man.cgi?query=service&amp;sektion=8&amp;format=html">service(8)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service inetd restart</span></code></pre></div></div></div><div class=sect2><h3 id=_gevorderde_instellingen>15.6.2. Gevorderde instellingen<a class=anchor href=#_gevorderde_instellingen></a></h3><div class=paragraph><p>TCP Wrappers hebben ook gevorderde instellingen. Daarmee komt meer controle over de wijze waarop er met verbindingen wordt omgegaan. Soms is het een goed idee om commentaar te sturen naar bepaalde hosts of daemonverbindingen. In andere gevallen moet misschien iets in een logboekbestand geschreven worden of een email naar de beheerder gestuurd worden. Dit kan allemaal met instellingen die <code>wildcards</code>, uitbreidingskarakters (expansion characters) en het uitvoeren van externe commando’s heten. De volgende twee paragrafen beschrijven deze mogelijkheden.</p></div><div class=sect3><h4 id=_externe_commandos>15.6.2.1. Externe commando’s<a class=anchor href=#_externe_commandos></a></h4><div class=paragraph><p>Stel dat zich de situatie voordoet waar een verbinding geweigerd moet worden, maar er een reden gestuurd moet worden naar het individu dat die verbinding probeerde op te zetten. Hoe gaat dat? Dat is mogelijk door gebruik te maken van de optie <code>twist</code>. Als er een poging tot verbinding wordt gedaan, wordt er met <code>twist</code> een shellcommando of script uitgevoerd. Er staat al een voorbeeld in <span class=filename>hosts.allow</span>:</p></div><div class="literalblock programlisting"><div class=content><pre># De andere daemons zijn beschermd.
ALL : ALL \
	: severity auth.info \
	: twist /bin/echo &#34;You are not welcome to use %d from %h.&#34;</pre></div></div><div class=paragraph><p>Dit voorbeeld geeft aan dat het bericht "You are not allowed to use <code>daemon</code> from <code>hostname</code>." wordt teruggestuurd voor iedere daemon die niet al is ingesteld in het toegangsbestand. Het is erg handig om een antwoord terug te sturen naar degene die een verbinding op heeft willen zetten meteen nadat een tot stand gekomen verbinding is verbroken. Let wel dat alle berichten die gezonden worden <em>moeten</em> staan tussen <code>"</code> karakters. Hier zijn geen uitzonderingen op.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Het is mogelijk een ontzegging van dienst aanval uit te voeren op de server als een aanvaller, of een groep aanvallers, deze daemons kan overstromen met verzoeken om verbindingen te maken.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Het is ook mogelijk hier de optie <code>spawn</code> te gebruiken. Net als <code>twist</code> weigert de optie <code>spawn</code> impliciet de verbinding en kan het gebruikt worden om shellcommando’s of scripts uit te voeren. Anders dan bij <code>twist</code> stuurt <code>spawn</code> geen bericht aan degene die de verbinding wilde maken. Zie bijvoorbeeld de volgende instelling:</p></div><div class="literalblock programlisting"><div class=content><pre># Geen verbindingen van example.com:
ALL : .example.com \
	: spawn (/bin/echo %a from %h attempted to access %d &gt;&gt; \
	  /var/log/connections.log) \
	: deny</pre></div></div><div class=paragraph><p>Hiermee worden alle verbindingen van het domein <code>*.example.com</code> geweigerd. Tegelijkertijd worden ook hostnaam, IP adres en de daemon waarmee verbinding werd gemaakt naar <span class=filename>/var/log/connections.log</span> geschreven.</p></div><div class=paragraph><p>Naast de vervangingskarakters die al zijn toegelicht, zoals <code>%a</code>, bestaan er nog een paar andere. In de handleiding van <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a> staat een volledige lijst.</p></div></div><div class=sect3><h4 id=_wildcardopties>15.6.2.2. Wildcardopties<a class=anchor href=#_wildcardopties></a></h4><div class=paragraph><p>Tot nu toe is in ieder voorbeeld <code>ALL</code> gebruikt. Er bestaan nog andere opties waarmee de mogelijkheden nog verder gaan. Zo kan <code>ALL</code> gebruikt worden om van toepassing te zijn op iedere instantie van een daemon, domein of een IP adres. Een andere wildcard die gebruikt kan worden is <code>PARANOID</code>. Daarmee wordt iedere host die een IP-adres geeft dat gefingeerd kan zijn aangeduid. Met andere woorden: <code>PARANOID</code> kan gebruikt worden om een actie aan te geven als er een IP-adres gebruikt wordt dat verschilt van de hostnaam. Het volgende voorbeeld kan wat verheldering brengen:</p></div><div class="literalblock programlisting"><div class=content><pre># Weiger mogelijke gespoofte verzoeken aan sendmail:
sendmail : PARANOID : deny</pre></div></div><div class=paragraph><p>In het voorgaande voorbeeld worden alle verbindingsverzoeken aan <code>sendmail</code> met een IP-adres dat verschilt van de hostnaam geweigerd.</p></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content><div class=paragraph><p>Het gebruik van de wildcard <code>PARANOID</code> kan nogal wat schade aanrichten als de cliënt of de server kapotte DNS-instellingen heeft. Voorzichtigheid van de beheerder is geboden.</p></div></td></tr></tbody></table></div><div class=paragraph><p>De handleiding van <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a> geeft meer uitleg over wildcards en de mogelijkheden die ze bieden.</p></div><div class=paragraph><p>Voordat de bovenstaande instellingen werken, dient de eerste regels in <span class=filename>hosts.allow</span> als commentaar gemarkeerd te worden.</p></div></div></div></div></div><div class=sect1><h2 id=kerberos5>15.7. Kerberos5<a class=anchor href=#kerberos5></a></h2><div class=sectionbody><div class=paragraph><p>Kerberos is een netwerkdienst, protocol en systeem waarmee gebruikers zich kunnen aanmelden met behulp van een dienst op een veilige server. Diensten als op een andere server aanmelden, op afstand kopiëren, veilig tussen systemen kopiëren en andere taken met een hoog risico worden aanmerkelijk veiliger en beter controleerbaar.</p></div><div class=paragraph><p>Kerberos kan omschrijven worden als identiteitbevestigend proxy systeem. Het kan ook omschreven worden als een vertrouwd autenticatiesysteem van een derde partij. Kerberos vervult maar één taak: het veilig autenticeren van gebruikers op het netwerk. Het vervult geen autorisatietaken (wat gebruikers mogen) en controleert ook niets (wat gebruikers hebben gedaan). Nadat een cliënt en server Kerberos hebben gebruikt om hun identiteit vast te stellen kunnen ze ook al hun communicatie coderen om hun privacy en gegevensintegriteit te garanderen.</p></div><div class=paragraph><p>Daarom wordt het sterk aangeraden om Kerberos samen met andere beveiligingsmechanismen te gebruiken die autorisatie en controlemogelijkheden bieden.</p></div><div class=paragraph><p>De aanwijzingen die nu volgen kunnen gebruikt worden als werkinstructie om Kerberos in te stellen zoals dat wordt meegeleverd met FreeBSD. Een complete beschrijving staat in de handleiding.</p></div><div class=paragraph><p>Voor demonstratie van de installatie van Kerberos wordt gebruik gemaakt van de volgende naamgeving:</p></div><div class=ulist><ul><li><p>Het DNS domein ("zone") is example.org.</p></li><li><p>De Kerberos wereld is EXAMPLE.ORG.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Het advies is voor installaties van Kerberos echte domeinnamen te gebruiken, zelfs als het alleen intern wordt gebruikt. Hiermee worden DNS problemen voorkomen is een goede samenwerking met andere Kerberos werelden verzekerd.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=_geschiedenis>15.7.1. Geschiedenis<a class=anchor href=#_geschiedenis></a></h3><div class=paragraph><p>Kerberos is ontworpen door MIT als oplossing voor netwerkbeveiligingsproblemen. Het Kerberos protocol gebruikt sterke codering zodat een cliënt zijn identiteit kan bewijzen aan een server (en andersom) over een onveilige netwerkverbinding.</p></div><div class=paragraph><p>Kerberos is zowel de naam van een netwerkautorisatieprotocol als een bijvoeglijk naamwoord om de programma’s te beschrijven die gebruik maken van het programma (zoals Kerberos telnet). De huidige versie van het protocol is versie 5 en is beschreven in RFC 1510.</p></div><div class=paragraph><p>Er zijn een aantal vrij beschikbare implementaties van dit protocol beschikbaar voor veel systemen. Het Massachusetts Institute of Technology (MIT), waar Kerberos ooit is ontwikkeld, ontwikkelt nog steeds door aan hun Kerberos pakket. Het wordt in de VS veel gebruikt als coderingspakket en daarom wordt het ook geraakt door de exportwetgeving van de VS. Kerberos van MIT is beschikbaar als port (<a class=package href=https://cgit.freebsd.org/ports/tree/security/krb5/>security/krb5</a>). Heimdal Kerberos is een andere implementatie van versie 5 die expliciet buiten de VS is ontwikkeld om de exportwetgeving de omzeilen (en wordt daarom vaak gebruikt in niet-commerciële UNIX® varianten). De Heimdal Kerberos distributie is beschikbaar als port (<a class=package href=https://cgit.freebsd.org/ports/tree/security/heimdal/>security/heimdal</a>) en er zit een minimale installatie in de basisinstallatie van FreeBSD.</p></div><div class=paragraph><p>Om het grootst mogelijke publiek te bereiken gaan deze instructies ervan uit dat de Heimdal distributie die bij FreeBSD zit wordt gebruikt.</p></div></div><div class=sect2><h3 id=_opzetten_van_een_heimdal_kdc>15.7.2. Opzetten van een Heimdal KDC<a class=anchor href=#_opzetten_van_een_heimdal_kdc></a></h3><div class=paragraph><p>Het Sleutel Distributie Centrum (KDC, voluit "Key Distribution Center") is de gecentraliseerde autenticatiedienst die Kerberos levert. Het is de computer die Kerberos tickets uitgeeft. Het KDC wordt "vertrouwd" door alle andere computer in de Kerberos wereld en daarom dient er een strenger beveiligingsregime op van kracht te zijn.</p></div><div class=paragraph><p>Hoewel het draaien van de Kerberos dienst erg weinig van een systeem vraagt, wordt het wel aangeraden om een machine in te richten exclusief voor het KDC om beveiligingsredenen.</p></div><div class=paragraph><p>Het opzetten van een KDC begint met de controle of de instellingen in <span class=filename>/etc/rc.conf</span> juist zijn om te functioneren als KDC (misschien moeten paden veranderd worden voor een eigen systeem):</p></div><div class="literalblock programlisting"><div class=content><pre>kerberos5_server_enable=&#34;YES&#34;
kadmind5_server_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Daarna wordt het Kerberos-instellingenbestand <span class=filename>/etc/krb5.conf</span> aangemaakt:</p></div><div class="literalblock programlisting"><div class=content><pre>[libdefaults]
    default_realm = EXAMPLE.ORG
[realms]
    EXAMPLE.ORG = {
        kdc = kerberos.example.org
        admin_server = kerberos.example.org
    }
[domain_realm]
    .example.org = EXAMPLE.ORG</pre></div></div><div class=paragraph><p><span class=filename>/etc/krb5.conf</span> gaat ervan uit dat de KDC de volledig gekwalificeerde hostnaam <code>kerberos.example.org</code> heeft. Als de KDC een andere hostnaam heeft, moet er nog een CNAME (alias) toegevoegd aan de zonefile.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Voor grotere netwerken met een juist ingestelde BINDDNS server kan het bovenstaande voorbeeld ingekort worden tot:</p></div><div class="literalblock programlisting"><div class=content><pre>[libdefaults]
      default_realm = EXAMPLE.ORG</pre></div></div><div class=paragraph><p>Door de volgende regels toe te voegen aan het zonebestand voor <code>example.org</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>_kerberos._udp      IN  SRV     01 00 88 kerberos.example.org.
_kerberos._tcp      IN  SRV     01 00 88 kerberos.example.org.
_kpasswd._udp       IN  SRV     01 00 464 kerberos.example.org.
_kerberos-adm._tcp  IN  SRV     01 00 749 kerberos.example.org.
_kerberos           IN  TXT     EXAMPLE.ORG</pre></div></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Om cliënten de Kerberos-diensten te kunnen laten vinden, <em>moet</em> er een volledig ingestelde <span class=filename>/etc/krb5.conf</span> zijn of een minimaal ingestelde <span class=filename>/etc/krb5.conf</span><em>en</em> een correct ingestelde DNS-server.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Nu wordt de Kerberos database aangemaakt. Deze database bevat de sleutels voor alle principals en zijn versleuteld met een hoofdwachtwoord. Dit wachtwoord hoeft niet onthouden te worden omdat het wordt opgeslagen in (<span class=filename>/var/heimdal/m-key</span>). De hoofdsleutel wordt aangemaakt door <code>kstash</code> te starten en een wachtwoord in te voeren.</p></div><div class=paragraph><p>Als de hoofdsleutel is gemaakt, kan de database ingeschakeld worden met <code>kadmin</code> met de optie <code>-l</code> (die staat voor "local"). Deze optie geeft <code>kadmin</code> de opdracht om de databasebestanden direct te wijzigingen in plaats van via de <code>kadmind</code> netwerkdienst. Hiermee wordt het kip-ei-probleem opgelost waarbij een verbinding wordt gemaakt met de database voordat hij bestaat. Op het prompt van <code>kadmin</code> kan met <code>init</code> de database met de werelden aangemaakt worden.</p></div><div class=paragraph><p>Tenslotte, nog steeds in <code>kadmin</code>, kan de eerste principal gemaakt worden met <code>add</code>. De standaardopties voor de principal worden nu aangehouden. Deze kunnen later altijd nog gewijzigd worden met <code>modify</code>. Met het commando <code>?</code> kunnen alle beschikbare mogelijkheden getoond worden.</p></div><div class=paragraph><p>Hieronder een sessie waarin een voorbeelddatabase wordt aangemaakt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kstash</span>
Master key: xxxxxxxx
Verifying password - Master key: xxxxxxxx

<span class=c># kadmin -l</span>
kadmin&gt; init EXAMPLE.ORG
Realm max ticket life <span class=o>[</span>unlimited]:
kadmin&gt; add tillman
Max ticket life <span class=o>[</span>unlimited]:
Max renewable life <span class=o>[</span>unlimited]:
Attributes <span class=o>[]</span>:
Password: xxxxxxxx
Verifying password - Password: xxxxxxxx</code></pre></div></div><div class=paragraph><p>Nu kan de KDC dienst gestart worden met <code>service kerberos start</code> en <code>service kadmind start</code>. Op dit moment draait er nog geen enkele daemon die gebruik maakt van Kerberos. Bevestiging dat KDC draait is te krijgen door een ticket te vragen en dat uit te lezen voor de principal (gebruiker) die zojuist is aangemaakt vanaf de commandoregel van het KDC zelf:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit tillman
tillman@EXAMPLE.ORG<span class=s1>&#39;s Password:

% klist
Credentials cache: FILE:/tmp/krb5cc_500
	Principal: tillman@EXAMPLE.ORG

  Issued           Expires          Principal
Aug 27 15:37:58  Aug 28 01:37:58  krbtgt/EXAMPLE.ORG@EXAMPLE.ORG</span></code></pre></div></div><div class=paragraph><p>Het ticket kan worden ingenomen wanneer u klaar bent:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kdestroy</code></pre></div></div></div><div class=sect2><h3 id=_kerberos_inschakelen_op_een_server_met_heimdal_diensten>15.7.3. Kerberos inschakelen op een server met Heimdal diensten<a class=anchor href=#_kerberos_inschakelen_op_een_server_met_heimdal_diensten></a></h3><div class=paragraph><p>Als eerste is een kopie van het instellingenbestand van Kerberos nodig, <span class=filename>/etc/krb5.conf</span>. Dit bestand kan eenvoudigweg op een veilige manier (met netwerkprogramma’s als <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a>, of fysiek via een floppy) naar de cliëntcomputer gekopieerd worden vanaf de KDC.</p></div><div class=paragraph><p>Hierna is het <span class=filename>/etc/krb5.keytab</span> nodig. Dit is het belangrijkste verschil tussen een server die een daemons met Kerberos aanbiedt en een werkstation: de server heeft het bestand <span class=filename>keytab</span> nodig. Dit bestand bevat de hostsleutel van de server waardoor het werkstation en de KDC elkaars identiteit kunnen bevestigen. Dit bestand dient veilig overgebracht te worden omdat de beveiliging van de server doorbroken kan worden als de sleutel openbaar wordt gemaakt. Dit betekent expliciet dat overdracht via een protocol dat platte tekst gebruikt, bijvoorbeeld FTP, een slecht idee is.</p></div><div class=paragraph><p>Meestal wordt <span class=filename>keytab</span> naar de server gebracht met <code>kadmin</code>. Dat werkt handig omdat ook de host principal (het KDC onderdeel van <span class=filename>krb5.keytab</span>) aangemaakt moet worden met <code>kadmin</code>.</p></div><div class=paragraph><p>Let wel op dat er al een ticket moet zijn en dat dit ticket de <code>kadmin</code> interface moet mogen gebruiken in <span class=filename>kadmind.acl</span>. Zie "Beheer op Afstand" in de Heimdal informatiepagina’s (<code>info heimdal</code>) voor details over het ontwerpen van toegangscontrole. Als <code>kadmin</code> via het netwerk geen toegang mag hebben, dan kan ook op een veilige verbinding gemaakt worden met de KDC (via het lokale console, <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> of Kerberos <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a>) zodat alles lokaal uitgevoerd kan worden met <code>kadmin -l</code>.</p></div><div class=paragraph><p>Na het installeren van <span class=filename>/etc/krb5.conf</span> kan <code>kadmin</code> van de Kerberos server gebruikt worden. Met <code>add --random-key</code> kan de host principal toegevoegd worden en met <code>ext</code> kan de host principal van de server naar zijn eigen keytab getrokken worden. Bijvoorbeeld:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kadmin</span>
kadmin&gt; add <span class=nt>--random-key</span> host/myserver.example.org
Max ticket life <span class=o>[</span>unlimited]:
Max renewable life <span class=o>[</span>unlimited]:
Attributes <span class=o>[]</span>:
kadmin&gt; ext host/myserver.example.org
kadmin&gt; <span class=nb>exit</span></code></pre></div></div><div class=paragraph><p>Let op: <code>ext</code> slaat de sleutel standaard op in <span class=filename>/etc/krb5.keytab</span>.</p></div><div class=paragraph><p>Als <code>kadmind</code> niet beschikbaar is op de KDC (wellicht om beveiligingsredenen) en er via het netwerk dus geen toegang is tot <code>kadmin</code>, dan kan de host principal (<code>host/myserver.EXAMPLE.ORG</code>) ook direct aan de KDC toegevoegd worden en daarna in een tijdelijk bestand gezet worden. Het volgende kan gebruikt worden om te voorkomen dat <span class=filename>/etc/krb5.keytab</span> op de KDC) wordt overschreven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kadmin</span>
kadmin&gt; ext <span class=nt>--keytab</span><span class=o>=</span>/tmp/example.keytab host/myserver.example.org
kadmin&gt; <span class=nb>exit</span></code></pre></div></div><div class=paragraph><p>Hierna kan de keytab veilig gekopieerd worden naar de server (met <code>scp</code> of een floppy). Geef een niet-standaard naam op voor de keytab om te voorkomen dat de keytab op de KDC wordt overschreven.</p></div><div class=paragraph><p>Nu kan de server communiceren met de KDC (vanweg <span class=filename>krb5.conf</span>) en zijn identiteit bewijzen (vanwege <span class=filename>krb5.keytab</span>). Nu is de server klaar om er een aantal Kerberos diensten op te activeren. In dit voorbeeld wordt de dienst <code>telnet</code> geactiveerd door de volgende regel in <span class=filename>/etc/inetd.conf</span> te zetten en dan <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> te herstarten met <code>service inetd restart</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>telnet    stream  tcp     nowait  root    /usr/libexec/telnetd  telnetd -a user</pre></div></div><div class=paragraph><p>Het belangrijkste is dat de typering <code>-a</code> (van autenticatie) op user staat. Meer details zijn in <a href="https://man.freebsd.org/cgi/man.cgi?query=telnetd&amp;sektion=8&amp;format=html">telnetd(8)</a> te vinden.</p></div></div><div class=sect2><h3 id=_kerberos_activeren_op_een_cliënt_met_heimdal>15.7.4. Kerberos activeren op een cliënt met Heimdal<a class=anchor href=#_kerberos_activeren_op_een_cliënt_met_heimdal></a></h3><div class=paragraph><p>Het opzetten van een cliëntcomputer is eigenlijk kinderlijk eenvoudig. Wat betreft de Kerberos instelling is alleen het Kerberos instellingenbestand (<span class=filename>/etc/krb5.conf</span>) nodig. Dat kan eenvoudigweg naar de cliëntcomputer gekopieerd worden vanaf de KDC.</p></div><div class=paragraph><p>Test de cliënt met <code>kinit</code>, <code>klist</code> en <code>kdestroy</code> vanaf de cliënt om een ticket te krijgen, te bekijken en daarna te verwijderen voor de principal die hierboven is aangemaakt. Nu moeten ook Kerberos applicaties gebruikt kunnen worden om verbindingen te maken met servers waarop Kerberos is geactiveerd. Als dat niet lukt en het verkrijgen van een ticket is wel mogelijk, dan ligt dat hoogstwaarschijnlijk aan de server en niet aan de cliënt of de KDC.</p></div><div class=paragraph><p>Bij het testen van een applicatie als <code>telnet</code> kan het beste een pakketsnuffelaar (bijvoorbeeld <a href="https://man.freebsd.org/cgi/man.cgi?query=tcpdump&amp;sektion=1&amp;format=html">tcpdump(1)</a>) gebruikt worden om te bevestigen dat een wachtwoord niet als tekst wordt verzonden. Gebruik <code>telnet</code> met de optie <code>-x</code>. Dan wordt de complete gegevensstroom versleuteld (vergelijkbaar met <code>ssh</code>).</p></div><div class=paragraph><p>Er worden standaard ook andere Kerberos applicaties op de cliënt geïnstalleerd. Hier komt de "minimalistische" natuur van de basisinstallatie van Heimdal boven drijven: <code>telnet</code> is de enige dienst waarvoor Kerberos geactiveerd is.</p></div><div class=paragraph><p>De port Heimdal voegt een aantal ontbrekende cliëntapplicaties toe: versies met ondersteuning voor Kerberos van <code>ftp</code>, <code>rsh</code>, <code>rcp</code>, <code>rlogin</code> en een paar minder gebruikelijke programma’s. De MIT port bevat ook een volledig gamma aan Kerberos cliëntapplicaties.</p></div></div><div class=sect2><h3 id=_instellingenbestanden_voor_gebruikers_k5login_en_k5users>15.7.5. Instellingenbestanden voor gebruikers: <span class=filename>.k5login</span> en <span class=filename>.k5users</span><a class=anchor href=#_instellingenbestanden_voor_gebruikers_k5login_en_k5users></a></h3><div class=paragraph><p>Voor gebruikers binnen een wereld wijst hun Kerberos principal (bv. <code>tillman@EXAMPLE.ORG</code>) gewoonlijk naar een lokale gebruikersaccount (bijvoorbeeld een lokale account met de naam <code>tillman</code>). Voor cliëntapplicaties als <code>telnet</code> is gewoonlijk geen gebruikersnaam of principal nodig.</p></div><div class=paragraph><p>Soms moet iemand zonder bijpassende Kerberos principal toch toegang hebben tot een lokale gebruikersaccount. <code>tillman@EXAMPLE.ORG</code> zou bijvoorbeeld toegang nodig kunnen hebben tot de lokale gebruikersaccount <code>webdevelopers</code>. Andere principals zouden die toegang wellicht ook nodig kunnen hebben.</p></div><div class=paragraph><p>De bestanden <span class=filename>.k5login</span> en <span class=filename>.k5users</span> uit de gebruikersmap kunnen op eenzelfde manier gebruikt worden als <span class=filename>.hosts</span> en <span class=filename>.rhosts</span>. Zo wordt het voorgaande probleem opgelost. Als bijvoorbeeld een <span class=filename>.k5login</span> met de volgende inhoud:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>tillman@example.org
jdoe@example.org</code></pre></div></div><div class=paragraph><p>in de thuismap van de lokale gebruiker <code>webdevelopers</code> gezet wordt dan zouden beide principals toegang hebben tot die account zonder dat ze een wachtwoord hoeven te delen.</p></div><div class=paragraph><p>We raden aan de handleidingen voor deze commando’s te lezen. Let op dat de <code>ksu</code> handleiding <span class=filename>.k5users</span> behandelt.</p></div></div><div class=sect2><h3 id=_kerberos_tips_trucs_en_problemen_oplossen>15.7.6. Kerberos tips, trucs en problemen oplossen<a class=anchor href=#_kerberos_tips_trucs_en_problemen_oplossen></a></h3><div class=ulist><ul><li><p>Als de Heimdal of MITKerberos port wordt gebruikt dan dient de <code>PATH</code> omgevingsvariabele de Kerberos versies van de cliëntapplicaties te tonen voor de systeemversies.</p></li><li><p>Hebben alle computers in de wereld hun tijd gesynchroniseerd? Als dat niet zo is, dan slaagt de autenticatie wellicht niet. <a href=../network-servers/#network-ntp>Tijd synchroniseren met NTP</a> beschrijft hoe klokken met NTP gesynchroniseerd kunnen worden.</p></li><li><p>MIT en Heimdal werken prima samen. Dit geldt niet voor <code>kadmin</code> omdat daarvoor geen protocolstandaard is.</p></li><li><p>Als een hostnaam wordt gewijzigd, dan moet ook de <code>host/</code> principal aangepast en de keytab. Dit geldt ook voor bijzondere instellingen in de keytab zoals de <code>www/</code> principal voor <a class=package href=https://cgit.freebsd.org/ports/tree/www/mod_auth_kerb/>www/mod_auth_kerb</a> van Apache.</p></li><li><p>Alle hosts in een wereld moeten oplosbaar (resolvable) zijn (zowel vooruit als achteruit) in de DNS (of tenminste in <span class=filename>/etc/hosts</span>). CNAMEs werken wel, maar de A en PTR records moeten juist en actief zijn. De foutmelding is niet erg duidelijk: <code>Kerberos5 refuses authentication because Read req failed: Key table entry not found</code>.</p></li><li><p>Sommige besturingssystemen van cliënten voor een KDC zetten wellicht geen setuid <code>root</code> voor <code>ksu</code>. Dit betekent dat <code>ksu</code> niet werkt. Dat is vanuit beveiligingsoogpunt een prima idee, maar wel lastig. Dit is dus geen KDC-fout.</p></li><li><p>Als met MITKerberos een principal een ticket moet krijgen dat langer geldig is dan de standaard van tien uur, dan moet <code>modify_principal</code> in <code>kadmin</code> gebruikt worden om de maximale geldigheidsduur (maxlife) van zowel de principal waar het om gaat als de <code>krbtgt</code> principal aan te passen. Dan kan de principal <code>kinit`</code>-l` gebruiken om een ticket met een langere levensduur aan te vragen.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als een pakketsnuffelaar op de KDC draait bij om te helpen bij het oplossen van problemen en dan <code>kinit</code> vanaf een werkstation wordt gestart, dan wordt zichtbaar dat de TGT meteen wordt verstuurd als <code>kinit</code> start, zelfs nog voor het wachtwoord! De reden hiervoor is dat de Kerberos server vrijelijk een TGT (Ticket Granting Ticket) verstuurt op iedere niet geautoriseerd verzoek. Maar iedere TGT is versleuteld met een sleutel die is afgeleid van het wachtwoord van de gebruiker. Als een gebruiker zijn wachtwoord ingeeft, wordt dat dus niet naar de KDC gezonden, maar ontcijfert het de TGT die <code>kinit</code> al heeft ontvangen. Als de ontcijfering resulteert in een geldige ticket met een geldige tijdstempel, dan heeft de gebruiker geldige Kerberos rechten. Deze rechten bevatten ook een sessiesleutel voor het opzetten van beveiligde communicatie met de Kerberos server in de toekomst en de eigenlijke ticket-granting ticket, die is versleuteld met de sleutel van de Kerberos server zelf. Deze tweede laag van versleuteling is niet bekend voor de gebruiker, maar het stelt de Kerberos server in staat om de juistheid van iedere TGT te bevestigen.</p></div></td></tr></tbody></table></div></li><li><p>Als tickets worden gebruik die lang geldig zijn (bv. een week) en OpenSSH wordt gebruikt om een verbinding te maken met de machine waarop het ticket staat, zorg er dan voor dat de Kerberos optie <code>TicketCleanup</code> op <code>no</code> staat in <span class=filename>sshd_config</span> want anders worden tickets verwijderd bij afmelden.</p></li><li><p>Hostprincipals kunnen ook een langere levensduur hebben. Als een gebruikers principal een levensduur van een week heeft, maar de host waar de verbinding mee gemaakt wordt heeft een levensduur van negen uur, dan heb staat er een verlopen host principal in de cache en dan werkt een en ander niet zoals verwacht.</p></li><li><p>Een <span class=filename>krb5.dict</span> bestand om het gebruik van bepaalde slechte wachtwoorden te voorkomen (dit wordt kort behandeld in de handleiding voor <code>kadmind</code>) heeft alleen betrekking op principals waar een wachtwoordbeleid voor geldt. De opmaak van <span class=filename>krb5.dict</span> is eenvoudig: een rij tekens per regel. Een symbolische link maken naar <span class=filename>/usr/shared/dict/words</span> is misschien handig.</p></li></ul></div></div><div class=sect2><h3 id=_verschillen_met_de_mit_port>15.7.7. Verschillen met de MIT port<a class=anchor href=#_verschillen_met_de_mit_port></a></h3><div class=paragraph><p>Het belangrijkste verschil tussen de MIT en Heimdal installatie heeft betrekking op <code>kadmin</code>, dat een andere (maar gelijkwaardige) set commando’s kent en een andere protocol gebruikt. Dit betekent nogal wat als een KDCMIT is, omdat dan de <code>kadmin</code> van Heimdal niet gebruikt kan worden om de KDC vanaf afstand te beheren (dat geldt trouwens ook vice versa).</p></div><div class=paragraph><p>De cliëntapplicaties kunnen ook commandoregelopties gebruiken die een beetje verschillen, maar waarmee wel hetzelfde wordt bereikt. We raden aan de instructies op de MITKerberos website (<a href=http://web.mit.edu/Kerberos/www/>http://web.mit.edu/Kerberos/www/</a>) te volgen. Wees voorzichtig met paden: de MIT-port installeert standaard in <span class=filename>/usr/local/</span> en dus kunnen de "normale" systeemapplicaties gestart worden in plaats van die van MIT als de <code>PATH</code> omgevingsvariabele de systeemmappen als eerste weergeeft.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Als de MIT<a class=package href=https://cgit.freebsd.org/ports/tree/security/krb5/>security/krb5</a> port die bij FreeBSD zit wordt gebruikt, dan zorgt het lezen van <span class=filename>/usr/local/shared/doc/krb5/README.FreeBSD</span> dat bij de port wordt geïnstalleerd voor een beter begrip over waarom het aanmelden via <code>telnetd</code> en <code>klogind</code> soms wat vreemd verloopt. Als belangrijkste wijzen we erop dat het bij het corrigeren van "onjuiste rechten op het cachebestand" noodzakelijk is dat het binaire bestand <code>login.krb5</code> wordt gebruikt voor autenticatie zodat het op de juiste wijze eigenaarschap kan wijzigen voor de doorgegeven rechten.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Het bestand <span class=filename>rc.conf</span> moet ook gewijzigd worden zodat het de volgende configuratie bevat:</p></div><div class="literalblock programlisting"><div class=content><pre>kerberos5_server=&#34;/usr/local/sbin/krb5kdc&#34;
kadmind5_server=&#34;/usr/local/sbin/kadmind&#34;
kerberos5_server_enable=&#34;YES&#34;
kadmind5_server_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Dit is gedaan omdat de applicaties voor MIT-Kerberos binairen in de hiërarchie <span class=filename>/usr/local</span> installeren.</p></div></div><div class=sect2><h3 id=_beperkingen_in_kerberos>15.7.8. Beperkingen in Kerberos<a class=anchor href=#_beperkingen_in_kerberos></a></h3><div class=sect3><h4 id=_kerberos_is_een_alles_of_niets_aanpak>15.7.8.1. Kerberos is een alles of niets aanpak<a class=anchor href=#_kerberos_is_een_alles_of_niets_aanpak></a></h4><div class=paragraph><p>Iedere ingeschakelde dienst op het netwerk moet aangepast worden om met Kerberos te werken (of op een andere manier beschermd zijn tegen netwerkaanvallen), want anders kunnen gebruikersrechten worden gestolen en herbruikt. Een voorbeeld hier van is het inschakelen van Kerberos voor alle shells op afstand (via <code>rsh</code> en <code>telnet</code> bijvoorbeeld), maar de POP3 mailserver die wachtwoorden als platte tekst verzend ongemoeid laten.</p></div></div><div class=sect3><h4 id=_kerberos_is_bedoeld_voor_werkstations_met_een_gebruiker>15.7.8.2. Kerberos is bedoeld voor werkstations met een gebruiker<a class=anchor href=#_kerberos_is_bedoeld_voor_werkstations_met_een_gebruiker></a></h4><div class=paragraph><p>In een meergebruikersomgeving is Kerberos minder veilig. Dit komt doordat de tickets worden opgeslagen in de map <span class=filename>/tmp</span>, waar gelezen kan worden door alle gebruikers. Als een gebruiker een computer deelt met andere gebruikers op hetzelfde moment (dus multi-user), dan is het mogelijk dat een ticket van een gebruiker wordt gestolen (gekopieerd) door een andere gebruiker.</p></div><div class=paragraph><p>Dit kan voorkomen worden met de commandoregeloptie "`-c` bestandsnaam" of (bij voorkeur) de omgevingsvariabele <code>KRB5CCNAME</code>, maar dat wordt zelden gedaan. In principe kan het opslaan van een ticket in de thuismap van een gebruiker in combinatie met eenvoudige bestandsrechten dit probleem verhelpen.</p></div></div><div class=sect3><h4 id=_de_kdc_is_een_single_point_of_failure>15.7.8.3. De KDC is een single point of failure<a class=anchor href=#_de_kdc_is_een_single_point_of_failure></a></h4><div class=paragraph><p>Zoals het is ontworpen, moet de KDC zo goed mogelijk beveiligd zijn, omdat de hoofdwachtwoorddatabase erop staat. De KDC hoort geen enkele andere dienst aan te bieden en moet ook fysiek afgeschermd worden. Het gevaar is groot, omdat Kerberos alle wachtwoorden versleutelt met dezelfde sleutel (de "master" sleutel) die als een bestand op de KDC staat.</p></div><div class=paragraph><p>Toch is een gecompromitteerde mastersleutel niet zo’n groot probleem als wellicht wordt verondersteld. De mastersleutel wordt alleen gebruikt om de Kerberos database te versleutelen en als zaad voor de generator van willekeurige nummers. Zo lang als de toegang tot de KDC is beveiligd, kan een aanvaller niet echt iets doen met de mastersleutel.</p></div><div class=paragraph><p>Als de KDC niet beschikbaar is (misschien door een ontzeggen van dienst aanval of netwerkproblemen) kunnen de netwerkdiensten niet gebruikt worden omdat er geen autenticatie uitgevoerd kan worden; een recept voor een ontzeggen van dienst aanval. Dit risico kan omzeild worden door meerdere KDC’s (één master en één of meer slaven) en een zorgvuldige implementatie van secundaire of fall-back autenticatie. PAM is hier uitermate geschikt voor.</p></div></div><div class=sect3><h4 id=_tekortkomingen_van_kerberos>15.7.8.4. Tekortkomingen van Kerberos<a class=anchor href=#_tekortkomingen_van_kerberos></a></h4><div class=paragraph><p>Kerberos stelt gebruikers, hosts en diensten in staat om elkaar te autenticeren. Maar het heeft geen mechanisme om de KDC te autenticeren aan de gebruikers, hosts of diensten. Dit betekent dat bijvoorbeeld een vervalste <code>kinit</code> alle gebruikersnamen en wachtwoorden zou kunnen afluisteren. Iets als <a class=package href=https://cgit.freebsd.org/ports/tree/security/tripwire/>security/tripwire</a> of andere controle-instrumenten voor de integriteit van bestandssystemen kunnen hier verlichting brengen.</p></div></div></div><div class=sect2><h3 id=_bronnen_en_verdere_informatie>15.7.9. Bronnen en verdere informatie<a class=anchor href=#_bronnen_en_verdere_informatie></a></h3><div class=ulist><ul><li><p><a href=http://www.faqs.org/faqs/Kerberos-faq/general/preamble.html>De Kerberos FAQ</a> (Engels)</p></li><li><p><a href=http://web.mit.edu/Kerberos/www/dialogue.html>Een Autenticatiesysteem Ontwerpen: een Dialoog in Vier Scenes</a> (Engels)</p></li><li><p><a href="http://www.ietf.org/rfc/rfc1510.txt?number=1510">RFC 1510, De Kerberos Netwerk Authenticatie Dienst (V5)</a> (Engels)</p></li><li><p><a href=http://web.mit.edu/Kerberos/www/>MIT Kerberos homepage</a></p></li><li><p><a href=http://www.pdc.kth.se/heimdal/>Heimdal Kerberos homepage</a></p></li></ul></div></div></div></div><div class=sect1><h2 id=openssl>15.8. OpenSSL<a class=anchor href=#openssl></a></h2><div class=sectionbody><div class=paragraph><p>Een toepassing die bij FreeBSD zit die veel gebruikers over het hoofd zien is OpenSSL. OpenSSL biedt een versleutelde transportlaag bovenop de normale communicatielaag. Daardoor biedt het de mogelijkheid met veel netwerktoepassingen en diensten verweven te raken.</p></div><div class=paragraph><p>Een aantal toepassingen van OpenSSL zijn versleutelde autenticatie van mailcliënten, webgebaseerde transacties als creditcardbetalingen en nog veel meer. Veel ports zoals <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a> en <a class=package href=https://cgit.freebsd.org/ports/tree/mail/claws-mail/>mail/claws-mail</a> bieden tijdens het compileren ondersteuning om OpenSSL in te bouwen.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In de meeste gevallen zal de Portscollectie proberen de port <a class=package href=https://cgit.freebsd.org/ports/tree/security/openssl/>security/openssl</a> te bouwen, tenzij de make variabele <code>WITH_OPENSSL_BASE</code> expliciet naar "yes" is gezet.</p></div></td></tr></tbody></table></div><div class=paragraph><p>De versie van OpenSSL die bij FreeBSD zit ondersteunt Secure Sockets Layer v2/v3 (SSLv2/SSLv3), Transport Layer Security v1 (TLSv1) netwerkbeveiligingsprotocollen en kan gebruikt worden als generieke versleutelingsbibliotheek.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Hoewel OpenSSL ondersteuning biedt voor het IDEA algoritme, is dat standaard uitgeschakeld in verband met patenten in de Verenigde Staten. Om het te gebruiken dient de licentie gelezen te worden en, als de restricties aanvaardbaar zijn, dient de make-variabele <code>MAKE_IDEA</code> ingesteld te worden in <span class=filename>make.conf</span>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Een van de meest gebruikte toepassingen van OpenSSL is het leveren van certificaten voor gebruik met softwaretoepassingen. Deze certificaten verzekeren dat de eigenschappen van een bedrijf of individu geldig zijn en niet vervalst. Als het certificaat in kwestie niet geldig verklaard is door een van de "Certificate Authorities" of CA’s, dan komt er een waarschuwing. Een Certificate Authority is een bedrijf, zoals <a href=http://www.verisign.com>VeriSign</a>, dat certificaten ondertekent zodat de eigenschappen van een bedrijf of individu geldig verklaard kunnen worden. Dit proces kost geld en het is zeker geen voorwaarde voor het gebruik van certificaten. Het stelt wel de meer paranoïde gebruikers gerust.</p></div><div class=sect2><h3 id=_certificaten_maken>15.8.1. Certificaten maken<a class=anchor href=#_certificaten_maken></a></h3><div class=paragraph><p>Voor het maken van certificaten is het volgende commando beschikbaar:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl req -new -nodes -out req.pem -keyout cert.pem</span>
Generating a 1024 bit RSA private key
................
.......................................
writing new private key to <span class=s1>&#39;cert.pem&#39;</span>
<span class=nt>-----</span>
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter <span class=s1>&#39;.&#39;</span>, the field will be left blank.
<span class=nt>-----</span>
Country Name <span class=o>(</span>2 letter code<span class=o>)</span> <span class=o>[</span>AU]:US
State or Province Name <span class=o>(</span>full name<span class=o>)</span> <span class=o>[</span>Some-State]:PA
Locality Name <span class=o>(</span>eg, city<span class=o>)</span> <span class=o>[]</span>:Pittsburgh
Organization Name <span class=o>(</span>eg, company<span class=o>)</span> <span class=o>[</span>Internet Widgits Pty Ltd]:My Company
Organizational Unit Name <span class=o>(</span>eg, section<span class=o>)</span> <span class=o>[]</span>:Systems Administrator
Common Name <span class=o>(</span>eg, YOUR name<span class=o>)</span> <span class=o>[]</span>:localhost.example.org
Email Address <span class=o>[]</span>:trhodes@FreeBSD.org

Please enter the following <span class=s1>&#39;extra&#39;</span> attributes
to be sent with your certificate request
A challenge password <span class=o>[]</span>:SOME PASSWORD
An optional company name <span class=o>[]</span>:Another Name</code></pre></div></div><div class=paragraph><p>Let op dat het antwoord direct na "Common Name" een domeinnaam weergeeft. De prompt wil dat er een servernaam wordt ingegeven voor het verificatieproces. Het plaatsen van iets anders dan een domeinnaam zorgt ervoor dat het certificaat waardeloos wordt. Er zijn ook andere opties als verloopdatum, andere versleutelingsalgoritmes, etc, beschikbaar. Een volledige lijst is na te lezen in de handleiding van <a href="https://man.freebsd.org/cgi/man.cgi?query=openssl&amp;sektion=1&amp;format=html">openssl(1)</a>.</p></div><div class=paragraph><p>Er horen nu twee bestanden te staan in de map waarin het voorgaande commando is uitgevoerd. Het certificaatverzoek, <span class=filename>req.pem</span>, kan naar een certificaat autoriteit gestuurd worden die de bijgevoegde gegevens kan valideren, het verzoek kan tekenen en het certificaat kan retourneren. Het tweede bestand heet <span class=filename>cert.pem</span> en is de geheime sleutel voor het certificaat. Deze dient zorgvuldig beschermd te worden. Als de geheime sleutel in de handen van anderen valt kan die gebruikt worden om de identiteit van de eigenaar (of server) aan te nemen.</p></div><div class=paragraph><p>In gevallen waar ondertekening door een CA niet vereist is, kan een zelfondertekend certificaat gemaakt worden. Maak als eerste de RSA sleutel:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl dsaparam -rand -genkey -out myRSA.key 1024</span></code></pre></div></div><div class=paragraph><p>Hierna kan de CA sleutel gemaakt worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl gendsa -des3 -out myca.key myRSA.key</span></code></pre></div></div><div class=paragraph><p>Deze sleutel kan gebruikt worden om een certificaat te maken:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl req -new -x509 -days 365 -key myca.key -out new.crt</span></code></pre></div></div><div class=paragraph><p>Er zouden nu twee bestanden bijgekomen moeten zijn in de map: een certificaatautoriteit ondertekeningsbestand <span class=filename>myca.key</span> en <span class=filename>new.crt</span>, het certificaat zelf. Deze moeten in een map geplaatst worden, bij voorkeur onder <span class=filename>/etc</span> waar alleen <code>root</code> kan lezen. De rechten 0700 zijn hier prima en die kunnen ingesteld worden met <code>chmod</code>.</p></div></div><div class=sect2><h3 id=_certificaten_gebruiken_een_voorbeeld>15.8.2. Certificaten gebruiken: een voorbeeld<a class=anchor href=#_certificaten_gebruiken_een_voorbeeld></a></h3><div class=paragraph><p>En wat kunnen deze bestanden? Een prima toepassing zou het versleutelen van verbindingen naar de SendmailMTA kunnen zijn. Daardoor zouden gebruikers niet langer platte tekst hoeven te autenticeren om mail te sturen via de lokale MTA.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Dit is niet de best denkbare toepassing omdat sommige MUA’s de gebruiker een foutmelding geven als ze het certificaat niet lokaal geïnstalleerd hebben. De documentatie bij de software geeft meer informatie over het installeren van certificaten.</p></div></td></tr></tbody></table></div><div class=paragraph><p>De volgende regels moeten opgenomen worden in het lokale <span class=filename>.mc</span> bestand:</p></div><div class="literalblock programlisting"><div class=content><pre>dnl SSL Options
define(`confCACERT_PATH&#39;,`/etc/certs&#39;)dnl
define(`confCACERT&#39;,`/etc/certs/new.crt&#39;)dnl
define(`confSERVER_CERT&#39;,`/etc/certs/new.crt&#39;)dnl
define(`confSERVER_KEY&#39;,`/etc/certs/myca.key&#39;)dnl
define(`confTLS_SRV_OPTIONS&#39;, `V&#39;)dnl</pre></div></div><div class=paragraph><p><span class=filename>/etc/certs/</span> is de map die gebruikt wordt voor het lokaal opslaan van certificaten en sleutels. De laatste voorwaarde het is opnieuw aanmaken van het lokale <span class=filename>.cf</span> bestand. Dit gaat door eenvoudigweg <code>make install</code> te typen in de map <span class=filename>/etc/mail</span>. Laat dat volgen door <code>make install</code> waardoor de daemon Sendmail herstart zou moeten worden.</p></div><div class=paragraph><p>Als alles goed is gegaan, dan staan er geen foutmeldingen <span class=filename>/var/log/maillog</span> en is Sendmail zichtbaar in de proceslijst.</p></div><div class=paragraph><p>Maak als eenvoudige test een verbinding met de mailserver met <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># telnet example.com 25</span>
Trying 192.0.34.166...
Connected to example.com.
Escape character is <span class=s1>&#39;^]&#39;</span><span class=nb>.</span>
220 example.com ESMTP Sendmail 8.12.10/8.12.10<span class=p>;</span> Tue, 31 Aug 2004 03:41:22 <span class=nt>-0400</span> <span class=o>(</span>EDT<span class=o>)</span>
ehlo example.com
250-example.com Hello example.com <span class=o>[</span>192.0.34.166], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
quit
221 2.0.0 example.com closing connection
Connection closed by foreign host.</code></pre></div></div><div class=paragraph><p>Als de regel "STARTTLS" verschijnt in de uitvoer dan werkt alles correct.</p></div></div></div></div><div class=sect1><h2 id=ipsec>15.9. VPN via IPsec<a class=anchor href=#ipsec></a></h2><div class=sectionbody><div class=paragraph><p>Een VPN opzetten met FreeBSD gateways tussen twee netwerken die gescheiden zijn door Internet.</p></div><div class=sect2><h3 id=_ipsec_begrijpen>15.9.1. IPsec begrijpen<a class=anchor href=#_ipsec_begrijpen></a></h3><div class=paragraph><p>Deze paragraaf is een gids in het proces van het opzetten van IPsec. Voordat IPsec opgezet kan worden dient de lezer bekend te zijn met de concepten die nodig zijn om een aangepaste kernel te bouwen (zie <a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a>).</p></div><div class=paragraph><p><em>IPsec</em> is een protocol dat bovenop de Internet Protocol (IP) laag ligt. Hiermee kunnen twee of meer host op een veilige manier communiceren (vandaar de naam). De FreeBSD IPsec "netwerk wachtrij (stack)" is gebaseerd op de <a href=http://www.kame.net/>KAME</a>-implementatie, die zowel de protocolfamilies IPv4 als de IPv6 ondersteunt.</p></div><div class=paragraph><p>IPsec bestaat uit twee subprotocollen:</p></div><div class=ulist><ul><li><p><em>Encapsulated Security Payload (ESP)</em> beschermt de IP-pakketdata tegen inmenging door een derde partij door de inhoud te versleutelen met symmetrische versleutelingsalgoritmes (zoals Blowfish en 3DES).</p></li><li><p><em>Authentication Header (AH)</em> beschermt de IP-pakketkop tegen inmenging door een derde partij en spoofing door een cryptografische checksum te berekenen en de IP-pakketkopvelden te hashen met een veilige hashfunctie. Hierna wordt een extra kop ingevoegd die de hash bevat zodat de informatie in het pakket geautenticeerd kan worden.</p></li></ul></div><div class=paragraph><p>ESP en AH kunnen samen of apart gebruikt worden, afhankelijk van de omgeving.</p></div><div class=paragraph><p>IPsec kan gebruikt worden om het verkeer tussen twee hosts direct te versleutelen (dat heet <em>Transport Mode</em>) of door "virtuele tunnels" te bouwen tussen twee subnetten die gebruikt kunnen worden voor veilige communicatie tussen twee bedrijfsnetwerken (dat heet <em>Tunnel Mode</em>). De laatste versie staat beter bekend als <em>Virtual Private Network (VPN)</em>. In <a href="https://man.freebsd.org/cgi/man.cgi?query=ipsec&amp;sektion=4&amp;format=html">ipsec(4)</a> staat gedetailleerde informatie over het IPsec subsysteem in FreeBSD.</p></div><div class=paragraph><p>Voor ondersteuning voor IPsec in de kernel zijn de volgende opties nodig in het kernelinstellingenbestand:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>options   IPSEC        IP-beveiliging
device    crypto</code></pre></div></div><div class=paragraph><p>Als er ook fouten in IPsec (debugging) verwijderd moeten kunnen worden, dan is de volgende optie ook nodig:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>options   IPSEC_DEBUG  debug voor IP-beveiliging</code></pre></div></div></div><div class=sect2><h3 id=_het_probleem>15.9.2. Het probleem<a class=anchor href=#_het_probleem></a></h3><div class=paragraph><p>Er bestaat geen standaard voor wat een VPN is. VPN’s kunnen opgezet worden met behulp van een aantal verschillende technologieën die allemaal hun eigen voor- en nadelen hebben. Dit onderdeel bevat een scenario en de strategieën die gebruikt kunnen worden voor het implementeren van een VPN in iedere situatie.</p></div></div><div class=sect2><h3 id=_het_scenario_twee_netwerken_de_ene_thuisgebaseerd_en_de_andere_bedrijfgebaseerd_beide_zijn_verbonden_met_het_internet_en_er_wordt_van_verwacht_dat_ze_zich_via_dit_vpn_als_één_gedragen>15.9.3. Het scenario: twee netwerken, de ene thuisgebaseerd en de andere bedrijfgebaseerd. Beide zijn verbonden met het Internet, en er wordt van verwacht dat ze zich via dit VPN als één gedragen.<a class=anchor href=#_het_scenario_twee_netwerken_de_ene_thuisgebaseerd_en_de_andere_bedrijfgebaseerd_beide_zijn_verbonden_met_het_internet_en_er_wordt_van_verwacht_dat_ze_zich_via_dit_vpn_als_één_gedragen></a></h3><div class=paragraph><p>Dit is het uitgangspunt:</p></div><div class=ulist><ul><li><p>Er zijn tenminste twee locaties</p></li><li><p>Beide locaties gebruiken IP</p></li><li><p>Beide locaties hebben een Internetverbinding via een gateway waarop FreeBSD draait.</p></li><li><p>De gateway op ieder netwerk heeft tenminste één publiek IP-adres.</p></li><li><p>De interne adressen van de twee netwerken mogen publieke of private IP-adressen zijn, dat maakt niet uit. Ze mogen alleen niet botsen; bijvoorbeeld: ze mogen niet beide <code>192.168.1.x</code> gebruiken.</p></li></ul></div></div><div class=sect2><h3 id=_ipsec_configureren_op_freebsd>15.9.4. IPsec configureren op FreeBSD<a class=anchor href=#_ipsec_configureren_op_freebsd></a></h3><div class=paragraph><p>Om te beginnen moet de port <a class=package href=https://cgit.freebsd.org/ports/tree/security/ipsec-tools/>security/ipsec-tools</a> geïnstalleerd zijn vanuit de Portscollectie. Dit softwarepakket van een derde partij biedt een aantal applicaties die helpen de configuratie te ondersteunen.</p></div><div class=paragraph><p>De volgende benodigdheid is om twee <a href="https://man.freebsd.org/cgi/man.cgi?query=gif&amp;sektion=4&amp;format=html">gif(4)</a> pseudo-apparaten aan te maken om de pakketten te tunnelen en beide netwerken in staat stellen om op een juiste wijze te communiceren. Draai als <code>root</code> de volgende commando’s, waarbij de items <em>intern</em> en <em>extern</em> met de echte interne en externe gateways:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig gif0 create</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig gif0 intern1 intern2</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig gif0 tunnel extern1 extern2</span></code></pre></div></div><div class=paragraph><p>Het publieke IP van het LAN van de onderneming is bijvoorbeeld <code>172.16.5.4</code> en het heeft een privaat IP`10.246.38.1`. Het publieke IP van het LAN van huis is <code>192.168.1.12</code> met een intern privaat IP`10.0.0.5`.</p></div><div class=paragraph><p>Dit kan verwarrend lijken, dus bekijk de volgende voorbeeld van het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a>:</p></div><div class="literalblock programlisting"><div class=content><pre>Gateway 1:

gif0: flags=8051 mtu 1280
tunnel inet 172.16.5.4 --&gt; 192.168.1.12
inet6 fe80::2e0:81ff:fe02:5881%gif0 prefixlen 64 scopeid 0x6
inet 10.246.38.1 --&gt; 10.0.0.5 netmask 0xffffff00

Gateway 2:

gif0: flags=8051 mtu 1280
tunnel inet 192.168.1.12 --&gt; 172.16.5.4
inet 10.0.0.5 --&gt; 10.246.38.1 netmask 0xffffff00
inet6 fe80::250:bfff:fe3a:c1f%gif0 prefixlen 64 scopeid 0x4</pre></div></div><div class=paragraph><p>Eenmaal compleet zouden beide private IP’s bereikbaar moeten zijn met het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> zoals de volgende uitvoer suggereert:</p></div><div class="literalblock programlisting"><div class=content><pre>priv-net# ping 10.0.0.5
PING 10.0.0.5 (10.0.0.5): 56 data bytes
64 bytes from 10.0.0.5: icmp_seq=0 ttl=64 time=42.786 ms
64 bytes from 10.0.0.5: icmp_seq=1 ttl=64 time=19.255 ms
64 bytes from 10.0.0.5: icmp_seq=2 ttl=64 time=20.440 ms
64 bytes from 10.0.0.5: icmp_seq=3 ttl=64 time=21.036 ms
--- 10.0.0.5 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 19.255/25.879/42.786/9.782 ms

corp-net# ping 10.246.38.1
PING 10.246.38.1 (10.246.38.1): 56 data bytes
64 bytes from 10.246.38.1: icmp_seq=0 ttl=64 time=28.106 ms
64 bytes from 10.246.38.1: icmp_seq=1 ttl=64 time=42.917 ms
64 bytes from 10.246.38.1: icmp_seq=2 ttl=64 time=127.525 ms
64 bytes from 10.246.38.1: icmp_seq=3 ttl=64 time=119.896 ms
64 bytes from 10.246.38.1: icmp_seq=4 ttl=64 time=154.524 ms
--- 10.246.38.1 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 28.106/94.594/154.524/49.814 ms</pre></div></div><div class=paragraph><p>Zoals verwacht hebben beide kanten de mogelijkheid om ICMP-pakketten te verzenden en te ontvangen van de privaat geconfigureerde adressen. Vervolgens dient aan beide gateways verteld te worden hoe pakketten te routeren om op de juiste wijze verkeer van een van de netwerken te versturen. Het volgende commando doet dit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># corp-net# route add 10.0.0.0 10.0.0.5 255.255.255.0</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># corp-net# route add net 10.0.0.0: gateway 10.0.0.5</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># priv-net# route add 10.246.38.0 10.246.38.1 255.255.255.0</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># priv-net# route add host 10.246.38.0: gateway 10.246.38.1</span></code></pre></div></div><div class=paragraph><p>Op dit moment dienen interne machines bereikbaar te zijn vanuit elke gateway alsook als vanuit machines achter de gateways. Dit is eenvoudig te zien aan het volgende voorbeeld:</p></div><div class="literalblock programlisting"><div class=content><pre>corp-net# ping 10.0.0.8
PING 10.0.0.8 (10.0.0.8): 56 data bytes
64 bytes from 10.0.0.8: icmp_seq=0 ttl=63 time=92.391 ms
64 bytes from 10.0.0.8: icmp_seq=1 ttl=63 time=21.870 ms
64 bytes from 10.0.0.8: icmp_seq=2 ttl=63 time=198.022 ms
64 bytes from 10.0.0.8: icmp_seq=3 ttl=63 time=22.241 ms
64 bytes from 10.0.0.8: icmp_seq=4 ttl=63 time=174.705 ms
--- 10.0.0.8 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 21.870/101.846/198.022/74.001 ms

priv-net# ping 10.246.38.107
PING 10.246.38.1 (10.246.38.107): 56 data bytes
64 bytes from 10.246.38.107: icmp_seq=0 ttl=64 time=53.491 ms
64 bytes from 10.246.38.107: icmp_seq=1 ttl=64 time=23.395 ms
64 bytes from 10.246.38.107: icmp_seq=2 ttl=64 time=23.865 ms
64 bytes from 10.246.38.107: icmp_seq=3 ttl=64 time=21.145 ms
64 bytes from 10.246.38.107: icmp_seq=4 ttl=64 time=36.708 ms
--- 10.246.38.107 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 21.145/31.721/53.491/12.179 ms</pre></div></div><div class=paragraph><p>De tunnels opzetten is het eenvoudige deel. Het configureren van een veilige verbinding is een veel diepgaander proces. De volgende configuratie gebruikt vooraf gedeelde (PSK) RSA-sleutels. Afgezien van de IP-adressen zijn beide bestanden <span class=filename>/usr/local/etc/racoon/racoon.conf</span> identiek en zien ze er ongeveer als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>path    pre_shared_key  &#34;/usr/lcoal/etc/racoon/psk.txt&#34;; # plaats van bestand vooraf gedeelde sleutels
log     debug;  # verbositeitsinstelling van loggen: op &#39;notify&#39; zetten als testen en debuggen klaar is

padding # opties moeten niet veranderd worden
{
        maximum_length  20;
        randomize       off;
        strict_check    off;
        exclusive_tail  off;
}

timer   # timingopties, veranderen indien nodig
{
        counter         5;
        interval        20 sec;
        persend         1;
#       natt_keepalive  15 sec;
        phase1          30 sec;
        phase2          15 sec;
}

listen  # adres [poort] waarop racoon luistert
{
        isakmp          172.16.5.4 [500];
        isakmp_natt     172.16.5.4 [4500];
}

remote  192.168.1.12 [500]
{
        exchange_mode   main,aggressive;
        doi             ipsec_doi;
        situation       identity_only;
        my_identifier   address 172.16.5.4;
        peers_identifier        address 192.168.1.12;
        lifetime        time 8 hour;
        passive         off;
        proposal_check  obey;
#       nat_traversal   off;
        generate_policy off;

                        proposal {
                                encryption_algorithm    blowfish;
                                hash_algorithm          md5;
                                authentication_method   pre_shared_key;
                                lifetime time           30 sec;
                                dh_group                1;
                        }
}

sainfo  (address 10.246.38.0/24 any address 10.0.0.0/24 any)   # adres $netwerk/$netmasker $type adres $netwerk/$netmasker $type ( $type is any of esp)
{
        pfs_group       1;
        lifetime        time    3600 sec;
        encryption_algorithm    blowfish,3des,des;
        authentication_algorithm        hmac_md5,hmac_sha1;
        compression_algorithm   deflate;
}</pre></div></div><div class=paragraph><p>Het uitleggen van elke beschikbare optie, samen met diegenen in deze voorbeelden valt buiten het bereik van dit document. De configuratiehandleiding van racoon staat vol relevante informatie.</p></div><div class=paragraph><p>De SPD-beleiden moeten geconfigureerd worden zodat FreeBSD en racoon in staat zijn om netwerkverkeer tussen hosts te versleutelen en te ontsleutelen.</p></div><div class=paragraph><p>Deze taak kan met een eenvoudig shellscript zoals het volgende dat op de gateway van de onderneming staat worden uitgevoerd. Dit bestand wordt gebruikt tijdens de systeeminitialisatie en dient bewaard te worden als <span class=filename>/usr/local/etc/racoon/setkey.conf</span>.</p></div><div class="literalblock programlisting"><div class=content><pre>flush;
spdflush;
# Naar het thuisnetwerk
spdadd 10.246.38.0/24 10.0.0.0/24 any -P out ipsec esp/tunnel/172.16.5.4-192.168.1.12/use;
spdadd 10.0.0.0/24 10.246.38.0/24 any -P in esp/tunnel/192.168.1.12-172.16.5.4/use;</pre></div></div><div class=paragraph><p>Eenmaal aanwezig kan racoon op beide gateways gestart worden met het volgende commando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/racoon -F -f /usr/local/etc/racoon/racoon.conf -l /var/log/racoon.log</span></code></pre></div></div><div class=paragraph><p>De uitvoer moet ongeveer gelijk zijn aan de volgende:</p></div><div class="literalblock programlisting"><div class=content><pre>corp-net# /usr/local/sbin/racoon -F -f /usr/local/etc/racoon/racoon.conf
Foreground mode.
2006-01-30 01:35:47: INFO: begin Identity Protection mode.
2006-01-30 01:35:48: INFO: received Vendor ID: KAME/racoon
2006-01-30 01:35:55: INFO: received Vendor ID: KAME/racoon
2006-01-30 01:36:04: INFO: ISAKMP-SA established 172.16.5.4[500]-192.168.1.12[500] spi:623b9b3bd2492452:7deab82d54ff704a
2006-01-30 01:36:05: INFO: initiate new phase 2 negotiation: 172.16.5.4[0]192.168.1.12[0]
2006-01-30 01:36:09: INFO: IPsec-SA established: ESP/Tunnel 192.168.1.12[0]-&gt;172.16.5.4[0] spi=28496098(0x1b2d0e2)
2006-01-30 01:36:09: INFO: IPsec-SA established: ESP/Tunnel 172.16.5.4[0]-&gt;192.168.1.2[0] spi=47784998(0x2d92426)
2006-01-30 01:36:13: INFO: respond new phase 2 negotiation: 172.16.5.4[0]192.168.1.12[0]
2006-01-30 01:36:18: INFO: IPsec-SA established: ESP/Tunnel 192.168.1.12[0]-&gt;172.16.5.4[0] spi=124397467(0x76a279b)
2006-01-30 01:36:18: INFO: IPsec-SA established: ESP/Tunnel 172.16.5.4[0]-&gt;192.168.1.12[0] spi=175852902(0xa7b4d66)</pre></div></div><div class=paragraph><p>Om er zeker van te zijn dat de tunnel correct werkt, dient naar een ander console geschakeld te worden en <a href="https://man.freebsd.org/cgi/man.cgi?query=tcpdump&amp;sektion=1&amp;format=html">tcpdump(1)</a> gebruikt te worden om hiermee het netwerkverkeer te bekijken. Vervang <code>em0</code> door de netwerkinterfacekaart indien nodig.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tcpdump -i em0 host 172.16.5.4 and dst 192.168.1.12</span></code></pre></div></div><div class=paragraph><p>Gegevens lijkend op de volgende zouden op het console moeten verschijnen. Indien niet, dan is er iets aan de hand, en is het nodig om de teruggegeven gegevens te debuggen.</p></div><div class="literalblock programlisting"><div class=content><pre>01:47:32.021683 IP corporatenetwork.com &gt; 192.168.1.12.privatenetwork.com: ESP(spi=0x02acbf9f,seq=0xa)
01:47:33.022442 IP corporatenetwork.com &gt; 192.168.1.12.privatenetwork.com: ESP(spi=0x02acbf9f,seq=0xb)
01:47:34.024218 IP corporatenetwork.com &gt; 192.168.1.12.privatenetwork.com: ESP(spi=0x02acbf9f,seq=0xc)</pre></div></div><div class=paragraph><p>Op dit punt zouden beide netwerken beschikbaar moeten zijn en deel lijken van hetzelfde netwerk. Waarschijnlijk zijn beide netwerken beschermt door een firewall, zoals het hoort. Om verkeer tussen hen toe te staan, moeten er regels worden toegevoegd om pakketten heen en terug door te laten. Voeg voor de firewall <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a> de volgende regels toe aan het instellingenbestand van de firewall:</p></div><div class="literalblock programlisting"><div class=content><pre>ipfw add 00201 allow log esp from any to any
ipfw add 00202 allow log ah from any to any
ipfw add 00203 allow log ipencap from any to any
ipfw add 00204 allow log udp from any 500 to any</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Afhankelijk van de huidige hostconfiguratie dienen de regelnummers gewijzigd te worden.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Voor gebruikers van <a href="https://man.freebsd.org/cgi/man.cgi?query=pf&amp;sektion=4&amp;format=html">pf(4)</a> of <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> zouden de volgende regels moeten volstaan:</p></div><div class="literalblock programlisting"><div class=content><pre>pass in quick proto esp form any to any
pass in quick proto ah from any to any
pass in quick proto ipencap from any to any
pass in quick proto udp form any port = 500 to any port = 500
pass in quick on gif0 from any to any
pass out quick proto esp from any to any
pass out quick proto ah from any to any
pass out quick ptoto ipencap from any to any
pass out quick proto udp from any port = 500 to any port = 500
pass out quick on gif0 from any to any</pre></div></div><div class=paragraph><p>Ter afsluiting, voeg de volgende regels toe aan <span class=filename>/etc/rc.conf</span> om de machine toe te staan om ondersteuning voor het VPN te starten tijdens de systeeminitialisatie:</p></div><div class="literalblock programlisting"><div class=content><pre>ipsec_enable=&#34;YES&#34;
ipsec_program=&#34;/usr/local/sbin/setkey&#34;
ipsec_file=&#34;/usr/local/etc/racoon/setkey.conf&#34; # staat toe om spd-beleiden tijdens het opstarten op te zetten
racoon_enable=&#34;yes&#34;</pre></div></div></div></div></div><div class=sect1><h2 id=openssh>15.10. OpenSSH<a class=anchor href=#openssh></a></h2><div class=sectionbody><div class=paragraph><p>OpenSSH is een groep netwerkverbindingsprogramma’s waarmee computers via het netwerk veilig benaderd kunnen worden. Het kan ingezet worden als een directe vervanger van <code>rlogin</code>, <code>rsh</code>, <code>rcp</code> en <code>telnet</code>. Daarnaast kunnen TCP/IP-verbindingen veilig getunneld of geforward worden door SSH. OpenSSH versleutelt al het verkeer om afluisteren, het stelen van een verbinding en andere netwerkaanvallen effectief te voorkomen.</p></div><div class=paragraph><p>OpenSSH wordt onderhouden door het OpenBSD project en is gebaseerd op SSH v1.2.12 met alle recente bugfixes en updates. Het is compatibel met beide protocollen SSH 1 en 2.</p></div><div class=sect2><h3 id=_voordelen_van_gebruik_van_openssh>15.10.1. Voordelen van gebruik van OpenSSH<a class=anchor href=#_voordelen_van_gebruik_van_openssh></a></h3><div class=paragraph><p>Als gewoonlijk <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> of <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a> wordt gebruikt, wordt de data in platte tekst en niet versleuteld verzonden. Netwerksnuffelaars die ergens tussen de cliënt en de server meeluisteren, kunnen een gebruikersnaam en wachtwoord stelen en zien welke gegevens er worden overgezonden tijdens een sessie. OpenSSH biedt een verscheidenheid aan autenticatie en versleutelingsmethoden die het voorgaande voorkomen.</p></div></div><div class=sect2><h3 id=_sshd_inschakelen>15.10.2. sshd inschakelen<a class=anchor href=#_sshd_inschakelen></a></h3><div class=paragraph><p>De sshd is een optie die wordt aangeboden tijdens een <code>Standard</code>-installatie van FreeBSD. sshd is ingeschakeld als de volgende regel voorkomt in <span class=filename>rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>sshd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Hierdoor wordt <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> geladen, het daemonprogramma voor OpenSSH, als het systeem de volgende keer opstart. Als alternatief is het mogelijk om <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> te gebruiken om OpenSSH te starten:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd start</span></code></pre></div></div></div><div class=sect2><h3 id=_ssh_cliënt>15.10.3. SSH-cliënt<a class=anchor href=#_ssh_cliënt></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> werkt net zoals <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ssh user@example.com</span>
Host key not found from the list of known hosts.
Are you sure you want to <span class=k>continue </span>connecting <span class=o>(</span><span class=nb>yes</span>/no<span class=o>)</span>? <span class=nb>yes
</span>Host <span class=s1>&#39;example.com&#39;</span> added to the list of known hosts.
user@example.com<span class=s1>&#39;s password: *******</span></code></pre></div></div><div class=paragraph><p>Het aanmelden gaat nu net zoals het zou gaan als wanneer er een sessie gestart zou worden met <code>rlogin</code> of <code>telnet</code>. SSH maakt gebruik van een systeem met vingerafdrukken als sleutels voor het vaststellen met welke server verbinding wordt gemaakt op het moment dat de cliënt verbinding zoekt. De gebruiker krijgt alleen de eerste keer dat verbinding wordt gezocht met de server een vraag waarop <code>yes</code> geantwoord dient te worden. Bij volgende pogingen om aan te melden wordt de vingerafdruksleutel vergeleken met de sleutel die is opgeslagen. De SSH-cliënt alarmeert de gebruiker als de opgeslagen vingerafdruk sleutel anders is dan de sleutel die de server meldt. De vingerafdrukken worden opgeslagen in <span class=filename>~/.ssh/known_hosts</span> of in <span class=filename>~/.ssh/known_hosts2</span> voor SSH v2 vingerafdrukken.</p></div><div class=paragraph><p>Recente OpenSSH servers staan standaard ingesteld om alleen SSH v2 connecties toe te staan. De cliënt gebruikt versie 2 als dat mogelijk is en valt anders terug op versie 1. De cliënt kan ook gedwongen worden om een van de twee protocollen te gebruiken door de optie <code>-1</code> of <code>-2</code> voor respectievelijk versie 1 en versie 2 aan te geven. De mogelijkheid versie 1 te gebruiken blijft in de cliënt bestaan om compatibiliteit met oudere versies te behouden.</p></div></div><div class=sect2><h3 id=_veilig_kopiëren>15.10.4. Veilig kopiëren<a class=anchor href=#_veilig_kopiëren></a></h3><div class=paragraph><p>Het commando <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> (secure copy) werkt gelijk aan <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a>. Het kopieert een bestand van of naar een andere machine, maar doet dat veilig.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c>#  scp user@example.com:/COPYRIGHT COPYRIGHT</span>
user@example.com<span class=s1>&#39;s password: *******
COPYRIGHT            100% |*****************************|  4735
00:00
#</span></code></pre></div></div><div class=paragraph><p>Omdat de vingerafdruk al is opgeslagen voor deze host in het vorige voorbeeld, is die al geverifieerd als <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> gebruik wordt.</p></div><div class=paragraph><p>De argumenten die aan <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> gegeven worden zijn vrijwel gelijk aan die voor <a href="https://man.freebsd.org/cgi/man.cgi?query=cp&amp;sektion=1&amp;format=html">cp(1)</a> met het bestand of de bestanden als het eerste argument en de bestemming als het tweede. Omdat het bestand over het netwerk gaat, door SSH, hebben een of meer van de bestandsargumenten de vorm <code>user@host:&lt;path_to_remote_file></code>.</p></div></div><div class=sect2><h3 id=_instellen>15.10.5. Instellen<a class=anchor href=#_instellen></a></h3><div class=paragraph><p>Het instellingenbestand dat voor het hele systeem geldt voor zowel de OpenSSH daemon als cliënt staat in de map <span class=filename>/etc/ssh</span>.</p></div><div class=paragraph><p><span class=filename>ssh_config</span> bevat de instellingen voor de cliënt en <span class=filename>sshd_config</span> bevat ze voor de daemon.</p></div><div class=paragraph><p>Daarnaast bieden het <code>sshd_program</code> (standaard <span class=filename>/usr/sbin/sshd</span>) en <code>sshd_flags</code><span class=filename>rc.conf</span> opties nog meer mogelijkheden voor instellingen.</p></div></div><div class=sect2><h3 id=security-ssh-keygen>15.10.6. ssh-keygen<a class=anchor href=#security-ssh-keygen></a></h3><div class=paragraph><p>In plaats van het gebruik van wachtwoorden kan <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> gebruikt worden om DSA en RSA sleutels te maken om een gebruiker te autenticeren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh-keygen <span class=nt>-t</span> dsa
Generating public/private dsa key pair.
Enter file <span class=k>in </span>which to save the key <span class=o>(</span>/home/user/.ssh/id_dsa<span class=o>)</span>:
Created directory <span class=s1>&#39;/home/user/.ssh&#39;</span><span class=nb>.</span>
Enter passphrase <span class=o>(</span>empty <span class=k>for </span>no passphrase<span class=o>)</span>:
Enter same passphrase again:
Your identification has been saved <span class=k>in</span> /home/user/.ssh/id_dsa.
Your public key has been saved <span class=k>in</span> /home/user/.ssh/id_dsa.pub.
The key fingerprint is:
bb:48:db:f2:93:57:80:b6:aa:bc:f5:d5:ba:8f:79:17 user@host.example.com</code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> maakt een publiek en privaat sleutelpaar aan dat gebruikt kan worden voor autenticatie. De private sleutel staat opgeslagen in <span class=filename>~/.ssh/id_dsa</span> of <span class=filename>~/.ssh/id_rsa</span> en de publieke sleutel staat in <span class=filename>~/.ssh/id_dsa.pub</span> of <span class=filename>~/.ssh/id_rsa.pub</span> voor respectievelijk sleuteltypen DSA en RSA. De publieke sleutel moet voor beide RSA- of DSA-sleutels in het bestand <span class=filename>~/.ssh/authorized_keys</span> van de andere machine staan om dit te laten werken.</p></div><div class=paragraph><p>Nu is het mogelijk een verbinding te maken met een andere machine die gebaseerd is op SSH sleutels in plaats van op wachtwoorden.</p></div><div class=paragraph><p>Als er een wachtwoordzin is gebruikt bij <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> dan wordt de gebruiker iedere keer dat de private sleutel wordt gebruikt een wachtwoord gevraagd. <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> kan het ongemak van steeds opnieuw een lange wachtwoordzin moeten ingeven verlichten en wordt beschreven in het onderdeel <a href=#security-ssh-agent>ssh-agent en ssh-add</a>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Afhankelijk van de gebruikte versie van OpenSSH kunnen opties en bestanden verschillen. Het is verstandig de handleiding <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> te raadplegen.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=security-ssh-agent>15.10.7. ssh-agent en ssh-add<a class=anchor href=#security-ssh-agent></a></h3><div class=paragraph><p>De hulpprogramma’s <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> bieden de mogelijkheid om SSH in het geheugen te laden zodat niet iedere keer de wachtwoordzin ingegeven hoeft te worden.</p></div><div class=paragraph><p>Het hulpprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> handelt de autenticatie af voor de geheime sleutels die erin geladen zijn. <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> wordt gebruikt om andere programma’s te starten. Bij eenvoudig gebruik kan er een shell mee gestart worden of meer complex een schermbeheerprogramma.</p></div><div class=paragraph><p>Voordat <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> in een shell gebruikt kan worden dient het eerst gestart te worden met een shell als argument. Daarna kan de identiteit toegevoegd worden daar <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> aan te roepen en de wachtwoordzin voor de geheime sleutel op te geven. Als deze stappen zijn voltooid kan een gebruiker met <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> naar iedere host waar de corresponderende publieke sleutel is geïnstalleerd:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh-agent csh
% ssh-add
Enter passphrase <span class=k>for</span> /home/user/.ssh/id_dsa:
Identity added: /home/user/.ssh/id_dsa <span class=o>(</span>/home/user/.ssh/id_dsa<span class=o>)</span>
%</code></pre></div></div><div class=paragraph><p>Om <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> te gebruiken in X11 dient er een verwijzing naar <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> in <span class=filename>~/.xinitrc</span> te staan. Dan zijn de diensten van <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> beschikbaar voor alle programma’s die in X11 gestart worden. Een <span class=filename>~/.xinitrc</span> zou er als volgt uit kunnen zien:</p></div><div class="literalblock programlisting"><div class=content><pre>exec ssh-agent startxfce4</pre></div></div><div class=paragraph><p>Hiermee wordt <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> gestart die op zijn beurt XFCE start, iedere keer dat X11 start. Als dat is gebeurd en X11 is herstart zodat de wijzigingen actief zijn, dan kan eenvoudigweg <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> gestart worden om alle beschikbare SSH sleutels te laden.</p></div></div><div class=sect2><h3 id=security-ssh-tunneling>15.10.8. SSH tunnels<a class=anchor href=#security-ssh-tunneling></a></h3><div class=paragraph><p>OpenSSH kan een tunnel maken waarin een ander protocol ingepakt kan worden zodat er een versleutelde sessie ontstaat.</p></div><div class=paragraph><p>Het volgende commando geeft <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> aan dat er een tunnel voor telnet gemaakt moet worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 5023:localhost:23 user@foo.example.com
%</code></pre></div></div><div class=paragraph><p>Aan het <code>ssh</code> commando worden de volgende opties meegegeven:</p></div><div class=dlist><dl><dt class=hdlist1><code>-2</code></dt><dd><p>Dit dwingt <code>ssh</code> om versie 2 van het protocol te gebruiken. Gebruik van deze optie wordt afgeraden als er verbinding wordt gemaakt met oudere SSH servers.</p></dd><dt class=hdlist1><code>-N</code></dt><dd><p>Dit geeft aan dat er geen commando volgt, maar dat er een tunnel opgezet moet worden. Als deze optie niet aanwezig was, zou <code>ssh</code> een normale sessie starten.</p></dd><dt class=hdlist1><code>-f</code></dt><dd><p>Dit dwingt <code>ssh</code> om in de achtergrond te draaien.</p></dd><dt class=hdlist1><code>-L</code></dt><dd><p>Dit geeft aan dat de lokaal een tunnel wordt gemaakt in de vorm <em>lokale_poort:netwerk_host:netwerk_poort</em>.</p></dd><dt class=hdlist1><code>user@foo.example.com</code></dt><dd><p>Wijst naar een gebruiker op de SSH server op het netwerk.</p></dd></dl></div><div class=paragraph><p>Een SSH tunnel werkt doordat een luistersocket wordt gemaakt op <code>localhost</code> op de aangegeven poort. Die stuurt dan iedere ontvangen verbinding op de lokale host/poort via de SSH verbinding door naar de aangegeven host en poort op het netwerk.</p></div><div class=paragraph><p>In het voorbeeld wordt poort <em>5023</em> op <code>localhost</code> doorgestuurd naar poort <em>23</em> op <code>localhost</code> van de machine op het netwerk. Omdat <code><em>23</em></code> telnet is, zou dit een veilige telnet verbinding opleveren door een SSH tunnel.</p></div><div class=paragraph><p>Dit kan gebruikt worden om ieder willekeurig onveilig TCP protocol in te pakken als SMTP, POP3, FTP, etc.</p></div><div class=exampleblock><div class=title>Voorbeeld 1. SSH gebruiken om een veilige tunnel te maken voor SMTP</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 5025:localhost:25 user@mailserver.example.com
user@mailserver.example.com<span class=s1>&#39;s password: *****
% telnet localhost 5025
Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;</span>^]<span class=s1>&#39;.
220 mailserver.example.com ESMTP</span></code></pre></div></div><div class=paragraph><p>Dit kan samen met een <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> en extra gebruikersaccounts gebruikt worden om een min of meer naadloze en eenvoudige SSH tunnelomgeving te maken. In plaats van wachtwoorden kunnen sleutels gebruikt worden en de tunnels kunnen in de omgeving van een aparte gebruiker draaien.</p></div></div></div><div class=sect3><h4 id=_praktische_voorbeelden_van_een_ssh_tunnel>15.10.8.1. Praktische voorbeelden van een SSH tunnel<a class=anchor href=#_praktische_voorbeelden_van_een_ssh_tunnel></a></h4><div class=sect4><h5 id=_veilige_toegang_tot_een_pop3_server>15.10.8.1.1. Veilige toegang tot een POP3 server<a class=anchor href=#_veilige_toegang_tot_een_pop3_server></a></h5><div class=paragraph><p>Op het werk staat een SSH server die verbindingen van buitenaf toestaat. Op hetzelfde netwerk op kantoor staat een mailserver waarop POP3 draait. Het netwerk of het netwerkpad tussen de locatie op Internet en kantoor is wellicht niet helemaal te vertrouwen. Om deze reden dient de mailserver op een veilige manier benaderd te worden. De oplossing is een SSH verbinding opzetten naar de SSH server op kantoor en dan door de tunnel heen een verbinding opzetten met de mailserver.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 2110:mail.example.com:110 user@ssh-server.example.com
user@ssh-server.example.com<span class=s1>&#39;s password:
% ******</span></code></pre></div></div><div class=paragraph><p>Als de tunnel eenmaal draait, dan kan de mailcliënt naar <code>localhost</code> poort 2110 gewezen worden. Alle verbinding naar die poort worden veilig doorgestuurd door de tunnel naar <code>mail.example.com</code>.</p></div></div><div class=sect4><h5 id=_een_draconische_firewall_omzeilen>15.10.8.1.2. Een draconische firewall omzeilen<a class=anchor href=#_een_draconische_firewall_omzeilen></a></h5><div class=paragraph><p>Sommige netwerkbeheerders stellen draconische firewallregels op en filteren niet alleen inkomende verbindingen, maar ook uitgaande. Meestal mag dan alleen maar verbinding gemaakt worden met andere machines op poorten 22 en 80 voor SSH en websurfen.</p></div><div class=paragraph><p>Soms wil een gebruiker dan toch toegang krijgen tot andere (wellicht niet netwerkgerelateerde) diensten, zoals een Ogg Vorbis server om muziek te streamen. Als die Ogg Vorbis server streamt op een andere poort dan 22 of 80, dan kan deze niet bereikt worden.</p></div><div class=paragraph><p>De oplossing ligt in het opzetten van een SSH verbinding naar een machine buiten de firewall en die tunnel te gebruiken om bij de Ogg Vorbis server te komen.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 2110:mail.example.com:110 user@ssh-server.example.com
user@ssh-server.example.com<span class=s1>&#39;s password: ******</span></code></pre></div></div><div class=paragraph><p>De streamingcliënt kan nu gewezen worden naar <code>localhost</code> poort 8888 vanwaar er wordt doorverwezen naar <code>music.example.com</code> poort 8000 en zo wordt de firewall succesvol ontwerken.</p></div></div></div></div><div class=sect2><h3 id=_de_optie_allowusers>15.10.9. De optie <code>AllowUsers</code><a class=anchor href=#_de_optie_allowusers></a></h3><div class=paragraph><p>Vaak is het verstandig om beperkingen aan te brengen op het gebied van welke gebruikers kunnen aanmelden en van waar. De optie <code>AllowUsers</code> biedt deze mogelijkheid. Om bijvoorbeeld alleen <code>root</code> toe te staan zich aan te melden van <code>192.168.1.32</code>, kan iets als de volgende regel worden opgenomen in het bestand <span class=filename>/etc/ssh/sshd_config</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>AllowUsers root@192.168.1.32</pre></div></div><div class=paragraph><p>Om de gebruiker <code>admin</code> het recht te geven zich van overal aan te melden hoeft alleen de gebruikersnaam vermeld te worden:</p></div><div class="literalblock programlisting"><div class=content><pre>AllowUsers admin</pre></div></div><div class=paragraph><p>Meerdere gebruikers met rechten of beperkingen horen op dezelfde regel te staan:</p></div><div class="literalblock programlisting"><div class=content><pre>AllowUsers root@192.168.1.32 admin</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Het is van belang dat iedere gebruiker die zich moet kunnen aanmelden wordt genoemd. De overige gebruikers worden buitengesloten.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Nadat er wijzigingen zijn gemaakt aan <span class=filename>/etc/ssh/sshd_config</span> dienen de bestanden in <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> geladen te worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service sshd reload</span></code></pre></div></div></div><div class=sect2><h3 id=_meer_informatie>15.10.10. Meer informatie<a class=anchor href=#_meer_informatie></a></h3><div class=paragraph><p><a href=http://www.openssh.com/>OpenSSH</a></p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh_config&amp;sektion=5&amp;format=html">ssh_config(5)</a></p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=sftp-server&amp;sektion=8&amp;format=html">sftp-server(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd_config&amp;sektion=5&amp;format=html">sshd_config(5)</a></p></div></div></div></div><div class=sect1><h2 id=fs-acl>15.11. Bestandssysteem toegangscontrolelijsten (ACLs)<a class=anchor href=#fs-acl></a></h2><div class=sectionbody><div class=paragraph><p>In combinatie met verbeteringen als snapshots, biedt FreeBSD de veiligheid van Toegangscontrolelijsten voor Bestandssystemen (Access Control Lists, ACLs).</p></div><div class=paragraph><p>Met toegangscontrolelijsten wordt het standaard UNIX® rechtenmodel uitgebreid op een zeer verenigbare (POSIX®.1e) manier. Deze methodes stellen een beheerder in staat om gebruik te maken en voordeel te halen uit een geraffineerder beveiligingsmodel.</p></div><div class=paragraph><p>Om ondersteuning voor ACLs voor bestandssystemen in te schakelen dient het volgende in de kernel gecompileerd te worden:</p></div><div class="literalblock programlisting"><div class=content><pre>options UFS_ACL</pre></div></div><div class=paragraph><p>Als deze optie niet aanwezig is, dan wordt er een waarschuwing weergegeven als er wordt geprobeerd een bestandssysteem aan te koppelen dat gebruik maakt van ACLs. Deze optie is al geactiveerd in de <span class=filename>GENERIC</span> kernel. ACLs zijn afhankelijk van uitgebreide attributen die zijn ingeschakeld op het bestandssysteem. Uitgebreide attributen worden standaard ondersteund in het volgende generatie UNIX® bestandssysteem UFS2.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Er is meer administratieve rompslomp nodig om uitgebreide attributen in te stellen op UFS1 dan op UFS2. De prestaties van uitgebreide attributen zijn op UFS2 ook veel beter. Daarom wordt UFS2 ook meestal aangeraden boven UFS1 bij het gebruik van toegangscontrolelijsten.</p></div></td></tr></tbody></table></div><div class=paragraph><p>ACLs worden ingeschakeld door de beheersvlag <code>acls</code> op het moment van aankoppelen. Dit kan ook in <span class=filename>/etc/fstab</span> staan. De vlag op het moment van aankoppelen kan ook automatisch gezet worden op een persistente wijze met <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> door een superblok in de bestandssysteemkop te wijzigen. In het algemeen wordt de voorkeur gegeven aan de vlag in het superblok om een aantal redenen:</p></div><div class=ulist><ul><li><p>De ACLs vlag op het moment van aankoppelen kan niet gewijzigd worden bij opnieuw aankoppelen (<a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> <code>-u</code>), maar alleen door een volledige <a href="https://man.freebsd.org/cgi/man.cgi?query=umount&amp;sektion=8&amp;format=html">umount(8)</a> en een verse <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a>. Dit betekent dat ACLs niet ingeschakeld kunnen worden op root-bestandssysteem na het opstarten. Het betekent ook dat de aard van een bestandssysteem niet veranderd kan worden als het eenmaal in gebruik is.</p></li><li><p>Het inschakelen van de superblokvlag zorgt ervoor dat het bestandssysteem altijd wordt aangekoppeld met de ACLs ingeschakeld, zelfs als het niet in <span class=filename>fstab</span> staat of als de apparaten van plaats veranderen. Hiermee wordt voorkomen dat het bestandssysteem wordt gebruikt zonder dat ACLs ingeschakeld zijn, wat ervoor zou kunnen zorgen dat ACLs onjuist worden toegepast wat weer kan zorgen voor beveiligingsproblemen.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Wellicht wordt het mogelijk om de ACLs via de vlag in te schakelen zonder een compleet verse <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a>, maar de ontwikkelaars vinden het wenselijk om het per ongeluk zonder ACLs aankoppelen te ontmoedigen, omdat er bijzonder vervelende gevolgen kunnen zijn als ACLs worden ingeschakeld, daarna worden uitgezet en weer worden ingeschakeld zonder dat de uitgebreide attributen worden geschoond. In het algemeen geldt dat als ACLs eenmaal zijn ingeschakeld voor een bestandssysteem, ze niet meer uitgeschakeld moeten worden, omdat de resulterende bestandsbescherming wellicht niet compatibel is met dat wat gebruikers van het systeem nodig hebben en het opnieuw aanzetten van ACLs kan leiden tot het opnieuw koppelen van voorheen bestaande ACLs aan bestanden waarvoor de toegangsrechten sindsdien zijn aangepast, wat kan leiden tot onverwachte situaties.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Bestandssystemen waarvoor ACLs zijn ingeschakeld worden weergegeven met een <code>+</code> (plus) teken als de toegangsrechten worden bekeken:</p></div><div class="literalblock programlisting"><div class=content><pre>drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directory1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directory2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directory3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre></div></div><div class=paragraph><p>Hierboven is te zien dat mappen <span class=filename>directory1</span>, <span class=filename>directory2</span> en <span class=filename>directory3</span> allemaal gebruik maken van ACLs. De map <span class=filename>public_html</span> doet dat niet.</p></div><div class=sect2><h3 id=_gebruik_maken_van_acls>15.11.1. Gebruik maken van ACLs<a class=anchor href=#_gebruik_maken_van_acls></a></h3><div class=paragraph><p>De ACLs van het bestandssysteem kunnen bekeken worden met het hulpprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=getfacl&amp;sektion=1&amp;format=html">getfacl(1)</a>. Om de ACL op het bestand <span class=filename>test</span> te bekijken zou het volgende commando nodig zijn:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% getfacl <span class=nb>test</span>
<span class=c>#file:test</span>
<span class=c>#owner:1001</span>
<span class=c>#group:1001</span>
user::rw-
group::r--
other::r--</code></pre></div></div><div class=paragraph><p>Om de ACL op dit bestand te wijzigen wordt het hulpprogramma <a href="https://man.freebsd.org/cgi/man.cgi?query=setfacl&amp;sektion=1&amp;format=html">setfacl(1)</a> als volgt gebruikt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% setfacl <span class=nt>-k</span> <span class=nb>test</span></code></pre></div></div><div class=paragraph><p>De vlag <code>-k</code> verwijdert alle bestaande ACLs van een bestand of bestandssysteem. De methode die de voorkeur geniet is <code>-b</code> gebruiken omdat die optie de basisvelden die nodig zijn voor het laten werken van de ACLs laat staan.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% setfacl <span class=nt>-m</span> u:trhodes:rwx,group:web:r--,o::--- <span class=nb>test</span></code></pre></div></div><div class=paragraph><p>Bij het commando hierboven, werd de optie <code>-m</code> gebruikt om de standaard ACL aan te passen. Omdat er geen voorgedefinieerde instellingen waren, die waren verwijderd door het commando daarvoor, werden nu de standaardinstellingen hersteld en de rechten die werden aangegeven toegevoegd. Let op dat bij het toevoegen van een gebruiker of een groep die niet bekend is op het systeem een foutmelding <code>Invalid argument</code> wordt geschreven naar <span class=filename>stdout</span>.</p></div></div></div></div><div class=sect1><h2 id=security-portaudit>15.12. Monitoren van beveiligingsproblemen met andere software<a class=anchor href=#security-portaudit></a></h2><div class=sectionbody><div class=paragraph><p>In de afgelopen jaren zijn er in de beveiligingswereld veel vorderingen gemaakt op het gebied van inzicht in kwetsbaarheden. Als er software naast het besturingssysteem wordt geïnstalleerd en ingesteld neemt op vrijwel ieder besturingssysteem het risico op inbraak toe.</p></div><div class=paragraph><p>Inzicht in kwetsbaarheid is een vitale factor in beveiliging en hoewel FreeBSD waarschuwingen publiceert voor het basissysteem, gaat het publiceren van waarschuwingen voor alle overige software de scope van het FreeBSD Project te buiten. Er is een manier om inzicht te krijgen in de kwetsbaarheden voor additionele software en als beheerder gewaarschuwd te worden. Voor dit doel bestaat het FreeBSD hulpprogramma Portaudit.</p></div><div class=paragraph><p>De port <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portaudit/>ports-mgmt/portaudit</a> zoekt naar bekende beveiligingsproblemen in een database die wordt bijgewerkt en onderhouden door het FreeBSD Security Team en portontwikkelaars.</p></div><div class=paragraph><p>Voordat Portaudit gebruikt kan worden dient het geïnstalleerd te worden uit de Portscollectie:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/ports-mgmt/portaudit &amp;&amp; make install clean</span></code></pre></div></div><div class=paragraph><p>Tijdens het installatieproces worden de instellingenbestanden voor <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a> bijgewerkt, waardoor Portaudit uitvoer in de dagelijkse security runs meekomt. Het is van belang dat de emails die aan de emailaccount van <code>root</code> worden gezonden en uit de dagelijkse beveiligingsronde komen ook echt worden gelezen. Er zijn geen verdere instellingen nodig.</p></div><div class=paragraph><p>Na de installatie kan de beheerder de database bijwerken en bekende kwetsbaarheden in geïnstalleerde pakketten bekijken met het volgende commando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portaudit -Fda</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>De database wordt automatisch bijgewerkt tijdens de <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a> run; dus het voorgaande commando is volledig optioneel. Het is alleen nodig om de volgende voorbeelden na te kunnen doen.</p></div></td></tr></tbody></table></div><div class=paragraph><p>De software de uit de Portscollectie is geïnstalleerd kan op elk moment door een beheerder ge-audit worden met:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portaudit -a</span></code></pre></div></div><div class=paragraph><p>Portaudit zal iets als het volgende produceren voor kwetsbare pakketten:</p></div><div class="literalblock programlisting"><div class=content><pre>Affected package: cups-base-1.1.22.0_1
Type of problem: cups-base -- HPGL buffer overflow vulnerability.
Reference: &lt;http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html&gt;

1 problem(s) in your installed packages found.

You are advised to update or deinstall the affected package(s) immediately.</pre></div></div><div class=paragraph><p>Door met een webbrowser naar de aangegeven URL te gaan kan een beheerder meer informatie over de bewust kwetsbaarheid krijgen, waaronder de versies die het betreft, volgens de FreeBSD Port versie en andere websites waarop beveiligingswaarschuwingen te lezen zijn.</p></div><div class=paragraph><p>In het kort is Portaudit een krachtig hulpprogramma dat bijzonder handig is als het wordt gekoppeld aan het gebruik van de port Portupgrade.</p></div></div></div><div class=sect1><h2 id=security-advisories>15.13. FreeBSD beveiligingswaarschuwingen<a class=anchor href=#security-advisories></a></h2><div class=sectionbody><div class=paragraph><p>Net als veel andere kwalitatief goede productiebesturingssystemen publiceert FreeBSD "Beveiligingswaarschuwingen". Deze waarschuwingen worden meestal pas naar de beveiligingslijst gemaild en gedocumenteerd in de Errata als de van toepassing zijnde uitgaven gepatcht zijn. In deze paragraaf wordt toegelicht wat een waarschuwing is, hoe die te begrijpen en welke maatregelen er genomen moeten worden om een systeem bij te werken.</p></div><div class=sect2><h3 id=_hoe_ziet_een_waarschuwing_eruit>15.13.1. Hoe ziet een waarschuwing eruit?<a class=anchor href=#_hoe_ziet_een_waarschuwing_eruit></a></h3><div class=paragraph><p>De FreeBSD beveiligingswaarschuwingen zien er ongeveer uit als die hieronder die van de <a href=https://lists.FreeBSD.org/subscription/freebsd-security-notifications>FreeBSD beveiligingswaarschuwingen mailinglijst</a> mailinglijst komt.</p></div><div class="literalblock programlisting"><div class=content><pre>=============================================================================
FreeBSD-SA-XX:XX.UTIL                                     Security Advisory
                                                          The FreeBSD Project

Topic:          denial of service due to some problem <i class=conum data-value=1></i><b>(1)</b>

Category:       core <i class=conum data-value=2></i><b>(2)</b>
Module:         sys <i class=conum data-value=3></i><b>(3)</b>
Announced:      2003-09-23 <i class=conum data-value=4></i><b>(4)</b>
Credits:        Person <i class=conum data-value=5></i><b>(5)</b>
Affects:        All releases of FreeBSD <i class=conum data-value=6></i><b>(6)</b>
                FreeBSD 4-STABLE prior to the correction date
Corrected:      2003-09-23 16:42:59 UTC (RELENG_4, 4.9-PRERELEASE)
                2003-09-23 20:08:42 UTC (RELENG_5_1, 5.1-RELEASE-p6)
                2003-09-23 20:07:06 UTC (RELENG_5_0, 5.0-RELEASE-p15)
                2003-09-23 16:44:58 UTC (RELENG_4_8, 4.8-RELEASE-p8)
                2003-09-23 16:47:34 UTC (RELENG_4_7, 4.7-RELEASE-p18)
                2003-09-23 16:49:46 UTC (RELENG_4_6, 4.6-RELEASE-p21)
                2003-09-23 16:51:24 UTC (RELENG_4_5, 4.5-RELEASE-p33)
                2003-09-23 16:52:45 UTC (RELENG_4_4, 4.4-RELEASE-p43)
                2003-09-23 16:54:39 UTC (RELENG_4_3, 4.3-RELEASE-p39) <i class=conum data-value=7></i><b>(7)</b>
CVE Name:   CVE-XXXX-XXXX <i class=conum data-value=8></i><b>(8)</b>

For general information regarding FreeBSD Security Advisories,
including descriptions of the fields above, security branches, and the
following sections, please visit
http://www.FreeBSD.org/security/.

I.   Background <i class=conum data-value=9></i><b>(9)</b>

II.  Problem Description <i class=conum data-value=10></i><b>(10)</b>

III. Impact <i class=conum data-value=11></i><b>(11)</b>

IV.  Workaround <i class=conum data-value=12></i><b>(12)</b>

V.   Solution <i class=conum data-value=13></i><b>(13)</b>

VI.  Correction details <i class=conum data-value=14></i><b>(14)</b>

VII. References <i class=conum data-value=15></i><b>(15)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Het veld <code>Topic</code> geeft aan wat precies het probleem is. Het is eigenlijk een inleiding op de beveiligingswaarschuwing en geeft aan welke programma kwetsbaar is.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Het veld <code>Category</code> geeft aan welk onderdeel van het systeem kwetsbaar is. Dat kan een van de onderdelen <code>core</code>, <code>contrib</code> of <code>ports</code> zijn. De categorie <code>core</code> betekent dat de een kerncomponent van het FreeBSD besturingssysteem kwetsbaar is. De categorie <code>contrib</code> betekent dat software die toegevoegd is aan het FreeBSD Project kwetsbaar is, zoals sendmail. Tenslotte geeft de categorie <code>ports</code> aan dat een optionele component uit de Portscollectie kwetsbaar is.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Het veld <code>Module</code> geeft aan waar de component zich bevindt, bijvoorbeeld <code>sys</code>. In dit voorbeeld wordt het duidelijk dat de module <code>sys</code> kwetsbaar is. Hier gaat het dus om een kwetsbaar component die gebruikt wordt in de kernel.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Het veld <code>Announced</code> geeft aan wanneer de beveiligingswaarschuwing gepubliceerd of aangekondigd is. Dit betekent dat het beveiligingsteam heeft bevestigd dat het probleem bestaat en dat er een patch is gecommit in het depot met de broncode van FreeBSD.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>In het veld <code>Credits</code> wordt iemand of een organisatie bedankt die de kwetsbaarheid heeft ontdekt en gerapporteerd.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Het veld <code>Affects</code> geeft aan welke uitgaven van FreeBSD door deze kwetsbaarheid worden getroffen. Voor de kernel kan snel gekeken worden naar de uitvoer van <code>ident</code> voor de betreffende bestanden om te bepalen welke revisie ze hebben. Voor ports is het versienummer te zien in <span class=filename>/var/db/pkg</span>. Als het systeem niet gelijk op loopt met het FreeBSD Subversion-depot en dagelijks herbouwd wordt, dan is de kans groot dat het systeem kwetsbaar is.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Het veld <code>Corrected</code> geeft de datum, tijd en tijdzone aan en de uitgave die is aangepast.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>Gereserveerd voor de identificatie-informatie die gebruikt wordt om kwetsbaarheden in het Common Vulnerabilities Database System op te zoeken.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>Het veld <code>Background</code> geeft meer informatie over wat er precies aan de hand is. Meestal staat hier waarom het programma aanwezig is in FreeBSD, waar het voor gebruikt wordt en hoe het programma is ontstaan.</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>Het veld <code>Problem Description</code> geeft gedetailleerde toelichting op het beveiligingsprobleem. Hier kan informatie bij staat over programmacode die fouten bevat of zelfs hoe het programma gebruikt kan worden om een beveiligingsgat te openen.</td></tr><tr><td><i class=conum data-value=11></i><b>11</b></td><td>Het veld <code>Impact</code> beschrijft welke invloed het probleem kan hebben op het systeem. Dit kan bijvoorbeeld een ontzegging van dienst aanval zijn, gebruikers extra rechten geven of het verkrijgen van supergebruiker toegang voor de aanvaller zijn.</td></tr><tr><td><i class=conum data-value=12></i><b>12</b></td><td>Het veld <code>Workaround</code> geeft aan hoe het mogelijk is het probleem te omzeilen (workaround) in het geval systeembeheerders niet in staat zijn om het systeem bij te werken. Dit zou te maken kunnen hebben met de tijd, beschikbaarheid van het netwerk en een hele lijst met andere redenen. Hoe dan ook, beveiliging dient serieus genomen te worden en een systeem dat kwetsbaar is moet bijgewerkt worden of het gat in de beveiliging moet gedicht worden met de alternatieve oplossing.</td></tr><tr><td><i class=conum data-value=13></i><b>13</b></td><td>Het veld <code>Solution</code> geeft instructies over hoe een systeem aangepast kan worden. Dit is een werkinstructie die getest en gecontroleerd is om een systeem aan te passen en weer veilig werkend te krijgen.</td></tr><tr><td><i class=conum data-value=14></i><b>14</b></td><td>In het veld <code>Correction Details</code> staan de Subversion-takken of uitgavenamen, met de punten veranderd in een liggend streepje. Er staat ook welke revisienummer de aangetaste bestanden binnen een tak hebben.</td></tr><tr><td><i class=conum data-value=15></i><b>15</b></td><td>In het veld <code>References</code> wordt gewoonlijk verwezen naar andere bronnen. Dit kunnen web-URLs, boeken, mailinglijsten en nieuwsgroepen zijn.</td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=security-accounting>15.14. Procesaccounting<a class=anchor href=#security-accounting></a></h2><div class=sectionbody><div class=paragraph><p>Procesaccounting is een beveiligingsmethode die een beheerder in staat stelt om in de gaten te houden welke systeembronnen worden gebruikt, hoe ze over gebruikers verdeeld zijn, systeemmonitoring biedt en op minimalistische wijze het gebruik van commando’s door gebruikers volgt.</p></div><div class=paragraph><p>Deze methode heeft voordelen en nadelen. Eén van de positieve punten is dat een inbraak gevolgd kan worden tot het moment waarop die zich voordeed. Nadelen zijn de grootte van de logboeken die door procesaccounting worden gegenereerd en de schijfruimte die dat kost. In dit onderdeel wordt een beheerder de basis van procesaccounting getoond.</p></div><div class=sect2><h3 id=_procesaccounting_inschakelen_en_gebruiken>15.14.1. Procesaccounting inschakelen en gebruiken<a class=anchor href=#_procesaccounting_inschakelen_en_gebruiken></a></h3><div class=paragraph><p>Voordat procesaccounting gebruikt kan worden dient het te worden ingeschakeld met de volgende commando’s:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/account/acct</span>
<span class=c># accton /var/account/acct</span>
<span class=c># echo &#39;accounting_enable=&#34;YES&#34;&#39; &gt;&gt; /etc/rc.conf</span></code></pre></div></div><div class=paragraph><p>Eenmaal ingeschakeld begint accounting met het bijhouden van CPU statistieken, commando’s, enzovoort. Alle accounting logboeken worden in een niet leesbaar formaat bijgehouden en zijn uit te lezen met <a href="https://man.freebsd.org/cgi/man.cgi?query=sa&amp;sektion=8&amp;format=html">sa(8)</a>. Bij het uitvoeren zonder opties, toont <code>sa</code> informatie gerelateerd aan het aantal aanroepen per gebruiker, de totale tijd in minuten die is verstreken, de totale CPU- en gebruikerstijd in minuten, gemiddeld aantal I/O operaties, enzovoort.</p></div><div class=paragraph><p>Informatie over uitgevoerde commando’s kan bekeken worden met <a href="https://man.freebsd.org/cgi/man.cgi?query=lastcomm&amp;sektion=1&amp;format=html">lastcomm(1)</a>. Zo kan met <code>lastcomm</code> bijvoorbeeld weergegeven worden welke commando’s door gebruikers op een specifieke <a href="https://man.freebsd.org/cgi/man.cgi?query=ttys&amp;sektion=5&amp;format=html">ttys(5)</a> zijn uitgevoerd:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lastcomm ls trhodes ttyp1</span></code></pre></div></div><div class=paragraph><p>Het bovenstaande commando toont ieder bekend gebruikt van <code>ls</code> door de gebruiker <code>trhodes</code> op terminal <code>ttyp1</code>.</p></div><div class=paragraph><p>Veel andere handige opties staan beschreven in <a href="https://man.freebsd.org/cgi/man.cgi?query=lastcomm&amp;sektion=1&amp;format=html">lastcomm(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acct&amp;sektion=5&amp;format=html">acct(5)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=sa&amp;sektion=8&amp;format=html">sa(8)</a>.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 maart 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/nl/books/handbook/users class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/nl/books/handbook/jails class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#security-synopsis>15.1. Overzicht</a></li><li><a href=#security-intro>15.2. Introductie</a></li><li><a href=#securing-freebsd>15.3. FreeBSD beveiligen</a></li><li><a href=#crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 en crypt</a></li><li><a href=#one-time-passwords>15.5. Eenmalige wachtwoorden</a></li><li><a href=#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=#kerberos5>15.7. Kerberos5</a></li><li><a href=#openssl>15.8. OpenSSL</a></li><li><a href=#ipsec>15.9. VPN via IPsec</a></li><li><a href=#openssh>15.10. OpenSSH</a></li><li><a href=#fs-acl>15.11. Bestandssysteem toegangscontrolelijsten (ACLs)</a></li><li><a href=#security-portaudit>15.12. Monitoren van beveiligingsproblemen met andere software</a></li><li><a href=#security-advisories>15.13. FreeBSD beveiligingswaarschuwingen</a></li><li><a href=#security-accounting>15.14. Procesaccounting</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/nl/books/handbook/handbook_nl.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/nl/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/nl/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>Dutch</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/nl class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/nl/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>