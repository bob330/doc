<!doctype html><html class=theme-light lang=nl><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/nl/books/handbook/network-servers/><title>Hoofdstuk 29. Netwerkdiensten | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Hoofdstuk 29. Netwerkdiensten"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="nl"><meta property="og:url" content="https://docs.freebsd.org/nl/books/handbook/network-servers/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/nl\/books\/handbook\/network-servers\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/nl>Documentation portal</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/nl/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/nl/books>Books</a></li><li><a href=https://docs.freebsd.org/nl/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/nl/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=nl>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/preface/>Voorwoord</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-audience>Bedoeld publiek</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-changes-from3>Wijzigingen ten opzichte van de derde editie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-changes-from2>Wijzigingen ten opzichte van de tweede editie (2004)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-changes>Veranderingen ten opzichte van de eerste editie (2001)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-overview>De opbouw van dit boek</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-conv>Overeenkomsten in dit boek</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/preface/#preface-acknowledgements>Dankwoorden</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/parti/>Deel I. Beginnen</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/introduction/>Hoofdstuk 1. Introductie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/introduction/#introduction-synopsis>1.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/introduction/#nutshell>1.2. Welkom bij FreeBSD!</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/introduction/#history>1.3. Over het FreeBSD Project</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/install/>Hoofdstuk 2. FreeBSD installeren op FreeBSD 8.X en eerder</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-synopsis>2.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-hardware>2.2. Hardware-eisen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-pre>2.3. Voorbereidende taken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-start>2.4. Beginnen met de installatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#using-sysinstall>2.5. Inleiding Sysinstall</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-steps>2.6. Schijfruimte toewijzen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-choosing>2.7. Wat installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-media>2.8. Installatiemedia kiezen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-final-warning>2.9. De installatie bevestigen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-post>2.10. Instellingen na de installatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-trouble>2.11. Problemen oplossen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-advanced>2.12. Installeren voor gevorderden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/install/#install-diff-media>2.13. Aangepaste installatiemedia maken</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/bsdinstall/>Hoofdstuk 3. FreeBSD 9.X en nieuwer installeren</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/bsdinstall/#bsdinstall-synopsis>33.1. Overzicht</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/basics/>Hoofdstuk 4. UNIX® beginselen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-synopsis>4.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#consoles>4.2. Virtuele consoles en terminals</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#permissions>4.3. Rechten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#dirstructure>4.4. Mappenstructuur</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#disk-organization>4.5. Organisatie van schijven</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#mount-unmount>4.6. Het koppelen en ontkoppelen van bestandssystemen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-processes>4.7. Processen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-daemons>4.8. Daemons, signalen en het stoppen van processen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#shells>4.9. Shells</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#editors>4.10. Teksteditors</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-devices>4.11. Apparaten en apparaatnodes</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#binary-formats>4.12. Binaire formaten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/basics/#basics-more-information>4.13. Meer informatie</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/ports/>Hoofdstuk 5. Applicaties installeren: pakketten en ports</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-synopsis>5.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-overview>5.2. Overzicht van softwareinstallatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-finding-applications>5.3. Applicaties zoeken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#packages-using>5.4. Het pakkettensysteem gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-using>5.5. De Portscollectie gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-nextsteps>5.6. Activiteiten na het installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ports/#ports-broken>5.7. Omgaan met kapotte ports</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/x11/>Hoofdstuk 6. Het X Window systeem</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x11-synopsis>6.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-understanding>6.2. X begrijpen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-install>6.3. X11 installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-config>6.4. X11 instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-fonts>6.5. Lettertypen gebruiken in X11</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x-xdm>6.6. De X beeldschermmanager</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/x11/#x11-wm>6.7. Bureaubladomgevingen</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partii/>Deel II. Algemene taken</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/desktop/>Hoofdstuk 7. Bureaubladapplicaties</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-synopsis>7.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-browsers>7.2. Browsers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-productivity>7.3. Productiviteit</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-viewers>7.4. Documentviewers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-finance>7.5. Financiën</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/desktop/#desktop-summary>7.6. Samenvatting</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/>Hoofdstuk 8. Multimedia</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#multimedia-synopsis>8.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#sound-setup>8.2. Geluidskaart installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#sound-mp3>8.3. MP3 audio</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#video-playback>8.4. Video afspelen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#tvcard>8.5. TV-kaarten installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#mythtv>8.6. MythTV</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/multimedia/#scanners>8.7. Scanners</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/>Hoofdstuk 9. De FreeBSD-kernel instellen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Samenvatting</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Redenen om een aangepaste kernel te bouwen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-devices>9.3. De systeemhardware vinden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Kernel stuurprogramma’s, subsystemen, en modules</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-building>9.5. Bouwen en installeren van een aangepaste kernel</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-config>9.6. Het instellingenbestand</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/printing/>Hoofdstuk 10. Afdrukken</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-synopsis>10.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-intro-spooler>10.2. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-intro-setup>10.3. Standaardinstallatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-advanced>10.4. Geavanceerde printerinstallatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-using>10.5. Printers gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-lpd-alternatives>10.6. Alternatieven voor het standaard wachtrijsysteem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/printing/#printing-troubleshooting>10.7. Problemen oplossen</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/>Hoofdstuk 11. Linux® binaire compatibiliteit</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Installatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Mathematica® installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-maple>11.4. Maple™ installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-matlab>11.5. MATLAB® installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-oracle>11.6. Oracle® installeren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/linuxemu/#linuxemu-advanced>11.7. Gevorderde onderwerpen</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partiii/>Deel III. Systeembeheer</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/config/>Hoofdstuk 12. Instellingen en optimalisatie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#config-synopsis>12.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-initial>12.2. Initiële instellingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-core-configuration>12.3. Hoofdinstellingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-appconfig>12.4. Toepassingen instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-starting-services>12.5. Diensten starten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-cron>12.6. <code>cron</code> instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-rcd>12.7. Gebruik van rc met FreeBSD</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#config-network-setup>12.8. Netwerkkaarten instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-virtual-hosts>12.9. Virtuele hosts</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-syslog>12.10. De systeemlogger syslogd configureren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-configfiles>12.11. Instellingenbestanden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-sysctl>12.12. Optimaliseren met sysctl</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-disk>12.13. Harde schijven optimaliseren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#configtuning-kernel-limits>12.14. Fijnafstemming van kernellimieten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#adding-swap-space>12.15. Wisselbestandruimte toevoegen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#acpi-overview>12.16. Energie- en bronnenbeheer</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/config/#ACPI-debug>12.17. FreeBSD ACPI gebruiken en debuggen</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/boot/>Hoofdstuk 13. Het FreeBSD opstartproces</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-synopsis>13.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-introduction>13.2. Het bootprobleem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-blocks>13.3. De bootmanager en opstartstadia</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-kernel>13.4. Interactie met de kernel tijdens opstarten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#device-hints>13.5. Device hints</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-init>13.6. Init: start van procesbesturing</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/boot/#boot-shutdown>13.7. Afsluitvolgorde</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/users/>Hoofdstuk 14. Gebruikers- en basisaccountbeheer</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-synopsis>14.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-introduction>14.2. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-superuser>14.3. Het superuser-account</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-system>14.4. Systeemaccounts</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-user>14.5. Gebruikersaccounts</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-modifying>14.6. Accounts wijzigen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-limiting>14.7. Gebruikers beperken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/users/#users-groups>14.8. Groepen</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/security/>Hoofdstuk 15. Beveiliging</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-synopsis>15.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-intro>15.2. Introductie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#securing-freebsd>15.3. FreeBSD beveiligen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#crypt>15.4. DES, Blowfish, MD5, SHA256, SHA512 en crypt</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#one-time-passwords>15.5. Eenmalige wachtwoorden</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#tcpwrappers>15.6. TCP Wrappers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#kerberos5>15.7. Kerberos5</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#openssl>15.8. OpenSSL</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#ipsec>15.9. VPN via IPsec</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#openssh>15.10. OpenSSH</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#fs-acl>15.11. Bestandssysteem toegangscontrolelijsten (ACLs)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-portaudit>15.12. Monitoren van beveiligingsproblemen met andere software</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-advisories>15.13. FreeBSD beveiligingswaarschuwingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/security/#security-accounting>15.14. Procesaccounting</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/jails/>Hoofdstuk 16. Jails</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-synopsis>16.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-terms>16.2. Termen en begrippen van jails</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-intro>16.3. Introductie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-build>16.4. Creeëren en controleren van jails</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-tuning>16.5. Optimaliseren en administratie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/jails/#jails-application>16.6. Toepassing van jails</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/mac/>Hoofdstuk 17. Verplichte Toegangscontrole (MAC)</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-synopsis>17.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-inline-glossary>17.2. Sleuteltermen in dit hoofdstuk</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-initial>17.3. Uitleg over MAC</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-understandlabel>17.4. MAC-labels begrijpen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-planning>17.5. De beveiligingsconfiguratie plannen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-modules>17.6. Module-instellingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-seeotheruids>17.7. MAC-module seeotheruids</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-bsdextended>17.8. MAC-module bsdextended</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-ifoff>17.9. MAC-module ifoff</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-portacl>17.10. MAC-module portacl</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-partition>17.11. MAC-module partition</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-mls>17.12. MAC-module Multi-Level Security</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-biba>17.13. MAC-module Biba</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-lomac>17.14. MAC-module LOMAC</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-implementing>17.15. Nagios in een MAC-jail</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-userlocked>17.16. Gebruikers afsluiten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mac/#mac-troubleshoot>17.17. Problemen oplossen met het MAC-raamwerk</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/audit/>Hoofdstuk 18. Security Event Auditing</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-synopsis>18.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-inline-glossary>18.2. Sleutelwoorden in dit hoofdstuk</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-install>18.3. Installeren van audit ondersteuning.</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-config>18.4. Audit Configuratie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/audit/#audit-administration>18.5. Het audit subsysteem beheren.</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/disks/>Hoofdstuk 19. Opslag</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-synopsis>19.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-naming>19.2. Apparaatnamen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-adding>19.3. Schijven toevoegen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#raid>19.4. RAID</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#usb-disks>19.5. USB-opslagapparaten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#creating-cds>19.6. Optische media (CD’s) aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#creating-dvds>19.7. Optische media (DVD’s) aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#floppies>19.8. Diskettes aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backups-tapebackups>19.9. Gegevensbanden aanmaken en gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backups-floppybackups>19.10. Naar diskettes back-uppen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backup-strategies>19.11. Back-up strategieën</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#backup-basics>19.12. Back-upbeginselen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-virtual>19.13. Netwerk-, geheugen-, en bestandsgebaseerde bestandssystemen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#snapshots>19.14. Snapshots van bestandssystemen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#quotas>19.15. Bestandssysteemquota</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-encrypting>19.16. Schijfpartities versleutelen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#swap-encrypting>19.17. Het versleutelen van de wisselbestand ruimte</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/disks/#disks-hast>19.18. Highly Available Storage (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/geom/>Hoofdstuk 20. GEOM: Modulair schijftransformatie raamwerk</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-synopsis>20.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-intro>20.2. GEOM inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-striping>20.3. RAID0 - aaneengeschakeld</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-mirror>20.4. RAID1 - spiegelen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#GEOM-raid3>20.5. RAID3 - Striping op byte-niveau met toegewijde pariteit</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-ggate>20.6. GEOM Gate netwerk apparaten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-glabels>20.7. Het labelen van schijven</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/geom/#geom-gjournal>20.8. UFS logboeken door middel van GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/>Hoofdstuk 21. Ondersteuning van bestandssystemen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/#filesystems-synopsis>21.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/#filesystems-zfs>21.2. Het Z File System (ZFS)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/filesystems/#filesystems-linux>21.3. Linux® bestandssystemen</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/>Hoofdstuk 22. Virtualisatie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/#virtualization-synopsis>22.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/#virtualization-guest>22.2. FreeBSD als een gast-besturingssysteem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/virtualization/#virtualization-host>22.3. FreeBSD als een gastheer-besturingssysteem</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/l10n/>Hoofdstuk 23. Lokalisatie - I18N/L10N gebruiken en instellen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#l10n-synopsis>23.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#l10n-basics>23.2. Beginselen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#using-localization>23.3. Lokalisatie gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#l10n-compiling>23.4. I18N-programma’s compileren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/l10n/#lang-setup>23.5. FreeBSD lokaliseren naar talen</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/>Hoofdstuk 24. FreeBSD updaten en upgraden</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. FreeBSD Update</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. Portsnap: een updategereedschap voor de Portscollectie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. De documentatie bijwerken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#current-stable>24.5. Een ontwikkelingstak volgen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#synching>24.6. Broncode synchroniseren</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#makeworld>24.7. De "wereld" opnieuw bouwen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#make-delete-old>24.8. Het verwijderen van overbodige bestanden, directories en bibliotheken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/cutting-edge/#small-lan>24.9. Meerdere machines bijwerken</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/>Hoofdstuk 25. DTrace</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-synopsis>25.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-implementation>25.2. Implementatieverschillen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-enable>25.3. Ondersteuning voor DTrace aanzetten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-using>25.4. DTrace gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/dtrace/#dtrace-language>25.5. De taal D</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partiv/>Deel IV. Netwerkcommunicatie</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/>Hoofdstuk 26. Seriële communicatie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#serial-synopsis>26.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#serial>26.2. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#term>26.3. Terminals</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#dialup>26.4. Inbeldienst</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#dialout>26.5. Uitbeldienst</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/serialcomms/#serialconsole-setup>26.6. Seriële console opzetten</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/>Hoofdstuk 27. PPP en SLIP</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#userppp>27.2. Gebruikmaken van gebruiker-PPP</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#ppp>27.3. Kernel-PPP gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. Het problemen oplossen van PPP-verbindingen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#pppoe>27.5. PPP gebruiken over Ethernet (PPPoE)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#pppoa>27.6. Gebruik maken van PPP over ATM (PPPoA)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/ppp-and-slip/#slip>27.7. Gebruik maken van SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/mail/>Hoofdstuk 28. Elektronische mail</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-synopsis>28.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-using>28.2. Gebruik maken van elektronische mail</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#sendmail>28.3. sendmail instellen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-changingmta>28.4. De Mail Transfer Agent vervangen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-trouble>28.5. Problemen oplossen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-advanced>28.6. Geavanceerde onderwerpen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#SMTP-UUCP>28.7. SMTP met UUCP</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#outgoing-only>28.8. Instellen om alleen te versturen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#SMTP-dialup>28.9. Mail gebruiken met een inbelverbinding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#SMTP-Auth>28.10. SMTP-authenticatie</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-agents>28.11. Mail User Agents</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-fetchmail>28.12. fetchmail gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mail/#mail-procmail>28.13. procmail gebruiken</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle checked>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/>Hoofdstuk 29. Netwerkdiensten</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-servers-synopsis>29.1. Overzicht</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-inetd>29.2. De inetd"Super-Server"</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-nfs>29.3. Netwerkbestandssysteem (NFS)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-nis>29.4. Netwerkinformatiesysteem (NIS/YP)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-dhcp>29.5. Automatisch netwerk instellen (DHCP)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-dns>29.6. Domeinnaamsysteem (DNS)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-apache>29.7. Apache HTTP server</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-ftp>29.8. File Transfer Protocol (FTP)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-samba>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-ntp>29.10. Tijd synchroniseren met NTP</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/network-servers/#network-syslogd>29.11. Hosts op afstand loggen met <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/>Hoofdstuk 30. Firewalls</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-intro>30.1. Inleiding</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-concepts>30.2. Firewallconcepten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-apps>30.3. Firewallsoftware</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-pf>30.4. De OpenBSD Packet Filter (PF) en ALTQ</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-ipf>30.5. De IPFILTER (IPF) firewall</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/>Hoofdstuk 31. Geavanceerde netwerken</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Samenvatting</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-routing>31.2. Gateways en routes</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-wireless>31.3. Draadloze netwerken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-bridging>31.5. Bridging</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-aggregation>31.6. Verbindingsaggregatie en failover</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-diskless>31.7. Schijfloos werken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-pxe-nfs>31.8. Met PXE en een NFS-root-bestandssysteem opstarten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-isdn>31.9. ISDN</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-natd>31.10. Network Address Translation</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-ipv6>31.11. IPv6</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#network-atm>31.12. Asynchronous Transfer Mode (ATM)</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/advanced-networking/#carp>31.13. Common Address Redundancy Protocol (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/partv/>Deel V. Appendix</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/>Bijlage A. FreeBSD verkrijgen</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-cdrom>A.1. CD-ROM en DVD uitgevers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-ftp>A.2. FTP sites</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-svn>A.3. Subversion-sites</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#anoncvs>A.4. Anonieme CVS</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#ctm>A.5. CTM gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#cvsup>A.6. CVSup gebruiken</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#cvs-tags>A.7. CVS labels</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/mirrors/#mirrors-rsync>A.8. rsync sites</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/>Bijlage B. Bibliografie</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-freebsd>B.1. Boeken & tijdschriften over FreeBSD</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-userguides>B.2. Voor gebruikers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-adminguides>B.3. Voor beheerders</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-programmers>B.4. Voor programmeurs</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-osinternals>B.5. Dieper in het besturingssysteem</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-security>B.6. Over beveiliging</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-hardware>B.7. Over hardware</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-history>B.8. UNIX® geschiedenis</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/bibliography/#bibliography-journals>B.9. Tijdschriften en periodieken</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/eresources/>Bijlage C. Bronnen op Internet</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-mail>C.1. Mailinglijsten</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-news>C.2. Usenet-nieuwsgroepen</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-web>C.3. World wide webservers</a></li><li><a href=https://docs.freebsd.org/nl/books/handbook/eresources/#eresources-email>C.4. Email-adressen</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/nl/books/handbook/pgpkeys/>Bijlage D. PGP sleutels</a><ul><li><a href=https://docs.freebsd.org/nl/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Beambten</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Hoofdstuk 29. Netwerkdiensten</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#network-servers-synopsis>29.1. Overzicht</a></li><li><a href=#network-inetd>29.2. De inetd"Super-Server"</a></li><li><a href=#network-nfs>29.3. Netwerkbestandssysteem (NFS)</a></li><li><a href=#network-nis>29.4. Netwerkinformatiesysteem (NIS/YP)</a></li><li><a href=#network-dhcp>29.5. Automatisch netwerk instellen (DHCP)</a></li><li><a href=#network-dns>29.6. Domeinnaamsysteem (DNS)</a></li><li><a href=#network-apache>29.7. Apache HTTP server</a></li><li><a href=#network-ftp>29.8. File Transfer Protocol (FTP)</a></li><li><a href=#network-samba>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)</a></li><li><a href=#network-ntp>29.10. Tijd synchroniseren met NTP</a></li><li><a href=#network-syslogd>29.11. Hosts op afstand loggen met <code>syslogd</code></a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=network-servers-synopsis>29.1. Overzicht<a class=anchor href=#network-servers-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Dit hoofdstuk behandelt een aantal veelgebruikte netwerkdiensten op UNIX® systemen. Er wordt ingegaan op de installatie, het instellen, testen en beheren van verschillende typen netwerkdiensten. Overal in dit hoofdstuk staan voorbeeldbestanden met instellingen waar de lezer zijn voordeel mee kan doen.</p></div><div class=paragraph><p>Na het lezen van dit hoofdstuk weet de lezer:</p></div><div class=ulist><ul><li><p>Hoe om te gaan met de inetd daemon;</p></li><li><p>Hoe een netwerkbestandssysteem opgezet kan worden;</p></li><li><p>Hoe een netwerkinformatiedienst (NIS) opgezet kan worden voor het delen van gebruikersaccounts;</p></li><li><p>Hoe automatische netwerkinstellingen gemaakt kunnen worden met DHCP;</p></li><li><p>Hoe een domeinnaam server opgezet kan worden;</p></li><li><p>Hoe een Apache HTTP Server opgezet kan worden;</p></li><li><p>Hoe een File Transfer Protocol (FTP) Server opgezet kan worden;</p></li><li><p>Hoe een bestand-- en printserver voor Windows® cliënten opgezet kan worden met Samba;</p></li><li><p>Hoe datum en tijd gesynchroniseerd kunnen worden en hoe een tijdserver opgezet kan worden met het NTP-protocol.</p></li><li><p>Hoe het standaard log-daemon <code>syslogd</code> in te stellen om logs van hosts op afstand te accepteren.</p></li></ul></div><div class=paragraph><p>Veronderstelde voorkennis:</p></div><div class=ulist><ul><li><p>Basisbegrip van de scripts in <span class=filename>/etc/rc</span>;</p></li><li><p>Bekend zijn met basis netwerkterminologie;</p></li><li><p>Kennis van de installatie van software van derde partijen (<a href=../ports/#ports>Applicaties installeren. pakketten en ports</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=network-inetd>29.2. De inetd"Super-Server"<a class=anchor href=#network-inetd></a></h2><div class=sectionbody><div class=sect2><h3 id=network-inetd-overview>29.2.1. Overzicht<a class=anchor href=#network-inetd-overview></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> wordt soms de "Internet Super-Server" genoemd, omdat het verbindingen voor meerdere diensten beheert. Als door inetd een verbinding wordt ontvangen, bepaalt die voor welk programma de verbinding bedoeld is, splitst het dat proces af en delegeert de socket (het programma wordt gestart met de socket van de dienst als zijn standaardinvoer, -uitvoer en -foutbeschrijvingen). Het draaien van inetd voor servers die niet veel gebruikt worden kan de algehele werklast verminderen in vergelijking met het draaien van elke daemon individueel in stand-alone modus.</p></div><div class=paragraph><p>inetd wordt primair gebruikt om andere daemons aan te roepen, maar het handelt een aantal triviale protocollen direct af, zoals chargen, auth en daytime.</p></div><div class=paragraph><p>In deze paragraaf worden de basisinstellingen van inetd behandeld met de opties vanaf de commandoregel en met het instellingenbestand <span class=filename>/etc/inetd.conf</span>.</p></div></div><div class=sect2><h3 id=network-inetd-settings>29.2.2. Instellingen<a class=anchor href=#network-inetd-settings></a></h3><div class=paragraph><p>inetd wordt gestart door het <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>-systeem. De optie <code>inetd_enable</code> staat standaard op <code>NO</code>, maar kan tijdens de installatie door sysinstall worden aangezet. Door het plaatsen van</p></div><div class="literalblock programlisting"><div class=content><pre>inetd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>of</p></div><div class="literalblock programlisting"><div class=content><pre>inetd_enable=&#34;NO&#34;</pre></div></div><div class=paragraph><p>in <span class=filename>/etc/rc.conf</span> wordt inetd bij het opstarten van een systeem wel of niet ingeschakeld. Het commando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service inetd rcvar</span></code></pre></div></div><div class=paragraph><p>kan gedraaid worden om de huidige effectieve instellingen weer te geven.</p></div><div class=paragraph><p>Dan kunnen er ook nog een aantal commandoregelopties aan inetd meegegeven worden met de optie <code>inetd_flags</code>.</p></div></div><div class=sect2><h3 id=network-inetd-cmdline>29.2.3. Commandoregelopties<a class=anchor href=#network-inetd-cmdline></a></h3><div class=paragraph><p>Zoals de meeste serverdaemons heeft inetd een aantal opties die doorgegeven kunnen worden om het gedrag aan te passen. Zie de handleidingpagina <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> voor een volledige lijst van de opties.</p></div><div class=paragraph><p>Opties kunnen door middel van de optie <code>inetd_flags</code> in <span class=filename>/etc/rc.conf</span> aan inetd worden doorgegeven. Standaard staat <code>inetd_flags</code> ingesteld op <code>-wW -C 60</code>, dat TCP-wrapping aanzet voor de diensten van inetd, en voorkomt dat elk enkelvoudig IP-adres enige dienst meer dan 60 keer per minuut opvraagt.</p></div><div class=paragraph><p>Ook al worden er hieronder rate-limiting opties besproken, beginnende gebruikers kunnen blij zijn met het feit dat deze parameters gewoonlijk niet hoeven te worden aangepast. Deze opties kunnen interessant zijn wanneer er een buitensporige hoeveelheid verbindingen worden opgezet. Een volledige lijst van opties staat in de hulppagina <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>.</p></div><div class=dlist><dl><dt class=hdlist1>-c maximum</dt><dd><p>Geeft het maximale aantal gelijktijdige verzoeken voor iedere dienst aan. De standaard is ongelimiteerd. Kan per dienst ter zijde geschoven worden met de parameter <code>max-child</code>.</p></dd><dt class=hdlist1>-C rate</dt><dd><p>Geeft het maximale aantal keren aan dat een dienst vanaf een bepaald IP-adres per minuut aangeroepen kan worden. Kan per dienst ter zijde geschoven worden met de parameter <code>max-connections-per-ip-per-minute</code>.</p></dd><dt class=hdlist1>-R rate</dt><dd><p>Geeft het maximale aantal keren aan dat een dienst per minuut aangeroepen kan worden. De standaard is 256. De instelling <code>0</code> geeft aan dat er geen limiet is.</p></dd><dt class=hdlist1>-s maximum</dt><dd><p>Specificeert het maximaal aantal keer per minuut dat een dienst aangeroepen kan worden vanuit een enkelvoudig IP-adres; de standaard is onbeperkt. Kan worden overstemd op een per-dienst-basis met de parameter <code>max-child-per-ip</code>.</p></dd></dl></div></div><div class=sect2><h3 id=network-inetd-conf>29.2.4. <span class=filename>inetd.conf</span><a class=anchor href=#network-inetd-conf></a></h3><div class=paragraph><p>De instellingen van inetd worden beheerd in <span class=filename>/etc/inetd.conf</span>.</p></div><div class=paragraph><p>Als er een wijziging wordt aangebracht in <span class=filename>/etc/inetd.conf</span>, dan kan inetd gedwongen worden om de instellingen opnieuw in te lezen door dit commando te draaien:</p></div><div id=network-inetd-reread class=exampleblock><div class=title>Voorbeeld 1. Het instellingenbestand van inetd herladen</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service inetd reload</span></code></pre></div></div></div></div><div class=paragraph><p>Iedere regel in het bestand met instellingen heeft betrekking op een individuele daemon. Commentaar wordt vooraf gegaan door een <code>#</code>. De opmaak van elke regel van <span class=filename>/etc/inetd.conf</span> is als volgt:</p></div><div class="literalblock programlisting"><div class=content><pre>service-name
socket-type
protocol
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]
user[:group][/login-class]
server-program
server-program-arguments</pre></div></div><div class=paragraph><p>Een voorbeeldregel voor de daemon <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpd&amp;sektion=8&amp;format=html">ftpd(8)</a> met IPv4 kan eruit zien als:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</pre></div></div><div class=dlist><dl><dt class=hdlist1>service-name</dt><dd><p>Dit is de dienstnaam van een daemon. Die moet overeenkomen met een dienst uit <span class=filename>/etc/services</span>. Hiermee kan de poort waarop inetd moet luisteren aangegeven worden. Als er een nieuwe dienst wordt gemaakt, moet die eerst in <span class=filename>/etc/services</span> gezet worden.</p></dd><dt class=hdlist1>socket-type</dt><dd><p>Dit is <code>stream</code>, <code>dgram</code>, <code>raw</code> of <code>seqpacket</code>. <code>stream</code> moet gebruikt worden voor verbindingsgebaseerde TCP-daemons, terwijl <code>dgram</code> wordt gebruikt voor daemons die gebruik maken van het transportprotocol UDP.</p></dd><dt class=hdlist1>protocol</dt><dd><p>Een van de volgende:</p><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Protocol</th><th class="tableblock halign-left valign-top">Toelichting</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp, tcp4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TCP IPv4</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp, udp4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UDP IPv4</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TCP IPv6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UDP IPv6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp46</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Zowel TCP IPv4 als v6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp46</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Zowel UDP IPv4 als v6</p></td></tr></tbody></table></dd><dt class=hdlist1>{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]</dt><dd><p><code>wait|nowait</code> geeft aan of de daemon die door inetd wordt aangesproken zijn eigen sockets kan afhandelen of niet. <code>dgram</code> sockettypen moeten de optie <code>wait</code> gebruiken, terwijl streamsocket daemons, die meestal multi-threaded zijn, de optie <code>nowait</code> horen te gebruiken. <code>wait</code> geeft meestal meerdere sockets aan een daemon, terwijl <code>nowait</code> een kinddaemon draait voor iedere nieuwe socket.</p><div class=paragraph><p>Het maximum aantal kinddaemons dat inetd mag voortbrengen kan ingesteld worden met de optie <code>max-child</code>. Als een limiet van tien instanties van een bepaalde daemon gewenst is, dan zou er <code>/10</code> achter <code>nowait</code> gezet worden. Door <code>/0</code> wordt een onbeperkt aantal kinderen toegestaan.</p></div><div class=paragraph><p>Naast <code>max-child</code> zijn er nog twee andere opties waarmee het maximale aantal verbindingen van een bepaalde plaats naar een daemon ingesteld kan worden. <code>max-connections-per-ip-per-minute</code> beperkt het aantal verbindingen per minuut voor enig IP-adres, een waarde van tien betekent hier dat er van ieder IP-adres maximaal tien verbindingen naar een bepaalde dienst tot stand gebracht kunnen worden. <code>max-child-per-ip</code> beperkt het aantal kindprocessen dat namens enig IP-adres op enig moment gestart kan worden. Deze opties kunnen zijn nuttig om bedoeld en onbedoeld buitensporig bronnengebruik van en Denial of Service (DoS) aanvallen op een machine te voorkomen.</p></div><div class=paragraph><p>In dit veld is één van <code>wait</code> of <code>nowait</code> verplicht. <code>max-child</code>, <code>max-connections-per-ip-per-minute</code> en <code>max-child-per-ip</code> zijn optioneel.</p></div><div class=paragraph><p>Een stream-type multi-threaded daemon zonder één van de limieten <code>max-child</code>, <code>max-connections-per-ip-per-minute</code> of <code>max-child-per-ip</code> is eenvoudigweg: <code>nowait</code>.</p></div><div class=paragraph><p>Dezelfde daemon met een maximale limiet van tien daemons zou zijn: <code>nowait/10</code>.</p></div><div class=paragraph><p>Dezelfde instellingen met een limiet van twintig verbindingen per IP-adres per minuut en een totaal maximum van tien kinddaemons zou zijn: <code>nowait/10/20</code>.</p></div><div class=paragraph><p>Deze opties worden allemaal gebruikt door de standaardinstellingen van de daemon <a href="https://man.freebsd.org/cgi/man.cgi?query=fingerd&amp;sektion=8&amp;format=html">fingerd(8)</a>:</p></div><div class="literalblock programlisting"><div class=content><pre>finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre></div></div><div class=paragraph><p>Als afsluiting, een voorbeeld in dit veld met een maximum van 100 kinderen in totaal, met een maximum van 5 voor enig IP-adres zou zijn: <code>nowait/100/0/5</code>.</p></div></dd><dt class=hdlist1>user</dt><dd><p>Dit is de gebruikersnaam waar een daemon onder draait. Daemons draaien meestal als de gebruiker <code>root</code>. Om veiligheidsredenen draaien sommige daemons onder de gebruiker <code>daemon</code> of de gebruiker met de minste rechten: <code>nobody</code>.</p></dd><dt class=hdlist1>server-program</dt><dd><p>Het volledige pad van de daemon die uitgevoerd moet worden als er een verbinding wordt ontvangen. Als de daemon een dienst is die door inetd intern wordt geleverd, dan moet de optie <code>internal</code> gebruikt worden.</p></dd><dt class=hdlist1>server-program-arguments</dt><dd><p>Deze optie werkt samen met de optie <code>server-program</code> en hierin worden de argumenten ingesteld, beginnend met <code>argv[0]</code>, die bij het starten aan de daemon worden meegegeven. Als <code>mijndaemon -d</code> de commandoregel is, dan zou <code>mijndaemon -d</code> de waarde van <code>server-program-arguments</code> zijn. Hier geldt ook dat als de daemon een interne dienst is, hier de optie <code>internal</code> moet worden.</p></dd></dl></div></div><div class=sect2><h3 id=network-inetd-security>29.2.5. Beveiliging<a class=anchor href=#network-inetd-security></a></h3><div class=paragraph><p>Afhankelijk van keuzes gemaakt tijdens de installatie, kunnen veel van de diensten van inetd standaard ingeschakeld zijn. Het is verstandig te overwegen om een daemon dat niet noodzakelijk is uit te schakelen. Plaats een <code>#</code> voor de daemon in <span class=filename>/etc/inetd.conf</span> en <a href=#network-inetd-reread>herlaad vervolgens de instellingen van inetd</a>. Sommige daemons, zoals fingerd, zijn wellicht helemaal niet gewenst omdat ze informatie geven die nuttig kan zijn voor een aanvaller.</p></div><div class=paragraph><p>Sommige daemons zijn zich niet echt bewust van beveiliging en hebben lange of niet bestaande timeouts voor verbindingspogingen. Hierdoor kan een aanvaller langzaam veel verbindingen maken met een daemon en zo beschikbare bronnen verzadigen. Het is verstandig voor die daemons de limietopties <code>max-connections-per-ip-per-minute</code>, <code>max-child</code> of <code>max-child-per-ip</code> te gebruiken als ze naar uw smaak teveel verbindingen hebben.</p></div><div class=paragraph><p>TCP-wrapping staat standaard aan. Er staat meer informatie over het zetten van TCP-restricties op de verschillende daemons die door inetd worden aangesproken in <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a>.</p></div></div><div class=sect2><h3 id=network-inetd-misc>29.2.6. Allerlei<a class=anchor href=#network-inetd-misc></a></h3><div class=paragraph><p>daytime, time, echo, discard, chargen en auth zijn allemaal interne diensten van inetd.</p></div><div class=paragraph><p>De dienst auth biedt identiteitsnetwerkdiensten en is tot op een bepaald niveau instelbaar, terwijl de anderen eenvoudigweg aan of uit staan.</p></div><div class=paragraph><p>Meer diepgaande informatie staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>.</p></div></div></div></div><div class=sect1><h2 id=network-nfs>29.3. Netwerkbestandssysteem (NFS)<a class=anchor href=#network-nfs></a></h2><div class=sectionbody><div class=paragraph><p>Het Netwerkbestandssysteem (Network File System) is een van de vele bestandssystemen die FreeBSD ondersteunt. Het staat ook wel bekend als NFS. Met NFS is het mogelijk om mappen en bestanden met anderen in een netwerk te delen. Door het gebruik van NFS kunnen gebruikers en programma’s bij bestanden op andere systemen op bijna dezelfde manier als bij hun eigen lokale bestanden.</p></div><div class=paragraph><p>De grootste voordelen van NFS zijn:</p></div><div class=ulist><ul><li><p>Lokale werkstations gebruiken minder schijfruimte omdat veel gebruikte data op één machine opgeslagen kan worden en nog steeds toegankelijk is voor gebruikers via het netwerk;</p></li><li><p>Gebruikers hoeven niet op iedere machine een thuismap te hebben. Thuismappen kunnen op de NFS server staan en op het hele netwerk beschikbaar zijn;</p></li><li><p>Opslagapparaten als floppydisks, CD-ROM drives en Zip® drives kunnen door andere machines op een netwerk gebruikt worden. Hierdoor kan het aantal drives met verwijderbare media in een netwerk verkleind worden.</p></li></ul></div><div class=sect2><h3 id=_hoe_nfs_werkt>29.3.1. Hoe NFS werkt<a class=anchor href=#_hoe_nfs_werkt></a></h3><div class=paragraph><p>NFS bestaat uit tenminste twee hoofdonderdelen: een server en een of meer cliënten. De cliënt benadert de gegevens die op een servermachine zijn opgeslagen via een netwerk. Om dit mogelijk te maken moeten er een aantal processen ingesteld en gestart worden.</p></div><div class=paragraph><p>Op de server moeten de volgende daemons draaien:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Daemon</th><th class="tableblock halign-left valign-top">Beschrijving</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>nfsd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>De NFS-daemon die verzoeken van de NFS cliënten afhandelt.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>mountd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>De NFS koppeldaemon die doorgestuurde verzoeken van <a href="https://man.freebsd.org/cgi/man.cgi?query=nfsd&amp;sektion=8&amp;format=html">nfsd(8)</a> uitvoert.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpcbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Deze daemon geeft voor NFS-cliënten aan welke poort de NFS-server gebruikt.</p></td></tr></tbody></table><div class=paragraph><p>Op de cliënt kan ook een daemon draaien: nfsiod. De daemon nfsiod handelt verzoeken van de NFS-server af. Dit is optioneel en kan de prestaties verbeteren, maar het is niet noodzakelijk voor een normale en correcte werking. Meer informatie staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=nfsiod&amp;sektion=8&amp;format=html">nfsiod(8)</a>.</p></div></div><div class=sect2><h3 id=network-configuring-nfs>29.3.2. NFS instellen<a class=anchor href=#network-configuring-nfs></a></h3><div class=paragraph><p>NFS instellen gaat redelijk rechtlijnig. Alle processen die moeten draaien kunnen meestarten bij het opstarten door een paar wijzigingen in <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>Op de NFS server dienen de volgende opties in <span class=filename>/etc/rc.conf</span> te staan:</p></div><div class="literalblock programlisting"><div class=content><pre>rpcbind_enable=&#34;YES&#34;
nfs_server_enable=&#34;YES&#34;
mountd_flags=&#34;-r&#34;</pre></div></div><div class=paragraph><p>mountd start automatisch als de NFS server is ingeschakeld.</p></div><div class=paragraph><p>Op de cliënt dient de volgende optie in <span class=filename>/etc/rc.conf</span> te staan:</p></div><div class="literalblock programlisting"><div class=content><pre>nfs_client_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>In het bestand <span class=filename>/etc/exports</span> staat beschreven welke bestandssystemen NFS moet exporteren (soms heet dat ook wel delen of "sharen"). Iedere regel in <span class=filename>/etc/exports</span> slaat op een bestandssysteem dat wordt geëxporteerd en welke machines toegang hebben tot dat bestandssysteem. Samen met machines die toegang hebben, kunnen ook toegangsopties worden aangegeven. Er zijn veel opties beschikbaar, maar hier worden er maar een paar beschreven. Alle opties staan beschreven in <a href="https://man.freebsd.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;format=html">exports(5)</a>.</p></div><div class=paragraph><p>Nu volgen een aantal voorbeelden voor <span class=filename>/etc/exports</span>:</p></div><div class=paragraph><p>Het volgende voorbeeld geeft een beeld van hoe een bestandssysteem te exporteren, hoewel de instellingen afhankelijk zijn van de omgeving en het netwerk. Om bijvoorbeeld de map <span class=filename>/cdrom</span> te exporteren naar drie machines die dezelfde domeinnaam hebben als de server (vandaar dat de machinenamen geef domeinachtervoegsel hebben) of in <span class=filename>/etc/hosts</span> staan. De vlag <code>-ro</code> exporteert het bestandssysteem als alleen-lezen. Door die vlag kan een ander systeem niet schrijven naar het geëxporteerde bestandssysteem.</p></div><div class="literalblock programlisting"><div class=content><pre>/cdrom -ro host1 host2 host3</pre></div></div><div class=paragraph><p>Het volgende voorbeeld exporteert <span class=filename>/home</span> naar drie hosts op basis van IP-adres. Dit heeft zin als er een privaat netwerk bestaat, zonder dat er een DNS server is ingesteld. Optioneel kan <span class=filename>/etc/hosts</span> gebruikt worden om interne hostnamen in te stellen. Er is meer informatie te vinden in <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a>. Met de vlag <code>-alldirs</code> mogen submappen ook koppelpunten zijn. De submap wordt dan niet feitelijk aangekoppeld, maar de cliënt koppelt dan alleen de submappen aan die verplicht of nodig zijn.</p></div><div class="literalblock programlisting"><div class=content><pre>/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre></div></div><div class=paragraph><p>Het volgende voorbeeld exporteert <span class=filename>/a</span> zo dat twee cliënten uit verschillende domeinen bij het bestandssysteem mogen. Met de vlag <code>-maproot=root</code> mag de gebruiker op het andere systeem gegevens naar het geëxporteerde bestandssysteem schrijven als <code>root</code>. Als de vlag <code>-maproot=root</code> niet wordt gebruikt, dan kan een gebruiker geen bestanden wijzigen op het geëxporteerde bestandssysteem, zelfs niet als een gebruiker daar <code>root</code> is.</p></div><div class="literalblock programlisting"><div class=content><pre>/a  -maproot=root  host.example.com box.example.org</pre></div></div><div class=paragraph><p>Om een cliënt toegang te geven tot een geëxporteerd bestandssysteem, moet die cliënt daar rechten voor hebben. De cliënt moet daarvoor genoemd worden in <span class=filename>/etc/exports</span>.</p></div><div class=paragraph><p>In <span class=filename>/etc/exports</span> staat iedere regel voor de exportinformatie van één bestandssysteem naar één host. Per bestandssysteem mag een host maar één keer genoemd worden en mag maar één standaard hebben. Stel bijvoorbeeld dat <span class=filename>/usr</span> een enkel bestandssysteem is. Dan is de volgende <span class=filename>/etc/exports</span> niet geldig:</p></div><div class="literalblock programlisting"><div class=content><pre># Werkt niet als /usr 1 bestandssysteem is
/usr/src   client
/usr/ports client</pre></div></div><div class=paragraph><p>Eén bestandssysteem, <span class=filename>/usr</span>, heeft twee regels waarin exports naar dezelfde host worden aangegeven, <code>client</code>. In deze situatie is de juiste instelling:</p></div><div class="literalblock programlisting"><div class=content><pre>/usr/src /usr/ports  client</pre></div></div><div class=paragraph><p>De eigenschappen van een bestandssysteem dat naar een bepaalde host wordt geëxporteerd moeten allemaal op één regel staan. Regels waarop geen cliënt wordt aangegeven worden behandeld als een enkele host. Dit beperkt hoe bestandssysteem geëxporteerd kunnen worden, maar dat blijkt meestal geen probleem te zijn.</p></div><div class=paragraph><p>Het volgende voorbeeld is een geldige exportlijst waar <span class=filename>/usr</span> en <span class=filename>/exports</span> lokale bestandssystemen zijn:</p></div><div class="literalblock programlisting"><div class=content><pre># Exporteer src en ports naar client01 en client02,
# maar alleen client01 heeft er rootprivileges
/usr/src /usr/ports -maproot=root    client01
/usr/src /usr/ports               client02
# De cliëntmachines hebben rootrechten en kunnen overal aankoppelen
# op /exports. Iedereen in de wereld kan /exports/obj als alleen-lezen aankoppelen.
/exports -alldirs -maproot=root      client01 client02
/exports/obj -ro</pre></div></div><div class=paragraph><p>De daemon mountd moet gedwongen worden om het bestand <span class=filename>/etc/exports</span> te controleren steeds wanneer het is aangepast, zodat de veranderingen effectief kunnen worden. Dit kan worden bereikt door òfwel een HUP-signaal naar de draaiende daemon te sturen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -HUP `cat /var/run/mountd.pid`</span></code></pre></div></div><div class=paragraph><p>of door het <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> script <code>mountd</code> met de juiste parameter aan te roepen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service mountd onereload</span></code></pre></div></div><div class=paragraph><p>Raadpleeg <a href=../config/#configtuning-rcd>Gebruik van rc met FreeBSD</a> voor meer informatie over het gebruik van rc-scripts.</p></div><div class=paragraph><p>Het is ook mogelijk een machine te herstarten, zodat FreeBSD alles netjes in kan stellen, maar dat is niet nodig. Het uitvoeren van de volgende commando’s als <code>root</code> hoort hetzelfde resultaat te hebben.</p></div><div class=paragraph><p>Op de NFS server:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rpcbind</span>
<span class=c># nfsd -u -t -n 4</span>
<span class=c># mountd -r</span></code></pre></div></div><div class=paragraph><p>Op de NFS cliënt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># nfsiod -n 4</span></code></pre></div></div><div class=paragraph><p>Nu is alles klaar om feitelijk het netwerkbestandssysteem aan te koppelen. In de volgende voorbeelden is de naam van de server <code>server</code> en de naam van de cliënt is <code>client</code>. Om een netwerkbestandssysteem slechts tijdelijk aan te koppelen of om alleen te testen, kan een commando als het onderstaande als <code>root</code> op de cliënt uitgevoerd worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount server:/home /mnt</span></code></pre></div></div><div class=paragraph><p>Hiermee wordt de map <span class=filename>/home</span> op de server aangekoppeld op <span class=filename>/mnt</span> op de cliënt. Als alles juist is ingesteld, zijn nu in <span class=filename>/mnt</span> op de cliënt de bestanden van de server zichtbaar.</p></div><div class=paragraph><p>Om een netwerkbestandssysteem iedere keer als een computer opstart aan te koppelen, kan het bestandssysteem worden toegevoegd aan het bestand <span class=filename>/etc/fstab</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>server:/home	/mnt	nfs	rw	0	0</pre></div></div><div class=paragraph><p>Alle beschikbare opties staan in <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a>.</p></div></div><div class=sect2><h3 id=_op_slot_zetten>29.3.3. Op slot zetten<a class=anchor href=#_op_slot_zetten></a></h3><div class=paragraph><p>Voor sommige applicaties (b.v. mutt) is het nodig dat bestanden op slot staan om correct te werken. In het geval van NFS, kan rpc.lockd worden gebruikt voor het op slot zetten van bestanden. Voeg het volgende toe aan het bestand <span class=filename>/etc/rc.conf</span> op zowel de cliënt als de server om het aan te zetten (het wordt aangenomen dat de NFS-cliënt en -server reeds zijn geconfigureerd):</p></div><div class="literalblock programlisting"><div class=content><pre>rpc_lockd_enable=&#34;YES&#34;
rpc_statd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Start de applicatie met:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service lockd start</span>
<span class=c># service statd start</span></code></pre></div></div><div class=paragraph><p>Als echt op slot zetten tussen de NFS-cliënten en de NFS-server niet nodig is, is het mogelijk om de NFS-cliënt bestanden lokaal op slot te laten zetten door <code>-L</code> aan <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8&amp;format=html">mount_nfs(8)</a> door te geven. In de handleidingpagina <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8&amp;format=html">mount_nfs(8)</a> staan verdere details.</p></div></div><div class=sect2><h3 id=_mogelijkheden_voor_gebruik>29.3.4. Mogelijkheden voor gebruik<a class=anchor href=#_mogelijkheden_voor_gebruik></a></h3><div class=paragraph><p>NFS is voor veel doeleinden in te zetten. Een aantal voorbeelden:</p></div><div class=ulist><ul><li><p>Een aantal machines een CD-ROM of andere media laten delen. Dat is goedkoper en vaak ook handiger, bijvoorbeeld bij het installeren van software op meerdere machines;</p></li><li><p>Op grote netwerken kan het praktisch zijn om een centrale NFS server in te richten, waarop alle thuismappen staan. Die thuismappen kunnen dan geëxporteerd worden, zodat gebruikers altijd dezelfde thuismap hebben, op welk werkstation ze ook aanmelden;</p></li><li><p>Meerdere machines kunnen een gezamenlijke map <span class=filename>/usr/ports/distfiles</span> hebben. Dan is het mogelijk om een port op meerdere machines te installeren, zonder op iedere machine de broncode te hoeven downloaden.</p></li></ul></div></div><div class=sect2><h3 id=network-amd>29.3.5. Automatisch aankoppelen met amd<a class=anchor href=#network-amd></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=amd&amp;sektion=8&amp;format=html">amd(8)</a> (de automatic mounter daemon) koppelt automatisch netwerkbestandssystemen aan als er aan een bestand of map binnen dat bestandssysteem wordt gerefereerd. amd ontkoppelt ook bestandssystemen die een bepaalde tijd niet gebruikt worden. Het gebruikt van amd is een aantrekkelijk en eenvoudig alternatief ten opzichte van permanente koppelingen, die meestal in <span class=filename>/etc/fstab</span> staan.</p></div><div class=paragraph><p>amd werkt door zichzelf als NFS-server te koppelen aan de mappen <span class=filename>/host</span> en <span class=filename>/net</span>. Als binnen die mappen een bestand wordt geraadpleegd, dan zoekt amd de bijbehorende netwerkkoppeling op en koppelt die automatisch aan. <span class=filename>/net</span> wordt gebruikt om een geëxporteerd bestandssysteem van een IP-adres aan te koppelen, terwijl <span class=filename>/host</span> wordt gebruikt om een geëxporteerd bestandssysteem van een hostnaam aan te koppelen.</p></div><div class=paragraph><p>Het raadplegen van een bestand in <span class=filename>/host/foobar/usr</span> geeft amd aan dat die moet proberen de <span class=filename>/usr</span> export op de host <code>foobar</code> aan te koppelen.</p></div><div class=exampleblock><div class=title>Voorbeeld 2. Een export aankoppelen met amd</div><div class=content><div class=paragraph><p>De beschikbare koppelingen van een netwerkhost zijn te bekijken met <code>showmount</code>. Om bijvoorbeeld de koppelingen van de host <code>foobar</code> te bekijken:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% showmount <span class=nt>-e</span> foobar
Exports list on foobar:
/usr                               10.10.10.0
/a                                 10.10.10.0
% <span class=nb>cd</span> /host/foobar/usr</code></pre></div></div></div></div><div class=paragraph><p>Zoals in het bovenstaande voorbeeld te zien is, toont <code>showmount</code><span class=filename>/usr</span> als een export. Als er naar de map <span class=filename>/host/foobar/usr</span> wordt gegaan, probeert amd de hostnaam <code>foobar</code> te resolven en de gewenste export automatisch aan te koppelen.</p></div><div class=paragraph><p>amd kan gestart worden door de opstartscript door de volgende regel in <span class=filename>/etc/rc.conf</span> te plaatsen:</p></div><div class="literalblock programlisting"><div class=content><pre>amd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Er kunnen ook nog opties meegegeven worden aan amd met de optie <code>amd_flags</code>. Standaard staat <code>amd_flags</code> ingesteld op:</p></div><div class="literalblock programlisting"><div class=content><pre>amd_flags=&#34;-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map&#34;</pre></div></div><div class=paragraph><p>In het bestand <span class=filename>/etc/amd.map</span> staan de standaardinstellingen waarmee exports aangekoppeld worden. In het bestand <span class=filename>/etc/amd.conf</span> staan een aantal van de meer gevorderde instellingen van amd.</p></div><div class=paragraph><p>In <a href="https://man.freebsd.org/cgi/man.cgi?query=amd&amp;sektion=8&amp;format=html">amd(8)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=amd.conf&amp;sektion=8&amp;format=html">amd.conf(8)</a> staat meer informatie.</p></div></div><div class=sect2><h3 id=network-nfs-integration>29.3.6. Problemen bij samenwerking met andere systemen<a class=anchor href=#network-nfs-integration></a></h3><div class=paragraph><p>Bepaalde Ethernet adapters voor ISA PC systemen kennen limieten die tot serieuze netwerkproblemen kunnen leiden, in het bijzonder met NFS. Dit probleem is niet specifiek voor FreeBSD, maar het kan op FreeBSD wel voor komen.</p></div><div class=paragraph><p>Het probleem ontstaat bijna altijd als (FreeBSD) PC-systemen netwerken met hoog presterende werkstations, zoals van Silicon Graphics, Inc. en Sun Microsystems, Inc. De NFS-koppeling werkt prima en wellicht lukken een aantal acties ook, maar dan ineens lijkt de server niet meer te reageren voor de cliënt, hoewel verzoeken van en naar andere systemen gewoon verwerkt worden. Dit gebeurt op een cliëntsysteem, of de cliënt nu het FreeBSD systeem is of het werkstation. Op veel systemen is er geen manier om de cliënt netjes af te sluiten als dit probleem is ontstaan. Vaak is de enige mogelijkheid een reset van de cliënt, omdat het probleem met NFS niet opgelost kan worden.</p></div><div class=paragraph><p>Hoewel de enige "correcte" oplossing de aanschaf van een snellere en betere Ethernet adapter voor het FreeBSD systeem is, is er zo om het probleem heen te werken dat het werkbaar is. Als FreeBSD de <em>server</em> is, kan de optie <code>-w=1024</code> gebruikt worden bij het aankoppelen door de cliënt. Als het FreeBSD systeem de <em>cliënt</em> is, dan dient het NFS-bestandssysteem aangekoppeld te worden met de optie <code>r=1024</code>. Deze opties kunnen het vierde veld zijn in een regel in <span class=filename>fstab</span> voor automatische aankoppelingen en bij handmatige aankoppelingen met <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> kan de parameter <code>-o</code> gebruikt worden.</p></div><div class=paragraph><p>Soms wordt een ander probleem voor dit probleem versleten, als servers en cliënten zich op verschillende netwerken bevinden. Als dat het geval is, dan dient <em>vastgesteld</em> te worden dat routers de UDP informatie op de juiste wijze routeren, omdat er anders nooit NFS-verkeer gerouteerd kan worden.</p></div><div class=paragraph><p>In de volgende voorbeelden is <code>fastws</code> de host(interface)naam van een hoog presterend werkstation en <code>freebox</code> is de host(interface)naam van een FreeBSD systeem met een Ethernet adapter die mindere prestaties levert. <span class=filename>/sharedfs</span> wordt het geëxporteerde NFS-bestandssysteem (zie <a href="https://man.freebsd.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;format=html">exports(5)</a>) en <span class=filename>/project</span> wordt het koppelpunt voor het geëxporteerde bestandssysteem op de cliënt.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In sommige gevallen kunnen applicaties beter draaien als extra opties als <code>hard</code> of <code>soft</code> en <code>bg</code> gebruikt worden.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Voorbeelden voor het FreeBSD systeem (<code>freebox</code>) als de cliënt in <span class=filename>/etc/fstab</span> op <code>freebox</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>fastws:/sharedfs /project nfs rw,-r=1024 0 0</pre></div></div><div class=paragraph><p>Als een handmatig aankoppelcommando op <code>freebox</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t nfs -o -r=1024 fastws:/sharedfs /project</span></code></pre></div></div><div class=paragraph><p>Voorbeelden voor het FreeBSD systeem als de server in <span class=filename>/etc/fstab</span> op <code>fastws</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>freebox:/sharedfs /project nfs rw,-w=1024 0 0</pre></div></div><div class=paragraph><p>Als een handmatig aankoppelcommando op <code>fastws</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t nfs -o -w=1024 freebox:/sharedfs /project</span></code></pre></div></div><div class=paragraph><p>Bijna iedere 16-bit Ethernet adapter werkt zonder de hierboven beschreven restricties op de lees- en schrijfgrootte.</p></div><div class=paragraph><p>Voor wie het wil weten wordt nu beschreven wat er gebeurt als de fout ontstaan, wat ook duidelijk maakt waarom het niet hersteld kan worden. NFS werkt meestal met een "block"grootte van 8 K (hoewel het mogelijk is dat er kleinere fragmenten worden verwerkt). Omdat de maximale grootte van een Ethernet pakket rond de 1500 bytes ligt, wordt een "block" opgesplitst in meerdere Ethernetpakketten, hoewel het hoger in de code nog steeds één eenheid is, en wordt ontvangen, samengevoegd en <em>bevestigd</em> als een eenheid. De hoog presterende werkstations kunnen de pakketten waaruit een NFS-eenheid bestaat bijzonder snel naar buiten pompen. Op de kaarten met minder capaciteit worden de eerdere pakketten door de latere pakketten van dezelfde eenheid ingehaald voordat ze bij die host zijn aangekomen en daarom kan de eenheid niet worden samengesteld en bevestigd. Als gevolg daarvan ontstaat er op het werkstation een timeout en probeert die de eenheid opnieuw te sturen, maar dan weer de hele eenheid van 8 K, waardoor het proces wordt herhaald, ad infinitum.</p></div><div class=paragraph><p>Door de grootte van de eenheid kleiner te houden dan de grootte van een Ethernet pakket, is het zeker dat elk Ethernetpakket dat compleet is aangekomen bevestigd kan worden, zodat de deadlock niet ontstaat.</p></div><div class=paragraph><p>Toch kan een PC systeem nog wel overrompeld worden als hoog presterende werkstations er op inhakken, maar met de betere netwerkkaarten valt het dan in ieder geval niet om door de NFS "eenheden". Als het systeem toch wordt overrompeld, dan worden de betrokken eenheden opnieuw verstuurd en dan is de kans groot dat ze worden ontvangen, samengevoegd en bevestigd.</p></div></div></div></div><div class=sect1><h2 id=network-nis>29.4. Netwerkinformatiesysteem (NIS/YP)<a class=anchor href=#network-nis></a></h2><div class=sectionbody><div class=sect2><h3 id=_wat_is_het>29.4.1. Wat is het?<a class=anchor href=#_wat_is_het></a></h3><div class=paragraph><p>NIS, dat staat voor Netwerkinformatiediensten (Network Information Services), is ontwikkeld door Sun Microsystems om het beheer van UNIX® (origineel SunOS™) systemen te centraliseren. Tegenwoordig is het eigenlijk een industriestandaard geworden. Alle grote UNIX® achtige systemen (Solaris™, HP-UX, AIX®, Linux®, NetBSD, OpenBSD, FreeBSD, enzovoort) ondersteunen NIS.</p></div><div class=paragraph><p>NIS stond vroeger bekend als Yellow Pages, maar vanwege problemen met het handelsmerk heeft Sun de naam veranderd. De oude term, en yp, wordt nog steeds vaak gebruikt.</p></div><div class=paragraph><p>Het is een op RPC-gebaseerd cliënt/serversysteem waarmee een groep machines binnen een NIS-domein een gezamenlijke verzameling met instellingenbestanden kan delen. Hierdoor kan een beheerder NIS-systemen opzetten met een minimaal aantal instellingen en vanaf een centrale lokatie instellingen toevoegen, verwijderen en wijzigen.</p></div><div class=paragraph><p>Het is te vergelijken met het Windows NT® domeinsysteem en hoewel de interne implementatie van de twee helemaal niet overeenkomt, is de basisfunctionaliteit vergelijkbaar.</p></div></div><div class=sect2><h3 id=_termen_en_processen_om_te_onthouden>29.4.2. Termen en processen om te onthouden<a class=anchor href=#_termen_en_processen_om_te_onthouden></a></h3><div class=paragraph><p>Er zijn een aantal termen en belangrijke gebruikersprocessen die een rol spelen bij het implementeren van NIS op FreeBSD, zowel bij het maken van een NIS-server als bij het maken van een systeem dan NIS-cliënt is:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Term</th><th class="tableblock halign-left valign-top">Beschrijving</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>NIS-domeinnaam</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Een NIS-masterserver en al zijn cliënten (inclusief zijn slave master) hebben een NIS-domeinnaam. Vergelijkbaar met een Windows NT® domeinnaam, maar de NIS-domeinnaam heeft niets te maken met DNS.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpcbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Moet draaien om RPC (Remote Procedure Call in te schakelen, een netwerkprotocol dat door NIS gebruikt wordt). Als rpcbind niet draait, dan kan er geen NIS-server draaien en kan een machine ook geen NIS-cliënt zijn.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ypbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>"Verbindt" een NIS-cliënt aan zijn NIS-server. Dat gebeurt door met de NIS-domeinnaam van het systeem en door het gebruik van RPC te verbinden met de server. ypbind is de kern van cliënt-server communicatie in een NIS-omgeving. Als ypbind op een machine stopt, dan kan die niet meer bij de NIS-server komen.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ypserv</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Hoort alleen te draaien op NIS-servers. Dit is het NIS-serverproces zelf. Als <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> stopt, dan kan de server niet langer reageren op NIS-verzoeken (hopelijk is er dan een slaveserver om het over te nemen). Er zijn een aantal implementaties van NIS, maar niet die op FreeBSD, die geen verbinding met een andere server proberen te maken als de server waarmee ze verbonden waren niet meer reageert. In dat geval is vaak het enige dat werkt het serverproces herstarten (of zelfs de hele server) of het ypbind-proces op de cliënt.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpc.yppasswdd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Nog een proces dat alleen op NIS-masterservers hoort te draaien. Dit is een daemon waarbij NIS-cliënten hun NIS-wachtwoorden kunnen wijzigen. Als deze daemon niet draait, moeten gebruikers zich aanmelden op de NIS-masterserver en daar hun wachtwoord wijzigen.</p></td></tr></tbody></table></div><div class=sect2><h3 id=_hoe_werkt_het>29.4.3. Hoe werkt het?<a class=anchor href=#_hoe_werkt_het></a></h3><div class=paragraph><p>Er zijn drie typen hosts in een NIS-omgeving: master servers, slaveservers en cliënten. Servers zijn het centrale depot voor instellingen voor een host. Masterservers bevatten de geautoriseerd kopie van die informatie, terwijl slaveservers die informatie spiegelen voor redundantie. Cliënten verlaten zich op de servers om hun die informatie ter beschikking te stellen.</p></div><div class=paragraph><p>Op deze manier kan informatie uit veel bestanden gedeeld worden. De bestanden <span class=filename>master.passwd</span>, <span class=filename>group</span> en <span class=filename>hosts</span> worden meestal via NIS gedeeld. Als een proces op een cliënt informatie nodig heeft die normaliter in een van die lokale bestanden staat, dan vraagt die het in plaats daarvan aan de NIS-servers waarmee hij verbonden is.</p></div><div class=sect3><h4 id=_soorten_machines>29.4.3.1. Soorten machines<a class=anchor href=#_soorten_machines></a></h4><div class=ulist><ul><li><p>Een <em>NIS-masterserver</em>. Deze server onderhoudt, analoog aan een Windows NT® primaire domeincontroller, de bestanden die door alle NIS-cliënten gebruikt worden. De bestanden <span class=filename>passwd</span>, <span class=filename>group</span> en andere bestanden die door de NIS-cliënten gebruikt worden staan op de masterserver.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Het is mogelijk om één machine master server te laten zijn voor meerdere NIS-domeinen. Dat wordt in deze inleiding echter niet beschreven, omdat die uitgaat van een relatief kleine omgeving.</p></div></td></tr></tbody></table></div></li><li><p><em>NIS-slaveservers</em>. Deze zijn te vergelijken met Windows NT® backup domain controllers. NIS-slaveservers beheren een kopie van de bestanden met gegevens op de NIS-master. NIS-slaveservers bieden redundantie, die nodig is in belangrijke omgevingen. Ze helpen ook om de belasting te verdelen met de master server: NIS-cliënten maken altijd een verbinding met de NIS-server die het eerst reageert en dat geldt ook voor antwoorden van slaveservers.</p></li><li><p><em>NIS-cliënten</em>. NIS-cliënten authenticeren, net als de meeste Windows NT® werkstations, tegen de NIS-server (of de Windows NT® domain controller in het geval van Windows NT® werkstations) bij het aanmelden.</p></li></ul></div></div></div><div class=sect2><h3 id=_nisyp_gebruiken>29.4.4. NIS/YP gebruiken<a class=anchor href=#_nisyp_gebruiken></a></h3><div class=paragraph><p>Dit onderdeel behandelt het opzetten van een NIS-voorbeeldomgeving.</p></div><div class=sect3><h4 id=_plannen>29.4.4.1. Plannen<a class=anchor href=#_plannen></a></h4><div class=paragraph><p>Er wordt uitgegaan van een beheerder van een klein universiteitslab. Dat lab, dat bestaat uit FreeBSD machines, kent op dit moment geen centraal beheer. Iedere machine heeft zijn eigen <span class=filename>/etc/passwd</span> en <span class=filename>/etc/master.passwd</span>. Die bestanden worden alleen met elkaar in lijn gehouden door handmatige handelingen. Als er op dit moment een gebruiker aan het lab wordt toegevoegd, moet <code>adduser</code> op alle 15 machines gedraaid worden. Dat moet natuurlijk veranderen en daarom is besloten het lab in te richten met NIS, waarbij twee machines als server worden gebruikt.</p></div><div class=paragraph><p>Het lab ziet er ongeveer als volgt uit:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Machinenaam</th><th class="tableblock halign-left valign-top">IP-adres</th><th class="tableblock halign-left valign-top">Rol Machine</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ellington</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>NIS-master</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>coltrane</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>NIS-slave</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>basie</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.4</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Wetenschappelijk werkstation</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>bird</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Cliënt machine</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>cli[1-11]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.[6-17]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Andere cliënt machines</p></td></tr></tbody></table><div class=paragraph><p>Bij het voor de eerste keer instellen van een NIS-schema is het verstandig eerst na te denken over hoe dat opgezet moet worden. Hoe groot een netwerk ook is, er moeten een aantal beslissingen gemaakt worden.</p></div><div class=sect4><h5 id=_een_nis_domeinnaam_kiezen>29.4.4.1.1. Een NIS-domeinnaam kiezen<a class=anchor href=#_een_nis_domeinnaam_kiezen></a></h5><div class=paragraph><p>Dit is wellicht niet de bekende "domeinnaam". Daarom wordt het ook de "NIS-domeinnaam" genoemd. Bij de broadcast van een cliënt om informatie wordt ook de naam van het NIS-domein waar hij onderdeel van uitmaakt meegezonden. Zo kunnen meerdere servers op een netwerk bepalen of er antwoord gegeven dient te worden op een verzoek. De NIS-domeinnaam kan voorgesteld worden als de naam van een groep hosts die op een of andere manier aan elkaar gerelateerd zijn.</p></div><div class=paragraph><p>Sommige organisaties kiezen hun Internet-domeinnaam als NIS-domeinnaam. Dat wordt niet aangeraden omdat het voor verwarring kan zorgen bij het debuggen van netwerkproblemen. De NIS-domeinnaam moet uniek zijn binnen een netwerk en het is handig als die de groep machines beschrijft waarvoor hij geldt. Zo kan bijvoorbeeld de financiële afdeling van Acme Inc. als NIS-domeinnaam "acme-fin" hebben. In dit voorbeeld wordt de naam <code>test-domain</code> gekozen.</p></div><div class=paragraph><p>Sommige besturingssystemen gebruiken echter (met name SunOS™) hun NIS-domeinnaam als hun Internet-domeinnaam. Als er machines zijn op een netwerk die deze restrictie kennen, dan <em>moet</em> de Internet-domeinnaam als de naam voor het NIS-domeinnaam gekozen worden.</p></div></div><div class=sect4><h5 id=_systeemeisen>29.4.4.1.2. Systeemeisen<a class=anchor href=#_systeemeisen></a></h5><div class=paragraph><p>Bij het kiezen van een machine die als NIS-server wordt gebruikt zijn er een aantal aandachtspunten. Een van de onhandige dingen aan NIS is de afhankelijkheid van de cliënten van de server. Als een cliënt de server voor zijn NIS-domein niet kan bereiken, dan wordt die machine vaak onbruikbaar. Door het gebrek aan gebruiker- en groepsinformatie bevriezen de meeste systemen. Daarom moet er een machine gekozen worden die niet vaak herstart hoeft te worden of wordt gebruikt voor ontwikkeling. De NIS-server is in het meest ideale geval een alleenstaande server die als enige doel heeft NIS-server te zijn. Als een netwerk niet zwaar wordt gebruikt, kan de NIS-server op een machine die ook andere diensten aanbiedt gezet worden, maar het blijft belangrijk om ervan bewust te zijn dat als de NIS-server niet beschikbaar is, dat nadelige invloed heeft op <em>alle</em> NIS-cliënten.</p></div></div></div><div class=sect3><h4 id=_nis_servers>29.4.4.2. NIS-servers<a class=anchor href=#_nis_servers></a></h4><div class=paragraph><p>De hoofdversies van alle NIS-informatie staan opgeslagen op één machine die de NIS-masterserver heet. De databases waarin de informatie wordt opgeslagen heten NIS-afbeeldingen. In FreeBSD worden die afbeeldingen opgeslagen in <span class=filename>/var/yp/[domeinnaam]</span> waar <span class=filename>[domeinnaam]</span> de naam is van het NIS-domein dat wordt bediend. Een enkele NIS-server kan tegelijkertijd meerdere NIS-domeinen ondersteunen en het is dus mogelijk dat er meerdere van zulke mappen zijn, een voor ieder ondersteund domein. Ieder domein heeft zijn eigen onafhankelijke verzameling afbeeldingen.</p></div><div class=paragraph><p>In NIS-master- en -slaveservers worden alle NIS-verzoeken door de daemon <code>ypserv</code> afgehandeld. <code>ypserv</code> is verantwoordelijk voor het ontvangen van inkomende verzoeken van NIS-cliënten, het vertalen van de gevraagde domeinnaam en mapnaam naar een pad naar het corresponderende databasebestand en het terugsturen van de database naar de cliënten.</p></div><div class=sect4><h5 id=_een_nis_masterserver_opzetten>29.4.4.2.1. Een NIS-masterserver opzetten<a class=anchor href=#_een_nis_masterserver_opzetten></a></h5><div class=paragraph><p>Het opzetten van een master NIS-server kan erg eenvoudig zijn, afhankelijk van de behoeften. FreeBSD heeft ondersteuning voor NIS als basisfunctie. Alleen de volgende regels hoeven aan <span class=filename>/etc/rc.conf</span> toegevoegd te worden en FreeBSD doet de rest:</p></div><div class="exampleblock procedure"><div class=content><div class="literalblock programlisting"><div class=content><pre>nisdomainname=&#34;test-domain&#34;</pre></div></div><div class="olist arabic"><ol class=arabic><li><p>Deze regel stelt de NIS-domeinnaam in op <code>test-domain</code> bij het instellen van het netwerk (bij het opstarten).</p><div class="literalblock programlisting"><div class=content><pre>nis_server_enable=&#34;YES&#34;</pre></div></div></li><li><p>Dit geeft FreeBSD aan de NIS-serverprocessen te starten als het netwerk de volgende keer wordt opgestart.</p><div class="literalblock programlisting"><div class=content><pre>nis_yppasswdd_enable=&#34;YES&#34;</pre></div></div></li><li><p>Dit schakelt de daemon <code>rpc.yppasswdd</code> in die, zoals al eerder aangegeven, cliënten toestaat om hun NIS-wachtwoord vanaf een cliënt-machine te wijzigen.</p></li></ol></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Afhankelijk van de inrichting van NIS, kunnen er nog meer instellingen nodig zijn. In het onderdeel <a href=#network-nis-server-is-client>NIS-servers die ook NIS-cliënten zijn</a> staan meer details.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Draai na het instellen van bovenstaande regels het commando <code>/etc/netstart</code> als supergebruiker. Het zal alles voor u instellen, gebruikmakende van de waarden die u in <span class=filename>/etc/rc.conf</span> heeft ingesteld. Start als laatste stap, voor het initialiseren van de NIS-afbeeldingen, de daemon ypserv handmatig:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service ypserv start</span></code></pre></div></div></div><div class=sect4><h5 id=_nis_afbeeldingen_initialiseren>29.4.4.2.2. NIS-afbeeldingen initialiseren<a class=anchor href=#_nis_afbeeldingen_initialiseren></a></h5><div class=paragraph><p>Die <em>NIS-afbeeldingen</em> zijn databasebestanden die in de map <span class=filename>/var/yp</span> staan. Ze worden gemaakt uit de bestanden met instellingen uit de map <span class=filename>/etc</span> van de NIS-master, met één uitzondering: <span class=filename>/etc/master.passwd</span>. Daar is een goede reden voor, want het is niet wenselijk om de wachtwoorden voor <code>root</code> en andere administratieve accounts naar alle servers in het NIS-domein te sturen. Daar moet voor het initialiseren van de NIS-afbeeldingen het volgende uitgevoerd worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cp /etc/master.passwd /var/yp/master.passwd</span>
<span class=c># cd /var/yp</span>
<span class=c># vi master.passwd</span></code></pre></div></div><div class=paragraph><p>Dan horen alle systeemaccounts verwijderd te worden (<code>bin</code>, <code>tty</code>, <code>kmem</code>, <code>games</code>, enzovoort) en alle overige accounts waarvoor het niet wenselijk is dat ze op de NIS-cliënten terecht komen (bijvoorbeeld <code>root</code> en alle andere UID 0 (supergebruiker) accounts).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><span class=filename>/var/yp/master.passwd</span> hoort niet te lezen te zijn voor een groep of voor de wereld (dus modus 600)! Voor het aanpassen van de rechten kan <code>chmod</code> gebruikt worden.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Als dat is gedaan, kunnen de NIS-afbeeldingen geïnitialiseerd worden. Bij FreeBSD zit een script <code>ypinit</code> waarmee dit kan (in de hulppagina staat meer informatie). Dit script is beschikbaar op de meeste UNIX® besturingssystemen, maar niet op allemaal. Op Digital UNIX/Compaq Tru64 UNIX heet het <code>ypsetup</code>. Omdat er afbeeldingen voor een NIS-master worden gemaakt, wordt de optie <code>-m</code> meegegeven aan <code>ypinit</code>. Aangenomen dat de voorgaande stappen zijn uitgevoerd, kunnen de NIS-afbeeldingen gemaakt worden op de volgende manier:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# ypinit <span class=nt>-m</span> test-domain
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? <span class=o>[</span>y/n: n] n
Ok, please remember to go back and redo manually whatever fails.
If you don<span class=s1>&#39;t, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  coltrane
next host to add:  ^D
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] y

[..uitvoer van het maken van de afbeeldingen..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</span></code></pre></div></div><div class=paragraph><p><code>ypinit</code> hoort <span class=filename>/var/yp/Makefile</span> gemaakt te hebben uit <span class=filename>/var/yp/Makefile.dist</span>. Als dit bestand is gemaakt, neemt dat bestand aan dat er in een omgeving met een enkele NIS-server wordt gewerkt met alleen FreeBSD-machines. Omdat <code>test-domain</code> ook een slaveserver bevat, dient <span class=filename>/var/yp/Makefile</span> gewijzigd te worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# vi /var/yp/Makefile</code></pre></div></div><div class=paragraph><p>Als de onderstaande regel niet al uitgecommentarieerd is, dient dat alsnog te gebeuren:</p></div><div class="literalblock programlisting"><div class=content><pre>NOPUSH = &#34;True&#34;</pre></div></div></div><div class=sect4><h5 id=_een_nis_slaveserver_opzetten>29.4.4.2.3. Een NIS-slaveserver opzetten<a class=anchor href=#_een_nis_slaveserver_opzetten></a></h5><div class=paragraph><p>Het opzetten van een NIS-slaveserver is nog makkelijker dan het opzetten van de master. Dit kan door aan te melden op de slaveserver en net als voor de masterserver <span class=filename>/etc/rc.conf</span> te wijzigen. Het enige verschil is dat nu de optie <code>-s</code> gebruikt wordt voor het draaien van <code>ypinit</code>. Met de optie <code>-s</code> moet ook de naam van de NIS-master meegegeven worden. Het commando ziet er dus als volgt uit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>coltrane# ypinit <span class=nt>-s</span> ellington test-domain

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? <span class=o>[</span>y/n: n]  n

Ok, please remember to go back and redo manually whatever fails.
If you don<span class=s1>&#39;t, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don&#39;</span>t forget to update map ypservers on ellington.</code></pre></div></div><div class=paragraph><p>Nu hoort er een map <span class=filename>/var/yp/test-domain</span> te zijn waarin kopieë van de NIS-masterserver afbeeldingen staan. Die moeten bijgewerkt blijven. De volgende regel in <span class=filename>/etc/crontab</span> op de slaveservers regelt dat:</p></div><div class="literalblock programlisting"><div class=content><pre>20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre></div></div><div class=paragraph><p>Met de bovenstaande twee regels wordt de slave gedwongen zijn afbeeldingen met de afbeeldingen op de masterserver te synchroniseren. Dit is niet verplicht omdat de masterserver automatisch probeert veranderingen aan de NIS-afbeeldingen door te geven aan zijn slaves. Echter, vanwege het belang van correcte wachtwoordinformatie op andere cliënten die van de slaveserver afhankelijk zijn, is het aanbevolen om specifiek de wachtwoordafbeeldingen vaak tot bijwerken te dwingen. Dit is des te belangrijker op drukke netwerken, omdat daar het bijwerken van afbeeldingen niet altijd compleet afgehandeld hoeft te worden.</p></div><div class=paragraph><p>Nu kan ook op de slaveserver het commando <code>/etc/netstart</code> uitgevoerd worden, dat op zijn beurt de NIS-server start.</p></div></div></div><div class=sect3><h4 id=_nis_cliënten>29.4.4.3. NIS-cliënten<a class=anchor href=#_nis_cliënten></a></h4><div class=paragraph><p>Een NIS-cliënt maakt wat heet een verbinding (binding) met een NIS-server met de daemon <code>ypbind</code>. <code>ypbind</code> controleert het standaarddomein van het systeem (zoals ingesteld met <code>domainname</code>) en begint met het broadcasten van RPC-verzoeken op het lokale netwerk. Die verzoeken bevatten de naam van het domein waarvoor <code>ypbind</code> een binding probeert te maken. Als een server die is ingesteld om het gevraagde domein te bedienen een broadcast ontvangt, dan antwoordt die aan <code>ypbind</code> dat dan het IP-adres van de server opslaat. Als er meerdere servers beschikbaar zijn, een master en bijvoorbeeld meerdere slaves, dan gebruikt <code>ypbind</code> het adres van de eerste server die antwoord geeft. Vanaf dat moment stuurt de cliënt alle NIS-verzoeken naar die server. <code>ypbind</code> "pingt" de server zo nu en dan om te controleren of die nog draait. Als er na een bepaalde tijd geen antwoord komt op een ping, dan markeert <code>ypbind</code> het domein als niet verbonden en begint het broadcasten opnieuw, in de hoop dat er een andere server wordt gelocaliseerd.</p></div><div class=sect4><h5 id=_een_nis_cliënt_opzetten>29.4.4.3.1. Een NIS-cliënt opzetten<a class=anchor href=#_een_nis_cliënt_opzetten></a></h5><div class=paragraph><p>Het opzetten van een FreeBSD machine als NIS-cliënt is redelijk doorzichtig:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Wijzig <span class=filename>/etc/rc.conf</span> en voeg de volgende regels toe om de NIS-domeinnaam in te stellen en <code>ypbind</code> mee te laten starten bij het starten van het netwerk:</p><div class="literalblock programlisting"><div class=content><pre>nisdomainname=&#34;test-domain&#34;
nis_client_enable=&#34;YES&#34;</pre></div></div></li><li><p>Om alle mogelijke regels voor accounts uit de NIS-server te halen, dienen alle gebruikersaccounts uit <span class=filename>/etc/master.passwd</span> verwijderd te worden en dient met <code>vipw</code> de volgende regel aan het einde van het bestand geplaatst te worden:</p><div class="literalblock programlisting"><div class=content><pre>+:::::::::</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Door deze regel wordt alle geldige accounts in de wachtwoordafbeelding van de NIS-server toegang gegeven. Er zijn veel manieren om de NIS-cliënt in te stellen door deze regel te veranderen. In het onderdeel <a href=#network-netgroups>netgroepen</a> hieronder staat meer informatie. Zeer gedetailleerde informatie staat in het boek <code>NFS en NIS beheren</code> van O’Reilly.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Er moet tenminste één lokale account behouden blijven (dus niet geïmporteerd via NIS) in <span class=filename>/etc/master.passwd</span> en die hoort ook lid te zijn van de groep <code>wheel</code>. Als er iets mis is met NIS, dan kan die account gebruikt worden om via het netwerk aan te melden, <code>root</code> te worden en het systeem te repareren.</p></div></td></tr></tbody></table></div></li><li><p>Om alle groepen van de NIS-server te importeren, kan de volgende regel aan <span class=filename>/etc/group</span> toegevoegd worden:</p><div class="literalblock programlisting"><div class=content><pre>+:*::</pre></div></div></li></ol></div></div></div><div class=paragraph><p>Voer, om de NIS-cliënt onmiddelijk te starten, de volgende commando’s als supergebruiker uit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/netstart</span>
<span class=c># service ypbind start</span></code></pre></div></div><div class=paragraph><p>Na het afronden van deze stappen zou met <code>ypcat passwd</code> de passwd map van de NIS-server te zien moeten zijn.</p></div></div></div></div><div class=sect2><h3 id=_nis_beveiliging>29.4.5. NIS-beveiliging<a class=anchor href=#_nis_beveiliging></a></h3><div class=paragraph><p>In het algemeen kan iedere netwerkgebruiker een RPC-verzoek doen uitgaan naar <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> en de inhoud van de NIS-afbeeldingen ontvangen, mits die gebruiker de domeinnaam kent. Omdat soort ongeautoriseerde transacties te voorkomen, ondersteunt <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> de optie "securenets", die gebruikt kan worden om de toegang te beperken tot een opgegeven aantal hosts. Bij het opstarten probeert <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> de securenets informatie te laden uit het bestand <span class=filename>/var/yp/securenets</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Dit pad kan verschillen, afhankelijk van het pad dat opgegeven is met de optie <code>-p</code>. Dit bestand bevat regels die bestaan uit een netwerkspecificatie en een netwerkmasker, gescheiden door witruimte. Regels die beginnen met <code>#</code> worden als commentaar gezien. Een voorbeeld van een securenetsbestand zou er zo uit kunnen zien:</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre># allow connections from local host -- mandatory
127.0.0.1     255.255.255.255
# allow connections from any host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# allow connections from any host
# between 10.0.0.0 to 10.0.15.255
# this includes the machines in the testlab
10.0.0.0      255.255.240.0</pre></div></div><div class=paragraph><p>Als <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> een verzoek ontvangt van een adres dat overeenkomt met een van de bovenstaande regels, dan wordt dat verzoek normaal verwerkt. Als er geen enkele regel op het verzoek van toepassing is, dan wordt het verzoek genegeerd en wordt er een waarschuwing gelogd. Als het bestand <span class=filename>/var/yp/securenets</span> niet bestaat, dan accepteert <code>ypserv</code> verbindingen van iedere host.</p></div><div class=paragraph><p>Het programma <code>ypserv</code> ondersteunt ook het pakket TCP Wrapper van Wietse Venema. Daardoor kan een beheerder de instellingenbestanden van TCP Wrapper gebruiken voor toegangsbeperking in plaats van <span class=filename>/var/yp/securenets</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Hoewel beide methoden van toegangscontrole enige vorm van beveiliging bieden, zijn ze net als de geprivilegieerde poorttest kwetsbaar voor "IP spoofing" aanvallen. Al het NIS-gerelateerde verkeer hoort door een firewall tegengehouden te worden.</p></div><div class=paragraph><p>Servers die gebruik maken van <span class=filename>/var/yp/securenets</span> kunnen wellicht legitieme verzoeken van NIS-cliënten weigeren als die gebruik maken van erg oude TCP/IP-implementaties. Sommige van die implementaties zetten alle host bits op nul als ze een broadcast doen en/of kijken niet naar het subnetmasker als ze het broadcastadres berekenen. Hoewel sommige van die problemen opgelost kunnen worden door de instellingen op de cliënt aan te passen, zorgen andere problemen voor het noodgedwongen niet langer kunnen gebruiker van NIS voor die cliënt of het niet langer gebruiken van <span class=filename>/var/yp/securenets</span>.</p></div><div class=paragraph><p>Het gebruik van <span class=filename>/var/yp/securenets</span> op een server met zo’n oude implementatie van TCP/IP is echt een slecht idee en zal leiden tot verlies van NIS-functionaliteit voor grote delen van een netwerk.</p></div><div class=paragraph><p>Het gebruik van het pakket TCP Wrapper leidt tot langere wachttijden op de NIS-server. De extra vertraging kan net lang genoeg zijn om een timeout te veroorzaken in cliëntprogramma’s, in het bijzonder als het netwerk druk is of de NIS-server traag is. Als een of meer cliënten last hebben van dat symptoom, dan is het verstandig om de cliëntsysteem in kwestie NIS-slaveserver te maken en naar zichzelf te laten wijzen.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_aanmelden_voor_bepaalde_gebruikers_blokkeren>29.4.6. Aanmelden voor bepaalde gebruikers blokkeren<a class=anchor href=#_aanmelden_voor_bepaalde_gebruikers_blokkeren></a></h3><div class=paragraph><p>In het lab staat de machine <code>basie</code>, die alleen faculteitswerkstation hoort te zijn. Het is niet gewenst die machine uit het NIS-domein te halen, maar het <span class=filename>passwd</span> bestand op de master NIS-server bevat nu eenmaal accounts voor zowel de faculteit als de studenten. Hoe kan dat opgelost worden?</p></div><div class=paragraph><p>Er is een manier om het aanmelden van specifieke gebruikers op een machine te weigeren, zelfs als ze in de NIS-database staan. Daarvoor hoeft er alleen maar <code>-gebruikersnaam</code> met het juiste aantal dubbele punten (zoals bij andere regels) aan het einde van <span class=filename>/etc/master.passwd</span> op de cliëntmachine toegevoegd te worden, waar <em>gebruikersnaam</em> de gebruikersnaam van de gebruiker die niet mag aanmelden is. De regel met de geblokkeerde gebruiker moet voor de regel met <code>+</code> staan om NIS-gebruikers toe te staan. Dit gebeurt bij voorkeur met <code>vipw</code>, omdat <code>vipw</code> de wijzigingen aan <span class=filename>/etc/master.passwd</span> controleert en ook de wachtwoord database opnieuw bouwt na het wijzigen. Om bijvoorbeeld de gebruiker <code>bill</code> te kunnen laten aanmelden op <code>basie</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>basie# vipw
<span class=o>[</span>voeg <span class=nt>-bill</span>::::::::: aan het einde toe, <span class=nb>exit</span><span class=o>]</span>
vipw: rebuilding the database...
vipw: <span class=k>done

</span>basie# <span class=nb>cat</span> /etc/master.passwd

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:<span class=k>*</span>:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:<span class=k>*</span>:2:5::0:0:System &amp;:/:/sbin/nologin
bin:<span class=k>*</span>:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
<span class=nb>tty</span>:<span class=k>*</span>:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:<span class=k>*</span>:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:<span class=k>*</span>:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:<span class=k>*</span>:8:8::0:0:News Subsystem:/:/sbin/nologin
man:<span class=k>*</span>:9:9::0:0:Mister Man Pages:/usr/shared/man:/sbin/nologin
<span class=nb>bind</span>:<span class=k>*</span>:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:<span class=k>*</span>:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:<span class=k>*</span>:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:<span class=k>*</span>:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:<span class=k>*</span>:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
<span class=nt>-bill</span>:::::::::
+:::::::::

basie#</code></pre></div></div></div><div class=sect2><h3 id=network-netgroups>29.4.7. Netgroups gebruiken<a class=anchor href=#network-netgroups></a></h3><div class=paragraph><p>De methode uit het vorige onderdeel werkt prima als er maar voor een beperkt aantal gebruikers en/of machines speciale regels nodig zijn. Op grotere netwerken <em>gebeurt</em> het gewoon dat er wordt vergeten om een aantal gebruikers de aanmeldrechten op gevoelige machines te ontnemen of dat zelfs iedere individuele machine aangepast moet worden, waardoor het voordeel van NIS teniet wordt gedaan: <em>centraal</em> beheren.</p></div><div class=paragraph><p>De ontwikkelaars van NIS hebben dit probleem opgelost met <em>netgroepen</em>. Het doel en de semantiek kunnen vergeleken worden met de normale groepen die gebruikt worden op UNIX® bestandssystemen. De belangrijkste verschillen zijn de afwezigheid van een numeriek ID en de mogelijkheid om een netgroep aan te maken die zowel gebruikers als andere netgroepen bevat.</p></div><div class=paragraph><p>Netgroepen zijn ontwikkeld om gebruikt te worden voor grote, complexe netwerken met honderden gebruikers en machines. Aan de ene kant is dat iets Goeds. Aan de andere kant is het wel complex en bijna onmogelijk om netgroepen met een paar eenvoudige voorbeelden uit te leggen. Dat probleem wordt in de rest van dit onderdeel duidelijk gemaakt.</p></div><div class=paragraph><p>Stel dat de succesvolle implementatie van NIS in het lab de interesse heeft gewekt van een centrale beheerclub. De volgende taak is het uitbreiden van het NIS-domein met een aantal andere machines op de campus. De onderstaande twee tabellen bevatten de namen van de nieuwe gebruikers en de nieuwe machines met een korte beschijving.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Gebruikersnamen</th><th class="tableblock halign-left valign-top">Beschrijving</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>alpha</code>, <code>beta</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gewone medewerkers van de IT-afdeling</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>charlie</code>, <code>delta</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Junior medewerkers van de IT-afdeling</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>echo</code>, <code>foxtrott</code>, <code>golf</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gewone medewerkers</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>able</code>, <code>baker</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Stagiairs</p></td></tr></tbody></table><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Machinenamen</th><th class="tableblock halign-left valign-top">Beschrijving</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>war</code>, <code>death</code>, <code>famine</code>, <code>pollution</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>De belangrijkste servers. Alleen senior medewerkers van de IT-afdeling mogen hierop aanmelden.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pride</code>, <code>greed</code>, <code>envy</code>, <code>wrath</code>, <code>lust</code>, <code>sloth</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Minder belangrijke servers. Alle leden van de IT-afdeling mogen aanmelden op deze machines.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>one</code>, <code>two</code>, <code>three</code>, <code>four</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gewone werkstations. Alleen <em>echte</em> medewerkers mogen zich op deze machines aanmelden.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>trashcan</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Een erg oude machine zonder kritische data. Zelfs de stagiair mag deze doos gebruiken.</p></td></tr></tbody></table><div class=paragraph><p>Als deze restricties ingevoerd worden door iedere gebruiker afzonderlijk te blokkeren, dan wordt er een <code>-user</code> regel per systeem toegevoegd aan de <span class=filename>passwd</span> voor iedere gebruiker die niet mag aanmelden op dat systeem. Als er maar één regel wordt vergeten, kan dat een probleem opleveren. Wellicht lukt het nog dit juist in te stellen bij de bouw van een machine, maar het wordt <em>echt</em> vergeten de regels toe te voegen voor nieuwe gebruikers in de productiefase. Murphy was tenslotte een optimist.</p></div><div class=paragraph><p>Het gebruik van netgroepen biedt in deze situatie een aantal voordelen. Niet iedere gebruiker hoeft separaat afgehandeld te worden. Een gebruik kan aan een of meer groepen worden toegevoegd en aanmelden kan voor alle leden van zo’n groep worden toegestaan of geweigerd. Als er een nieuwe machine wordt toegevoegd, dan hoeven alleen de aanmeldrestricties voor de netgroepen te worden ingesteld. Als er een nieuwe gebruiker wordt toegevoegd, dan hoeft die alleen maar aan de juiste netgroepen te worden toegevoegd. Die veranderingen zijn niet van elkaar afhankelijk: geen "voor iedere combinatie van gebruiker en machine moet het volgende …​". Als de NIS-opzet zorgvuldig is gepland, dan hoeft er maar één instellingenbestand gewijzigd te worden om toegang tot machines te geven of te ontnemen.</p></div><div class=paragraph><p>De eerst stap is het initialiseren van de NIS-afbeelding netgroup. <a href="https://man.freebsd.org/cgi/man.cgi?query=ypinit&amp;sektion=8&amp;format=html">ypinit(8)</a> van FreeBSD maakt deze map niet standaard, maar als die is gemaakt, ondersteunt de NIS-implementatie hem wel. Een lege map wordt als volgt gemaakt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# vi /var/yp/netgroup</code></pre></div></div><div class=paragraph><p>Nu kan hij gevuld worden. In het gebruikte voorbeeld zijn tenminste vier netgroepen: IT-medewerkers, IT-junioren, gewone medewerkers en stagiars.</p></div><div class="literalblock programlisting"><div class=content><pre>IT_MW   (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
        (,golf,test-domain)
STAGS   (,able,test-domain)     (,baker,test-domain)</pre></div></div><div class=paragraph><p><code>IT_MW</code>, <code>IT_APP</code> enzovoort, zijn de namen van de netgroepen. Iedere groep tussen haakjes bevat een of meer gebruikersnamen voor die groep. De drie velden binnen een groep zijn:</p></div><div class="olist arabic"><ol class=arabic><li><p>De naam van de host of namen van de hosts waar de volgende onderdelen geldig zijn. Als er geen hostnaam wordt opgegeven dan is de regel geldig voor alle hosts. Als er wel een hostnaam wordt opgegeven, dan wordt een donker, spookachtig en verwarrend domein betreden.</p></li><li><p>De naam van de account die bij deze netgroep hoort.</p></li><li><p>Het NIS-domein voor de account. Er kunnen accounts uit andere NIS-domeinen geïmporteerd worden in een netgroep als een beheerder zo ongelukkig is meerdere NIS-domeinen te hebben.</p></li></ol></div><div class=paragraph><p>Al deze velden kunnen jokerkarakters bevatten. Details daarover staan in <a href="https://man.freebsd.org/cgi/man.cgi?query=netgroup&amp;sektion=5&amp;format=html">netgroup(5)</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>De naam van een netgroep mag niet langer zijn dan acht karakters, zeker niet als er andere besturingssystemen binnen een NIS-domein worden gebruikt. De namen zijn hoofdlettergevoelig: alleen hoofdletters gebruiken voor de namen van netgroepen is een makkelijke manier om onderscheid te kunnen maken tussen gebruikers-, machine- en netgroepnamen.</p></div><div class=paragraph><p>Sommige NIS-cliënten (andere dan die op FreeBSD draaien) kunnen niet omgaan met netgroepen met veel leden. Sommige oudere versies van SunOS™ gaan bijvoorbeeld lastig doen als een netgroep meer dan 15 <em>leden</em> heeft. Dit kan omzeild worden door meerdere subnetgroepen te maken met 15 gebruikers of minder en een echte netgroep die de subnetgroepen bevat:</p></div><div class="literalblock programlisting"><div class=content><pre>BIGGRP1  (,joe1,domain)  (,joe2,domain)  (,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre></div></div><div class=paragraph><p>Dit proces kan herhaald worden als er meer dan 225 gebruikers in een netgroep moeten.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Het activeren en distribueren van de nieuwe NIS-map is eenvoudig:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# <span class=nb>cd</span> /var/yp
ellington# make</code></pre></div></div><div class=paragraph><p>Hiermee worden drie nieuwe NIS-afbeeldingen gemaakt: <span class=filename>netgroup</span>, <span class=filename>netgroup.byhost</span> en <span class=filename>netgroup.byuser</span>. Met <a href="https://man.freebsd.org/cgi/man.cgi?query=ypcat&amp;sektion=1&amp;format=html">ypcat(1)</a> kan bekeken worden op de nieuwe NIS-afbeeldingen beschikbaar zijn:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington% ypcat <span class=nt>-k</span> netgroup
ellington% ypcat <span class=nt>-k</span> netgroup.byhost
ellington% ypcat <span class=nt>-k</span> netgroup.byuser</code></pre></div></div><div class=paragraph><p>De uitvoer van het eerste commando hoort te lijken op de inhoud van <span class=filename>/var/yp/netgroup</span>. Het tweede commando geeft geen uitvoer als er geen host-specifieke netgroepen zijn ingesteld. Het derde commando kan gebruikt worden om een lijst van netgroepen voor een gebruiker op te vragen.</p></div><div class=paragraph><p>Het instellen van de cliënt is redelijk eenvoudig. Om de server <code>war</code> in te stellen hoeft alleen met <a href="https://man.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;format=html">vipw(8)</a> de volgende regel in de regel daarna vervangen te worden:</p></div><div class="literalblock programlisting"><div class=content><pre>+:::::::::</pre></div></div><div class=paragraph><p>Vervang de bovenstaande regel in de onderstaande.</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_MW:::::::::</pre></div></div><div class=paragraph><p>Nu worden alleen de gebruikers die in de netgroep <code>IT_MW</code> geïmporteerd in de wachtwoorddatabase van de host <code>war</code>, zodat alleen die gebruikers zich kunnen aanmelden.</p></div><div class=paragraph><p>Helaas zijn deze beperkingen ook van toepassing op de functie <code>~</code> van de shell en alle routines waarmee tussen gebruikersnamen en numerieke gebruikers ID’s wordt gewisseld. Met andere woorden: <code>cd ~user</code> werkt niet, <code>ls -l</code> toont het numerieke ID in plaats van de gebruikersnaam en <code>find . -user joe -print</code> faalt met de foutmelding <code>No such user</code>. Om dit te repareren moeten alle gebruikers geïmporteerd worden, <em>zonder ze het recht te geven aan te melden op een server</em>.</p></div><div class=paragraph><p>Dit kan gedaan worden door nog een regel aan <span class=filename>/etc/master.passwd</span> toe te voegen:</p></div><div class="literalblock programlisting"><div class=content><pre>+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Dit betekent "importeer alle gebruikers, maar vervang de shell door <span class=filename>/sbin/nologin</span>". Ieder veld in een <code>passwd</code> regel kan door een standaardwaarde vervangen worden in <span class=filename>/etc/master.passwd</span>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>De regel <code>:::::::::/sbin/nologin` moet na `@IT_MW:::::::::</code> komen. Anders krijgen alle gebruikers die uit NIS-komen <span class=filename>/sbin/nologin</span> als aanmeldshell.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Na deze wijziging hoeft er nog maar één NIS-afbeelding gewijzigd te worden als er een nieuwe medewerker komt bij de IT-afdeling. Dezelfde aanpak kan gebruikt worden voor de minder belangrijke servers door de oude regel <code>+:::::::::</code> in de lokale versie van <span class=filename>/etc/master.passwd</span> door iets als het volgende te vervangen:</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_MW:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Voor normale werkstations zijn het de volgende regels:</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_MW:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>En dat zou allemaal leuk en aardig zijn als er niet na een paar weken een beleidsverandering komt: de IT-afdeling gaat stagiairs aannemen. De IT-stagiairs mogen de normale werkstations en de minder belangrijke servers gebruiken en de juniorbeheerders mogen gaan aanmelden op de hoofdservers. Dat kan door een nieuwe groep <code>IT_STAG</code> te maken en de nieuwe IT-stagiairs toe te voegen aan die netgroep en dan de instellingen op iedere machine te gaan veranderen. Maar zoals het spreekwoord zegt: "Fouten in een centrale planning leiden tot complete chaos."</p></div><div class=paragraph><p>Deze situaties kunnen voorkomen worden door gebruik te maken van de mogelijkheid in NIS om netgroepen in netgroepen op te nemen. Het is mogelijk om rolgebaseerde netgroepen te maken. Er kan bijvoorbeeld een netgroep <code>BIGSRV</code> gemaakt worden om het aanmelden op de belangrijke servers te beperken en er kan een andere netgroep <code>SMALLSRV</code> voor de minder belangrijke servers zijn en een derde netgroep met de naam <code>USERBOX</code> voor de normale werkstations. Al die netgroepen kunnen de netgroepen bevatten die op die machines mogen aanmelden. De nieuwe regels in de NIS-afbeelding netgroup zien er dan zo uit:</p></div><div class="literalblock programlisting"><div class=content><pre>BIGSRV    IT_MW  IT_APP
SMALLSRV  IT_MW  IT_APP  ITSTAG
USERBOX   IT_MW  ITSTAG USERS</pre></div></div><div class=paragraph><p>Deze methode voor het instellen van aanmeldbeperkingen werkt redelijk goed als er groepen van machines gemaakt kunnen worden met identieke beperkingen. Helaas blijkt dat eerder uitzondering dan regel. Meestal moet het mogelijk zijn om per machine in te stellen wie zich wel en wie zich niet mogen aanmelden.</p></div><div class=paragraph><p>Daarom is het ook mogelijk om via machinespecifieke netgroepen de hierboven aangegeven beleidswijziging op te vangen. In dat scenario bevat <span class=filename>/etc/master.passwd</span> op iedere machine twee regels die met "+" beginnen. De eerste voegt de netgroep toe met de accounts die op de machine mogen aanmelden en de tweede voegt alle andere accounts toe met <span class=filename>/sbin/nologin</span> als shell. Het is verstandig om als naam van de netgroep de machinenaam in "HOOFDLETTERS" te gebruiken. De regels zien er ongeveer als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>+@MACHINENAAM:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Als dit voor alle machines is gedaan, dan hoeven de lokale versies van <span class=filename>/etc/master.passwd</span> nooit meer veranderd te worden. Alle toekomstige wijzigingen kunnen dan gemaakt worden door de NIS-afbeelding te wijzigen. Hieronder staat een voorbeeld van een mogelijke netgroep map voor het beschreven scenario met een aantal toevoegingen:</p></div><div class="literalblock programlisting"><div class=content><pre># Definieer eerst de gebruikersgroepen
IT_MW     (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITSTAG    (,kilo,test-domain)     (,lima,test-domain)
D_STAGS   (,able,test-domain)     (,baker,test-domain)
#
# En nu een aantal groepen op basis van rollen
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_MW   IT_APP
SMALLSRV  IT_MW   IT_APP    ITSTAG
USERBOX   IT_MW   ITSTAG    USERS
#
# Een een groep voor speciale taken.
# Geef echo en golf toegang tot de anti-virus machine.
SECURITY  IT_MW   (,echo,test-domain)  (,golf,test-domain)
#
# Machinegebaseerde netgroepen
# Hoofdservers
WAR       BIGSRV
FAMINE    BIGSRV
# Gebruiker india heeft toegang tot deze server nodig.
POLLUTION  BIGSRV  (,india,test-domain)
#
# Deze is erg belangrijk en heeft strengere toegangseisen nodig.
DEATH     IT_MW
#
# De anti-virus machine als hierboven genoemd.
ONE       SECURITY
#
# Een machine die maar door 1 gebruiker gebruikt mag worden.
TWO       (,hotel,test-domain)
# [...hierna volgen de andere groepen]</pre></div></div><div class=paragraph><p>Als er een soort database wordt gebruikt om de gebruikersaccounts te beheren, dan is het in ieder geval nodig dat ook het eerste deel van de afbeelding met de databaserapportagehulpmiddelen gemaakt kan worden. Dan krijgen nieuwe gebruikers automatisch toegang tot de machines.</p></div><div class=paragraph><p>Nog een laatste waarschuwing: het is niet altijd aan te raden gebruik te maken van machinegebaseerde netgroepen. Als er tientallen of zelfs honderden gelijke machines voor bijvoorbeeld studentenruimtes worden uitgerold, dan is het verstandiger rolgebaseerde netgroepen te gebruiken in plaats van machinegebaseerde netgroepen om de grootte van de NIS-afbeelding binnen de perken te houden.</p></div></div><div class=sect2><h3 id=_belangrijk_om_te_onthouden>29.4.8. Belangrijk om te onthouden<a class=anchor href=#_belangrijk_om_te_onthouden></a></h3><div class=paragraph><p>In een NIS-omgeving werken een aantal dingen wel anders.</p></div><div class=ulist><ul><li><p>Als er een gebruiker toegevoegd moet worden, dan moet die <em>alleen</em> toegevoegd worden aan de master NIS-server en <em>mag niet vergeten worden dat de NIS-afbeeldingen herbouwd moeten worden</em>. Als dit wordt vergeten, dan kan de nieuwe gebruiker nergens anders aanmelden dan op de NIS-master. Als bijvoorbeeld een nieuwe gebruiker <code>jsmith</code> toegevoegd moet worden:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw useradd jsmith</span>
<span class=c># cd /var/yp</span>
<span class=c># make test-domain</span></code></pre></div></div><div class=paragraph><p>Er kan ook <code>adduser jsmith</code> in plaats van <code>pw useradd jsmith</code> gebruikt worden.</p></div></li><li><p><em>De beheeraccounts moeten buiten de NIS-afbeeldingen gehouden worden</em>. Het is niet handig als de beheeraccounts en wachtwoorden naar machines waarop gebruikers zich aanmelden die geen toegang tot die informatie horen te hebben zouden gaan.</p></li><li><p><em>De NIS-master en slave moeten veilig blijven en zo min mogelijk niet beschikbaar zijn</em>. Als de machine wordt gehackt of als hij wordt uitgeschakeld, dan kunnen er in theorie nogal wat mensen niet meer aanmelden.</p><div class=paragraph><p>Dit is de belangrijkste zwakte van elk gecentraliseerd beheersysteem. Als de NIS-servers niet goed beschermd worden, dan worden veel gebruikers boos!</p></div></li></ul></div></div><div class=sect2><h3 id=_nis_v1_compatibiliteit>29.4.9. NIS v1-compatibiliteit<a class=anchor href=#_nis_v1_compatibiliteit></a></h3><div class=paragraph><p>ypserv voor FreeBSD biedt wat ondersteuning voor NIS v1 cliënten. De NIS-implementatie van FreeBSD gebruikt alleen het NIS v2 protocol, maar andere implementaties bevatten ondersteuning voor het v1 protocol voor achterwaartse compatibiliteit met oudere systemen. De ypbind-daemons die bij deze systemen zitten proberen een binding op te zetten met een NIS v1 server, hoewel dat niet per se ooit nodig is (en ze gaan misschien nog wel door met broadcasten nadat ze een antwoord van een v2 server hebben ontvangen). Het is belangrijk om te melden dat hoewel ondersteuning voor gewone cliëntoproepen aanwezig is, deze versie van ypserv geen overdrachtsverzoeken voor v1-afbeeldingen af kan handelen. Daarom kan ypserv niet gebruikt worden als master of slave in combinatie met oudere NIS-servers die alleen het v1 protocol ondersteunen. Gelukkig worden er in deze tijd niet meer zoveel van deze servers gebruikt.</p></div></div><div class=sect2><h3 id=network-nis-server-is-client>29.4.10. NIS-servers die ook NIS-cliënten zijn<a class=anchor href=#network-nis-server-is-client></a></h3><div class=paragraph><p>Het is belangrijk voorzichtig om te gaan met het draaien van ypserv in een multi-server domein waar de server machines ook NIS-cliënten zijn. Het is in het algemeen verstandiger om de servers te dwingen met zichzelf te binden dan ze toe te staan een bindverzoek te broadcasten en het risico te lopen dat ze een binding met elkaar maken. Er kunnen vreemde fouten optreden als een van de servers plat gaat als er andere servers van die server afhankelijk zijn. Na verloop van tijd treedt op de cliënten wel een timeout op en verbinden ze met een andere server, maar de daarmee gepaard gaande vertraging kan aanzienlijk zijn en de foutmodus is nog steeds van toepassing, omdat de servers dan toch weer opnieuw een verbinding met elkaar kunnen vinden.</p></div><div class=paragraph><p>Het is mogelijk een host aan een specifieke server te binden door aan <code>ypbind</code> de vlag <code>-S</code> mee te geven. Om dit niet iedere keer handmatig na een herstart te hoeven uitvoeren, kan de volgende regel worden opgenomen in <span class=filename>/etc/rc.conf</span> van de NIS-server:</p></div><div class="literalblock programlisting"><div class=content><pre>nis_client_enable=&#34;YES&#34;	# start ook het cliënt gedeelte
nis_client_flags=&#34;-S NIS domain,server&#34;</pre></div></div><div class=paragraph><p>In <a href="https://man.freebsd.org/cgi/man.cgi?query=ypbind&amp;sektion=8&amp;format=html">ypbind(8)</a> staat meer informatie.</p></div></div><div class=sect2><h3 id=_wachtwoordformaten>29.4.11. Wachtwoordformaten<a class=anchor href=#_wachtwoordformaten></a></h3><div class=paragraph><p>Een van de meest voorkomende problemen bij het implementeren van NIS is de compatibiliteit van het wachtwoordformaat. Als een NIS-server wachtwoorden gebruikt die met DES gecodeerd zijn, dan kunnen alleen cliënten die ook DES gebruiken ondersteund worden. Als er bijvoorbeeld Solaris™ NIS-cliënten in een netwerk zijn, dan moet er vrijwel zeker gebruik gemaakt worden van met DES gecodeerde wachtwoorden.</p></div><div class=paragraph><p>Van welk formaat cliënten en servers gebruik maken is te zien in <span class=filename>/etc/login.conf</span>. Als een host gebruik maakt van met DES gecodeerde wachtwoorden, dan staat er in de klasse <code>default</code> een regel als de volgende:</p></div><div class="literalblock programlisting"><div class=content><pre>default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[Overige regels weggelaten]</pre></div></div><div class=paragraph><p>Andere mogelijke waarden voor <code>passwd_format</code> zijn <code>blf</code> en <code>md5</code> (respectievelijk voor Blowfish en MD5 gecodeerde wachtwoorden).</p></div><div class=paragraph><p>Als er wijzigingen gemaakt zijn aan <span class=filename>/etc/login.conf</span> dan moet de login capability database herbouwd worden door het volgende commando als <code>root</code> uit te voeren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cap_mkdb /etc/login.conf</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Het formaat van de wachtwoorden die al in <span class=filename>/etc/master.passwd</span> staan worden niet bijgewerkt totdat een gebruiker zijn wachtwoord voor de eerste keer wijzigt <em>nadat</em> de login capability database is herbouwd.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Om te zorgen dat de wachtwoorden in het gekozen formaat zijn gecodeerd, moet daarna gecontroleerd worden of de waarde <code>crypt_default</code> in <span class=filename>/etc/auth.conf</span> de voorkeur geeft aan het gekozen formaat. Om dat te realiseren dient het gekozen formaat vooraan gezet te worden in de lijst. Als er bijvoorbeeld gebruik gemaakt wordt van DES gecodeerde wachtwoorden, dan hoort de regel er als volgt uit te zien:</p></div><div class="literalblock programlisting"><div class=content><pre>crypt_default	=	des blf md5</pre></div></div><div class=paragraph><p>Als de bovenstaande stappen op alle FreeBSD gebaseerde NIS-servers en cliënten zijn uitgevoerd, dan is het zeker dat ze het allemaal eens zijn over welk wachtwoordformaat er op het netwerk wordt gebruikt. Als er problemen zijn bij de authenticatie op een NIS-cliënt, dan is dit een prima startpunt voor het uitzoeken waar de problemen vandaan komen. Nogmaals: als er een NIS-server in een heterogene omgeving wordt geplaatst, dan is het waarschijnlijk dat er gebruik gemaakt moet worden van DES op alle systemen, omdat dat de laagst overeenkomende standaard is.</p></div></div></div></div><div class=sect1><h2 id=network-dhcp>29.5. Automatisch netwerk instellen (DHCP)<a class=anchor href=#network-dhcp></a></h2><div class=sectionbody><div class=sect2><h3 id=_wat_is_dhcp>29.5.1. Wat is DHCP?<a class=anchor href=#_wat_is_dhcp></a></h3><div class=paragraph><p>DHCP, het Dynamic Host Configuration Protocol, schrijft voor hoe een systeem verbinding kan maken met een netwerk en hoe het de benodigde informatie kan krijgen om met dat netwerk te communiceren. FreeBSD gebruikt de OpenBSD <code>dhclient</code> welke uit OpenBSD 3.7 komt. Alle informatie over <code>dhclient</code> kan zowel voor de ISC als de OpenBSD DHCP-cliënt gebruikt worden. De DHCP-server zit bij de ISC-distributie.</p></div></div><div class=sect2><h3 id=_wat_behandeld_wordt>29.5.2. Wat behandeld wordt<a class=anchor href=#_wat_behandeld_wordt></a></h3><div class=paragraph><p>In dit onderdeel worden de cliëntcomponenten van de ISC en OpenBSD DHCP-cliënt en de servercomponenten van het ISC DHCP-systeem beschreven. Het programma voor de cliënt, <code>dhclient</code>, zit standaard in FreeBSD en de server is beschikbaar via de port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp42-server/>net/isc-dhcp42-server</a>. Naast de onderstaande informatie, zijn de hulppagina’s van <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5&amp;format=html">dhcp-options(5)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5&amp;format=html">dhclient.conf(5)</a> bruikbare bronnen.</p></div></div><div class=sect2><h3 id=_hoe_het_werkt>29.5.3. Hoe het werkt<a class=anchor href=#_hoe_het_werkt></a></h3><div class=paragraph><p>Als <code>dhclient</code>, de DHCP-cliënt, wordt uitgevoerd op een cliëntmachine, dan begint die met het broadcasten van verzoeken om instellingeninformatie. Standaard worden deze verzoeken op UDP poort 68 gedaan. De server antwoordt op UDP 67 en geeft de cliënt een IP-adres en andere relevante netwerkinformatie, zoals een netmasker, router en DNS-servers. Al die informatie komt in de vorm van een DHCP "lease" en is voor een bepaalde tijd geldig (die is ingesteld door de beheerder van de DHCP-server). Op die manier kunnen IP-adressen voor cliënten die niet langer met het netwerk verbonden zijn (stale) automatisch weer ingenomen worden.</p></div><div class=paragraph><p>DHCP-cliënten kunnen veel informatie van de server krijgen. Er staat een uitputtende lijst in <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5&amp;format=html">dhcp-options(5)</a>.</p></div></div><div class=sect2><h3 id=_freebsd_integratie>29.5.4. FreeBSD integratie<a class=anchor href=#_freebsd_integratie></a></h3><div class=paragraph><p>FreeBSD integreert de OpenBSD DHCP-cliënt <code>dhclient</code> volledig. Er is ondersteuning voor de DHCP-cliënt in zowel het installatieprogramma als in het basissysteem, waardoor het niet noodzakelijk is om kennis te hebben van het maken van netwerkinstellingen voor het netwerk waar een DHCP-server draait.</p></div><div class=paragraph><p>DHCP wordt ondersteund door sysinstall. Bij het instellen van een netwerkinterface binnen sysinstall is de tweede vraag: "Wil je proberen de interface met DHCP in te stellen?" Als het antwoord bevestigend luidt, dan wordt <code>dhclient</code> uitgevoerd en als dat succesvol verloopt, dan worden de netwerkinstellingen automatisch ingevuld.</p></div><div class=paragraph><p>Voor het gebruiken van DHCP bij het opstarten van het systeem zijn twee instellingen nodig:</p></div><div class=ulist><ul><li><p>Het apparaat <span class=filename>bpf</span> moet in de kernel gecompileerd zijn. Dit kan door <code>device bpf</code> aan het bestand met kernelinstellingen toe te voegen en de kernel te herbouwen. Meer informatie over het bouwen van een kernel staat in <a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a>.</p><div class=paragraph><p>Het apparaat <span class=filename>bpf</span> is al onderdeel van de <span class=filename>GENERIC</span> kernel die bij FreeBSD zit, dus als er geen sprake is van een aangepaste kernel, dan hoeft er geen nieuwe gemaakt te worden om DHCP aan te praat te krijgen.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Voor de lezer die bijzonder begaan is met beveiliging, is het belangrijk aan te geven dat <span class=filename>bpf</span> ook het apparaat is waardoor pakketsnuffelaars hun werk kunnen doen (hoewel ze nog steeds als <code>root</code> moeten draaien). <span class=filename>bpf</span><em>is</em> noodzakelijk voor DHCP, maar als beveiliging bijzonder belangrijk is, dan hoort <span class=filename>bpf</span> waarschijnlijk niet in een kernel te zitten omdat de verwachting dat er in de toekomst ooit DHCP gebruikt gaat worden.</p></div></td></tr></tbody></table></div></li><li><p>Standaard draait de DHCP-synchronisatie op FreeBSD in de achtergrond, of <em>asynchroon</em>. Andere opstartscripten gaan verder terwijl DHCP wordt voltooid, wat het opstarten van het systeem versnelt.</p><div class=paragraph><p>DHCP in de achtergrond werkt goed als de DHCP-server snel op verzoeken reageert en het DHCP-configuratieproces snel gaat. Op sommige systemen kan het lang duren voordat DHCP klaar is. Als netwerkdiensten proberen te draaien voordat DHCP voltooid is, zullen ze falen. Door DHCP in <em>synchrone</em> modus te draaien wordt dit probleem voorkomen en wordt het opstarten gepauzeerd totdat de DHCP-configuratie voltooid is.</p></div><div class=paragraph><p>Gebruik om in de achtergrond verbinding te maken met een DHCP-server terwijl andere opstartscripts verder gaan (asynchrone modus) de waarde “DHCP” in <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0=&#34;DHCP&#34;</pre></div></div><div class=paragraph><p>Gebruik om het opstarten te pauzeren totdat DHCP voltooid is de synchrone modus met waarde “SYNDHCP”:</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0=&#34;SYNDHCP&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Vervang <em>fxp0</em> zoals getoond in deze voorbeelden met de naam van de interface dat dynamisch geconfigureerd moet worden, zoals getoond in <a href=../config/#config-network-setup>Netwerkkaarten instellen</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Als er een andere lokatie voor <code>dhclient</code> wordt gebruikt of als er extra parameters aan <code>dhclient</code> meegegeven moeten worden, dan dient ook iets als het volgende toegevoegd te worden:</p></div><div class="literalblock programlisting"><div class=content><pre>dhclient_program=&#34;/sbin/dhclient&#34;
dhclient_flags=&#34;&#34;</pre></div></div></li></ul></div><div class=paragraph><p>De DHCP-server, dhcpd, zit bij de port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp42-server/>net/isc-dhcp42-server</a> in de Portscollectie. Deze port bevat de ISC DHCP-server en documentatie.</p></div></div><div class=sect2><h3 id=_bestanden>29.5.5. Bestanden<a class=anchor href=#_bestanden></a></h3><div class=ulist><ul><li><p><span class=filename>/etc/dhclient.conf</span></p><div class=paragraph><p>Voor <code>dhclient</code> is een instellingenbestand <span class=filename>/etc/dhclient.conf</span> nodig. Dat bestand bevat meestal alleen maar commentaar, omdat de standaardinstellingen redelijk zinvol zijn. Dit bestand wordt beschreven in <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5&amp;format=html">dhclient.conf(5)</a>.</p></div></li><li><p><span class=filename>/sbin/dhclient</span></p><div class=paragraph><p><code>dhclient</code> is statisch gelinkt en staat in <span class=filename>/sbin</span>. Er staat meer informatie over <code>dhclient</code> in <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a>.</p></div></li><li><p><span class=filename>/sbin/dhclient-script</span></p><div class=paragraph><p><code>dhclient-script</code> is het FreeBSD-specifieke DHCP-cliënt instellingenscript. Het wordt beschreven in <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8&amp;format=html">dhclient-script(8)</a>, maar het is niet nodig het te wijzigen om goed te werken.</p></div></li><li><p><span class=filename>/var/db/dhclient.leases.interface</span></p><div class=paragraph><p>De DHCP-cliënt houdt in dit bestand een database bij van geldige leases, die naar een logboekbestand worden geschreven. In <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5&amp;format=html">dhclient.leases(5)</a> staat een iets uitgebreidere beschrijving.</p></div></li></ul></div></div><div class=sect2><h3 id=_verder_lezen>29.5.6. Verder lezen<a class=anchor href=#_verder_lezen></a></h3><div class=paragraph><p>Het DHCP-protocol staat volledig beschreven in <a href=http://www.freesoft.org/CIE/RFC/2131/>RFC 2131</a>. Er is nog een bron van informatie ingesteld op <a href=http://www.dhcp.org/>http://www.dhcp.org/</a>.</p></div></div><div class=sect2><h3 id=network-dhcp-server>29.5.7. Een DHCP-server installeren en instellen<a class=anchor href=#network-dhcp-server></a></h3><div class=sect3><h4 id=_wat_behandeld_wordt_2>29.5.7.1. Wat behandeld wordt<a class=anchor href=#_wat_behandeld_wordt_2></a></h4><div class=paragraph><p>In dit onderdeel wordt beschreven hoe een FreeBSD systeem zo ingesteld kan worden dat het opereert als DHCP-server door gebruik te maken van de ISC (Internet Systems Consortium) implementatie van de DHCP-server.</p></div><div class=paragraph><p>De server wordt niet geleverd als deel van FreeBSD en om deze dienst aan te bieden dient de port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp42-server/>net/isc-dhcp42-server</a> geïnstalleerd te worden. In <a href=../ports/#ports>Applicaties installeren. pakketten en ports</a> staat meer informatie over de Portscollectie.</p></div></div><div class=sect3><h4 id=_dhcp_serverinstallatie>29.5.7.2. DHCP-serverinstallatie<a class=anchor href=#_dhcp_serverinstallatie></a></h4><div class=paragraph><p>Om een FreeBSD systeem in te stellen als DHCP-server moet het apparaat <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> in de kernel zijn opgenomen. Om dit te doen dient <code>device bpf</code> aan het bestand met kernelinstellingen toegevoegd te worden en dient de kernel herbouwd te worden. Meer informatie over het bouwen van kernels staat in <a href=../kernelconfig/#kernelconfig>De FreeBSD-kernel instellen</a>.</p></div><div class=paragraph><p>Het apparaat <span class=filename>bpf</span> is al onderdeel van de <span class=filename>GENERIC</span> kernel die bij FreeBSD, dus het is meestal niet nodig om een aangepaste kernel te bouwen om DHCP aan de praat te krijgen.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Het is belangrijk te vermelden dat <span class=filename>bpf</span> ook het apparaat is waardoor pakketsnuffelaars kunnen werken (hoewel de programma’s die er gebruik van maken wel bijzondere toegang nodig hebben). <span class=filename>bpf</span><em>is</em> verplicht voor DHCP, maar als beveiliging van belang is, dan is het waarschijnlijk niet verstandig om <span class=filename>bpf</span> in een kernel op te nemen alleen omdat er in de toekomst misschien ooit DHCP gebruikt gaat worden.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Hierna dient het standaardbestand <span class=filename>dhcpd.conf</span> dat door de port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp42-server/>net/isc-dhcp42-server</a> is geïnstalleerd gewijzigd te worden. Standaard is dit <span class=filename>/usr/local/etc/dhcpd.conf.sample</span> en dit bestand dient gekopieerd te worden naar <span class=filename>/usr/local/etc/dhcpd.conf</span> voordat de wijzigingen worden gemaakt.</p></div></div><div class=sect3><h4 id=_de_dhcp_server_instellen>29.5.7.3. De DHCP-server instellen<a class=anchor href=#_de_dhcp_server_instellen></a></h4><div class=paragraph><p><span class=filename>dhcpd.conf</span> is opgebouwd uit declaraties over subnetten en hosts en is wellicht het meest eenvoudig te beschrijven met een voorbeeld:</p></div><div class="literalblock programlisting"><div class=content><pre>option domain-name &#34;example.com&#34;; <i class=conum data-value=1></i><b>(1)</b>
option domain-name-servers 192.168.4.100; <i class=conum data-value=2></i><b>(2)</b>
option subnet-mask 255.255.255.0; <i class=conum data-value=3></i><b>(3)</b>

default-lease-time 3600; <i class=conum data-value=4></i><b>(4)</b>
max-lease-time 86400; <i class=conum data-value=5></i><b>(5)</b>
ddns-update-style none; <i class=conum data-value=6></i><b>(6)</b>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254; <i class=conum data-value=7></i><b>(7)</b>
  option routers 192.168.4.1; <i class=conum data-value=8></i><b>(8)</b>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07; <i class=conum data-value=9></i><b>(9)</b>
  fixed-address mailhost.example.com; <i class=conum data-value=10></i><b>(10)</b>
}</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Deze optie geeft het domein aan dat door cliënten als standaard zoekdomein wordt gebruikt. In <a href="https://man.freebsd.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5&amp;format=html">resolv.conf(5)</a> staat meer over wat dat betekent.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Deze optie beschrijft een door komma’s gescheiden lijst met DNS-servers die de cliënt moet gebruiken.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>Het netmasker dat aan de cliënten wordt voorgeschreven.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Een cliënt kan om een bepaalde duur vragen die een lease geldig is. Anders geeft de server aan wanneer de lease vervalt (in seconden).</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Dit is de maximale duur voor een lease die de server toestaat. Als een cliënt vraagt om een langere lease, dan wordt die wel verstrekt, maar is de maar geldig gedurende <code>max-lease-time</code> seconden.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Deze optie geeft aan of de DHCP-server moet proberen de DNS-server bij te werken als een lease is geaccepteerd of wordt vrijgegeven. In de ISC implementatie is deze optie <em>verplicht</em>.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Dit geeft aan welke IP-adressen in de groep met adressen zitten die zijn gereserveerd om uitgegeven te worden aan cliënten. Alle IP-adressen tussen de aangegeven adressen en die adressen zelf worden aan cliënten uitgegeven.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>Geeft de default gateway aan die aan de cliënten wordt voorgeschreven.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>Het hardware MAC-adres van een host, zodat de DHCP-server een host kan herkennen als die een verzoek doet.</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>Geeft een host aan die altijd hetzelfde IP-adres moet krijgen. Hier kan een hostnaam gebruikt worden, omdat de DHCP-server de hostnaam zelf opzoekt voordat de lease-informatie terug wordt gegeven.</td></tr></tbody></table></div><div class=paragraph><p>Wanneer u klaar bent met het schrijven van uw <span class=filename>dhcpd.conf</span>, dient u de DHCP-server in <span class=filename>/etc/rc.conf</span> aan te zetten, door het volgende toe te voegen:</p></div><div class="literalblock programlisting"><div class=content><pre>dhcpd_enable=&#34;YES&#34;
dhcpd_ifaces=&#34;dc0&#34;</pre></div></div><div class=paragraph><p>Vervang de interfacenaam <code>dc0</code> door de interface (of interfaces, gescheiden door witruimtes) waarop uw DHCP-server moet luisteren naar DHCP-verzoeken van cliënten.</p></div><div class=paragraph><p>Daarna kunt u doorgaan met het starten van de server door het volgende commando te geven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service isc-dhcpd start</span></code></pre></div></div><div class=paragraph><p>Als er later wijzigingen in de instellingen gemaakt moeten worden, dan is het belangrijk te onthouden dat het sturen van een <code>SIGHUP</code> signaal naar dhcpd_niet_ resulteert in het opnieuw laden van de instellingen, zoals voor de meeste daemons geldt. Voor deze daemon dient een signaal <code>SIGTERM</code> gestuurd te worden om het proces te stoppen. Daarna dient de daemon met het hiervoor beschreven commando weer gestart worden.</p></div></div><div class=sect3><h4 id=_bestanden_2>29.5.7.4. Bestanden<a class=anchor href=#_bestanden_2></a></h4><div class=ulist><ul><li><p><span class=filename>/usr/local/sbin/dhcpd</span></p><div class=paragraph><p>dhcpd is statisch gelinkt en staat in <span class=filename>/usr/local/sbin</span>. In de hulppagina voor <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd&amp;sektion=8&amp;format=html">dhcpd(8)</a> die meekomt met de port staat meer informatie over dhcpd.</p></div></li><li><p><span class=filename>/usr/local/etc/dhcpd.conf</span></p><div class=paragraph><p>dhcpd heeft een instellingenbestand, <span class=filename>/usr/local/etc/dhcpd.conf</span>, nodig voordat de daemon diensten aan cliënten kan leveren. Het bestand moet alle informatie bevatten die aan cliënten gegeven moet worden en de informatie die nodig is voor het draaien van de dienst. Dit instellingenbestand staat beschreven in de hulppagina voor <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5&amp;format=html">dhcpd.conf(5)</a> die meekomt met de port.</p></div></li><li><p><span class=filename>/var/db/dhcpd.leases</span></p><div class=paragraph><p>De DHCP-server houdt in dit bestand een database bij met leases die zijn uitgegeven en die naar een logboek worden geschreven. In de hulppagina <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5&amp;format=html">dhcpd.leases(5)</a> die bij de port zit wordt dit uitvoeriger beschreven.</p></div></li><li><p><span class=filename>/usr/local/sbin/dhcrelay</span></p><div class=paragraph><p>dhcrelay wordt in uitgebreidere omgevingen gebruikt waar de ene DHCP-server een verzoek van een cliënt naar een andere DHCP-server op een ander netwerk doorstuurt. Als deze functionaliteit nodig is, kan die beschikbaar komen door de port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp42-relay/>net/isc-dhcp42-relay</a> te installeren. De hulppagina voor <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8&amp;format=html">dhcrelay(8)</a> die bij de port zit bevat meer details.</p></div></li></ul></div></div></div></div></div><div class=sect1><h2 id=network-dns>29.6. Domeinnaamsysteem (DNS)<a class=anchor href=#network-dns></a></h2><div class=sectionbody><div class=sect2><h3 id=_overzicht>29.6.1. Overzicht<a class=anchor href=#_overzicht></a></h3><div class=paragraph><p>FreeBSD gebruikt standaard een versie van BIND (Berkeley Internet Name Domain), wat de meest gebruikte implementatie van het DNS-protocol is. DNS is het protocol waarmee namen aan IP-adressen gebonden worden en vice versa. Zo wordt bijvoorbeeld op een zoekopdracht voor <code>www.FreeBSD.org</code> geantwoord met het IP-adres van de webserver van het FreeBSD Project en op een zoekopdracht voor <code>ftp.FreeBSD.org</code> wordt geantwoord met het IP-adres van de bijbehorende FTP-machine. Het tegenovergestelde kan ook gebeuren. Een zoekopdracht voor een IP-adres kan de bijbehorende hostnaam opleveren. Het is niet nodig om een naamserver te draaien om op een systeem zoekopdrachten met DNS uit te voeren.</p></div><div class=paragraph><p>FreeBSD wordt momenteel standaard geleverd met de BIND9 DNS-serversoftware. Onze installatie biedt verbeterde beveilingsmogelijkheden, een nieuwe indeling van het bestandssysteem en geautomatiseerde configuratie van <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a>.</p></div><div class=paragraph><p>DNS wordt op Internet onderhouden door een enigszins complex systeem van autoritaire root, Top Level Domain (TLD), en andere kleinschaligere naamservers die individuele domeininformatie hosten en cachen.</p></div><div class=paragraph><p>Op dit moment wordt BIND beheerd door het Internet Systems Consortium <a href=https://www.isc.org/>https://www.isc.org/</a>.</p></div></div><div class=sect2><h3 id=_terminologie>29.6.2. Terminologie<a class=anchor href=#_terminologie></a></h3><div class=paragraph><p>Om dit document te begrijpen moeten een aantal termen gerelateerd aan DNS begrepen worden.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Term</th><th class="tableblock halign-left valign-top">Definitie</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Voorwaartse DNS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Het afbeelden van hostnamen op IP-adressen.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Herkomst (origin)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Verwijst naar het domein dat door een bepaald zonebestand wordt gedekt.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>named, BIND</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Vaak gebruikte namen voor het naamserverpakket BIND in FreeBSD.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Resolver</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Een systeemproces waarmee een machine zoekopdrachten om zoneinformatie aan een naamserver geeft.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Reverse DNS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Het afbeelden van IP-adressen op hostnamen.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Rootzone</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Het begin van de Internet zonehiërarchie. Alle zones vallen onder de rootzone, net zoals alle bestanden in een bestandssysteem onder de rootmap vallen.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Zone</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Een individueel domein, subdomein of een deel van de DNS die door dezelfde autoriteit wordt beheerd.</p></td></tr></tbody></table><div class=paragraph><p>Voorbeelden van zones:</p></div><div class=ulist><ul><li><p><code>.</code> is hoe de rootzone normaliter in de documentatie genoemd wordt.</p></li><li><p><code>org.</code> is een Top Level Domain (TLD) onder de rootzone.</p></li><li><p><code>example.org.</code> is een zone onder het TLD <code>org.</code>.</p></li><li><p><code>1.168.192.in-addr.arpa</code> is een zone die naar alle IP-adressen verwijst die onder de IP-adresruimte <code>192.168.1.*</code> vallen.</p></li></ul></div><div class=paragraph><p>Zoals te zien is staat het specifiekere deel van een hostnaam aan de linkerkant. Zo is bijvoorbeeld <code>example.org.</code> specifieker dan <code>org.</code> en is <code>org.</code> specifieker dan de rootzone. De indeling van ieder deel van een hostnaam lijkt veel op een bestandssysteem: de map <span class=filename>/dev</span> valt onder de root, enzovoort.</p></div></div><div class=sect2><h3 id=_redenen_om_een_naamserver_te_draaien>29.6.3. Redenen om een naamserver te draaien<a class=anchor href=#_redenen_om_een_naamserver_te_draaien></a></h3><div class=paragraph><p>Naamservers bestaan in het algemeen in twee smaken: autoratieve naamservers en caching (ook bekend als resolving) naamservers.</p></div><div class=paragraph><p>Er is een autoratieve naamserver nodig als:</p></div><div class=ulist><ul><li><p>Het gewenst is om DNS-informatie aan te bieden aan de wereld om met autoriteit op verzoeken te antwoorden.</p></li><li><p>Een domein, zoals <code>example.org</code>, is geregistreerd en er IP-adressen aan hostnamen die daaronder liggen toegewezen moeten worden.</p></li><li><p>Een IP-adresblok omgekeerde DNS-ingangen nodig heeft (IP naar hostnaam).</p></li><li><p>Een omgekeerde of tweede naamserver, die een slaaf wordt genoemd, moet antwoorden op verzoeken.</p></li></ul></div><div class=paragraph><p>Er is een caching naamserver nodig als:</p></div><div class=ulist><ul><li><p>Een lokale DNS-server kan cachen en wellicht sneller kan antwoorden dan een naamserver die verder weg staat.</p></li></ul></div><div class=paragraph><p>Als er een verzoek wordt gedaan voor <code>www.FreeBSD.org</code>, dan doet de resolver meestal een verzoek bij de naamserver van de ISP die de uplink levert en ontvangt daarop een antwoord. Met een lokale, caching DNS-server hoeft het verzoek maar één keer door de caching DNS-server naar de buitenwereld gedaan te worden. Voor aanvullende verzoeken hoeft niet buiten het lokale netwerk te gaan omdat het al lokaal in de cache staat.</p></div></div><div class=sect2><h3 id=_hoe_het_werkt_2>29.6.4. Hoe het werkt<a class=anchor href=#_hoe_het_werkt_2></a></h3><div class=paragraph><p>De daemon BIND heet in FreeBSD named.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Bestand</th><th class="tableblock halign-left valign-top">Beschrijving</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>De daemon BIND.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rndc&amp;sektion=8&amp;format=html">rndc(8)</a></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Naamserverbeheerprogramma.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Map waar zoneinformatie van BIND staat.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb/named.conf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Instellingenbestand van de daemon.</p></td></tr></tbody></table><div class=paragraph><p>Afhankelijk van hoe en gegeven zone op de server is geconfigureerd, staan de bestanden gerelateerd aan die zone in de submappen <span class=filename>master</span>, <span class=filename>slave</span>, of <span class=filename>dynamic</span> van de map <span class=filename>/etc/namedb</span>. Deze bestanden bevatten de DNS-informatie die door de naamserver als antwoord op zoekopdrachten gegeven zal worden.</p></div></div><div class=sect2><h3 id=_bind_starten>29.6.5. BIND starten<a class=anchor href=#_bind_starten></a></h3><div class=paragraph><p>Omdat BIND standaard wordt geïnstalleerd, is het instellen relatief eenvoudig.</p></div><div class=paragraph><p>De standaardconfiguratie van named is die van een eenvoudige resolverende naamserver, draaiende in een <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a>-omgeving, en beperkt tot het luisteren op het lokale IPv4-teruglusadres (127.0.0.1). Gebruik het volgende commando om de server eenmaal met deze configuratie te starten:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service named onestart</span></code></pre></div></div><div class=paragraph><p>Om er zeker van te zijn dat de daemon named elke keer bij het opstarten gestart wordt, moet de volgende regel in <span class=filename>/etc/rc.conf</span> gezet worden:</p></div><div class="literalblock programlisting"><div class=content><pre>named_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Het is duidelijk dat er vele instelopties voor <span class=filename>/etc/namedb/named.conf</span> zijn die buiten het bereik van dit document vallen. Als u echter geïnteresseerd bent in de opstartopties voor named op FreeBSD, bekijk dan de <code>named_*</code>-vlaggen in <span class=filename>/etc/defaults/rc.conf</span> en raadpleeg de handleidingpagina <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>. De sectie <a href=../config/#configtuning-rcd>Gebruik van rc met FreeBSD</a> is ook nuttig om te lezen.</p></div></div><div class=sect2><h3 id=_instellingenbestanden>29.6.6. Instellingenbestanden<a class=anchor href=#_instellingenbestanden></a></h3><div class=paragraph><p>Instellingenbestanden voor named bevinden zich momenteel in <span class=filename>/etc/namedb</span> en moeten gewijzigd worden voor gebruik, tenzij er alleen een eenvoudige resolver nodig is. Hier vindt de meeste configuratie plaats.</p></div><div class=sect3><h4 id=_etcnamedbnamed_conf>29.6.6.1. <span class=filename>/etc/namedb/named.conf</span><a class=anchor href=#_etcnamedbnamed_conf></a></h4><div class="literalblock programlisting"><div class=content><pre>// $FreeBSD$
//
// In de handleidingpagina&#39;s named.conf(5) en named(8), en in de
// documentatie in /usr/shared/doc/bind9 zijn meer details te vinden.
//
// Voor het opzetten van een autoratieve server is een grondig begrip
// van de werking van DNS noodzakelijk.  Zelfs eenvoudige fouten kunnen // de werking verstoren voor beïnvloede partijen of veel onnodig
// Internetverkeer veroorzaken.

options {
       // Alle namen van bestanden en paden zijn relatief aan de chroot-map,
       // indien aanwezig, en moeten volledig gekwalificeerd zijn.
       directory       &#34;/etc/namedb/working&#34;;
       pid-file        &#34;/var/run/named/pid&#34;
       dump-file       &#34;/var/dump/named_dump.db&#34;
       statistics-file &#34;/var/stats/named.stats&#34;

// Als named alleen als een lokale resolver gebruikt wordt, is dit een
// veilige standaardinstelling.  Om named toegang tot het netwerk te
// verschaffen, dient deze optie gecommentarieerd te worden, het
// juiste IP-adres opgegeven te worden, of dient deze optie verwijderd
// te worden.
       listen-on       { 127.0.0.1; };

// Als u IPv6 aan heeft staan op dit systeem, dient deze optie
// uitgecommentarieerd te worden om als lokale resolver te dienen.  Om
// toegang tot het netwerk te verschaffen, dient een IPv6-adres of het
// sleutelwoord &#34;any&#34; gegeven te worden.
//     listen-on-v6    { ::1; };

// Deze zones zijn reeds opgenomen door de lege zones die hieronder
// staan.  Als u de gerelateerde lege zones hieronder verwijdert,
// dienen deze regels uitgecommentarieerd te worden.
        disable-empty-zone &#34;255.255.255.255.IN-ADDR.ARPA&#34;;
        disable-empty-zone &#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA&#34;;
        disable-empty-zone &#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA&#34;;

// Als er een DNS-server beschikbaar is bij een upstream provider dan
// kan het IP-adres op de regel hieronder ingegeven worden en kan die
// geactiveerd worden.  Hierdoor wordt voordeel gehaald uit de cache,
// waardoor het algehele DNS-verkeer op het Internet vermindert.
/*
       forwarders {
               127.0.0.1;
       };

*/

// Als de &#39;forwarders&#39;-clausule niet leeg is, is de standaard om &#34;forward
// first&#34; te gebruiken, welke terug zal vallen op het versturen van een
// verzoek naar uw lokale server als de naamservers in &#39;forwarders&#39; het
// antwoord niet weten.  Als alternatief kunt u uw naamserver dwingen om
// nooit zelf verzoeken in te dienen door de volgende regel aan te
// zetten:
//     forward only;

// Als u forwarding automatisch wilt configureren gebaseerd op de regels
// in /etc/resolv.conf, verwijder dan het commentaar van de volgende
// regel en stel in /etc/rc.conf named_auto_forward=yes in.  U kunt ook
// named_auto_forward_only aanzetten (het effect hiervan is hierboven
// beschreven).
//      include &#34;/etc/namedb/auto_forward.conf&#34;;</pre></div></div><div class=paragraph><p>Zoals al in het commentaar staat kan van een cache in de uplink geprofiteerd worden als <code>forwarders</code> ingeschakeld worden. Onder normale omstandigheden maakt een naamserver recursief verzoeken tot het Internet op zoek naar zekere naamservers tot er een antwoord komt waar het naar op zoek is. Door de bovenstaande optie in te schakelen wordt eerst de uplink naamserver (of de opgegeven naamserver) gevraagd, waardoor er gebruik gemaakt kan worden van de cache van die server. Als die uplink naamserver een drukke, snelle naamserver is, kan het erg de moeite waard zijn om dit aan te zetten.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p><code>127.0.0.1</code> werkt hier <em>niet</em>. Verander dit IP-adres in een naamserver in de uplink.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>/*
	  Moderne versies van BIND gebruiken standaard een random
	  UDP-poort voor elk uitgaand verzoek om de kans op cache
	  poisoning drastisch te verminderen.  Alle gebruikers wordt met
	  klem verzocht om deze mogelijkheid te gebruiken en hun
	  firewalls overeenkomstig aan te passen.

	  ALS EEN LAATSTE UITVLUCHT om een beperkende firewall te
	  omzeilen kunt u proberen om onderstaande optie aan te zetten.
	  Het gebruik van deze optie vermindert uw kans om een cache
	  poisoning aanval te weerstaan aanzienlijk, en dient indien
	  mogelijk te worden vermeden.

	  Vervang NNNNN in het voorbeeld door een getal tussen 49160 en
	  65530.
	*/
	// query-source address * port NNNNN;
};

// Als er een lokale naamserver wordt gebruikt, vergeet dan niet om
// eerst 127.0.0.1 in /etc/resolv.conf te zetten zodat die gevraagd
// wordt.  Controleer ook dat het in /etc/rc.conf is aangezet.

// Het traditionele root-hint-mechanisme.  Gebruik dit OF de
// onderstaande slaafzones.
zone &#34;.&#34; { type hint; file &#34;/etc/namedb/named.root&#34;; };

/*	Het slaaf maken van de volgende zones vanaf de root-naamservers
	heeft een aantal aanzienlijke voordelen:
	1. Snellere lokale resolutie voor uw gebruikers
	2. Geen vals verkeer dat vanaf uw netwerk naar de roots wordt verzonden
	3. Betere weerstand tegen elke mogelijk falen van de rootserver/DDoS

	Wel is het zo dat deze methode meer toezicht vraagt dan het
	hintbestand om er zeker van te zijn dat een onverwachte
	faalmodus uw server niet heeft lamgelegd.  Naamservers die
	veel clienten serveren zullen meer voordeel uit deze aanpak
	halen dan individuele hosts.  Met zorg gebruiken.

	Verwijder het commentaar uit de onderstaande regels en
	commentarieer de bovenstaande hintzone om dit mechanisme te
	gebruiken.

	Zoals gedocumenteerd op http://dns.icann.org/services/axfr/ zijn deze
	zones: &#34;.&#34; (de root), ARPA, IN-ADDR.ARPA, IP6.ARPA en ROOT-SERVERS.NET
	beschikbaar voor AXFR van deze servers op IPv4 en IPv6:
	xfr.lax.dns.icann.org, xfr.cjr.dns.icann.org
*/

zone &#34;.&#34; {
	type slave;
	file &#34;/etc/namedb/slave/root.slave&#34;;
	masters {
		192.5.5.241;	// F.ROOT-SERVERS.NET.
	};
	notify no;
};

zone &#34;arpa&#34; {
	type slave;
	file &#34;/etc/namedb/slave/arpa.slave&#34;;
	masters {
		192.5.5.241;	// F.ROOT-SERVERS.NET.
	};
	notify no;
};

/*	Het lokaal serveren van de volgende zones voorkomt dat enig
	verzoek voor deze zones uw netwerk verlaat en naar de
	root-naamservers gaat.  Dit heeft twee aanzienlijke voordelen:
	1. Snellere lokale resolutie voor uw gebruikers
	2. Er zal geen vals verkeer vanaf uw netwerk naar de roots worden verzonden
*/
// RFCs 1912 en 5735 (en BCP32 voor localhost)
zone &#34;localhost&#34;	{ type master; file &#34;/etc/namedb/master/localhost-forward.db&#34;; };
zone &#34;127.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/localhost-reverse.db&#34;; };
zone &#34;255.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// RFC 1912-stijl zone voor IPv6 localhost adres
zone &#34;0.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/localhost-reverse.db&#34;; };

// &#34;Dit&#34; netwerk (RFCs 1912 en 5735)
zone &#34;0.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// Netwerken voor privaat gebruik (RFC 1918 en 5735)
zone &#34;10.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;16.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;17.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;18.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;19.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;20.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;21.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;22.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;23.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;24.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;25.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;26.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;27.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;28.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;29.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;30.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;31.172.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;168.192.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// Lokale link/APIPA (RFCs 3927 en 5735)
zone &#34;254.169.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// IETF protocol-toewijzingen (RFCs 5735 en 5736)
zone &#34;0.0.192.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// TEST-NET-[1-3] voor documentatie (RFCs 5735 en 5737)
zone &#34;2.0.192.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;100.51.198.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;113.0.203.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// IPv6-bereik voor documentatie (RFC 3849)
zone &#34;8.b.d.0.1.0.0.2.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// Domeinnamen voor documentatie en testen (BCP 32)
zone &#34;test&#34; { type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;example&#34; { type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;invalid&#34; { type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;example.com&#34; { type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;example.net&#34; { type master; file &#34;/etc/namedb/master/empty.db&#34;; };
zone &#34;example.org&#34; { type master; file &#34;/etc/namedb/master/empty.db&#34;; };

// Router benchmarken (RFC 2544 en 5735)
zone &#34;18.198.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;19.198.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }

// Gereserveerd door IANA - oude ruimte van klasse E (RFC 5735)
zone &#34;240.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;241.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;242.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;243.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;244.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;245.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;246.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;247.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;248.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;249.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;250.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;251.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;252.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;253.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;254.in-addr.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }

// Niet-toegewezen IPv6-adressen (RFC 4291)
zone &#34;1.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;2.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;3.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;4.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;5.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;6.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;7.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;8.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;9.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;a.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;b.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;c.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;d.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;e.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;0.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;1.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;2.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;3.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;4.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;5.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;6.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;7.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;8.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;9.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;a.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;b.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;0.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;1.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;2.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;3.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;4.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;5.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;6.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;7.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }

// IPv6 ULA (RFC 4193)
zone &#34;c.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;d.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }

// IPv6 lokale link (RFC 4291)
zone &#34;8.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;9.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;a.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;b.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }

// IPv6 verouderde site-lokale adressen (RFC 3879)
zone &#34;c.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;d.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;e.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }
zone &#34;f.e.f.ip6.arpa&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }

// IP6.INT is verouderd (RFC 4159)
zone &#34;ip6.int&#34;	{ type master; file &#34;/etc/namedb/master/empty.db&#34;; }

// NB: De IP-adressen hieronder zijn bedoeld als voorbeeld en dienen
//     niet gebruikt te worden!
//
// Voorbeeld instellingen voor slaafzones.  Het kan handig zijn om
// tenminste slaaf te worden voor de zone waar de host onderdeel van
// uitmaakt.  Bij uw netwerkbeheerder kan het IP-adres van de
// verantwoordelijke meester-naamserver nagevraagd worden.
//
// Vergeet niet om de omgekeerde lookup-zone op te nemen!
// Dit is genoemd na de eerste bytes van het IP-adres, in omgekeerde
// volgorde, met daarachter &#34;.IN-ADDR.ARPA&#34;, of &#34;IP6.ARPA&#34; voor IPv6.
//
// Het is van groot belang om de werking van DNS en BIND te begrijpen
// voordat er een meester-zone wordt opgezet.  Er zijn nogal wat
// onverwachte valkuilen.  Het opzetten van een slaafzone is
// gewoonlijk eenvoudiger.
//
// NB: Zet de onderstaande voorbeelden niet blindelings aan. :-)
// Gebruik in plaats hiervan echte namen en adressen.
/* Een voorbeeld van een dynamische zone
key &#34;exampleorgkey&#34; {
       algorithm hmac-md5;
       secret &#34;sf87HJqjkqh8ac87a02lla==&#34;;
};

zone &#34;example.org&#34; {
       type master;
       allow-update {
               key &#34;exampleorgkey&#34;;
       };
       file &#34;/etc/namedb/dynamic/example.org&#34;;
};
*/

/* Voorbeeld van een omgekeerde slaafzone
zone &#34;1.168.192.in-addr.arpa&#34; {
       type slave;
       file &#34;/etc/namedb/slave/1.168.192.in-addr.arpa&#34;;
       masters {
               192.168.1.1;
       };
};
*/</pre></div></div><div class=paragraph><p>In <span class=filename>named.conf</span> zijn dit voorbeelden van slaafregels voor een voorwaartse en een omgekeerde zone.</p></div><div class=paragraph><p>Voor iedere nieuwe zone die wordt aangeboden dient een nieuwe instelling voor de zone aan <span class=filename>named.conf</span> toegevoegd te worden.</p></div><div class=paragraph><p>De eenvoudigste instelling voor de zone <code>example.org</code> kan er als volgt uitzien:</p></div><div class="literalblock programlisting"><div class=content><pre>zone &#34;example.org&#34; {
	type master;
	file &#34;master/example.org&#34;;
};</pre></div></div><div class=paragraph><p>De zone is een master, zoals aangegeven door het statement <code>type</code>, waarvan de zoneinformatie in <span class=filename>/etc/namedb/example.org</span> staat, zoals het statement <code>file</code> aangeeft.</p></div><div class="literalblock programlisting"><div class=content><pre>zone &#34;example.org&#34; {
	type slave;
	file &#34;slave/example.org&#34;;
};</pre></div></div><div class=paragraph><p>In het geval van de slaaf wordt de zoneinformatie voor een zone overgedragen van de master naamserver en opgeslagen in het ingestelde bestand. Als de masterserver het niet meer doet of niet bereikbaar is, dan heeft de slaveserver de overgedragen zoneinformatie nog en kan het die aanbieden.</p></div></div><div class=sect3><h4 id=_zonebestanden>29.6.6.2. Zonebestanden<a class=anchor href=#_zonebestanden></a></h4><div class=paragraph><p>Een voorbeeldbestand voor een masterzone voor <code>example.org</code> (bestaande binnen <span class=filename>/etc/namedb/master/example.org</span>) ziet er als volgt uit:</p></div><div class="literalblock programlisting"><div class=content><pre>$TTL 3600        ; 1 uur standaard TTL
example.org.     IN      SOA      ns1.example.org. admin.example.org. (
                                 2006051501      ; Serienummer
                                 10800           ; Verversen
                                 3600            ; Opnieuw proberen
                                 604800          ; Verlopen
                                 300             ; Negatieve antwoord-TTL
                         )

; DNS Servers
                 IN      NS      ns1.example.org.
                 IN      NS      ns2.example.org.

; MX Records
                 IN      MX 10   mx.example.org.
                 IN      MX 20   mail.example.org.

                 IN      A       192.168.1.1

; Machinenamen
localhost        IN      A       127.0.0.1
ns1              IN      A       192.168.1.2
ns2              IN      A       192.168.1.3
mail             IN      A       192.168.1.4
mx               IN      A       192.168.1.5

; Aliases
www              IN      CNAME   example.org.</pre></div></div><div class=paragraph><p>Iedere hostnaam die eindigt op een "." is een exacte hostnaam, terwijl alles zonder een "." op het einde relatief is aan de oorsprong. Zo wordt <code>ns1</code> bijvoorbeeld vertaald naar <code>ns1.example.org.</code>.</p></div><div class=paragraph><p>De regels in een zonebestand volgen de volgende opmaak:</p></div><div class="literalblock programlisting"><div class=content><pre>recordnaam      IN recordtype   waarde</pre></div></div><div class=paragraph><p>De meest gebruikte DNS-records:</p></div><div class=dlist><dl><dt class=hdlist1>SOA</dt><dd><p>begin van autoriteit (start of authority)</p></dd><dt class=hdlist1>NS</dt><dd><p>een bevoegde (autoratieve) name server</p></dd><dt class=hdlist1>A</dt><dd><p>een hostadres</p></dd><dt class=hdlist1>CNAME</dt><dd><p>de canonieke naam voor een alias</p></dd><dt class=hdlist1>MX</dt><dd><p>mail exchanger</p></dd><dt class=hdlist1>PTR</dt><dd><p>een domeinnaam pointer (gebruikt in omgekeerde DNS)</p></dd></dl></div><div class="literalblock programlisting"><div class=content><pre>example.org. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serienummer
                        10800           ; Ververs na 3 uur
                        3600            ; Opnieuw proberen na 1 uur
                        604800          ; Verlopen na 1 week
                        300             ; Negatieve antwoord-TTL</pre></div></div><div class=dlist><dl><dt class=hdlist1><code>example.org.</code></dt><dd><p>de domeinnaam, ook de oorsprong voor dit zonebestand.</p></dd><dt class=hdlist1><code>ns1.example.org.</code></dt><dd><p>de primaire/bevoegde naamserver voor deze zone.</p></dd><dt class=hdlist1><code>admin.example.org.</code></dt><dd><p>de persoon die verantwoordelijk is voor deze zone, emailadres met "@" vervangen. <a href=mailto:admin@example.org>admin@example.org</a> wordt <code>admin.example.org</code>.</p></dd><dt class=hdlist1><code>2006051501</code></dt><dd><p>het serienummer van het bestand. Dit moet iedere keer als het zonebestand wordt aangepast opgehoogd worden. Tegenwoordig geven veel beheerders de voorkeur aan de opmaak <code>yyyymmddrr</code> voor het serienummer. <code>2006051501</code> betekent dan dat het voor het laatst is aangepast op 15-05-2006, de laatste <code>01</code> betekent dat het zonebestand die dag voor het eerst is aangepast. Het serienummer is belangrijk omdat het slaafnaamservers aangeeft dat een zone is bijgewerkt.</p></dd></dl></div><div class="literalblock programlisting"><div class=content><pre>       IN NS           ns1.example.org.</pre></div></div><div class=paragraph><p>Hierboven staat een NS-regel. Voor iedere naamserver die bevoegde antwoorden moet geven voor de zone hoort er zo’n regel te zijn.</p></div><div class="literalblock programlisting"><div class=content><pre>localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
mail            IN      A       192.168.1.5</pre></div></div><div class=paragraph><p>Een A-record geeft een machinenaam aan. Hierboven is te zien dat <code>ns1.example.org</code> zou resolven naar <code>192.168.1.2</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>       IN      A       192.168.1.1</pre></div></div><div class=paragraph><p>Deze regel kent IP-adres <code>192.168.1.1</code> toe aan de huidige oorsprong, in dit geval <code>example.org</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>www             IN CNAME        @</pre></div></div><div class=paragraph><p>Een canoniek naamrecord wordt meestal gebruikt voor het geven van aliassen aan een machine. In het voorbeeld is <code>www</code> een alias naar de "master" machine waarvan de naam gelijk is aan de domeinnaam <code>example.org</code> (<code>192.168.1.1</code>). CNAME’s kunnen nooit samen met een ander soort record voor dezelfde hostnaam gebruikt worden.</p></div><div class="literalblock programlisting"><div class=content><pre>               IN MX   10      mail.example.org.</pre></div></div><div class=paragraph><p>MX records geven aan welke mailservers verantwoordelijk zijn voor het afhandelen van inkomende mail voor de zone. <code>mail.example.org</code> is de hostnaam van een mailserver en 10 is de prioriteit voor die mailserver.</p></div><div class=paragraph><p>Het is mogelijk meerdere mailservers in te stellen met prioriteiten 10, 20, enzovoorts. Een mailserver die probeert mail af te leveren voor <code>example.org</code> probeert dat eerst bij de MX met de hoogste prioriteit (het record met het laagste prioriteitsnummer), daarna de tweede hoogste, enzovoort, totdat de mail afgeleverd kan worden.</p></div><div class=paragraph><p>Voor in-addr.arpa zonebestanden (omgekeerd DNS) wordt dezelfde opmaak gebruikt, maar dan met PTR-regels in plaats van A of CNAME.</p></div><div class="literalblock programlisting"><div class=content><pre>$TTL 3600

1.168.192.in-addr.arpa. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serienummer
                        10800           ; Ververs
                        3600            ; Opnieuw proberen
                        604800          ; Verlopen
                        300 )           ; Negatieve antwoord-TTL

        IN      NS      ns1.example.org.
        IN      NS      ns2.example.org.

1       IN      PTR     example.org.
2       IN      PTR     ns1.example.org.
3       IN      PTR     ns2.example.org.
4       IN      PTR     mx.example.org.
5       IN      PTR     mail.example.org.</pre></div></div><div class=paragraph><p>Dit bestand geeft de juiste IP-adressen voor hostnamen in het voorbeelddomein hierboven.</p></div><div class=paragraph><p>Het is het vernoemen waard dat alle namen aan de rechterkant van een PTR-record volledig gekwalificeerd dienen te zijn (i.e., met een "." eindigen).</p></div></div></div><div class=sect2><h3 id=_caching_naamserver>29.6.7. Caching naamserver<a class=anchor href=#_caching_naamserver></a></h3><div class=paragraph><p>Een caching naamserver is een naamserver wiens primaire rol het oplossen van recursieve verzoeken is. Het dient simpelweg zelf verzoeken in en onthoudt de antwoorden voor later gebruik.</p></div></div><div class=sect2><h3 id=_dnssec>29.6.8. DNSSEC<a class=anchor href=#_dnssec></a></h3><div class=paragraph><p>Domain Name Security System Extensions, ofwel DNSSEC, is een verzameling van specificaties om resolvende naamservers te beschermen tegen valse DNS-gegevens, zoals vervalste DNS-records. Door digitale handtekeningen te gebruiken kan een resolver de integriteit van een record controleren. Merk op dat DNSSEC alleen integriteit biedt via het digitaal ondertekenen van het Resource Record (RRs). Het biedt noch betrouwbaarheid noch bescherming tegen onjuiste aannames van eindgebruikers. Dit betekent dat het mensen niet kan beschermen tegen het bezoeken van <code>example.net</code> in plaats van <code>example.com</code>. Het enige wat DNSSEC doet is authenticeren dat de gegevens niet tijdens het transport zijn gecompromitteerd. De beveiliging van DNSSEC is een belangrijke stap in het beveiligen van het internet in het algemeen. De relevante RFCs zijn een goed beginpunt voor meer gedetailleerde gegevens over hoe DNSSEC werkt. Raadpleeg de lijst in <a href=#dns-read>Verder lezen</a>.</p></div><div class=paragraph><p>De volgende secties laten zien hoe DNSSEC voor een autoratieve DNS-server en een recursieve (of caching) DNS-server die BIND 9 draait kan worden bewerkstelligd. Hoewel alle versies van BIND 9 DNSSEC ondersteunen, is tenminste versie 9.6.2 nodig om gebruik te kunnen maken van de ondertekende rootzones tijdens het valideren van DNS-verzoeken. Dit komt doordat eerdere versies de benodigde algoritmes om validatie met de sleutel voor de rootzone te uit te voeren niet hebben. Het wordt sterk aangeraden om de nieuwste versie van BIND 9.7 te gebruiken om gebruik te kunnen maken van automatische sleutel-updates voor de rootsleutel en van andere mogelijkheden om zones ondertekend en sleutel up-to-date te houden. Wanneer configuraties tussen 9.6.2 en 9.7 en later verschillen, zullen deze worden toegelicht.</p></div><div class=sect3><h4 id=_configuratie_van_een_recursieve_dns_server>29.6.8.1. Configuratie van een recursieve DNS-server<a class=anchor href=#_configuratie_van_een_recursieve_dns_server></a></h4><div class=paragraph><p>Het aanzetten van DNSSEC-validatie van verzoeken die door een recursieve DNS-server worden uitgevoerd heeft enkele aanpassingen aan <span class=filename>named.conf</span> nodig. Voordat deze wijzigingen worden gemaakt dient de rootzone-sleutel, of vertrouwensanker, te worden opgehaald. Momenteel is de rootzone-sleutel niet beschikbaar in een bestandsformaat dat BIND begrijpt, dus moet het handmatig in het juiste formaat omgezet worden. De sleutel zelf kan verkregen worden door de rootzone ervoor met dig te ondervragen. Door</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dig +multi +noall +answer DNSKEY <span class=nb>.</span> <span class=o>&gt;</span> root.dnskey</code></pre></div></div><div class=paragraph><p>te draaien, wordt de sleutel in <span class=filename>root.dnskey</span> opgeslagen. De inhoud dient er ongeveer als volgt uit te zien:</p></div><div class="literalblock programlisting"><div class=content><pre>. 93910 IN DNSKEY 257 3 8 (
	AwEAAagAIKlVZrpC6Ia7gEzahOR+9W29euxhJhVVLOyQ
	bSEW0O8gcCjFFVQUTf6v58fLjwBd0YI0EzrAcQqBGCzh
	/RStIoO8g0NfnfL2MTJRkxoXbfDaUeVPQuYEhg37NZWA
	JQ9VnMVDxP/VHL496M/QZxkjf5/Efucp2gaDX6RS6CXp
	oY68LsvPVjR0ZSwzz1apAzvN9dlzEheX7ICJBBtuA6G3
	LQpzW5hOA2hzCTMjJPJ8LbqF6dsV6DoBQzgul0sGIcGO
	Yl7OyQdXfZ57relSQageu+ipAdTTJ25AsRTAoub8ONGc
	LmqrAmRLKBP1dfwhYB4N7knNnulqQxA+Uk1ihz0=
	) ; key id = 19036
. 93910 IN DNSKEY 256 3 8 (
	AwEAAcaGQEA+OJmOzfzVfoYN249JId7gx+OZMbxy69Hf
	UyuGBbRN0+HuTOpBxxBCkNOL+EJB9qJxt+0FEY6ZUVjE
	g58sRr4ZQ6Iu6b1xTBKgc193zUARk4mmQ/PPGxn7Cn5V
	EGJ/1h6dNaiXuRHwR+7oWh7DnzkIJChcTqlFrXDW3tjt
	) ; key id = 34525</pre></div></div><div class=paragraph><p>Schrik niet als de verkregen sleutels anders zijn dan in dit voorbeeld. Ze kunnen zijn veranderd nadat deze instructies voor het laatst waren bijgewerkt. De uitvoer bevat in feite twee sleutels. De eerste sleutel, met de waarde 257 na het DNSKEY-recordtype, is degene die nodig is. Deze waarde geeft aan dat dit een Secure Entry Point ( SEP) is, beter bekend als een Key Signing Key (KSK). De tweede sleutel, met de waarde 256, is een deelsleutel, beter bekend als een Zone Signing Key (ZSK). Meer over de verschillende soorten sleutels komt aan bod in <a href=#dns-dnssec-auth>Configuratie van een autoratieve DNS-server</a>.</p></div><div class=paragraph><p>Nu moet de sleutel gecontroleerd en geformatteerd worden zodat BIND deze kan gebruiken. Maak om de sleutel te controleren een DS - RR-paar aan. Maak een bestand aan dat deze RRs bevat aan met</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dnssec-dsfromkey <span class=nt>-f</span> root-dnskey <span class=nb>.</span> <span class=o>&gt;</span> root.ds</code></pre></div></div><div class=paragraph><p>Deze records gebruiken respectievelijk SHA-1 en SHA-256, en dienen er als het volgende voorbeeld uit te zien, waarbij het langere record SHA-256 gebruikt.</p></div><div class="literalblock programlisting"><div class=content><pre>. IN DS 19036 8 1 B256BD09DC8DD59F0E0F0D8541B8328DD986DF6E
. IN DS 19036 8 2 49AAC11D7B6F6446702E54A1607371607A1A41855200FD2CE1CDDE32F24E8FB5</pre></div></div><div class=paragraph><p>Het SHA-256 RR kan nu worden vergeleken met de digest in <a href=https://data.iana.org/root-anchors/root-anchors.xml>https://data.iana.org/root-anchors/root-anchors.xml</a>. Om er absoluut zeker van te zijn dat er niet geknoeid is met de sleutel kunnen de gegevens in het XML-bestand worden gecontroleerd met de PGP-handtekening in <a href=https://data.iana.org/root-anchors/root-anchors.asc>https//data.iana.org/root-anchors/root-anchors.asc</a>.</p></div><div class=paragraph><p>Vervolgens dient de sleutel juist geformateerd te worden. Dit verschilt een beetje tussen versie 9.6.2 en versie 9.7 en later van BIND. In versie 9.7 is ondersteuning toegevoegd om automatisch veranderingen aan de sleutel te volgen en deze bij te werken indien nodig. Dit wordt gedaan met <code>managed-keys</code> zoals in het volgende voorbeeld te zien is. Als de oudere versie gebruikt wordt, wordt de sleutel toegevoegd met een commando <code>trusted-keys</code> en dient deze handmatig bijgewerkt te worden. Voor BIND 9.6.2 ziet het formaat er uit als:</p></div><div class="literalblock programlisting"><div class=content><pre>trusted-keys {
	&#34;.&#34; 257 3 8
	&#34;AwEAAagAIKlVZrpC6Ia7gEzahOR+9W29euxhJhVVLOyQbSEW0O8gcCjF
	FVQUTf6v58fLjwBd0YI0EzrAcQqBGCzh/RStIoO8g0NfnfL2MTJRkxoX
	bfDaUeVPQuYEhg37NZWAJQ9VnMVDxP/VHL496M/QZxkjf5/Efucp2gaD
	X6RS6CXpoY68LsvPVjR0ZSwzz1apAzvN9dlzEheX7ICJBBtuA6G3LQpz
	W5hOA2hzCTMjJPJ8LbqF6dsV6DoBQzgul0sGIcGOYl7OyQdXfZ57relS
	Qageu+ipAdTTJ25AsRTAoub8ONGcLmqrAmRLKBP1dfwhYB4N7knNnulq
	QxA+Uk1ihz0=&#34;;
};</pre></div></div><div class=paragraph><p>Voor versie 9.7 ziet het formaat er echter zo uit:</p></div><div class="literalblock programlisting"><div class=content><pre>managed-keys {
	&#34;.&#34; initial-key 257 3 8
	&#34;AwEAAagAIKlVZrpC6Ia7gEzahOR+9W29euxhJhVVLOyQbSEW0O8gcCjF
	FVQUTf6v58fLjwBd0YI0EzrAcQqBGCzh/RStIoO8g0NfnfL2MTJRkxoX
	bfDaUeVPQuYEhg37NZWAJQ9VnMVDxP/VHL496M/QZxkjf5/Efucp2gaD
	X6RS6CXpoY68LsvPVjR0ZSwzz1apAzvN9dlzEheX7ICJBBtuA6G3LQpz
	W5hOA2hzCTMjJPJ8LbqF6dsV6DoBQzgul0sGIcGOYl7OyQdXfZ57relS
	Qageu+ipAdTTJ25AsRTAoub8ONGcLmqrAmRLKBP1dfwhYB4N7knNnulq
	QxA+Uk1ihz0=&#34;;
};</pre></div></div><div class=paragraph><p>De rootsleutel kan nu aan <span class=filename>named.conf</span> worden toegevoegd, ofwel direct of door een bestand dat de sleutel bevat te includen. Stel na deze stappen BIND in zodat het DNSSEC-validatie uitvoert op verzoeken door <span class=filename>named.conf</span> te bewerken en het volgende aan de directief <code>options</code> toe te voegen:</p></div><div class="literalblock programlisting"><div class=content><pre>dnssec-enable yes;
dnssec-validation yes;</pre></div></div><div class=paragraph><p>Om te controleren dat het ook echt werkt, kan dig gebruikt worden om een verzoek op een ondertekende zone uit te voeren met de zojuist geconfigureerde resolver. Een succesvol antwoord zal de vlag <code>AD</code> bevatten om aan te geven dat de gegevens zijn geautenticeerd. Een verzoek als</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dig @resolver +dnssec se ds</code></pre></div></div><div class=paragraph><p>zou het DSRR paar voor de <code>.se</code>-zone moeten teruggeven. In de sectie <code>flags:</code> moet de vlag <code>AD</code> te zien zijn, als in:</p></div><div class="literalblock programlisting"><div class=content><pre>...
;; flags: qr rd ra ad; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1
...</pre></div></div><div class=paragraph><p>De resolver is nu in staat om DNS-verzoeken te autenticeren.</p></div></div><div class=sect3><h4 id=dns-dnssec-auth>29.6.8.2. Configuratie van een autoratieve DNS-server<a class=anchor href=#dns-dnssec-auth></a></h4><div class=paragraph><p>Om een autoratieve naamserver een met DNSSEC ondertekende zone te laten serveren is wat meer werk nodig. Een zone wordt ondertekend met cryptografische sleutels die aangemaakt moeten worden. Het is mogelijk om hier slechts één sleutel voor te gebruiken. De methode die de voorkeur verdient is echter om een sterke, goed beschermde Key Signing Key (KSK) die niet vaak wordt geroteerd en een Zone Signing Key (ZSK) die vaker wordt geroteerd te hebben. Informatie over aanbevolen procedures staat in <a href=http://tools.ietf.org/rfc/rfc4641.txt>RFC 4641: DNSSEC Operational Practices</a>. Procedures betreffende de rootzone staan in <a href=http://www.root-dnssec.org/wp-content/uploads/2010/06/icann-dps-00.txt>DNSSEC Practice Statement for the Root Zone KSK operator</a> en <a href=http://www.root-dnssec.org/wp-content/uploads/2010/06/vrsn-dps-00.txt>DNSSEC Practice Statement for the Root Zone ZSK operator</a>. De KSK wordt gebruikt om een autoriteitsketen voor de te valideren gegevens op te bouwen en wordt daarom ook een Secure Entry Point (SEP)-sleutel genoemd. Een bericht-digest van deze sleutel, dat Delegation Signer (DS)-record genoemd wordt, moet gepubliceerd zijn in de ouderzone om een vertrouwensketen op te bouwen. Hoe dit bereikt wordt hangt af van de eigenaar van de ouderzone. De ZSK wordt gebruikt om de zone te ondertekenen, en hoeft alleen daar gepubliceerd te worden.</p></div><div class=paragraph><p>Om DNSSEC aan te zetten voor de zone <code>example.com</code> zoals beschreven in de voorgaande voorbeelden, dient als eerste dnssec-keygen gebruikt te worden om het sleutelpaar met de KSK en ZSK te genereren. Dit sleutelpaar kan verschillende cryptografische algoritmes gebruiken. Het wordt aanbevolen om RSA/SHA-256 voor de sleutels te gebruiken, een sleutellengte van 2048 bits zou voldoende moeten zijn. Om de KSK voor <code>example.com</code> te genereren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dnssec-keygen <span class=nt>-f</span> KSK <span class=nt>-a</span> RSASHA256 <span class=nt>-b</span> 2048 <span class=nt>-n</span> ZONE example.com</code></pre></div></div><div class=paragraph><p>en om de ZSK te genereren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dnssec-keygen <span class=nt>-a</span> RSASHA256 <span class=nt>-b</span> 2048 <span class=nt>-n</span> ZONE example.com</code></pre></div></div><div class=paragraph><p>dnssec-keygen maakt twee bestanden, de publieke en private sleutels in bestanden met namen als <span class=filename>Kexample.com.+005+nnnnn.key</span> (publiek) en <span class=filename>Kexample.com.+005+nnnnn.private</span> (privaat). Het gedeelte <code>nnnnn</code> van de bestandsnaam is een sleutel-ID van vijf cijfers. Houd bij welke sleutel-ID bij welke sleutel hoort. Dit is in het bijzonder van belang wanneer er meerdere sleutels per zone zijn. Het is ook mogelijk om de sleutels te hernoemen. Voor elk KSK-bestand:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>mv </span>Kexample.com.+005+nnnnn.key Kexample.com.+005+nnnn.KSK.key
% <span class=nb>mv </span>Kexample.com.+005+nnnnn.private Kexample.com.+005+nnnnn.KSK.private</code></pre></div></div><div class=paragraph><p>Voor ZSK-bestanden dient <code>KSK</code> waar nodig door <code>ZSK</code> vervangen te worden. De bestanden kunnen nu worden opgenomen in het zonebestand, door de opdracht <code>$include</code> te gebruiken. Het zou er ongeveer als volgt uit moeten zien:</p></div><div class="literalblock programlisting"><div class=content><pre>$include Kexample.com.+005+nnnnn.KSK.key ; KSK
$include Kexample.com.+005+nnnnn.ZSK.key ; ZSK</pre></div></div><div class=paragraph><p>Onderteken tenslotte de zone en vertel BIND om het ondertekende zonebestand te gebruiken. Voor het ondertekenen van een zone wordt dnssec-signzone gebruikt. Het commando om de zone <code>example.com</code>, dat zich in <span class=filename>example.com.db</span> bevindt, zou er ongeveer zo uit moeten zien:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dnssec-signzone <span class=nt>-o</span> example.com <span class=nt>-k</span> Kexample.com.+005+nnnnn.KSK example.com.db Kexample.com.+005+nnnnn.ZSK.key</code></pre></div></div><div class=paragraph><p>De sleutel die aan het argument <code>-k</code> wordt meegegeven is de KSK en het andere sleutelbestand is de ZSK dat bij het ondertekenen gebruikt moet worden. Het is mogelijk om meer dan één KSK en ZSK op te geven, wat tot gevolg heeft dat de zone met alle meegegeven sleutels wordt ondertekend. Dit kan nodig zijn om zonegegevens aan te leveren die met meerdere algoritmes zijn ondertekend. De uitvoer van dnssec-signzone is een zonebestand met daarin alle RRs ondertekend. Deze uitvoer komt in een bestand met de extensie <code>.signed</code> terecht, zoals <span class=filename>example.com.db.signed</span>. De DS-records worden ook naar een apart bestand <span class=filename>dsset-example.com</span> geschreven. Om deze ondertekende zone te gebruiken hoeft alleen de zone-directief in <span class=filename>named.conf</span> veranderd te worden om <span class=filename>example.com.db.signed</span>. Standaard zijn de ondertekeningen slechts 30 dagen geldig, wat betekent dat de zone over ongeveer 15 dagen hertekend moet worden om er zeker van te zijn dat resolvers geen records met oude ondertekeningen cachen. Het is mogelijk om hiervoor een script en een crontaak te maken. Bekijk de relevante handleidingen voor details.</p></div><div class=paragraph><p>Zorg ervoor dat de private sleutels veilig blijven, zoals met alle cryptografische sleutels. Bij het veranderen van een sleutel kan het beste de nieuwe sleutel in de zone opgenomen worden, en nog met de oude sleutel te ondertekenen, en om daarna over te stappen op de nieuwe sleutel. Nadat deze handelingen zijn voltooid kan de oude sleutel uit de zone worden verwijderd. Wanneer dit niet wordt gedaan kunnen de DNS-gegevens tijdelijk onbeschikbaar zijn totdat de nieuwe sleutel door de DNS-hiërarchie is gepropageerd. Meer informatie over sleutelwisselingen en andere praktijken rondom DNSSEC staan in <a href=http://www.ietf.org/rfc/rfc4641.txt>RFC 4641: DNSSEC Operational practices</a>.</p></div></div><div class=sect3><h4 id=_automatisering_met_bind_9_7_of_nieuwer>29.6.8.3. Automatisering met BIND 9.7 of nieuwer<a class=anchor href=#_automatisering_met_bind_9_7_of_nieuwer></a></h4><div class=paragraph><p>In versie 9.7 van BIND is een nieuwe mogelijkheid genaamd <em>Smart Signing</em> geïntroduceerd. Deze mogelijkheid heeft als doel om het sleutelbeheer en ondertekenproces eenvoudiger te maken door delen van deze taken te automatiseren. Door de sleutels in een <em>sleutelreservoir</em> te stoppen en de nieuwe optie <code>auto-dnssec</code> te gebruiken, is het mogelijk om een dynamische zone aan te maken welke opnieuw getekend wordt indien dat nodig is. Gebruik om deze zone bij te werken nsupdate met de nieuwe <code>-l</code>. rndc kan nu ook zones ondertekenen met sleutels uit het sleutelreservoir door de optie <code>sign</code> te gebruiken. Voeg, om BIND dit automatische ondertekenen en bijwerken van zones te laten gebruiken voor <code>example.com</code>, het volgende aan <span class=filename>named.conf</span> toe:</p></div><div class="literalblock programlisting"><div class=content><pre>zone example.com {
	type master;
	key-directory &#34;/etc/named/keys&#34;;
	update-policy local;
	auto-dnssec maintain;
	file &#34;/etc/named/dynamic/example.com.zone&#34;;
};</pre></div></div><div class=paragraph><p>Nadat deze veranderingen gemaakt zijn, dienen de sleutels voor de zone aangemaakt te worden zoals uitgelegd in <a href=#dns-dnssec-auth>Configuratie van een autoratieve DNS-server</a>, deze sleutels in het sleutelreservoir gestopt te worden dat als argument aan de <code>key-directory</code> in het zoneconfiguratie is meegegeven, waarna de zone automatisch zal worden ondertekend. Zones die op deze manier zijn geconfigureerd dienen met nsupdate te worden gedaan, dat voor het opnieuw ondertekenen van de zone met de nieuw toegevoegde gegevens zal zorgen. Zie voor meer details <a href=#dns-read>Verder lezen</a> en de BIND-documentatie.</p></div></div></div><div class=sect2><h3 id=_beveiliging>29.6.9. Beveiliging<a class=anchor href=#_beveiliging></a></h3><div class=paragraph><p>Hoewel BIND de meest gebruikte implementatie van DNS is, is er altijd nog het beveiligingsvraagstuk. Soms worden er mogelijke en te misbruiken beveiligingsgaten gevonden.</p></div><div class=paragraph><p>Hoewel FreeBSD named automatisch in een <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a>-omgeving plaatst; zijn er verschillende andere beveiligingsmechanismen actief die zouden kunnen helpen om mogelijke aanvallen op de DNS-dienst af te wenden.</p></div><div class=paragraph><p>Het is altijd verstandig om de <a href=http://www.cert.org/>CERT</a> beveiligingswaarschuwingen te lezen en een abonnement te nemen op de <a href=https://lists.FreeBSD.org/subscription/freebsd-security-notifications>FreeBSD beveiligingswaarschuwingen mailinglijst</a> om bij te blijven met de beveiligingsproblemen wat betreft Internet en FreeBSD.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Als er problemen ontstaan, kan het bijwerken van broncode en het opnieuw bouwen van named hulp bieden.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=dns-read>29.6.10. Verder lezen<a class=anchor href=#dns-read></a></h3><div class=paragraph><p>BIND/named hulppagina’s: <a href="https://man.freebsd.org/cgi/man.cgi?query=rndc&amp;sektion=8&amp;format=html">rndc(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=named.conf&amp;sektion=8&amp;format=html">named.conf(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=nsupdate&amp;sektion=8&amp;format=html">nsupdate(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=dnssec-signzone&amp;sektion=8&amp;format=html">dnssec-signzone(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=dnssec-keygen&amp;sektion=8&amp;format=html">dnssec-keygen(8)</a></p></div><div class=ulist><ul><li><p><a href=https://www.isc.org/software/bind/>Officiële ISC BIND pagina</a></p></li><li><p><a href=https://www.isc.org/software/guild/>Officieel ISC BIND Forum</a></p></li><li><p><a href=http://www.oreilly.com/catalog/dns5/>O’Reilly DNS en BIND 5e Editie</a></p></li><li><p><a href=http://www.root-dnssec.org/documentation/>Root DNSSEC</a></p></li><li><p><a href=http://data.iana.org/root-anchors/draft-icann-dnssec-trust-anchor.html>DNSSEC Trust Anchor Publication for the Root Zone</a></p></li><li><p><a href=http://tools.ietf.org/html/rfc1034>RFC1034 - Domain Names - Concepts and Facilitities</a></p></li><li><p><a href=http://tools.ietf.org/html/rfc1035>RFC1035 - Domain Names - Implementation and Specification</a></p></li><li><p><a href=http://tools.ietf.org/html/rfc4033>RFC4033 - DNS Security Introduction and Requirements</a></p></li><li><p><a href=http://tools.ietf.org/html/rfc4034>RFC4034 - Resource Records for the DNS Security Extensions</a></p></li><li><p><a href=http://tools.ietf.org/html/rfc4035>RFC4035 - Protocol Modifications for the DNS Security Extensions</a></p></li><li><p><a href=http://tools.ietf.org/html/rfc4641>RFC4641 - DNSSEC Operational Practices</a></p></li><li><p><a href=http://tools.ietf.org/html/rfc5011>RFC5011 - Automated Updates of DNS Security (DNSSEC Trust Anchors)</a></p></li></ul></div></div></div></div><div class=sect1><h2 id=network-apache>29.7. Apache HTTP server<a class=anchor href=#network-apache></a></h2><div class=sectionbody><div class=sect2><h3 id=_overzicht_2>29.7.1. Overzicht<a class=anchor href=#_overzicht_2></a></h3><div class=paragraph><p>FreeBSD wordt gebruikt om een paar van de drukste websites ter wereld te draaien. De meeste webservers op Internet maken gebruik van de Apache HTTP Server. Apache softwarepakketten staan op de FreeBSD installatiemedia. Als Apache niet bij de oorspronkelijke installatie van FreeBSD is meegeïnstalleerd, dan kan dat vanuit de port <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a>.</p></div><div class=paragraph><p>Als Apache succesvol is geïnstalleerd, moeten er instellingen gemaakt worden.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In dit onderdeel wordt versie 2.2.X van de Apache HTTP Server behandeld omdat die het meest gebruikt wordt op FreeBSD. Meer gedetailleerde informatie over Apache 2.X dat buiten het bereik van dit document valt is te vinden op <a href=http://httpd.apache.org/>http://httpd.apache.org/</a>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_instellen>29.7.2. Instellen<a class=anchor href=#_instellen></a></h3><div class=paragraph><p>Het belangrijkste bestand met instellingen voor de Apache HTTP Server op FreeBSD is <span class=filename>/usr/local/etc/apache22/httpd.conf</span>. Dit bestand is een typisch UNIX® tekstgebaseerd instellingenbestand waarin regels met commentaar beginnen met het karakter <code>#</code>. Het uitputtend beschrijven van alle mogelijke instellingen valt buiten het bereik van dit boek, dus worden alleen de meest gebruikte directieven beschreven.</p></div><div class=dlist><dl><dt class=hdlist1><code>ServerRoot "/usr/local"</code></dt><dd><p>Hierin wordt de standaard mappenhiërarchie voor de Apache installatie aangegeven. Binaire bestanden staan in de submappen <span class=filename>bin</span> en <span class=filename>sbin</span> van de serverroot en bestanden met instellingen staan in <span class=filename>etc/apache</span>.</p></dd><dt class=hdlist1><code>ServerAdmin <a href=mailto:beheerder@beheer.adres>beheerder@beheer.adres</a></code></dt><dd><p>Het adres waaraan problemen met de server gemaild kunnen worden. Dit adres verschijnt op een aantal door de server gegenereerde pagina’s, zoals documenten met foutmeldingen.</p></dd><dt class=hdlist1><code>ServerName www.example.com</code></dt><dd><p>Met <code>ServerName</code> kan een hostnaam ingesteld worden die wordt teruggezonden aan de cliënten als de naam van de server anders is dan diegene is ingesteld (gebruik bijvoorbeeld <code>www</code> in plaats van de echte hostnaam).</p></dd><dt class=hdlist1><code>DocumentRoot "/usr/local/www/apache22/data"</code></dt><dd><p><code>DocumentRoot</code>: de map waaruit de documenten worden geserveerd. Standaard worden alle verzoeken uit deze map gehaald, maar er kunnen symbolische links en aliassen gebruikt worden om naar andere locaties te wijzen.</p></dd></dl></div><div class=paragraph><p>Het is altijd een goed idee om reservekopieën te maken van het instellingenbestand voor Apache vóór het maken van wijzigingen. Als de juiste instellingen gemaakt zijn, kan Apache gestart worden.</p></div></div><div class=sect2><h3 id=_apache_draaien>29.7.3. Apache draaien<a class=anchor href=#_apache_draaien></a></h3><div class=paragraph><p>De port <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache2/>www/apache2</a> installeert een <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>-script dat helpt met het starten, stoppen en herstarten van Apache en is te vinden in <span class=filename>/usr/local/etc/rc.d/</span>.</p></div><div class=paragraph><p>Om Apache met het systeem mee te starten kan de volgende regel aan <span class=filename>/etc/rc.conf</span> worden toegevoegd:</p></div><div class="literalblock programlisting"><div class=content><pre>apache22_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Als het nodig is Apache met afwijkende opties op te starten, kan de volgende regel aan <span class=filename>/etc/rc.conf</span> worden toegevoegd:</p></div><div class="literalblock programlisting"><div class=content><pre>apache22_flags=&#34;&#34;</pre></div></div><div class=paragraph><p>De configuratie van Apache kan worden getest op fouten voordat het daemon <code>httpd</code> voor de eerste keer wordt gestart, of na het maken van wijzigingen aan de instellingen terwijl <code>httpd</code> draait. Dit kan direct door het <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>-script worden gedaan, of door het gereedschap <a href="https://man.freebsd.org/cgi/man.cgi?query=service&amp;sektion=8&amp;format=html">service(8)</a> door één van de volgende commando’s op te geven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service apache22 configtest</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Het is belangrijk om op te merken dat <code>configtest</code> geen <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>-standaard is, verwacht niet dat het met alle <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>-opstartscripts werkt.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Als Apache geen instellingsfouten meldt, kan Apache <code>httpd</code> gestart worden met <a href="https://man.freebsd.org/cgi/man.cgi?query=service&amp;sektion=8&amp;format=html">service(8)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service apache22 start</span></code></pre></div></div><div class=paragraph><p>De dienst <code>httpd</code> kan getest worden door <code><a href=http://localhost class=bare>http://localhost</a></code> in een webbrowser te typen, waarbij <em>localhost</em> door de volledig gekwalificeerde domeinnaam wordt vervangen van de machine die <code>httpd</code> draait, als het niet de lokale machine is. De standaard webpagina die afgebeeld wordt is <span class=filename>/usr/local/www/apache22/data/index.html</span>.</p></div></div><div class=sect2><h3 id=_virtuele_hosting>29.7.4. Virtuele hosting<a class=anchor href=#_virtuele_hosting></a></h3><div class=paragraph><p>Apache ondersteunt twee verschillende manieren van Virtuele Hosting. De eerste methode is Naamgebaseerde Virtuele Hosting. Naamgebaseerde Virtuele Hosting gebruikt de HTTP/1.1 headers van de cliënten om de hostnaam uit te zoeken. Hierdoor kunnen meerdere domeinen hetzelfde IP-adres delen.</p></div><div class=paragraph><p>Om Apache gebruik te laten maken van Naamgebaseerde Virtuele Hosting kan een regel als de volgende in <span class=filename>httpd.conf</span> worden opgenomen:</p></div><div class="literalblock programlisting"><div class=content><pre>NameVirtualHost *</pre></div></div><div class=paragraph><p>Als een webserver <code>www.domein.tld</code> heet en er moet een virtueel domein voor <code>www.anderdomein.tld</code> gaan draaien, dan kunnen de volgende regels aan <span class=filename>httpd.conf</span> worden toegevoegd:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&lt;VirtualHost <span class=k>*</span><span class=o>&gt;</span>
    ServerName www.domein.tld
    DocumentRoot /www/domein.tld
&lt;/VirtualHost&gt;

&lt;VirtualHost <span class=k>*</span><span class=o>&gt;</span>
    ServerName www.anderdomein.tld
    DocumentRoot /www/anderdomein.tld
&lt;/VirtualHost&gt;</code></pre></div></div><div class=paragraph><p>De adressen en de paden uit dit voorbeeld kunnen in echte implementaties uiteraard gewijzigd worden.</p></div><div class=paragraph><p>Meer informatie over het opzetten van virtuele hosts staat in de officiële documentatie voor Apache op <a href=http://httpd.apache.org/docs/vhosts/>http://httpd.apache.org/docs/vhosts/</a></p></div></div><div class=sect2><h3 id=_apache_modules>29.7.5. Apache modules<a class=anchor href=#_apache_modules></a></h3><div class=paragraph><p>Er zijn veel verschillende Apache modules die functionaliteit toevoegen aan de basisdienst. De FreeBSD Portscollectie biedt op een eenvoudige manier de mogelijkheid om Apache samen met de meeste populaire add-on modules te installeren.</p></div><div class=sect3><h4 id=_mod_ssl>29.7.5.1. mod_ssl<a class=anchor href=#_mod_ssl></a></h4><div class=paragraph><p>De module mod_ssl gebruikt de bibliotheek OpenSSL om sterke cryptografie te leveren via de protocollen Secure Sockets Layer (SSL v2/v3) en Transport Layer Security (TLS v1). Deze module levert alles wat nodig is om een getekend certificaat aan te vragen bij een vertrouwde certificaatautoriteit om een veilige webserver onder FreeBSD te kunnen draaien.</p></div><div class=paragraph><p>De module mod_ssl wordt standaard gebouwd, maar kan worden aangezet door tijdens het compileren <code>-DWITH_SSL</code> op te geven.</p></div></div><div class=sect3><h4 id=_taalbindingen>29.7.5.2. Taalbindingen<a class=anchor href=#_taalbindingen></a></h4><div class=paragraph><p>Er zijn Apache-modules beschikbare voor de meeste grote scriptingtalen. Deze modules maken het typisch mogelijk om Apache-modules geheel in een scriptingtaal te schrijven. Ze worden ook vaak gebruikt als een persistente interpreter die in de server zit en die de rompslomp van het starten van een externe interpreter en de opstartvertraging voor dynamische websites vermijdt, zoals beschreven in de volgende sectie.</p></div></div></div><div class=sect2><h3 id=_dynamische_websites>29.7.6. Dynamische websites<a class=anchor href=#_dynamische_websites></a></h3><div class=paragraph><p>In het afgelopen decennium hebben steeds meer bedrijven zich op Internet gericht om hun omzet te verhogen en hun zichtbaarheid te vergroten. Hiermee is ook de behoefte aan interactieve webinhoud toegenomen. Hoewel sommige bedrijven zoals Microsoft® oplossingen hebben geïntroduceerd voor hun eigen (propriëtaire) producten, heeft ook de open source gemeenschap een antwoord op de vraag gegeven. Moderne opties voor dynamische webinhoud zijn onder andere Django, Ruby on Rails, mod_perl2, en mod_php.</p></div><div class=sect3><h4 id=_django>29.7.6.1. Django<a class=anchor href=#_django></a></h4><div class=paragraph><p>Django is een BSD-gelicenseerd raamwerk ontworpen om ontwikkelaars in staat te stellen om snel hoog presterende, elegante webapplicaties te schrijven. Het biedt een vertaling van objecten naar relaties zodat datatypes ontwikkeld kunnen worden als Python-objecten, en er een rijke dynamische databasetoegang voor die objecten kan worden geboden zonder dat de ontwikkelaar ooit SQL hoeft te schrijven. Het biedt ook een uitbreidbaar sjabloonsysteem zodat de applicatielogica is gescheiden van de HTML-presentatie.</p></div><div class=paragraph><p>Django is afhankelijk van mod_python, Apache, en een SQL-database-engine naar keuze. De FreeBSD-port zal al deze vereisten met de juiste vlaggen voor u installeren.</p></div><div id=network-www-django-install class=exampleblock><div class=title>Voorbeeld 3. Django installeren met Apache2, mod_python3 en PostgreSQL</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/www/py-django; make all install clean -DWITH_MOD_PYTHON3 -DWITH_POSTGRESQL</span></code></pre></div></div></div></div><div class=paragraph><p>Als Django en deze vereisten eenmaal zijn geïnstalleerd, dient u een Django-projectmap te maken en vervolgens Apache te configureren om de ingebakken Python-interpreter te gebruiken om uw applicatie voor specifieke URL’s op uw site aan te roepen.</p></div><div id=network-www-django-apache-config class=exampleblock><div class=title>Voorbeeld 4. Apache-configuratie voor Django/mod_python</div><div class=content><div class=paragraph><p>U moet een regel aan het Apache-bestand <span class=filename>httpd.conf</span> toevoegen om Apache in te stellen om verzoeken voor bepaalde URL’s aan uw webapplicatie door te geven:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&lt;Location <span class=s2>&#34;/&#34;</span><span class=o>&gt;</span>
    SetHandler python-program
    PythonPath <span class=s2>&#34;[&#39;/map/naar/uw/django-pakketten/&#39;] + sys.path&#34;</span>
    PythonHandler django.core.handlers.modpython
    SetEnv DJANGO_SETTINGS_MODULE mijnsite.settings
    PythonAutoReload On
    PythonDebug On
&lt;/Location&gt;</code></pre></div></div></div></div></div><div class=sect3><h4 id=_ruby_on_rails>29.7.6.2. Ruby on Rails<a class=anchor href=#_ruby_on_rails></a></h4><div class=paragraph><p>Ruby on Rails is een ader opensource webraamwerk dat een volledige ontwikkelstack biedt en geoptimaliseerd is om webontwikkelaars productiever te maken en snel krachtige applicaties te laten ontwikkelen. Het kan eenvoudig vanuit het portssysteem geïnstalleerd worden.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/www/rubygem-rails; make all install clean</span></code></pre></div></div></div><div class=sect3><h4 id=_mod_perl2>29.7.6.3. mod_perl2<a class=anchor href=#_mod_perl2></a></h4><div class=paragraph><p>Het Apache/Perl integratieproject brengt de volledige kracht van de programmeertaal Perl en de Apache HTTP Server samen. Met de module mod_perl2 is het mogelijk om Apache-modules volledig in Perl te schrijven. Daarnaast voorkomt een ingebouwde persistente interpreter in de server de rompslomp van het starten van een externe interpreter en de nadelen van de opstarttijd van Perl.</p></div><div class=paragraph><p>mod_perl2 is beschikbaar in de port <a class=package href=https://cgit.freebsd.org/ports/tree/www/mod_perl2/>www/mod_perl2</a>.</p></div></div><div class=sect3><h4 id=_mod_php>29.7.6.4. mod_php<a class=anchor href=#_mod_php></a></h4><div class=paragraph><p>PHP, ook bekend als "PHP: Hypertext Preprocessor", is een algemene scripttaal die bijzonder geschikt is voor webontwikkeling. Het is mogelijk de taal in te bedden in HTML en de syntaxis is afgeleid van C, Java™ en Perl met de bedoeling webontwikkelaars in staat te stellen om snel dynamisch samengestelde pagina’s te schrijven.</p></div><div class=paragraph><p>Om ondersteuning voor PHP5 toe te voegen aan de Apache webserver kan eerst de port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> geïnstalleerd worden.</p></div><div class=paragraph><p>Als de port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> voor het eerst geïnstalleerd wordt, worden automatisch de beschikbare <code>OPTIONS</code> weergegeven. Als er geen menu wordt weergegeven, omdat de port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> reeds in het verleden is geïnstalleerd, is het altijd mogelijk om het optiedialoog weer te laten verschijnen door</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make config</span></code></pre></div></div><div class=paragraph><p>uit te voeren in de map van de port.</p></div><div class=paragraph><p>Controleer in het optiedialoog dat de optie <code>APACHE</code> mod_php5 als een laadbare module voor de webserver Apache bouwt.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Een heleboel sites draaien nog steeds PHP4 om verschillende redenen (compatibiliteitszaken of reeds in gebruik genomen webapplicaties). Als mod_php4 nodig is in plaats van mod_php5, gebruik dan de port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php4/>lang/php4</a>. De port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php4/>lang/php4</a> ondersteunt een groot deel van de configuratie- en bouwopties van de port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Hiermee worden de modules die nodig zijn voor de ondersteuning van dynamische PHP-applicaties geïnstalleerd en ingesteld. Controleer dat de volgende secties aan <span class=filename>/usr/local/etc/apache22/httpd.conf</span> zijn toegevoegd:</p></div><div class="literalblock programlisting"><div class=content><pre>LoadModule php5_module        libexec/apache/libphp5.so</pre></div></div><div class="literalblock programlisting"><div class=content><pre>AddModule mod_php5.c
    IfModule mod_php5.c
        DirectoryIndex index.php index.html
    /IfModule
    IfModule mod_php5.c
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
    /IfModule</pre></div></div><div class=paragraph><p>Na voltooiing is een eenvoudige aanroep van het commando <code>apachectl</code> voor een nette herstart nodig om de module PHP te laden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># apachectl graceful</span></code></pre></div></div><div class=paragraph><p>Voor toekomstig bijwerken van PHP zal het commando <code>make config</code> niet nodig zijn; de geselecteerde <code>OPTIONS</code> worden automatisch bewaard door het FreeBSD Ports raamwerk.</p></div><div class=paragraph><p>De ondersteuning voor PHP in FreeBSD is extreem modulair waardoor de basisinstallatie zeer beperkt is. Het is heel gemakkelijk om ondersteuning toe te voegen door de port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5-extensions/>lang/php5-extensions</a> te gebruiken. Deze port biedt een menugestuurde interface voor de installatie van PHP-uitbreidingen. Als alternatief kunnen individuele uitbreidingen worden geïnstalleerd door de juiste port te gebruiken.</p></div><div class=paragraph><p>Om bijvoorbeeld ondersteuning voor de MySQL databaseserver aan PHP5 toe te voegen kan gewoonweg de port <span class=filename>databases/php5-mysql</span> geïnstalleerd worden:</p></div><div class=paragraph><p>Na de installatie van een uitbreiding moet de Apache-server herladen worden om de nieuwe veranderingen in de configuratie op te pikken:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># apachectl graceful</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=network-ftp>29.8. File Transfer Protocol (FTP)<a class=anchor href=#network-ftp></a></h2><div class=sectionbody><div class=sect2><h3 id=_overzicht_3>29.8.1. Overzicht<a class=anchor href=#_overzicht_3></a></h3><div class=paragraph><p>Het File Transfer Protocol (FTP) biedt gebruikers een eenvoudige manier om bestanden van en naar een FTP server te verplaatsen. FreeBSD bevat FTP server software, ftpd, in het basissysteem. Hierdoor is het opzetten en beheren van een FTP server op FreeBSD erg overzichtelijk.</p></div></div><div class=sect2><h3 id=_instellen_2>29.8.2. Instellen<a class=anchor href=#_instellen_2></a></h3><div class=paragraph><p>De belangrijkste stap bij het instellen is de beslissing welke accounts toegang krijgen tot de FTP server. Een normaal FreeBSD systeem heeft een aantal systeemaccounts die gebruikt worden voor daemons, maar onbekende gebruikers mag niet toegestaan worden van die accounts gebruikt te maken. In <span class=filename>/etc/ftpusers</span> staat een lijst met gebruikers die geen FTP toegang hebben. Standaard staan daar de voorgenoemde accounts in, maar het is ook mogelijk om daar gebruikers toe te voegen die geen FTP toegang mogen hebben.</p></div><div class=paragraph><p>Het kan ook wenselijk zijn de FTP toegang voor sommige gebruikers te beperken, maar niet onmogelijk te maken. Dit kan met <span class=filename>/etc/ftpchroot</span>. In dat bestand staan gebruikers en groepen waarop FTP toegangsbeperkingen van toepassing zijn. In <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5&amp;format=html">ftpchroot(5)</a> staan alle details die hier niet beschreven zijn.</p></div><div class=paragraph><p>Om anonieme FTP toegang voor een server in te schakelen, dient er een gebruiker <code>ftp</code> op een FreeBSD systeem aangemaakt te worden. Dan kunnen gebruikers op de server aanmelden met de gebruikersnaam <code>ftp</code> of <code>anonymous</code> en met ieder wachtwoord (de geldende conventie schrijft voor dat dit een emailadres van de gebruiker is). De FTP server roep bij een anonieme aanmelding <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=2&amp;format=html">chroot(2)</a> aan, zodat er alleen toegang is tot de thuismap van de gebruiker <code>ftp</code>.</p></div><div class=paragraph><p>Er zijn twee tekstbestanden waarin welkomstberichten voor de FTP-cliënten gezet kunnen worden. De inhoud van <span class=filename>/etc/ftpwelcome</span> wordt getoond voordat gebruikers een aanmeldprompt zien. Na een succesvolle aanmelding wordt de inhoud van <span class=filename>/etc/ftpmotd</span> getoond. Het genoemde pad is relatief ten opzichte van de aanmeldomgeving, dus voor anonieme gebruikers wordt <span class=filename>~ftp/etc/ftpmotd</span> getoond.</p></div><div class=paragraph><p>Als een FTP server eenmaal correct is ingesteld, moet die ingeschakeld worden in <span class=filename>/etc/inetd.conf</span>. Daar moet het commentaarkarakter <code>#</code> voor de bestaande ftpd regel verwijderd worden:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</pre></div></div><div class=paragraph><p>Zoals is uitgelegd in <a href=#network-inetd-reread>Het instellingenbestand van inetd herladen</a>, moet de configuratie van inetd worden herladen nadat dit instellingenbestand is gewijzigd. Details over het aanzetten van inetd op uw systeem staan in <a href=#network-inetd-settings>Instellingen</a>.</p></div><div class=paragraph><p>Als alternatief kan ftpd ook gestart worden als een op zichzelf staande dienst. In dat geval volstaat het om de juiste variabele in te stellen in <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>ftpd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Na het instellen van de bovenstaande variabele zal de op zichzelf staande server gestart worden nadat de computer opnieuw is opgestart, of het kan handmatig worden gestart door het volgende commando als <code>root</code> uit te voeren:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service ftpd start</span></code></pre></div></div><div class=paragraph><p>Nu kan aangemeld worden op de FTP-server met:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ftp localhost</code></pre></div></div></div><div class=sect2><h3 id=_beheren>29.8.3. Beheren<a class=anchor href=#_beheren></a></h3><div class=paragraph><p>De ftpd daemon gebruikt <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> om berichten te loggen. Standaard plaatst de systeemlogdaemon berichten over FTP in <span class=filename>/var/log/xferlog</span>. De lokatie van het FTP logboek kan gewijzigd worden door de volgende regels in <span class=filename>/etc/syslog.conf</span> te wijzigen:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp.info      /var/log/xferlog</pre></div></div><div class=paragraph><p>Het is verstandig na te denken over de gevaren die op de loer liggen bij het draaien van een anonieme FTP server. Dat geldt in het bijzonder voor het laten uploaden ven bestanden. Het is dan goed mogelijk dat een FTP site een forum wordt om commerciële software zonder licenties uit te wisselen of erger. Als anonieme uploads toch nodig zijn, dan horen de rechten op die bestanden zo te staan dat ze niet door andere anonieme gebruikers gelezen kunnen worden tot er door een beheerder naar gekeken is.</p></div></div></div></div><div class=sect1><h2 id=network-samba>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)<a class=anchor href=#network-samba></a></h2><div class=sectionbody><div class=sect2><h3 id=_overzicht_4>29.9.1. Overzicht<a class=anchor href=#_overzicht_4></a></h3><div class=paragraph><p>Samba is een populair open source softwarepakket dat bestands- en printdiensten voor Microsoft® Windows® cliënten biedt. Die cliënten kunnen dan ruimte op een FreeBSD bestandssysteem gebruiken alsof het een lokale schijf is en FreeBSD printers gebruiken alsof het lokale printers zijn.</p></div><div class=paragraph><p>Samba softwarepakketten horen op de FreeBSD installatiemedia te staan. Als Samba bij de basisinstallatie niet mee is geïnstalleerd, dan kan dat alsnog via de <a class=package href=https://cgit.freebsd.org/ports/tree/net/samba34/>net/samba34</a> port of met het pakket.</p></div></div><div class=sect2><h3 id=_instellen_3>29.9.2. Instellen<a class=anchor href=#_instellen_3></a></h3><div class=paragraph><p>Een standaardbestand met instellingen voor Samba wordt geïnstalleerd als <span class=filename>/usr/local/shared/examples/samba34/smb.conf.default</span>. Dit bestand dient gekopieerd te worden naar <span class=filename>/usr/local/etc/smb.conf</span> en voordat Samba gebruikt kan worden, moeten er aanpassingen aan worden gemaakt.</p></div><div class=paragraph><p><span class=filename>smb.conf</span> bevat de instellingen voor Samba, zoals die voor de printers en de "gedeelde bestandssystemen" die gedeeld worden met Windows® cliënten. Het pakket Samba bevat een webgebaseerde beheermodule die swat heet, waarmee <span class=filename>smb.conf</span> op een eenvoudige manier ingesteld kan worden.</p></div><div class=sect3><h4 id=_de_samba_webbeheermodule_gebruiken_swat>29.9.2.1. De Samba webbeheermodule gebruiken (SWAT)<a class=anchor href=#_de_samba_webbeheermodule_gebruiken_swat></a></h4><div class=paragraph><p>De Samba Webbeheermodule (SWAT) draait als een daemon vanuit inetd. Daarom dient inetd aangezet te worden zoals beschreven in <a href=#network-inetd>De inetd"Super-Server"</a> en dient voor de volgende regel uit <span class=filename>/etc/inetd.conf</span> het commentaarkarakter verwijderd te worden voordat swat gebruikt kan worden om Samba in te stellen:</p></div><div class="literalblock programlisting"><div class=content><pre>swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</pre></div></div><div class=paragraph><p>Zoals is uitgelegd in <a href=#network-inetd-reread>Het instellingenbestand van inetd herladen</a>, moet de configuratie van inetd worden herladen nadat dit instellingenbestand is gewijzigd.</p></div><div class=paragraph><p>Als swat is ingeschakeld in <span class=filename>inetd.conf</span>, kan de module gebruikt worden door met een browser een verbinding te maken met <a href=http://localhost:901>http://localhost:901</a>. Er dient aangemeld te worden met het <code>root</code> account van het systeem.</p></div><div class=paragraph><p>Na succesvol aanmelden op de hoofdpagina voor de Samba instellingen, is het mogelijk de systeemdocumentatie te bekijken of te starten door op het tabblad <b class=menuref>Globals</b> te klikken. Het onderdeel <b class=menuref>Globals</b> correspondeert met de sectie <code>[global]</code> in <span class=filename>/usr/local/etc/smb.conf</span>.</p></div></div><div class=sect3><h4 id=_systeembrede_instellingen>29.9.2.2. Systeembrede instellingen<a class=anchor href=#_systeembrede_instellingen></a></h4><div class=paragraph><p>Of Samba nu wordt ingesteld door <span class=filename>/usr/local/etc/smb.conf</span> direct te bewerken of met swat, de eerste instellingen die gemaakt moeten worden zijn de volgende:</p></div><div class=dlist><dl><dt class=hdlist1><code>workgroup</code></dt><dd><p>NT Domeinnaam of Werkgroepnaam voor de computers die verbinding gaan maken met de server.</p></dd><dt class=hdlist1><code>netbiosnaam</code></dt><dd><p>Hiermee wordt de NetBIOS naam waaronder de Samba server bekend zal zijn ingesteld. Standaard is de naam het eerste gedeelte van de DNS-naam van een host.</p></dd><dt class=hdlist1><code>server string</code></dt><dd><p>Hiermee wordt de string ingesteld die te zien is als het commando <code>net view</code> en een aantal andere commando’s die gebruik maken van de beschrijvende tekst voor de server gebruikt worden.</p></dd></dl></div></div><div class=sect3><h4 id=_beveiligingsinstellingen>29.9.2.3. Beveiligingsinstellingen<a class=anchor href=#_beveiligingsinstellingen></a></h4><div class=paragraph><p>Twee van de belangrijkste instellingen in <span class=filename>/usr/local/etc/smb.conf</span> zijn het gekozen beveiligingsmodel en het wachtwoord voor cliëntgebruikers. Deze worden met de volgende instellingen gemaakt:</p></div><div class=dlist><dl><dt class=hdlist1><code>security</code></dt><dd><p>De twee meest gebruikte mogelijkheden hier zijn <code>security = share</code> en <code>security = user</code>. Als de cliënten gebruikersnamen hebben die overeenkomen met hun gebruikersnaam op de FreeBSD machine, dan is het verstandig om te kiezen voor beveiliging op gebruikersniveau. Dit is het standaard beveiligingsbeleid en kent als voorwaarde dat gebruikers zich eerst moeten aanmelden voordat ze toegang krijgen tot gedeelde bronnen.</p><div class=paragraph><p>Bij beveiliging op shareniveau hoeft een cliënt niet met een geldige gebruikersnaam en wachtwoord aan te melden op de server voor het mogelijk is om een verbinding te proberen te krijgen met een gedeelde bron. Dit was het standaardbeveiligingsmodel voor oudere versies van Samba.</p></div></dd><dt class=hdlist1><code>passdb backend</code></dt><dd><p>Samba kent aan de achterkant verschillende authenticatiemodellen. Cliënten kunnen authenticeren met LDAP, NIS+, een SQL-database of een aangepast wachtwoordbestand. De standaard authenticatiemethode is <code>smbpasswd</code>. Meer wordt hier niet behandeld.</p></dd></dl></div><div class=paragraph><p>Als aangenomen wordt dat de standaard achterkant <code>smbpasswd</code> wordt gebruikt, dan moet <span class=filename>/usr/local/etc/samba/smbpasswd</span> gemaakt worden om Samba in staat te stellen cliënten te authenticeren. Als het gewenst is om uw UNIX® gebruikersaccounts toegang te geven vanaf Windows® cliënten, gebruik dan het volgende commando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># smbpasswd -a gebruikersnaam</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>De aanbevolen backend is nu <code>tdbsam</code>, en het volgende command moet gebruikt worden om gebruikersaccounts toe te voegen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pdbedit -a -u gebruikersnaam</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>In de <a href=http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection>Official Samba HOWTO</a> staat meer informatie over instelopties. Met de hier gegeven basisuitleg moet het mogelijk zijn Samba draaiende te krijgen.</p></div></div></div><div class=sect2><h3 id=_samba_starten>29.9.3. Samba starten<a class=anchor href=#_samba_starten></a></h3><div class=paragraph><p>De port <a class=package href=https://cgit.freebsd.org/ports/tree/net/samba34/>net/samba34</a> voegt een nieuw opstartscript toe, dat gebruikt kan worden om Samba te beheren. Om dit script te activeren, zodat het bijvoorbeeld gebruikt kan worden om Samba te starten, stoppen, of te herstarten, dient de volgende regel aan <span class=filename>/etc/rc.conf</span> toegevoegd te worden:</p></div><div class="literalblock programlisting"><div class=content><pre>samba_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Of, voor fijnkorrelig beheer:</p></div><div class="literalblock programlisting"><div class=content><pre>nmbd_enable=&#34;YES&#34;</pre></div></div><div class="literalblock programlisting"><div class=content><pre>smbd_enable=&#34;YES&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Dit stelt Samba ook in om automatisch tijdens het opstarten te starten.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Vervolgens is het mogelijk om Samba op elk moment te starten door dit te typen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service samba start</span>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</code></pre></div></div><div class=paragraph><p>Refereer aan <a href=../config/#configtuning-rcd>Gebruik van rc met FreeBSD</a> voor meer informatie over het gebruikt van rc-scripts.</p></div><div class=paragraph><p>Samba bestaat feitelijk uit drie afzonderlijke daemons. Het script <span class=filename>samba</span> start de daemons nmbd en smbd. Als de winbind naamresolutiediensten in <span class=filename>smb.conf</span> zijn ingeschakeld, dan start ook de daemon winbindd.</p></div><div class=paragraph><p>Samba kan op ieder moment gestopt worden met:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service samba stop</span></code></pre></div></div><div class=paragraph><p>Samba is een complexe softwaresuite met functionaliteit waarmee verregaande integratie met Microsoft® Windows® netwerken mogelijk wordt. Informatie die verder gaat dan de basisinstallatie staat op <a href=http://www.samba.org>http://www.samba.org</a>.</p></div></div></div></div><div class=sect1><h2 id=network-ntp>29.10. Tijd synchroniseren met NTP<a class=anchor href=#network-ntp></a></h2><div class=sectionbody><div class=sect2><h3 id=_overzicht_5>29.10.1. Overzicht<a class=anchor href=#_overzicht_5></a></h3><div class=paragraph><p>Na verloop van tijd gaat de tijd van een computer meestal uit de pas lopen. Het Netwerk Tijd Protocol (NTP) kan ervoor zorgen dat de tijd accuraat blijft.</p></div><div class=paragraph><p>Veel diensten op Internet zijn afhankelijk, of hebben veel voordeel, van het betrouwbaar zijn van de tijd. Zo ontvangt een webserver bijvoorbeeld veel verzoeken om een bestand te sturen als dat gewijzigd is sinds een bepaald moment. In een LAN-omgeving is het van groot belang dat computers die bestanden delen van eenzelfde server gesynchroniseerde tijd hebben zodat de tijdstempels consistent blijven. Diensten zoals <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> zijn ook afhankelijk van een betrouwbare systeemtijd om commando’s op het ingestelde moment uit te voeren.</p></div><div class=paragraph><p>Bij FreeBSD zit de <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> NTP server die gebruikt kan worden om bij andere NTP servers de tijd op te vragen om de eigen klok gelijk te zetten of om de juiste tijd te verstrekken aan andere apparaten.</p></div></div><div class=sect2><h3 id=_passende_ntp_servers_kiezen>29.10.2. Passende NTP-servers kiezen<a class=anchor href=#_passende_ntp_servers_kiezen></a></h3><div class=paragraph><p>Om de tijd te synchroniseren moeten er één of meer NTP-servers beschikbaar zijn. Een lokale systeembeheerder of een ISP heeft wellicht een NTP-server voor dit doel opgezet. Het is verstandig om documentatie te raadplegen en te bekijken of dat het geval is. Er is een <a href=http://support.ntp.org/bin/view/Servers/WebHome>online lijst van publiek toegankelijke NTP-servers</a> waarop een NTP-server gezocht kan worden die in geografische zin dichtbij een te synchroniseren computer ligt. Het is belangrijk te voldoen aan het beleid voor de betreffende server en toestemming te vragen als dat in de voorwaarden staat.</p></div><div class=paragraph><p>Het is verstandig meerdere, niet van elkaar afhankelijke, NTP-servers te kiezen voor het geval een van de servers niet langer betrouwbaar is of niet bereikbaar is. <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> gebruikt de antwoorden die van andere servers ontvangen worden op intelligente wijze: betrouwbare servers krijgen voorrang boven onbetrouwbare servers.</p></div></div><div class=sect2><h3 id=_machine_instellen>29.10.3. Machine instellen<a class=anchor href=#_machine_instellen></a></h3><div class=sect3><h4 id=_basisinstellingen>29.10.3.1. Basisinstellingen<a class=anchor href=#_basisinstellingen></a></h4><div class=paragraph><p>Als het alleen de bedoeling is de tijd te synchroniseren bij het opstarten van een machine, dan kan <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> gebruikt worden. Dit kan van toepassing zijn op desktops die regelmatig herstart worden en niet echt regelmatig gesynchroniseerd hoeven te worden. Op sommige machines hoort echter <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> te draaien.</p></div><div class=paragraph><p>Het gebruik van <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> bij het opstarten is ook een goed idee voor machines waarop <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> draait. De <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> wijzigt de tijd geleidelijk, terwijl <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> gewoon de tijd instelt, hoe groot het verschil tussen de bestaande tijd van een machine en de correcte tijd ook is.</p></div><div class=paragraph><p>Om <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> tijdens het opstarten in te schakelen kan <code>ntpdate_enable="YES"</code> aan <span class=filename>/etc/rc.conf</span> worden toegevoegd. Alle voor de synchronisatie te gebruiken servers moeten dan, samen met eventuele opties voor <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a>, in <code>ntpdate_flags</code> aangegeven worden.</p></div></div><div class=sect3><h4 id=_algemene_instellingen>29.10.3.2. Algemene instellingen<a class=anchor href=#_algemene_instellingen></a></h4><div class=paragraph><p>NTP wordt ingesteld met het bestand <span class=filename>/etc/ntp.conf</span> in het formaat dat beschreven staat in <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a>. Hieronder volgt een eenvoudig voorbeeld:</p></div><div class="literalblock programlisting"><div class=content><pre>server ntplocal.example.com prefer
server timeserver.example.org
server ntp2a.example.net

driftfile /var/db/ntp.drift</pre></div></div><div class=paragraph><p>De optie <code>server</code> geeft aan welke servers er gebruikt moeten worden, met op elke regel een server. Als de server wordt ingesteld met het argument <code>prefer</code>, zoals bij <code>ntplocal.example.com</code>, dan krijgt die server de voorkeur boven de andere. Een antwoord van een voorkeursserver wordt genegeerd als dat significant afwijkt van de antwoorden van de andere servers. In andere gevallen wordt het gebruikt zonder rekening te houden met de andere antwoorden. Het argument <code>prefer</code> wordt meestal gebruikt voor NTP-servers waarvan bekend is dat ze erg betrouwbaar zijn, zoals die met speciale tijdbewakingshardware.</p></div><div class=paragraph><p>De optie <code>driftfile</code> geeft aan welk bestand gebruikt wordt om de offset van de klokfrequentie van het systeem op te slaan. <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> gebruikt die om automatisch te compenseren voor het natuurlijke afwijken van de tijd, zodat er zelfs bij gebrek aan externe bronnen een redelijke accurate tijdsinstelling mogelijk is.</p></div><div class=paragraph><p>De optie <code>driftfile</code> geeft aan welk bestand gebruikt wordt om informatie over eerdere antwoorden van NTP-servers die gebruikt worden op te slaan. Dit bestand bevat interne informatie voor NTP. Het hoort niet door andere processen gewijzigd te worden.</p></div></div><div class=sect3><h4 id=_toegang_tot_een_server_instellen>29.10.3.3. Toegang tot een server instellen<a class=anchor href=#_toegang_tot_een_server_instellen></a></h4><div class=paragraph><p>Een NTP-server is standaard toegankelijk voor alle hosts op een netwerk. De optie <code>restrict</code> in <span class=filename>/etc/ntp.conf</span> maakt het mogelijk om aan te geven welke machines de dienst mogen benaderen.</p></div><div class=paragraph><p>Voor het blokkeren van toegang voor alle andere machines kan de volgende regel aan <span class=filename>/etc/ntp.conf</span> toegevoegd worden:</p></div><div class="literalblock programlisting"><div class=content><pre>restrict default ignore</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Dit zal ook toegang van uw server naar alle servers die vermeld staan in uw lokale configuratie verhinderen. Als u uw NTP-server moet synchroniseren met een externe NTP-server, dient u deze specifieke server toe te staan. Lees de handleiding voor <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a> voor meer informatie.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Om alleen machines op bijvoorbeeld het lokale netwerk toe te staan hun tijd te synchroniseren met een server, maar ze tegelijkertijd niet toe te staan om de server te draaien of de server als referentie voor synchronisatie te gebruiken, kan de volgende regel toegevoegd worden:</p></div><div class="literalblock programlisting"><div class=content><pre>restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</pre></div></div><div class=paragraph><p>Hierboven is <code>192.168.1.0</code> een IP-adres op een LAN en <code>255.255.255.0</code> is het bijbehorende netwerkmasker.</p></div><div class=paragraph><p><span class=filename>/etc/ntp.conf</span> mag meerdere regels met <code>restrict</code> bevatten. Meer details staan in het onderdeel <code>Access Control Support</code> van <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a>.</p></div></div></div><div class=sect2><h3 id=_de_ntp_server_draaien>29.10.4. De NTP-server draaien<a class=anchor href=#_de_ntp_server_draaien></a></h3><div class=paragraph><p>De NTP-server kan bij het opstarten gestart worden door de regel <code>ntpd_enable="YES"</code> aan <span class=filename>/etc/rc.conf</span> toe te voegen. Om extra opties aan <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> mee te geven kan de parameter <code>ntpd_flags</code> in <span class=filename>/etc/rc.conf</span> gebruikt worden.</p></div><div class=paragraph><p>Om de server zonder een herstart van de machine te starten kan <code>ntpd</code> uitgevoerd worden, met toevoeging van de parameters uit <code>ntpd_flags</code> in <span class=filename>/etc/rc.conf</span>. Bijvoorbeeld:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ntpd -p /var/run/ntpd.pid</span></code></pre></div></div></div><div class=sect2><h3 id=_ntpd_gebruiken_met_een_tijdelijke_internetverbinding>29.10.5. ntpd gebruiken met een tijdelijke Internetverbinding<a class=anchor href=#_ntpd_gebruiken_met_een_tijdelijke_internetverbinding></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> heeft geen permanente verbinding met een netwerk nodig om goed te werken. Maar als er gebruik gemaakt wordt van een inbelverbinding, is het wellicht verstandig om ervoor te zorgen dat uitgaande NTP-verzoeken geen uitgaande verbinding kunnen starten. Als er gebruik gemaakt wordt van gebruikers-PPP, kunnen er <code>filter</code> commando’s ingesteld worden in <span class=filename>/etc/ppp/ppp.conf</span>. Bijvoorbeeld:</p></div><div class="literalblock programlisting"><div class=content><pre>set filter dial 0 deny udp src eq 123
# NTP-verkeer zorgt niet voor uitbellen
set filter dial 1 permit 0 0
set filter alive 0 deny udp src eq 123
# Inkomend NTP-verkeer houdt de verbinding niet open
set filter alive 1 deny udp dst eq 123
# Uitgaand NTP-verkeer houdt de verbinding niet open
set filter alive 2 permit 0/0 0/0</pre></div></div><div class=paragraph><p>Meer details staan in de sectie <code>PACKET FILTERING</code> in <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> en in de voorbeelden in <span class=filename>/usr/shared/examples/ppp/</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Sommige Internetproviders blokkeren lage poorten, waardoor NTP niet kan werken omdat er nooit een antwoord ontvangen kan worden door een machine.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_meer_informatie>29.10.6. Meer informatie<a class=anchor href=#_meer_informatie></a></h3><div class=paragraph><p>HTML-documentatie voor de NTP-server staat in <span class=filename>/usr/shared/doc/ntp/</span>.</p></div></div></div></div><div class=sect1><h2 id=network-syslogd>29.11. Hosts op afstand loggen met <code>syslogd</code><a class=anchor href=#network-syslogd></a></h2><div class=sectionbody><div class=paragraph><p>Het omgaan met systeemlogs is een cruciaal aspect van zowel beveiligings- als systeembeheer. Het in de gaten houden van logbestanden van meerdere hosts kan nogal onhandelbaar worden als deze hosts over (middel)grote netwerken zijn verspreid, of wanneer ze deel zijn van verschillende soorten netwerken. In deze gevallen kan het op afstand loggen het gehele proces een stuk aangenamer maken.</p></div><div class=paragraph><p>Het centraal loggen naar een specifieke loghost kan wat van de administratieve last van het beheren van logbestanden wegnemen. Het aggregeren, samenvoegen, en roteren van logbestanden kan op één enkele plaats worden ingesteld, door gebruik te maken van de eigen gereedschappen van FreeBSD, zoals <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> en <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a>. In de volgende voorbeeldconfiguratie zal host <code>A</code>, genaamd <code>logserv.example.com</code>, loginformatie voor het plaatselijke netwerk verzamelen. Host <code>B</code>, genaamd <code>logclient.example.com</code>, zal loginformatie aan het serversysteem doorgeven. In echte configuraties hebben beide hosts degelijke voor- en terugwaartse DNS of regels in <span class=filename>/etc/hosts</span> nodig. Anders worden de gegevens geweigerd door de server.</p></div><div class=sect2><h3 id=_configuratie_van_de_logserver>29.11.1. Configuratie van de logserver<a class=anchor href=#_configuratie_van_de_logserver></a></h3><div class=paragraph><p>Logservers zijn machines die zijn geconfigureerd om loginformatie van hosts op afstand te accepteren. In de meeste gevallen is dit om de configuratie te vergemakkelijken, in andere gevallen kan het gewoon een beheersbeslissing zijn. Ongeacht de reden zijn er enkele eisen voordat er verder wordt gegaan.</p></div><div class=paragraph><p>Een juist geconfigureerde logserver voldoet aan de volgende minimale eisen:</p></div><div class=ulist><ul><li><p>De regels van de firewall staan toe dat UDP wordt doorgegeven op poort 514 van zowel de cliënt als de server;</p></li><li><p>syslogd is ingesteld om berichten op afstand van cliëntmachines te accepteren;</p></li><li><p>De syslogd-server en alle cliëntmachines moeten geldige regels hebben voor zowel voorwaartse als terugwaartse DNS, of correct zijn geconfigureerd in <span class=filename>/etc/hosts</span>.</p></li></ul></div><div class=paragraph><p>Om de logserver te configureren, moet de cliënt vermeld zijn in <span class=filename>/etc/syslog.conf</span>, en moet de logfaciliteit zijn gespecificeerd:</p></div><div class="literalblock programlisting"><div class=content><pre>+logclient.example.com
*.*	/var/log/logclient.log</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Meer informatie over de verschillende ondersteunde en beschikbare <em>faciliteiten</em> kan gevonden worden in de handleidingpagina <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Eenmaal toegevoegd worden alle <code>faciliteits</code>-berichten gelogd naar het eerder gespecificeerde bestand, <span class=filename>/var/log/logclient.log</span>.</p></div><div class=paragraph><p>De servermachine moet ook het volgende in <span class=filename>/etc/rc.conf</span> hebben staan:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_enable=&#34;YES&#34;
syslogd_flags=&#34;-a logclient.example.com -v -v&#34;</pre></div></div><div class=paragraph><p>De eerste optie zet de daemon <code>syslogd</code> aan tijdens het opstarten, en de tweede regel staat toe dat gegevens van de cliënt op deze server worden geaccepteerd. Het laatste gedeelte, dat <code>-v -v</code> gebruikt, verhoogt de verbositeit van gelogde berichten. Dit is extreem handig voor het optimaal instellen van faciliteiten aangezien beheerders kunnen zien welk soort berichten onder welke faciliteit worden gelogd.</p></div><div class=paragraph><p>Er kunnen meerdere opties <code>-a</code> worden gespecificeerd om logging vanuit meerdere cliënten toe te staan. IP-adressen en hele netblokken mogen ook worden gespecificeerd, bekijk de hulppagina <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> voor een volledige lijst van mogelijke opties.</p></div><div class=paragraph><p>Als laatste dient het logbestand gecreëerd te worden. De gebruikte manier maakt niet uit, maar <a href="https://man.freebsd.org/cgi/man.cgi?query=touch&amp;sektion=1&amp;format=html">touch(1)</a> werkt prima in dit soort situaties:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/log/logclient.log</span></code></pre></div></div><div class=paragraph><p>Nu dient het <code>syslogd</code>-daemon herstart en geverifieerd worden:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span>
<span class=c># pgrep syslog</span></code></pre></div></div><div class=paragraph><p>Als er een PID wordt teruggegeven, dan is de server succesvol herstart, en kan er begonnen worden met de configuratie van de cliënt. Raadpleeg de log <span class=filename>/var/log/messages</span> voor uitvoer als de server niet is herstart.</p></div></div><div class=sect2><h3 id=_configuratie_van_de_logcliënt>29.11.2. Configuratie van de logcliënt<a class=anchor href=#_configuratie_van_de_logcliënt></a></h3><div class=paragraph><p>Een logcliënt is een machine die loginformatie naar een logserver verstuurt en daarnaast lokale kopieën bewaart.</p></div><div class=paragraph><p>Net als logservers moeten logcliënten ook aan enkele minimumeisen voldoen:</p></div><div class=ulist><ul><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> moet zijn ingesteld om berichten van bepaalde soorten naar een logserver te sturen, die ze moet accepteren;</p></li><li><p>De firewall moet UDP-pakketten doorlaten op poort 514;</p></li><li><p>Zowel voorwaartse als terugwaartse DNS moeten geconfigureerd zijn of juiste regels in <span class=filename>/etc/hosts</span> hebben.</p></li></ul></div><div class=paragraph><p>De configuratie van cliënten is wat soepeler dan die van servers. De cliëntmachine moet de volgende regels in <span class=filename>/etc/rc.conf</span> hebben:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_enable=&#34;YES&#34;
syslogd_flags=&#34;-s -v -v&#34;</pre></div></div><div class=paragraph><p>Net als eerder zullen deze regels de daemon <code>syslogd</code> tijdens het opstarten aanzetten, en de verbositeit van gelogde berichten verhogen. De optie <code>-s</code> voorkomt dat logs van deze cliënt vanuit andere hosts worden geaccepteerd.</p></div><div class=paragraph><p>Faciliteiten beschrijven het systeemgedeelte waarvoor een bericht is gegenereerd. ftp en ipfw bijvoorbeeld zijn beide faciliteiten. Wanneer er logberichten worden gegenereerd voor deze twee diensten, zullen ze normaalgesproken deze twee gereedschappen in elk logbericht opnemen. Faciliteiten worden vergezeld van een prioriteit of niveau, welke wordt gebruikt om aan te geven hoe belangrijk een logbericht is. De meest voorkomende zullen <code>warning</code> en <code>info</code> zijn. Bekijk de handleidingpagina <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> voor een volledige lijst van beschikbare faciliteiten en prioriteiten.</p></div><div class=paragraph><p>De logserver moet in <span class=filename>/etc/syslog.conf</span> van de cliënt zijn gedefinieerd. In dit geval wordt het symbool <code>@</code> gebruikt om loggegevens naar een server op afstand te sturen en zou er ongeveer als de volgende regel uit moeten zien:</p></div><div class="literalblock programlisting"><div class=content><pre>*.*	@logserv.example.com</pre></div></div><div class=paragraph><p>Eenmaal toegevoegd moet <code>syslogd</code> worden herstart zodat de veranderingen effect hebben:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span></code></pre></div></div><div class=paragraph><p>Om te testen of logberichten over het netwerk worden verzonden, wordt <a href="https://man.freebsd.org/cgi/man.cgi?query=logger&amp;sektion=1&amp;format=html">logger(1)</a> op de cliënt gebruikt om een bericht naar <code>syslogd</code> te sturen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># logger &#34;Testbericht van logclient&#34;</span></code></pre></div></div><div class=paragraph><p>Dit bericht dient nu zowel in <span class=filename>/var/log/messages</span> op de cliënt als <span class=filename>/var/log/logclient.log</span> op de logserver te staan.</p></div></div><div class=sect2><h3 id=_logservers_debuggen>29.11.3. Logservers debuggen<a class=anchor href=#_logservers_debuggen></a></h3><div class=paragraph><p>In bepaalde gevallen kan het nodig zijn om te debuggen als berichten niet door de logserver worden ontvangen. Er zijn verschillende redenen waarom dit kan gebeuren; de twee meest voorkomende zijn echter voorvallen met de netwerkverbinding en DNS. Om deze gevallen te testen, dient te worden nagegaan dat beide hosts elkaar kunnen bereiken door de hostnaam in <span class=filename>/etc/rc.conf</span> te gebruiken. Als dit juist lijkt te werken, dient de optie <code>syslogd_flags</code> in <span class=filename>/etc/rc.conf</span> te worden veranderd.</p></div><div class=paragraph><p>In het volgende voorbeeld is <span class=filename>/var/log/logclient.log</span> leeg, en noemt <span class=filename>/var/log/messages</span> geen reden waarom het mislukt. Verander de optie <code>syslogd_flags</code> zoals in het volgende voorbeeld en herstart om de debuguitvoer te verhogen:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_flags=&#34;-d -a logclien.example.com -v -v&#34;</pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span></code></pre></div></div><div class=paragraph><p>Debuggegevens zoals de volgende zullen meteen na de herstart over het scherm vliegen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel
Logging to FILE /var/log/messages
syslogd: kernel boot file is /boot/kernel/kernel
cvthname<span class=o>(</span>192.168.1.10<span class=o>)</span>
validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com<span class=p>;</span>
rejected <span class=k>in </span>rule 0 due to name mismatch.</code></pre></div></div><div class=paragraph><p>Het is duidelijk dat de berichten worden geweigerd wegens een niet-overeenkomende naam. Na de configuratie grondig te hebben herzien, lijkt het of een typefout in de volgende regel in <span class=filename>/etc/rc.conf</span> een probleem heeft:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_flags=&#34;-d -a logclien.example.com -v -v&#34;</pre></div></div><div class=paragraph><p>De regel dient <code>logclient</code>, niet <code>logclien</code> te bevatten. Nadat de juiste wijzigingen zijn gemaakt, wordt er herstart met de verwachte resultaten:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service syslogd restart</span>
logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel
syslogd: kernel boot file is /boot/kernel/kernel
logmsg: pri 166, flags 17, from logserv.example.com,
msg Dec 10 20:55:02 &lt;syslog.err&gt; logserv.example.com syslogd: exiting on signal 2
cvthname<span class=o>(</span>192.168.1.10<span class=o>)</span>
validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com<span class=p>;</span>
accepted <span class=k>in </span>rule 0.
logmsg: pri 15, flags 0, from logclient.example.com, msg Dec 11 02:01:28 trhodes: Test message 2
Logging to FILE /var/log/logclient.log
Logging to FILE /var/log/messages</code></pre></div></div><div class=paragraph><p>Nu worden de berichten juist ontvangen en in het correcte bestand geplaatst.</p></div></div><div class=sect2><h3 id=_beveiligingsoverwegingen>29.11.4. Beveiligingsoverwegingen<a class=anchor href=#_beveiligingsoverwegingen></a></h3><div class=paragraph><p>Zoals bij alle netwerkdiensten, dienen beveiligingseisen in acht te worden genomen voordat deze configuratie wordt geïmplementeerd. Soms kunnen logbestanden gevoelige gegevens bevatten over diensten die aanstaan op de lokale host, gebruikersaccounts, en configuratiegegevens. Netwerkgegevens die van de cliënt naar de server worden verzonden worden niet versleuteld noch met een wachtwoord beveiligd. Als versleuteling nodig is, kan <a class=package href=https://cgit.freebsd.org/ports/tree/security/stunnel/>security/stunnel</a> worden gebruikt, wat gegevens over een versleutelde tunnel verstuurt.</p></div><div class=paragraph><p>Aan lokale beveiliging moet ook gedacht worden. Logbestanden worden niet versleuteld tijdens gebruik of na logrotatie. Lokale gebruikers kunnen deze bestanden benaderen om aanvullende inzichten over de systeemconfiguratie op te doen. In deze gevallen is het van kritiek belang om de juiste rechten op deze bestanden in te stellen. Het gereedschap <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> ondersteunt het instellen van rechten op nieuw aangemaakte en geroteerde logbestanden. Het instellen van logbestanden op modus <code>600</code> dient al het ongewenste spieken door lokale gebruikers te verhinderen.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 9 maart 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/nl/books/handbook/mail class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/nl/books/handbook/firewalls class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#network-servers-synopsis>29.1. Overzicht</a></li><li><a href=#network-inetd>29.2. De inetd"Super-Server"</a></li><li><a href=#network-nfs>29.3. Netwerkbestandssysteem (NFS)</a></li><li><a href=#network-nis>29.4. Netwerkinformatiesysteem (NIS/YP)</a></li><li><a href=#network-dhcp>29.5. Automatisch netwerk instellen (DHCP)</a></li><li><a href=#network-dns>29.6. Domeinnaamsysteem (DNS)</a></li><li><a href=#network-apache>29.7. Apache HTTP server</a></li><li><a href=#network-ftp>29.8. File Transfer Protocol (FTP)</a></li><li><a href=#network-samba>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)</a></li><li><a href=#network-ntp>29.10. Tijd synchroniseren met NTP</a></li><li><a href=#network-syslogd>29.11. Hosts op afstand loggen met <code>syslogd</code></a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/nl/books/handbook/handbook_nl.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/nl/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/nl/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>Dutch</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/nl class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/nl/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>