<!doctype html><html class=theme-light lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/><title>Глава 3. Быстрое портирование | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Глава 3. Быстрое портирование"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ru"><meta property="og:url" content="https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/ru\/books\/porters-handbook\/quick-porting\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>О нас
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>О нас</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Кодекс Этики</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Получить FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Информация о релизах</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Подготовка релизов</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Бюллетени Безопасности</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Документация
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ru>Портал документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook>Руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook>Руководство по созданию портов</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Учебник Проекта Документирования</a></li><li><a href=https://man.FreeBSD.org target=_blank>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Презентации и публикации</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/ru/books>Книги</a></li><li><a href=https://docs.freebsd.org/ru/articles>Статьи</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Сообщество
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Сообщество</a></li><li><a href=https://docs.freebsd.org/ru/articles/contributing>Стать участником</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Форум</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Трекер ошибок</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Поддержка</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ru>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Пожертвования</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Поиск aria-label=Поиск maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-c934186a5adac4f64b993f751abed30c class=toggle>
<label for=chapter-c934186a5adac4f64b993f751abed30c><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-why/>Глава 1. Введение</a></li><li><input type=checkbox id=chapter-2798d78fe854f2709bab5ca473b97050 class=toggle>
<label for=chapter-2798d78fe854f2709bab5ca473b97050><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/new-port/>Глава 2. Как самому сделать новый порт</a></li><li><input type=checkbox id=chapter-c0d52b9121b517084e01f59cefa725e1 class=toggle checked>
<label class="icon cursor" for=chapter-c0d52b9121b517084e01f59cefa725e1><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/>Глава 3. Быстрое портирование</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/#porting-makefile>3.1. Создание файла <span class=filename>Makefile</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/#porting-desc>3.2. Создание информационных файлов</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/#porting-checksum>3.3. Создание файла с контрольной суммой</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/#porting-testing>3.4. Тестирование порта</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/#porting-portlint>3.5. Проверка вашего порта утилитой <code>portlint</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/quick-porting/#porting-submitting>3.6. Посылка нового порта</a></li></ul></li><li><input type=checkbox id=chapter-3694de03923da61ba10a0a25efca6ef0 class=toggle>
<label class="icon cursor" for=chapter-3694de03923da61ba10a0a25efca6ef0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting/>Глава 4. Медленное портирование</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting/#slow-work>4.1. Как всё это работает</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting/#slow-sources>4.2. Получение исходного кода</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting/#slow-modifying>4.3. Модификация порта</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting/#slow-patch>4.4. Создание патчей</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting/#slow-configure>4.5. Конфигурирование</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting/#slow-user-input>4.6. Обработка пользовательского ввода</a></li></ul></li><li><input type=checkbox id=chapter-165f6a6dba6651f8c25fc63ab83d6538 class=toggle>
<label class="icon cursor" for=chapter-165f6a6dba6651f8c25fc63ab83d6538><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/>Глава 5. Настройка файла Makefile</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-source>5.1. Оригинальные исходный код</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-naming>5.2. Именование</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-categories>5.3. Разделение по категориям</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-distfiles>5.4. Дистрибутивные файлы</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-maintainer>5.5. <code>MAINTAINER</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-comment>5.6. <code>COMMENT</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-portscout>5.7. <code>PORTSCOUT</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-depend>5.8. Зависимости</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-masterdir>5.9. <code>MASTERDIR</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-manpages>5.10. Страницы Справочника</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-info>5.11. Файлы в формате info</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-options>5.12. Опции для Makefile</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#makefile-wrkdir>5.13. Задание рабочего каталога</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#conflicts>5.14. Разрешение конфликтов</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/makefiles/#install>5.15. Установка файлов</a></li></ul></li><li><input type=checkbox id=chapter-19e3150e00beb84341d8ac1a73936ef0 class=toggle>
<label class="icon cursor" for=chapter-19e3150e00beb84341d8ac1a73936ef0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/>Глава 6. Особые соглашения</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#staging>6.1. Staging</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#porting-shlibs>6.2. Динамические библиотеки</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#porting-restrictions>6.3. Порты с ограничениями на распространение или с правовым обременением</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#building>6.4. Механизмы построения</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-autotools>6.5. Использование GNU Autotools</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-gettext>6.6. Использование GNU <code>gettext</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-perl>6.7. Использование Perl</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-x11>6.8. Использование X11</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-gnome>6.9. Использование GNOME</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-qt>6.10. Использование Qt</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-kde>6.11. Использование KDE</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-java>6.12. Использование Java</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-php>6.13. Веб-приложения, Apache и PHP</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-python>6.14. Использование Python</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-tcl>6.15. Использование Tcl/Tk</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-emacs>6.16. Использование Emacs</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-ruby>6.17. Использование Ruby</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-sdl>6.18. Использование SDL</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-wx>6.19. Использование wxWidgets</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-lua>6.20. Использование Lua</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-iconv>6.21. Использование <code>iconv</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-xfce>6.22. Использование Xfce</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-mozilla>6.23. Использование Mozilla</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#using-databases>6.24. Использование баз данных</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#rc-scripts>6.25. Запуск и остановка служб (сценарии <code>rc</code>)</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#users-and-groups>6.26. Добавление пользователей и групп</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/special/#requiring-kernel-sources>6.27. Порты, требующие наличия исходных текстов ядра</a></li></ul></li><li><input type=checkbox id=chapter-154554011c772e1e6cc0108eef5e0b2b class=toggle>
<label class="icon cursor" for=chapter-154554011c772e1e6cc0108eef5e0b2b><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/plist/>Глава 7. Продвинутые практики pkg-plist</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/plist/#plist-sub>7.1. Изменение содержимого <span class=filename>pkg-plist</span> в зависимости от make-переменных</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/plist/#plist-cleaning>7.2. Пустые каталоги</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/plist/#plist-config>7.3. Конфигурационные файлы</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/plist/#plist-dynamic>7.4. Динамический или статический список упаковки</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/plist/#plist-autoplist>7.5. Автоматическое создание списка упаковки</a></li></ul></li><li><input type=checkbox id=chapter-5955b0791ccd51005b5bc5bebeec91e5 class=toggle>
<label class="icon cursor" for=chapter-5955b0791ccd51005b5bc5bebeec91e5><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/pkg-files/>Глава 8. Файлы pkg-*</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/pkg-files/#porting-message>8.1. <span class=filename>pkg-message</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/pkg-files/#pkg-install>8.2. <span class=filename>pkg-install</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/pkg-files/#pkg-deinstall>8.3. <span class=filename>pkg-deinstall</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/pkg-files/#pkg-names>8.4. Изменение имён файлов <span class=filename>pkg-*</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/pkg-files/#using-sub-files>8.5. Использование <code>SUB_FILES</code> и <code>SUB_LIST</code></a></li></ul></li><li><input type=checkbox id=chapter-ee86a11caedb6395ed82b94ec7a9c6cd class=toggle>
<label class="icon cursor" for=chapter-ee86a11caedb6395ed82b94ec7a9c6cd><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/testing/>Глава 9. Тестирование вашего порта</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/testing/#make-describe>9.1. Запуск <code>make describe</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/testing/#testing-portlint>9.2. Portlint</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/testing/#testing-porttools>9.3. Port Tools</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/testing/#porting-prefix>9.4. <code>PREFIX</code> и <code>DESTDIR</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/testing/#testing-tinderbox>9.5. Tinderbox</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/testing/#testing-poudriere>9.6. Poudriere</a></li></ul></li><li><input type=checkbox id=chapter-4ccaefe2590c044ca2b79c46e79fe17f class=toggle>
<label class="icon cursor" for=chapter-4ccaefe2590c044ca2b79c46e79fe17f><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/upgrading/>Глава 10. Обновление отдельного порта</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/upgrading/#svn-diff>10.1. Использование Subversion для создания патчей</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/upgrading/#moved-and-updating-files>10.2. Файлы <span class=filename>UPDATING</span> и <span class=filename>MOVED</span></a></li></ul></li><li><input type=checkbox id=chapter-1023911bc0041506653280b832dea3b2 class=toggle>
<label class="icon cursor" for=chapter-1023911bc0041506653280b832dea3b2><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/security/>Глава 11. Безопасность портов</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/security/#security-intro>11.1. Почему безопасность так важна</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/security/#security-fix>11.2. Исправление уязвимостей безопасности</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/security/#security-notify>11.3. Обеспечение сообщества информацией</a></li></ul></li><li><input type=checkbox id=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7 class=toggle>
<label class="icon cursor" for=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/>Глава 12. Что делать нужно, и что делать нельзя</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-intro>12.1. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#porting-wrkdir>12.2. <code>WRKDIR</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#porting-wrkdirprefix>12.3. <code>WRKDIRPREFIX</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#porting-versions>12.4. Различение операционных систем и версий ОС</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-after-port-mk>12.5. Написание чего-либо после <span class=filename>bsd.port.mk</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-sh-exec>12.6. Использование выражения <code>exec</code> в сценариях обёртках</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-rational>12.7. Поступайте разумно</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-cc>12.8. Работа как с <code>CC</code>, так и <code>CXX</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-cflags>12.9. Использование <code>CFLAGS</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-pthread>12.10. Библиотеки потоков</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-feedback>12.11. Пожелания</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-readme>12.12. <span class=filename>README.html</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-noinstall>12.13. Пометка неустанавливаемого порта как <code>BROKEN</code>, <code>FORBIDDEN</code> или <code>IGNORE</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-deprecated>12.14. Пометка порта на удаление с <code>DEPRECATED</code> или <code>EXPIRATION_DATE</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-dot-error>12.15. Избегайте использования конструкции <code>.error</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-sysctl>12.16. Использование <span class=filename>sysctl</span></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-rerolling-distfiles>12.17. Меняющиеся дистрибутивные файлы</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-avoiding-linuxisms>12.18. Избегание линуксизмов</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-dads/#dads-misc>12.19. Разное</a></li></ul></li><li><input type=checkbox id=chapter-5ef4c4c471a3f55c74fb71881f9d8713 class=toggle>
<label for=chapter-5ef4c4c471a3f55c74fb71881f9d8713><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/porting-samplem/>Глава 13. Примерный Makefile</a></li><li><input type=checkbox id=chapter-70f5a4755700a24529175d26e65871bf class=toggle>
<label class="icon cursor" for=chapter-70f5a4755700a24529175d26e65871bf><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/keeping-up/>Глава 14. Актуализация</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/keeping-up/#freshports>14.1. FreshPorts</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/keeping-up/#svnweb>14.2. Web-интерфейс к хранилищу исходных текстов</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/keeping-up/#ports-mailing-list>14.3. Список рассылки FreeBSD, посвящённый портам</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/keeping-up/#build-cluster>14.4. Кластер построения портов FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/keeping-up/#distfile-survey>14.5. Portscout: сканер дистрибутивных файлов портов FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/keeping-up/#portsmon>14.6. Система мониторинга портов FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-8225273087f0e195be28132f4b5a0562 class=toggle>
<label class="icon cursor" for=chapter-8225273087f0e195be28132f4b5a0562><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/>Глава 15. Значения USES</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-intro>15.1. An Introduction to <code>USES</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-7z>15.2. <code>7z</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-ada>15.3. <code>ada</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-autoreconf>15.4. <code>autoreconf</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-blaslapack>15.5. <code>blaslapack</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-bdb>15.6. <code>bdb</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-bison>15.7. <code>bison</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-cabal>15.8. <code>cabal</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-cargo>15.9. <code>cargo</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-charsetfix>15.10. <code>charsetfix</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-cmake>15.11. <code>cmake</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-compiler>15.12. <code>compiler</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-cpe>15.13. <code>cpe</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-cran>15.14. <code>cran</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-desktop-file-utils>15.15. <code>desktop-file-utils</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-desthack>15.16. <code>desthack</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-display>15.17. <code>display</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-dos2unix>15.18. <code>dos2unix</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-drupal>15.19. <code>drupal</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-eigen>15.20. <code>eigen</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-fakeroot>15.21. <code>fakeroot</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-fam>15.22. <code>fam</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-firebird>15.23. <code>firebird</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-fonts>15.24. <code>fonts</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-fortran>15.25. <code>fortran</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-fuse>15.26. <code>fuse</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gem>15.27. <code>gem</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gettext>15.28. <code>gettext</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gettext-runtime>15.29. <code>gettext-runtime</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gettext-tools>15.30. <code>gettext-tools</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-ghostscript>15.31. <code>ghostscript</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gl>15.32. <code>gl</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gmake>15.33. <code>gmake</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gnome>15.34. <code>gnome</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-go>15.35. <code>go</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gperf>15.36. <code>gperf</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-grantlee>15.37. <code>grantlee</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-groff>15.38. <code>groff</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-gssapi>15.39. <code>gssapi</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-horde>15.40. <code>horde</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-iconv>15.41. <code>iconv</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-imake>15.42. <code>imake</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-kde>15.43. <code>kde</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-kmod>15.44. <code>kmod</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-lha>15.45. <code>lha</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-libarchive>15.46. <code>libarchive</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-libedit>15.47. <code>libedit</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-libtool>15.48. <code>libtool</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-linux>15.49. <code>linux</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-localbase>15.50. <code>localbase</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-lua>15.51. <code>lua</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-lxqt>15.52. <code>lxqt</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-makeinfo>15.53. <code>makeinfo</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-makeself>15.54. <code>makeself</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-mate>15.55. <code>mate</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-meson>15.56. <code>meson</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-metaport>15.57. <code>metaport</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-mysql>15.58. <code>mysql</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-mono>15.59. <code>mono</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-motif>15.60. <code>motif</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-ncurses>15.61. <code>ncurses</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-ninja>15.62. <code>ninja</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-objc>15.63. <code>objc</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-openal>15.64. <code>openal</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-pathfix>15.65. <code>pathfix</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-pear>15.66. <code>pear</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-perl5>15.67. <code>perl5</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-pgsql>15.68. <code>pgsql</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-php>15.69. <code>php</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-pkgconfig>15.70. <code>pkgconfig</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-pure>15.71. <code>pure</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-pyqt>15.72. <code>pyqt</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-python>15.73. <code>python</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-qmail>15.74. <code>qmail</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-qmake>15.75. <code>qmake</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-qt>15.76. <code>qt</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-qt-dist>15.77. <code>qt-dist</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-readline>15.78. <code>readline</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-samba>15.79. <code>samba</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-scons>15.80. <code>scons</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-shared-mime-info>15.81. <code>shared-mime-info</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-shebangfix>15.82. <code>shebangfix</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-sqlite>15.83. <code>sqlite</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-ssl>15.84. <code>ssl</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-tar>15.85. <code>tar</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-tcl>15.86. <code>tcl</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-terminfo>15.87. <code>terminfo</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-tk>15.88. <code>tk</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-uidfix>15.89. <code>uidfix</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-uniquefiles>15.90. <code>uniquefiles</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-varnish>15.91. <code>varnish</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-webplugin>15.92. <code>webplugin</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-xfce>15.93. <code>xfce</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-xorg>15.94. <code>xorg</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-xorg-cat>15.95. <code>xorg-cat</code></a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/uses/#uses-zip>15.96. <code>zip</code></a></li></ul></li><li><input type=checkbox id=chapter-7713ccc63287693c9be6c832b2c1e850 class=toggle>
<label class="icon cursor" for=chapter-7713ccc63287693c9be6c832b2c1e850><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/>Глава 16. Значения __FreeBSD_version</a><ul><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-13>16.1. FreeBSD 13 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-12>16.2. FreeBSD 12 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-11>16.3. FreeBSD 11 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-10>16.4. FreeBSD 10 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-9>16.5. FreeBSD 9 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-8>16.6. FreeBSD 8 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-7>16.7. FreeBSD 7 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-6>16.8. FreeBSD 6 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-5>16.9. FreeBSD 5 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-4>16.10. FreeBSD 4 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-3>16.11. FreeBSD 3 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-2.2>16.12. FreeBSD 2.2 Versions</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook/versions/#versions-2>16.13. FreeBSD 2 Before 2.2-RELEASE Versions</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Меню книг"></i>
Меню книг</span></label></div><h1 class=title>Глава 3. Быстрое портирование</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Этот перевод может быть устаревшим. Для того, чтобы помочь с переводом, пожалуйста, обратитесь к <a href=https://translate-dev.freebsd.org/ target=_blank>Сервер переводов FreeBSD</a>.</p></div><div class=toc-mobile><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#porting-makefile>3.1. Создание файла <span class=filename>Makefile</span></a></li><li><a href=#porting-desc>3.2. Создание информационных файлов</a></li><li><a href=#porting-checksum>3.3. Создание файла с контрольной суммой</a></li><li><a href=#porting-testing>3.4. Тестирование порта</a></li><li><a href=#porting-portlint>3.5. Проверка вашего порта утилитой <code>portlint</code></a></li><li><a href=#porting-submitting>3.6. Посылка нового порта</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody><div class=paragraph><p>В этом разделе описано, как создать новый порт на скорую руку. Во многих случаях этого бывает не достаточно, так что вам нужно будет прочитать документ дальше.</p></div><div class=paragraph><p>Во-первых, скачайте оригинальный tar-файл и поместите его в каталог <code>DISTDIR</code>, который по умолчанию есть не что иное, как <span class=filename>/usr/ports/distfiles</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Здесь предполагается, что программное обеспечение компилируется без проблем как есть, то есть для работы приложения на вашей системе FreeBSD не потребовалось абсолютно никаких изменений. Если требовалось что-то изменить, то вам придется обратиться также и к следующему разделу.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Перед началом портирования рекомендуется установить переменную <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> <code>DEVELOPER</code> в <span class=filename>/etc/make.conf</span>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo DEVELOPER=yes &gt;&gt; /etc/make.conf</span></code></pre></div></div><div class=paragraph><p>Эта настройка включает "режим разработчика", в котором отображаются предупреждения при использовании устаревших конструкций и задействуются некоторые дополнительные проверки при вызове команды <code>make</code>.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=porting-makefile>3.1. Создание файла <span class=filename>Makefile</span><a class=anchor href=#porting-makefile></a></h2><div class=sectionbody><div class=paragraph><p>Минимальный <span class=filename>Makefile</span> будет выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$

PORTNAME=	oneko
PORTVERSION=	1.1b
CATEGORIES=	games
MASTER_SITES=	ftp://ftp.cs.columbia.edu/archives/X11R5/contrib/

MAINTAINER=	youremail@example.com
COMMENT=	Cat chasing a mouse all over the screen

.include &lt;bsd.port.mk&gt;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>В некоторых случаях в заголовке <span class=filename>Makefile</span> существующего порта могут содержаться дополнительные строки, такие как название порта и дата его создания. Эта дополнительная информация была объявлена устаревшей и находится в процессе удаления.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Посмотрим, сможете ли вы его понять. Не обращайте внимание на содержимое строчки <code>$FreeBSD$</code>, она будет заполнена автоматически системой Subversion, когда порт будет импортирован в наше дерево портов. Вы можете найти более подробный пример в разделе <a href=#porting-samplem>пример Makefile</a>.</p></div></div></div><div class=sect1><h2 id=porting-desc>3.2. Создание информационных файлов<a class=anchor href=#porting-desc></a></h2><div class=sectionbody><div class=paragraph><p>Имеется два информационных файла, которые требуются для любого порта, вне зависимости от того, является ли он пакетом или нет. Это <span class=filename>pkg-descr</span> и <span class=filename>pkg-plist</span>. Префикс <span class=filename>pkg-</span> отличает их от других файлов.</p></div><div class=sect2><h3 id=_pkg_descr>3.2.1. <span class=filename>pkg-descr</span><a class=anchor href=#_pkg_descr></a></h3><div class=paragraph><p>Это более подробное краткое описание порта. От одного до нескольких абзацев, кратко описывающих, что представляет собой порт, будет достаточно.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Это <em>не</em> руководство и не подробнейшее описание того, как использовать или компилировать порт! <em>Пожалуйста, будьте внимательны при копировании текста из <span class=filename>README</span> или страниц справочника</em>; слишком часто они не являются кратким описанием порта или имеют неудобный формат (например, страницы справочника выровнены пробелами, что особенно плохо смотрится с моноширинными шрифтами).</p></div></td></tr></tbody></table></div><div class=paragraph><p>Хорошо составленный <span class=filename>pkg-descr</span> описывает порт достаточно полно, чтобы пользователю не приходилось сверяться с документацией или посещать вебсайт для понимания того, что делает данное программное обеспечение, чем оно может быть полезно или какие хорошие функции у него имеются. Упоминание про определённые требования, такие как используемый графический инструментарий, тяжёлые зависимости, окружение для запуска или используемый язык программирования помогут пользователям определиться, будет ли этот порт для них работать.</p></div><div class=paragraph><p>Включите сюда URL официальной домашней страницы Интернет. Перед <em>одним</em> из сайтов (выберите основной) добавьте <code>WWW:</code> (с последующим единичным пробелом) для того, чтобы вспомогательные утилиты работали правильно. Если URI является корнем сайта или каталогом, то значение должно быть дополнено косой чертой.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Если указанная для порта веб-страница не доступна, попытайтесь сперва поискать, был ли официальный сайт перемещён, переименован или размещён в другом месте.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Следующий пример показывает, как должен выглядеть ваш <span class=filename>pkg-descr</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>This is a port of oneko, in which a cat chases a poor mouse all over
the screen.
 :
(etc.)

WWW: http://www.oneko.org/</pre></div></div></div><div class=sect2><h3 id=_pkg_plist>3.2.2. <span class=filename>pkg-plist</span><a class=anchor href=#_pkg_plist></a></h3><div class=paragraph><p>Здесь перечисляются все файлы, устанавливаемые портом. Его также называют "списком для упаковки", потому что пакет генерируется упаковкой файлов, которые здесь указаны. Имена путей указываются относительно установочного префикса (обычно <span class=filename>/usr/local</span>). Если порт во время установки создает каталоги, убедитесь, что добавлены строки <code>@dirrm</code> для удаления каталогов при удалении пакета.</p></div><div class=paragraph><p>Вот маленький пример:</p></div><div class="literalblock programlisting"><div class=content><pre>bin/oneko
man/man1/oneko.1.gz
lib/X11/app-defaults/Oneko
lib/X11/oneko/cat1.xpm
lib/X11/oneko/cat2.xpm
lib/X11/oneko/mouse.xpm
@dirrm lib/X11/oneko</pre></div></div><div class=paragraph><p>Обратитесь к странице справочной системы по команде <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-create&amp;sektion=8&amp;format=html">pkg-create(8)</a> с подробным описанием формата списка упаковки.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Рекомендуется, чтобы имена файлов в этом списке были отсортированы в алфавитном порядке. Это позволит значительно облегчить сверку изменений при обновлении порта.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Создание списка упаковки вручную может оказаться весьма трудоёмкой задачей. Если порт устанавливает большое количество файлов, раздел об <a href=#plist-autoplist>автоматическом построении списка упаковки</a> может помочь сэкономить время.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Существует только одно исключение, когда у порта может отсутствовать <span class=filename>pkg-plist</span>. Если порт устанавливает лишь несколько файлов, а возможно, и каталогов, то они могут быть перечислены в переменных <code>PLIST_FILES</code> и <code>PLIST_DIRS</code>, соответственно, внутри файла <span class=filename>Makefile</span> порта. К примеру, мы можем обойтись без файла <span class=filename>pkg-plist</span> у приведённого выше порта <span class=filename>oneko</span>, добавив следующие строки в <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>PLIST_FILES=	bin/oneko \
		man/man1/oneko.1.gz \
		lib/X11/app-defaults/Oneko \
		lib/X11/oneko/cat1.xpm \
		lib/X11/oneko/cat2.xpm \
		lib/X11/oneko/mouse.xpm
PLIST_DIRS=	lib/X11/oneko</pre></div></div><div class=paragraph><p>Конечно, переменная <code>PLIST_DIRS</code> не должна задаваться, если порт не устанавливает никаких каталогов.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Несколько портов могут совместно использовать общий каталог. В этом случае <code>PLIST_DIRS</code> следует заменить на <code>PLIST_DIRSTRY</code>, так чтобы каталог удалялся только если он пуст, а иначе игнорировался. Использование <code>PLIST_DIRS</code> и <code>PLIST_DIRSTRY</code> аналогично <code>@dirrm</code> и <code>@dirrmtry</code> в <span class=filename>pkg-plist</span>, описание которых входит в <a href=../plist/#plist-dir-cleaning>Очистка пустых каталогов</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Обратной стороной такого способа перечисления файлов и каталогов порта является невозможность использования последовательностей команд, описанных в <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-create&amp;sektion=8&amp;format=html">pkg-create(8)</a>. Поэтому он подходит для простых портов, что делает их ещё более простыми. Одновременно с этим положительным моментом является уменьшение количества файлов в коллекции портов. Пожалуйста, подумайте над использованием этой техники, прежде чем создавать <span class=filename>pkg-plist</span>.</p></div><div class=paragraph><p>Далее мы увидим, как можно использовать файлы <span class=filename>pkg-plist</span> и <code>PLIST_FILES</code> выполнения <a href=../plist/#plist>более сложных задач</a>.</p></div></div></div></div><div class=sect1><h2 id=porting-checksum>3.3. Создание файла с контрольной суммой<a class=anchor href=#porting-checksum></a></h2><div class=sectionbody><div class=paragraph><p>Просто введите команду <code>make makesum</code>. Правила утилиты make автоматически сгенерируют файл <span class=filename>distinfo</span>.</p></div><div class=paragraph><p>Если у извлекаемого файла регулярно меняется контрольная сумма и вы не сомневаетесь в надежности источника (т.е. он получен из CD производителя, либо ежедневно обновляется документация), то вы должны указать эти файлы в переменной <code>IGNOREFILES</code>. Тогда контрольная сумма при выполнении <code>make makesum</code> для этого файла создаваться не будет, а вместо этого для него будет установлено значение <code>IGNORE</code>.</p></div></div></div><div class=sect1><h2 id=porting-testing>3.4. Тестирование порта<a class=anchor href=#porting-testing></a></h2><div class=sectionbody><div class=paragraph><p>Вы должны удостовериться, что правила построения порта выполняют именно то, что вы хотите, включая создание пакета для порта. Вот те важные вещи, которые вы должны проверить.</p></div><div class=ulist><ul><li><p><span class=filename>pkg-plist</span> не содержит ничего сверх того, что устанавливается портом</p></li><li><p><span class=filename>pkg-plist</span> содержит абсолютно все, что устанавливается портом</p></li><li><p>Порт может быть установлен с помощью указания цели <code>install</code>. Это позволяет убедиться в правильной работе сценария установки.</p></li><li><p>Порт может быть правильным образом удалён с помощью указания цели <code>deinstall</code>. Это позволяет убедиться в правильной работе сценария удаления.</p></li><li><p>Следует убедиться, что <code>make package</code> можно запустить из-под обычного пользователя (то есть, не из-под <code>root</code>). Если это не так, в <span class=filename>Makefile</span> порта должно быть добавлено <code>NEED_ROOT=yes</code>.</p></li></ul></div><div class="exampleblock procedure"><div class=content><div class=paragraph><p><strong>Procedure: Рекомендуемый порядок проверки</strong></p></div><div class="olist arabic"><ol class=arabic><li><p><code>make stage</code></p></li><li><p><code>make check-orphans</code></p></li><li><p><code>make package</code></p></li><li><p><code>make install</code></p></li><li><p><code>make deinstall</code></p></li><li><p><code>pkg add package-filename</code></p></li><li><p><code>make package</code> (из-под пользователя)</p></li></ol></div></div></div><div class=paragraph><p>Убедитесь, что на любом из этапов не выдается никаких предупреждений.</p></div><div class=paragraph><p>Основательное автоматизированное тестирование может быть выполнено при помощи <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/tinderbox/>ports-mgmt/tinderbox</a> или <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/>ports-mgmt/poudriere</a> из Коллекции Портов. Эти приложения используют <code>jails</code>, в которых проверяются все перечисленные выше этапы без изменения состояния основной системы.</p></div></div></div><div class=sect1><h2 id=porting-portlint>3.5. Проверка вашего порта утилитой <code>portlint</code><a class=anchor href=#porting-portlint></a></h2><div class=sectionbody><div class=paragraph><p>Будьте добры, пользуйтесь утилитой <code>portlint</code> для проверки того, что ваш порт соответствует нашим рекомендациям. Программа <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portlint/>ports-mgmt/portlint</a> является частью Коллекции Портов. В частности, вы можете захотеть проверить, правильно ли сформирован файл <a href=#porting-samplem>Makefile</a> и соответствующим ли образом именован <a href=#porting-pkgname>пакет</a>.</p></div></div></div><div class=sect1><h2 id=porting-submitting>3.6. Посылка нового порта<a class=anchor href=#porting-submitting></a></h2><div class=sectionbody><div class=paragraph><p>Перед посылкой нового порта прочитайте раздел о том, что <a href=../porting-dads/#porting-dads>можно и нельзя</a> делать.</p></div><div class=paragraph><p>Когда вы наконец довольны своим первым портом, единственное, что осталось сделать, это включить его в основное дерево портов FreeBSD и осчастливить этим всех остальных. Нам не нужен ни каталог <span class=filename>work</span>, ни пакет <span class=filename>pkgname.tgz</span>, так что удалите их прямо сейчас.</p></div><div class=paragraph><p>Затем получите файл <a href="https://man.freebsd.org/cgi/man.cgi?query=shar&amp;sektion=1&amp;format=html">shar(1)</a>. Предполагая, что порт называется oneko, перейдите в каталог выше, где находится каталог <code>oneko</code>, и наберите: <code>shar find oneko > oneko.shar</code></p></div><div class=paragraph><p>Включите <span class=filename>oneko.shar</span> в сообщение об ошибке и пошлите его с помощью <a href="https://man.freebsd.org/cgi/man.cgi?query=send-pr&amp;sektion=1&amp;format=html">send-pr(1)</a>. Обратитесь к разделу <a href=https://docs.freebsd.org/ru/articles/contributing/#CONTRIB-GENERAL>Сообщения об ошибках и общие замечания</a> для получения подробной информации о <a href="https://man.freebsd.org/cgi/man.cgi?query=send-pr&amp;sektion=1&amp;format=html">send-pr(1)</a>).</p></div><div class=paragraph><p>Укажите в сообщении категорию <code>ports</code> и класс <code>change-request</code>. <em>Не</em> указывайте, что сообщение имеет статус <code>confidential</code>! Добавьте краткое описание программы в поле "Description" отправляемого PR (например, содержимое <code>COMMENT</code> в сокращённом варианте) и сам файл в виде архива <span class=filename>.shar</span> в поле "Fix".</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Хорошее описание в заголовке сообщения о проблеме значительно облегчает работу коммиттеров портов. Для новых портов мы предпочитаем нечто вроде "New port: &lt;категория>/&lt;название порта> &lt;краткое описание порта>". Следование этой схеме упрощает и ускоряет начало работы по добавлению нового порта.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Повторим ещё раз, что <em>не нужно включать ни оригинальный файл с дистрибутивом, ни каталог <span class=filename>work</span>, ни пакет, построенный вами командой <code>make package</code></em>; для новых портов используйте <a href="https://man.freebsd.org/cgi/man.cgi?query=shar&amp;sektion=1&amp;format=html">shar(1)</a>, но не <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a>.</p></div><div class=paragraph><p>После отправки порта, пожалуйста, потерпите. Время, необходимое для включения нового порта во FreeBSD, может занимать от нескольких дней до нескольких месяцев. <a href="http://www.FreeBSD.org/cgi/query-pr-summary.cgi?category=ports">Здесь</a> можно увидеть список ожидающих PR для портов.</p></div><div class=paragraph><p>После рассмотрения нового порта мы при необходимости вам ответим, а затем включим порт в наше дерево. Ваше имя также будет добавлено в список <a href=https://docs.freebsd.org/en/articles/contributors/#contrib-additional>Дополнительных контрибуторов проекта FreeBSD</a> и другие файлы.</p></div></div></div></div><hr><div class=last-modified><p><strong>Изменено</strong>: 9 марта 2024 г. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Назад></i><div class=container><a href=https://docs.freebsd.org/ru/books/porters-handbook/new-port class=direction>Назад</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Главная></i><div class=container><a href=../ class=direction>Главная</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/ru/books/porters-handbook/slow-porting class=direction>Далее</a></div><i class="fa fa-angle-right" aria-hidden=true title=Далее></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#porting-makefile>3.1. Создание файла <span class=filename>Makefile</span></a></li><li><a href=#porting-desc>3.2. Создание информационных файлов</a></li><li><a href=#porting-checksum>3.3. Создание файла с контрольной суммой</a></li><li><a href=#porting-testing>3.4. Тестирование порта</a></li><li><a href=#porting-portlint>3.5. Проверка вашего порта утилитой <code>portlint</code></a></li><li><a href=#porting-submitting>3.6. Посылка нового порта</a></li></ul></nav><hr><div class=resources><h3>Материалы</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Скачать PDF"></i><a href=https://download.freebsd.org/doc/ru/books/porters-handbook/porters-handbook_ru.pdf>Скачать PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Редактировать эту страницу"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ru/_index target=_blank>Редактировать эту страницу</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/ru/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Выберите язык">
<span>Русский</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Система</option><option value=theme-light>Светлый</option><option value=theme-dark>Тёмный</option><option value=theme-high-contrast>Высокая контрастность</option></select></div></div></section><section class=about-column><h3 class=column-title>О нас</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Кодекс Этики</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Бюллетени Безопасности</a></li></ul></section><section class=documentation-column><h3 class=column-title>Документация</h3><ul class=column-elements-container><li><a href=/ru class=column-element>Портал документации</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Презентации и публикации</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Предыдущие версии</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>Документы 4.4BSD</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Сообщество</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/ru/articles/contributing class=column-element>Принять участие</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Форум Сообщества</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Трекер ошибок</a></li></ul></section><section class=legal-column><h3 class=column-title>Юридическая информация</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Пожертвования</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Лицензирование</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Политика Конфиденциальности</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Юридические оговорки</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 Проект FreeBSD. Все права защищены</p><span>Сделано с помощью <span class=heart>♥</span> Сообществом FreeBSD</span></section></div></footer></body></html>