<!doctype html><html class=theme-light lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/ru/books/handbook/serialcomms/><title>Глава 22. Последовательные соединения | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Глава 22. Последовательные соединения"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ru"><meta property="og:url" content="https://docs.freebsd.org/ru/books/handbook/serialcomms/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/ru\/books\/handbook\/serialcomms\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>О нас
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>О нас</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Кодекс Этики</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Получить FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Информация о релизах</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Подготовка релизов</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Бюллетени Безопасности</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Документация
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ru>Портал документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook>Руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook>Руководство по созданию портов</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Учебник Проекта Документирования</a></li><li><a href=https://man.FreeBSD.org target=_blank>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Презентации и публикации</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/ru/books>Книги</a></li><li><a href=https://docs.freebsd.org/ru/articles>Статьи</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Сообщество
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Сообщество</a></li><li><a href=https://docs.freebsd.org/ru/articles/contributing>Стать участником</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Форум</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Трекер ошибок</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Поддержка</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ru>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Пожертвования</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Поиск aria-label=Поиск maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/preface/>Предисловие</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-audience>Целевая аудитория</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from4>Четвёртое издание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from3>Третье издание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from2>Второе издание (2004)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes>Первое издание (2001)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-overview>Структура этой книги</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-conv>Договоренности, используемые в этой книге</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-acknowledgements>Благодарности</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/parti/>Часть I. В начале</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/introduction/>Глава 1. Введение</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#introduction-synopsis>1.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#nutshell>1.2. Добро пожаловать во FreeBSD!</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#history>1.3. О Проекте FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/install/>Глава 2. Установка FreeBSD версий 8.X и более ранних</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-synopsis>2.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-hardware>2.2. Аппаратные требования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-pre>2.3. Перед установкой</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-start>2.4. Начало установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#using-sysinstall>2.5. Введение в Sysinstall</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-steps>2.6. Выделение дискового пространства</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-choosing>2.7. Выбор устанавливаемых компонентов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-media>2.8. Выбор источника для установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-final-warning>2.9. Подтверждение установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-post>2.10. После установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-trouble>2.11. Решение проблем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-advanced>2.12. Расширенное руководство по установке</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-diff-media>2.13. Подготовка собственного источника установки</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/>Глава 3. Установка FreeBSD версий 9.X и более поздних</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-synopsis>3.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-hardware>3.2. Аппаратные требования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-pre>3.3. Перед установкой</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-start>3.4. Начало установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#using-bsdinstall>3.5. Введение в bsdinstall</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-netinstall>3.6. Установка по сети</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-partitioning>3.7. Выделение дискового пространства</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-final-warning>3.8. Завершение установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-post>3.9. После установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-install-trouble>3.10. Решение проблем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#using-live-cd>3.11. Использование Live CD</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/basics/>Глава 4. Основы UNIX</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-synopsis>4.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#consoles>4.2. Виртуальные консоли и терминалы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#users-synopsis>4.3. Пользователи и основы управления учетными записями</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#permissions>4.4. Права доступа</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#dirstructure>4.5. Структура каталогов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#disk-organization>4.6. Организация дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#mount-unmount>4.7. Монтирование и размонтирование файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-processes>4.8. Процессы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-daemons>4.9. Даемоны, сигналы, уничтожение процессов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#shells>4.10. Интерпретатор команд</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#editors>4.11. Текстовые редакторы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-devices>4.12. Устройства и файлы устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#binary-formats>4.13. Бинарные форматы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-more-information>4.14. Дополнительная информация</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/ports/>Глава 5. Установка приложений: порты и пакеты</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-synopsis>5.1. Обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-overview>5.2. Обзор установки программного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-finding-applications>5.3. Поиск программного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#packages-using>5.4. Использование бинарных пакетов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#pkgng-intro>5.5. Использование pkgng для управления бинарными пакетами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-using>5.6. Использование Коллекции Портов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-nextsteps>5.7. Действия после установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-broken>5.8. Обработка нерабочих портов</a></li></ul></li><li><input type=checkbox id=chapter-f56428b9e0d0b77cc8e863910f96bbde class=toggle>
<label class="icon cursor" for=chapter-f56428b9e0d0b77cc8e863910f96bbde><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/wayland/>Глава 6. Wayland</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-synopsis>6.1. Общие сведения о Wayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-wayfire>6.2. Композитный менеджер Wayfire</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-hikari>6.3. Композитный менеджер Hikari</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-sway>6.4. Композитный менеджер Sway</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-xwayland>6.5. Использование Xwayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-remotedesktop>6.6. Организация Удалённого Рабочего Стола при помощи VNC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-ly>6.7. Менеджер регистраций Wayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-utilities>6.8. Полезные Инструменты</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/x11/>Глава 6. X Window System</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x11-synopsis>6.1. Обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-understanding>6.2. Основы X</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-install>6.3. Установка X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-config>6.4. Конфигурация X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-fonts>6.5. Использование шрифтов в X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-xdm>6.6. Менеджеры экранов (Display Managers) X</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x11-wm>6.7. Графические оболочки</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partii/>Часть II. Общие задачи</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/desktop/>Глава 7. Приложения для настольного компьютера</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-synopsis>7.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-browsers>7.2. Браузеры</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-productivity>7.3. Бизнес приложения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-viewers>7.4. Программы просмотра документов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-finance>7.5. Финансовые программы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-summary>7.6. Итоги</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/>Глава 8. Мультимедиа</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#multimedia-synopsis>8.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#sound-setup>8.2. Настройка звуковой карты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#sound-mp3>8.3. Звук MP3</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#video-playback>8.4. Воспроизведение видео</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#tvcard>8.5. Настройка ТВ тюнеров</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#scanners>8.6. Сканеры</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/>Глава 9. Настройка ядра FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Зачем собирать собственное ядро?</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-devices>9.3. Определение аппаратного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Драйвера, подсистемы и модули ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-building>9.5. Сборка и установка собственного ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-config>9.6. Конфигурационный файл</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Решение проблем</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/printing/>Глава 10. Печать</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-synopsis>10.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-intro-spooler>10.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-intro-setup>10.3. Основная настройка</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-advanced>10.4. Расширенная настройка принтера</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-using>10.5. Использование принтеров</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-lpd-alternatives>10.6. Альтернативы стандартному спулеру</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-troubleshooting>10.7. Выявление проблем</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/>Глава 11. Двоичная совместимость с Linux</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Установка</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Установка Mathematica®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-maple>11.4. Установка Maple™</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-matlab>11.5. Установка MATLAB®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-oracle>11.6. Установка Oracle®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#sapr3>11.7. Установка SAP® R/3®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-advanced>11.8. Дополнительные сведения</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partiii/>Часть III. Системное администрирование</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/config/>Глава 12. Настройка и оптимизация</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#config-synopsis>12.1. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-initial>12.2. Начальное конфигурирование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-core-configuration>12.3. Основные настройки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-appconfig>12.4. Настройка приложений</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-starting-services>12.5. Запуск сервисов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-cron>12.6. Настройка утилиты <code>cron</code></a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-rcd>12.7. Использование rc во FreeBSD 5.X и последующих версиях</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#config-network-setup>12.8. Настройка карт сетевых интерфейсов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-virtual-hosts>12.9. Настройка виртуальных серверов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-configfiles>12.10. Файлы настройки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-sysctl>12.11. Настройка с помощью sysctl</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-disk>12.12. Оптимизация дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-kernel-limits>12.13. Изменение ограничений, накладываемых ядром</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#adding-swap-space>12.14. Увеличение объема подкачки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#acpi-overview>12.15. Управление питанием и ресурсами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#ACPI-debug>12.16. Использование и отладка FreeBSD ACPI</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/boot/>Глава 13. Процесс загрузки FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-synopsis>13.1. Описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-introduction>13.2. Проблема загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-blocks>13.3. Менеджер загрузки и этапы загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-kernel>13.4. Взаимодействие с ядром во время загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#device-hints>13.5. Хинты устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-init>13.6. Init: инициализация управления процессами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-shutdown>13.7. Процесс остановки системы</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/security/>Глава 14. Безопасность</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-synopsis>14.1. Краткое описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-intro>14.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#securing-freebsd>14.3. Защита FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#crypt>14.4. DES, MD5, и шифрование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#one-time-passwords>14.5. Одноразовые пароли</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#tcpwrappers>14.6. TCP Wrappers</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#ipsec>14.10. VPN через IPsec</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#fs-acl>14.12. Списки контроля доступа файловой системы (ACL)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-portaudit>14.13. Мониторинг вопросов безопасности в ПО сторонних разработчиков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-advisories>14.14. Сообщения безопасности FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-accounting>14.15. Учёт используемых ресурсов</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mac/>Глава 15. Принудительный контроль доступа (MAC)</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-synopsis>15.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-inline-glossary>15.2. Ключевые термины этой главы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-initial>15.3. Описание MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-understandlabel>15.4. Метки MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-modules>15.5. Настройка модулей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-bsdextended>15.6. Модуль MAC bsdextended</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-ifoff>15.7. Модуль MAC ifoff</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-portacl>15.8. Модуль MAC portacl</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-labelingpolicies>15.9. Политики MAC, использующие метки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-partition>15.10. Модуль MAC partition</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-mls>15.11. Модуль многоуровневой безопасности MAC (MLS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-biba>15.12. Модуль MAC Biba</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-lomac>15.13. Модуль MAC LOMAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-implementing>15.14. Реализация защищенной среды с MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#MAC-examplehttpd>15.15. Другой пример: Использование MAC для защиты веб сервера</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-troubleshoot>15.16. Решение проблем с инфраструктурой MAC</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/audit/>Глава 16. Аудит событий безопасности</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-synopsis>16.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-inline-glossary>16.2. Ключевые понятия</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-config>16.3. Настройка системы аудита</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-administration>16.4. Работа с журналами аудита</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/disks/>Глава 17. Устройства хранения</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-synopsis>17.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-naming>17.2. Имена устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-adding>17.3. Добавление дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#raid>17.4. RAID</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#usb-disks>17.5. USB устройства хранения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#creating-cds>17.6. Запись и использование оптических носителей (CD)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#creating-dvds>17.7. Создание и использование оптических носителей (DVD)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#floppies>17.8. Дискеты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backups-tapebackups>17.9. Создание и использование архивных копий на магнитной ленте</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backups-floppybackups>17.10. Создание резервных копий на дискетах</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backup-strategies>17.11. Стратегии резервного копирования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backup-basics>17.12. Основы технологии резервного копирования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-virtual>17.13. Сетевые файловые системы, файловые системы в памяти и с отображением в файл</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#snapshots>17.14. Мгновенные копии файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#quotas>17.15. Квотирование файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-encrypting>17.16. Шифрование дисковых разделов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#swap-encrypting>17.17. Шифрование области подкачки</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/geom/>Глава 18. GEOM: Модульная инфраструктура преобразования дисковых запросов</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-synopsis>18.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-intro>18.2. Введение в GEOM</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-striping>18.3. RAID0 - Создание дисковой последовательности (Striping)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-mirror>18.4. RAID1 - Зеркалирование (Mirroring)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-ggate>18.5. Сетевые устройства GEOM Gate</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-glabel>18.6. Метки дисковых устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-gjournal>18.7. Журналирование UFS средствами GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/>Глава 19. Поддержка файловых систем</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/#filesystems-synopsis>19.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/#filesystems-zfs>19.2. Файловая система ZFS</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/l10n/>Глава 20. Локализация - использование и настройка i18n/L10n</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#l10n-synopsis>20.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#using-localization>20.2. Использование локализации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#l10n-compiling>20.3. Поиск приложений i18n</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#lang-setup>20.4. Настройка локализации для некоторых языков</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/>Глава 21. Обновление системы и смена версии FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-synopsis>21.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>21.2. Обновление FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-documentation>21.3. Обновление документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#current-stable>21.4. Использование ветви разработки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#synching>21.5. Синхронизация исходных текстов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#makeworld>21.6. Пересборка мира</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#small-lan>21.7. Отслеживание исходных текстов для нескольких машин</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partiv/>Часть IV. Сетевые коммуникации</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle checked>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/>Глава 22. Последовательные соединения</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serial-synopsis>22.1. Краткое описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serial>22.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#term>22.3. Терминалы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#dialup>22.4. Входящие соединения по модему</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#dialout>22.5. Исходящие соединения по модему</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serialconsole-setup>22.6. Настройка последовательной консоли</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/>Глава 23. PPP и SLIP</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>23.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#userppp>23.2. PPP уровня пользователя</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp>23.3. PPP уровня ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp-troubleshoot>23.4. Решение проблем с соединениями PPP</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#pppoe>23.5. Использование PPP через Ethernet (PPPoE)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#pppoa>23.6. Использование PPP через ATM (PPPoA)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#slip>23.7. Использование SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mail/>Глава 24. Электронная почта</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-synopsis>24.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-using>24.2. Использование электронной почты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#sendmail>24.3. Настройка sendmail</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-changingmta>24.4. Установка другой почтовой программы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-trouble>24.5. Поиск и устранение неисправностей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-advanced>24.6. Расширенное руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#outgoing-only>24.7. Настройка почты только для отправки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#SMTP-dialup>24.8. Использование почты с коммутируемым соединением</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#SMTP-Auth>24.9. SMTP аутентификация</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-agents>24.10. Почтовые программы пользователей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-fetchmail>24.11. Использование fetchmail</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-procmail>24.12. Использование procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/>Глава 25. Сетевые серверы</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-servers-synopsis>25.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-inetd>25.2. "Супер-сервер"inetd</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-nfs>25.3. Network File System (NFS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-nis>25.4. Network Information System (NIS/YP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-dhcp>25.5. Автоматическая настройка сети (DHCP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-dns>25.6. Domain Name System (DNS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-apache>25.7. Apache HTTP сервер</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-samba>25.8. Файл сервер и печать для Microsoft® Windows® клиентов (Samba)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-ftp>25.9. Протокол передачи файлов (FTP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-ntp>25.10. Синхронизация часов через NTP</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-syslogd>25.11. * Remote Host Logging with <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/>Глава 26. Межсетевые экраны</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-intro>26.1. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-concepts>26.2. Принципы работы межсетевых экранов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-apps>26.3. Пакеты межсетевых экранов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-pf>26.4. Packet Filter (PF, межсетевой экран OpenBSD) и ALTQ</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-ipf>26.5. * IPFILTER (IPF)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-ipfw>26.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/>Глава 27. Сложные вопросы работы в сети</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#advanced-networking-synopsis>27.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-routing>27.2. Сетевые шлюзы и маршруты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-wireless>27.3. Беспроводные сети</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-bluetooth>27.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-bridging>27.5. Мосты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-diskless>27.6. Работа с бездисковыми станциями</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-isdn>27.7. ISDN</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-natd>27.8. Даемон преобразования сетевых адресов (natd)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-plip>27.9. IP по параллельному порту (PLIP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-ipv6>27.10. IPv6</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-atm>27.11. Асинхронный режим передачи (ATM)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partv/>Часть V. Приложения</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/>Приложение A. Получение FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-cdrom>A.1. Наборы CD и DVD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-ftp>A.2. FTP сайты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#ctm>A.3. Использование CTM</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#svn>A.4. Использование Subversion</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-rsync>A.5. Использование rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/>Приложение B. Библиография</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-freebsd>B.1. Книги и журналы, специализирующиеся на FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-userguides>B.2. Руководства для пользователей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-adminguides>B.3. Руководства для администраторов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-programmers>B.4. Руководства для программистов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-osinternals>B.5. Внутренности операционной системы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-security>B.6. Безопасность</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-hardware>B.7. Оборудование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-history>B.8. История UNIX®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-journals>B.9. Прочие издания</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/eresources/>Приложение C. Ресурсы в интернет</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-mail>C.1. Списки рассылки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-news>C.2. Новостные группы Usenet</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-web>C.3. Серверы World Wide Web</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-email>C.4. Адреса Email</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/pgpkeys/>Приложение D. PGP ключи</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Офицеры</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Меню книг"></i>
Меню книг</span></label></div><h1 class=title>Глава 22. Последовательные соединения</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Этот перевод может быть устаревшим. Для того, чтобы помочь с переводом, пожалуйста, обратитесь к <a href=https://translate-dev.freebsd.org/ target=_blank>Сервер переводов FreeBSD</a>.</p></div><div class=toc-mobile><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#serial-synopsis>22.1. Краткое описание</a></li><li><a href=#serial>22.2. Введение</a></li><li><a href=#term>22.3. Терминалы</a></li><li><a href=#dialup>22.4. Входящие соединения по модему</a></li><li><a href=#dialout>22.5. Исходящие соединения по модему</a></li><li><a href=#serialconsole-setup>22.6. Настройка последовательной консоли</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=serial-synopsis>22.1. Краткое описание<a class=anchor href=#serial-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>В UNIX® всегда была поддержка последовательных соединений. Фактически, самые первые UNIX® машины использовали последовательные линии для пользовательского ввода/вывода. Многое изменилось с тех пор, когда среднестатистический "терминал" состоял из 10-символов-в-секунду последовательного принтера и клавиатуры. Эта глава рассказывает о некоторых способах, которыми FreeBSD использует последовательные соединения.</p></div><div class=paragraph><p>Прочитав эту главу, вы узнаете:</p></div><div class=ulist><ul><li><p>Как подсоединить терминалы к системе FreeBSD.</p></li><li><p>Как использовать модем для дозвона на удаленные хосты.</p></li><li><p>Как разрешить удаленным пользователям входить в вашу систему с помощью модема.</p></li><li><p>Как загрузить систему с последовательной консоли.</p></li></ul></div><div class=paragraph><p>Перед прочтением этой главы вам потребуется:</p></div><div class=ulist><ul><li><p>Узнать как настраивать и устанавливать новое ядро (<a href=../kernelconfig/#kernelconfig>Настройка ядра FreeBSD</a>).</p></li><li><p>Понять, что такое права доступа и процессы UNIX® (<a href=../basics/#basics>Основы UNIX</a>).</p></li><li><p>Кроме этого вам потребуется техническое руководство на последовательное оборудование (модем или мультипортовую карту), которую вы хотите использовать с FreeBSD.</p></li></ul></div></div></div><div class=sect1><h2 id=serial>22.2. Введение<a class=anchor href=#serial></a></h2><div class=sectionbody><div class=sect2><h3 id=serial-terminology>22.2.1. Терминология<a class=anchor href=#serial-terminology></a></h3><div class=dlist><dl><dt class=hdlist1>bps</dt><dd><p>Бит в секунду (Bits per Second) - скорость передачи данных</p></dd><dt class=hdlist1>DTE</dt><dd><p>Терминальное оборудование (Data Terminal Equipment) - например, ваш компьютер</p></dd><dt class=hdlist1>DCE</dt><dd><p>Оборудование связи (Data Communications Equipment) - ваш модем</p></dd><dt class=hdlist1>RS-232</dt><dd><p>Стандарт EIA для аппаратных последовательных соединений</p></dd></dl></div><div class=paragraph><p>При упоминании скорости передачи данных, в этой главе не используется термин "бод" ("baud"). Бод означает количество электрических импульсов, которые могут быть переданы за период времени, а "bps" это <em>корректный</em> термин для использования (он хотя бы не создает столько проблем как предыдущий).</p></div></div><div class=sect2><h3 id=serial-cables-ports>22.2.2. Кабели и порты<a class=anchor href=#serial-cables-ports></a></h3><div class=paragraph><p>Для подсоединения модема или терминала к системе FreeBSD потребуется последовательный порт и подходящий кабель для последовательного устройства. Если вы уже знаете о аппаратном обеспечении и требуемых кабелях, можете пропустить этот раздел.</p></div><div class=sect3><h4 id=term-cables>22.2.2.1. Кабели<a class=anchor href=#term-cables></a></h4><div class=paragraph><p>Есть несколько различных видов последовательных кабелей. Два наиболее часто используемых в нашей ситуации типа это нуль-модемный и стандартный ("прямой") RS-232 кабель. Документация на оборудование должна описывать тип требуемого кабеля.</p></div><div class=sect4><h5 id=term-cables-null>22.2.2.1.1. Нуль-модемные кабели<a class=anchor href=#term-cables-null></a></h5><div class=paragraph><p>Нуль модемный кабель пропускает некоторые сигналы, такие как "Signal Ground", напрямую, а другие "заворачивает". Например, контакт "Transmitted Data" на одном конце соединяется с контактом "Received Data" на другом.</p></div><div class=paragraph><p>Вы можете сделать собственный кабель для использования с терминалами. Эта таблица показывает названия <a href=#serialcomms-signal-names>сигналов RS-232C</a> и номера контактов на разъеме DB-25. Заметим, что стандарт описывает соединение контактов номер 1 как сигнал <em>Protective Ground</em>, но его часто не делают. Некоторым терминалам достаточно сигналов на контактах 2, 3 и 7; другим требуется большее число сигналов, как показано на примерах ниже:</p></div><table class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 1. Нуль-модемный кабель DB-25 - DB-25</caption><col style=width:20%><col style=width:20%><col style=width:20%><col style=width:20%><col style=width:20%><thead><tr><th class="tableblock halign-left valign-top">Сигнал</th><th class="tableblock halign-left valign-top">Контакт</th><th class="tableblock halign-left valign-top"></th><th class="tableblock halign-left valign-top">Контакт</th><th class="tableblock halign-left valign-top">Сигнал</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SG</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>7</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>7</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>SG</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>TD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>RD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>CTS</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>CTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>RTS</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DSR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>8</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DCD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DSR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DCD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>8</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td></tr></tbody></table><div class=paragraph><p>Вот еще две распространенные в настоящее время схемы.</p></div><table class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 2. Нуль-модемный кабель DB-9 - DB-9</caption><col style=width:20%><col style=width:20%><col style=width:20%><col style=width:20%><col style=width:20%><thead><tr><th class="tableblock halign-left valign-top">Сигнал</th><th class="tableblock halign-left valign-top">Контакт</th><th class="tableblock halign-left valign-top"></th><th class="tableblock halign-left valign-top">Контакт</th><th class="tableblock halign-left valign-top">Сигнал</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>TD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>RD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DSR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>1</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DCD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SG</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>SG</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DSR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DCD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>1</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>7</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>8</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>CTS</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>CTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>8</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>7</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>RTS</p></td></tr></tbody></table><table class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 3. Нуль-модемный кабель DB-9 - DB-25</caption><col style=width:20%><col style=width:20%><col style=width:20%><col style=width:20%><col style=width:20%><thead><tr><th class="tableblock halign-left valign-top">Сигнал</th><th class="tableblock halign-left valign-top">Контакт</th><th class="tableblock halign-left valign-top"></th><th class="tableblock halign-left valign-top">Контакт</th><th class="tableblock halign-left valign-top">Сигнал</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>TD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>RD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DSR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>8</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DCD</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SG</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>7</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>SG</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DSR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DCD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>1</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>7</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>CTS</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>CTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>8</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>соединен с</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>RTS</p></td></tr></tbody></table><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Для соединения одного контакта с одной стороны с двумя контактами на другой обычно пару контактов на одной стороне соединяют коротким проводом, а затем один из них - длинным с единственным контактом на дальней стороне.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Приведенные диаграммы описывают наиболее популярные схемы распайки. В других вариантах (описанных в книге <em>RS-232 Made Easy</em>) SG соединяется с SG, TD соединяется с RD, RTS и CTS соединяются с DCD, DTR соединяется с DSR, и наоборот.</p></div></div><div class=sect4><h5 id=term-cables-std>22.2.2.1.2. Стандартные кабели RS-232C<a class=anchor href=#term-cables-std></a></h5><div class=paragraph><p>Стандартный последовательный кабель пропускает все RS-232C сигналы напрямую. Так, "send data" на одном конце кабеля соединяется с контактом "send data" на другом конце. Этот тип кабеля предназначен для подсоединения модема, а также подходит для некоторых терминалов.</p></div></div></div><div class=sect3><h4 id=term-ports>22.2.2.2. Порты<a class=anchor href=#term-ports></a></h4><div class=paragraph><p>Последовательные порты это устройства, через которые данные передаются между компьютером с FreeBSD и терминалом. Этот раздел описывает типы существующих портов и их адресацию в FreeBSD.</p></div><div class=sect4><h5 id=term-portkinds>22.2.2.2.1. Типы портов<a class=anchor href=#term-portkinds></a></h5><div class=paragraph><p>Существует несколько типов последовательных портов. Перед изготовлением кабеля, вам потребуется убедиться, что он подходит к портам терминала и системы FreeBSD.</p></div><div class=paragraph><p>Большинство терминалов используют порты DB25. Персональные компьютеры, включая PC под управлением FreeBSD, используют порты DB25 или DB9. Если у вас есть мультипортовая последовательная карта для PC, там могут быть RJ-12 или RJ-45 порты.</p></div><div class=paragraph><p>Обратитесь к сопровождающей документации на оборудование за информацией об используемых портах. Можно также определить тип используемых портов по их внешнему виду.</p></div></div><div class=sect4><h5 id=term-portnames>22.2.2.2.2. Имена портов<a class=anchor href=#term-portnames></a></h5><div class=paragraph><p>В FreeBSD доступ к каждому последовательному порту может быть получен через файл в каталоге <span class=filename>/dev</span>. Есть два различных типа файлов:</p></div><div class=ulist><ul><li><p>Порты входящих соединений (dial-in) называются <span class=filename>/dev/ttydN</span>, где <em>N</em> это номер порта начиная с нуля. Обычно, порты входящих соединений используются для терминалов. Для корректной работы этим портам требуется, чтобы последовательный кабель передавал сигнал data carrier detect (DCD).</p></li><li><p>Порты исходящих соединений (call-out) называются <span class=filename>/dev/cuadN</span>. Они обычно используются не для терминалов, а только для модемов. Вы можете использовать эти порты если последовательный кабель или терминал не поддерживает сигнал DCD.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Call-out порты в FreeBSD 5.X и ранее именуются <span class=filename>/dev/cuaaN</span>.</p></div></td></tr></tbody></table></div></li></ul></div><div class=paragraph><p>Если вы соединили терминал с первым последовательным портом (<span class=filename>COM1</span> в MS-DOS®), используйте <span class=filename>/dev/ttyd0</span> для доступа к терминалу. Если терминал соединен со вторым последовательным портом (известным также как <span class=filename>COM2</span>), используйте <span class=filename>/dev/ttyd1</span>, и так далее.</p></div></div></div></div><div class=sect2><h3 id=_настройка_ядра>22.2.3. Настройка ядра<a class=anchor href=#_настройка_ядра></a></h3><div class=paragraph><p>FreeBSD c настройками по умолчанию поддерживает последовательные порты. В мире MS-DOS® они известны как <span class=filename>COM1</span>, <span class=filename>COM2</span>, <span class=filename>COM3</span>, и <span class=filename>COM4</span>. На данный момент в FreeBSD есть поддержка как "простых" мультипортовых карт с последовательными интерфейсами, таких как BocaBoard 1008 и 2016, так и более "умных" мультипортовых карт, например карт Digiboard и Stallion Technologies. Тем не менее, ядро по умолчанию определяет только стандартные COM порты.</p></div><div class=paragraph><p>Чтобы увидеть, как ядро определяет последовательные порты, просмотрите сообщения, выводимые во время загрузки ядра, или используйте команду <code>/sbin/dmesg</code> для вывода сообщений ядра еще раз. В частности, обратите внимание на сообщения, начинающиеся с символов <code>sio</code>.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Для просмотра только тех сообщений, которые содержат слово <code>sio</code>, используйте команду:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /sbin/dmesg | grep &#39;sio&#39;</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Например, в системе с четырьмя последовательными портами, появятся такие специфичные для последовательных портов сообщения:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: <span class=nb>type </span>16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: <span class=nb>type </span>16550A
sio2 at 0x3e8-0x3ef irq 5 on isa
sio2: <span class=nb>type </span>16550A
sio3 at 0x2e8-0x2ef irq 9 on isa
sio3: <span class=nb>type </span>16550A</code></pre></div></div><div class=paragraph><p>Если ядро не распознает все последовательные порты, вам возможно потребуется настроить ядро FreeBSD, изменив файл <span class=filename>/boot/device.hints</span>. Вы можете также закомментировать или вовсе удалить строки, относящиеся к отсутствующим у вас устройствам.</p></div><div class=paragraph><p>Обратитесь к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> за дополнительной информацией о настройке последовательных портов и мультипортовых карт. Будьте осторожны при использовании настроек, которые работали в предыдущих версиях FreeBSD, поскольку флаги устройств и синтаксис изменились в новых версиях.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>port IO_COM1</code> это синоним для <code>port 0x3f8</code>, <code>IO_COM2</code> для <code>0x2f8</code>, <code>IO_COM3</code> для <code>0x3e8</code>, и <code>IO_COM4</code> для <code>0x2e8</code>. Это наиболее часто используемые для соответствующих последовательных портов адреса. Наиболее часто используемые прерывания 4, 3, 5, и 9. Имейте ввиду, что обычные последовательные порты <em>не могут</em> совместно использовать прерывания на ISA PC (на мультипортовых картах есть электроника, позволяющая всем чипам 16550A на плате совместно использовать одно или два IRQ).</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_специальные_файлы_устройств>22.2.4. Специальные файлы устройств<a class=anchor href=#_специальные_файлы_устройств></a></h3><div class=paragraph><p>К большинству устройств ядра можно получить доступ через "специальные файлы устройств", расположенные в каталоге <span class=filename>/dev</span>. К устройствам <span class=filename>sio</span> можно получить доступ через <span class=filename>/dev/ttydN</span> (устройства входящих вызовов, dial-in) и <span class=filename>/dev/cuadN</span> (устройства исходящих вызовов, call-out). FreeBSD предоставляет также устройства инициализации (<span class=filename>/dev/ttydN.init</span> и <span class=filename>/dev/cuadN.init</span> в случае FreeBSD 6.X, <span class=filename>/dev/ttyidN</span> и <span class=filename>/dev/cuaiaN</span> для FreeBSD 5.X), устройства блокировки (<span class=filename>/dev/ttydN.lock</span> и <span class=filename>/dev/cuadN.lock</span> в случае FreeBSD 6.X, <span class=filename>/dev/ttyldN</span> и <span class=filename>/dev/cualaN</span> для FreeBSD 5.X). Первые используются для инициализации параметров порта при каждом его открытии (таких как <code>crtscts</code> для модемов, использующих сигналы <code>RTS/CTS</code> для управления потоком). Устройства блокировки используются для установки флага блокировки на порт и предотвращения изменения определенных параметров пользователями или программами; обратитесь к страницам справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=termios&amp;sektion=4&amp;format=html">termios(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=stty&amp;sektion=1&amp;format=html">stty(1)</a> соответственно за информацией о параметрах терминала, блокировании и инициализации устройств и настройке терминала.</p></div></div><div class=sect2><h3 id=serial-hw-config>22.2.5. Настройка последовательных портов<a class=anchor href=#serial-hw-config></a></h3><div class=paragraph><p>Устройство <span class=filename>ttydN</span> (или <span class=filename>cuadN</span>) это обычное устройство, которое потребуется открыть для приложений. Когда процесс открывает устройство применяются настройки ввода/вывода терминала по умолчанию. Вы можете посмотреть эти настройки с помощью команды</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># stty -a -f /dev/ttyd1</span></code></pre></div></div><div class=paragraph><p>Если вы измените настройки устройства, они будут действовать до его закрытия. После повторного открытия, оно вернется к настройкам по умолчанию. Для изменения настроек по умолчанию, вы можете открыть и изменить установки "начального состояния" устройства. Например, для включения по умолчанию режима <code>CLOCAL</code>, 8-битного соединения и контроля передачи <code>XON/XOFF</code> для <span class=filename>ttyd5</span>, выполните:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># stty -f /dev/ttyd5.init clocal cs8 ixon ixoff</span></code></pre></div></div><div class=paragraph><p>Инициализация последовательных устройств контролируется файлом <span class=filename>/etc/rc.d/serial</span>. Этот файл определяет настройки последовательных устройств по умолчанию.</p></div><div class=paragraph><p>Для предотвращения изменения программами отдельных установок, настройте "состояние блокировки" устройства. Например, для установки значения скорости <span class=filename>ttyd5</span> в 57600 bps, выполните:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># stty -f /dev/ttyd5.lock 57600</span></code></pre></div></div><div class=paragraph><p>Теперь приложение, открывающее <span class=filename>ttyd5</span> и пытающееся изменить скорость порта, получит скорость 57600 bps.</p></div><div class=paragraph><p>И конечно, сделайте запись начальных значений и состояния блокировки устройств доступной только учетной записи <code>root</code>.</p></div></div></div></div><div class=sect1><h2 id=term>22.3. Терминалы<a class=anchor href=#term></a></h2><div class=sectionbody><div class=paragraph><p>Терминалы предоставляют удобный и дешевый способ доступа к системе FreeBSD, когда вы не сидите за консолью компьютера и не подключены к сети. Этот раздел описывает использование терминалов в FreeBSD.</p></div><div class=sect2><h3 id=term-uses>22.3.1. Пользователи и типы терминалов<a class=anchor href=#term-uses></a></h3><div class=paragraph><p>В первых системах UNIX® не было консолей. Вместо этого, пользователи входили и запускали программы через терминалы, которые были подключены к последовательным портам компьютеров. Это очень похоже на использование модема и программного обеспечения терминала для дозвона до удаленной системы и выполнения только-текстовой работы.</p></div><div class=paragraph><p>Консоли современных PC поддерживают высококачественную графику, но возможность входа по последовательному порту на сегодняшний день все еще доступна почти в каждой UNIX® подобной операционной системе; FreeBSD не исключение. Используя терминал, подключенный к неиспользуемому последовательному порту, вы можете войти и запустить текстовую программу, которую обычно запускаете в текстовой консоли или в окне <code>xterm</code> системы X Window.</p></div><div class=paragraph><p>Для корпоративных пользователей, вы можете подсоединить множество терминалов к системе FreeBSD и поставить их на столы пользователей. Для домашнего пользователя, устаревший IBM PC или Macintosh® может быть подключен в качестве терминала к более мощному компьютеру под управлением FreeBSD. Вы можете превратить однопользовательский компьютер в мощную многопользовательскую систему.</p></div><div class=paragraph><p>В FreeBSD три вида терминалов:</p></div><div class=ulist><ul><li><p><a href=#term-dumb>Простые (dumb) терминалы</a></p></li><li><p><a href=#term-pcs>"PC, работающие в качестве терминалов"</a></p></li><li><p><a href=#term-x>X терминалы</a></p></li></ul></div><div class=paragraph><p>В оставшейся части раздела описывается каждый вид.</p></div><div class=sect3><h4 id=term-dumb>22.3.1.1. Простые терминалы<a class=anchor href=#term-dumb></a></h4><div class=paragraph><p>Простые терминалы это специализированное оборудование, позволяющее соединять компьютеры через последовательные линии. Они называются "простыми", поскольку их вычислительных возможностей хватает только для отображения, отправки и получения текста. Вы не сможете запустить на них никаких программ. Компьютер, к которому подсоединяется терминал, предоставляет все возможности для запуска текстовых редакторов, компиляторов, почтовых программ, игр и так далее.</p></div><div class=paragraph><p>Есть сотни видов простых терминалов, изготовленных различными производителями, включая DEC VT-100 и Wyse WY-75. Почти любой терминал может работать с FreeBSD. Некоторые high-end терминалы даже могут отображать графику, но только отдельные программные пакеты могут получить преимущество от этих расширенных возможностей.</p></div><div class=paragraph><p>Простые терминалы популярны в рабочей среде, где не требуется доступ к графическим приложениям, например тем, которые предоставляет система X Window.</p></div></div><div class=sect3><h4 id=term-pcs>22.3.1.2. PC, работающие в качестве терминалов<a class=anchor href=#term-pcs></a></h4><div class=paragraph><p>Если <a href=#term-dumb>простые терминалы</a> могут только отображать, отправлять и получать текст, возможностей абсолютно любого персонального компьютера хватит для работы в роли простого терминала. Все, что вам потребуется, это подходящий кабель и какая-нибудь программа <em>эмулятора терминала</em>.</p></div><div class=paragraph><p>Это популярная домашняя конфигурация. Например, когда ваша вторая половина занята работой на системной консоли FreeBSD, вы можете одновременно выполнять только-текстовую работу с менее мощного персонального компьютера, подключенного к системе FreeBSD.</p></div></div><div class=sect3><h4 id=term-x>22.3.1.3. X терминалы<a class=anchor href=#term-x></a></h4><div class=paragraph><p>X терминалы это наиболее сложный тип существующих терминалов. Вместо подключения к последовательному порту, они обычно подключаются к сети, например Ethernet. Вместо работы только с текстовыми приложениями, они могут отображать любое X приложение.</p></div><div class=paragraph><p>Мы представляем X терминалы только ради полноты описания. Тем не менее, эта глава <em>не</em> охватывает установку, настройку или использование X терминалов.</p></div></div></div><div class=sect2><h3 id=term-config>22.3.2. Настройка<a class=anchor href=#term-config></a></h3><div class=paragraph><p>Этот раздел описывает, что нужно сделать для настройки системы FreeBSD и включения входа в систему через терминал. Предполагается, что вы уже подключили терминал и настроили ядро для включения поддержки последовательного порта, к которому он подключен.</p></div><div class=paragraph><p>Обратитесь к главе <a href=../boot/#boot>Процесс загрузки FreeBSD</a> за информацией о процессе <code>init</code>, отвечающем за контроль над всеми процессами и за инициализацию системы во время загрузки. Одна из задач, выполняемых <code>init</code> - чтение файла <span class=filename>/etc/ttys</span> и запуск процесса <code>getty</code> на доступных терминалах. Процесс <code>getty</code> отвечает за чтение имени пользователя и запуск программы <code>login</code>.</p></div><div class=paragraph><p>Таким образом, для настройки терминалов в системе FreeBSD необходимо выполнить следующие действия под <code>root</code>:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Добавить строку к <span class=filename>/etc/ttys</span> для файла из каталога <span class=filename>/dev</span>, представляющего последовательный порт, если этой строки еще нет.</p></li><li><p>Настроить запуск команды <code>/usr/libexec/getty</code> на этом порту и указать соответствующий тип <em>getty</em> в файле <span class=filename>/etc/gettytab</span>.</p></li><li><p>Указать тип терминала по умолчанию.</p></li><li><p>Переключить порт в состояние "on" ("включен")</p></li><li><p>Указать, должен ли порт быть "secure" ("безопасным")</p></li><li><p>Заставить <code>init</code> перечитать файл <span class=filename>/etc/ttys</span>.</p></li></ol></div></div></div><div class=paragraph><p>Опционально, вы можете настроить свой тип <em>getty</em> для использования на шаге 2, добавив описание в файл <span class=filename>/etc/gettytab</span>. За описанием обратитесь к страницам справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=gettytab&amp;sektion=5&amp;format=html">gettytab(5)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>.</p></div><div class=sect3><h4 id=term-etcttys>22.3.2.1. Добавление строки в <span class=filename>/etc/ttys</span><a class=anchor href=#term-etcttys></a></h4><div class=paragraph><p>В файле <span class=filename>/etc/ttys</span> находится список всех портов системы FreeBSD, на которые возможен вход. Например, там находится первая виртуальная консоль <span class=filename>ttyv0</span>. Вы можете войти на консоль с помощью этой записи. Файл содержит записи и для других виртуальных консолей, последовательных портов, и псевдо-терминалов. Название файла последовательного порта из каталога <span class=filename>/dev</span> приводится без префикса <span class=filename>/dev</span> (например, устройство <span class=filename>/dev/ttyv0</span> будет записано как <span class=filename>ttyv0</span>).</p></div><div class=paragraph><p>Установка FreeBSD по умолчанию включает файл <span class=filename>/etc/ttys</span> с поддержкой первых четырех последовательных портов: от <span class=filename>ttyd0</span> до <span class=filename>ttyd3</span>. Если вы подключаете терминал к одному из этих портов, добавлять записи терминалов не потребуется.</p></div><div id=ex-etc-ttys class=exampleblock><div class=title>Пример 1. Добавление записей терминалов в <span class=filename>/etc/ttys</span></div><div class=content><div class=paragraph><p>Предположим, вы хотите подключить два терминала к системе: Wyse-50 и старый 286 IBM PC с эмулятором терминала VT-100. Мы подключаем Wyse к второму последовательному порту и 286 к шестому последовательному порту (порт на мультипортовой карте). Соответствующие строки в <span class=filename>/etc/ttys</span> будут выглядеть так:</p></div><div class="literalblock programlisting"><div class=content><pre>ttyd1  &#34;/usr/libexec/getty std.38400&#34;  wy50  on  insecure
ttyd5   &#34;/usr/libexec/getty std.19200&#34;  vt100  on  insecure</pre></div></div><div class=ulist><ul><li><p>Первое поле, как правило, указывает имя специального файла терминала, в соответствии с его именем в <span class=filename>/dev</span>.</p></li><li><p>Второе поле - это команда, исполняемая для этого терминала, обычно <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>. <code>getty</code> инициализирует и открывает линию, устанавливает ее скорость, приглашает пользователя к вводу имени пользователя, а затем выполняет программу <a href="https://man.freebsd.org/cgi/man.cgi?query=login&amp;sektion=1&amp;format=html">login(1)</a>.Программа <code>getty</code> принимает один (опциональный) параметр в командной строке, тип <em>getty</em>. Тип <em>getty</em> определяет характеристики терминальной линии, такие как значение bps и четность. Программа <code>getty</code> считывает эти характеристики из файла <span class=filename>/etc/gettytab</span>.Файл <span class=filename>/etc/gettytab</span> содержит множество записей для терминалов, как для старых так и для новых. Почти во всех случаях запись, начинающаяся с текста <code>std</code>, предназначена для работы с аппаратными терминалами. Эти записи игнорируют четность. Запись <code>std</code> есть для каждого значения bps от 110 до 115200. Конечно, вы можете добавить собственные записи в этот файл. Страница справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=gettytab&amp;sektion=5&amp;format=html">gettytab(5)</a> содержит дополнительную информацию.При установке типа <em>getty</em> в файле <span class=filename>/etc/ttys</span> убедитесь в наличии соответствующей записи терминала.Например, Wyse-50 не использует четность и соединяется на 38400 bps. 286 PC не использует четность и соединяется на 19200 bps.</p></li><li><p>Третье поле определяет тип терминала, обычно подключаемого к этой линии tty. Для портов входящих соединений обычно используется значение <code>unknown</code> или <code>dialup</code>, поскольку пользователь может подключить практически любой тип терминала или программу. Для аппаратных терминалов тип не меняется, поэтому вы можете поместить в это поле определенный тип терминала из базы данных <a href="https://man.freebsd.org/cgi/man.cgi?query=termcap&amp;sektion=5&amp;format=html">termcap(5)</a>.Например, Wyse-50 использует реальный тип терминала, а 286 PC, работающий с Procomm, настроен на эмуляцию VT-100.</p></li><li><p>Четвертое поле определяет должен ли порт быть включен. Размещение здесь <code>on</code> укажет процессу <code>init</code> запустить программу, указанную во втором поле, <code>getty</code>. Если вы поместите <code>off</code> в это поле, команда <code>getty</code> не будет запущена и вход на этот порт станет невозможен.</p></li><li><p>Последнее поле используется, чтобы указать, является ли порт безопасным. Пометка порта безопасным означает, что вы доверяете ему достаточно для того, чтобы разрешить учетной записи <code>root</code> (или любой учетной записи с UID 0) входить с этого порта. Небезопасные порты не разрешат вход <code>root</code>. На небезопасном порту пользователи должны войти с через непривилегированную учетную запись, а затем использовать <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> или подобный механизм для получения привилегий суперпользователя.Настоятельно рекомендуется использовать "insecure" даже для терминалов, находящихся за закрытыми дверями. Довольно легко использовать <code>su</code> после входа, если вам потребуются привилегии суперпользователя.</p></li></ul></div></div></div></div><div class=sect3><h4 id=term-hup>22.3.2.2. Заставьте <code>init</code> перечитать <span class=filename>/etc/ttys</span><a class=anchor href=#term-hup></a></h4><div class=paragraph><p>После выполнения необходимых изменений в файле <span class=filename>/etc/ttys</span>, вам потребуется отправить сигнал SIGHUP (hangup) процессу <code>init</code>, чтобы заставить его перечитать его файл настройки. Например:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -HUP 1</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>init</code> это всегда первый из запущенных в в системе процессов, поэтому его PID всегда 1.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Если все установлено правильно, все кабели на месте и терминалы включены, процесс <code>getty</code> должен быть запущен на каждом терминале и вы увидите приглашение ко входу на каждом терминале.</p></div></div></div><div class=sect2><h3 id=term-debug>22.3.3. Решение проблем с соединением<a class=anchor href=#term-debug></a></h3><div class=paragraph><p>Даже при самом внимательном отношении к деталям, при настройке терминала все же могут возникнуть проблемы. В этом разделе приведен список симптомов и предлагается несколько решений.</p></div><div class=sect3><h4 id=_не_появляется_приглашение_ко_входу>22.3.3.1. Не появляется приглашение ко входу<a class=anchor href=#_не_появляется_приглашение_ко_входу></a></h4><div class=paragraph><p>Убедитесь, что терминал подключен и его питание включено. Убедитесь, что эмулятор терминала запущен на соответствующем порту.</p></div><div class=paragraph><p>Убедитесь, что кабель хорошо подключен и к терминалу и к компьютеру с FreeBSD. Убедитесь, что правильно выбран тип кабеля.</p></div><div class=paragraph><p>Убедитесь, что терминал и FreeBSD имеют одинаковые установки значения bps и четности. Если у вас видео терминал, убедитесь, что контраст и яркость включены. Если это принт-терминал, убедитесь, что бумага и чернила в порядке.</p></div><div class=paragraph><p>Убедитесь, что процесс <code>getty</code> запущен и обслуживает терминал. Например, для получения списка запущенных процессов <code>getty</code> с помощью <code>ps</code>, выполните:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ps -axww|grep getty</span></code></pre></div></div><div class=paragraph><p>Вы должны увидеть строку для соответствующего терминала. Например, если <code>getty</code> запущена на втором последовательном порту <code>ttyd1</code> и использует запись <code>std.38400</code> из файла <span class=filename>/etc/gettytab</span>, отобразится следующее:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>22189  d1  Is+    0:00.03 /usr/libexec/getty std.38400 ttyd1</code></pre></div></div><div class=paragraph><p>Если процесс <code>getty</code> не запущен, убедитесь, что вы включили порт в <span class=filename>/etc/ttys</span>. Не забудьте также запустить <code>kill -HUP 1</code> после изменения файла <span class=filename>ttys</span>.</p></div><div class=paragraph><p>Если процесс <code>getty</code> запущен, но на терминале по-прежнему не отображается приглашение ко входу, или если приглашение отображается, но войти невозможно, терминал или кабель, возможно, не поддерживают квитирование связи. Попробуйте изменить поле в <span class=filename>/etc/ttys</span> с <code>std.38400</code> на <code>3wire.38400</code>. Запись <code>3wire</code> похожа на <code>std</code>, но игнорирует квитирование связи. Вам может потребоваться уменьшить скорость соединения или включить программный контроль передачи при использовании <code>3wire</code> для предотвращения переполнений буфера.</p></div></div><div class=sect3><h4 id=_вместо_приглашения_ко_входу_на_экране_появляется_мусор>22.3.3.2. Вместо приглашения ко входу на экране появляется "мусор"<a class=anchor href=#_вместо_приглашения_ко_входу_на_экране_появляется_мусор></a></h4><div class=paragraph><p>Убедитесь, что терминал и FreeBSD имеют одинаковые установки значения bps и четности. Проверьте процесс <code>getty</code>, чтобы убедиться, что используется подходящий тип <em>getty</em>. Если это не так, отредактируйте <span class=filename>/etc/ttys</span> и запустите <code>kill -HUP 1</code>.</p></div></div><div class=sect3><h4 id=_символы_появляются_дважды_пароль_отображается_при_вводе>22.3.3.3. Символы появляются дважды, пароль отображается при вводе<a class=anchor href=#_символы_появляются_дважды_пароль_отображается_при_вводе></a></h4><div class=paragraph><p>Переключите терминал (или программу эмулятора терминала) с "half duplex" или "local echo" на "full duplex".</p></div></div></div></div></div><div class=sect1><h2 id=dialup>22.4. Входящие соединения по модему<a class=anchor href=#dialup></a></h2><div class=sectionbody><div class=paragraph><p>Настройка системы FreeBSD для поддержки входящих соединений очень похожа на подсоединение терминалов за исключением того, что вы работаете с модемами вместо терминалов.</p></div><div class=sect2><h3 id=_внешние_и_внутренние_модемы>22.4.1. Внешние и внутренние модемы<a class=anchor href=#_внешние_и_внутренние_модемы></a></h3><div class=paragraph><p>Внешние модемы более удобны для дозвона, поскольку легко могут быть настроены с помощью параметров, сохраняемых в энергонезависимой памяти. На них обычно есть индикаторы, отображающие состояние основных RS-232 сигналов. Мигающие индикаторы впечатляют, но кроме того они также очень полезны для индикации правильной работы модема.</p></div><div class=paragraph><p>Внутренние модемы обычно не снабжаются энергонезависимой памятью, поэтому их настройка может ограничиваться установкой DIP переключателей. Если на внутреннем модеме есть индикаторы, их обычно сложно увидеть при закрытой крышке корпуса.</p></div><div class=sect3><h4 id=_модемы_и_кабели>22.4.1.1. Модемы и кабели<a class=anchor href=#_модемы_и_кабели></a></h4><div class=paragraph><p>Если вы используете внешний модем, несомненно потребуется подходящий кабель. Стандартный RS-232C кабель должен подойти, если подключены все обычные сигналы:</p></div><table id=serialcomms-signal-names class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 4. Наименования сигналов</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Сокращение</th><th class="tableblock halign-left valign-top">Наименование</th><th class="tableblock halign-left valign-top">Назначение</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Received Data</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Принимаемые данные</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>TD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Transmitted Data</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Передаваемые данные</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DTR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Data Terminal Ready</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Готовность терминала</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DSR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Data Set Ready</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Готовность данных</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DCD</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Data Carrier Detect</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Наличие несущей</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SG</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Signal Ground</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Сигнальная земля</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Request to Send</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Запрос на посылку</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>CTS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Clear to Send</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Готовность к приему</p></td></tr></tbody></table><div class=paragraph><p>FreeBSD требуются сигналы RTS и CTS для контроля передачи на скоростях выше 2400 bps, сигнал CD для определения, был ли ответ на сигнал или произошло отключение линии, и сигнал DTR для сброса модема после завершения сессии. Некоторые кабели не поддерживают все необходимые сигналы, поэтому, если вы столкнулись с проблемами, например, если сессия не завершается после отсоединения линии, причиной возможно являются проблемы с кабелем.</p></div><div class=paragraph><p>Как и другие UNIX® подобные операционные системы, FreeBSD использует аппаратные сигналы для определения того, был ли ответ на звонок или линия была отключена и требуется завершить работу модема и сбросить его в начальное состояние. FreeBSD избегает отправлять команды модему или просматривать отчеты о статусе от модема. Если вы знакомы с настройкой BBS, это может показаться неудобным.</p></div></div></div><div class=sect2><h3 id=_рекомендации_по_последовательным_интерфейсам>22.4.2. Рекомендации по последовательным интерфейсам<a class=anchor href=#_рекомендации_по_последовательным_интерфейсам></a></h3><div class=paragraph><p>FreeBSD поддерживает интерфейсы, основанные на NS8250, NS16450, NS16550, и NS16550A EIA RS-232C (CCITT V.24). Устройства 8250 и 16450 снабжены односимвольным буфером. Устройство 16550 снабжено 16-ти символьным буфером, который повышает производительность системы. (Ошибки в 16550 делают невозможным использование 16-символьного буфера, поэтому используйте 16550A если возможно). Поскольку устройства с односимвольным буфером предъявляют большие требования к операционной системе, чем с 16-ти символьным буфером, предпочтительны устройства на 16550A. Если в системе много активных последовательных портов или нагрузка велика, устройства на 16550A лучше подходят для поддержки соединений с малым количеством ошибок.</p></div></div><div class=sect2><h3 id=_краткий_обзор>22.4.3. Краткий обзор<a class=anchor href=#_краткий_обзор></a></h3><div class=paragraph><p>Как и с терминалами, <code>init</code> запускает процесс <code>getty</code> на каждом настроенном для входящих звонков последовательном порту. Например, если модем подключен к <span class=filename>/dev/ttyd0</span>, команда <code>ps ax</code> может вывести следующее:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>4850 ??  I      0:00.09 /usr/libexec/getty V19200 ttyd0</code></pre></div></div><div class=paragraph><p>Когда пользователь дозванивается на подключенный модем, модем выдает сигнал CD (Carrier Detect). Ядро определяет, что несущая обнаружена и завершает открытие порта командой <code>getty</code>. <code>getty</code> отправляет приглашение <code>login:</code> на указанной скорости. <code>getty</code> ожидает в ответ набор символов, и, как правило, получает неправильный набор (обычно это происходит из-за того, что скорость соединения модема отличается от скорости <code>getty</code>). <code>getty</code> пробует подобрать скорость линии до тех пор, пока не получит правильный набор символов.</p></div><div class=paragraph><p>После того, как будет введено имя пользователя, <code>getty</code> выполняет <span class=filename>/usr/bin/login</span>, которая завершает вход, запрашивая пароль пользователя и запуская оболочку.</p></div></div><div class=sect2><h3 id=_файлы_настройки>22.4.4. Файлы настройки<a class=anchor href=#_файлы_настройки></a></h3><div class=paragraph><p>Есть три файла настройки системы в каталоге <span class=filename>/etc</span>, которые возможно потребуется отредактировать для включения удаленного доступа по модему в FreeBSD. Первый, <span class=filename>/etc/gettytab</span>, содержит информацию по настройке даемона <span class=filename>/usr/libexec/getty</span>. Второй, <span class=filename>/etc/ttys</span>, содержит информацию, указывающую <span class=filename>/sbin/init</span> на каких устройствах <span class=filename>tty</span> должны быть запущены процессы <code>getty</code>. Наконец, вы можете поместить команды инициализации портов в скрипт /etc/rc.d/serial.</p></div><div class=paragraph><p>В UNIX® есть две школы настройки модемов для входящих соединений. Одна предпочитает настраивать модемы и системы так, что не важно на какой скорости подсоединяется удаленный пользователь. Локальный интерфейс RS-232 компьютер-модем работает на жестко заданной скорости. Преимущество этой настройки в том, что удаленный пользователь всегда сразу видит приглашение ко входу. Обратная сторона в том, что система не знает, какова на самом деле скорость передачи данных, поэтому полноэкранные программы, такие как Emacs, не настраивают свои методы отображения на экране для работы с медленными соединениями.</p></div><div class=paragraph><p>Другая школа настраивает интерфейс RS-232 для работы с различной скоростью в зависимости от скорости подсоединения удаленного пользователя. Например, соединение модемов по протоколу V.32bis (14.4 Кбит/с) установит скорость порта RS-232 равной 19.2 Кбит/с, а соединение на скорости 2400 бит/с установит скорость RS-232 равной 2400 бит/с. Поскольку <code>getty</code> не понимает сообщений модема о скорости соединения, <code>getty</code> выдает приглашение <code>login:</code> на установленной по умолчанию скорости и считывает символы, полученные в ответе. Если пользователь видит "мусор" вместо приглашения ко входу, это означает, что нужно нажимать Enter до тех пор, пока не появится приглашение ко входу. Если скорости не совпадают, <code>getty</code> получает все, что вводит пользователь, в виде "мусора", пробует переключиться на другую скорость и выдает приглашение <code>login:</code> опять. Эта процедура может продолжаться до отвращения, но обычно требуется одно или два нажатия клавиши перед появлением нормально выглядящего приглашения. Очевидно, эта последовательность входа не так хороша, как метод с фиксированной скоростью, но при низкой скорости соединения работать с полноэкранными программами станет проще.</p></div><div class=paragraph><p>В этом разделе делается попытка дать сбалансированную информацию для настройки, но предпочтение будет отдано установке скорости соединения с модемом в соответствие скорости подключения.</p></div><div class=sect3><h4 id=_etcgettytab>22.4.4.1. <span class=filename>/etc/gettytab</span><a class=anchor href=#_etcgettytab></a></h4><div class=paragraph><p><span class=filename>/etc/gettytab</span> это файл в стиле <a href="https://man.freebsd.org/cgi/man.cgi?query=termcap&amp;sektion=5&amp;format=html">termcap(5)</a>, содержащей информацию по настройке <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>. Пожалуйста, обратитесь к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=gettytab&amp;sektion=5&amp;format=html">gettytab(5)</a> за полной информацией о формате файла и за списком возможностей <code>getty</code>.</p></div><div class=sect4><h5 id=_настройка_фиксированной_скорости>22.4.4.1.1. Настройка фиксированной скорости<a class=anchor href=#_настройка_фиксированной_скорости></a></h5><div class=paragraph><p>Если вы зафиксировали скорость соединения модема на определенной скорости, редактировать файл <span class=filename>/etc/gettytab</span> скорее всего не потребуется.</p></div></div><div class=sect4><h5 id=_настройка_изменяемой_скорости>22.4.4.1.2. Настройка изменяемой скорости<a class=anchor href=#_настройка_изменяемой_скорости></a></h5><div class=paragraph><p>Вам потребуется сделать запись в <span class=filename>/etc/gettytab</span> для предоставления <code>getty</code> информации о скоростях, которые предполагается использовать для модема. Если у вас 2400 бит/с модем, возможно, подойдет существующая запись <code>D2400</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>#
# Fast dialup terminals, 2400/1200/300 rotary (can start either way)
#
D2400|d2400|Fast-Dial-2400:\
        :nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
        :nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
        :nx=D2400:tc=300-baud:</pre></div></div><div class=paragraph><p>Если у вас более скоростной модем, вам возможно потребуется добавить запись в <span class=filename>/etc/gettytab</span>; вот запись, которую вы можете использовать для 14.4 Кбит/с модема с максимальной скоростью интерфейса 19.2 Кбит/с:</p></div><div class="literalblock programlisting"><div class=content><pre>#
# Additions for a V.32bis Modem
#
um|V300|High Speed Modem at 300,8-bit:\
        :nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
        :nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
        :nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
        :nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
        :nx=V9600:tc=std.19200:</pre></div></div><div class=paragraph><p>Эта настройка включает 8-битные соединения без программного контроля четности.</p></div><div class=paragraph><p>В примере выше скорость порта будет переключаться в цикле начиная с 19.2 Кбит/с (для соединения по V.32bis), затем 9600 бит/с (для V.32), 2400 бит/с, 1200 бит/с, 300 бит/с, и обратно на 19.2 Кбит/с. Переключение скоростей в цикле реализовано с помощью <code>nx=</code> ("next table"). Каждая из линий использует <code>tc=</code> ("table continuation") для указания "стандартных" (std) настроек на каждой скорости.</p></div><div class=paragraph><p>Если у вас 28.8 Кбит/с модем и/или вы хотите получить преимущество от сжатия на скорости 14.4 Кбит/с, потребуются скорости выше, чем 19.2 Кбит/с. Вот пример записи из <span class=filename>gettytab</span> для начала соединения на скорости 57.6 Кбит/с:</p></div><div class="literalblock programlisting"><div class=content><pre>#
# Additions for a V.32bis or V.34 Modem
# Starting at 57.6 Kbps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
        :nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
        :nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
        :nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
        :nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
        :nx=VH9600:tc=std.57600:</pre></div></div><div class=paragraph><p>Если у вас медленный CPU или сильно загруженная система без последовательных портов на базе 16550A, на скорости 57.6 Кбит/с могут возникнуть ошибки <code>sio</code> "silo".</p></div></div></div><div class=sect3><h4 id=dialup-ttys>22.4.4.2. <span class=filename>/etc/ttys</span><a class=anchor href=#dialup-ttys></a></h4><div class=paragraph><p>Настройка файла <span class=filename>/etc/ttys</span> была описана в <a href=#ex-etc-ttys>Добавление записей терминалов в <span class=filename>/etc/ttys</span></a>. Настройка модемов похожа, но потребуется передавать <code>getty</code> различные аргументы и указывать различные типы терминалов. Общий формат для фиксированной и переменной скорости такой:</p></div><div class="literalblock programlisting"><div class=content><pre>ttyd0   &#34;/usr/libexec/getty xxx&#34;   dialup on</pre></div></div><div class=paragraph><p>Первый пункт в строке выше это специальный файл устройства для этой записи - <code>ttyd0</code> означает, что <code>getty</code> будет запущена на <span class=filename>/dev/ttyd0</span>. Второй пункт, <code>"/usr/libexec/getty <em>xxx</em>"</code> (<em>xxx</em> будет замещено на запись из <span class=filename>gettytab</span> для начальной скорости), это процесс, который будет запущен на данном устройстве. Третий пункт, <code>dialup</code>, это тип терминала по умолчанию. Четвертый параметр, <code>on</code>, указывает <code>init</code>, что линия включена. Может быть пятый параметр, <code>secure</code>, но он должен использоваться только для терминалов, которые физически безопасны (таких как системная консоль).</p></div><div class=paragraph><p>Тип терминала по умолчанию (<code>dialup</code> в примере выше) может зависеть от личных предпочтений. <code>dialup</code> это традиционный тип терминала по умолчанию на линиях для дозвона, который позволяет пользователям, зная что тип терминала <code>dialup</code>, автоматически настраивать свой тип терминала. Однако, автор находит более легким указание <code>vt102</code> в качестве типа терминала по умолчанию, поскольку пользователи работают на своих удаленных системах с эмулятором терминала VT102.</p></div><div class=paragraph><p>После внесения изменений в <span class=filename>/etc/ttys</span>, вы можете отправить процессу <code>init</code> сигнал HUP перечитать файл. Используйте команду</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -HUP 1</span></code></pre></div></div><div class=paragraph><p>для отправки сигнала. Если вы настраиваете систему в первый раз, то возможно захотите подождать, пока модем(ы) правильно настроятся и соединятся перед отправкой сигнала <code>init</code>.</p></div><div class=sect4><h5 id=_настройка_фиксированной_скорости_2>22.4.4.2.1. Настройка фиксированной скорости<a class=anchor href=#_настройка_фиксированной_скорости_2></a></h5><div class=paragraph><p>Для настройки соединения с фиксированной скоростью, в файле <span class=filename>ttys</span> должна быть запись с фиксированной скоростью для <code>getty</code>. Для модема, скорость порта которого фиксирована на значении 19.2 Кбит/с, строка в <span class=filename>ttys</span> может выглядеть так:</p></div><div class="literalblock programlisting"><div class=content><pre>ttyd0   &#34;/usr/libexec/getty std.19200&#34;   dialup on</pre></div></div><div class=paragraph><p>Если скорость модема фиксирована на другом значении, подставьте соответствующее значение в <code>std.<em>speed</em></code> вместо <code>std.19200</code>. Убедитесь, что вы используете тип, описанный в <span class=filename>/etc/gettytab</span>.</p></div></div><div class=sect4><h5 id=_настройка_переменной_скорости>22.4.4.2.2. Настройка переменной скорости<a class=anchor href=#_настройка_переменной_скорости></a></h5><div class=paragraph><p>В настройке с переменной скоростью, запись в <span class=filename>ttys</span> должна обращаться к соответствующей "auto-baud" (sic) записи в <span class=filename>/etc/gettytab</span>. Например, если вы добавите предложенную выше запись для подключения модема с переменной скоростью, которая начинается с 19.2 Кбит/с (запись в <span class=filename>gettytab</span> начинается с <code>V19200</code>), запись в <span class=filename>ttys</span> может выглядеть так:</p></div><div class="literalblock programlisting"><div class=content><pre>ttyd0   &#34;/usr/libexec/getty V19200&#34;   dialup on</pre></div></div></div></div><div class=sect3><h4 id=_etcrc_dserial>22.4.4.3. <span class=filename>/etc/rc.d/serial</span><a class=anchor href=#_etcrc_dserial></a></h4><div class=paragraph><p>Для высокоскоростных модемов, таких как V.32, V.32bis и V.34, требуется использование аппаратного контроля передачи (<code>RTS/CTS</code>). Вы можете добавить команды <code>stty</code> к файлу <span class=filename>/etc/rc.d/serial</span> для установки флага аппаратного контроля передачи в ядре FreeBSD для модемных портов.</p></div><div class=paragraph><p>Например, для установки флага <code>termios crtscts</code> на последовательном порту номер 1 (<span class=filename>COM2</span>) при инициализации устройств для входящей и исходящей связи, в <span class=filename>/etc/rc.d/serial</span>должны быть добавлены следующие строки:</p></div><div class="literalblock programlisting"><div class=content><pre># Serial port initial configuration
stty -f /dev/ttyd1.init crtscts
stty -f /dev/cuad1.init crtscts</pre></div></div></div></div><div class=sect2><h3 id=_настройка_модема>22.4.5. Настройка модема<a class=anchor href=#_настройка_модема></a></h3><div class=paragraph><p>Если параметры вашего модема могут быть сохранены в энергонезависимой памяти, потребуется использовать терминальную программу (например, Telix под MS-DOS® или <code>tip</code> под FreeBSD) для установки параметров. Подсоединитесь к модему, используя ту же скорость соединения, которую использует <code>getty</code> в качестве начальной скорости, и настройте модем для соответствия следующим требованиям:</p></div><div class=ulist><ul><li><p>CD включен после соединения</p></li><li><p>DTR включен во время работы; сброс DTR отключает линию и переводит модем в начальное состояние</p></li><li><p>CTS контроль переданных данных</p></li><li><p>Контроль потока XON/XOFF отключен</p></li><li><p>RTS контроль принятых данных</p></li><li><p>"Тихий" режим (без кодов возврата)</p></li><li><p>Эхо команд отключено</p></li></ul></div><div class=paragraph><p>Прочтите документацию на модем для определения какие команды и/или DIP переключатели требуются чтобы установить эти настройки.</p></div><div class=paragraph><p>Например, для установки вышеуказанных параметров на внешнем 14,400 модеме U.S. Robotics® Sportster®, требуется отправить модему следующие команды:</p></div><div class="literalblock programlisting"><div class=content><pre>ATZ
AT&amp;C1&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre></div></div><div class=paragraph><p>Вы, возможно, захотите настроить и другие параметры модема, такие как использование сжатия V.42bis и/или MNP5.</p></div><div class=paragraph><p>Внешний U.S. Robotics® Sportster® 14,400 модем также снабжен некоторыми DIP переключателями, которые требуется установить; для других модемов эти настройки могут быть использованы в качестве примера:</p></div><div class=ulist><ul><li><p>Переключатель 1: вверх - нормальный DTR</p></li><li><p>Переключатель 2: N/A (визуальные коды возврата/числовые коды возврата)</p></li><li><p>Переключатель 3: вверх - подавление кодов возврата</p></li><li><p>Переключатель 4: вниз - без эхо, offline команды</p></li><li><p>Переключатель 5: вверх - авто ответ</p></li><li><p>Переключатель 6: вверх - нормальный контроль несущей</p></li><li><p>Переключатель 7: вверх - загрузить установки по умолчанию из NVRAM</p></li><li><p>Переключатель 8: N/A (Smart/Dumb режимы)</p></li></ul></div><div class=paragraph><p>Коды возврата должны быть отключены/подавлены для устранения проблем, которые могут возникнуть, если <code>getty</code> ошибочно выдаст приглашение <code>login:</code> модему в командном режиме и модем вернет (echo) эту команду или код возврата. Эта последовательность может привести к дополнительному и бессмысленному обмену командами между <code>getty</code> и модемом.</p></div><div class=sect3><h4 id=_настройка_фиксированной_скорости_3>22.4.5.1. Настройка фиксированной скорости<a class=anchor href=#_настройка_фиксированной_скорости_3></a></h4><div class=paragraph><p>Для настройки фиксированной скорости вам потребуется настроить модем с поддержкой постоянной скорости обмена данными модем-компьютер независимо от скорости соединения. На внешнем модеме U.S. Robotics® Sportster® 14,400 эти команды зафиксируют скорость передачи модем-компьютер на скорости, которая установлена при выполнении команды:</p></div><div class="literalblock programlisting"><div class=content><pre>ATZ
AT&amp;B1&amp;W</pre></div></div></div><div class=sect3><h4 id=_настройка_переменной_скорости_2>22.4.5.2. Настройка переменной скорости<a class=anchor href=#_настройка_переменной_скорости_2></a></h4><div class=paragraph><p>Для настройки переменной скорости вам потребуется настроить модем с поддержкой изменения скорости передачи данных через последовательный порт в соответствии через скоростью соединения. Следующие команды зафиксируют скорость передачи данных с коррекцией ошибок внешнего модема U.S. Robotics® Sportster® 14,400 на значении, которое установлено при выполнении команды, но сделают возможным изменение скорости последовательного порта для соединений без коррекции ошибок:</p></div><div class="literalblock programlisting"><div class=content><pre>ATZ
AT&amp;B2&amp;W</pre></div></div></div><div class=sect3><h4 id=_проверка_настроек_модема>22.4.5.3. Проверка настроек модема<a class=anchor href=#_проверка_настроек_модема></a></h4><div class=paragraph><p>Большинство высокоскоростных модемов предоставляют команды для просмотра текущих параметров модема в виде, отчасти приспособленном для чтения. Для внешних модемов U.S. Robotics® Sportster® 14,400 команда <code>ATI5</code> отображает установки, сохраненные в энергонезависимой памяти. Для просмотра действующих параметров модема (с учетом положения DIP переключателей), используйте команду <code>ATZ</code>, а затем <code>ATI4</code>.</p></div><div class=paragraph><p>Если ваш модем другого производителя, проверьте руководство к модему для аккуратной проверки параметров настройки модема.</p></div></div></div><div class=sect2><h3 id=_решение_проблем>22.4.6. Решение проблем<a class=anchor href=#_решение_проблем></a></h3><div class=paragraph><p>Вот несколько шагов, которые нужно выполнить для проверки настроек.</p></div><div class=sect3><h4 id=_проверьте_систему_freebsd>22.4.6.1. Проверьте систему FreeBSD<a class=anchor href=#_проверьте_систему_freebsd></a></h4><div class=paragraph><p>Подсоедините модем к системе FreeBSD, загрузите систему, и, если на модеме есть индикаторы, посмотрите, загорелся ли индикатор DTR при появлении приглашения <code>login:</code> на системной консоли - если он загорелся, это означает, что FreeBSD запустила процесс <code>getty</code> на соответствующем коммуникационном порту и модем ожидает входящего звонка.</p></div><div class=paragraph><p>Если индикатор DTR не загорелся, войдите на консоль системы FreeBSD и выполните команду <code>ps ax</code>, чтобы увидеть, пытается ли FreeBSD запустить процесс <code>getty</code> на соответствующем порту. Вы должны увидеть строки вроде этих среди показанных процессов:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd1</code></pre></div></div><div class=paragraph><p>Если вы видите что-то другое, вроде этого:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyd0</code></pre></div></div><div class=paragraph><p>и модем все еще не принимает звонок, это означает, что <code>getty</code> завершила открытие коммуникационного порта. Это может означать проблему с кабелем или неправильную настройку модема, поскольку <code>getty</code> не должна открывать коммуникационный порт, пока модем не установит CD (обнаружение несущей).</p></div><div class=paragraph><p>Если вы не видите процессов <code>getty</code>, ожидающих открытия соответствующего порта <span class=filename>ttydN</span>, внимательно проверьте записи в <span class=filename>/etc/ttys</span> и попробуйте найти ошибки, если они есть. Проверьте также лог файл <span class=filename>/var/log/messages</span>, нет ли там сообщений от <code>init</code> или <code>getty</code>, имеющих отношение к проблеме. Если сообщения есть, проверьте еще раз файлы настройки <span class=filename>/etc/ttys</span> и <span class=filename>/etc/gettytab</span>, как и соответствующие специальные файлы устройств <span class=filename>/dev/ttydN</span>, чтобы обнаружить ошибки, отсутствующие записи или отсутствующие специальные файлы устройств.</p></div></div><div class=sect3><h4 id=_попробуйте_позвонить_на_модем>22.4.6.2. Попробуйте позвонить на модем<a class=anchor href=#_попробуйте_позвонить_на_модем></a></h4><div class=paragraph><p>Попробуйте дозвониться до системы; убедитесь, что используете 8 бит без четности и 1 стоп бит на удаленной системе. Если вы не получите приглашение сразу, или получите случайные данные, попробуйте нажимать Enter примерно раз в секунду. Если вы все еще не видите приглашения <code>login:</code> после нескольких попыток, попробуйте отправить команду <code>BREAK</code>. Если вы используете для дозвона высокоскоростной модем, попробуйте позвонить еще раз после фиксирования скорости интерфейса дозванивающегося модема (например, с помощью команды <code>AT&amp;B1</code> для модема U.S. Robotics® Sportster®).</p></div><div class=paragraph><p>Если вы все еще не можете получить приглашение <code>login:</code>, проверьте <span class=filename>/etc/gettytab</span> еще раз и убедитесь, что</p></div><div class=ulist><ul><li><p>Имя параметра <code>getty</code>, указанного в <span class=filename>/etc/ttys</span>, совпадает с именем параметра в <span class=filename>/etc/gettytab</span></p></li><li><p>Каждая запись <code>nx=</code> соответствует имени другой записи в <span class=filename>gettytab</span></p></li><li><p>Каждая запись <code>tc=</code> соответствует имени другой записи в <span class=filename>gettytab</span></p></li></ul></div><div class=paragraph><p>Если система FreeBSD не отвечает на звонок, убедитесь, что модем настроен для ответа на звонок при включении DTR. Если модем настроен правильно, проверьте, что DTR включается, взглянув на индикаторы модема (если они есть).</p></div><div class=paragraph><p>Если вы проверили все несколько раз и все еще не добились результата, сделайте перерыв и вернитесь к настройкам позже. Если опять ничего не получилось, возможно вам потребуется отправить письмо в <a href=https://lists.FreeBSD.org/subscription/freebsd-questions>Список рассылки, посвящённый вопросам и ответам пользователей FreeBSD</a>, описав модем и возникшую проблему, участники рассылки попробуют помочь вам.</p></div></div></div></div></div><div class=sect1><h2 id=dialout>22.5. Исходящие соединения по модему<a class=anchor href=#dialout></a></h2><div class=sectionbody><div class=paragraph><p>Текст, приведенный ниже, это советы, позволяющие настроить ваш хост для доступа к другому компьютеру через модем. Они подходят для установления терминальной сессии с удаленным хостом.</p></div><div class=paragraph><p>Это подходит для входа на BBS.</p></div><div class=paragraph><p>Этот вид соединения может очень выручить, если требуется получить файл из интернет и есть проблемы с PPP. Если вам требуется зайти куда-то по FTP, а PPP не работает, используйте терминальную сессию для получения файла по FTP. Затем используйте zmodem для сброса его на свой компьютер.</p></div><div class=sect2><h3 id=_мой_модем_stock_hayes_не_поддерживается_что_я_могу_сделать>22.5.1. Мой модем Stock Hayes не поддерживается, что я могу сделать?<a class=anchor href=#_мой_модем_stock_hayes_не_поддерживается_что_я_могу_сделать></a></h3><div class=paragraph><p>На самом деле, страница руководства для <code>tip</code> устарела. Встроенная поддержка generic Hayes уже есть. Используйте <code>at=hayes</code> в файле <span class=filename>/etc/remote</span>.</p></div><div class=paragraph><p>Драйвер Hayes не умеет работать с некоторыми расширенными возможностями более новых модемов - сообщения вроде <code>BUSY</code>, <code>NO DIALTONE</code>, или <code>CONNECT 115200</code>. Вы должны отключить эти сообщения при использовании <code>tip</code> (с помощью <code>ATX0&amp;W</code>).</p></div><div class=paragraph><p>Таймаут дозвона для <code>tip</code> составляет 60 секунд. Ваш модем должен использовать меньшее значение, или <code>tip</code> решит, что возникли проблемы со связью. Попробуйте <code>ATS7=45&amp;W</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Оригинальная <code>tip</code> не полностью поддерживает модемы Hayes. Решить это проблему можно отредактировав файл <span class=filename>tipconf.h</span> в каталоге <span class=filename>/usr/src/usr.bin/tip/tip</span>. Конечно, для этого вам потребуются исходные тексты.</p></div><div class=paragraph><p>Замените строку <code>#define HAYES 0</code> на <code>#define HAYES 1</code>. Затем выполните <code>make</code> и <code>make install</code>. После этого все должно работать отлично.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=direct-at>22.5.2. Как нужно выполнять команды AT?<a class=anchor href=#direct-at></a></h3><div class=paragraph><p>Сделайте то, что называется "прямой" записью в файле <span class=filename>/etc/remote</span>. Например, если модем подключен к первому последовательному порту, <span class=filename>/dev/cuad0</span>, добавьте следующую строку:</p></div><div class="literalblock programlisting"><div class=content><pre>cuad0:dv=/dev/cuad0:br#19200:pa=none</pre></div></div><div class=paragraph><p>Используйте для br наибольшее значение bps, поддерживаемое модемом. Для подключения к модему выполните <code>tip cuad0</code>.</p></div><div class=paragraph><p>Или используйте <code>cu</code> под <code>root</code> так:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cu -lline -sspeed</span></code></pre></div></div><div class=paragraph><p><em>line</em> это последовательный порт (например <span class=filename>/dev/cuad0</span>), а <em>speed</em> это скорость (например <code>57600</code>). После ввода команд AT наберите <kbd>~.</kbd> для выхода.</p></div></div><div class=sect2><h3 id=_знак_не_работает_для_pn>22.5.3. Знак <code>@</code> не работает для pn!<a class=anchor href=#_знак_не_работает_для_pn></a></h3><div class=paragraph><p>Знак <code>@</code> в телефонном номере указывает <code>tip</code> взять телефонный номер из <span class=filename>/etc/phones</span>. Но знак <code>@</code> это также специальный символ в таких файлах как <span class=filename>/etc/remote</span>. Экранируйте его с помощью обратной косой черты:</p></div><div class="literalblock programlisting"><div class=content><pre>pn=\@</pre></div></div></div><div class=sect2><h3 id=_как_я_могу_позвонить_по_телефонному_номеру_из_командной_строки>22.5.4. Как я могу позвонить по телефонному номеру из командной строки?<a class=anchor href=#_как_я_могу_позвонить_по_телефонному_номеру_из_командной_строки></a></h3><div class=paragraph><p>Поместите так называемую "generic" запись в файл <span class=filename>/etc/remote</span>. Например:</p></div><div class="literalblock programlisting"><div class=content><pre>tip115200|Dial any phone number at 115200 bps:\
        :dv=/dev/cuad0:br#115200:at=hayes:pa=none:du:
tip57600|Dial any phone number at 57600 bps:\
        :dv=/dev/cuad0:br#57600:at=hayes:pa=none:du:</pre></div></div><div class=paragraph><p>Затем вы можете сделать следующее:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tip -115200 5551234</span></code></pre></div></div><div class=paragraph><p>Если вы предпочитаете <code>cu</code> команде <code>tip</code>, используйте generic запись для <code>cu</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>cu115200|Use cu to dial any number at 115200bps:\
        :dv=/dev/cuad1:br#57600:at=hayes:pa=none:du:</pre></div></div><div class=paragraph><p>и выполните:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cu 5551234 -s 115200</span></code></pre></div></div></div><div class=sect2><h3 id=_должен_ли_я_вводить_значение_bps_каждый_раз>22.5.5. Должен ли я вводить значение bps каждый раз?<a class=anchor href=#_должен_ли_я_вводить_значение_bps_каждый_раз></a></h3><div class=paragraph><p>Создайте запись <code>tip1200</code> или <code>cu1200</code>, но используйте то значение bps, которое записано в поле br. <code>tip</code> считает, что хорошее значение по умолчанию это 1200 bps, поэтому обращается к записи <code>tip1200</code>. Тем не менее, значение bps будет другим.</p></div></div><div class=sect2><h3 id=_я_получаю_доступ_ко_множеству_хостов_через_терминальный_сервер>22.5.6. Я получаю доступ ко множеству хостов через терминальный сервер<a class=anchor href=#_я_получаю_доступ_ко_множеству_хостов_через_терминальный_сервер></a></h3><div class=paragraph><p>Вместо ожидания соединения и ввода каждый раз <code>CONNECT &lt;host></code>, используйте возможность <code>tip cm</code>. Вот пример записи в <span class=filename>/etc/remote</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>pain|pain.deep13.com|Forrester&#39;s machine:\
        :cm=CONNECT pain\n:tc=deep13:
muffin|muffin.deep13.com|Frank&#39;s machine:\
        :cm=CONNECT muffin\n:tc=deep13:
deep13:Gizmonics Institute terminal server:\
        :dv=/dev/cuad2:br#38400:at=hayes:du:pa=none:pn=5551234:</pre></div></div><div class=paragraph><p>Она позволит вам вводить <code>tip pain</code> или <code>tip muffin</code> для соединения с хостами pain или muffin, и <code>tip deep13</code> для доступа к терминальному серверу.</p></div></div><div class=sect2><h3 id=_может_ли_tip_соединяться_более_через_одну_линию_для_каждого_сайта>22.5.7. Может ли tip соединяться более через одну линию для каждого сайта?<a class=anchor href=#_может_ли_tip_соединяться_более_через_одну_линию_для_каждого_сайта></a></h3><div class=paragraph><p>Эта проблема часто возникает в университете, где несколько модемных линий и несколько тысяч студентов, пытающихся их использовать.</p></div><div class=paragraph><p>Создайте запись для университета в <span class=filename>/etc/remote</span> и используйте <code>@</code> для <code>pn</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>big-university:\
        :pn=\@:tc=dialout
dialout:\
        :dv=/dev/cuad3:br#9600:at=courier:du:pa=none:</pre></div></div><div class=paragraph><p>Затем, создайте список телефонов для университета в <span class=filename>/etc/phones</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>big-university 5551111
big-university 5551112
big-university 5551113
big-university 5551114</pre></div></div><div class=paragraph><p><code>tip</code> попробует связаться с каждым в указанном порядке, затем прекратит попытки. Если вы хотите продолжать соединяться, запустите <code>tip</code> в цикле.</p></div></div><div class=sect2><h3 id=_почему_я_должен_дважды_нажать_ctrlp_для_отправки_ctrlp_один_раз>22.5.8. Почему я должен дважды нажать <span class=keyseq><kbd>Ctrl</kbd>+<kbd>P</kbd></span> для отправки <span class=keyseq><kbd>Ctrl</kbd>+<kbd>P</kbd></span> один раз?<a class=anchor href=#_почему_я_должен_дважды_нажать_ctrlp_для_отправки_ctrlp_один_раз></a></h3><div class=paragraph><p><span class=keyseq><kbd>Ctrl</kbd>+<kbd>P</kbd></span> это "управляющий" символ по умолчанию, используемый для указания <code>tip</code> того, что далее идут символьные данные. Вы можете сделать любой другой символ управляющим с помощью экранирования <code>~s</code>, которое означает "установить переменную".</p></div><div class=paragraph><p>Введите <code>~sforce=<em>single-char</em></code>, завершив ввод новой строкой. <em>single-char</em> это любой одиночный символ. Если вы не введете <em>single-char</em>, управляющим символом станет nul, который можно получить, введя <span class=keyseq><kbd>Ctrl</kbd>+<kbd>2</kbd></span> или <span class=keyseq><kbd>Ctrl</kbd>+<kbd>Space</kbd></span>. Хорошее значение для <em>single-char</em> это <span class=keyseq><kbd>Shift</kbd>+<kbd>Ctrl</kbd>+<kbd>6</kbd></span>, которое используется только на некоторых терминальных серверах.</p></div><div class=paragraph><p>Вы можете использовать в качестве управляющего символа все, что захотите, поместив его в файл <span class=filename>$HOME/.tiprc</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>force=&lt;single-char&gt;</pre></div></div></div><div class=sect2><h3 id=_почему_все_что_я_ввожу_вдруг_стало_отображаться_в_верхнем_регистре>22.5.9. Почему все, что я ввожу, вдруг стало отображаться в верхнем регистре??<a class=anchor href=#_почему_все_что_я_ввожу_вдруг_стало_отображаться_в_верхнем_регистре></a></h3><div class=paragraph><p>Вы нажали <span class=keyseq><kbd>Ctrl</kbd>+<kbd>A</kbd></span>, "повышающий символ" <code>tip</code>, который был специально введен для тех, у кого не работает клавиша caps-lock. Используйте <code>~s</code> как в примере выше для установки переменной <code>raisechar</code> в подходящее значение. Фактически, вы можете установить ее в то же значение, что и управляющий символ, если не собираетесь использовать ни один из них.</p></div><div class=paragraph><p>Вот пример .tiprc, отлично подходящий для пользователей Emacs, которым часто требуется вводить <span class=keyseq><kbd>Ctrl</kbd>+<kbd>2</kbd></span> и <span class=keyseq><kbd>Ctrl</kbd>+<kbd>A</kbd></span>:</p></div><div class="literalblock programlisting"><div class=content><pre>force=^^
raisechar=^^</pre></div></div><div class=paragraph><p>Символ ^^ это <span class=keyseq><kbd>Shift</kbd>+<kbd>Ctrl</kbd>+<kbd>6</kbd></span>.</p></div></div><div class=sect2><h3 id=_могу_ли_я_передавать_файлы_с_помощью_tip>22.5.10. Могу ли я передавать файлы с помощью <code>tip</code>?<a class=anchor href=#_могу_ли_я_передавать_файлы_с_помощью_tip></a></h3><div class=paragraph><p>Если вы соединяетесь с другой системой UNIX®, возможны передача и прием файлов с помощью команды <code>~p</code> (put) и <code>~t</code> (take). Эти команды запускают <code>cat</code> и <code>echo</code> в удаленной системе для приема и передачи файлов. Синтаксис следующий:</p></div><div class=paragraph><p><code>~p</code> local-file [ remote-file ]</p></div><div class=paragraph><p><code>~t</code> remote-file [ local-file ]</p></div><div class=paragraph><p>Коррекции ошибок нет, поэтому возможно лучше использовать другой протокол, например zmodem.</p></div></div><div class=sect2><h3 id=_как_мне_запустить_zmodem_с_tip>22.5.11. Как мне запустить zmodem с <code>tip</code>?<a class=anchor href=#_как_мне_запустить_zmodem_с_tip></a></h3><div class=paragraph><p>Для получения файла запустите отправляющую программу на удаленной стороне. Затем, наберите <code>~C rz</code> для начала локального приема файла.</p></div><div class=paragraph><p>Для отправки файлов запустите принимающую программу на удаленной стороне. Затем, наберите <code>~C sz <em>файлы</em></code> для отправки их на удаленную систему.</p></div></div></div></div><div class=sect1><h2 id=serialconsole-setup>22.6. Настройка последовательной консоли<a class=anchor href=#serialconsole-setup></a></h2><div class=sectionbody><div class=sect2><h3 id=serialconsole-intro>22.6.1. Введение<a class=anchor href=#serialconsole-intro></a></h3><div class=paragraph><p>FreeBSD может загружаться при использовании в качестве консоли текстового терминала на последовательном порту. Такая конфигурация может быть полезна в двух случаях: для системных администраторов, устанавливающих FreeBSD на компьютеры без подключенных клавиатуры или монитора, и для разработчиков, производящих отладку ядра или драйверов устройств.</p></div><div class=paragraph><p>Как описано в <a href=../boot/#boot>Процесс загрузки FreeBSD</a>, процесс загрузки FreeBSD состоит из трех стадий. Первые две стадии реализованы в блоке загрузки, находящемся в начале слайса FreeBSD на загрузочном диске. На третей стадии загрузочный блок запускает загрузчик (<span class=filename>/boot/loader</span>).</p></div><div class=paragraph><p>Для настройки последовательной консоли вам потребуется настроить блок загрузки, загрузчик и ядро.</p></div></div><div class=sect2><h3 id=serialconsole-howto-fast>22.6.2. Настройка последовательной консоли, краткая версия<a class=anchor href=#serialconsole-howto-fast></a></h3><div class=paragraph><p>В этом разделе предполагается, что вы используете настройки по умолчанию и просто хотите увидеть краткий обзор настройки последовательной консоли.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Соедините кабелем последовательный порт COM1 и управляющий терминал.</p></li><li><p>Для того, чтобы сообщения в процессе загрузки выводились в последовательную консоль, выполните от имени суперпользователя команду</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#39;console=&#34;comconsole&#34;&#39; &gt;&gt; /boot/loader.conf</span></code></pre></div></div></li><li><p>Отредактируйте <span class=filename>/etc/ttys</span> и измените <code>off</code> на <code>on</code> и <code>dialup</code> на <code>vt100</code> для записи <code>ttyd0</code>. В противном случае для входа с последовательной консоли не будет требоваться пароль, что может являться проблемой с точки зрения безопасности.</p></li><li><p>Перезагрузите систему и убедитесь, что последовательная консоль активировалась.</p></li></ol></div></div></div><div class=paragraph><p>Если вам требуется иная конфигурация, обратитесь к более подробному описанию в разделе <a href=#serialconsole-howto>Настройка последовательной консоли</a>.</p></div></div><div class=sect2><h3 id=serialconsole-howto>22.6.3. Настройка последовательной консоли<a class=anchor href=#serialconsole-howto></a></h3><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Подготовьте кабель.</p><div class=paragraph><p>Вам потребуется нуль-модемный или стандартный последовательный кабель и нуль-модемный адаптер. Обратитесь к <a href=#serial-cables-ports>Кабели и порты</a>, где рассматриваются последовательные кабели.</p></div></li><li><p>Отключите клавиатуру.</p><div class=paragraph><p>Большинство систем PC тестируют клавиатуру во время включения (POST) и выдают ошибку если клавиатура не обнаружена. Некоторые системы при отсутствии клавиатуры выдают звуковой сигнал и не загружаются пока клавиатура не будет подключена.</p></div><div class=paragraph><p>Если компьютер сообщает об ошибке, но все же загружается, вам не потребуется делать что-то еще. (Некоторые компьютеры с Phoenix BIOS просто сообщают <code>Keyboard failed</code> и продолжают загрузку).</p></div><div class=paragraph><p>Если компьютер не загружается без клавиатуры, вам потребуется настроить BIOS так, чтобы отсутствие клавиатуры игнорировалось (если это возможно). Обратитесь к руководству по материнской плате за деталями о том, как это сделать.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Установите параметр клавиатуры в настройках BIOS в значение "Not installed". При этом вы сможете продолжать использовать клавиатуру. Все, что делает этот параметр - указывает BIOS не тестировать клавиатуру во время загрузки, поэтому ее отсутствие не вызывает ошибки. Вы можете оставить клавиатуру подключенной, даже если с флагом "Not installed", и она все еще будет работать.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Если в к системе подключена PS/2® мышь, отключите ее, как и клавиатуру. Мышь PS/2® использует часть оборудования совместно с клавиатурой, поэтому если оставить ее подключенной, тестирование клавиатуры может ошибочно выдать наличие последней. Например, система Gateway 2000 Pentium 90 MHz ведет себя именно так. К тому же, это не проблема, поскольку мышь без клавиатуры как правило не нужна.</p></div></td></tr></tbody></table></div></li><li><p>Подключите текстовый терминал к <span class=filename>COM1</span> (<span class=filename>sio0</span>).</p><div class=paragraph><p>Если у вас нет текстового терминала, используйте старый PC/XT с модемной программой, или последовательный порт на другом компьютере UNIX®. Если порта <span class=filename>COM1</span> (<span class=filename>sio0</span>) нет, подключите его. На данный момент нет способа использовать другой порт вместо <span class=filename>COM1</span> без перекомпиляции загрузочных блоков. Если вы уже используете <span class=filename>COM1</span> для подключения другого устройства, временно удалите это устройство установите новый загрузочный блок и ядро как только FreeBSD заработает. (Предполагается, что <span class=filename>COM1</span> будет доступен на файловом/вычислительном/терминальном сервере в любом случае; если вам действительно требуется <span class=filename>COM1</span> для чего-то другого (и вы не можете переключить это на <span class=filename>COM2</span> (<span class=filename>sio1</span>)), возможно не стоит беспокоиться об этом сейчас.)</p></div></li><li><p>Убедитесь, что в файле настройки ядра установлены соответствующие флаги для <span class=filename>COM1</span> (<span class=filename>sio0</span>).</p><div class=paragraph><p>Подходящие флаги такие:</p></div><div class=dlist><dl><dt class=hdlist1><code>0x10</code></dt><dd><p>Включает поддержку консоли для этого устройства. Если установлен этот флаг, другие игнорируются. На данный момент поддержка консоли может быть включена не более чем на одном устройстве; предпочтительно на первом (в соответствии с порядком в конфигурационном файле) с установкой этого флага. Эта опция сама по себе не сделает последовательный порт консолью. Установите следующий флаг или используйте опцию <code>-h</code>, описанную ниже, вместе с этим флагом.</p></dd><dt class=hdlist1><code>0x20</code></dt><dd><p>Включает поддержку консоли на устройстве (если нет другой консоли с более высоким приоритетом), независимо от наличия описываемой ниже опции <code>-h</code>. Флаг <code>0x20</code> должен использоваться вместе с флагом <code>0x10</code>.</p></dd><dt class=hdlist1><code>0x40</code></dt><dd><p>Резервирует это устройство (совместно с флагом <code>0x10</code>) и делает устройство недоступным для обычной работы. Вы не должны использовать этот флаг для устройства последовательного порта, которое будет использоваться в качестве последовательной консоли. Используйте этот флаг только если устройство предназначено для удаленной отладки ядра. Обратитесь к <a href=https://docs.freebsd.org/ru/books/developers-handbook/>Руководству для разработчиков</a> за дополнительной информацией по удаленной отладке.</p><div class=paragraph><p>Пример:</p></div><div class="literalblock programlisting"><div class=content><pre>device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre></div></div><div class=paragraph><p>Обратитесь к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> за подробностями.</p></div><div class=paragraph><p>Если флаги не были установлены, вам потребуется запустить UserConfig (на другой консоли) или пересобрать ядро.</p></div></dd></dl></div></li><li><p>Создайте <span class=filename>boot.config</span> в корневом каталоге раздела <code>a</code> на загрузочном диске.</p><div class=paragraph><p>Этот файл сообщит загрузочному блоку способ загрузки системы. Для активации последовательной консоли вам потребуется одна или несколько следующих опций - несколько опций могут быть указаны на одной строке:</p></div><div class=dlist><dl><dt class=hdlist1><code>-h</code></dt><dd><p>Переключает внутреннюю и последовательную консоль. Вы можете использовать ее для переключения устройств консоли. Например, при загрузке с внутренней (видео) консоли, вы можете использовать <code>-h</code> для запуска загрузчика и ядра с использованием последовательного порта в качестве устройства консоли. При загрузке с последовательной консоли, вы можете использовать опцию <code>-h</code> для указания загрузчику и ядру использовать в качестве консоли видео дисплей.</p></dd><dt class=hdlist1><code>-D</code></dt><dd><p>Переключает одно- и двухконсольную конфигурации. В одноконсольной конфигурации консоль может быть либо внутренней (видео дисплей), либо последовательным портом, в зависимости от состояния опции <code>-h</code>. В двухконсольной конфигурации и видео дисплей и последовательный порт станут консолями одновременно, независимо от состояния опции <code>-h</code>. Имейте ввиду, что конфигурация с двумя консолями работает только во время работы загрузочного блока. Как только управление переходит к загрузчику, остается только одна консоль, указанная опцией <code>-h</code>.</p></dd><dt class=hdlist1><code>-P</code></dt><dd><p>Указывает загрузочному блоку протестировать клавиатуру. Если клавиатура не найдена, автоматически устанавливаются параметры <code>-D</code> и <code>-h</code>.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>По причине ограничений на размер в существующей версии загрузочного блока, опция <code>-P</code> может протестировать только расширенные клавиатуры. Клавиатуры с менее чем 101 клавишами (и без клавиш F11 и F12) могут быть не обнаружены. Клавиатуры некоторых лэптопов могут быть не найдены из-за этого ограничения. Если это случилось, вы не сможете использовать опцию <code>-P</code>. К сожалению, не существует обходного пути решения этой проблемы.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Используйте или опцию <code>-P</code> для автоматического выбора консоли, или опцию <code>-h</code> для активации последовательной консоли.</p></div><div class=paragraph><p>Вы можете включить также другие опции, описанные в <a href="https://man.freebsd.org/cgi/man.cgi?query=boot&amp;sektion=8&amp;format=html">boot(8)</a>.</p></div><div class=paragraph><p>Опции, за исключением <code>-P</code>, будут переданы загрузчику (<span class=filename>/boot/loader</span>). Загрузчик определит будет ли консолью внутреннее видео устройство или последовательный порт, проверив только состояние опции <code>-h</code>. Это означает, что если вы включите в <span class=filename>/boot.config</span> опцию <code>-D</code>, но не <code>-h</code>, то сможете использовать консоль только во время работы загрузочного блока; загрузчик будет использовать внутреннее видео устройство в качестве консоли.</p></div></dd></dl></div></li><li><p>Загрузите компьютер.</p><div class=paragraph><p>Когда вы включите компьютер FreeBSD, загрузочный блок выведет содержимое <span class=filename>/boot.config</span> на консоль. Например:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>/boot.config: <span class=nt>-P</span>
Keyboard: no</code></pre></div></div><div class=paragraph><p>Вторая строка появится только если вы поместите <code>-P</code> в <span class=filename>/boot.config</span> и отражает наличие/отсутствие клавиатуры. Эти сообщения выводятся либо на последовательную, либо на внутреннюю консоль, или на обе, в зависимости от параметров в <span class=filename>/boot.config</span>.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Опции</th><th class="tableblock halign-left valign-top">Сообщения выводятся на</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>нет</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя консоль</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-h</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная консоль</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-D</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя консоли</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-Dh</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя консоли</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-P</code>, клавиатура присутствует</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя консоль</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-P</code>, клавиатура отсутствует</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная консоль</p></td></tr></tbody></table><div class=paragraph><p>После вывода вышеприведенных сообщений, происходит небольшая пауза перед тем, как запускается загрузчик и на консоли появляются следующие сообщения. В нормальной ситуации вам не потребуется прерывать загрузку в этот момент, но это можно сделать, чтобы убедиться, что все настроено правильно.</p></div><div class=paragraph><p>Нажмите на консоли любую клавишу кроме Enter для прерывания процесса загрузки. Загрузочный блок выдаст приглашение к дальнейшим действиям. Оно выглядит примерно так:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>&gt;&gt;</span> FreeBSD/i386 BOOT
Default: 0:ad<span class=o>(</span>0,a<span class=o>)</span>/boot/loader
boot:</code></pre></div></div><div class=paragraph><p>Убедитесь, что сообщение выше появилось на последовательной, внутренней консоли или на обеих, в зависимости от опций в <span class=filename>/boot.config</span>. Если сообщение появилось там, где должно было появиться, нажмите Enter для продолжения процесса загрузки.</p></div><div class=paragraph><p>Если вам нужна последовательная консоль, но на терминале не видно приглашения, это означает проблемы с настройками. Введите <code>-h</code> и нажмите Enter/Return (если это возможно) для указания загрузочному блоку (а также загрузчику и ядру) выбрать последовательный порт в качестве консоли. Когда система загрузится, проверьте настройки еще раз и определите, что было сделано неправильно.</p></div></li></ol></div></div></div><div class=paragraph><p>После запуска загрузчика и перехода в третью стадию процесса загрузки вы все еще можете переключиться между внутренней консолью и последовательной консолью путем установки соответствующих переменных окружения в загрузчике. Обращайтесь к разделу <a href=#serialconsole-loader>Изменение консоли из загрузчика</a>.</p></div></div><div class=sect2><h3 id=serialconsole-summary>22.6.4. Итоги<a class=anchor href=#serialconsole-summary></a></h3><div class=paragraph><p>Здесь приведены краткие итоги по различным настройкам, рассмотренным в этом разделе и выбираемым в соответствии с ними консолям.</p></div><div class=sect3><h4 id=_вариант_1_вы_устанавливаете_для_sio0_флаги_0x10>22.6.4.1. Вариант 1: вы устанавливаете для <span class=filename>sio0</span> флаги 0x10<a class=anchor href=#_вариант_1_вы_устанавливаете_для_sio0_флаги_0x10></a></h4><div class="literalblock programlisting"><div class=content><pre>device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre></div></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:25%><col style=width:25%><col style=width:25%><col style=width:25%><thead><tr><th class="tableblock halign-left valign-top">Параметры в /boot.config</th><th class="tableblock halign-left valign-top">Консоль для загрузочного блока</th><th class="tableblock halign-left valign-top">Консоль для загрузчика</th><th class="tableblock halign-left valign-top">Консоль для ядра</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>нет</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-h</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-D</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-Dh</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-P</code>, клавиатура присутствует</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-P</code>, клавиатура отсутствует</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr></tbody></table></div><div class=sect3><h4 id=_вариант_2_вы_устанавливаете_для_sio0_флаги_0x30>22.6.4.2. Вариант 2: вы устанавливаете для <span class=filename>sio0</span> флаги 0x30<a class=anchor href=#_вариант_2_вы_устанавливаете_для_sio0_флаги_0x30></a></h4><div class="literalblock programlisting"><div class=content><pre>device sio0 at isa? port IO_COM1 flags 0x30 irq 4</pre></div></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:25%><col style=width:25%><col style=width:25%><col style=width:25%><thead><tr><th class="tableblock halign-left valign-top">Параметры в /boot.config</th><th class="tableblock halign-left valign-top">Консоль для загрузочного блока</th><th class="tableblock halign-left valign-top">Консоль для загрузчика</th><th class="tableblock halign-left valign-top">Консоль для ядра</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>нет</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-h</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-D</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-Dh</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-P</code>, клавиатура присутствует</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-P</code>, клавиатура отсутствует</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная и внутренняя</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>последовательная</p></td></tr></tbody></table></div></div><div class=sect2><h3 id=serialconsole-tips>22.6.5. Приемы работы с последовательной консолью<a class=anchor href=#serialconsole-tips></a></h3><div class=sect3><h4 id=_установка_более_высокой_скорости_порта>22.6.5.1. Установка более высокой скорости порта<a class=anchor href=#_установка_более_высокой_скорости_порта></a></h4><div class=paragraph><p>По умолчанию, последовательный порт настроен так: 9600 бит/с, 8 бит, без четности, 1 стоп бит. Если вам необходимо изменить скорость, потребуется перекомпиляция как минимум загрузочных блоков. Добавьте следующую строку к <span class=filename>/etc/make.conf</span> и скомпилируйте новый загрузочный блок:</p></div><div class="literalblock programlisting"><div class=content><pre>BOOT_COMCONSOLE_SPEED=19200</pre></div></div><div class=paragraph><p>Обратитесь к <a href=#serialconsole-com2>Использование для консоли другого последовательного порта вместо <span class=filename>sio0</span></a> за подробными инструкциями по сборке и установке новых загрузочных блоков.</p></div><div class=paragraph><p>Если последовательная консоль настраивается не путем установки параметра <code>-h</code>, или последовательная консоль, используемая ядром, отличается от той, что используется загрузочным блоком, потребуется добавить следующие опции к файлу настройки ядра и собрать новое ядро:</p></div><div class="literalblock programlisting"><div class=content><pre>options CONSPEED=19200</pre></div></div></div><div class=sect3><h4 id=serialconsole-com2>22.6.5.2. Использование для консоли другого последовательного порта вместо <span class=filename>sio0</span><a class=anchor href=#serialconsole-com2></a></h4><div class=paragraph><p>Использование другого последовательного порта вместо <span class=filename>sio0</span> для консоли потребует кое-какой перекомпиляции. Если вы по каким-либо причинам хотите использовать другой последовательный порт, перекомпилируйте загрузочный блок, загрузчик и ядро согласно приведенной ниже инструкции.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Получите исходные тексты ядра (глава <a href=../cutting-edge/#updating-upgrading>Обновление системы и смена версии FreeBSD</a>)</p></li><li><p>Отредактируйте <span class=filename>/etc/make.conf</span> и установите <code>BOOT_COMCONSOLE_PORT</code> в соответствии с адресом порта, который вы хотите использовать (0x3F8, 0x2F8, 0x3E8 или 0x2E8). Могут быть использованы только устройства от <span class=filename>sio0</span> до <span class=filename>sio3</span> (от <span class=filename>COM1</span> до <span class=filename>COM4</span>); мультипортовые последовательные карты не будут работать. Установка прерываний не требуется.</p></li><li><p>Создайте файл настройки ядра и добавьте соответствующие флаги для порта, который планируется использовать. Например, если вы хотите использовать для консоли <span class=filename>sio1</span> (<span class=filename>COM2</span>):</p><div class="literalblock programlisting"><div class=content><pre>device sio1 at isa? port IO_COM2 flags 0x10 irq 3</pre></div></div><div class=paragraph><p>или</p></div><div class="literalblock programlisting"><div class=content><pre>device sio1 at isa? port IO_COM2 flags 0x30 irq 3</pre></div></div><div class=paragraph><p>Флаги для других последовательных устройств не устанавливайте.</p></div></li><li><p>Соберите и установите загрузочный блок и загрузчик:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /sys/boot</span>
<span class=c># make clean</span>
<span class=c># make</span>
<span class=c># make install</span></code></pre></div></div></li><li><p>Соберите и установите ядро.</p></li><li><p>Запишите загрузочный блок на загрузочный диск с помощью <a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> и загрузитесь с новым ядром.</p></li></ol></div></div></div></div><div class=sect3><h4 id=serialconsole-ddb>22.6.5.3. Вход в отладчик DDB с последовательной линии<a class=anchor href=#serialconsole-ddb></a></h4><div class=paragraph><p>Если вы хотите войти в отладчик ядра с последовательной консоли (полезно для удаленной диагностики, но опасно если вы введете неправильный BREAK на последовательном порту!), потребуется собрать ядро со следующими параметрами:</p></div><div class="literalblock programlisting"><div class=content><pre>options BREAK_TO_DEBUGGER
options DDB</pre></div></div></div><div class=sect3><h4 id=_получение_приглашения_на_последовательной_консоли>22.6.5.4. Получение приглашения на последовательной консоли<a class=anchor href=#_получение_приглашения_на_последовательной_консоли></a></h4><div class=paragraph><p>Хотя это не обязательно, вам может потребоваться приглашение <em>login</em> по последовательной линии, в дополнение к уже доступным загрузочным сообщениям и отладочной сессии ядра. Здесь описано как сделать это.</p></div><div class=paragraph><p>Откройте файл <span class=filename>/etc/ttys</span> с помощью редактора и найдите строки:</p></div><div class="literalblock programlisting"><div class=content><pre>ttyd0 &#34;/usr/libexec/getty std.9600&#34; unknown off secure
ttyd1 &#34;/usr/libexec/getty std.9600&#34; unknown off secure
ttyd2 &#34;/usr/libexec/getty std.9600&#34; unknown off secure
ttyd3 &#34;/usr/libexec/getty std.9600&#34; unknown off secure</pre></div></div><div class=paragraph><p>Строки от <code>ttyd0</code> до <code>ttyd3</code> соответствуют портам от <span class=filename>COM1</span> до <span class=filename>COM4</span>. Измените <code>off</code> на <code>on</code> для требуемого порта. Если вы изменили скорость последовательного порта, может потребоваться изменить <code>std.9600</code> для соответствия текущим настройкам, например <code>std.19200</code>.</p></div><div class=paragraph><p>Возможно, вы захотите заменить тип терминала <code>unknown</code> на тип реально используемого терминала.</p></div><div class=paragraph><p>После редактирования файла потребуется выполнить <code>kill -HUP 1</code> для включения новых настроек.</p></div></div></div><div class=sect2><h3 id=serialconsole-loader>22.6.6. Изменение консоли из загрузчика<a class=anchor href=#serialconsole-loader></a></h3><div class=paragraph><p>Предыдущий раздел описывает настройку последовательной консоли изменением параметров загрузочного блока. Этот раздел показывает, как указать консоль, вводя команды и переменные окружения для загрузчика. Поскольку загрузчик загружается после загрузочного блока, на третьей стадии загрузочного процесса, настройки загрузчика превалируют над настройками загрузочного блока.</p></div><div class=sect3><h4 id=_настройка_последовательной_консоли>22.6.6.1. Настройка последовательной консоли<a class=anchor href=#_настройка_последовательной_консоли></a></h4><div class=paragraph><p>Вы можете прямо указать загрузчику и ядру использовать последовательную консоль, записав одну строку в <span class=filename>/boot/loader.rc</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>set console=&#34;comconsole&#34;</pre></div></div><div class=paragraph><p>Это сработает независимо от настроек загрузочного блока, рассмотренных в предыдущем разделе.</p></div><div class=paragraph><p>Поместите эту строку в самое начало <span class=filename>/boot/loader.rc</span>, чтобы увидеть на последовательной консоли все загрузочные сообщения.</p></div><div class=paragraph><p>Вы можете также указать внутреннюю консоль:</p></div><div class="literalblock programlisting"><div class=content><pre>set console=&#34;vidconsole&#34;</pre></div></div><div class=paragraph><p>Если вы не установите переменную загрузчика <code>console</code>, загрузчик, а затем и ядро будут использовать ту консоль, которая установлена параметром <code>-h</code> для загрузочного блока.</p></div><div class=paragraph><p>В версиях 3.2 или выше, вы можете указать консоль в <span class=filename>/boot/loader.conf.local</span> или <span class=filename>/boot/loader.conf</span> вместо <span class=filename>/boot/loader.rc</span>. С этим методом <span class=filename>/boot/loader.rc</span> должен выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>include /boot/loader.4th
start</pre></div></div><div class=paragraph><p>Затем, создайте <span class=filename>/boot/loader.conf.local</span> и поместите туда следующую строку.</p></div><div class="literalblock programlisting"><div class=content><pre>console=comconsole</pre></div></div><div class=paragraph><p>или</p></div><div class="literalblock programlisting"><div class=content><pre>console=vidconsole</pre></div></div><div class=paragraph><p>Обращайтесь к <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a> за дополнительной информацией.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>На данный момент у загрузчика нет параметра, эквивалентного параметру <code>-P</code> загрузочного блока и нет способа автоматического выбора внутренней и последовательной консоли в зависимости от наличия клавиатуры.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_использование_для_консоли_отличного_от_sio0_последовательного_порта>22.6.6.2. Использование для консоли отличного от <span class=filename>sio0</span> последовательного порта<a class=anchor href=#_использование_для_консоли_отличного_от_sio0_последовательного_порта></a></h4><div class=paragraph><p>Вам потребуется перекомпилировать загрузчик для использования отличного от <span class=filename>sio0</span> последовательного порта в качестве консоли. Следуйте процедуре, описанной в разделе <a href=#serialconsole-com2>Использование для консоли другого последовательного порта вместо <span class=filename>sio0</span></a>.</p></div></div></div><div class=sect2><h3 id=serialconsole-caveats>22.6.7. Предостережения<a class=anchor href=#serialconsole-caveats></a></h3><div class=paragraph><p>Идея в том, чтобы настроить выделенный сервер, который не требует графического оборудования или подсоединенной клавиатуры. К сожалению, хотя многие системы способны загрузиться без клавиатуры, есть совсем немного систем, способных загрузиться без графического адаптера. Компьютеры с AMI BIOS могут быть настроены для загрузки без графического адаптера простой установкой параметра настройки CMOS "graphics adapter" в значение "Not installed".</p></div><div class=paragraph><p>Однако, многие компьютеры не поддерживают этот параметр и не смогут загрузиться без графического оборудования. Для этих компьютеров вам потребуется оставить подключенной любую графическую карту (даже если это просто старая моно карта), хотя монитор и не подключен.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Изменено</strong>: 9 марта 2024 г. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Назад></i><div class=container><a href=https://docs.freebsd.org/ru/books/handbook/partiv class=direction>Назад</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Главная></i><div class=container><a href=../ class=direction>Главная</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip class=direction>Далее</a></div><i class="fa fa-angle-right" aria-hidden=true title=Далее></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#serial-synopsis>22.1. Краткое описание</a></li><li><a href=#serial>22.2. Введение</a></li><li><a href=#term>22.3. Терминалы</a></li><li><a href=#dialup>22.4. Входящие соединения по модему</a></li><li><a href=#dialout>22.5. Исходящие соединения по модему</a></li><li><a href=#serialconsole-setup>22.6. Настройка последовательной консоли</a></li></ul></nav><hr><div class=resources><h3>Материалы</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Скачать PDF"></i><a href=https://download.freebsd.org/doc/ru/books/handbook/handbook_ru.pdf>Скачать PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Редактировать эту страницу"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ru/_index target=_blank>Редактировать эту страницу</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/ru/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Выберите язык">
<span>Русский</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Система</option><option value=theme-light>Светлый</option><option value=theme-dark>Тёмный</option><option value=theme-high-contrast>Высокая контрастность</option></select></div></div></section><section class=about-column><h3 class=column-title>О нас</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Кодекс Этики</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Бюллетени Безопасности</a></li></ul></section><section class=documentation-column><h3 class=column-title>Документация</h3><ul class=column-elements-container><li><a href=/ru class=column-element>Портал документации</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Презентации и публикации</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Предыдущие версии</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>Документы 4.4BSD</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Сообщество</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/ru/articles/contributing class=column-element>Принять участие</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Форум Сообщества</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Трекер ошибок</a></li></ul></section><section class=legal-column><h3 class=column-title>Юридическая информация</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Пожертвования</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Лицензирование</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Политика Конфиденциальности</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Юридические оговорки</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 Проект FreeBSD. Все права защищены</p><span>Сделано с помощью <span class=heart>♥</span> Сообществом FreeBSD</span></section></div></footer></body></html>