<!doctype html><html class=theme-light lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/ru/books/handbook/mac/><title>Глава 15. Принудительный контроль доступа (MAC) | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Глава 15. Принудительный контроль доступа (MAC)"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ru"><meta property="og:url" content="https://docs.freebsd.org/ru/books/handbook/mac/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/ru\/books\/handbook\/mac\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>О нас
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>О нас</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Кодекс Этики</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Получить FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Информация о релизах</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Подготовка релизов</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Бюллетени Безопасности</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Документация
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ru>Портал документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook>Руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook>Руководство по созданию портов</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Учебник Проекта Документирования</a></li><li><a href=https://man.FreeBSD.org target=_blank>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Презентации и публикации</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/ru/books>Книги</a></li><li><a href=https://docs.freebsd.org/ru/articles>Статьи</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Сообщество
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Сообщество</a></li><li><a href=https://docs.freebsd.org/ru/articles/contributing>Стать участником</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Форум</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Трекер ошибок</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Поддержка</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ru>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Пожертвования</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Поиск aria-label=Поиск maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/preface/>Предисловие</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-audience>Целевая аудитория</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from4>Четвёртое издание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from3>Третье издание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from2>Второе издание (2004)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes>Первое издание (2001)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-overview>Структура этой книги</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-conv>Договоренности, используемые в этой книге</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-acknowledgements>Благодарности</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/parti/>Часть I. В начале</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/introduction/>Глава 1. Введение</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#introduction-synopsis>1.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#nutshell>1.2. Добро пожаловать во FreeBSD!</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#history>1.3. О Проекте FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/install/>Глава 2. Установка FreeBSD версий 8.X и более ранних</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-synopsis>2.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-hardware>2.2. Аппаратные требования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-pre>2.3. Перед установкой</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-start>2.4. Начало установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#using-sysinstall>2.5. Введение в Sysinstall</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-steps>2.6. Выделение дискового пространства</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-choosing>2.7. Выбор устанавливаемых компонентов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-media>2.8. Выбор источника для установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-final-warning>2.9. Подтверждение установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-post>2.10. После установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-trouble>2.11. Решение проблем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-advanced>2.12. Расширенное руководство по установке</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-diff-media>2.13. Подготовка собственного источника установки</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/>Глава 3. Установка FreeBSD версий 9.X и более поздних</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-synopsis>3.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-hardware>3.2. Аппаратные требования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-pre>3.3. Перед установкой</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-start>3.4. Начало установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#using-bsdinstall>3.5. Введение в bsdinstall</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-netinstall>3.6. Установка по сети</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-partitioning>3.7. Выделение дискового пространства</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-final-warning>3.8. Завершение установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-post>3.9. После установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-install-trouble>3.10. Решение проблем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#using-live-cd>3.11. Использование Live CD</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/basics/>Глава 4. Основы UNIX</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-synopsis>4.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#consoles>4.2. Виртуальные консоли и терминалы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#users-synopsis>4.3. Пользователи и основы управления учетными записями</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#permissions>4.4. Права доступа</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#dirstructure>4.5. Структура каталогов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#disk-organization>4.6. Организация дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#mount-unmount>4.7. Монтирование и размонтирование файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-processes>4.8. Процессы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-daemons>4.9. Даемоны, сигналы, уничтожение процессов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#shells>4.10. Интерпретатор команд</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#editors>4.11. Текстовые редакторы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-devices>4.12. Устройства и файлы устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#binary-formats>4.13. Бинарные форматы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-more-information>4.14. Дополнительная информация</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/ports/>Глава 5. Установка приложений: порты и пакеты</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-synopsis>5.1. Обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-overview>5.2. Обзор установки программного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-finding-applications>5.3. Поиск программного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#packages-using>5.4. Использование бинарных пакетов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#pkgng-intro>5.5. Использование pkgng для управления бинарными пакетами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-using>5.6. Использование Коллекции Портов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-nextsteps>5.7. Действия после установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-broken>5.8. Обработка нерабочих портов</a></li></ul></li><li><input type=checkbox id=chapter-f56428b9e0d0b77cc8e863910f96bbde class=toggle>
<label class="icon cursor" for=chapter-f56428b9e0d0b77cc8e863910f96bbde><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/wayland/>Глава 6. Wayland</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-synopsis>6.1. Общие сведения о Wayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-wayfire>6.2. Композитный менеджер Wayfire</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-hikari>6.3. Композитный менеджер Hikari</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-sway>6.4. Композитный менеджер Sway</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-xwayland>6.5. Использование Xwayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-remotedesktop>6.6. Организация Удалённого Рабочего Стола при помощи VNC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-ly>6.7. Менеджер регистраций Wayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-utilities>6.8. Полезные Инструменты</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/x11/>Глава 6. X Window System</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x11-synopsis>6.1. Обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-understanding>6.2. Основы X</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-install>6.3. Установка X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-config>6.4. Конфигурация X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-fonts>6.5. Использование шрифтов в X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-xdm>6.6. Менеджеры экранов (Display Managers) X</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x11-wm>6.7. Графические оболочки</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partii/>Часть II. Общие задачи</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/desktop/>Глава 7. Приложения для настольного компьютера</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-synopsis>7.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-browsers>7.2. Браузеры</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-productivity>7.3. Бизнес приложения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-viewers>7.4. Программы просмотра документов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-finance>7.5. Финансовые программы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-summary>7.6. Итоги</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/>Глава 8. Мультимедиа</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#multimedia-synopsis>8.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#sound-setup>8.2. Настройка звуковой карты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#sound-mp3>8.3. Звук MP3</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#video-playback>8.4. Воспроизведение видео</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#tvcard>8.5. Настройка ТВ тюнеров</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#scanners>8.6. Сканеры</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/>Глава 9. Настройка ядра FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Зачем собирать собственное ядро?</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-devices>9.3. Определение аппаратного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Драйвера, подсистемы и модули ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-building>9.5. Сборка и установка собственного ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-config>9.6. Конфигурационный файл</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Решение проблем</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/printing/>Глава 10. Печать</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-synopsis>10.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-intro-spooler>10.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-intro-setup>10.3. Основная настройка</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-advanced>10.4. Расширенная настройка принтера</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-using>10.5. Использование принтеров</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-lpd-alternatives>10.6. Альтернативы стандартному спулеру</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-troubleshooting>10.7. Выявление проблем</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/>Глава 11. Двоичная совместимость с Linux</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Установка</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Установка Mathematica®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-maple>11.4. Установка Maple™</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-matlab>11.5. Установка MATLAB®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-oracle>11.6. Установка Oracle®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#sapr3>11.7. Установка SAP® R/3®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-advanced>11.8. Дополнительные сведения</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partiii/>Часть III. Системное администрирование</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/config/>Глава 12. Настройка и оптимизация</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#config-synopsis>12.1. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-initial>12.2. Начальное конфигурирование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-core-configuration>12.3. Основные настройки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-appconfig>12.4. Настройка приложений</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-starting-services>12.5. Запуск сервисов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-cron>12.6. Настройка утилиты <code>cron</code></a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-rcd>12.7. Использование rc во FreeBSD 5.X и последующих версиях</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#config-network-setup>12.8. Настройка карт сетевых интерфейсов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-virtual-hosts>12.9. Настройка виртуальных серверов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-configfiles>12.10. Файлы настройки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-sysctl>12.11. Настройка с помощью sysctl</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-disk>12.12. Оптимизация дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-kernel-limits>12.13. Изменение ограничений, накладываемых ядром</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#adding-swap-space>12.14. Увеличение объема подкачки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#acpi-overview>12.15. Управление питанием и ресурсами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#ACPI-debug>12.16. Использование и отладка FreeBSD ACPI</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/boot/>Глава 13. Процесс загрузки FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-synopsis>13.1. Описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-introduction>13.2. Проблема загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-blocks>13.3. Менеджер загрузки и этапы загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-kernel>13.4. Взаимодействие с ядром во время загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#device-hints>13.5. Хинты устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-init>13.6. Init: инициализация управления процессами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-shutdown>13.7. Процесс остановки системы</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/security/>Глава 14. Безопасность</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-synopsis>14.1. Краткое описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-intro>14.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#securing-freebsd>14.3. Защита FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#crypt>14.4. DES, MD5, и шифрование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#one-time-passwords>14.5. Одноразовые пароли</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#tcpwrappers>14.6. TCP Wrappers</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#ipsec>14.10. VPN через IPsec</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#fs-acl>14.12. Списки контроля доступа файловой системы (ACL)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-portaudit>14.13. Мониторинг вопросов безопасности в ПО сторонних разработчиков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-advisories>14.14. Сообщения безопасности FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-accounting>14.15. Учёт используемых ресурсов</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle checked>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mac/>Глава 15. Принудительный контроль доступа (MAC)</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-synopsis>15.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-inline-glossary>15.2. Ключевые термины этой главы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-initial>15.3. Описание MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-understandlabel>15.4. Метки MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-modules>15.5. Настройка модулей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-bsdextended>15.6. Модуль MAC bsdextended</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-ifoff>15.7. Модуль MAC ifoff</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-portacl>15.8. Модуль MAC portacl</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-labelingpolicies>15.9. Политики MAC, использующие метки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-partition>15.10. Модуль MAC partition</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-mls>15.11. Модуль многоуровневой безопасности MAC (MLS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-biba>15.12. Модуль MAC Biba</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-lomac>15.13. Модуль MAC LOMAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-implementing>15.14. Реализация защищенной среды с MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#MAC-examplehttpd>15.15. Другой пример: Использование MAC для защиты веб сервера</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-troubleshoot>15.16. Решение проблем с инфраструктурой MAC</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/audit/>Глава 16. Аудит событий безопасности</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-synopsis>16.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-inline-glossary>16.2. Ключевые понятия</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-config>16.3. Настройка системы аудита</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-administration>16.4. Работа с журналами аудита</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/disks/>Глава 17. Устройства хранения</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-synopsis>17.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-naming>17.2. Имена устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-adding>17.3. Добавление дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#raid>17.4. RAID</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#usb-disks>17.5. USB устройства хранения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#creating-cds>17.6. Запись и использование оптических носителей (CD)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#creating-dvds>17.7. Создание и использование оптических носителей (DVD)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#floppies>17.8. Дискеты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backups-tapebackups>17.9. Создание и использование архивных копий на магнитной ленте</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backups-floppybackups>17.10. Создание резервных копий на дискетах</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backup-strategies>17.11. Стратегии резервного копирования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backup-basics>17.12. Основы технологии резервного копирования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-virtual>17.13. Сетевые файловые системы, файловые системы в памяти и с отображением в файл</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#snapshots>17.14. Мгновенные копии файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#quotas>17.15. Квотирование файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-encrypting>17.16. Шифрование дисковых разделов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#swap-encrypting>17.17. Шифрование области подкачки</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/geom/>Глава 18. GEOM: Модульная инфраструктура преобразования дисковых запросов</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-synopsis>18.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-intro>18.2. Введение в GEOM</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-striping>18.3. RAID0 - Создание дисковой последовательности (Striping)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-mirror>18.4. RAID1 - Зеркалирование (Mirroring)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-ggate>18.5. Сетевые устройства GEOM Gate</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-glabel>18.6. Метки дисковых устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-gjournal>18.7. Журналирование UFS средствами GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/>Глава 19. Поддержка файловых систем</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/#filesystems-synopsis>19.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/#filesystems-zfs>19.2. Файловая система ZFS</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/l10n/>Глава 20. Локализация - использование и настройка i18n/L10n</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#l10n-synopsis>20.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#using-localization>20.2. Использование локализации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#l10n-compiling>20.3. Поиск приложений i18n</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#lang-setup>20.4. Настройка локализации для некоторых языков</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/>Глава 21. Обновление системы и смена версии FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-synopsis>21.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>21.2. Обновление FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-documentation>21.3. Обновление документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#current-stable>21.4. Использование ветви разработки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#synching>21.5. Синхронизация исходных текстов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#makeworld>21.6. Пересборка мира</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#small-lan>21.7. Отслеживание исходных текстов для нескольких машин</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partiv/>Часть IV. Сетевые коммуникации</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/>Глава 22. Последовательные соединения</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serial-synopsis>22.1. Краткое описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serial>22.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#term>22.3. Терминалы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#dialup>22.4. Входящие соединения по модему</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#dialout>22.5. Исходящие соединения по модему</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serialconsole-setup>22.6. Настройка последовательной консоли</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/>Глава 23. PPP и SLIP</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>23.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#userppp>23.2. PPP уровня пользователя</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp>23.3. PPP уровня ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp-troubleshoot>23.4. Решение проблем с соединениями PPP</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#pppoe>23.5. Использование PPP через Ethernet (PPPoE)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#pppoa>23.6. Использование PPP через ATM (PPPoA)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#slip>23.7. Использование SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mail/>Глава 24. Электронная почта</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-synopsis>24.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-using>24.2. Использование электронной почты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#sendmail>24.3. Настройка sendmail</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-changingmta>24.4. Установка другой почтовой программы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-trouble>24.5. Поиск и устранение неисправностей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-advanced>24.6. Расширенное руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#outgoing-only>24.7. Настройка почты только для отправки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#SMTP-dialup>24.8. Использование почты с коммутируемым соединением</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#SMTP-Auth>24.9. SMTP аутентификация</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-agents>24.10. Почтовые программы пользователей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-fetchmail>24.11. Использование fetchmail</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-procmail>24.12. Использование procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/>Глава 25. Сетевые серверы</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-servers-synopsis>25.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-inetd>25.2. "Супер-сервер"inetd</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-nfs>25.3. Network File System (NFS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-nis>25.4. Network Information System (NIS/YP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-dhcp>25.5. Автоматическая настройка сети (DHCP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-dns>25.6. Domain Name System (DNS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-apache>25.7. Apache HTTP сервер</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-samba>25.8. Файл сервер и печать для Microsoft® Windows® клиентов (Samba)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-ftp>25.9. Протокол передачи файлов (FTP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-ntp>25.10. Синхронизация часов через NTP</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-syslogd>25.11. * Remote Host Logging with <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/>Глава 26. Межсетевые экраны</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-intro>26.1. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-concepts>26.2. Принципы работы межсетевых экранов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-apps>26.3. Пакеты межсетевых экранов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-pf>26.4. Packet Filter (PF, межсетевой экран OpenBSD) и ALTQ</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-ipf>26.5. * IPFILTER (IPF)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-ipfw>26.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/>Глава 27. Сложные вопросы работы в сети</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#advanced-networking-synopsis>27.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-routing>27.2. Сетевые шлюзы и маршруты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-wireless>27.3. Беспроводные сети</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-bluetooth>27.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-bridging>27.5. Мосты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-diskless>27.6. Работа с бездисковыми станциями</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-isdn>27.7. ISDN</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-natd>27.8. Даемон преобразования сетевых адресов (natd)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-plip>27.9. IP по параллельному порту (PLIP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-ipv6>27.10. IPv6</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-atm>27.11. Асинхронный режим передачи (ATM)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partv/>Часть V. Приложения</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/>Приложение A. Получение FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-cdrom>A.1. Наборы CD и DVD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-ftp>A.2. FTP сайты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#ctm>A.3. Использование CTM</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#svn>A.4. Использование Subversion</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-rsync>A.5. Использование rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/>Приложение B. Библиография</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-freebsd>B.1. Книги и журналы, специализирующиеся на FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-userguides>B.2. Руководства для пользователей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-adminguides>B.3. Руководства для администраторов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-programmers>B.4. Руководства для программистов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-osinternals>B.5. Внутренности операционной системы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-security>B.6. Безопасность</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-hardware>B.7. Оборудование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-history>B.8. История UNIX®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-journals>B.9. Прочие издания</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/eresources/>Приложение C. Ресурсы в интернет</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-mail>C.1. Списки рассылки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-news>C.2. Новостные группы Usenet</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-web>C.3. Серверы World Wide Web</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-email>C.4. Адреса Email</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/pgpkeys/>Приложение D. PGP ключи</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Офицеры</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Меню книг"></i>
Меню книг</span></label></div><h1 class=title>Глава 15. Принудительный контроль доступа (MAC)</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Этот перевод может быть устаревшим. Для того, чтобы помочь с переводом, пожалуйста, обратитесь к <a href=https://translate-dev.freebsd.org/ target=_blank>Сервер переводов FreeBSD</a>.</p></div><div class=toc-mobile><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#mac-synopsis>15.1. Краткий обзор</a></li><li><a href=#mac-inline-glossary>15.2. Ключевые термины этой главы</a></li><li><a href=#mac-initial>15.3. Описание MAC</a></li><li><a href=#mac-understandlabel>15.4. Метки MAC</a></li><li><a href=#mac-modules>15.5. Настройка модулей</a></li><li><a href=#mac-bsdextended>15.6. Модуль MAC bsdextended</a></li><li><a href=#mac-ifoff>15.7. Модуль MAC ifoff</a></li><li><a href=#mac-portacl>15.8. Модуль MAC portacl</a></li><li><a href=#mac-labelingpolicies>15.9. Политики MAC, использующие метки</a></li><li><a href=#mac-partition>15.10. Модуль MAC partition</a></li><li><a href=#mac-mls>15.11. Модуль многоуровневой безопасности MAC (MLS)</a></li><li><a href=#mac-biba>15.12. Модуль MAC Biba</a></li><li><a href=#mac-lomac>15.13. Модуль MAC LOMAC</a></li><li><a href=#mac-implementing>15.14. Реализация защищенной среды с MAC</a></li><li><a href=#MAC-examplehttpd>15.15. Другой пример: Использование MAC для защиты веб сервера</a></li><li><a href=#mac-troubleshoot>15.16. Решение проблем с инфраструктурой MAC</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=mac-synopsis>15.1. Краткий обзор<a class=anchor href=#mac-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD 5.X представляет новые расширения системы безопасности от проекта TrustedBSD, основанные на документах POSIX®.1e. Два из наиболее важных нововведений в механизмах безопасности это списки контроля доступа файловой системы (Access Control Lists, ACLs) и принудительный контроль доступа Mandatory Access Control, MAC). Инфраструктура позволяет загружать новые модули контроля доступа, реализуя новые политики безопасности. Некоторые из них предоставляют защиту ключевых подсистем, защищая определенный сервис, в то время как другие предоставляют исчерпывающую систему безопасности с метками на всех субъектах и объектах. Контроль называется принудительным, поскольку применение контроля производится администраторами и системой, и не зависит от решения пользователей, как это происходит при обычном контроле доступа (Discretionary Access Control, DAC, стандартные файловые и System V IPC права в FreeBSD).</p></div><div class=paragraph><p>Вся эта глава фокусируется на инфраструктуре принудительного контроля доступа и настройке подключаемых модулей, реализующих различные политики безопасности.</p></div><div class=paragraph><p>После прочтения этой главы вы узнаете:</p></div><div class=ulist><ul><li><p>Какие модули MAC включены в настоящее время в FreeBSD, какие политики с ними связаны.</p></li><li><p>Что способны реализовать политики MAC, различие между политиками с метками (label) и без меток.</p></li><li><p>Как эффективно настроить систему для использования инфраструктуры MAC.</p></li><li><p>Как настроить различные политики, используемые модулями MAC.</p></li><li><p>Как реализовать более защищенную среду, используя инфраструктуру MAC и приведенные примеры.</p></li><li><p>Как протестировать настройку MAC, чтобы убедиться, что инфраструктура была реализована правильно.</p></li></ul></div><div class=paragraph><p>Перед прочтением этой главы вам потребуется:</p></div><div class=ulist><ul><li><p>Понимание основ UNIX® и FreeBSD (<a href=../basics/#basics>Основы UNIX</a>).</p></li><li><p>Ознакомиться с основами настройки/компилирования ядра (<a href=../kernelconfig/#kernelconfig>Настройка ядра FreeBSD</a>).</p></li><li><p>Иметь некоторые понятия о безопасности и как она относится к FreeBSD (<a href=../security/#security>Безопасность</a>).</p></li></ul></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Неправильное использование информации этой главы может вызвать потерю доступа к системе, проблемы у пользователей, или невозможность запуска XFree86™. Что более важно, MAC не должен восприниматься как полная защита системы. Инфраструктура MAC лишь усиливает имеющуюся систему безопасности: без применения методов защиты и регулярных проверок, система никогда не станет полностью защищенной.</p></div><div class=paragraph><p>Необходимо также учесть, что примеры, приведенные в этой главе, это всего лишь примеры. Не рекомендуется дублирование этих настроек для реальных задач. Реализация политик безопасности требует вдумчивого планирования. Тот, кто не понял полностью как все это на самом деле работает, может столкнуться с необходимостью повторной полной перенастройки системы безопасности для многих файлов и каталогов.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=_что_не_будет_затронуто>15.1.1. Что не будет затронуто<a class=anchor href=#_что_не_будет_затронуто></a></h3><div class=paragraph><p>В этой главе охвачен широкий спектр вопросов безопасности, относящихся к инфраструктуре MAC. однако разработка политик MAC не будет затронута. Несколько модулей, включенных в инфраструктуру MAC, имеют особые характеристики, которые предназначены для тестирования и разработки новых модулей. Это относится к модулям/политикам <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_test&amp;sektion=4&amp;format=html">mac_test(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_stub&amp;sektion=4&amp;format=html">mac_stub(4)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_none&amp;sektion=4&amp;format=html">mac_none(4)</a>. За дальнейшей информацией по этим модулям и различным предоставляемым ими механизмам, обратитесь к соответствующим страницам справочника.</p></div></div></div></div><div class=sect1><h2 id=mac-inline-glossary>15.2. Ключевые термины этой главы<a class=anchor href=#mac-inline-glossary></a></h2><div class=sectionbody><div class=paragraph><p>Перед чтением этой главы необходимо ознакомиться с некоторыми ключевыми терминами. Это возможно разрешит возникающие вопросы и предотвратит перегрузку материала новыми терминами и информацией.</p></div><div class=ulist><ul><li><p><em>отдел</em> (compartment): Отдел это набор программ и данных, которые необходимо отделить, и где пользователи получают явный доступ к отдельным компонентам системы. Отдел представляет группирование, например рабочую группу, департамент, проект или тему. С использованием отделов возможна реализация политики с явно определенным доступом.</p></li><li><p><em>целостность</em> (integrity): Целостность, как ключевая концепция, это уровень доверия, который может быть присвоен данным. Поскольку целостность данных повышается, это дает возможность доверять данным.</p></li><li><p><em>метка</em> (label): Метка является инструментом безопасности, она может быть применена к файлам, каталогам и другим сущностям системы. Ее можно представить как штамп конфиденциальности; метка, помещенная на файл, описывает уровень секретности данного файла и разрешит доступ только файлам, пользователям, ресурсам и т.д. с теми же или меньшими установками безопасности. Некоторые из политик могут обрабатывать метки различными способами; это будет обсуждаться в разделе политик ниже.</p></li><li><p><em>multilabel</em> (множественные метки): свойство <code>multilabel</code> это параметр файловой системы, который может быть установлен в однопользовательском режиме с помощью утилиты <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a>, во время загрузки через файл <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a>, или при создании новой файловой системы. Этот параметр позволяет администратору помещать различные метки MAC на различные объекты. разрешает помещение множественных MAC меток на файлы и каталоги файловой системы. Этот параметр применим только к политикам с метками.</p></li><li><p><em>объект</em> (object): Объект или системный объект это сущность, через которую информация проходит к <em>субъекту</em>. Это могут быть каталоги, файлы, поля, экраны, клавиатуры, память, магнитные накопители, принтеры или любые другие устройства хранения/перемещения данных. В сущности это контейнер данных или ресурс системы; доступ к <em>объекту</em> фактически означает доступ к данным.</p></li><li><p><em>политика</em> (policy): Набор правил, определяющих как достичь объекта. <em>Политика</em> обычно документирует обращение с определенными элементами. В этой главе <em>политика</em> будет означать <em>политику безопасности</em>; т.е. коллекцию правил, которые будут контролировать поток данных и определять кто будет иметь доступ к этим данным.</p></li><li><p><em>чувствительность</em> (sensitivity): Обычно используется при обсуждении MLS. Уровень чувствительности это термин, используемый для описания того, насколько важны или секретны данные. Увеличение уровня чувствительности означает важность данных.</p></li><li><p><em>одиночная метка</em> (single label): означает, что вся файловая система использует одну метку для определения доступа всего потока данных. Когда файловая система использует эту установку, что происходит всегда, если не установлен параметр <code>multilabel</code>, ко всем файлам будет применяться одна и та же установка метки.</p></li><li><p><em>субъект</em> (subject): субъект это любая активная сущность, вызывающая перемещение информации между <em>объектами</em>; т.е. пользователь, пользовательский обработчик, системный процесс и т.д. В FreeBSD это почти всегда поток, работающий в процессе или представляющий пользователя.</p></li></ul></div></div></div><div class=sect1><h2 id=mac-initial>15.3. Описание MAC<a class=anchor href=#mac-initial></a></h2><div class=sectionbody><div class=paragraph><p>Усвоив все эти термины, рассмотрим как MAC повышает безопасность системы в целом. Различные политики, предоставляемые инфраструктурой MAC, могут быть использованы для защиты сети и файловых систем, блокирования доступа пользователей к определенным портам и сокетам, и так далее. Возможно, наилучшее использование политик это сочетание их вместе путем загрузки нескольких модулей одновременно, для создания многослойной защищенной среды. В многослойной среде безопасности несколько политик обеспечивают контролируемость защиты. Это отличается от усиления защиты, когда обычно усиливаются элементы системы, используемой в определенных целях. Единственным недостатком является дополнительная административная нагрузка в случае множественных меток файловой системы, установки сетевого доступа по пользователям, и т.д.</p></div><div class=paragraph><p>Эти недостатки минимальны по сравнению с длительным эффектом функционирования инфраструктуры; например, возможность выбора политик, необходимых для определенных конфигураций, уменьшает потерю производительности. Возможность удаления поддержки не используемых политик может увеличить общую производительность системы, а также дает гибкость выбора. Хорошая реализация удовлетворит общие требования безопасности и будет эффективно использовать различные политики, предоставляемые инфраструктурой.</p></div><div class=paragraph><p>Система, использующая возможности MAC, должна как минимум гарантировать, что пользователю не разрешается самостоятельно изменять атрибуты безопасности; все утилиты пользователя, программы и скрипты должны работать с ограничениями доступа, налагаемыми выбранной политикой; весь контроль правил доступа MAC находится в руках системного администратора.</p></div><div class=paragraph><p>Право выбора правильных политик безопасности принадлежит только системному администратору. В некоторых случаях может потребоваться ограничение доступа через сеть; для этого могут пригодиться <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_ifoff&amp;sektion=4&amp;format=html">mac_ifoff(4)</a> и даже <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_biba&amp;sektion=4&amp;format=html">mac_biba(4)</a>. В других случаях может быть необходима строгая конфиденциальность объектов в файловой системе. Для этого существуют политики <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4&amp;format=html">mac_bsdextended(4)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_mls&amp;sektion=4&amp;format=html">mac_mls(4)</a>.</p></div><div class=paragraph><p>Выбор политики может быть сделан на основе конфигурации сети. Возможно только определенным пользователям можно разрешить доступ через <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> к сети или интернет. В таких ситуациях подойдет политика <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a>. Но что необходимо сделать для файловых систем? Должен ли доступ к определенным каталогам быть запрещен для других групп или определенных пользователей? Или мы должны ограничить доступ пользователей или утилит к определенным файлам путем классификации определенных объектов?</p></div><div class=paragraph><p>В случае файловой системы, доступ может считаться конфиденциальным для отдельных пользователей, но не для всех. Например, большая команда разработчиков может быть разбита на небольшие группы. Разработчикам проекта A может быть не разрешен доступ к объектам, написанным разработчиками из проекта B. Хотя им может понадобиться доступ к объектам, созданным разработчиками проекта C; это реально встречающаяся ситуация. С помощью различных политик, предоставляемых инфраструктурой MAC, пользователи могут быть разделены на эти три группы и затем получить доступ к соответствующим областям без опасности утечки информации.</p></div><div class=paragraph><p>Таким образом, каждая политика имеет уникальный способ взаимодействия с общей безопасностью системы. Выбор политики должен быть основан на хорошо продуманной политике безопасности. Во многих случаях политика должна быть полностью пересмотрена и реализована заново для всей системы. Понимание различных политик, предоставляемых инфраструктурой MAC, поможет администраторам выбрать лучшую политику в своей ситуации.</p></div><div class=paragraph><p>Стандартное ядро FreeBSD не включает параметр MAC; необходимо добавить следующий параметр ядра перед тем, как пробовать какие-либо из примеров или применять информацию этой главы:</p></div><div class="literalblock programlisting"><div class=content><pre>options	MAC</pre></div></div><div class=paragraph><p>Затем необходимо пересобрать и переустановить ядро.</p></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content><div class=paragraph><p>Хотя различные страницы справочника для модулей MAC сообщают, что они могут быть встроены в ядро, возможна блокировка доступа системы к сети и другие побочные эффекты. Включение MAC очень похоже на включение брандмауэра, но необходимо быть внимательным, чтобы полностью не заблокировать систему. Необходимо предусмотреть возможность возврата к предыдущей конфигурации, а реализация MAC удаленно должна производиться с особой осторожностью.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=mac-understandlabel>15.4. Метки MAC<a class=anchor href=#mac-understandlabel></a></h2><div class=sectionbody><div class=paragraph><p>Метка MAC это атрибут безопасности, который может быть применен к субъектам и объектам всей системы.</p></div><div class=paragraph><p>При установке метки пользователь должен в точности понимать, что именно она делает. Атрибуты, доступные для объекта, зависят от загруженной политики, а политики интерпретируют свои атрибуты совершенно различным образом. Результатом недостаточного понимания настроек может стать их неправильная реализация, что может привести к неожиданному, и возможно нежелательному поведению системы.</p></div><div class=paragraph><p>Метка безопасности на объекте используется политикой для определения правил доступа. Для некоторых политик метка сама по себе содержит всю необходимую для этого информацию, в других моделях метки могут обрабатываться как часть большого набора правил, и т.д.</p></div><div class=paragraph><p>Например, установка метки в <code>biba/low</code> на файле присвоит этому файлу метку, обрабатываемую политикой Biba со значением "low".</p></div><div class=paragraph><p>Несколько политик, поддерживающих метки в FreeBSD, предоставляют три определенные предустановленные метки. Это низкая, высокая и равная метки. Хотя они устанавливают контроль различными способами для каждой политики, вы можете быть уверены, что низкая метка задаст минимальные установки, равная метка означает отмену или недействительность, а высокая метка установит максимально возможные настройки в политиках Biba и MLS.</p></div><div class=paragraph><p>При применении в файловой системе одиночной метки, только одна метка может быть использована для объектов. Это вызовет установку одних и тех же прав доступа для всей системы, и во многих случаях это все, что необходимо. Тем не менее, существует несколько ситуаций, в которых на объекты и субъекты файловой системы могут быть установлены множественные метки. В этих ситуациях необходимо с помощью <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> установить параметр <code>multilabel</code>.</p></div><div class=paragraph><p>В случае Biba и MLS может быть установлена числовая метка для указания точного уровня иерархического контроля. Этот числовой уровень используется для разделения или сортировки информации по различным группам классификации, разрешающей доступ только к этой группе или группе с более высоким уровнем.</p></div><div class=paragraph><p>В большинстве случаев системный администратор использует только одну метку на всю файловую систему.</p></div><div class=paragraph><p><em>Постойте, но это же похоже на DAC! Я думал, что MAC дает контроль только администратору.</em> Это утверждение все еще верно, только <code>root</code> контролирует и настраивает политики, так что пользователи помещаются в соответствующие категории/уровни доступа. Многие политики могут ограничить также и пользователя <code>root</code>. Базовый контроль над объектами затем передается группе, но пользователь <code>root</code> может отменить или изменить эти настройки в любое время. Данная иерархическая модель соответствует таким политикам как Biba и MLS.</p></div><div class=sect2><h3 id=_настройка_меток>15.4.1. Настройка меток<a class=anchor href=#_настройка_меток></a></h3><div class=paragraph><p>Практически все действия по настройке политики с метками могут быть выполнены с использованием утилит базовой системы. Эти команды обеспечивают простой интерфейс для настройки объектов или субъектов, или для изменения и проверки настроек.</p></div><div class=paragraph><p>Все настройки могут быть выполнены с использованием утилит <a href="https://man.freebsd.org/cgi/man.cgi?query=setfmac&amp;sektion=8&amp;format=html">setfmac(8)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=setpmac&amp;sektion=8&amp;format=html">setpmac(8)</a>. Команда <code>setfmac</code> используется для установки меток MAC на системные объекты, а команда <code>setpmac</code> используется для установки меток на системные субъекты. Выполните:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setfmac biba/high test</span></code></pre></div></div><div class=paragraph><p>Если не произойдет ошибок, будет возвращено приглашение командной строки, как и после команд <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=chown&amp;sektion=8&amp;format=html">chown(8)</a>. В некоторых случаях может появиться ошибка <code>Permission denied</code>, и она обычно появляется при установке или изменении метки на объект с ограничениями. Системный администратор для обхода этой проблемы может использовать следующие команды:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setfmac biba/high test</span>
Permission denied
<span class=c># setpmac biba/low setfmac biba/high test</span>
<span class=c># getfmac test</span>
<span class=nb>test</span>: biba/high</code></pre></div></div><div class=paragraph><p>Как видно из примера выше, команда <code>setpmac</code> может быть использована для изменения установок политики путем присвоения иной метки вызывающему процессу. Утилита <code>getpmac</code> обычно используется с существующим на данный момент процессом, таким как sendmail, хотя она принимает PID вместо команды, ее действие аналогично. Если пользователи попытаются манипулировать файлами, к которым у них нет доступа в соответствии с правилами загруженных политик, функцией <code>mac_set_link</code> будет выдано сообщение об ошибке <code>Operation not permitted</code>.</p></div><div class=sect3><h4 id=_пользователи_и_установки_меток>15.4.1.1. Пользователи и установки меток<a class=anchor href=#_пользователи_и_установки_меток></a></h4><div class=paragraph><p>Пользователям необходимо иметь метки, чтобы их файлы и процессы могли правильно взаимодействовать с определенной в системе политикой безопасности. Это настраивается через файл <span class=filename>login.conf</span> путем использования классов. Каждая политика, использующая метки, реализует установку класса пользователя.</p></div><div class=paragraph><p>Пример записи, содержащей все политики, приведенные ниже:</p></div><div class="literalblock programlisting"><div class=content><pre>default:\
	:copyright=/etc/COPYRIGHT:\
	:welcome=/etc/motd:\
	:setenv=MAIL=/var/mail/$,BLOCKSIZE=K:\
	:path=~/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:\
	:manpath=/usr/shared/man /usr/local/man:\
	:nologin=/usr/sbin/nologin:\
	:cputime=1h30m:\
	:datasize=8M:\
	:vmemoryuse=100M:\
	:stacksize=2M:\
	:memorylocked=4M:\
	:memoryuse=8M:\
	:filesize=8M:\
	:coredumpsize=8M:\
	:openfiles=24:\
	:maxproc=32:\
	:priority=0:\
	:requirehome:\
	:passwordtime=91d:\
	:umask=022:\
	:ignoretime@:\
	:label=partition/13,mls/5,biba/10(5-15),lomac10[2]:</pre></div></div><div class=paragraph><p>Параметр <code>label</code> используется для установки метки MAC по умолчанию для класса пользователя. Пользователи не смогут изменять это значение, поэтому его можно признать не опциональным. В реальной ситуации администратору никогда не потребуется включать каждую политику. Рекомендуется прочесть главу полностью перед реализацией любой из этих настроек.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Пользователи могут изменить свою метку после входа; однако политика накладывает ограничение на это изменение. В примере выше политике Biba указано, что минимальная целостность процесса 5, максимальная 15, а эффективная целостность по умолчанию 10. Процесс будет работать на уровне 10, пока метка не будет изменена, например если пользователь использует команду setpmac, которую Biba ограничит диапазоном, установленным при входе.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Во всех случаях после изменения <span class=filename>login.conf</span>, база данных "login class capability" должна быть пересобрана с использованием команды <code>cap_mkdb</code> и это будет отражено в каждом последующем примере главы.</p></div><div class=paragraph><p>Полезно отметить, что количество пользователей, которым требуются различные классы, во многих сетях может быть велико. Необходимо тщательное планирование, поскольку управление такой сетью может серьезно усложниться.</p></div><div class=paragraph><p>В будущих версиях FreeBSD появится новый способ связывания пользователей с метками; однако, он будет доступен только через некоторое время после выхода FreeBSD 5.3.</p></div></div><div class=sect3><h4 id=_сетевые_интерфейсы_и_установка_меток>15.4.1.2. Сетевые интерфейсы и установка меток<a class=anchor href=#_сетевые_интерфейсы_и_установка_меток></a></h4><div class=paragraph><p>Метки также могут быть установлены на сетевые интерфейсы, для контроля потока данных в сети. Во всех случаях они функционируют аналогично тому, как политики по отношению к объектам. Пользователи с высокими установками, например, <code>biba</code>, не смогут получить доступ к сетевым интерфейсам с низкими установками.</p></div><div class=paragraph><p>Для установки MAC меток на сетевых интерфейсах параметр <code>maclabel</code> может быть передан <code>ifconfig</code>. Например:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bge0 maclabel biba/equal</span></code></pre></div></div><div class=paragraph><p>установит MAC метку <code>biba/equal</code> на интерфейс <a href="https://man.freebsd.org/cgi/man.cgi?query=bge&amp;sektion=4&amp;format=html">bge(4)</a>. При использовании метки, подобной <code>biba/high(low-high)</code> вся метка должна быть взята в кавычки, иначе будет выдано сообщение об ошибке.</p></div><div class=paragraph><p>Каждая политика, использующая метки, снабжена переменной <code>sysctl</code>, которая может быть использована для отключения MAC меток на сетевых интерфейсах. Установка метки в <code>equal</code> будет иметь подобный эффект. Просмотрите вывод команды <code>sysctl</code>, страницы справочника для политик, или дальнейшую информацию из этой главы по этим переменным.</p></div></div></div><div class=sect2><h3 id=_одиночные_или_множественные_метки>15.4.2. Одиночные или множественные метки?<a class=anchor href=#_одиночные_или_множественные_метки></a></h3><div class=paragraph><p>По умолчанию система будет использовать параметр <code>singlelabel</code>. Но что это означает для администратора? Существуют несколько различий между политиками, каждая из которых правильна сама по себе, но имеет свои доводы за и против относительно гибкости модели безопасности системы.</p></div><div class=paragraph><p><code>singlelabel</code> (одиночная метка) разрешает использование только одной метки, например <code>biba/high</code>, для каждого объекта или субъекта. Ее преимущество в меньшей нагрузке на системного администратора, а недостаток в малой гибкости политик, поддерживающих метки. Многие администраторы в своих политиках безопасности могут предпочесть использование параметра <code>multilabel</code>.</p></div><div class=paragraph><p>С параметром <code>multilabel</code> каждый субъект или объект может иметь собственную метку MAC, в то время как со стандартным параметром <code>singlelabel</code> возможна только одна метка на весь раздел. Параметры <code>multilabel</code> и <code>singlelabel</code> требуются только для политик, реализующих метки, включая Biba, Lomac, MLS и SEBSD.</p></div><div class=paragraph><p>Во многих случаях <code>multilabel</code> может вообще не потребоваться. Предположим следующую ситуацию и модель безопасности:</p></div><div class=ulist><ul><li><p>FreeBSD веб-сервер, использующий инфраструктуру MAC и набор различных политик.</p></li><li><p>Этому компьютеру потребуется лишь одна метка, <code>biba/high</code>, для всей системы. Файловой системе не нужен параметр <code>multilabel</code>, поскольку по умолчанию работает одиночная метка.</p></li><li><p>Но поскольку этот компьютер будет веб сервером, процесс веб сервера должен быть запущен с <code>biba/low</code> для предотвращения записи. Политика Biba и то, как она работает, будет обсуждаться позже, поэтому предыдущий комментарий сложно интерпретировать; просто продолжайте чтение. Сервер может использовать дисковый раздел с установленной меткой <code>biba/low</code> для большинства, если не для всех своих операций. В этом примере отсутствуют многие детали, такие как ограничения на данные, конфигурация системы и установки пользователей; однако, это лишь предварительный пример.</p></li></ul></div><div class=paragraph><p>Если используется любая из политик, не поддерживающих метки, параметр <code>multilabel</code> не требуется. Сюда включаются политики <code>seeotheruids</code>, <code>portacl</code> и <code>partition</code>.</p></div><div class=paragraph><p>Необходимо также отметить, что использование параметра <code>multilabel</code> на разделе и установление модели безопасности, основанной на функциональности <code>multilabel</code>, может повлечь за собой множество дополнительной административной работы, поскольку всему в файловой системе должны быть присвоены метки. Это включает каталоги, файлы, и даже файлы устройств.</p></div><div class=paragraph><p>Следующая команда установит параметр <code>multilabel</code> на файловых системах. Это может быть сделано только в однопользовательском режиме:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tunefs -l enable /</span></code></pre></div></div><div class=paragraph><p>Это не требуется для файловой системы подкачки.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Некоторые пользователи сталкиваются с проблемами при установке флага <code>multilabel</code> на корневой раздел. В данном случае обратитесь к <a href=#mac-troubleshoot>Решение проблем с инфраструктурой MAC</a>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_настройка_mac_переменными_sysctl>15.4.3. Настройка MAC переменными sysctl<a class=anchor href=#_настройка_mac_переменными_sysctl></a></h3><div class=paragraph><p>Независимо от загрузки модулей, существует несколько частей MAC, которые могут быть настроены с использованием интерфейса <code>sysctl</code>. Эти переменные описаны ниже и во всех случаях значение 1 означает включение, а 0 - отключение:</p></div><div class=ulist><ul><li><p><code>security.mac.enforce_fs</code> по умолчанию установлена в 1 и включает политики MAC на файловых системах.</p></li><li><p><code>security.mac.enforce_kld</code> по умолчанию 1 и включает линкование политик MAC в ядре (см. <a href="https://man.freebsd.org/cgi/man.cgi?query=kld&amp;sektion=4&amp;format=html">kld(4)</a>).</p></li><li><p><code>security.mac.enforce_network</code> по умолчанию 1 и включает сетевые политики MAC.</p></li><li><p><code>security.mac.enforce_pipe</code> по умолчанию 1 и включает политики MAC для каналов (pipe).</p></li><li><p><code>security.mac.enforce_process</code> по умолчанию 1 и включает политики MAC для процессов, использующих средства межпроцессного взаимодействия.</p></li><li><p><code>security.mac.enforce_socket</code> по умолчанию 1 и включает политики MAC на сокетах (см. страницу справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=socket&amp;sektion=2&amp;format=html">socket(2)</a>).</p></li><li><p><code>security.mac.enforce_system</code> по умолчанию 1 и включает политики MAC для действий системы, таких как учет (accounting) и перезагрузка.</p></li><li><p><code>security.mac.enforce_vm</code> по умолчанию 1 и включает политики MAC для системы виртуальной памяти.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Каждая политика MAC поддерживает переменные <code>sysctl</code>. Они обычно попадают в дерево <code>security.mac.&lt;policyname></code>. Для просмотра всех переменных MAC, используйте следующую команду:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl -da | grep mac</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Это должно быть интерпретировано так, что все основные политики MAC включены по умолчанию. Если модули встроены в ядро, система будет заблокирована, и скорее всего не сможет связаться с локальной сетью или с интернет, и т.д. Поэтому встраивание модулей в ядро не рекомендуется. Не потому, что это ограничит возможность отключения командой <code>sysctl</code>, а потому, что включение политик в виде модулей позволит администратору переключать политики системы без необходимости пересборки и переустановки новой системы.</p></div></div></div></div><div class=sect1><h2 id=mac-modules>15.5. Настройка модулей<a class=anchor href=#mac-modules></a></h2><div class=sectionbody><div class=paragraph><p>Каждый модуль, включенный в инфраструктуру MAC, может быть или встроен в ядро, как упоминалось выше, или загружен в виде модуля ядра. Рекомендуется добавление имени модуля в файл <span class=filename>/boot/loader.conf</span>, этот модуль будет активирован в самом начале загрузки.</p></div><div class=paragraph><p>В последующих разделах будут обсуждаться различные модули MAC и их возможности. Реализация этих возможностей в определенных ситуациях также будет обсуждаться в этой главе. Некоторые модули поддерживают использование меток, которые контролируют доступ путем применения правил вида "это разрешено, а это нет". Настройка меток может контролировать доступ к файлам, сетевым коммуникациям и т.д. В предыдущем разделе было показано как флаг <code>multilabel</code> может быть установлен на файловые системы для включения контроля доступа по файлам или по разделам.</p></div><div class=paragraph><p>Конфигурация с одной меткой не допускает применение нескольких меток в системе, поэтому параметр <code>tunefs</code> называется <code>multilabel</code>.</p></div><div class=sect2><h3 id=mac-seeotheruids>15.5.1. Модуль MAC seeotheruids<a class=anchor href=#mac-seeotheruids></a></h3><div class=paragraph><p>Имя модуля: <span class=filename>mac_seeotheruids.ko</span></p></div><div class=paragraph><p>Строка в конфигурации ядра: <code>options MAC_SEEOTHERUIDS</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_seeotheruids_load="YES"</code></p></div><div class=paragraph><p>Модуль <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_seeotheruids&amp;sektion=4&amp;format=html">mac_seeotheruids(4)</a> копирует и расширяет переменные <code>sysctl security.bsd.see_other_uids</code> и <code>security.bsd.see_other_gids</code>. Он не требует установки меток и может прозрачно работать с другими модулями.</p></div><div class=paragraph><p>После загрузки модуля, для управления им могут быть использованы следующие переменные <code>sysctl</code>:</p></div><div class=ulist><ul><li><p><code>security.mac.seeotheruids.enabled</code> включит модуль с настройками по умолчанию. Эти настройки запрещают пользователям просмотр процессов и сокетов, принадлежащих другим пользователям.</p></li><li><p><code>security.mac.seeotheruids.specificgid_enabled</code> позволит исключить определенные группы из этой политики. Для исключения определенной группы, используйте переменную <code>sysctl security.mac.seeotheruids.specificgid=<em>XXX</em></code>. В примере выше необходимо заменить <em>XXX</em> на числовой ID группы.</p></li><li><p><code>security.mac.seeotheruids.primarygroup_enabled</code> используется для исключения определенной основной группы из этой политики. При использовании этой переменной <code>security.mac.seeotheruids.specificgid_enabled</code> может быть не установлена.</p></li></ul></div><div class=paragraph><p>Необходимо отметить, что пользователь <code>root</code> не является исключением из этой политики. Это одно из самых существенных различий между MAC версией и обычными переменными, существующими по умолчанию: <code>security.bsd.seeotheruids</code>.</p></div></div></div></div><div class=sect1><h2 id=mac-bsdextended>15.6. Модуль MAC bsdextended<a class=anchor href=#mac-bsdextended></a></h2><div class=sectionbody><div class=paragraph><p>Имя модуля: <span class=filename>mac_bsdextended.ko</span></p></div><div class=paragraph><p>Строка конфигурации ядра: <code>options MAC_BSDEXTENDED</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_bsdextended_load="YES"</code></p></div><div class=paragraph><p>Модуль <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4&amp;format=html">mac_bsdextended(4)</a> включает брандмауэр файловой системы. Политика этого модуля является расширением стандартной модели разрешений файловой системы, позволяя администратору создавать набор правил для защиты файлов, утилит и каталогов иерархии файловой системы в стиле брандмауэра.</p></div><div class=paragraph><p>Политика может быть создана с помощью утилиты, <a href="https://man.freebsd.org/cgi/man.cgi?query=ugidfw&amp;sektion=8&amp;format=html">ugidfw(8)</a>, синтаксис которой похож на синтаксис <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a>. Другие инструменты могут быть написаны с использованием функций библиотеки <a href="https://man.freebsd.org/cgi/man.cgi?query=libugidfw&amp;sektion=3&amp;format=html">libugidfw(3)</a>.</p></div><div class=paragraph><p>При работе с этим модулем необходимо соблюдать особую осторожность; некорректное его использование может заблокировать доступ к отдельным частям файловой системы.</p></div><div class=sect2><h3 id=_примеры>15.6.1. Примеры<a class=anchor href=#_примеры></a></h3><div class=paragraph><p>После загрузки модуля <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4&amp;format=html">mac_bsdextended(4)</a> для просмотра текущей настройки правил может быть использована следующая команда:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ugidfw list</span>
0 slots, 0 rules</code></pre></div></div><div class=paragraph><p>Как и можно было ожидать, правила не определены. Это означает, что доступ полностью открыт. Для создания правила, которое заблокирует доступ всех пользователей, но не повлияет на <code>root</code>, просто запустите следующую команду:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ugidfw add subject not uid root new object not uid root mode n</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>В релизах FreeBSD до 5.3, параметр <span class=parameter>add</span> не существует. Вместо него необходимо использовать <span class=parameter>set</span>. Пример дан ниже.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Это очень плохая идея, поскольку такое правило запретит пользователям использовать даже самые простые команды, такие как <code>ls</code>. Более патриотический список правил может быть таким:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ugidfw set 2 subject uid user1 object uid user2 mode n</span>
<span class=c># ugidfw set 3 subject uid user1 object gid user2 mode n</span></code></pre></div></div><div class=paragraph><p>Эти команды запретят весь и любой доступ пользователя <code>user1</code>, включая просмотр подкаталогов, к домашнему каталогу пользователя <code><em>user2</em></code>.</p></div><div class=paragraph><p>Вместо <code>user1</code> может быть задано <code>not uid <em>user2</em></code>. Это включит те ограничения, о которых говорилось выше, для всех пользователей кроме одного.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>На пользователя <code>root</code> эти изменения не повлияют.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Материал выше должен дать общую идею как модуль <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4&amp;format=html">mac_bsdextended(4)</a> может быть использован в качестве средства защиты файловой системы. За дальнейшей информацией обращайтесь к страницам справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4&amp;format=html">mac_bsdextended(4)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=ugidfw&amp;sektion=8&amp;format=html">ugidfw(8)</a>.</p></div></div></div></div><div class=sect1><h2 id=mac-ifoff>15.7. Модуль MAC ifoff<a class=anchor href=#mac-ifoff></a></h2><div class=sectionbody><div class=paragraph><p>Имя модуля: <span class=filename>mac_ifoff.ko</span></p></div><div class=paragraph><p>Строка конфигурации ядра: <code>options MAC_IFOFF</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_ifoff_load="YES"</code></p></div><div class=paragraph><p>Модуль <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_ifoff&amp;sektion=4&amp;format=html">mac_ifoff(4)</a> существует только для отключения сетевых интерфейсов в работающей системе и удержания их от отправки пакетов во время начальной загрузки. Это не требует установления в системе каких-либо меток, нет и зависимости от других модулей MAC.</p></div><div class=paragraph><p>Большая часть управления может быть выполнена через переменные <code>sysctl</code>.</p></div><div class=ulist><ul><li><p><code>security.mac.ifoff.lo_enabled</code> включает/выключает весь трафик на loopback (<a href="https://man.freebsd.org/cgi/man.cgi?query=lo&amp;sektion=4&amp;format=html">lo(4)</a>) интерфейсе.</p></li><li><p><code>security.mac.ifoff.bpfrecv_enabled</code> включает/выключает весь трафик на интерфейсе Berkeley Packet Filter (<a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a>).</p></li><li><p><code>security.mac.ifoff.other_enabled</code> включает/выключает весь трафик на всех других интерфейсах.</p></li></ul></div><div class=paragraph><p>Одно из наиболее частых использований <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_ifoff&amp;sektion=4&amp;format=html">mac_ifoff(4)</a> это сетевой мониторинг в среде, где сетевой трафик не должен быть разрешен во время загрузки. Другое предлагаемое применение это написание скрипта, использующего <a class=package href=https://cgit.freebsd.org/ports/tree/security/aide/>security/aide</a> для автоматического блокирования сетевого трафика, если будут обнаружены новые или измененные файлы в защищаемых каталогах.</p></div></div></div><div class=sect1><h2 id=mac-portacl>15.8. Модуль MAC portacl<a class=anchor href=#mac-portacl></a></h2><div class=sectionbody><div class=paragraph><p>Имя модуля: <span class=filename>mac_portacl.ko</span></p></div><div class=paragraph><p>Строка конфигурации ядра: <code>MAC_PORTACL</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_portacl_load="YES"</code></p></div><div class=paragraph><p>Модуль <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a> используется для ограничения привязки (binding) к локальным портам TCP и UDP, используя различные переменные <code>sysctl</code>. По сути <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a> делает возможной привязку к привилегированным портам, т.е. к портам с номерами меньше 1024 для не-<code>root</code> пользователей.</p></div><div class=paragraph><p>После загрузки этот модуль включит политику MAC на всех сокетах. Доступны следующие переменные <code>sysctl</code>:</p></div><div class=ulist><ul><li><p><code>security.mac.portacl.enabled</code> включает/отключает политику целиком.</p></li><li><p><code>security.mac.portacl.port_high</code> установит наибольший номер порта, для которого <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a> включает защиту.</p></li><li><p><code>security.mac.portacl.suser_exempt</code>, если установлена в ненулевое значение, исключает пользователя <code>root</code> из этой политики.</p></li><li><p><code>security.mac.portacl.rules</code> задает действующую политику mac_portacl: см. ниже.</p></li></ul></div><div class=paragraph><p>Действующая политика <code>mac_portacl</code>, указанная в <code>security.mac.portacl.rules</code>, это текстовая строка в форме <code>rule[,rule,…​]</code> с таким количеством правил, которое требуется. Каждое правило задается в формате: <code>idtype:id:protocol:port</code>. Параметр <span class=parameter>idtype</span> может принимать значения <code>uid</code> или <code>gid</code> и используется для интерпретации параметра <span class=parameter>id</span>, в качестве id пользователя или группы соответственно. Параметр <span class=parameter>protocol</span> используется для определения применимости этого правила к протоколу TCP или UDP, он может принимать значения <code>tcp</code> или <code>udp</code>. Последний параметр, <span class=parameter>port</span>, задает номер порта, к которому разрешается привязка указанного пользователя или группы.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Поскольку набор правил интерпретируется непосредственно ядром, для ID пользователя, группы и номера порта могут быть использованы только числовые значения. Т.е. имена пользователей, групп и сервисов портов не могут быть использованы.</p></div></td></tr></tbody></table></div><div class=paragraph><p>По умолчанию в UNIX®-подобных системах порты с номерами менее чем 1024 могут быть использованы только привилегированными процессами, т.е. теми, что запущены от <code>root</code>. С <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a> для разрешения привязки непривилегированных процессов к портам с номерами ниже 1024 эти стандартные ограничения UNIX® должны быть отменены. Это может быть выполнено путем установки переменных <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> <code>net.inet.ip.portrange.reservedlow</code> и <code>net.inet.ip.portrange.reservedhigh</code> в ноль.</p></div><div class=paragraph><p>Обратитесь к примерам ниже или к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a> за дальнейшей информацией.</p></div><div class=sect2><h3 id=_примеры_2>15.8.1. Примеры<a class=anchor href=#_примеры_2></a></h3><div class=paragraph><p>Следующие примеры должны осветить обсуждение выше чуть лучше:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl security.mac.portacl.port_high=1023</span>
<span class=c># sysctl net.inet.ip.portrange.reservedlow=0 net.inet.ip.portrange.reservedhigh=0</span></code></pre></div></div><div class=paragraph><p>Сначала мы настраиваем <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a> для работы со стандартными привилегированными портами и отмены обычных ограничений UNIX® на привязку.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl security.mac.portacl.suser_exempt=1</span></code></pre></div></div><div class=paragraph><p>Пользователь <code>root</code> должен быть исключен из этой политики, для этого переменная <code>security.mac.portacl.suser_exempt</code> установлена в ненулевое значение. Модуль <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4&amp;format=html">mac_portacl(4)</a> теперь настроен на то поведение UNIX®-подобных систем по умолчанию.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl security.mac.portacl.rules=uid:80:tcp:80</span></code></pre></div></div><div class=paragraph><p>Разрешает пользователю с UID 80 (обычно это пользователь <code>www</code>) привязку к порту 80. Теперь пользователь <code>www</code> сможет запустить веб сервер даже без привилегии <code>root</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl security.mac.portacl.rules=uid:1001:tcp:110,uid:1001:tcp:995</span></code></pre></div></div><div class=paragraph><p>Разрешит пользователю с UID 1001 привязку к TCP портам 110 ("pop3") и 995 ("pop3s"). Это позволит данному пользователю запустить сервер, принимающий соединения на портах 110 и 995.</p></div></div></div></div><div class=sect1><h2 id=mac-labelingpolicies>15.9. Политики MAC, использующие метки<a class=anchor href=#mac-labelingpolicies></a></h2><div class=sectionbody><div class=paragraph><p>В следующих нескольких разделах будут обсуждаться политики MAC, использующие метки.</p></div><div class=paragraph><p>С этого момента обсуждение будет сфокусировано на возможностях <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_biba&amp;sektion=4&amp;format=html">mac_biba(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_lomac&amp;sektion=4&amp;format=html">mac_lomac(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_partition&amp;sektion=4&amp;format=html">mac_partition(4)</a>, и <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_mls&amp;sektion=4&amp;format=html">mac_mls(4)</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Это лишь примерные настройки, они не должны использоваться непосредственно в реальных задачах. Цель изложения в том, чтобы документировать и показать синтаксис, а также примеры реализации и тестирования.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Для правильной работы этих политик необходимо выполнить некоторые приготовления.</p></div><div class=sect2><h3 id=mac-prep>15.9.1. Приготовления к использованию политик с метками<a class=anchor href=#mac-prep></a></h3><div class=paragraph><p>В файл <span class=filename>login.conf</span> необходимо внести следующие изменения:</p></div><div class=ulist><ul><li><p>Должен быть добавлен класс <code>insecure</code>, или другой подобный класс. Наличие класса <code>insecure</code> не обязательно, он приводится здесь в качестве примера; другие конфигурации могут использовать другое имя класса.</p></li><li><p>Класс <code>insecure</code> должен использовать приведенные ниже настройки и определения. Некоторые из них могут быть изменены, но строка, определяющая метку по умолчанию, необходима и должна быть оставлена.</p><div class="literalblock programlisting"><div class=content><pre>insecure:\
	:copyright=/etc/COPYRIGHT:\
	:welcome=/etc/motd:\
	:setenv=MAIL=/var/mail/$,BLOCKSIZE=K:\
	:path=~/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:\
	:manpath=/usr/shared/man /usr/local/man:\
	:nologin=/usr/sbin/nologin:\
	:cputime=1h30m:\
	:datasize=8M:\
	:vmemoryuse=100M:\
	:stacksize=2M:\
	:memorylocked=4M:\
	:memoryuse=8M:\
	:filesize=8M:\
	:coredumpsize=8M:\
	:openfiles=24:\
	:maxproc=32:\
	:priority=0:\
	:requirehome:\
	:passwordtime=91d:\
	:umask=022:\
	:ignoretime@:\
	:label=partition/13,mls/5,biba/low:</pre></div></div><div class=paragraph><p>Перед тем, как переключать пользователей на новый класс, необходимо запустить команду <a href="https://man.freebsd.org/cgi/man.cgi?query=cap.mkdb&amp;sektion=1&amp;format=html">cap.mkdb(1)</a> на <a href="https://man.freebsd.org/cgi/man.cgi?query=login.conf&amp;sektion=5&amp;format=html">login.conf(5)</a>.</p></div><div class=paragraph><p>Пользователю <code>root</code> также необходимо присвоить класс; иначе, почти любой команде, выполняемой от <code>root</code>, потребуется использование <code>setpmac</code>.</p></div></li><li><p>Убедитесь, что все разделы, на которых будут установлены метки MAC, поддерживают параметр <code>multilabel</code>. Нам необходимо сделать это, поскольку многие из примеров здесь содержат различные метки в целях тестирования. Просмотрите вывод команды <code>mount</code> в качестве необходимой предосторожности.</p></li><li><p>Переключите всех пользователей, которые будут использовать новые механизмы безопасности, на этот класс. Информация по этой процедуре находится в <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> или <a href="https://man.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;format=html">vipw(8)</a>.</p></li></ul></div></div></div></div><div class=sect1><h2 id=mac-partition>15.10. Модуль MAC partition<a class=anchor href=#mac-partition></a></h2><div class=sectionbody><div class=paragraph><p>Имя модуля: <span class=filename>mac_partition.ko</span></p></div><div class=paragraph><p>Строка настройки ядра: <code>options MAC_PARTITION</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_partition_load="YES"</code></p></div><div class=paragraph><p>Политика <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_partition&amp;sektion=4&amp;format=html">mac_partition(4)</a> распределяет процессы по "разделам" на основе их MAC меток. Это может быть представлено как особый тип <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a>, хотя такое сравнение едва ли подходит.</p></div><div class=paragraph><p>Этот модуль должен быть добавлен в <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a>, чтобы политика была загружена и включена при загрузке системы.</p></div><div class=paragraph><p>Большая часть настройки этой политики выполняется с помощью утилиты <a href="https://man.freebsd.org/cgi/man.cgi?query=setpmac&amp;sektion=8&amp;format=html">setpmac(8)</a>, которая будет описана ниже. Для данной политики имеется также следующая переменная <code>sysctl</code>:</p></div><div class=ulist><ul><li><p><code>security.mac.partition.enabled</code> включит MAC разделение процессов.</p></li></ul></div><div class=paragraph><p>Когда эта политика включена, пользователям разрешено просматривать только собственные процессы, но не разрешено пользоваться определенными утилитами. Например, пользователю из класса <code>insecure</code> выше не будет разрешено использование команды <code>top</code>, а также многих других команд, которые должны порождать процесс.</p></div><div class=paragraph><p>Для присвоения утилитам меток partition используйте утилиту <code>setpmac</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setpmac partition/13 top</span></code></pre></div></div><div class=paragraph><p>Команда <code>top</code> будет добавлена к метке, установленной для пользователей класса <code>insecure</code>. Обратите внимание, что все процессы, порожденные пользователями класса <code>insecure</code>, останутся с меткой <code>partition/13</code>.</p></div><div class=sect2><h3 id=_примеры_3>15.10.1. Примеры<a class=anchor href=#_примеры_3></a></h3><div class=paragraph><p>Следующая команда покажет вашу метку раздела и список процессов:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ps Zax</span></code></pre></div></div><div class=paragraph><p>Следующей командой можно просмотреть метку раздела процессов других пользователей и их запущенные процессы:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ps -ZU trhodes</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Пользователи могут могут увидеть процессы <code>root</code>, если не загружена политика <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_seeotheruids&amp;sektion=4&amp;format=html">mac_seeotheruids(4)</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Действительно "продвинутая" реализация должна отключать все сервисы через <span class=filename>/etc/rc.conf</span> и запускать их через скрипт, который установит правильный набор меток.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Следующие политики поддерживают целочисленные установки вместо трех меток по умолчанию. Эти опции, включая их ограничения, описываются более подробно в страницах справочника модулей.</p></div></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=mac-mls>15.11. Модуль многоуровневой безопасности MAC (MLS)<a class=anchor href=#mac-mls></a></h2><div class=sectionbody><div class=paragraph><p>Имя модуля: <span class=filename>mac_mls.ko</span></p></div><div class=paragraph><p>Строка конфигурации ядра: <code>options MAC_MLS</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_mls_load="YES"</code></p></div><div class=paragraph><p>Политика <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_mls&amp;sektion=4&amp;format=html">mac_mls(4)</a> контролирует взаимодействие субъектов и объектов системы путем применения строгой политики к потоку информации.</p></div><div class=paragraph><p>В среде MLS, для каждого субъекта или объекта внутри отдела (compartment) устанавливается "уровень допуска". Поскольку количество уровней допуска может превышать шесть тысяч, для любого системного администратора задача настройки каждого субъекта или объекта может быть слишком сложной. К счастью, существуют "постоянные" метки, которые уже включены в эту политику.</p></div><div class=paragraph><p>Эти метки <code>mls/low</code>, <code>mls/equal</code> и <code>mls/high</code>. Поскольку эти метки подробно описываются в справочнике, здесь мы дадим только краткое описание:</p></div><div class=ulist><ul><li><p>Метка <code>mls/low</code> содержит минимальную настройку, что позволяет доминирование над ней всех других объектов. Все, что помечено с <code>mls/low</code>, находится на низком уровне доступа и доступ к более высоким уровням будет запрещен. Кроме того, эта метка предотвратит запись или передачу информации объектам с более высоким уровнем доступа.</p></li><li><p>Метка <code>mls/equal</code> должна быть помещена на объекты, являющиеся исключением из политики.</p></li><li><p>Метка <code>mls/high</code> это наибольший возможный уровень доступа. Объекты с этой меткой будут доминировать над всеми другими объектами системы; однако, утечка информации от них к объектам более низкого класса невозможна.</p></li></ul></div><div class=paragraph><p>MLS представляет собой:</p></div><div class=ulist><ul><li><p>Иерархические уровни безопасности с набором не иерархических категорий;</p></li><li><p>Фиксированные правила: нет чтения сверху, нет записи вниз (субъект может иметь доступ на чтение объектов собственного уровня или ниже, но не выше. Аналогично, субъект может иметь доступ на запись в объекты своего уровня или выше, но не наоборот.);</p></li><li><p>Секретность (предотвращение неавторизованного раскрытия данных);</p></li><li><p>Основа для разработки систем, одновременно работающих с данными на нескольких уровнях секретности (без утечки информации).</p></li></ul></div><div class=paragraph><p>Для настройки специальных сервисов и интерфейсов доступны следующие переменные <code>sysctl</code>:</p></div><div class=ulist><ul><li><p><code>security.mac.mls.enabled</code> используется для включения/отключения политики MLS.</p></li><li><p><code>security.mac.mls.ptys_equal</code> пометит все устройства <a href="https://man.freebsd.org/cgi/man.cgi?query=pty&amp;sektion=4&amp;format=html">pty(4)</a> как <code>mls/equal</code> во время создания.</p></li><li><p><code>security.mac.mls.revocation_enabled</code> используется для запрета доступа к объектам после того, как их метка изменится в меньшую сторону.</p></li><li><p><code>security.mac.mls.max_compartments</code> используется для установки максимального количества уровней отделов на объекты; обычно это максимальное количество отделов, разрешенных в системе.</p></li></ul></div><div class=paragraph><p>Для управления метками MLS существует команда <a href="https://man.freebsd.org/cgi/man.cgi?query=setfmac&amp;sektion=8&amp;format=html">setfmac(8)</a>. Для присвоения метки объекту, выполните следующую команду:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setfmac mls/5 test</span></code></pre></div></div><div class=paragraph><p>Для получения метки MLS файла <span class=filename>test</span>, выполните следующую команду:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># getfmac test</span></code></pre></div></div><div class=paragraph><p>Выше представлен краткий обзор возможностей политики MLS. Существует метод, связанный с созданием основного файла политики в каталоге <span class=filename>/etc</span>, где будет определена необходимая для политики MLS информация, которая будет передана команде <code>setfmac</code>. Этот метод будет описан после рассмотрения всех политик.</p></div><div class=paragraph><p>Итоги: объект с низким уровнем доступа не может прочесть данные объекта с высоким уровнем доступа. Базовая политика должна устанавливать <code>mls/high</code> на всем, что не должно быть прочитано, даже если туда необходимо записывать. На всем, куда нельзя писать, должна быть установлена метка <code>mls/low</code>, даже если это необходимо читать. Наконец, на всем остальном установите <code>mls/equal</code>. Все пользователи, помеченные как <code>insecure</code>, должны иметь метку <code>mls/low</code>.</p></div></div></div><div class=sect1><h2 id=mac-biba>15.12. Модуль MAC Biba<a class=anchor href=#mac-biba></a></h2><div class=sectionbody><div class=paragraph><p>Имя модуля: <span class=filename>mac_biba.ko</span></p></div><div class=paragraph><p>Строка конфигурации ядра: <code>options MAC_BIBA</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_biba_load="YES"</code></p></div><div class=paragraph><p>Модуль <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_biba&amp;sektion=4&amp;format=html">mac_biba(4)</a> загружает MAC политику Biba. Эта политика работает в основном так же, как и MLS, за исключением того, что правила потока информации изменены на противоположные. Они предназначены для предотвращения передачи потока секретной информации вверх, в то время как политика MLS предотвращает передачу потока секретной информации вниз; таким образом, большая часть этого раздела применима к обеим политикам.</p></div><div class=paragraph><p>В среде Biba, каждому субъекту или объекту присваивается метка "целостности". Эти метки состоят из иерархических уровней и не-иерархических компонентов. При возрастании уровня объекта или субъекта это повышает его целостность.</p></div><div class=paragraph><p>Поддерживаемые метки <code>biba/low</code>, <code>biba/equal</code>, и <code>biba/high</code>; описаны ниже:</p></div><div class=ulist><ul><li><p>Метка <code>biba/low</code> обеспечивает наименьшую целостность объекта или субъекта. Установка ее на объект или субъект заблокирует их доступ к объектам или субъектам, имеющим более высокую метку. Тем не менее, у них остается доступ на чтение.</p></li><li><p>Метка <code>biba/equal</code> должна помещаться только на объекты, исключающиеся из политики.</p></li><li><p>Метка <code>biba/high</code> разрешит запись в объекты с более низкой меткой, но не разрешит чтение из этих объектов. Рекомендуется помещать такую метку на объекты, влияющие на целостность всей системы.</p></li></ul></div><div class=paragraph><p>Biba представляет собой:</p></div><div class=ulist><ul><li><p>Иерархические уровни целостности с набором не иерархических категорий;</p></li><li><p>Фиксированные правила: нет записи наверх, нет чтения снизу (обратно MLS). Субъект может иметь доступ на запись к объектам своего уровня или ниже, но не выше. Аналогично, субъект может иметь доступ на чтение к объектам своего уровня или выше, но не ниже;</p></li><li><p>Целостность (предотвращение неавторизованного изменения данных);</p></li><li><p>Уровни целостности (вместо уровней секретности MLS).</p></li></ul></div><div class=paragraph><p>Для управления политикой Biba могут быть использованы следующие переменные <code>sysctl</code>:</p></div><div class=ulist><ul><li><p><code>security.mac.biba.enabled</code> может использоваться для включения/выключения политики Biba.</p></li><li><p><code>security.mac.biba.ptys_equal</code> может использоваться для отключения политики Biba на устройствах <a href="https://man.freebsd.org/cgi/man.cgi?query=pty&amp;sektion=4&amp;format=html">pty(4)</a>.</p></li><li><p><code>security.mac.biba.revocation_enabled</code> включит отмену доступа к объектам, если метка изменена на более высокую, чем у субъекта.</p></li></ul></div><div class=paragraph><p>Для выполнения настроек политики Biba на системных объектах, применяются команды <code>setfmac</code> и <code>getfmac</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setfmac biba/low test</span>
<span class=c># getfmac test</span>
<span class=nb>test</span>: biba/low</code></pre></div></div><div class=paragraph><p>Итоги: субъект с низким уровнем целостности не может писать в субъект с высоким уровнем целостности; субъект с высоким уровнем целостности не может читать из субъекта с низким уровнем целостности.</p></div></div></div><div class=sect1><h2 id=mac-lomac>15.13. Модуль MAC LOMAC<a class=anchor href=#mac-lomac></a></h2><div class=sectionbody><div class=paragraph><p>Имя модуля: <span class=filename>mac_lomac.ko</span></p></div><div class=paragraph><p>Строка конфигурации ядра: <code>options MAC_LOMAC</code></p></div><div class=paragraph><p>Параметр загрузки: <code>mac_lomac_load="YES"</code></p></div><div class=paragraph><p>В отличие от политики MAC Biba, политика <a href="https://man.freebsd.org/cgi/man.cgi?query=mac_lomac&amp;sektion=4&amp;format=html">mac_lomac(4)</a> разрешает доступ к объектам с более низким уровнем целостности только после уменьшения уровня целостности, чтобы не нарушать каких-либо правил целостности.</p></div><div class=paragraph><p>MAC версия политики целостности Low-watermark, чтобы не пересекаться со старой реализацией <a href="https://man.freebsd.org/cgi/man.cgi?query=lomac&amp;sektion=4&amp;format=html">lomac(4)</a>, работает почти так же, как и Biba, за исключением использования плавающих меток для поддержки понижения метки субъекта через отдел для вспомогательной градации (auxiliary grade compartment). Этот вспомогательный отдел принимает вид <code>[auxgrade]</code>. При включении политики lomac с вспомогательной градацией метка должна выглядеть приблизительно так: <code>lomac/10[2]</code>, где номер 2 это вспомогательная градация.</p></div><div class=paragraph><p>Политика MAC LOMAC основана на тотальной пометке всех системных объектов метками целостности, разрешая субъектам читать из объектов с более низкой степенью целостности и с уменьшением метки субъекта для предотвращения последующей записи в объекты с более высокой степенью целостности. Параметр <code>[auxgrade]</code> обсуждался выше, таким образом политика может быть более совместимой и требовать меньшей первоначальной настройки, чем Biba.</p></div><div class=sect2><h3 id=_примеры_4>15.13.1. Примеры<a class=anchor href=#_примеры_4></a></h3><div class=paragraph><p>Как и для политик Biba и MLS, для установки меток на системные объекты и субъекты могут быть использованы утилиты <code>setfmac</code> и <code>setpmac</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setfmac /usr/home/trhodes lomac/high[low]</span>
<span class=c># getfmac /usr/home/trhodes lomac/high[low]</span></code></pre></div></div><div class=paragraph><p>Обратите внимание, что вспомогательная градация здесь <code>low</code>, эта возможность предоставляется только политикой MAC LOMAC policy.</p></div></div></div></div><div class=sect1><h2 id=mac-implementing>15.14. Реализация защищенной среды с MAC<a class=anchor href=#mac-implementing></a></h2><div class=sectionbody><div class=paragraph><p>Нижеследующая демонстрация реализует защищенную среду с использованием различных MAC модулей с соответственно настроенными политиками. Используйте этот пример только для тестирования, он не предназначен для удовлетворения всех требований к защите. Реализация этих политик без понимания принципа их работы неприменима в реальных задачах.</p></div><div class=paragraph><p>Перед началом процесса настройки, на каждую файловую систему необходимо установить параметр <code>multilabel</code>, который упоминался в начале этой главы. Невыполнение этого требования приведет к ошибкам.</p></div><div class=sect2><h3 id=_создание_insecure_класса_пользователя>15.14.1. Создание insecure класса пользователя<a class=anchor href=#_создание_insecure_класса_пользователя></a></h3><div class=paragraph><p>Начните процедуру добавлением следующего класса пользователя к файлу <span class=filename>/etc/login.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>insecure:\
:copyright=/etc/COPYRIGHT:\
:welcome=/etc/motd:\
:setenv=MAIL=/var/mail/$,BLOCKSIZE=K:\
:path=~/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin
:manpath=/usr/shared/man /usr/local/man:\
:nologin=/usr/sbin/nologin:\
:cputime=1h30m:\
:datasize=8M:\
:vmemoryuse=100M:\
:stacksize=2M:\
:memorylocked=4M:\
:memoryuse=8M:\
:filesize=8M:\
:coredumpsize=8M:\
:openfiles=24:\
:maxproc=32:\
:priority=0:\
:requirehome:\
:passwordtime=91d:\
:umask=022:\
:ignoretime@:\
:label=partition/13,mls/5:</pre></div></div><div class=paragraph><p>и добавлением следующей строки к default классу пользователя:</p></div><div class="literalblock programlisting"><div class=content><pre>:label=mls/equal,biba/equal,partition/equal:</pre></div></div><div class=paragraph><p>После завершения этих действий, для пересборки базы данных должна быть выполнена следующая команда:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cap_mkdb /etc/login.conf</span></code></pre></div></div></div><div class=sect2><h3 id=_загрузка_с_необходимыми_модулями>15.14.2. Загрузка с необходимыми модулями<a class=anchor href=#_загрузка_с_необходимыми_модулями></a></h3><div class=paragraph><p>Добавьте к <span class=filename>/boot/loader.conf</span> следующие строки, чтобы необходимые модули были загружены при старте системы:</p></div><div class="literalblock programlisting"><div class=content><pre>mac_biba_load=&#34;YES&#34;
mac_mls_load=&#34;YES&#34;
mac_seeotheruids_load=&#34;YES&#34;
mac_partition_load=&#34;YES&#34;</pre></div></div></div><div class=sect2><h3 id=_установка_всех_пользователей_в_insecure>15.14.3. Установка всех пользователей в insecure<a class=anchor href=#_установка_всех_пользователей_в_insecure></a></h3><div class=paragraph><p>Всем учетным записям, кроме <code>root</code> или системных пользователей теперь потребуется присвоить класс (login class). При отсутствии класса пользователи не смогут получить доступа к обычным командам, таким как <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a>. Следующий скрипт <code>sh</code> сделает все необходимое:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># for x in `awk -F: &#39;($3 &gt;= 1001) &amp;&amp; ($3 != 65534) { print $1 }&#39; \</span>
	/etc/passwd<span class=sb>`</span><span class=p>;</span> <span class=k>do </span>pw usermod <span class=nv>$x</span> <span class=nt>-L</span> insecure<span class=p>;</span> <span class=k>done</span><span class=p>;</span></code></pre></div></div><div class=paragraph><p>После этого изменения необходимо запустить команду <code>cap_mkdb</code> на файле <span class=filename>/etc/master.passwd</span>.</p></div></div><div class=sect2><h3 id=_завершение_настройки>15.14.4. Завершение настройки<a class=anchor href=#_завершение_настройки></a></h3><div class=paragraph><p>Должен быть создан файл контекста; следующий пример взят из примера политики от Robert Watson, он может быть помещен в <span class=filename>/etc/policy.contexts</span>:</p></div><div class="literalblock programlisting"><div class=content><pre># This is the default BIBA/MLS policy for this system.

.*                              biba/high,mls/high
/sbin/dhclient                  biba/high(low),mls/high(low)
/dev(/.*)?                      biba/equal,mls/equal
# This is not an exhaustive list of all &#34;privileged&#34; devices.
/dev/mdctl                      biba/high,mls/high
/dev/pci                        biba/high,mls/high
/dev/k?mem                      biba/high,mls/high
/dev/io                         biba/high,mls/high
/dev/agp.*                      biba/high,mls/high
(/var)?/tmp(/.*)?               biba/equal,mls/equal
/tmp/\.X11-unix                 biba/high(equal),mls/high(equal)
/tmp/\.X11-unix/.*              biba/equal,mls/equal
/proc(/.*)?                     biba/equal,mls/equal
/mnt.*                          biba/low,mls/low
(/usr)?/home                    biba/high(low),mls/high(low)
(/usr)?/home/.*                 biba/low,mls/low
/var/mail(/.*)?                 biba/low,mls/low
/var/spool/mqueue(/.*)?         biba/low,mls/low
(/mnt)?/cdrom(/.*)?             biba/high,mls/high
(/usr)?/home/(ftp|samba)(/.*)?  biba/high,mls/high
/var/log/sendmail\.st           biba/low,mls/low
/var/run/utmp                   biba/equal,mls/equal
/var/log/(lastlog|wtmp)         biba/equal,mls/equal</pre></div></div><div class=paragraph><p>Эта политика обеспечит безопасность путем применения ограничений на нисходящий и восходящий потоки информации в применении к каталогам и утилитам, приведенным в левой части файла.</p></div><div class=paragraph><p>Он может быть внесен в систему следующими командами:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setfsmac -ef /etc/policy.contexts /</span>
<span class=c># setfsmac -ef /etc/policy.contexts /usr</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Раскладка вышеприведенной файловой системы может быть различной для разных систем.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Файл <span class=filename>/etc/mac.conf</span> требует следующих изменений в основном разделе:</p></div><div class="literalblock programlisting"><div class=content><pre>default_labels file ?biba,?mls
default_labels ifnet ?biba,?mls
default_labels process ?biba,?mls,?partition
default_labels socket ?biba,?mls</pre></div></div></div><div class=sect2><h3 id=_тестирование_настройки>15.14.5. Тестирование настройки<a class=anchor href=#_тестирование_настройки></a></h3><div class=paragraph><p>Добавьте пользователя с помощью команды <code>adduser</code> и поместите его в класс <code>insecure</code> для этих тестов.</p></div><div class=paragraph><p>В примерах ниже тестирование <code>root</code> и обычных пользователей будет смешиваться; форма приглашения поможет различить этих пользователей.</p></div><div class=sect3><h4 id=_основное_тестирование_меток>15.14.5.1. Основное тестирование меток<a class=anchor href=#_основное_тестирование_меток></a></h4><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% getpmac
biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15
<span class=c># setpmac partition/15,mls/equal top</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Процесс top будет уничтожен перед тем, как мы запустим другой процесс top.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_тестирование_mac_seeotheruids>15.14.5.2. Тестирование MAC seeotheruids<a class=anchor href=#_тестирование_mac_seeotheruids></a></h4><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ps Zax
biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15  1096 <span class=c>#C:  S      0:00.03 -su (bash)</span>
biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15  1101 <span class=c>#C:  R+     0:00.01 ps Zax</span></code></pre></div></div><div class=paragraph><p>Просмотр процессов всех других пользователей должен быть запрещен.</p></div></div><div class=sect3><h4 id=_тестирование_mac_partition>15.14.5.3. Тестирование MAC partition<a class=anchor href=#_тестирование_mac_partition></a></h4><div class=paragraph><p>Отключите политику MAC <code>seeotheruids</code> для остальных тестов:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl security.mac.seeotheruids.enabled=0</span>
% ps Zax
LABEL                                                   PID  TT  STAT      TIME COMMAND
  biba/equal<span class=o>(</span>low-high<span class=o>)</span>,mls/equal<span class=o>(</span>low-high<span class=o>)</span>,partition/15  1122 <span class=c>#C:  S+     0:00.02 top</span>
  biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15              1096 <span class=c>#C:  S      0:00.05 -su (bash)</span>
  biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15              1123 <span class=c>#C:  R+     0:00.01 ps Zax</span></code></pre></div></div><div class=paragraph><p>Все пользователи должны видеть каждый процесс в своем разделе (partition).</p></div></div><div class=sect3><h4 id=_тестирование_меток_biba_и_mls>15.14.5.4. Тестирование меток Biba и MLS<a class=anchor href=#_тестирование_меток_biba_и_mls></a></h4><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setpmac partition/15,mls/equal,biba/high\(high-high\) top</span>
% ps Zax
LABEL                                                   PID  TT  STAT    TIME   COMMAND
  biba/high<span class=o>(</span>high-high<span class=o>)</span>,mls/equal<span class=o>(</span>low-high<span class=o>)</span>,partition/15   1251 <span class=c>#C:  S+     0:00.02 top</span>
  biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15               1096 <span class=c>#C:  S      0:00.06 -su (bash)</span>
  biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15               1157 <span class=c>#C:  R+     0:00.00 ps Zax</span></code></pre></div></div><div class=paragraph><p>Политика Biba позволяет чтение объектов с более высокими метками.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># setpmac partition/15,mls/equal,biba/low top</span>
% ps Zax
LABEL                                       PID  TT  STAT      TIME COMMAND
  biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15  1096 <span class=c>#C:  S      0:00.07 -su (bash)</span>
  biba/15<span class=o>(</span>15-15<span class=o>)</span>,mls/15<span class=o>(</span>15-15<span class=o>)</span>,partition/15  1226 <span class=c>#C:  R+     0:00.01 ps Zax</span></code></pre></div></div><div class=paragraph><p>Политика Biba не позволяет чтение объектов с более низкими метками; тем не менее, MLS разрешает это.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ifconfig bge0 | <span class=nb>grep </span>maclabel
maclabel biba/low<span class=o>(</span>low-low<span class=o>)</span>,mls/low<span class=o>(</span>low-low<span class=o>)</span>
% ping <span class=nt>-c</span> 1 192.0.34.166
PING 192.0.34.166 <span class=o>(</span>192.0.34.166<span class=o>)</span>: 56 data bytes
ping: sendto: Permission denied</code></pre></div></div><div class=paragraph><p>Пользователи не могут выполнить ping на <code>example.com</code>, или на любой домен по этой причине.</p></div><div class=paragraph><p>Для устранения этой ошибки, запустите следующую команду:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl security.mac.biba.trust_all_interfaces=1</span></code></pre></div></div><div class=paragraph><p>Она устанавливает метку интерфейса по умолчанию в незащищенный режим, так что политика Biba по умолчанию не будет применена.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig bge0 maclabel biba/equal\(low-high\),mls/equal\(low-high\)</span>
% ping <span class=nt>-c</span> 1 192.0.34.166
PING 192.0.34.166 <span class=o>(</span>192.0.34.166<span class=o>)</span>: 56 data bytes
64 bytes from 192.0.34.166: <span class=nv>icmp_seq</span><span class=o>=</span>0 <span class=nv>ttl</span><span class=o>=</span>50 <span class=nb>time</span><span class=o>=</span>204.455 ms
<span class=nt>---</span> 192.0.34.166 ping statistics <span class=nt>---</span>
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max/stddev <span class=o>=</span> 204.455/204.455/204.455/0.000 ms</code></pre></div></div><div class=paragraph><p>Установив более корректную метку, мы можем использовать <code>ping</code>.</p></div><div class=paragraph><p>Теперь создадим файлы для процедуры тестирования чтения и записи:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch test1 test2 test3 test4 test5</span>
<span class=c># getfmac test1</span>
test1: biba/equal,mls/equal
<span class=c># setfmac biba/low test1 test2; setfmac biba/high test4 test5; \</span>
  setfmac mls/low test1 test3<span class=p>;</span> setfmac mls/high test2 test4
<span class=c># setfmac mls/equal,biba/equal test3 &amp;&amp; getfmac test?</span>
test1: biba/low,mls/low
test2: biba/low,mls/high
test3: biba/equal,mls/equal
test4: biba/high,mls/high
test5: biba/high,mls/equal
<span class=c># chown testuser:testuser test?</span></code></pre></div></div><div class=paragraph><p>Все эти файлы должны принадлежать пользователю <code>testuser</code>. Тесты на чтение:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>ls
</span>test1   test2   test3   test4   test5
% <span class=nb>ls test</span>?
<span class=nb>ls</span>: test1: Permission denied
<span class=nb>ls</span>: test2: Permission denied
<span class=nb>ls</span>: test4: Permission denied
test3   test5</code></pre></div></div><div class=paragraph><p>Доступ на чтение не должен быть разрешен для пар: <code>(biba/low,mls/low)</code>, <code>(biba/low,mls/high)</code> и <code>(biba/high,mls/high)</code>. Теперь несколько тестов на запись:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=k>for </span>i <span class=k>in</span> <span class=sb>`</span><span class=nb>echo test</span><span class=k>*</span><span class=sb>`</span><span class=p>;</span> <span class=k>do </span><span class=nb>echo </span>1 <span class=o>&gt;</span> <span class=nv>$i</span><span class=p>;</span> <span class=k>done</span>
<span class=nt>-su</span>: test1: Permission denied
<span class=nt>-su</span>: test4: Permission denied
<span class=nt>-su</span>: test5: Permission denied</code></pre></div></div><div class=paragraph><p>Подобно тестам на чтение, доступ на запись должен быть запрещен для пар: <code>(biba/low,mls/high)</code> и <code>(biba/equal,mls/equal)</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cat test</span>?
<span class=nb>cat</span>: test1: Permission denied
<span class=nb>cat</span>: test2: Permission denied
1
<span class=nb>cat</span>: test4: Permission denied</code></pre></div></div><div class=paragraph><p>А теперь от <code>root</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat test2</span>
1</code></pre></div></div></div></div></div></div><div class=sect1><h2 id=MAC-examplehttpd>15.15. Другой пример: Использование MAC для защиты веб сервера<a class=anchor href=#MAC-examplehttpd></a></h2><div class=sectionbody><div class=paragraph><p>Будет создано отдельное хранилище для веб данных, к которому пользователи должны иметь доступ. Это позволит <code>biba/high</code> управлять доступом к веб данным.</p></div><div class=paragraph><p>Начните с создания каталога для хранения веб данных:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /usr/home/cvs</span></code></pre></div></div><div class=paragraph><p>Теперь инициализируйте его командой <code>cvs</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cvs -d /usr/home/cvs init</span></code></pre></div></div><div class=paragraph><p>Для начала необходимо включить политику <code>biba</code>, добавив <code>mac_biba_enable="YES"</code> в <span class=filename>/boot/loader.conf</span>. Предполагается, что ядро скомпилировано с поддержкой MAC.</p></div><div class=paragraph><p>Далее установите метку <code>biba/high</code> для всей системы по умолчанию.</p></div><div class=paragraph><p>В файл <span class=filename>login.conf</span>, класс default, необходимо внести следующие изменения:</p></div><div class="literalblock programlisting"><div class=content><pre>:ignoretime@:\
	:umask=022:\
	:label=biba/high:</pre></div></div><div class=paragraph><p>Каждого пользователя необходимо поместить в класс по умолчанию; такая команда:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># for x in `awk -F: &#39;($3 &gt;= 1001) &amp;&amp; ($3 != 65534) { print $1 }&#39; \</span>
	/etc/passwd<span class=sb>`</span><span class=p>;</span> <span class=k>do </span>pw usermod <span class=nv>$x</span> <span class=nt>-L</span> default<span class=p>;</span> <span class=k>done</span><span class=p>;</span></code></pre></div></div><div class=paragraph><p>быстро решит эту задачу.</p></div><div class=paragraph><p>Теперь создадим другой класс, web, копию класса default с меткой, установленной в <code>biba/low</code>.</p></div><div class=paragraph><p>Создайте пользователя для работы с основными веб данными, хранящимися в репозитории cvs. Этого пользователя необходимо поместить в новый класс, <code>web</code>.</p></div><div class=paragraph><p>Поскольку метка по умолчанию <code>biba/high</code>, на репозитории она будет той же. Веб данные должны иметь ту же метку, чтобы у пользователей был доступ к ним на чтение/запись. Веб сервер должен иметь доступ к тем же данным, к которым есть доступ у пользователей с меткой <code>biba/high</code>, для этого необходимо понизить метку данных.</p></div><div class=paragraph><p>Все, что потребуется, это следующий <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a> скрипт, который может быть запущен из <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>:</p></div><div class="literalblock programlisting"><div class=content><pre>PATH=/bin:/usr/bin:/usr/local/bin; export PATH;
CVSROOT=/home/repo; export CVSROOT;
cd /home/web;
cvs -qR checkout -P htdocs;
exit;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Во многих случаях в веб файлы <code>cvs</code> необходимо поместить теги Id.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Этот скрипт теперь может быть помещен в домашний каталог каталог пользователя <code>web</code>, необходимо также добавить следующую запись <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=1&amp;format=html">crontab(1)</a>:</p></div><div class="literalblock programlisting"><div class=content><pre># Выполнять checkout web данных под меткой biba/low каждые 12 часов:
0       */12       *       *       *       web    /home/web/checkout.sh</pre></div></div><div class=paragraph><p>Эта запись будет извлекать HTML страницы каждые двенадцать часов.</p></div><div class=paragraph><p>Метод запуска веб сервера по умолчанию также должен быть изменен для запуска процесса с меткой <code>biba/low</code>. Это может быть сделано путем следующего изменения в скрипте <span class=filename>/usr/local/etc/rc.d/apache.sh</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>command=&#34;setpmac biba/low /usr/local/sbin/httpd&#34;</pre></div></div><div class=paragraph><p>Настройки Apache должны быть изменены для работы с политикой <code>biba/low</code>. В этом случае необходимо указать для хранения лог файлов каталог с меткой <code>biba/low</code>, иначе будут возвращены ошибки <code>access denied</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>В этом примере необходимо указать в директиве <code>docroot</code> каталог <span class=filename>/home/web/htdocs</span>; или, Apache не сможет найти каталог с документами.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Необходимо также изменить другие параметры конфигурации, включая PID файл, <code>Scoreboardfile</code>, <code>DocumentRoot</code>, или любые другие настройки для каталогов, где необходим доступ на запись. При использовании <code>biba</code> будет запрещен доступ на запись во все каталоги сервера, на которых нет метки <code>biba/low</code>.</p></div></div></div><div class=sect1><h2 id=mac-troubleshoot>15.16. Решение проблем с инфраструктурой MAC<a class=anchor href=#mac-troubleshoot></a></h2><div class=sectionbody><div class=paragraph><p>На стадии разработки несколько пользователей сообщали о проблемах при обычных настройках. Некоторые из этих проблем приведены ниже:</p></div><div class=sect2><h3 id=_параметр_multilabel_не_может_быть_включен_на>15.16.1. Параметр <code>multilabel</code> не может быть включен на <span class=filename>/</span><a class=anchor href=#_параметр_multilabel_не_может_быть_включен_на></a></h3><div class=paragraph><p>Параметр <code>multilabel</code> не включается на моем корневом (<span class=filename>/</span>) разделе!</p></div><div class=paragraph><p>Похоже, что каждый пятидесятый пользователь сталкивается с этой проблемой; на самом деле, и у нас была эта проблема в первых настройках. Дальнейшие наблюдения за этой так называемой "ошибкой" привели меня к мнению, что это результат или некорректной документации, или неправильной интерпретации этой документации. Независимо от того, почему это случилось, для решения этой проблемы могут быть предприняты следующие шаги:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Отредактируйте <span class=filename>/etc/fstab</span> и установите для корневого раздела параметр только для чтения (<code>ro</code>).</p></li><li><p>Перегрузитесь в однопользовательский режим.</p></li><li><p>Запустите команду <code>tunefs -l enable</code> на <span class=filename>/</span>.</p></li><li><p>Перегрузите систему в нормальный режим.</p></li><li><p>Запустите <code>mount -urw</code><span class=filename>/</span> и измените параметр <code>ro</code> обратно на <code>rw</code> в <span class=filename>/etc/fstab</span>; перегрузите систему опять.</p></li><li><p>Дважды проверьте вывод <code>mount</code>, чтобы убедиться, что параметр <code>multilabel</code> был установлен на корневой файловой системе.</p></li></ol></div></div></div></div><div class=sect2><h3 id=_не_могу_запустить_xfree86_после_mac>15.16.2. Не могу запустить XFree86™ после MAC<a class=anchor href=#_не_могу_запустить_xfree86_после_mac></a></h3><div class=paragraph><p>После настройки системы безопасности MAC, я больше не могу запускать XFree86™!</p></div><div class=paragraph><p>Это может быть вызвано политикой MAC <code>partition</code> или путем неправильной установки меток одной из политик MAC. Для отладки попробуйте следующее:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Просмотрите сообщение об ошибке; если пользователь находится в классе <code>insecure</code>, проблема может быть в политике <code>partition</code>. Попробуйте установить класс пользователя обратно в <code>default</code> и пересобрать базу данных командой <code>cap_mkdb</code>. Если это не решит проблемы, попробуйте шаг два.</p></li><li><p>Дважды проверьте политики с метками. Убедитесь, что политики настроены правильно для рассматриваемого пользователя, приложения XFree86™, и устройств в <span class=filename>/dev</span>.</p></li><li><p>Если проблема не решена, отправьте сообщение об ошибке и описание вашей системы в список рассылки TrustedBSD, находящийся на веб сайте <a href=http://www.TrustedBSD.org>TrustedBSD</a> или в <a href=https://lists.FreeBSD.org/subscription/freebsd-questions>Список рассылки, посвящённый вопросам и ответам пользователей FreeBSD</a>.</p></li></ol></div></div></div></div><div class=sect2><h3 id=_error_secure_path3_cannot_stat_login_conf>15.16.3. Error: <a href="https://man.freebsd.org/cgi/man.cgi?query=_secure_path&amp;sektion=3&amp;format=html">_secure_path(3)</a> cannot stat <span class=filename>.login_conf</span><a class=anchor href=#_error_secure_path3_cannot_stat_login_conf></a></h3><div class=paragraph><p>При попытке переключения от <code>root</code> на другого пользователя системы, появляется сообщение об ошибке <code>_secure_path: unable to state .login_conf</code>.</p></div><div class=paragraph><p>Это сообщение обычно показывается, когда у пользователя более высокая метка, чем у пользователя, которым он пытается стать. Например, у пользователя системы <code>joe</code> метка по умолчанию <code>biba/low</code>. Пользователь <code>root</code>, метка которого <code>biba/high</code>, не может просматривать домашний каталог пользователя <code>joe</code>. Это не зависит от того, использует ли пользователь <code>root</code> команду <code>su joe</code> или нет. В этом сценарии модель целостности Biba не позволит <code>root</code> просматривать объекты с низким уровнем целостности.</p></div></div><div class=sect2><h3 id=_пользователя_root_нет>15.16.4. Пользователя <code>root</code> нет!<a class=anchor href=#_пользователя_root_нет></a></h3><div class=paragraph><p>В нормальном или даже однопользовательском режиме <code>root</code> не обнаруживается. Команда <code>whoami</code> возвращает 0 (нуль) и <code>su</code> возвращает <code>who are you?</code>. Что можно сделать?</p></div><div class=paragraph><p>Это может произойти, если политика с метками была отключена, или через <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a>, или путем выгрузки модуля политики. Если политика была постоянно или временно отключена, базу данных login необходимо перенастроить. Дважды проверьте <span class=filename>login.conf</span>, чтобы убедиться, что все параметры <code>label</code> были удалены и пересоберите базу данных командой <code>cap_mkdb</code>.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Изменено</strong>: 9 марта 2024 г. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Назад></i><div class=container><a href=https://docs.freebsd.org/ru/books/handbook/security class=direction>Назад</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Главная></i><div class=container><a href=../ class=direction>Главная</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/ru/books/handbook/audit class=direction>Далее</a></div><i class="fa fa-angle-right" aria-hidden=true title=Далее></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#mac-synopsis>15.1. Краткий обзор</a></li><li><a href=#mac-inline-glossary>15.2. Ключевые термины этой главы</a></li><li><a href=#mac-initial>15.3. Описание MAC</a></li><li><a href=#mac-understandlabel>15.4. Метки MAC</a></li><li><a href=#mac-modules>15.5. Настройка модулей</a></li><li><a href=#mac-bsdextended>15.6. Модуль MAC bsdextended</a></li><li><a href=#mac-ifoff>15.7. Модуль MAC ifoff</a></li><li><a href=#mac-portacl>15.8. Модуль MAC portacl</a></li><li><a href=#mac-labelingpolicies>15.9. Политики MAC, использующие метки</a></li><li><a href=#mac-partition>15.10. Модуль MAC partition</a></li><li><a href=#mac-mls>15.11. Модуль многоуровневой безопасности MAC (MLS)</a></li><li><a href=#mac-biba>15.12. Модуль MAC Biba</a></li><li><a href=#mac-lomac>15.13. Модуль MAC LOMAC</a></li><li><a href=#mac-implementing>15.14. Реализация защищенной среды с MAC</a></li><li><a href=#MAC-examplehttpd>15.15. Другой пример: Использование MAC для защиты веб сервера</a></li><li><a href=#mac-troubleshoot>15.16. Решение проблем с инфраструктурой MAC</a></li></ul></nav><hr><div class=resources><h3>Материалы</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Скачать PDF"></i><a href=https://download.freebsd.org/doc/ru/books/handbook/handbook_ru.pdf>Скачать PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Редактировать эту страницу"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ru/_index target=_blank>Редактировать эту страницу</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/ru/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Выберите язык">
<span>Русский</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Система</option><option value=theme-light>Светлый</option><option value=theme-dark>Тёмный</option><option value=theme-high-contrast>Высокая контрастность</option></select></div></div></section><section class=about-column><h3 class=column-title>О нас</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Кодекс Этики</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Бюллетени Безопасности</a></li></ul></section><section class=documentation-column><h3 class=column-title>Документация</h3><ul class=column-elements-container><li><a href=/ru class=column-element>Портал документации</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Презентации и публикации</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Предыдущие версии</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>Документы 4.4BSD</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Сообщество</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/ru/articles/contributing class=column-element>Принять участие</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Форум Сообщества</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Трекер ошибок</a></li></ul></section><section class=legal-column><h3 class=column-title>Юридическая информация</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Пожертвования</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Лицензирование</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Политика Конфиденциальности</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Юридические оговорки</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 Проект FreeBSD. Все права защищены</p><span>Сделано с помощью <span class=heart>♥</span> Сообществом FreeBSD</span></section></div></footer></body></html>