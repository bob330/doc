<!doctype html><html class=theme-light lang=ru><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/><title>Глава 9. Настройка ядра FreeBSD | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Глава 9. Настройка ядра FreeBSD"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ru"><meta property="og:url" content="http://172.16.201.134:1313/ru/books/handbook/kernelconfig/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/ru\/books\/handbook\/kernelconfig\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>О нас
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>О нас</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Кодекс Этики</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Получить FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Информация о релизах</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Подготовка релизов</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Бюллетени Безопасности</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Документация
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ru>Портал документации</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook>Руководство</a></li><li><a href=http://172.16.201.134:1313/ru/books/porters-handbook>Руководство по созданию портов</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Учебник Проекта Документирования</a></li><li><a href=https://man.FreeBSD.org target=_blank>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Презентации и публикации</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/ru/books>Книги</a></li><li><a href=http://172.16.201.134:1313/ru/articles>Статьи</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Сообщество
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Сообщество</a></li><li><a href=http://172.16.201.134:1313/ru/articles/contributing>Стать участником</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Форум</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Трекер ошибок</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Поддержка</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ru>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Пожертвования</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Поиск aria-label=Поиск maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/preface/>Предисловие</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-audience>Целевая аудитория</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-changes-from4>Четвёртое издание</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-changes-from3>Третье издание</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-changes-from2>Второе издание (2004)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-changes>Первое издание (2001)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-overview>Структура этой книги</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-conv>Договоренности, используемые в этой книге</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/preface/#preface-acknowledgements>Благодарности</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/parti/>Часть I. В начале</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/introduction/>Глава 1. Введение</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/introduction/#introduction-synopsis>1.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/introduction/#nutshell>1.2. Добро пожаловать во FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/introduction/#history>1.3. О Проекте FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/install/>Глава 2. Установка FreeBSD версий 8.X и более ранних</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-synopsis>2.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-hardware>2.2. Аппаратные требования</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-pre>2.3. Перед установкой</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-start>2.4. Начало установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#using-sysinstall>2.5. Введение в Sysinstall</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-steps>2.6. Выделение дискового пространства</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-choosing>2.7. Выбор устанавливаемых компонентов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-media>2.8. Выбор источника для установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-final-warning>2.9. Подтверждение установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-post>2.10. После установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-trouble>2.11. Решение проблем</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-advanced>2.12. Расширенное руководство по установке</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/install/#install-diff-media>2.13. Подготовка собственного источника установки</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/>Глава 3. Установка FreeBSD версий 9.X и более поздних</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-synopsis>3.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-hardware>3.2. Аппаратные требования</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-pre>3.3. Перед установкой</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-start>3.4. Начало установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#using-bsdinstall>3.5. Введение в bsdinstall</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-netinstall>3.6. Установка по сети</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-partitioning>3.7. Выделение дискового пространства</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-final-warning>3.8. Завершение установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-post>3.9. После установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#bsdinstall-install-trouble>3.10. Решение проблем</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bsdinstall/#using-live-cd>3.11. Использование Live CD</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/basics/>Глава 4. Основы UNIX</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#basics-synopsis>4.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#consoles>4.2. Виртуальные консоли и терминалы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#users-synopsis>4.3. Пользователи и основы управления учетными записями</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#permissions>4.4. Права доступа</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#dirstructure>4.5. Структура каталогов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#disk-organization>4.6. Организация дисков</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#mount-unmount>4.7. Монтирование и размонтирование файловых систем</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#basics-processes>4.8. Процессы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#basics-daemons>4.9. Даемоны, сигналы, уничтожение процессов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#shells>4.10. Интерпретатор команд</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#editors>4.11. Текстовые редакторы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#basics-devices>4.12. Устройства и файлы устройств</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#binary-formats>4.13. Бинарные форматы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/basics/#basics-more-information>4.14. Дополнительная информация</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/ports/>Глава 5. Установка приложений: порты и пакеты</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#ports-synopsis>5.1. Обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#ports-overview>5.2. Обзор установки программного обеспечения</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#ports-finding-applications>5.3. Поиск программного обеспечения</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#packages-using>5.4. Использование бинарных пакетов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#pkgng-intro>5.5. Использование pkgng для управления бинарными пакетами</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#ports-using>5.6. Использование Коллекции Портов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#ports-nextsteps>5.7. Действия после установки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ports/#ports-broken>5.8. Обработка нерабочих портов</a></li></ul></li><li><input type=checkbox id=chapter-f56428b9e0d0b77cc8e863910f96bbde class=toggle>
<label class="icon cursor" for=chapter-f56428b9e0d0b77cc8e863910f96bbde><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/>Глава 6. Wayland</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-synopsis>6.1. Общие сведения о Wayland</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-wayfire>6.2. Композитный менеджер Wayfire</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-hikari>6.3. Композитный менеджер Hikari</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-sway>6.4. Композитный менеджер Sway</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-xwayland>6.5. Использование Xwayland</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-remotedesktop>6.6. Организация Удалённого Рабочего Стола при помощи VNC</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-ly>6.7. Менеджер регистраций Wayland</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/wayland/#wayland-utilities>6.8. Полезные Инструменты</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/x11/>Глава 6. X Window System</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/x11/#x11-synopsis>6.1. Обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/x11/#x-understanding>6.2. Основы X</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/x11/#x-install>6.3. Установка X11</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/x11/#x-config>6.4. Конфигурация X11</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/x11/#x-fonts>6.5. Использование шрифтов в X11</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/x11/#x-xdm>6.6. Менеджеры экранов (Display Managers) X</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/x11/#x11-wm>6.7. Графические оболочки</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/partii/>Часть II. Общие задачи</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/desktop/>Глава 7. Приложения для настольного компьютера</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/desktop/#desktop-synopsis>7.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/desktop/#desktop-browsers>7.2. Браузеры</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/desktop/#desktop-productivity>7.3. Бизнес приложения</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/desktop/#desktop-viewers>7.4. Программы просмотра документов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/desktop/#desktop-finance>7.5. Финансовые программы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/desktop/#desktop-summary>7.6. Итоги</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia/>Глава 8. Мультимедиа</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia/#multimedia-synopsis>8.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia/#sound-setup>8.2. Настройка звуковой карты</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia/#sound-mp3>8.3. Звук MP3</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia/#video-playback>8.4. Воспроизведение видео</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia/#tvcard>8.5. Настройка ТВ тюнеров</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia/#scanners>8.6. Сканеры</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle checked>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/>Глава 9. Настройка ядра FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Зачем собирать собственное ядро?</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/#kernelconfig-devices>9.3. Определение аппаратного обеспечения</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Драйвера, подсистемы и модули ядра</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/#kernelconfig-building>9.5. Сборка и установка собственного ядра</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/#kernelconfig-config>9.6. Конфигурационный файл</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Решение проблем</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/printing/>Глава 10. Печать</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/printing/#printing-synopsis>10.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/printing/#printing-intro-spooler>10.2. Введение</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/printing/#printing-intro-setup>10.3. Основная настройка</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/printing/#printing-advanced>10.4. Расширенная настройка принтера</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/printing/#printing-using>10.5. Использование принтеров</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/printing/#printing-lpd-alternatives>10.6. Альтернативы стандартному спулеру</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/printing/#printing-troubleshooting>10.7. Выявление проблем</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/>Глава 11. Двоичная совместимость с Linux</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Установка</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Установка Mathematica®</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#linuxemu-maple>11.4. Установка Maple™</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#linuxemu-matlab>11.5. Установка MATLAB®</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#linuxemu-oracle>11.6. Установка Oracle®</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#sapr3>11.7. Установка SAP® R/3®</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/linuxemu/#linuxemu-advanced>11.8. Дополнительные сведения</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/partiii/>Часть III. Системное администрирование</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/config/>Глава 12. Настройка и оптимизация</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#config-synopsis>12.1. Введение</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-initial>12.2. Начальное конфигурирование</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-core-configuration>12.3. Основные настройки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-appconfig>12.4. Настройка приложений</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-starting-services>12.5. Запуск сервисов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-cron>12.6. Настройка утилиты <code>cron</code></a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-rcd>12.7. Использование rc во FreeBSD 5.X и последующих версиях</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#config-network-setup>12.8. Настройка карт сетевых интерфейсов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-virtual-hosts>12.9. Настройка виртуальных серверов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-configfiles>12.10. Файлы настройки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-sysctl>12.11. Настройка с помощью sysctl</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-disk>12.12. Оптимизация дисков</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#configtuning-kernel-limits>12.13. Изменение ограничений, накладываемых ядром</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#adding-swap-space>12.14. Увеличение объема подкачки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#acpi-overview>12.15. Управление питанием и ресурсами</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/config/#ACPI-debug>12.16. Использование и отладка FreeBSD ACPI</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/boot/>Глава 13. Процесс загрузки FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/boot/#boot-synopsis>13.1. Описание</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/boot/#boot-introduction>13.2. Проблема загрузки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/boot/#boot-blocks>13.3. Менеджер загрузки и этапы загрузки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/boot/#boot-kernel>13.4. Взаимодействие с ядром во время загрузки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/boot/#device-hints>13.5. Хинты устройств</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/boot/#boot-init>13.6. Init: инициализация управления процессами</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/boot/#boot-shutdown>13.7. Процесс остановки системы</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/security/>Глава 14. Безопасность</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#security-synopsis>14.1. Краткое описание</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#security-intro>14.2. Введение</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#securing-freebsd>14.3. Защита FreeBSD</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#crypt>14.4. DES, MD5, и шифрование</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#one-time-passwords>14.5. Одноразовые пароли</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#tcpwrappers>14.6. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#ipsec>14.10. VPN через IPsec</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#fs-acl>14.12. Списки контроля доступа файловой системы (ACL)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#security-portaudit>14.13. Мониторинг вопросов безопасности в ПО сторонних разработчиков</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#security-advisories>14.14. Сообщения безопасности FreeBSD</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/security/#security-accounting>14.15. Учёт используемых ресурсов</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/mac/>Глава 15. Принудительный контроль доступа (MAC)</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-synopsis>15.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-inline-glossary>15.2. Ключевые термины этой главы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-initial>15.3. Описание MAC</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-understandlabel>15.4. Метки MAC</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-modules>15.5. Настройка модулей</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-bsdextended>15.6. Модуль MAC bsdextended</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-ifoff>15.7. Модуль MAC ifoff</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-portacl>15.8. Модуль MAC portacl</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-labelingpolicies>15.9. Политики MAC, использующие метки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-partition>15.10. Модуль MAC partition</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-mls>15.11. Модуль многоуровневой безопасности MAC (MLS)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-biba>15.12. Модуль MAC Biba</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-lomac>15.13. Модуль MAC LOMAC</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-implementing>15.14. Реализация защищенной среды с MAC</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#MAC-examplehttpd>15.15. Другой пример: Использование MAC для защиты веб сервера</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mac/#mac-troubleshoot>15.16. Решение проблем с инфраструктурой MAC</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/audit/>Глава 16. Аудит событий безопасности</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/audit/#audit-synopsis>16.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/audit/#audit-inline-glossary>16.2. Ключевые понятия</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/audit/#audit-config>16.3. Настройка системы аудита</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/audit/#audit-administration>16.4. Работа с журналами аудита</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/disks/>Глава 17. Устройства хранения</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#disks-synopsis>17.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#disks-naming>17.2. Имена устройств</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#disks-adding>17.3. Добавление дисков</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#raid>17.4. RAID</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#usb-disks>17.5. USB устройства хранения</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#creating-cds>17.6. Запись и использование оптических носителей (CD)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#creating-dvds>17.7. Создание и использование оптических носителей (DVD)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#floppies>17.8. Дискеты</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#backups-tapebackups>17.9. Создание и использование архивных копий на магнитной ленте</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#backups-floppybackups>17.10. Создание резервных копий на дискетах</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#backup-strategies>17.11. Стратегии резервного копирования</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#backup-basics>17.12. Основы технологии резервного копирования</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#disks-virtual>17.13. Сетевые файловые системы, файловые системы в памяти и с отображением в файл</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#snapshots>17.14. Мгновенные копии файловых систем</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#quotas>17.15. Квотирование файловых систем</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#disks-encrypting>17.16. Шифрование дисковых разделов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/disks/#swap-encrypting>17.17. Шифрование области подкачки</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/geom/>Глава 18. GEOM: Модульная инфраструктура преобразования дисковых запросов</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/geom/#GEOM-synopsis>18.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/geom/#GEOM-intro>18.2. Введение в GEOM</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/geom/#GEOM-striping>18.3. RAID0 - Создание дисковой последовательности (Striping)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/geom/#GEOM-mirror>18.4. RAID1 - Зеркалирование (Mirroring)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/geom/#geom-ggate>18.5. Сетевые устройства GEOM Gate</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/geom/#geom-glabel>18.6. Метки дисковых устройств</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/geom/#geom-gjournal>18.7. Журналирование UFS средствами GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/filesystems/>Глава 19. Поддержка файловых систем</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/filesystems/#filesystems-synopsis>19.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/filesystems/#filesystems-zfs>19.2. Файловая система ZFS</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/l10n/>Глава 20. Локализация - использование и настройка i18n/L10n</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/l10n/#l10n-synopsis>20.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/l10n/#using-localization>20.2. Использование локализации</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/l10n/#l10n-compiling>20.3. Поиск приложений i18n</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/l10n/#lang-setup>20.4. Настройка локализации для некоторых языков</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/>Глава 21. Обновление системы и смена версии FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/#updating-upgrading-synopsis>21.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>21.2. Обновление FreeBSD</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/#updating-upgrading-documentation>21.3. Обновление документации</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/#current-stable>21.4. Использование ветви разработки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/#synching>21.5. Синхронизация исходных текстов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/#makeworld>21.6. Пересборка мира</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/cutting-edge/#small-lan>21.7. Отслеживание исходных текстов для нескольких машин</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/partiv/>Часть IV. Сетевые коммуникации</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/serialcomms/>Глава 22. Последовательные соединения</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/serialcomms/#serial-synopsis>22.1. Краткое описание</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/serialcomms/#serial>22.2. Введение</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/serialcomms/#term>22.3. Терминалы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/serialcomms/#dialup>22.4. Входящие соединения по модему</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/serialcomms/#dialout>22.5. Исходящие соединения по модему</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/serialcomms/#serialconsole-setup>22.6. Настройка последовательной консоли</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/>Глава 23. PPP и SLIP</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>23.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/#userppp>23.2. PPP уровня пользователя</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/#ppp>23.3. PPP уровня ядра</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/#ppp-troubleshoot>23.4. Решение проблем с соединениями PPP</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/#pppoe>23.5. Использование PPP через Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/#pppoa>23.6. Использование PPP через ATM (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/ppp-and-slip/#slip>23.7. Использование SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/mail/>Глава 24. Электронная почта</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-synopsis>24.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-using>24.2. Использование электронной почты</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#sendmail>24.3. Настройка sendmail</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-changingmta>24.4. Установка другой почтовой программы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-trouble>24.5. Поиск и устранение неисправностей</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-advanced>24.6. Расширенное руководство</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#outgoing-only>24.7. Настройка почты только для отправки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#SMTP-dialup>24.8. Использование почты с коммутируемым соединением</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#SMTP-Auth>24.9. SMTP аутентификация</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-agents>24.10. Почтовые программы пользователей</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-fetchmail>24.11. Использование fetchmail</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mail/#mail-procmail>24.12. Использование procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/>Глава 25. Сетевые серверы</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-servers-synopsis>25.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-inetd>25.2. "Супер-сервер"inetd</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-nfs>25.3. Network File System (NFS)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-nis>25.4. Network Information System (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-dhcp>25.5. Автоматическая настройка сети (DHCP)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-dns>25.6. Domain Name System (DNS)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-apache>25.7. Apache HTTP сервер</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-samba>25.8. Файл сервер и печать для Microsoft® Windows® клиентов (Samba)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-ftp>25.9. Протокол передачи файлов (FTP)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-ntp>25.10. Синхронизация часов через NTP</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/network-servers/#network-syslogd>25.11. * Remote Host Logging with <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/firewalls/>Глава 26. Межсетевые экраны</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/firewalls/#firewalls-intro>26.1. Введение</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/firewalls/#firewalls-concepts>26.2. Принципы работы межсетевых экранов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/firewalls/#firewalls-apps>26.3. Пакеты межсетевых экранов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/firewalls/#firewalls-pf>26.4. Packet Filter (PF, межсетевой экран OpenBSD) и ALTQ</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/firewalls/#firewalls-ipf>26.5. * IPFILTER (IPF)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/firewalls/#firewalls-ipfw>26.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/>Глава 27. Сложные вопросы работы в сети</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#advanced-networking-synopsis>27.1. Краткий обзор</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-routing>27.2. Сетевые шлюзы и маршруты</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-wireless>27.3. Беспроводные сети</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-bluetooth>27.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-bridging>27.5. Мосты</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-diskless>27.6. Работа с бездисковыми станциями</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-isdn>27.7. ISDN</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-natd>27.8. Даемон преобразования сетевых адресов (natd)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-plip>27.9. IP по параллельному порту (PLIP)</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-ipv6>27.10. IPv6</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/advanced-networking/#network-atm>27.11. Асинхронный режим передачи (ATM)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/partv/>Часть V. Приложения</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/mirrors/>Приложение A. Получение FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/mirrors/#mirrors-cdrom>A.1. Наборы CD и DVD</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mirrors/#mirrors-ftp>A.2. FTP сайты</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mirrors/#ctm>A.3. Использование CTM</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mirrors/#svn>A.4. Использование Subversion</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/mirrors/#mirrors-rsync>A.5. Использование rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/>Приложение B. Библиография</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-freebsd>B.1. Книги и журналы, специализирующиеся на FreeBSD</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-userguides>B.2. Руководства для пользователей</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-adminguides>B.3. Руководства для администраторов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-programmers>B.4. Руководства для программистов</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-osinternals>B.5. Внутренности операционной системы</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-security>B.6. Безопасность</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-hardware>B.7. Оборудование</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-history>B.8. История UNIX®</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/bibliography/#bibliography-journals>B.9. Прочие издания</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/eresources/>Приложение C. Ресурсы в интернет</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/eresources/#eresources-mail>C.1. Списки рассылки</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/eresources/#eresources-news>C.2. Новостные группы Usenet</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/eresources/#eresources-web>C.3. Серверы World Wide Web</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook/eresources/#eresources-email>C.4. Адреса Email</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/ru/books/handbook/pgpkeys/>Приложение D. PGP ключи</a><ul><li><a href=http://172.16.201.134:1313/ru/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Офицеры</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Меню книг"></i>
Меню книг</span></label></div><h1 class=title>Глава 9. Настройка ядра FreeBSD</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Этот перевод может быть устаревшим. Для того, чтобы помочь с переводом, пожалуйста, обратитесь к <a href=https://translate-dev.freebsd.org/ target=_blank>Сервер переводов FreeBSD</a>.</p></div><div class=toc-mobile><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#kernelconfig-synopsis>9.1. Краткий обзор</a></li><li><a href=#kernelconfig-custom-kernel>9.2. Зачем собирать собственное ядро?</a></li><li><a href=#kernelconfig-devices>9.3. Определение аппаратного обеспечения</a></li><li><a href=#kernelconfig-modules>9.4. Драйвера, подсистемы и модули ядра</a></li><li><a href=#kernelconfig-building>9.5. Сборка и установка собственного ядра</a></li><li><a href=#kernelconfig-config>9.6. Конфигурационный файл</a></li><li><a href=#kernelconfig-trouble>9.7. Решение проблем</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=kernelconfig-synopsis>9.1. Краткий обзор<a class=anchor href=#kernelconfig-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Ядро - это основная часть операционной системы FreeBSD. Оно ответственно за управление памятью, параметры безопасности, работу с сетью, доступ к дискам и многое другое. Несмотря на то, что FreeBSD становится всё более динамически конфигурируемой, иногда приходится собирать собственное ядро.</p></div><div class=paragraph><p>После прочтения этой главы вы узнаете:</p></div><div class=ulist><ul><li><p>Почему вам может понадобиться сборка собственного ядра.</p></li><li><p>Как написать файл конфигурации ядра или изменить существующий.</p></li><li><p>Как использовать файл конфигурации ядра для того, чтобы создать и собрать новое ядро.</p></li><li><p>Как установить новое ядро.</p></li><li><p>Что делать, если что-то не работает или работает не так, как должно.</p></li></ul></div><div class=paragraph><p>Все команды, приводимые в этой главе в качестве примера, должны выполняться от пользователя <code>root</code>.</p></div></div></div><div class=sect1><h2 id=kernelconfig-custom-kernel>9.2. Зачем собирать собственное ядро?<a class=anchor href=#kernelconfig-custom-kernel></a></h2><div class=sectionbody><div class=paragraph><p>Традиционно в FreeBSD использовалось так называемое "монолитное" ядро. Это означает, что ядро - это одна большая программа, которая поддерживает фиксированный набор устройств и в случае, если необходимо изменить его поведение, требуется сборка нового ядра и перезагрузка компьютера уже с новым ядром.</p></div><div class=paragraph><p>На сегодняшний день FreeBSD быстро продвигается к модели, в которой большая часть функциональности содержится в модулях, которые могут быть при необходимости динамически загружены и выгружены из ядра. Это позволяет ядру использовать устройства, которые "внезапно" появились в системе (например, устройства PCMCIA в лэптопе) или добавлять новую функциональность в ядро, которая не была необходима в момент первоначальной сборки ядра. Такой подход известен как модульность ядра.</p></div><div class=paragraph><p>Несмотря на это, всё ещё иногда бывает необходимо, чтобы некоторая функциональность была вкомпилирована в ядро статически. В некоторых случаях это продиктовано тем, что эта функциональность настолько сильно привязана к ядру, что не может быть динамически загружаемой. В других случаях это может быть просто потому, что никто не уделил время написанию динамически загружаемого модуля для этой функциональности.</p></div><div class=paragraph><p>Сборка собственного ядра - один из наиболее важных ритуалов, совершаемых опытными пользователями BSD. Несмотря на длительность этого процесса, ваша FreeBSD останется только в выигрыше. В отличие от ядра <span class=filename>GENERIC</span>, которое должно поддерживать широкий спектр аппаратного обеспечения, собственное ядро содержит поддержку аппаратного обеспечения только <em>вашего</em> компьютера. Это может давать следующие преимущества:</p></div><div class=ulist><ul><li><p>Меньшее время загрузки. Поскольку ядро будет пытаться определить только то аппаратное обеспечение, которое установлено в вашем компьютере, время, которое потребуется системе для загрузки, может значительно уменьшиться.</p></li><li><p>Уменьшение использования памяти. Собственное ядро часто использует меньше памяти, чем ядро <span class=filename>GENERIC</span>, так как из него исключены лишние драйвера и неиспользуемые функциональные возможности. Это важно тем, что часть оперативной памяти постоянно занята кодом ядра и поэтому не может быть выделена приложениям. Именно по этой причине собственное ядро особенно полезно при использовании систем с малым объемом оперативной памяти.</p></li><li><p>Поддержка дополнительного аппаратного обеспечения. Собственное ядро позволяет вам добавить поддержку устройств, отсутствующих в ядре <span class=filename>GENERIC</span>.</p></li></ul></div></div></div><div class=sect1><h2 id=kernelconfig-devices>9.3. Определение аппаратного обеспечения<a class=anchor href=#kernelconfig-devices></a></h2><div class=sectionbody><div class=paragraph><p>Перед тем, как углубиться в конфигурирование ядра, было бы разумно составить перечень установленного в компьютер аппаратного обеспечения. Если FreeBSD не является основной операционной системой, то перечень оборудования может быть легко составлен на основании анализа конфигурации текущей операционной системы. Например, Диспетчер устройств (Device Manager) от Microsoft® обычно содержит необходимую информацию об установленных устройствах. Диспетчер устройств находится на панели управления (control panel).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>У некоторых версий Microsoft® Windows® есть значок Система (System), вызов которого отобразит экран, содержащий среди прочих и Диспетчер устройств.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Если других операционных систем на машине не установлено, системному администратору придется искать эту информацию самостоятельно. Один из методов подразумевает использование утилиты <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a> и команды <a href="https://man.freebsd.org/cgi/man.cgi?query=man&amp;sektion=1&amp;format=html">man(1)</a>. У большинства драйверов во FreeBSD есть страницы справочника, содержащие список поддерживаемого оборудования, а найденные во время начальной загрузки устройства будут перечислены в <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a>. К примеру, следующие строки информируют о том, что драйвер <span class=filename>psm</span> обнаружил мышь:</p></div><div class="literalblock programlisting"><div class=content><pre>psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: [ITHREAD]
psm0: model Generic PS/2 mouse, device ID 0</pre></div></div><div class=paragraph><p>Этот драйвер необходимо будет включить в конфигурацию собственного ядра или загрузить посредством <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a>.</p></div><div class=paragraph><p>В некоторых случаях <code>dmesg</code> отображает только системные сообщения вместо сообщений начальной загрузки. В таких случаях необходимо обращаться к файлу <span class=filename>/var/run/dmesg.boot</span>.</p></div><div class=paragraph><p>Еще один метод нахождения аппаратного обеспечения подразумевает использование достаточно информативной утилиты <a href="https://man.freebsd.org/cgi/man.cgi?query=pciconf&amp;sektion=8&amp;format=html">pciconf(8)</a>. Например:</p></div><div class="literalblock programlisting"><div class=content><pre>ath0@pci0:3:0:0:        class=0x020000 card=0x058a1014 chip=0x1014168c rev=0x01 hdr=0x00
    vendor     = &#39;Atheros Communications Inc.&#39;
    device     = &#39;AR5212 Atheros AR5212 802.11abg wireless&#39;
    class      = network
    subclass   = ethernet</pre></div></div><div class=paragraph><p>Эта часть вывода, полученная в результате запуска команды <code>pciconf -lv</code>, показывает, что драйвер <span class=filename>ath</span> обнаружил беспроводное Ethernet устройство. Набрав <code>man <em>ath</em></code>, вы получите страницу справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=ath&amp;sektion=4&amp;format=html">ath(4)</a>.</p></div><div class=paragraph><p>Также, для извлечения необходимой информации, можно воспользоваться ключом <code>-k</code> к команде <a href="https://man.freebsd.org/cgi/man.cgi?query=man&amp;sektion=1&amp;format=html">man(1)</a>. В вышеприведенном случае можно набрать:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># man -k Atheros</span></code></pre></div></div><div class=paragraph><p>чтобы получить страницы справочника, содержащие определенное слово:</p></div><div class="literalblock programlisting"><div class=content><pre>ath(4)                   - Atheros IEEE 802.11 wireless network driver
ath_hal(4)               - Atheros Hardware Access Layer (HAL)</pre></div></div><div class=paragraph><p>Теперь, имея в распоряжении перечень аппаратного оборудования, можно безбоязненно приступить к сборке специализированного ядра.</p></div></div></div><div class=sect1><h2 id=kernelconfig-modules>9.4. Драйвера, подсистемы и модули ядра<a class=anchor href=#kernelconfig-modules></a></h2><div class=sectionbody><div class=paragraph><p>Перед построением специализированного ядра, обдумайте причины, побудившие вас к этому. Если требуется поддержка специального оборудования, то она наверняка уже реализована в виде модуля.</p></div><div class=paragraph><p>Модули ядра находятся в каталоге <span class=filename>/boot/kernel</span>, и они могут быть динамически включены в работающее ядро при помощи <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a>. Если не все, то большинство драйверов существуют в виде модулей, и у них есть соответствующая страница справочника. К примеру, в предыдущем разделе упоминался драйвер <span class=filename>ath</span> беспроводного Ethernet устройства. Соответствующая ему страница справочника гласит:</p></div><div class="literalblock programlisting"><div class=content><pre>Alternatively, to load the driver as a module at boot time, place the
following line in man:loader.conf[5]:

    if_ath_load=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Как уже выше сказано, добавление строки <code>if_ath_load="YES"</code> в файл <span class=filename>/boot/loader.conf</span> позволит динамически загружать этот модуль во время загрузки системы.</p></div><div class=paragraph><p>В некоторых случаях, однако, интересующего вас модуля не существует. Чаще всего это справедливо для определенных подсистем и очень важных драйверов. Например, поддержка файловой системы FreeBSD (FFS) является обязательной опцией в ядре. Как и поддержка сети (INET). К сожалению, единственный способ определить является ли драйвер обязательным - это проверить наличие соответствующего модуля.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Довольно легко удалить поддержку устройства или опцию, получив тем самым неработоспособное ядро. Например, если драйвер <a href="https://man.freebsd.org/cgi/man.cgi?query=ata&amp;sektion=4&amp;format=html">ata(4)</a> изъят из конфигурации ядра, то система, использующая диски ATA, может не загрузиться без записи о модуле, добавленной в <span class=filename>loader.conf</span>. Если есть сомнения, проверьте наличие модуля, и только потом исключайте поддержку в ядре.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=kernelconfig-building>9.5. Сборка и установка собственного ядра<a class=anchor href=#kernelconfig-building></a></h2><div class=sectionbody><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Для сборки ядра необходимо наличие всех исходных файлов FreeBSD.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Во-первых, давайте сделаем краткий обзор каталога, в котором будет происходить сборка ядра. Все каталоги, которые будут упоминаться, будут относительными по отношению к основному каталогу <span class=filename>/usr/src/sys</span>, который также доступен как каталог <span class=filename>/sys</span>. Этот каталог содержит множество подкаталогов, представляющих собой различные части ядра, но наиболее важным для нас будет каталог <span class=filename>arch/conf</span>, в котором вы будете редактировать конфигурационный файл ядра и в котором находится каталог <span class=filename>compile</span>, где будет собираться ваше ядро. <em>arch</em> может быть <span class=filename>i386</span>, <span class=filename>amd64</span>, <span class=filename>ia64</span>, <span class=filename>powerpc</span>, <span class=filename>sparc64</span> или <span class=filename>pc98</span> (альтернативная ветвь аппаратного обеспечения, популярная в Японии). Все, что находится внутри каталога определенной архитектуры, относится только к этой архитектуре; остальной код является машинно независимым и общим для всех платформ, на которые FreeBSD может быть потенциально портирована. Обратите внимание на логическую структуру каталогов, в которой каждое поддерживаемое устройство, каждая файловая система и каждая опция размещается в своём собственном каталоге.</p></div><div class=paragraph><p>В примерах этой главы подразумевается, что вы используете архитектуру i386. Если архитектура вашей системы отличается от используемой в примерах, то вам необходимо будет соответственно изменить имена каталогов.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Если каталог <span class=filename>/usr/src/</span> отсутствует в вашей системе (или этот каталог пуст), то это значит, что исходные тексты не были установлены. Наиболее простой способ установить их - воспользоваться <a href="https://man.freebsd.org/cgi/man.cgi?query=csup&amp;sektion=1&amp;format=html">csup(1)</a>, как описано в <a href=../cutting-edge/#synching>Синхронизация исходных текстов</a>. Далее, создайте символическую ссылку на <span class=filename>/usr/src/sys/</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ln -s /usr/src/sys /sys</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Затем, перейдите в каталог <span class=filename>arch/conf</span> и скопируйте файл конфигурации <span class=filename>GENERIC</span> в файл с выбранным вами именем. Например:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src/sys/i386/conf</span>
<span class=c># cp GENERIC MYKERNEL</span></code></pre></div></div><div class=paragraph><p>По традиции имя состоит из букв в верхнем регистре, и если вы поддерживаете несколько компьютеров FreeBSD на различном оборудовании, хорошая идея добавлять это имя к имени хоста. Мы назвали ядро <span class=filename>MYKERNEL</span> в этом примере.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Помещение файла конфигурации ядра в <span class=filename>/usr/src</span> может быть плохой идеей. Если вы испытываете проблемы, их можно решить удалив <span class=filename>/usr/src</span> и начав все с начала. После этого обычно требуется несколько секунд, чтобы понять, что вы удалили собственный файл настройки ядра. Не редактируйте непосредственно <span class=filename>GENERIC</span>, он может быть также перезаписан и при следующем <a href=../cutting-edge/#updating-upgrading>обновлении дерева исходных текстов</a>, и изменения ядра будут потеряны.</p></div><div class=paragraph><p>Вы можете сохранить файл конфигурации ядра в другом месте, а затем создать символическую ссылку на этот файл в каталоге <span class=filename>i386</span>.</p></div><div class=paragraph><p>Например:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src/sys/i386/conf</span>
<span class=c># mkdir /root/kernels</span>
<span class=c># cp GENERIC /root/kernels/MYKERNEL</span>
<span class=c># ln -s /root/kernels/MYKERNEL</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Теперь отредактируйте файл <span class=filename>MYKERNEL</span> в своём любимом текстовом редакторе. Если вы только начинаете, единственным доступным редактором скорее всего будет vi, который слишком сложен для того, чтобы описать его здесь, но в <a href=#bibliography>библиографии</a> перечислено множество книг, в которых его использование хорошо освещено. Однако FreeBSD предоставляет более простой редактор ee, который, если вы - новичок, подойдёт вам больше всего. Не стесняйтесь изменять строки комментариев в начале файла, с тем, чтобы отобразить вашу конфигурацию или изменения, которые вы сделали по сравнению с <span class=filename>GENERIC</span>.</p></div><div class=paragraph><p>Если вам приходилось собирать ядро для SunOS™ или какой-либо другой операционной системы типа BSD, многое из того, что содержится в этом файле будет очень знакомо вам. Если же вы, напротив, использовали другую операционную систему, такую как DOS, файл конфигурации <span class=filename>GENERIC</span> может показаться вам крайне сложным, поэтому следуйте инструкциям в разделе <a href=#kernelconfig-config>Конфигурационный файл</a> медленно и внимательно.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Если вы <a href=../cutting-edge/#updating-upgrading>синхронизируете дерево исходных текстов</a> с деревом проекта FreeBSD, не забудьте свериться с файлом <span class=filename>/usr/src/UPDATING</span> перед обновлением. В этом файле описаны все важные вопросы и области исходного кода, требующие особого внимания. <span class=filename>/usr/src/UPDATING</span> всегда соответствует версии ваших исходных текстов FreeBSD, поэтому является более актуальным источником информации, чем это руководство.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Теперь вы должны скомпилировать ядро.</p></div><div class="exampleblock procedure"><div class=content><div class=paragraph><p><strong>Procedure: Сборка ядра</strong></p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Для сборки ядра необходимо наличие всех исходных файлов FreeBSD.</p></div></td></tr></tbody></table></div><div class="olist arabic"><ol class=arabic><li><p>Перейдите в каталог <span class=filename>/usr/src</span>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span></code></pre></div></div></li><li><p>Соберите ядро:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make buildkernel KERNCONF=MYKERNEL</span></code></pre></div></div></li><li><p>Установите новое ядро:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make installkernel KERNCONF=MYKERNEL</span></code></pre></div></div></li></ol></div></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>По умолчанию, при построении ядра, <em>все</em> модули ядра так же будут пересобраны. Если вы хотите обновить ядро быстрее или построить только определённые модули, то вам нужно отредактировать файл <span class=filename>/etc/make.conf</span> перед началом процесса сборки ядра:</p></div><div class="literalblock programlisting"><div class=content><pre>MODULES_OVERRIDE = linux acpi sound/sound sound/driver/ds1 ntfs</pre></div></div><div class=paragraph><p>Эта переменная устанавливает список модулей, которые нужно построить вместо построения всех модулей.</p></div><div class="literalblock programlisting"><div class=content><pre>WITHOUT_MODULES = linux acpi sound ntfs</pre></div></div><div class=paragraph><p>В этой переменной перечисляются основные модули, которые необходимо исключить из процесса сборки. За другими переменными, которые вы можете посчитать полезными в процессе сборки ядра, обращайтесь к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=make.conf&amp;sektion=5&amp;format=html">make.conf(5)</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Новое ядро будет скопировано в каталог <span class=filename>/boot/kernel</span> как <span class=filename>/boot/kernel/kernel</span>, а старое ядро будет перемещено в <span class=filename>/boot/kernel.old/kernel</span>. Теперь перезагрузите систему для того, чтобы использовать новое ядро. Если что-то пойдёт не так, вы можете обратиться к разделу <a href=#kernelconfig-trouble>Решение проблем</a> в конце этой главы, который может оказаться полезен. Не забудьте прочитать раздел, который объясняет как исправить ситуацию, когда ядро <a href=#kernelconfig-noboot>не загружается</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Другие файлы, относящиеся к процессу загрузки, такие как загрузчик (<a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a>) и его конфигурационные файлы, размещаются в <span class=filename>/boot</span>. Модули сторонних производителей могут быть помещены в <span class=filename>/boot/kernel</span>, хотя пользователи должны знать, что очень важно, чтобы модули были синхронизированы с собранным ядром. Модули, не рассчитанные на работу с собранным ядром, могут вызвать нестабильность и некорректность работы.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=kernelconfig-config>9.6. Конфигурационный файл<a class=anchor href=#kernelconfig-config></a></h2><div class=sectionbody><div class=paragraph><p>Формат конфигурационного файла достаточно прост. Каждая строка представляет собой ключевое слово и один или более аргументов. Для простоты большинство строк содержат только один аргумент. Всё, что следует за символом <code>#</code> является комментарием и игнорируется. Следующие разделы описывают каждый параметр, в порядке, в котором они появляются в <span class=filename>GENERIC</span>. <a id=kernelconfig-options></a>За полным списком архитектурно-зависимых параметров и устройств обратитесь к файлу <span class=filename>NOTES</span> в том же каталоге, что и <span class=filename>GENERIC</span>. Архитектурно независимые параметры находятся в <span class=filename>/usr/src/sys/conf/NOTES</span>.</p></div><div class=paragraph><p>Директива <code>include</code> стала доступной для использования в конфигурационных файлах. Она позволяет включать в текущий конфигурационный файл содержимое другого файла, тем самым упрощая процесс внесения небольших изменений в существующий файл. Например, если вам необходимо добавить всего несколько дополнительных опций или драйверов в ядро <span class=filename>GENERIC</span>, то вам придется поддерживать только разницу к файлу GENERIC:</p></div><div class="literalblock programlisting"><div class=content><pre>include GENERIC
ident MYKERNEL

options         IPFIREWALL
options         DUMMYNET
options         IPFIREWALL_DEFAULT_TO_ACCEPT
options         IPDIVERT</pre></div></div><div class=paragraph><p>Большинство администраторов оценят значительные преимущества перед старым способом - написанием конфигурационного файла "с нуля": ваш конфигурационный файл будет отображать только изменения относительно <span class=filename>GENERIC</span>. А после обновлений исходного кода, новые функциональные возможности, появившиеся в GENERIC, будут добавлены и в вашу конфигурацию, если только не препятствовать этому директивами <code>nooptions</code> или <code>nodevice</code>. Далее в этом разделе описывается типовой конфигурационный файл, его опции и устройства, а также их роли.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Для сборки ядра со всеми возможными опциями (обычно используется для тестирования), выполните от имени суперпользователя (<code>root</code>) следующую команду:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src/sys/i386/conf &amp;&amp; make LINT</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Это пример конфигурационного файла ядра <span class=filename>GENERIC</span> с различными дополнительными комментариями, которые могут понадобиться для ясности. Этот пример должен совпадать с вашей копией в <span class=filename>/usr/src/sys/i386/conf/GENERIC</span> практически полностью.</p></div><div class="literalblock programlisting"><div class=content><pre>machine        i386</pre></div></div><div class=paragraph><p>Это архитектура машины. Она должна быть одной из следующих: <code>amd64</code>, <code>i386</code>, <code>ia64</code>, <code>pc98</code>, <code>powerpc</code>, или <code>sparc64</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>cpu          I486_CPU
cpu          I586_CPU
cpu          I686_CPU</pre></div></div><div class=paragraph><p>Эта опция указывает тип процессора, который используется в вашей системе. В конфигурационном файле может быть несколько вхождений этой опции (например, если вы не уверены, какой из типов процессора необходимо использовать - <code>I586_CPU</code> или <code>I686_CPU</code>), но для собственного ядра лучше указывать только тот тип процессора, который установлен в вашей системе. Если вы не уверены, какой тип необходимо использовать вам, вы можете воспользоваться файлом <span class=filename>/var/run/dmesg.boot</span>, чтобы увидеть протокол загрузки системы.</p></div><div class="literalblock programlisting"><div class=content><pre>ident          GENERIC</pre></div></div><div class=paragraph><p>Этот параметр определяет "метку" ядра. Необходимо, чтобы она соответствовала названию файла конфигурации ядра, например <code><em>MYKERNEL</em></code>, если вы следовали инструкциям в предыдущих примерах. Значение, которое вы присвоите параметру <code>ident</code> будет выводиться в процессе загрузки, поэтому полезно давать новым ядрам другие имена для того, чтобы отличать их от обычного ядра (например, если вы хотите собрать экспериментальное ядро).</p></div><div class="literalblock programlisting"><div class=content><pre>#To statically compile in device wiring instead of /boot/device.hints
#hints          &#34;GENERIC.hints&#34;         # Default places to look for devices.</pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=device.hints&amp;sektion=5&amp;format=html">device.hints(5)</a> используются для настройки параметров драйверов устройств. Путь по умолчанию, который <a href="https://man.freebsd.org/cgi/man.cgi?query=loader&amp;sektion=8&amp;format=html">loader(8)</a> будет проверять при загрузке - <span class=filename>/boot/device.hints</span>. Используя опцию <code>hints</code> вы можете вкомпилировать эти параметры статически в ваше ядро. В этом случае не требуется создавать файл <span class=filename>device.hints</span> в каталоге <span class=filename>/boot</span>.</p></div><div class="literalblock programlisting"><div class=content><pre>makeoptions     DEBUG=-g          # Build kernel with gdb(1) debug symbols</pre></div></div><div class=paragraph><p>При обычном построении ядра в сборку включается отладочная информация: опция <code>-g</code> передается компилятору <a href="https://man.freebsd.org/cgi/man.cgi?query=gcc&amp;sektion=1&amp;format=html">gcc(1)</a>.</p></div><div class="literalblock programlisting"><div class=content><pre>options          SCHED_ULE         # ULE scheduler</pre></div></div><div class=paragraph><p>Планировщик по умолчанию во FreeBSD. Оставьте эту опцию.</p></div><div class="literalblock programlisting"><div class=content><pre>options          PREEMPTION         # Enable kernel thread preemption</pre></div></div><div class=paragraph><p>Позволяет высокоприоритетным нитям ядра вытеснять конкурентов, находящихся в режиме выполнения. Эта опция может помочь повысить реактивность системы по отношению к внешним воздействиям, например, за счет снижения латентности нитей, обрабатывающих прерывания.</p></div><div class="literalblock programlisting"><div class=content><pre>options          INET              # InterNETworking</pre></div></div><div class=paragraph><p>Поддержка сетевых возможностей. Оставьте эту опцию включенной, даже если вы не планируете подключаться к сети. Большинство программ требуют, чтобы работал хотя бы интерфейс обратной связи (loopback) (т.е. создание сетевых соединений внутри вашего ПК), так что эта опция в принципе является обязательной.</p></div><div class="literalblock programlisting"><div class=content><pre>options          INET6             # IPv6 communications protocols</pre></div></div><div class=paragraph><p>Включает поддержку коммуникационных протоколов IPv6.</p></div><div class="literalblock programlisting"><div class=content><pre>options          FFS               # Berkeley Fast Filesystem</pre></div></div><div class=paragraph><p>Включает поддержку основной файловой системы. Не удаляйте эту опцию, если вы планируете загружаться с жесткого диска.</p></div><div class="literalblock programlisting"><div class=content><pre>options          SOFTUPDATES       # Enable FFS Soft Updates support</pre></div></div><div class=paragraph><p>Этот параметр включает в ядре технологию Soft Updates, которая повышает скорость записи на диски. Несмотря на то, что эта технология включена в ядре, она должна быть включена для отдельных дисков. Просмотрите вывод команды <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> чтобы определить, включены ли Soft Updates для дисков вашей системы. Если вы не увидите параметр <code>soft-updates</code>, вам будет необходимо активировать его при помощи команды <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> (для существующих файловых систем) или команды <a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a> (для новых файловых систем).</p></div><div class="literalblock programlisting"><div class=content><pre>options          UFS_ACL           # Support for access control lists</pre></div></div><div class=paragraph><p>Этот параметр включает в ядре поддержку списков управления доступом (ACL). Основывается на использовании расширенных атрибутов и UFS2, детальное описание вы сможете найти в <a href=../security/#fs-acl>Списки контроля доступа файловой системы (ACL)</a>. ACL включены по умолчанию и не должны выключаться в случае, если они ранее использовались на файловой системе, так как это удалит списки управления доступом и изменит то, как защищены файлы, непредсказуемым образом.</p></div><div class="literalblock programlisting"><div class=content><pre>options          UFS_DIRHASH       # Improve performance on big directories</pre></div></div><div class=paragraph><p>Эта опция включает функциональность, которая повышает скорость дисковых операций на больших каталогах в обмен на использование дополнительной памяти. Для большого сервера или рабочей станции рекомендуется оставить ее включенной, и выключить для системы, для которой более приоритетна память, чем скорость доступа к дискам, например для брандмауэра.</p></div><div class="literalblock programlisting"><div class=content><pre>options          MD_ROOT           # MD is a potential root device</pre></div></div><div class=paragraph><p>Этот параметр включает поддержку использования дисков в памяти для корневой файловой системы.</p></div><div class="literalblock programlisting"><div class=content><pre>options          NFSCLIENT         # Network Filesystem Client
options          NFSSERVER         # Network Filesystem Server
options          NFS_ROOT          # NFS usable as /, requires NFSCLIENT</pre></div></div><div class=paragraph><p>Сетевая файловая система. Если вы не планируете монтировать разделы с файлового сервера UNIX® через TCP/IP, вы можете исключить этот параметр из конфигурационного файла ядра.</p></div><div class="literalblock programlisting"><div class=content><pre>options          MSDOSFS           # MSDOS Filesystem</pre></div></div><div class=paragraph><p>Файловая система MS-DOS®. Если вы не собираетесь монтировать форматированный в DOS раздел жесткого диска в момент загрузки, вы можете безопасно закомментировать этот параметр. Необходимый модуль будет автоматически загружен, когда вы в первый раз смонтируете раздел DOS, так, как это описано ниже. Кроме того, замечательный пакет <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/mtools/>emulators/mtools</a> позволяет получить доступ к DOS дискетам без необходимости монтировать и размонтировать их (и не требует наличия <code>MSDOSFS</code>).</p></div><div class="literalblock programlisting"><div class=content><pre>options          CD9660            # ISO 9660 Filesystem</pre></div></div><div class=paragraph><p>Файловая система ISO 9660 для компакт-дисков. Если у вас нет привода CDROM или вы будете лишь изредка монтировать компакт-диски с данными, закомментируйте эту строку, так как необходимый модуль будет загружен автоматически при первом монтировании компакт-диска с данными. Для использования звуковых компакт-дисков эта файловая система не потребуется.</p></div><div class="literalblock programlisting"><div class=content><pre>options          PROCFS            # Process filesystem (requires PSEUDOFS)</pre></div></div><div class=paragraph><p>Файловая система процессов. Это "виртуальная" файловая система монтируемая в <span class=filename>/proc</span>, которая позволяет таким приложениям, как <a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> выдавать вам больше информации о запущенных процессах. Использование <code>PROCFS</code> не требуется, так как большинство мониторинговых и отладочных инструментов было адаптировано для работы без <code>PROCFS</code>: система по умолчанию не монтирует файловую систему процессов.</p></div><div class="literalblock programlisting"><div class=content><pre>options          PSEUDOFS          # Pseudo-filesystem framework</pre></div></div><div class=paragraph><p>Ядра, которые используют <code>PROCFS</code>, должны также включать поддержку <code>PSEUDOFS</code>,</p></div><div class="literalblock programlisting"><div class=content><pre>options          GEOM_PART_GPT     # GUID Partition Tables.</pre></div></div><div class=paragraph><p>Добавляет поддержку <a href=http://en.wikipedia.org/wiki/GUID_Partition_Table>Таблиц Разделов GUID</a>. Этот параметр делает возможным наличие большого количества разделов на одном диске, до 128 в стандартной конфигурации.</p></div><div class="literalblock programlisting"><div class=content><pre>options          COMPAT_43         # Compatible with BSD 4.3 [KEEP THIS!]</pre></div></div><div class=paragraph><p>Совместимость с 4.3BSD. Не выключайте эту опцию; некоторые приложения будут вести себя странно, если этой опции не будет в ядре.</p></div><div class="literalblock programlisting"><div class=content><pre>options          COMPAT_FREEBSD4   # Compatible with FreeBSD4</pre></div></div><div class=paragraph><p>Эта опция требуется для поддержки приложений, собранных на более старых версиях FreeBSD, которые используют старые интерфейсы вызовов. Рекомендуется использовать данную опцию на всех системах на платформах i386™, на которых могут запускаться старые приложения; платформы, поддержка которых появилась только в FreeBSD 5.X, например ia64 и sparc64, не требуют этой опции.</p></div><div class="literalblock programlisting"><div class=content><pre>options          COMPAT_FREEBSD5   # Compatible with FreeBSD5</pre></div></div><div class=paragraph><p>Эта опция необходима для поддержки приложений, скомпилированных на FreeBSD 5.X и использующих интерфейс системных вызовов FreeBSD 5.X.</p></div><div class="literalblock programlisting"><div class=content><pre>options          COMPAT_FREEBSD6   # Compatible with FreeBSD6</pre></div></div><div class=paragraph><p>Эта опция требуется для поддержки приложений, собранных на FreeBSD версий 6.X, которые используют интерфейсы системных вызовов FreeBSD 6.X.</p></div><div class="literalblock programlisting"><div class=content><pre>options          COMPAT_FREEBSD7   # Compatible with FreeBSD7</pre></div></div><div class=paragraph><p>Эта опция требуется на системах FreeBSD версий 8 и более поздних для поддержки приложений, собранных для FreeBSD 7.X и использующих интерфейсы системных вызовов FreeBSD 7.X.</p></div><div class="literalblock programlisting"><div class=content><pre>options          SCSI_DELAY=5000  # Delay (in ms) before probing SCSI</pre></div></div><div class=paragraph><p>Этот параметр заставляет ядро приостановиться на 5 секунд перед тем, как идентифицировать каждое устройство SCSI в вашей системе. Если у вас установлены только жесткие диски IDE, вы можете игнорировать эту опцию, в противном случае, возможно, вы захотите уменьшить это число, для того чтобы ускорить загрузку. Естественно, если вы сделаете это, а у FreeBSD появятся проблемы с распознанием ваших устройств SCSI, необходимо будет увеличить этот параметр.</p></div><div class="literalblock programlisting"><div class=content><pre>options          KTRACE            # ktrace(1) support</pre></div></div><div class=paragraph><p>Включает поддержку трассировки процессов, что удобно при отладке.</p></div><div class="literalblock programlisting"><div class=content><pre>options          SYSVSHM           # SYSV-style shared memory</pre></div></div><div class=paragraph><p>Этот параметр предоставляет поддержку разделяемой памяти System V. Наиболее распространенное применение этого - расширение XSHM в X, которое многие приложения, интенсивно работающие с графикой, будут автоматически использовать для повышения скорости работы. Если вы используете X, эта опция будет необходима.</p></div><div class="literalblock programlisting"><div class=content><pre>options          SYSVMSG           # SYSV-style message queues</pre></div></div><div class=paragraph><p>Поддержка сообщений System V. Этот параметр добавляет в ядро всего лишь несколько сотен байт.</p></div><div class="literalblock programlisting"><div class=content><pre>options          SYSVSEM           # SYSV-style semaphores</pre></div></div><div class=paragraph><p>Поддержка семафоров System V. Не настолько часто используемая возможность, но в ядро добавляет всего несколько сотен байт.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Команда <a href="https://man.freebsd.org/cgi/man.cgi?query=ipcs&amp;sektion=1&amp;format=html">ipcs(1)</a> с параметром <code>-p</code> покажет все процессы, которые используют любую из этих возможностей System V.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>options 	     _KPOSIX_PRIORITY_SCHEDULING # POSIX P1003_1B real-time extensions</pre></div></div><div class=paragraph><p>Расширения реального времени, добавленные 1993 POSIX®. Определенные приложения из коллекции используют их, например StarOffice™.</p></div><div class="literalblock programlisting"><div class=content><pre>options          KBD_INSTALL_CDEV  # install a CDEV entry in /dev</pre></div></div><div class=paragraph><p>Этот параметр разрешает формирование файлов устройств в <span class=filename>/dev</span> для клавиатур.</p></div><div class="literalblock programlisting"><div class=content><pre>options          ADAPTIVE_GIANT    # Giant mutex is adaptive.</pre></div></div><div class=paragraph><p>Giant - имя механизма защиты ("спящего" мьютекса) для крупных наборов ресурсов ядра. На нынешний момент Giant представляется фактически непригодным для использования в связи с серьезными потерями в производительности, и активно заменяется на механизмы, защищающие отдельные ресурсы ядра. Параметр <code>ADAPTIVE_GIANT</code> включает Giant в число адаптивных мьютексов: в случае, когда нить ядра нуждается в Giant, а он уже захвачен нитью, выполняющейся на другом процессоре, первая нить будет продолжать выполнение и ждать освобождения Giant. В норме нить должна была бы уснуть, пока не настанет очередной момент ее выполнения. Если вы не уверены, оставьте этот параметр в покое.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Для FreeBSD 8.0-RELEASE и более поздних версий, все мьютексы являются адаптивными по умолчанию, если обратное не указано специально опцией <code>NO_ADAPTIVE_MUTEXES</code>. Следовательно, Giant также адаптивен по умолчанию, и поэтому опция <code>ADAPTIVE_GIANT</code> была удалена из файла конфигурации ядра.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>device          apic               # I/O APIC</pre></div></div><div class=paragraph><p>Устройство apic разрешает использование набора I/O APIC для распределения прерываний. Оно может быть использовано как с однопроцессорными, так и с многопроцессорными ядрами (для последних наличие apic является обязательным). Для поддержки многопроцессорности добавьте строку <code>options SMP</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Устройство apic существует только на архитектурах i386. На других архитектурах этот конфигурационный параметр использовать не следует.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>device          eisa</pre></div></div><div class=paragraph><p>Включите эту опцию если у вас материнская плата EISA. Это включает автоопределение и конфигурирование поддержки всех устройств на шине EISA.</p></div><div class="literalblock programlisting"><div class=content><pre>device          pci</pre></div></div><div class=paragraph><p>Включите этот параметр, если у вас материнская плата с поддержкой PCI. Это включит автоопределение карт PCI и проксирование из шины PCI в шину ISA.</p></div><div class="literalblock programlisting"><div class=content><pre># Floppy drives
device          fdc</pre></div></div><div class=paragraph><p>Контроллер флоппи-диска.</p></div><div class="literalblock programlisting"><div class=content><pre># ATA and ATAPI devices
device          ata</pre></div></div><div class=paragraph><p>Этот драйвер поддерживает все устройства ATA и ATAPI. Вам необходима только одна строка <code>device ata</code> в ядре для того, чтобы обнаружить все PCI устройства ATA/ATAPI в современных машинах.</p></div><div class="literalblock programlisting"><div class=content><pre>device          atadisk                 # ATA disk drives</pre></div></div><div class=paragraph><p>Эта строка необходима вместе с <code>device ata</code> для поддержки дисков ATA.</p></div><div class="literalblock programlisting"><div class=content><pre>device          ataraid                 # ATA RAID drives</pre></div></div><div class=paragraph><p>Эта строка необходима вместе с <code>device ata</code> для поддержки дисков ATA RAID.</p></div><div class="literalblock programlisting"><div class=content><pre>device          atapicd                 # ATAPI CDROM drives</pre></div></div><div class=paragraph><p>Поддержка приводов ATAPI CDROM. Используется вместе с <code>device ata</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>device          atapifd                 # ATAPI floppy drives</pre></div></div><div class=paragraph><p>Поддержка флоппи-приводов ATAPI. Используется вместе с <code>device ata</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>device          atapist                 # ATAPI tape drives</pre></div></div><div class=paragraph><p>Поддержка ленточных приводов ATAPI (стримеров). Используется вместе с <code>device ata</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>options         ATA_STATIC_ID           # Static device numbering</pre></div></div><div class=paragraph><p>Заставляет драйвер нумеровать устройства статически; в противном случае происходит динамическая нумерация.</p></div><div class="literalblock programlisting"><div class=content><pre># SCSI Controllers
device          ahb        # EISA AHA1742 family
device          ahc        # AHA2940 and onboard AIC7xxx devices
options         AHC_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~128k to driver.
device          ahd        # AHA39320/29320 and onboard AIC79xx devices
options         AHD_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~215k to driver.
device          amd        # AMD 53C974 (Teckram DC-390(T))
device          isp        # Qlogic family
#device         ispfw      # Firmware for QLogic HBAs- normally a module
device          mpt        # LSI-Logic MPT-Fusion
#device         ncr        # NCR/Symbios Logic
device          sym        # NCR/Symbios Logic (newer chipsets + those of `ncr&#39;)
device          trm        # Tekram DC395U/UW/F DC315U adapters

device          adv        # Advansys SCSI adapters
device          adw        # Advansys wide SCSI adapters
device          aha        # Adaptec 154x SCSI adapters
device          aic        # Adaptec 15[012]x SCSI adapters, AIC-6[23]60.
device          bt         # Buslogic/Mylex MultiMaster SCSI adapters

device          ncv        # NCR 53C500
device          nsp        # Workbit Ninja SCSI-3
device          stg        # TMC 18C30/18C50</pre></div></div><div class=paragraph><p>Контроллеры SCSI. Закомментируйте те, которых у вас в системе нет. Если у вас в системе исключительно IDE устройства, вы можете удалить все эти строки. Строки вида <code>*_REG_PRETTY_PRINT</code> включают режим отладки для соответствующих драйверов.</p></div><div class="literalblock programlisting"><div class=content><pre># SCSI peripherals
device          scbus      # SCSI bus (required for SCSI)
device          ch         # SCSI media changers
device          da         # Direct Access (disks)
device          sa         # Sequential Access (tape etc)
device          cd         # CD
device          pass       # Passthrough device (direct SCSI access)
device          ses        # SCSI Environmental Services (and SAF-TE)</pre></div></div><div class=paragraph><p>Периферийные устройства SCSI. Опять-таки, закомментируйте те, которых у вас в системе нет, или, если у вас в наличии исключительно IDE, можете удалить все.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>USB <a href="https://man.freebsd.org/cgi/man.cgi?query=umass&amp;sektion=4&amp;format=html">umass(4)</a> драйвер (и некоторые другие драйверы) используют подсистему SCSI, хотя и не являются настоящими SCSI устройствами. Следовательно, вам необходимо сохранить поддержку SCSI, если какой-либо из этих драйверов включен в конфигурацию ядра.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre># RAID controllers interfaced to the SCSI subsystem
device          amr        # AMI MegaRAID
device		arcmsr	   # Areca SATA II RAID
device          asr        # DPT SmartRAID V, VI and Adaptec SCSI RAID
device          ciss       # Compaq Smart RAID 5*
device          dpt        # DPT Smartcache III, IV - See NOTES for options
device          hptmv      # Highpoint RocketRAID 182x
device          hptrr      # Highpoint RocketRAID 17xx, 22xx, 23xx, 25xx
device          iir        # Intel Integrated RAID
device          ips        # IBM (Adaptec) ServeRAID
device          mly        # Mylex AcceleRAID/eXtremeRAID
device          twa        # 3ware 9000 series PATA/SATA RAID

# RAID controllers
device          aac        # Adaptec FSA RAID
device          aacp       # SCSI passthrough for aac (requires CAM)
device          ida        # Compaq Smart RAID
device          mfi        # LSI MegaRAID SAS
device          mlx        # Mylex DAC960 family
device          pst        # Promise Supertrak SX6000
device          twe        # 3ware ATA RAID</pre></div></div><div class=paragraph><p>Поддерживаемые RAID-контроллеры. Если у вас нет таковых, можете их закомментировать или удалить эти строки.</p></div><div class="literalblock programlisting"><div class=content><pre># atkbdc0 controls both the keyboard and the PS/2 mouse
device          atkbdc     # AT keyboard controller</pre></div></div><div class=paragraph><p>Контроллер клавиатуры (<code>atkbdc</code>) предоставляет средства ввода/вывода для клавиатуры AT и PS/2 устройств. Этот контроллер необходим драйверу клавиатуры (<code>atkbd</code>) и PS/2 устройств (<code>psm</code>).</p></div><div class="literalblock programlisting"><div class=content><pre>device          atkbd      # AT keyboard</pre></div></div><div class=paragraph><p>Драйвер <code>atkbd</code> вместе с контроллером <code>atkbdc</code> предоставляет доступ к клавиатуре AT 84 или улучшенной клавиатуре AT, которая подключена к контроллеру AT клавиатуры.</p></div><div class="literalblock programlisting"><div class=content><pre>device          psm        # PS/2 mouse</pre></div></div><div class=paragraph><p>Используйте это устройство, если ваша мышь включается в порт PS/2.</p></div><div class="literalblock programlisting"><div class=content><pre>device          kbdmux        # keyboard multiplexer</pre></div></div><div class=paragraph><p>Поддержка мультиплексора клавиатур. Если использование двух и более клавиатур не планируется, можете смело исключать этот параметр.</p></div><div class="literalblock programlisting"><div class=content><pre>device          vga        # VGA video card driver</pre></div></div><div class=paragraph><p>Драйвер видеокарты.</p></div><div class="literalblock programlisting"><div class=content><pre>device          splash     # Splash screen and screen saver support</pre></div></div><div class=paragraph><p>Заставка при загрузке. Хранители экрана также требуют этого устройства.</p></div><div class="literalblock programlisting"><div class=content><pre># syscons is the default console driver, resembling an SCO console
device          sc</pre></div></div><div class=paragraph><p><code>sc</code> - это драйвер консоли по умолчанию, который имитирует консоль SCO. Так как большая часть консольных полноэкранных приложений обращаются к консоли через терминальную библиотеку <span class=filename>termcap</span>, вас не должно волновать, будете ли вы использовать этот драйвер, либо драйвер <code>vt</code>, который является <code>VT220</code>-совместимым драйвером консоли. Если у вас возникнут какие-либо проблемы с приложениями, работающими с этим драйвером консоли, установите переменную окружения <code>TERM</code> в значение <code>scoansi</code>.</p></div><div class="literalblock programlisting"><div class=content><pre># Enable this for the pcvt (VT220 compatible) console driver
#device          vt
#options         XSERVER          # support for X server on a vt console
#options         FAT_CURSOR       # start with block cursor</pre></div></div><div class=paragraph><p>VT220-совместимый драйвер консоли, обратно совместимый с VT100/102. Он работает лучше на некоторых лэптопах, у которых возникают проблемы несовместимости с <code>sc</code>. Также, установите переменную окружения <code>TERM</code> в значение <code>vt100</code> или <code>vt220</code>. Этот драйвер также может быть полезен в случаях подключения к большому количеству различных машин через сеть, на которых параметры для устройства <code>sc</code> для <span class=filename>termcap</span> или <span class=filename>terminfo</span> могут отсутствовать - <code>vt100</code> присутствует практически на любой платформе.</p></div><div class="literalblock programlisting"><div class=content><pre>device          agp</pre></div></div><div class=paragraph><p>Включите эту опцию, если у вас есть AGP карта в системе. Это включит поддержку AGP и AGP GART для тех карт, которые поддерживают эту возможность.</p></div><div class="literalblock programlisting"><div class=content><pre># Power management support (see NOTES for more options)
#device          apm</pre></div></div><div class=paragraph><p>Поддержка Advanced Power Management. Чаще всего используется в лэптопах, хотя и отключена по умолчанию.</p></div><div class="literalblock programlisting"><div class=content><pre># Add suspend/resume support for the i8254.
device           pmtimer</pre></div></div><div class=paragraph><p>Устройство таймера для управления энергопотреблением, APM и ACPI.</p></div><div class="literalblock programlisting"><div class=content><pre># PCCARD (PCMCIA) support
# PCMCIA and cardbus bridge support
device          cbb               # cardbus (yenta) bridge
device          pccard            # PC Card (16-bit) bus
device          cardbus           # CardBus (32-bit) bus</pre></div></div><div class=paragraph><p>Поддержка PCMCIA. Включите ее, если вы используете лэптоп.</p></div><div class="literalblock programlisting"><div class=content><pre># Serial (COM) ports
device          sio               # 8250, 16[45]50 based serial ports</pre></div></div><div class=paragraph><p>Четыре последовательных порта, которые известны как <span class=filename>COM</span> порты в мире MS-DOS®/Windows®</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Если у вас есть внутренний модем на <span class=filename>COM4</span> и последовательный порт <span class=filename>COM2</span>, вам понадобится поменять IRQ модема на 2 (по непонятным техническим причинам IRQ2 = IRQ9) для того, чтобы получить к нему доступ из FreeBSD. Если у вас есть многопортовая карта с последовательными портами, ознакомьтесь с <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> чтобы узнать корректные значения для добавления в <span class=filename>/boot/device.hints</span>. Некоторые видеокарты (в частности те, что используют чипы S3) используют адреса ввода/вывода в форме <code>0x*2e8</code> и, так как многие дешевые последовательные карты не полностью раскодируют шестнадцатибитное пространство адресов ввода/вывода, они конфликтуют с этими картами, в итоге <span class=filename>COM4</span> оказывается практически недоступным.</p></div><div class=paragraph><p>Каждый последовательный порт требует уникального IRQ (кроме тех случаев, когда вы используете мультипортовую карту, которая поддерживает совместное использование прерываний), поэтому значения IRQ по умолчанию для <span class=filename>COM3</span> и <span class=filename>COM4</span> не могут быть использованы.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre># Parallel port
device          ppc</pre></div></div><div class=paragraph><p>Интерфейс параллельного порта на шине ISA.</p></div><div class="literalblock programlisting"><div class=content><pre>device          ppbus      # Parallel port bus (required)</pre></div></div><div class=paragraph><p>Поддержка шины параллельного порта.</p></div><div class="literalblock programlisting"><div class=content><pre>device          lpt        # Printer</pre></div></div><div class=paragraph><p>Поддержка принтеров на параллельном порту.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Все три последних устройства необходимы для поддержка принтеров на параллельном порту.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>device          plip       # TCP/IP over parallel</pre></div></div><div class=paragraph><p>Драйвер TCP/IP через параллельный порт.</p></div><div class="literalblock programlisting"><div class=content><pre>device          ppi        # Parallel port interface device</pre></div></div><div class=paragraph><p>Поддержка ввода/вывода общего назначения ("geek port") + IEEE1284 ввода/вывода.</p></div><div class="literalblock programlisting"><div class=content><pre>#device         vpo        # Requires scbus and da</pre></div></div><div class=paragraph><p>Драйвер привода Iomega Zip. Требует наличия <code>scbus</code> и <code>da</code>. Наилучшая производительность достигается с портами в режиме EPP 1.9.</p></div><div class="literalblock programlisting"><div class=content><pre>#device         puc</pre></div></div><div class=paragraph><p>Раскомментируйте это устройство, если у вас есть "простая" последовательная или параллельная PCI карта, поддерживаемая драйвером <a href="https://man.freebsd.org/cgi/man.cgi?query=puc&amp;sektion=4&amp;format=html">puc(4)</a>.</p></div><div class="literalblock programlisting"><div class=content><pre># PCI Ethernet NICs.
device          de         # DEC/Intel DC21x4x (Tulip)
device          em         # Intel PRO/1000 adapter Gigabit Ethernet Card
device          ixgb       # Intel PRO/10GbE Ethernet Card
device          txp        # 3Com 3cR990 (Typhoon)
device          vx         # 3Com 3c590, 3c595 (Vortex)</pre></div></div><div class=paragraph><p>Драйвера сетевых карт PCI. Закомментируйте или удалите драйвера тех карт, которые отсутствуют в вашей системе.</p></div><div class="literalblock programlisting"><div class=content><pre># PCI Ethernet NICs that use the common MII bus controller code.
# NOTE: Be sure to keep the &#39;device miibus&#39; line in order to use these NICs!
device          miibus     # MII bus support</pre></div></div><div class=paragraph><p>Поддержка шины MII требуется для некоторых PCI 10/100 Ethernet карт, которые используют MII-совместимые передатчики или реализуют интерфейс управления передатчиком, который имитирует MII. Добавление <code>device miibus</code> в конфигурационный файл ядра включает поддержку стандартного API miibus и всех драйверов PHY, включая стандартный для тех PHY, которые не обрабатываются специфическим образом конкретным драйвером.</p></div><div class="literalblock programlisting"><div class=content><pre>device          bfe        # Broadcom BCM440x 10/100 Ethernet
device          bge        # Broadcom BCM570xx Gigabit Ethernet
device          dc         # DEC/Intel 21143 and various workalikes
device          fxp        # Intel EtherExpress PRO/100B (82557, 82558)
device		lge	   # Level 1 LXT1001 gigabit ethernet
device          msk        # Marvell/SysKonnect Yukon II Gigabit Ethernet
device		nge	   # NatSemi DP83820 gigabit ethernet
device          pcn        # AMD Am79C97x PCI 10/100 (precedence over &#39;lnc&#39;)
device          re         # RealTek 8139C+/8169/8169S/8110S
device          rl         # RealTek 8129/8139
device          sf         # Adaptec AIC-6915 (Starfire)
device          sis        # Silicon Integrated Systems SiS 900/SiS 7016
device          sk         # SysKonnect SK-984x &gt; SK-982x gigabit Ethernet
device          ste        # Sundance ST201 (D-Link DFE-550TX)
device          stge       # Sundance/Tamarack TC9021 gigabit Ethernet
device          ti         # Alteon Networks Tigon I/II gigabit Ethernet
device          tl         # Texas Instruments ThunderLAN
device          tx         # SMC EtherPower II (83c170 EPIC)
device		vge	   # VIA VT612x gigabit ethernet
device          vr         # VIA Rhine, Rhine II
device          wb         # Winbond W89C840F
device          xl         # 3Com 3c90x (Boomerang, Cyclone)</pre></div></div><div class=paragraph><p>Драйвера, которые используют контроллер шины MII.</p></div><div class="literalblock programlisting"><div class=content><pre># ISA Ethernet NICs.  pccard NICs included.
device          cs         # Crystal Semiconductor CS89x0 NIC
# &#39;device ed&#39; requires &#39;device miibus&#39;
device          ed         # NE[12]000, SMC Ultra, 3c503, DS8390 cards
device          ex         # Intel EtherExpress Pro/10 and Pro/10+
device          ep         # Etherlink III based cards
device          fe         # Fujitsu MB8696x based cards
device          ie         # EtherExpress 8/16, 3C507, StarLAN 10 etc.
device          lnc        # NE2100, NE32-VL Lance Ethernet cards
device          sn         # SMC&#39;s 9000 series of Ethernet chips
device          xe         # Xircom pccard Ethernet

# ISA devices that use the old ISA shims
#device         le</pre></div></div><div class=paragraph><p>Драйвера сетевых карт ISA. Ознакомьтесь с файлом <span class=filename>/usr/src/sys/i386/conf/NOTES</span>, чтобы узнать, какие сетевые карты каким драйвером поддерживаются.</p></div><div class="literalblock programlisting"><div class=content><pre># Wireless NIC cards
device          wlan            # 802.11 support</pre></div></div><div class=paragraph><p>Generic 802.11 support. This line is required for wireless networking.</p></div><div class="literalblock programlisting"><div class=content><pre>device          wlan_wep        # 802.11 WEP support
device          wlan_ccmp       # 802.11 CCMP support
device          wlan_tkip       # 802.11 TKIP support</pre></div></div><div class=paragraph><p>Crypto support for 802.11 devices. These lines are needed if you intend to use encryption and 802.11i security protocols.</p></div><div class="literalblock programlisting"><div class=content><pre>device          an         # Aironet 4500/4800 802.11 wireless NICs.
device          ath             # Atheros pci/cardbus NIC&#39;s
device          ath_hal         # Atheros HAL (Hardware Access Layer)
device          ath_rate_sample # SampleRate tx rate control for ath
device          awi        # BayStack 660 and others
device          wi         # WaveLAN/Intersil/Symbol 802.11 wireless NICs.
#device         wl         # Older non 802.11 Wavelan wireless NIC.</pre></div></div><div class=paragraph><p>Поддержка различных беспроводных карт.</p></div><div class="literalblock programlisting"><div class=content><pre># Pseudo devices
device   loop          # Network loopback</pre></div></div><div class=paragraph><p>Стандартное устройство обратной связи для TCP/IP. Если вы запускаете telnet или FTP по отношению <code>localhost</code> (он же <code>127.0.0.1</code>), то соединение пройдёт через это устройство. Этот параметр <em>обязателен</em>.</p></div><div class="literalblock programlisting"><div class=content><pre>device   random        # Entropy device</pre></div></div><div class=paragraph><p>Генератор случайных чисел для криптографической защиты.</p></div><div class="literalblock programlisting"><div class=content><pre>device   ether         # Ethernet support</pre></div></div><div class=paragraph><p><code>ether</code> необходим лишь в случае, если у вас есть сетевая карта. Он включает поддержку стандартного кода протокола Ethernet.</p></div><div class="literalblock programlisting"><div class=content><pre>device   sl            # Kernel SLIP</pre></div></div><div class=paragraph><p><code>sl</code> - это поддержка SLIP. SLIP был практически вытеснен PPP, который легче настраивается, лучше подходит для соединений модем-модем и имеет больше возможностей.</p></div><div class="literalblock programlisting"><div class=content><pre>device   ppp           # Kernel PPP</pre></div></div><div class=paragraph><p>Поддержка PPP в ядре для соединений dial-up. Также существует версия PPP, реализованного как приложение, использующее <code>tun</code>, и предлагающее большую гибкость и большее количество возможностей, как, например, соединение при необходимости (наличии обращения к сети).</p></div><div class="literalblock programlisting"><div class=content><pre>device   tun           # Packet tunnel.</pre></div></div><div class=paragraph><p>Используется пользовательским программным обеспечением PPP. Обратитесь к разделу <a href=../ppp-and-slip/#userppp>PPP</a> этой книги за дальнейшей информацией.</p></div><div class="literalblock programlisting"><div class=content><pre>device   pty           # Pseudo-ttys (telnet etc)</pre></div></div><div class=paragraph><p>"псевдо-терминал" или имитированный порт для входа. Используется входящими <code>telnet</code> и <code>rlogin</code>-сессиями, приложением xterm и некоторыми другими приложениями, такими как Emacs.</p></div><div class="literalblock programlisting"><div class=content><pre>device   md            # Memory disks</pre></div></div><div class=paragraph><p>Псевдо-устройства дисков в памяти.</p></div><div class="literalblock programlisting"><div class=content><pre>device   gif           # IPv6 and IPv4 tunneling</pre></div></div><div class=paragraph><p>Поддержка туннелирования IPv6 через IPv4, IPv4 через IPv6, IPv4 через IPv4 и IPv6 через IPv6. Устройство <code>gif</code> является "автоклонируемым", и будет срздавать файлы устройств по мере необходимости.</p></div><div class="literalblock programlisting"><div class=content><pre>device   faith         # IPv6-to-IPv4 relaying (translation)</pre></div></div><div class=paragraph><p>Это псевдо-устройство захватывает пакеты, которые были посланы ему и перенаправляет их даемону трансляции IPv4/IPv6.</p></div><div class="literalblock programlisting"><div class=content><pre># The `bpf&#39; device enables the Berkeley Packet Filter.
# Be aware of the administrative consequences of enabling this!
# Note that &#39;bpf&#39; is required for DHCP.
device   bpf           # Berkeley packet filter</pre></div></div><div class=paragraph><p>Фильтр пакетов Berkeley. Это псевдо-устройство позволяет переводить сетевые интерфейсы в "неразборчивый" (promiscuous) режим, в котором перехватывается любой пакет в широковещательной сети (например ethernet). Эти пакеты могут быть сохранены на диск и/или исследованы при помощи <a href="https://man.freebsd.org/cgi/man.cgi?query=tcpdump&amp;sektion=1&amp;format=html">tcpdump(1)</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Устройство <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> также используется программой <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a> для того, чтобы получить адрес шлюза по умолчанию и т.п. Если вы используете DCHP, не удаляйте эту опцию.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre># USB support
device          uhci          # UHCI PCI-&gt;USB interface
device          ohci          # OHCI PCI-&gt;USB interface
device		ehci	      # EHCI PCI-&gt;USB interface (USB 2.0)
device          usb           # USB Bus (required)
#device         udbp          # USB Double Bulk Pipe devices
device          ugen          # Generic
device          uhid          # Human Interface Devices
device          ukbd          # Keyboard
device          ulpt          # Printer
device          umass         # Disks/Mass storage - Requires scbus and da
device          ums           # Mouse
device          ural          # Ralink Technology RT2500USB wireless NICs
device          urio          # Diamond Rio 500 MP3 player
device          uscanner      # Scanners
# USB Ethernet, requires mii
device          aue           # ADMtek USB Ethernet
device          axe           # ASIX Electronics USB Ethernet
device		cdce	      # Generic USB over Ethernet
device          cue           # CATC USB Ethernet
device          kue           # Kawasaki LSI USB Ethernet
device          rue           # RealTek RTL8150 USB Ethernet</pre></div></div><div class=paragraph><p>Поддержка различных USB устройств.</p></div><div class="literalblock programlisting"><div class=content><pre># FireWire support
device          firewire      # FireWire bus code
device          sbp           # SCSI over FireWire (Requires scbus and da)
device          fwe           # Ethernet over FireWire (non-standard!)</pre></div></div><div class=paragraph><p>Поддержка различных устройств Firewire.</p></div><div class=paragraph><p>За дальнейшей информацией о дополнительных устройствах, поддерживаемых FreeBSD, обратитесь к файлу <span class=filename>/usr/src/sys/i386/conf/NOTES</span>.</p></div><div class=sect2><h3 id=_конфигурации_с_большим_количеством_оперативной_памяти_pae>9.6.1. Конфигурации с большим количеством оперативной памяти (PAE)<a class=anchor href=#_конфигурации_с_большим_количеством_оперативной_памяти_pae></a></h3><div class=paragraph><p>Машины с большим количеством оперативной памяти, в которых требуется более 4 гигабайт в пользовательском адресном пространстве и адресном пространстве ядра (User+Kernel Virtual Address, KVA) в обычном случае не смогут использовать более 4 гигабайт. Для решения этой проблемы Intel добавили поддержку 36-битной адресации в Pentium® Pro и более поздних моделях процессоров.</p></div><div class=paragraph><p>Расширение физического адресного пространства (PAE) в процессорах Intel® Pentium® Pro и более поздних позволяет использовать до 64 гигабайт оперативной памяти. FreeBSD имеет поддержку этой возможности посредством опции ядра <code>PAE</code>, доступной во всех текущих версиях FreeBSD. В связи с ограничениями архитектуры Intel, не делается никакого различия между памятью ниже или выше 4 гигабайт. Память, размещенная выше 4 гигабайт, просто добавляется к доступной памяти.</p></div><div class=paragraph><p>Для того, чтобы включить PAE в ядре, просто добавьте приведенную строку в конфигурационный файл ядра:</p></div><div class="literalblock programlisting"><div class=content><pre>options            PAE</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Поддержка PAE в FreeBSD существует только для процессоров Intel® IA-32. Также следует заметить, что PAE в FreeBSD не было полностью протестировано и должно считаться находящимся в состоянии бета-тестирования по сравнению с другими, стабильными возможностями FreeBSD.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Поддержка PAE в FreeBSD имеет следующие ограничения:</p></div><div class=ulist><ul><li><p>Процесс не может получить доступ к более, чем 4 гигабайтам пространства VM.</p></li><li><p>Драйверы устройств, которые не используют интерфейс <a href="https://man.freebsd.org/cgi/man.cgi?query=bus_dma&amp;sektion=9&amp;format=html">bus_dma(9)</a>, приведут к повреждению информации в ядре с включенным PAE. Не рекомендуется использовать такие драйверы. По этой причине в FreeBSD включен конфигурационный файл ядра <span class=filename>PAE</span>, из которого удалены все драйверы, о которых известно, что они не работают при включенной поддержке PAE.</p></li><li><p>Некоторые системные переменные определяют использование ресурсов памяти по количеству доступной физической памяти. Такие переменные могут привести к ненужному чрезмерному выделению памяти из-за особенностей работы системы PAE. Один из таких примеров - переменная <code>kern.maxvnodes</code>, которая управляет максимальным количеством vnode, разрешенных в ядре. Рекомендуется установить эту и подобные ей переменные вручную в адекватные значения.</p></li><li><p>Возможно, понадобится увеличить пространство виртуальных адресов ядра (KVA) или уменьшить какую-либо переменную (см. выше), значение которой было неоправданно велико и могло привести к исчерпанию KVA. Для этого может быть использована опция ядра <code>KVA_PAGES</code>.</p></li></ul></div><div class=paragraph><p>В случае сомнений относительно производительности и стабильности рекомендуется обратиться к странице руководства <a href="https://man.freebsd.org/cgi/man.cgi?query=tuning&amp;sektion=7&amp;format=html">tuning(7)</a>. Страница руководства <a href="https://man.freebsd.org/cgi/man.cgi?query=pae&amp;sektion=4&amp;format=html">pae(4)</a> содержит свежую информацию о поддержке PAE в FreeBSD.</p></div></div></div></div><div class=sect1><h2 id=kernelconfig-trouble>9.7. Решение проблем<a class=anchor href=#kernelconfig-trouble></a></h2><div class=sectionbody><div class=paragraph><p>Существует четыре категории проблем, которые могут возникнуть при сборке собственного ядра. Вот они:</p></div><div class=dlist><dl><dt class=hdlist1>Не удаётся отработать команде <code>config</code></dt><dd><p>Если команда <a href="https://man.freebsd.org/cgi/man.cgi?query=config&amp;sektion=8&amp;format=html">config(8)</a> не может отработать, то, скорее всего, вы допустили где-нибудь маленькую ошибку. К счастью, <a href="https://man.freebsd.org/cgi/man.cgi?query=config&amp;sektion=8&amp;format=html">config(8)</a> выведет номер проблемной строки, поэтому вы можете быстро найти строку, содержащую ошибку. Например, если вы видите:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>config: line 17: syntax error</code></pre></div></div><div class=paragraph><p>Убедитесь, что опция введена верно путём сравнения с файлом <span class=filename>GENERIC</span> или другим источником.</p></div></dd><dt class=hdlist1>Не удаётся отработать команде <code>make</code></dt><dd><p>Если не удаётся отработать команде <code>make</code>, обычно это означает ошибку в описании конфигурации ядра, которая не достаточно тривиальна для того, чтобы <a href="https://man.freebsd.org/cgi/man.cgi?query=config&amp;sektion=8&amp;format=html">config(8)</a> мог обнаружить её. Опять-таки, просмотрите файл конфигурации, и, если вы все еще не можете решить проблему, напишите письмо в <a href=https://lists.FreeBSD.org/subscription/freebsd-questions>Список рассылки, посвящённый вопросам и ответам пользователей FreeBSD</a>, включив в письмо файл конфигурации ядра. Скорее всего проблема будет решена быстро.</p><div class=dlist><dl><dt class=hdlist1>Ядро не загружается:<a id=kernelconfig-noboot></a></dt><dd><p>Если ваше новое ядро не загружается или ему не удаётся обнаружить ваши устройства - не паникуйте! К счастью, в FreeBSD существует отличный механизм для восстановления после установки несовместимого ядра. Просто выберите ядро, которое хотите загрузить, в загрузчике FreeBSD. Доступ к нему вы можете получить, когда система находится в стартовом меню. Выберите шестой пункт ("Escape to a loader prompt"), введите команду <code>boot <em>kernel.old</em></code>, или используйте любое другое ядро, которое загрузится без проблем. Во время переконфигурирования ядра всегда полезно оставлять копию ядра, о котором известно, что оно рабочее.</p><div class=paragraph><p>После загрузки с рабочим ядром вы можете проверить ваш файл конфигурации и попробовать собрать ядро опять. Очень полезным в данном случае окажется файл <span class=filename>/var/log/messages</span>, в котором, среди других записей, имеются сообщения ядра от каждой успешной загрузки. Также, команда <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a> выведет сообщения ядра от текущей загрузки.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Если у вас возникли проблемы со сборкой ядра, убедитесь, что вы сохранили ядро <span class=filename>GENERIC</span> или другое рабочее ядро под другим именем, чтобы оно не было удалено при следующей сборке. Вы не можете использовать <span class=filename>kernel.old</span>, потому что при установке нового ядра <span class=filename>kernel.old</span> перезаписывается последним установленным ядром, которое может оказаться нерабочим. Также, как можно скорее переместите рабочее ядро в <span class=filename>/boot/kernel</span>, так как некоторые команды, такие как <a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> будут работать некорректно. Для этого просто переместите каталог, содержащий работоспособное ядро:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mv /boot/kernel /boot/kernel.bad</span>
<span class=c># mv /boot/kernel.good /boot/kernel</span></code></pre></div></div></td></tr></tbody></table></div></dd></dl></div></dd><dt class=hdlist1>Ядро работает, но <a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> больше не работает</dt><dd><p>Если вы установили версию ядра отличную от той, с которой были собраны ваши системные утилиты, например, ядро от -CURRENT на системе -RELEASE, большая часть системных команд, таких как <a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=vmstat&amp;sektion=8&amp;format=html">vmstat(8)</a> не будут больше работать. Вам потребуется <a href=../cutting-edge/#makeworld>перекомпилировать и установить систему</a> той же версии исходных текстов, что и ядро. Это одна из причин, по которой не следует использовать версию ядра, отличную от версии всей остальной системы.</p></dd></dl></div></div></div></div><hr><div class=last-modified><p><strong>Изменено</strong>: 9 марта 2024 г. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Назад></i><div class=container><a href=http://172.16.201.134:1313/ru/books/handbook/multimedia class=direction>Назад</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Главная></i><div class=container><a href=../ class=direction>Главная</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/ru/books/handbook/printing class=direction>Далее</a></div><i class="fa fa-angle-right" aria-hidden=true title=Далее></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#kernelconfig-synopsis>9.1. Краткий обзор</a></li><li><a href=#kernelconfig-custom-kernel>9.2. Зачем собирать собственное ядро?</a></li><li><a href=#kernelconfig-devices>9.3. Определение аппаратного обеспечения</a></li><li><a href=#kernelconfig-modules>9.4. Драйвера, подсистемы и модули ядра</a></li><li><a href=#kernelconfig-building>9.5. Сборка и установка собственного ядра</a></li><li><a href=#kernelconfig-config>9.6. Конфигурационный файл</a></li><li><a href=#kernelconfig-trouble>9.7. Решение проблем</a></li></ul></nav><hr><div class=resources><h3>Материалы</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Скачать PDF"></i><a href=https://download.freebsd.org/doc/ru/books/handbook/handbook_ru.pdf>Скачать PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Редактировать эту страницу"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ru/_index target=_blank>Редактировать эту страницу</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/ru/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Выберите язык">
<span>Русский</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Система</option><option value=theme-light>Светлый</option><option value=theme-dark>Тёмный</option><option value=theme-high-contrast>Высокая контрастность</option></select></div></div></section><section class=about-column><h3 class=column-title>О нас</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Кодекс Этики</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Бюллетени Безопасности</a></li></ul></section><section class=documentation-column><h3 class=column-title>Документация</h3><ul class=column-elements-container><li><a href=/ru class=column-element>Портал документации</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Презентации и публикации</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Предыдущие версии</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>Документы 4.4BSD</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Сообщество</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/ru/articles/contributing class=column-element>Принять участие</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Форум Сообщества</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Трекер ошибок</a></li></ul></section><section class=legal-column><h3 class=column-title>Юридическая информация</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Пожертвования</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Лицензирование</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Политика Конфиденциальности</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Юридические оговорки</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 Проект FreeBSD. Все права защищены</p><span>Сделано с помощью <span class=heart>♥</span> Сообществом FreeBSD</span></section></div></footer></body></html>