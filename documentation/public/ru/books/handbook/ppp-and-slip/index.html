<!doctype html><html class=theme-light lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/><title>Глава 23. PPP и SLIP | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Глава 23. PPP и SLIP"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ru"><meta property="og:url" content="https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/ru\/books\/handbook\/ppp-and-slip\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>О нас
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>О нас</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Кодекс Этики</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Получить FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Информация о релизах</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Подготовка релизов</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Бюллетени Безопасности</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Документация
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ru>Портал документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook>Руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook>Руководство по созданию портов</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Учебник Проекта Документирования</a></li><li><a href=https://man.FreeBSD.org target=_blank>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Презентации и публикации</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/ru/books>Книги</a></li><li><a href=https://docs.freebsd.org/ru/articles>Статьи</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Сообщество
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Сообщество</a></li><li><a href=https://docs.freebsd.org/ru/articles/contributing>Стать участником</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Форум</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Трекер ошибок</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Поддержка</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ru>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Пожертвования</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Поиск aria-label=Поиск maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/preface/>Предисловие</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-audience>Целевая аудитория</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from4>Четвёртое издание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from3>Третье издание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes-from2>Второе издание (2004)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-changes>Первое издание (2001)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-overview>Структура этой книги</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-conv>Договоренности, используемые в этой книге</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/preface/#preface-acknowledgements>Благодарности</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/parti/>Часть I. В начале</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/introduction/>Глава 1. Введение</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#introduction-synopsis>1.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#nutshell>1.2. Добро пожаловать во FreeBSD!</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/introduction/#history>1.3. О Проекте FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/install/>Глава 2. Установка FreeBSD версий 8.X и более ранних</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-synopsis>2.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-hardware>2.2. Аппаратные требования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-pre>2.3. Перед установкой</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-start>2.4. Начало установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#using-sysinstall>2.5. Введение в Sysinstall</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-steps>2.6. Выделение дискового пространства</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-choosing>2.7. Выбор устанавливаемых компонентов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-media>2.8. Выбор источника для установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-final-warning>2.9. Подтверждение установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-post>2.10. После установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-trouble>2.11. Решение проблем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-advanced>2.12. Расширенное руководство по установке</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/install/#install-diff-media>2.13. Подготовка собственного источника установки</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/>Глава 3. Установка FreeBSD версий 9.X и более поздних</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-synopsis>3.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-hardware>3.2. Аппаратные требования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-pre>3.3. Перед установкой</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-start>3.4. Начало установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#using-bsdinstall>3.5. Введение в bsdinstall</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-netinstall>3.6. Установка по сети</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-partitioning>3.7. Выделение дискового пространства</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-final-warning>3.8. Завершение установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-post>3.9. После установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#bsdinstall-install-trouble>3.10. Решение проблем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bsdinstall/#using-live-cd>3.11. Использование Live CD</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/basics/>Глава 4. Основы UNIX</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-synopsis>4.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#consoles>4.2. Виртуальные консоли и терминалы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#users-synopsis>4.3. Пользователи и основы управления учетными записями</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#permissions>4.4. Права доступа</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#dirstructure>4.5. Структура каталогов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#disk-organization>4.6. Организация дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#mount-unmount>4.7. Монтирование и размонтирование файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-processes>4.8. Процессы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-daemons>4.9. Даемоны, сигналы, уничтожение процессов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#shells>4.10. Интерпретатор команд</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#editors>4.11. Текстовые редакторы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-devices>4.12. Устройства и файлы устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#binary-formats>4.13. Бинарные форматы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/basics/#basics-more-information>4.14. Дополнительная информация</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/ports/>Глава 5. Установка приложений: порты и пакеты</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-synopsis>5.1. Обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-overview>5.2. Обзор установки программного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-finding-applications>5.3. Поиск программного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#packages-using>5.4. Использование бинарных пакетов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#pkgng-intro>5.5. Использование pkgng для управления бинарными пакетами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-using>5.6. Использование Коллекции Портов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-nextsteps>5.7. Действия после установки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ports/#ports-broken>5.8. Обработка нерабочих портов</a></li></ul></li><li><input type=checkbox id=chapter-f56428b9e0d0b77cc8e863910f96bbde class=toggle>
<label class="icon cursor" for=chapter-f56428b9e0d0b77cc8e863910f96bbde><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/wayland/>Глава 6. Wayland</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-synopsis>6.1. Общие сведения о Wayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-wayfire>6.2. Композитный менеджер Wayfire</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-hikari>6.3. Композитный менеджер Hikari</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-sway>6.4. Композитный менеджер Sway</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-xwayland>6.5. Использование Xwayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-remotedesktop>6.6. Организация Удалённого Рабочего Стола при помощи VNC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-ly>6.7. Менеджер регистраций Wayland</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/wayland/#wayland-utilities>6.8. Полезные Инструменты</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/x11/>Глава 6. X Window System</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x11-synopsis>6.1. Обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-understanding>6.2. Основы X</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-install>6.3. Установка X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-config>6.4. Конфигурация X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-fonts>6.5. Использование шрифтов в X11</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x-xdm>6.6. Менеджеры экранов (Display Managers) X</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/x11/#x11-wm>6.7. Графические оболочки</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partii/>Часть II. Общие задачи</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/desktop/>Глава 7. Приложения для настольного компьютера</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-synopsis>7.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-browsers>7.2. Браузеры</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-productivity>7.3. Бизнес приложения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-viewers>7.4. Программы просмотра документов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-finance>7.5. Финансовые программы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/desktop/#desktop-summary>7.6. Итоги</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/>Глава 8. Мультимедиа</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#multimedia-synopsis>8.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#sound-setup>8.2. Настройка звуковой карты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#sound-mp3>8.3. Звук MP3</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#video-playback>8.4. Воспроизведение видео</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#tvcard>8.5. Настройка ТВ тюнеров</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/multimedia/#scanners>8.6. Сканеры</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/>Глава 9. Настройка ядра FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-synopsis>9.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-custom-kernel>9.2. Зачем собирать собственное ядро?</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-devices>9.3. Определение аппаратного обеспечения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-modules>9.4. Драйвера, подсистемы и модули ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-building>9.5. Сборка и установка собственного ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-config>9.6. Конфигурационный файл</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/kernelconfig/#kernelconfig-trouble>9.7. Решение проблем</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/printing/>Глава 10. Печать</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-synopsis>10.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-intro-spooler>10.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-intro-setup>10.3. Основная настройка</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-advanced>10.4. Расширенная настройка принтера</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-using>10.5. Использование принтеров</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-lpd-alternatives>10.6. Альтернативы стандартному спулеру</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/printing/#printing-troubleshooting>10.7. Выявление проблем</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/>Глава 11. Двоичная совместимость с Linux</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-synopsis>11.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-lbc-install>11.2. Установка</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-mathematica>11.3. Установка Mathematica®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-maple>11.4. Установка Maple™</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-matlab>11.5. Установка MATLAB®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-oracle>11.6. Установка Oracle®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#sapr3>11.7. Установка SAP® R/3®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/linuxemu/#linuxemu-advanced>11.8. Дополнительные сведения</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partiii/>Часть III. Системное администрирование</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/config/>Глава 12. Настройка и оптимизация</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#config-synopsis>12.1. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-initial>12.2. Начальное конфигурирование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-core-configuration>12.3. Основные настройки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-appconfig>12.4. Настройка приложений</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-starting-services>12.5. Запуск сервисов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-cron>12.6. Настройка утилиты <code>cron</code></a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-rcd>12.7. Использование rc во FreeBSD 5.X и последующих версиях</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#config-network-setup>12.8. Настройка карт сетевых интерфейсов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-virtual-hosts>12.9. Настройка виртуальных серверов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-configfiles>12.10. Файлы настройки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-sysctl>12.11. Настройка с помощью sysctl</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-disk>12.12. Оптимизация дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#configtuning-kernel-limits>12.13. Изменение ограничений, накладываемых ядром</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#adding-swap-space>12.14. Увеличение объема подкачки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#acpi-overview>12.15. Управление питанием и ресурсами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/config/#ACPI-debug>12.16. Использование и отладка FreeBSD ACPI</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/boot/>Глава 13. Процесс загрузки FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-synopsis>13.1. Описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-introduction>13.2. Проблема загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-blocks>13.3. Менеджер загрузки и этапы загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-kernel>13.4. Взаимодействие с ядром во время загрузки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#device-hints>13.5. Хинты устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-init>13.6. Init: инициализация управления процессами</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/boot/#boot-shutdown>13.7. Процесс остановки системы</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/security/>Глава 14. Безопасность</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-synopsis>14.1. Краткое описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-intro>14.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#securing-freebsd>14.3. Защита FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#crypt>14.4. DES, MD5, и шифрование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#one-time-passwords>14.5. Одноразовые пароли</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#tcpwrappers>14.6. TCP Wrappers</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#ipsec>14.10. VPN через IPsec</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#fs-acl>14.12. Списки контроля доступа файловой системы (ACL)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-portaudit>14.13. Мониторинг вопросов безопасности в ПО сторонних разработчиков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-advisories>14.14. Сообщения безопасности FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/security/#security-accounting>14.15. Учёт используемых ресурсов</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mac/>Глава 15. Принудительный контроль доступа (MAC)</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-synopsis>15.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-inline-glossary>15.2. Ключевые термины этой главы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-initial>15.3. Описание MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-understandlabel>15.4. Метки MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-modules>15.5. Настройка модулей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-bsdextended>15.6. Модуль MAC bsdextended</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-ifoff>15.7. Модуль MAC ifoff</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-portacl>15.8. Модуль MAC portacl</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-labelingpolicies>15.9. Политики MAC, использующие метки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-partition>15.10. Модуль MAC partition</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-mls>15.11. Модуль многоуровневой безопасности MAC (MLS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-biba>15.12. Модуль MAC Biba</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-lomac>15.13. Модуль MAC LOMAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-implementing>15.14. Реализация защищенной среды с MAC</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#MAC-examplehttpd>15.15. Другой пример: Использование MAC для защиты веб сервера</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mac/#mac-troubleshoot>15.16. Решение проблем с инфраструктурой MAC</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/audit/>Глава 16. Аудит событий безопасности</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-synopsis>16.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-inline-glossary>16.2. Ключевые понятия</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-config>16.3. Настройка системы аудита</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/audit/#audit-administration>16.4. Работа с журналами аудита</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/disks/>Глава 17. Устройства хранения</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-synopsis>17.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-naming>17.2. Имена устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-adding>17.3. Добавление дисков</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#raid>17.4. RAID</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#usb-disks>17.5. USB устройства хранения</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#creating-cds>17.6. Запись и использование оптических носителей (CD)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#creating-dvds>17.7. Создание и использование оптических носителей (DVD)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#floppies>17.8. Дискеты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backups-tapebackups>17.9. Создание и использование архивных копий на магнитной ленте</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backups-floppybackups>17.10. Создание резервных копий на дискетах</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backup-strategies>17.11. Стратегии резервного копирования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#backup-basics>17.12. Основы технологии резервного копирования</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-virtual>17.13. Сетевые файловые системы, файловые системы в памяти и с отображением в файл</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#snapshots>17.14. Мгновенные копии файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#quotas>17.15. Квотирование файловых систем</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#disks-encrypting>17.16. Шифрование дисковых разделов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/disks/#swap-encrypting>17.17. Шифрование области подкачки</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/geom/>Глава 18. GEOM: Модульная инфраструктура преобразования дисковых запросов</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-synopsis>18.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-intro>18.2. Введение в GEOM</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-striping>18.3. RAID0 - Создание дисковой последовательности (Striping)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#GEOM-mirror>18.4. RAID1 - Зеркалирование (Mirroring)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-ggate>18.5. Сетевые устройства GEOM Gate</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-glabel>18.6. Метки дисковых устройств</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/geom/#geom-gjournal>18.7. Журналирование UFS средствами GEOM</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/>Глава 19. Поддержка файловых систем</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/#filesystems-synopsis>19.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/filesystems/#filesystems-zfs>19.2. Файловая система ZFS</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/l10n/>Глава 20. Локализация - использование и настройка i18n/L10n</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#l10n-synopsis>20.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#using-localization>20.2. Использование локализации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#l10n-compiling>20.3. Поиск приложений i18n</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/l10n/#lang-setup>20.4. Настройка локализации для некоторых языков</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/>Глава 21. Обновление системы и смена версии FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-synopsis>21.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>21.2. Обновление FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#updating-upgrading-documentation>21.3. Обновление документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#current-stable>21.4. Использование ветви разработки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#synching>21.5. Синхронизация исходных текстов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#makeworld>21.6. Пересборка мира</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/cutting-edge/#small-lan>21.7. Отслеживание исходных текстов для нескольких машин</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partiv/>Часть IV. Сетевые коммуникации</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/>Глава 22. Последовательные соединения</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serial-synopsis>22.1. Краткое описание</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serial>22.2. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#term>22.3. Терминалы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#dialup>22.4. Входящие соединения по модему</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#dialout>22.5. Исходящие соединения по модему</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms/#serialconsole-setup>22.6. Настройка последовательной консоли</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle checked>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/>Глава 23. PPP и SLIP</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>23.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#userppp>23.2. PPP уровня пользователя</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp>23.3. PPP уровня ядра</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#ppp-troubleshoot>23.4. Решение проблем с соединениями PPP</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#pppoe>23.5. Использование PPP через Ethernet (PPPoE)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#pppoa>23.6. Использование PPP через ATM (PPPoA)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/ppp-and-slip/#slip>23.7. Использование SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mail/>Глава 24. Электронная почта</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-synopsis>24.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-using>24.2. Использование электронной почты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#sendmail>24.3. Настройка sendmail</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-changingmta>24.4. Установка другой почтовой программы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-trouble>24.5. Поиск и устранение неисправностей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-advanced>24.6. Расширенное руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#outgoing-only>24.7. Настройка почты только для отправки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#SMTP-dialup>24.8. Использование почты с коммутируемым соединением</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#SMTP-Auth>24.9. SMTP аутентификация</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-agents>24.10. Почтовые программы пользователей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-fetchmail>24.11. Использование fetchmail</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mail/#mail-procmail>24.12. Использование procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/>Глава 25. Сетевые серверы</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-servers-synopsis>25.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-inetd>25.2. "Супер-сервер"inetd</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-nfs>25.3. Network File System (NFS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-nis>25.4. Network Information System (NIS/YP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-dhcp>25.5. Автоматическая настройка сети (DHCP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-dns>25.6. Domain Name System (DNS)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-apache>25.7. Apache HTTP сервер</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-samba>25.8. Файл сервер и печать для Microsoft® Windows® клиентов (Samba)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-ftp>25.9. Протокол передачи файлов (FTP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-ntp>25.10. Синхронизация часов через NTP</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/network-servers/#network-syslogd>25.11. * Remote Host Logging with <code>syslogd</code></a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/>Глава 26. Межсетевые экраны</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-intro>26.1. Введение</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-concepts>26.2. Принципы работы межсетевых экранов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-apps>26.3. Пакеты межсетевых экранов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-pf>26.4. Packet Filter (PF, межсетевой экран OpenBSD) и ALTQ</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-ipf>26.5. * IPFILTER (IPF)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/firewalls/#firewalls-ipfw>26.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/>Глава 27. Сложные вопросы работы в сети</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#advanced-networking-synopsis>27.1. Краткий обзор</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-routing>27.2. Сетевые шлюзы и маршруты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-wireless>27.3. Беспроводные сети</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-bluetooth>27.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-bridging>27.5. Мосты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-diskless>27.6. Работа с бездисковыми станциями</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-isdn>27.7. ISDN</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-natd>27.8. Даемон преобразования сетевых адресов (natd)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-plip>27.9. IP по параллельному порту (PLIP)</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-ipv6>27.10. IPv6</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/advanced-networking/#network-atm>27.11. Асинхронный режим передачи (ATM)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/partv/>Часть V. Приложения</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/>Приложение A. Получение FreeBSD</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-cdrom>A.1. Наборы CD и DVD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-ftp>A.2. FTP сайты</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#ctm>A.3. Использование CTM</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#svn>A.4. Использование Subversion</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/mirrors/#mirrors-rsync>A.5. Использование rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/>Приложение B. Библиография</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-freebsd>B.1. Книги и журналы, специализирующиеся на FreeBSD</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-userguides>B.2. Руководства для пользователей</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-adminguides>B.3. Руководства для администраторов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-programmers>B.4. Руководства для программистов</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-osinternals>B.5. Внутренности операционной системы</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-security>B.6. Безопасность</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-hardware>B.7. Оборудование</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-history>B.8. История UNIX®</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/bibliography/#bibliography-journals>B.9. Прочие издания</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/eresources/>Приложение C. Ресурсы в интернет</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-mail>C.1. Списки рассылки</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-news>C.2. Новостные группы Usenet</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-web>C.3. Серверы World Wide Web</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook/eresources/#eresources-email>C.4. Адреса Email</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/ru/books/handbook/pgpkeys/>Приложение D. PGP ключи</a><ul><li><a href=https://docs.freebsd.org/ru/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Офицеры</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Меню книг"></i>
Меню книг</span></label></div><h1 class=title>Глава 23. PPP и SLIP</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Этот перевод может быть устаревшим. Для того, чтобы помочь с переводом, пожалуйста, обратитесь к <a href=https://translate-dev.freebsd.org/ target=_blank>Сервер переводов FreeBSD</a>.</p></div><div class=toc-mobile><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#ppp-and-slip-synopsis>23.1. Краткий обзор</a></li><li><a href=#userppp>23.2. PPP уровня пользователя</a></li><li><a href=#ppp>23.3. PPP уровня ядра</a></li><li><a href=#ppp-troubleshoot>23.4. Решение проблем с соединениями PPP</a></li><li><a href=#pppoe>23.5. Использование PPP через Ethernet (PPPoE)</a></li><li><a href=#pppoa>23.6. Использование PPP через ATM (PPPoA)</a></li><li><a href=#slip>23.7. Использование SLIP</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=ppp-and-slip-synopsis>23.1. Краткий обзор<a class=anchor href=#ppp-and-slip-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>В FreeBSD существует множество способов соединения одного компьютера с другим. Для установления соединения с отдельной сетью или интернет через обычный модем, или для открытия доступа к собственному компьютеру необходимо использование PPP или SLIP. В этой главе детально описана настройка таких модемных сервисов.</p></div><div class=paragraph><p>После прочтения этой главы вы будете знать:</p></div><div class=ulist><ul><li><p>Как настроить PPP уровня пользователя (user PPP).</p></li><li><p>Как настроить PPP уровня ядра (kernel PPP).</p></li><li><p>Как настроить PPPoE (PPP over Ethernet).</p></li><li><p>Как настроить PPPoA (PPP over ATM).</p></li><li><p>Как настроить SLIP клиента и сервер.</p></li></ul></div><div class=paragraph><p>Перед прочтением этой главы вам потребуется:</p></div><div class=ulist><ul><li><p>Ознакомиться с основными сетевыми технологиями.</p></li><li><p>Понимать основы и назначение модемного соединения и PPP и/или SLIP.</p></li></ul></div><div class=paragraph><p>Вы возможно захотите узнать, в чем главное различие между PPP уровня пользователя и ядра. Ответ прост: PPP уровня пользователя обрабатывает входящие и исходящие данные в пространстве пользователя, а не в ядре. В терминах копирования данных между ядром и пространством пользователя это дорогостоящий путь, который однако позволяет значительно расширить возможности реализации PPP. PPP уровня пользователя для связи с внешним миром использует устройство <span class=filename>tun</span>, а PPP уровня ядра - устройство <span class=filename>ppp</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>В дальнейшем в этой главе PPP уровня пользователя будет обозначаться просто как ppp, пока не потребуется различать его и любое другое программное обеспечение PPP, такое как pppd. Если не указано иначе, все команды, приведенные в этой главе, должны выполняться под <code>root</code>.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=userppp>23.2. PPP уровня пользователя<a class=anchor href=#userppp></a></h2><div class=sectionbody><div class=sect2><h3 id=_настройка_ppp_уровня_пользователя>23.2.1. Настройка PPP уровня пользователя<a class=anchor href=#_настройка_ppp_уровня_пользователя></a></h3><div class=sect3><h4 id=_предположения>23.2.1.1. Предположения<a class=anchor href=#_предположения></a></h4><div class=paragraph><p>В этом документе предполагается, что у вас есть следующее:</p></div><div class=ulist><ul><li><p>Учетная запись у провайдера интернет (Internet Service Provider, ISP), к которому вы подсоединяетесь, используя PPP.</p></li><li><p>Модем или другое подключенное к системе и правильно настроенное устройство, позволяющее подключиться к провайдеру.</p></li><li><p>Номер модемного пула провайдера.</p></li><li><p>Имя пользователя (логин) и пароль (обычная UNIX® пара логин/пароль, или PAP/CHAP пара логин/пароль).</p></li><li><p>IP адреса одного или нескольких серверов имен. Обычно провайдер дает для этих целей два IP адреса. Если нет ни одного, вы можете использовать команду <code>enable dns</code> в <span class=filename>ppp.conf</span> и ppp настроит список серверов имен. Эта возможность зависит от наличия поддержки согласования DNS в реализации PPP провайдера.</p></li></ul></div><div class=paragraph><p>Следующая информация может поставляться провайдером, но не является совершенно необходимой:</p></div><div class=ulist><ul><li><p>IP адрес шлюза провайдера. Шлюз это компьютер, к которому вы подключитесь и который будет настроен в качестве <em>маршрута по умолчанию</em> (<em>default route</em>). Если у вас нет этой информации, она может быть получена от PPP сервера после подключения.</p><div class=paragraph><p>Программой ppp этот IP адрес обозначается как <code>HISADDR</code>.</p></div></li><li><p>Сетевая маска, которую вы должны использовать. Если провайдер не предоставил ее значение, вы можете использовать <code>255.255.255.255</code>.</p></li><li><p>Если провайдер предоставил статический IP и имя хоста, используйте их. Иначе позвольте удаленной стороне назначить свободный IP адрес.</p></li></ul></div><div class=paragraph><p>Если у вас нет всей необходимой информации, свяжитесь с провайдером.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>В этом разделе строки файлов настройки из многих примеров пронумерованы. Эти номера приведены только для обсуждения настроек, они не должны помещаться в действующую настройку. Правильные отступы с табуляцией и пробелами также важны.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_создание_файлов_устройств_ppp>23.2.1.2. Создание файлов устройств PPP<a class=anchor href=#_создание_файлов_устройств_ppp></a></h4><div class=paragraph><p>В обычной ситуации, большинству пользователей нужно только одно устройство <span class=filename>tun</span> (<span class=filename>/dev/tun0</span>). Ссылки на <span class=filename>tun0</span> ниже могут быть заменены на <span class=filename>tunN</span>, где <em>N</em> это любой номер устройства, соответствующий вашей системе.</p></div><div class=paragraph><p>Для систем FreeBSD без <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a> (FreeBSD 4.X более ранние), необходимо проверить устройство <span class=filename>tun0</span> (это не требуется, если включена <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a>, поскольку файлы устройств будут создаваться автоматически).</p></div><div class=paragraph><p>Простейший способ убедиться, что устройство <span class=filename>tun0</span> настроено правильно, это пересоздать устройство. Для пересоздания устройства выполните следующее:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /dev</span>
<span class=c># sh MAKEDEV tun0</span></code></pre></div></div><div class=paragraph><p>Если вам необходимы 16 туннельных устройств, потребуется их создать. Это можно сделать, выполнив следующие команды:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /dev</span>
<span class=c># sh MAKEDEV tun15</span></code></pre></div></div></div><div class=sect3><h4 id=_автоматическая_настройка_ppp>23.2.1.3. Автоматическая настройка PPP<a class=anchor href=#_автоматическая_настройка_ppp></a></h4><div class=paragraph><p>И <code>ppp</code> и <code>pppd</code> (реализация PPP уровня ядра) используют файлы настройки, расположенные в каталоге <span class=filename>/etc/ppp</span>. Примеры для ppp уровня пользователя можно найти в <span class=filename>/usr/shared/examples/ppp/</span>.</p></div><div class=paragraph><p>Настройка <code>ppp</code> требует редактирования нескольких файлов, в зависимости от ваших потребностей. То, что вы поместите в эти файлы, зависит в некоторой степени от того, предоставит ли провайдер статический IP адрес (т.е. вы получите один определенный IP адрес и будете использовать его постоянно) или динамический (т.е. ваш IP адрес будет изменяться при каждом подключении к провайдеру).</p></div><div class=sect4><h5 id=userppp-staticIP>23.2.1.3.1. PPP и статические IP адреса<a class=anchor href=#userppp-staticIP></a></h5><div class=paragraph><p>Вам потребуется отредактировать файл настройки <span class=filename>/etc/ppp/ppp.conf</span>. Он похож на приведенный ниже пример.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Строки, оканчивающиеся на <code>:</code>, вводятся без отступа в начале строки, остальные строки должны быть введены с отступом, как показано в примере.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>1     default:
2       set log Phase Chat LCP IPCP CCP tun command
3       ident user-ppp VERSION (built COMPILATIONDATE)
4       set device /dev/cuaa0
5       set speed 115200
6       set dial &#34;ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \
7                 \&#34;\&#34; AT OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT&#34;
8       set timeout 180
9       enable dns
10
11    provider:
12      set phone &#34;(123) 456 7890&#34;
13      set authname foo
14      set authkey bar
15      set login &#34;TIMEOUT 10 \&#34;\&#34; \&#34;\&#34; gin:--gin: \\U word: \\P col: ppp&#34;
16      set timeout 300
17      set ifaddr x.x.x.x y.y.y.y 255.255.255.255 0.0.0.0
18      add default HISADDR</pre></div></div><div class=dlist><dl><dt class=hdlist1>Строка 1</dt><dd><p>Начинает настройку по умолчанию (default). Команды этой настройки выполняются автоматически при запуске ppp.</p></dd><dt class=hdlist1>Строка 2</dt><dd><p>Включает параметры протоколирования. Когда настройка работает удовлетворительно, эта строка должна быть сокращена до следующей формы</p><div class="literalblock programlisting"><div class=content><pre>set log phase tun</pre></div></div></dd></dl></div><div class=paragraph><p>для предотвращения появления слишком больших лог файлов.</p></div><div class=dlist><dl><dt class=hdlist1>Строка 3</dt><dd><p>Указывает PPP как идентифицировать себя на удаленной стороне. PPP идентифицирует себя на удаленной стороне если возникают проблемы согласования и установки соединения, предоставляя информацию, по которой администратор на удаленной стороне может воспользоваться для решения таких проблем.</p></dd><dt class=hdlist1>Строка 4</dt><dd><p>Указывает устройство, к которому подключен модем. <span class=filename>COM1</span> это <span class=filename>/dev/cuaa0</span>, а <span class=filename>COM2</span> это <span class=filename>/dev/cuaa1</span>.</p></dd><dt class=hdlist1>Строка 5</dt><dd><p>Устанавливает желаемую скорость подключения к модему. Если 115200 не работает (хотя должна работать для любого относительно нового модема) попробуйте 38400.</p></dd><dt class=hdlist1>Строки 6 и 7</dt><dd><p>Строка дозвона. PPP уровня пользователя применяет expect-send синтаксис, похожий на синтаксис <a href="https://man.freebsd.org/cgi/man.cgi?query=chat&amp;sektion=8&amp;format=html">chat(8)</a>. Обратитесь к странице справочника за информацией о возможностях этого языка.</p><div class=paragraph><p>Обратите внимание, что эта команда продолжается на следующей строке для улучшения читаемости. Любая команда в <span class=filename>ppp.conf</span> может быть продолжена на следующей строке, если последний символ предыдущей строки “\”.</p></div></dd><dt class=hdlist1>Строка 8</dt><dd><p>Устанавливает предельное время ожидания для соединения. Значение 180 секунд используется по умолчанию, так что строка с этим значением чисто косметическая.</p></dd><dt class=hdlist1>Строка 9</dt><dd><p>Указывает PPP запросить у удаленной стороны сервера имен. Если вы работаете с локальным сервером имен, эта строка должна быть закомментирована или удалена.</p></dd><dt class=hdlist1>Строка 10</dt><dd><p>Пустая строка для улучшения читаемости. Пустые строки игнорируются PPP.</p></dd><dt class=hdlist1>Строка 11</dt><dd><p>Определяет настройки для провайдера, называемого "provider". Это имя может быть изменено на имя вашего провайдера, чтобы в дальнейшем вы могли использовать <code>load <em>provider</em></code> для начала соединения.</p></dd><dt class=hdlist1>Строка 12</dt><dd><p>Определяет телефонный номер для этого провайдера. Несколько телефонных номеров могут быть указаны с помощью двоеточия (<code>:</code>) или символа канала (<code>|</code>) в качестве разделителя. Различия между двумя разделителями описаны в <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a>. Главным образом они заключаются в том, что если вы хотите перебирать номера, используйте двоеточие. Если вы хотите дозваниваться по первому номеру в первую очередь, и использовать другие номера только если дозвон по первому завершится неудачно, используйте символ канала. Всегда заключайте список номеров в кавычки, как показано в примере.</p><div class=paragraph><p>Вы должны включить телефонный номер в кавычки (<code>"</code>) если в нем используются пробелы. Отсутствие кавычек может вызвать простую, но трудно обнаруживаемую ошибку.</p></div></dd><dt class=hdlist1>Строки 13 и 14</dt><dd><p>Задают имя пользователя и пароль. При использовании приглашения login в стиле UNIX®, эти значения используются командой <code>set login</code> через переменные \U и \P. При соединении с использованием PAP или CHAP, эти значения используются во время аутентификации.</p></dd><dt class=hdlist1>Строка 15</dt><dd><p>Если вы используете PAP или CHAP, приглашение на вход не появится, и эта строка должна быть закомментирована или удалена. Обратитесь к странице <a href=#userppp-PAPnCHAP>аутентификация PAP и CHAP</a> за дальнейшей информацией.</p><div class=paragraph><p>Строка для входа записана в том же chat-подобном синтаксисе, что и строка для дозвона. В этом примере строка работает для сервиса, сессия входа которого выглядит примерно так:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>J. Random Provider
login: foo
password: bar
protocol: ppp</code></pre></div></div><div class=paragraph><p>Вам потребуется изменить эту строку для использования с другим сервисом. При первом составлении скрипта убедитесь, что вы включили "chat" протоколирование, чтобы убедиться, что соединение происходит как ожидалось.</p></div></dd><dt class=hdlist1>Строка 16</dt><dd><p>Установка максимального времени ожидания по умолчанию для соединения. В данном случае соединение будет разорвано автоматически после 300 секунд неактивности. Если вы не хотите, чтобы соединение разрывалось, установите эту переменную в нуль, или используйте параметр командной строки <code>-ddial</code>.</p></dd><dt class=hdlist1>Строка 17</dt><dd><p>Устанавливает адрес интерфейса. Строка <em>x.x.x.x</em> должна быть заменена на IP адрес, который выделил вам провайдер. Строка <em>y.y.y.y</em> должна быть заменена на IP адрес шлюза провайдера (компьютер, к которому вы подключаетесь). Если провайдер не сообщил адрес шлюза, используйте <code>10.0.0.2/0</code>. Если вам требуется использовать "вычисленные" адреса, убедитесь, что создана запись в <span class=filename>/etc/ppp/ppp.linkup</span> в соответствии с инструкциями для <a href=#userppp-dynamicIP>PPP и динамических IP адресов</a>. Если эта строка опущена, <code>ppp</code> не может быть запущен в режиме <code>-auto</code>.</p></dd><dt class=hdlist1>Строка 18</dt><dd><p>Добавляет маршрут по умолчанию к шлюзу провайдера. Специальное слово <code>HISADDR</code> заменяется адресом шлюза, указанном в строке 17. Важно, чтобы эта строка появилась после строки 17, до нее переменная <code>HISADDR</code> еще не инициализирована.</p><div class=paragraph><p>Если вы не будете запускать ppp с параметром <code>-auto</code>, эта строка должна быть перемещена в файл <span class=filename>ppp.linkup</span>.</p></div></dd></dl></div><div class=paragraph><p>Нет необходимости добавлять запись в <span class=filename>ppp.linkup</span>, если у вас статический IP адрес и ppp работает в режиме <code>-auto</code>, поскольку таблица маршрутизации настроена правильно еще до подключения. Однако, вы возможно захотите создать запись для запуска программ после соединения. Эта ситуация описана далее в примере по sendmail.</p></div><div class=paragraph><p>Примерные файлы настройки находятся в каталоге <span class=filename>/usr/shared/examples/ppp/</span>.</p></div></div><div class=sect4><h5 id=userppp-dynamicIP>23.2.1.3.2. PPP и динамические IP адреса<a class=anchor href=#userppp-dynamicIP></a></h5><div class=paragraph><p>Если провайдер не выделил статический IP адрес, <code>ppp</code> может быть настроен для определения локального и удаленного адреса. Это делается путем "вычисления" IP адреса и настройки его программой <code>ppp</code> с использованием IP Configuration Protocol (IPCP) после установления соединения. Файл настройки <span class=filename>ppp.conf</span> тот же, что и в примере <a href=#userppp-staticIP>PPP и статические IP адреса</a>, со следующим изменением:</p></div><div class="literalblock programlisting"><div class=content><pre>17      set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.255</pre></div></div><div class=paragraph><p>Как и раньше, не включайте номер строки, он используется только для ссылки на строку в этом примере. Требуется отступ хотя бы в один пробел.</p></div><div class=dlist><dl><dt class=hdlist1>Строка 17</dt><dd><p>Номер после символа <code>/</code> это число бит в адресе, которые будут запрошены ppp. Вы можете использовать более подходящие вам IP адреса, но пример выше всегда будет работать.</p></dd></dl></div><div class=paragraph><p>Если вы не используете режим <code>-auto</code>, потребуется создать запись в <span class=filename>/etc/ppp/ppp.linkup</span>. Этот файл используется после установки соединения. На этот момент <code>ppp</code> уже настроит адреса интерфейсов и станет возможным добавление записей в таблицу маршрутизации:</p></div><div class="literalblock programlisting"><div class=content><pre>1     provider:
2      add default HISADDR</pre></div></div><div class=dlist><dl><dt class=hdlist1>Строка 1</dt><dd><p>При установке соединения, <code>ppp</code> ищет запись в <span class=filename>ppp.linkup</span> по следующим правилам: сначала в соответствии с меткой, используемой в <span class=filename>ppp.conf</span>. Если это не сработает, ведется поиск записи для IP адреса шлюза. Это метка в IP записывается в виде IP адреса. Если запись все еще не найдена, используется запись <code>MYADDR</code>.</p></dd><dt class=hdlist1>Строка 2</dt><dd><p>Эта строка сообщает <code>ppp</code> добавить маршрут по умолчанию, указывающий на <code>HISADDR</code>. <code>HISADDR</code> будет заменен на IP адрес шлюза, определенного IPCP.</p></dd></dl></div><div class=paragraph><p>Детальный пример находится в записи <code>pmdemand</code> файлов <span class=filename>/usr/shared/examples/ppp/ppp.conf.sample</span> и <span class=filename>/usr/shared/examples/ppp/ppp.linkup.sample</span>.</p></div></div><div class=sect4><h5 id=_прием_входящих_звонков>23.2.1.3.3. Прием входящих звонков<a class=anchor href=#_прием_входящих_звонков></a></h5><div class=paragraph><p>При настройке ppp для приема входящих звонков на компьютере, подключенном к локальной сети, вам необходимо решить, перенаправлять ли пакеты в локальную сеть. Если вы будете делать это, выделите удаленной стороне IP адрес из диапазона адресов локальной сети, и используйте команду <code>enable proxy</code> в файле <span class=filename>/etc/ppp/ppp.conf</span>. Вам потребуется также убедиться, что в файле <span class=filename>/etc/rc.conf</span> присутствует строка:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;</pre></div></div></div><div class=sect4><h5 id=_какой_getty>23.2.1.3.4. Какой getty?<a class=anchor href=#_какой_getty></a></h5><div class=paragraph><p>Раздел <a href=../serialcomms/#dialup>Настройка FreeBSD для входящих соединений</a> дает хорошее описание включения входящих соединений с использованием <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>.</p></div><div class=paragraph><p>Альтернатива <code>getty</code> это <a href=http://www.leo.org/~doering/mgetty/index.html>mgetty</a>, более интеллектуальная версия <code>getty</code>, разработанная специально для приема входящих звонков..</p></div><div class=paragraph><p>Преимущество использование <code>mgetty</code> в том, что она активно <em>общается</em> с модемами, то есть если порт будет выключен в <span class=filename>/etc/ttys</span>, модем не будет отвечать на звонок.</p></div><div class=paragraph><p>Последние версии <code>mgetty</code> (от 0.99beta и выше) поддерживают также автоматическое определение потоков PPP, позволяя клиентам безскриптовое подключение к серверу.</p></div><div class=paragraph><p>Обратитесь к разделу <a href=#userppp-mgetty>Mgetty и AutoPPP</a> за дальнейшей информацией по <code>mgetty</code>.</p></div></div><div class=sect4><h5 id=_права_ppp>23.2.1.3.5. Права PPP<a class=anchor href=#_права_ppp></a></h5><div class=paragraph><p>Программа <code>ppp</code> обычно запускается с правами пользователя <code>root</code>. Если вы хотите разрешить запуск <code>ppp</code> в режиме сервера с правами обычного пользователя путем запуска <code>ppp</code> как описано ниже, этого пользователя необходимо добавить в группу <code>network</code> в файле <span class=filename>/etc/group</span>.</p></div><div class=paragraph><p>Вам также потребуется дать ему доступ к одному или более разделов конфигурации, используя команду <code>allow</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>allow users fred mary</pre></div></div><div class=paragraph><p>Если эта команда используется в разделе <code>default</code>, она дает пользователю полный доступ.</p></div></div><div class=sect4><h5 id=_оболочки_ppp_для_пользователей_с_динамическими_ip>23.2.1.3.6. Оболочки PPP для пользователей с динамическими IP<a class=anchor href=#_оболочки_ppp_для_пользователей_с_динамическими_ip></a></h5><div class=paragraph><p>Создайте файл, называющийся <span class=filename>/etc/ppp/ppp-shell</span> и содержащий следующее:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
IDENT=`echo $0 | sed -e &#39;s/^.*-\(.*\)$/\1/&#39;`
CALLEDAS=&#34;$IDENT&#34;
TTY=`tty`

if [ x$IDENT = xdialup ]; then
        IDENT=`basename $TTY`
fi

echo &#34;PPP for $CALLEDAS on $TTY&#34;
echo &#34;Starting PPP for $IDENT&#34;

exec /usr/sbin/ppp -direct $IDENT</pre></div></div><div class=paragraph><p>Этот скрипт должен быть исполняемым. Теперь создайте на этот скрипт символическую ссылку с именем <span class=filename>ppp-dialup</span> с помощью следующей команды:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ln -s ppp-shell /etc/ppp/ppp-dialup</span></code></pre></div></div><div class=paragraph><p>Используйте этот скрипт в качестве <em>оболочки</em> для удаленных пользователей. Ниже приведен пример записи в <span class=filename>/etc/password</span> для удаленных пользователей PPP с именем пользователя <code>pchilds</code> (не забывайте использовать <code>vipw</code> для редактирования файла паролей).</p></div><div class="literalblock programlisting"><div class=content><pre>pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</pre></div></div><div class=paragraph><p>Создайте каталог <span class=filename>/home/ppp</span>, который доступен для чтения и содержит следующие файлы нулевой длины:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nt>-r--r--r--</span>   1 root     wheel	   0 May 27 02:23 .hushlogin
<span class=nt>-r--r--r--</span>   1 root     wheel           0 May 27 02:22 .rhosts</code></pre></div></div><div class=paragraph><p>Это предотвратит отображение <span class=filename>/etc/motd</span>.</p></div></div><div class=sect4><h5 id=_оболочки_ppp_для_пользователей_со_статическими_ip>23.2.1.3.7. Оболочки PPP для пользователей со статическими IP<a class=anchor href=#_оболочки_ppp_для_пользователей_со_статическими_ip></a></h5><div class=paragraph><p>Создайте файл <span class=filename>ppp-shell</span> как в примере выше, и для каждой учетной записи со статически назначаемым IP создайте символическую ссылку на <span class=filename>ppp-shell</span>.</p></div><div class=paragraph><p>Например, если у вас три пользователя удаленного доступа, <code>fred</code>, <code>sam</code> и <code>mary</code>, которые подключаются к вашей сети класса C, выполните следующее:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</span>
<span class=c># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</span>
<span class=c># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</span></code></pre></div></div><div class=paragraph><p>Оболочка каждого из этих пользователей удаленного доступа должна быть символической ссылкой, созданной выше (например, оболочка пользователя <code>mary</code> должна быть <span class=filename>/etc/ppp/ppp-mary</span>).</p></div></div><div class=sect4><h5 id=_настройка_ppp_conf_для_пользователей_с_динамическими_ip>23.2.1.3.8. Настройка <span class=filename>ppp.conf</span> для пользователей с динамическими IP<a class=anchor href=#_настройка_ppp_conf_для_пользователей_с_динамическими_ip></a></h5><div class=paragraph><p>Файл <span class=filename>/etc/ppp/ppp.conf</span> должен содержать примерно такие строки:</p></div><div class="literalblock programlisting"><div class=content><pre>default:
  set debug phase lcp chat
  set timeout 0

ttyd0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyd1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Необходимо соблюдать отступы.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Раздел <code>default:</code> загружается для каждого соединения. Для каждой строки, включенной в <span class=filename>/etc/ttys</span>, создайте запись, подобную <code>ttyd0:</code> выше. Каждая строка должна содержать уникальные IP адреса из вашего пула IP адресов, выделенных пользователям с динамическими IP.</p></div></div><div class=sect4><h5 id=_настройка_ppp_conf_для_пользователей_со_статическими_ip>23.2.1.3.9. Настройка <span class=filename>ppp.conf</span> для пользователей со статическими IP<a class=anchor href=#_настройка_ppp_conf_для_пользователей_со_статическими_ip></a></h5><div class=paragraph><p>Помимо содержимого, описанного в примере файла <span class=filename>/usr/shared/examples/ppp/ppp.conf</span> выше, вам потребуется добавить раздел для каждого из пользователей со статическими IP. Мы продолжим использовать имена <code>fred</code>, <code>sam</code> и <code>mary</code> в качестве примера.</p></div><div class="literalblock programlisting"><div class=content><pre>fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</pre></div></div><div class=paragraph><p>Если требуется, файл <span class=filename>/etc/ppp/ppp.linkup</span> должен также содержать информацию о маршрутизации для каждого пользователя со статическим IP. В строке ниже через клиентское соединение добавляется маршрут к сети класса C<code>203.14.101.0</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</pre></div></div></div><div class=sect4><h5 id=userppp-mgetty>23.2.1.3.10. <code>mgetty</code> и AutoPPP<a class=anchor href=#userppp-mgetty></a></h5><div class=paragraph><p>Настройка и компиляция <code>mgetty</code> с параметром <code>AUTO_PPP</code> позволяет <code>mgetty</code> определять LCP фазу PPP соединений и автоматически порождать оболочку ppp. Однако, поскольку стандартный метод логин/пароль не используется, необходима аутентификация пользователей через PAP или CHAP.</p></div><div class=paragraph><p>В этом разделе предполагается, что пользователь успешно настроил, скомпилировал и установил версию <code>mgetty</code> с параметром <code>AUTO_PPP</code> (v0.99beta или более поздняя).</p></div><div class=paragraph><p>Убедитесь, что в файле <span class=filename>/usr/local/etc/mgetty+sendfax/login.config</span> имеется следующая строка:</p></div><div class="literalblock programlisting"><div class=content><pre>/AutoPPP/ -     -		      /etc/ppp/ppp-pap-dialup</pre></div></div><div class=paragraph><p>Это укажет <code>mgetty</code> запускать скрипт <span class=filename>ppp-pap-dialup</span> для обнаруженных соединений PPP.</p></div><div class=paragraph><p>Создайте файл <span class=filename>/etc/ppp/ppp-pap-dialup</span>, содержащий следующее (этот файл должен быть выполняемым):</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
exec /usr/sbin/ppp -direct pap$IDENT</pre></div></div><div class=paragraph><p>Для каждой линии, включенной в <span class=filename>/etc/ttys</span>, создайте соответствующую запись в <span class=filename>/etc/ppp/ppp.conf</span>. Она будет отлично сочетаться с тем, что было создано выше.</p></div><div class="literalblock programlisting"><div class=content><pre>pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</pre></div></div><div class=paragraph><p>Для каждого пользователя, входящего по этому методу, в файле <span class=filename>/etc/ppp/ppp.secret</span> должна присутствовать запись с логином/паролем, или, в качестве альтернативы, для аутентификации пользователей по PAP через <span class=filename>/etc/password</span>, необходимо использовать следующий параметр.</p></div><div class="literalblock programlisting"><div class=content><pre>enable passwdauth</pre></div></div><div class=paragraph><p>Если вы хотите присвоить некоторым пользователям статический IP, задайте его в качестве третьего аргумента в <span class=filename>/etc/ppp/ppp.secret</span>. Обратитесь к к <span class=filename>/usr/shared/examples/ppp/ppp.secret.sample</span> за примерами.</p></div></div><div class=sect4><h5 id=_ms_расширения>23.2.1.3.11. MS расширения<a class=anchor href=#_ms_расширения></a></h5><div class=paragraph><p>Возможна настройка PPP для выдачи адресов DNS и NetBIOS по запросу.</p></div><div class=paragraph><p>Для включения этих расширений с PPP версии 1.x, необходимо добавить к соответствующему разделу <span class=filename>/etc/ppp/ppp.conf</span>следующие строки.</p></div><div class="literalblock programlisting"><div class=content><pre>enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre></div></div><div class=paragraph><p>Для PPP версии 2 и выше:</p></div><div class="literalblock programlisting"><div class=content><pre>accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre></div></div><div class=paragraph><p>Клиентам будут выдаваться адреса первичного и вторичного серверов имен, и адрес хоста NetBIOS.</p></div><div class=paragraph><p>Если в версии 2 и выше строка <code>set dns</code> будет опущена, PPP использует значения из <span class=filename>/etc/resolv.conf</span>.</p></div></div><div class=sect4><h5 id=userppp-PAPnCHAP>23.2.1.3.12. Аутентификация PAP и CHAP<a class=anchor href=#userppp-PAPnCHAP></a></h5><div class=paragraph><p>Некоторые провайдеры настраивают систему так, что аутентификация производится с использованием либо PAP либо CHAP. В этом случае, приглашение <code>login:</code> при соединении не выдается и соединение PPP начинается сразу.</p></div><div class=paragraph><p>PAP менее безопасен, чем CHAP, но безопасность в данном случае не страдает, поскольку хотя пароли и передаются открытым текстом, они передаются только по модемной линии. У кракеров не так много возможностей для кражи паролей.</p></div><div class=paragraph><p>В примерах выше <a href=#userppp-staticIP>PPP и статические IP адреса</a> или <a href=#userppp-dynamicIP>PPP и динамические IP адреса</a> должны быть сделаны следующие изменения:</p></div><div class="literalblock programlisting"><div class=content><pre>13      set authname MyUserName
14      set authkey MyPassword
15      set login</pre></div></div><div class=dlist><dl><dt class=hdlist1>Строка 13</dt><dd><p>Эта строка указывает имя пользователя PAP/CHAP. Вам потребуется заменить <em>MyUserName</em> на правильное значение.</p></dd><dt class=hdlist1>Строка 14</dt><dd><p>Эта строка указывает пароль PAP/CHAP. Вам потребуется заменить <em>MyPassword</em> на правильное значение. Вы можете также добавить дополнительную строку, такую как:</p><div class="literalblock programlisting"><div class=content><pre>16      accept PAP</pre></div></div><div class=paragraph><p>или</p></div><div class="literalblock programlisting"><div class=content><pre>16      accept CHAP</pre></div></div><div class=paragraph><p>для явного указания протокола, но и PAP и CHAP поддерживаются по умолчанию.</p></div></dd><dt class=hdlist1>Строка 15</dt><dd><p>Ваш провайдер обычно не потребует входа на сервер при использовании PAP или CHAP. Следовательно, вы должны отключить строку "set login".</p></dd></dl></div></div><div class=sect4><h5 id=_изменение_настроек_ppp_на_лету>23.2.1.3.13. Изменение настроек <code>ppp</code> "на лету"<a class=anchor href=#_изменение_настроек_ppp_на_лету></a></h5><div class=paragraph><p>Возможно изменение настроек <code>ppp</code> программы во время ее работы в фоновом режиме, но только если открыт соответствующий диагностический порт. Для его открытия добавьте в настройку следующую строку:</p></div><div class="literalblock programlisting"><div class=content><pre>set server /var/run/ppp-tun%d DiagnosticPassword 0177</pre></div></div><div class=paragraph><p>С этой директивой ppp будет прослушивать заданный UNIX® сокет, запрашивая у клиентов пароль перед выдачей доступа. Символы<code>%d</code> заменяются на номер используемого устройства <span class=filename>tun</span>.</p></div><div class=paragraph><p>Как только сокет открыт, в скриптах, выполняющих настройку работающей программы, можно использовать <a href="https://man.freebsd.org/cgi/man.cgi?query=pppctl&amp;sektion=8&amp;format=html">pppctl(8)</a>.</p></div></div></div><div class=sect3><h4 id=userppp-nat>23.2.1.4. Использование NAT<a class=anchor href=#userppp-nat></a></h4><div class=paragraph><p>PPP имеет возможность использовать встроенный NAT без преобразования пакетов в ядре. Эта возможность может быть включена следующей строкой в <span class=filename>/etc/ppp/ppp.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>nat enable yes</pre></div></div><div class=paragraph><p>Альтернативно, PPP NAT может быть включен параметром командной строки <code>-nat</code>. Существует также переменная <span class=filename>/etc/rc.conf</span><code>ppp_nat</code>, которая включена по умолчанию.</p></div><div class=paragraph><p>Если вы используете эту возможность, вы также можете найти полезными параметры <span class=filename>/etc/ppp/ppp.conf</span> для включения пересылки входящих соединений:</p></div><div class="literalblock programlisting"><div class=content><pre>nat port tcp 10.0.0.2:ftp ftp
nat port tcp 10.0.0.2:http http</pre></div></div><div class=paragraph><p>или отключить все входящие соединения</p></div><div class="literalblock programlisting"><div class=content><pre>nat deny_incoming yes</pre></div></div></div><div class=sect3><h4 id=userppp-final>23.2.1.5. Завершающая настройка системы<a class=anchor href=#userppp-final></a></h4><div class=paragraph><p>Теперь, когда программа <code>ppp</code> настроена, осталось выполнить еще несколько действий прежде, чем все это заработает. Они выполняются путем редактирования файла <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>Просматривая этот файл, убедитесь, что добавлена строка <code>hostname=</code>, например:</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;foo.example.com&#34;</pre></div></div><div class=paragraph><p>Если провайдер предоставил вам статический IP адрес и имя, возможно лучше всего использовать это имя в качестве имени хоста.</p></div><div class=paragraph><p>Проверьте переменную <code>network_interfaces</code>. Если вы хотите настроить систему для дозвона по требованию, убедитесь, что устройство <span class=filename>tun0</span> добавлено в список, иначе удалите его.</p></div><div class="literalblock programlisting"><div class=content><pre>network_interfaces=&#34;lo0 tun0&#34;
ifconfig_tun0=</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Переменная <code>ifconfig_tun0</code> должна быть пуста, необходимо также создать файл <span class=filename>/etc/start_if.tun0</span>. В этом файле должна находиться строка:</p></div><div class="literalblock programlisting"><div class=content><pre>ppp -auto mysystem</pre></div></div><div class=paragraph><p>Этот скрипт выполняется во время настройки сети, запуская даемона ppp в автоматическом режиме. Если эта машина является шлюзом для локальной сети, вы можете также использовать переключатель <code>-alias</code>. Обратитесь к странице справочника за дальнейшей информацией.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Убедитесь, что программа маршрутизации отключена переменной в файле <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>router_enable=&#34;NO&#34;</pre></div></div><div class=paragraph><p>Важно, чтобы даемон <code>routed</code> не был запущен, поскольку он может удалить запись маршрута по умолчанию, создаваемую <code>ppp</code>.</p></div><div class=paragraph><p>Возможно, стоит обратить внимание на переменную <code>sendmail_flags</code> и убедиться, что она не включает параметр <code>-q</code>, иначе <code>sendmail</code> попытается сразу же обратиться к сети, и компьютер может начать дозвон. Вы можете попробовать:</p></div><div class="literalblock programlisting"><div class=content><pre>sendmail_flags=&#34;-bd&#34;</pre></div></div><div class=paragraph><p>Обратная сторона этого решения в том, что необходим запуск очереди <code>sendmail</code> после поднятия соединения ppp:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/sbin/sendmail -q</span></code></pre></div></div><div class=paragraph><p>Вы можете использовать команду <code>!bg</code> в файле <span class=filename>ppp.linkup</span> для автоматического выполнения этой задачи:</p></div><div class="literalblock programlisting"><div class=content><pre>1     provider:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</pre></div></div><div class=paragraph><p>Если вам это не нужно, возможна настройка "dfilter" для блокирования SMTP трафика. Обратитесь файлам примеров за дальнейшей информацией.</p></div><div class=paragraph><p>Все, что осталось, это перегрузить компьютер. После перезагрузки вы можете либо выполнить:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ppp</span></code></pre></div></div><div class=paragraph><p>и затем набрать <code>dial provider</code> для запуска сессии PPP, либо, если вы хотите, чтобы программа <code>ppp</code> начинала соединение автоматически при появлении исходящего трафика (и файл <span class=filename>start_if.tun0</span> не создан), выполните:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ppp -auto provider</span></code></pre></div></div></div><div class=sect3><h4 id=_итоги>23.2.1.6. Итоги<a class=anchor href=#_итоги></a></h4><div class=paragraph><p>Для первоначальной настройки ppp необходимо пройти следующие шаги:</p></div><div class=paragraph><p>Сторона клиента:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Убедитесь, что устройство <span class=filename>tun</span> встроено в ядро.</p></li><li><p>Убедитесь, что устройства <span class=filename>tunN</span> находятся в каталоге <span class=filename>/dev</span>.</p></li><li><p>Создайте запись в <span class=filename>/etc/ppp/ppp.conf</span>. Пример <span class=filename>pmdemand</span> должен подойти для большинства провайдеров.</p></li><li><p>Если у вас динамический IP адрес, создайте запись в <span class=filename>/etc/ppp/ppp.linkup</span>.</p></li><li><p>Обновите файл <span class=filename>/etc/rc.conf</span>.</p></li><li><p>Создайте скрипт <span class=filename>start_if.tun0</span>, если необходим дозвон по требованию.</p></li></ol></div></div></div><div class=paragraph><p>Сторона сервера:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Убедитесь, что устройство <span class=filename>tun</span> встроено в ядро.</p></li><li><p>Убедитесь, что устройства <span class=filename>tunN</span> находятся в каталоге <span class=filename>/dev</span>.</p></li><li><p>Создайте запись в <span class=filename>/etc/passwd</span> (используя программу <a href="https://man.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;format=html">vipw(8)</a>).</p></li><li><p>Создайте профиль в домашнем каталоге пользователя, запускающий <code>ppp -direct direct-server</code> или подобную команду.</p></li><li><p>Создайте запись в <span class=filename>/etc/ppp/ppp.conf</span>. Пример <span class=filename>direct-server</span> должен подойти.</p></li><li><p>Создайте запись в <span class=filename>/etc/ppp/ppp.linkup</span>.</p></li><li><p>Обновите файл <span class=filename>/etc/rc.conf</span>.</p></li></ol></div></div></div></div></div></div></div><div class=sect1><h2 id=ppp>23.3. PPP уровня ядра<a class=anchor href=#ppp></a></h2><div class=sectionbody><div class=sect2><h3 id=_настройка_ppp_уровня_ядра>23.3.1. Настройка PPP уровня ядра<a class=anchor href=#_настройка_ppp_уровня_ядра></a></h3><div class=paragraph><p>Перед началом настройки PPP на вашем компьютере, убедитесь, что <code>pppd</code> находится в <span class=filename>/usr/sbin</span> и каталог <span class=filename>/etc/ppp</span> существует.</p></div><div class=paragraph><p><code>pppd</code> может работать в двух режимах:</p></div><div class="olist arabic"><ol class=arabic><li><p>В качестве "клиента" - когда вы хотите подключить компьютер к внешнему миру через последовательное соединение PPP или модемную линию.</p></li><li><p>В качестве "сервера" - когда компьютер подключен к сети и используется для подключения других компьютеров через PPP.</p></li></ol></div><div class=paragraph><p>В обеих случаях вам потребуется настроить файл параметров (<span class=filename>/etc/ppp/options</span> или <span class=filename>~/.ppprc</span> если на вашем компьютере более одного пользователя работают с PPP).</p></div><div class=paragraph><p>Вам потребуется также программа для модемных/последовательных линий (предпочтительно <a class=package href=https://cgit.freebsd.org/ports/tree/comms/kermit/>comms/kermit</a>) для дозвона и установки соединения с удаленным хостом.</p></div></div><div class=sect2><h3 id=_использование_pppd_в_качестве_клиента>23.3.2. Использование <code>pppd</code> в качестве клиента<a class=anchor href=#_использование_pppd_в_качестве_клиента></a></h3><div class=paragraph><p>Для подключения к линии PPP терминального сервера Cisco может использоваться следующий файл <span class=filename>/etc/ppp/options</span>.</p></div><div class="literalblock programlisting"><div class=content><pre>crtscts	 # enable hardware flow control
modem           # modem control line
noipdefault     # remote PPP server must supply your IP address
                # if the remote host does not send your IP during IPCP
                # negotiation, remove this option
passive         # wait for LCP packets
domain ppp.foo.com      # put your domain name here

:&lt;remote_ip&gt;    # put the IP of remote PPP host here
                # it will be used to route packets via PPP link
                # if you didn&#39;t specified the noipdefault option
                # change this line to &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute    # put this if you want that PPP server will be your
                # default router</pre></div></div><div class=paragraph><p>Для подключения:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Дозвонитесь на удаленный хост, используя kermit (или любую другую модемную программу), и введите ваше имя пользователя и пароль (или те данные, которые требуются для установления PPP соединения с удаленным хостом).</p></li><li><p>Выйдите из kermit (без обрыва соединения).</p></li><li><p>Введите следующее:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/src/usr.sbin/pppd.new/pppd /dev/tty01 19200</span></code></pre></div></div><div class=paragraph><p>Убедитесь, что выбраны подходящая скорость и правильное имя устройства.</p></div></li></ol></div></div></div><div class=paragraph><p>Теперь ваш компьютер подключен по PPP. Если соединение не состоялось, вы можете добавить параметр <code>debug</code> к файлу <span class=filename>/etc/ppp/options</span>, и отследить проблему по сообщениям на консоли.</p></div><div class=paragraph><p>Следующий скрипт <span class=filename>/etc/ppp/pppup</span> проведет все 3 стадии в автоматическом режиме:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</pre></div></div><div class=paragraph><p><span class=filename>/etc/ppp/kermit.dial</span> это скрипт kermit, который дозванивается до удаленного хоста и проходит необходимую авторизацию (пример такого скрипта находится в конце этого раздела).</p></div><div class=paragraph><p>Используйте следующий скрипт <span class=filename>/etc/ppp/pppdown</span> для отключения от PPP линии:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ X${pid} != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill -TERM ${pid}
fi

ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</pre></div></div><div class=paragraph><p>Проверьте, запущен ли еще <code>pppd</code>, выполнив <span class=filename>/usr/etc/ppp/ppptest</span>, который выглядит примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
pid=`ps ax| grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ X${pid} != &#34;X&#34; ] ; then
        echo &#39;pppd running: PID=&#39; ${pid-NONE}
else
        echo &#39;No pppd running.&#39;
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</pre></div></div><div class=paragraph><p>Для обрыва соединения, выполните <span class=filename>/etc/ppp/kermit.hup</span>, который должен содержать:</p></div><div class="literalblock programlisting"><div class=content><pre>set line /dev/tty01	; put your modem device here
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</pre></div></div><div class=paragraph><p>Существует альтернативный метод, использующий <code>chat</code> вместо <code>kermit</code>:</p></div><div class=paragraph><p>Для установления соединения <code>pppd</code> достаточно двух файлов.</p></div><div class=paragraph><p><span class=filename>/etc/ppp/options</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/cuaa1 115200

crtscts		# enable hardware flow control
modem		# modem control line
connect &#34;/usr/bin/chat -f /etc/ppp/login.chat.script&#34;
noipdefault	# remote PPP serve must supply your IP address
	        # if the remote host doesn&#39;t send your IP during
                # IPCP negotiation, remove this option
passive         # wait for LCP packets
domain &lt;your.domain&gt;	# put your domain name here

:		# put the IP of remote PPP host here
	        # it will be used to route packets via PPP link
                # if you didn&#39;t specified the noipdefault option
                # change this line to &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute	# put this if you want that PPP server will be
	        # your default router</pre></div></div><div class=paragraph><p><span class=filename>/etc/ppp/login.chat.script</span>:</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Все это может быть расположено на одной строке.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>ABORT BUSY ABORT &#39;NO CARRIER&#39; &#34;&#34; AT OK ATDT&lt;phone.number&gt;
  CONNECT &#34;&#34; TIMEOUT 10 ogin:-\\r-ogin: &lt;login-id&gt;
  TIMEOUT 5 sword: &lt;password&gt;</pre></div></div><div class=paragraph><p>Как только эти файлы будут созданы и отредактированы, необходимо только запустить <code>pppd</code>, вот так:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pppd</span></code></pre></div></div></div><div class=sect2><h3 id=_использование_pppd_в_качестве_сервера>23.3.3. Использование <code>pppd</code> в качестве сервера<a class=anchor href=#_использование_pppd_в_качестве_сервера></a></h3><div class=paragraph><p><span class=filename>/etc/ppp/options</span> должен содержать примерно следующее:</p></div><div class="literalblock programlisting"><div class=content><pre>crtscts                         # Hardware flow control
netmask 255.255.255.0           # netmask (not required)
192.114.208.20:192.114.208.165  # IP&#39;s of local and remote hosts
                                # local ip must be different from one
                                # you assigned to the Ethernet (or other)
                                # interface on your machine.
                                # remote IP is IP address that will be
                                # assigned to the remote machine
domain ppp.foo.com              # your domain
passive                         # wait for LCP
modem                           # modem line</pre></div></div><div class=paragraph><p>Следующий скрипт <span class=filename>/etc/ppp/pppserv</span> укажет pppd работать в качестве сервера:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</pre></div></div><div class=paragraph><p>Используйте этот скрипт <span class=filename>/etc/ppp/pppservdown</span> для остановки сервера:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</pre></div></div><div class=paragraph><p>Следующий kermit скрипт (<span class=filename>/etc/ppp/kermit.ans</span>) включит/отключит режим ответа модема на входящие звонки. Он должен выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; change this to out ATS0=0\13 if you want to disable
                ; autoanswer mode
inp 5 OK
echo \13
exit</pre></div></div><div class=paragraph><p>Скрипт, называющийся <span class=filename>/etc/ppp/kermit.dial</span>, используется для дозвона и аутентификации на удаленном хосте. Вам потребуется приспособить его под собственные нужды. Поместите ваш логин и пароль в этот скрипт; вам также потребуется изменить операторы input в зависимости от ответов от модема и удаленного хоста.</p></div><div class="literalblock programlisting"><div class=content><pre>;
; put the com line attached to the modem here:
;
set line /dev/tty01
;
; put the modem speed here:
;
set speed 19200
set file type binary            ; full 8 bit file xfer
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; Then SET CARRIER if necessary,
set dial display on             ; Then SET DIAL if necessary,
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; login prompt counter
goto slhup

:slcmd                          ; put the modem in command mode
echo Put the modem in command mode.
clear                           ; Clear unread characters from input buffer
pause 1
output +++                      ; hayes escape sequence
input 1 OK\13\10                ; wait for OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; if modem doesn&#39;t answer OK, try again

:slhup                          ; hang up the phone
clear                           ; Clear unread characters from input buffer
pause 1
echo Hanging up the phone.
output ath0\13                  ; hayes command for on hook
input 2 OK\13\10
if fail goto slcmd              ; if no OK answer, put modem in command mode

:sldial                         ; dial the number
pause 1
echo Dialing.
output atdt9,550311\13\10               ; put phone number here
assign \%x 0                    ; zero the time counter

:look
clear                           ; Clear unread characters from input buffer
increment \%x                   ; Count the seconds
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; login
assign \%x 0                    ; zero the time counter
pause 1
echo Looking for login prompt.

:slloop
increment \%x                   ; Count the seconds
clear                           ; Clear unread characters from input buffer
output \13
;
; put your expected login prompt here:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; try 10 times to get a login prompt
else goto slhup                 ; hang up and start again if 10 failures

:sluid
;
; put your userid here:
;
output ppp-login\13
input 1 {Password: }
;
; put your password here:
;
output ppp-password\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7No dialtone.  Check the telephone line!\7
exit 1

; local variables:
; mode: csh
; comment-start: &#34;; &#34;
; comment-start-skip: &#34;; &#34;
; end:</pre></div></div></div></div></div><div class=sect1><h2 id=ppp-troubleshoot>23.4. Решение проблем с соединениями PPP<a class=anchor href=#ppp-troubleshoot></a></h2><div class=sectionbody><div class=paragraph><p>Этот раздел охватывает несколько вопросов, которые могут возникнуть при использовании PPP через модемные соединения. Например, предположим, что вам потребовалось узнать, какое именно приглашение отображает система, до которой вы дозваниваетесь. Некоторые провайдеры выдают приглашение <code>ssword</code>, другие <code>password</code>; если <code>ppp</code> скрипт не обрабатывает такие приглашения, попытка входа завершится неудачно. Наиболее общий способ отладки соединений <code>ppp</code> это подключение вручную. Ниже дана пошаговая информация по подключению вручную.</p></div><div class=sect2><h3 id=_проверьте_файлы_устройств>23.4.1. Проверьте файлы устройств<a class=anchor href=#_проверьте_файлы_устройств></a></h3><div class=paragraph><p>Если вы пересобирали ядро, проверьте устройство <span class=filename>sio</span>. Если вы не перенастраивали ядро, нет причин для беспокойства. Просто проверьте вывод <code>dmesg</code> для модемного устройства следующей командой:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dmesg | grep sio</span></code></pre></div></div><div class=paragraph><p>Вы должны получить информацию о устройствах <span class=filename>sio</span>. Это COM порты, которые нам необходимы. Если ваш модем работает как стандартный последовательный порт, вы увидите его на <span class=filename>sio1</span>, или <span class=filename>COM2</span>. Если это так, вам не требуется пересобирать ядро, необходимо лишь создать последовательное устройство. Вы можете сделать это, зайдя в <span class=filename>/dev</span> и запустив скрипт <span class=filename>MAKEDEV</span>. Создайте последовательные устройства:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh MAKEDEV cuaa0 cuaa1 cuaa2 cuaa3</span></code></pre></div></div><div class=paragraph><p>Если модем находится на <span class=filename>sio1</span>, или <span class=filename>COM2</span> в DOS, модемным устройством будет <span class=filename>/dev/cuaa1</span>.</p></div></div><div class=sect2><h3 id=_подключение_вручную>23.4.2. Подключение вручную<a class=anchor href=#_подключение_вручную></a></h3><div class=paragraph><p>Подключение к интернет с контролированием <code>ppp</code> вручную это быстрый, легкий и действенный способ отладки соединения или получения информации о обслуживании провайдером клиентского соединения <code>ppp</code>. Запустите PPP из командной строки. В примерах в качестве имени хоста мы будем использовать <em>example</em>. Запустите <code>ppp</code>, введя команду <code>ppp</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ppp</span></code></pre></div></div><div class=paragraph><p>Теперь программа <code>ppp</code> запущена.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppp ON example&gt; <span class=nb>set </span>device /dev/cuaa1</code></pre></div></div><div class=paragraph><p>Мы указали модемное устройство, в данном случае <span class=filename>cuaa1</span>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppp ON example&gt; <span class=nb>set </span>speed 115200</code></pre></div></div><div class=paragraph><p>Мы установили скорость подключения к модему, в данном случае 115,200 кбит/с.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppp ON example&gt; <span class=nb>enable </span>dns</code></pre></div></div><div class=paragraph><p>Сообщает <code>ppp</code> настроить разрешение имен, добавив строки в <span class=filename>/etc/resolv.conf</span>. Если <code>ppp</code> не может определить имя хоста, его можно настроить позже вручную.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppp ON example&gt; term</code></pre></div></div><div class=paragraph><p>Переключение в "терминальный" режим для контроля модема вручную.</p></div><div class="literalblock programlisting"><div class=content><pre>deflink: Entering terminal mode on /dev/cuaa1
type &#39;~h&#39; for help</pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>at
OK
atdt123456789</code></pre></div></div><div class=paragraph><p>Использование команды <code>at</code> для инициализации модема, а затем <code>atdt</code> и номера провайдера для начала дозвона.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>CONNECT</code></pre></div></div><div class=paragraph><p>Подтверждение соединения, если есть проблемы с соединением, не вызванные проблемами в оборудовании, здесь мы попытаемся решить их.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ISP Login:myusername</code></pre></div></div><div class=paragraph><p>Здесь вам предлагается ввести имя пользователя в приглашение, выводимое сервером провайдера.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ISP Pass:mypassword</code></pre></div></div><div class=paragraph><p>Здесь предлагается ввести пароль, предоставленный провайдером. Как и при входе в FreeBSD, пароль не отображается.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Shell or PPP:ppp</code></pre></div></div><div class=paragraph><p>В зависимости от вашего провайдера, это приглашение может не появиться. Здесь задается вопрос, хотите ли вы использовать оболочку на компьютере провайдера или запустить <code>ppp</code>. В этом примере мы выбрали <code>ppp</code>, поскольку хотим соединиться с интернет.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Ppp ON example&gt;</code></pre></div></div><div class=paragraph><p>Обратите внимание, что в этом примере первая буква <code>p</code> появилась в верхнем регистре. Это означает, что мы успешно подключились к провайдеру.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>PPp ON example&gt;</code></pre></div></div><div class=paragraph><p>Мы успешно аутентифицировались у провайдера и ожидаем присвоения IP адреса.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>PPP ON example&gt;</code></pre></div></div><div class=paragraph><p>Мы завершили согласование IP адресов, соединение успешно установлено.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>PPP ON example&gt;add default HISADDR</code></pre></div></div><div class=paragraph><p>Это маршрут по умолчанию, его необходимо настроить, чтобы сделать возможной связь с внешним миром, поскольку на этот момент установлена связь только с удаленной стороной. Если маршрут не устанавливается из-за уже существующего маршрута, добавьте символ <code>!</code> перед <code>add</code>. Альтернативно вы можете сделать настройку перед установкой соединения.</p></div><div class=paragraph><p>Если все прошло удачно, на данный момент должно работать соединение с интернет, которое можно поместить в фоновый режим клавишами <span class=keyseq><kbd>CTRL</kbd>+<kbd>z</kbd></span>. Переход строки <code>PPP</code> в приглашении в нижний регистр (<code>ppp</code>) означает, что соединение было разорвано. Таким образом, символы P в верхнем регистре означают наличие соединения, а в нижнем - потерю соединения.</p></div><div class=sect3><h4 id=_отладка>23.4.2.1. Отладка<a class=anchor href=#_отладка></a></h4><div class=paragraph><p>Если у вас выделенная линия и нет необходимости устанавливать соединение, выключите контроль передачи данных CTS/RTS командой <code>set ctsrts off</code>. Это обычно необходимо при подключении к поддерживающим PPP терминальным серверам, когда PPP прерывается при попытке записать данные в ваше соединение, и ожидает сигнала CTS, или Clear To Send, который не появляется. Если вы используете этот параметр, используйте также параметр <code>set accmap</code>, который может быть необходим для устранения зависимости от оборудования путем пропускания определенных символов через соединение, обычно XON/XOFF. Обратитесь к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> за более подробной информацией по этому параметру и его использованию.</p></div><div class=paragraph><p>Если у вас старый модем, может потребоваться использование <code>set parity even</code>. Проверка четности по умолчанию отключена, но она используется для для устранения ошибок (с серьезным увеличением объема трафика) на старых модемах и у некоторых провайдеров.</p></div><div class=paragraph><p>PPP может не вернуться в командный режим, что обычно вызвано ошибкой согласования, когда провайдер ждет от вас начала процесса согласования. В этот момент использование команды <code>~p</code> заставит ppp начать отправку настроечной информации.</p></div><div class=paragraph><p>Если вы не получаете приглашения на вход, скорее всего вам требуется использование аутентификации PAP или CHAP вместо UNIX® стиля как в примерах выше. Для использования PAP или CHAP просто добавьте следующие параметры PPP перед переходом в терминальный режим:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppp ON example&gt; <span class=nb>set </span>authname myusername</code></pre></div></div><div class=paragraph><p>Необходимо заменить <em>myusername</em> на имя пользователя, выданное провайдером.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppp ON example&gt; <span class=nb>set </span>authkey mypassword</code></pre></div></div><div class=paragraph><p>Где <em>mypassword</em> должен быть заменен на пароль, выданный провайдером.</p></div><div class=paragraph><p>Если вы подключаетесь, не можете определить ни одно доменное имя, попробуйте использовать <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> с каким-либо IP адресом и просмотрите выводимую информацию. Если 100 процентов (100%) пакетов теряются, скорее всего не назначен маршрут по умолчанию. Дважды проверьте, что параметр <code>add default HISADDR</code> установлен во время соединения. Если вы можете подключиться к удаленному IP адресу, возможно, что адрес сервера имен не был добавлен в <span class=filename>/etc/resolv.conf</span>. Этот файл должен выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>domain example.com
nameserver x.x.x.x
nameserver y.y.y.y</pre></div></div><div class=paragraph><p>Где <em>x.x.x.x</em> и <em>y.y.y.y</em> должны быть заменены на IP адреса DNS серверов провайдера. Эта информация может предоставляться провайдером, вы можете выяснить это в службе поддержки.</p></div><div class=paragraph><p>Вы можете также настроить <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> для протоколирования PPP соединения. Просто добавьте:</p></div><div class="literalblock programlisting"><div class=content><pre>!ppp
*.*     /var/log/ppp.log</pre></div></div><div class=paragraph><p>в файл <span class=filename>/etc/syslog.conf</span>. В большинстве случаев эти строки уже присутствуют.</p></div></div></div></div></div><div class=sect1><h2 id=pppoe>23.5. Использование PPP через Ethernet (PPPoE)<a class=anchor href=#pppoe></a></h2><div class=sectionbody><div class=paragraph><p>Этот раздел описывает настройку PPP через Ethernet (PPP over Ethernet, PPPoE).</p></div><div class=sect2><h3 id=_настройка_ядра>23.5.1. Настройка ядра<a class=anchor href=#_настройка_ядра></a></h3><div class=paragraph><p>Для PPPoE более не требуется настройка ядра. Если необходимая поддержка netgraph не встроена в ядро, она будет динамически загружена ppp.</p></div></div><div class=sect2><h3 id=_настройка_ppp_conf>23.5.2. Настройка <span class=filename>ppp.conf</span><a class=anchor href=#_настройка_ppp_conf></a></h3><div class=paragraph><p>Вот пример работающего <span class=filename>ppp.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>default:
  set log Phase tun command # you can add more detailed logging if you wish
  set ifaddr 10.0.0.1/0 10.0.0.2/0

name_of_service_provider:
  set device PPPoE:xl1 # replace xl1 with your Ethernet device
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD
  set dial
  set login
  add default HISADDR</pre></div></div></div><div class=sect2><h3 id=_запуск_ppp>23.5.3. Запуск ppp<a class=anchor href=#_запуск_ppp></a></h3><div class=paragraph><p>Под пользователем <code>root</code> вы можете запустить:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ppp -ddial name_of_service_provider</span></code></pre></div></div></div><div class=sect2><h3 id=_запуск_ppp_при_загрузке>23.5.4. Запуск ppp при загрузке<a class=anchor href=#_запуск_ppp_при_загрузке></a></h3><div class=paragraph><p>Добавьте к <span class=filename>/etc/rc.conf</span> следующее:</p></div><div class="literalblock programlisting"><div class=content><pre>ppp_enable=&#34;YES&#34;
ppp_mode=&#34;ddial&#34;
ppp_nat=&#34;YES&#34;	# if you want to enable nat for your local network, otherwise NO
ppp_profile=&#34;name_of_service_provider&#34;</pre></div></div></div><div class=sect2><h3 id=_использование_тега_сервиса_pppoe>23.5.5. Использование тега сервиса PPPoE<a class=anchor href=#_использование_тега_сервиса_pppoe></a></h3><div class=paragraph><p>Иногда для установки соединения необходимо использовать тег сервиса. Теги сервисов используются для различения PPPoE серверов, подключенных к одной сети.</p></div><div class=paragraph><p>В документации, предоставляемой провайдером, должна находиться необходимая информация о теге сервиса. Если вы не можете ее обнаружить, обратитесь в службу поддержки.</p></div><div class=paragraph><p>В крайнем случае, вы можете попробовать метод, предложенный в программе <a href=http://www.roaringpenguin.com/pppoe/>Roaring Penguin PPPoE</a>, которая находится в <a href=../ports/#ports>коллекции портов</a>. Учтите, что этот метод может сделать ваш модем неработоспособным, так что дважды подумайте перед тем, как воспользоваться им. Просто установите программу, поставляемую с модемом вашим провайдером. Затем, войдите в меню <b class=menuref>System</b> программы. Имя вашего профиля должно находиться здесь. Обычно это <em>ISP</em>.</p></div><div class=paragraph><p>Имя профиля (тег сервиса) будет использоваться в записи настройки PPPoE в файле <span class=filename>ppp.conf</span> (часть команды <code>set device</code>, относящаяся к провайдеру). Обратитесь к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> за более подробной информацией. Эта команда должна выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>set device PPPoE:xl1:ISP</pre></div></div><div class=paragraph><p>Не забудьте изменить <em>xl1</em> на имя устройства вашей Ethernet карты.</p></div><div class=paragraph><p>Не забудьте изменить <em>ISP</em> на профиль, определенный вами ранее.</p></div><div class=paragraph><p>Дополнительная информация:</p></div><div class=ulist><ul><li><p><a href=http://renaud.waldura.com/doc/freebsd/pppoe/>Cheaper Broadband with FreeBSD on DSL</a>, опубликовал Renaud Waldura.</p></li><li><p><a href=http://www.ruhr.de/home/nathan/FreeBSD/tdsl-freebsd.html>Nutzung von T-DSL und T-Online mit FreeBSD</a> by Udo Erdelhoff (на немецком).</p></li></ul></div></div><div class=sect2><h3 id=ppp-3com>23.5.6. PPPoE c 3Com® HomeConnect™ ADSL Modem Dual Link<a class=anchor href=#ppp-3com></a></h3><div class=paragraph><p>Этот модем не поддерживает <a href=http://www.faqs.org/rfcs/rfc2516.html>RFC 2516</a> (<em>Метод соединения PPP через Ethernet (PPPoE)</em>, написанный L. Mamakos, K. Lidl, J. Evarts, D. Carrel, D. Simone, и R. Wheeler). Вместо этого, для фреймов Ethernet используются различные коды типов пакетов. Сообщите <a href=http://www.3com.com/>3Com</a> если считаете, что они должны соблюдать спецификации PPPoE.</p></div><div class=paragraph><p>Для включения поддержки этого нестандартного устройства, в FreeBSD необходимо установить переменную sysctl. Это может быть сделано автоматически, поместите в <span class=filename>/etc/sysctl.conf</span> следующую переменную:</p></div><div class="literalblock programlisting"><div class=content><pre>net.graph.nonstandard_pppoe=1</pre></div></div><div class=paragraph><p>или, для непосредственного включения, выполните команду <code>sysctl net.graph.nonstandard_pppoe=1</code>.</p></div><div class=paragraph><p>К сожалению, поскольку эта настройка влияет на всю систему, невозможно одновременно взаимодействовать с нормальным PPPoE клиентом или сервером и 3Com® HomeConnect™ ADSL Modem.</p></div></div></div></div><div class=sect1><h2 id=pppoa>23.6. Использование PPP через ATM (PPPoA)<a class=anchor href=#pppoa></a></h2><div class=sectionbody><div class=paragraph><p>Далее описано как настроить PPP через ATM (PPP over ATM, PPPoA). PPPoA популярен у европейских провайдеров DSL.</p></div><div class=sect2><h3 id=_использование_pppoa_с_alcatel_speedtouch_usb>23.6.1. Использование PPPoA с Alcatel SpeedTouch™ USB<a class=anchor href=#_использование_pppoa_с_alcatel_speedtouch_usb></a></h3><div class=paragraph><p>Поддержка PPPoA для этого устройства в FreeBSD поставляется в виде порта, поскольку встроенное программное обеспечение поставляется под <a href=http://www.speedtouchdsl.com/disclaimer_lx.htm>лицензионным соглашением Alcatel</a> и не может свободно распространяться с основной системой FreeBSD.</p></div><div class=paragraph><p>Для установки этой программы, просто используйте <a href=../ports/#ports>коллекцию портов</a>. Установите порт <a class=package href=https://cgit.freebsd.org/ports/tree/net/pppoa/>net/pppoa</a> и следуйте инструкциям.</p></div><div class=paragraph><p>Как и многие устройства USB, Alcatel SpeedTouch™ USB должен загрузить встроенное программное обеспечение с компьютера. Возможна автоматизация этого процесса в FreeBSD, чтобы эта передача происходила при подключении устройства к порту USB. Для включения этой автоматической передачи необходимо добавить в <span class=filename>/etc/usbd.conf</span> нижеприведенную информацию. Этот файл необходимо отредактировать под пользователем <code>root</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>device &#34;Alcatel SpeedTouch USB&#34;
    devname &#34;ugen[0-9]+&#34;
    vendor 0x06b9
    product 0x4061
    attach &#34;/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o&#34;</pre></div></div><div class=paragraph><p>Для включения даемона USB, usbd, поместите в <span class=filename>/etc/rc.conf</span> следующую строку:</p></div><div class="literalblock programlisting"><div class=content><pre>usbd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Возможна также настройка ppp для дозвона при запуске. Для этого добавьте в <span class=filename>/etc/rc.conf</span> нижеприведенные строки. Опять же, для этого вам необходимо войти под пользователем <code>root</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>ppp_enable=&#34;YES&#34;
ppp_mode=&#34;ddial&#34;
ppp_profile=&#34;adsl&#34;</pre></div></div><div class=paragraph><p>Необходимо также использовать пример файла <span class=filename>ppp.conf</span>, поставляемый с портом <a class=package href=https://cgit.freebsd.org/ports/tree/net/pppoa/>net/pppoa</a>.</p></div></div><div class=sect2><h3 id=_использование_mpd>23.6.2. Использование mpd<a class=anchor href=#_использование_mpd></a></h3><div class=paragraph><p>Вы можете использовать mpd для подключения к различным сервисам, в частности к сервисам PPTP. Вы можете найти mpd в коллекции портов, <a class=package href=https://cgit.freebsd.org/ports/tree/net/mpd/>net/mpd</a>. Многие ADSL модемы требуют, чтобы PPTP туннель был создан между модемом и компьютером, один из таких модемов это Alcatel SpeedTouch™ Home.</p></div><div class=paragraph><p>Сначала установите порт, затем настройте mpd под собственные нужды и настройки провайдера. Порт помещает набор примеров настройки в каталог <span class=filename>PREFIX/etc/mpd/</span>. <em>PREFIX</em> означает каталог, в который устанавливаются порты, по умолчанию это <span class=filename>/usr/local/</span>. Полное руководство по настройке mpd доступно в HTML формате после установки порта. Оно находится в <span class=filename>PREFIX/shared/doc/mpd/</span>. Ниже находится пример настройки mpd для соединения с ADSL сервисом. Настройка разделена на два файла, первый это <span class=filename>mpd.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname username <i class=conum data-value=1></i><b>(1)</b>
    set bundle password password <i class=conum data-value=2></i><b>(2)</b>
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Имя пользователя, используемое для аутентификации у провайдера.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Пароль, используемый для аутентификации у провайдера.</td></tr></tbody></table></div><div class=paragraph><p>Файл <span class=filename>mpd.links</span> содержит информацию о соединении или соединениях, которые вы планируете установить. Пример <span class=filename>mpd.links</span>, соответствующий приведенному выше примеру:</p></div><div class="literalblock programlisting"><div class=content><pre>adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self 10.0.0.1 <i class=conum data-value=1></i><b>(1)</b>
    set pptp peer 10.0.0.138 <i class=conum data-value=2></i><b>(2)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>IP адрес компьютера FreeBSD, с которого вы будете использовать mpd.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>IP адрес модема ADSL. Для Alcatel SpeedTouch™ Home этот адрес по умолчанию <code>10.0.0.138</code>.</td></tr></tbody></table></div><div class=paragraph><p>Инициализация соединения возможно простым выполнением следующей команды под <code>root</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mpd -b adsl</span></code></pre></div></div><div class=paragraph><p>Вы можете просмотреть статус соединения с помощью следующей команды:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ifconfig ng0
ng0: <span class=nv>flags</span><span class=o>=</span>88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 <span class=nt>--</span><span class=o>&gt;</span> 204.152.186.171 netmask 0xffffffff</code></pre></div></div><div class=paragraph><p>Использование mpd это рекомендуемый способ подключения к сервису ADSL из FreeBSD.</p></div></div><div class=sect2><h3 id=_использование_pptpclient>23.6.3. Использование pptpclient<a class=anchor href=#_использование_pptpclient></a></h3><div class=paragraph><p>Возможно также использование FreeBSD для подключения к сервисам PPPoA с помощью <a class=package href=https://cgit.freebsd.org/ports/tree/net/pptpclient/>net/pptpclient</a>.</p></div><div class=paragraph><p>Для подключения к сервису DSL с использованием <a class=package href=https://cgit.freebsd.org/ports/tree/net/pptpclient/>net/pptpclient</a>, установите порт или пакет и отредактируйте <span class=filename>/etc/ppp/ppp.conf</span>. Вам потребуется работать под <code>root</code>. Пример настройки <span class=filename>ppp.conf</span> дан ниже. За дальнейшей информацией по параметрам <span class=filename>ppp.conf</span> обратитесь к странице справочника ppp, <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a>.</p></div><div class="literalblock programlisting"><div class=content><pre>adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname username <i class=conum data-value=1></i><b>(1)</b>
 set authkey password <i class=conum data-value=2></i><b>(2)</b>
 set ifaddr 0 0
 add default HISADDR</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Имя пользователя вашей учетной записи у провайдера DSL.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Пароль для вашей учетной записи.</td></tr></tbody></table></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Поскольку вам необходимо поместить пароль в незашифрованном виде в файл <span class=filename>ppp.conf</span>, убедитесь что никто другой не сможет прочесть содержимое этого файла. Следующая последовательность команд сделает этот файл доступным для чтения только пользователю <code>root</code>. Обратитесь к страницам справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=chown&amp;sektion=8&amp;format=html">chown(8)</a> за дальнейшей информацией.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chown root:wheel /etc/ppp/ppp.conf</span>
<span class=c># chmod 600 /etc/ppp/ppp.conf</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Следующая команда откроет туннель для PPP сессии к вашему DSL маршрутизатору. Модемы Ethernet DSL поставляются с настроенным IP адресом локальной сети, к которому вы подключаетесь. У Alcatel SpeedTouch™ Home этот адрес <code>10.0.0.138</code>. В документации на ваш маршрутизатор должно быть указано, какой адрес используется. Для открытия туннеля и начала PPP сессии выполните:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pptp address adsl</span></code></pre></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Чтобы вернуться в приглашение командной строки после выполнения этой команды, добавьте символ "&" в конец строки.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Устройство виртуального туннеля <span class=filename>tun</span> будет создано для взаимодействия между процессами pptp и ppp. Как только вы вернетесь в приглашение, или процесс pptp выполнит соединение, вы можете проверить туннель примерно такой командой:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ifconfig tun0
tun0: <span class=nv>flags</span><span class=o>=</span>8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 <span class=nt>--</span><span class=o>&gt;</span> 204.152.186.171 netmask 0xffffff00
        Opened by PID 918</code></pre></div></div><div class=paragraph><p>Если вы не сможете соединиться, проверьте настройку маршрутизатора, которая обычно доступна через telnet или через веб браузер. Если вы все еще не можете подключиться, проверьте вывод команды <code>pptp</code> и содержимое лог файла ppp, <span class=filename>/var/log/ppp.log</span>.</p></div></div></div></div><div class=sect1><h2 id=slip>23.7. Использование SLIP<a class=anchor href=#slip></a></h2><div class=sectionbody><div class=sect2><h3 id=slipc>23.7.1. Настройка SLIP клиента<a class=anchor href=#slipc></a></h3><div class=paragraph><p>Ниже дан один из способов настройки FreeBSD для подключения к SLIP сети со статическим адресом. Для динамического подключения (адрес изменяется при каждом дозвоне) возможно потребуется более сложная настройка.</p></div><div class=paragraph><p>Сначала определите, к какому последовательному порту подключен модем. Многие создают символическую ссылку, такую как <span class=filename>/dev/modem</span>, на настоящий файл устройства, <span class=filename>/dev/cuaaN</span>. Это позволяет абстрагироваться от имени файла устройства, например если вы переносите модем на другой порт. Довольно сложно править множество файлов в <span class=filename>/etc</span> и <span class=filename>.kermrc</span> во всей системе!</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><span class=filename>/dev/cuaa0</span> это <span class=filename>COM1</span>, <span class=filename>cuaa1</span> это <span class=filename>COM2</span>, и т.д.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Убедитесь, что в вашем файле настройки ядра присутствует строка:</p></div><div class="literalblock programlisting"><div class=content><pre>pseudo-device   sl      1</pre></div></div><div class=paragraph><p>В FreeBSD 5.X, используйте вместо этой строки следующую:</p></div><div class="literalblock programlisting"><div class=content><pre>device   sl</pre></div></div><div class=paragraph><p>Эта строка включена в ядро <span class=filename>GENERIC</span>, так что если вы ее не удаляли, проблем быть не должно.</p></div><div class=sect3><h4 id=_то_что_необходимо_сделать_только_один_раз>23.7.1.1. То, что необходимо сделать только один раз<a class=anchor href=#_то_что_необходимо_сделать_только_один_раз></a></h4><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Добавьте ваш компьютер, шлюз и сервера имен в файл <span class=filename>/etc/hosts</span>. Вот пример такого файла:</p><div class="literalblock programlisting"><div class=content><pre>127.0.0.1	       localhost loghost
136.152.64.181          water.CS.Example.EDU water.CS water
136.152.64.1            inr-3.CS.Example.EDU inr-3 slip-gateway
128.32.136.9            ns1.Example.EDU ns1
128.32.136.12           ns2.Example.EDU ns2</pre></div></div></li><li><p>Убедитесь, что в файле <span class=filename>/etc/host.conf</span><code>hosts</code> находится перед <code>bind</code> (для FreeBSD версий до 5.0). Начиная с FreeBSD 5.0, система использует файл <span class=filename>/etc/nsswitch.conf</span>, убедитесь, что параметр <code>files</code> находится перед <code>dns</code> в строке <code>hosts</code> этого файла. Без этого параметра могут происходить странные вещи.</p></li><li><p>Отредактируйте файл <span class=filename>/etc/rc.conf</span>.</p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>Установите имя хоста, настроив переменную hostname:</p><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;myname.my.domain&#34;</pre></div></div><div class=paragraph><p>Здесь необходимо использовать полное доменное имя вашего компьютера в интернет.</p></div></li><li><p>Добавьте <span class=filename>sl0</span> к списку сетевых интерфейсов, изменив переменную:</p><div class="literalblock programlisting"><div class=content><pre>network_interfaces=&#34;lo0&#34;</pre></div></div><div class=paragraph><p>на:</p></div><div class="literalblock programlisting"><div class=content><pre>network_interfaces=&#34;lo0 sl0&#34;</pre></div></div></li><li><p>Измените параметры <span class=filename>sl0</span>, добавив строку:</p><div class="literalblock programlisting"><div class=content><pre>ifconfig_sl0=&#34;inet ${hostname} slip-gateway netmask 0xffffff00 up&#34;</pre></div></div></li><li><p>Назначьте маршрутизатор по умолчанию, изменив строку:</p><div class="literalblock programlisting"><div class=content><pre>defaultrouter=&#34;NO&#34;</pre></div></div><div class=paragraph><p>на:</p></div><div class="literalblock programlisting"><div class=content><pre>defaultrouter=&#34;slip-gateway&#34;</pre></div></div></li></ol></div></li><li><p>Создайте файл <span class=filename>/etc/resolv.conf</span>, содержащий:</p><div class="literalblock programlisting"><div class=content><pre>domain CS.Example.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</pre></div></div><div class=paragraph><p>Как вы видите, здесь указаны адреса серверов имен. Конечно, реальные имена доменов и адреса для вас будут другими.</p></div></li><li><p>Перегрузите компьютер и убедитесь, что его имя хоста настроено правильно.</p></li></ol></div></div></div></div><div class=sect3><h4 id=_создание_slip_соединения>23.7.1.2. Создание SLIP соединения<a class=anchor href=#_создание_slip_соединения></a></h4><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Дозвонитесь на удаленный сервер, введите <code>slip</code> в приглашение, имя своего компьютера и пароль. Все, что требуется ввести в вашем случае. Если вы используете kermit, попробуйте такой скрипт:</p><div class="literalblock programlisting"><div class=content><pre># kermit setup
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# The next macro will dial up and login
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Username:, if failure stop, -
output silvia\x0d, input 10 Password:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</pre></div></div><div class=paragraph><p>Конечно, вам потребуется заменить имя хоста и пароль на ваши собственные. После этого, для подключения просто введите <code>slip</code> из приглашения kermit.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Хранение пароля в любом месте файловой системы в незашифрованном виде это обычно плохая идея. Вы делаете это на свой риск.</p></div></td></tr></tbody></table></div></li><li><p>Выйдите из kermit (вы можете приостановить его, нажав <span class=keyseq><kbd>Ctrl</kbd>+<kbd>z</kbd></span>) и введите под <code>root</code>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># slattach -h -c -s 115200 /dev/modem</span></code></pre></div></div><div class=paragraph><p>Если вы сможете выполнить <code>ping</code> для хостов по другую сторону маршрутизатора, вы подключились! Если это не работает, попробуйте параметр <code>slattach -a</code> вместо <code>-c</code>.</p></div></li></ol></div></div></div></div><div class=sect3><h4 id=_как_прервать_соединение>23.7.1.3. Как прервать соединение:<a class=anchor href=#_как_прервать_соединение></a></h4><div class=paragraph><p>Сделайте следующее:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -INT `cat /var/run/slattach.modem.pid`</span></code></pre></div></div><div class=paragraph><p>для остановки <code>slattach</code>. Помните, что вы должны работать под <code>root</code> для выполнения этой команды. Затем вернитесь в kermit (запустив <code>fg</code>, если он приостановлен) и выйдите из него (<code>q</code>).</p></div><div class=paragraph><p>Страница справочника <code>slattach</code> сообщает, что для отключения интерфейса необходимо использовать <code>ifconfig sl0 down</code>, но это похоже не играет никакой роли. (<code>ifconfig sl0</code> сообщает о том же.)</p></div><div class=paragraph><p>Иногда модем может не сбросить соединение (это бывает довольно часто). В этом случае просто запустите kermit и выйдите из него еще раз. При второй попытке соединение обычно разрывается.</p></div></div><div class=sect3><h4 id=_решение_проблем>23.7.1.4. Решение проблем<a class=anchor href=#_решение_проблем></a></h4><div class=paragraph><p>Вот наиболее часто встречающиеся ситуации:</p></div><div class=ulist><ul><li><p>Не используются параметры <code>slattach`</code>-c` или <code>-a</code> (это может быть не фатально, но иногда вызывает проблемы.)</p></li><li><p>Используется <code>s10</code> вместо <code>sl0</code> (с некоторыми шрифтами сложно увидеть разницу).</p></li><li><p>Попробуйте использовать <code>ifconfig sl0</code> для просмотра статуса интерфейса. Например, вы можете получить такую информацию:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig sl0</span>
sl0: <span class=nv>flags</span><span class=o>=</span>10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 <span class=nt>--</span><span class=o>&gt;</span> 136.152.64.1 netmask ffffff00</code></pre></div></div></li><li><p>Если вы получите сообщение <code>no route to host</code> от команды ping, возможно это проблема с таблицей маршрутизации. Используйте команду <code>netstat -r</code> для отображения существующих маршрутов:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># netstat -r</span>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt    Netmasks:

<span class=o>(</span>root node<span class=o>)</span>
<span class=o>(</span>root node<span class=o>)</span>

Route Tree <span class=k>for </span>Protocol Family inet:
<span class=o>(</span>root node<span class=o>)</span> <span class=o>=&gt;</span>
default          inr-3.Example.EDU  UG          8   224515  sl0 -      -
localhost.Exampl localhost.Example. UH          5    42127  lo0 -       0.438
inr-3.Example.ED water.CS.Example.E UH          1        0  sl0 -      -
water.CS.Example localhost.Example. UGH        34 47641234  lo0 -       0.438
<span class=o>(</span>root node<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Предыдущий пример получен на относительно загруженной системе. Числа в вашей системе будут сильно зависеть от загрузки сети.</p></div></li></ul></div></div></div><div class=sect2><h3 id=slips>23.7.2. Настройка SLIP сервера<a class=anchor href=#slips></a></h3><div class=paragraph><p>Этот документ предоставляет решение для настройки SLIP сервера в системе FreeBSD, что обычно означает настройку системы для автоматического запуска соединений при удаленном входе SLIP клиентов.</p></div><div class=sect3><h4 id=slips-prereqs>23.7.2.1. Предварительные требования<a class=anchor href=#slips-prereqs></a></h4><div class=paragraph><p>Информация в этом разделе чисто техническая, поэтому требуются некоторые предварительные знания. Предполагается, что вы знакомы с сетевым протоколом TCP/IP, и в частности, с адресацией сетей и хостов, сетевыми масками, делением на подсети, маршрутизацией и протоколами маршрутизации, такими как RIP. Настройка SLIP сервисов на сервере удаленного доступа требует знания этих концепций, и если вы не знакомы с ними, прочтите или книгу <em>TCP/IP Network Administration</em> от Craig Hunt, опубликованную O’Reilly & Associates, Inc. (ISBN Number 0-937175-82-X), или книги Douglas Comer по протоколу TCP/IP.</p></div><div class=paragraph><p>В дальнейшем предполагается, что вы уже настроили ваш модем (модемы) и настроили соответствующие системные файлы для разрешения входа через них. Если вы еще не подготовили систему соответствующим образом, обратитесь к руководству по настройке сервисов удаленного входа; просмотрите список руководств на <a href=https://www.FreeBSD.org/ru/docs/>http://www.FreeBSD.org/ru/docs/</a>. Вы можете также обратиться к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> за информацией о драйвере последовательного порта и к страницам <a href="https://man.freebsd.org/cgi/man.cgi?query=gettytab&amp;sektion=5&amp;format=html">gettytab(5)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> за информацией по настройке системы для удаленного входа в систему через модемы, и возможно <a href="https://man.freebsd.org/cgi/man.cgi?query=stty&amp;sektion=1&amp;format=html">stty(1)</a> за информацией о настройке параметров последовательных портов (таких как <code>clocal</code> для подключаемых непосредственно последовательных интерфейсов).</p></div></div><div class=sect3><h4 id=_краткий_обзор>23.7.2.2. Краткий обзор<a class=anchor href=#_краткий_обзор></a></h4><div class=paragraph><p>В типичной конфигурации FreeBSD работает в качестве SLIP сервера так: пользователь SLIP дозванивается на FreeBSD SLIP сервер и входит в систему со специальным SLIP логином, использующим <span class=filename>/usr/sbin/sliplogin</span> в качестве оболочки. Программа <code>sliplogin</code> просматривает файл <span class=filename>/etc/sliphome/slip.hosts</span> на предмет строки, соответствующей специальному пользователю, и если находит совпадение, подключает последовательную линию к доступному SLIP интерфейсу, а затем запускает shell скрипт <span class=filename>/etc/sliphome/slip.login</span> для настройки SLIP интерфейса.</p></div><div class=sect4><h5 id=_пример_входа_на_slip_сервер>23.7.2.2.1. Пример входа на SLIP сервер<a class=anchor href=#_пример_входа_на_slip_сервер></a></h5><div class=paragraph><p>Например, идентификатор пользователя на SLIP сервере <code>Shelmerg</code>. Соответствующая запись в <span class=filename>/etc/master.passwd</span> будет выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</pre></div></div><div class=paragraph><p>Когда <code>Shelmerg</code> входит в систему, <code>sliplogin</code> ищет строку в <span class=filename>/etc/sliphome/slip.hosts</span>, в которой находится соответствующий идентификатор пользователя; например, строка может быть такой:</p></div><div class="literalblock programlisting"><div class=content><pre>Shelmerg	dc-slip sl-helmer       0xfffffc00		  autocomp</pre></div></div><div class=paragraph><p>После обнаружения этой строки <code>sliplogin</code> подключает последовательную линию к следующему доступному SLIP интерфейсу, а затем выполняет <span class=filename>/etc/sliphome/slip.login</span> примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</pre></div></div><div class=paragraph><p>Если все проходит нормально, <span class=filename>/etc/sliphome/slip.login</span> вызовет <code>ifconfig</code> для SLIP интерфейса, к которому подключилась программа <code>sliplogin</code> (slip интерфейс 0 в примере выше, первый параметр в списке, задаваемом <span class=filename>slip.login</span>) для установки локального IP адреса ((<code>dc-slip</code>), удаленного IP адреса (<code>sl-helmer</code>), сетевой маски для SLIP интерфейса (<code>0xfffffc00</code>), и любых дополнительных флагов (<code>autocomp</code>). Если что-то идет не так, <code>sliplogin</code> обычно протоколирует соответствующие сообщения в через уровень <code>daemon</code> syslog; эти сообщения как правило попадают в <span class=filename>/var/log/messages</span> (обратитесь к страницам справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a>, а также проверьте файл <span class=filename>/etc/syslog.conf</span>, чтобы выяснить, что протоколирует <code>syslogd</code> и куда помещается информация).</p></div><div class=paragraph><p>Достаточно примеров - давайте начнем настройку системы.</p></div></div></div><div class=sect3><h4 id=_настройка_ядра_2>23.7.2.3. Настройка ядра<a class=anchor href=#_настройка_ядра_2></a></h4><div class=paragraph><p>Стандартное ядро FreeBSD обычно поставляется с двумя SLIP интерфейсами ((<span class=filename>sl0</span> и <span class=filename>sl1</span>); вы можете использовать команду <code>netstat -i</code>, чтобы выяснить, определены ли эти интерфейсы в вашем ядре.</p></div><div class=paragraph><p>Пример вывода <code>netstat -i</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Name  Mtu   Network     Address            Ipkts Ierrs    Opkts Oerrs  Coll
ed0   1500  &lt;Link&gt;0.0.c0.2c.5f.4a         291311     0   174209     0   133
ed0   1500  138.247.224 ivory             291311     0   174209     0   133
lo0   65535 &lt;Link&gt;                            79     0       79     0     0
lo0   65535 loop        localhost             79     0       79     0     0
sl0<span class=k>*</span>  296   &lt;Link&gt;                             0     0        0     0     0
sl1<span class=k>*</span>  296   &lt;Link&gt;                             0     0        0     0     0</code></pre></div></div><div class=paragraph><p>Наличие в выводе <code>netstat -i</code> интерфейсов <span class=filename>sl0</span> и <span class=filename>sl1</span> означает, что SLIP интерфейсы встроены в ядро (символ <code>*</code> показывает неактивность интерфейсов).</p></div><div class=paragraph><p>Ядро FreeBSD по умолчанию не пересылает пакеты между интерфейсами (компьютер FreeBSD не работает как маршрутизатор), вследствие требований RFC (см. RFCs 1009 [Requirements for Internet Gateways], 1122 [Requirements for Internet Hosts - Communication Layers], и возможно 1127 [A Perspective on the Host Requirements RFCs]). Если вы хотите, чтобы FreeBSD SLIP работал в качестве маршрутизатора, отредактируйте файл <span class=filename>/etc/rc.conf</span> и присвойте переменной <code>gateway_enable</code> значение <code>YES</code>.</p></div><div class=paragraph><p>Для вступления изменений в силу потребуется перезагрузка.</p></div><div class=paragraph><p>В файле настройки стандартного ядра (<span class=filename>/sys/i386/conf/GENERIC</span>) находится строка:</p></div><div class="literalblock programlisting"><div class=content><pre>pseudo-device sl 2</pre></div></div><div class=paragraph><p>Она определяет число доступных устройств SLIP в ядре; Число в конце строки определяет максимально возможное количество одновременных SLIP соединений.</p></div><div class=paragraph><p>Обратитесь к <a href=../kernelconfig/#kernelconfig>Настройка ядра FreeBSD</a> за информацией по настройке ядра FreeBSD.</p></div></div><div class=sect3><h4 id=_настройка_sliplogin>23.7.2.4. Настройка sliplogin<a class=anchor href=#_настройка_sliplogin></a></h4><div class=paragraph><p>Как упоминалось ранее, в каталоге <span class=filename>/etc/sliphome</span> находятся три файла, являющиеся частью настройки для <span class=filename>/usr/sbin/sliplogin</span> (для <code>sliplogin</code> существует страница справочника, <a href="https://man.freebsd.org/cgi/man.cgi?query=sliplogin&amp;sektion=8&amp;format=html">sliplogin(8)</a>): <span class=filename>slip.hosts</span>, определяющий список пользователей SLIP и связанные с ними IP адреса; <span class=filename>slip.login</span>, который обычно всего лишь настраивает SLIP интерфейс; <span class=filename>slip.logout</span>, который восстанавливает состояние системы до запуска <span class=filename>slip.login</span> после завершения последовательного соединения.</p></div><div class=sect4><h5 id=_настройка_slip_hosts>23.7.2.4.1. Настройка <span class=filename>slip.hosts</span><a class=anchor href=#_настройка_slip_hosts></a></h5><div class=paragraph><p><span class=filename>/etc/sliphome/slip.hosts</span> содержит строки, в которых находится как минимум четыре параметра, разделенных пробелами:</p></div><div class=ulist><ul><li><p>ID пользователя SLIP</p></li><li><p>Локальный адрес (локальный для SLIP сервера) SLIP соединения</p></li><li><p>Удаленный адрес SLIP соединения</p></li><li><p>Сетевая маска</p></li></ul></div><div class=paragraph><p>Локальные и удаленные адреса могут быть именами хостов (разрешаемыми в IP адреса через файл <span class=filename>/etc/hosts</span> или через службу доменных имен, в зависимости от настроек в файле <span class=filename>/etc/nsswitch.conf</span> для FreeBSD 5.X, или <span class=filename>/etc/host.conf</span> для FreeBSD 4.X), а сетевая маска может быть именем, разрешаемым через файл <span class=filename>/etc/networks</span>. В системе, используемой в качестве примера, файл <span class=filename>/etc/sliphome/slip.hosts</span> выглядит так:</p></div><div class="literalblock programlisting"><div class=content><pre>#
# login local-addr      remote-addr     mask            opt1    opt2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</pre></div></div><div class=paragraph><p>В конце строки находятся один или более параметров.</p></div><div class=ulist><ul><li><p><code>normal</code> - нет сжатия заголовков</p></li><li><p><code>compress</code> - сжимать заголовки</p></li><li><p><code>autocomp</code> - сжимать заголовки, если удаленная сторона это позволяет</p></li><li><p><code>noicmp</code> - запретить ICMP пакеты (любые "ping" пакеты будут отброшены и не станут помехой для другого трафика)</p></li></ul></div><div class=paragraph><p>Выбор локального и удаленного адреса для SLIP соединений зависит от того, используете ли вы выделенную TCP/IP сеть, или используете на SLIP сервере "ARP прокси". (это не "настоящий" ARP прокси, но данная терминология используется в этом разделе). Если вы не уверены, какой метод выбрать, или как присвоить IP адреса, обратитесь к книгам по TCP/IP, упомянутым выше (<a href=#slips-prereqs>Предварительные требования</a>).</p></div><div class=paragraph><p>Если вы собираетесь использовать отдельную подсеть для SLIP клиентов, потребуется выделить адреса за пределом адресов вашей сети и присвоить каждому SLIP клиенту IP адрес из данной подсети. Затем вам возможно потребуется настроить статический маршрут в используемую для SLIP подсеть через SLIP сервер на ближайшем IP маршрутизаторе.</p></div><div class=paragraph><p>Иначе, если вы будете использовать метод "proxy ARP", потребуется присвоить SLIP клиентам IP адреса, не входящие в Ethernet подсеть сервера SLIP, а также настроить скрипты <span class=filename>/etc/sliphome/slip.login</span> и <span class=filename>/etc/sliphome/slip.logout</span>, чтобы использовать <a href="https://man.freebsd.org/cgi/man.cgi?query=arp&amp;sektion=8&amp;format=html">arp(8)</a> для управления записями ARP прокси в таблице ARP сервера SLIP.</p></div></div><div class=sect4><h5 id=_настройка_slip_login>23.7.2.4.2. Настройка <span class=filename>slip.login</span><a class=anchor href=#_настройка_slip_login></a></h5><div class=paragraph><p>Типичный файл <span class=filename>/etc/sliphome/slip.login</span> выглядит примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</pre></div></div><div class=paragraph><p>Этот файл <span class=filename>slip.login</span> всего лишь запускает <code>ifconfig</code> для соответствующего SLIP интерфейса с заданными локальным и удаленным адресом и сетевой маской.</p></div><div class=paragraph><p>Если вы решили использовать метод "ARP прокси" (вместо использования отдельной подсети для SLIP клиентов), ваш файл <span class=filename>/etc/sliphome/slip.login</span> должен выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# Answer ARP requests for the SLIP client with our Ethernet addr
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</pre></div></div><div class=paragraph><p>Дополнительная строка в этом <span class=filename>slip.login</span>, <code>arp -s $5 00:11:22:33:44:55 pub</code>, создает ARP запись в ARP таблице SLIP сервера. При соединении другого узла в Ethernet с IP адресом SLIP клиента, SLIP сервер выдает ответ с собственным Ethernet MAC адресом.</p></div><div class=paragraph><p>При использовании примера выше убедитесь, что заменили Ethernet MAC адрес (<code>00:11:22:33:44:55</code>) на MAC адрес Ethernet карты вашей системы, или ваш "ARP прокси" точно не будет работать! Вы можете определить Ethernet MAC адрес SLIP сервера, просмотрев вывод команды <code>netstat -i</code> выше; информация об адресе находится второй строке:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923	0   129457     0   116</code></pre></div></div><div class=paragraph><p>Это означает, что в данной системе Ethernet MAC адрес <code>00:02:c1:28:5f:4a</code> - точки в MAC адресе, выдаваемые <code>netstat -i</code>, должны быть заменены на двоеточия, необходимо также добавить нуль в начало каждого односимвольного шестнадцатеричного номера для преобразования этого адреса в форму, пригодную для <a href="https://man.freebsd.org/cgi/man.cgi?query=arp&amp;sektion=8&amp;format=html">arp(8)</a>; обратитесь к странице справочника <a href="https://man.freebsd.org/cgi/man.cgi?query=arp&amp;sektion=8&amp;format=html">arp(8)</a> за полной информацией по использованию.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>При создании <span class=filename>/etc/sliphome/slip.login</span> и <span class=filename>/etc/sliphome/slip.logout</span>, должен быть установлен бит "выполнения" (<code>chmod 755 /etc/sliphome/slip.login /etc/sliphome/slip.logout</code>), или <code>sliplogin</code> не сможет их выполнить.</p></div></td></tr></tbody></table></div></div><div class=sect4><h5 id=_настройка_slip_logout>23.7.2.4.3. Настройка <span class=filename>slip.logout</span><a class=anchor href=#_настройка_slip_logout></a></h5><div class=paragraph><p><span class=filename>/etc/sliphome/slip.logout</span> не является совершенно необходимым (если только вы не реализуете "ARP прокси"), но если вы решили создать его, воспользуйтесь следующим примером:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#       slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down</pre></div></div><div class=paragraph><p>Если вы используете "ARP прокси", потребуется удаление записи ARP для SLIP клиента через <span class=filename>/etc/sliphome/slip.logout</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#       @(#)slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down
# Quit answering ARP requests for the SLIP client
/usr/sbin/arp -d $5</pre></div></div><div class=paragraph><p>Команда <code>arp -d $5</code> удаляет запись ARP, добавленную <span class=filename>slip.login</span> при входе SLIP клиента.</p></div><div class=paragraph><p>Повторяем: убедитесь, что на файл <span class=filename>/etc/sliphome/slip.logout</span> установлен бит выполнения (<code>chmod 755 /etc/sliphome/slip.logout</code>).</p></div></div></div><div class=sect3><h4 id=_соглашения_о_маршрутизации>23.7.2.5. Соглашения о маршрутизации<a class=anchor href=#_соглашения_о_маршрутизации></a></h4><div class=paragraph><p>Если вы не используете "ARP прокси" метод для маршрутизации пакетов между SLIP клиентами и остальной сетью (и возможно интернет), вам возможно потребуется статический маршрут (маршруты) до ближайшего шлюза (шлюзов) для маршрутизации подсети SLIP клиентов через SLIP сервер.</p></div><div class=sect4><h5 id=_статические_маршруты>23.7.2.5.1. Статические маршруты<a class=anchor href=#_статические_маршруты></a></h5><div class=paragraph><p>Добавление статических маршрутов может стать для кого-то проблемой (это даже невозможно, если у вас нет соответствующих прав). Если в вашей организации сеть с несколькими маршрутизаторами, некоторые маршрутизаторы, например Cisco и Proteon, требуют не только настройки статического маршрута в подсеть SLIP, но и указания, о каких статических маршрутах сообщать другим маршрутизаторам, так что для наладки работоспособности статической маршрутизации может потребоваться некоторое исследование и отладка.</p></div></div><div class=sect4><h5 id=_запуск_gated>23.7.2.5.2. Запуск GateD®<a class=anchor href=#_запуск_gated></a></h5><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>GateD® это закрытое программно обеспечение, более недоступное в исходных текстах (дополнительная информация находится на вебсайте <a href=http://www.gated.org/>GateD®</a>). Этот раздел существует лишь в целях обратной совместимости для тех, кто все еще использует старую версию.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Альтернатива головной боли со статическими маршрутами это установка GateD® на FreeBSD SLIP сервере и настройка его для использования соответствующих протоколов маршрутизации (RIP/OSPF/BGP/EGP) для сообщения другим маршрутизаторам о вашей SLIP подсети. Вам потребуется создать <span class=filename>/etc/gated.conf</span> для настройки gated. Ниже дан пример:</p></div><div class="literalblock programlisting"><div class=content><pre>#
# gated configuration file for dc.dsu.edu; for gated version 3.5alpha5
# Only broadcast RIP information for xxx.xxx.yy out the ed Ethernet interface
#
#
# tracing options
#
traceoptions &#34;/var/tmp/gated.output&#34; replace size 100k files 2 general ;

rip yes {
  interface sl noripout noripin ;
  interface ed ripin ripout version 1 ;
  traceoptions route ;
} ;

#
# Turn on a bunch of tracing info for the interface to the kernel:
kernel {
  traceoptions remnants request routes info interface ;
} ;

#
# Propagate the route to xxx.xxx.yy out the Ethernet interface via RIP
#

export proto rip interface ed {
  proto direct {
      xxx.xxx.yy mask 255.255.252.0 metric 1; # SLIP connections
  } ;
} ;

#
# Accept routes from RIP via ed Ethernet interfaces

import proto rip interface ed {
  all ;
} ;</pre></div></div><div class=paragraph><p>В примере выше используется широковещательная рассылка информации о маршрутизации для подсети SLIP <em>xxx.xxx.yy</em> протоколом RIP на сеть Ethernet; если вы используете другой драйвер Ethernet вместо <span class=filename>ed</span>, потребуется соответственно изменить запись для <span class=filename>ed</span>. В этом примере отладочная информация переправляется в <span class=filename>/var/tmp/gated.output</span>; вы можете выключить отладку, если GateD® работает. Вам потребуется заменить <em>xxx.xxx.yy</em> в сетевом адресе на вашу подсеть SLIP (убедитесь, что изменение сетевой маски в <code>proto direct</code> работает нормально).</p></div><div class=paragraph><p>Как только вы установили и настроили GateD®, потребуется сообщить стартовым скриптам FreeBSD запускать его вместо routed. Простейший способ сделать это - установить переменные <code>router</code> и <code>router_flags</code> в <span class=filename>/etc/rc.conf</span>. Обратитесь к странице справочника GateD® за информацией о параметрах командной строки.</p></div></div></div></div></div></div></div><hr><div class=last-modified><p><strong>Изменено</strong>: 9 марта 2024 г. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Назад></i><div class=container><a href=https://docs.freebsd.org/ru/books/handbook/serialcomms class=direction>Назад</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Главная></i><div class=container><a href=../ class=direction>Главная</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/ru/books/handbook/mail class=direction>Далее</a></div><i class="fa fa-angle-right" aria-hidden=true title=Далее></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#ppp-and-slip-synopsis>23.1. Краткий обзор</a></li><li><a href=#userppp>23.2. PPP уровня пользователя</a></li><li><a href=#ppp>23.3. PPP уровня ядра</a></li><li><a href=#ppp-troubleshoot>23.4. Решение проблем с соединениями PPP</a></li><li><a href=#pppoe>23.5. Использование PPP через Ethernet (PPPoE)</a></li><li><a href=#pppoa>23.6. Использование PPP через ATM (PPPoA)</a></li><li><a href=#slip>23.7. Использование SLIP</a></li></ul></nav><hr><div class=resources><h3>Материалы</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Скачать PDF"></i><a href=https://download.freebsd.org/doc/ru/books/handbook/handbook_ru.pdf>Скачать PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Редактировать эту страницу"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ru/_index target=_blank>Редактировать эту страницу</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/ru/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Выберите язык">
<span>Русский</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Система</option><option value=theme-light>Светлый</option><option value=theme-dark>Тёмный</option><option value=theme-high-contrast>Высокая контрастность</option></select></div></div></section><section class=about-column><h3 class=column-title>О нас</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Кодекс Этики</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Бюллетени Безопасности</a></li></ul></section><section class=documentation-column><h3 class=column-title>Документация</h3><ul class=column-elements-container><li><a href=/ru class=column-element>Портал документации</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Презентации и публикации</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Предыдущие версии</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>Документы 4.4BSD</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Сообщество</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/ru/articles/contributing class=column-element>Принять участие</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Форум Сообщества</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Трекер ошибок</a></li></ul></section><section class=legal-column><h3 class=column-title>Юридическая информация</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Пожертвования</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Лицензирование</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Политика Конфиденциальности</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Юридические оговорки</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 Проект FreeBSD. Все права защищены</p><span>Сделано с помощью <span class=heart>♥</span> Сообществом FreeBSD</span></section></div></footer></body></html>