<!doctype html><html class=theme-light lang=ru><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/ru/articles/committers-guide/><title>Справочник коммиттера | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Справочник коммиттера"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ru"><meta property="og:url" content="http://172.16.201.134:1313/ru/articles/committers-guide/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/ru\/articles\/committers-guide\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>О нас
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>О нас</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Кодекс Этики</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Получить FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Информация о релизах</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Подготовка релизов</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Бюллетени Безопасности</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Документация
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ru>Портал документации</a></li><li><a href=http://172.16.201.134:1313/ru/books/handbook>Руководство</a></li><li><a href=http://172.16.201.134:1313/ru/books/porters-handbook>Руководство по созданию портов</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Учебник Проекта Документирования</a></li><li><a href=https://man.FreeBSD.org target=_blank>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Презентации и публикации</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/ru/books>Книги</a></li><li><a href=http://172.16.201.134:1313/ru/articles>Статьи</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Сообщество
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Сообщество</a></li><li><a href=http://172.16.201.134:1313/ru/articles/contributing>Стать участником</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Форум</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Трекер ошибок</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Поддержка</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ru>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Пожертвования</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Справочник коммиттера</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Этот перевод может быть устаревшим. Для того, чтобы помочь с переводом, пожалуйста, обратитесь к <a href=https://translate-dev.freebsd.org/ target=_blank>Сервер переводов FreeBSD</a>.</p></div><div class=copyright>Copyright © 1999-2007 The FreeBSD Documentation Project</div><div class=legalnotice><a id=trademarks></a><details><summary>товарные знаки</summary><p>FreeBSD является зарегистрированным товарным знаком Фонда FreeBSD.</p><p>IBM, AIX, OS/2, PowerPC, PS/2, S/390 и ThinkPad являются товарными знаками International Business Machines Corporation в Соединённых Штатах, других странах, или по всему миру.</p><p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium и Xeon это торговые марки или зарегистрированные торговые марки Intel Corporation или ее дочерних компаний в Соединенных Штатах и других странах.</p><p>Sparc, Sparc64, и UltraSPARC это торговые марки SPARC International, Inc в Соединенных Штатах и других странах. Продукты с торговой маркой SPARC основаны на архитектуре, разработанной Sun Microsystems, Inc.</p><p>Многие из обозначений, используемые производителями и продавцами для обозначения своих продуктов, заявляются в качестве товарных знаков. Когда такие обозначения появляются в этом документе, и Проекту FreeBSD известно о товарном знаке, к обозначению добавляется знак “™” или “®”.</p></details></div><div class=toc-mobile><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#admin>1. Административные детали</a></li><li><a href=#committer.types>2. Типы коммит битов</a></li><li><a href=#cvs.operations>3. Работа с CVS</a></li><li><a href=#conventions>4. Соглашения и традиции</a></li><li><a href=#pref-license>5. Предпочтительная лицензия для новых файлов</a></li><li><a href=#developer.relations>6. Взаимодействие между разработчиками</a></li><li><a href=#gnats>7. GNATS</a></li><li><a href=#people>8. Кто есть кто</a></li><li><a href=#ssh.guide>9. SSH: быстрый старт</a></li><li><a href=#rules>10. Большой Список Правил Коммиттера FreeBSD</a></li><li><a href=#archs>11. Поддержка различных архитектур</a></li><li><a href=#ports>12. FAQ по работе с портами</a></li><li><a href=#perks>13. Пряники и прочие льготы</a></li><li><a href=#misc>14. Прочие вопросы</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>Аннотация</p></div><div class=paragraph><p>Данный документ содержит информацию для сообщества коммиттеров FreeBSD. Все новые коммиттеры должны изучить его перед началом работы; прочим коммиттерам также рекомендуется время от времени просматривать его.</p></div><hr></div></div><div class=sect1><h2 id=admin>1. Административные детали<a class=anchor href=#admin></a></h2><div class=sectionbody><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:20%><col style=width:80%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>Хост основного репозитория</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>ncvs.FreeBSD.org</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>Способ авторизации</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>, только протокол 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>Основной корень репозитория (CVSROOT)</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>ncvs.FreeBSD.org</code>: <span class=filename>/home/ncvs</span> (см. также <a href=#cvs.operations>Работа с CVS</a>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>`Администраторы Главного CVS Репозитория &lt;<a href=mailto:cvsadm@FreeBSD.org>cvsadm@FreeBSD.org</a>>`</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>Peter Wemm &lt;<a href=mailto:peter@FreeBSD.org>peter@FreeBSD.org</a>></code> и <code>Mark Murray &lt;<a href=mailto:markm@FreeBSD.org>markm@FreeBSD.org</a>></code>, а также <code>Josef Karthauser &lt;<a href=mailto:joe@FreeBSD.org>joe@FreeBSD.org</a>></code> и <code>Joe Marcus Clarke &lt;<a href=mailto:marcus@FreeBSD.org>marcus@FreeBSD.org</a>></code> для иерархии <span class=filename>ports/</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>Списки рассылки</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Список рассылки разработчиков документации FreeBSD, Список рассылки коммиттеров документации FreeBSD; Список рассылки разработчиков портов FreeBSD, Список рассылки коммиттеров портов FreeBSD; Список рассылки разработчиков FreeBSD, Список рассылки коммиттеров исходных текстов FreeBSD. (Каждому репозиторию проекта соответствуют отдельные списки рассылки с суффиксами -developers и -committers. Архивы этих списков хранятся в файлах <span class=filename>/home/mail/repository-name-developers-archive</span> и <span class=filename>/home/mail/repository-name-committers-archive</span> на машинах кластера <code>FreeBSD.org</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>Отчеты Правления</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/home/core/public/monthly-report</span> на машинах кластера <code>FreeBSD.org</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>Наиболее значимые метки CVS</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>RELENG_4</code> (ветвь 4.X-STABLE), <code>RELENG_5</code> (ветвь 5.X-STABLE), <code>RELENG_6</code> (ветвь 6.X-STABLE), <code>HEAD</code> (ветвь -CURRENT)</p></td></tr></tbody></table><div class=paragraph><p>Для авторизации на машины проекта вы должны использовать протоколы <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> или <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> с включенным Kerberos 5. В случае <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>, допустим только протокол версии 2. Эти протоколы являются значительно более защищенными по сравнению с <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> или <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a>, поскольку информация об авторизации передается в зашифрованном виде. По умолчанию, протокол <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> также шифрует весь трафик. Учитывая наличие таких утилит, как <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a>, протокол <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> значительно удобнее прочих в использовании. Если вы ничего не знаете об <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>, загляните в раздел <a href=#ssh.guide>SSH: быстрый старт</a>.</p></div></div></div><div class=sect1><h2 id=committer.types>2. Типы коммит битов<a class=anchor href=#committer.types></a></h2><div class=sectionbody><div class=paragraph><p>CVS Репозиторий FreeBSD состоит из нескольких разделов, охватывающих исходные тексты базовой операционной системы, документацию, инфраструктуру построения внешних приложений (портов), а также различные служебные утилиты. Право записи в репозиторий ("коммит бит") подразумевает указание области дерева, в которое оно может быть применено. Как правило, области напрямую связаны с группой, подтвердившей право коммиттера на бит. В дальнейшем, область действия коммит бита может быть расширена; в этом случае, коммиттер должен следовать стандартным правилам нового для коммиттера в данной области, в частности, получая подтверждения на каждый коммит и, возможно, в течение какого-то времени работу с ментором.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>Тип коммит бита</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><em>Ответственные</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><em>Области репозитория</em></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>src</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>core@</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>src/ и соответствующие части doc/</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>doc</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>doceng@</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>doc/, www/, документация дерева src/</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ports</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>portmgr@</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ports/</p></td></tr></tbody></table><div class=paragraph><p>Биты, выделенные до разделения дерева на области могут использоваться во всех частях дерева. Однако, с точки зрения здравого смысла, коммиттер, не имеющий опыта работы в какой-либо части дерева, должен предоставлять предлагаемые изменения для рассмотрения другими коммиттерами, получать подтверждения от ответственных за различные части репозитория, а также, возможно, работать совместно с ментором. Поскольку правила ведения различных областей кода различаются, указанные нормы скорее направлены на благо коммиттера, не имеющего достаточного опыта работы в данной области.</p></div><div class=paragraph><p>Вне зависимости от области приложения усилий, запросы коммиттеров на рассмотрение предлагаемых изменений в процессе разработки могут только приветствоваться.</p></div><div class=sect2><h3 id=_правила_для_коммиттеров_документации_doc_при_работе_с_деревом_исходных_текстов_src>2.1. Правила для коммиттеров документации (<span class=filename>doc/</span>) при работе с деревом исходных текстов (<span class=filename>src/</span>)<a class=anchor href=#_правила_для_коммиттеров_документации_doc_при_работе_с_деревом_исходных_текстов_src></a></h3><div class=ulist><ul><li><p>Коммиттеры документации могут самостоятельно изменять документацию к исходным текстам, например, страницы справочника, файлы README, базы данных утилиты fortune, календарей, а также исправлять комментарии в исходных текстах без дополнительного согласования с коммиттерами исходных текстов, при условии сохранения здравого смысла и манеры коммитов.</p></li><li><p>Коммиттеры документации могут вносить незначительные изменения и исправления в исходные тексты (такие как исправления к процессу сборки, добавление малых дополнительных возможностей и т.п.) при наличии одобрения от коммиттера исходных текстов.</p></li><li><p>Коммиттер документации может расширить область действия своего бита на область исходных текстов (и стать, таким образом, коммиттером исходных текстов), найдя себе ментора, который предложит это расширение Правлению (Core). После одобрения, строка с его именем пользователя вносится в файл 'access', и применяются обычные правила периода работы с ментором, подразумевающие получение одобрения на каждый коммит.</p></li><li><p>Одобрение коммита ("Approved by") может производиться только "полновесным" (не работающим с ментором) коммиттером исходных текстов; последние могут рассматривать предлагаемые изменения и указываться в строке "Reviewed by".</p></li></ul></div></div></div></div><div class=sect1><h2 id=cvs.operations>3. Работа с CVS<a class=anchor href=#cvs.operations></a></h2><div class=sectionbody><div class=paragraph><p>Подразумевается, что вы уже имеете опыт базовой работы с CVS.</p></div><div class=paragraph><p><code>Администраторы Главного CVS Репозитория &lt;<a href=mailto:cvsadm@FreeBSD.org>cvsadm@FreeBSD.org</a>></code> являются "владельцами" репозитория CVS и ответственны за все прямые его изменения (в целях чистки или исправления каких-либо вопиющих ошибок коммиттеров при работе с CVS). Если в результате ваших действий с частью репозитория произошел несчастный случай, например, после неверной операции <code>cvs import</code> или <code>cvs tag</code>, пошлите письмо соответствующей подгруппе <code>Администраторы Главного CVS Репозитория &lt;<a href=mailto:cvsadm@FreeBSD.org>cvsadm@FreeBSD.org</a>></code> (см. следующую таблицу) и сообщите о проблеме. В наиболее серьезных случаях, касающихся не только какой-либо части репозитория, а дерева CVS в целом, вы можете написать <code>Администраторы Главного CVS Репозитория &lt;<a href=mailto:cvsadm@FreeBSD.org>cvsadm@FreeBSD.org</a>></code>. Пожалуйста, <em>не надо</em> писать группе <code>Администраторы Главного CVS Репозитория &lt;<a href=mailto:cvsadm@FreeBSD.org>cvsadm@FreeBSD.org</a>></code> по поводу репозиторного копирования и прочих вопросов, которые может решить соответствующая подгруппа.</p></div><div class=paragraph><p><a id=repomeisters></a>Напрямую изменять содержимое репозитория может только группа CVS-мастеров; для обеспечения этого, только CVS-мастера имеют учетные записи на машинах, поддерживающих основной репозиторий.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Адреса, на которые следует посылать запросы, зависят от области репозитория, которую требуется поправить:</p></div><div class=ulist><ul><li><p>ncvs@ - репозиторий <span class=filename>/home/ncvs</span>, основные исходные тексты</p></li><li><p>pcvs@ - репозиторий <span class=filename>/home/pcvs</span>, порты</p></li><li><p>dcvs@ - репозиторий <span class=filename>/home/dcvs</span>, документация</p></li><li><p>projcvs@ - репозиторий <span class=filename>/home/projcvs</span>, прочие проекты</p></li></ul></div></td></tr></tbody></table></div><div class=paragraph><p>Дерево CVS в настоящее время разделено на четыре независимых репозитория: <code>doc</code>, <code>ports</code>, <code>projects</code> и <code>src</code>. Для удобства работы пользователей при распространении через CVSup различные деревья комбинируются в одно, с одним служебным каталогом <code>CVSROOT</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Обратите внимание, что модуль <code>www</code>, содержащий исходные тексты <a href=http://www.FreeBSD.org>веб-сайта FreeBSD</a>, расположен в репозитории <code>doc</code>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>В настоящее время, все репозитории CVS располагаются на одной машине, <code>ncvs.FreeBSD.org</code>, однако, для обеспечения возможности в будущем разнести их по физически различным машинам, для каждой поддерживается отдельное имя хоста. Их и следует использовать коммиттерам. Наконец, каждый репозиторий расположен в отдельном каталоге. В итоге, общая картина выглядит так:</p></div><table id=cvs-repositories-and-hosts class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 1. Репозитории CVS FreeBSD, хосты и каталоги</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Репозиторий</th><th class="tableblock halign-left valign-top">Хост</th><th class="tableblock halign-left valign-top">Каталог</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>doc</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>dcvs.FreeBSD.org</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>/home/dcvs</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ports</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>pcvs.FreeBSD.org</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>/home/pcvs</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>projects</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>projcvs.FreeBSD.org</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>/home/projcvs</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>src</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ncvs.FreeBSD.org</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>/home/ncvs</p></td></tr></tbody></table><div class=paragraph><p>Операции с CVS производятся удаленно, путем установки переменной окружения <code>CVSROOT</code> (она должна указывать на соответствующий хост и каталог верхнего уровня, например <code>ncvs.FreeBSD.org`</code>:`<span class=filename>/home/ncvs</span>) и последующего выполнения команд выгрузки и коммита. Многие коммиттеры определяют команды-синонимы, разворачивающиеся в запуск CVS с правильными параметрами. В частности, пользователи оболочки <a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a> могут добавить следующие строки в свой скрипт начальной загрузки <span class=filename>.cshrc</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>alias dcvs cvs -d user@dcvs.FreeBSD.org:/home/dcvs
alias pcvs cvs -d user@pcvs.FreeBSD.org:/home/pcvs
alias projcvs cvs -d user@projcvs.FreeBSD.org:/home/projcvs
alias scvs cvs -d user@ncvs.FreeBSD.org:/home/ncvs</pre></div></div><div class=paragraph><p>Теперь все операции с CVS могут выполняться на локальной машине, а для внесения изменений в официальное дерево CVS следует использовать команду <code><em>X</em>cvs commit</code>. Если вам нужно добавить в проект что-либо совершенно новое (например, исходные тексты сторонних разработчиков), нужно использовать команду <code>cvs import</code>; обратитесь к странице справочника по <a href="https://man.freebsd.org/cgi/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a> за подробностями.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Пожалуйста, <em>не используйте</em> команды <code>cvs checkout</code> или <code>cvs update</code> для синхронизации ваших исходных текстов. Протокол CVS не оптимизирован для удаленной работы и требует значительных накладных расходов со стороны сервера. Пожалуйста, используйте метод синхронизации посредством <code>cvsup</code>, а основной хост используйте только для собственно коммитов. Наша распределенная сеть серверов cvsup достаточно развита. При необходимости синхронизации с самыми свежими изменениями вы можете пользоваться машиной <code>cvsup-master</code>, которая обладает достаточными ресурсами для удаленной работы с CVS; за нее отвечает <code>Jun Kuriyama &lt;<a href=mailto:kuriyama@FreeBSD.org>kuriyama@FreeBSD.org</a>></code>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Если вам нужно использовать команды CVS <code>add</code> и <code>delete</code>, так чтобы в реальности переместить часть исходных текстов подобно действию команды <a href="https://man.freebsd.org/cgi/man.cgi?query=mv&amp;sektion=1&amp;format=html">mv(1)</a>, нужно запросить операцию "репозиторного копирования" (repository copy). При этом кто-либо из <a href=#repomeisters>CVS-мастеров</a> скопирует необходимые файлы внутри репозитория на нужное место и даст вам знать об этом. Репозиторное копирование производится для сохранения истории (журналов изменения). Возможность отследить историю изменений очень ценна для всего проекта FreeBSD.</p></div><div class=paragraph><p>Документация по CVS, учебные материалы и FAQ можно найти по адресу: <a href=http://www.cvshome.org/docs/>http://www.cvshome.org/docs/</a>. Очень полезна также книга Карла Фогеля (Karl Fogel) <a href=http://cvsbook.red-bean.com/cvsbook.html>Open Source Development with CVS</a>. Некоторая полезная информация о CVS на русском языке может быть найдена <a href=http://alexm.here.ru/cvs-ru/>здесь</a>.</p></div><div class=paragraph><p><code>Dag-Erling Smørgrav &lt;<a href=mailto:des@FreeBSD.org>des@FreeBSD.org</a>></code> написал такой "мини-пример" работы с CVS:</p></div><div class="olist arabic"><ol class=arabic><li><p>Извлечение нужного модуля из репозитория: команда <code>co</code> или <code>checkout</code>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs checkout shazam</code></pre></div></div><div class=paragraph><p>Эта команда извлечет копию модуля <span class=filename>shazam</span>. Если модуль с таким именем не существует (не описан в файле modules), будет произведена попытка извлечь директорию верхнего уровня <span class=filename>shazam</span>.</p></div><table class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 2. Полезные опции команды <code>cvs checkout</code></caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-P</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Не создавать (точнее, удалить после завершения выполнения) пустые каталоги</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-l</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Извлекать один уровень каталогов (без подкаталогов)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-r<em>rev</em></code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Извлечь ревизию, ветвь или тег <em>rev</em> для указанного модуля</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-D<em>date</em></code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Извлечь состояние модуля в репозитории на момент <em>date</em></p></td></tr></tbody></table><div class=paragraph><p>Примеры в применении к FreeBSD:</p></div><div class=ulist><ul><li><p>Извлечь модуль <span class=filename>miscfs</span>, расположенный в каталоге репозитория <span class=filename>src/sys/miscfs</span>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co miscfs</code></pre></div></div><div class=paragraph><p>После выполнения вы получите каталог <span class=filename>miscfs</span>, содержащий подкаталоги <span class=filename>CVS</span>, <span class=filename>deadfs</span>, <span class=filename>devfs</span> и т.д. Один из них (<span class=filename>linprocfs</span>) будет пустым.</p></div></li><li><p>Извлечь те же файлы, но с полным путем:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co src/sys/miscfs</code></pre></div></div><div class=paragraph><p>Теперь у вас есть каталог <span class=filename>src</span>, содержащий подкаталоги <span class=filename>CVS</span> и <span class=filename>sys</span>. Каталог <span class=filename>src/sys</span> содержит подкаталоги <span class=filename>CVS</span> и <span class=filename>miscfs</span> и т.д.</p></div></li><li><p>Извлечь те же файлы, удалив при этом пустые подкаталоги:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co <span class=nt>-P</span> miscfs</code></pre></div></div><div class=paragraph><p>Вы получите каталог <span class=filename>miscfs</span> с подкаталогами <span class=filename>CVS</span>, <span class=filename>deadfs</span>, <span class=filename>devfs</span>…​ однако без подкаталога <span class=filename>linprocfs</span>, поскольку он не содержит файлов.</p></div></li><li><p>Извлечь каталог <span class=filename>miscfs</span> без подкаталогов:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co <span class=nt>-l</span> miscfs</code></pre></div></div><div class=paragraph><p>Теперь в каталоге <span class=filename>miscfs</span> будет только один подкаталог <span class=filename>CVS</span>.</p></div></li><li><p>Извлечь модуль <span class=filename>miscfs</span> из ветви 6.X:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co <span class=nt>-rRELENG_6</span> miscfs</code></pre></div></div><div class=paragraph><p>Теперь вы можете изменить исходные тексты и произвести коммит в эту ветвь.</p></div></li><li><p>Извлечь модуль <span class=filename>miscfs</span> по состоянию на момент выхода 6.0-RELEASE:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co <span class=nt>-rRELENG_6_0_0_RELEASE</span> miscfs</code></pre></div></div><div class=paragraph><p>В этом случае вы не сможете внести изменения в репозиторий, поскольку <code>RELENG_6_0_0_RELEASE</code> описывает момент времени, а не ветвь разработки.</p></div></li><li><p>Извлечь модуль <span class=filename>miscfs</span> по состоянию на 15 января 2000 г:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co <span class=nt>-D</span><span class=s1>&#39;01/15/2000&#39;</span> miscfs</code></pre></div></div><div class=paragraph><p>Как и в предыдущем случае, изменения не могут быть записаны.</p></div></li><li><p>Извлечь модуль <span class=filename>miscfs</span>, каким он был неделю назад:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co <span class=nt>-D</span><span class=s1>&#39;last week&#39;</span> miscfs</code></pre></div></div><div class=paragraph><p>И вновь, изменения не могут быть записаны.</p></div><div class=paragraph><p>Обратите внимание, что мета-данные хранятся в подкаталогах <span class=filename>CVS</span>.</p></div><div class=paragraph><p>Аргументы опций <code>-D</code> and <code>-r</code> сохраняются (являются "клейкими", sticky), например, при последующем использовании команды <code>cvs update</code>.</p></div></li></ul></div></li><li><p>Проверка состояния извлеченных файлов: команда <code>status</code>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs status shazam</code></pre></div></div><div class=paragraph><p>Эта команда покажет статус файла <span class=filename>shazam</span> или каждого файла в директории <span class=filename>shazam</span>. Для каждого из файлов статус может быть одним из:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Up-to-date</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл соответствует репозиторию и не модифицировался</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Needs Patch</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл не изменялся, но репозиторий содержит обновленную версию</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Locally Modified</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл соответствует репозиторию, но был изменен локально</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Needs Merge</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл изменен локально; вместе с тем, файл изменен и в репозитории</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>File had conflicts on merge</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>После последнего обновления возникли конфликты, и они все еще не устранены</p></td></tr></tbody></table><div class=paragraph><p>Кроме того, будут показаны локальная версия и дата модификации, версия и дата последней из доступных (если вы применяли "клейкие" дату, тег или ветвь, последняя доступная версия может отличаться от вашей), а также клейкие теги, временные метки и опции.</p></div></li><li><p>Обновление извлеченного модуля: команда <code>update</code>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs update shazam</code></pre></div></div><div class=paragraph><p>Эта команда обновит состояние файла <span class=filename>shazam</span> или файлов в каталоге <span class=filename>shazam</span> до наиболее свежих версий выбранной вами при извлечении ветви. Если выбирался "момент времени", не произойдет ничего, если только за истекшее время в репозитории не был перемещен тег или не произошло чего-нибудь еще непредвиденного.</p></div><div class=paragraph><p>Полезные опции в дополнение к уже описанным для команды <code>checkout</code>:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-D</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Извлечь вновь появившиеся или пропущенные ранее подкаталоги</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-a</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Обновиться до текущего состояния головной ветви</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-j<em>rev</em></code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>магическая опция (см. ниже)</p></td></tr></tbody></table><div class=paragraph><p>Если вы извлекали модуль с опциями <code>-r</code> или <code>-D</code>, выполнение команды <code>cvs update</code> с другими параметрами <code>-r</code> или <code>-D</code> или с опцией <code>-a</code> приведет к выбору новой ветви, ревизии или даты. Использование опции <code>-a</code> удаляет использованные ранее клейкие свойства; опции <code>-r</code> и <code>-D</code>, наоборот, фиксируют их.</p></div><div class=paragraph><p>Теоретически использование <code>HEAD</code> в качестве аргумента опции <code>-r</code> должно дать тот же результат, что и указание опции <code>-a</code>, однако это верно лишь в теории.</p></div><div class=paragraph><p>Опция <code>-D</code> полезна, если:</p></div><div class=ulist><ul><li><p>после извлечения вами модуля кем-либо еще в него были добавлены дополнительные каталоги;</p></li><li><p>вы извлекали верхний уровень модуля при помощи опции <code>-l</code>, а в дальнейшем решили извлечь и подкаталоги;</p></li><li><p>вы удалили какие-либо подкаталоги и теперь хотите вновь извлечь их.</p></li></ul></div><div class=paragraph><p><em>Обращайте внимание на вывод команды <code>cvs update</code>.</em> Действие, произведенное с файлом, обозначается буквой перед его именем:</p></div><div class=paragraph><p>+</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>U</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл был успешно обновлен.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>P</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл был успешно обновлен (произведен успешный патч из удаленного репозитория).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>M</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл был изменен, и при этом обновлен успешно.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>C</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Файл был изменен, и при объединении изменений возникли конфликты.</p></td></tr></tbody></table><div class=paragraph><p>+
Объединение (merging) производится, если вы выгрузили рабочую копию какого-то модуля, изменили его, затем кто-либо еще произвел коммит собственных изменений, и, наконец, вы выполняете команду <code>cvs update</code>. CVS знает, что производились локальные изменения, и пытается объединить ваши изменения с теми, что произошли в репозитории (от состоянии версии, которую вы выгружали, до версии, до которой вы пытаетесь обновиться). Если изменения происходили с различными частями файла, объединение почти всегда произойдет успешно (хотя результат при этом может не быть синтаксически или семантически корректным).</p></div><div class=paragraph><p>+
CVS выводит букву <code>M</code> перед именем всех локально измененных файлов, даже если у них нет новых версий в репозитории, так что команда <code>cvs update</code> удобна для быстрого получения списка файлов, которые вы изменяли.</p></div><div class=paragraph><p>+
Если в результате вы видите букву <code>C</code>, ваши изменения конфликтуют с изменениями, внесенными в репозиторий (изменения были в одних и тех же или рядом расположенных строках, либо вы изменили файл настолько, что при сравнении <code>cvs</code> не смогла удержать контекст и приложить изменения из репозитория). Вам необходимо устранить конфликты, вручную редактируя файл. Конфликтующие фрагменты помечаются строками из знаков <code>&lt;</code>, <code>=</code> и <code>></code>. В начале каждого из конфликтов присутствует строка из семи знаков <code>&lt;</code> и имени файла, затем идет фрагмент, содержащий внесенные вами изменения, разделитель из семи знаков <code>=</code>, соответствующий фрагмент из версии файла, содержащейся в репозитории, и, наконец, строка из семи знаков <code>></code> совместно с номером версии, до которой вы обновляли файл.</p></div><div class=paragraph><p>+
Опция <code>-J</code> содержит некоторое количество черной магии. При ее наличии локальный файл обновляется до указанной версии так же, как и при использовании опции <code>-r</code>, но отслеживаемые номер версии или ветвь не изменяются. Эта опция умеет смысл лишь при парном использовании: при этом делается попытка применить изменения между двумя указанными версиями к локальной копии файла.</p></div><div class=paragraph><p>+
К примеру, вы внесли изменения и произвели коммит в файл <span class=filename>shazam/shazam.c</span> в FreeBSD-CURRENT, а позднее хотите перенести обновления в FreeBSD-STABLE (Merge-From-Current, MFC). Версия, которая требует переноса - 1.15:</p></div><div class=ulist><ul><li><p>Извлеките текущую версию модуля <span class=filename>shazam</span> для ветви FreeBSD-STABLE:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs co <span class=nt>-rRELENG_6</span> shazam</code></pre></div></div></li><li><p>Приложите изменения между версиями 1.14 и 1.15:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs update <span class=nt>-j1</span>.14 <span class=nt>-j1</span>.15 shazam/shazam.c</code></pre></div></div><div class=paragraph><p>Почти наверняка вы получите конфликт в строках, содержащих идентификатор файла (<code>$Id: article.xml,v 1.19 2007-05-09 06:08:50 bvs Exp $</code> или, в случае FreeBSD, <code>$FreeBSD: head/ru_RU.KOI8-R/articles/committers-guide/article.xml 45050 2014-06-13 14:53:24Z taras $</code>). Вам потребуется отредактировать файл для устранения конфликта (в данном случае достаточно убрать строки-разделители и вторую строку <code>$Id: article.xml,v 1.19 2007-05-09 06:08:50 bvs Exp $</code>, оставив лишь строку с <code>$Id: article.xml,v 1.19 2007-05-09 06:08:50 bvs Exp $</code> для FreeBSD-STABLE).</p></div></li></ul></div></li><li><p>Просмотр изменение между локальной версией и версией из репозитория: команда <code>diff</code>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs diff shazam</code></pre></div></div><div class=paragraph><p>Эта команда покажет все отличия локального состояния файла (или файлов модуля) <span class=filename>shazam</span> от состояния, сохраненного в репозитории.</p></div><table class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 3. Полезные опции команды <code>cvs diff</code></caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-u</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Использовать унифицированный (unified) формат.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-c</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Использовать контекстный (context) формат.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-N</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Показывать отсутствующие или созданные файлы.</p></td></tr></tbody></table><div class=paragraph><p>Всегда имеет смысл пользоваться опцией <code>-u</code>, поскольку унифицированный формат гораздо удобнее и лучше читаем, чем почти все другие (в некоторых случаях контекстный формат, генерируемый опцией <code>-c</code> может быть несколько лучше, но он гораздо более громоздок). Унифицированный формат различий состоит из серии фрагментов, каждый из которых начинается со строки, состоящей из двух символов <code>@</code> и номеров строк, описывающих положение изменившегося участка. Затем следует группа строк: те, что начинаются с пробела, описывают контекст, начинающиеся с символа <code>-</code> определяют удаленные строки, наконец, начинающиеся с символа <code>+</code> - добавленные.</p></div><div class=paragraph><p>Вы можете сравнивать текущее состояние с версией, отличающейся от той, с которой вы извлекали файл, указав опцию <code>-r</code> или <code>-D</code> подобно командам <code>checkout</code> и <code>update</code>, или даже получить список изменений между любыми двумя версиями (вне зависимости от того, что лежит в вашей локальной копии), указав <em>две</em> версии при помощи опций <code>-r</code> или <code>-D</code>.</p></div></li><li><p>Просмотр журнала изменений: команда <code>log</code>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs log shazam</code></pre></div></div><div class=paragraph><p>Если <span class=filename>shazam</span> является обычным файлом, эта команда выдаст на экран <em>заголовок</em> с информацией о файле, в частности, его местоположении в репозитории, какая версия соответствует текущему состоянию (<code>HEAD</code>), в каких ветвях разработки файл присутствует, а также перечислит теги, которыми он помечен. Затем, для каждой версии файла выводится соответствующее ей журнальное сообщение, включающее дату, время и автора коммита, количество добавленных и удаленных строк и собственно журнального сообщения, написанного коммиттером.</p></div><div class=paragraph><p>Если <span class=filename>shazam</span> является каталогом, вышеописанная процедура выполняется для каждого файла в каталоге. Если при этом команде <code>log</code> не был указан флаг <code>-l</code>, процедура рекурсивно повторяется для всех подкаталогов.</p></div><div class=paragraph><p>Команда <code>log</code> используется для просмотра истории одного или нескольких файлов в том виде, как она сохранена в репозитории CVS. Используя опцию <code>-r<em>rev</em></code>, вы можете посмотреть журнальное сообщение к одной определенной версии:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs log <span class=nt>-r1</span>.2 shazam</code></pre></div></div><div class=paragraph><p>Эта команда покажет журнальное сообщение для версии <code>1.2</code> файла <span class=filename>shazam</span> (или для версий <code>1.2</code> каждого из файлов в каталоге <span class=filename>shazam</span>).</p></div></li><li><p>Кто что делал: команда <code>annotate</code>. Эта команда показывает перед каждой строкой указанного файла (файлов) имя пользователя, вносившего последние изменения в эту строку.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs annotate shazam</code></pre></div></div></li><li><p>Добавление новых файлов: команда <code>add</code>.</p><div class=paragraph><p>Создайте файл, выполните для него команду <code>cvs add</code>, затем произведите запись в репозиторий (коммит): <code>cvs commit</code>.</p></div><div class=paragraph><p>Точно так же, новые каталоги добавляются в репозиторий путем создания и последующего выполнения команды <code>cvs add</code>. Заметьте, что выполнять коммит после добавления каталога не надо.</p></div></li><li><p>Удаление устаревших файлов: команда <code>remove</code>.</p><div class=paragraph><p>Удалите файл, затем выполните команду <code>cvs rm</code> с его именем в качестве параметра, наконец, выполните для него <code>cvs commit</code>.</p></div></li><li><p>Внесение изменений в репозиторий: команда <code>commit</code> или <code>checkin</code>.</p><table class="tableblock frame-none grid-all stretch"><caption class=title>Таблица 4. Useful <code>cvs commit</code> options</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-F</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Форсировать внесение изменений для не модифицированного файла.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>-m<em>msg</em></code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Указать сообщение для журнала в командной строке (не запускать текстовый редактор).</p></td></tr></tbody></table><div class=paragraph><p>Опцию <code>-F</code> следует использовать, если вы поняли, что забыли указать какую-либо важную информацию в журнале изменений.</p></div><div class=paragraph><p>Хорошие журнальные сообщения очень важны. Они дают возможность другим узнать, зачем вы производили изменения, причем не только в момент их произведения, но и месяцы или годы спустя, когда кто-либо заинтересуется, почему выглядящий нелогично или неэффективно фрагмент кода попал в каши исходные тексты. Кроме того, это очень помогает в оценке того, нужно ли переносить соответствующий код в FreeBSD-STABLE (MFC).</p></div><div class=paragraph><p>Сообщения должны быть ясными, краткими, четкими, и представлять из себя разумную аннотацию, какие изменения были произведены и почему.</p></div><div class=paragraph><p>Сообщения должны достаточно ясно показывать сторонним разработчикам, насколько их касаются изменения и нужно ли им исследовать изменения подробно.</p></div><div class=paragraph><p>Избегайте внесения нескольких не связанных друг с другом изменений за один раз. Это затрудняет объединение изменений, а также, при обнаружении ошибок, усложняет поиск ответственного за ошибки участка.</p></div><div class=paragraph><p>Избегайте смешивания в одном коммите изменений функциональности со стилистическими правками или исправлениями в пробелах. Это усложняет объединение, и, кроме того, затрудняет понимание того, какие именно функциональные изменения были внесены. В случае коммита в файлы документации, это затруднит работу групп поддержки перевода, поскольку становится сложнее отделить изменения, требующие перевода.</p></div><div class=paragraph><p>Избегайте коммита большой группы файлов за один раз с одним общим и невнятным сообщением. Напротив, вносите изменения в отдельные файлы (или небольшие группы связанных файлов) с адекватными сообщениями для журналирования.</p></div><div class=paragraph><p>Перед коммитом, <em>обязательно</em>:</p></div><div class=ulist><ul><li><p>проверьте, что вы будете выполнять коммит в правильную ветвь, посредством команды <code>cvs status</code>.</p></li><li><p>проверьте ваши изменения при помощи команды <code>cvs diff</code></p></li></ul></div><div class=paragraph><p>Кроме того, ВСЕГДА указывайте, в какие именно файлы вы вносите изменения, так чтобы не включить в этот список лишних файлов. Команда <code>cvs commit</code> без аргументов включит все измененные файлы в текущем каталоге и всех подкаталогах.</p></div></li></ol></div><div class=paragraph><p>Еще несколько полезных советов:</p></div><div class="olist arabic"><ol class=arabic><li><p>Часто используемые опции можно занести в файл <span class=filename>~/.cvsrc</span>, например:</p><div class="literalblock programlisting"><div class=content><pre>cvs -z3
diff -Nu
update -Pd
checkout -P</pre></div></div><div class=paragraph><p>Для данного случая:</p></div><div class=ulist><ul><li><p>всегда использовать компрессию уровня 3 для связи с удаленным сервером CVS. В случае медленного соединения это избавит вас от лишней головной боли.</p></li><li><p>всегда использовать опции <code>-N</code> (показывать добавленные или удаленные файлы) и <code>-u</code> (унифицированный формат) для <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a>.</p></li><li><p>всегда использовать опции <code>-P</code> (удалять пустые каталоги) и <code>-D</code> (добавлять новые каталоги) при обновлении.</p></li><li><p>всегда использовать опцию <code>-P</code> (удалять пустые каталоги) при извлечении файлов и модулей.</p></li></ul></div></li><li><p>Пользуйтесь скриптом Эйвинда Эклунда (Eivind Eklund) <code>cdiff</code> для просмотра изменению унифицированного формата. Он является оберткой для <a href="https://man.freebsd.org/cgi/man.cgi?query=less&amp;sektion=1&amp;format=html">less(1)</a>, добавляющей цветовые коды ANSI для выделения заголовком, добавленных и удаленных строк; прочие строки не модифицируются. Помимо этого, скрипт корректно разворачивает табуляции (которые часто выглядят неправильно в изменениях из-за дополнительного символа в начале строки).</p><div class=paragraph><p><a class=package href=https://cgit.freebsd.org/ports/tree/textproc/cdiff/>textproc/cdiff</a></p></div><div class=paragraph><p>Просто используйте его вместо <a href="https://man.freebsd.org/cgi/man.cgi?query=more&amp;sektion=1&amp;format=html">more(1)</a> или <a href="https://man.freebsd.org/cgi/man.cgi?query=less&amp;sektion=1&amp;format=html">less(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cvs diff <span class=nt>-Nu</span> shazam | cdiff</code></pre></div></div><div class=paragraph><p>Помимо этого, некоторые текстовые редакторы, такие как <a href="https://man.freebsd.org/cgi/man.cgi?query=vim&amp;sektion=1&amp;format=html">vim(1)</a> (<a class=package href=https://cgit.freebsd.org/ports/tree/editors/vim/>editors/vim</a>) поддерживают цветовую синтаксическую разметку многих типов файлов, в том числе файлов изменений и журналов CVS/RCS.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>echo</span> <span class=s2>&#34;syn on&#34;</span> <span class=o>&gt;&gt;</span> ~/.vimrc
% cvs diff <span class=nt>-Nu</span> shazam | vim -
% cvs log shazam | vim -</code></pre></div></div></li><li><p>CVS - старая, загадочная и порой слабо предсказуемая в своем поведении программа. Ни один человек не способен удержать в голове все тонкости ее работы, так что не бойтесь спрашивать совета у Искусственного Интеллекта (а именно <code>Администраторы Главного CVS Репозитория &lt;<a href=mailto:cvsadm@FreeBSD.org>cvsadm@FreeBSD.org</a>></code>).</p></li><li><p>Не оставляйте компьютер в процессе работы команды <code>cvs commit</code> (в редакторе при написании журнального сообщения) слишком надолго (более чем на 2-3 минуты). Эта команда блокирует каталог репозитория, в котором она запущена, и не позволяет другим разработчикам изменять его содержимое. Если вам нужно написать длинное журнальное сообщение, подготовьте его заранее и вставьте в редакторе во время выполнения команды <code>cvs commit</code>, либо запишите его в файл и используйте опцию CVS <code>-F</code>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% vi logmsg
% cvs ci <span class=nt>-F</span> logmsg shazam</code></pre></div></div><div class=paragraph><p>Это самый быстрый способ передать журнальное сообщение CVS; однако, вы должны быть внимательны при редактировании файла <span class=filename>logmsg</span>, поскольку при выполнении коммита у вас не будет шансов его поправить.</p></div></li><li><p>Вы можете существенно ускорить скорость работы CVS с центральным репозиторием, используя постоянное соединение с репозиторием. Для этого добавьте в файл <span class=filename>~/.ssh/config</span> строки</p><div class="literalblock programlisting"><div class=content><pre>Host ncvs.FreeBSD.org
      ControlPath /home/user/.ssh/cvs.cpath
Host dcvs.FreeBSD.org
      ControlPath /home/user/.ssh/cvs.cpath
Host projcvs.FreeBSD.org
      ControlPath /home/user/.ssh/cvs.cpath
Host pcvs.FreeBSD.org
      ControlPath /home/user/.ssh/cvs.cpath</pre></div></div><div class=paragraph><p>Затем откройте постоянное соединение с машиной repoman:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-fNM</span> ncvs.FreeBSD.org</code></pre></div></div><div class=paragraph><p>Теперь команды CVS должны выполняться быстрее, поскольку используют существующее соединение с репозиторием. Учтите, что регистр в именах хостов имеет значение.</p></div></li></ol></div></div></div><div class=sect1><h2 id=conventions>4. Соглашения и традиции<a class=anchor href=#conventions></a></h2><div class=sectionbody><div class=paragraph><p>Став коммиттером, вы должны прежде всего произвести некоторые стандартные действия.</p></div><div class=ulist><ul><li><p>Добавьте себя в список "SGML сущностей" авторов в файл <span class=filename>doc/en_US.ISO8859-1/shared/xml/authors.ent</span>; это изменение должно быть сделано прежде прочих, поскольку в противном случае следующий ваш коммит неизбежно разрушит процесс построения дерева doc/.</p><div class=paragraph><p>Это довольно простая задача, но при этом она является неплохим первым тестом ваших навыков работы с CVS.</p></div></li><li><p>Также добавьте свою "SGML сущность" в <span class=filename>www/en/developers.xml</span>.</p></li><li><p>Добавьте себя в раздел "Разработчики" статьи <a href=https://docs.freebsd.org/en/articles/contributors/>Участники проекта FreeBSD</a> (<span class=filename>doc/en_US.ISO8859-1/articles/contributors/contrib.committers.xml</span>) и удалите свою запись из раздела "Прочие участники" (<span class=filename>doc/en_US.ISO8859-1/articles/contributors/contrib.additional.xml</span>).</p></li><li><p>Добавьте новость о новом коммиттере в файл <span class=filename>www/shared/xml/news.xml</span>. Используйте существующие записи вида "Новый коммиттер" как шаблон.</p></li><li><p>Вам нужно добавить ваш PGP или GnuPG ключ в каталог <span class=filename>doc/shared/pgpkeys</span> (а если у вас нет ключа, вам нужно его создать). Не забудьте изменить и произвести коммит в файл <span class=filename>doc/shared/pgpkeys/pgpkeys.ent</span>.</p><div class=paragraph><p><code>Dag-Erling Smørgrav &lt;<a href=mailto:des@FreeBSD.org>des@FreeBSD.org</a>></code> написал скрипт для упрощения этого процесса. Дополнительную информацию можно прочесть в файле <a href=http://cvsweb.FreeBSD.org/doc/shared/pgpkeys/README>README</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Очень важно, чтобы в Руководстве пользователя был записан актуальный PGP/GnuPG ключ, поскольку он может потребоваться для идентификации коммиттера (например, его будет проверять группа <code>Администраторы FreeBSD.org &lt;<a href=mailto:admins@FreeBSD.org>admins@FreeBSD.org</a>></code> для аварийного восстановления учетной записи). Полный набор актуальных ключей пользователей домена <code>FreeBSD.org</code> можно найти по адресу <a href=https://www.FreeBSD.org/doc/pgpkeyring.txt>http://www.FreeBSD.org/doc/pgpkeyring.txt</a>.</p></div></td></tr></tbody></table></div></li><li><p>Добавьте себя в файл <span class=filename>src/shared/misc/committers-репозиторий.dot</span>, где репозиторием будет являться либо doc, либо ports, либо src в зависимости от полученных вами коммиттерских привилегий.</p></li><li><p>Некоторые коммиттеры добавляют информацию о своем местоположении в файл <span class=filename>ports/astro/xearth/files/freebsd.committers.markers</span>.</p></li><li><p>Некоторые добавляют данные о дне своего рождения в файл <span class=filename>src/usr.bin/calendar/calendars/calendar.freebsd</span>.</p></li><li><p>Представьтесь другим коммиттерам, иначе никто не будет знать, кто вы и чем занимаетесь. От вас не требуется писать подробное резюме или биографию: будут достаточны один-два абзаца о себе и областях FreeBSD, в которых вы планируете работать. Пошлите это письмо в Список рассылки разработчиков FreeBSD - и все!</p></li><li><p>Зайдите на машину <code>hub.FreeBSD.org</code> и создайте файл <span class=filename>/var/forward/user</span> (замените <em>user</em> на ваше имя пользователя). Этот файл должен содержать адрес электронной почты, на который будет переправляться вся почта на адрес <em>yourusername</em>@FreeBSD.org, в том числе сообщения о коммитах и другая почта на адреса Список рассылки коммиттеров FreeBSD и Список рассылки разработчиков FreeBSD. Слишком большие почтовые ящики на машине <code>hub</code> могут быть "нечаянно" удалены или обрезаны без предупреждения, так что, чтобы не потерять почту, регулярно читайте ее либо перенаправьте куда-нибудь еще.</p><div class=paragraph><p>Из-за ощутимой загрузки, возникающей на серверах, обрабатывающих списки рассылки, из-за большого количества незапрошенной почты (спама), сервер, принимающий почту для домена FreeBSD.org, производит некоторые основные проверки и на основании их отвергает некоторые письма. На настоящий момент единственным проверяемым параметром является корректность информации DNS для хоста, доставляющего почту, но в будущем список может вырасти. Эти проверки временами обвиняют в том, что они отвергают правильную почту. Если вы хотите отключить проверки для своего адреса, создайте файл <span class=filename>~/.spam_lover</span> в своей домашней директории на машине <code>freefall.FreeBSD.org</code>.</p></div></li><li><p>Если вы были подписаны на <a href=https://lists.FreeBSD.org/subscription/cvs-all>Список рассылки сообщений об изменениях в главном дереве исходных текстов FreeBSD</a>, вам, скорее всего, следует отписаться от него, чтобы не получать дубликатов каждого сообщения о коммитах.</p></li></ul></div><div class=paragraph><p>Все новые коммиттеры первоначально работают под руководством ментора. Ваш ментор отвечает за обучение вас правилам и соглашениям, принятым в проекте, и помогает вам сделать первые шаги в среде коммиттеров. Он(а) также персонально отвечает за ваши действия в этот начальный период. До тех пор, пока ваш ментор не решит (и не анонсирует это посредством форсированного коммита файла <span class=filename>access</span>), что вы достаточно освоились и готовы работать самостоятельно, перед любым коммитом вы должны получить одобрение (approval) ментора и указать это в журнальном сообщении коммита строкой <code>Approved by:</code>.</p></div><div class=paragraph><p>Все коммиты в дерево <span class=filename>src</span> сначала должны производиться в ветвь FreeBSD-CURRENT и лишь затем интегрироваться в FreeBSD-STABLE. Никакие серьезные изменения, новые возможности или рискованные модификации не должны производиться напрямую в ветви FreeBSD-STABLE.</p></div></div></div><div class=sect1><h2 id=pref-license>5. Предпочтительная лицензия для новых файлов<a class=anchor href=#pref-license></a></h2><div class=sectionbody><div class=paragraph><p>В настоящее время Проект FreeBSD считает предпочтительной формой лицензии на исходные тексты следующий текст:</p></div><div class="literalblock programlisting"><div class=content><pre>/*-
* Copyright (c) [year] [your name]
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions
* are met:
* 1. Redistributions of source code must retain the above copyright
*    notice, this list of conditions and the following disclaimer.
* 2. Redistributions in binary form must reproduce the above copyright
*    notice, this list of conditions and the following disclaimer in the
*    documentation and/or other materials provided with the distribution.
*
* THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&#39;&#39; AND
* ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
* ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
* FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
* DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
* OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
* LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
* OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
* SUCH DAMAGE.
*
* [id for your version control system, if any]
*/</pre></div></div><div class=paragraph><p>Проект FreeBSD крайне не рекомендует так называемый "третий пункт", или "пункт о рекламе" в лицензии на новый исходный код. В связи с большим количеством участников проекта FreeBSD, выполнение этого пункта большинством коммерческих производителей все более затруднительно. Если ваш код в дереве исходников содержит "пункт о рекламе", рассмотрите возможность его удаления. На самом деле, рассмотрите возможность перехода на приведенную лицензию.</p></div><div class=paragraph><p>Проект FreeBSD не рекомендует использование полностью новых лицензий или вариаций стандартных лицензий. Новые лицензии перед использованием в репозитории проекта требуют утверждения группой <a href=mailto:core@FreeBSD.org>core@FreeBSD.org</a>. Большое число различных лицензий затрудняет использование кода, в основном из-за ненамеренных неверных выводов из плохо сформулированных формулировок лицензии.</p></div><div class=paragraph><p>Политика проекта требует, чтобы код под НЕ-BSD лицензиями располaгался только в определённых местах репозитория, а в некоторых случаях компиляция должна быть условной по умолчанию или вообще отключена. К примеру, ядро GENERIC должно состоять только из лицензий идентичных или в значительной степени схожих с BSD лицензией. Программное обеспечение под лицензиями GPL, APSL, CDDL и др. не должно включаться в состав GENERIC.</p></div><div class=paragraph><p>Разработчикам напоминается, что в open source правильное понимание "open" также важно, как правильное понимание "source", ибо некорректное использование интеллектуальной собственности имеет серьезные последствия. Какие-либо вопросы или беспокойства на этот счёт должны быть немедленно вынесены на обсуждение главной команде разработчиков (core team).</p></div></div></div><div class=sect1><h2 id=developer.relations>6. Взаимодействие между разработчиками<a class=anchor href=#developer.relations></a></h2><div class=sectionbody><div class=paragraph><p>Если вы работаете над собственным исходным кодом, либо в области, в которой вы уже определены как ответственная персона, вам, скорее всего, не потребуется согласовывать коммит с кем-либо еще из разработчиков. Те же правила действуют, если вы нашли ошибку в той части системы, которой явно давно никто не занимается (к нашему стыду, существует несколько таких областей). Если же вы собираетесь модифицировать что-либо активно поддерживаемое (по-хорошему, узнать это можно только исследуя архивы списка рассылки <code>cvs-committers</code>), стоит послать предполагаемый патч ответственному за этот участок кода, как вы бы поступали, пока не были коммиттером. В случае портов нужно обращаться по адресу, указанному в строке <code>MAINTAINER</code> в файле <span class=filename>Makefile</span>. Для других частей репозитория, в случае если вам не очевидно, кто ведет данный участок кода, может помочь исследование вывода команды <code>cvs log</code>. <code>Bill Fenner &lt;<a href=mailto:fenner@FreeBSD.org>fenner@FreeBSD.org</a>></code> написал отличный скрипт для определения разработчиков, наиболее активно производивших коммиты, выводящий для каждого из указанных файлов имя пользователя вместе с количеством произведенных им коммитов в данный файл. Скрипт можно найти на машине <code>freefall</code> в файле <span class=filename>~fenner/bin/whodid</span>. Если найденная вами персона не отвечает на ваши вопросы или иным образом демонстрирует отсутствие интереса к проблеме, смело производите коммит самостоятельно.</p></div><div class=paragraph><p>Если вы по каким-либо причинам не уверены в своих изменениях, предложите их для оценки в списке рассылки <code>-hackers</code> перед коммитом. Будет лучше, если вас обругают там и тогда, чем когда предлагаемое изменение уже будет частью репозитория. Если случилось так, что ваш коммит встретил сопротивление, возможно, стоит его откатить (back out) до тех пор, пока не будет достигнут консенсус. Помните - с помощью CVS всегда можно вернуться к предыдущему состоянию.</p></div><div class=paragraph><p>Не принимайте в штыки мнения других разработчиков, с которыми вы не согласны. Если они предлагают иное решение проблемы чем вы, или даже иначе воспринимают проблему, это не значит, что они глупы, имеют сомнительное происхождение, хотят разрушить вашу работу, очернить ваше доброе имя, или развалить проект FreeBSD. Просто они смотрят на мир под иным углом. Различные взгляды - благо.</p></div><div class=paragraph><p>Будьте честны в спорах. Оценивайте свою позицию по заслугам, честно относитесь к ее слабым сторонам и будьте готовы принять другие точки зрения и пути решения. Будьте открыты.</p></div><div class=paragraph><p>Будьте терпимы, если вас поправляют. Все мы совершаем ошибки. Если вы ошиблись, извинитесь. Не обвиняйте ни себя, ни, тем более, других в ошибке. Не теряйте времени на смущение или упреки, просто исправьте ошибку и двигайтесь дальше.</p></div><div class=paragraph><p>Спрашивайте и просите о помощи. Предлагайте ваши изменения для рассмотрения коллегам и рассматривайте их изменения. Одним из преимуществ программного обеспечения с открытыми исходными текстами является открытость разработки. Если никто не будет исследовать чужой код, это преимущество исчезнет.</p></div></div></div><div class=sect1><h2 id=gnats>7. GNATS<a class=anchor href=#gnats></a></h2><div class=sectionbody><div class=paragraph><p>Для отслеживания ошибок и запросов на изменения проект FreeBSD использует GNATS. Если вы исправили ошибку или внесли изменения, описанные в одном из сообщений об ошибках (PR), не забудьте закрыть это сообщение, используя команду <code>edit-pr <em>pr-number</em></code> на машине <code>freefall</code>. Хорошо будет, если вы потратите немного времени на поиск и закрытие других PR по этой теме. Вы и сами можете пользоваться <a href="https://man.freebsd.org/cgi/man.cgi?query=send-pr&amp;sektion=1&amp;format=html">send-pr(1)</a> для предложения изменений, которые, по вашему мнению, могут потребовать более подробного обсуждения с коллегами.</p></div><div class=paragraph><p>Более подробно о GNATS можно прочитать по адресам:</p></div><div class=ulist><ul><li><p><a href=http://www.cs.utah.edu/csinfo/texinfo/gnats/gnats.html>http://www.cs.utah.edu/csinfo/texinfo/gnats/gnats.html</a></p></li><li><p><a href=https://www.FreeBSD.org/support/>http://www.FreeBSD.org/support/</a></p></li><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=send-pr&amp;sektion=1&amp;format=html">send-pr(1)</a></p></li></ul></div><div class=paragraph><p>Вы можете пользоваться локальной копией GNATS, поддерживая ее синхронность при помощи CVSup. При этом вы можете использовать команды GNATS локально, а также пользоваться другими интерфейсами, такими как <code>tkgnats</code>, что позволит вам работать с базой сообщений об ошибках без соединения с Интернет.</p></div><div class="olist arabic procedure"><div class=title>Procedure: Использование локальной копии GNATS</div><ol class=arabic><li><p>Если вы еще не поддерживаете зеркало дерева GNATS, добавьте в ваш <span class=filename>supfile</span> строку</p><div class="literalblock programlisting"><div class=content><pre>gnats release=current prefix=/usr</pre></div></div><div class=paragraph><p>Учтите, что эта строка должна предшествовать любым строкам, содержащим параметр "tag=", поскольку дерево GNATS не находится под управлением CVS и не имеет символьных меток.</p></div><div class=paragraph><p>После запуска cvsup в каталоге <span class=filename>/usr/gnats</span> будет создана копия дерева GNATS FreeBSD. Вы можете использовать файл <em>refuse</em> для копирования отдельных категорий. Например, если вас интересуют только сообщения категории <code>docs</code>, добавьте в файл <span class=filename>/usr/local/etc/cvsup/sup/refuse</span> <sup class=footnote>[<a id=_footnoteref_1 class=footnote href=#_footnotedef_1 title="View footnote.">1</a>]</sup> строку</p></div><div class="literalblock programlisting"><div class=content><pre>gnats/[a-ce-z]*</pre></div></div><div class=paragraph><p>Прочие примеры в этом разделе подразумевают, что вы синхронизируете только категорию <code>docs</code>.</p></div></li><li><p>Установите порт GNATS из <span class=filename>ports/databases/gnats</span>. После установки вы обнаружите различные служебные каталоги в дереве <span class=filename>$PREFIX/shared/gnats</span>.</p></li><li><p>Создайте символьные ссылки на синхронизированные каталоги GNATS в служебный каталог GNATS:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/local/shared/gnats/gnats-db</span>
<span class=c># ln -s /usr/gnats/docs</span></code></pre></div></div><div class=paragraph><p>Проделайте эту операцию для всех синхронизируемых категорий.</p></div></li><li><p>Обновите служебный файл GNATS <span class=filename>categories</span>, расположенный в каталоге <span class=filename>$PREFIX/shared/gnats/gnats-db/gnats-adm</span>:</p><div class="literalblock programlisting"><div class=content><pre># This category is mandatory
pending:Category for faulty PRs:gnats-admin:
#
# FreeBSD categories
#
docs:Documentation Bug:freebsd-doc:</pre></div></div></li><li><p>Запустите <span class=filename>$PREFIX/libexec/gnats/gen-index</span> для создания индекса. Вывод этой команды должен быть перенаправлен в файл <span class=filename>$PREFIX/shared/gnats/gnats-db/gnats-adm/index</span>. Эту операцию можно выполнять периодически при помощи <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> или запускать <a href="https://man.freebsd.org/cgi/man.cgi?query=cvsup&amp;sektion=1&amp;format=html">cvsup(1)</a> из скрипта, который затем сгенерирует новый индекс:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/libexec/gnats/gen-index \</span>
	<span class=o>&gt;</span> /usr/local/shared/gnats/gnats-db/gnats-adm/index</code></pre></div></div></li><li><p>Протестируйте созданную конфигурацию запросом к базе данных GNATS. Следующая команда выведет список открытых сообщений об ошибках в категории <code>docs</code>:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># query-pr -c docs -s open</span></code></pre></div></div><div class=paragraph><p>Другие интерфейсы, например, порт <a class=package href=https://cgit.freebsd.org/ports/tree/databases/tkgnats/>databases/tkgnats</a> также должны работать.</p></div></li><li><p>Выберите PR и закройте его.</p></li></ol></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Описанная процедура позволяет вам выбирать и просматривать сообщения об ошибках локально. Для редактирования или закрытия вам потребуется зайти на машину <code>freefall</code>.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=people>8. Кто есть кто<a class=anchor href=#people></a></h2><div class=sectionbody><div class=paragraph><p>Помимо мастеров репозитория, существует еще несколько участников и групп проекта FreeBSD, с которыми вам как коммиттеру может потребоваться общаться. Краткий и ни в коем случае не полный список приводится ниже.</p></div><div class=dlist><dl><dt class=hdlist1><code>John Baldwin &lt;<a href=mailto:jhb@FreeBSD.org>jhb@FreeBSD.org</a>></code></dt><dd><p>Джон возглавляет проект SMPng и отвечает за архитектуру, дизайн и реализацию перехода на многонитевое ядро. Джон также является редактором статьи "Архитектура SMPng". Если вы работаете с тонкими блокировками многопроцессорного ядра, координируйте свою работу с Джоном.</p></dd><dt class=hdlist1><code>Группа Менеджеров Дерева Документации &lt;<a href=mailto:doceng@FreeBSD.org>doceng@FreeBSD.org</a>></code></dt><dd><p>doceng - группа, отвечающая за инфраструктуру построения документации, прием новых коммиттеров документации и актуальность информации относительно CVS на веб-сайте и FTP-сайте FreeBSD. Эта группа не разбирает конфликты. Большая часть обсуждений, связанных с документацией, происходит в <a href=https://lists.FreeBSD.org/subscription/freebsd-doc>Список рассылки Проекта Документации FreeBSD</a>. Дополнительную информацию о деятельности группы можно найти в ее <a href=http://www.FreeBSD.org/internal/doceng/>собственном документе</a>. Коммиттеры, заинтересованные в обновлении документации, должны ознакомиться с <a href=https://docs.freebsd.org/en/books/fdp-primer/>Учебником по Проекту Документирования FreeBSD для новых участников</a>.</p></dd><dt class=hdlist1><code>Ruslan Ermilov &lt;<a href=mailto:ru@FreeBSD.org>ru@FreeBSD.org</a>></code></dt><dd><p>Руслан великолепно знает тонкости <a href="https://man.freebsd.org/cgi/man.cgi?query=mdoc&amp;sektion=7&amp;format=html">mdoc(7)</a>. Если вы пишете справочную страницу и нуждаетесь в совете по ее структуре или разметке, обратитесь к Руслану.</p></dd><dt class=hdlist1><code>Bruce Evans &lt;<a href=mailto:bde@FreeBSD.org>bde@FreeBSD.org</a>></code></dt><dd><p>Брюс занимается общим стилем кода проекта. Если ваш коммит мог бы быть лучше оформлен, Брюс укажет вам на это. Радуйтесь, что такой человек вообще есть. Брюс также является знатоком различных стандартов, применимых к FreeBSD.</p></dd><dt class=hdlist1><code>Murray Stokely &lt;<a href=mailto:murray@FreeBSD.org>murray@FreeBSD.org</a>></code></dt><dd><p>Таков состав группы <code>Группа Выпуска Релизов FreeBSD &lt;<a href=mailto:re@FreeBSD.org>re@FreeBSD.org</a>></code>. Эта группа отвечает за сроки и процесс выпуска релизов. В период заморозки кода, выпускающие инженеры принимают окончательные решения по поводу всех изменений системы в ветви, готовящейся к очередному релизу. Если вы хотите интегрировать какие-либо изменения из FreeBSD-CURRENT в FreeBSD-STABLE (какими бы они ни были в данный конкретный момент), вам предстоит общаться с этой группой.</p><div class=paragraph><p>Хироки, кроме того, ведет раздел документации к релизам (<span class=filename>src/release/doc/*</span>). Если ваши изменения стоят того, чтобы быть упомянутыми в информации о релизе, сообщите об этом Хироки. Еще лучше, если вы пошлете патч с предлагаемыми изменениями к документу.</p></div></dd><dt class=hdlist1><code>Colin Percival &lt;<a href=mailto:cperciva@FreeBSD.org>cperciva@FreeBSD.org</a>></code></dt><dd><p>Колин - <a href=https://www.FreeBSD.org/security/>FreeBSD Security Officer</a> и отвечает за деятельность группы <code>Группа Офицеров Безопасности &lt;<a href=mailto:security-officer@FreeBSD.org>security-officer@FreeBSD.org</a>></code>.</p></dd><dt class=hdlist1><code>Garrett Wollman &lt;<a href=mailto:wollman@FreeBSD.org>wollman@FreeBSD.org</a>></code></dt><dd><p>Если вам нужен совет по поводу темных мест сетевой части ядра, или вы не уверены в планируемом изменении сетевой подсистемы, мудрым решением будет обратиться к Гарретту. Помимо того, он хорошо разбирается в различных стандартах, применимых к FreeBSD.</p></dd><dt class=hdlist1>Список рассылки сообщений об изменениях в дереве исходных текстов FreeBSD</dt><dd><p>cvs-committers - адрес, используемый CVS для посылки сообщений о коммитах. Вы <em>никогда</em> не должны посылать письма напрямую на этот адрес; следует лишь отвечать на него, когда вам нужно послать короткие комментарии, непосредственно относящиеся к коммиту.</p></dd><dt class=hdlist1>Список рассылки разработчиков FreeBSD</dt><dd><p>Все коммиттеры подписаны на список рассылки -developers. Этот список создан для обсуждения вопросов, касающихся "сообщества" коммиттеров FreeBSD, таких как выборы Правления, анонсы и т.п.</p><div class=paragraph><p>Список рассылки разработчиков FreeBSD служит для только для использования FreeBSD коммиттерами. Коммиттеры должны иметь возможность публично обсуждать вещи, которые должны быть разрешены, перед тем, как они будут публично объявлены. Данные дискуссии не предназначены для широкой публики и могут нанести вред FreeBSD.</p></div><div class=paragraph><p>Все FreeBSD коммиттеры должны соблюдать авторские права оригинального автора или авторов писем из этого списка рассылки. Не публикуйте и не пересылайте сообщения из Список рассылки разработчиков FreeBSD вне подписчиков данного списка рассылки без согласия всех авторов.</p></div><div class=paragraph><p>Нарушители авторских прав будут удалены из списка подписчиков Список рассылки разработчиков FreeBSD, и будут приостановлены их коммиттерские привилегии. Повторяющиеся или вопиющие нарушения приведут к полному лишению коммиттерских прав.</p></div><div class=paragraph><p>Этот список <em>не</em> предназначен для обсуждения кода, и <em>не является</em> заменой списков <a href=https://lists.FreeBSD.org/subscription/freebsd-arch>Список рассылки, посвящённый архитектуре и внутреннему устройству FreeBSD</a>. На самом деле, такое его использование вредит проекту, поскольку открытые обсуждения вопросов, касающихся всего сообщества пользователей FreeBSD в закрытом списке недопустимы. И, наконец: <em>никогда, действительно никогда не пишите в Список рассылки разработчиков FreeBSD с копией в другой список рассылки FreeBSD</em>. Никогда не пишите в какой-либо другой список рассылки с копией в {developers-name:}. Подобные действия серьезно подрывают смысл существования данного списка рассылки.</p></div></dd></dl></div></div></div><div class=sect1><h2 id=ssh.guide>9. SSH: быстрый старт<a class=anchor href=#ssh.guide></a></h2><div class=sectionbody><div class="olist arabic procedure"><ol class=arabic><li><p>Если вы используете FreeBSD версии 4.0 или более позднюю, OpenSSH включен в базовую поставку системы. Для более ранних версий обновите и установите OpenSSH из порта <a class=package href=https://cgit.freebsd.org/ports/tree/security/openssh/>security/openssh</a>.</p></li><li><p>Для тех, кто не хочет набирать свой пароль каждый раз при использовании <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> и использует для авторизации ключи RSA или DSA, удобной будет утилита <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a>. Если вы собираетесь использовать ее, убедитесь, что она запущена раньше прочих приложений. Пользователи X Window, например, обычно запускают ее из файлов <span class=filename>.xsession</span> или <span class=filename>.xinitrc</span>. Подробнее смотрите в справочной странице <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a>.</p></li><li><p>Создайте пару ключей при помощи <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a>. Ключи появятся в каталоге <span class=filename>$HOME/.ssh/</span>.</p></li><li><p>Пошлите ваш публичный ключ (содержимое файла <span class=filename>$HOME/.ssh/id_dsa.pub</span> или <span class=filename>$HOME/.ssh/id_rsa.pub</span>) вашему будущему ментору, чтобы он мог быть помещен в файл <span class=filename>yourlogin</span> в каталоге <span class=filename>/c/ssh-keys/</span> на машине <code>freefall</code>.</p></li></ol></div><div class=paragraph><p>Теперь вы можете пользоваться утилитой <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> для авторизации один раз за сессию. Утилита запросит кодовую фразу для вашего секретного ключа и затем сохранит ее в агенте авторизации (<a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a>). Если вы хотите удалить сохраненный секретный ключ из агента, используйте команду <code>ssh-add -d</code>.</p></div><div class=paragraph><p>Для теста используйте команду типа <code>ssh freefall.FreeBSD.org ls /usr</code>.</p></div><div class=paragraph><p>За дополнительной информацией обращайтесь к <a class=package href=https://cgit.freebsd.org/ports/tree/security/openssh/>security/openssh</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> и <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a>.</p></div></div></div><div class=sect1><h2 id=rules>10. Большой Список Правил Коммиттера FreeBSD<a class=anchor href=#rules></a></h2><div class=sectionbody><div class="olist arabic"><ol class=arabic><li><p>Уважайте других коммиттеров.</p></li><li><p>Уважайте других участников проекта.</p></li><li><p>Обсудите любые значимые изменения <em>до</em> коммита.</p></li><li><p>Уважайте существующих мейнтейнеров (указанных в поле <code>MAINTAINER</code> файлов <span class=filename>Makefile</span> или в файле <span class=filename>MAINTAINER</span> в корневом каталоге репозитория).</p></li><li><p>Любое спорное изменение необходимо откатить (back out) в ожидании решения, если того требует мейнтейнер. Вопросы безопасности могут перекрывать мнение мейнтейнера, если так решит Security Officer.</p></li><li><p>Изменения вносятся в ветвь FreeBSD-CURRENT до FreeBSD-STABLE, за исключением случаев, прямо разрешенных выпускающими инженерами или неприменимости изменения к FreeBSD-CURRENT. Любое нетривиальное и не срочное изменение должно быть выдержано в FreeBSD-CURRENT в течение по крайней мере 3 дней перед переносом, чтобы его могли адекватно протестировать. Выпускающие инженеры обладают той же властью в ветви FreeBSD-STABLE, что и мейнтейнеры (см. правило 5).</p></li><li><p>Не пререкайтесь с другими коммиттерами публично: это дурно выглядит. Если вам необходимо с чем-либо "категорически не согласиться", делайте это личной почтой.</p></li><li><p>Соблюдайте все периоды заморозки кода (core freeze), а также своевременно читайте списки рассылки <code>committers</code> и <code>developers</code>, чтобы быть в курсе расписания таких периодов.</p></li><li><p>Если вы сомневаетесь в какой-либо процедуре, сначала спросите!</p></li><li><p>Тестируйте свои изменения перед коммитом.</p></li><li><p>Не производите коммит в деревья <span class=filename>src/contrib</span>, <span class=filename>src/crypto</span> и <span class=filename>src/sys/contrib</span> без <em>прямого</em> разрешения (approval) соответствующего мейнтейнера(ов).</p></li></ol></div><div class=paragraph><p>Невыполнение этих правил может служить основанием для приостановки или, в случае рецидивов, полного лишения коммиттерских прав. Члены Правления (Core) имеют право временно приостановить права коммиттера до момента, когда Правление в целом сможет решить вопрос. В "аварийном" случае (коммиттер разрушает репозиторий) такие права имеют также ответственные за репозиторий. Для приостановки прав коммиттера более чем на неделю или для полного лишения таковых прав требуется квалифицированное большинство (2/3) голосов Правления. Это правило существует не потому, что Правление состоит из злобных диктаторов, разбрасывающихся коммиттерами словно банками из-под колы, но ради предоставления проекту аварийного выключателя. Если кто-то выходит из-под контроля, важно иметь возможность справиться с ситуацией немедленно, а не быть втянутыми в дебаты. В любом случае, коммиттер, чьи права приостановлены, имеет право на "слушания Правления", на которых определяется срок приостановки или лишения коммиттерских прав. Коммиттер, права которого приостановлены может запросить пересмотр своего вопроса через 30 дней и каждые последующие 30 дней (если общий период приостановки превышает 30 дней). Коммиттер, полностью лишенный прав, может запросить пересмотр по истечении 6 месяцев. Правила пересмотра являются <em>полностью неформальными</em> и во всех случаях Правление имеет право отвергнуть запрос на пересмотр, если считает свое первоначальное решение верным.</p></div><div class=paragraph><p>Во всех прочих аспектах деятельности проекта, Правление является подмножеством коммиттеров и ограничено <em>теми же правилами</em>. Само по себе членство в Правлении не дает права преступать описанные правила. Правление обладает "особой силой" только в случае деятельность как целое, а не на индивидуальной основе. Члены Правления - в первую очередь коммиттеры.</p></div><div class=sect2><h3 id=_подробности>10.1. Подробности<a class=anchor href=#_подробности></a></h3><div id=respect class="olist arabic"><ol class=arabic><li><p>Уважайте других коммиттеров.</p><div class=paragraph><p>Вы должны относиться к другим коммиттерам как к коллегам по разработке (кем они и являются). Несмотря на возникающие временами попытки утверждать обратное, никто не стал коммиттером по своей или чьей-либо еще глупости, и мало что обижает сильнее, чем подобные обвинения от коллег. Вне зависимости от того, всегда ли мы чувствуем уважение друг к другу или нет (у каждого бывают не лучшие дни), мы всегда должны <em>выказывать</em> уважение к другим коммиттерам, как в публичных форумах, так и в личной почте.</p></div><div class=paragraph><p>Способность совместной работы в течение длительного времени - одно из главных достижений проекта, много более важное, чем любой набор изменений в коде, и никакие аргументы относительно кода не стоят потерь в возможности гармонично работать вместе.</p></div><div class=paragraph><p>Чтобы не противоречить этому правилу, никогда не посылайте писем, когда вы злы или каким-либо иным образом можете спровоцировать других на конфронтацию. Сначала успокойтесь, затем подумайте о том, как наиболее эффективно убедить оппонента(ов) в правильности ваших аргументов; не подливайте масла в огонь ради краткого мига злорадства, если ценой будет долгая ругань. Это не просто крайне "энергетически неэффективно": повторяющиеся прецеденты публичной агрессии, влияющие на нашу способность работать вместе, будут всерьез рассмотрены лидерами проекта, и могут привести к приостановке или потере прав коммиттера. Во внимание будут приниматься как публичные высказывания, так и личная переписка; это не означает, что Правление будет требовать раскрытия тайны переписки, однако, все предоставленные затронутыми коммиттерами материалы будут рассмотрены.</p></div><div class=paragraph><p>Описанные процедуры никого не могут порадовать даже в малом, однако "целостность проекта превыше всего". Никакой объем кода не стоит потери целостности.</p></div></li><li><p>Уважайте других участников проекта.</p><div class=paragraph><p>Вы не всегда были коммиттером. В свое время вы были простым сторонним участником (contributor). Помните об этом все время. Помните, сколь важно было добиться внимания и помощи. Не забывайте, насколько ваше участие было важным для вас. Помните свои ощущения. Не препятствуйте другим участникам и не унижайте их. Относитесь к ним с уважением. Возможно, они наши будущие коммиттеры, и они настолько же важны для проекта, как и коммиттеры. Их вклад в проект настолько же ценен и важен, как и ваш. В конце концов, вам пришлось приложить немало усилий для проекта, чтобы стать коммиттером. Всегда помните об этом.</p></div><div class=paragraph><p>Обдумайте первое правило <a href=#respect>Уважайте других коммиттеров</a> и применяйте его и к другим участникам проекта.</p></div></li><li><p>Обсудите любые значимые изменения <em>до</em> коммита.</p><div class=paragraph><p>Репозиторий CVS - не место для анонса изменений или обсуждения их. Все изменения должны обсуждаться в списках рассылки, и лишь после достижения консенсуса вносится в репозиторий. Это не означает, что вы должны спрашивать разрешения на исправление очевидной синтаксической ошибки в коде или опечатки в странице справочника. Вы должны ощутить, когда предполагаемое изменение требует предварительного обсуждения и обратной связи. Как правило, никто не станет возражать против обширных изменений, если результат очевидно лучше предыдущего состояния, однако никто не любит, когда эти изменения <em>неожиданны</em>. Лучший способ убедиться, что вы на правильном пути - дать ваш код просмотреть кому-либо еще из коммиттеров.</p></div><div class=paragraph><p>Если вы сомневаетесь, просите отзыва!</p></div></li><li><p>Уважайте существующих мейнтейнеров.</p><div class=paragraph><p>Многие части кода FreeBSD не являются чьей-либо "собственностью": ситуация, когда некто подпрыгнет и завопит, если вы внесете изменения в "его" код, редка; однако, всегда стоит предварительно проверить. Одним из используемых соглашений было добавление строки MAINTAINER в файл <span class=filename>Makefile</span> пакета или части дерева, которая активно поддерживается одним или несколькими коммиттерами; см. также соответствующий раздел <a href=https://docs.freebsd.org/ru/books/developers-handbook/#policies>Source Tree Guidelines and Policies</a>. В случае, если какой-то участок системы имеет несколько мейнтейнеров, изменение его одним из них должно быть одобрено по крайней мере одним из других. В случаях, когда "принадлежность" кода неясна, вы можете взглянуть на историю коммитов, чтобы понять, кто наиболее активно либо в последнее время работал в этой области.</p></div><div class=paragraph><p>Отдельные области FreeBSD попадают под контроль коммиттеров, занимающихся поддержкой целых категорий на пути эволюции FreeBSD, таких как локализация или сетевая подсистема. Для дополнительной информации смотрите <a href=https://docs.freebsd.org/en/articles/contributors/#staff-who>http://www.FreeBSD.org/doc/en_US.ISO8859-1/articles/contributors/staff-who</a></p></div></li><li><p>Любое спорное изменение необходимо откатить в ожидании решения, если того требует мейнтейнер. Вопросы безопасности могут перекрывать мнение мейнтейнера, если так решит Security Officer.</p><div class=paragraph><p>Это может быть нелегко, особенно в период конфликта (когда каждый участник уверен, что прав именно он). К счастью, CVS дает возможность, вместо того чтобы вести бушующую перебранку, просто откатить внесенные изменения, успокоиться всем участникам конфликта, а затем попробовать найти взаимоприемлемый путь. Если в конце концов окажется, что изменение стоит того, оно может быть легко применено вновь. В противном случае, пользователям не придется жить с неправильным состоянием дерева исходных текстов, пока стороны заняты выяснением отношений. Запросы на откаты возникают <em>крайне</em> редко, поскольку обсуждение обычно выявляет неверные или спорные моменты до коммита; однако, если такой запрос все же возник, он должен быть безусловно удовлетворен, чтобы мы могли спокойно выяснить, было изменение неверным или нет.</p></div></li><li><p>Изменения вносятся в ветвь FreeBSD-CURRENT до FreeBSD-STABLE, за исключением случаев, прямо разрешенных выпускающими инженерами или неприменимости изменения к FreeBSD-CURRENT. Любое нетривиальное и не срочное изменение должно быть выдержано в FreeBSD-CURRENT в течение по крайней мере 3 дней перед переносом, чтобы его могли адекватно протестировать. Выпускающие инженеры обладают той же властью в ветви FreeBSD-STABLE, что и мейнтейнеры (см. правило 5).</p><div class=paragraph><p>Это еще одно "не обсуждаемое" правило: выпускающий инженер безусловно отвечает за последствия, если выясняется что внесенные изменения неверны. Уважайте эти права, и помогайте группе выпуска релизов в работе с ветвью FreeBSD-STABLE. На первый взгляд может показаться, что ветвь FreeBSD-STABLE развивается чересчур консервативно. Не забывайте, однако, что разумный консерватизм - отличительное свойство FreeBSD-STABLE, и что эта ветвь развивается по законам, отличным от законов FreeBSD-CURRENT. Кроме того, нет смысла тестировать изменения в FreeBSD-CURRENT, если они немедленно переносятся в FreeBSD-STABLE. Разработчики FreeBSD-CURRENT должны иметь возможность протестировать внесенные изменения, так что оставьте время для такого тестирования, если только речь не идет о критическом исправлении или о чем-либо очевидно не требующем тестирования (например, исправления опечаток в страницах справочника, очевидных ошибок или опечаток в исходных текстах и т.п.) Иными словами, исходите из соображений здравого смысла.</p></div><div class=paragraph><p>Изменения в ветви поддержки безопасности (security branches, например, <code>RELENG_6_0</code>) должны быть одобрены членом группы <code>Группа Офицеров Безопасности &lt;<a href=mailto:security-officer@FreeBSD.org>security-officer@FreeBSD.org</a>></code> или, в некоторых случаях, одним из выпускающих инженеров (<code>Группа Выпуска Релизов FreeBSD &lt;<a href=mailto:re@FreeBSD.org>re@FreeBSD.org</a>></code>).</p></div></li><li><p>Не пререкайтесь с другими коммиттерами публично: это дурно выглядит. Если вам необходимо с чем-либо "категорически не согласиться", делайте это личной почтой.</p><div class=paragraph><p>Для всех участников проекта очень важно поддержание его публичного образа; особенно это важно, если мы хотим продолжать привлекать новых участников. Случается, что, несмотря на все усилия по сохранению власти над собой, люди срываются и грубят друг другу. Лучшее, что здесь можно сделать - минимизировать эффект, пока все участники не успокоятся. Следовательно, вы не должны озвучивать свою ярость публично, а равно и пересылать частную переписку в общедоступные списки рассылки. Выражения, употребляющиеся в переписке один на один зачастую гораздо менее сдержанны, чем те, которые каждый участник употребил бы публично, так что подобной переписке нет места в публичных рассылках: это лишь усугубит и без того неприятную ситуацию. Если кто-либо, говорящий вам нелицеприятные слова, делает это в частной переписке, соблюдайте приличия и вы: отвечайте приватно. Если, по вашему мнению, кто-либо из разработчиков поступает с вами нечестно, и это настолько мучит вас, обратитесь к Правлению, а не выносите конфликт наружу. Правление приложит все силы к разрешению ситуации, выступая в роли третейского судьи. В случаях, когда спор затрагивает какие-либо части кода, и участники не могут прийти к взаимно приемлемому соглашению, Правление может привлечь независимого участника для разрешения вопроса. В этом случае все участники конфликта должны согласиться принять решение, вынесенное третьей стороной.</p></div></li><li><p>Соблюдайте все периоды заморозки кода (core freeze), а также своевременно читайте списки рассылки <code>committers</code> и <code>developers</code>, чтобы быть в курсе расписания таких периодов.</p><div class=paragraph><p>Внесение не одобренных изменений в период заморозки кода является довольно большой ошибкой. Коммиттеры должны быть в курсе событий, прежде чем внести 10 мегабайт изменений после долгого отсутствия. Нарушающие это правило будут подвергаться заморозке коммиттерского бита до прохождения курса в Счастливом Лагере Повышения Квалификации FreeBSD, который организован в Гренландии.</p></div></li><li><p>Если вы сомневаетесь в какой-либо процедуре, сначала спросите!</p><div class=paragraph><p>Множество ошибок совершается, когда кто-либо совершает поспешные действия, думая, что поступает правильно. Делая что-либо впервые, вы, скорее всего, не знаете принятых мелочей и тонкостей, и лучше всего будет сначала спросить, не то вы имеете шансы выставить себя не в лучшем свете. Не стоит стыдиться спросить "Как, черт возьми, это надо делать?" Мы и так знаем, что вы умны: иначе вы не стали бы коммиттером.</p></div></li><li><p>Тестируйте свои изменения перед коммитом.</p><div class=paragraph><p>Это правило может показаться очевидным. Впрочем, если бы оно действительно было очевидно для всех, мы не так часто сталкивались со случаями явного его нарушения. Если ваши изменения затрагивают ядро, убедитесь, что после него нормально собираются ядра GENERIC и LINT. Если вы изменяете другую часть исходного кода, убедитесь, что код собирается (успешно завершается make buildworld). Если вы изменяете код в какой-либо ветви, убедитесь, что вы тестируете его на машине, которая работает именно на этой ветви кода. Если ваши изменения могут затронуть другие архитектуры, проверьте его на всех поддерживаемых архитектурах. Список доступных ресурсов можно найти на странице <a href=https://www.FreeBSD.org/internal/>www.FreeBSD.org/internal/</a>. По мере расширения списка поддерживаемых платформ в кластер будут добавляться соответствующие машины для тестирования.</p></div></li><li><p>Не производите коммит в деревья <span class=filename>src/contrib</span>, <span class=filename>src/crypto</span> и <span class=filename>src/sys/contrib</span> без <em>прямого</em> разрешения (approval) соответствующего мейнтейнера(ов).</p><div class=paragraph><p>Описанные деревья содержат исходный код сторонних производителей, который, как правило, импортируется в соответствующие ветви. Любой коммит, даже не выводящий файл из ветви производителя, может стать головной болью для ответственных за эту часть проекта разработчиков. Так что, если у вас нет <em>прямого</em> разрешения от мейнтейнера, <em>ничего</em> не делайте с этой частью репозитория (если, конечно, вы не поддерживаете этот код сами).</p></div><div class=paragraph><p>Отметим, что только что сказанное вовсе не означает, что вы не должны пытаться улучшить упомянутый код, наоборот, этому будут только рады. Лучше всего, если вы передадите ваши исправления вендору. Если изменения специфичны для FreeBSD, обсудите вопрос с мейнтейнером, возможно, он посчитает разумным применить их локально. Тем не менее, что бы вы ни делали, <em>не</em> производите коммит сами!</p></div><div class=paragraph><p>Если вы хотите стать ответственным за "ничей" участок дерева исходников, свяжитесь с FreeBSD Core.</p></div></li></ol></div></div><div class=sect2><h3 id=_правила_работы_с_различными_архитектурами>10.2. Правила работы с различными архитектурами<a class=anchor href=#_правила_работы_с_различными_архитектурами></a></h3><div class=paragraph><p>Начиная с версии 5.0 проект FreeBSD начал поддерживать несколько новых вычислительных архитектур, и более не является "i386™-центричным". Для упрощения поддержки FreeBSD на базе всех этих платформ Правлением было сформулировано следующее заявление:</p></div><div class="paragraph blockquote"><p>Основной 32-битной платформой разработки является i386; основная 64-битная платформа - Sparc64. Крупные изменения в дизайне (в том числе основные изменения в API и ABI) до попадания в репозиторий должны быть отлажены по крайней мере на одной 32 и одной 64-битной платформе, желательно на основных поддерживаемых платформах.</p></div><div class=paragraph><p>Платформы i386 и Sparc64 были выбраны по причине широкой распространенности доступности для разработчиков; кроме того, они представляют принципиально разные подходы к дизайну процессора и системы в целом: порядок байт в слове, организация регистров, реализация DMA, кэша, страничной адресации и т.д.</p></div><div class=paragraph><p>Процессор Alpha, конечно, является 64-битным, однако он представляет более традиционный дизайн и потому не может служить достаточно хорошей тестовой платформой для отработки тонкостей, с которыми разработчик может столкнуться на других 64-битных платформах. Платформа ia64 во многом сложна так же, как и Sparc64, однако ее доступность для разработчиков пока оставляет желать лучшего.</p></div><div class=paragraph><p>Мы будем переформулировать эти правила по мере того, как будут меняться цены и доступность 64-битных платформ.</p></div><div class=paragraph><p>Кроме того, разработчики должны быть в курсе наших правил классов поддержки (Tier Policy) различных аппаратных архитектур. Эти правила предназначены для общего описание процесса разработки, и потому отличаются от вышеописанных требований к возможностям и архитектурам. Правила классов поддержки на период выпуска релизов много жестче, чем ограничения на изменения в процессе разработки.</p></div></div><div class=sect2><h3 id=_другие_рекомендации>10.3. Другие рекомендации<a class=anchor href=#_другие_рекомендации></a></h3><div class=paragraph><p>Перед коммитом в области документации используйте какие-либо средства проверки орфографии. Для документов SGML, кроме того, при помощи команды <code>make lint</code> следует проверить корректность форматирования.</p></div><div class=paragraph><p>Для страниц справочника, при помощи утилиты из коллекции портов <code>manck</code> проверяйте корректность перекрестных ссылок и ссылок на файлы, а также наличие всех необходимых ссылок на синонимы (переменная <code>MLINK</code>).</p></div><div class=paragraph><p>Не смешивайте функциональные изменения со стилистическими (не изменяющими функциональных свойств кода). Такое смешивание затрудняет вычленение изменений при использовании команды <code>cvs diff</code> и, таким образом, может скрыть появившиеся ошибки. Не смешивайте в коммите в деревья <span class=filename>doc/</span> и <span class=filename>www/</span> изменения текста и переформатирование: это затрудняет работу переводчиков. Производите все стилистические изменения или переформатирования отдельными коммитами, и четко обозначайте их как таковые в журнальных сообщениях к коммиту.</p></div></div><div class=sect2><h3 id=_удаление_возможностей>10.4. Удаление возможностей<a class=anchor href=#_удаление_возможностей></a></h3><div class=paragraph><p>При необходимости удаления какой-либо функциональной возможности из утилит базовой системы следует использовать следующую схему действий:</p></div><div class="olist arabic"><ol class=arabic><li><p>В странице справочника и, возможно, в комментариях к релизу опция, утилита или интерфейс объявляются устаревающими и не рекомендованными к использованию (deprecated); их использование выводит предупреждение.</p></li><li><p>Опция, утилита или интерфейс сохраняются до очередного основного релиза (релиз X.0).</p></li><li><p>Опция, утилита или интерфейс удаляются, в том числе из документации: теперь они являются устаревшими. Как правило, об этом стоит упомянуть в комментариях к релизу.</p></li></ol></div></div></div></div><div class=sect1><h2 id=archs>11. Поддержка различных архитектур<a class=anchor href=#archs></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD является хорошо портируемой операционной системой и предназначена для работы на самых разнообразных аппаратных архитектурах. Важной частью процесса обеспечения гибкости в поддержке современных тенденций развития оборудования является деление кода на машинно-зависимый (Machine Dependent, MD) и машинно-независимый (Machine Independent, MI), а также, по возможности, минимизация машинно-зависимой части кода. Каждая новая аппаратная архитектура, которую начинает поддерживать FreeBSD, ощутимо увеличивает работу по поддержке кода, инструментария и процесса выпуска релизов. Кроме того, становится значительно сложнее эффективно тестировать изменения в коде ядра. Все это делает необходимым введение различных классов поддержки для различных архитектур, при сохранении максимальной стабильности малого числа "основных платформ".</p></div><div class=sect2><h3 id=_основные_намерения>11.1. Основные намерения<a class=anchor href=#_основные_намерения></a></h3><div class=paragraph><p>Проект FreeBSD предназначен для работы на рабочих станциях, серверах и высокопроизводительных встроенных системах. Сохраняя ориентир на малое количество архитектур в интересах таких систем, проект FreeBSD остается способен поддерживать высокий уровень надежности, стабильности и производительности, а также уменьшить нагрузку на различные группы поддержки проекта, такие как группы поддержки портов, документации, безопасности и выпуска релизов. Разнообразие поддерживаемых аппаратных платформ расширяет область применимости FreeBSD за счет поддержки новых возможностей (например, поддержка 64-битных процессоров, использование во встроенных системах и т.п.); тем не менее, расширение этого списка всегда должно быть тщательно оценено с позиций увеличения затрат на поддержку дополнительной аппаратной платформы.</p></div><div class=paragraph><p>Проект FreeBSD делит различные аппаратные платформы на 4 класса. Для каждого класса описывается набор требований, необходимых для присвоения платформе данного класса, и обязательства разработчиков по отношению к платформе. Кроме того, определяется порядок смены класса для архитектуры.</p></div></div><div class=sect2><h3 id=_класс_1_полностью_поддерживаемые_архитектуры>11.2. Класс 1: Полностью поддерживаемые архитектуры<a class=anchor href=#_класс_1_полностью_поддерживаемые_архитектуры></a></h3><div class=paragraph><p>Платформы 1 класса полностью поддерживаются группой безопасности, группой выпуска релизов и мейнтейнерами инструментария. Новые возможности, добавляемые в код системы, должны быть полностью функциональны для всех архитектур первого класса для каждого из релизов (исключением могут быть архитектурно-зависимые возможности, такие как драйвера аппаратуры). Как правило, все платформы 1 класса должны поддерживаться системами сборки либо расположенными непосредственно в кластере FreeBSD.org, либо легко доступными для всех разработчиков.</p></div><div class=paragraph><p>Архитектуры первого класса должны быть готовыми к эксплуатации под управлением FreeBSD во всех аспектах, включая процесс установки и среду разработки.</p></div><div class=paragraph><p>В настоящее время платформами 1 класса являются i386, Sparc64, AMD64, and PC98.</p></div></div><div class=sect2><h3 id=_класс_2_архитектуры_для_разработчиков>11.3. Класс 2: Архитектуры для разработчиков<a class=anchor href=#_класс_2_архитектуры_для_разработчиков></a></h3><div class=paragraph><p>Платформы 2 класса не поддерживаются группами безопасности и выпуска релизов. Поддержка инструментария оставляется на усмотрение его мейнтейнеров. Новые возможности, реализуемые в FreeBSD, должны быть реализуемы на этих платформах, однако непосредственная реализация на момент добавления кода в дерево исходных текстов не требуется. Реализация порта на архитектуру 2 класса может быть добавлена в репозиторий, если она не входит в противоречие с текущим состоянием систем первого класса и не влияет в существенной степени на прочие платформы 2 класса. Для добавления архитектуры 2 класса в дерево исходных текстов FreeBSD система должна быть способна загрузиться хотя бы в однопользовательский режим на реальной аппаратуре. Некоторые исключения из последнего правила могут быть сделаны для новой аппаратуры, находящейся в состоянии разработки и временно не доступной для проекта.</p></div><div class=paragraph><p>Обычно архитектурами 2 класса являются те, которые планируются к переходу в 1 класс, но пока находятся в состоянии разработки. Также во втором классе могут находится платформы, перешедшие из 1 класса по причине потери актуальности, по мере того как уменьшается количество ресурсов, доступных для поддержки системы в состоянии готовности к промышленной эксплуатации.</p></div><div class=paragraph><p>В настоящее время платформами 2 класса являются PowerPC и ia64.</p></div></div><div class=sect2><h3 id=_класс_3_экспериментальные_архитектуры>11.4. Класс 3: Экспериментальные архитектуры<a class=anchor href=#_класс_3_экспериментальные_архитектуры></a></h3><div class=paragraph><p>Платформы 3 класса не поддерживаются группами безопасности и выпуска релизов. Поддержка инструментария оставляется на усмотрение его мейнтейнеров. Архитектурами третьего класса могут быть: те, для которых нет и в ближайшее время не предвидится доступного проекту оборудования; имеющие менее трех активных разработчиков; не способные загрузиться в однопользовательский режим на реальной аппаратуре (или под управлением эмулятора, если реальная аппаратура недоступна); наконец, системы, которые оцениваются как исчезающие, чья дальнейшая распространенность сомнительна. Поддержка систем 3 класса не вносится в основное дерево исходных текстов FreeBSD, однако работа над такими архитектурами может производиться в репозитории Perforce FreeBSD, для облегчения контроля версий и дальнейшей интеграции с основной массой кода.</p></div><div class=paragraph><p>В настоящее время единственной платформой 3 класса является S/390®.</p></div></div><div class=sect2><h3 id=_класс_4_не_поддерживаемые_архитектуры>11.5. Класс 4: не поддерживаемые архитектуры<a class=anchor href=#_класс_4_не_поддерживаемые_архитектуры></a></h3><div class=paragraph><p>Системы 4 класса никак не поддерживаются проектом.</p></div><div class=paragraph><p>К 4 классу относятся все архитектуры, не перечисленные выше.</p></div></div><div class=sect2><h3 id=_правила_смены_класса_для_архитектуры>11.6. Правила смены класса для архитектуры<a class=anchor href=#_правила_смены_класса_для_архитектуры></a></h3><div class=paragraph><p>Для переноса платформы из класса в класс требуется решение, утвержденное Правлением, которое, в свою очередь, согласует его с группами безопасности, выпуска релизов и поддержки инструментария.</p></div></div></div></div><div class=sect1><h2 id=ports>12. FAQ по работе с портами<a class=anchor href=#ports></a></h2><div class=sectionbody><div class=sect2><h3 id=_как_добавить_новый_порт>12.1. Как добавить новый порт?<a class=anchor href=#_как_добавить_новый_порт></a></h3><div class=paragraph><div class=title>Добавление нового порта</div><p>Для начала прочитайте раздел, посвященный репозиторному копированию.</p></div><div class=paragraph><p>Самым простым будет использовать скрипт <code>addport</code> на машине <code>freefall</code>. Он добавит порт из указанного вами каталоге, определив нужную категорию из файла <span class=filename>Makefile</span>, добавит строку в файл <span class=filename>CVSROOT/modules</span> и в файл <span class=filename>Makefile</span> для нужной категории. Скрипт был написан <code>Michael Haro &lt;<a href=mailto:mharo@FreeBSD.org>mharo@FreeBSD.org</a>></code> и <code>Will Andrews &lt;<a href=mailto:will@FreeBSD.org>will@FreeBSD.org</a>></code>; вопросы и исправления по поводу <code>addport</code> следует отправлять Уиллу, как текущему мейнтейнеру.</p></div></div><div class=sect2><h3 id=_что_еще_следует_сделать_добавляя_новый_порт>12.2. Что еще следует сделать, добавляя новый порт?<a class=anchor href=#_что_еще_следует_сделать_добавляя_новый_порт></a></h3><div class=paragraph><p>Проверьте его. Желательно убедиться в том, что порт и соответствующий пакет корректно собираются. Рекомендуемая последовательность действий такова:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make install</span>
<span class=c># make package</span>
<span class=c># make deinstall</span>
<span class=c># pkg_add имя собранного пакета</span>
<span class=c># make deinstall</span>
<span class=c># make reinstall</span>
<span class=c># make package</span></code></pre></div></div><div class=paragraph><p>Более подробные инструкции можно найти в <a href=https://docs.freebsd.org/ru/books/porters-handbook/>Руководстве FreeBSD по созданию портов</a>.</p></div><div class=paragraph><p>Пользуйтесь <a href="https://man.freebsd.org/cgi/man.cgi?query=portlint&amp;sektion=1&amp;format=html">portlint(1)</a> для проверки корректности порта. Не обязательно добиваться полного отсутствия предупреждений, но по крайней мере исправьте простейшие из них.</p></div><div class=paragraph><p>Если новый порт прислал человек, еще не упомянутый в <a href=https://docs.freebsd.org/en/articles/contributors/#contrib-additional>Списке прочих участников</a>, добавьте его имя туда.</p></div><div class=paragraph><p>Закройте PR, если новый порт пришел в виде PR. Для этого воспользуйтесь командой <code>edit-pr <em>PR#</em></code> на машине <code>freefall</code> и измените значение в строке <code>state</code> с <code>open</code> на <code>closed</code>. Затем опишите причину смены статуса, и на этом работа закончена.</p></div></div></div></div><div class=sect1><h2 id=perks>13. Пряники и прочие льготы<a class=anchor href=#perks></a></h2><div class=sectionbody><div class=paragraph><p>Увы, льгот, возникающих от того, что вы являетесь коммиттером, не так уж много. Пожалуй, единственным несомненным долговременным преимуществом будет признание вас как компетентного специалиста. Тем не менее, кое-какие льготы все же существуют:</p></div><div class=dlist><dl><dt class=hdlist1>Прямой доступ к машине <code>cvsup-master</code></dt><dd><p>Будучи коммиттером, вы можете обратиться к <code>Jun Kuriyama &lt;<a href=mailto:kuriyama@FreeBSD.org>kuriyama@FreeBSD.org</a>></code>, чтобы получить доступ к машине <code>cvsup-master.FreeBSD.org</code>, приложив вывод команды <code>cvpasswd <em>yourusername</em>@FreeBSD.org freefall.FreeBSD.org</code>. Обратите внимание: в командной строке вы должны указать <code>freefall.FreeBSD.org</code>, хотя реальным сервером будет <code>cvsup-master</code>. Доступом к <code>cvsup-master</code> не следует злоупотреблять: это весьма загруженная машина.</p></dd><dt class=hdlist1>Бесплатная подписка на комплект из 4 CD или DVD</dt><dd><p>Компания <a href=http://www.freebsdmall.com>FreeBSD Mall, Inc.</a> предоставляет для всех коммиттеров FreeBSD возможность бесплатной подписки на выпуски FreeBSD. Порядок подписки появляется в списке рассылки <a href=mailto:developers@FreeBSD.org>developers@FreeBSD.org</a> после каждого релиза.</p></dd></dl></div></div></div><div class=sect1><h2 id=misc>14. Прочие вопросы<a class=anchor href=#misc></a></h2><div class=sectionbody><div class=sect2><h3 id=_почему_не_следует_вносить_малозначимые_изменения_в_ветви_разработчика_vendor_branches>14.1. Почему не следует вносить малозначимые изменения в ветви разработчика (vendor branches)?<a class=anchor href=#_почему_не_следует_вносить_малозначимые_изменения_в_ветви_разработчика_vendor_branches></a></h3><div class=ulist><ul><li><p>После этого действия каждый новый релиз от разработчика требует ручного приложения и объединения патчей.</p></li><li><p>Что хуже, каждый новый релиз от разработчика требует ручной <em>проверки</em> приложенных патчей.</p></li><li><p>Опция CVS <code>-J</code> не всегда хорошо работает. Можете спросить <code>David O’Brien &lt;<a href=mailto:obrien@FreeBSD.org>obrien@FreeBSD.org</a>></code>, он расскажет вам жутких историй.</p></li></ul></div></div><div class=sect2><h3 id=_как_мне_добавить_файл_в_ветвь_cvs>14.2. Как мне добавить файл в ветвь CVS?<a class=anchor href=#_как_мне_добавить_файл_в_ветвь_cvs></a></h3><div class=paragraph><p>Для добавления файла в ветви просто обновите исходные файлы до нужной ветви, а затем используйте команду <code>cvs add</code>. Например, если мы хотите перенести файл <span class=filename>src/sys/alpha/include/smp.h</span> из ветви HEAD в ветвь RELENG_6, в которой он пока не существует, можно использовать следующую последовательность действий:</p></div><div class=exampleblock><div class=title>Пример 1. MFC для нового файла</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd </span>sys/alpha/include
% cvs update <span class=nt>-rRELENG_6</span>
cvs update: Updating <span class=nb>.</span>
U clockvar.h
U console.h
...

% cvs update <span class=nt>-kk</span> <span class=nt>-Ap</span> smp.h <span class=o>&gt;</span> smp.h
<span class=o>===================================================================</span>
Checking out smp.h
RCS:  /usr/cvs/src/sys/alpha/include/smp.h,v
VERS: 1.1
<span class=k>***************</span>

% cvs add smp.h
cvs add: scheduling file <span class=sb>`</span>smp.h<span class=s1>&#39; for addition on branch `RELENG_6&#39;</span>
cvs add: use <span class=s1>&#39;cvs commit&#39;</span> to add this file permanently

% cvs commit</code></pre></div></div></div></div></div><div class=sect2><h3 id=_какую_мета_информацию_я_должен_включать_в_сообщения_для_коммита>14.3. Какую мета-информацию я должен включать в сообщения для коммита?<a class=anchor href=#_какую_мета_информацию_я_должен_включать_в_сообщения_для_коммита></a></h3><div class=paragraph><p>Помимо информативного описания содержания коммита вам может потребоваться включить в сообщение дополнительную информацию.</p></div><div class=paragraph><p>Она состоит из одной или нескольких строк вида: ключевое слово или словосочетание, двоеточие, табуляции для форматирования, собственно дополнительная информация.</p></div><div class=paragraph><p>Ключевыми словами могут быть:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PR:</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Идентификатор сообщения об ошибке, затрагиваемого (как правило, закрываемого) данным коммитом.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>Submitted by:</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Имя и e-mail адрес приславшего исправление; для коммиттеров - просто имя пользователя в кластере FreeBSD.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>Reviewed by:</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Имя и e-mail адрес того или тех, кто рецензировал изменения; для коммиттеров - имя пользователя в кластере FreeBSD. Если изменения были посланы в список рассылки на рецензию и получили одобрение, имя списка рассылки.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>Approved by:</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Имя и e-mail адрес того или тех, кто одобрил изменение; как и прежде, для коммиттеров просто имя пользователя в кластере. Обычной практикой является получение одобрения для коммитов в новые для вас области дерева. Кроме того, в период перед каждым релизом все коммиты <em>должны</em> быть одобрены группой выпускающих инженеров. В случае ваших первых коммитов вы должны получить одобрение на них у вашего ментора, и упомянуть его в виде "<em>username-of-mentor</em>`(mentor)`".</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>Obtained from:</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Имя проекта, из исходного кода которого было взято изменение.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>MFC after:</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Если вы хотите получать по почте напоминания об MFC, укажите число дней, недель или месяцев с момента изначального коммита, через которое вы планируете произвести MFC.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>Security:</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Если ваши изменения затрагивают вопросы безопасности или исправляют какие-либо уязвимости, укажите ссылки на опубликованные отчеты или описание проблемы.</p></td></tr></tbody></table><div class=exampleblock><div class=title>Пример 2. Сообщение для коммита, основанного на PR</div><div class=content><div class=paragraph><p>Вы собираетесь внести коммит, основанный на PR, присланном John Smith и содержащим патч для исправления проблемы. Ваше сообщение должно заканчиваться примерно такими строками:</p></div><div class="literalblock programlisting"><div class=content><pre>...

PR:                foo/12345
Submitted by:	   John Smith &lt;John.Smith@example.com&gt;</pre></div></div></div></div><div class=exampleblock><div class=title>Пример 3. Сообщение для коммита, требующего рецензии</div><div class=content><div class=paragraph><p>Вы собираетесь изменить подсистему работы с виртуальной памятью. Вы опубликовали предполагаемые изменения в соответствующем списке рассылки (в данном случае <code>freebsd-arch</code>), и изменения были одобрены.</p></div><div class="literalblock programlisting"><div class=content><pre>...

Reviewed by:       -arch</pre></div></div></div></div><div class=exampleblock><div class=title>Пример 4. Сообщение для коммита, требующего одобрения</div><div class=content><div class=paragraph><p>Вы намерены произвести коммит в область дерева, для которой определен ведущий (MAINTAINER). Вы скоординировали усилия с мейнтейнером, и он отреагировал "Отлично. Производи коммит."</p></div><div class="literalblock programlisting"><div class=content><pre>...

Approved by:	    abc</pre></div></div><div class=paragraph><p>Где <em>abc</em> имя пользователя, одобрившего ваш коммит.</p></div></div></div><div class=exampleblock><div class=title>Пример 5. Сообщение для коммита, использующего код OpenBSD</div><div class=content><div class=paragraph><p>Вы собираетесь внести изменение, основанное на коде, использованном проектом OpenBSD.</p></div><div class="literalblock programlisting"><div class=content><pre>...

Obtained from:      OpenBSD</pre></div></div></div></div><div class=exampleblock><div class=title>Пример 6. Сообщение для коммита, планирующего интеграцию из FreeBSD-CURRENT в FreeBSD-STABLE через некоторое время</div><div class=content><div class=paragraph><p>Вы хотите внести изменения, которые должны быть интегрированы из FreeBSD-CURRENT в ветвь FreeBSD-STABLE через две недели.</p></div><div class="literalblock programlisting"><div class=content><pre>...

MFC after:      2 weeks</pre></div></div><div class=paragraph><p>Где <em>2</em> является количеством дней, недель или месяцев, через которое вы планируете интегрировать (MFC) в FreeBSD-STABLE. В качестве <em>weeks</em> может быть использовано <code>week</code>, <code>weeks</code>, <code>month</code>, <code>months</code>, либо этот параметр может быть опущен (при этом подразумевается <em>X</em> дней).</p></div></div></div><div class=paragraph><p>В отдельных случаях вам потребуется комбинировать приведенные примеры.</p></div><div class=paragraph><p>Рассмотрим ситуацию, когда некто прислал сообщение об ошибке, содержащее код из проекта NetBSD. Вы заинтересовались этим случаем, но он расположен в той части дерева, в которой вы обычно не работаете, так что вы решаете выдать изменения на рассмотрение списка рассылки <code>arch</code>. Поскольку изменения были достаточно сложны, вы решаете интегрировать их (MFC) через месяц, чтобы обеспечить адекватное время для тестирования.</p></div><div class=paragraph><p>В описанном случае сообщения для коммита может выглядеть примерно так:</p></div><div class="literalblock programlisting"><div class=content><pre>PR:                 foo/54321
Submitted by:       John Smith &lt;John.Smith@example.com&gt;
Reviewed by:        -arch
Obtained from:      NetBSD
MFC after:          1 month</pre></div></div></div><div class=sect2><h3 id=_как_мне_получить_доступ_к_people_freebsd_org_для_того_чтобы_разместить_там_персональную_информацию_или_информацию_о_моих_проектах>14.4. Как мне получить доступ к people.FreeBSD.org для того чтобы разместить там персональную информацию или информацию о моих проектах?<a class=anchor href=#_как_мне_получить_доступ_к_people_freebsd_org_для_того_чтобы_разместить_там_персональную_информацию_или_информацию_о_моих_проектах></a></h3><div class=paragraph><p><code>people.FreeBSD.org</code> - синоним для <code>freefall.FreeBSD.org</code>. Просто создайте каталог <span class=filename>public_html</span>. Все, что вы разместите в нем, будет автоматически доступно по адресу <a href=http://people.FreeBSD.org/>http://people.FreeBSD.org/</a>.</p></div></div><div class=sect2><h3 id=_где_расположены_архивы_списков_рассылки>14.5. Где расположены архивы списков рассылки?<a class=anchor href=#_где_расположены_архивы_списков_рассылки></a></h3><div class=paragraph><p>Списки рассылки архивируются в иерархию каталогов <span class=filename>/g/mail</span>, видимую на всех машинах кластера как <span class=filename>/hub/g/mail</span> (см. <a href="https://man.freebsd.org/cgi/man.cgi?query=pwd&amp;sektion=1&amp;format=html">pwd(1)</a>).</p></div></div><div class=sect2><h3 id=_мне_бы_хотелось_стать_ментором_для_нового_коммиттера_какого_технологического_процесса_я_должен_придерживаться>14.6. Мне бы хотелось стать ментором для нового коммиттера. Какого технологического процесса я должен придерживаться?<a class=anchor href=#_мне_бы_хотелось_стать_ментором_для_нового_коммиттера_какого_технологического_процесса_я_должен_придерживаться></a></h3><div class=paragraph><p>Обратитесь к документу <a href=http://www.freebsd.org/internal/new-account/>Процедура создания нового аккаунта</a>.</p></div></div></div></div><div id=footnotes><hr><div class=footnote id=_footnotedef_1><a href=#_footnoteref_1>1</a>. Точный путь к файлу зависит от установок *default base в вашем файле supfile.</div></div><hr><div class=last-modified><p><strong>Изменено</strong>: 3 ноября 2021 г. by <a href="https://cgit.freebsd.org/doc/commit/?id=64acd169b8" target=_blank>Sergio Carlavilla Delgado</a></p></div></div><aside class=toc><div class=toc-content><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#admin>1. Административные детали</a></li><li><a href=#committer.types>2. Типы коммит битов</a></li><li><a href=#cvs.operations>3. Работа с CVS</a></li><li><a href=#conventions>4. Соглашения и традиции</a></li><li><a href=#pref-license>5. Предпочтительная лицензия для новых файлов</a></li><li><a href=#developer.relations>6. Взаимодействие между разработчиками</a></li><li><a href=#gnats>7. GNATS</a></li><li><a href=#people>8. Кто есть кто</a></li><li><a href=#ssh.guide>9. SSH: быстрый старт</a></li><li><a href=#rules>10. Большой Список Правил Коммиттера FreeBSD</a></li><li><a href=#archs>11. Поддержка различных архитектур</a></li><li><a href=#ports>12. FAQ по работе с портами</a></li><li><a href=#perks>13. Пряники и прочие льготы</a></li><li><a href=#misc>14. Прочие вопросы</a></li></ul></nav><hr><div class=resources><h3>Материалы</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Скачать PDF"></i><a href=https://download.freebsd.org/doc/ru/articles/committers-guide/committers-guide_ru.pdf>Скачать PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Редактировать эту страницу"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ru/_index target=_blank>Редактировать эту страницу</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/ru/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Выберите язык">
<span>Русский</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Система</option><option value=theme-light>Светлый</option><option value=theme-dark>Тёмный</option><option value=theme-high-contrast>Высокая контрастность</option></select></div></div></section><section class=about-column><h3 class=column-title>О нас</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Кодекс Этики</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Бюллетени Безопасности</a></li></ul></section><section class=documentation-column><h3 class=column-title>Документация</h3><ul class=column-elements-container><li><a href=/ru class=column-element>Портал документации</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Презентации и публикации</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Предыдущие версии</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>Документы 4.4BSD</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Сообщество</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/ru/articles/contributing class=column-element>Принять участие</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Форум Сообщества</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Трекер ошибок</a></li></ul></section><section class=legal-column><h3 class=column-title>Юридическая информация</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Пожертвования</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Лицензирование</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Политика Конфиденциальности</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Юридические оговорки</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 Проект FreeBSD. Все права защищены</p><span>Сделано с помощью <span class=heart>♥</span> Сообществом FreeBSD</span></section></div></footer></body></html>