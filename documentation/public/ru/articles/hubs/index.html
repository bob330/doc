<!doctype html><html class=theme-light lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/ru/articles/hubs/><title>Поддержка зеркал FreeBSD | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Поддержка зеркал FreeBSD"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ru"><meta property="og:url" content="https://docs.freebsd.org/ru/articles/hubs/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/ru\/articles\/hubs\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>О нас
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>О нас</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Кодекс Этики</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Получить FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Информация о релизах</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Подготовка релизов</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Бюллетени Безопасности</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Документация
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ru>Портал документации</a></li><li><a href=https://docs.freebsd.org/ru/books/handbook>Руководство</a></li><li><a href=https://docs.freebsd.org/ru/books/porters-handbook>Руководство по созданию портов</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Учебник Проекта Документирования</a></li><li><a href=https://man.FreeBSD.org target=_blank>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Презентации и публикации</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/ru/books>Книги</a></li><li><a href=https://docs.freebsd.org/ru/articles>Статьи</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Сообщество
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Сообщество</a></li><li><a href=https://docs.freebsd.org/ru/articles/contributing>Стать участником</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Форум</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Трекер ошибок</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Поддержка</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ru>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Пожертвования</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>Поддержка зеркал FreeBSD</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
Этот перевод может быть устаревшим. Для того, чтобы помочь с переводом, пожалуйста, обратитесь к <a href=https://translate-dev.freebsd.org/ target=_blank>Сервер переводов FreeBSD</a>.</p></div><div class=legalnotice><a id=trademarks></a><details><summary>товарные знаки</summary><p>FreeBSD является зарегистрированным товарным знаком Фонда FreeBSD.</p><p>Многие из обозначений, используемые производителями и продавцами для обозначения своих продуктов, заявляются в качестве товарных знаков. Когда такие обозначения появляются в этом документе, и Проекту FreeBSD известно о товарном знаке, к обозначению добавляется знак “™” или “®”.</p></details></div><div class=toc-mobile><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#mirror-contact>1. Контактная информация</a></li><li><a href=#mirror-requirements>2. Требования к зеркалам FreeBSD</a></li><li><a href=#mirror-howto>3. Как вести зеркало FreeBSD</a></li><li><a href=#mirror-where>4. С какого сервера синхронизироваться</a></li><li><a href=#mirror-official>5. Официальные зеркала</a></li><li><a href=#mirror-statpages>6. Статистика некоторых зеркал</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>Аннотация</p></div><div class=paragraph><p>Рабочий вариант статьи, описывающей процесс создания и поддержки зеркала FreeBSD и адресованной администраторам зеркал.</p></div><hr><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>На текущий момент заявки на подключение новых зеркал не принимаются.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=mirror-contact>1. Контактная информация<a class=anchor href=#mirror-contact></a></h2><div class=sectionbody><div class=paragraph><p>Координаторы системы зеркал доступны по электронной почте по адресу <a href=mailto:mirror-admin@FreeBSD.org>mirror-admin@FreeBSD.org</a>. Помимо этого, существует <a href=https://lists.FreeBSD.org/subscription/freebsd-hubs>Список рассылки, посвящённый зеркалированию FreeBSD</a>.</p></div></div></div><div class=sect1><h2 id=mirror-requirements>2. Требования к зеркалам FreeBSD<a class=anchor href=#mirror-requirements></a></h2><div class=sectionbody><div class=sect2><h3 id=mirror-diskspace>2.1. Дисковое пространство<a class=anchor href=#mirror-diskspace></a></h3><div class=paragraph><p>Одним из наиболее важных требований является дисковое пространство. В зависимости от набора релизов, архитектур и степени полноты зеркала вам может потребоваться огромный объем диска. Не лишним будет помнить, что <em>официальное</em> зеркало, скорее всего, должно быть полным. Веб-страницы всегда должны зеркалироваться полностью. Кроме того, учтите, что приводимые оценки объема относятся к состоянию на момент последнего редактирования данной статьи (11.2-RELEASE/12.0-RELEASE). Дальнейший процесс разработки и последующие релизы только увеличат требуемый объем. Кроме того, разумно будет зарезервировать некоторое (10-20%) дополнительное пространство спокойствия ради. Вот некоторые оценки объема:</p></div><div class=ulist><ul><li><p>Полное зеркало FTP: 1.4 TB</p></li><li><p>Комплект изменений CTM: 10 GB</p></li><li><p>Веб-страницы: 1 GB</p></li></ul></div><div class=paragraph><p>Текущее использование диска зеркалом FTP можно посмотреть на <a href=ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes>ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes</a>.</p></div></div><div class=sect2><h3 id=mirror-bandwidth>2.2. Требования к сетевой связности и пропускной способности<a class=anchor href=#mirror-bandwidth></a></h3><div class=paragraph><p>Разумеется, у вас должно быть подключение к интернет. Требуемая пропускная способность ваших каналов зависит от предполагаемого профиля использования вашего зеркала. Если вы собираетесь копировать некоторые части FreeBSD для локального использования на вашей машине или в интранете, требования могут быть много мягче, чем для публичного зеркала. Для официального зеркала необходимая пропускная способность увеличивается еще больше. Мы можем дать лишь очень грубые оценки:</p></div><div class=ulist><ul><li><p>Зеркало для локального доступа: фактически минимум не определен, но канал шириной менее 2 Mbps может сделать процесс обновления мучительно медленным.</p></li><li><p>Неофициальное публичное зеркало: 34 Mbps выглядит неплохо для начала.</p></li><li><p>Официальное зеркало: рекомендуется канал шириной более 100 Mbps; кроме того, ваша машина должна стоять как можно ближе к граничным маршрутизаторам вашей сети.</p></li></ul></div></div><div class=sect2><h3 id=mirror-system>2.3. Системные требования, процессор и память<a class=anchor href=#mirror-system></a></h3><div class=paragraph><p>Эти требования в первую очередь определяются максимальным ожидаемым количеством клиентов (устанавливается администратором сервера). Также, на требуемые ресурсы влияет список сервисов, которые вы будете предоставлять. Зеркала FTP и/или HTTP не требуют особенно много ресурсов. Будьте на чеку, если планируете предоставлять rsync. Выбор rsync может иметь огромное влияние на требования к аппаратным ресурсам, поскольку rsync признан "прожорливым" по памяти. Вот некоторые советы по конфигурации аппаратной части сервера:</p></div><div class=paragraph><p>Для умеренно посещаемого сайта, предоставляющего rsync, можно использовать процессор с частотой 800MHz - 1 GHz и по крайней мере 512MB памяти. Скорее всего, данная конфигурация может считаться минимальной для <em>официального</em> зеркала.</p></div><div class=paragraph><p>Для регулярно посещаемого сайта вам потребуется больше памяти (хорошим стартом будет 2GB) и больше процессорной мощности, что может означать требование многопроцессорной (SMP) платформы.</p></div><div class=paragraph><p>Кроме того, вам потребуется быстрая дисковая подсистема, в первую очередь, для работы с репозиторием SVN (крайне рекомендуем RAID). Контроллер SCSI, оборудованный собственной памятью, также может ощутимо ускорить процесс, поскольку большая часть сервисов связана с большим количеством дисковых запросов небольшого размера.</p></div></div><div class=sect2><h3 id=mirror-services>2.4. Предоставляемые сервисы<a class=anchor href=#mirror-services></a></h3><div class=paragraph><p>Всякое зеркало должно предоставлять набор основных сервисов. Помимо требуемого минимального набора, существуют дополнительные сервисы, которые администратор сервера может пожелать предоставлять. Этот раздел описывает, какие сервисы вы можете предоставлять, и какие действия для этого потребуются от вас.</p></div><div class=sect3><h4 id=mirror-serv-ftp>2.4.1. FTP (требуется для FTP зеркала)<a class=anchor href=#mirror-serv-ftp></a></h4><div class=paragraph><p>Это один из наиболее базовых сервисов; его предоставление требуется для каждого зеркала, распространяющего файлы FreeBSD по FTP. Доступ по FTP должен быть анонимным, и не должны применяться какие-либо ограничения по соотношению объема передано/принято (что вообще является, на наш взгляд, странным подходом). Закачка (upload) файлов на сервер не требуется (и <em>должна</em> быть запрещена в разделе FreeBSD). Кроме того, архив файлов FreeBSD должен быть доступен с путем <span class=filename>/pub/FreeBSD</span>.</p></div><div class=literalblock><div class=content><pre>Для предоставления анонимного FTP доступа может быть использован целый ряд программ (перечислены в алфавитном порядке):</pre></div></div><div class=ulist><ul><li><p><code>/usr/libexec/ftpd</code>: базовый FTP-даемон FreeBSD. Не забудьте прочитать <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpd&amp;sektion=8&amp;format=html">ftpd(8)</a>.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/ncftpd/>ftp/ncftpd</a>: коммерческий пакет, свободен для использования в учебных целях.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/oftpd/>ftp/oftpd</a>: FTP-даемон, написанный в основном с точки зрения защищенности.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/proftpd/>ftp/proftpd</a>: Модульный и очень гибкий FTP-даемон.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/pure-ftpd/>ftp/pure-ftpd</a>: Еще один FTP-даемон, разработанный с позиций защищенности.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/twoftpd/>ftp/twoftpd</a>: См. предыдущий пункт.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/ftp/vsftpd/>ftp/vsftpd</a>: "очень защищенный" ("very secure") ftpd.</p></li></ul></div><div class=paragraph><p>ftpd, proftpd и, возможно, ncftpd являются наиболее часто встречающимися FTP серверами. Прочие распространены среди существующих зеркал в существенно меньшей степени. Дополнительным поводом для рассмотрения может являться возможность гибко ограничивать количество одновременных соединений, что поможет вам удержать в нужных рамках потребление пропускной способности ваших каналов и машинные ресурсы.</p></div></div><div class=sect3><h4 id=mirror-serv-rsync>2.4.2. Rsync (необязательный сервис для FTP зеркала)<a class=anchor href=#mirror-serv-rsync></a></h4><div class=paragraph><p>rsync часто используется для предоставления доступа к FTP-области FreeBSD, чтобы другие зеркала могли синхронизироваться по вашему. Протокол rsync во многом отличается от FTP, в частности, он гораздо гуманнее с точки зрения пропускной способности каналов, поскольку не требует передачи измененного файла целиком (передаются лишь различия). Взамен rsync требует значительных объемов памяти. Размер каждого процесса зависит от размера синхронизируемого модуля (в основном от количества директорий и файлов). rsync может использовать в качестве транспортного протокола <code>rsh</code> или <code>ssh</code> (по умолчанию); также, может использоваться внутренний протокол rsync (этот метод предпочтителен для публичных rsync-серверов). Поддерживается авторизация клиентов и различные ограничения. Для протокола rsync существует единственный пакет:</p></div><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/net/rsync/>net/rsync</a></p></li></ul></div></div><div class=sect3><h4 id=mirror-serv-http>2.4.3. HTTP (требуется для веб-страниц, дополнителен для FTP зеркал)<a class=anchor href=#mirror-serv-http></a></h4><div class=paragraph><p>Если вы хотите поддерживать зеркало веб-страниц FreeBSD, вам потребуется установить веб-сервер. Дополнительно, вы можете предоставлять HTTP доступ к FTP-набору файлов FreeBSD. Выбор веб-сервера остается на усмотрение администратора зеркала. Некоторые из наиболее популярных веб-серверов перечислены ниже.</p></div><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13/>www/apache13</a>: Apache - самый широко распространённый в Интернете веб-сервер, активно используемый проектом FreeBSD. Вы можете также использовать веб-сервер Apache следующего поколения, доступный в коллекции портов как <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a>.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/thttpd/>www/thttpd</a>: Для обслуживания большого количества запросов к статическим документам сервер thttpd может оказаться более эффективным, чем Apache. thttpd отлично оптимизирован по производительности при работе под FreeBSD.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/boa/>www/boa</a>: Boa - еще одна альтернатива thttpd и Apache. Этот сервер должен быть ощутимо более высокопроизводительным, чем Apache, для полностью статических страниц. На время написания данного документа, впрочем, он не так хорошо оптимизирован под FreeBSD, как thttpd.</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/www/nginx/>www/nginx</a>: Nginx - высокопроизводительный веб-сервер, отличающийся низкими требованиями к объему оперативной памяти и обладающий ключевыми функциональными возможностями для построения современной веб-инфраструктуры. Функциональные возможности включают следующее: HTTP-сервер, обратный прокси для HTTP, почтовый прокси сервер, кеширование, балансировка нагрузки, сжатие, ограничение количества запросов, мультиплексирование и повторное использование соединений, поддержка разгрузки SSL (SSL offload) и вещания медиапотоков (media streaming).</p></li></ul></div></div></div></div></div><div class=sect1><h2 id=mirror-howto>3. Как вести зеркало FreeBSD<a class=anchor href=#mirror-howto></a></h2><div class=sectionbody><div class=paragraph><p>Теперь вам известно, какая потребуется машина и как предоставлять сервисы, но не как получить их самому. :-) В этом разделе описывается процесс ведения зеркала и поддержания его в актуальном состоянии, в том числе какие инструменты использовать и какие сайты выбирать в качестве источников для синхронизации.</p></div><div class=sect2><h3 id=mirror-ftp-rsync>3.1. Зеркалирование FTP-области<a class=anchor href=#mirror-ftp-rsync></a></h3><div class=paragraph><p>Файлы, доступные по FTP, составляют большую часть зеркала. Они включают <em>дистрибутивные наборы</em>, необходимые для установки по сети, <em>ветви (branches)</em>, в которых отражено текущее состояние исходных текстов, <em>образы ISO</em> для записи компакт-дисков с дистрибутивами для установки, образами "живых" файловых систем и пакетами, дерево портов, исходные дистрибутивы для сборки портов и кучу готовых пакетов. И, разумеется, все вышеописанное - для разных версий FreeBSD и различных архитектур.</p></div><div class=paragraph><p>Наиболее эффективным будет синхронизация FTP-области при помощи rsync. Для этого следует установить пакет <a class=package href=https://cgit.freebsd.org/ports/tree/net/rsync/>net/rsync</a>, который был описан в разделе <a href=#mirror-serv-rsync>Rsync (необязательный сервис для FTP зеркала)</a>. Поскольку доступ по протоколу rsync не является обязательным, выбранный вами сайт может его не поддерживать. Возможно, вам придется немного поискать в сетевой окрестности зеркало, поддерживающее rsync.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Поскольку от количества клиентов rsync ощутимо зависит загрузка сервера, большинство администраторов вводят ограничения доступа. Для поддержания зеркала вам следует связаться с администратором сайта, с которым вы будете синхронизироваться, для уточнения локальных правил и, возможно, для внесения в них исключения для вас (поскольку вы также поддерживаете зеркало).</p></div></td></tr></tbody></table></div><div class=paragraph><p>Строка для синхронизации FreeBSD по rsync выглядит примерно так:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% rsync <span class=nt>-vaHz</span> <span class=nt>--delete</span> rsync://ftp4.de.FreeBSD.org/FreeBSD/ /pub/FreeBSD/</code></pre></div></div><div class=paragraph><p>Загляните в документацию по rsync, также доступную по адресу <a href=http://rsync.samba.org/>http://rsync.samba.org/</a> за дополнительной информацией по различным опциям rsync. Обратите внимание, что в случае синхронизации модуля целиком (а не отдельного каталога) необходимо явно указать результирующий каталог, потому что каталог с именем модуля (в данном случае "FreeBSD") не создается. Для поддержания актуальности вам потребуется создать скрипт для запуска подобной команды из <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>.</p></div></div><div class=sect2><h3 id=mirror-www>3.2. Зеркалирование страниц WWW<a class=anchor href=#mirror-www></a></h3><div class=paragraph><p>Веб-сайт FreeBSD следует зеркалировать исключительно при помощи rsync.</p></div><div class=paragraph><p>Командная строка для синхронизации веб-сайта FreeBSD выглядит примерно так:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% rsync <span class=nt>-vaHz</span> <span class=nt>--delete</span> rsync://bit0.us-west.freebsd.org/FreeBSD-www-data/ /usr/local/www/</code></pre></div></div></div><div class=sect2><h3 id=mirror-how-often>3.3. Как часто синхронизироваться?<a class=anchor href=#mirror-how-often></a></h3><div class=paragraph><p>Каждое зеркало должно регулярно обновляться. Вам потребуется какой-то набор скриптов, выполняемых посредством <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a>. Поскольку каждый администратор, как правило, пишет такие скрипты сам и на свой лад, мы не можем выдать конкретных указаний. Общие же советы выглядят так:</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Создайте скрипт с командой, которая запустит нужное приложение для обновления зеркала. Рекомендуем использовать скрипт на языке обычного <code>/bin/sh</code>.</p></li><li><p>Добавьте команд перенаправления вывода, чтобы записать диагностику работы в файл.</p></li><li><p>Попробуйте, как ваш скрипт работает. По завершении проверьте логи.</p></li><li><p>При помощи утилиты <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=1&amp;format=html">crontab(1)</a> добавьте ваш скрипт в таблицу регулярных заданий <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=5&amp;format=html">crontab(5)</a> соответствующего пользователя. Это должен быть пользователь, отличный от пользователя FTP-даемона, чтобы файлы в FTP-области без атрибута "чтение для всех" не были доступны анонимным FTP-пользователям. Данное свойство используется для тестирования перед выходом новых релизов, для того чтобы удостовериться, что все официальные зеркала содержат все необходимые файлы к моменту официального объявления релиза.</p></li></ol></div><div class=paragraph><p>Некоторые рекомендуемые установки частоты обновления:</p></div><div class=ulist><ul><li><p>FTP-набор: раз в сутки</p></li><li><p>WWW-страницы: раз в сутки</p></li></ul></div></div></div></div><div class=sect1><h2 id=mirror-where>4. С какого сервера синхронизироваться<a class=anchor href=#mirror-where></a></h2><div class=sectionbody><div class=paragraph><p>Это важный вопрос, так что мы попытаемся пояснить, откуда берутся ответы. Для начала повторим еще несколько раз: <em>никогда не синхронизируйтесь с ftp.FreeBSD.org</em>.</p></div><div class=sect2><h3 id=mirror-where-organization>4.1. Организация системы зеркал<a class=anchor href=#mirror-where-organization></a></h3><div class=paragraph><p>Зеркала организуются по странам. Имена хостов всех официальных зеркал построены по принципу <code>ftpN.CC.FreeBSD.org</code>, где <em>CC</em> (country code) - домен верхнего уровня страны, где расположено зеркало, <em>N</em> - номер зеркала в данной стране. Этот же принцип применим к именам хостов <code>wwwN.CC.FreeBSD.org</code> и т.п. Кроме того, есть зеркала без доменной части, обозначающей страну. Все они имеют очень хорошие внешние каналы и обслуживают большое число одновременных соединений. Имя <code>ftp.FreeBSD.org</code> на самом деле указывает на две машины, одна из которых в настоящее время находится в Дании, а другая в США. Ни одна из этих машин <em>НЕ</em> является основным сайтом, и потому не должна использоваться для синхронизации. Масса документации для "живых" пользователей указывает на <code>ftp.FreeBSD.org</code>, так что автоматическим системам ведения зеркал следует выбирать другие источники синхронизации.</p></div><div class=paragraph><p>Кроме того, существует иерархия зеркал в терминах их удаленности от центра, или <em>слоях</em>. Основные сайты могут быть описаны как <em>Зеркала нулевого слоя</em>. Зеркала, синхронизирующиеся по ним, считаются <em>слоем 1</em>, следующие - <em>слоем 2</em> и т.д. Официальные сайты приглашаются на низкие слои, однако следует помнить, что чем меньше номер слоя, тем выше требования к зеркалу, как было описано в <a href=#mirror-requirements>Требования к зеркалам FreeBSD</a>. Помимо того, доступ к зеркалам 1 слоя может быть ограничен; безусловно ограничен доступ к основным сайтам. Иерархия <em>слоев</em> не отражается в DNS и, вообще говоря, нигде (кроме мастер-сайтов) не документирована. Тем не менее, официальные зеркала с малыми (1-4, как правило) номерами обычно представляют первый слой. (Это грубая оценка, и ни в коем случае не правило).</p></div></div><div class=sect2><h3 id=mirror-where-where>4.2. Так откуда же мне синхронизироваться?<a class=anchor href=#mirror-where-where></a></h3><div class=paragraph><p>Главное - НЕ с <code>ftp.FreeBSD.org</code>. Короткий ответ: с зеркала, которое расположено недалеко от вас в терминах Интернет, и/или доступ к которому наилучший.</p></div><div class=sect3><h4 id=mirror-where-simple>4.2.1. Я хочу получить копию зеркала хоть откуда-нибудь!<a class=anchor href=#mirror-where-simple></a></h4><div class=paragraph><p>Если у вас нет каких-либо специальных предпочтений или требований, см. <a href=#mirror-where-where>Так откуда же мне синхронизироваться?</a>. Это означает:</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Выберите те из них, с которыми вам работать быстрее всего (меньшее число промежуточных узлов и время отклика), и которые предоставляют нужные вам сервисы (такие как rsync).</p></li><li><p>Свяжитесь с администраторами выбранного сервера, опишите ваши запросы и уточните их правила.</p></li><li><p>Сконфигурируйте ваше зеркало, как описывалось выше.</p></li></ol></div></div><div class=sect3><h4 id=mirror-where-official>4.2.2. Я поддерживаю официальное зеркало, какой сайт мне выбрать?<a class=anchor href=#mirror-where-official></a></h4><div class=paragraph><p>В основном, правила, описанные в <a href=#mirror-where-simple>Я хочу получить копию зеркала хоть откуда-нибудь!</a>, применимы. Дополнительно можно убедиться, что выбранный сайт принадлежит низкому слою. Другие соображения относительно <em>официальных</em> зеркал описаны в <a href=#mirror-official>Официальные зеркала</a>.</p></div></div><div class=sect3><h4 id=mirror-where-master>4.2.3. Мне нужен доступ к основным сайтам!<a class=anchor href=#mirror-where-master></a></h4><div class=paragraph><p>При наличии достаточных причин вы можете получить доступ к одному из основных сайтов. Доступ к ним ограничен; существуют специальные правила их использования. Наличие у вас статуса <em>официального</em> зеркала, безусловно, является хорошим подспорьем. В противном случае убедитесь, что ваша страна действительно нуждается еще в одном зеркале. Если их уже три или более, сначала свяжитесь с администратором соответствующей зоны DNS (<a href=mailto:hostmaster@CC.FreeBSD.org>hostmaster@CC.FreeBSD.org</a>) или напишите в <a href=https://lists.FreeBSD.org/subscription/freebsd-hubs>Список рассылки, посвящённый зеркалированию FreeBSD</a>.</p></div><div class=paragraph><p>Доступ к одному из мастер-сайтов или подходящему зеркалу 1 уровня вам помогут обеспечить те же, кто помогал вам получить статус <em>официального</em> зеркала. В случае неудачи свяжитесь с <a href=mailto:mirror-admin@FreeBSD.org>mirror-admin@FreeBSD.org</a> и попросите помощи у них.</p></div><div class=paragraph><p>Существует один основной сайт для синхронизации набора файлов FTP.</p></div><div class=sect4><h5 id=mirror-where-master-ftp>4.2.3.1. ftp-master.FreeBSD.org<a class=anchor href=#mirror-where-master-ftp></a></h5><div class=paragraph><p>Это основной сервер для синхронизации FTP набора.</p></div><div class=paragraph><p>В дополнение к FTP, <code>ftp-master.FreeBSD.org</code> поддерживает доступ по rsync. Использование этих протоколов описано в <a href=#mirror-ftp-rsync>Зеркалирование FTP-области</a>.</p></div><div class=paragraph><p>Приветствуется предоставление зеркалами <em>1 уровня</em> доступа к FTP-области по протоколу rsync.</p></div></div></div></div></div></div><div class=sect1><h2 id=mirror-official>5. Официальные зеркала<a class=anchor href=#mirror-official></a></h2><div class=sectionbody><div class=paragraph><p>Официальные зеркала обладают следующим свойствами:</p></div><div class=ulist><ul><li><p>a) имеют запись в домене <code>FreeBSD.org</code> (обычно типа CNAME).</p></li><li><p>b) присутствуют в списке официальных зеркал в Руководстве по FreeBSD и другой документации.</p></li></ul></div><div class=paragraph><p>На настоящий момент это все, что отличает их от прочих зеркал. Официальные зеркала не обязательно принадлежат к <em>Первому уровню</em>, однако, вряд ли можно найти зеркало <em>уровня 1</em>, не являющееся официальным.</p></div><div class=sect2><h3 id=mirror-official-requirements>5.1. Отдельные требования к официальным зеркалам 1 уровня<a class=anchor href=#mirror-official-requirements></a></h3><div class=paragraph><p>Описать требования для всех официальных зеркал не так просто, поскольку проект FreeBSD достаточно мягок в этом отношении. Несколько проще указать, что требуется от <em>официальных зеркал уровня 1</em>. Прочие официальные зеркала должны рассматривать этот список как <em>настойчивые пожелания</em>.</p></div><div class=paragraph><p>Зеркала 1 уровня должны:</p></div><div class=ulist><ul><li><p>поддерживать полный список файлов</p></li><li><p>предоставлять доступ для других зеркал</p></li><li><p>обеспечивать доступ по протоколам ftp и rsync.</p></li></ul></div><div class=paragraph><p>Кроме того, администратор такого зеркала должен быть подписан на <a href=https://lists.FreeBSD.org/subscription/freebsd-hubs>Список рассылки, посвящённый зеркалированию FreeBSD</a>. См. <a href=https://docs.freebsd.org/ru/books/handbook/eresources#eresources-mail>здесь</a> для дополнительной информации о подписке.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>Администраторы зеркал, в особенности 1 уровня, должны <em>очень</em> внимательно следить за <a href=http://www.FreeBSD.org/releng/>графиком релизов</a>. Это поможет подготовиться к крупным всплескам нагрузки на зеркало, которые всегда происходят после очередного релиза.</p></div><div class=paragraph><p>Кроме того, важно поддерживать актуальность зеркал (в особенности зеркал уровня 1). Если Зеркало1 не синхронизировалось в течение длительного времени, то зеркала следующего уровня будут синхронизироваться по устаревшей информации и т.д. Поддерживайте актуальность ваших зеркал!</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=mirror-official-become>5.2. Как стать официальным зеркалом?<a class=anchor href=#mirror-official-become></a></h3><div class=paragraph><p>На текущий момент заявки на подключение новых зеркал не принимаются.</p></div></div></div></div><div class=sect1><h2 id=mirror-statpages>6. Статистика некоторых зеркал<a class=anchor href=#mirror-statpages></a></h2><div class=sectionbody><div class=paragraph><p>Вот несколько ссылок на статистику использования зеркал</p></div><div class=sect2><h3 id=mirror-statpagesftp>6.1. Статистика FTP сайтов<a class=anchor href=#mirror-statpagesftp></a></h3><div class=ulist><ul><li><p>ftp.is.FreeBSD.org - <a href=mailto:hostmaster@is.FreeBSD.org>hostmaster@is.FreeBSD.org</a> - <a href=http://www.rhnet.is/status/draupnir/draupnir.html>(загрузка канала)</a> <a href=http://www.rhnet.is/status/ftp/ftp-notendur.html>(FTP процессы)</a> <a href=http://www.rhnet.is/status/ftp/http-notendur.html>(HTTP процессы)</a></p></li><li><p>ftp.cz.FreeBSD.org - <a href=mailto:cejkar@fit.vutbr.cz>cejkar@fit.vutbr.cz</a> - <a href=http://www.cz.FreeBSD.org/stats/mrtg/net.html>(загрузка канала)</a> <a href=http://www.freebsd.cz/stats/mrtg/ftpd.html>(FTP процессы)</a> <a href=http://www.freebsd.cz/stats/mrtg/rsyncd.html>(rsync процессы)</a></p></li><li><p>ftp2.ru.FreeBSD.org - <a href=mailto:mirror@macomnet.ru>mirror@macomnet.ru</a> - <a href=http://mirror.macomnet.net/mrtg/mirror.macomnet.net_195.128.64.25.html>(Bandwidth)</a> <a href=http://mirror.macomnet.net/mrtg/mirror.macomnet.net_proc.html>(HTTP and FTP users)</a></p></li></ul></div></div></div></div><hr><div class=last-modified><p><strong>Изменено</strong>: 3 ноября 2021 г. by <a href="https://cgit.freebsd.org/doc/commit/?id=64acd169b8" target=_blank>Sergio Carlavilla Delgado</a></p></div></div><aside class=toc><div class=toc-content><h3>Содержание</h3><nav id=TableOfContents><ul><li><a href=#mirror-contact>1. Контактная информация</a></li><li><a href=#mirror-requirements>2. Требования к зеркалам FreeBSD</a></li><li><a href=#mirror-howto>3. Как вести зеркало FreeBSD</a></li><li><a href=#mirror-where>4. С какого сервера синхронизироваться</a></li><li><a href=#mirror-official>5. Официальные зеркала</a></li><li><a href=#mirror-statpages>6. Статистика некоторых зеркал</a></li></ul></nav><hr><div class=resources><h3>Материалы</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Скачать PDF"></i><a href=https://download.freebsd.org/doc/ru/articles/hubs/hubs_ru.pdf>Скачать PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Редактировать эту страницу"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ru/_index target=_blank>Редактировать эту страницу</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/ru/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Выберите язык">
<span>Русский</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>Система</option><option value=theme-light>Светлый</option><option value=theme-dark>Тёмный</option><option value=theme-high-contrast>Высокая контрастность</option></select></div></div></section><section class=about-column><h3 class=column-title>О нас</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>Фонд FreeBSD</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Получить FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Кодекс Этики</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Бюллетени Безопасности</a></li></ul></section><section class=documentation-column><h3 class=column-title>Документация</h3><ul class=column-elements-container><li><a href=/ru class=column-element>Портал документации</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Страницы Справочника</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Презентации и публикации</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Предыдущие версии</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>Документы 4.4BSD</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Сообщество</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/ru/articles/contributing class=column-element>Принять участие</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Форум Сообщества</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Списки рассылки</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>Каналы IRC</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Трекер ошибок</a></li></ul></section><section class=legal-column><h3 class=column-title>Юридическая информация</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Пожертвования</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Лицензирование</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Политика Конфиденциальности</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Юридические оговорки</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 Проект FreeBSD. Все права защищены</p><span>Сделано с помощью <span class=heart>♥</span> Сообществом FreeBSD</span></section></div></footer></body></html>