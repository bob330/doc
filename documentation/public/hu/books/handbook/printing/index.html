<!doctype html><html class=theme-light lang=hu><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/hu/books/handbook/printing/><title>9. Fejezet - Nyomtatás | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="9. Fejezet - Nyomtatás"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="hu"><meta property="og:url" content="http://172.16.201.134:1313/hu/books/handbook/printing/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/hu\/books\/handbook\/printing\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/hu>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/hu/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/hu/books>Books</a></li><li><a href=http://172.16.201.134:1313/hu/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/hu/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=hu>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/preface/>Előszó</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-audience>Kiknek szánjuk ezt a könyvet</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes-from3>Változtatások a harmadik kiadás óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes-from2>Változtatások a második kiadás (2004) óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes>Változtatások az elsõ kiadás (2001) óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-overview>A könyv felépítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-conv>A könyvben alkalmazott konvenciók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-acknowledgements>Köszönetnyilvánítás</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/parti/>I. Rész Bevezetés</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/>1. Fejezet - Bemutatkozás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#introduction-synopsis>1.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#nutshell>1.2. Üdvözöljük a FreeBSD-ben!</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#history>1.3. A FreeBSD Projektrõl</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/install/>2. Fejezet - A FreeBSD telepítése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-synopsis>2.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-hardware>2.2. Hardverkövetelmények</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-pre>2.3. A telepítés elõtt elvégzendõ feladatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-start>2.4. A telepítés megkezdése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#using-sysinstall>2.5. A sysinstall bemutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-steps>2.6. Lemezterület lefoglalása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-choosing>2.7. A telepítendõ összetevõk kiválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-media>2.8. A telepítés eszközének kiválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-final-warning>2.9. A telepítés véglegesítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-post>2.10. A telepítés után</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-trouble>2.11. Hibakeresés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-advanced>2.12. Telepítési útmutató haladóknak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-diff-media>2.13. Saját telepítõeszköz elkészítése</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/basics/>3. Fejezet - A UNIX alapjai</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-synopsis>3.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#consoles>3.2. Virtuális konzolok és terminálok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#permissions>3.3. Engedélyek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#dirstructure>3.4. A könyvtárak elrendezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#disk-organization>3.5. A lemezek szervezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#mount-unmount>3.6. Állományrendszerek csatlakoztatása és leválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-processes>3.7. Folyamatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-daemons>3.8. Démonok, jelzések és a futó programok leállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#shells>3.9. Parancsértelmezõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#editors>3.10. Szövegszerkesztõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-devices>3.11. Eszközök és eszközleírók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#binary-formats>3.12. Bináris formátumok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-more-information>3.13. Bõvebben olvashatunk…​</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/ports/>4. Fejezet - Alkalmazások telepítése: csomagok és portok</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-synopsis>4.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-overview>4.2. Az alkalmazások telepítésének összefoglalása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-finding-applications>4.3. A számunkra szükséges alkalmazások felkutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#packages-using>4.4. A csomagrendszer használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-using>4.5. A Portgyûjtemény használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-nextsteps>4.6. Telepítés utáni teendõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-broken>4.7. Teendõ a sérült portokkal</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/x11/>5. Fejezet - Az X Window System</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x11-synopsis>5.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-understanding>5.2. Az X áttekintése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-install>5.3. Az X11 telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-config>5.4. Az X11 beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-fonts>5.5. Betûtípusok használata az X11-ben</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-xdm>5.6. Az X bejelentkeztetõ képernyõje</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x11-wm>5.7. Munkakörnyezetek</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partii/>II. Rész Gyakori feladatok</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/>6. Fejezet - Asztali alkalmazások</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-synopsis>6.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-browsers>6.2. Böngészõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-productivity>6.3. Irodai eszközök</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-viewers>6.4. Dokumentum-megjelenítõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-finance>6.5. Pénzügyi szoftverek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-summary>6.6. Összefoglalás</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/>7. Fejezet - Multimédia</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#multimedia-synopsis>7.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#sound-setup>7.2. A hangkártya beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#sound-mp3>7.3. MP3</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#video-playback>7.4. Videók lejátszása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#tvcard>7.5. TV kártyák beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#scanners>7.6. Lapolvasók</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/>8. Fejezet - A FreeBSD rendszermag testreszabása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Miért készítsünk saját rendszermagot?</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-devices>8.3. A rendszerünkben levõ hardverek összeszedése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-modules>8.4. Meghajtók, alrendszerek és modulok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-building>8.5. Saját rendszermag készítése és telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-config>8.6. A konfigurációs állomány</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-trouble>8.7. Ha valamilyen hiba történne</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle checked>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/printing/>9. Fejezet - Nyomtatás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-synopsis>9.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-intro-spooler>9.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-intro-setup>9.3. Kezdeti beállítások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-advanced>9.4. Magasszintû nyomtatóbeállítás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-using>9.5. A nyomtatók használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-lpd-alternatives>9.6. Más nyomtatási rendszerek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-troubleshooting>9.7. Hibakeresés</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/>10. fejezet - Bináris Linux kompatibilitás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Telepítés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-mathematica>10.3. A Mathematica® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-maple>10.4. A Maple™ telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-matlab>10.5. A MATLAB® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-oracle>10.6. Az Oracle® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#sapr3>10.7. Az SAP® R/3® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-advanced>10.8. Témák haladóknak</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partiii/>III. Rész Rendszeradminisztráció</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/config/>11. Fejezet - Beállítás és finomhangolás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#config-synopsis>11.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-initial>11.2. Kezdeti beállítások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-core-configuration>11.3. A mag beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-appconfig>11.4. Az alkalmazások beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-starting-services>11.5. Szolgáltatások indítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-cron>11.6. A <code>cron</code> segédprogram beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-rcd>11.7. Az rc használata FreeBSD alatt</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#config-network-setup>11.8. A hálózati kártyák beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-virtual-hosts>11.9. Virtuális címek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-configfiles>11.10. Konfigurációs állományok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-sysctl>11.11. Finomhangolás a sysctl használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-disk>11.12. A lemezek finomhangolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-kernel-limits>11.13. A rendszermag korlátainak finomhangolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#adding-swap-space>11.14. A lapozóterület bõvítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#acpi-overview>11.15. Energia- és erõforrásgazdálkodás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#ACPI-debug>11.16. A FreeBSD ACPI támogatásának használata és nyomonkövetése</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/boot/>12. Fejezet - A FreeBSD rendszerindítási folyamata</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-synopsis>12.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-introduction>12.2. A rendszerindítás problémája</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-blocks>12.3. A boot manager és az indulás fokozatai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-kernel>12.4. Kapcsolat a rendszermaggal a rendszerindítás folyamán</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#device-hints>12.5. Eszköz útmutatók (device.hints)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-init>12.6. Init: A folyamatirányítás elindítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-shutdown>12.7. A leállítási folyamat</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/users/>13. Fejezet - Felhasználók és hozzáférések alapvető kezelése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-synopsis>13.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-introduction>13.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-superuser>13.3. Az adminisztrátori hozzáférés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-system>13.4. Rendszerhozzáférések</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-user>13.5. Felhasználói hozzáférések</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-modifying>13.6. A hozzáférések módosítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-limiting>13.7. A felhasználók korlátozása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-groups>13.8. Csoportok</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/security/>14. Fejezet - Biztonság</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-synopsis>14.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-intro>14.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#securing-freebsd>14.3. A FreeBSD védelme</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#crypt>14.4. DES, Blowfish, MD5 és a Crypt</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#one-time-passwords>14.5. Egyszeri jelszavak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#tcpwrappers>14.6. A TCP kapcsolatok burkolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#ipsec>14.10. VPN IPsec felett</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#fs-acl>14.12. Az állományrendszerek hozzáféréseit vezérlõ listák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-portaudit>14.13. A külsõ programok biztonsági problémáinak figyelése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-advisories>14.14. A FreeBSD biztonsági figyelmeztetései</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-accounting>14.15. A futó programok nyilvántartása</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/jails/>15. Fejezet - A jail alrendszer</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-synopsis>15.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-terms>15.2. A jail alrendszerhez kapcsolódó fogalmak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-intro>15.3. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-build>15.4. A jailek létrehozása és vezérlése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-tuning>15.5. Finomhangolás és karbantartás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-application>15.6. A jailek alkalmazása</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mac/>16. Fejezet - Kötelező hozzáférés-vezérlés (MAC)</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-synopsis>16.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-inline-glossary>16.2. A fejezet fontosabb fogalmai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-initial>16.3. A MAC ismertetése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-understandlabel>16.4. Bõvebben a MAC címkéirõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-planning>16.5. A védelem megtervezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-modules>16.6. A modulok beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-seeotheruids>16.7. A seeotheruids MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-bsdextended>16.8. A bsdextended MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-ifoff>16.9. Az ifoff MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-portacl>16.10. A portacl MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-partition>16.11. A partition MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-mls>16.12. A többszintû biztonsági MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-biba>16.13. A Biba MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-lomac>16.14. A LOMAC MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-implementing>16.15. A Nagios elzárása a MAC rendszerrel</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-userlocked>16.16. A felhasználók korlátozása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-troubleshoot>16.17. A hibák elhárítása a MAC rendszerben</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/audit/>17. Fejezet - Biztonsági események vizsgálata</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-synopsis>17.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-inline-glossary>17.2. A fejezet fontosabb fogalmai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-install>17.3. A vizsgálat támogatásának telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-config>17.4. A vizsgálat beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-administration>17.5. A vizsgálati alrendszer használata</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/disks/>18. Fejezet - Háttértárak</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-synopsis>18.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-naming>18.2. Az eszközök elnevezései</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-adding>18.3. Lemezek hozzáadása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#usb-disks>18.5. USB tárolóeszközök</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#creating-cds>18.6. Lézeres tárolóeszközök (CD-k) létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#creating-dvds>18.7. Lézeres tárolóeszközök (DVD-k) létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#floppies>18.8. Hajlékonylemezek létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backups-tapebackups>18.9. Szalagok létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backups-floppybackups>18.10. Biztonsági mentés hajlékonylemezekre</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backup-strategies>18.11. Mentési stratégiák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backup-basics>18.12. Alapvetõ tudnivalók a biztonsági mentésrõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-virtual>18.13. Hálózat, memória és állomány alapú állományrendszerek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#snapshots>18.14. Az állományrendszerek pillanatképei</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#quotas>18.15. Az állományrendszerek kvótái</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-encrypting>18.16. A lemezpartíciók titkosítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#swap-encrypting>18.17. A lapozóterület titkosítása</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/geom/>19. Fejezet - GEOM: A moduláris lemezszervező rendszer</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-synopsis>19.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-intro>19.2. A GEOM bemutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-striping>19.3. RAID0 - Csíkozás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - Tükrözés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-ggate>19.5. Eszközök hálózati illesztése a GEOM-ban</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-glabel>19.6. A lemezes eszközök címkézése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-gjournal>19.7. Naplózó UFS GEOM-on keresztül</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/>20. Fejezet - Támogatott állományrendszerek</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/#filesystems-synopsis>20.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/#filesystems-zfs>20.2. A Z állományrendszer (ZFS)</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/>21. Fejezet - A Vinum kötetkezelő</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-synopsis>21.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-intro>21.2. Kicsik a lemezeink</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-access-bottlenecks>21.3. A hozzáférési idõk szûk keresztmetszetei</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-data-integrity>21.4. Adatintegritás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-objects>21.5. A Vinum objektumai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-examples>21.6. Példák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-object-naming>21.7. Az objektumok elnevezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-config>21.8. A Vinum beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-root>21.9. Rendszerindítás Vinum-kötetrõl</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/>22. Fejezet - Virtualizáció</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-synopsis>22.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-guest>22.2. A FreeBSD mint vendég</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-host>22.3. A FreeBSD mint gazda</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/>23. Fejezet - Honosítás - Az I18N/L10N használata és beállítása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-synopsis>23.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-basics>23.2. Az alapok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#using-localization>23.3. A honosítás használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-compiling>23.4. I18N programok fordítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#lang-setup>23.5. A FreeBSD honosítása adott nyelvekre</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/>24. Fejezet - A FreeBSD frissítése és frissen tartása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. A FreeBSD frissítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. A Portgyûjtemény frissítése a Portsnap használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. A dokumentáció frissítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#current-stable>24.5. A fejlesztõi ág követése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#synching>24.6. A forrás szinkronizálása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#makeworld>24.7. Az alaprendszer újrafordítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#small-lan>24.8. A források követése több géppel</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/>25. Fejezet - DTrace</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-synopsis>25.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-implementation>25.2. Eltérések az implementációban</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-enable>25.3. A DTrace támogatásának engedélyezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-using>25.4. A DTrace használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-language>25.5. A D nyelv</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partiv/>IV. Rész Hálózati kommunikáció</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/>26. Fejezet - Soros vonali kommunikáció</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serial-synopsis>26.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serial>26.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#term>26.3. Terminálok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#dialup>26.4. Betárcsázós szolgáltatások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#dialout>26.5. A betárcsázós szolgáltatások használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serialconsole-setup>26.6. A soros vonali konzol beállítása</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/>27. Fejezet - A PPP és a SLIP</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#userppp>27.2. A felhasználói PPP alkalmazása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp>27.3. A rendszerszintû PPP alkalmazása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. PPP kapcsolatok hibaelhárítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#pppoe>27.5. A PPP használata Ethernet felett (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#pppoa>27.6. PPP ATM felett (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#slip>27.7. A SLIP használata</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mail/>28. Fejezet - Elektronikus levelezés</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-synopsis>28.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-using>28.2. Az elektronikus levelezés használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#sendmail>28.3. A sendmail beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-changingmta>28.4. A levéltovábbító ügynök megváltoztatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-trouble>28.5. A hibák elhárítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-advanced>28.6. Komolyabb témák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-UUCP>28.7. SMTP és az UUCP</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#outgoing-only>28.8. Csak küldés beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-dialup>28.9. Levelezés betárcsázós kapcsolattal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-Auth>28.10. Az SMTP hitelesítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-agents>28.11. Levelezõ kliensek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-fetchmail>28.12. A fetchmail használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-procmail>28.13. A procmail használata</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/>29. Fejezet - Hálózati szerverek</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-servers-synopsis>29.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-inetd>29.2. Az inetd"szuperszerver"</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-nfs>29.3. A hálózati állományrendszer (NFS)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-nis>29.4. Hálózati információs rendszer (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-dhcp>29.5. A hálózat automatikus beállítása (DHCP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-dns>29.6. Névfeloldás (DNS)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-apache>29.7. Az Apache webszerver</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-ftp>29.8. Állományok átvitele (FTP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-samba>29.9. Állomány- és nyomtatási szolgáltatások Microsoft® Windows® kliensek számára (Samba)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-ntp>29.10. Az órák egyeztetése az NTP használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-syslogd>29.11. Távoli gépek naplózása <code>syslogd</code> használatával</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/>30. Fejezet - Tűzfalak</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-intro>30.1. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-concepts>30.2. Röviden a tûzfalakról</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-apps>30.3. Tûzfalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-pf>30.4. Az OpenBSD csomagszûrõje (PF) és az ALTQ</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-ipf>30.5. Az IPFILTER (IPF) tûzfal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/>31. Fejezet - Egyéb haladó hálózati témák</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-routing>31.2. Átjárók és az útválasztás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-wireless>31.3. Vezeték nélküli hálózatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-bridging>31.5. Hálózati hidak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-aggregation>31.6. Linkek összefûzése és hibatûrése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-diskless>31.7. Lemez nélküli mûködés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-isdn>31.8. ISDN</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-natd>31.9. Hálózati címfordítás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-plip>31.10. Párhuzamos vonali IP (PLIP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-ipv6>31.11. Az IPv6</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-atm>31.12. Az Aszinkron adatátviteli mód (ATM)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#carp>31.13. A Közös cím redundancia protokoll (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partv/>V. Rész Függelék</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/>A. Függelék - A FreeBSD beszerzése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-cdrom>A.1. CD és DVD kiadók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-ftp>A.2. FTP oldalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#anoncvs>A.3. Anonim CVS</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#ctm>A.4. A CTM használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#cvsup>A.5. A CVSup használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#cvs-tags>A.6. CVS címkék</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-afs>A.7. AFS oldalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-rsync>A.8. Rsync oldalak</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/>B. függelék - Irodalomjegyzék</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-freebsd>B.1. A FreeBSD-rõl szóló könyvek és folyóiratok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-userguides>B.2. Felhasználói kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-adminguides>B.3. Rendszeradminisztrátori kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-programmers>B.4. Programozói kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-osinternals>B.5. Az operációs rendszerek belsõ mûködésérõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-security>B.6. Biztonságról szóló írások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-hardware>B.7. Hardverrel foglalkozó írások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-history>B.8. UNIX® történelem</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-journals>B.9. Magazinok és folyóiratok</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/>C. Függelék - Források az interneten</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-mail>C.1. Levelezési listák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-news>C.2. Usenet hírcsoportok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-web>C.3. Világhálós szolgáltatások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-email>C.4. E-mail címek</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/pgpkeys/>D. Függelék - PGP-kulcsok</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Tisztségviselők</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>9. Fejezet - Nyomtatás</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#printing-synopsis>9.1. Áttekintés</a></li><li><a href=#printing-intro-spooler>9.2. Bevezetés</a></li><li><a href=#printing-intro-setup>9.3. Kezdeti beállítások</a></li><li><a href=#printing-advanced>9.4. Magasszintû nyomtatóbeállítás</a></li><li><a href=#printing-using>9.5. A nyomtatók használata</a></li><li><a href=#printing-lpd-alternatives>9.6. Más nyomtatási rendszerek</a></li><li><a href=#printing-troubleshooting>9.7. Hibakeresés</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=printing-synopsis>9.1. Áttekintés<a class=anchor href=#printing-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD a nyomtatók széles skálájával képes együttmûködni, a legrégebbi vegyszeres nyomtatótól kezdve egészen napjaink lézernyomtatójáig, aminek köszönhetõen alkalmazásainkkal nagyon jó minõségû nyomtatásokat tudunk készíteni.</p></div><div class=paragraph><p>A FreeBSD a helyi hálózaton nyomtatószervernek is beállítható. Ekkor a vele közös hálózatra csatlakozó többi, FreeBSD, Windows® vagy Mac OS® rendszerû számítógéptõl képes nyomtatási kéréseket elfogadni. A FreeBSD gondoskodik róla, hogy egyszerre csak egy nyomtatás készüljön el, számon tartja, hogy mely felhasználók és számítógépek nyomtatnak a legtöbbet, és minden feladathoz "munkalapot" (banner page) készít, amiben többek közt megtalálhatjuk, hogy kihez tartozik.</p></div><div class=paragraph><p>A fejezet elolvasása során megismerjük:</p></div><div class=ulist><ul><li><p>hogyan állítsuk be a FreeBSD nyomtatási sorát;</p></li><li><p>hogyan telepítsünk nyomtatási szûrõket, hogyan kezeljünk különbözõ speciális nyomtatási feladatokat, tehát például miként alakítsuk át a beérkezõ dokumentumokat olyan nyomtatási formátumra, amelyet a nyomtatónk is megért;</p></li><li><p>hogyan engedélyezzük a fejléc- vagy nyomtatási információk kinyomtatását;</p></li><li><p>hogyan nyomtassunk más számítógépekhez csatlakoztatott nyomtatókkal;</p></li><li><p>hogyan nyomtassunk a hálózatra közvetlenül kapcsolt nyomtatókkal;</p></li><li><p>hogyan állítsuk be a nyomtatási korlátozásokat, például a nyomtatási feladatok méretét, amivel egyes felhasználók nyomtatását visszafoghatjuk;</p></li><li><p>hogyan készítsünk nyomtatási kimutatásokat és nyilvántartást a nyomtató használatáról;</p></li><li><p>hogyan keressük meg a nyomtatás során felmerülõ problémák okait.</p></li></ul></div><div class=paragraph><p>A fejezet elolvasásához ajánlott:</p></div><div class=ulist><ul><li><p>egy új rendszermag beállításának és telepítésének ismerete (<a href=../kernelconfig/#kernelconfig>A FreeBSD rendszermag testreszabása</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=printing-intro-spooler>9.2. Bevezetés<a class=anchor href=#printing-intro-spooler></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD-ben a nyomtatók mûködéséhez be kell állítani az LPD nyomtatási rendszert. Ez a Berkeley sornyomtatási rendszere, amelyet ezentúl röviden csak LPD-nek fogunk hívni. Ez a FreeBSD alapértelmezett szabványos nyomtatásvezérlõ rendszere. Ebben a fejezetben az LPD és annak konfigurációja kerül bemutatásra.</p></div><div class=paragraph><p>Ha már találkoztunk az LPD-vel vagy hozzá hasonló rendszerekkel, akkor innen nyugodtan ugorhatunk a <a href=#printing-intro-setup>Kezdeti beállítások</a> címû szakaszra.</p></div><div class=paragraph><p>Az LPD vezérli a számítógéphez csatlakoztatott nyomtató összes funkcióját. Számos feladata van:</p></div><div class=ulist><ul><li><p>Felügyeli a lokálisan és hálózaton keresztül csatlakoztatott nyomtatók hozzáféréseit.</p></li><li><p>Lehetõvé teszi az átküldött állományok kinyomtatását, amelyeket <em>nyomtatási feladatoknak</em> nevezünk.</p></li><li><p>Minden nyomtatóhoz fenntart egy nyomtatási <em>sort</em>, amivel meg tudja akadályozni, hogy egyszerre több felhasználó is hozzá tudjon férni az egyes nyomtatókhoz.</p></li><li><p>A <em>fejléceket</em> (vagy más néven <em>munka-</em> vagy <em>elválasztó lapokat</em>) nyomtat, így a felhasználók könnyen megtalálják a saját nyomtatásaikat a többi közt.</p></li><li><p>Felügyeli a soros portokon csatlakozó nyomtatók kommunikációs beállításait.</p></li><li><p>A hálózaton keresztül átküldi a nyomtatási feladatokat egy másik számítógép LPD sorába.</p></li><li><p>A nyomtatási feladatok formázásához lefuttatja az adott nyomtató nyelvéhez és képességeihez illeszkedõ speciális szûrõket.</p></li><li><p>Nyilvántartja a nyomtató kihasználtságát.</p></li></ul></div><div class=paragraph><p>A beállításait tartalmazó állomány (<span class=filename>/etc/printcap</span>) és a speciális szûrõprogramok segítségével az LPD sokféle nyomtatón képes az összes említett feladatot vagy annak egy részét megvalósítani.</p></div><div class=sect2><h3 id=printing-intro-why>9.2.1. Amiért nyomtatási sort érdemes használni<a class=anchor href=#printing-intro-why></a></h3><div class=paragraph><p>Amikor csak egyedül vagyunk a rendszerben, felmerülhet bennünk a kérdés, hogy minek is kellene nekünk veszõdni a nyomtatási sor beállításával, hiszen nincs szükségünk sem a hozzáférések vezérlésére, sem fejlécekre, sem pedig nyilvántartásra. Noha akár közvetlenül is el tudjuk érni a nyomtatót, néhány okból azért mégis érdemes nyomtatási sort használni:</p></div><div class=ulist><ul><li><p>Az LPD a háttérben nyomtat, ezért ilyenkor nem kell megvárni, amíg az adat átmásolódik a nyomtatóra.</p></li><li><p>Az LPD tetszõlegesen tudja alakítani a nyomtatási feladatokat: hozzájuk tud tenni különbözõ adatokat (dátum és idõ), vagy a speciális állományokat (például a TeX DVI formátumát) képes megértetni a nyomtatóval, és nem nekünk kell mindezeket a lépéseket elvégeznünk.</p></li><li><p>Számos nyomtatási lehetõséggel rendelkezõ szabad és kereskedelmi program arra számít, hogy a rendszerünkben nyomtatási sor található, ezért annak beállításával sokkal könnyebb használni ezeket a szoftvereket.</p></li></ul></div></div></div></div><div class=sect1><h2 id=printing-intro-setup>9.3. Kezdeti beállítások<a class=anchor href=#printing-intro-setup></a></h2><div class=sectionbody><div class=paragraph><p>Úgy tudjuk használni a nyomtatókat az LPD nyomtatási rendszerével, ha egyaránt beállítjuk a nyomtatót és magát az LPD-t is. Itt a beállítás két szintjét tárgyaljuk:</p></div><div class=ulist><ul><li><p>Az <a href=#printing-simple>Alacsonyszintû nyomtatóbeállítás</a> címû szakaszból megtudhatjuk, hogyan tudunk csatlakoztatni egy nyomtatót, hogyan adjuk meg az LPD-nek, miként kommunikáljon vele, hogyan nyomtassunk ki egyszerû szöveges állományokat a nyomtatón.</p></li><li><p>A <a href=#printing-advanced>Magasszintû nyomtatóbeállítás</a> szakaszban bemutatjuk, hogyan nyomtassunk ki különféle speciális állományokat, hogyan készíttessünk fejléceket, hogyan nyomtassunk hálózaton keresztül, hogyan vezéreljük a nyomtatók hozzáférését és hogyan tartsuk nyilván a nyomtató használatát.</p></li></ul></div><div class=sect2><h3 id=printing-simple>9.3.1. Alacsonyszintû nyomtatóbeállítás<a class=anchor href=#printing-simple></a></h3><div class=paragraph><p>Ebben a szakaszban láthatjuk, miképpen kell beállítani a nyomtatónkat és az LPD hogyan lesz képes azt használatba venni. Az alapoktól kezdünk:</p></div><div class=ulist><ul><li><p>A <a href=#printing-hardware>Hardveres beállítás</a> címû szakaszban abban kapunk segítséget, hogyan kell a nyomtatót a számítógéphez csatlakoztatni.</p></li><li><p>A <a href=#printing-software>Szoftveres beállítás</a> címû szakaszban az LPD nyomtatási rendszer beállítását tartalmazó állományt (<span class=filename>/etc/printcap</span>) vesszük sorra.</p></li></ul></div><div class=paragraph><p>Amennyiben olyan nyomtatót akarunk beállítani, amely nem helyileg, hanem valamilyen hálózati protokollon keresztül csatlakozik, nézzük meg a <a href=#printing-advanced-network-net-if>Nyomtatók hálózati adatcsatlakozással</a> címû szakaszt.</p></div><div class=paragraph><p>Habár ez a szakasz nevében csupán "Alacsonyszintû nyomtatóbeállításról" szól, meglehetõsen szerteágazó tud lenni. A nyomtató hardveres és szoftveres életre keltése az egyik legnehezebb feladat. Ha van egy mûködõ nyomtatónk, a fejlécek és a nyilvántartás beállítása tulajdonképpen már gyerekjáték.</p></div><div class=sect3><h4 id=printing-hardware>9.3.1.1. Hardveres beállítás<a class=anchor href=#printing-hardware></a></h4><div class=paragraph><p>Ebben a szakaszban a nyomtatók csatlakoztatásának lehetséges módozatairól esik szó. Beszélni fogunk mindenféle portokról és kábelekrõl, és a FreeBSD rendszermagjának az egyes nyomtatók használatához szükséges beállításairól is.</p></div><div class=paragraph><p>Ha korábban tudtuk csatlakoztatni a nyomtatónkat, és más operációs rendszerekkel már sikeresen nyomtattunk is vele, akkor rögtön ugorhatunk is a <a href=#printing-software>Szoftveres beállítás</a>okat tartalmazó szakaszra.</p></div><div class=sect4><h5 id=printing-ports>9.3.1.1.1. Portok és kábelek<a class=anchor href=#printing-ports></a></h5><div class=paragraph><p>A személyi számítógépekhez kapható nyomtatók általában a következõ három csatolófelület egyikével rendelkeznek:</p></div><div class=ulist><ul><li><p>A <em>soros</em>, más néven RS-232-es vagy COM porton keresztül kommunikáló felületek a számítógép soros portján küldenek adatot a nyomtatónak. A soros csatolófelületek igen elterjedtek a számítógépiparban, könnyen tudunk ilyen kábelt szerezni, gyorsan is gyártható. Elõfordulhat, hogy a soros csatolófelületek használatához valamilyen különleges kábelre, valamint bonyolult kommunikációs beállítások megadására van szükség. A legtöbb soros port által elérhetõ legnagyobb adatátviteli sebesség másodpercenként 115 200 bit, ami miatt azonban a komolyabb grafikai tartalmak nyomtatása szinte lehetetlen.</p></li><li><p>A <em>párhuzamos</em> csatolófelületek a számítógépünk párhuzamos portjával küldenek adatokat a nyomtatónak. A párhuzamos felületek gyorsabbak az RS-232 soros felületnél, és a számítógéppiacon is gyakran megtalálhatóak. Könnyen tudunk ilyen kábelt szerezni, azonban kézileg nehezebb elkészíteni. A párhuzamos csatolófelületekhez általában nem tartoznak kommunikációs beállítások, ezért rendkívül egyszerûen el lehet boldogulni velük.</p><div class=paragraph><p>A párhuzamos felületekre olykor "Centronics" csatolófelületként is hivatkoznak, amelyet egy nyomtatótípus után neveztek el.</p></div></li><li><p>A Universal Serial Bus (Univerzális soros busz) rövidítéseként használt USB elnevezésû csatolófelület a párhuzamos és a soros felületeknél jóval nagyobb sebességre képes. A hozzá tartozó kábelek felépítése egyszerû és az áruk olcsó. Habár a nyomtatás terén az USB hivatott leváltani az RS-232-es soros és a párhuzamos felületeket, nem mindegyik UNIX® rendszer támogatja kellõképpen. Ezt a problémát például úgy kerülhetjük el, ha olyan nyomtatót vásárolunk, amelyen a legtöbbhöz hasonlóan a párhuzamos és az USB csatlakozás is megtalálható.</p></li></ul></div><div class=paragraph><p>A párhuzamos felületeken általában csak egy irányban tudunk üzeneteket küldeni (a számítógéptõl a nyomtatóhoz), miközben az USB és a soros felület használatával mind a két irányban is. FreeBSD alatt viszont már az újabb (EPP és ECP) párhuzamos portok egy IEEE 1284 szabványú kábellel képesek oda-vissza kommunikálni.</p></div><div class=paragraph><p>A párhuzamos nyomtatók kétirányú kommunikációját általában két mód közül az egyiken szokták megvalósítani. Az elsõ esetben a FreeBSD a nyomtatóhoz egy speciális meghajtót használ, amely ismeri az általa beszélt nyelvet. Ilyenek a tintasugaras nyomtatók, amelyek más egyéb állapotinformációk mellett ezen keresztül képesek jelezni a tintapatronokban levõ tinta mennyiségét. A második esetben a nyomtató ismeri a PostScript® nyelvet.</p></div><div class=paragraph><p>A PostScript® nyelvû nyomtatási feladatok valójában a nyomtatónak küldött programok. Használatukhoz még papírra sincs feltétlenül szükség, és elõfordulhat, hogy közvetlenül a számítógépnek válaszolnak. A PostScript® is kétirányú kommunikáción keresztül értesíti a számítógépet az olyan gondokról, mint például a PostScript® programokban levõ hibák vagy a papír beakadása, amely információnak a felhasználók szoktak örülni. Hovatovább ez a kétirányú kommunikáció a kulcsa a PostScript® nyomtatók hatékony nyilvántartásának is: egyszerûen lekérdezzük a nyomtatótól a lapszámlálót (ami megadja, hogy a nyomtató eddig mennyi lapot nyomtatott ki), kiküldjük a felhasználóhoz tartozó feladatot és ismét lekérdezzük a lapszámlálót. A két érték kivonásából tájékozódhatunk a felhasználó által igényelt lapok mennyiségérõl.</p></div></div><div class=sect4><h5 id=printing-parallel>9.3.1.1.2. Párhuzamos portok<a class=anchor href=#printing-parallel></a></h5><div class=paragraph><p>A párhuzamos csatolófelületen érintkezõ nyomtató használatához kapcsoljunk össze számítógépünket és nyomtatónkat egy párhuzamos kábellel. Az erre vonatkozó konkrét utasítások a nyomtató és/vagy a számítógép kézikönyvében olvashatóak.</p></div><div class=paragraph><p>Jegyezzük meg, hogy a számítógép melyik párhuzamos portjára csatlakoztattuk a kábelt. FreeBSD alatt az elsõ ilyen port a <span class=filename>ppc0</span> eszköz, a második pedig a <span class=filename>ppc1</span> eszköz lesz és így tovább. A nyomtatóeszköz elnevezése ugyanezt a sémát követi: a <span class=filename>/dev/lpt0</span> lesz az elsõ párhuzamos porton levõ nyomtató stb.</p></div></div><div class=sect4><h5 id=printing-serial>9.3.1.1.3. Soros portok<a class=anchor href=#printing-serial></a></h5><div class=paragraph><p>A soros csatolófelületet használó nyomtatók beüzemeléséhez elõször egy soros kábel segítségével kapcsoljuk össze a számítógépünkkel. Ennek pontos részleteit a nyomtató és/vagy a számítógépünk kézikönyvében találhatjuk meg.</p></div><div class=paragraph><p>Ha nem vagyunk benne biztosak, hogy milyen a "megfelelõ soros kábel", próbáljunk az alábbiak alapján dönteni:</p></div><div class=ulist><ul><li><p>A <em>modem</em> kábele a két oldalán levõ, egymásnak megfelelõ tüskéket közvetlenül összeköti. Ezt a típust nevezik "DTE-DCE" kábelnek.</p></li><li><p>A <em>null-modem</em> kábel bizonyos érintkezõket rendesen, másokat pedig fordítva köt össze (például a küldõt a fogadóval), illetve némelyeket rövidre zár közvetlenül a csatlakozón belül. Ez a típus a "DTE-DTE" kábel.</p></li><li><p>Néhány speciális nyomtató esetén elõfordul még a <em>soros nyomtató</em>kábel, amely leginkább a null-modem kábelekhez hasonlít, azonban az ott rövidre zárt csatornák itt a nekik megfelelõ érintkezõknek továbbítanak jeleket.</p></li></ul></div><div class=paragraph><p>Emellett még a nyomtató elõlapján vagy az alján található kapcsolók segítségével be kell állítanunk a nyomtatóhoz tartozó kommunikációs paramétereket is. Itt válasszuk azt a <code>bps</code> (a bitek száma másodpercenként) értéket, amelyet még a számítógépünk és a nyomtatónk is egyaránt képes támogatni. Válasszunk 7 vagy 8 adatbitet, páros, páratlan vagy kikapcsolt paritásbitet és 1 vagy 2 stopbitet. Ekkor tudjuk megadni a forgalomirányítási protokollt is: lehet kikapcsolt, XON/XOFF (ez az ún. "sávon belüli" vagy "szoftveres") forgalomirányítás. Ne felejtsük el ezeket a beállításokat a most következõ szoftveres beállítások elvégzése során sem.</p></div></div></div><div class=sect3><h4 id=printing-software>9.3.1.2. Szoftveres beállítás<a class=anchor href=#printing-software></a></h4><div class=paragraph><p>Ebben a fejezetben tárgyaljuk a FreeBSD-ben található LPD nyomtatási rendszer mûködéséhez és a nyomtatáshoz szükséges szoftveres beállításokat.</p></div><div class=paragraph><p>Íme az elvégzendõ lépések rövid vázlata:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Amennyiben szükséges, állítsuk be a rendszermagunkat a nyomtató által használt portra. Ehhez <a href=#printing-kernel>A rendszermag beállítása</a> szakaszban olvashatjuk el, mit is kell pontosan tenni.</p></li><li><p>Ha párhuzamos portot használunk, akkor állítsuk be, hogy a párhuzamos port miként fog kommunikálni. <a href=#printing-parallel-port-mode>A párhuzamos port kommunikációs módjának beállítása</a> címû szakasz tárja fel ennek részleteit.</p></li><li><p>Próbáljuk ki, hogy ezek után az operációs rendszer képes-e adatot küldeni a nyomtatónak. <a href=#printing-testing>A nyomtató kommunikációjának ellenõrzése</a> szakaszban kapunk erre pár javaslatot.</p></li><li><p>Az <span class=filename>/etc/printcap</span> állomány felhasználásával állítsuk be a nyomtatónkhoz az LPD-t. Errõl a fejezet további részei adnak majd felvilágosítást.</p></li></ol></div></div></div><div class=sect4><h5 id=printing-kernel>9.3.1.2.1. A rendszermag beállítása<a class=anchor href=#printing-kernel></a></h5><div class=paragraph><p>Az operációs rendszer magja eszközök egy adott csoportjával képes együttmûködni, amelyben a soros és párhuzamos felületen csatlakozó nyomtatók is megtalálhatóak. Azonban ha a rendszermag nem ismeri fel még valamelyiket, akkor a soros vagy párhuzamos portok használatához külön támogatásra van szükség.</p></div><div class=paragraph><p>Így tudjuk megnézni, hogy a jelenleg használt rendszermag támogatja-e a soros csatolófelületet:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># grep sioN /var/run/dmesg.boot</span></code></pre></div></div><div class=paragraph><p>Itt az <em>N</em> nullától kezdõdõen adja meg a soros port sorszámát. Amennyiben látunk valami ilyesmit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>sio2 at port 0x3e8-0x3ef irq 5 on isa
sio2: <span class=nb>type </span>16550A</code></pre></div></div><div class=paragraph><p>Ez azt jelenti, hogy a rendszermag sikeresen észlelte a portot.</p></div><div class=paragraph><p>A párhuzamos csatolófelület támogatásáról így gyõzõdhetünk meg:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># grep ppcN /var/run/dmesg.boot</span></code></pre></div></div><div class=paragraph><p>Itt az <em>N</em> nullától kezdõdõen sorszámozza a párhuzamos portot. Ha eredményül valami hasonlót kapunk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset <span class=o>(</span>ECP/EPP/PS2/NIBBLE<span class=o>)</span> <span class=k>in </span>COMPATIBLE mode
ppc0: FIFO with 16/16/8 bytes threshold</code></pre></div></div><div class=paragraph><p>Ez arra utal, hogy a rendszermagunk tud a portról.</p></div><div class=paragraph><p>Elõfordulhat azonban, hogy az operációs rendszer csak akkor fogja észrevenni a nyomtatásra használt soros vagy párhuzamos portot, ha átállítjuk a rendszermagunkat.</p></div><div class=paragraph><p>A soros port támogatásának beállításához olvassuk el a rendszermag beállításáról szóló szakaszt. A párhuzamos port támogatásához szintén olvassuk el ugyanazt a szakaszt <em>és</em> a most következõt.</p></div></div></div><div class=sect3><h4 id=printing-parallel-port-mode>9.3.1.3. A párhuzamos port kommunikációs módjának beállítása<a class=anchor href=#printing-parallel-port-mode></a></h4><div class=paragraph><p>A párhuzamos csatolófelület használata esetén választhatunk, hogy a FreeBSD milyen módon tartsa a kapcsolatot a nyomtatóval: megszakításokkal vezérelje (interrupt-driven), vagy esetleg folyamatosan kérdezgesse (polled). A FreeBSD általános meghajtója (<a href="https://man.freebsd.org/cgi/man.cgi?query=lpt&amp;sektion=4&amp;format=html">lpt(4)</a>) a <a href="https://man.freebsd.org/cgi/man.cgi?query=ppbus&amp;sektion=4&amp;format=html">ppbus(4)</a> alrendszert használja, ami a portot a <a href="https://man.freebsd.org/cgi/man.cgi?query=ppc&amp;sektion=4&amp;format=html">ppc(4)</a> meghajtón keresztül vezérli.</p></div><div class=ulist><ul><li><p>A <em>megszakítás alapú</em> módszer a GENERIC rendszermagban alapértelmezés. Ilyenkor az operációs rendszer egy megszakításkérés felhasználásával értesül arról, hogy a nyomtató mikor áll készen adatok fogadására.</p></li><li><p>A <em>lekérdezéses</em> módszer használata során az operációs rendszer folyamatosan érdeklõdik a nyomtató rendelkezésre állásáról. Amikor erre pozitív megerõsítést kap, akkor a rendszermag újabb adatokat küld.</p></li></ul></div><div class=paragraph><p>A megszakításos módszer valamivel gyorsabb, azonban cserébe lefoglal egy értékes IRQ vonalat. A HP újabb nyomtatói állítólag nem mûködnek megfelelõen ilyen módban, valamilyen (pillanatnyilag még nem teljesen tisztázott) idõzítési probléma miatt. Ezért az ilyen nyomtatóknak is valószínûleg a lekérdezéses módszert kell használniuk. Más nyomtatók pedig, habár mûködnek mind a két módszerrel, hihetetlenül lassúak a megszakításokkal.</p></div><div class=paragraph><p>Kétféleképpen állíthatjuk be a kommunikációs módot: a rendszermagon keresztül, vagy az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8&amp;format=html">lptcontrol(8)</a> segédprogrammal.</p></div><div class=paragraph><p><em>A rendszermagban így állíthatjuk be a kommunikációt:</em></p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Írjuk át a rendszermag beállításait tartalmazó állományt. Keressük meg benne a használt párhuzamos portnak megfelelõen a <code>ppc0</code>, <code>ppc1</code> (második párhuzamos port) vagy <code>ppc2</code> (harmadik párhuzamos port) bejegyzést, és engedélyezzük.</p><div class=ulist><ul><li><p>A megszakításos mód használatához nyissuk meg a <span class=filename>/boot/device.hints</span> állományt, és az <em>N</em> helyére írjuk be a</p><div class="literalblock programlisting"><div class=content><pre>hint.ppc.0.irq=&#34;N&#34;</pre></div></div><div class=paragraph><p>sorba a megfelelõ IRQ számát. A rendszermag beállításait tartalmazó állománynak tartalmaznia kell a <a href="https://man.freebsd.org/cgi/man.cgi?query=ppc&amp;sektion=4&amp;format=html">ppc(4)</a> meghajtót is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>device ppc</code></pre></div></div></li><li><p>A lekérdezéses mód használatához a <span class=filename>/boot/device.hints</span> állományból távolítsuk el a következõ sort:</p><div class="literalblock programlisting"><div class=content><pre>hint.ppc.0.irq=&#34;N&#34;</pre></div></div><div class=paragraph><p>Némely esetben azonban ennyi még nem lesz elég a port lekérdezéses beállításához. Ugyanis ha a hozzá tartozó meghajtó az <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a>, akkor ez fogja felismerni, kezelni és a nyomtatóhoz tartozó portok hozzáférési módját vezérelni. A problémát ezért gyakran érdemes az <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a> beállításai között is keresni.</p></div></li></ul></div></li><li><p>Mentsük el az állományt. Konfiguráljuk be, fordítsuk le és telepítsük az új rendszermagot. Ennek pontos részleteit <a href=../kernelconfig/#kernelconfig>a rendszermag beállításáról</a> szóló fejezetben olvashatjuk.</p></li></ol></div></div></div><div class=paragraph><p><em>A kommunikáció módjának beállítása</em> az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8&amp;format=html">lptcontrol(8)</a> programmal:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>A megszakításos mód beállításához írjuk be:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptcontrol -i -d /dev/lptN</span></code></pre></div></div><div class=paragraph><p>ahol az <code>lptN</code> a nyomtatóhoz tartozó eszköz neve.</p></div></li><li><p>A lekérdezéses mód beállításához írjuk be:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptcontrol -p -d /dev/lptN</span></code></pre></div></div><div class=paragraph><p>ahol az <code>lptN</code> a nyomtatóhoz tartozó eszköz neve.</p></div></li></ol></div></div></div><div class=paragraph><p>Ha ezeket a parancsokat berakjuk az <span class=filename>/etc/rc.local</span> állományunkba, akkor azzal a rendszer minden egyes indítása során beállítjuk a számunkra megfelelõ módot. Errõl többet az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8&amp;format=html">lptcontrol(8)</a> man oldaláról tudhatunk meg.</p></div></div><div class=sect3><h4 id=printing-testing>9.3.1.4. A kommunikáció ellenõrzése<a class=anchor href=#printing-testing></a></h4><div class=paragraph><p>Még mielõtt nekilátnánk a nyomtatási rendszer beállításának, bizonyosodjuk meg róla, hogy az operációs rendszer képes adatokat továbbítani a nyomtatónak. Sokkal könnyebb egymástól függetlenül megvizsgálni a kommunikáció és a nyomtatási rendszer mûködését.</p></div><div class=paragraph><p>A nyomtatót úgy tudjuk kipróbálni, ha küldünk neki valamilyen szöveget. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> tökéletesen megfelelõ akkor, ha olyan nyomtatónk van, amely azonnal kinyomtatja a kapott szöveget. Ez a program 96 sorban létrehozza mind a 96 kinyomtatható ASCII karaktert.</p></div><div class=paragraph><p>A PostScript® (vagy más egyéb nyelvet ismerõ) nyomtatóknak azonban ennél kifinomultabb próbára van szüksége. Erre a célra tökéletesen megfelel egy olyan kisebb PostScript® programocska, mint például ez:</p></div><div class="literalblock programlisting"><div class=content><pre>%!PS
100 100 moveto 300 300 lineto stroke
310 310 moveto /Helvetica findfont 12 scalefont setfont
(Remek! Ez mukodik!) show
showpage</pre></div></div><div class=paragraph><p>Ezt a PostScript® kódot nyugodtan elmenthetjük egy állományba, amelyet aztán a késõbbi szakaszokban megjelenõ példák szerint használni is tudunk majd.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A kézikönyvben a nyomtató nyelve alatt leginkább egy PostScript®-szerû nyelvet értünk, nem pedig a Hewlett Packard PCL típusú nyelvét. Habár a PCL nagyon sokra képes, hiszen keverhetjük még benne akár a programokat és a nyers szövegeket is. Ezzel szemben a PostScript® nem képes nyers szöveget kinyomtatni, ezért az ilyen típusú nyomtatók mûködtetéséhez külön támogatásra van szükségünk.</p></div></td></tr></tbody></table></div><div class=sect4><h5 id=printing-checking-parallel>9.3.1.4.1. A párhuzamos nyomtató ellenõrzése<a class=anchor href=#printing-checking-parallel></a></h5><div class=paragraph><p>Ebben a szakaszban megtudhatjuk, hogy FreeBSD alatt miként ellenõrizzük a párhuzamos portra csatlakozó nyomtatók mûködését.</p></div><div class=paragraph><p><em>A párhuzamos porton levõ nyomtató kipróbálásához:</em></p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> segítségével váljunk <code>root</code> felhasználóvá.</p></li><li><p>Küldjünk a nyomtatónak valamilyen adatot.</p><div class=ulist><ul><li><p>Ha a nyomtató képes nyers szöveget fogadni, akkor használjuk az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> programot. Ehhez gépeljük be:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptest &gt; /dev/lptN</span></code></pre></div></div><div class=paragraph><p>ahol az <em>N</em> nullától kezdõdõen a párhuzamos port sorszáma.</p></div></li><li><p>Ha a nyomtató PostScript® vagy más nyomtatási nyelvet ismer, akkor egy apró programot kell küldenünk neki. Ehhez írjuk be:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat &gt; /dev/lptN</span></code></pre></div></div><div class=paragraph><p>Ezután soronként írjuk be a programot, de <em>vigyázzunk</em>, mert az <kbd>Enter</kbd> vagy a <kbd>Return</kbd> lenyomása után már nem tudjuk kijavítani! A program begépelése után nyomjuk meg a <span class=keyseq><kbd>Ctrl</kbd>+<kbd>D</kbd></span> vagy bármely más olyan billentyûkombinációt, amivel ki tudunk lépni.</p></div><div class=paragraph><p>Ezt a programot belerakhatjuk egy állományba is, amire aztán adjuk ki az alábbi parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat állomány &gt; /dev/lptN</span></code></pre></div></div><div class=paragraph><p>ahol az <em>állomány</em> a nyomtatóra küldendõ program neve lesz.</p></div></li></ul></div></li></ol></div></div></div><div class=paragraph><p>Ezután a nyomtató megkezdi a nyomtatást. Ne aggódjunk, ha netalán valami furcsán nézne ki, mert a késõbbiekben ezt még úgyis rendbetesszük.</p></div></div><div class=sect4><h5 id=printing-checking-serial>9.3.1.4.2. A soros nyomtató ellenõrzése<a class=anchor href=#printing-checking-serial></a></h5><div class=paragraph><p>Ebben a szakaszban megtudhatjuk, hogyan ellenõrizzük a FreeBSD és soros portra kötött nyomtató kapcsolódását.</p></div><div class=paragraph><p><em>Így tudjuk kipróbálni a soros porton csatlakozó nyomtatónkat:</em></p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> paranccsal váljunk <code>root</code> felhasználóvá.</p></li><li><p>Nyissuk meg az <span class=filename>/etc/remote</span> állományt. Tegyük hozzá a következõ sort:</p><div class="literalblock programlisting"><div class=content><pre>printer:dv=/dev/port:br#bps:pa=paritás</pre></div></div><div class=paragraph><p>ahol a <em>port</em> a soros porthoz tartozó eszközleíró neve (<code>ttyd0</code>, <code>ttyd1</code>, stb.), a <em>bps</em> a nyomtató által használt adatátviteli sebesség, végül a <em>paritás</em> a nyomtatóhoz használt paritás (ami lehet <code>even</code> (páros), <code>odd</code> (páratlan), <code>none</code> (nincs), vagy <code>zero</code> (nulla)).</p></div><div class=paragraph><p>Íme egy olyan soros nyomtató beállítása (<code>printer</code> néven), amely sebessége 19 200 bps, a harmadik portra csatlakozik és nem használ paritást:</p></div><div class="literalblock programlisting"><div class=content><pre>printer:dv=/dev/ttyd2:br#19200:pa=none</pre></div></div></li><li><p>Kapcsolódjunk a nyomtatóhoz a <a href="https://man.freebsd.org/cgi/man.cgi?query=tip&amp;sektion=1&amp;format=html">tip(1)</a> segítségével. Ennek parancsa:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tip printer</span></code></pre></div></div><div class=paragraph><p>Ha az iménti lépés nem mûködne, próbálkozzunk az <span class=filename>/etc/remote</span> állomány újbóli módosításával, és a <span class=filename>/dev/cuaaN</span> eszköz helyett használjuk a <span class=filename>/dev/ttydN</span> eszközt!</p></div></li><li><p>Küldjünk adatot a nyomtatónak.</p><div class=ulist><ul><li><p>Ha a nyomtató képes nyers szöveget nyomtatni, akkor használjuk az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> segédprogramot. Gépeljük be:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nv>$lptest</span></code></pre></div></div></li><li><p>Ha a nyomtató a PostScript® vagy egy hozzá hasonló nyomtatási nyelven kommunikál, akkor a nyomtatónak egy rövid programot kell küldenünk. Soronként gépeljük be a programot, azonban <em>vigyázzunk</em> arra, hogy a törlés és minden más szerkesztésre használt billentyû a nyomtató számára is értelmes lehet. Az is elõfordulhat, hogy a program küldését egy speciális jelsorozattal tudjuk csak lezárni. A PostScript® nyomtatók esetén ilyenkor elegendõ a <span class=keyseq><kbd>Ctrl</kbd>+<kbd>D</kbd></span> billentyûk együttes lenyomása.</p><div class=paragraph><p>Vagy tehetjük az egész programot egy állományba, amihez aztán írjuk be ezt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=o>&gt;</span>állomány</code></pre></div></div><div class=paragraph><p>ahol az <em>állomány</em> a programot tartalmazó állomány neve. Miután a <a href="https://man.freebsd.org/cgi/man.cgi?query=tip&amp;sektion=1&amp;format=html">tip(1)</a> elküldte az állományt, nyomjuk le a lezáráshoz szükséges billentyûkombinációt.</p></div></li></ul></div></li></ol></div></div></div><div class=paragraph><p>Most már meg kellene jelennie valaminek a nyomtatón. Az még nem számít, pontosan mi is lesz az - késõbb még majd úgyis beállítjuk.</p></div></div></div><div class=sect3><h4 id=printing-printcap>9.3.1.5. A nyomtatási rendszer aktiválása: a <span class=filename>/etc/printcap</span> állomány<a class=anchor href=#printing-printcap></a></h4><div class=paragraph><p>Csatlakoztattuk a nyomtatónkat, a mûködtetéséhez beállítottuk a rendszermagot (amennyiben erre szükségünk volt), és tudtunk neki adatokat küldeni. Most már készen állunk arra, hogy LDP alkalmazáson keresztül beállítsuk a nyomtató hozzáférésének vezérlését.</p></div><div class=paragraph><p>Az LPD beállításait az <span class=filename>/etc/printcap</span> állományban találjuk. Az LPD nyomtatási rendszer minden egyes mûvelet elõtt beolvassa ezt az állományt, ezért a benne végzett módosítások szinte azonnal életbe is lépnek.</p></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=printcap&amp;sektion=5&amp;format=html">printcap(5)</a> tartalma könnyen érthetõ, a <span class=filename>/etc/printcap</span> állományt egyszerûen módosíthatjuk a kedvenc szövegszerkesztõnkkel. A felépítése teljesen megegyezik a többi hozzá hasonló állományéval: ilyenek például a <span class=filename>/usr/shared/misc/termcap</span> és a <span class=filename>/etc/remote</span>. Az itt alkalmazott formátum teljes leírását a <a href="https://man.freebsd.org/cgi/man.cgi?query=cgetent&amp;sektion=3&amp;format=html">cgetent(3)</a> man oldalon találjuk.</p></div><div class=paragraph><p>A nyomtatási rendszer egyszerû beállítása az alábbi lépésekbõl áll:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Adjunk nevet (és még néhány álnevet) a nyomtatónak, írjuk ezeket az <span class=filename>/etc/printcap</span> állományba. A nevekrõl <a href=#printing-naming>A nyomtató elnevezése</a> címû szakaszban kapunk felvilágosítást.</p></li><li><p>A(z alapból bekapcsolt) fejléclapokat az <code>sh</code> tulajdonság megadásával kapcsolhatjuk ki. A részleteket <a href=#printing-no-header-pages>A fejléclapok letiltása</a> címû szakaszban találjuk.</p></li><li><p>Hozzunk létre egy nyomtatási könyvtárat, és adjuk meg a helyét az <code>sd</code> tulajdonság beállításával. <a href=#printing-spooldir>A nyomtatási könyvtár létrehozása</a> címû szakaszban fogunk errõl többet mondani.</p></li><li><p>Állítsunk be egy nyomtató által használt <span class=filename>/dev</span> könyvtárbeli leírót, és az <code>lp</code> tulajdonsággal adjuk meg az <span class=filename>/etc/printcap</span> állományban. Errõl részletesebben <a href=#printing-device>A nyomtatóeszköz azonosítása</a> címû szakaszban olvashatunk. Ha a nyomtató soros porton keresztül csatlakozik, az <code>ms#</code> tulajdonsággal még meg kell adnunk <a href=#printing-commparam>A nyomtatási rendszer kommunikációs paraméterei</a> szakaszban tárgyaltakat is.</p></li><li><p>Helyezzünk el egy szûrõt a beérkezõ nyers szövegek számára. Errõl <a href=#printing-textfilter>A szövegszûrõ telepítése</a> címû szakasz értekezik.</p></li><li><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancs segítségével próbáljuk ki a nyomtatást. Ennek pontos részleteit a <a href=#printing-trying>Próbáljuk ki!</a> és a <a href=#printing-troubleshooting>Hibakeresés</a> címû fejezetekben találhatjuk meg.</p></li></ol></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A magasabb szintû nyomtatók, mint például a PostScript® nyomtatók nem képesek közvetlenül nyers szöveget nyomtatni. Az imént felvázolt egyszerû beállítási séma feltételezi, hogy csak olyan állományokat fogunk nyomtatni a nyomtatón, amelyeket meg is ért.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A felhasználók gyakran arra számítanak, hogy bármelyik általuk elérhetõ nyomtatón képesek nyers szöveget kinyomtatni. Az LPD alkalmazással kapcsolatban álló programok is általában ugyanezt az elgondolást követik. Ha egy saját nyelvvel rendelkezõ nyomtatót akarunk telepíteni, de a nyomtató saját nyelvén <em>és</em> a nyers szöveg formájában érkezõ nyomtatási feladatok is rendesen ki akarjuk nyomtatni, akkor mindenképpen javasoljuk, hogy illeszünk még egy további lépést is ebbe a sorba: illesszünk a rendszerbe egy nyers szövegrõl automatikusan PostScript® (vagy más egyéb) nyelvre tolmácsoló programot. Errõl a <a href=#printing-advanced-if-conversion>Szöveges nyomtatási feladatok PostScript® nyomtatókon</a> címû fejezetben olvashatunk.</p></div><div class=sect4><h5 id=printing-naming>9.3.1.5.1. A nyomtató elnevezése<a class=anchor href=#printing-naming></a></h5><div class=paragraph><p>Az elsõ (egyszerû) lépés a nyomtatónk nevének kiválasztása. Igazából nem számít, mennyire kifejezõ vagy éppen hóbortos nevet adunk neki, hiszen emellett még számos álnévvel is illethetjük.</p></div><div class=paragraph><p>Az <span class=filename>/etc/printcap</span> állományban megtalálható nyomtatók egyikének legalább az <code>lp</code> álnévvel rendelkeznie kell, mivel ez lesz az alapértelmezett nyomtató neve. Tehát ha a felhasználó nem adja meg sem a <code>PRINTER</code> környezeti változót, sem pedig az LPD-vel kapcsolatban álló aktuális parancsban a használni kívánt nyomtató nevét, akkor a rendszer az <code>lp</code> nevût fogja keresni.</p></div><div class=paragraph><p>Ezenkívül általában még gyakran adnak egy olyan álnevet is a nyomtatónak, ahol annak teljes leírása, többek közt a gyártmánya és a típusa szerepel.</p></div><div class=paragraph><p>Ahogy sikerült nevet és álneveket adni a nyomtatónak, írjuk is be ezeket az <span class=filename>/etc/printcap</span> állományba. Itt a nyomtató neveit balról kezdjük felsorolni, mindegyik álnevet egy függõleges vonallal válasszunk el, és az utolsó után tegyünk pontosvesszõt.</p></div><div class=paragraph><p>A most következõ példában egy olyan vázt mutatunk be az <span class=filename>/etc/printcap</span> állományhoz, amelyben két nyomtatót (egy Diablo 630 márkájú sornyomtatót és egy Panasonic KX-P4455 típusú PostScript® lézernyomtatót) adunk meg:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose)
#
rattan|line|diablo|lp|Diablo 630 Line Printer:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:</pre></div></div><div class=paragraph><p>Ebben a példában az elsõ nyomtató neve <code>rattan</code>, és ehhez tartozik még a <code>line</code>, <code>diablo</code>, <code>lp</code>, és <code>Diablo 630 Line Printer</code> álnév. Mivel itt soroltuk fel az <code>lp</code> álnevet is, ezért a rendszerben ez lesz az alapértelmezett nyomtató. A második nyomtató neve <code>bamboo</code>, és álnevei többek közt a <code>ps</code>, <code>PS</code>, <code>S</code>, <code>panasonic</code>, valamint a <code>Panasonic KX-P4455 PostScript v51.4</code>.</p></div></div><div class=sect4><h5 id=printing-no-header-pages>9.3.1.5.2. A fejléclapok letiltása<a class=anchor href=#printing-no-header-pages></a></h5><div class=paragraph><p>Az LPD nyomtatási rendszer alapértelmezés szerint minden egyes feladathoz <em>fejléclapot</em> készít. Ez a lap szép nagy betûkkel tartalmazza a nyomtatási feladatot kiadó felhasználó nevét, a gépet, amirõl küldték, és a feladat nevét. Sajnálatos módon ez azonban inkább akadályozza a hibakeresést a nyomtató beállításában, ezért most inkább kapcsoljuk ki ezeket.</p></div><div class=paragraph><p>Ha le akarjuk tiltani a fejléclapokat, az <span class=filename>/etc/printcap</span> állományban adjuk meg az <code>sh</code> (úgymint "suppress header pages") tulajdonságot. Íme egy példa az <code>sh</code> tulajdonsággal bõvített <span class=filename>/etc/printcap</span> állományra:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose) - sehol sem lesznek fejléclapok
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:</pre></div></div><div class=paragraph><p>Ebben a példában megfigyelhetjük a helyes felírási módot: az elsõ sor a bal szélsõ oszlopban kezdõdik, az azt követõ sorok pedig bentebb. Minden bejegyzésben az utolsó kivételével mindegyik sor egy visszaper (backslash) karakterrel zárul.</p></div></div><div class=sect4><h5 id=printing-spooldir>9.3.1.5.3. A nyomtatási könyvtár létrehozása<a class=anchor href=#printing-spooldir></a></h5><div class=paragraph><p>A nyomtatási rendszerünk beállításának következõ lépése a <em>nyomtatási könyvtár</em> létrehozása. Ez egy olyan könyvtár, ahová a különbözõ nyomtatási feladatok kerülnek a feldolgozásuk elõtt, valamint ahol a nyomtatási rendszer többi állománya lakozik.</p></div><div class=paragraph><p>A nyomtatási rendszer adatait tároló könyvtárakat tartalmuk gyakori változása miatt általában a <span class=filename>/var/spool</span> könyvtárba szokás tenni. Ezen könyvtárak tartalmát nem szükséges menteni sem. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=mkdir&amp;sektion=1&amp;format=html">mkdir(1)</a> parancs futtatásával egyszerûen újra létre tudjuk hozni.</p></div><div class=paragraph><p>Általában minden nyomtatóhoz külön létre szoktak hozni egy könyvtárat az adott nyomtató nevén. Erre példa:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /var/spool/nyomtatónév</span></code></pre></div></div><div class=paragraph><p>Azonban ha a hálózatunkon rengeteg nyomtató található, akkor érdemes inkább egyetlen könyvtárat használni, amelyet az LPD számára tartunk fenn.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir /var/spool/lpd</span>
<span class=c># mkdir /var/spool/lpd/rattan</span>
<span class=c># mkdir /var/spool/lpd/bamboo</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Amennyiben fontos nekünk a felhasználói nyomtatások titkosságának megóvása, érdemes levédenünk a nyomtatási könyvtárat, így az nem lesz mindenki által elérhetõ. A nyomtatási könyvtárak tulajdonosa egyedül és kizárólag a <code>daemon</code> felhasználó és a <code>daemon</code> csoport legyen, és hozzá olvasási, írási és keresési engedélyekkel rendelkezzen. Ezt fogjuk most beállítani a példáinkban szereplõ nyomtatóinkhoz is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chown daemon:daemon /var/spool/lpd/rattan</span>
<span class=c># chown daemon:daemon /var/spool/lpd/bamboo</span>
<span class=c># chmod 770 /var/spool/lpd/rattan</span>
<span class=c># chmod 770 /var/spool/lpd/bamboo</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Végezetül az <span class=filename>/etc/printcap</span> állományban ezeket a könyvtárakat se felejtsük el megadni az LPD-nek. Itt a nyomtatási könyvtár nevét az <code>sd</code> tulajdonsággal írjuk le:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose) - a nyomtatási könyvtárak hozzáadása
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:</pre></div></div><div class=paragraph><p>Vegyük észre, hogy a nyomtató neve ugyan a sor elején kezdõdik, azonban a hozzá tartozó összes többi sor mind bentebb kezdõdik és egy visszaper (backslash) karakterrel választjuk le.</p></div><div class=paragraph><p>Ha az <code>sd</code> tulajdonsággal nem adunk meg semmilyen nyomtatási könyvtárat, akkor ennek az értéke alapértelmezés szerint a <span class=filename>/var/spool/lpd</span> lesz.</p></div></div><div class=sect4><h5 id=printing-device>9.3.1.5.4. A nyomtatóeszköz azonosítása<a class=anchor href=#printing-device></a></h5><div class=paragraph><p>A <a href=#printing-hardware>Hardveres beállítás</a> címû szakaszban már beazonosítottuk, hogy a FreeBSD a <span class=filename>/dev</span> könyvtárban melyik eszközleírón keresztül fogja megszólítani a nyomtatót. Most ideje ugyanezt tudatni az LPD démonnal is. Így amikor a nyomtatási rendszer végre szeretne hajtani egy nyomtatási feladatot, a szûrõprogram nevében ezt az eszközt nyitja meg (ahol a szûrõn keresztül továbbítjuk az adatokat a nyomtató felé).</p></div><div class=paragraph><p>Az <code>lp</code> tulajdonság segítségével a <span class=filename>/etc/printcap</span> állományban soroljuk fel a nyomtatók <span class=filename>/dev</span> könyvtárban található leíróit.</p></div><div class=paragraph><p>Az eddig használt példánkban most tételezzük fel, hogy a <code>rattan</code> nevû nyomtató az elsõ párhuzamos porton található, míg a <code>bamboo</code> nevû a hatodik soros porton. Ebben a helyzetben így kellene kiegészítenünk az <span class=filename>/etc/printcap</span> állományunkat:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose) - a használni kívánt eszközök
#  beazonosítása
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:</pre></div></div><div class=paragraph><p>Az LPD alapértelmezés szerint a <span class=filename>/dev/lp</span> eszközt fogja használni, ha nem adjuk meg az <code>lp</code> tulajdonságot az <span class=filename>/etc/printcap</span> állományban. A <span class=filename>/dev/lp</span> azonban a FreeBSD-ben jelenleg nem létezik.</p></div><div class=paragraph><p>Ha a telepítendõ nyomtatónk valamelyik párhuzamos portra csatlakozik, akkor innen akár tovább is léphetünk <a href=#printing-textfilter>A szövegszûrõ telepítése</a> címû szakaszra. Ha viszont nem, kövessük a most következõ szakaszban szereplõ utasításokat.</p></div></div><div class=sect4><h5 id=printing-commparam>9.3.1.5.5. A nyomtatási rendszer kommunikációs paraméterei<a class=anchor href=#printing-commparam></a></h5><div class=paragraph><p>A soros portra csatlakozó nyomtatóknál az LPD képes beállítani az adatátviteli sebességet, a paritást, valamint más egyéb olyan kommunikációs paramétereket, amelyekkel a szûrõprogram adatokat tud továbbítani a nyomtató felé. Ez több szempontból is elõnyös, mivel:</p></div><div class=ulist><ul><li><p>Egyszerûen az <span class=filename>/etc/printcap</span> állomány átírásával ki tudunk próbálni több kommunikációs beállítást, nem kell magát a szûrõprogramot újrafordítanunk.</p></li><li><p>A nyomtatási rendszer képes ugyanazt a szûrõt több, különbözõ kommunikációs beállítást alkalmazó nyomtatóhoz is használni.</p></li></ul></div><div class=paragraph><p>Az <span class=filename>/etc/printcap</span> állományban az <code>lp</code> tulajdonsággal megadott eszközök soros kommunikációjának beállításait az alábbi tulajdonságok határozzák meg:</p></div><div class=dlist><dl><dt class=hdlist1><code>br#sebesség</code></dt><dd><p>Beállítja az eszköz adatátviteli sebességét a <em>sebesség</em> értékre, ahol a <em>sebesség</em> lehet 50, 75, 110, 134, 150, 200, 300, 600, 1200, 1800, 2400, 4800, 9600, 19 200, 38 400, 57 600 vagy 115 200 bit másodpercenként (bps).</p></dd><dt class=hdlist1><code>ms#stty-mód</code></dt><dd><p>Beállítja az eszköz megnyitása után használt termináleszköz mûködésének paramétereit. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=stty&amp;sektion=1&amp;format=html">stty(1)</a> man oldalon többet is megtudhatunk róluk.</p></dd></dl></div><div class=paragraph><p>Miután az LPD megnyitja az <code>lp</code> tulajdonsággal megadott eszközt, beállítja az <code>ms#</code> tulajdonság értéke szerint annak jellemzõit. Itt a <code>parenb</code>, <code>parodd</code>, <code>cs5</code>, <code>cs6</code>, <code>cs7</code>, <code>cs8</code>, <code>cstopb</code>, <code>crtscts</code>, és <code>ixon</code> módok lehetnek lényegesek, melyekrõl az <a href="https://man.freebsd.org/cgi/man.cgi?query=stty&amp;sektion=1&amp;format=html">stty(1)</a> man oldalon többet is megtudhatunk.</p></div><div class=paragraph><p>Állítsuk most be az egyik képzeletbeli nyomtatónkat a hatodik soros portra. Az adatátviteli sebessége 38 400 bps lesz. A kommunikáció módjánál kapcsoljuk ki a paritást (<code>-parenb</code>), 8 bites karakterek legyenek (<code>cs8</code>), ne legyen modemes vezérlés (<code>clocal</code>) és a hardveres forgalomirányítás legyen <code>crtscts</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:</pre></div></div></div><div class=sect4><h5 id=printing-textfilter>9.3.1.5.6. A szövegszûrõ telepítése<a class=anchor href=#printing-textfilter></a></h5><div class=paragraph><p>Most már utasíthatjuk az LPD-t, hogy milyen szövegszûrõt használjon a nyomtatási feladatok eszközre küldéséhez. A <em>szövegszûrõ</em> (text filter), vagy más néven <em>bemeneti szûrõ</em> (input filter) egy olyan program, amelyet az LPD egy nyomtatási feladat elvégzésekor lefuttat. Amikor az LPD lefuttatja a nyomtatóhoz tartozó szövegszûrõt, a szûrõ szabványos bemenetére elküldi az elvégzendõ nyomtatási feladatot, és a szabványos kimenetét pedig átirányítja az <code>lp</code> tulajdonság által megadott nyomtatóeszközre. Ennek megfelelõen a szûrõnek a szabványos bemenetrõl kell olvasnia az elvégzendõ feladatot, a szabványos kimenetre pedig a ténylegesen nyomtatandót kell kiírnia. A szövegszûrõk részleteirõl a <a href=#printing-advanced-filters>Hogyan mûködnek a szûrõk?</a> szakasz szól.</p></div><div class=paragraph><p>A mi esetünkben most szövegszûrõnek tökéletesen megfelel egy olyan rövid szkript, ami a nyomtatóra a nyomtatási feladatot a <code>/bin/cat</code> paranccsal küldi ki. A FreeBSD-ben még találhatunk egy másik szûrõt is, amelynek a neve <span class=filename>lpf</span>. Ez képes a törlést és aláhúzást jelzõ karaktereket érthetõvé tenni bizonyos nyomtatók számára. Természetesen itt használhatunk kedvünk szerinti szûrõt is. Az <code>lpf</code> szûrõ mûködésének részleteit <a href=#printing-advanced-lpf>Az lpf szövegszûrõ</a> címû szakaszban fejtjük ki bõvebben.</p></div><div class=paragraph><p>Elõször is készítsünk egy <span class=filename>/usr/local/libexec/if-simple</span> nevû egyszerû szövegszûrõ szkriptet. A kedvenc szövegszerkesztõnkkel írjuk bele a következõ sorokat:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# if-simple - egyszerû szövegszûrõ szkript az lpd-hez
# Helye: /usr/local/libexec/if-simple
#
# Egyszerûen átmásolja a kimenetére a bemenetérõl érkezõ adatokat; nem
# fogad el semmilyen paramétert.

/bin/cat &amp;&amp; exit 0
exit 2</pre></div></div><div class=paragraph><p>Tegyük indíthatóvá:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 555 /usr/local/libexec/if-simple</span></code></pre></div></div><div class=paragraph><p>Ezután tájékoztassuk róla az LPD-t az <span class=filename>/etc/printcap</span> állományban található <code>if</code> tulajdonság megadásával. Itt most a példánkban szereplõ mind a két nyomtatóhoz beillesztjük:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose) - a szövegszûrõ hozzáadása
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:\
        :if=/usr/local/libexec/if-simple:</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Az <span class=filename>if-simple</span> szkript megtalálható a <span class=filename>/usr/shared/examples/printing</span> könyvtárban.</p></div></td></tr></tbody></table></div></div><div class=sect4><h5 id=_az_lpd_elindítása>9.3.1.5.7. Az LPD elindítása<a class=anchor href=#_az_lpd_elindítása></a></h5><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpd&amp;sektion=8&amp;format=html">lpd(8)</a> az <span class=filename>/etc/rc</span> szkriptbõl, az <code>lpd_enable</code> változó értékének megfelelõen indul el. Ennek értéke alapból <code>NO</code>, vagyis nem. Ha eddig még nem tettük volna meg, akkor az <span class=filename>/etc/rc.conf</span> állományba most vegyük fel a következõ sort:</p></div><div class="literalblock programlisting"><div class=content><pre>lpd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Ezután vagy indítsuk újra a számítógépünket, vagy pedig adjuk ki az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpd&amp;sektion=8&amp;format=html">lpd(8)</a> parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lpd</span></code></pre></div></div></div><div class=sect4><h5 id=printing-trying>9.3.1.5.8. Próbáljuk ki!<a class=anchor href=#printing-trying></a></h5><div class=paragraph><p>Elérkeztünk az LPD egyszerû beállításának utolsó lépéséhez. Sajnos azonban még nem gratulálhatunk, hiszen hátra van még a nyomtató kipróbálása és az esetlegesen elõforduló hibák kijavítása. A beállítást úgy tudjuk a legegyszerûbben letesztelni, ha megpróbálunk valamit kinyomtatni. Az LPD rendszerben az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancs használatával tudunk nyomtatási feladatokat kiadni.</p></div><div class=paragraph><p><a href=#printing-testing>A kommunikáció ellenõrzése</a> címû szakaszban megtalálhatjuk, hogy hozzunk létre tesztelésre alkalmas szövegeket az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> és az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> programok segítségével.</p></div><div class=paragraph><p><em>Az LPD beállításainak egyszerû tesztelése:</em></p></div><div class=paragraph><p>Írjuk be:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lptest 20 5 | lpr -Pnyomtatónév</span></code></pre></div></div><div class=paragraph><p>ahol a <em>nyomtatónév</em> az <span class=filename>/etc/printcap</span> állományban megadott egyik nyomtató neve (vagy álneve) lehet. Az alapértelmezett nyomtató kipróbálásához ne adjunk meg az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancsnak semmilyen <code>-P</code> paramétert. Még egyszer megemlítenénk, hogy amennyiben PostScript® nyomtatót tesztelünk, az elõbbi helyett az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> paranccsal küldjünk ki egy PostScript® programot. Ehhez tegyük a tesztelõ programunkat egy állományba, majd írjuk be az <code>lpr állománynév</code> parancsot.</p></div><div class=paragraph><p>A PostScript® nyomtató esetén a kiküldött program eredményét kell látnunk. Amennyiben az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> parancsot használjuk, valami ilyesmire kell számítanunk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>!</span><span class=s2>&#34;#</span><span class=nv>$%</span><span class=s2>&amp;&#39;()*+,-./01234
&#34;</span><span class=c>#$%&amp;&#39;()*+,-./012345</span>
<span class=c>#$%&amp;&#39;()*+,-./0123456</span>
<span class=nv>$%</span>&amp;<span class=s1>&#39;()*+,-./01234567
%&amp;&#39;</span><span class=o>()</span><span class=k>*</span>+,-./012345678</code></pre></div></div><div class=paragraph><p>A nyomtató kimerítõbb teszteléséhez próbáljunk meg nagyobb programokat keríteni valahonnan (ha a nyomtatónk valamilyen nyelven kommunikál) vagy adjunk meg az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> parancsnak más paramétereket. Például az <code>lptest 80 60</code> soronként 80 karaktert írat ki 60 sorban.</p></div><div class=paragraph><p>Amennyiben a nyomtató nem mûködne, nézzük meg a <a href=#printing-troubleshooting>Hibakeresés</a>hez tartozó szakaszt.</p></div></div></div></div></div></div><div class=sect1><h2 id=printing-advanced>9.4. Magasszintû nyomtatóbeállítás<a class=anchor href=#printing-advanced></a></h2><div class=sectionbody><div class=paragraph><p>Ebben a szakaszban olyan szûrõket mutatunk be, amelyek speciálisan formázott állományok, fejléclapok, hálózati nyomtatás, nyomtatási nyilvántartás vagy szabályozás esetén használhatóak.</p></div><div class=sect2><h3 id=printing-advanced-filter-intro>9.4.1. Szûrõk<a class=anchor href=#printing-advanced-filter-intro></a></h3><div class=paragraph><p>Noha az LPD képes hálózati protokollokat, nyomtatási sorokat, hozzáférést és sok minden más nyomtatási feladatot kezelni, a <em>tényleges</em> munka legnagyobb része a <em>szûrõkben</em> (filter) történik. A szûrõk olyan programok, amelyek tartják a kapcsolatot a nyomtatóval és megbirkóznak annak eszközfüggõségeivel és különleges igényeivel. Az egyszerû beállítás során egy primitív szövegszûrõt állítottunk be (lásd <a href=#printing-textfilter>A szövegszûrõ telepítése</a>) - ami annyira egyszerû, hogy szinte minden nyomtatón mûködnie kell.</p></div><div class=paragraph><p>Azonban mindahhoz, hogy ki tudjuk használni a különbözõ átalakítási, nyilvántartási lehetõségeket, valamint a nyomtatók különlegességeit és egyebeit, meg kell értenünk a szûrõk pontos mûködését. Az elõbb említett feladatok ugyanis teljesen a szûrõ kezében vannak. Ezzel kapcsolatban azonban rossz hír, hogy ezeket a szûrõket <em>nekünk</em> kell megírnunk. A jó hír ellenben az, hogy könnyen találunk ilyen szûrõket, vagy ha éppen nem lelnénk valamelyiket, akkor is gyorsan meg tudjuk ezeket írni.</p></div><div class=paragraph><p>Sõt, a FreeBSD alapból tartalmaz is egyet, amit a <span class=filename>/usr/libexec/lpr/lpf</span> helyen találunk meg, és sok olyan nyomtatóval képes együttmûködni, amelyek nyers szöveget tudnak nyomtatni. (Kezeli az állományokban felbukkanó törléseket és tabulálásokat, valamint képes nyilvántartást vezetni, de semmi többet.) Rajta kívül még számos szûrõt és szûrõelemet is találhatunk a FreeBSD Portgyûjteményében.</p></div><div class=paragraph><p>Lássuk, mit tartogat számunkra ez a rész:</p></div><div class=ulist><ul><li><p>A <a href=#printing-advanced-filters>Hogyan mûködnek a szûrõk?</a> címû szakaszban megpróbálunk egyfajta áttekintést adni a szûrõk nyomtatási folyamatban betöltött szerepérõl. Mindenképpen érdemes elolvasnunk ezt a szakaszt, mivel ebben derül ki, hogy valójában mi is történik a "függöny mögött", vagyis amikor az LPD használja ezeket a szûrõket. Ezzel a tudással el tudjuk kerülni vagy éppen nyakon tudjuk csípni azokat a problémákat, amelyek a nyomtatóinkhoz telepített szûrõk hozzáadása során adódhatnak.</p></li><li><p>Az LPD alapból arra számít, hogy minden nyomtató képes nyers szöveget nyomtatni. Ez gondot okoz a PostScript® (és minden más nyelv alapú) nyomtatók esetén, mivel azok nem képesek nyers szöveget nyomtatni. <a href=#printing-advanced-if-conversion>Szöveges nyomtatási feladatok PostScript® nyomtatókon</a> címû szakaszban viszont fény derül rá, hogyan kerekedjünk felül ezen. Feltétlenül olvassuk el, ha PostScript® nyomtatónk van.</p></li><li><p>A PostScript® számos program közkedvelt kimeneti formátuma, sõt gyakran maguk a felhasználók is szeretnek ilyen programokat írni. Sajnos azonban a PostScript® nyomtatók egyáltalán nem olcsók. A <a href=#printing-advanced-ps>PostScript® szimulációja nem PostScript® nyomtatókon</a> címû szakaszban megtudhatjuk, miképp tudjuk úgy módosítani a szûrõt, hogy <em>nem PostScript®</em> nyomtatókon is tudjunk PostScript® programokkal nyomtatni. Ezt a szakaszt akkor érdemes elolvasni, ha nincs PostScript® nyomtatónk.</p></li><li><p>A <a href=#printing-advanced-convfilters>Konverziós szûrõk</a> címû szakaszban eláruljuk, miként lehetséges automatizálni a különbözõ állományformátumok és a nyomtatók által érthetõ formátumok közti konverziókat, legyen az grafikus vagy betûszedésre vonatkozó adat. A szakasz elolvasása során megismerjük, hogyan tudjuk a nyomtatónkat képessé tenni az <code>lpr -t</code> paranccsal troff adatok, vagy a <code>lpr -d</code> paranccsal a TeX DVI állományainak, esetleg az <code>lpr -v</code> paranccsal raszteres képek nyomtatására és így tovább. Csak ajánlani tudjuk ennek elolvasását.</p></li><li><p>A <a href=#printing-advanced-of>Kimeneti szûrõk</a> címû szakaszban kivesézzük az LPD egyik kevésbé használt lehetõségét is, a kimeneti szûrõket. Hacsak nem fejléclapokat akarunk készíteni (lásd <a href=#printing-advanced-header-pages>Fejléclapok</a>), akkor ezt a szakaszt nyugodtan kihagyhatjuk.</p></li><li><p><a href=#printing-advanced-lpf>Az lpf szövegszûrõ</a> szakaszban bemutatásra kerül a FreeBSD-ben alapból megtalálható <code>lpf</code> szûrõ, amely egy sornyomtatóknál (vagy az így viselkedõ lézernyomtatóknál) használható egyszerû szövegszûrõ. Ha nyers szövegek nyomtatásánál meg akarjuk oldani a nyomtatási feladatok nyilvántartását, vagy a törlés karakter láttán a nyomtatónk füstölni kezdene, akkor mindenképpen érdemes belemerülnünk az <code>lpf</code> titkaiba.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A most következõ szkriptek mindegyike megtalálható a <span class=filename>/usr/shared/examples/printing</span> könyvtárban.</p></div></td></tr></tbody></table></div><div class=sect3><h4 id=printing-advanced-filters>9.4.1.1. Hogyan mûködnek a szûrõk?<a class=anchor href=#printing-advanced-filters></a></h4><div class=paragraph><p>Ahogy már korábban is jeleztük, a szûrõ egy olyan végrehajtható program, amelyet az LPD indít el, amikor a nyomtatóval eszközfüggetlen módon kommunikál.</p></div><div class=paragraph><p>Amikor az LPD egy feladat elvégzése során ki akar nyomtatni egy állományt, akkor elindít egy ilyen szûrõprogramot. A szûrõ szabványos bemenetére elküldi a kinyomtatandó állományt, a szabványos kimenetét a nyomtatóra, a szabványos hibajelzéseit pedig egy naplóállományba irányítja (ez utóbbit az <span class=filename>/etc/printcap</span> állományban az <code>lf</code> tulajdonsággal adhatjuk meg, vagy alapértelmezés szerinti a <span class=filename>/dev/console</span> állományba kerül).</p></div><div class=paragraph><p>Az LPD a használni kívánt szûrõt és annak paramétereit az <span class=filename>/etc/printcap</span> állományban felsoroltak vagy az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancssorában megadottak szerint választja ki. Például, ha a felhasználó a <code>lpr -t</code> parancsot adja ki, akkor az LPD a célként megadott nyomtatónál szereplõ <code>tf</code> tulajdonság által megadott troff szûrõt kezdi el használni. Amennyiben a felhasználó egyszerûen csak nyers szöveget akar nyomtatni, akkor az <code>if</code> szûrõnek kellene elindulnia (ez viszont csak részben igaz: lásd <a href=#printing-advanced-of>Kimeneti szûrõk</a>).</p></div><div class=paragraph><p>Háromfajta szûrõ jelenhet meg az <span class=filename>/etc/printcap</span> állományban:</p></div><div class=ulist><ul><li><p>A <em>szövegszûrõ</em> (text filter), ami a hagyományos szöveges nyomtatásért felelõs, és amit az LPD dokumentációjában érdekes módon <em>bemeneti szûrõnek</em> (input filter) hívnak. Mivel az LPD arra számít, hogy minden nyomtató alapból képes kinyomtatni bármilyen nyers szöveget, ezért a szövegszûrõ feladata, hogy a nyomtató számára gondoskodjon a tabulátorok, törlések és más egyéb speciális karakterek megfelelõ kezelésérõl. Emellett ha olyan helyen vagyunk, ahol szükség van a nyomtatási feladatok nyilvántartására is, a szövegszûrõ ennek megoldására is képes, méghozzá úgy, hogy összeszámolja a kinyomtatott sorokat, és elosztja ezeket a nyomtató által oldalanként nyomtatott sorok számával. Egy szövegszûrõ a következõ paraméterekkel indulhat:</p><div class=paragraph><p><code>szûrõnév [ -c ] -w <em>szélesség</em> -l <em>hossz</em> -i <em>behúzás</em> -n <em>hozzáférés</em> -h <em>gépnév</em> <em>nyilvántartás</em></code></p></div><div class=paragraph><p>ahol a</p></div><div class=dlist><dl><dt class=hdlist1><code>-c</code></dt><dd><p>akkor jelenik meg, ha egy nyomtatási feladatot az <code>lpr -l</code> paranccsal adunk át</p></dd><dt class=hdlist1><em>szélesség</em></dt><dd><p>az <span class=filename>/etc/printcap</span> állományban definiált <code>pw</code> (page width, avagy oldalszélesség) tulajdonság értéke, ami alapbeállítás szerint 132</p></dd><dt class=hdlist1><em>hossz</em></dt><dd><p>a <code>pl</code> (page length, avagy oldalhossz) tulajdonság értéke, amely az alapbeállítás szerint 66</p></dd><dt class=hdlist1><em>behúzás</em></dt><dd><p>az <code>lpr -i</code> parancs megadása során használt behúzás mértéke, ami alapból 0</p></dd><dt class=hdlist1><em>hozzáférés</em></dt><dd><p>a nyomtatást végzõ felhasználó hozzáférésének megnevezése</p></dd><dt class=hdlist1><em>gépnév</em></dt><dd><p>a gép neve, amirõl a nyomtatási feladat érkezett</p></dd><dt class=hdlist1><em>nyilvántartás</em></dt><dd><p>ez a nyilvántartást tároló állomány <code>af</code> tulajdonsággal definiált neve</p></dd></dl></div></li><li><p>A <em>konverziós szûrõk</em> (conversion filter) egy adott állományformátumot hoznak a nyomtató számára értelmes formára. Például ditroff adatok közvetlenül ugyan nem nyomtathatóak, azonban a ditroff állományokhoz tudunk telepíteni egy olyan szûrõt, amely a ditroff adatokat a nyomtató számára is emészthetõ és nyomtatható formájúvá teszi. A <a href=#printing-advanced-convfilters>Konverziós szûrõk</a> címû szakasz tud ezekrõl többet mondani. Ilyen esetekben kérhetünk nyilvántartást. A konverziós szûrõk az alábbi paraméterekkel indulhatnak:</p><div class=paragraph><p><code>szûrõnév -x <em>pixelszélesség</em> -y <em>pixelmagasság</em> -n <em>hozzáférés</em> -h <em>gépnév</em> <em>nyilvántartás</em></code></p></div><div class=paragraph><p>ahol a <em>pixelszélesség</em> a <code>px</code> tulajdonság értékébõl (ami alapból 0), a <em>pixelmagasság</em> a <code>py</code> tulajdonság értékébõl (ami alapból szintén 0) származik.</p></div></li><li><p>A <em>kimeneti szûrõ</em> (output filter), ami csak akkor aktív, ha a szövegszûrõ nem, vagy ha engedélyeztük fejléclapok nyomtatását. Tapasztalatom szerint az ilyen szûrõket ritkán használják. A <a href=#printing-advanced-of>Kimeneti szûrõk</a> címû szakasz mutatja be a mûködésüket. Ekkor csupán két paraméterünk van:</p><div class=paragraph><p><code>szûrõnév -w <em>szélesség</em> -l <em>hosszúság</em></code></p></div><div class=paragraph><p>amik rendre megegyeznek a szövegszûrõk <code>-w</code> és <code>-l</code> paramétereivel.</p></div></li></ul></div><div class=paragraph><p>A szûrõk <em>ki is tudnak lépni</em> a következõ kódokkal (exit status):</p></div><div class=dlist><dl><dt class=hdlist1>0</dt><dd><p>A szûrõ sikeresen kinyomtatta az állományt.</p></dd><dt class=hdlist1>1</dt><dd><p>A szûrõnek nem sikerült kinyomtatnia az állományt, azonban szeretné, ha az LPD újból megpróbálkozna vele. Az LPD tehát ebben az esetben újraindítja a szûrõt.</p></dd><dt class=hdlist1>2</dt><dd><p>A szûrõnek nem sikerült kinyomtatnia az állományt, és nem is kívánja újra megpróbálni. Ekkor az LPD eldobja az állományt.</p></dd></dl></div><div class=paragraph><p>A FreeBSD kiadásokban megtalálható <span class=filename>/usr/libexec/lpr/lpf</span> szövegszûrõ képes a kapott szélesség és hossz paraméterekkel megállapítani az oldaltöréseket és a nyomtató használatát nyilvántartani, amihez a hozzáférés, gépnév és nyilvántartás adatait használja fel.</p></div><div class=paragraph><p>Amikor majd igyekszünk mellé újabb szûrõket beszerezni, ne felejtsük el ellenõrizni, hogy együtt tudnak-e mûködni az LPD-vel. Ha a válasz igen, akkor a fentebb említett paraméterek mindegyikét ismerniük kell. Az általános használatra készült szûrõk készítése során mi magunknak is be kell tartanunk ezeket az elvárásokat.</p></div></div><div class=sect3><h4 id=printing-advanced-if-conversion>9.4.1.2. Szöveges nyomtatási feladatok PostScript® nyomtatókon<a class=anchor href=#printing-advanced-if-conversion></a></h4><div class=paragraph><p>Ha csak egyedül dolgozunk a számítógépen és PostScript® (vagy bármilyen más nyelvet ismerõ) nyomtatónk van, valamint megígérjük, hogy soha nem küldünk sem mi, sem pedig nem küldetünk semmilyen más programmal nyers szöveget a nyomtatóra, akkor átléphetjük ezt a szakaszt.</p></div><div class=paragraph><p>Ha viszont egyaránt akarunk küldeni PostScript® programot és nyers szöveget tartalmazó nyomtatási feladatot a nyomtatónak, akkor ehhez kénytelenek vagyunk a rendszerünket beállítani. Elõször is szükségünk van szövegszûrõre, ami megállapítja, hogy a frissen érkezett nyomtatási feladat nyers szöveget vagy PostScript® programot tartalmaz-e. Minden PostScript®-alapú feladat a <code>%!</code> karaktersorozattal kezdõdik (a többi esetben olvassuk a nyomtató leírását). Szóval, ha a nyomtatandó állomány elsõ két karaktere ilyen, akkor egy PostScript® programmal van dolgunk és közvetlenül továbbküldhetjük a nyomtatási feladatot a nyomtatónak. Minden más esetben a szûrõnek elõbb át kell alakítania a szöveget PostScript® nyelvre.</p></div><div class=paragraph><p>Hogyan érhetjük el mindezt?</p></div><div class=paragraph><p>Ha soros nyomtatónk van, akkor erre a feladatra az <code>lprps</code> parancs tökéletes. Az <code>lprps</code> egy olyan PostScript® szûrõ, amely mind a két irányban képes közvetíteni. Folyamatosan rögzíti egy állományba a nyomtató állapotát, így a felhasználók és rendszergazdák pontosan látják a nyomtató jelenlegi állapotát (például <code>toner low</code> (a toner hamarosan kifogy) vagy <code>paper jam</code> (a papír beragadt)). Ami viszont sokkal lényegesebb, hogy a <code>psif</code> nevû program képes megmondani az érkezõ nyomtatási feladat valódi típusát, és ennek megfelelõen meg tudja hívni nyers szöveg átalakítására a <code>textps</code> (egy másik program, amit a <code>lprps</code> mellé kapunk) parancsot. Ezután az <code>lprps</code> elküldi a feladatot a nyomtatónak.</p></div><div class=paragraph><p>Az <code>lprps</code> a FreeBSD Portgyûjteményének része (lásd <a href=../ports/#ports>A Portgyûjtemény</a>), ezért a használni kívánt papír méretétõl függõen pillanatok alatt magunk is letölhetjük, fordíthatjuk és telepíthetjük a <a class=package href=https://cgit.freebsd.org/ports/tree/print/lprps-a4/>print/lprps-a4</a> és <a class=package href=https://cgit.freebsd.org/ports/tree/print/lprps-letter/>print/lprps-letter</a> csomagok valamelyikét. Az <code>lprps</code> telepítése után egyszerûen csak adjuk meg a <code>psif</code> elérési útvonalát. Ha tehát telepítettük a Portgyûjteménybõl az <code>lprps</code> csomagot, akkor egy soros portra csatlakozó PostScript® nyomtató esetén ezt kell beírnunk az <span class=filename>/etc/printcap</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>:if=/usr/local/libexec/psif:</pre></div></div><div class=paragraph><p>Ezenkívül még az <code>rw</code> tulajdonsággal meg kell mondanunk az LPD-nek, hogy a nyomtatót írásra és olvasásra nyissa meg.</p></div><div class=paragraph><p>Amennyiben a PostScript® nyomtatónk a párhuzamos porton csatlakozik (és amiért a nyomtatónk nem képes az <code>lprps</code> által igényelt kétirányú kommunikációra), szövegszûrõként a következõ szkriptet fogjuk használni:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  psif - PostScript vagy nyers szöveg nyomtatása PostScript nyomtatón
#  Ez a szkriptes változat, NEM pedig az lprps-hez mellékelt szûrõ
#  (a /usr/local/libexec/psif állomány)!
#

IFS=&#34;&#34; read -r first_line
first_two_chars=`expr &#34;$first_line&#34; : &#39;\(..\)&#39;`

if [ &#34;$first_two_chars&#34; = &#34;%!&#34; ]; then
    #
    #  PostScript: nyomtassuk ki.
    #
    echo &#34;$first_line&#34; &amp;&amp; cat &amp;&amp; printf &#34;\004&#34; &amp;&amp; exit 0
    exit 2
else
    #
    #  Nyers szöveg: alakítsuk át, majd nyomtassuk ki.
    #
    ( echo &#34;$first_line&#34;; cat ) | /usr/local/bin/textps &amp;&amp; printf &#34;\004&#34; &amp;&amp; exit 0
    exit 2
fi</pre></div></div><div class=paragraph><p>A fentebb szereplõ szkriptben a <code>textps</code> programot használjuk a nyers szövegek PostScript® programokra alakításához, de helyette bármilyen más konvertáló programot is igénybe vehetünk. A FreeBSD Portgyûjteményében (lásd <a href=../ports/#ports>A Portgyûjtemény</a>) találhatunk erre a célra egy <code>a2ps</code> nevû programot is, amit esetleg érdemes lehet közelebbrõl megnéznünk.</p></div></div><div class=sect3><h4 id=printing-advanced-ps>9.4.1.3. PostScript® szimulációja nem PostScript® nyomtatókon<a class=anchor href=#printing-advanced-ps></a></h4><div class=paragraph><p>A PostScript® a magas színvonalú betûszedés és nyomtatás <em>de facto</em> szabványa. Emellett azonban a PostScript® egy <em>költséges</em> szabvány is. Az Aladdin Enterprises-nak hála azonban létezik egy hozzá hasonló szabad szoftver, a Ghostscript, amely képes FreeBSD-n is futni. A Ghostscript képes a legtöbb PostScript® állomány olvasására, megjelenítésére mindenféle eszközökön, beleértve a PostScript®et nem ismerõ nyomtatókat is. A Ghostscript és egy speciális szövegszûrõ telepítésével el tudjuk érni, hogy egy nem PostScript® nyomtató valódi PostScript® nyomtatóként viselkedjen.</p></div><div class=paragraph><p>Ha telepíteni szeretnénk, a Ghostscript megtalálható a FreeBSD Portgyûjteményében. Innen tehát magunk is könnyedén le tudjuk tölteni, fordítani és telepíteni.</p></div><div class=paragraph><p>A PostScript® nyomtatás szimulációjához elõször egy szûrõ segítségével észre kell vennünk, hogy egy PostScript® formátumú állományt készülünk kinyomtatni. Ha nem ilyen a nyomtatási feladat, akkor egyenesen a nyomtatóra küldjük, azonban minden más esetben elõször a Ghostscript segítségével átalakítjuk egy olyan formátumba, amit a nyomtató is képes feldolgozni.</p></div><div class=paragraph><p>Nézzünk erre egy példát: a most következõ szövegszûrõ a Hewlett Packard DeskJet 500-as nyomtatóihoz használható. Más nyomtató esetén cseréljük ki a <code>gs</code> (Ghostscript) parancs <code>-sDEVICE</code> paraméterét a neki megfelelõre. (A telepített Ghostscript által ismert nyomtatók listáját a <code>gs -h</code> paranccsal kérdezhetjük le.)</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  ifhp - Ghostscripttel szimulált Postscript nyomtatás DeskJet 500-on
#  Helye: /usr/local/libexec/ifhp

#
#  LF karaktereket CR+LF-ként kezeljük (elkerülve ezzel a HP/PCL
#  nyomtatókon a &#34;lépcsõzést&#34;):
#
printf &#34;\033&amp;k2G&#34; || exit 2

#
#  Az állomány elsõ két karakterének beolvasása
#
IFS=&#34;&#34; read -r first_line
first_two_chars=`expr &#34;$first_line&#34; : &#39;\(..\)&#39;`

if [ &#34;$first_two_chars&#34; = &#34;%!&#34; ]; then
    #
    #  Ez PostScript: küldjük át a Ghostscripten és nyomtassuk ki.
    #
    /usr/local/bin/gs -dSAFER -dNOPAUSE -q -sDEVICE=djet500 \
      -sOutputFile=- - &amp;&amp; exit 0
else
    #
    #  Nyers szöveg vagy HP/PCL, ezért küldjük át közvetlenül. Az utolsó
    #  lap kidobásához küldünk még egy lapdobást is.
    #
    echo &#34;$first_line&#34; &amp;&amp; cat &amp;&amp; printf &#34;\033&amp;l0H&#34; &amp;&amp;
exit 0
fi

exit 2</pre></div></div><div class=paragraph><p>Befejezésül az <code>if</code> tulajdonságon keresztül értesítenünk kell errõl a szûrõrõl az LPD-t is:</p></div><div class="literalblock programlisting"><div class=content><pre>:if=/usr/local/libexec/ifhp:</pre></div></div><div class=paragraph><p>Készen is vagyunk! Most már nyugodtan beírhatjuk, hogy <code>lpr sima.szöveg</code> vagy <code>lpr akármi.ps</code>, mind a kettõnek ki kell tudnia nyomtatódnia.</p></div></div><div class=sect3><h4 id=printing-advanced-convfilters>9.4.1.4. Konverziós szûrõk<a class=anchor href=#printing-advanced-convfilters></a></h4><div class=paragraph><p>Miután elvégeztük az <a href=#printing-simple>Alacsonyszintû nyomtatóbeállítás</a> címû szakaszban leírt beállításokat, a (nyers ASCII szöveg mellett) kedvenc állományformátumainkhoz is minden bizonnyal szeretnénk telepíteni néhány konverziós szûrõt.</p></div><div class=sect4><h5 id=_miért_használjunk_konverziós_szûrõket>9.4.1.4.1. Miért használjunk konverziós szûrõket?<a class=anchor href=#_miért_használjunk_konverziós_szûrõket></a></h5><div class=paragraph><p>A konverziós szûrõk segítségével állományok mindenféle formátumait könnyen ki tudjuk nyomtatni. Például tegyük fel, hogy sokat dolgozunk a TeX betûszedõ rendszerrel és egy PostScript® nyomtatónk van. Minden alkalommal, amikor egy DVI állományt hozunk létre a TeX forrásból, azt közvetlenül még nem tudjuk a nyomtatóra küldeni. Ehhez a következõ parancsokat kell kiadnunk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% dvips hínár-elemzés.dvi
% lpr hínár-elemzés.ps</code></pre></div></div><div class=paragraph><p>Ha telepítünk egy konverziós szûrõt a DVI állományokhoz, meg tudjuk spórolni ezt a manuális átalakítási lépést azzal, hogy átadjuk ezt a feladatot az LPD-nek. Így ezután mindig, amikor egy DVI állományt akarunk kinyomtatni, csupán egyetlen lépésre lesz szükségünk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-d</span> hínár-elemzés.dvi</code></pre></div></div><div class=paragraph><p>Az LPD-nek a <code>-d</code> paraméterrel adjuk meg, hogy a nyomtatás elõtt hajtsa végre a DVI átalakítását. A <a href=#printing-lpr-options-format>Formázási és konverziós beállítások</a> címû szakaszban találjuk meg a többi konverziós opciót.</p></div><div class=paragraph><p>Minden olyan konverziós beállításhoz, amit használni szeretnénk a nyomtatóval, telepítenünk kell egy <em>konverziós szûrõt</em> (conversion filter) és meg kell adnunk a nevét az <span class=filename>/etc/printcap</span> állományban. A konverziós szûrõk az egyszerû nyomtatóbeállításnál szereplõ szövegszûrõkhöz hasonlítanak (lásd <a href=#printing-textfilter>A szövegszûrõ telepítése</a> szakasz) azzal a kivétellel, hogy a nyers szövegek kinyomtatása helyett ezek a szûrõk a nyomtató számára értelmes formátumra alakítják az állományokat.</p></div></div><div class=sect4><h5 id=_milyen_konverziós_szûrõket_érdemes_telepíteni>9.4.1.4.2. Milyen konverziós szûrõket érdemes telepíteni?<a class=anchor href=#_milyen_konverziós_szûrõket_érdemes_telepíteni></a></h5><div class=paragraph><p>Olyan konverziós szûrõket telepítsünk, amelyekre gyakran szükségünk lehet. Ha például sok DVI adatot szeretnénk nyomtatni a jövõben, akkor használjunk DVI konverziós szûrõt, vagy ha sok troff formátumú adatot nyomtatunk, akkor minden bizonnyal jól fog jönni egy troff szûrõ.</p></div><div class=paragraph><p>A következõ táblázat foglalja össze azokat a szûrõket, amelyekkel az LPD képes együttmûködni. Megtudhatjuk, hogy az <span class=filename>/etc/printcap</span> állományban melyik tulajdonság tartozik hozzájuk és hogyan hívjuk meg ezeket az <code>lpr</code> paranccsal:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Állománytípus</th><th class="tableblock halign-left valign-top">Tulajdonság az /etc/printcap állományban</th><th class="tableblock halign-left valign-top">Az lpr kapcsolója</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>cifplot</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>cf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-c</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DVI</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>df</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-d</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>plot</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>gf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-g</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ditroff</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>nf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-n</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>FORTRAN forrás</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>rf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-f</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>troff</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>tf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-f</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>raster</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>vf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-v</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>nyers szöveg</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>if</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>nincs, <code>-p</code>, vagy <code>-l</code></p></td></tr></tbody></table><div class=paragraph><p>A példánkban tehát a <code>lpr -d</code> parancs használata arra utal, hogy a nyomtatónak az <span class=filename>/etc/printcap</span> állományból a <code>df</code> tulajdonságára van szüksége.</p></div><div class=paragraph><p>Minden hadakozás ellenére állíthatjuk, hogy a FORTRAN források és a plot által használt szövegek formátuma napjainkra már elavultnak tekinthetõ. Ezért ezekhez az opciókhoz a saját szûrõinkkel tetszõleges formázási lehetõségeket rendelhetünk. Például, ha Printerleaf (az Interleaf asztali kiadványszerkesztõ formátuma) állományokat szeretnénk közvetlenül nyomtatni, akkor valószínûleg nem lesz szükségünk plot állományokra. Ezért a <code>gf</code> tulajdonságnak megadhatunk egy Printerleaf konverziós szûrõt, amelyen keresztül aztán a felhasználók az <code>lpr -g</code> paranccsal Printerleaf állományokat tudnak nyomtatni.</p></div></div><div class=sect4><h5 id=_konverziós_szûrõk_telepítése>9.4.1.4.3. Konverziós szûrõk telepítése<a class=anchor href=#_konverziós_szûrõk_telepítése></a></h5><div class=paragraph><p>Mivel a konverziós szûrõk az alap FreeBSD rendszeren kívülre kerülnek, ezért ezeket minden valószínûség szerint valahol a <span class=filename>/usr/local</span> könyvtárban találjuk meg. Ezen belül is általában a <span class=filename>/usr/local/libexec</span> könyvtárban fordulnak elõ, mivel ezeket csak az LPD futtatja, senki másnak nincs rájuk szüksége.</p></div><div class=paragraph><p>A konverziós szûrõk aktiválásához az <span class=filename>/etc/printcap</span> állományban egyszerûen adjuk meg az alkalmas tulajdonságoknak megfelelõ szûrõk elérési útvonalait.</p></div><div class=paragraph><p>A példánkban most felveszünk egy DVI konverziós szûrõt a <code>bamboo</code> nevû nyomtatóhoz. Itt ismét láthatjuk a korábban használt <span class=filename>/etc/printcap</span> állományt, ahol most azonban a <code>bamboo</code> nevû nyomtatónál hozzáadtunk egy <code>df</code> tulajdonságot:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose) -  egy df szûrõ hozzáadása a bamboo
#  nevû nyomtatóhoz
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>A DVI szûrõ ebben az esetben a <span class=filename>/usr/local/libexec/psdf</span> néven elérhetõ aprócska szkript. Ezt találhatjuk benne:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  psdf - DVI szûrõ PostScript nyomtatóhoz
#  Helye: /usr/local/libexec/psdf
#
# Az lpr -d parancs hatására hívódik meg
#
exec /usr/local/bin/dvips -f | /usr/local/libexec/lprps &#34;$@&#34;</pre></div></div><div class=paragraph><p>A szkript a <code>dvips</code> parancsot szûrõként futtatja (az <code>-f</code> paraméterrel) a szabványos bemenetrõl, ahova a nyomtatási feladatot is kapja. Ezután elindítja az <code>lprps</code> PostScript® szûrõt (lásd a <a href=#printing-advanced-if-conversion>Szöveges nyomtatási feladatok PostScript® nyomtatókon</a> címû szakaszt) az LPD által átadott paraméterekkel. Az <code>lprps</code> parancs ezekkel a paraméterekkel tartja nyilván az így kinyomtatott lapokat.</p></div></div><div class=sect4><h5 id=_további_példák_konverziós_szûrõkre>9.4.1.4.4. További példák konverziós szûrõkre<a class=anchor href=#_további_példák_konverziós_szûrõkre></a></h5><div class=paragraph><p>A konverziós szûrõk telepítésének nincs bevált receptje, ezért ebben a szakaszban bemutatunk rájuk néhány mûködõ illusztrációt. Ezeket tudjuk felhasználni saját szûrõk elkészítésére. Vagy ha megtehetjük, használjuk közvetlenül ezeket.</p></div><div class=paragraph><p>Ebben a példa szkriptben Hewlett Packard LaserJet III-Si nyomtatókhoz hozunk létre raszteres (pontosabban GIF formátumú) konverziós szûrõt:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  hpvf - GIF állományokat konvertál át HP/PCL-be, majd kinyomtatja
#  Helye: /usr/local/libexec/hpvf

PATH=/usr/X11R6/bin:$PATH; export PATH
giftopnm | ppmtopgm | pgmtopbm | pbmtolj -resolution 300 \
    &amp;&amp; exit 0 \
    || exit 2</pre></div></div><div class=paragraph><p>Úgy mûködik, hogy a GIF állományt elõször PNM (portable anymap), utána PGM (portable graymap), majd PBM (portable bitmap) formátumúra alakítja, amibõl végül LaserJet/PCL-kompatibilis adat lesz.</p></div><div class=paragraph><p>Ez lesz a hozzá tartozó <span class=filename>/etc/printcap</span> állomány:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (orchid)
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sh:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:\
        :vf=/usr/local/libexec/hpvf:</pre></div></div><div class=paragraph><p>A most következõ szkript a groff betûszedû rendszerbõl érkezõ troff adatokat alakítja át a <code>bamboo</code> nevû PostScript® nyomtató számára:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  pstf - a groff troff adait alakítja PS-re, majd kinyomtatja
#  Helye: /usr/local/libexec/pstf
#
exec grops | /usr/local/libexec/lprps &#34;$@&#34;</pre></div></div><div class=paragraph><p>A szkript az <code>lprps</code> parancs segítségével kommunikál a nyomtatóval. Ha a nyomtatónk párhuzamos porton csatlakozik, akkor helyette ezt a szkriptet használjuk:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  pstf - a groff troff adatait alakítja PS-re, majd kinyomtatja
#  Helye: /usr/local/libexec/pstf
#
exec grops</pre></div></div><div class=paragraph><p>Kész is! A szûrõ életrekeltéséhez mindössze ennyit kell beillesztenünk az <span class=filename>/etc/printcap</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>:tf=/usr/local/libexec/pstf:</pre></div></div><div class=paragraph><p>Most pedig jöjjön a FORTRAN szerelmeseinek szívét megmelengetõ szkript. Ez egy olyan szövegszûrõ, amely bármelyik nyers szöveget közvetlenül kezelni tudó nyomtató esetén mûködik. A <code>teak</code> nevû nyomtatóhoz helyezzük be:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# hprf - FORTRAN szövegszûrõ LaserJet 3si-hez
# Helye: /usr/local/libexec/hprf
#

printf &#34;\033&amp;k2G&#34; &amp;&amp; fpr &amp;&amp; printf &#34;\033&amp;l0H&#34; &amp;&amp;
 exit 0
exit 2</pre></div></div><div class=paragraph><p>Az <span class=filename>/etc/printcap</span> állományban a <code>teak</code> nyomtatóhoz a következõ sor beírásával tudjuk engedélyezni ezt a szûrõt:</p></div><div class="literalblock programlisting"><div class=content><pre>:rf=/usr/local/libexec/hprf:</pre></div></div><div class=paragraph><p>Most pedig következzen egy utolsó, de az eddigieknél valamivel összetettebb példa. Ebben a korábban bemutatott <code>teak</code> nevû LaserJet nyomtatóhoz fogunk hozzáadni egy DVI szûrõt. Elõször is következzen a mûvelet egyszerûbb része: bõvítsük ki az <span class=filename>/etc/printcap</span> állományt a DVI szûrõ helyének megadásával:</p></div><div class="literalblock programlisting"><div class=content><pre>:df=/usr/local/libexec/hpdf:</pre></div></div><div class=paragraph><p>Ezután következzék a nehezebb rész: a szûrõ elkészítése. Ehhez szükségünk lesz egy DVI-rõl LaserJet/PCL-re alakító programra. A FreeBSD Portgyûjteményében (lásd <a href=../ports/#ports>A Portgyûjtemény</a>) találunk is egyet: a csomag neve <a class=package href=https://cgit.freebsd.org/ports/tree/print/dvi2xx/>print/dvi2xx</a>. A csomag telepítésével megkapjunk a nekünk kellõ <code>dvilj2p</code> programot, ami képes DVI-t LaserJet IIp, LaserJet III és a LaserJet 2000 típusok által ismert kódokra fordítani.</p></div><div class=paragraph><p>A <code>dvilj2p</code> felhasználásától függetlenül a <code>hpdf</code> néven létrehozni kívánt szûrõnk még így is bonyolult lesz, hiszen a <code>dvilj2p</code> nem tud olvasni a szabványos bemenetrõl, hanem mindenáron egy állománnyal akar dolgozni. Sõt, olyan állománnyal, amelynek <span class=filename>.dvi</span> kiterjesztése van, ezért még a <span class=filename>/dev/fd/0</span> (vagyis a szabványos bemenethez tartozó eszközleíró) használata is akadályokba ütközik.</p></div><div class=paragraph><p>Üröm még az örömünkben, hogy a <span class=filename>/tmp</span> könyvtárat sem tudjuk felhasználni ideiglenes link létrehozására: a szimbolikus linkeket a <code>bin</code> felhasználó és csoport birtokolja, a szûrõt pedig a <code>daemon</code> felhasználó futtatja. A <span class=filename>/tmp</span> könyvtárban rááadásul csak a tulajdonosaik képesek állományokat átnevezni vagy törölni (sticky bit). Ezért a szûrõ ugyan létre tudna hozni egy linket, azonban ezt a feladata végeztével nem lesz majd képes törölni, mivel a link egy másik felhasználóhoz tartozik.</p></div><div class=paragraph><p>Ezért a szûrõ az aktuális könyvtárban fogja létrehozni ezt a szimbolikus linket, ami jelen esetünkben a nyomtatási rendszer által használt könyvtár lesz (ezt az <span class=filename>/etc/printcap</span> állomány <code>sd</code> tulajdonságával adjuk meg). Itt remekül el tudják végezni a feladataikat a szûrõk, különösen mivel (néha) több hely van itt, mint a <span class=filename>/tmp</span> könyvtárban.</p></div><div class=paragraph><p>Végül lássuk magát a szûrõt:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  hpdf - DVI adat nyomtatása HP/PCL nyomtatón
#  Helye: /usr/local/libexec/hpdf

PATH=/usr/local/bin:$PATH; export PATH

#
#  Létrehozunk egy függvényt az átmeneti állományok törlésére. Ezek
#  az aktuális könyvtárban jönnek létre, ami pedig a nyomtatási
#  rendszer adott nyomtatóhoz tartozó könyvtára lesz.
#
cleanup() {
   rm -f hpdf$$.dvi
}

#
#  Létrehozunk egy függvényt a súlyos hibák kezelésére: írassunk ki
#  egy adott üzenetet és lépjünk ki a 2-es hibakóddal.  Ezzel üzenünk
#  az LPD-nek, hogy ne hajtsa végre újra a nyomtatási feladatot.
#
fatal() {
    echo &#34;$@&#34; 1&gt;&amp;2
    cleanup
    exit 2
}

#
#  Ha a felhasználó eltávolítja a nyomtatási feladatot a sorból, akkor az
#  LPD egy SIGINT jelzést fog küldeni, ezért próbáljuk meg azt elkapni
#  (néhány más egyéb jelzéssel együtt), így még tudjuk törölni az
#  ideiglenesen # létrehozott állományokat.
#
trap cleanup 1 2 15

#
#  Gondoskodjunk róla, hogy a feladat megkezdésekor még egyetlen
#  használt állomány sem létezik.
#
cleanup

#
#  Kössük össze a szabványos bemenetet egy DVI állománnyal (amit
#  majd nyomtatni akarunk).
#
ln -s /dev/fd/0 hpdf$$.dvi || fatal &#34;Cannot symlink /dev/fd/0&#34;

#
#  LF = CR+LF
#
printf &#34;\033&amp;k2G&#34; || fatal &#34;Cannot initialize printer&#34;

#
#  Alakítsuk át az adatot és nyomtassunk. A dvilj2p által visszaadott érték
#  nem túlságosan megbízható, ezért ne is foglalkozzunk vele.
#
dvilj2p -M1 -q -e- dfhp$$.dvi

#
#  Takarítsunk el magunk után és lépjünk ki szabályosan
#
cleanup
exit 0</pre></div></div></div><div class=sect4><h5 id=printing-advanced-autoconv>9.4.1.4.5. Automatikus konverziók: a konverziós szûrõk helyett<a class=anchor href=#printing-advanced-autoconv></a></h5><div class=paragraph><p>A konverziós szûrõk sokat segítenek egy kényelmes nyomtatási környezet kialakításában, azonban a használatukhoz a felhasználóknak (az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancson keresztül) egyenként hivatkozniuk kell rájuk. Ha a rendszerünk felhasználói nem eléggé mûveltek számítástechnikai téren, akkor még egy szûrõ megadása is zavaró lehet számukra. Ami még ennél is rosszabb, hogy egy rosszul megadott szûrõ hatására a nyomtató sem fogja jól kezelni az adott állomány formátumát és erre válaszul akár többszáz lapot is pillanatok alatt kiköphet magából.</p></div><div class=paragraph><p>A konverziós szûrõk telepítése helyett gyakran csak egy (alapértelmezett) szövegszûrõre van szükségünk, amely kideríti a nyomtatandó állomány pontos formátumát és magától elindítja a neki megfelelõ konverziós szûrõt. Ilyen esetekben például a <code>file</code> parancs pont a hasznunkra válhat. Persze <em>bizonyos</em> állománytípusok közt nagyon nehéz különbséget tenni - de ezekre továbbra is adhatunk még külön konverziós szûrõket.</p></div><div class=paragraph><p>A FreeBSD Portgyûjteményében találhatunk egy <code>apsfilter</code> elnevezésû szövegszûrõt (<a class=package href=https://cgit.freebsd.org/ports/tree/print/apsfilter/>print/apsfilter</a>), ami képes ilyen automatikus konverzióra. Képes felismerni a nyers szöveget, PostScript® programokat, DVI és szinte bármilyen formátumú állományokat, lefuttatni rájuk a megfelelõ átalakításokat, majd kinyomtatni ezeket.</p></div></div></div><div class=sect3><h4 id=printing-advanced-of>9.4.1.5. Kimeneti szûrõk<a class=anchor href=#printing-advanced-of></a></h4><div class=paragraph><p>Az LPD nyomtatási rendszer kezel egy eddig még nem tárgyalt szûrõtípust is: ez a kimeneti szûrõ. A kimeneti szûrõ a szövegszûrõhöz hasonlóan csak nyers szöveg nyomtatására használatos, de tartalmaz néhány egyszerûsítést. Ha kizárólag csak kimeneti szûrõket alkalmazunk, akkor:</p></div><div class=ulist><ul><li><p>Az LPD az egész nyomtatási feladathoz egyetlen kimeneti szûrõt fog használni, nem pedig minden állományhoz külön.</p></li><li><p>Az LPD a kimeneti szûrõ számára nem nyújt semmilyen segítséget a nyomtatási feladaton belül szereplõ állományok kezdetének vagy végének megállapításában.</p></li><li><p>Az LPD a szûrõnek nem adja át sem a felhasználó hozzáférését, sem pedig gépnevét, ezért nyilvántartásra nem alkalmas. Mindent összegezve lényegében csak két paramétert kap meg:</p><div class=paragraph><p><code>szûrõnév -w_szélesség_ -l_hossz_</code></p></div><div class=paragraph><p>ahol a <em>szélesség</em> a kérdéses nyomtató <code>pw</code> tulajdonságából, a <em>hossz</em> pedig a <code>pl</code> tulajdonságából származik.</p></div></li></ul></div><div class=paragraph><p>Ne bûvöljön el minket a szûrõ egyszerûsége! Ha például a nyomtatási feladatban minden állományt újabb lapon szeretnénk kezdeni, akkor azt kimeneti szûrõvel <em>nem tudjuk megoldani</em>. Erre a célra használjunk szövegszûrõt (másik nevén bemeneti szûrõt), lásd <a href=#printing-textfilter>A szövegszûrõ telepítése</a> szakaszt. Továbbá, a kimeneti szûrõ valójában <em>sokkal bonyolultabb</em> abban a tekintetben, hogy a beérkezõ adatok közül neki kell kikeresnie a speciális jelentéssel bíró karaktereket ugyanúgy, ahogy az LPD helyett saját magának kell küldenie a jelzéseket.</p></div><div class=paragraph><p>Azonban a kimeneti szûrõk használata <em>elkerülhetetlen</em>, ha például fejléclapokat akarunk nyomtatni, és esetleg még különbözõ inicializálásra használatos speciális kódokat vagy karakterláncokat akarunk ez elõtt kiküldeni. (Ellenben <em>badarság</em> a fejléclapoktól követelni a felhasználó adatait, hiszen az LPD a kimeneti szûrõnek nem ad semmilyen erre vonatkozó információt.)</p></div><div class=paragraph><p>Egyetlen nyomtató esetén az LPD egyaránt lehetõvé teszi kimeneti, szöveg- és más egyéb szûrõk használatát. Ilyenkor az LPD a kimeneti szûrõn keresztül csak a fejlécet tartalmazó oldal (lásd a <a href=#printing-advanced-header-pages>Fejléclapok</a> szakaszt) nyomtatását indítja el. Ezt követõen az LPD arra számít, hogy a kimeneti szûrõ két karakter, az ASCII 031 és az ezt követõ ASCII 001, hatására <em>leállítja magát</em>. Amikor tehát a kimeneti szûrõ érzékeli ezt a két karaktert (031, 001), akkor a <code>SIGSTOP</code> jelzéssel le kell állnia. Miután az LPD lefuttatta a többi szûrõt, a <code>SIGCONT</code> jelzéssel újraindítja a kimeneti szûrõt.</p></div><div class=paragraph><p>Ha van kimeneti szûrõnk, de <em>nincs</em> szövegszûrõnk, akkor az LPD minden további feldolgozás nélkül továbbadja a nyomtatási feladatot a kimeneti szûrõnek. Ahogy már korábban is említettük, a kimeneti szûrõ a nyomtatási feladatban levõ összes állományt egymás után nyomtatja ki, lapdobások vagy bármilyen más papírmozgatás nélkül, ezért valószínûleg <em>nem</em> ez kell nekünk. Az esetek túlnyomó részében ehhez elég egy szövegszûrõ.</p></div><div class=paragraph><p>A korábban szövegszûrõként beharangozott <code>lpf</code> program kimeneti szûrõként is képes funkcionálni. Ha szükségünk lenne egy gyorsan összecsapható kimeneti szûrõre, és nem akarunk a speciális karakterek, valamint a jelzések küldésével elidõzni, akkor próbálkozzunk az <code>lpf</code> használatával. Az <code>lpf</code> parancsot mellesleg becsomagolhatjuk egy olyan szkriptbe is, amely elvégzi a nyomtató számára szükséges inicializálást.</p></div></div><div class=sect3><h4 id=printing-advanced-lpf>9.4.1.6. Az <code>lpf</code> szövegszûrõ<a class=anchor href=#printing-advanced-lpf></a></h4><div class=paragraph><p>A FreeBSD bináris terjesztéséhez mellékelt <span class=filename>/usr/libexec/lpr/lpf</span> program egy szövegszûrõ (bemeneti szûrõ), amely képes (az <code>lpr -i</code> paranccsal hozzáadott nyomtatási feladatokat) tabulálni, (az <code>lpr -l</code> paranccsal felvett nyomtatási feladatokban) a vezérlõkaraktereket figyelemen kívül hagyni, a nyomtatási feladatban elõforduló törlések és behúzások nyomtatási pozícióját igazítani és nyilvántartani a kinyomtatott lapokat. Kimeneti szûrõként is tud viselkedni.</p></div><div class=paragraph><p>Az <code>lpf</code> szûrõ rengeteg nyomtatási környezetben felhasználható. Habár nem képes a nyomtatónak inicializáló jelsorozatokat küldeni, mégis könnyû olyan szkriptet írni, amely elvégzi ezeket a hiányzó kezdeti beállításokat, majd lefuttatja az <code>lpf</code> szûrõt.</p></div><div class=paragraph><p>Az <code>lpf</code> akkor lesz képes helyesen számolni a kinyomtatott lapokat, ha ehhez az <span class=filename>/etc/printcap</span> állományban jól töltjük ki a <code>pw</code> és <code>pl</code> tulajdonságokat. Ezen értékek segítségével határozható meg ugyanis, hogy mennyi szöveg fért rá egy lapra és így mennyi lapot emésztett fel az adott felhasználó által küldött nyomtatási feladat. A nyomtatás nyilvántartásával kapcsolatban <a href=#printing-advanced-acct>A nyomtató használatának nyilvántartása</a> címû szakaszt érdemes elolvasni.</p></div></div></div><div class=sect2><h3 id=printing-advanced-header-pages>9.4.2. Fejléclapok<a class=anchor href=#printing-advanced-header-pages></a></h3><div class=paragraph><p>Ha <em>nagyon sok</em> felhasználónk van, és sok különbözõ nyomtatót is használnak, akkor elõbb vagy utóbb minden bizonnyal elkerülhetetlenné fog válni a <em>fejléclapok</em> használata.</p></div><div class=paragraph><p>A fejléc-, vagy más néven <em>munka-</em> vagy <em>elválasztó lapok</em> segítik elõ az elvégzett nyomtatási feladatok azonosítását. A többi dokumentumtól eltérõ módon, általában dekoratív keretben, nagy, vastag betûkkel nyomtatódnak ki, hogy a halomnyi papír között a felhasználók könnyedén megtalálhassák az elküldött nyomtatási feladataik eredményét. Természetesen a fejléclapok nyilvánvaló hátulütõje, hogy így minden nyomtatási feladathoz még egy lappal többet kell elhasználni és mivel gyakorlatilag néhány percnél tovább nincs is rájuk szükség, meglehetõsen hamar a kukába kerülnek. (A fejléclapok nyomtatási feladatonként jönnek létre, nem pedig a nyomtatási feladatokban levõ állományokhoz egyenként, ezért nem is akkora pazarlás ez.)</p></div><div class=paragraph><p>Az LPD rendszer képes magától fejléclapokat készíteni a nyomtatásokhoz, <em>amennyiben</em> a nyomtatónk képes közvetlenül nyers szöveget nyomtatni. Ha PostScript® nyomtatónk van, akkor ennek legyártásához egy külsõ programra van szükségünk, lásd a <a href=#printing-advanced-header-pages-ps>Fejléclapok PostScript® nyomtatókon</a> szakaszt.</p></div><div class=sect3><h4 id=printing-advanced-header-pages-enabling>9.4.2.1. A fejléclapok engedélyezése<a class=anchor href=#printing-advanced-header-pages-enabling></a></h4><div class=paragraph><p>Az <a href=#printing-simple>Alacsonyszintû nyomtatóbeállítás</a> címû szakaszban az <span class=filename>/etc/printcap</span> állományban a <code>sh</code> (úgy mint "suppress header") tulajdonsággal kikapcsoltuk a fejléclapokat. A fejléclapok engedélyezéséhez mindössze el kell távolítanunk ezt az <code>sh</code> tulajdonságot.</p></div><div class=paragraph><p>Ez túl egyszerû, nemde?</p></div><div class=paragraph><p>Igen, ez így van. <em>Elõfordulhat</em>, hogy szükségünk van még egy olyan kimeneti szûrõre is, amely inicializáló karaktereket küld a nyomtatónak. Íme egy példa ehhez a Hewlett Packard PCL-kompatibilis nyomtatói esetére:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  hpof - Kimeneti szûrõ Hewlett Packard PCL-kompatibilis nyomtatókhoz
#  Helye: /usr/local/libexec/hpof

printf &#34;\033&amp;k2G&#34; || exit 2
exec /usr/libexec/lpr/lpf</pre></div></div><div class=paragraph><p>Az <code>of</code> tulajdonsággal adjuk meg a kimeneti szûrõt. A <a href=#printing-advanced-of>Kimeneti szûrõk</a> szakaszban errõl részletesebben is olvashatunk.</p></div><div class=paragraph><p>A korábban ismertetett <code>teak</code> nevû nyomtatóhoz most az alábbi minta <span class=filename>/etc/printcap</span> állományt mellékeljük. Itt engedélyeztük a fejléclapokat és hozzátettük az iménti kimeneti szûrõt:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (orchid)
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:\
        :vf=/usr/local/libexec/hpvf:\
        :of=/usr/local/libexec/hpof:</pre></div></div><div class=paragraph><p>Mostantól kezdve, amikor a felhasználók a <code>teak</code> nyomtatón akarnak nyomtatni, minden nyomtatási feladathoz kapni fognak egy fejléclapot. Amennyiben a kedves felhasználók mégis keresgetni akarják a nyomtatásaikat, az <code>lpr -h</code> paranccsal tetszõleges módon letilthatják azokat. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> többi hasonló opcióját <a href=#printing-lpr-options-misc>A fejléclapokhoz tartozó beállítások</a> szakaszban találjuk.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Az LPD minden fejléclap után egy lapdobást küld. Ha erre a célra a nyomtatónk egy eltérõ karaktert vagy karaktersorozatot használ, akkor azt az <span class=filename>/etc/printcap</span> állomány <code>ff</code> tulajdonságával határozhatjuk meg.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=printing-advanced-header-pages-controlling>9.4.2.2. A fejléclapok vezérlése<a class=anchor href=#printing-advanced-header-pages-controlling></a></h4><div class=paragraph><p>A fejléclapok engedélyezésével az LPD egy ún. <em>hosszú fejlécet</em> fog készíteni, vagyis a felhasználót, a gépet és a nyomtatási feladatot jól azonosító, egész lapot kitöltõ óriási betûket. Erre egy példa (amiben a <code>rose</code> nevû géprõl <code>kelly</code> küldte az "outline" elnevezésû nyomtatási feladatot):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>      k                   ll       ll
      k                    l        l
      k                    l        l
      k   k     eeee       l        l     y    y
      k  k     e    e      l        l     y    y
      k k      eeeeee      l        l     y    y
      kk k     e           l        l     y    y
      k   k    e    e      l        l     y   yy
      k    k    eeee      lll      lll     yyy y
                                               y
                                          y    y
                                           yyyy

                                   ll
                          t         l        i
                          t         l
       oooo    u    u   ttttt       l       ii     n nnn     eeee
      o    o   u    u     t         l        i     nn   n   e    e
      o    o   u    u     t         l        i     n    n   eeeeee
      o    o   u    u     t         l        i     n    n   e
      o    o   u   uu     t  t      l        i     n    n   e    e
       oooo     uuu u      tt      lll      iii    n    n    eeee

      r rrr     oooo     ssss     eeee
      rr   r   o    o   s    s   e    e
      r        o    o    ss      eeeeee
      r        o    o      ss    e
      r        o    o   s    s   e    e
      r         oooo     ssss     eeee

                                              Job:  outline
                                              Date: Sun Sep 17 11:04:58 1995</code></pre></div></div><div class=paragraph><p>Ezt követõen az LPD elküld még egy lapdobást is, ezért maga a nyomtatási feladat eredménye egy új oldalon fog kezdõdni (kivéve, ha az <span class=filename>/etc/printcap</span> állományban az adott nyomtatóhoz tartozó bejegyzésben megadtuk az <code>sf</code> (úgy mint "suppress form feeds", vagyis a lapdobások letiltása) tulajdonságot.</p></div><div class=paragraph><p>Ha úgy jobban tetszik, akkor az <span class=filename>/etc/printcap</span> állományban a <code>sb</code> tulajdonsággal az LPD utasítható <em>rövid fejlécek</em> készítésére is. Ilyenkor a fejléclap tartalma mindössze ennyi lesz:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>rose:kelly  Job: outline  Date: Sun Sep 17 11:07:51 1995</code></pre></div></div><div class=paragraph><p>Alapértelmezés szerint az LPD elõször a fejléclapot, majd a nyomtatási feladatot végzi el. Ezt a sorrendet az <span class=filename>/etc/printcap</span> állományban a <code>hl</code> (header last) tulajdonsággal meg tudjuk fordítani.</p></div></div><div class=sect3><h4 id=printing-advanced-header-pages-accounting>9.4.2.3. A nyomtató használatának nyilvántartása<a class=anchor href=#printing-advanced-header-pages-accounting></a></h4><div class=paragraph><p>Az LPD által felkínált fejléclapok használata során egyetlen irányelv érvényesül a nyilvántartásukban: a fejléclapok <em>költségmentesek</em>.</p></div><div class=paragraph><p>De miért?</p></div><div class=paragraph><p>Azért, mert kizárólag csak a kimeneti szûrõ képes a fejléclapok viselkedését irányítani, ami viszont nem képes semmiféle nyilvántartásra, hiszen nem kapja meg az ehhez szükséges <em>felhasználói- vagy gépnév</em> információkat, illetve nyilvántartásokat. Emiatt fogalma sincs róla, hogy kit terhel az adott nyomtató használata. Úgy sem tudjuk megoldani a problémát, ha a szöveg- vagy konverziós szûrõkben (ahol már rendelkezésünkre állnak a felhasználó és a gépének adatai) "növeljük a lapok számát eggyel" a nyomtatási feladatban, mivel a felhasználók az <code>lpr -h</code> parancs használatával kedvük szerint letilthatják a fejléclapokat. Ezt ugyan alapvetõen a természetet óvni kívánó felhasználók részesítik elõnyben, de ettõl függetlenül sem erõszakolhatjuk rá mindenkire.</p></div><div class=paragraph><p><em>Az sem elég</em>, ha minden szûrõ létrehozza a saját fejlécét (amiért aztán pénzt kérhetnénk). Mivel ha a felhasználók az <code>lpr -h</code> paranccsal le akarják tiltani a fejlécek használatát, attól a szûrõkhöz még mindig létrejönnek, hiszen az LPD a <code>-h</code> opcióról semmilyen értesítést nem küld át a szûrõknek.</p></div><div class=paragraph><p>Nos, ilyenkor mitévõk legyünk?</p></div><div class=paragraph><p>A lehetõségeink:</p></div><div class=ulist><ul><li><p>Elfogadjuk az LPD elvét, és nem számítunk fel költséget a fejléclapokra.</p></li><li><p>Az LPD helyett egy másik nyomtatási rendszert használunk, például az LPRng rendszert. A <a href=#printing-lpd-alternatives>Más nyomtatási rendszerek</a> címû szakaszban kiderül, milyen alternatívák érhetõek el az LPD kiváltására.</p></li><li><p>Írjunk mi magunk egy <em>intelligens</em> kimeneti szûrõt. Normális esetben a kimeneti szûrõk nem valók másra, csupán a nyomtató alaphelyzetbe hozására vagy egyszerûbb karakterkonverziók elvégzésére. Fejléclapokhoz és nyers szöveget tartalmazó nyomtatási feladathoz remekül használható (ahol nincs szöveg- (avagy bemeneti) szûrõ). Azonban ha a nyers szövegekhez van szövegszûrõnk, akkor az LPD a kimeneti szûrõt csak a fejléclapokhoz indítja el. Emellett a kimeneti szûrõ az LPD által generált fejléc szövegébõl képes megmondani, melyik felhasználóhoz és géphez tartozik a szóbanforgó fejléc. A módszer egyetlen bökkenõje, hogy a nyilvántartásokat tároló állományról viszont még így se tudunk semmilyen információt szerezni (mivel nem kapjuk meg az <code>af</code> tulajdonsággal beállított állomány nevét). Ha azonban egy rendszerszinten elérhetõ állományba mentjük ezeket az adatokat, akkor akár bele is drótozhatjuk ezt a kimeneti szûrõbe. A kimeneti szûrõnek az adatok megtalálásában ilyenkor úgy tudunk segíteni, ha az <span class=filename>/etc/printcap</span> állományban az <code>sh</code> (rövid fejléc) tulajdonságot állítjuk be. De ez igazából sok hûhó semmiért, és a felhasználók is jobban megbecsülik az olyan nagylelkû rendszergazdát, aki nem számítja fel nekik a fejléclapokat.</p></li></ul></div></div><div class=sect3><h4 id=printing-advanced-header-pages-ps>9.4.2.4. Fejléclapok PostScript® nyomtatókon<a class=anchor href=#printing-advanced-header-pages-ps></a></h4><div class=paragraph><p>Ahogy arról már korábban is szó esett, az LPD képes többféle nyomtató számára is megfelelõ, nyers szövegû fejléclapokat készíteni. Persze a PostScript® közvetlenül nem képes nyers szövegek nyomtatására, ezért az LPD ezen lehetõsége lényegében használhatatlan - többnyire.</p></div><div class=paragraph><p>Ilyen helyzetben a fejléclapok használatának nyilvánvaló módja, hogy minden szövegszûrõt fejlécek gyártására utasítunk. Ezek a szûrõk a felhasználóról és a gépérõl kapott információkból össze tudják állítani a megfelelõ fejléclapot. A megoldás hátránya, hogy ez még olyankor is megtörténik, amikor a felhasználók az <code>lpr -h</code> paranccsal küldik a nyomtatási feladataikat.</p></div><div class=paragraph><p>Kísérletezzünk egy kicsit ezzel a módszerrel! A most következõ szkript három paramétert fogad el (a felhasználó hozzáférést, a gép és a nyomtatási feladat nevét), majd ezekbõl létrehoz egy egyszerû PostScript® formátumú fejlécet:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  make-ps-header - PostScript fejléc létrehozása a szabvány kimenetre
#  Helye: /usr/local/libexec/make-ps-header
#

#
#  Ezek itt a PostScript által használt egységekben vannak megadva
#  (72/col vagy 28/cm).  Írjuk át az általunk használt papírméretre,
#  A4-re vagy amit éppen használunk:
#
page_width=612
page_height=792
border=72

#
#  A paraméterek ellenõrzése.
#
if [ $# -ne 3 ]; then
    echo &#34;Usage: `basename $0` &lt;user&gt; &lt;host&gt; &lt;job&gt;&#34; 1&gt;&amp;2
    exit 1
fi

#
#  Mentsük el ezeket, leginkább az olvashatóság miatt.
#
user=$1
host=$2
job=$3
date=`date`

#
#  Küldjük el a PostScript-kódot a szabványos kimenetre.
#
exec cat &lt;&lt;EOF
%!PS

%
%  Gondoskodjunk róla, hogy ne zavarjuk az utánunk következõ
%  felhasználó nyomtatási feladatának végrehajtását.
%
save

%
%  Csináljunk egy csúf vastag szegélyt, körbe a papíron.
%
$border $border moveto
$page_width $border 2 mul sub 0 rlineto
0 $page_height $border 2 mul sub rlineto
currentscreen 3 -1 roll pop 100 3 1 roll setscreen
$border 2 mul $page_width sub 0 rlineto closepath
0.8 setgray 10 setlinewidth stroke 0 setgray

%
%  Jelenítsük meg a felhasználó azonosítóját szép, feltûnõ
%  betûkkel.
%
/Helvetica-Bold findfont 64 scalefont setfont
$page_width ($user) stringwidth pop sub 2 div $page_height 200 sub moveto
($user) show

%
%  Most pedig mutassuk az unalmas részleteket.
%
/Helvetica findfont 14 scalefont setfont
/y 200 def
[ (Job:) (Host:) (Date:) ] {
200 y moveto show /y y 18 sub def }
forall

/Helvetica-Bold findfont 14 scalefont setfont
/y 200 def
[ ($job) ($host) ($date) ] {
        270 y moveto show /y y 18 sub def
} forall

%
% Ennyi lett volna.
%
restore
showpage
EOF</pre></div></div><div class=paragraph><p>Ezzel a szkripttel pedig mindegyik konverziós és szövegszûrõ elõször létrehoz egy fejléclapot, majd elvégzi a felhasználó nyomtatási feladatát. Íme egy korábban már bemutatott DVI szûrõ, amit most kiegészítünk a fejléclapok használatával:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  psdf - DVI szûrõ PostScript nyomtatóhoz
#  Helye: /usr/local/libexec/psdf
#
#  Az lpr -d parancs hatására hívódik meg.
#

orig_args=&#34;$@&#34;

fail() {
    echo &#34;$@&#34; 1&gt;&amp;2
    exit 2
}

while getopts &#34;x:y:n:h:&#34; option; do
    case $option in
        x|y)  ;; # Ignore
        n)    login=$OPTARG ;;
        h)    host=$OPTARG ;;
        *)    echo &#34;LPD started `basename $0` wrong.&#34; 1&gt;&amp;2
              exit 2
              ;;
    esac
done

[ &#34;$login&#34; ] || fail &#34;No login name&#34;
[ &#34;$host&#34; ] || fail &#34;No host name&#34;

( /usr/local/libexec/make-ps-header $login $host &#34;DVI File&#34;
  /usr/local/bin/dvips -f ) | eval /usr/local/libexec/lprps $orig_args</pre></div></div><div class=paragraph><p>Láthatjuk, hogy a szûrõnek a felhasználói- és a gépnév megállapításához végig kell néznie a paraméterek listáját. Ez lényegében minden más konverziós szûrõnél ugyanígy néz ki. Ez a lista azonban a szövegszûrõk esetén némileg eltér (lásd a <a href=#printing-advanced-filters>Hogyan mûködnek a szûrõk?</a> szakaszt).</p></div><div class=paragraph><p>Már az elõbbiekben is tárgyaltuk, hogy ez a megoldás, habár eléggé egyszerû, az <code>lpr</code> számára nem teszi lehetõvé a fejléclapok letiltását (a <code>-h</code> opció). Ha a felhasználóink kímélni akarják a fákat (vagy meg akarják úszni a fejléclapok égbeszökõ költségeit), akkor ezt nem tudják megtenni, hiszen a szûrõk minden nyomtatási feladathoz készíteni fognak fejléceket.</p></div><div class=paragraph><p>Ezt a korlátozást csak úgy tudjuk elsöpörni, ha bevetjük a <a href=#printing-advanced-header-pages-accounting>A nyomtató használatának nyilvántartása</a> szakaszban leírt cselt, tehát készítünk egy olyan kimeneti szûrõt, amely megkeresi az LPD-vel generált fejléceket és létrehozza azok PostScript® változatát. Ha valaki az <code>lpr -h</code> paranccsal küld nyomtatnivalót, akkor LPD nem készít hozzá fejléclapot, ahogy a kimeneti szûrõnk sem. A kimeneti szûrõ minden más esetben beolvassa az LPD által küldött szöveget és átküldi a neki megfelelõ PostScript® kódot a nyomtatóra.</p></div><div class=paragraph><p>Ha soros PostScript® nyomtatónk van, akkor használhatjuk a <code>psof</code> kimeneti szûrõhöz tartozó <code>lprps</code> parancsot is, ami pontosan az elõbbit végzi el. Hozzátennénk azonban, hogy a <code>psof</code> nem számolja a fejléclapokat.</p></div></div></div><div class=sect2><h3 id=printing-advanced-network-printers>9.4.3. Hálózati nyomtatás<a class=anchor href=#printing-advanced-network-printers></a></h3><div class=paragraph><p>A FreeBSD tud hálozaton is nyomtatni, vagyis tud távoli számítógépeknek is nyomtatási feladatot küldeni. A hálózati nyomtatás kifejezés általánosságban véve két különbözõ dologra utalhat:</p></div><div class=ulist><ul><li><p>Egy távoli számítógéphez kapcsolt nyomtató hozzáférését. A géphez a nyomtató a hagyományos soros vagy párhuzamos csatolófelületen keresztül kapcsolódik, amit aztán az LPD alkalmas beállításával a hálózaton mindenki számára elérhetõvé teszünk. A <a href=#printing-advanced-network-rm>Távoli számítógépekre csatlakoztatott nyomtatók</a> címû szakasz errõl szól.</p></li><li><p>Egy közvetlenül a hálózatra kapcsolt nyomtató hozzáférését. A nyomtató tehát rendelkezik még egy hálózati csatlakozással is a hagyományos soros vagy párhuzamos felület mellett (vagy éppen helyett). Egy ilyen nyomtató a következõképpen mûködhet:</p><div class=ulist><ul><li><p>Elfogadja az LPD kéréseit, és még képes nyomtatási feladatokat is tárolni. Ebben az esetben teljesen egyenértékû egy LPD alkalmazást futtató számítógéppel. Ekkor nincs más teendõnk, csak követnünk kell a <a href=#printing-advanced-network-rm>Távoli számítógépeken telepített nyomtatók</a> címû szakasz utasításait.</p></li><li><p>Hálózati adatfolyamokkal dolgozik. Ebben az esetben a nyomtatót "hozzá kell kapcsolnunk" a hálózaton található egyik számítógéphez, ami majd a nyomtatási feladatok tárolásáért és folyamatos küldéséért lesz felelõs. A <a href=#printing-advanced-network-net-if>Nyomtatók hálózati adatcsatlakozással</a> szakasz az ilyen fajtájú nyomtatók telepítésére tesz néhány javaslatot.</p></li></ul></div></li></ul></div><div class=sect3><h4 id=printing-advanced-network-rm>9.4.3.1. Távoli számítógépekre csatlakoztatott nyomtatók<a class=anchor href=#printing-advanced-network-rm></a></h4><div class=paragraph><p>Az LPD nyomtatási rendszer alapból képes más, szintén LPD-t (vagy vele kompatibilis rendszert) futtató számítógépekre nyomtatási feladatokat küldeni. Ezzel lényegében az egyik géphez hozzá tudunk kapcsolni egy nyomtatót, amit aztán a többiek számára elérhetõvé teszünk. Ez olyan nyomtatók esetében is mûködik, amelyek ismerik az LPD által alkalmazott protokollt.</p></div><div class=paragraph><p>A távoli nyomtatáshoz elõször telepítsük a nyomtatót valamelyik számítógépre az <a href=#printing-simple>Alacsonyszintû nyomtatóbeállítás</a> szakaszban leírtak szerint, és ezzel az lesz a <em>nyomtatószerverünk</em>. Ezután, amennyiben szükségesnek találjuk, végezzünk <a href=#printing-advanced>magasabb szintû nyomtatóbeállítások</a>at is. Ne felejtsük el kipróbálni a nyomtatón, hogy rendesen mûködik az LPD mindegyik olyan beállításával, amit engedélyeztünk. Emellett gondoskodjunk minden olyan jogosultságról is, amivel a <em>helyi számítógéprõl</em> el tudjuk érni a <em>távoli számítógép</em> által felkínált LPD szolgáltatást (lásd <a href=#printing-advanced-restricting-remote>Távoli számítógépekrõl érkezõ kérések szabályozása</a>).</p></div><div class=paragraph><p>Ha olyan nyomtatót használunk, aminek a hálózati felülete kompatibilis az LPD rendszerrel, akkor az elõbb említett <em>nyomtatószerver</em> lényegében maga lesz a nyomtató, valamint a <em>nyomtató neve</em> a rajta beállított név. Ezzel kapcsolatban olvassuk el a nyomtatóhoz és/vagy a hálózati csatolójához mellékelt dokumentációt.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Amikor a Hewlett Packard Laserjet típusú nyomtatóit használjuk, a <code>text</code> nevû nyomtatónév magától elvégzi a LF és CRLF formátumú sortörések közti átalakítást, ezért ilyenkor nincs szükségünk a <span class=filename>hpif</span> szkriptre.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ezután ha szeretnénk más gépek részére is elérhetõvé tenni a frissen telepített nyomtatónkat, adjuk meg mindegyikük <span class=filename>/etc/printcap</span> állományában a következõket:</p></div><div class="olist arabic"><ol class=arabic><li><p>Tetszõlegesen választott nevet, álneveket. Az egyszerûség kedvéért azonban itt érdemes ugyanazokat a neveket választani, mint amit a nyomtatószerveren is használunk.</p></li><li><p>Szándékosan hagyjuk az <code>lp</code> tulajdonságot üresen (<code>:lp=:</code>).</p></li><li><p>Hozzunk létre egy nyomtatási könyvtárat, és jelöljük meg a helyét az <code>sd</code> tulajdonsággal. Az LPD itt fogja összegyûjteni a nyomtatási feladatokat, mielõtt elküldené azokat a nyomtatószervernek.</p></li><li><p>Adjuk meg a nyomtatószerver nevét az <code>rm</code> tulajdonság segítségével.</p></li><li><p>Az <code>rp</code> tulajdonsággal adjuk meg a <em>nyomtatószerverre</em> csatlakoztatott nyomtató nevét.</p></li></ol></div><div class=paragraph><p>Kész! Az <span class=filename>/etc/printcap</span> állományban már nem kell megadni konverziós szûrõket, oldalbeállításokat és semmi más egyebet.</p></div><div class=paragraph><p>Lássunk mindezekre egy példát. A <code>rose</code> nevû számítógéphez két nyomtató csatlakozik, a <code>bamboo</code> és a <code>rattan</code>. Most pedig beállítjuk, hogy az <code>orchid</code> nevû gép felhasználói képesek legyenek ezekkel a nyomtatókkal dolgozni. Ekkor a most következõk szerint fog kinézni az <code>orchid</code> (a <a href=#printing-advanced-header-pages-enabling>Fejléclapok engedélyezése</a> szakaszban bemutatott) <span class=filename>/etc/printcap</span> állománya. Tartalmazza a <code>teak</code> nevû nyomtató beállításait is, és ehhez fogjuk hozzáadni a <code>rose</code> másik két nyomtatóját:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (orchid) - a rose két (távoli) nyomtatójának
#  hozzáadása
#

#
#  A &#34;teak&#34; egy helyi nyomtató, közvetlenül az orchidhoz
#  csatlakozik:
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/ifhp:\
        :vf=/usr/local/libexec/vfhp:\
        :of=/usr/local/libexec/ofhp:

#
#  A &#34;rattan&#34; rose-hoz csatlakozik, így küldhetünk neki nyomtatási
#  feladatot:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=/var/spool/lpd/rattan:

#
#  A &#34;bamboo&#34; is a rose-hoz tartozik:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=/var/spool/lpd/bamboo:</pre></div></div><div class=paragraph><p>Ezután már csak létre kell hoznunk a megfelelõ nyomtatási könyvtárakat az <code>orchid</code> nevû gépen:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mkdir -p /var/spool/lpd/rattan /var/spool/lpd/bamboo</span>
<span class=c># chmod 770 /var/spool/lpd/rattan /var/spool/lpd/bamboo</span>
<span class=c># chown daemon:daemon /var/spool/lpd/rattan /var/spool/lpd/bamboo</span></code></pre></div></div><div class=paragraph><p>Mostantól kezdve az <code>orchid</code> felhasználói képesek lesznek nyomtatni a <code>rattan</code> és <code>bamboo</code> nevû nyomtatókon is. Ezért, ha az <code>orchid</code> egyik felhasználója beírja, hogy:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> bamboo <span class=nt>-d</span> sushi-leírás.dvi</code></pre></div></div><div class=paragraph><p>Az <code>orchid</code> gépen mûködõ LPD rendszer ezt a nyomtatási feladatot a bemásolja a <span class=filename>/var/spool/lpd/bamboo</span> nevû nyomtatási könyvtárba és feljegyzi róla, hogy a nyomtatásához DVI szûrõre lesz szükség. Ahogy <code>rose</code> gépen található <code>bamboo</code> nyomtatási könyvtárában elegendõ hely keletkezik, a két LPD átküldi egymás közt a <code>rose</code> nevû gépre az állományt. Ezután az állomány egészen addig várakozik a <code>rose</code> nyomtatási sorában, amíg végezetül kinyomtatásra nem kerül. A <code>rose</code> fogja átalakítani DVI-rõl PostScript® formátumra átalakítani (mivel a <code>bamboo</code> egy PostScript® nyomtató).</p></div></div><div class=sect3><h4 id=printing-advanced-network-net-if>9.4.3.2. Nyomtatók hálózati adatcsatlakozással<a class=anchor href=#printing-advanced-network-net-if></a></h4><div class=paragraph><p>Amikor hálózati kártyát vásárolunk a nyomtatónkhoz, általában két változatukkal találkozhatunk: az egyikük nyomtatási rendszerként mûködik (ez a drágább), a másikuk pedig egyszerûen csak soros vagy párhuzamos csatlakozón továbbítandó adatként közvetíti az adatokat a nyomtató felé (az olcsóbb). A drágábbik változatot az elõzõ, <a href=#printing-advanced-network-rm>Távoli számítógépekre csatlakoztatott nyomtatók</a> címû szakaszban leírtak szerint tudjuk használni.</p></div><div class=paragraph><p>Az <span class=filename>/etc/printcap</span> állományban ugyan meg tudjuk adni, hogy a nyomtató soros vagy párhuzamos portra csatlakozik, és azon keresztül milyen adatátviteli sebességgel (amennyiben soros), forgalomirányítással, tabulálással, sortörési konvenció szerint stb. kommunikáljunk vele. Azonban TCP/IP vagy más hálózati porton ülõ nyomtatók adatait itt nem tudjuk kifejteni.</p></div><div class=paragraph><p>A hálózatra kötött nyomtatók használatához lényegében egy olyan külön kifejlesztett kommunikációs programra van szükségünk, amely a szöveg- vagy konverziós szûrõkhöz hasonló módon hívható meg. Erre rögtön adunk is egy példát: a <code>netprint</code> szkript a szabványos bemenetrõl beolvassa az összes kinyomtatandó adatot és átküldi azokat a hálózatra csatlakoztatott nyomtatónak. A szkript elsõ paramétereként a nyomtató hálózati nevét adjuk meg, másodiknak pedig portot. Azonban megjegyezzünk, hogy ez csak egyirányú kommunikációt tesz lehetõvé (a FreeBSD-tõl a nyomtatóig). Sok hálózati nyomtató viszont két irányban is képes kommunikálni, ezért érdemes lehet ezt kihasználni (a nyomtató állapotának lekérdezésére, nyilvántartások készítésére stb).</p></div><div class="literalblock programlisting"><div class=content><pre>#!/usr/bin/perl
#
#  netprint - A hálózatra csatlakoztatott nyomtató szövegszûrõje
#  Helye: /usr/local/libexec/netprint
#
$#ARGV eq 1 || die &#34;Usage: $0 &lt;printer-hostname&gt; &lt;port-number&gt;&#34;;

$printer_host = $ARGV[0];
$printer_port = $ARGV[1];

require &#39;sys/socket.ph&#39;;

($ignore, $ignore, $protocol) = getprotobyname(&#39;tcp&#39;);
($ignore, $ignore, $ignore, $ignore, $address)
    = gethostbyname($printer_host);

$sockaddr = pack(&#39;S n a4 x8&#39;, &amp;AF_INET, $printer_port, $address);

socket(PRINTER, &amp;PF_INET, &amp;SOCK_STREAM, $protocol)
    || die &#34;Can&#39;t create TCP/IP stream socket: $!&#34;;
connect(PRINTER, $sockaddr) || die &#34;Can&#39;t contact $printer_host: $!&#34;;
while (&lt;STDIN&gt;) { print PRINTER; }
exit 0;</pre></div></div><div class=paragraph><p>Rengeteg szûrõben fel tudjuk használni ezt a szkriptet. Például tegyük fel, hogy egy Diablo 750-N típusú sornyomtatót csatlakoztattunk a hálózatra, amely az 5100-as porton várja a nyomtatandó adatokat. A hálózati neve most <code>scrivener</code> lesz. Íme a hozzá tartozó szövegszûrõ:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
#  diablo-if-net - Az 5100-as porton figyelõ `scrivener&#39; nevû Diablo
#  nyomtató szövegszûrõje. Helye: /usr/local/libexec/diablo-if-net
#
exec /usr/libexec/lpr/lpf &#34;$@&#34; | /usr/local/libexec/netprint scrivener 5100</pre></div></div></div></div><div class=sect2><h3 id=printing-advanced-restricting>9.4.4. A nyomtató használatának szabályozása<a class=anchor href=#printing-advanced-restricting></a></h3><div class=paragraph><p>Ebben a szakaszban a nyomtató használatának korlázásáról írunk. Az LPD rendszeren keresztül meghatározhatjuk, hogy ki képes helyben vagy távolról hozzáférni a nyomtatóhoz, mennyi másolatot nyomtathat, mennyi és egyenként mekkora nyomtatási feladatokat küldhet.</p></div><div class=sect3><h4 id=printing-advanced-restricting-copies>9.4.4.1. A másolatok számának szabályozása<a class=anchor href=#printing-advanced-restricting-copies></a></h4><div class=paragraph><p>Az LPD segítségével a felhasználók egy állományt könnyen ki tudnak nyomtatni akár többször is. Ha (például) a felhasználó egy nyomtatási feladat kiküldéséhez az <code>lpr -#5</code> parancsot használja, akkor a nyomtatási feladatban levõ összes állományból öt példányt kap. Ennek létjogosultságát azonban nekünk kell megítélni.</p></div><div class=paragraph><p>Amennyiben úgy érezzük, hogy a további példányok készítése csupán felesleges papír- és tintapazarlás, akkor az <code>sc</code> tulajdonság megadásával az <span class=filename>/etc/printcap</span> állományban kikapcsolhatjuk az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> <code>-<mark></mark></code> lehetõség használatát. Így amikor a felhasználók a <code>-</code> kapcsolóval küldenek el feladatokat a nyomtatóra, a következõt fogják tapasztalni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>lpr: multiple copies are not allowed</code></pre></div></div><div class=paragraph><p>Fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>lpr: másolatok nyomtatása nem engedélyezett</code></pre></div></div><div class=paragraph><p>Vigyázzunk arra, hogy ha távoli számítógépen zajlik a nyomtatás (lásd <a href=#printing-advanced-network-rm>Távoli számítógépekre csatlakoztatott nyomtatók</a>), akkor az <code>sc</code> tulajdonságot a távoli számítógép <span class=filename>/etc/printcap</span> állományában is be kell állítani, máskülönben a felhasználók egy másik számítógéprõl mindig képesek lesznek több példány nyomtatására.</p></div><div class=paragraph><p>Nézzünk erre egy példát. Itt most a <code>rose</code> nevû számítógép <span class=filename>/etc/printcap</span> állományát vesszük szemügyre. Ebben a <code>rattan</code> egy nagyon szívélyes nyomtató lesz, ezért engedélyezi a másolatok nyomtatását, azonban a <code>bamboo</code> nevû lézernyomtató nála már sokkal válogatósabb lesz, ezért a beállításai közt az <code>sc</code> tulajdonsággal kikapcsoljuk a másodpéldányok nyomtatását:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose) - A másolatok korlátozása a &#34;bamboo&#34;
#  nevû nyomtatón
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>Az <code>sc</code> tulajdonságot az <code>orchid</code><span class=filename>/etc/printcap</span> állományában is meg kell adni (és ha már itt vagyunk, akkor tegyük meg ugyanezt a <code>teak</code> esetében is):</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (orchid) - Nincsenek másodpéldányok sem a helyi
#  &#34;teak&#34; nyomtatón, sem pedig a távoli &#34;bamboo&#34; nyomtatón
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:sc:\
        :if=/usr/local/libexec/ifhp:\
        :vf=/usr/local/libexec/vfhp:\
        :of=/usr/local/libexec/ofhp:

rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=/var/spool/lpd/rattan:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=/var/spool/lpd/bamboo:sc:</pre></div></div><div class=paragraph><p>Az <code>sc</code> tulajdonság használatával ugyan megakadályozzuk az <code>lpr -#</code> parancs teljesítését, azonban ez még mindig nem óv meg minket attól, hogy a felhasználók képesek legyenek többször egymás után lefuttatni az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancsot, vagy éppen egyetlen nyomtatási feladatban több állományt is elküldeni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr forsale.sign forsale.sign forsale.sign forsale.sign forsale.sign</code></pre></div></div><div class=paragraph><p>Számos módszer kínálkozik az effajta visszaélések kivédésére (beleértve a figyelmen kívül hagyást is), lehet velük kísérletezgetni!</p></div></div><div class=sect3><h4 id=printing-advanced-restricting-access>9.4.4.2. A nyomtatók hozzáférésének szabályozása<a class=anchor href=#printing-advanced-restricting-access></a></h4><div class=paragraph><p>A UNIX® csoportkezelésével és az <span class=filename>/etc/printcap</span> állományban található <code>rg</code> tulajdonság felhasználásával korlátozni tudjuk, ki milyen nyomtatón dolgozhat. Ehhez mindössze annyit kell tennünk, hogy besoroljuk egy csoportba azokat a felhasználókat, amelyek hozzáférhetnek a nyomtatóhoz, és az <code>rg</code> tulajdonsággal megnevezzük azt.</p></div><div class=paragraph><p>A csoporton kívüli felhasználókat (köztük magát a <code>root</code> felhasználót is) pedig ezután így üdvözli a rendszer, ha megpróbálnak valamit kinyomtatni egy korlátozott felhasználású nyomtatón:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>lpr: Not a member of the restricted group</code></pre></div></div><div class=paragraph><p>Az üzenet fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>lpr: Nem jogosult felhasználó</code></pre></div></div><div class=paragraph><p>Ha erre a távoli számítógépek esetén szükségünk lenne (lásd <a href=#printing-advanced-network-rm>Távoli számítógépekre csatlakoztatott nyomtatók</a>), akkor tegyük ugyanazt, mint amit az <code>sc</code> (a másodpéldányok letiltása, "suppress multiple copies") tulajdonság esetén is, vagyis az <code>rg</code> tulajdonságot adjuk meg azokon a távoli számítógépeken is, amelyek hozzá tudnak férni a megosztott nyomtatóhoz.</p></div><div class=paragraph><p>Például megengedjük, hogy a <code>rattan</code> nevû nyomtatót bárki használhassa, azonban a <code>bamboo</code> nyomtatót csak az <code>artists</code> nevû csoport használhatja. Következzen hát akkor a <code>rose</code> korábbról már ismert <span class=filename>/etc/printcap</span> állománya:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose) - A bamboo hozzáférésének korlátozása
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>Most ne bántsuk a másik (az <code>orchid</code> nevû gépen levõ) <span class=filename>/etc/printcap</span> állományt. Így persze az <code>orchid</code> bármelyik felhasználója nyomtathat a <code>bamboo</code> nyomtatón. De ez most egy olyan eset, ahol egyébként lekorlátozzuk a <code>orchid</code> elérését is, ezért az ott beengedett felhasználók már akár használhatják is a nyomtatót. Vagy sem.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Minden nyomtatóhoz csak egy ilyen csoportot adhatunk meg.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=printing-advanced-restricting-sizes>9.4.4.3. A beküldött nyomtatási feladatok méretének szabályozása<a class=anchor href=#printing-advanced-restricting-sizes></a></h4><div class=paragraph><p>Ha sok felhasználó szeretne a nyomtatóinkhoz hozzáférni, akkor minden bizonnyal meg akarunk adni egy felsõ határt a felhasználók által beküldhetõ nyomtatások méretére vonatkozóan. Mivel a nyomtatási könyvtáraknak otthont adó állományrendszer is egyszer betelhet, ezért mindenképpen érdemes gondoskodni arról, hogy mindenki nyomtatási feladatát el tudjuk rendesen tárolni.</p></div><div class=paragraph><p>Az LPD az <code>mx</code> tulajdonsággal lehetõséget ad arra, hogy lekorlátozzuk a nyomtatási feladatokban található egyes állományok méretét. Ennek mértékegysége egy <code>BUFSIZ</code> blokk, ami pedig 1024 byte. Ha értékül nullát adunk meg, akkor nincs korlátozás, viszont ha semmit sem rögzítünk, akkor az <code>mx</code> tulajdonság alapértéke, vagyis 1000 blokk lesz a határ.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ez az érték a nyomtatási feladatokban levõ <em>egyes állományok</em> méretére vonatkozik, <em>nem</em> pedig a nyomtatási feladatok teljes méretére.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Fontos tudni, hogy az LPD nem dobja vissza a méreten felüli állományokat. Ehelyett a méret alatti részt szépen berakja a sorba és kinyomtatja, a többi pedig elhagyja. Lehetne rajta vitázni, hogy ez mennyire helyes cselekedet.</p></div><div class=paragraph><p>Példaképpen definiáljunk a korábban használt <code>rattan</code> és <code>bamboo</code> nyomtatóinkhoz ilyen korlátokat. Mivel az <code>artists</code> csoport tagjai hajlamosak nagy PostScript® állományokat küldeni, ezért most lekorlátozzuk ezt öt megabyte-ra. A szöveges nyomtatónk esetén azonban nem lesz semmilyen határ:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (rose)
#

#
#  Itt nincs korlát a nyomtatási feladatokra:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:mx#0:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

#
#  Öt megabyte a PostScript:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:mx#5000:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>Ismét hozzátesszük, hogy ezek a korlátok csak a helyi felhasználókra vonatkoznak. Amennyiben távolról is el lehet érni ezt a nyomtatót, a távoli felhasználókat nem fog semmilyen korlátozás érinteni. Azokon a számítógépeken is meg kell adnunk az <span class=filename>/etc/printcap</span> állományban az <code>mx</code> tulajdonságot. Ehhez a <a href=#printing-advanced-network-rm>Távoli számítógépekre csatlakoztatott nyomtatók</a> címû szakaszban találunk segítséget.</p></div><div class=paragraph><p>Van még egy speciális módszer, amivel képesek vagyunk szabályozni a távolról érkezõ kérések méretét. Errõl a <a href=#printing-advanced-restricting-remote>Távoli számítógépekrõl érkezõ kérések szabályozása</a> szakaszban olvashatunk.</p></div></div><div class=sect3><h4 id=printing-advanced-restricting-remote>9.4.4.4. Távoli számítógépekrõl érkezõ kérések szabályozása<a class=anchor href=#printing-advanced-restricting-remote></a></h4><div class=paragraph><p>Az LPD nyomtatási rendszer több módot is szolgáltat a távolról érkezõ nyomtatási feladatok szabályozására:</p></div><div class=dlist><dl><dt class=hdlist1>Az elérés szabályozása</dt><dd><p>Az <span class=filename>/etc/hosts.equiv</span> és <span class=filename>/etc/hosts.lpd</span> állományok segítségével beállíthatjuk, hogy mely távoli számítógépektõl fogadjon el kéréseket az LPD. Az LPD minden kérés elfogadásakor ellenõrzi, hogy a küldõ számítógép címe szerepel-e az említett állományok valamelyikében. Ha nem, akkor az LPD visszautasítja a kérést.</p><div class=paragraph><p>A két állomány felépítése egyszerû, mert bennük minden sorban egy-egy hálózati nevet adunk meg. Hozzátennénk azonban, hogy legyünk óvatosak, mivel az <span class=filename>/etc/hosts.equiv</span> állományt az <a href="https://man.freebsd.org/cgi/man.cgi?query=ruserok&amp;sektion=3&amp;format=html">ruserok(3)</a> protokoll is használja, ezért ennek módosítása hatással van az <a href="https://man.freebsd.org/cgi/man.cgi?query=rsh&amp;sektion=1&amp;format=html">rsh(1)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a> programok mûködésére.</p></div><div class=paragraph><p>Például most nézzük meg a <code>rose</code><span class=filename>/etc/hosts.lpd</span> állományát:</p></div><div class="literalblock programlisting"><div class=content><pre>orchid
violet
madrigal.fishbaum.de</pre></div></div><div class=paragraph><p>Ennek megfelelõen tehát a <code>rose</code> elfogadja az <code>orchid</code>, <code>violet</code> és <code>madrigal.fishbaum.de</code> nevû távoli számítógépek kéréseit. Ha bármilyen más gép próbál hozzáférni a <code>rose</code> által felkínált LPD szolgáltatáshoz, visszautasítja.</p></div></dd><dt class=hdlist1>A méret szabályozása</dt><dd><p>Szabályozhatjuk többek közt azt is, hogy mennyi szabad területnek kell fennmaradnia a nyomtatási könyvtárnak otthont adó állományrendszeren. A helyi nyomtató könyvtárában ehhez hozzunk létre egy <span class=filename>minfree</span> nevû állományt. Ide írjuk be, mennyi szabad lemezblokk (512 byte-os egység a lemezen) szükségeltetik egy távolról beérkezõ nyomtatási feladat fogadásához.</p><div class=paragraph><p>Így gondoskodhatunk róla, hogy a távoli felhasználók nem fogják eltömíteni az állományrendszerünket, illetve ezzel egyúttal adhatunk némi elõnyt a helyi felhasználóknak is: õk ugyanis még azután is képesek lesznek nyomtatási feladatokat küldeni a nyomtatónak, miután az állományrendszeren található szabad terület mennyisége már rég a <span class=filename>minfree</span> állományban szereplõ érték alá csökkent.</p></div><div class=paragraph><p>Példaként most a <code>bamboo</code> nevû nyomtatónkhoz adjunk meg egy ilyen <span class=filename>minfree</span> állományt. Ehhez az <span class=filename>/etc/printcap</span> állományból tudjuk kideríteni a hozzá tartozó nyomtatási könyvtárat. Lássuk tehát belõle a <code>bamboo</code> bejegyzését:</p></div><div class="literalblock programlisting"><div class=content><pre>bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:mx#5000:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:mx#5000:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre></div></div><div class=paragraph><p>A nyomtatási könyvtárat az <code>sd</code> tulajdonság határozza meg. Úgy állítjuk most be, hogy az LPD számára a távoli nyomtatási feladatok fogadásához ebben a könyvtárban legalább három megabyte (6144 blokk) szabad területnek mindig lennie kell:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo 6144 &gt; /var/spool/lpd/bamboo/minfree</span></code></pre></div></div></dd><dt class=hdlist1>A felhasználók szabályozása</dt><dd><p>Az <span class=filename>/etc/printcap</span> állományban megadható <code>rs</code> tulajdonság segítségével korlátozhatjuk a helyi nyomtatókhoz hozzáférni képes távoli felhasználókat. Amikor az <code>rs</code> tulajdonság szerepel egy helyben csatlakozó nyomtató leírásánál, akkor az LPD csak abban az esetben fogad el távoli felhasználóktól nyomtatási feladatot, <em>ha</em> az adott feladatot küldõ felhasználónak ugyanazon a néven van a helyi gépen is hozzáférése. Máskülönben az LPD vissza fogja utasítani a kérést.</p><div class=paragraph><p>Ez a tulajdonság különösen fontos olyan környezetben, ahol (például) több szervezeti egység használ egyetlen közös hálózatot és bizonyos felhasználók képesek átlépni szervezeti egységük határait, mivel ha a hozzáférést adunk nekik a rendszereinkhez, akkor képesek a saját helyükrõl használni ezeket. Ha ehelyett <em>csupán</em> a nyomtatóinkat és a számítógépünk összes erõforrását akarjuk megosztani, akkor létrehozhatunk a számukra olyan "token" hozzáféréseket is, amikhez nem tartozik sem felhasználói könyvtár, sem pedig parancsértelmezõ (pontosabban a <span class=filename>/usr/bin/false</span>).</p></div></dd></dl></div></div></div><div class=sect2><h3 id=printing-advanced-acct>9.4.5. A nyomtató használatának nyilvántartása<a class=anchor href=#printing-advanced-acct></a></h3><div class=paragraph><p>Tehát szükségünk lenne a nyomtatások költségének elszámolására. Miért is ne tennénk ilyet? A papír és a tinta bizony pénzbe kerül, amihez még hozzájárulnak más egyéb karbantartási költségek is - a nyomtatók dugig vannak mindenféle mozgó alkatrésszel, amelyek elõbb-utóbbi el is romlanak. Tegyük fel, hogy a nyomtatóink kapacitása, kihasználtsága és karbantartási költsége alapján már megállapítottunk egy elszámolási egységet (oldalanként, méterenként, akárminként). De hogyan lássunk hozzá a nyomtatások költségének tényleges nyilvántartásához?</p></div><div class=paragraph><p>Van egy rossz hírünk: az LPD nyomtatási rendszer önmaga nem tud segíteni ebben a feladatban. A nyilvántartás nagyban függ a használt nyomtatóktól, a nyomtatott formátumoktól és nyomtató <em>általunk</em> kiszabott költségeitõl.</p></div><div class=paragraph><p>A nyilvántartás létrehozásához át kell írnunk a nyomtatóhoz tartozó szûrõt (a nyers szövegek költségének felszámításához) és konverziós szûrõket (a különféle formátumok költségei miatt), amikkel aztán számolhatjuk vagy lekérdezhetjük a kinyomtatott lapokat. Egyetlen kimeneti szûrõ használatával szinte semmire se megyünk, mivel az nem képes nyilvántartás vezetésére. Errõl bõvebb útmutatást a <a href=#printing-advanced-filter-intro>Szûrõk</a> szakaszban találhatunk.</p></div><div class=paragraph><p>Általánosságban véve két módon vezethetünk nyilvántartást:</p></div><div class=ulist><ul><li><p>Az <em>idõszakos elszámolás</em> a gyakoribb, mivel ez az egyszerûbb. Amikor valaki végrehajt egy nyomtatási feladatot, a szûrõ a nyilvántartást tároló állományba feljegyzi a felhasználó azonosítóját, a gépének nevét és a kinyomtatott oldalakat. Ezután minden hónapban, félévben, évben vagy akár tetszõleges idõközönként összegyûjtjük a nyomtatók nyilvántartásait és külön feljegyezzük az egyes felhasználók nyomtatásait, majd benyújtjuk róla a számlát. Töröljük az összes naplóállományt, és tiszta lappal kezdjük a következõ idõszakot.</p></li><li><p>Az <em>azonnali elszámolás</em> már nem annyira népszerû, mivel nehezebb megvalósítani. Ekkor a felhasználók már közvetlenül a nyomtatás után megkapják a számlát, hasonlóan a lemezkvótákhoz. Meg tudjuk akadályozni ezzel azt is, hogy a felhasználók túlléphessék az elõre kiszabott "nyomtatási kvótájukat", amit persze menet közben lehet ellenõrizni és állítgatni. A felhasználók és kvótájuk nyomonkövetéséhez viszont szükségünk lesz egy kis adatbáziskezelésre is.</p></li></ul></div><div class=paragraph><p>Az LPD nyomtatási rendszer mind a két módszer kivitelezéséhez tud segítséget nyújtani, hiszen amikor szûrõket állítunk be (vagyis szinte mindig), lehetõségünk van a nyilvántartást végzõ programrészleteket is beilleszteni. És ami feltétlenül elõnyös: óriási mértékû rugalmasságot ajánl fel a nyilvántartás megvalósításához. Például magunk választhatjuk ki, hogy idõszakos vagy azonnali elszámolást alkalmazunk. Meg tudjuk adni, milyen információkat rögzítsünk: felhasználói neveket, számítógépek neveit, a nyomtatási feladatok típusát, vagy a kinyomtatott oldalakat, a felhasznált lapok területét, a nyomtatások idõbeli igényeit és így tovább. Ehhez mindössze csak a szûrõket kell módosítani.</p></div><div class=sect3><h4 id=_nyilvántartás_gyorsan_és_egyszerûen>9.4.5.1. Nyilvántartás gyorsan és egyszerûen<a class=anchor href=#_nyilvántartás_gyorsan_és_egyszerûen></a></h4><div class=paragraph><p>A FreeBSD-ben egybõl találunk is két programot, amivel pillanatok alatt ki tudunk alakítani egy egyszerû idõszakos elszámolási rendszert. Ezek <a href=#printing-advanced-lpf>Az lpf szövegszûrõ</a> címû szakaszban ismertetett <code>lpf</code> és a nyomtatók nyilvántartásait tartalmazó állományok adatainak összegyûjtését és kiértékelését végzõ <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a>.</p></div><div class=paragraph><p>Ahogy korábban már leírtuk a szûrõkrõl szóló szakaszban (<a href=#printing-advanced-filters>Szûrõk</a>), az LPD a szöveg- és konverziós szûrõket parancssorból a nyilvántartást tároló állomány nevével indítja el. Ezt a paramétert a szûrõk aztán fel tudják használni a nyilvántartások feljegyzéséhez. Az állomány nevét az <span class=filename>/etc/printcap</span> állományban szereplõ <code>af</code> tulajdonsággal tudjuk megadni, vagy teljes elérési úttal, vagy pedig a nyomtatási könyvtárhoz viszonyítva.</p></div><div class=paragraph><p>Az LPD az <code>lpf</code> szûrõt a lap szélességének és hosszának megadásával indítja el (ezeket az értékeket a <code>pw</code> és <code>pl</code> tulajdonságokból származtatja). Az <code>lpf</code> ezek felhasználásával meg tudja mondani, mennyi papírt használtunk el. Miután kiküldte az állományt a nyomtatóra, nyilvántartásba is veszi. Ezek a típusú bejegyzések valahogy így néznek ki:</p></div><div class="literalblock programlisting"><div class=content><pre>2.00 rose:andy
3.00 rose:kelly
3.00 orchid:mary
5.00 orchid:mary
2.00 orchid:zhang</pre></div></div><div class=paragraph><p>Minden nyomtatóhoz érdemes külön nyilvántartást vezetni, mivel az <code>lpf</code> nem tartalmaz semmilyen beépített zárolási megoldást, ezért két <code>lpf</code> párhuzamos futtatása könnyen összezagyválhatja a közösen használt nyilvántartások tartalmát. Az <span class=filename>/etc/printcap</span> állományban az <code>af=acct</code> tulajdonság megadásával könnyen létre tudunk hozni minden nyomtatóhoz külön nyilvántartást. Ilyenkor minden nyomtató könyvtárában megjelenik egy <span class=filename>acct</span> nevû állomány.</p></div><div class=paragraph><p>Amikor elérkezünk a nyomtatások kiszámlázásához, futtassuk le a <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> programot. Ehhez mindössze annyit kell tennünk, hogy átlépünk az elszámolni kívánt nyomtató könyvtárába és begépeljük a <code>pac</code> parancsot. Ekkor kapunk egy ehhez hasonló, dollár alapú kimutatást:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>  Login               pages/feet   runs    price
orchid:kelly                5.00    1   <span class=nv>$ </span> 0.10
orchid:mary                31.00    3   <span class=nv>$ </span> 0.62
orchid:zhang                9.00    1   <span class=nv>$ </span> 0.18
rose:andy                   2.00    1   <span class=nv>$ </span> 0.04
rose:kelly                177.00  104   <span class=nv>$ </span> 3.54
rose:mary                  87.00   32   <span class=nv>$ </span> 1.74
rose:root                  26.00   12   <span class=nv>$ </span> 0.52

total                     337.00  154   <span class=nv>$ </span> 6.74</code></pre></div></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> a következõ paramétereket várja:</p></div><div class=dlist><dl><dt class=hdlist1><code>-P <em>nyomtató</em></code></dt><dd><p>Az kiértékelendõ <em>nyomtató</em> neve. Ez a paraméter csak akkor használható, ha az <span class=filename>/etc/printcap</span> állományban az <code>af</code> tulajdonságnak teljes elérési utat adtunk meg.</p></dd><dt class=hdlist1><code>-c</code></dt><dd><p>A felhasználók nevei helyett a fizetendõ összeg szerint rendezze a listát.</p></dd><dt class=hdlist1><code>-m</code></dt><dd><p>Hagyja figyelmen kívül a nyilvántartásban szereplõ gépek hálózati neveit. Ennek hatására az <code>alpha</code> géprõl nyomtató <code>smith</code> meg fog egyezni a <code>gamma</code> géprõl nyomtatóval. A beállítás nélkül ez a két felhasználó el fog térni.</p></dd><dt class=hdlist1><code>-p <em>ár</em></code></dt><dd><p>A paraméterként megadott <em>ár</em> dollár értékkel számol oldalanként vagy lábanként az <span class=filename>/etc/printcap</span> állományban megadott <code>pc</code> tulajdonság értéke helyett (ami alapból két cent). Az <em>ár</em> lebegõpontos (valós) számként is megadható.</p></dd><dt class=hdlist1><code>-r</code></dt><dd><p>A rendezési sorrend megfordítása.</p></dd><dt class=hdlist1><code>-s</code></dt><dd><p>Hozzon létre egy elszámolást, majd törölje a hozzá kapcsolódó nyilvántartási adatokat.</p></dd><dt class=hdlist1><em>név…​</em></dt><dd><p>Csak az adott <em>nevû</em> felhasználók adatait értékelje ki.</p></dd></dl></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> által alapértelmezés szerint generált kimutatásban láthatjuk az egyes gépekrõl származó egyes felhasználók kinyomtatott oldalait. Ha nekünk viszont nem számít, hogy honnan küldték a kéréseket (mivel bárhonnan lehet küldeni), akkor a <code>pac -m</code> paranccsal az alábbi táblázatot készíttethetjük el:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>  Login               pages/feet   runs    price
andy                        2.00    1   <span class=nv>$ </span> 0.04
kelly                     182.00  105   <span class=nv>$ </span> 3.64
mary                      118.00   35   <span class=nv>$ </span> 2.36
root                       26.00   12   <span class=nv>$ </span> 0.52
zhang                       9.00    1   <span class=nv>$ </span> 0.18

total                     337.00  154   <span class=nv>$ </span> 6.74</code></pre></div></div><div class=paragraph><p>Itt megtaláljuk a ténylegesen kifizetendõ összegeket is, amik kiszámításához a <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> az <span class=filename>/etc/printcap</span> állomány <code>pc</code> tulajdonságát használja (ez alapból 200, avagy 2 cent oldalanként). Ezzel a tulajdonsággal tehát egy cent századrészében mérve tudjuk megadni az oldalakénti vagy lábankénti árakat. Ezt a beállítást természetesen a <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> <code>-p</code> opciójával felül tudjuk bírálni. Arra azonban vigyázzunk, hogy a <code>-p</code> után dollárban kell megadnunk az árat. Emiatt tehát a</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pac -p1.50</span></code></pre></div></div><div class=paragraph><p>parancs szerint minden egyes oldal másfél dollárba fog kerülni. Ezzel az opcióval aztán alaposan megdönthetjük az árakat.</p></div><div class=paragraph><p>Végezetül megemlítjük, hogy a <code>pac -s</code> parancs az általa létrehozott elszámolást egy külön állományba menti, amelynek a neve nagyjából megegyezik a nyilvántartást végzõével, de <code>_sum</code>-ra (mint "summary", azaz elszámolás) végzõdik. Ezután nullázza a nyilvántartást. Amikor a <a href="https://man.freebsd.org/cgi/man.cgi?query=pac&amp;sektion=8&amp;format=html">pac(8)</a> programot újra lefuttatjuk, újból beolvassa a korábban elmentett elszámolásokat, majd hozzászámolja a többit a hagyományos nyilvántartási adatokból.</p></div></div><div class=sect3><h4 id=_hogyan_tudjuk_számolni_a_kinyomtatott_lapokat>9.4.5.2. Hogyan tudjuk számolni a kinyomtatott lapokat?<a class=anchor href=#_hogyan_tudjuk_számolni_a_kinyomtatott_lapokat></a></h4><div class=paragraph><p>A nyilvántartás pontos vezetéséhez még távolról is valamilyen módon meg kell tudnunk mondani, hogy mennyi lapot használt egy nyomtatási feladat végrehajtása. Ez a nyomtatás nyilvántartásának egyik alapvetõ problémája.</p></div><div class=paragraph><p>A nyers szövegek esetében ez nem is annyira bonyolult: egyszerûen számoljuk össze, hogy a nyomtatási feladatban mennyi sor kinyomtatására lesz szükség és vessük össze ezt a nyomtató által lapoként kinyomtatott sorok számálva. Ne felejtsük el számításba venni a szövegben felbukkanó törlések hatását, vagy az olyan hosszú sorokat, amelyek a valóságban több sorban fognak megjelenni.</p></div><div class=paragraph><p>Viszont (<a href=#printing-advanced-lpf>Az lpf szövegszûrõ</a> címû szakaszban bemutatott) <code>lpf</code> program ezeket mind lekezeli a nyilvántartások készítése során. Ezért ha szintén egy nyilvántartást vezetni képes szövegszûrõt akarunk írni, akkor mindenképpen érdemes megnéznünk az <code>lpf</code> forráskódját.</p></div><div class=paragraph><p>De hogyan bánjunk el a többi formátummal?</p></div><div class=paragraph><p>Nos, a DVI-Laserjet és DVI-PostScript® közti átalakítások esetén a kinyomtatott lapok számának megállapításához meg kell tanítanunk a szûrõnket értelmezni a <code>dvilj</code> vagy <code>dvips</code> parancsok kimenetét. Ugyanezt meg tudjuk tenni más formátumok és más konverziós programok használata során is.</p></div><div class=paragraph><p>Azonban ezek a módszerek nem veszik számításba, hogy a nyomtató egyáltalán kinyomtatta-e az összes elküldött oldalt. Sok minden történhet még addig, például beragadhat a papír, kifogyhat a tinta vagy akár felrobbanhat a nyomtató - a felhasználónak ettõl függetlenül még fizetnie kell.</p></div><div class=paragraph><p>Mit lehet ilyenkor tenni?</p></div><div class=paragraph><p>A <em>precíz</em> nyilvántartásnak csak egyetlen <em>biztos</em> módja létezik. Olyan nyomtatót szerezzünk be, amely képes megmondani, mennyi lapot használt el a nyomtatás során, majd egy ilyet csatlakoztassunk soros porton vagy hálózaton keresztül. Szinte majdnem az összes PostScript® nyomtató támogatja ezt a lehetõséget, ahogy sok más gyártmány és típus is (például a hálózati Imagen lézernyomtatók). A nyomtatóhoz tartozó szûrõt ehhez úgy kell módosítani, hogy lekérdezzük a kinyomtatott lapok számát a nyomtatás után és <em>kizárólag</em> erre az értékre alapozva készítünk nyilvántartást. Itt nincs szükség sem a sorok számolására, sem pedig az állományok (könnyen elhibázható) átvizsgálására.</p></div><div class=paragraph><p>Természetesen lehetünk nagylelkûek és ne számítsunk fel semmit a nyomtatásért.</p></div></div></div></div></div><div class=sect1><h2 id=printing-using>9.5. A nyomtatók használata<a class=anchor href=#printing-using></a></h2><div class=sectionbody><div class=paragraph><p>Ebbõl a szakaszból megtudhatjuk, hogyan használjuk a FreeBSD-n beállított nyomtatónkat. Röviden most itt foglaljuk össze az ide tartozó felhasználói parancsokat:</p></div><div class=dlist><dl><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a></dt><dd><p>Nyomtatási feladatokat hajt végre.</p></dd><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a></dt><dd><p>Ellenõrzi a nyomtatási sorokat.</p></dd><dt class=hdlist1><a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a></dt><dd><p>Feladatokat vesz ki a nyomtatási sorokból.</p></dd></dl></div><div class=paragraph><p>Ezek mellett létezik még a nyomtatók és a hozzájuk tartozó sorok irányítására alkalmas parancs is, az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a>, amelyre a <a href=#printing-lpc>A nyomtatók vezérlése</a> címû szakaszban fogunk részleteiben kitérni.</p></div><div class=paragraph><p>A nyomtatók/sorok <span class=filename>/etc/printcap</span> állományban szereplõ nevük szerinti megadásához az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> parancsok közül mindegyik elfogadja a <code>-P <em>nyomtatónév</em></code> paramétert. Ennek köszönhetõen képesek vagyunk nyomtatási feladatokat küldeni, eltávolítani vagy felügyelni az egyes nyomtatók soraiban. Ha nem használjuk a <code>-P</code> kapcsolót, akkor az érintett nyomtató a <code>PRINTER</code> környezeti változó által meghatározott lesz. Végül, ha a <code>PRINTER</code> nevû környezeti változót sem állítottuk be, akkor a parancsok alapértelmezett módon az <code>lp</code> nevû nyomtatót fogják használni.</p></div><div class=paragraph><p>A továbbiakban az <em>alapértelmezett nyomtató</em> kifejezés a <code>PRINTER</code> környezeti változó által megnevezett nyomtatóra fog utalni, illetve ha ezt nem definiáltuk, akkor az <code>lp</code> nevû nyomtatóra.</p></div><div class=sect2><h3 id=printing-lpr>9.5.1. Nyomtatási feladatok végrehajtása<a class=anchor href=#printing-lpr></a></h3><div class=paragraph><p>Az állományok kinyomtatásához írjuk be:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr állománynév ...</code></pre></div></div><div class=paragraph><p>Ezzel kinyomtatjuk az összes felsorolt állományt az alapértelmezett nyomtatón. Ha nem adunk meg állományokat, akkor az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancs a szabványos bemenetrõl várja a nyomtatandó adatokat. Például ezzel a paranccsal néhány igen fontos rendszerállományt tudunk kinyomtatni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr /etc/host.conf /etc/hosts.equiv</code></pre></div></div><div class=paragraph><p>A nyomtató megválasztásához így adjuk ki a parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> nyomtatónév állománynév ...</code></pre></div></div><div class=paragraph><p>Ez a példa kinyomtatja az aktuális könyvtár részletes listáját a <code>rattan</code> nevû nyomtatón:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>ls</span> <span class=nt>-l</span> | lpr <span class=nt>-P</span> rattan</code></pre></div></div><div class=paragraph><p>Mivel egyetlen állományt sem adtunk meg az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> programnak, az <code>lpr</code> parancs a nyomtatandó adatokat a szabványos bemenetrõl várja, ami jelen esetünkben a <code>ls -l</code> parancs kimenete.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> ezeken felül még képes értelmezni rengeteg formázásra, konverzióra, másolatok készítésére stb. utasító kapcsolót is. Errõl bõvebben a <a href=#printing-lpr-options>Nyomtatási beállítások</a> címû szakaszban lesz szó.</p></div></div><div class=sect2><h3 id=printing-lpq>9.5.2. Nyomtatási feladatok felügyelete<a class=anchor href=#printing-lpq></a></h3><div class=paragraph><p>Amikor az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> programmal nyomtatunk, az összes nyomtatandónk egy "nyomtatási feladatnak" nevezett csomagba kerül, ami pedig az LPD nyomtatási rendszerébe. Minden nyomtatóhoz tartozik egy nyomtatási sor, ahol részünkrõl és mások által eddig kiadott nyomtatási feladatokat találhatjuk. A nyomtató ezután ezeket érkezési sorrend szerint dolgozza fel.</p></div><div class=paragraph><p>Az alapértelmezett nyomtatóhoz tartozó sor állapotát az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> programmal tudjuk megnézni. Ha egy adott nyomtatóra vagyunk kíváncsiak, akkor használjuk a <code>-P</code> kapcsolót. Például a</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpq <span class=nt>-P</span> bamboo</code></pre></div></div><div class=paragraph><p>parancs a <code>bamboo</code> nevû nyomtató sorát fogja megmutatni. Példaképpen lássuk is ilyen esetben az <code>lpq</code> parancs eredményét:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>bamboo is ready and printing
Rank   Owner    Job  Files                              Total Size
active kelly    9    /etc/host.conf, /etc/hosts.equiv   88 bytes
2nd    kelly    10   <span class=o>(</span>standard input<span class=o>)</span>                   1635 bytes
3rd    mary     11   ...                                78519 bytes</code></pre></div></div><div class=paragraph><p>Itt három nyomtatási feladatot láthatunk a <code>bamboo</code> nyomtatási sorában. Az elsõ nyomtatási feladat, amit a <code>kelly</code> nevû felhasználó küldött, a 9-es "feladatszámot" kapta. A nyomtatóhoz tartozó összes feladat kap egy ilyen egyedi számot. Többnyire nyugodtan figyelmen kívül hagyhatjuk, azonban szükségünk lehet rá, ha éppen törölni kívánjuk a hozzá tartozó nyomtatási feladatot. Ezzel majd a <a href=#printing-lprm>Nyomtatási feladatok eltávolítása</a> címû szakaszban foglalkozunk.</p></div><div class=paragraph><p>A kilences számú nyomtatási feladat két állományt tartalmaz: ha a parancssorban több állományt adunk meg az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> programnak, akkor az egy nyomtatási feladatnak számít. Ez egyben a pillanatnyilag aktív nyomtatási feladat (ezt a "Rank" oszlopban szereplõ <code>active</code> érték jelzi), tehát a nyomtató éppen ezzel foglalatoskodik. A második nyomtatási feladat közvetlenül az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> szabványos bemenetére érkezett. A harmadik a <code>mary</code> nevû felhasználótól jött, és ez egy nagyobb méretû nyomtatási feladat. A nyomtatandó állomány elérési útvonala túlságosan hosszú ahhoz, hogy ki lehessen írni, ezért az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> csak három pontot jelez ki helyette.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> kimenetének elsõ sorai is nagyon hasznos információt tartalmaz: megtudhatjuk, mit csinál éppen (legalább is az LPD szerint) a nyomtató.</p></div><div class=paragraph><p>A <code>-l</code> kapcsolóval az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> parancstól kérhetünk sokkal részletesebb listázást is. Például így nézhet ki a <code>lpq -l</code> parancs eredménye:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>waiting <span class=k>for </span>bamboo to become ready <span class=o>(</span>offline ?<span class=o>)</span>
kelly: 1st				 <span class=o>[</span>job 009rose]
       /etc/host.conf                    73 bytes
       /etc/hosts.equiv                  15 bytes

kelly: 2nd				 <span class=o>[</span>job 010rose]
       <span class=o>(</span>standard input<span class=o>)</span>                  1635 bytes

mary: 3rd                                <span class=o>[</span>job 011rose]
      /home/orchid/mary/research/venus/alpha-regio/mapping 78519 bytes</code></pre></div></div></div><div class=sect2><h3 id=printing-lprm>9.5.3. Nyomtatási feladatok eltávolítása<a class=anchor href=#printing-lprm></a></h3><div class=paragraph><p>Ha meggondoltuk volna magunkat egy nyomtatási feladattal kapcsolatban, az <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> paranccsal még törölni tudjuk a sorból. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> gyakran még a folyamatban levõ nyomtatási feladatot is képes eltávolítani, azonban elõfordulhat, hogy a nyomtatási feladat egy része már elvégzésre került.</p></div><div class=paragraph><p>Az alapértelmezett nyomtató sorából csak úgy tudunk nyomtatási feladatokat törölni, ha elõször az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> segítségével megkeressük a számukat. Ha ez megvan, írjuk be:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lprm feladatám</code></pre></div></div><div class=paragraph><p>Adott nyomtatóról a <code>-P</code> kapcsoló segítségével tudunk nyomtatási feladatot törölni. A most következõ parancs a <code>bamboo</code> nevû nyomtatóról törli a 10-es számú nyomtatási feladatot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lprm <span class=nt>-P</span> bamboo 10</code></pre></div></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> parancs esetén még használhatóak az alábbi rövidítések is:</p></div><div class=dlist><dl><dt class=hdlist1>lprm -</dt><dd><p>Eltávolítja a hozzánk tartozó az összes nyomtatási feladatot (az alapértelmezett nyomtatón).</p></dd><dt class=hdlist1>lprm <em>felhasználó</em></dt><dd><p>Eltávolítja az adott <em>felhasználó</em>hoz tartozó összes nyomtatási feladatot (az alapértelmezett nyomtatón). Kizárólag a rendszergazdák képesek erre, a rendes felhasználók csak a saját nyomtatási feladataikat törölhetik.</p></dd><dt class=hdlist1>lprm</dt><dd><p>A nyomtatási feladat száma, a felhasználói név vagy a <code>-</code>megadása nélkül az <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> törli az alapértelmezett nyomtatón éppen aktív nyomtatási feladatot, amennyiben az a miénk. Csak a rendszergazdák képesek bármilyen aktív nyomtatási feladatot törölni.</p></dd></dl></div><div class=paragraph><p>Ha kiegészítjük az imént említett rövidítéséket a <code>-P</code> paraméter megadásával, akkor az alapértelmezett nyomtató helyett bármelyik másikat is használhatjuk. Például ez a parancs eltávolítja az aktuális felhasználó összes nyomtatási feladatot a <code>rattan</code> nevû nyomtatón:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lprm <span class=nt>-P</span> rattan -</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Hálózati környezetben az <a href="https://man.freebsd.org/cgi/man.cgi?query=lprm&amp;sektion=1&amp;format=html">lprm(1)</a> csak arról a géprõl engedi törölni a nyomtatási feladatokat, amelyrõl küldték ezeket, még abban az esetben is, amikor ugyanaz a nyomtató más számítógépekrõl is elérhetõ. A következõ parancssorozat ezt igyekszik szemléltetni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> rattan myfile
% rlogin orchid
% lpq <span class=nt>-P</span> rattan
Rank   Owner	  Job  Files                          Total Size
active seeyan	  12	...                           49123 bytes
2nd    kelly      13   myfile                         12 bytes
% lprm <span class=nt>-P</span> rattan 13
rose: Permission denied
% <span class=nb>logout</span>
% lprm <span class=nt>-P</span> rattan 13
dfA013rose dequeued
cfA013rose dequeued</code></pre></div></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=printing-lpr-options>9.5.4. Túl a nyers szövegen: nyomtatási beállítások<a class=anchor href=#printing-lpr-options></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancs számos olyan beállítást enged, amelyekkel a szövegek formázását, grafikák átalakítását illetve más állományformátumok használatát, másolatok készítését, nyomtatási feladatok irányítását és még sok minden mást el tudunk végezni. Ebben a szakaszban pontosan ezekrõl a kapcsolókról lesz szó.</p></div><div class=sect3><h4 id=printing-lpr-options-format>9.5.4.1. Formázási és konverziós beállítások<a class=anchor href=#printing-lpr-options-format></a></h4><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> most következõ opciói a nyomtatási feladatokban található állományok formázását vezérlik. Akkor használjuk ezeket a beállításokat, ha a nyomtatási feladat nem tartalmaz nyers szöveget, vagy ha nyers szöveget akarunk formázni a <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a> segédprogrammal.</p></div><div class=paragraph><p>Például az alábbi parancs kinyomtat egy <span class=filename>halászati-jelentés.dvi</span> nevû (a TeX betûszedû rendszerbõl már jól ismert) DVI állományt a <code>bamboo</code> nevû nyomtatón:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr <span class=nt>-P</span> bamboo <span class=nt>-d</span> halászati-jelentés.dvi</code></pre></div></div><div class=paragraph><p>Ezek a beállítások a nyomtatási feladatban szereplõ minden egyes állományra vonatkoznak, ezért nem keverhetjük (például) a DVI és ditroff formátumú állományokat egy nyomtatási feladaton belül. Ehelyett külön nyomtatási feladatokban kell elküldenünk az eltérõ formátumú állományokat, és mindegyik nyomtatási feladathoz külön konverziós beállításokat kell megadnunk.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A <code>-p</code> és <code>-T</code> kapcsolók kivételével az itt felsorolt összes beállításnak a kiválasztott nyomtatóhoz szüksége van a megfelelõ konverziós szûrõre. Például a <code>-d</code> opció használatához kell egy konverziós szûrõ a DVI formátumhoz. A <a href=#printing-advanced-convfilters>Konverziós szûrõk</a> címû szakasz errõl ad bõvebb tájékoztatást.</p></div></td></tr></tbody></table></div><div class=dlist><dl><dt class=hdlist1><code>-c</code></dt><dd><p>Cifplot állományok nyomtatása.</p></dd><dt class=hdlist1><code>-d</code></dt><dd><p>DVI állományok nyomtatása.</p></dd><dt class=hdlist1><code>-f</code></dt><dd><p>FORTRAN forrás nyomtatása.</p></dd><dt class=hdlist1><code>-g</code></dt><dd><p>Plot formátumú adatok nyomtatása.</p></dd><dt class=hdlist1><code>-i <em>szám</em></code></dt><dd><p>A kinyomtatott szöveg behúzásának növelése a <em>szám</em> értékével. Ha nem adjuk meg a <em>számot</em>, akkor ennek értéke 8 lesz. Ez a beállítás csak bizonyos konverziós szûrõkkel mûködik.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ne hagyjunk helyet az <code>-i</code> és a szám között.</p></div></td></tr></tbody></table></div></dd><dt class=hdlist1><code>-l</code></dt><dd><p>A szöveg formázás nélküli nyomtatása, vezérlõkarakterekkel együtt.</p></dd><dt class=hdlist1><code>-n</code></dt><dd><p>Ditroff (eszközfüggetlen troff) adat nyomtatása.</p></dd><dt class=hdlist1>-p</dt><dd><p>Nyomtatás elõtt a szöveg formázása a <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a> programmal. Lásd <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a>.</p></dd><dt class=hdlist1><code>-T <em>cím</em></code></dt><dd><p>Az állomány neve helyett a fejlécben a <em>címet</em> jeleníti meg a <a href="https://man.freebsd.org/cgi/man.cgi?query=pr&amp;sektion=1&amp;format=html">pr(1)</a>. Ennek a beállításnak csak a <code>-p</code> opcióval együtt van hatása.</p></dd><dt class=hdlist1><code>-t</code></dt><dd><p>Troff adat nyomtatása.</p></dd><dt class=hdlist1><code>-v</code></dt><dd><p>Raszteres adatok nyomtatása.</p></dd></dl></div><div class=paragraph><p>Vegyünk az iméntiekre egy példát. A következõ parancs az <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> szépen megformázott man oldalát nyomtatja ki az alapértelmezett nyomtatón:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% zcat /usr/shared/man/man1/ls.1.gz | troff <span class=nt>-t</span> <span class=nt>-man</span> | lpr <span class=nt>-t</span></code></pre></div></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=zcat&amp;sektion=1&amp;format=html">zcat(1)</a> kitömöríti az <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> man oldalának forrását és átadja a <a href="https://man.freebsd.org/cgi/man.cgi?query=troff&amp;sektion=1&amp;format=html">troff(1)</a> parancsnak, ami ebbõl létrehoz a GNU troff formátumának megfelelõ kimenetet és továbbadja az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancsnak, ami végül elküldi a nyomtatási feladatot az LPD nyomtatási rendszernek. Mivel az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> parancsnak megadtuk az <code>-t</code> kapcsolót, a nyomtatási rendszer a GNU troff formátumban érkezõ adatokat magától át fogja alakítani olyan formátumra, amit a nyomtató is képes lesz megérteni.</p></div></div><div class=sect3><h4 id=printing-lpr-options-job-handling>9.5.4.2. Nyomtatási feladatok kezelése<a class=anchor href=#printing-lpr-options-job-handling></a></h4><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> most felsorolandó beállításaival az LPD rendszert arra tudjuk utasítani, hogy a nyomtatási feladatot különleges módon kezelje:</p></div><div class=dlist><dl><dt class=hdlist1>-# <em>példányszám</em></dt><dd><p>Egyetlen példány helyett hozzon létre <em>példányszám</em> számú példányt a nyomtatási feladatban található összes állományból. A rendszergazda a nyomtató kímélése érdekében ezt a lehetõséget letilthatja, amivel inkább a fénymásoló használatára ösztönzi a felhasználókat. Lásd <a href=#printing-advanced-restricting-copies>A másolatok számának szabályozása</a> szakasz.</p><div class=paragraph><p>A beállítás illusztrálásaként most az alapértelmezett nyomtatón elõször nyomtassunk ki három példányt a <span class=filename>parser.c</span>, majd ezután a <span class=filename>parser.h</span> állományokból:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lpr -#3 parser.c parser.h</code></pre></div></div></dd><dt class=hdlist1>-m</dt><dd><p>A rendszer küldjön levelet a nyomtatási feladat teljesítése után. Ekkor az LPD a nyomtatási feladat elvégzése után levelet küld a helyi postafiókunkba. A levélben kifejti, hogy sikeres volt-e a nyomtatás, vagy esetleg valamilyen hiba keletkezett, és ha hiba történt, akkor pontosan mi is volt az.</p></dd><dt class=hdlist1>-s</dt><dd><p>Ne másolja közvetlenül az állományokat a nyomtatási könyvtárba, hanem készítsen hozzájuk szimbolikus linkeket.</p><div class=paragraph><p>Egy nagyobb nyomtatási feladat elvégzése esetén javasolt használni ezt a kapcsolót. Ezzel a megoldással helyet tudunk spórolni a nyomtatási könyvtárban (amikor a nyomtatási feladatok könnyen megtelítheti a nyomtatási könyvtárat tároló állományrendszert). Emellett idõt is takarítunk meg, mivel az LPD-nek nem kell a nyomtatási feladat minden egyes bitjét átmásolni a nyomtatási könyvtárba.</p></div><div class=paragraph><p>Van azonban egy hátránya: mivel az LPD ekkor közvetlenül az eredeti állományra fog hivatkozni, ezért a nyomtatás befejezéséig azt nem módosíthatjuk vagy törölhetjük.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ha egy távoli nyomtatónak küldjük a nyomtatási feladatot, akkor az LPD a helyi és a távoli számítógép között mégis kénytelen lesz átmásolni a nyomtatási feladatot, így a <code>-s</code> kapcsoló egyedül csak a helyi nyomtatási könyvtárban fog helyet spórolni. Ettõl eltekintve még ilyenkor is hasznunkra válhat.</p></div></td></tr></tbody></table></div></dd><dt class=hdlist1>-r</dt><dd><p>Törölje a nyomtatási feladatban szereplõ állományokat, miután átmásolta ezeket a nyomtatási könyvtárba, vagy miután a <code>-s</code> kapcsoló használatával kinyomtatta ezeket. Nagy körültekintéssel használjuk!</p></dd></dl></div></div><div class=sect3><h4 id=printing-lpr-options-misc>9.5.4.3. A fejléclapok beállításai<a class=anchor href=#printing-lpr-options-misc></a></h4><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpr&amp;sektion=1&amp;format=html">lpr(1)</a> most következõ beállításai a nyomtatási feladatok fejlécében megjelenõ szövegekre vannak hatással. Így ha letiltottuk a fejléclapok használatát, akkor ezek a kapcsolók lényegében semmit sem állítanak. A <a href=#printing-advanced-header-pages>Fejléclapok</a> címû szakaszból tudhatunk meg többet ezek beállításáról.</p></div><div class=dlist><dl><dt class=hdlist1>-C <em>szöveg</em></dt><dd><p>A fejléclapon megjelenõ hálózati név helyett a <em>szöveg</em> fog szerepelni. A hálózati név általában annak a gépnek a neve, ahonnan a nyomtatási feladatot küldték.</p></dd><dt class=hdlist1>-J <em>szöveg</em></dt><dd><p>A fejléclapon megjelenõ nyomtatási feladat neve helyett a <em>szöveg</em> fog megjelenni. A nyomtatási feladat neve általában a benne szereplõ elsõ állomány nevével egyezik meg, ha a szabványos bemenetrõl nyomtatunk, akkor egyszerûen csak <span class=filename>stdin</span>.</p></dd><dt class=hdlist1>-h</dt><dd><p>Ne nyomtasson fejléclapot.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Bizonyos helyeken elõfordulhat, hogy ennek a kapcsolónak nincs semmilyen hatása a fejléclapok létrehozásának módszerébõl fakadóan. A részleteket lásd a <a href=#printing-advanced-header-pages>Fejléclapok</a> szakaszban.</p></div></td></tr></tbody></table></div></dd></dl></div></div></div><div class=sect2><h3 id=printing-lpc>9.5.5. A nyomtatók vezérlése<a class=anchor href=#printing-lpc></a></h3><div class=paragraph><p>A nyomtatóink rendszergazdájaként nekünk kell telepítenük, üzembe helyeznünk és kipróbálnunk ezeket. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> parancs használatával még jobban képesek vagyunk kapcsolatba lépni velük. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> paranccsal:</p></div><div class=ulist><ul><li><p>el tudjuk indítani és le tudjuk állítani a nyomtatókat;</p></li><li><p>be- és ki tudjuk kapcsolni a nyomtatási soraikat;</p></li><li><p>át tudjuk rendezni az egyes sorokban található nyomtatási feladatokat.</p></li></ul></div><div class=paragraph><p>Elõször is essen pár szó a fogalmakról: ha a nyomtató <em>leállt</em>, akkor semmit sem fog kinyomtatni a sorából. A felhasználók továbbra is képesek nyomtatási feladatokat küldeni, amik azonban egészen addig fognak várakozni, amíg a nyomtatót <em>el nem indítjuk</em> vagy a sorát ki nem ürítjük.</p></div><div class=paragraph><p>Ha egy sort <em>kikapcsolunk</em>, akkor (a <code>root</code> kivételével) egyetlen felhasználó sem képes nyomtatási feladatokat küldeni a nyomtatónak. A <em>bekapcsolt</em> sorok képesek csak nyomtatási feladatot fogadni. A nyomtató <em>elindítható</em> kikapcsolt sorral is, ilyenkor egészen addig folytatja a nyomtatási feladatok elvégzését, amíg a sor ki nem ürül.</p></div><div class=paragraph><p>Általánosan elmondható, hogy az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> parancs használatához a <code>root</code> felhasználó jogosultságaira van szükségünk. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> parancsot minden más esetben csak a nyomtató állapotának ellenõrzésére vagy a megakadt nyomtató újraindítására használhatjuk.</p></div><div class=paragraph><p>Foglaljuk röviden össze az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> parancsait. A legtöbb parancs kiadásához még szükséges egy <em>nyomtatónév</em> paraméter megadása is, amivel megnevezzük az utasítani kívánt nyomtatót. Helyette használható az <code>all</code> szó is, amivel az <span class=filename>/etc/printcap</span> állományban szereplõ összes nyomtatót egyszerre utasíthatjuk.</p></div><div class=dlist><dl><dt class=hdlist1><code>abort nyomtatónév</code></dt><dd><p>Az aktuális nyomtatási feladat megszakítása és a nyomtató leállítása. Ha a nyomtatási sort még nem kapcsoltuk ki, a felhasználók küldhetnek további nyomtatási feladatokat.</p></dd><dt class=hdlist1><code>clean nyomtatónév</code></dt><dd><p>A nyomtató könyvtárából töröljük a régi állományokat. Esetenként adódhat, hogy bizonyos nyomtatási feladatok állományait nem takarította el az LPD, különösen abban az esetben, amikor a nyomtatás vagy az adminisztrálás során keletkezett valamilyen hiba. Ez a parancs segít megtalálni a nyomtatási könyvtárból már kikopott állományokat és törli ezeket.</p></dd><dt class=hdlist1><code>disable nyomtatónév</code></dt><dd><p>Az újonnan érkezõ nyomtatási feladatok besorolásának kikapcsolása. Ha a nyomtató még mûködik, akkor folytatni fogja a sorban még bennmaradt nyomtatási feladatok elvégzését. A rendszergazda (a <code>root</code>) még a kikapcsolt sorok esetén is küldhet nyomtatási feladatokat.</p><div class=paragraph><p>Ez a parancs valójában akkor hasznos, ha egy új nyomtató vagy egy új szûrõ mûködését próbálgatjuk: ilyenkor érdemes kikapcsolni a nyomtatási sort és <code>root</code> felhasználóként nyomtatási feladatokat küldeni. A többi felhasználó a tesztelés befejezéséig nem tud majd nyomtatási feladatokat küldeni, vagyis egészen addig, amíg a nyomtatási sort vissza nem kapcsoljuk az <code>enable</code> paranccsal.</p></div></dd><dt class=hdlist1><code>down nyomtatónév üzenet</code></dt><dd><p>A nyomtató üzemen kívül helyezése. Lényegében megegyezik egy <code>disable</code> és utána egy <code>stop</code> parancs kiadásával. Az <em>üzenet</em> akkor jelenik meg, amikor a valaki megpróbálja lekérdezni a nyomtató állapotát az <code>lpc status</code> paranccsal, vagy amikor megnézi a nyomtatási sorát az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpq&amp;sektion=1&amp;format=html">lpq(1)</a> paranccsal.</p></dd><dt class=hdlist1><code>enable nyomtatónév</code></dt><dd><p>A nyomtatóhoz tartozó nyomtatási sor bekapcsolása. A felhasználók ezután már képesek lesznek a nyomtatónak feladatokat küldeni, azonban egészen addig nem nyomtatódik ki semmi, amíg a nyomtatót el nem indítjuk.</p></dd><dt class=hdlist1><code>help parancsnév</code></dt><dd><p>Megmutatja a <em>parancsnév</em> parancshoz tartozó súgót. A <em>parancsnév</em> megadása nélkül a rendelkezésre álló parancsok listáját kapjuk meg.</p></dd><dt class=hdlist1><code>restart nyomtatónév</code></dt><dd><p>Elindítja a nyomtatót. A felhasználók ezt a parancsot tudják használni abban az esetben, amikor valamilyen megmagyarázhatatlan okból az LPD mûködése megáll, viszont ezzel nem tudják elindítani a <code>stop</code> vagy <code>down</code> parancsokkal leállított nyomtatót. A <code>restart</code> parancs megegyezik az <code>abort</code> és a <code>start</code> egymás utáni kiadásával.</p></dd><dt class=hdlist1><code>start nyomtatónév</code></dt><dd><p>Elindítja a nyomtatót, és a nyomtató nekilát kinyomtatni a sorában levõ nyomtatási feladatokat.</p></dd><dt class=hdlist1><code>stop nyomtatónév</code></dt><dd><p>Leállítja a nyomtatót, és a nyomtató az aktuális nyomtatási feladat befejezése után már nem kezd neki újabbnak. Ettõl függetlenül a felhasználók még továbbra is képesek feladatokat küldeni a nyomtatási sorába.</p></dd><dt class=hdlist1><code>topq nyomtatónév feladat-vagy-felhasználónév</code></dt><dd><p>Átrendezi a <em>nyomtatónév</em> nevû nyomtató sorát úgy, hogy a megadott azonosítójú <em>feladatot</em> vagy a megadott <em>felhasználónévhez</em> tartozó nyomtatási feladatokat a sor elejére teszi. Ennél a parancsnál <em>nyomtatónévnek</em> nem adhatjuk meg az <code>all</code> értéket.</p></dd><dt class=hdlist1><code>up nyomtatónév</code></dt><dd><p>Üzembe helyezi a nyomtatót, tulajdonképpen a <code>down</code> parancs ellentéte. Megegyezik egy egymás után kiadott <code>start</code> és <code>enable</code> paranccsal.</p></dd></dl></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> a fenti parancsokat a parancssorból fogadja el. Ha itt nem adunk meg neki semmilyen parancsot, akkor az <a href="https://man.freebsd.org/cgi/man.cgi?query=lpc&amp;sektion=8&amp;format=html">lpc(8)</a> interaktív módba vált, ahol ugyanezeket a parancsokat adhatjuk ki, egészen az <code>exit</code>, <code>quit</code> parancsok vagy az állományvége jelzés begépeléséig.</p></div></div></div></div><div class=sect1><h2 id=printing-lpd-alternatives>9.6. Más nyomtatási rendszerek<a class=anchor href=#printing-lpd-alternatives></a></h2><div class=sectionbody><div class=paragraph><p>Ha derekasan végigolvastuk eddig ezt a fejezetet, akkor mostanra már valószínûleg mindent tudunk a FreeBSD-ben található LPD nyomtatási rendszerrõl. Ezzel együtt tisztában vagyunk a hiányosságaival is, aminek kapcsán természetes módon felmerülhet bennünk a kérdés: "Milyen más (FreeBSD-vel is mûködni képes) nyomtatási rendszerek léteznek még?"</p></div><div class=dlist><dl><dt class=hdlist1>LPRng</dt><dd><p>Az LPRng, aminek jelentése "LPR Next Generation" (Az LPR következõ generációja), a PLP teljesen újraírt változata. Patrick Powell és Justin Mason (a PLP eredeti karbantartója) együttes munkájának gyümölcse az LPRng. Az LPRng honlapja: <a href=http://www.lprng.org/>http://www.lprng.org/</a>.</p></dd><dt class=hdlist1>CUPS</dt><dd><p>A CUPS, vagy más néven a "Common UNIX Printing System" (Közös UNIX®-os nyomtatási rendszer), egy hordozható nyomtatási réteget nyújt a UNIX®-alapú operációs rendszerek számára. Az Easy Software Products fejlesztése és szinte az összes UNIX® gyártó és felhasználó szemében elfogadott szabványos nyomtatási rendszer.</p><div class=paragraph><p>A CUPS a nyomtatási feladatok és sorok kezelését az internetes nyomtatási protokollon (Internet Printing Protocol, IPP) használatával oldja meg. Csökkentett képességekkel ugyan, de a sornyomtató démon (Line Printer Daemon, LPD), szerverüzenet-blokk (Server Message Block, SMB), és AppSocket (más néven JetDirect) protokollokat is ismeri. A CUPS a komolyabb UNIX®-os nyomtatási feladatokhoz ezeken felül még a hálózati nyomtatók közti választást és PostScript nyomtatók leírásán (PostScript Printer Description, PPD) alapuló nyomtatási beállításokat is támogatja.</p></div><div class=paragraph><p>A CUPS honlapja: <a href=http://www.cups.org/>http://www.cups.org/</a>.</p></div></dd><dt class=hdlist1>HPLIP</dt><dd><p>A HPLIP, másnéven HP Linux® Imaging and Printing, egy HP által kidolgozott programcsalád, amely támogatja a HP eszközök nyomtatási, lapolvasási és faxolási lehetõségeit. A benne található programok bizonyos nyomtatási feladatokhoz backendként a CUPS nyomtatási rendszert használják.</p><div class=paragraph><p>A HPLIP honlapja a <a href=http://hplipopensource.com/hplip-web/index.html>http://hplipopensource.com/hplip-web/index.html</a> címen érhetõ el.</p></div></dd></dl></div></div></div><div class=sect1><h2 id=printing-troubleshooting>9.7. Hibakeresés<a class=anchor href=#printing-troubleshooting></a></h2><div class=sectionbody><div class=paragraph><p>Miután az <a href="https://man.freebsd.org/cgi/man.cgi?query=lptest&amp;sektion=1&amp;format=html">lptest(1)</a> programmal elvégeztünk néhány egyszerû próbát, a várt helyett a következõk egyikét kaphatjuk eredményül:</p></div><div class=dlist><dl><dt class=hdlist1>Egy kis idõ után minden remekül mûködött, vagy nem dobta ki az egész lapot.</dt><dd><p>A nyomtató nyomtatott egy keveset, aztán egy ideig csendben maradt és nem csinált semmit. Ilyenkor a nyomtatnivalók megjelenéséhez minden bizonnyal meg kell nyomnunk a nyomtatón levõ "PRINT REMAINING" vagy "FORM FEED" feliratú gombokat.</p><div class=paragraph><p>Ebben az esetben a nyomtató valószínûleg még arra várt, hogy még a nyomtatás megkezdése elõtt érkezik valamilyen további adat. Ettõl a gondtól úgy szabadulhatunk meg, ha beállítunk egy szövegszûrõt, amely minden (szükséges) esetben küld egy "FORM FEED" (lapdobás) jelzést is a nyomtatónak. Ez kell általában ahhoz, hogy a szövegnek a nyomtató belsõ pufferében megmaradt része azonnal kinyomtatódjon. Akkor is a javunkra válhat ez, ha minden egyes nyomtatási feladatot külön lapon akarunk kezdeni, mivel így a következõ nyomtatási feladat sosem közvetlenül ott kezdõdik, ahol az elõzõ feladat befejezte a nyomtatást.</p></div><div class=paragraph><p>A <span class=filename>/usr/local/libexec/if-simple</span> szûrõ helyett a következõ szkript használhatával tudunk minden nyomtatási feladat elvégzése után elküldeni egy lapdobást:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# if-simple - Egyszerû lpd szövegszûrõ
# Helye: /usr/local/libexec/if-simple
#
# Egyszerûen átmásolja a szabvány bemenetet a szabvány kimenetre, és
# figyelmen kívül hagyja az összes többi paramétert.  Minden nyomtatási
# nyomtatási feladat elvégzése után küld egy lapdobást (\f).

/bin/cat &amp;&amp; printf &#34;\f&#34; &amp;&amp; exit 0
exit 2</pre></div></div></dd><dt class=hdlist1>"Lépcsõsen" jelentek meg a sorok.</dt><dd><p>Ekkor a következõt látjuk a lapon:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>!</span><span class=s2>&#34;#</span><span class=nv>$%</span><span class=s2>&amp;&#39;()*+,-./01234
                &#34;</span><span class=c>#$%&amp;&#39;()*+,-./012345</span>
                                 <span class=c>#$%&amp;&#39;()*+,-./0123456</span></code></pre></div></div><div class=paragraph><p>Az ún. <em>lépcsõhatás</em> áldozatává váltunk, amelyet a sortörést jelzõ karakter eltérõ értelmezései okoznak. A UNIX® stílusú operációs rendszerek erre mindössze egyetlen karaktert használnak: ez a 10-es kódú ASCII karakter (sordobás, Line Feed, LF). Az MS-DOS®, OS/2® és mások pedig két karakterrel oldják meg ezt a feladatot: a 10-es <em>és</em> 13-as kódú (kocsivissza, Carriage Return, CR) ASCII karakterekkel. A sortöréseknél sok nyomtató az MS-DOS® szokásait követi.</p></div><div class=paragraph><p>Amikor a FreeBSD-vel nyomtatunk, akkor csak egyetlen karaktert használunk sortörésre. Ennek láttán a nyomtató lépteti a sort, azonban a fej vízszintes pozícióját nem változtatja meg a következõ sor nyomtatásának megkezdésekor. Erre lenne a kocsivissza karakter, vagyis ennek hatására fogja a nyomtató a papír bal oldalára visszaállítani a következõ nyomtatandó karakter pozícióját.</p></div><div class=paragraph><p>A FreeBSD így szeretné utasítani a nyomtatót:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>A nyomtató kocsivisszát kap</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A nyomtató visszalépteti a pozíciót</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>A nyomtató sordobást kap</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A nyomtató új sort kezd</p></td></tr></tbody></table><div class=paragraph><p>Néhány módszer ennek kiváltására:</p></div><div class=ulist><ul><li><p>A nyomtatón található kapcsolók vagy vezérlõpanel segítségével próbáljuk meg átállítani a vezérlõkarakterek nyomtató szerinti értelmezését. Keressük meg a nyomtató kézikönyvében, hogyan tudjuk ezt megcsinálni.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ha a FreeBSD mellett más operációs rendszerekkel is használni akarjuk a nyomtatót, akkor azok indítása elõtt mindig <em>át kell állítani</em> a nyomtatót a megfelelõ értelmezés alkalmazására. Ilyenkor valószínûleg a lentebb szereplõ megoldásokat részesítjük majd inkább elõnyben.</p></div></td></tr></tbody></table></div></li><li><p>Állítsuk be úgy a FreeBSD soros vonali meghajtóját, hogy magától alakítsa át az LF karaktereket CR+LF párokká. Természetesen ez a megoldás <em>csak</em> a soros portra csatlakozó nyomtatók esetében mûködhet. Ehhez az <span class=filename>/etc/printcap</span> állományban a nyomtató leírásánál az <code>ms#</code> tulajdonságnál adjuk meg az <code>onlcr</code> módot.</p></li><li><p>Küldjünk olyan <em>kódot</em> a nyomtatónak, amelynek hatására ideiglenesen máshogy fogja kezelni az LF karaktereket. Nézzük meg a nyomtatóhoz mellékelt útmutatóban, hogy milyen kódokat tudunk ilyen célra használni. Ha találtunk ilyen kódot, akkor írjuk át úgy a hozzá tartozó szövegszûrõt, hogy a nyomtatási feladatok elõtt mindig elküldjük azt.</p><div class=paragraph><p>Most bemutatjuk egy olyan szövegszûrõ kódját, amely a Hewlett-Packard PCL kódjait ismerõ nyomtatókhoz készült. Ebben a szûrõben elõször kiadjuk, hogy az LF karaktereket LF és CR karakterek kombinációjának tekintse a nyomtató, majd elküldjük magát a nyomtatási feladatot, és a nyomtatási feladat eredményének utolsó lapja után elküldünk egy lapdobást. Szinte az összes Hewlett Packard nyomtatóval mûködnie kell.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
#
# hpif - Egyszerû lpd bemeneti szûrõ a HP-PCL alapú nyomtatókhoz
# Helye: /usr/local/libexec/hpif
#
# Egyszerûen átmásolja a szabvány kimenetet a szabvány bemenetre, és
# figyelmen kívül hagyja a paramétereket. Elküldi a nyomtatónak, hogy
# az LF karaktereket CR+LF-ként kezelje, majd a feladat befejeztével
# lapot dobat.

printf &#34;\033&amp;k2G&#34; &amp;&amp; cat &amp;&amp; printf &#34;\033&amp;l0H&#34; &amp;&amp; exit 0
exit 2</pre></div></div><div class=paragraph><p>Példaként megadjuk még az <code>orchid</code> nevû számítógép <span class=filename>/etc/printcap</span> állományát is. Ebben egyetlen nyomtató csatlakozik a párhuzamos portra, amelynek a típusa LaserJet 3Si és a neve <code>teak</code>. Az elõbb bemutatott szövegszûrõt használja:</p></div><div class="literalblock programlisting"><div class=content><pre>#
#  /etc/printcap (orchid)
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sh:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:</pre></div></div></li></ul></div></dd><dt class=hdlist1>Egymásra írja a sorokat.</dt><dd><p>A nyomtató nem lépteti a sorokat, ezért az összes sor egymáson jelenik meg.</p><div class=paragraph><p>Ez pontosan a ritka "ellentéte" a fentebb leírt lépcsõhatásnak. A FreeBSD által sortörésre használt LF karakterek valamiért CR karakterekként viselkednek, ezért a nyomtató nem sort vált, hanem a lap bal szélére állítja a fejet.</p></div><div class=paragraph><p>A nyomtatón található kapcsolókkal vagy vezérlõpanellel így állítsuk be a sordobás és kocsivissza karakterek értelmezését:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Amit a nyomtató kap</th><th class="tableblock halign-left valign-top">Arra a nyomtató nyomtat</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>CR</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>CR</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>LF</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>CR + LF</p></td></tr></tbody></table></dd><dt class=hdlist1>A nyomtató elhagy karaktereket.</dt><dd><p>Miközben nyomtatunk, a nyomtató bizonyos karaktereket nem hajlandó megjeleníteni. A probléma ennél nagyobb, ha a nyomtató mûködése közben egyre több és több karaktert hagy ki.</p><div class=paragraph><p>Itt az a gond, hogy a nyomtató nem képes tartani az iramot a számítógép által a soros vonalon átküldött adatok sebességével (ez a probléma nem jelentkezhet a párhuzamos nyomtatók esetén). Két módon kerekedhetünk felül ezen:</p></div><div class=ulist><ul><li><p>Ha a nyomtató ismeri a XON/XOFF típusú forgalomirányítást, akkor az <code>ms#</code> tulajdonságnál adjuk meg a FreeBSD számára az <code>ixon</code> beállítást.</p></li><li><p>Ha a nyomtató ismeri a "Request to Send / Clear to Send" alapú hardveres kézfogást (más néven <code>RTS/CTS</code> forgalomirányítást), akkor az <code>ms#</code> tulajdonságnál a <code>crtscts</code> beállítást adjuk meg. Gondoskodjunk róla, hogy a számítógépet és a nyomtatót összekötõ kábel meg tudjon majd birkózni ezzel a típusú forgalomirányítással.</p></li></ul></div></dd><dt class=hdlist1>Mindenféle szemetet nyomtat.</dt><dd><p>A nyomtató nem a nyomtatni kívánt szöveget hozza létre, hanem összevissza nyomtat.</p><div class=paragraph><p>Ez a soros nyomtatók helytelen kommunikációs beállításának egy másik jellemzõ tünete. Ellenõrizzük a <code>br</code> tulajdonságnál megadott adatátviteli sebességet és az <code>ms#</code> tulajdonságnál megadott paritási beállításokat. Egyeztessük a nyomtató saját és az <span class=filename>/etc/printcap</span> állományban tárolt beállításait.</p></div></dd><dt class=hdlist1>Semmi sem történik.</dt><dd><p>Ha semmi sem történt, akkor a gond magával a FreeBSD-vel lehet, nem pedig a hardverrel. Az <span class=filename>/etc/printcap</span> állományba a vizsgálni kívánt nyomtató leírásához (az <code>lf</code> tulajdonsággal) illesszünk be naplózást. Például így fog kinézni a <code>rattan</code> nevû nyomtató bejegyzése az <code>lf</code> tulajdonság megadásával kibõvítve:</p><div class="literalblock programlisting"><div class=content><pre>rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:\
        :lf=/var/log/rattan.log</pre></div></div><div class=paragraph><p>Miután ezt megcsináltuk, próbálkozzunk újra. Nézzük meg a naplóállományban (ami a példánkban a <span class=filename>/var/log/rattan.log</span> nevén érhetõ el), hogy látunk-e valamilyen hibaüzenetet. Az itt tapasztalt hibaüzenetek nyomán elindulva igyekezzünk megszüntetni a probléma forrását.</p></div><div class=paragraph><p>Ha nem adjuk meg az <code>lf</code> tulajdonságot, akkor az LPD erre a célra alapértelmezés szerint a <span class=filename>/dev/console</span> állományt használja.</p></div></dd></dl></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 2024. március 9. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#printing-synopsis>9.1. Áttekintés</a></li><li><a href=#printing-intro-spooler>9.2. Bevezetés</a></li><li><a href=#printing-intro-setup>9.3. Kezdeti beállítások</a></li><li><a href=#printing-advanced>9.4. Magasszintû nyomtatóbeállítás</a></li><li><a href=#printing-using>9.5. A nyomtatók használata</a></li><li><a href=#printing-lpd-alternatives>9.6. Más nyomtatási rendszerek</a></li><li><a href=#printing-troubleshooting>9.7. Hibakeresés</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/hu/books/handbook/handbook_hu.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/hu/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/hu/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>Hungarian</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/hu class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/hu/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>