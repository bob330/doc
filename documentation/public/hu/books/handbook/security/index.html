<!doctype html><html class=theme-light lang=hu><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/hu/books/handbook/security/><title>14. Fejezet - Biztonság | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="14. Fejezet - Biztonság"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="hu"><meta property="og:url" content="http://172.16.201.134:1313/hu/books/handbook/security/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/hu\/books\/handbook\/security\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/hu>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/hu/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/hu/books>Books</a></li><li><a href=http://172.16.201.134:1313/hu/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/hu/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=hu>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/preface/>Előszó</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-audience>Kiknek szánjuk ezt a könyvet</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes-from3>Változtatások a harmadik kiadás óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes-from2>Változtatások a második kiadás (2004) óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes>Változtatások az elsõ kiadás (2001) óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-overview>A könyv felépítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-conv>A könyvben alkalmazott konvenciók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-acknowledgements>Köszönetnyilvánítás</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/parti/>I. Rész Bevezetés</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/>1. Fejezet - Bemutatkozás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#introduction-synopsis>1.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#nutshell>1.2. Üdvözöljük a FreeBSD-ben!</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#history>1.3. A FreeBSD Projektrõl</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/install/>2. Fejezet - A FreeBSD telepítése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-synopsis>2.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-hardware>2.2. Hardverkövetelmények</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-pre>2.3. A telepítés elõtt elvégzendõ feladatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-start>2.4. A telepítés megkezdése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#using-sysinstall>2.5. A sysinstall bemutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-steps>2.6. Lemezterület lefoglalása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-choosing>2.7. A telepítendõ összetevõk kiválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-media>2.8. A telepítés eszközének kiválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-final-warning>2.9. A telepítés véglegesítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-post>2.10. A telepítés után</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-trouble>2.11. Hibakeresés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-advanced>2.12. Telepítési útmutató haladóknak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-diff-media>2.13. Saját telepítõeszköz elkészítése</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/basics/>3. Fejezet - A UNIX alapjai</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-synopsis>3.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#consoles>3.2. Virtuális konzolok és terminálok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#permissions>3.3. Engedélyek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#dirstructure>3.4. A könyvtárak elrendezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#disk-organization>3.5. A lemezek szervezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#mount-unmount>3.6. Állományrendszerek csatlakoztatása és leválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-processes>3.7. Folyamatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-daemons>3.8. Démonok, jelzések és a futó programok leállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#shells>3.9. Parancsértelmezõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#editors>3.10. Szövegszerkesztõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-devices>3.11. Eszközök és eszközleírók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#binary-formats>3.12. Bináris formátumok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-more-information>3.13. Bõvebben olvashatunk…​</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/ports/>4. Fejezet - Alkalmazások telepítése: csomagok és portok</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-synopsis>4.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-overview>4.2. Az alkalmazások telepítésének összefoglalása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-finding-applications>4.3. A számunkra szükséges alkalmazások felkutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#packages-using>4.4. A csomagrendszer használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-using>4.5. A Portgyûjtemény használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-nextsteps>4.6. Telepítés utáni teendõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-broken>4.7. Teendõ a sérült portokkal</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/x11/>5. Fejezet - Az X Window System</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x11-synopsis>5.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-understanding>5.2. Az X áttekintése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-install>5.3. Az X11 telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-config>5.4. Az X11 beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-fonts>5.5. Betûtípusok használata az X11-ben</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-xdm>5.6. Az X bejelentkeztetõ képernyõje</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x11-wm>5.7. Munkakörnyezetek</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partii/>II. Rész Gyakori feladatok</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/>6. Fejezet - Asztali alkalmazások</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-synopsis>6.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-browsers>6.2. Böngészõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-productivity>6.3. Irodai eszközök</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-viewers>6.4. Dokumentum-megjelenítõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-finance>6.5. Pénzügyi szoftverek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-summary>6.6. Összefoglalás</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/>7. Fejezet - Multimédia</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#multimedia-synopsis>7.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#sound-setup>7.2. A hangkártya beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#sound-mp3>7.3. MP3</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#video-playback>7.4. Videók lejátszása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#tvcard>7.5. TV kártyák beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#scanners>7.6. Lapolvasók</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/>8. Fejezet - A FreeBSD rendszermag testreszabása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Miért készítsünk saját rendszermagot?</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-devices>8.3. A rendszerünkben levõ hardverek összeszedése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-modules>8.4. Meghajtók, alrendszerek és modulok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-building>8.5. Saját rendszermag készítése és telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-config>8.6. A konfigurációs állomány</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-trouble>8.7. Ha valamilyen hiba történne</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/printing/>9. Fejezet - Nyomtatás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-synopsis>9.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-intro-spooler>9.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-intro-setup>9.3. Kezdeti beállítások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-advanced>9.4. Magasszintû nyomtatóbeállítás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-using>9.5. A nyomtatók használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-lpd-alternatives>9.6. Más nyomtatási rendszerek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-troubleshooting>9.7. Hibakeresés</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/>10. fejezet - Bináris Linux kompatibilitás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Telepítés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-mathematica>10.3. A Mathematica® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-maple>10.4. A Maple™ telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-matlab>10.5. A MATLAB® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-oracle>10.6. Az Oracle® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#sapr3>10.7. Az SAP® R/3® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-advanced>10.8. Témák haladóknak</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partiii/>III. Rész Rendszeradminisztráció</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/config/>11. Fejezet - Beállítás és finomhangolás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#config-synopsis>11.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-initial>11.2. Kezdeti beállítások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-core-configuration>11.3. A mag beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-appconfig>11.4. Az alkalmazások beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-starting-services>11.5. Szolgáltatások indítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-cron>11.6. A <code>cron</code> segédprogram beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-rcd>11.7. Az rc használata FreeBSD alatt</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#config-network-setup>11.8. A hálózati kártyák beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-virtual-hosts>11.9. Virtuális címek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-configfiles>11.10. Konfigurációs állományok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-sysctl>11.11. Finomhangolás a sysctl használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-disk>11.12. A lemezek finomhangolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-kernel-limits>11.13. A rendszermag korlátainak finomhangolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#adding-swap-space>11.14. A lapozóterület bõvítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#acpi-overview>11.15. Energia- és erõforrásgazdálkodás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#ACPI-debug>11.16. A FreeBSD ACPI támogatásának használata és nyomonkövetése</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/boot/>12. Fejezet - A FreeBSD rendszerindítási folyamata</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-synopsis>12.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-introduction>12.2. A rendszerindítás problémája</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-blocks>12.3. A boot manager és az indulás fokozatai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-kernel>12.4. Kapcsolat a rendszermaggal a rendszerindítás folyamán</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#device-hints>12.5. Eszköz útmutatók (device.hints)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-init>12.6. Init: A folyamatirányítás elindítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-shutdown>12.7. A leállítási folyamat</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/users/>13. Fejezet - Felhasználók és hozzáférések alapvető kezelése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-synopsis>13.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-introduction>13.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-superuser>13.3. Az adminisztrátori hozzáférés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-system>13.4. Rendszerhozzáférések</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-user>13.5. Felhasználói hozzáférések</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-modifying>13.6. A hozzáférések módosítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-limiting>13.7. A felhasználók korlátozása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-groups>13.8. Csoportok</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle checked>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/security/>14. Fejezet - Biztonság</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-synopsis>14.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-intro>14.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#securing-freebsd>14.3. A FreeBSD védelme</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#crypt>14.4. DES, Blowfish, MD5 és a Crypt</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#one-time-passwords>14.5. Egyszeri jelszavak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#tcpwrappers>14.6. A TCP kapcsolatok burkolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#ipsec>14.10. VPN IPsec felett</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#fs-acl>14.12. Az állományrendszerek hozzáféréseit vezérlõ listák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-portaudit>14.13. A külsõ programok biztonsági problémáinak figyelése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-advisories>14.14. A FreeBSD biztonsági figyelmeztetései</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-accounting>14.15. A futó programok nyilvántartása</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/jails/>15. Fejezet - A jail alrendszer</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-synopsis>15.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-terms>15.2. A jail alrendszerhez kapcsolódó fogalmak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-intro>15.3. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-build>15.4. A jailek létrehozása és vezérlése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-tuning>15.5. Finomhangolás és karbantartás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-application>15.6. A jailek alkalmazása</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mac/>16. Fejezet - Kötelező hozzáférés-vezérlés (MAC)</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-synopsis>16.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-inline-glossary>16.2. A fejezet fontosabb fogalmai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-initial>16.3. A MAC ismertetése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-understandlabel>16.4. Bõvebben a MAC címkéirõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-planning>16.5. A védelem megtervezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-modules>16.6. A modulok beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-seeotheruids>16.7. A seeotheruids MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-bsdextended>16.8. A bsdextended MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-ifoff>16.9. Az ifoff MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-portacl>16.10. A portacl MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-partition>16.11. A partition MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-mls>16.12. A többszintû biztonsági MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-biba>16.13. A Biba MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-lomac>16.14. A LOMAC MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-implementing>16.15. A Nagios elzárása a MAC rendszerrel</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-userlocked>16.16. A felhasználók korlátozása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-troubleshoot>16.17. A hibák elhárítása a MAC rendszerben</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/audit/>17. Fejezet - Biztonsági események vizsgálata</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-synopsis>17.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-inline-glossary>17.2. A fejezet fontosabb fogalmai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-install>17.3. A vizsgálat támogatásának telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-config>17.4. A vizsgálat beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-administration>17.5. A vizsgálati alrendszer használata</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/disks/>18. Fejezet - Háttértárak</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-synopsis>18.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-naming>18.2. Az eszközök elnevezései</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-adding>18.3. Lemezek hozzáadása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#usb-disks>18.5. USB tárolóeszközök</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#creating-cds>18.6. Lézeres tárolóeszközök (CD-k) létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#creating-dvds>18.7. Lézeres tárolóeszközök (DVD-k) létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#floppies>18.8. Hajlékonylemezek létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backups-tapebackups>18.9. Szalagok létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backups-floppybackups>18.10. Biztonsági mentés hajlékonylemezekre</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backup-strategies>18.11. Mentési stratégiák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backup-basics>18.12. Alapvetõ tudnivalók a biztonsági mentésrõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-virtual>18.13. Hálózat, memória és állomány alapú állományrendszerek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#snapshots>18.14. Az állományrendszerek pillanatképei</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#quotas>18.15. Az állományrendszerek kvótái</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-encrypting>18.16. A lemezpartíciók titkosítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#swap-encrypting>18.17. A lapozóterület titkosítása</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/geom/>19. Fejezet - GEOM: A moduláris lemezszervező rendszer</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-synopsis>19.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-intro>19.2. A GEOM bemutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-striping>19.3. RAID0 - Csíkozás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - Tükrözés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-ggate>19.5. Eszközök hálózati illesztése a GEOM-ban</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-glabel>19.6. A lemezes eszközök címkézése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-gjournal>19.7. Naplózó UFS GEOM-on keresztül</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/>20. Fejezet - Támogatott állományrendszerek</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/#filesystems-synopsis>20.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/#filesystems-zfs>20.2. A Z állományrendszer (ZFS)</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/>21. Fejezet - A Vinum kötetkezelő</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-synopsis>21.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-intro>21.2. Kicsik a lemezeink</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-access-bottlenecks>21.3. A hozzáférési idõk szûk keresztmetszetei</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-data-integrity>21.4. Adatintegritás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-objects>21.5. A Vinum objektumai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-examples>21.6. Példák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-object-naming>21.7. Az objektumok elnevezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-config>21.8. A Vinum beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-root>21.9. Rendszerindítás Vinum-kötetrõl</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/>22. Fejezet - Virtualizáció</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-synopsis>22.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-guest>22.2. A FreeBSD mint vendég</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-host>22.3. A FreeBSD mint gazda</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/>23. Fejezet - Honosítás - Az I18N/L10N használata és beállítása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-synopsis>23.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-basics>23.2. Az alapok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#using-localization>23.3. A honosítás használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-compiling>23.4. I18N programok fordítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#lang-setup>23.5. A FreeBSD honosítása adott nyelvekre</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/>24. Fejezet - A FreeBSD frissítése és frissen tartása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. A FreeBSD frissítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. A Portgyûjtemény frissítése a Portsnap használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. A dokumentáció frissítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#current-stable>24.5. A fejlesztõi ág követése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#synching>24.6. A forrás szinkronizálása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#makeworld>24.7. Az alaprendszer újrafordítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#small-lan>24.8. A források követése több géppel</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/>25. Fejezet - DTrace</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-synopsis>25.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-implementation>25.2. Eltérések az implementációban</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-enable>25.3. A DTrace támogatásának engedélyezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-using>25.4. A DTrace használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-language>25.5. A D nyelv</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partiv/>IV. Rész Hálózati kommunikáció</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/>26. Fejezet - Soros vonali kommunikáció</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serial-synopsis>26.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serial>26.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#term>26.3. Terminálok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#dialup>26.4. Betárcsázós szolgáltatások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#dialout>26.5. A betárcsázós szolgáltatások használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serialconsole-setup>26.6. A soros vonali konzol beállítása</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/>27. Fejezet - A PPP és a SLIP</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#userppp>27.2. A felhasználói PPP alkalmazása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp>27.3. A rendszerszintû PPP alkalmazása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. PPP kapcsolatok hibaelhárítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#pppoe>27.5. A PPP használata Ethernet felett (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#pppoa>27.6. PPP ATM felett (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#slip>27.7. A SLIP használata</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mail/>28. Fejezet - Elektronikus levelezés</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-synopsis>28.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-using>28.2. Az elektronikus levelezés használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#sendmail>28.3. A sendmail beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-changingmta>28.4. A levéltovábbító ügynök megváltoztatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-trouble>28.5. A hibák elhárítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-advanced>28.6. Komolyabb témák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-UUCP>28.7. SMTP és az UUCP</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#outgoing-only>28.8. Csak küldés beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-dialup>28.9. Levelezés betárcsázós kapcsolattal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-Auth>28.10. Az SMTP hitelesítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-agents>28.11. Levelezõ kliensek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-fetchmail>28.12. A fetchmail használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-procmail>28.13. A procmail használata</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/>29. Fejezet - Hálózati szerverek</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-servers-synopsis>29.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-inetd>29.2. Az inetd"szuperszerver"</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-nfs>29.3. A hálózati állományrendszer (NFS)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-nis>29.4. Hálózati információs rendszer (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-dhcp>29.5. A hálózat automatikus beállítása (DHCP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-dns>29.6. Névfeloldás (DNS)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-apache>29.7. Az Apache webszerver</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-ftp>29.8. Állományok átvitele (FTP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-samba>29.9. Állomány- és nyomtatási szolgáltatások Microsoft® Windows® kliensek számára (Samba)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-ntp>29.10. Az órák egyeztetése az NTP használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-syslogd>29.11. Távoli gépek naplózása <code>syslogd</code> használatával</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/>30. Fejezet - Tűzfalak</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-intro>30.1. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-concepts>30.2. Röviden a tûzfalakról</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-apps>30.3. Tûzfalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-pf>30.4. Az OpenBSD csomagszûrõje (PF) és az ALTQ</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-ipf>30.5. Az IPFILTER (IPF) tûzfal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/>31. Fejezet - Egyéb haladó hálózati témák</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-routing>31.2. Átjárók és az útválasztás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-wireless>31.3. Vezeték nélküli hálózatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-bridging>31.5. Hálózati hidak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-aggregation>31.6. Linkek összefûzése és hibatûrése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-diskless>31.7. Lemez nélküli mûködés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-isdn>31.8. ISDN</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-natd>31.9. Hálózati címfordítás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-plip>31.10. Párhuzamos vonali IP (PLIP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-ipv6>31.11. Az IPv6</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-atm>31.12. Az Aszinkron adatátviteli mód (ATM)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#carp>31.13. A Közös cím redundancia protokoll (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partv/>V. Rész Függelék</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/>A. Függelék - A FreeBSD beszerzése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-cdrom>A.1. CD és DVD kiadók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-ftp>A.2. FTP oldalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#anoncvs>A.3. Anonim CVS</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#ctm>A.4. A CTM használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#cvsup>A.5. A CVSup használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#cvs-tags>A.6. CVS címkék</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-afs>A.7. AFS oldalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-rsync>A.8. Rsync oldalak</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/>B. függelék - Irodalomjegyzék</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-freebsd>B.1. A FreeBSD-rõl szóló könyvek és folyóiratok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-userguides>B.2. Felhasználói kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-adminguides>B.3. Rendszeradminisztrátori kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-programmers>B.4. Programozói kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-osinternals>B.5. Az operációs rendszerek belsõ mûködésérõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-security>B.6. Biztonságról szóló írások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-hardware>B.7. Hardverrel foglalkozó írások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-history>B.8. UNIX® történelem</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-journals>B.9. Magazinok és folyóiratok</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/>C. Függelék - Források az interneten</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-mail>C.1. Levelezési listák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-news>C.2. Usenet hírcsoportok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-web>C.3. Világhálós szolgáltatások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-email>C.4. E-mail címek</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/pgpkeys/>D. Függelék - PGP-kulcsok</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Tisztségviselők</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>14. Fejezet - Biztonság</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#security-synopsis>14.1. Áttekintés</a></li><li><a href=#security-intro>14.2. Bevezetés</a></li><li><a href=#securing-freebsd>14.3. A FreeBSD védelme</a></li><li><a href=#crypt>14.4. DES, Blowfish, MD5 és a Crypt</a></li><li><a href=#one-time-passwords>14.5. Egyszeri jelszavak</a></li><li><a href=#tcpwrappers>14.6. A TCP kapcsolatok burkolása</a></li><li><a href=#kerberosIV>14.7. KerberosIV</a></li><li><a href=#kerberos5>14.8. Kerberos5</a></li><li><a href=#openssl>14.9. OpenSSL</a></li><li><a href=#ipsec>14.10. VPN IPsec felett</a></li><li><a href=#openssh>14.11. OpenSSH</a></li><li><a href=#fs-acl>14.12. Az állományrendszerek hozzáféréseit vezérlõ listák</a></li><li><a href=#security-portaudit>14.13. A külsõ programok biztonsági problémáinak figyelése</a></li><li><a href=#security-advisories>14.14. A FreeBSD biztonsági figyelmeztetései</a></li><li><a href=#security-accounting>14.15. A futó programok nyilvántartása</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=security-synopsis>14.1. Áttekintés<a class=anchor href=#security-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Ez a fejezet egy alapvetõ bevezetés a rendszerek biztonsági fogalmaiba, ad néhány általános jótanácsot és a FreeBSD-vel kapcsolatban feldolgoz néhány komolyabb témát. Az itt megfogalmazott témák nagy része egyaránt ráhúzható rendszerünk és általánosságban véve az internet biztonságára is. A internet már nem az "békés" hely, ahol mindenki a kedves szomszéd szerepét játssza. A rendszerünk bebiztosítása elkerülhetetlen az adataink, szellemi tulajdonunk, idõnk és még sok minden más megvédésére az internetes banditák és hasonlók ellen.</p></div><div class=paragraph><p>A FreeBSD segédprogramok és mechanizmusok sorát kínálja fel a rendszerünk és hálózatunk sértetlenségének és biztonságának fenntartására.</p></div><div class=paragraph><p>A fejezet elolvasása során megismerjük:</p></div><div class=ulist><ul><li><p>az alapvetõ rendszerbiztonsági fogalmakat, különös tekintettel a FreeBSD-re;</p></li><li><p>milyen olyan különbözõ titkosítási mechanizmusok érthetõek el a FreeBSD-ben, mint például a DES és az MD5;</p></li><li><p>hogyan állítsunk be egyszeri jelszavas azonosítást;</p></li><li><p>hogyan burkoljunk az inetd segítségével TCP kapcsolatokat;</p></li><li><p>hogyan állítsuk be a KerberosIV-t a FreeBSD 5.0-nál korábbi változatain;</p></li><li><p>hogyan állítsuk be a Kerberos5-t a FreeBSD-n;</p></li><li><p>hogyan állítsuk be az IPsec-et és hozzunk létre VPN-t FreeBSD/Windows® gépek között;</p></li><li><p>hogyan állítsuk be és használjuk az OpenSSH-t, a FreeBSD SSH implementációját;</p></li><li><p>mik azok az ACL-ek az állományrendszerben és miként kell ezeket használni;</p></li><li><p>hogyan kell használni a Portaudit segédprogramot a Portgyûjteménybõl telepített külsõ szoftvercsomagok biztonságosságának ellenõrzésére;</p></li><li><p>hogyan hasznosítsuk a FreeBSD biztonsági tanácsait tartalmazó leírásokat</p></li><li><p>mit jelent a futó programok nyilvántartása és hogyan engedélyezzük azt FreeBSD-n.</p></li></ul></div><div class=paragraph><p>A fejezet elolvasásához ajánlott:</p></div><div class=ulist><ul><li><p>az alapvetõ FreeBSD és internetes fogalmak ismerete.</p></li></ul></div><div class=paragraph><p>A könyvben további biztonsági témákról is szó esik, például a <a href=../mac/#mac>Kötelező hozzáférés-vezérlés (MAC)</a>ben a Kötelezõ hozzáférés-vezérlésrõl (MAC) és a <a href=../firewalls/#firewalls>Tűzfalak</a>ben pedig az internetes tûzfalakról.</p></div></div></div><div class=sect1><h2 id=security-intro>14.2. Bevezetés<a class=anchor href=#security-intro></a></h2><div class=sectionbody><div class=paragraph><p>A biztonság egy olyan funkció, ami a rendszergazdától indul és nála is végzõdik. Míg az összes többfelhasználós BSD UNIX® rendszer önmagában is valamennyire biztonságos, a felhasználók "fegyelmezéséhez" szükség további biztonsági mechanizmusok kiépítésére és karbantartására, ami minden bizonnyal egy rendszergazda egyik legfontosabb kötelessége. A számítógépek csak annyira biztonságosak, mint amennyire beállítjuk, és a biztonsági megfontolások állandó versenyben vannak az emberi kényelemmel. A UNIX® rendszerek általánosságban véve órási mennyiségû program párhuzamos futtatására képesek, melyek többsége kiszolgálóként fut - ez azt jelenti, hogy hozzájuk kívülrõl érkezõ egyedek csatlakozhatnak és társaloghatnak velük. Ahogy a tegnap kicsi és nagy számítógépei napjaink asztali gépeivé váltak és ahogy a számítógépek egyre többen csatlakoznak hálózatra és az internetre, a biztonság fontossága is egyre jobban növekszik.</p></div><div class=paragraph><p>A rendszerek biztonsága a támadások különbözõ formáival is foglalkozik, többek közt olyan támadásokkal, amelyek a rendszer összeomlását vagy használhatatlanságát célozzák meg, de nem próbálják meg veszélybe sodorni a <code>root</code> felhasználó hozzáférését ("feltörni a gépet"). A biztonsággal kapcsolatos problémák több kategóriára oszthatóak:</p></div><div class="olist arabic"><ol class=arabic><li><p>A szolgáltatások mûködésképtelenné tételére irányuló (DoS, Denial of Service) támadások.</p></li><li><p>A felhasználói fiókok veszélyeztetése.</p></li><li><p>Rendszergazdai jogok megszerzése a közeli szervereken keresztül.</p></li><li><p>Rendszergazdai jogok megszerzése a felhasználói fiókokon keresztül.</p></li><li><p>Kiskapuk létrehozása a rendszerben.</p></li></ol></div><div class=paragraph><p>A szolgáltatások mûködésképtelenné tételére irányuló támadások olyan tevékenységre utalnak, amelyek képesek megfosztani egy számítógépet az erõforrásaitól. A DoS támadások többnyire nyers erõvel kivitelezett technikák, melyek vagy a rendszer összeomlasztását vagy pedig a használhatatlanná tételét veszik célba úgy, hogy túlterhelik az általa felkínált szolgáltatásokat vagy a hálózati alrendszert. Egyes DoS támadások a hálózati alrendszerben rejtõzõ hibákat igyekeznek kihasználni, amivel akár egyetlen csomaggal is képesek romba dönteni egy számítógépet. Ez utóbbit csak úgy lehet orvosolni, ha a hibát kijavítjuk a rendszermagban. A szerverekre mért csapásokat gyakran ki lehet védeni a paramétereik ügyes beállításával, melyek segítségével korlátozni tudjuk az ezeket ért terhelést egy kellemetlenebb helyezetben. A nyers erõt alkalmazó hálózati támadásokkal a legnehezebb szembenézni. Például az álcázott támadadások, melyeket szinte lehetetlen megállítani, remek eszközök arra, hogy elvágják gépünket az internettõl. Ezzel viszont nem csak azt iktatják ki, hanem az internet-csatlakozásunkat is eldugítják.</p></div><div class=paragraph><p>A DoS támadásoknál még gyakrabban elõfordul, hogy feltörik a felhasználók fiókjait. A rendszergazdák többsége még mindig futtat telnetd, rlogin, rshd és ftpd szervereket a gépen. Ezek a szerverek alapértelmezés szerint nem titkosított kapcsolaton keresztül mûködnek. Ebbõl következik, hogy ha nincs annyira sok felhasználónk és közülük néhányan távoli helyekrõl jelentkeznek be (ami az egyik leggyakoribb és legkényelmesebb módja ennek), akkor elõfordulhat, hogy valami megneszeli a jelszavaikat. A körültekintõ rendszergazdák mindig ellenõrzik a bejelentkezéseket tartalmazó naplókat és igyekeznek kiszûrni a gyanús címeket még abban az esetben is, amikor a bejelentkezés sikeres volt.</p></div><div class=paragraph><p>Mindig arra kell gondolni, hogy ha a támadónak sikerült megszerezni az egyik felhasználó hozzáférését, akkor akár képes lehet a <code>root</code> felhasználó fiókjának feltörésére is. Azonban a valóságban egy jól õrzött és karbantarott rendszer esetén a felhasználói hozzáférések megszerzése nem feltétlenül adja a támadó kezére a <code>root</code> hozzáférését. Ebben fontos különbséget tenni, hiszen a <code>root</code> felhasználó jogai nélkül a támadó nem képes elrejteni a nyomait és legjobb esetben sem tud többet tenni, mint tönkretenni az adott felhasználó állományait vagy összeomlasztani a rendszert. A felhasználói fiókok feltörése nagyon gyakran megtörténik, mivel a felhasználók messze nem annyira elõvigyázatosak, mint egy rendszergazda.</p></div><div class=paragraph><p>A rendszergazdáknak mindig észben kell tartani, hogy egy számítógépen több módon is meg lehet szerezni a <code>root</code> felhasználó hozzáférését. A támadó megtudhatja a <code>root</code> jelszavát, hibát fedezhet fel az egyik rendszergazdai jogosultsággal futó szerverben és képes feltörni a <code>root</code> hozzáférést egy hálózati kapcsolaton keresztül, vagy a támadó olyan programban talál hibát, aminek segítségével el tudja érni a <code>root</code> fiókját egy felhasználói hozzáférésen keresztül. Miután a támadó megtalálta a rendszergazdai jogok megszerzésének módját, nem feltétlenül kell kiskapukat elhelyeznie a rendszerben. Az eddig talált és javított, rendszergazdai jogok megszerzését lehetõvé tevõ biztonsági rések egy része esetében viszont a támadónak akkora mennyiségû munkát jelentene eltûntetni maga után a nyomokat, hogy megéri neki egy kiskaput telepíteni. Ennek segítségével a támadó ismét könnyedén hozzájuthat a <code>root</code> felhasználó hozzáféréséhez a rendszerben, de ezen keresztül egy okos rendszergazda képes is a behatolót leleplezni. A kiskapuk lerakásának megakadályozása valójában káros a biztonság szempontjából nézve, mert ezzel nem szüntetjük meg azokat a lyukakat, amin keresztül a támadó elõször bejutott.</p></div><div class=paragraph><p>A támadások elleni védelmet mindig több vonalban kell megvalósítani, melyeket így oszthatunk fel:</p></div><div class="olist arabic"><ol class=arabic><li><p>A rendszergazda és a személyzet hozzáférésének védelme.</p></li><li><p>A rendszergazdai jogokkal futó szerverek és a suid/sgid engedélyekkel rendelkezõ programok védelme.</p></li><li><p>A felhasználói hozzáférések védelme.</p></li><li><p>A jelszavakat tároló állomány védelme.</p></li><li><p>A rendszermag belsejének, a nyers eszközök és az állományrendszerek védelme.</p></li><li><p>A rendszert ért szabálytalan módosítások gyors észlelése.</p></li><li><p>Állandó paranoia.</p></li></ol></div><div class=paragraph><p>A fejezet most következõ szakaszában az imént felsorolt elemeket fejtjük ki részletesebben.</p></div></div></div><div class=sect1><h2 id=securing-freebsd>14.3. A FreeBSD védelme<a class=anchor href=#securing-freebsd></a></h2><div class=sectionbody><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=title>Parancs kontra protokoll</div><div class=paragraph><p>A dokumentumban a félkövéren fogjuk szedni az alkalmazásokat, és <code>egyenszélességû</code> betûkkel pedig az adott parancsokra hivatkozunk. A protokollokat nem különböztetjük meg. Ez a tipográfiai elkülönítés hasznos például az ssh egyes vonatkozásainak esetén, mivel ez egyben egy protokoll és egy parancs is.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A most következõ szakaszok a FreeBSD védelmének azon módszereit ismertetik, amelyekrõl a fejezet <a href=#security-intro>elõzõ szakaszában</a> már írtunk.</p></div><div class=sect2><h3 id=securing-root-and-staff>14.3.1. A rendszergazda és a személyzet hozzáférésének védelme<a class=anchor href=#securing-root-and-staff></a></h3><div class=paragraph><p>Elõször is: ne törjük magunkat a személyzeti fiókok biztonságossá tételével, ha még a rendszergazda hozzáférését sem tettük eléggé biztonságossá. A legtöbb rendszerben a <code>root</code> hozzáféréshez tartozik egy jelszó. Elsõként fel kell tennünk, hogy ez a jelszó <em>mindig</em> megszerezhetõ. Ez természetesen nem arra utal, hogy el kellene távolítanunk. A jelszó szinte mindig szükséges a számítógép konzolon keresztüli eléréséhez. Valójában arra szeretnénk rávilágítani, hogy a konzolon kívül sehol máshol ne lehessen használni ezt a jelszót, még a <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> paranccsal sem. Például gondoskodjunk róla, hogy az <span class=filename>/etc/ttys</span> állományban megadott pszeudó terminálokat "insecure" (nem biztonságos) típusúnak állítottuk be, és így a <code>telnet</code> vagy az <code>rlogin</code> parancsokon keresztül nem lehet rendszergazdaként bejelentkezni. Ha más szolgáltatáson keresztül jelentkezünk be, például az sshd segítségével, akkor ebben az esetben is gondoskodjunk róla, hogy letiltottuk a közvetlen rendszergazdai bejelentkezés lehetõségét. Ezt úgy tudjuk megtenni, ha megnyitjuk az <span class=filename>/etc/ssh/sshd_config</span> állományt és a <code>PermitRootLogin</code> paramétert átállítjuk a <code>no</code> értékre. Vegyünk számba minden lehetséges hozzáférési módot - az FTP és a hozzá hasonló módok gyakran átszivárognak a repedéseken. A rendszergazdának csak a rendszerkonzolon keresztül szabad tudnia bejelentkeznie.</p></div><div class=paragraph><p>Természetesen egy rendszergazdának valahogy el kell érnie a <code>root</code> hozzáférést, ezért ezzel felnyitunk néhány biztonsági rést. De gondoskodjunk róla, hogy ezek a rések további jelszavakat igényelnek a mûködésükhöz. A <code>root</code> hozzáférés eléréséhez érdemes felvenni tetszõleges személyzeti (staff) hozzáféréseket a <code>wheel</code> csoportba (az <span class=filename>/etc/group</span> állományban). Ha a személyzet tagjait a <code>wheel</code> csoportba rakjuk, akkor innen a <code>su</code> paranccsal fel tudjuk venni a <code>root</code> felhasználó jogait. A személyzet tagjait létrehozásukkor közvetlenül sose vegyük fel a <code>wheel</code> csoportba! A személyzet tagjai elõször kerüljenek egy <code>staff</code> csoportba, és majd csak ezután az <span class=filename>/etc/group</span> állományon keresztül a <code>wheel</code> csoportba. A személyzetnek csak azon tagjait tegyük ténylegesen a <code>wheel</code> csoportba, akiknek valóban szükségük van a <code>root</code> felhasználó hozzáférésére. Ha például a Kerberost használjuk hitelesítésre, akkor megcsinálhatjuk azt is, hogy a Kerberos <span class=filename>.k5login</span> állományában engedélyezzük a <a href="https://man.freebsd.org/cgi/man.cgi?query=ksu&amp;sektion=1&amp;format=html">ksu(1)</a> parancson keresztül a <code>root</code> hozzáférés elérését a <code>wheel</code> csoport alkalmazása nélkül. Ez a megoldás talán még jobb is, mivel a <code>wheel</code> használata esetén a behatolónak még mindig lehetõsége van hozzájutni a <code>root</code> hozzáféréséhez olyankor, amikor a kezében van a jelszavakat tároló állomány és meg tudja szerezni a személyzet valamelyik tagjának hozzáférését. A <code>wheel</code> csoport által felkínált megoldás ugyan jobb, mint a semmi, de kétségtelenül nem a legbiztonságosabb.</p></div><div class=paragraph><p>A hozzáférések teljes körû letiltásához a <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> parancsot érdemes használni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw lock személyzet</span></code></pre></div></div><div class=paragraph><p>Ezzel meg tudjuk akadályozni, hogy a felhasználó akármilyen módon, beleértve az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> használatát is, hozzá tudjon férni a rendszerünkhöz.</p></div><div class=paragraph><p>A hozzáférések blokkolásának másik ilyen módszere a titkosított jelszó átírása egyetlen “*” karakterre. Mivel ez a karakter egyetlen titkosított jelszóra sem illeszkedik, ezért a felhasználó nem lesz képes bejelentkezni. Ahogy például a személyzet alábbi tagja sem:</p></div><div class="literalblock programlisting"><div class=content><pre>izemize:R9DT/Fa1/LV9U:1000:1000::0:0:Ize-Mize:/home/izemize:/usr/local/bin/tcsh</pre></div></div><div class=paragraph><p>Erre cseréljük ki:</p></div><div class="literalblock programlisting"><div class=content><pre>izemize:*:1000:1000::0:0:Ize-Mize:/home/izemize:/usr/local/bin/tcsh</pre></div></div><div class=paragraph><p>Ezzel megakadályozzuk, hogy az <code>izemize</code> nevû felhasználó a hagyományos módszerekkel be tudjon jelentkezni. Ez a megoldás azonban a Kerberost alkalmazó rendszerek esetén nem mûködik, illetve olyan helyezetekben sem, amikor a felhasználó az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> paranccsal már létrehozott magának kulcsokat.</p></div><div class=paragraph><p>Az ilyen védelmi mechanizmusok esetében mindig egy szigorúbb biztonsági szintû géprõl jelentkezünk be egy kevésbé biztonságosabb gépre. Például, ha a szerverünk mindenféle szolgáltatásokat futtat, akkor a munkaállomásunknak egyetlen egyet sem lenne szabad. A munkaállomásunk biztonságossá tételéhez a lehetõ legkevesebb szolgáltatást szabad csak futtatnunk, de ha lehet, egyet sem, és mindig jelszóval védett képernyõvédõt használjuk. Természetesen ha a támadó képes fizikailag hozzáférni a munkaállomásunkhoz, akkor szinte bármilyen mélységû védelmet képes áttörni. Ezt mindenképpen számításba kell vennünk, azonban ne felejtsük el, hogy a legtöbb betörési kísérlet távolról, hálózaton keresztülrõl érkezik olyan emberektõl, akik fizikailag nem férnek hozzá a munkaállomásunkhoz vagy a szervereinkhez.</p></div><div class=paragraph><p>A Kerberos és a hozzá hasonló rendszerek használatával egyszerre tudjuk a személyzet tagjainak jelszavát letiltani vagy megváltoztatni, ami egybõl érvényessé válik minden olyan gépen, ahová az adott felhasználónak bármilyen hozzáférése is volt. Nem szabad lebecsülnünk ezt a gyors jelszóváltási lehetõséget abban az esetben, ha a személyzet valamelyik tagjának hozzáférését megszerezték. Hagyományos jelszavak használatával a jelszavak megváltoztatása N gépen igazi káosz. A Kerberosban jelszóváltási megszorításokat is felállíthatunk: nem csak a Kerberos által adott jegyek járnak le idõvel, hanem a Kerberos rendszer meg is követelheti a felhasználóktól, hogy egy adott idõ (például egy hónap) után változtasson jelszót.</p></div></div><div class=sect2><h3 id=_a_rendszergazdai_jogokkal_futó_szerverek_és_suidsgid_engedélyekkel_rendelkezõ_programok_védelme>14.3.2. A rendszergazdai jogokkal futó szerverek és SUID/SGID engedélyekkel rendelkezõ programok védelme<a class=anchor href=#_a_rendszergazdai_jogokkal_futó_szerverek_és_suidsgid_engedélyekkel_rendelkezõ_programok_védelme></a></h3><div class=paragraph><p>A bölcs rendszergazda mindig csak akkor futtat szervereket, amikor szüksége van rá, se többet, se kevesebbet. Az egyéb fejlesztõktõl származó szerverekkel bánjunk különösen óvatosan, mivel gyakran hajlamosak hibákat tartalmazni. Például az imapd vagy a popper használata olyan, mintha az egész világnak ingyenjegyet osztogatnánk a rendszerünk <code>root</code> hozzáféréséhez. Soha ne futtassunk olyan szervert, amelyet nem vizsgáltunk át kellõ alapossággal. Sok szervert nem is feltétlenül kell <code>root</code> felhasználóként futtatni. Például az ntalk, comsat és finger démonok egy speciális <em>járókában</em> (sandbox) futnak. Ezek a járókák sem teljesen tökéletesek, hacsak erre külön figyelmet nem fordítunk. Ilyenkor a többvonalas védelem eszménye még mindig él: ha valakinek sikerült betörnie a járókába, akkor onnan ki is tud törni. Minél több védelmi vonalat húzunk a támadó elé, annál jobban csökken a sikerének valószínûsége. A történelem során lényegében minden <code>root</code> jogokkal futó szerverben, beleértve az alapvetõ rendszerszintû szervereket is, találtak már biztonsági jellegû hibát. Ha a gépünkre csak az sshd szolgáltatáson keresztül tudnak belépni, és soha nem használja senki a telnetd, rshd vagy rlogind szolgáltatásokat, akkor kapcsoljuk is ki ezeket!</p></div><div class=paragraph><p>A FreeBSD most már alapértelmezés szerint járókában futtatja az ntalkd, comsat és finger szolgáltatásokat. Másik ilyen program, amely szintén esélyes lehet erre, az a <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a>. Az <span class=filename>/etc/defaults/rc.conf</span> megjegyzésben tartalmazza a named járókában futtatásához szükséges paramétereket. Attól függõen, hogy egy új rendszert telepítünk vagy frissítjük a már meglévõ rendszerünket, a járókákhoz tartozó speciális felhasználói hozzáférések nem feltétlenül jönnek létre. Amikor csak lehetséges, az elõrelátó rendszergazda kikísérletez és létrehoz ilyen járókákat.</p></div><div class=paragraph><p>Vannak más olyan szerverek, amelyek tipikusan nem járókákban futnak. Ilyen többek közt a sendmail, popper, imapd, ftpd és még sokan mások. Léteznek rájuk alternatívák, de a telepítésük valószínûleg több munkát igényel, mint amennyit megérné számunkra veszõdni velük (és itt megint lesújt a kényelmi tényezõ). Ezeket a szervereket többnyire <code>root</code> felhasználóként kell futtatnunk és a rajtuk keresztül érkezõ betörési kísérleteket más módokra támaszkodva kell észlelnünk.</p></div><div class=paragraph><p>A <code>root</code> felhasználó keltette biztonsági rések másik nagy csoportja azok a végrehajtható állományok a rendszerben, amelyek a suid és sgid engedélyekkel rendelkeznek, futtatásuk rendszergazdai jogokkal történik. Az ilyen binárisok többsége, mint például az rlogin, a <span class=filename>/bin</span> és <span class=filename>/sbin</span>, <span class=filename>/usr/bin</span> vagy <span class=filename>/usr/sbin</span> könyvtárakban található meg. Habár semmi sem biztonságos 100%-ig, a rendszerben alapértelmezetten suid és sgid engedéllyel rendelkezõ binárisok ebbõl a szempontból meglehetõsen megbízhatónak tekinhetõek. Alkalmanként azonban találnak a <code>root</code> felhasználót veszélyeztetõ lyukakat az ilyen binárisokban is. Például 1998-ban az <code>Xlib</code>-ben volt egy olyan rendszergazdai szintû hiba, amellyel az xterm (ez általában suid engedéllyel rendelkezik) sebezhetõvé vált. Mivel jobb félni, mint megijedni, ezért az elõretekintõ rendszergazda mindig igyekszik úgy csökkenteni az ilyen engedélyekkel rendelkezõ binárisok körét, hogy csak a személyzet tagjai legyenek képesek ezeket futtatni. Ezt egy olyan speciális csoport létrehozásával oldhatjuk meg, amelyhez csak a személyzet tagjai férhetnek hozzá. Az olyan suid binárisoktól pedig, amelyeket senki sem használ, igyekszik teljesen megszabadulni (<code>chmod 000</code>). A monitorral nem rendelkezõ szervereknek általában nincs szükségük az xterm mûködtetésére. Az sgid engedéllyel rendelkezõ binárisok is legalább ugyanennyire veszélyesek. Ha a behatoló képes feltörni egy <code>kmem</code> csoporthoz tartozó sgid binárist, akkor képes lesz olvasni a <span class=filename>/dev/kmem</span> állomány tartalmát, ezáltal hozzájut a titkosított jelszavakhoz és így megszerezheti magának akármelyik hozzáférést. Sõt, a <code>kmem</code> csoportot megszerzõ behatolók figyelni tudják a pszeudó terminálokon keresztül érkezõ billentyûleütéseket, még abban az esetben is, amikor a felhasználók egyébként biztonságos módszereket használnak. A <code>tty</code> csoportot bezsebelõ támadók szinte bármelyik felhasználó termináljára képesek írni. Ha a felhasználó valamilyen terminál programot vagy terminál emulátort használ a billentyûzet szimulációjával, akkor a behatoló tud olyan adatokat generálni, amivel a felhasználó nevében adhat ki parancsokat.</p></div></div><div class=sect2><h3 id=secure-users>14.3.3. A felhasználói hozzáférések védelme<a class=anchor href=#secure-users></a></h3><div class=paragraph><p>A felhasználók hozzáféréseit szinte a legnehezebb megvédeni. Míg a személyzet tagjaival szemben lehetünk kíméletlenül szigorúak és "ki is csillagozhatjuk" a jelszavukat, addig a felhasználók hozzáféréseivel általánosságban véve ezt nem tehetjük meg. Ha a kezünkben van a megfelelõ mértékû irányítás, akkor még gyõzhetünk és kényelmesen biztonságba helyezethetjük a felhasználók hozzáférését. Ha nincs, akkor nem tehetünk mást, mint állandóan õrködünk a hozzáférések felett. Az ssh és Kerberos használata a felhasználók esetén sokkalta problematikusabb, mivel ilyenkor jóval több adminisztrációra és mûszaki segítségnyújtásra van szükség, de még mindig jobb megoldás a titkosított jelszavakhoz képest.</p></div></div><div class=sect2><h3 id=_a_jelszavakat_tároló_állomány_védelme>14.3.4. A jelszavakat tároló állomány védelme<a class=anchor href=#_a_jelszavakat_tároló_állomány_védelme></a></h3><div class=paragraph><p>Az a legbiztosabb, ha minél több jelszót kicsillagozunk és a hozzáférések hitelesítésére ssh-t vagy Kerberost használunk. Igaz, a titkosított jelszavakat tároló állományt (<span class=filename>/etc/spwd.db</span>) csak a <code>root</code> képes olvasni, de a támadó meg tudja szerezni ezt a jogot még olyankor is, ha <code>root</code> felhasználóként nem feltétlenül tud írni.</p></div><div class=paragraph><p>A rendszerünkben futó biztonsági szkripteknek a jelszavakat tároló állomány változását folyamatosan tudnia kell figyelnie és jelentie (lásd lentebb a <a href=#security-integrity>Az állományok sértetlenségének ellenõrzése</a> címû fejezetet).</p></div></div><div class=sect2><h3 id=_a_rendszermag_belsejének_a_nyers_eszközök_és_az_állományrendszerek_védelme>14.3.5. A rendszermag belsejének, a nyers eszközök és az állományrendszerek védelme<a class=anchor href=#_a_rendszermag_belsejének_a_nyers_eszközök_és_az_állományrendszerek_védelme></a></h3><div class=paragraph><p>Ha a támadó megszerzi a <code>root</code> hozzáférését, akkor szinte bármit képes megtenni, de vannak bizonyos elõnyei. Például a mostanság fejlesztett legtöbb rendszermag tartalmaz valamilyen beépített csomaglehallgatót, amit FreeBSD alatt a <span class=filename>bpf</span> eszköz valósít meg. A támadók szinte mindig megpróbálnak valamilyen csomaglehallgatót használni a feltört gépen. A legtöbb rendszeren azonban nem kell feltétlenül megadnunk ezt az örömet, ezért nem is kell beépítenünk a rendszermagba a <span class=filename>bpf</span> eszközt.</p></div><div class=paragraph><p>De ha még ki is iktatjuk a <span class=filename>bpf</span> eszközt, még aggódhatunk a <span class=filename>/dev/mem</span> és <span class=filename>/dev/kmem</span> miatt. Egyébként ami azt illeti, a behatoló még így is képes írni a nyers eszközökre. Sõt, a rendszermagba képesek vagyunk modulokat is betölteni a <a href="https://man.freebsd.org/cgi/man.cgi?query=kldload&amp;sektion=8&amp;format=html">kldload(8)</a> használatával. A vállalkozó kedvû támadó a rendszermag moduljaként képes telepíteni és használni a saját <span class=filename>bpf</span> eszközét vagy bármilyen más, a csomagok lehallgatására alkalmas eszközt. Az ilyen problémák elkerülése érdekében a rendszermagot a legmagasabb védelmi szinten kell üzemeltetni, tehát legalább egyes szinten.</p></div><div class=paragraph><p>A rendszermag védelmi szintjét több különbözõ módon lehet állítani. A védelmi szintet úgy lehet a legegyszerûbben növelni, ha a <code>sysctl</code> paranccsal beállítjuk a <code>kern.securelevel</code> nevû, rendszerszintû változó értékét:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.securelevel=1</span></code></pre></div></div><div class=paragraph><p>A FreeBSD rendszermag alapértelmezés szerint a <code>-1</code> védelmi szinten indul. Ez egészen addig <code>-1</code> marad, amíg a rendszergazda vagy valamelyik <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> során hívott rendszerindító szkript ezt meg nem változtatja. A rendszer indítása során úgy tudjuk beállítani a megfelelõ védelmi szintet, ha az <span class=filename>/etc/rc.conf</span> állományban megadjuk a <code>kern_securelevel_enable</code> változót a <code>YES</code> értékkel, illetve <code>kern_securelevel</code> értékeként a kívánt védelmi szintet.</p></div><div class=paragraph><p>A FreeBSD alapértelmezett védelmi szintje közvetlenül a rendszerindító szkriptek lefutása után <code>-1</code>. Ezt "nem biztonságos módnak" nevezik, mivel az állományok írásáért felelõs állományjelzõk nem feltétlenül mûködnek, mindegyik eszköz írható, olvasható és a többi.</p></div><div class=paragraph><p>Miután a védelmi szintet <code>1</code> vagy annál magasabb értékre állítottuk, akkor a rendszer figyelembe veszi a csak hozzáfûzést (append-only) és módosíthatatlanságot (immutable) megszorító állományjelzõket, nem engedélyezi a tiltásukat és az eszközök közvetlenül nem érhetõek el. A különbözõ védelmi szintek részletesebb bemutatását a <a href="https://man.freebsd.org/cgi/man.cgi?query=security&amp;sektion=7&amp;format=html">security(7)</a> man oldalon olvashatjuk (vagy a FreeBSD 7.0 elõtti változataiban a <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> man oldalon).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Az <code>1</code> és az afeletti védelmi szinteken többek közt az X11 nem feltétlenül lesz futtatható (mivel a <span class=filename>/dev/io</span> eszköz elérése blokkolt), illetve a rendszer frissítése is akadályokba fog ütközni (a <code>installworld</code> futtatása során ideiglenesen ki kell kapcsolni az append-only és immutable állományjelzõket). Az X11 esetében ezt valahogy még ki lehet kerülni úgy, hogy ha az <a href="https://man.freebsd.org/cgi/man.cgi?query=xdm&amp;sektion=1&amp;format=html">xdm(1)</a> démont még a rendszerindítás elején aktiváljuk (amikor a védelmi szint még kellõen alacsony). Az összes védelmi szint és megszorítás esetén azonban nem mindig adható ilyen jellegû javaslat, ezért ilyenkor mindig érdemes elõre tervezni egy keveset. Emellett fontos alaposan megismerni a különbözõ védelmi megszorításokat, mivel jelentõs mértékben visszafoghatják a rendszer használhatóságát. Ez segít az adott helyzetben az egyszerûbb megoldást választani és ezáltal elkerülni a kellemetlen meglepetéseket.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ha a rendszermag védelmi szintjét az <code>1</code> érték vagy afelé emeljük, akkor hasznos lehet a fontosabb (lényegében minden olyan programnak, amely a védelmi szint helyes beállítódása elõtt lefut) programoknak, könyvtáraknak és szkripteknek beállítani az <code>schg</code> állományjelzõt. Ilyenkor azonban vegyük figyelembe, hogy a rendszer frissítése is nehezebbé válik a magasabb védelmi szinteken. Egy mûködõképesebb megoldás lehet, ha rendszerünket egy magasabb védelmi szinten használjuk, de nem állítjuk be mindegyik rendszerszintû állományra az <code>schg</code> állományjelzõt. Másik lehetõség még a <span class=filename>/</span> és <span class=filename>/usr</span> partíciók írásvédett csatlakoztatása. Ne felejtsük el azonban, hogy ha túlságosan szigorúak vagyunk magunkhoz, akkor azzal egyúttal a behatolás észlelését is meg tudjuk nehezíteni!</p></div></div><div class=sect2><h3 id=security-integrity>14.3.6. Az állományok sértetlenségének ellenõrzése: binárisok, konfigurációs állományok stb.<a class=anchor href=#security-integrity></a></h3><div class=paragraph><p>Ha arról van szó, csak a legfontosabb rendszerszintû konfigurációs- és vezérlõállományokat tudjuk megvédeni, még mielõtt a korábban emlegetett kényelmi tényezõ kimutatná a foga fehérjét. Például, ha a <code>chflags</code> paranccsal beállítjuk az <code>schg</code> állományjelzõt a <span class=filename>/</span> és <span class=filename>/usr</span> állományrendszereken található legtöbb állományra, akkor az minden bizonnyal csökkenti a hatékonyságunkat, hiszen az állományok védelmének növekedésével csökken az észlelés lehetõsége. A védelmi vonalaink közül ugyanis az utolsó talán az egyik legfontosabb - a detektálás. A felépített biztonsági rendszerünk legnagyobb része szinte teljesen hasztalan (vagy ami még rosszabb, a biztonság hamis érzetét kelti), ha nem vagyunk képesek észrevenni a betörési kísérleteket. A védelmi rendszer egyik részére nem a támadó megállításához, hanem a lelassításához van szükség, hogy így majd munka közben érhessük tetten.</p></div><div class=paragraph><p>A betörés tényét legjobban a megváltozott, hiányzó vagy éppen váratlanul felbukkanó állományok utáni kutatással tudjuk felismerni. A módosított állományokat általában egy másik (gyakran központosított) korlátozott hozzáférésû rendszerbõl ellenõrizhetjük a legjobban. Fontos, hogy ha egy korlátozott hozzáférésû, kiemelten védett rendszeren írjuk a védelemért felelõs szkripteket, akkor azok szinte teljesen láthatlanok lesznek a támadó számára. A legjobb kihasználás érdekében a korlátozott hozzáférésû gépnek jelentõs mértékû rálátással kell rendelkeznie az összes többi gépre, amit írásvédett NFS exportok vagy ssh kulcspárok felhasználásával érhetünk el. A hálózati forgalmat leszámítva az NFS látszik a legkevésbé - segítségével lényegében észrevétlenül tudjuk figyelni az egyes gépek állományrendszereit. Ha a megfigyelésre használt szerver a kliensekhez switchen keresztül csatlakozik, akkor az NFS gyakran jobb választásnak bizonyul. Ha a szerver hubon vagy több hálózati elemen keresztül éri el a megfigyelni kívánt klienseket, akkor az NFS nem eléggé biztonságos (és hatékony), ezért ilyen esetekben az ssh választása lehet a kedvezõ még az ssh által hagyott nyomokkal együtt is.</p></div><div class=paragraph><p>Miután a korlátozott hozzáférésû gépünk legalább látja a hozzá tartozó kliensek rendszereit, el kell készítenünk a tényleges monitorozást végzõ szkripteket. Ha NFS csatlakozást tételezünk fel, akkor az olyan egyszerû rendszereszközökkel, mint például a <a href="https://man.freebsd.org/cgi/man.cgi?query=find&amp;sektion=1&amp;format=html">find(1)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=md5&amp;sektion=1&amp;format=html">md5(1)</a> képesek vagyunk összerakni ezeket. A szemmel tartott kliensek állományait naponta legalább egyszer érdemes ellenõrizni md5-tel, valamint még ennél gyakrabban is tesztelni az <span class=filename>/etc</span> és <span class=filename>/usr/local/etc</span> könyvtárakban található konfigurációs és vezérlõállományokat. Ha valamilyen eltérést tapasztal az ellenõrzést végzõ szerverünk és a rajta levõ md5 információk is helyesek, akkor értesítenie kell a rendszergazdát. Egy jó védelmi szkript képes megkeresni az oda nem illõ suid binárisokat, valamint az új vagy törölt állományokat a <span class=filename>/</span> és a <span class=filename>/usr</span> partíciókon.</p></div><div class=paragraph><p>A védelmi szkriptek megírása valamivel nehezebb feladat, ha ssh-t használunk az NFS helyett. A futtatásukhoz a szkripteket és az általuk használt eszközöket (például find) az <code>scp</code> paranccsal lényegében át kell másolni a kliensekre, amivel így láthatóvá válnak. Ne feledjük továbbá, hogy az ssh kliens már eleve feltört lehet. Szó, ami szó, ha nem megbízható összeköttetésekrõl beszélünk, akkor az ssh használata elkerülhetetlen, de nem feltétlenül egyszerû.</p></div><div class=paragraph><p>Egy jó védelmi szkript észreveszi a felhasználók és a személyzet tagjainak hozzáférését vezérlõ állományokban, mint például az <span class=filename>.rhosts</span>, <span class=filename>.shosts</span>, <span class=filename>.ssh/authorized_keys</span> és társaiban keletkezett változásokat is, amelyek esetleg elkerülhetik egy <code>MD5</code> alapú ellenõrzés figyelmét.</p></div><div class=paragraph><p>Ha netalán órási mennyiségû tárterületettel rendelkeznénk, akkor eltarthat egy ideig, amíg végigsöprünk az összes partíció összes állományán. Ebben az esetben érdemes olyan beállításokat megadni az állományrendszerek csatlakoztatásánál, amivel le tudjuk tiltani a suid engedéllyel rendelkezõ binárisok futtatását. Ezzel kapcsolatban a <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> parancs <code>nosuid</code> opcióját nézzük meg. Hetente legalább egyszer azért mégis érdemes átnézni az ilyen partíciókat is, mivel ez a réteg a betörési kísérletek felderítésével foglalkozik, függetlenül a sikerességüktõl.</p></div><div class=paragraph><p>A futó programok nyilvántartása (lásd <a href="https://man.freebsd.org/cgi/man.cgi?query=accton&amp;sektion=8&amp;format=html">accton(8)</a>) egy olyan viszonylag kevés költséggel járó lehetõség az operációs rendszerben, ami segítségünkre lehet a betörés utáni események kiértékelésében. Különösen hasznos olyankor, amikor megpróbáljuk modellezni, miképp is sikerült a támadónak bejutnia a rendszerünkbe, természetesen feltételezve, hogy az ehhez felhasznált feljegyzések a betörés után is érintetlenek maradtak.</p></div><div class=paragraph><p>Végül a védelmet ellátó szkripteknek javasolt feldolgozni a naplóállományokat is, valamint a naplókat magukat is a lehetõ legbiztonságosabb formában generálni - ilyenkor nagyon hasznos lehet, ha egy távoli gépre naplózunk. A behatoló megpróbálja majd eltüntetni a nyomait, a naplóállományok viszont nagyon fontosak a rendszergazda számára a betörési kísérletek idejének és módjának megállapításában. A naplókat úgy tudjuk tartósan rögzíteni, ha a rendszerkonzol üzeneteit soros porton keresztül gyûjtjük össze a konzolok felügyeletéért felelõs biztonságos gépen.</p></div></div><div class=sect2><h3 id=_állandó_paranoia>14.3.7. Állandó paranoia<a class=anchor href=#_állandó_paranoia></a></h3><div class=paragraph><p>Egy kis paranoia sosem árt. Elmondható, hogy a rendszergazda tetszõleges számú biztonsági intézkedéssel élhet egészen addig, amíg az nincs hatással a kényelmére, és a kényelmet <em>befolyásoló</em> biztonsági intézkedéseket pedig megfelelõ mérlegelés mellett tegye meg. Ami még ennél is fontosabb, hogy mindig változtassunk valamit a biztonsági hálónkon - mivel ha egy az egyben követjük a dokumentumban leírtakat, akkor ezzel együtt kiadjuk a bejutás receptjét annak a leendõ támadónknak, aki szintén elolvasta ugyanezt.</p></div></div><div class=sect2><h3 id=_a_szolgáltatások_mûködésképtelenné_tételét_célzó_támadások>14.3.8. A szolgáltatások mûködésképtelenné tételét célzó támadások<a class=anchor href=#_a_szolgáltatások_mûködésképtelenné_tételét_célzó_támadások></a></h3><div class=paragraph><p>Ez a szakasz a szolgáltatások mûködésképtelenségét elérni kívánó, más néven "Denial of Service" típusú támadásokkal foglalkozik. Noha nem tudunk túlságosan sokat tenni a manapság felbukkanó álcázott, a hálózatunk totális leterhelését célbavevõ támadások ellen, akadnak olyan általános érvényû eszközök, amelyekkel elejét vehetjük a szervereink szétbomzásának:</p></div><div class="olist arabic"><ol class=arabic><li><p>A létjövõ szerverpéldányok korlátozása.</p></li><li><p>Az ugródeszkaszerû támadások (támadás ICMP-válasszal, pingszórás stb.) korlátozása.</p></li><li><p>A rendszermag útválasztási gyorsítótárának túlterhelése.</p></li></ol></div><div class=paragraph><p>A DoS támadások egyik jellemzõ sémája szerint egy sokszorozódni képes szervert támadnak meg, amelynek igyekeznek minél több példányát legyártatni, míg végül az ezt futtató rendszer ki nem fogy a memóriából, állományleíróból satöbbibõl és megállásra nem kényszerül. Az inetd (lásd <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>) számos lehetõséget kínál fel ennek megakadályozására. Ezzel kapcsolatban szeretnénk megjegyezni, hogy bár ezzel el tudjuk kerülni a gépünk leállását, semmilyen garanciát nem ad arra, hogy a szolgáltatás a támadás során is zavartalanul üzemel tovább. Alaposan olvassuk el az inetd man oldalát és legyünk különös tekintettel a <code>-c</code>, <code>-C</code> és <code>-R</code> kapcsolóira. Vigyázzunk, hogy az inetd <code>-C</code> kapcsolóját képesek kijátszani az álcázott IP-vel érkezõ támadások, ezért inkább az elõbbi kapcsolók valamilyen kombinációja az ajánlott. Egyes szerverprogramoknál be lehet állítani a példányainak maximális számát.</p></div><div class=paragraph><p>A Sendmail rendelkezik egy <code>-OMaxDaemonChildren</code> beállítással, ami a terhelésben levõ késleltetése miatt néha mintha jobban beválna, mint a Sendmail terheléskorlátozó paraméterei. A Sendmail indításakor tehát a <code>MaxDaemonChildren</code> paramétert javasolt megadni egy olyan értékkel, amely elegendõ a Sendmail számára betervezett terhelés kiszolgálására, de még kevés ahhoz, hogy a Sendmail fûbe harapjon tõle. Továbbá bölcs dolog a Sendmailt várakozási sorral (<code>-ODeliveryMode=queued</code>) és démonként (<code>sendmail -bd</code>), külön feldolgozási menetekkel (<code>sendmail -q15m</code>) futtatni. Ha továbbra is valós idejû kézbesítést akarunk, akkor a feldolgozást kisebb idõközökkel is lefuttathatjuk (például <code>-q1m</code>), de arra <em>mindig ügyeljünk</em>, hogy a <code>MaxDaemonChildren</code> beállítása ne okozzon kaszkádosítási hibákat a Sendmail mûködésében.</p></div><div class=paragraph><p>A Syslogd közvetlenül is támadható, ezért határozottan javasoljuk a <code>-s</code> használatát, amikor csak lehet, minden más esetben pedig a <code>-a</code> beállítást.</p></div><div class=paragraph><p>Fordítsunk kellõ figyelmet a TCP kapcsolatok burkolását végzõ TCP Wrapper"reverse-ident" lehetõségére, ami szintén közvetlenül támadható. Ebbõl az okból kifolyólag valószínûleg nem is akarjuk a TCP Wrapper által felkínált reverse-ident-et használni.</p></div><div class=paragraph><p>Jól járunk el abban az esetben, ha a belsõ szolgáltatásainkat az útválasztóink mentén tûzfal segítségével védjük meg a külsõ hozzáféréstõl. Ezzel lényegében a helyi hálózatunkat kívülrõl fenyegetõ támadások ellen védekezünk, de ez nem nyújt elegendõ védelmet a belsõ szolgáltatásaink esetén a <code>root</code> hozzáférés megszerzésére irányuló kísérletek ellen. Mindig egy exkluzív, tehát zárt tûzfalat állítsunk be, vagyis "tûzfalazzunk mindent <em>kivéve</em> az A, B, C, D és M-Z portokat". Ezen a módon ki tudjuk szûrni az összes alacsonyabb portot, kivéve bizonyos eseteket, mint például a named (ha az adott zónában ez az elsõdleges gép), ntalkd, sendmail vagy más interneten keresztül elérhetõ szolgáltatásokat. Ha másképpen állítjuk a tûzfalat - inkluzív, nyílt avagy megengedõ módon, akkor jó eséllyel elfelejtünk "lezárni" egy csomó szolgáltatást, vagy úgy adunk hozzá egy új belsõ szolgáltatást, hogy közben elfelejtjük frissíteni a tûzfalat. Ennél még azon is jobb, ha a tûzfalon nyitunk egy magasabb portszámú tartományt, és ott valósítjuk meg ezt a megengedõ jellegû mûködést, az alacsonyabb portok veszélybe sodrása nélkül. Vegyük azt is számításba, hogy a FreeBSD-ben a kiosztott portokat dinamikusan állíthatjuk a <code>net.inet.ip.portrange</code> sysctl változókon keresztül (<code>sysctl -a | fgrep portrange</code>), ami nagyságrendekkel megkönnyíti a tûzfal beállítását. Ennek megfelelõen például meg tudjuk adni, hogy a 4000-tõl 5000-ig terjedõ porttartomány a 49152-tõl 65535-ig húzódó tartományba kerüljön át, majd a 4000 alatti összes portot blokkoljuk (természetesen az internetrõl szándékosan hozzáférhetõ portok kivételével).</p></div><div class=paragraph><p>A DoS támadások másik elterjedt fajtája az ún. "ugródeszka támadás" - ilyenkor a szervert úgy próbálják túlterhelni, hogy folyamatosan válaszokat kérnek tõle a helyi hálózatról vagy egy másik számítógéprõl. Az ilyen természetû támadások közül is a legnépszerûbb az <em>ICMP pingszórásos támadás</em>. A támadó olyan ping csomagokat küld szét a helyi hálózaton, amelyek forrásának azt a gépet jelöli meg, amelyiket meg akarja támadni. Ha a hálózatokat elválasztó útválasztók nem fogják meg a pingszórást, akkor a helyi hálózatról összes gépe nekilát válaszolgatni a meghamisított forrás címére, amivel így teljesen leterhelik az áldozatot. Ez különösen akkor hatásos, amikor a támadó ugyanezt a trükköt eljátssza egyszerre több tucat különbözõ hálózatban is. Az üzenetszórással járó támadások akár százhúsz megabitnyi forgalmat is képesek generálni másodpercenként. A második legelterjedtebb ugródeszkás támadás az ICMP hiba-visszajelzési rendszere ellen irányul. Ilyenkor a támadó ICMP hibaüzeneteket kiváltó csomagok készítésével képes eltömíteni egy szerver bejövõ hálózati kapcsolatát és az ICMP válaszokkal pedig a szerver maga dugítja el a kimenõ hálózati kapcsolatát. Ez a fajtájú támadás képes kinyomni az összes memóriát a szerverbõl és ezzel összeomlasztani, különösen olyankor, amikor a szerver nem tudja elég gyorsan elnyelni az általa generált ICMP válaszokat. A <code>net.inet.icmp.icmplim</code> sysctl változóval tudunk gátat szabni a támadások ezen fajtájának. Az ugródeszkás támadások utolsó nagyobb osztálya az inetd olyan szolgáltatásait szemeli ki, mint például az udp echo. A támadó ilyenkor egyszerûen küld a helyi hálózatunkon található A és B szerverünknek egy olyan UDP csomagot, ahol forrásként az A szerver echo portját adja meg, célnak pedig a B szerver echo portját. Ezután a két szerver elkezdi egymás között passzolgatni ezt az egyetlen csomagot. A támadó még több ilyen csomag befecskendezésével pillanatok alatt képes leterhelni a két szervert és helyi hálózatot. Hasonló problémák vannak a belsõ chargen portjával is. Egy hozzáértõ rendszergazda ezért kikapcsolja az összes ilyen inetd-alapú belsõ tesztelõ szolgáltatást.</p></div><div class=paragraph><p>Az álcázott csomagok felhasználhatóak a rendszermag útválasztó gyorsítótárának túlterhelésére is. Ezzel kapcsolatban nézzük meg a <code>net.inet.ip.rtexpire</code>, <code>rtminexpire</code> és <code>rtmaxcache</code> sysctl változókat. A véletlenszerû IP-címekkel megcímzett álcázott csomagok hatására a rendszermag létrehoz mindegyikõjükhöz egy ideiglenesen pufferelt utat az útválasztó táblázatában, amelyet a <code>netstat -rna | fgrep W3</code> paranccsal tudunk lekérdezni. Az ilyen útvonalak nagyjából 1600 másodperc múlva elévülnek. Ha a rendszermag észleli, hogy a gyorsítótárazott útválasztási táblázat mérete túlságosan megnövekedett, akkor automatikusan csökkenti az <code>rtexpire</code> értékét, de soha nem megy a <code>rtminexpire</code> alá. Ebbõl két probléma adódik:</p></div><div class="olist arabic"><ol class=arabic><li><p>A rendszermag nem reagál elég gyorsan amikor egy alig terhelt szervert hirtelen megtámadnak.</p></li><li><p>Az <code>rtminexpire</code> nem elég kicsi ahhoz, hogy a rendszermag túléljen egy tartósabb rohamot.</p></li></ol></div><div class=paragraph><p>Ha a szervereink az internethez T3 (kb. 45 Mbit/s) vagy gyorsabb összeköttetésen keresztül csatlakoznak, akkor határozottan javasolt kézileg behangolni a <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> segítségével az <code>rtexpire</code> és az <code>rtminexpire</code> értékeket. Soha ne állítsuk egyiket sem nullára (hacsak nem akarjuk összeomlasztani a gépünket). Ha például mind a kettõt 2 másodpercre állítjuk, akkor az többnyire elegendõ az útválasztási táblázat megvédéséhez.</p></div></div><div class=sect2><h3 id=_hozzáférés_kerberosszal_és_ssh_val>14.3.9. Hozzáférés Kerberosszal és SSH-val<a class=anchor href=#_hozzáférés_kerberosszal_és_ssh_val></a></h3><div class=paragraph><p>Van néhány dolog, amit a Kerberos és az ssh esetén ajánlatos tisztázni, mielõtt használjuk ezeket. A Kerberos 5 egy kifogástalan hitelesítési protokoll. A telnet és rlogin Kerberos által módosított változatában vannak olyan hibák, amelyek alkalmatlanná teszik ezeket a bináris adatfolyamok helyes kezelésére. Sõt, alapértelmezés szerint a Kerberos nem titkosítja a kapcsolatot, csak ha megadjuk neki a <code>-x</code> kapcsolót. Az ssh alapértelmezés szerint mindent titkosít.</p></div><div class=paragraph><p>Az ssh minden szempontból nagyon jól teljesít kivéve, hogy alapértelmezés szerint átküldi a kulcsokat is. Ez azt jelenti, hogy ha van egy olyan biztonságos munkaállomásunk, ahol a rendszer többi részéhez tartozó kulcsainkat tartjuk és egy nem biztonságos gépre akarunk vele ssh-n keresztül belépni, akkor a kulcsaink használatóvá válnak. A tényleges kulcsokat ugyan nem látja senki, de a bejelentkezés során az ssh megnyit egy közvetítéshez használt portot, amit a nem biztonságos gépen a támadó egy feltört <code>root</code> hozzáférés birtokában ki tud használni úgy, hogy a kulcsaink segítségével hozzá tudjon férni egy másik olyan géphez, amelyet a kulcsok nyitnak.</p></div><div class=paragraph><p>Ha lehetséges, akkor a személyzet bejelentkeztetéséhez az ssh-t és Kerberost együttesen használjuk. Az ssh lefordíható Kerberos támogatással. Ezzel csökkentjük a potenciálisan kiszivárgó ssh kulcsok esélyét, miközben jelszavainkat a Kerberosszal védjük. Az ssh kulcsokat csak biztonságos gépekrõl és csak automatizált feladatok esetén használjuk (amire a Kerberos lényegében nem alkalmas). Emellett javasoljuk azt is, hogy az ssh beállításai között tiltsuk le a kulcsok átküldését (key forwarding) vagy használjuk az <code>from=IP/DOMAIN</code> opciót, amivel az ssh csak a megadott gépekrõl engedi az <span class=filename>authorized_keys</span> állomány és a így benne levõ kulcsok használatát.</p></div></div></div></div><div class=sect1><h2 id=crypt>14.4. DES, Blowfish, MD5 és a Crypt<a class=anchor href=#crypt></a></h2><div class=sectionbody><div class=paragraph><p>Minden UNIX® rendszer használójához tartozik egy jelszó is a hozzáféréséhez. Teljesen nyilvánvalónak tûnik, hogy ezt a jelszót csak az adott felhasználó és az adott operációs rendszer ismeri. A jelszavakat a titokban tartásukhoz ún. "csapóajtó függvényekkel" titkosítják, amelyeket könnyû titkosítani, ám nehéz visszafejteni. Tehát amit egy perccel ezelõtt még nyilvalónak tituláltunk, az mostanra már nem is teljesen igaz: <em>valójában</em> az operációs rendszer sem ismeri a jelszót. Az operációs rendszer csak a jelszó <em>titkosított</em> változatát ismeri. A jelszó "titkosítatlan" formáját csak nyers erõ igényebevételével tudjuk megkeresni az összes lehetséges jelszó szénakazlában.</p></div><div class=paragraph><p>Sajnos, annak idején, amikor a jelszavak titkosítása bekerült a UNIX®-ba, egyedül a DES, vagy más néven a Data Encryption Standard (Adattitkosítási szabvány) jött szóba. Ez alapvetõen nem jelentett problémát az Egyesült Államok állampolgárai számára, de mivel a DES forráskódját nem lehetett kivinni az Egyesült Államokból, a FreeBSD-nek találnia kellett valami olyasmit, ami mind megfelel az Egyesült Államok törvényeinek, mind pedig kompatibilis marad az összes többi DES-t használó UNIX® variánssal.</p></div><div class=paragraph><p>Ezt úgy oldották meg, hogy felosztották a titkosítással foglalkozó függvénykönyvtárakat, így az Egyesült Államokban élõ felhasználók tudtak DES könyvtárakat telepíteni és használni, miközben a többi nemzet felhasználói olyan más titkosítási módszert tudtak választani, amit kinn is lehetett alkalmazni. Ennek tulajdonítható, hogy a FreeBSD alapértelmezés szerint az MD5 segítségével titkosít. Az MD5-öt a DES-nél sokkalta biztonságosabbnak tartják, ezért a DES telepítésének lehetõségét leginkább csak kompatibilitási okokból ajánlották fel.</p></div><div class=sect2><h3 id=_a_titkosítási_mechanizmus_azonosítása>14.4.1. A titkosítási mechanizmus azonosítása<a class=anchor href=#_a_titkosítási_mechanizmus_azonosítása></a></h3><div class=paragraph><p>Jelenleg a könyvtár ismeri a DES, MD5 és Blowfish függvényeit. A FreeBSD a jelszavak titkosításához alapból az MD5-öt használja.</p></div><div class=paragraph><p>Nagyon könnyen meg tudjuk mondani, hogy a FreeBSD éppen melyik titkosítási módszert alkalmazza. Ennek egyik lehetõsége, ha az <span class=filename>/etc/master.passwd</span> állományt vizsgáljuk meg. Az MD5 függvényével titkosított jelszavak hosszabbak, mint a DES függvényével titkosítottak és a <code>$1$</code> karakterekkel kezdõdnek. A <code>$2a$</code> karakterekkel kezdõdõ jelszavakat Blowfish-sel titkosították. A DES kódolású jelszavaknak nincs semmilyen különleges ismertetõjelük, de általánosságban elmondható róluk, hogy rövidebbek az MD5 jelszavaknál és olyan 64 karakteres ábécével kódolják ezeket, amelyek nem tartalmazzák a <code>$</code> karaktert, így tehát a viszonylag rövid, nem dollárjellel kezdõdõ karakterláncok minden bizonnyal DES kódolású jelszavak.</p></div><div class=paragraph><p>Az új jelszavak kódolásához használt formátumot az <span class=filename>/etc/login.conf</span> állományban tárolt <code>passwd_format</code> bejelentkezési tulajdonság adja meg, amelynek értékei <code>des</code>, <code>md5</code> vagy <code>blf</code> lehetnek. A <a href="https://man.freebsd.org/cgi/man.cgi?query=login.conf&amp;sektion=5&amp;format=html">login.conf(5)</a> man oldalon tájékozódhatunk bõvebben a bejelentkezési tulajdonságokról.</p></div></div></div></div><div class=sect1><h2 id=one-time-passwords>14.5. Egyszeri jelszavak<a class=anchor href=#one-time-passwords></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD alapértelmezés szerint támogatja az OPIE-t (One-time Passwords In Everything, azaz "Egyszeri jelszavak mindenben"), ami alapból az MD5 függvényét használja.</p></div><div class=paragraph><p>A jelszavak három fajtáját fogjuk a továbbiakban tárgyalni. Az elsõ a megszokott UNIX® stílusú avagy Kerberos jelszó. Ezt a továbbiakban "UNIX® jelszónak" nevezzük. A második fajtában az OPIE <a href="https://man.freebsd.org/cgi/man.cgi?query=opiekey&amp;sektion=1&amp;format=html">opiekey(1)</a> nevû segédprogramja által generált és a bejelentkezésnél a <a href="https://man.freebsd.org/cgi/man.cgi?query=opiepasswd&amp;sektion=1&amp;format=html">opiepasswd(1)</a> által elfogadott jelszavak tartoznak. Ezeket "egyszeri jelszavaknak" fogjuk nevezni. A jelszavak utolsó típusa az a titkos jelszó, amit az <code>opiekey</code> programnak (és néha a <code>opiepasswd</code> programnak) adunk meg, ami ebbõl egyszer használatos jelszavakat állít elõ. Ezt innentõl "titkos jelszónak" vagy csak egyszerûen "jelszónak" hívjuk.</p></div><div class=paragraph><p>A titkos jelszónak semmi köze sincs a UNIX® jelszavunkhoz. Természetesen megegyezhetnek, de ezt nem ajánljuk. Az OPIE által használt titkos jelszavaknak nem kell a régi UNIX® jelszavakhoz hasonlóan legfeljebb 8 karakteresnek lenniük , bármekkorát használhatunk. A hat vagy hét szóból álló jelszavak ilyenkor igen gyakoriak. Az OPIE jobbára a UNIX® jelszórendszerétõl teljesen függetlenül mûködik.</p></div><div class=paragraph><p>A jelszavak mellett két másik fajta adat fontos az OPIE számára. Közülük az egyiket "magnak" vagy "kulcsnak" nevezik, ami két betûbõl és öt számjegybõl áll. A másik az "iterációk száma", ami egy 1 és 100 közötti számot takar. Az OPIE úgy hozza létre az egyszeri jelszavakat, hogy egymás után fûzi a magot és a titkos jelszót, majd az iterációk megadott számának megfelelõ mennyiségben kiszámolja rá az MD5 függvény értékét és az eredményt hat rövid angol szóba önti. Ez a hat angol szó lesz a mi egyszeri jelszavunk. A hitelesítéssel foglalkozó rendszer (elsõsorban a PAM) figyelemmel kíséri a legutoljára használt egyszeri jelszavunkat, és csak akkor engedi a felhasználót hitelesíteni, ha az általa megadott jelszó kódolt változata megegyezik az elõzõleg megadott jelszaváéval. A csapóajtó függvények használata miatt lehetetlen legenerálni a következõ egyszeri jelszót, ha a sikerült megszereznünk az egyiket. Az iterációk száma minden egyes sikeres bejelentkezés után csökken eggyel, amivel a felhasználót és a bejelentkeztetõ programot szinkronban tartja. Amikor így az iterációk száma eléri az egyet, az OPIE-t újra kell inicializálni.</p></div><div class=paragraph><p>Az említésre kerülõ rendszerek mindegyikéhez tartozik néhány program. Az <code>opiekey</code> bekéri az iterációk számát, a magot és a titkos jelszót, majd elõállít egy egyszer használatos jelszót vagy azok folytonos listáját. Az <code>opiepasswd</code> az OPIE inicializálásért, a jelszavak, az iterációk számának és a mag megváltoztatásáért felelõs. Egyaránt elfogad titkos jelmondatot, iterációs számot vagy magot és egy egyszeri jelszót. Az <code>opieinfo</code> megvizsgálja a felhasználókra vonatkozó adatbázist (<span class=filename>/etc/opiekeys</span>) és kiírja az adott felhasználó által használt iterációs számot és magot.</p></div><div class=paragraph><p>Négyféle különbözõ mûveletrõl fogunk most itt beszélni. Az elsõben egy biztonságos kapcsolaton keresztül elsõként inicializáljuk az egyszeri jelszavakat, vagy megváltoztatjuk a jelszót vagy a magot az <code>opiepasswd</code> segítségével. A második mûveletben ugyanarra adjuk ki az <code>opiepasswd</code> parancsot egy nem biztonságos kapcsolaton keresztül az <code>opiekey</code> paranccsal együtt egy biztonságos kapcsolaton keresztül. A harmadikban az <code>opiekey</code> használatával nem biztonságos kapcsolaton keresztül jelentkezünk be. A negyedikben az <code>opiekey</code> paranccsal létrehozunk egy adott mennyiségû kulcsot, amelyeket aztán leírhatunk vagy kinyomtathatunk, hogy magunkkal tudjuk vinni olyan helyre, ahonnan nem tudnk biztonságos módon csatlakozni.</p></div><div class=sect2><h3 id=_inicializálás_biztonságos_kapcsolattal>14.5.1. Inicializálás biztonságos kapcsolattal<a class=anchor href=#_inicializálás_biztonságos_kapcsolattal></a></h3><div class=paragraph><p>Az OPIE elsõ inicializálásához adjuk ki az <code>opiepasswd</code> parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiepasswd <span class=nt>-c</span>
<span class=o>[</span>grimreaper] ~ <span class=nv>$ </span>opiepasswd <span class=nt>-f</span> <span class=nt>-c</span>
Adding unfurl:
Only use this method from the console<span class=p>;</span> NEVER from remote. If you are using
telnet, xterm, or a dial-in, <span class=nb>type</span> ^C now or <span class=nb>exit </span>with no password.
Then run opiepasswd without the <span class=nt>-c</span> parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:
ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED</code></pre></div></div><div class=paragraph><p>A figyelmeztetés fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Ezt a módszert csak konzolról alkalmazzuk, SOHA ne távoli kapcsolaton
keresztül!  Ha telnetet, xtermet vagy betárcsázós kapcsolatot használunk, akkor
azonnal nyomjunk ^C-t vagy ne adjunk meg jelszót.</code></pre></div></div><div class=paragraph><p>Az <code>Enter new secret pass phrase:</code> vagy <code>Enter secret password:</code> kérdések után adjunk meg egy jelmondatot, illetve jelszót. Ne felejtsük el, hogy ez nem bejelentkezéshez használt jelszó lesz, hanem ebbõl jönnek majd létre az egyszeri kulcsaink. Az "ID" sor adja meg az aktuális példányunk paramétereit: a bejelentkezéshez használt nevünket, az iterációk számát és a magot. Amikor a bejelentkezések során a rendszer emlékszik a paraméterekre és megjeleníti ezeket, nem kell megjegyeznünk. Az utolsó sor adja meg a paramétereinknek és a titkos jelszavunknak megfelelõ egyszeri jelszót. Ha most azonnal akarnánk bejelentkezni, akkor ezt az egyszeri jelszót kellene hozzá használnunk.</p></div></div><div class=sect2><h3 id=_inicializálás_nem_biztonságos_kapcsolattal>14.5.2. Inicializálás nem biztonságos kapcsolattal<a class=anchor href=#_inicializálás_nem_biztonságos_kapcsolattal></a></h3><div class=paragraph><p>Ha egy nem biztonságos kapcsolaton keresztül akarjuk inicializálni vagy megváltoztatni a jelszavunkat, akkor szükségünk lesz valahol egy megbízható kapcsolatra, ahol le tudjuk futtatni az <code>opiekey</code> parancsot. Ez lehet egy számunkra biztonsági szempontból elfogadható gép parancssora. Emellett ki kell találnunk egy iterációs számot (erre a 100 egy jó választás) és adnunk egy magot vagy használni egy véletlenszerûen generáltat. Az inicializálás színtere felé vezetõ nem biztonságos kapcsolaton keresztül adjuk ki az <code>opiepasswd</code> parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiepasswd

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY</code></pre></div></div><div class=paragraph><p>Az alapértelmezett mag elfogadásához nyomjuk le a <kbd>Return</kbd> billentyût. Mielõtt megadnánk a hozzáférés jelszavát, menjünk át a biztonságos kapcsolatra és adjuk meg neki ugyanezeket a paramétereket:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey 498 to4268
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</span></code></pre></div></div><div class=paragraph><p>Most váltsunk vissza a nem biztonságos kapcsolatra és másoljuk be az így generált egyszeri jelszót a megfelelõ programba.</p></div></div><div class=sect2><h3 id=_egyetlen_egyszeri_jelszó_létrehozása>14.5.3. Egyetlen egyszeri jelszó létrehozása<a class=anchor href=#_egyetlen_egyszeri_jelszó_létrehozása></a></h3><div class=paragraph><p>Miután sikeresen inicializáltuk az OPIE-t és bejelentkezünk, a következõket láthatjuk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% telnet example.com
Trying 10.0.0.1...
Connected to example.com
Escape character is <span class=s1>&#39;^]&#39;</span><span class=nb>.</span>

FreeBSD/i386 <span class=o>(</span>example.com<span class=o>)</span> <span class=o>(</span>ttypa<span class=o>)</span>

login: felhasználói_név
otp-md5 498 gr4269 ext
Password:</code></pre></div></div><div class=paragraph><p>Mellékesen megjegyezzük, hogy az OPIE paranccsorának van egy (itt nem látható) hasznos képessége: ha <kbd>Return</kbd> billentyût nyomunk a jelszó bekérésekor, akkor a program megmutatja a begépelt betûket, így láthatjuk pontosan mit is írunk be. Ez nagyon kényelmes lehet olyankor, amikor valahonnan, például egy lapról olvassuk a jelszót.</p></div><div class=paragraph><p>A bejelentkezéshez ekkor le kell valahogy generálnunk az egyszeri jelszavunkat. Ezt egy megbízható rendszeresen tudjuk megtenni az <code>opiekey</code> lefuttatásával. (Ennek vannak DOS-os, Windows®-os és Mac OS®-es változatai is.) Paraméterként az iterációs számot és a magot kell megadnunk. Ezt akár közvetlenül át is másolhatjuk annak a gépnek a bejelentkezési képernyõjérõl, ahova be akarunk jelentkezni.</p></div><div class=paragraph><p>A megbízható rendszeren tehát:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey 498 to4268
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</span></code></pre></div></div><div class=paragraph><p>Most már megvan a bejelentkezéshez szükséges egyszeri jelszavunk.</p></div></div><div class=sect2><h3 id=_több_egyszeri_jelszó_létrehozása>14.5.4. Több egyszeri jelszó létrehozása<a class=anchor href=#_több_egyszeri_jelszó_létrehozása></a></h3><div class=paragraph><p>Néha olyan helyekre kell mennünk, ahol se egy megbízható gép, sem pedig biztonságos kapcsolat nem található. Ilyen esetekben megadhatjuk az <code>opiekey</code> parancsnak, hogy elõre gyártson le több egyszer használatos jelszót, amit késõbb aztán ki tudunk nyomtatni. Például:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% opiekey <span class=nt>-n</span> 5 30 zz99999
Using the MD5 algorithm to compute response.
Reminder: Don<span class=s1>&#39;t use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: &lt;secret password&gt;
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</span></code></pre></div></div><div class=paragraph><p>Az <code>-n 5</code> öt kulcsot kér egymás után, a <code>30</code> pedig megadja az utolsó iterációs számot. Vegyük észre, hogy a kulcsokat a felhasználás sorrendjével <em>ellentétes</em> sorrendben írja ki a program. Ha igazán paranoiások vagyunk, akkor írjuk le kézzel a jelszavakat. Ha viszont annyira nem, akkor egyszerûen küldjük át ezeket az <code>lpr</code> parancsnak. Megfigyelhetjük, hogy minden sorban látható az iterációs szám és a hozzá tartozó egyszeri jelszó. Hasznos lehet a felhasználás szerinti felírni a jelszavakat.</p></div></div><div class=sect2><h3 id=_a_unix_jelszavak_használatának_leszûkítése>14.5.5. A UNIX® jelszavak használatának leszûkítése<a class=anchor href=#_a_unix_jelszavak_használatának_leszûkítése></a></h3><div class=paragraph><p>Az OPIE képes a bejelentkezéshez használt IP-címek alapján leszûkíteni a UNIX® jelszavak használatát. Ehhez az <span class=filename>/etc/opieaccess</span> használható, amely alapból megtalálható a rendszerünkön. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=opieaccess&amp;sektion=5&amp;format=html">opieaccess(5)</a> man oldalán találhatjuk meg a rá vonatkozó információkat és az összes vele kapcsolatos biztonsági megfontolást.</p></div><div class=paragraph><p>Íme egy példa az <span class=filename>opieaccess</span> állományra:</p></div><div class="literalblock programlisting"><div class=content><pre>permit 192.168.0.0 255.255.0.0</pre></div></div><div class=paragraph><p>Ezzel a sorral megengedjük a UNIX® jelszavak használatát minden olyan felhasználó számára, akinek az IP-je illeszkedik a megadott címre és maszkra (ez viszont álcázással kijátszható).</p></div><div class=paragraph><p>Ha az <span class=filename>opieaccess</span> állományból egyetlen szabály sem illeszkedik, akkor alapértelmezés szerint nem engedélyezettek a nem OPIE típusú jelszavak.</p></div></div></div></div><div class=sect1><h2 id=tcpwrappers>14.6. A TCP kapcsolatok burkolása<a class=anchor href=#tcpwrappers></a></h2><div class=sectionbody><div class=paragraph><p>Aki ismeri az <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> programot, az már biztosan hallott a TCP kapcsolatok burkolásáról, eredeti nevén a a TCP wrapperekrõl. Azonban csak kevesek képesek felfogni ezek valódi hasznát. Úgy néz ki, mindenki csak tûzfalakon keresztül akarja megoldani a hálózati kapcsolatot kezelését. Habár a tûzfalakat sok mindenre fel lehet ugyan használni, egyetlen tûzfal nem képes például szövegesen válaszolni a kapcsolatok kezdeményezõinek. Ellenben bármelyik TCP-wrapper szoftver képes erre, sõt még többre is. A következõ néhány szakaszban szemügyre vesszük a TCP wrapperek számos lehetõségét, és ahol lehetséges, ott konfigurációs állományokkal is illusztráljuk ezek használatát.</p></div><div class=paragraph><p>A TCP burkoló szoftverek kiterjesztik az inetd képességeit minden alatta dolgozó szerverdémon támogatására. Ezzel a módszerrel meg lehet oldani a naplózást, üzenetek küldését a kapcsolatokhoz, a démonok elérhetõségének korlátozását stb. Noha ezen lehetõségek közül néhány tûzfallal is megvalósítható, ezzel nem csupán egy további védelmi réteget húzunk fel a rendszerünk köré, hanem túllépjük mindazt, amit egy tûzfallal irányítani lehet.</p></div><div class=paragraph><p>A TCP burkolók használatával hozzáadott funkcionalitás azonban nem helyettesít egy jó tûzfalat. A TCP kapcsolatok burkolását tûzfallal vagy más egyéb biztonsági megoldással együtt tudjuk csak eredményesen használni, viszont a rendszerünk biztonságában egy újabb remek védelmi vonalat képvisel.</p></div><div class=paragraph><p>Mivel lényegében ez az inetd beállításának kibõvítése, ezért a szakasz elolvasásához feltételezzük az <a href=../network-servers/#network-inetd>inetd beállításával</a> kapcsolatos tudnivalók ismeretét.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Bár az <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> által indított programok nem egészen tekinthetõen "démonoknak", hagyományosan démonnak hívják ezeket. Ezért rájuk ebben a szakaszban is ezt a kifejezést használjuk.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=_kezdeti_beállítások>14.6.1. Kezdeti beállítások<a class=anchor href=#_kezdeti_beállítások></a></h3><div class=paragraph><p>FreeBSD alatt a TCP burkolók használatának egyetlen feltétele csupán annyi, hogy az inetd parancsot a <code>-Ww</code> paraméterrel indítsuk az <span class=filename>rc.conf</span> állományból. Az egyébként az alapbeállítás. Természetesen nem árt, ha helyesen állítjuk be az <span class=filename>/etc/hosts.allow</span> állományt is, ellenkezõ esetben a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> egyébként dobálni fogja errõl az üzeneteket.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Eltérõen a TCP burkolók egyéb implementációitól, a <span class=filename>hosts.deny</span> állományt itt már nem használjuk. Minden beállítást az <span class=filename>/etc/host.allow</span> állományba kell raknunk.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A legegyszerûbb konfiguráció esetén a démonok kapcsolódását egyszerûen engedélyezhetjük vagy letilthatjuk az <span class=filename>/etc/hosts.allow</span> állományban szereplõ beállításokkal. A FreeBSD alapértelmezett beállításai szerint minden inetd által indított démonhoz lehet kapcsolódni. Ennek megváltoztatásával az alapkonfiguráció áttekintése után foglalkozunk.</p></div><div class=paragraph><p>Az alapkonfiguráció általában <code>démon : cím : cselekvés</code> alakú. Itt a <code>démon</code> egy olyan démonra utal, amelyet az <code>inetd</code> indított el. A <code>cím</code> egy érvényes hálózati név, IP-cím vagy szögletes zárójelek ([ ]) között megadott IPv6 formátumú cím. A cselekvést tartalmazó mezõ (<code>action</code>) lehet <code>allow</code> vagy <code>deny</code> annak megfelelõen, hogy engedélyezzük vagy tiltjuk a megadott címrõl a csatlakozást. Nem szabad elfelejtenünk, hogy az így megadott beállítások közül mindig az elsõként illeszkedõ érvényesül, ami arra utal, hogy a konfigurációs állományban szereplõ szabályok egymás után növekvõ sorrendben értékelõdnek ki. Ha valamelyikük illeszkedik, akkor a keresés megáll.</p></div><div class=paragraph><p>Rengeteg egyéb opció is megadható még, de ezekrõl csak a késõbbi szakaszokban fogunk szólni. Egy egyszerû konfigurációs állomány már ennyi információból is könnyedén összeállítható. Például, ha engedélyezni szeretnénk a POP3 kapcsolatokat a <a class=package href=https://cgit.freebsd.org/ports/tree/mail/qpopper/>mail/qpopper</a> démonon keresztül, akkor a következõ sorral kell kiegészítenünk a <span class=filename>hosts.allow</span> állományt:</p></div><div class="literalblock programlisting"><div class=content><pre># Ez a sor kell a POP3 kapcsolatokhoz:
qpopper : ALL : allow</pre></div></div><div class=paragraph><p>Miután hozzáadtuk ezt a sort, az inetd szervert újra kell indítanunk. Ezt vagy a <a href="https://man.freebsd.org/cgi/man.cgi?query=kill&amp;sektion=1&amp;format=html">kill(1)</a> paranccsal, vagy pedig az <span class=filename>/etc/rc.d/inetd</span> szkript <span class=parameter>restart</span> paraméterével tehetjük meg.</p></div></div><div class=sect2><h3 id=_komolyabb_beállítások>14.6.2. Komolyabb beállítások<a class=anchor href=#_komolyabb_beállítások></a></h3><div class=paragraph><p>A TCP kapcsolatok burkolásánál is meg lehet adni további opciókat. Segítségükkel még jobban irányítani tudjuk a kapcsolatok kezelésének módját. Néhány esetben az is hasznos lehet, ha küldünk valamilyen választ az egyes gépeknek vagy démonoknak. Máskor szükségünk lehet a csatlakozások naplózására vagy e-mailen keresztüli jelzésére a rendszergazda felé. Teljesen más helyezetekben csak a helyi hálózatunkról engedjük meg a csatlakozást. Ez mind lehetséges a <code>helyettesítõ jelekként</code> ismert beállítási opciók, kiterjesztõ karakterek és külsõ parancsok végrehajtásának használatával. A következõ két szakasz az ilyen és ehhez hasonló szituációk megoldására íródott.</p></div><div class=sect3><h4 id=_külsõ_parancsok>14.6.2.1. Külsõ parancsok<a class=anchor href=#_külsõ_parancsok></a></h4><div class=paragraph><p>Tegyük fel, hogy olyan helyezetben vagyunk, amikor a kapcsolatot tiltani akarjuk, de közben azért szeretnénk errõl értesíteni a kapcsolatot kezdeményezõ felet is. Hogyan tudjuk ezt megcsinálni? Ezt a <code>twist</code> nevû opcióval tehetjük meg. Amikor megpróbál valaki csatlakozni, akkor a <code>twist</code> hívódik meg és végrehajt egy megadott parancsot vagy szkriptet. Erre találunk is egy példát a <span class=filename>hosts.allow</span> állományban:</p></div><div class="literalblock programlisting"><div class=content><pre># The rest of the daemons are protected.
ALL : ALL \
        : severity auth.info \
        : twist /bin/echo &#34;You are not welcome to use %d from %h.&#34;</pre></div></div><div class=paragraph><p>Ez a példa a következõ üzenetet jeleníti meg: "You are not allowd to use <code>a démon neve</code> from <code>hálózati név</code>." (Jelentése: "A <code>démon neve</code> démont nem érheti el a <code>hálózati név</code> helyrõl!") Ez minden olyan démon esetén megjelenik, amirõl nem nyilatkoztunk korábban az állományban. Ezzel nagyon könnyen vissza tudunk küldeni egy választ a kapcsolat kezdményezõje felé, miután a kapcsolatot eldobtuk. Vegyük észre, hogy a visszaküldendõ üzenetet <code>"</code> karakterek közé <em>kell</em> tennünk, ez alól semmi sem kivétel.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>DoS támadást lehet elõidézni azzal, ha egy támadó vagy támadók egy csoportja csatlakozási kérelmekkel kezdi el bombázni a démonainkat.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ilyen esetekben használhatjuk a <code>spawn</code> opciót is. A <code>spawn</code> a <code>twist</code> opcióhoz hasonlóan implicit módon tiltja a kapcsolódást és arra használható, hogy lefuttassunk vele egy parancsot vagy szkriptet. A <code>spawn</code> azonban a <code>twist</code> opciótól eltérõen nem küld vissza semmilyen választ a kapcsolatot létrehozni kívánó egyénnek. Ehhez példaként vegyük a következõ sort a konfigurációs állományban:</p></div><div class="literalblock programlisting"><div class=content><pre># We do not allow connections from example.com:
ALL : .example.com \
	: spawn (/bin/echo %a from %h attempted to access %d &gt;&gt; \
	  /var/log/connections.log) \
	: deny</pre></div></div><div class=paragraph><p>Ezzel a <code>*.example.com</code> címtartományból érkezõ összes kapcsolódási kísérlet sikertelen lesz, miközben ezzel egyidõben a <span class=filename>/var/log/connections.log</span> állományba rögzítjük a csatlakozni akaró egyén hálózati nevét, IP-címét és a démont.</p></div><div class=paragraph><p>A korábban már kifejtett helyettesítõ karakterek túl, mint például az <code>%a</code>, még léteznek továbbiak is. Róluk a <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a> man oldalon találhatjuk meg a teljes listát.</p></div></div><div class=sect3><h4 id=_helyettesítõ_jelek>14.6.2.2. Helyettesítõ jelek<a class=anchor href=#_helyettesítõ_jelek></a></h4><div class=paragraph><p>Az eddigi példákban folyamatosan csak az <code>ALL</code> opciót adtuk meg. Azonban rajta kívûl léteznek mások is, amivel a megoldás funkcionalitását még egy kicsivel tovább növelhetjük. Például az <code>ALL</code> használható egy démon, egy tartomány vagy egy IP-cím illesztésére. A másik ilyen helyettesítõ jel a <code>PARANOID</code>, amelyet olyan gépek IP-címének illesztésekor alkalmazhatunk, ami feltételezhetõen hamis. Más szóval a <code>PARANOID</code> olyan cselekvések megadását teszi lehetõvé, amelyek akkor hajtódnak végre, amikor a kapcsolatot létrehozó gép IP-címe eltér a hálózati nevétõl. A most következõ példa valószínûleg segít fényt deríteni ennek lényegére:</p></div><div class="literalblock programlisting"><div class=content><pre># Block possibly spoofed requests to sendmail:
sendmail : PARANOID : deny</pre></div></div><div class=paragraph><p>A példában minden olyan kapcsolatkérést elutasítunk, ami a <code>sendmail</code> felé a hálózati névtõl eltérõ IP-címrõl irányul.</p></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><i class="fa icon-caution" title=Caution></i></td><td class=content><div class=paragraph><p>Ha rossz DNS beállításokat használunk, a <code>PARANOID</code> megadásával súlyosan mozgásképtelenné tehetjük a kliensünket vagy szerverünket. Ezért legyünk óvatosak vele!</p></div></td></tr></tbody></table></div><div class=paragraph><p>A helyettesítõ jelekrõl és hozzájuk tartozó további lehetõségekrõl a <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a> man oldalon tájékozódhatunk.</p></div><div class=paragraph><p>A <span class=filename>hosts.allow</span> állományból ki kell venni az elsõ sort ahhoz, hogy bármilyen egyéb konfigurációs beállítás mûködõképes legyen. Ezt említettük a szakasz elején is.</p></div></div></div></div></div><div class=sect1><h2 id=kerberosIV>14.7. KerberosIV<a class=anchor href=#kerberosIV></a></h2><div class=sectionbody><div class=paragraph><p>A Kerberos egy olyan járulékos rendszer/protokoll, amellyel a felhasználók egy biztonságos szerver szolgáltatásain keresztül tudják hitelesíteni magukat. Ilyen szolgáltatás többek közt a távoli bejelentkezés, távoli másolás, a rendszeren belüli biztonságos másolás és minden olyan egyéb veszélyes feladat, amit számottevõen megbízhatóbbá és irányíthatóbbá tettek.</p></div><div class=paragraph><p>A következõ utasítások a FreeBSD-hez mellékelt Kerberos beállításához adnak útmutatást. A teljes leíráshoz azonban érdemes fellapoznunk a menet közben hivatkozott man oldalakat is.</p></div><div class=sect2><h3 id=_a_kerberosiv_telepítése>14.7.1. A KerberosIV telepítése<a class=anchor href=#_a_kerberosiv_telepítése></a></h3><div class=paragraph><p>A Kerberos a FreeBSD egyik választható komponense. Legkönnyebben úgy tudjuk feltelepíteni, ha a FreeBSD telepítése során a sysinstall programban kiválasztjuk a <code>krb4</code> vagy <code>krb5</code> terjesztések valamelyikét. Ezzel felrakhatjuk a Kerberos "eBones" (KerberosIV) vagy "Heimdal" (Kerberos5) elnevezésû változatait. A FreeBSD azért tartalmazza ezeket az implementációkat, mert nem az Amerikai Egyesült Államokban vagy Kanadában fejlesztették, így az Egyesült Államok titkosításokkal kapcsolatos kiviteli korlátozások korában minden olyan rendszer adminisztrátora el tudta érni, aki nem ezekben az országokban lakott.</p></div><div class=paragraph><p>A Kerberos MIT által fejlesztett implementációját egyébként a Portgyûjteménybõl a <a class=package href=https://cgit.freebsd.org/ports/tree/security/krb5/>security/krb5</a> porton keresztül érhetjük el.</p></div></div><div class=sect2><h3 id=_a_kezdeti_adatbázis_létrehozása>14.7.2. A kezdeti adatbázis létrehozása<a class=anchor href=#_a_kezdeti_adatbázis_létrehozása></a></h3><div class=paragraph><p>Ezt a lépést csak a Kerberos szerveren kell elvégezni. Elõször is gyõzõdjünk meg róla, hogy semmilyen korábbi Kerberos adatbázis nem található a gépen. Váltsunk az <span class=filename>/etc/kerberosIV</span> könyvtárra és ellenõrizzük a következõ állományok meglétét:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /etc/kerberosIV</span>
<span class=c># ls</span>
README		krb.conf        krb.realms</code></pre></div></div><div class=paragraph><p>Ha rajtuk kívül további állományok is feltûnnének (mint például a <span class=filename>principal.*</span> vagy <span class=filename>master_key</span>), akkor a <code>kdb_destroy</code> paranccsal pusztítsuk el a régi Kerberos adatbázist, vagy ha nem fut már a Kerberos, akkor egyszerûen csak törüljük le ezeket.</p></div><div class=paragraph><p>Ezután lássunk neki a <span class=filename>krb.conf</span> és <span class=filename>krb.realms</span> állományok átírásán keresztül a Kerberos egyes övezeteinek (realm) létrehozásához. Itt most az <code>EXAMPLE.COM</code> lesz a létrehozandó övezet, a hozzá tartozó szerver pedig a <code>grunt.example.com</code>. Így szerkesszük át vagy készítsünk el a neki megfelelõ <span class=filename>krb.conf</span> állományt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat krb.conf</span>
EXAMPLE.COM
EXAMPLE.COM grunt.example.com admin server
CS.BERKELEY.EDU okeeffe.berkeley.edu
ATHENA.MIT.EDU kerberos.mit.edu
ATHENA.MIT.EDU kerberos-1.mit.edu
ATHENA.MIT.EDU kerberos-2.mit.edu
ATHENA.MIT.EDU kerberos-3.mit.edu
LCS.MIT.EDU kerberos.lcs.mit.edu
TELECOM.MIT.EDU bitsy.mit.edu
ARC.NASA.GOV trident.arc.nasa.gov</code></pre></div></div><div class=paragraph><p>A többi övezetnek valójában nem feltétlenül kell itt lennie. Ezek csupán azért szerepelnek itt, hogy bemutassák miként lehet egyetlen géphez hozzárendelni egyszerre több övezetet is. Az egyszerûség kedvéért nyugodtan elhagyhatóak.</p></div><div class=paragraph><p>Az elsõ sor nevezi meg a rendszer által mûködtetett övezeteket. Az utána következõ sorokban övezeteket és hálózati neveket láthatunk. Itt az elsõ elem egy övezetet nevez meg, a második elem pedig az övezet "kulcselosztó központját" (key distribution center). A hálózati nevet követõ <code>admin server</code> kulcsszavak arra utalnak, hogy az adott gép adminisztratív szerepet ellátó adatbázist is tartalmaz. Ezeket a fogalmakat részleteiben a Kerberos man oldalain ismerhetjük meg.</p></div><div class=paragraph><p>Ezután hozzá kell adnunk a <code>grunt.example.com</code> nevû gépet az <code>EXAMPLE.COM</code> övezethez, valamint az <code>.example.com</code> tartományban levõ összes géphez létre kell hoznunk egy bejegyzést az <code>EXAMPLE.COM</code> övezetben. A <span class=filename>krb.realms</span> állományt ehhez a következõképpen kellene módosítanunk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat krb.realms</span>
grunt.example.com EXAMPLE.COM
.example.com EXAMPLE.COM
.berkeley.edu CS.BERKELEY.EDU
.MIT.EDU ATHENA.MIT.EDU
.mit.edu ATHENA.MIT.EDU</code></pre></div></div><div class=paragraph><p>Ismét hozzátesszük, hogy a többi övezetnek nem kötelezõ itt szerepelnie. Ezek csupán azt demonstrálják, hogy miként kell egy gépet egyszerre több övezethez is beállítani. Az átláthatóság kedvéért minden további nélkül eltávolíthatjuk ezeket.</p></div><div class=paragraph><p>Itt az elsõ sor az <em>adott</em> rendszert elhelyezi egy nevesített övezetbe. A többi sor azt mutatja meg, hogyan kell alapértelmezett módon a meghatározott altartományokba tartozó gépeket egy nevesített övezethez hozzárendelni.</p></div><div class=paragraph><p>Most már készen állunk az adatbázis létrehozására. Ehhez egyedül a Kerberos szerverét (avagy Kulcselosztó központját) kell elindítanunk. Adjuk ki a <code>kdb_init</code> parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_init</span>
Realm name <span class=o>[</span>default  ATHENA.MIT.EDU <span class=o>]</span>: EXAMPLE.COM
You will be prompted <span class=k>for </span>the database Master Password.
It is important that you NOT FORGET this password.

Enter Kerberos master key:</code></pre></div></div><div class=paragraph><p>Az üzenet fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Most az adatbázis mesterkulcsát kell megadni.  Fontos, hogy
NE FELEJTSÜK EL ezt a jelszót.</code></pre></div></div><div class=paragraph><p>Most el kell mentenünk a kulcsot, így a helyi gépen futó szerverek fel tudják szedni. Ehhez a <code>kstash</code> parancsra van szükségünk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kstash</span>

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered. BEWARE!</code></pre></div></div><div class=paragraph><p>Az üzenet fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>A Kerberos mesterkulcsának jelenlegi változata: 1.

VIGYÁZAT, megadták a mesterkulcsot!</code></pre></div></div><div class=paragraph><p>Ez elmenti a titkosított mesterkulcsot az <span class=filename>/etc/kerberosIV/master_key</span> állományba.</p></div></div><div class=sect2><h3 id=_az_egész_beüzemelése>14.7.3. Az egész beüzemelése<a class=anchor href=#_az_egész_beüzemelése></a></h3><div class=paragraph><p><em>Mindegyik</em> Kerberosszal õrzött rendszerrel kapcsolatban két ún. szereplõt (principal) kell még hozzátennünk az adatbázishoz. A nevük <code>kpasswd</code> és <code>rcmd</code>. Minden rendszerhez létre kell hoznunk ezeket a szereplõket, példányonként (instance) az egyes rendszerek neveivel.</p></div><div class=paragraph><p>A kpasswd és rcmd démonok teszik lehetõvé a többi rendszer számára, hogy megváltoztathassák a Kerberos jelszavukat, valamint hogy futtathassák az <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=rsh&amp;sektion=1&amp;format=html">rsh(1)</a> parancsokat.</p></div><div class=paragraph><p>Vegyük fel ezeket a bejegyzéseket is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_edit</span>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are <span class=k>in</span> <span class=o>[</span>brackets] ,
enter <span class=k>return </span>to leave the same, or new value.

Principal name: passwd
Instance: grunt

&lt;Not found&gt;, Create <span class=o>[</span>y] ? y

Principal: passwd, Instance: grunt, kdc_key_ver: 1
New Password:                    &lt;<span class=nt>----</span> írjuk be, hogy <span class=s2>&#34;RANDOM&#34;</span>
Verifying password

New Password: &lt;<span class=nt>----</span> írjuk be, hogy <span class=s2>&#34;RANDOM&#34;</span>

Random password <span class=o>[</span>y] ? y

Principal<span class=s1>&#39;s new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name: rcmd
Instance: grunt

&lt;Not found&gt;, Create [y] ?

Principal: rcmd, Instance: grunt, kdc_key_ver: 1
New Password:		&lt;---- írjuk be, hogy &#34;RANDOM&#34;
Verifying password

New Password:           &lt;---- írjuk be, hogy &#34;RANDOM&#34;

Random password [y] ?

Principal&#39;</span>s new key version <span class=o>=</span> 1
Expiration <span class=nb>date</span> <span class=o>(</span>enter yyyy-mm-dd<span class=o>)</span> <span class=o>[</span> 2000-01-01 <span class=o>]</span> ?
Max ticket lifetime <span class=o>(</span><span class=k>*</span>5 minutes<span class=o>)</span> <span class=o>[</span> 255 <span class=o>]</span> ?
Attributes <span class=o>[</span> 0 <span class=o>]</span> ?
Edit O.K.
Principal name:         &lt;<span class=nt>----</span> ha nem adunk meg semmit, akkor kilép</code></pre></div></div></div><div class=sect2><h3 id=_a_szerver_állomány_létrehozása>14.7.4. A szerver állomány létrehozása<a class=anchor href=#_a_szerver_állomány_létrehozása></a></h3><div class=paragraph><p>Most pedig kivonatolni kell azokat a példányokat, amelyek szolgáltatást definiálnak a gépen. Erre az <code>ext_srvtab</code> parancsot használjuk. Ennek eredményeképpen keletkezik egy állományt, amelyet <em>biztonságos eszközökkel</em> át kell másolni vagy át kell mozgatni az egyes Kerberos kliensek <span class=filename>/etc</span> könyvtárába. Ennek az állománynak egyaránt jelent kell lennie a szerveren és a kliensen is, nélküle a Kerberos mûködésképtelen.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ext_srvtab grunt</span>
Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered. BEWARE!
Generating <span class=s1>&#39;grunt-new-srvtab&#39;</span>....</code></pre></div></div><div class=paragraph><p>Ez a parancs most létrehozott egy ideiglenes állományt, amit át kell nevezni az <span class=filename>srvtab</span> névre, hogy megtalálhassák a szerverek. Az eredeti rendszeren a <a href="https://man.freebsd.org/cgi/man.cgi?query=mv&amp;sektion=1&amp;format=html">mv(1)</a> paranccsal tudjuk a helyére rakni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mv grunt-new-srvtab srvtab</span></code></pre></div></div><div class=paragraph><p>Ha egy kliensnek szánjuk az állományt és a hálozatunkat nem tekinthetjük biztonságosnak, akkor a <span class=filename>kliens-new-srvtab</span> állományt másoljuk egy mozgatható adathordozóra és megbízható módon jutassuk el. Ne felejtsük el az állományt <span class=filename>srvtab</span> néven átrakni a kliens <span class=filename>/etc</span> könyvtárába és az engedélyeit 600-ra állítani:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mv grumble-new-srvtab srvtab</span>
<span class=c># chmod 600 srvtab</span></code></pre></div></div></div><div class=sect2><h3 id=_az_adatbázis_feltöltése>14.7.5. Az adatbázis feltöltése<a class=anchor href=#_az_adatbázis_feltöltése></a></h3><div class=paragraph><p>Ezt követõen rögzítenünk kell néhány felhasználót is adatbázisban. Elõször is hozzunk létre egy bejegyzést a <code>janos</code> nevû felhasználónak. Ezt a <code>kdb_edit</code> parancs kiadásával tesszük meg:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_edit</span>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are <span class=k>in</span> <span class=o>[</span>brackets] ,
enter <span class=k>return </span>to leave the same, or new value.

Principal name: janos
Instance:

&lt;Not found&gt;, Create <span class=o>[</span>y] ? y

Principal: janos, Instance: , kdc_key_ver: 1
New Password:                &lt;<span class=nt>----</span> adjunk meg egy biztonságos jelszót
Verifying password

New Password:                &lt;<span class=nt>----</span> itt ismét adjuk meg a jelszót
Principal<span class=s1>&#39;s new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name:		   &lt;---- ha nem írunk be semmit, akkor kilép</span></code></pre></div></div></div><div class=sect2><h3 id=_próbáljuk_ki>14.7.6. Próbáljuk ki<a class=anchor href=#_próbáljuk_ki></a></h3><div class=paragraph><p>Elsõként a Kerberos démonait kell beindítanunk. Ezzel kapcsolatban megjegyeznénk, hogy ha ehhez megfelelõen átírtuk az <span class=filename>/etc/rc.conf</span> állományunkat, akkor ez az újraindítással együtt magától lezajlik. Ezt csak a Kerberos szerveren kell megcsinálni. A Kerberos kliensei maguktól összeszedik a mûködésükhöz szükséges adatokat az <span class=filename>/etc/kerberosIV</span> könyvtárból.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kerberos &amp;</span>
Kerberos server starting
Sleep forever on error
Log file is /var/log/kerberos.log
Current Kerberos master key version is 1.

Master key entered. BEWARE!

Current Kerberos master key version is 1
Local realm: EXAMPLE.COM
<span class=c># kadmind -n &amp;</span>
KADM Server KADM0.0A initializing
Please <span class=k>do </span>not use <span class=s1>&#39;kill -9&#39;</span> to <span class=nb>kill </span>this job, use a
regular <span class=nb>kill </span>instead

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</code></pre></div></div><div class=paragraph><p>A fenti figyelmeztetés fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>A program leállítására ne a <span class=s1>&#39;kill -9&#39;</span> parancsot, hanem a
normális <span class=nb>kill </span>parancsot használjuk</code></pre></div></div><div class=paragraph><p>Ezután a <code>kinit</code> parancs használatával próbáljunk meg az elõbb létrehozott <code>janos</code> azonosítónak kérni egy jegyet:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit janos
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Kerberos Initialization <span class=k>for</span> <span class=s2>&#34;janos&#34;</span>
Password:</code></pre></div></div><div class=paragraph><p>A <code>klist</code> paranccsal most próbáljuk meg kilistázni a tokeneket és így ellenõrizni, hogy valóban rendelkezünk velük:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% klist
Ticket file:    /tmp/tkt245
Principal:      janos@EXAMPLE.COM

  Issued           Expires          Principal
Apr 30 11:23:22  Apr 30 19:23:22  krbtgt.EXAMPLE.COM@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>Ezután a <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> használatával próbáljuk meg megváltoztatni a jelszavunkat. Ezzel tudjuk ellenõrizni, hogy a kpasswd démon hozzáfér a Kerberos adatbázisához:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% passwd
realm EXAMPLE.COM
Old password <span class=k>for </span>janos:
New Password <span class=k>for </span>janos:
Verifying password
New Password <span class=k>for </span>janos:
Password changed.</code></pre></div></div></div><div class=sect2><h3 id=_adminisztrátori_jogosultságok_felvétele>14.7.7. Adminisztrátori jogosultságok felvétele<a class=anchor href=#_adminisztrátori_jogosultságok_felvétele></a></h3><div class=paragraph><p>A Kerberos lehetõvé teszi, hogy <em>mindegyik</em> olyan felhasználónak, akinek rendszergazdai jogokra lenne szüksége, a <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> eléréséhez <em>külön</em> meg tudjunk adni egy jelszót. Most már tudunk mondani egy olyan azonosítót is, amely jogosult a <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> használatával <code>root</code> jogokat szerezni. Ezt úgy tudjuk megoldani, ha az adott szereplõhöz társítunk egy <code>root</code> példányt. A <code>kdb_edit</code> használatával készíteni tudunk egy <code>janos.root</code> bejegyzést a Kerberos adatbázisában:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kdb_edit</span>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are <span class=k>in</span> <span class=o>[</span>brackets] ,
enter <span class=k>return </span>to leave the same, or new value.

Principal name: janos
Instance: root

&lt;Not found&gt;, Create <span class=o>[</span>y] ? y

Principal: janos, Instance: root, kdc_key_ver: 1
New Password:                    &lt;<span class=nt>----</span> ide csak egy BIZTONSÁGOS jelszót adjuk meg!
Verifying password

New Password:    	 	 &lt;<span class=nt>----</span> adjuk meg ismét a jelszót

Principal<span class=s1>&#39;s new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ? 12 &lt;--- ne állítsuk nagyon hosszúra!
Attributes [ 0 ] ?
Edit O.K.
Principal name:		         &lt;---- ha nem adunk meg semmit, akkor kilép</span></code></pre></div></div><div class=paragraph><p>Ezt követõen úgy tudunk megbizonyosodni a mûködésérõl, hogy megpróbálunk neki tokeneket szerezni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kinit janos.root</span>
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Kerberos Initialization <span class=k>for</span> <span class=s2>&#34;janos.root&#34;</span>
Password:</code></pre></div></div><div class=paragraph><p>Most rakjuk bele a felhasználót a <code>root</code><span class=filename>.klogin</span> állományába:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat /root/.klogin</span>
janos.root@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>Ezután próbáljunk meg kiadni a <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> parancsát:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% su
Password:</code></pre></div></div><div class=paragraph><p>Nézzük meg milyen tokenjeink is vannak:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># klist</span>
Ticket file:	/tmp/tkt_root_245
Principal:      janos.root@EXAMPLE.COM

  Issued           Expires          Principal
May  2 20:43:12  May  3 04:43:12  krbtgt.EXAMPLE.COM@EXAMPLE.COM</code></pre></div></div></div><div class=sect2><h3 id=_más_parancsok_használata>14.7.8. Más parancsok használata<a class=anchor href=#_más_parancsok_használata></a></h3><div class=paragraph><p>Az iménti példában létrehoztunk egy <code>janos</code> nevû szereplõt, amihez a <code>root</code> egy példányát rendeltük. Ez egy olyan felhasználón alapján történt, akinek a neve megegyezik a hozzá tartozó szereplõvel, ami a Kerberosban alapértelmezés. Amennyiben a szükséges megjegyzések megtalálhatóak a <code>root</code> könyvtárában levõ <span class=filename>.klogin</span> állományban, akkor a <code>felhasználó.root</code> formátumú <code>szereplõ.példány</code> azonosító megengedi a <code>felhasználó</code> számára, hogy végrehajtsa a <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> parancsot.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat /root/.klogin</span>
janos.root@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>Ehhez hasonlóan, ha a felhasználó saját könyvtárában megtalálható egy ilyen állomány:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cat</span> ~/.klogin
janos@EXAMPLE.COM
jozsef@EXAMPLE.COM</code></pre></div></div><div class=paragraph><p>Ezzel a konfigurációval bárki, aki <code>janos</code> felhasználóként vagy <code>jozsef</code> felhasználóként (a <code>kinit</code> parancson keresztül) hitelesítette magát <code>EXAMPLE.COM</code> övezetbõl, ezen a rendszeren (<code>grunt</code>) bejelentkezhet a <code>janos</code> nevû felhasználóként vagy hozzáférhet az állományaihoz az <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=rsh&amp;sektion=1&amp;format=html">rsh(1)</a> vagy <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a> használatával.</p></div><div class=paragraph><p>Például <code>janos</code> most egy másik Kerberost használó rendszerre jelentkezik be:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Password:
% rlogin grunt
Last login: Mon May  1 21:14:47 from grumble
Copyright <span class=o>(</span>c<span class=o>)</span> 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 <span class=o>(</span>GR386<span class=o>)</span> <span class=c>#0: Sat Apr 29 17:50:09 SAT 1995</span></code></pre></div></div><div class=paragraph><p>Vagy <code>jozsef</code> jelentkezik be ugyanazon a gépen <code>janos</code> hozzáférésével (a <code>janos</code> nevû felhasználónak a fentebb bemutatt <span class=filename>.klogin</span> állomány található a könyvtárában és a Kerberos üzemeltetéséért felelõs személy létrehozott egy <em>jozsef</em> nevû szereplõt egy null példánnyal):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit
% rlogin grunt <span class=nt>-l</span> janos
MIT Project Athena <span class=o>(</span>grunt.example.com<span class=o>)</span>
Password:
Last login: Mon May  1 21:16:55 from grumble
Copyright <span class=o>(</span>c<span class=o>)</span> 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.
FreeBSD BUILT-19950429 <span class=o>(</span>GR386<span class=o>)</span> <span class=c>#0: Sat Apr 29 17:50:09 SAT 1995</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=kerberos5>14.8. Kerberos5<a class=anchor href=#kerberos5></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD 5.1 után következõ mindegyik FreeBSD kiadás már csak a Kerberos5 támogatást tartalmaz. Ezért bennük csak a Kerberos5 található meg, és a beállítása sok szempontból hasonlít a KerberosIV beállításához. A most következõ információk csak és kizárólag a FreeBSD 5.0 kiadás után következõkben található Kerberos5 változatra vonatkoznak. A KerberosIV szolgáltatásait a felhasználók csomagként, a <a class=package href=https://cgit.freebsd.org/ports/tree/security/krb4/>security/krb4</a> porton keresztül érhetik el.</p></div><div class=paragraph><p>A Kerberos egy hálózati kiegészítõ rendszer/protokoll, amivel a felhasználók egy biztonságos szerveren keresztül képesek magukat azonosítani. A távoli bejelentkezések, távoli másolások, a rendszer belüli védett másolások valamint egyéb nagyon kockázatos feladatok, szolgáltatások biztonsága és felügyelete így jelentõs mértékben javítható.</p></div><div class=paragraph><p>A Kerberos úgy írható le, mint az személyazonosságok ellenõrzésére feljogosított rendszer. Vagy tekinthetjük egy megbízható külsõ megfigyelõ által végzett hitelesítési rendszernek is. A Kerberos csak egyetlen funkciót kínál fel - ez a felhasználók biztonságos hitelesítése a hálózaton. Viszont nem nyújt semmilyen felhatalmazási (mit csinálhatnak a felhasználók) vagy vizsgálati (mit csináltak végül a felhasználók) lehetõséget. Miután egy kliens és a szerver a Kerberos használatával azonosították egymást, az egymás közt folyó kommunikációjuk titkosításával képesek megõrzi az átáramló adatok sértetlenségét és lehallgathatatlanságát.</p></div><div class=paragraph><p>Ennek tükrében a Kerberos használata csak más olyan biztonsági módszerekkel együttesen javasolt, amelyek felhatalmazást és vizsgálati szolgáltatásokkal is rendelkeznek.</p></div><div class=paragraph><p>A most következõ utasítások arra igyekeznek útmutatást adni, hogy miként használjuk a FreeBSD-vel együtt terjesztett Kerberos verziót. Azonban a teljes leírást csak a témához tartozó man oldalak átolvasásával együtt kapjuk meg.</p></div><div class=paragraph><p>A Kerberos telepítésének bemutatásához az alábbi névtereket fogjuk használni:</p></div><div class=ulist><ul><li><p>A DNS tartomány ("zóna") az <code>example.org</code> lesz.</p></li><li><p>A Kerberos övezet az EXAMPLE.ORG lesz.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Kérjük, hogy még abban az esetben is valódi tartományneveket adjuk meg, amikor a Kerberos használatát csak a belsõ hálózaton tervezzük. Ezzel elkerülhetjük az egyes Kerberos övezetek együttmûködése során felmerülõ DNS problémákat.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=_a_kerberos_története>14.8.1. A Kerberos története<a class=anchor href=#_a_kerberos_története></a></h3><div class=paragraph><p>A Kerberost az MIT hozta létre a hálózati biztonsággal kapcsolatos problémák egyik megoldásaként. A Kerberos erõs titkosítást használ, ezért a kliensek képesek egy nem biztonságos hálózaton is azonosítani magukat a szerver felé (és fordítva).</p></div><div class=paragraph><p>A Kerberos egyaránt utal egy hálózati protokoll nevére és azokra programokra, amelyek implementálják (például Kerberos telnet). Az 5 a protokoll jelenlegi verziója, amit az RFC 1510 ír le.</p></div><div class=paragraph><p>A protokollnak számos szabad változata létezik, rengeteg típusú operációs rendszerre. A Massachusettsi Mûszaki Intézet (Massachusetts Institute of Technology, MIT), ahol a Kerberost eredetileg kifejlesztették, napjainkban is folytatja a saját Kerberos csomagjának fejlesztését. Többnyire az Egyesült Államokban használják titkosításra, mivel régebben az amerikai kiviteli korlátozások voltak rá érvényesek. Az MITKerberos változata portként érhetõ el (<a class=package href=https://cgit.freebsd.org/ports/tree/security/krb5/>security/krb5</a>). A Heimdal Kerberos egy másik 5 verziójú implementáció, amit a kiviteli korlátozások elkerülése érdekében határozottan az Egyesült Államokon kívül fejlesztettek ki (ezért gyakran megtalálhatjuk a különbözõ nem kereskedelmi UNIX® variánsokban). A Heimdal Kerberos terjesztés portként elérhetõ (<a class=package href=https://cgit.freebsd.org/ports/tree/security/heimdal/>security/heimdal</a>) és kisebb méretben a FreeBSD alaptelepítésének is része.</p></div><div class=paragraph><p>Mivel ezzel az írással a legtöbb felhasználót kívánjuk segíteni, ezért a következõ utasítások a FreeBSD telepítésében mellékelt Heimdal terjesztés használatát feltételezik.</p></div></div><div class=sect2><h3 id=_a_heimdal_kulcselosztójának_telepítése>14.8.2. A Heimdal kulcselosztójának telepítése<a class=anchor href=#_a_heimdal_kulcselosztójának_telepítése></a></h3><div class=paragraph><p>A kulcselosztó központ (Key Distribution Center, avagy KDC) az a centralizált hitelesítési szolgáltatás, amit a Kerberos nyújt - lényegében az a számítógép, amely Kerberos-jegyeket bocsájt ki. A KDC"megbízhatónak" tekinthetõ a Kerberos által kialakított övezetben levõ többi számítógép számára, ezért védelme kiemelten fontos.</p></div><div class=paragraph><p>Itt jegyeznénk meg, hogy habár a Kerberos szerver futtatása nagyon kevés számítógépes erõforrást igényel, ennek ellenére biztonsági szempontból egy külön számítógépet javasoljunk a kulcselosztó szerepének betöltéséhez.</p></div><div class=paragraph><p>Mielõtt nekifognánk a KDC konfigurálásának, ellenõrizzük, hogy az <span class=filename>/etc/rc.conf</span> tartalmazza a KDC mûködéséhez szükséges beállításokat (az elérési utakat természetesen a saját rendszerünk szerint állítsuk be):</p></div><div class="literalblock programlisting"><div class=content><pre>kerberos5_server_enable=&#34;YES&#34;
kadmind5_server_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>A következõ lépésben vegyük szemügyre a Kerberos beállításait tartalmazó <span class=filename>/etc/krb5.conf</span> állományt:</p></div><div class="literalblock programlisting"><div class=content><pre>[libdefaults]
    default_realm = EXAMPLE.ORG
[realms]
    EXAMPLE.ORG = {
        kdc = kerberos.example.org
        admin_server = kerberos.example.org
    }
[domain_realm]
    .example.org = EXAMPLE.ORG</pre></div></div><div class=paragraph><p>Vegyük észre, hogy az itt szereplõ <span class=filename>/etc/krb5.conf</span> állomány szerint a kulcselosztónk teljes hálózati neve <code>kerberos.example.org</code>. Ha a kulcselosztónknak nem ez a neve, akkor a zónákat leíró állományba vegyünk még fel egy ilyen CNAME (álnév) bejegyzést.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ha egy nagyobb hálózatban vagyunk, ahol a DNS szervert is megfelelõen beállították, akkor az iménti példa ennyire leszûkíthetõ:</p></div><div class="literalblock programlisting"><div class=content><pre>[libdefaults]
      default_realm = EXAMPLE.ORG</pre></div></div><div class=paragraph><p>Itt már a következõ sorokat hozzáadták <code>example.org</code> zónát leíró állományhoz:</p></div><div class="literalblock programlisting"><div class=content><pre>_kerberos._udp      IN  SRV     01 00 88 kerberos.example.org.
_kerberos._tcp      IN  SRV     01 00 88 kerberos.example.org.
_kpasswd._udp       IN  SRV     01 00 464 kerberos.example.org.
_kerberos-adm._tcp  IN  SRV     01 00 749 kerberos.example.org.
_kerberos           IN  TXT     EXAMPLE.ORG</pre></div></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A kliensek csak akkor lesznek képesek elérni a Kerberos szolgáltatásait, ha vagy <em>kötelezõ jelleggel</em> megadunk egy teljesen beállított <span class=filename>/etc/krb5.conf</span> állományt, vagy egy minimális <span class=filename>/etc/krb5.conf</span> állományt <em>és</em> egy helyesen beállított DNS szervert használunk.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ezután létrehozzuk a Kerberos adatbázisát. Ez az adatbázis tartalmazza az összes szereplõ kulcsát a mesterkulcssal titkosítva. Erre a jelszóra nem kell feltétlenül emlékeznünk, mivel ez egy állományban tárolódik (<span class=filename>/var/heimdal/m-key</span>). A mesterkulcsot a <code>kstash</code> parancs kiadásával és egy jelszó megadásával tudjuk létrehozni.</p></div><div class=paragraph><p>Ahogy a mesterkulcs elkészült, a <code>kadmin</code> parancs <code>-l</code> (mint "lokális", azaz helyi) opciójával inicializálni tudjuk az adatbázist. Ez az opció arra utasítja a <code>kadmin</code> programot, hogy ne a <code>kadmind</code> hálózati szolgáltatást használja, hanem közvetlenül az adatbázis állományait módosítsa. Ezzel oldható meg az adatbázis kezdeti létrehozásának problémája. Miután megkaptuk a <code>kadmin</code> parancssorát, az övezetünkhöz tartozó adatbázis inicializálásához adjuk ki az <code>init</code> parancsot.</p></div><div class=paragraph><p>Végül, még mindig a <code>kadmin</code> parancssorát használva, az <code>add</code> paranccsal hozzuk létre az elsõ szereplõnket. Egyelõre érjük be az alapértelmezett értékekkel, a <code>modify</code> paranccsal késõbb úgyis meg tudjuk változtatni ezeket. Hozzátesszük, hogy itt a <code>?</code> parancs segítségével bármikor lekérhetjük az opciók ismertetését.</p></div><div class=paragraph><p>Példa egy adatbázis létrehozására:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kstash</span>
Master key: xxxxxxxx
Verifying password - Master key: xxxxxxxx

<span class=c># kadmin -l</span>
kadmin&gt; init EXAMPLE.ORG
Realm max ticket life <span class=o>[</span>unlimited]:
kadmin&gt; add tillman
Max ticket life <span class=o>[</span>unlimited]:
Max renewable life <span class=o>[</span>unlimited]:
Attributes <span class=o>[]</span>:
Password: xxxxxxxx
Verifying password - Password: xxxxxxxx</code></pre></div></div><div class=paragraph><p>Most már ideje elindítani a KDC szolgáltatásait. Ezeket az <code>/etc/rc.d/kerberos start</code> és <code>/etc/rc.d/kadmind start</code> parancsok kiadásával tudjuk felhozni. Megjegyezzük, hogy most még semmilyen kerberizált démont nem kell elindítanunk. Ellenben igyekezzünk ellenõrizni a KDC mûködõképességét azzal, hogy KDC parancssorából kérünk egy jegyet a frissen hozzáadott szereplõnknek (felhasználónknak) és kilistázzuk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kinit tillman
tillman@EXAMPLE.ORG<span class=s1>&#39;s Password:

% klist
Credentials cache: FILE:/tmp/krb5cc_500
	Principal: tillman@EXAMPLE.ORG

  Issued           Expires          Principal
Aug 27 15:37:58  Aug 28 01:37:58  krbtgt/EXAMPLE.ORG@EXAMPLE.ORG</span></code></pre></div></div><div class=paragraph><p>Miután végeztünk, nyugodtan törölhetjük a jegyet:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kdestroy</code></pre></div></div></div><div class=sect2><h3 id=_szerverek_kerberizálása_a_heimdal_használatával>14.8.3. Szerverek kerberizálása a Heimdal használatával<a class=anchor href=#_szerverek_kerberizálása_a_heimdal_használatával></a></h3><div class=paragraph><p>Ehhez elõször is szükségünk lesz a Kerberos konfigurációs állományának, az <span class=filename>/etc/krb5.conf</span> másolatára. Ezt úgy tudjuk megtenni, ha egyszerûen átmásoljuk a kulcselosztóról az egyik kliensre valamilyen megbízható módon (vagy az <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> programhoz hasonló hálózati segédprogramok, vagy például fizikailag egy floppy lemez használatával).</p></div><div class=paragraph><p>Ezután szükségünk lesz egy <span class=filename>/etc/krb5.keytab</span> nevû állományra. Ez az alapvetõ különbség a kerberizált démonokat felkínáló szerver és egy munkaállomás közt - a szervernek rendelkeznie kell egy <span class=filename>keytab</span> állománnyal. Ez az állomány tartalmazza a szerver kulcsát, amivel így a kulcselosztóval kölcsönösen azonosítani tudják egymást. Ezt a szerverre biztonságosan kell eljuttatnunk, mivel ennek napvilágra kerülésével a szerver védelme komoly veszélybe kerül. Tehát, ha egy titkosítás nélküli csatornán, például FTP-n keresztül visszük át, akkor kifejezetten rossz ötlet.</p></div><div class=paragraph><p>A szerverre általában a <code>kadmin</code> program használatával érdemes átvinni a <span class=filename>keytab</span> állományt. Ez azért is hasznos, mert ehhez a <code>kadmin</code> segítségével létre kell hoznunk a befogadó szereplõt is (a kulcselosztó a <span class=filename>krb5.keytab</span> állomány végén).</p></div><div class=paragraph><p>Vegyük észre, hogy már kaptunk egy jegyet és ezzel a jeggyel jogosultaknak kell lennünk a <span class=filename>kadmind.acl</span> állomány <code>kadmin</code> felület használatára. A hozzáférést vezérlõ listák (ACL-ek) tervezésével kapcsolatban olvassuk el Heimdal info oldalán található "Remote administration" címû szakaszt (<code>info heimdal</code>). Amennyiben nem kívánjuk engedélyezni a <code>kadmin</code> távoli elérését, egyszerûen csak csatlakozzunk valamilyen biztonságos módon (helyi konzolon, <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> vagy egy kerberizált <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> használatával) a kulcselosztóhoz, és a <code>kadmin -l</code> paranccsal végezzük el helyben az adminisztrációt.</p></div><div class=paragraph><p>Miután telepítettük az <span class=filename>/etc/krb5.conf</span> állományt, a Kerberos szerverrõl el tudjuk érni a <code>kadmin</code> felületét. Az <code>add --random-key</code> paranccsal most már hozzáadhatjuk a szerver befogadó szereplõjét és az <code>ext</code> paranccsal ki tudjuk vonni a szerver befogadó szereplõjét a saját keytab állományából. Például:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kadmin</span>
kadmin&gt; add <span class=nt>--random-key</span> host/myserver.example.org
Max ticket life <span class=o>[</span>unlimited]:
Max renewable life <span class=o>[</span>unlimited]:
Attributes <span class=o>[]</span>:
kadmin&gt; ext host/myserver.example.org
kadmin&gt; <span class=nb>exit</span></code></pre></div></div><div class=paragraph><p>Itt jegyeznénk meg, hogy az <code>ext</code> parancs (az "extract" rövdítése) a kivont kulcsot alapértelmezés szerint az <span class=filename>/etc/krb5.keytab</span> állományba menti ki.</p></div><div class=paragraph><p>Ha a kulcselosztón nem fut a <code>kadmind</code> szolgáltatás (valószínûleg biztonsági okokból) és ezért távolról nem tudjuk elérni a <code>kadmin</code> felületét, akkor így tudjuk közvetlenül hozzáadni a befogadó szereplõt (<code>host/myserver.EXAMPLE.ORG</code>), majd kivonatolni azt egy ideiglenes állományba (elkerülve az <span class=filename>/etc/krb5.keytab</span> felülírását):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kadmin</span>
kadmin&gt; ext <span class=nt>--keytab</span><span class=o>=</span>/tmp/example.keytab host/myserver.example.org
kadmin&gt; <span class=nb>exit</span></code></pre></div></div><div class=paragraph><p>Ezután valamilyen biztonságos eszközzel (például <code>scp</code> vagy floppy használatával) át tudjuk másolni keytab állományt a szerverre. A kulcselosztón levõ keytab felülírását elkerülendõ, ne feledkezzünk el egy megfelelõ név megadásáról sem.</p></div><div class=paragraph><p>Ezen a ponton már a szerver képes felvenni a kapcsolatot a kulcselosztóval (a <span class=filename>krb5.conf</span> állomány miatt) és bizonyítani a személyazonosságát (a <span class=filename>krb5.keytab</span> állomány miatt). Így tehát készen állunk a szolgáltatások kerberizálására. Ebben a példában most a <code>telnet</code> szolgáltatást vesszük célba úgy, hogy elõször az <span class=filename>/etc/inetd.conf</span> állományba berakjuk az alábbi sort, majd újraindítjuk az <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> szolgáltatást az <code>/etc/rc.d/inetd restart</code> paranccsal:</p></div><div class="literalblock programlisting"><div class=content><pre>telnet    stream  tcp     nowait  root    /usr/libexec/telnetd  telnetd -a user</pre></div></div><div class=paragraph><p>Itt az a legfontosabb, hogy az <code>-a</code> (mint authentication, azaz hitelesítés) paramétert a "user" beállítással adjuk meg. A <a href="https://man.freebsd.org/cgi/man.cgi?query=telnetd&amp;sektion=8&amp;format=html">telnetd(8)</a> man oldalán olvashatunk ennek pontos részleteirõl.</p></div></div><div class=sect2><h3 id=_kliensek_kerberizálása_a_heimdal_használatával>14.8.4. Kliensek kerberizálása a Heimdal használatával<a class=anchor href=#_kliensek_kerberizálása_a_heimdal_használatával></a></h3><div class=paragraph><p>A kliensek beállítása szinte majdnem gyerekjáték. A Kerberos beállításához egyedül az <span class=filename>/etc/krb5.conf</span> állományra lesz szükségünk. Valamilyen biztonságos eszközzel másoljuk át a kulcselosztóról a kliensre.</p></div><div class=paragraph><p>Úgy tudjuk letesztelni klienst, ha megpróbáljuk róla kiadni a <code>kinit</code>, <code>klist</code> és <code>kdestroy</code> parancsokat a fentebb létrehozott szereplõ jegyének megszerzéséhez, lekérdezéséhez és megsemmisítéséhez. A Kerberos használatával megpróbálkozhatunk csatlakozni valamelyik kerberizált szerverre is, ha viszont ez nem mûködik még egy jegy megszerzése után sem, akkor a gond többnyire a szerverrel van, nem pedig a klienssel vagy a kulcselosztóval.</p></div><div class=paragraph><p>Amikor egy <code>telnet</code> vagy egy hozzá hasonló alkalmazást tesztelünk, egy csomaglehallgató (mint amilyen például a <a href="https://man.freebsd.org/cgi/man.cgi?query=tcpdump&amp;sektion=1&amp;format=html">tcpdump(1)</a>) elindításával gyõzödjünk meg róla, hogy a jelszavak ilyenkor titkosítva mennek át. Próbáljuk meg titkosítani a teljes kommunikációt a <code>telnet -x</code> paraméterével (hasonlóan az <code>ssh</code> parancshoz).</p></div><div class=paragraph><p>Alapból még számos más kiegészítõ Kerberos kliensalkalmazás is telepítõdik. Ezeken érezhetõ meg valójában az alaprendszerhez tartozó Heimdal változat "minimalitása": ebben a <code>telnet</code> az egyedüli kerberizált szolgáltatás.</p></div><div class=paragraph><p>A Heimdal port igyekszik pótolni a hiányzó klienseket a kerberizált <code>ftp</code>, <code>rsh</code>, <code>rcp</code>, <code>rlogin</code> és néhány kevéséb ismert program telepítésével. Az MIT változat portja szintén tartalmazza a Kerberos kliensek teljes kelléktárát.</p></div></div><div class=sect2><h3 id=_a_felhasználók_konfigurációs_állományai_a_k5login_és_a_k5users>14.8.5. A felhasználók konfigurációs állományai: a <span class=filename>.k5login</span> és a <span class=filename>.k5users</span><a class=anchor href=#_a_felhasználók_konfigurációs_állományai_a_k5login_és_a_k5users></a></h3><div class=paragraph><p>Általában az övezetben található felhasználók mindegyikéhez tartozik egy Kerberos-szereplõ (mint például a <code>tillman@EXAMPLE.ORG</code>), ami a felhasználó helyi hozzáférésére mutat (mint például a <code>tillman</code> nevû helyi hozzáférés). A <code>telnet</code> és a hozzá hasonló kliensalkalmazások általában nem igényelnek felhasználót vagy szereplõt.</p></div><div class=paragraph><p>Elõfordulhat azonban, hogy valaki olyan szeretné elérni egy helyi felhasználó hozzáférését, aki nem rendelkezik a hozzá tartozó Kerberos-szereplõvel. Például a <code>tillman@EXAMPLE.ORG</code> nevû felhasználó el szeretné érni a helyi számítógépen levõ <code>webdevelopers</code> hozzáférést. Más szereplõk is elérhetik a helyi hozzáféréseket.</p></div><div class=paragraph><p>A probléma megoldásához a felhasználók könyvtárában található <span class=filename>.k5login</span> és a <span class=filename>.k5users</span> állományok használhatóak a <span class=filename>.host</span> és <span class=filename>.rhosts</span> állományok kombinációjához hasonlóan. Például a <span class=filename>.k5login</span> így néz ki:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>tillman@example.org
jdoe@example.org</code></pre></div></div><div class=paragraph><p>Ezt a <code>webdevelopers</code> nevû helyi felhasználó könyvtárában kell elhelyeznünk, így a felsorolt szereplõt megosztott jelszó használata nélkül képesek elérni a hozzáférést.</p></div><div class=paragraph><p>Az említett parancsok man oldalának elolvasása ajánlott. Megjegyezzük, hogy a <code>ksu</code> man oldal foglalkozik a <span class=filename>.k5users</span> állománnyal.</p></div></div><div class=sect2><h3 id=_tippek_trükkök_a_kerberos_használatáról_és_hibaelhárítás>14.8.6. Tippek, trükkök a Kerberos használatáról és hibaelhárítás<a class=anchor href=#_tippek_trükkök_a_kerberos_használatáról_és_hibaelhárítás></a></h3><div class=ulist><ul><li><p>Akár a Kerberos Heimdal vagy az MIT változatát használjuk, ne felejtsük úgy beállítani a <code>PATH</code> környezeti változóban felsorolt elérési utakat, hogy a kliensalkalmazások kerberizált változatai a rendszerben használatos verziók elé kerüljenek.</p></li><li><p>Az övezetben minden számítógép órája ugyanúgy jár? Ha nem, akkor a hitelesítés csõdöt mondhat. A <a href=../network-servers/#network-ntp>Az órák egyeztetése az NTP használatával</a>ból tudhatjuk meg hogyan szinkronizáljunk órákat az NTP segítségével.</p></li><li><p>Az MIT és a Heimdal verziók a <code>kadmin</code> kivételével remekül megvannak egymással, mivel az általa használt protokollt még nem szabványosították.</p></li><li><p>Ha megváltoztatjuk a gépünk hálózati nevét, akkor a ugyanígy a <code>host/</code> szereplõnket is meg kell változtatni és frissíteni a keytab állományunkat. Ez olyan speciális keytab bejegyzésekre is vonatkozik, mint például az Apache <a class=package href=https://cgit.freebsd.org/ports/tree/www/mod_auth_kerb/>www/mod_auth_kerb</a> moduljához tartozó <code>www/</code> szereplõ.</p></li><li><p>Az övezetünkben levõ összes számítógépnek (mind a két irányba) feloldható DNS névvel kell rendelkeznie (vagy legalább egy <span class=filename>/etc/hosts</span> állománnyal). Erre a CNAME rekord megfelelõ, de az A és PTR rekordoknak mindenképpen rendben kell lenniük. Az ilyenkor keletkezõ hibaüzenet nem éppen fogja meg a lényeget: <code>Kerberos5 refuses authentication because Read req failed: Key table entry not found</code>.</p></li><li><p>A kulcselosztó számára kliensként viselkedõ bizonyos operációs rendszerek nem állítják be megfelelõen a <code>ksu</code> engedélyeit, ezért nem lehet <code>root</code> jogokkal futtatni. Ezért a <code>ksu</code> parancs nem fog mûködni, ami alapvetõen nem egy rossz ötlet, de idegesítõ. Ez nem a kulcselosztó hibája.</p></li><li><p>Ha a KerberosMIT változatát használjuk és a meg akarjuk hosszabbítani a szereplõknek kiadott jegyek élettartamát az alapértelmezett tíz óráról, akkor a <code>kadmin</code> felületén a <code>modify_principal</code> paranccsal tudjuk megváltoztatni mind a kérdéses szereplõ, mind pedig a <code>krbtgt</code> jegyeinek élettartamának maximumát. Ezt követõen a szereplõ a <code>kinit -l</code> opciójával tud egy nagyobb élettartammal rendelkezõ jegyet kérni.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Amikor egy kulcselosztóval kapcsolatos hibát próbálunk felderíteni a csomagok lehallgatásával, és a munkaállomásunkról kiadjuk a <code>kinit</code> parancsot, akkor arra lehetünk figyelmesek, hogy a TGT már egybõl a <code>kinit</code> indításakor átküldésre kerül - még mielõtt egyáltalán megadtuk volna a jelszavunkat! Ezt azzal lehet magyarázni, hogy a Kerberos szerver bármilyen hitelesítetlen kérésre elküld egy TGT-t (Jegyadó jegy, azaz Ticket Granting Ticket). Azonban mindegyik ilyen TGT a felhasználó jelszavából származtatott kulccsal titkosítódik. Ezért amit a felhasználó jelszóként megad, nem megy el a kulcselosztónak, hanem vele a <code>kinit</code> a már megkapott TGT-t kódolja ki. Amennyiben a visszakódolás egy érvényes idõbélyeggel rendelkezõ, használható jegyet eredményez, akkor a felhasználó érvényes Kerberos hitelesítést szerez. Ez a hitelesítés magában foglal egy kulcsot, amellyel a késõbbiekben a Kerberos szerverekkel tudjuk felvenni biztonságos módon a kapcsolatot, és rajta kívül egy újabb jegyadó jegyet, amelyet a Kerberos szerver a saját kulcsával titkosított. A titkosítás második vonala a felhasználó számára ismeretlen, de segítségével a Kerberos szerer képes ellenõrizni az egyes jegyadó jegyek hitelességét.</p></div></td></tr></tbody></table></div><div class=ulist><ul><li><p>Ha a jegyeket hosszabb (például egyhetes) élettartammal akarjuk használni és a jegyeket tároló géphez OpenSSH segítségével csatlakozunk, akkor mindenképpen ellenõrizzük, hogy az <span class=filename>sshd_config</span> állományban a Kerberos <code>TicketCleanup</code> beállításának értéke <code>no</code>, máskülönben a kijelentkezés után automatikusan törlõdnek a jegyeink.</p></li><li><p>Ne hagyjuk figyelmen kívül azt sem, hogy a befogadó szereplõk is rendelkezhetnek nagyobb élettartamú jegyekkel. Ha a felhasználónkhoz tartozó szereplõ jegye például egy hét alatt évül el, de a számítógép, amire bejelentkezük, csupán kilenc óráig tartja életben ezeket, akkor a jegyeket tároló gyorsítótárunkban hamarabb elévül a hozzá tartozó jegy, ami miatt pedig hibák keletkeznek.</p></li><li><p>Ha a rossz jelszavak használata ellen beállítjuk a <span class=filename>krb5.dic</span> állományt (errõl a <code>kadmind</code> man oldalán találunk egy rövid leírást), akkor nem szabad elfelejteni, hogy ez csak olyan szereplõkre vonatkozik, akiknek a jelszavára is állítottunk be szabályozásokat. A <span class=filename>krb5.dict</span> állományok felépítési nem bonyolult: minden sorban egyetlen karakterlánc szerepel. Érdemes lehet például létrehozni ezen a néven egy szimbolikus linket a <span class=filename>/usr/shared/dict/words</span> állományra.</p></li></ul></div></div><div class=sect2><h3 id=_eltérések_az_mit_porttól>14.8.7. Eltérések az MIT porttól<a class=anchor href=#_eltérések_az_mit_porttól></a></h3><div class=paragraph><p>A Heimdal és az MIT változatok közti egyik legnagyobb eltérés a <code>kadmin</code> programmal kapcsolatban van, ami eltérõ (de egyébként ekivalens) parancskészlettel rendelkezik és más protokollt használ. Ennek komoly következménye, hogy ha az MIT-féle kulcselosztót használjuk, akkor azt a Heimdal <code>kadmin</code> felületével nem tudjuk távolról adminisztrálni (és vica versa).</p></div><div class=paragraph><p>A kliensalkalmazások paraméterezése is eltérhet ugyanazon feladatoknál. Ezért velük kapcsolatban az MITKerberos honlapja (<a href=http://web.mit.edu/Kerberos/www/>http://web.mit.edu/Kerberos/www/</a>) a mérvadó. Vigyázzunk az elérési utakkal: az MIT port magát alapértelmezés szerint a <span class=filename>/usr/local</span> könyvtárba telepíti, ezért az általuk kiváltani kívánt "normális" rendszerprogramokat esetleg hamarabb találja meg a rendszer, ha nem jól állítottuk be a <code>PATH</code> környezeti változónkat.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ha nem értjük, hogy miért mûködnek olyan furcsán a <code>telnetd</code> és a <code>klogind</code> által kezelt bejelentkezések, akkor olvassuk el a FreeBSD <a class=package href=https://cgit.freebsd.org/ports/tree/security/krb5/>security/krb5</a> portjával települõ MIT változat <span class=filename>/usr/local/shared/doc/krb5/README.FreeBSD</span> állományt (angolul). Az a legfontosabb, hogy a <code>incorrect permissions on cache file</code> hiba eltüntetéséhez a <code>login.krb5</code> binárist kell használnunk, így a továbbított jogosultságoknak megfelelõen át tudja állítani a tulajdonost.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Az <span class=filename>rc.conf</span> állományt is módosítani kell a következõ beállítás kialakításához:</p></div><div class="literalblock programlisting"><div class=content><pre>kerberos5_server=&#34;/usr/local/sbin/krb5kdc&#34;
kadmind5_server=&#34;/usr/local/sbin/kadmind&#34;
kerberos5_server_enable=&#34;YES&#34;
kadmind5_server_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Erre azért van szükség, mert a KerberosMIT változata a <span class=filename>/usr/local</span> könyvtáron belülre telepíti fel a hozzá tartozó alkalmazásokat.</p></div></div><div class=sect2><h3 id=_a_kerberosban_talált_korlátozások_enyhítése>14.8.8. A Kerberosban talált korlátozások enyhítése<a class=anchor href=#_a_kerberosban_talált_korlátozások_enyhítése></a></h3><div class=sect3><h4 id=_a_kerberos_a_mindent_vagy_semmit_megközelítést_követi>14.8.8.1. A Kerberos a "mindent vagy semmit" megközelítést követi<a class=anchor href=#_a_kerberos_a_mindent_vagy_semmit_megközelítést_követi></a></h4><div class=paragraph><p>A hálózaton minden szolgáltatást módosítanunk kell ahhoz, hogy együtt tudjanak mûködni a Kerberosszal (vagy valamilyen más módon védenünk kell ezeket a támadások ellen), különben a felhasználók jogait el lehet lopni vagy újra fel lehet használni. Erre jó példa lehet az összes távoli parancssoros elérés (például az <code>rsh</code> valamint a <code>telnet</code>) kerberizálása, de a jelszavakat titkosítatlanul küldõ POP3 levelezõ szerver kihagyása.</p></div></div><div class=sect3><h4 id=_a_kerberos_az_egyfelhasználós_munkaállomások_számára_készült>14.8.8.2. A Kerberos az egyfelhasználós munkaállomások számára készült<a class=anchor href=#_a_kerberos_az_egyfelhasználós_munkaállomások_számára_készült></a></h4><div class=paragraph><p>Többfelhasználós környezetben a Kerberos már nem annyira biztonságos. Ez azért mondható el, mert a jegyeket a mindenki által olvasható <span class=filename>/tmp</span> könyvtárban tárolja. Ha az adott felhasználó számítógépét egyszerre több emberrel is megosztja (tehát többfelhasználós), akkor a felhasználó jegyeit egy másik felhasználó bármikor lemásolhatja (ellophatja).</p></div><div class=paragraph><p>Ezt a <code>-c</code> opció után megadott állománynévvel vagy (inkább) a <code>KRB5CCNAME</code> környezeti változó megfelelõ beállításával tudjuk áthidalni, habár ezt ritkán teszik is meg. Ha a felhasználók könyvtárában és a megfelelõ engedélyekkel tároljuk ezeket a jegyeket, akkor némileg visszaszoríthatjuk a probléma kockázatát.</p></div></div><div class=sect3><h4 id=_a_kulcselosztó_a_rendszer_legsebezhetõbb_pontja>14.8.8.3. A kulcselosztó a rendszer legsebezhetõbb pontja<a class=anchor href=#_a_kulcselosztó_a_rendszer_legsebezhetõbb_pontja></a></h4><div class=paragraph><p>A rendszer kialakításából fakadóan a kulcselosztónak legalább annyira megbízhatónak kell lennie, mint a rajta levõ központi jelszóadatbázisnak. A kulcselosztón semmilyen más szolgáltatás nem futhat és fizikailag is biztonságba kell helyezni. A kockázat nagy, mivel a Kerberos az összes jelszót ugyanazzal a kulcssal (a "mesterkulcssal") titkosítja, amelyet a kulcselosztó egy állományban tárol.</p></div><div class=paragraph><p>Széljegyzet gyanánt hozzátesszük, hogy a mesterkulcs elvesztése nem annyira rossz, mint azt elsõ gondolnánk. A mesterkulcsot csupán a véletlenszám-generátor inicializálásához használják a Kerberos adatbázisának titkosításakor. Amíg a kulcselosztóhoz nem tudnak illetéktelenek hozzáférni, addig nem tudnak sokat kezdeni a mesterkulccsal.</p></div><div class=paragraph><p>Mellesleg ha a kulcselosztó nem elérhetõ (talán pontosan egy DoS támadás vagy éppen hálózati problémák miatt), akkor a hitelesítés nem végezhetõ el, mivel így a hozzá szükséges hálózati szolgáltatások sem használhatóak. Ez remek eszköz egy DoS támadáshoz. Ezen több (egy központi és egy vagy több alárendelt) kulcselosztó telepítésével, valamint a másodlagos vagy tartalékként használt hitelesítési eszközök (a PAM erre tökéletes) körültekintõ megvalósításával enyhíthetünk.</p></div></div><div class=sect3><h4 id=_a_kerberos_hiányosságai>14.8.8.4. A Kerberos hiányosságai<a class=anchor href=#_a_kerberos_hiányosságai></a></h4><div class=paragraph><p>A Kerberos révén a felhasználók, számítógépek és szolgáltatások tudják egymást hitelesíteni. Ellenben semmilyen eszközt nem kínál fel a kulcselosztó hitelességének ellenõrzésére. Így tehát (például) egy eltérített <code>kinit</code> képes ellopni az összes felhasználói nevet és jelszót. Az ilyen incidensek elkerülésére a <a class=package href=https://cgit.freebsd.org/ports/tree/security/tripwire/>security/tripwire</a> és a hozzá hasonló segédprogramok segítségével lehet megõrizni a rendszer sértelenségét.</p></div></div></div><div class=sect2><h3 id=_erõforrások_és_további_információk>14.8.9. Erõforrások és további információk<a class=anchor href=#_erõforrások_és_további_információk></a></h3><div class=ulist><ul><li><p><a href=http://www.faqs.org/faqs/Kerberos-faq/general/preamble.html>A Kerberos GYIK (angolul)</a></p></li><li><p><a href=http://web.mit.edu/Kerberos/www/dialogue.html>Egy hitelesítési rendszer kidolgozása: párbeszéd négy színben (angolul)</a></p></li><li><p><a href="http://www.ietf.org/rfc/rfc1510.txt?number=1510">RFC 1510: A Kerberos hálózati hitelesítési szolgáltatás (V5) (angolul)</a></p></li><li><p><a href=http://web.mit.edu/Kerberos/www/>Az MIT Kerberos holnapja (angolul)</a></p></li><li><p><a href=http://www.pdc.kth.se/heimdal/>A Heimdal Kerberos honlapja (angolul)</a></p></li></ul></div></div></div></div><div class=sect1><h2 id=openssl>14.9. OpenSSL<a class=anchor href=#openssl></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD-hez adott OpenSSL az egyik olyan tényezõ, amit a legtöbb felhasználó figyelmen kívül hagy. Az OpenSSL egy titkosítási réteget nyújt a hagyományos kommunikációs csatorna felett, így rengeteg hálózati alkalmazásba és szolgáltatásba bele lehet szõni.</p></div><div class=paragraph><p>Az OpenSSL felhasználható többek közt a levelezõ kliensek titkosított hitelesítésére, hitelkártyás fizetések weben keresztüli lebonyolítására alkalmas, és még sok minden másra. Sok port, köztük a <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13-ssl/>www/apache13-ssl</a> és a <a class=package href=https://cgit.freebsd.org/ports/tree/mail/sylpheed-claws/>mail/sylpheed-claws</a> is felajánlja az OpenSSL felhasználását.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A legtöbb esetben a Portgyûjtemény megpróbálja lefordítani a <a class=package href=https://cgit.freebsd.org/ports/tree/security/openssl/>security/openssl</a> portot, hacsak a <code>WITH_OPENSSL_BASE</code> változót határozottan a "yes" értékre nem állítjuk.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A FreeBSD-hez mellékelt OpenSSL ismeri a Secure Sockets Layer v2/v3 (SSLv2/SSLv3) és Transport Layer Security v1 (TLSv1) hálózatbiztonsági protokollokat, és általános célú titkosítási könyvtárként is alkalmazható.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Noha az OpenSSL ismeri az IDEA algoritmusát is, az Egyesült Államokban érvényben levõ szabadalmak miatt alapértelmezés szerint nem engedélyezett. A használatához el kell olvasni a hozzá tartozó licencet, és ha elfogadjuk a benne foglaltakat, akkor állítsuk be a <code>MAKE_IDEA</code> változót a <span class=filename>make.conf</span> állományban.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Az OpenSSL-t leginkább a szoftverek tanúsítványainak elkészítéséhez használják. Ilyen tanúsítvánnyokkal lehet szavatolni, hogy az érte felelõs cég vagy egyén valóban megbízható és nem szélhámos. Amennyiben a kérdéses tanúsítványt nem vizsgálta be valamelyik "tanúsítványok hitelesítésével foglalkozó hatóság" (Certificate Authority, vagy CA), akkor errõl általában kap egy figyelmeztetést a felhasználó. A tanúsítványokat hitelesítõ cégek, mint például a <a href=http://www.verisign.com>VeriSign</a>, írják alá ezeket a tanúsítványokat és ezzel érvényesítik az egyes cégek vagy egyének megbízhatóságát. Ez ugyan pénzbe kerül, de használatuk egyáltalán nem is kötelezõ. Azonban az átlagosnál paranoidabb felhasználók számára megnyugvást jelenthet.</p></div><div class=sect2><h3 id=_tanúsítványok_elõállítása>14.9.1. Tanúsítványok elõállítása<a class=anchor href=#_tanúsítványok_elõállítása></a></h3><div class=paragraph><p>A tanúsítványok létrehozására a következõ parancs áll rendelkezésre:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl req -new -nodes -out req.pem -keyout cert.pem</span>
Generating a 1024 bit RSA private key
................++++++
.......................................++++++
writing new private key to <span class=s1>&#39;cert.pem&#39;</span>
<span class=nt>-----</span>
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter enter <span class=s1>&#39;.&#39;</span>, the field will be left blank.
<span class=nt>-----</span>
Country Name <span class=o>(</span>2 letter code<span class=o>)</span> <span class=o>[</span>AU]:országnév <span class=o>(</span>kétbetűs kóddal<span class=o>)</span>
State or Province Name <span class=o>(</span>full name<span class=o>)</span> <span class=o>[</span>Some-State]:állam vagy tartomány teljes neve
Locality Name <span class=o>(</span>eg, city<span class=o>)</span> <span class=o>[]</span>:település neve
Organization Name <span class=o>(</span>eg, company<span class=o>)</span> <span class=o>[</span>Internet Widgits Pty Ltd]:szervezet neve
Organizational Unit Name <span class=o>(</span>eg, section<span class=o>)</span> <span class=o>[]</span>:szervezeti egység neve
Common Name <span class=o>(</span>eg, YOUR name<span class=o>)</span> <span class=o>[]</span>:általános név <span class=o>(</span>hálózati név!<span class=o>)</span>
Email Address <span class=o>[]</span>:e-mail cím

Please enter the following <span class=s1>&#39;extra&#39;</span> attributes
to be sent with your certificate request
A challenge password <span class=o>[]</span>:VALAMILYEN JELSZÓ
An optional company name <span class=o>[]</span>:egy másik szervezet neve</code></pre></div></div><div class=paragraph><p>Az adatok bekérésére elõtt megjelenõ figyelmeztetõ üzenet fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Itt a tanúsítvány igénylésével kapcsolatos információkat kell
megadnunk. Itt egy ún. <span class=s2>&#34;ismertetőnevet&#34;</span> <span class=o>(</span>Distinguished
Name, DN<span class=o>)</span> kell megadnunk. Ezen kívül van még néhány más mező is, de
ezeket akár üresen is hagyhatjuk. Néhány mezőnek van alapértelmezett
értéke, de ha oda egy pontot írunk, akkor kitöröljük.</code></pre></div></div><div class=paragraph><p>A "Common Name" mezõnél ellenõrzési okokból egy hálózati nevet, tehát a szerverünk nevét kell megadnunk. Ha nem így járunk el, akkor lényegében egy használhatatlan tanúsítványt kapunk. További opciók is elérhetõek, mint például a lejárati idõ (expire time) megadása, a titkosítási algoritmus megváltoztatása stb. Ezek teljes listája megtalálható az <a href="https://man.freebsd.org/cgi/man.cgi?query=openssl&amp;sektion=1&amp;format=html">openssl(1)</a> man oldalon.</p></div><div class=paragraph><p>Az elõbbi parancs kiadása után két állománynak kell létrejönnie az aktuális könyvtárban. A tanúsítványkérést, vagyis az <span class=filename>req.pem</span> állományt kell eljuttatnunk a tanúsítványok hitelesítésével foglakozó szervhez, aki majd érvényesíti az imént megadott adatainkat. A második, <span class=filename>cert.pem</span> nevû állomány a tanúsítványhoz tartozó privát kulcs, amit semmilyen körülmények között sem szabad kiadnunk. Ha ez mások kezébe kerül, akkor el tudnak játszani bennünket (vagy a szerverünket).</p></div><div class=paragraph><p>Amikor a hitelesítõ szerv aláírása nem feltétlenül szükséges, akkor készíthetünk egy saját magunk által aláírt tanúsítványt is. Ehhez elõször is generálnunk kell egy RSA-kulcsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl dsaparam -rand -genkey -out saját_RSA.kulcs 1024</span></code></pre></div></div><div class=paragraph><p>Most pedig készítsünk el a hitelesítõ szerv kulcsát is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl gendsa -des3 -out hitelesítõ.kulcs saját_RSA.kulcs</span></code></pre></div></div><div class=paragraph><p>Ezzel a kulccsal most gyártsunk le egy tanúsítványt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># openssl req -new -x509 -days 365 -key hitelesítõ.kulcs -out új.tanúsítvány</span></code></pre></div></div><div class=paragraph><p>Ekkor két új állomány keletkezik a könyvtárunkban: a hitelesítõ szerv aláírása, a <span class=filename>hitelesítõ.kulcs</span> és maga a tanúsítvány, az <span class=filename>új.tanúsítvány</span> állomány. Ezeket tegyük az <span class=filename>/etc</span> könyvtáron belül egy olyan könyvtárba, amelyet csak a <code>root</code> tud olvasni. A <code>chmod</code> paranccsal állítsunk be rá 0700-as kódú engedélyeket.</p></div></div><div class=sect2><h3 id=_példa_a_tanúsítványok_használatára>14.9.2. Példa a tanúsítványok használatára<a class=anchor href=#_példa_a_tanúsítványok_használatára></a></h3><div class=paragraph><p>Mire is jók ezek az állományok? Például kitûnõen alkalmazhatóak a Sendmail levelezõ szerverhez beérkezõ kapcsolatot titkosítására. Így lényegében felszámoljuk minden olyan felhasználó titkosítatlan módon zajló hitelesítését, aki a helyi levelezõ szerveren keresztül küldi a leveleit.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ez általában nem a legjobb megoldás, mivel egyes levelezõ kliensek hibát jeleneznek a felhasználónak, ha nem rendelkezik a tanúsítvánnyal. A tanúsítványok telepítésével kapcsolatban olvassuk el a szoftverhez adott leírást.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A helyi <span class=filename>.mc</span> állományba ezeket a sorokat kell beletenni:</p></div><div class="literalblock programlisting"><div class=content><pre>dnl SSL Options
define(`confCACERT_PATH&#39;,`/etc/certs&#39;)dnl
define(`confCACERT&#39;,`/etc/certs/új.tanúsítvány&#39;)dnl
define(`confSERVER_CERT&#39;,`/etc/certs/új.tanúsítvány&#39;)dnl
define(`confSERVER_KEY&#39;,`/etc/certs/hitelesítõ.kulcs&#39;)dnl
define(`confTLS_SRV_OPTIONS&#39;, `V&#39;)dnl</pre></div></div><div class=paragraph><p>Itt a <span class=filename>/etc/certs/</span> az a könyvtár, amit tanúsítványok és kulcsok helyi tárolására használunk. Végezetül még újra kell generálnunk a helyi <span class=filename>.cf</span> állományokat. Ezt a <span class=filename>/etc/mail</span> könyvtárban a <code>make install</code> parancs kiadásával könnyen elvégezhetjük. Miután ez megtörtént, akkor Sendmailhoz tartozó démont a <code>make restart</code> paraméterével indíthatjuk újra.</p></div><div class=paragraph><p>Ha minden jól ment, akkor a <span class=filename>/var/log/maillog</span> állományban nem találunk egyetlen hibaüzenetet sem, és a Sendmail is megjelenik a futó programok között.</p></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> segédprogrammal így probálhatjuk ki a levelezõ szervert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># telnet example.com 25</span>
Trying 192.0.34.166...
Connected to example.com.
Escape character is <span class=s1>&#39;^]&#39;</span><span class=nb>.</span>
220 example.com ESMTP Sendmail 8.12.10/8.12.10<span class=p>;</span> Tue, 31 Aug 2004 03:41:22 <span class=nt>-0400</span> <span class=o>(</span>EDT<span class=o>)</span>
ehlo example.com
250-example.com Hello example.com <span class=o>[</span>192.0.34.166], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
quit
221 2.0.0 example.com closing connection
Connection closed by foreign host.</code></pre></div></div><div class=paragraph><p>Ha itt megjelenik a "STARTTLS" sor, akkor mindent sikerült beállítanunk.</p></div></div></div></div><div class=sect1><h2 id=ipsec>14.10. VPN IPsec felett<a class=anchor href=#ipsec></a></h2><div class=sectionbody><div class=paragraph><p>VPN létrehozása FreeBSD átjárók használatával két olyan hálózat között, amelyeket egymástól az internet választ el.</p></div><div class=sect2><h3 id=_az_ipsec_bemutatása>14.10.1. Az IPsec bemutatása<a class=anchor href=#_az_ipsec_bemutatása></a></h3><div class=paragraph><p>Ebben a szakaszban az IPsec beállításának folyamatát vázoljuk fel. Az IPsec beállításához elengedhetetlen, hogy tisztában legyünk egy saját rendszermag fordításának alapjaival (lásd <a href=../kernelconfig/#kernelconfig>A FreeBSD rendszermag testreszabása</a>).</p></div><div class=paragraph><p>Az <em>IPsec</em> egy olyan protokoll, amely az Internet Protocol (IP) rétegére épül. Segítségével két vagy több számítógép képes biztonságos módon tartani egymással a kapcsolatot (innen ered a neve). A FreeBSD IPsec "hálózati protokollkészlete" a <a href=http://www.kame.net>KAME</a> implementációjára épül, mely egyaránt támogatja az IPv4 és IPv6 protokollcsaládokat.</p></div><div class=paragraph><p>Az IPsec két alprotokollból tevõdik össze:</p></div><div class=ulist><ul><li><p><em>A hasznos adat biztonságos becsomagolása (Encapsulated Security Payload, ESP)</em> során egy szimmetrikus kriptográfiai algoritmussal (mint például Blowfish, 3DES) titkosítjuk az IP-csomagok tartalmát, ezáltal megvédjük ezeket az illetéktelenektõl.</p></li><li><p>A <em>Hitelesítési fejléc (Authentication Header, AH)</em> használatával megakadályozzuk, hogy az illetéktelenek meghamisítsák az IP csomagok fejlécét. Ezt úgy érjük el, hogy kiszámolunk egy kriptográfiai ellenõrzõ összeget és az IP-csomagok fejlécének mezõire egy biztonságos függvénnyel generálunk valamilyen ujjlenyomatot. Az ez után következõ kiegészítõ fejléc tartalmazza ezt az ujjlenyomatot, amellyel a csomag hitelesíthetõ.</p></li></ul></div><div class=paragraph><p>Az ESP és az AH az alkalmazástól függõen használható együtt vagy külön-külön.</p></div><div class=paragraph><p>Az IPsec akár közvetlenül is használható két számítógép forgalmának titkosítására (ezt <em>Szállítási módnak (Transport Mode)</em> nevezik), vagy két alhálózat között építhetünk ki vele "virtuális tunneleket", ami remekül alkalmas két vállalati hálózat kommunikációjának bebiztosítására (ez a <em>Tunnel mód (Tunnel Mode)</em>). Ez utóbbit egyszerûen csak <em>Virtuális magánhálózatként (Virtual Private Network, VPN)</em> emlegetik. A FreeBSD IPsec alrendszerérõl az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipsec&amp;sektion=4&amp;format=html">ipsec(4)</a> man oldalon találhatunk további információkat.</p></div><div class=paragraph><p>A rendszermag IPsec támogatásának aktiválásához a következõ paramétereket kell beletennünk a konfigurációs állományba:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>options   IPSEC        <span class=c># IP biztonság</span>
device    crypto</code></pre></div></div><div class=paragraph><p>Ha szükségünk van a IPsec nyomkövetésére, a következõ beállítást is hozzátehetjük:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>options   IPSEC_DEBUG  <span class=c># az IP biztonság nyomkövetése</span></code></pre></div></div></div><div class=sect2><h3 id=_a_probléma>14.10.2. A probléma<a class=anchor href=#_a_probléma></a></h3><div class=paragraph><p>Semmilyen szabvány nem fogalmazza meg mi is számít VPN-nek. A virtuális magánhálózatok tucatnyi különbözõ technológiával valósíthatóak meg, de mindegyiknek megvan a maga erõssége és gyengesége. Ebben a szakaszban körvonalazunk egy ilyen helyzetet, valamint a benne felépített VPN megvalósításához alkalmazott stratégiákat.</p></div></div><div class=sect2><h3 id=_a_forgatókönyv_adott_egy_otthoni_és_egy_vállalati_hálózat_amelyek_külön_külön_csatlakoznak_az_internetre_és_vpn_használatával_ezeket_egyetlen_hálózatként_szeretnénk_használni>14.10.3. A forgatókönyv: adott egy otthoni és egy vállalati hálózat, amelyek külön-külön csatlakoznak az internetre, és VPN használatával ezeket egyetlen hálózatként szeretnénk használni<a class=anchor href=#_a_forgatókönyv_adott_egy_otthoni_és_egy_vállalati_hálózat_amelyek_külön_külön_csatlakoznak_az_internetre_és_vpn_használatával_ezeket_egyetlen_hálózatként_szeretnénk_használni></a></h3><div class=paragraph><p>Elõfeltételezéseink a következõek:</p></div><div class=ulist><ul><li><p>legalább két hálózatunk van;</p></li><li><p>magán belül mind a két hálózat IP-t használ;</p></li><li><p>mind a két hálózat egy FreeBSD átjárón keresztül csatlakozik az internethez;</p></li><li><p>a hálózatok átjárói legalább egy publikus IP-címmel rendelkeznek;</p></li><li><p>a hálózatok belsõ címei lehetnek publikus vagy privát IP-címek, nem számít. Fontos viszont, hogy ezek ne ütközzenek, vagyis ne használja egyszerre mind a kettõ a <code>192.168.1.x</code> címtartományt.</p></li></ul></div></div><div class=sect2><h3 id=_az_ipsec_beállítása_freebsd_alatt>14.10.4. Az IPsec beállítása FreeBSD alatt<a class=anchor href=#_az_ipsec_beállítása_freebsd_alatt></a></h3><div class=paragraph><p>Kezdésképpen a Portgyûjteménybõl telepítenünk kell a <a class=package href=https://cgit.freebsd.org/ports/tree/security/ipsec-tools/>security/ipsec-tools</a> portot. Ez a programcsomag rengeteg olyan alkalmazást tartalmaz, amely segítségünkre lehet a beállítások elvégzése során.</p></div><div class=paragraph><p>A következõ lépésben létre kell hoznunk két <a href="https://man.freebsd.org/cgi/man.cgi?query=gif&amp;sektion=4&amp;format=html">gif(4)</a> típusú pszeudoeszközt, melyeken keresztül a két hálózat között egy tunnel segítségével ki tudjuk építeni a szükséges kapcsolatot. Ehhez <code>root</code> felhasználóként futtassuk a következõ parancsokat (a <em>belsõ</em> és <em>külsõ</em> megnevezésû paramétereket cseréljük ki a valós belsõ és külsõ átjárók címeire):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig gif0 create</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig gif0 belsõ1 belsõ2</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig gif0 tunnel külsõ1 külsõ2</span></code></pre></div></div><div class=paragraph><p>Tekintsük például, hogy a vállalati LAN publikus IP-címe <code>172.16.5.4</code>, valamint a privát IP-címe <code>10.246.38.1</code>. Az otthoni LAN publikus IP-címe legyen most <code>192.168.1.12</code>, valamint a belsõ privát IP-címe pedig <code>10.0.0.5</code>.</p></div><div class=paragraph><p>Elsõre ez talán még nem teljesen érthetõ, ezért az <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> parancs használatával is nézzük meg a példában szereplõ hálózatok konfigurációját:</p></div><div class="literalblock programlisting"><div class=content><pre>Az elsõ átjáró:

gif0: flags=8051 mtu 1280
tunnel inet 172.16.5.4 --&gt; 192.168.1.12
inet6 fe80::2e0::81ff:fe02:5881%gif0 prefixlen 64 scopeid 0x6
inet 10.246.38.1 --&gt; 10.0.0.5 netmask 0xffffff00

A második átjáró:

gif0: flags=8051 mtu 1280
tunnel inet 192.168.1.12 --&gt; 172.16.5.4
inet 10.0.0.5 --&gt; 10.246.38.1 netmask 0xffffff00
inet6 fe80::250:bfff:fe3a:c1f%gif0 prefixlen 64 scopeid 0x4</pre></div></div><div class=paragraph><p>Miután elvégeztük az iménti beállításokat, a <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> paranccsal már mind a két privát IP-tartománynak elérhetõnek kell lennie, ahogy azt az alábbi példa is érzékeltetni kívánja:</p></div><div class="literalblock programlisting"><div class=content><pre>otthoni-halo# ping 10.0.0.5
PING 10.0.0.5 (10.0.0.5): 56 data bytes
64 bytes from 10.0.0.5: icmp_seq=0 ttl=64 time=42.786 ms
64 bytes from 10.0.0.5: icmp_seq=1 ttl=64 time=19.255 ms
64 bytes from 10.0.0.5: icmp_seq=2 ttl=64 time=20.440 ms
64 bytes from 10.0.0.5: icmp_seq=3 ttl=64 time=21.036 ms
--- 10.0.0.5 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 19.255/25.879/42.786/9.782 ms

vallalati-halo# ping 10.246.38.1
PING 10.246.38.1 (10.246.38.1): 56 data bytes
64 bytes from 10.246.38.1: icmp_seq=0 ttl=64 time=28.106 ms
64 bytes from 10.246.38.1: icmp_seq=1 ttl=64 time=42.917 ms
64 bytes from 10.246.38.1: icmp_seq=2 ttl=64 time=127.525 ms
64 bytes from 10.246.38.1: icmp_seq=3 ttl=64 time=119.896 ms
64 bytes from 10.246.38.1: icmp_seq=4 ttl=64 time=154.524 ms
--- 10.246.38.1 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 28.106/94.594/154.524/49.814 ms</pre></div></div><div class=paragraph><p>Az elvárásainknak megfelelõen tehát a privát címeken mind a két oldalnak képesnek kell lennie ICMP csomagokat küldenie és fogadnia. A következõ lépésben meg kell mondanunk az átjáróknak hogyan irányítsák a csomagokat a két hálózat közti forgalom megfelelõ áramlásához. Ezt az alábbi paranccsal elérhetjük el:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vallalati-halo# route add 10.0.0.0 10.0.0.5 255.255.255.0</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vallalati-halo# route add net 10.0.0.0: gateway 10.0.0.5</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># otthoni-halo# route add 10.246.38.0 10.246.38.1 255.255.255.0</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># otthoni-halo# route add host 10.246.38.0: gateway 10.246.38.1</span></code></pre></div></div><div class=paragraph><p>Itt már a belsõ gépeket az átjárókról és az átjárók mögül egyaránt el tudjuk érni. A következõ példa alapján errõl könnyedén meg is tudunk gyõzõdni:</p></div><div class="literalblock programlisting"><div class=content><pre>vallalati-halo# ping 10.0.0.8
PING 10.0.0.8 (10.0.0.8): 56 data bytes
64 bytes from 10.0.0.8: icmp_seq=0 ttl=63 time=92.391 ms
64 bytes from 10.0.0.8: icmp_seq=1 ttl=63 time=21.870 ms
64 bytes from 10.0.0.8: icmp_seq=2 ttl=63 time=198.022 ms
64 bytes from 10.0.0.8: icmp_seq=3 ttl=63 time=22.241 ms
64 bytes from 10.0.0.8: icmp_seq=4 ttl=63 time=174.705 ms
--- 10.0.0.8 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 21.870/101.846/198.022/74.001 ms

otthoni-halo# ping 10.246.38.107
PING 10.246.38.1 (10.246.38.107): 56 data bytes
64 bytes from 10.246.38.107: icmp_seq=0 ttl=64 time=53.491 ms
64 bytes from 10.246.38.107: icmp_seq=1 ttl=64 time=23.395 ms
64 bytes from 10.246.38.107: icmp_seq=2 ttl=64 time=23.865 ms
64 bytes from 10.246.38.107: icmp_seq=3 ttl=64 time=21.145 ms
64 bytes from 10.246.38.107: icmp_seq=4 ttl=64 time=36.708 ms
--- 10.246.38.107 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 21.145/31.721/53.491/12.179 ms</pre></div></div><div class=paragraph><p>A tunnelek beállítása volt igazából a könnyebb rész, egy biztonságos összeköttetés kialakítása azonban már valamivel komolyabb folyamatot rejt magában. A most következõ konfigurációban erre "elõre ismert" (vagyis pre-shared, PSK) RSA-kulcsokat fogunk használni. A konkrét IP-címektõl eltekintve az átjárókon a <span class=filename>/usr/local/etc/racoon/racoon.conf</span> állományok hasonlóan fognak kinézni, nagyjából valahogy így:</p></div><div class="literalblock programlisting"><div class=content><pre>path    pre_shared_key &#34;/usr/local/etc/racoon/psk.txt&#34;; # az ismert kulcsot tartalmazó állomány helye
log     debug;	# a naplózás részletességének beállítása: ha végeztünk a teszteléssel és a hibakereséssel, akkor állítsuk át a &#39;notify&#39; értékre

padding  # ezeket ne nagyon változtassuk meg
{
        maximum_length  20;
        randomize       off;
        strict_check    off;
        exclusive_tail  off;
}

timer	# idõzítési beállítások, állítsuk be igény szerint
{
        counter         5;
        interval        20 sec;
        persend         1;
#       natt_keepalive  15 sec;
        phase1          30 sec;
        phase2          15 sec;
}

listen	# cím [port], ahol a racoon majd válaszolni fog
{
        isakmp          172.16.5.4 [500];
        isakmp_natt     172.16.5.4 [4500];
}

remote  192.168.1.12 [500]
{
        exchange_mode   main,aggressive;
        doi             ipsec_doi;
        situation       identity_only;
        my_identifier   address 172.16.5.4;
        peers_identifier        address 192.168.1.12;
        lifetime        time 8 hour;
        passive         off;
        proposal_check  obey;
#       nat_traversal   off;
        generate_policy off;

                        proposal {
                                encryption_algorithm    blowfish;
                                hash_algorithm          md5;
                                authentication_method   pre_shared_key;
                                lifetime time           30 sec;
                                dh_group                1;
                        }
}

sainfo  (address 10.246.38.0/24 any address 10.0.0.0/24 any) # address $hálózat/$hálózati_maszk $típus address $hálózat/$hálózati_maszk $típus
 		  # (a $típus lehet &#34;any&#34; vagy &#34;esp&#34;)
{		  # a $hálózat a két összekapcsolni kívánt belsõ hálózat legyen
        pfs_group       1;
        lifetime        time    36000 sec;
        encryption_algorithm    blowfish,3des,des;
        authentication_algorithm        hmac_md5,hmac_sha1;
        compression_algorithm   deflate;
}</pre></div></div><div class=paragraph><p>A példában szereplõ összes opció részletes kifejtése jóval meghaladná ezen leírás kereteit, ezért a bõvebb információkkal kapcsolatban inkább a racoon beállításaihoz tartozó man oldal elolvasását javasoljuk.</p></div><div class=paragraph><p>A gépek közti hálózati forgalom titkosításához be kell még állítanunk egy SPD házirendet is, így a FreeBSD és a racoon képes kódolni és dekódolni a csomagokat.</p></div><div class=paragraph><p>Ezt a most következõ, a vállalati átjárón találhatóhoz hasonló egyszerû shell szkripttel tudjuk elvégezni. Ezt az állományt a rendszer indításakor fogjuk felhasználni, melyet <span class=filename>/usr/local/etc/racoon/setkey.conf</span> néven mentsünk el:</p></div><div class="literalblock programlisting"><div class=content><pre>flush;
spdflush;
# Az otthoni hálózati felé
spdadd 10.246.38.0/24 10.0.0.0/24 any -P out ipsec esp/tunnel/172.16.5.4-192.168.1.12/use;
spdadd 10.0.0.0/24 10.246.38.0/24 any -P in ipsec esp/tunnel/192.168.1.12-172.16.5.4/use;</pre></div></div><div class=paragraph><p>Ahogy ezzel megvagyunk, a racoon az egyes átjárókon a következõ paranccsal indítható el:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/racoon -F -f /usr/local/etc/racoon/racoon.conf -l /var/log/racoon.log</span></code></pre></div></div><div class=paragraph><p>A parancs eredménye ennek megfelelõen nagyjából a következõ lesz:</p></div><div class="literalblock programlisting"><div class=content><pre>vallalati-halo# /usr/local/sbin/racoon -F -f /usr/local/etc/racoon/racoon.conf
Foreground mode.
2006-01-30 01:35:47: INFO: begin Identity Protection mode.
2006-01-30 01:35:48: INFO: received Vendor ID: KAME/racoon
2006-01-30 01:35:55: INFO: received Vendor ID: KAME/racoon
2006-01-30 01:36:04: INFO: ISAKMP-SA established 72.16.5.4[500]-192.168.1.12[500] spi:623b9b3bd2492452:7deab82d54ff704a
2006-01-30 01:36:05: INFO: initiate new phase 2 negotiation: 72.16.5.4[0]192.168.1.12[0]
2006-01-30 01:36:09: INFO: IPsec-SA established: ESP/Tunnel 92.168.1.12[0]-&gt;172.16.5.4[0] spi=28496098(0x1b2d0e2)
2006-01-30 01:36:09: INFO: IPsec-SA established: ESP/Tunnel 172.16.5.4[0]-&gt;192.168.1.12[0] spi=47784998(0x2d92426)
2006-01-30 01:36:13: INFO: respond new phase 2 negotiation: 172.16.5.4[0]192.168.1.12[0]
2006-01-30 01:36:18: INFO: IPsec-SA established: ESP/Tunnel 192.168.1.12[0]-&gt;172.16.5.4[0] spi=124397467(0x76a279b)
2006-01-30 01:36:18: INFO: IPsec-SA established: ESP/Tunnel 172.16.5.4[0]-&gt;192.168.1.12[0] spi=175852902(0xa7b4d66)</pre></div></div><div class=paragraph><p>A tunnel megfelelõ mûködését úgy tudjuk ellenõrizni, ha átváltunk egy másik konzolra és a <a href="https://man.freebsd.org/cgi/man.cgi?query=tcpdump&amp;sektion=1&amp;format=html">tcpdump(1)</a> program segítségével figyeljük a hálózati forgalmat. A példában szereplõ <code>em0</code> interfészt természetesen ne felejtsük el kicserélni a megfelelõ eszköz nevére.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tcpdump -i em0 host 172.16.5.4 and dst 192.168.1.12</span></code></pre></div></div><div class=paragraph><p>Ennek hatására az alábbiakhoz hasonló adatoknak kellene megjelennie a konzolon. Amennyiben nem ez történik, valamilyen hiba történt, ezért meg kell keresnünk azt a visszakapott adatok alapján.</p></div><div class="literalblock programlisting"><div class=content><pre>01:47:32.021683 IP vallalatihalozat.com &gt; 192.168.1.12.otthonihalozat.com: ESP(spi=0x02acbf9f,seq=0xa)
01:47:33.022442 IP vallalatihalozat.com &gt; 192.168.1.12.otthonihalozat.com: ESP(spi=0x02acbf9f,seq=0xb)
01:47:34.024218 IP vallalatihalozat.com &gt; 192.168.1.12.otthonihalozat.com: ESP(spi=0x02acbf9f,seq=0xc)</pre></div></div><div class=paragraph><p>Itt már mind a két hálózatnak elérhetõnek kell lennie és egyként kell látszódnia. A hálózatokat ezen felül még érdemes külön védeni egy tûzfallal is. Ilyenkor a csomagok két hálózati közti zavartalan oda-vissza vándorlásához további szabályokat kell még felvennünk a tûzfal szabályrendszerébe. A <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a> tûzfal esetén ez a következõ sorok hozzáadását jelenti a tûzfal konfigurációs állományához:</p></div><div class="literalblock programlisting"><div class=content><pre>ipfw add 00201 allow log esp from any to any
ipfw add 00202 allow log ah from any to any
ipfw add 00203 allow log ipencap from any to any
ipfw add 00204 allow log udp from any 500 to any</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A szabályok számozását mindig az adott gép aktuális beállításainak megfelelõen kell módosítani.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=pf&amp;sektion=4&amp;format=html">pf(4)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> felhasználók számára ehhez a következõ parancsot javasoljuk:</p></div><div class="literalblock programlisting"><div class=content><pre>pass in quick proto esp from any to any
pass in quick proto ah from any to any
pass in quick proto ipencap from any to any
pass in quick proto udp from any port = 500 to any port = 500
pass in quick on gif0 from any to any
pass out quick proto esp from any to any
pass out quick proto ah from any to any
pass out quick proto ipencap from any to any
pass out quick proto udp from any port = 500 to any port = 500
pass out quick on gif0 from any to any</pre></div></div><div class=paragraph><p>Végezetül a következõ sor hozzáadásával engedélyezzük az <span class=filename>/etc/rc.conf</span> állományban a VPN indítását a rendszer indítása során:</p></div><div class="literalblock programlisting"><div class=content><pre>ipsec_enable=&#34;YES&#34;
ipsec_program=&#34;/usr/local/sbin/setkey&#34;
ipsec_file=&#34;/usr/local/etc/racoon/setkey.conf&#34; # engedélyezzük az spd házirend beállítását a rendszer indításakor
racoon_enable=&#34;yes&#34;</pre></div></div></div></div></div><div class=sect1><h2 id=openssh>14.11. OpenSSH<a class=anchor href=#openssh></a></h2><div class=sectionbody><div class=paragraph><p>Az OpenSSH olyan hálózati kapcsolódási eszközök összessége, amivel biztonságos módon érhetünk el távoli számítógépeket. Az <code>rlogin</code>, <code>rsh</code>, <code>rcp</code> és a <code>telnet</code> direkt kiváltására használható. Emellett SSH-n keresztül TCP/IP kapcsolatok is biztonságosan bújtathatóak vagy küldhetõek tovább.</p></div><div class=paragraph><p>Az OpenSSH-t az OpenBSD projekt tartja karban, és az SSH 1.2.12 verziójára épül hibajavításokkal és frissítésekkel egyetemben. Az SSH 1 és 2 protokollokkal egyaránt kompatibilis.</p></div><div class=sect2><h3 id=_az_openssh_használatának_elõnyei>14.11.1. Az OpenSSH használatának elõnyei<a class=anchor href=#_az_openssh_használatának_elõnyei></a></h3><div class=paragraph><p>A hétköznapi esetben, vagyis amikor a <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> vagy <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a> alkalmazásokat használjuk, az adatok titkosítatlan formában közlekednek a hálózaton. A szerver és a kliens közé bárhova becsatlakozó hálózati kíváncsiskodók így könnyedén el tudják lopni a felhasználói nevünket és jelszavunkat, vagy lényegében bármilyen adatot, ami az adott munkamenetben megfordul. Az OpenSSH ennek kivédésére kínál fel különféle hitelesítési és titkosítási eszközöket.</p></div></div><div class=sect2><h3 id=_az_sshd_engedélyezése>14.11.2. Az sshd engedélyezése<a class=anchor href=#_az_sshd_engedélyezése></a></h3><div class=paragraph><p>Az sshd a FreeBSD telepítésekor jelentkezõ <code>Standard</code> lehetõségek egyike. Az sshd engedélyezését úgy tudjuk kideríteni, ha az <span class=filename>rc.conf</span> állományban megkeressük a következõ sort:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nv>sshd_enable</span><span class=o>=</span><span class=s2>&#34;YES&#34;</span></code></pre></div></div><div class=paragraph><p>Ez tölti be a rendszer indításakor az <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a>-t, az OpenSSH démonát. Vagy az <span class=filename>/etc/rc.d/sshd</span> <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> szkript segítségével is elindíthatjuk az OpenSSH-t:</p></div><div class="literalblock programlisting"><div class=content><pre>/etc/rc.d/sshd start</pre></div></div></div><div class=sect2><h3 id=_az_ssh_kliens>14.11.3. Az SSH kliens<a class=anchor href=#_az_ssh_kliens></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> segédprogram az <a href="https://man.freebsd.org/cgi/man.cgi?query=rlogin&amp;sektion=1&amp;format=html">rlogin(1)</a> programhoz hasonlóan mûködik.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ssh felhasználó@gép.hu</span>
Host key not found from the list of known hosts.  Are you sure you
want to <span class=k>continue </span>connecting <span class=o>(</span><span class=nb>yes</span>/no<span class=o>)</span>?  <span class=nb>yes </span>Host
<span class=s1>&#39;gép.hu&#39;</span> added to the list of known hosts.
felhasználó@gép.hu<span class=s1>&#39;s password:
*******</span></code></pre></div></div><div class=paragraph><p>Az üzenetek fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Nem találtam meg a gépet az ismert gépek között.  Biztosan csatlakozni
akarunk hozzá <span class=o>(</span>igen/nem<span class=o>)</span>?  igen A <span class=s1>&#39;gép.hu&#39;</span>
felkerült az ismert gépek közé.
Adja meg a felhasználó@gép.hu jelszavát:</code></pre></div></div><div class=paragraph><p>Bejelentkezés után minden ugyanolyan, mintha az <code>rlogin</code> vagy a <code>telnet</code> programokat használtuk volna. Az SSH egy kulcs segítségével próbálja azonosítani a számítógépeket, ezzel ellenõrzi a szerver hitelességét a kliensek csatlakozásakor. A felhasználónak ilyenkor elõször mindig <code>yes</code> választ kell adnia. A késõbbi bejelentkezési kísérletek pedig majd mindig az így kapott kulccsal történnek. Ha eltérne a kulcs, akkor az SSH kliens erre figyelmeztetni fog minket. A kulcsok a <span class=filename>~/.ssh/known_hosts</span> vagy az SSH v2 protokoll esetén a <span class=filename>~/.ssh/known_hosts2</span> állományba kerülnek elmentésre.</p></div><div class=paragraph><p>Alapértelmezés szerint az OpenSSH szerverek csak SSH v2 kapcsolatokat fogadnak el. Lehetõség szerint a kliens is ezt a változatot fogja használni, de ha nem sikerül, akkor megpróbálkozik a v1-el. A kliensnek a <code>-1</code> vagy <code>-2</code> opciók segítségével elõ is lehet írni, hogy az elsõ vagy a második változatot használja. A kliensben az elsõ változat támogatását csupán a régebbi verziók kompatibilitása miatt tartják karban.</p></div></div><div class=sect2><h3 id=_biztonságos_másolás>14.11.4. Biztonságos másolás<a class=anchor href=#_biztonságos_másolás></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> parancs az <a href="https://man.freebsd.org/cgi/man.cgi?query=rcp&amp;sektion=1&amp;format=html">rcp(1)</a> parancshoz hasonlóan mûködik: egyik géprõl másol a másikra, biztonságosan.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c>#  scp felhasználó@gép.hu:/COPYRIGHT COPYRIGHT</span>
felhasználó@gép.hu<span class=s1>&#39;s password: *******
COPYRIGHT            100% |*****************************|  4735
00:00
#</span></code></pre></div></div><div class=paragraph><p>Mivel a kulcsot már ismerjük ehhez a távoli géphez (az elõbbi példából), ezért az <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> használatakor már ezzel hitelesítünk.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> paraméterei hasonlóak a <a href="https://man.freebsd.org/cgi/man.cgi?query=cp&amp;sektion=1&amp;format=html">cp(1)</a> parancséhoz: elsõ helyen az állomány vagy állományok neveit adjuk meg, a másodikon pedig a célt. Mivel az állományokat a hálózaton SSH-n keresztül küldik át, ezért az állományok neveit <code><em>felhasználó@gép</em>:_elérési_út_</code> formában kell megadni.</p></div></div><div class=sect2><h3 id=_beállítások>14.11.5. Beállítások<a class=anchor href=#_beállítások></a></h3><div class=paragraph><p>Az OpenSSH démon és kliens rendszerszintû konfigurációs állományai az <span class=filename>/etc/ssh</span> könyvtárban találhatóak.</p></div><div class=paragraph><p>Az <span class=filename>ssh_config</span> tartalmazza a kliens beállításait, miközben az <span class=filename>sshd_config</span> tartalmazza a démonét.</p></div><div class=paragraph><p>Emellett az <span class=filename>rc.conf</span> állományban megadható <code>sshd_program</code> (ez alapból a <span class=filename>/usr/sbin/sshd</span>) és <code>sshd_flags</code> opciókkal további beállítási szinteket nyújtanak.</p></div></div><div class=sect2><h3 id=security-ssh-keygen>14.11.6. ssh-keygen<a class=anchor href=#security-ssh-keygen></a></h3><div class=paragraph><p>Jelszavak helyett az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> programmal a felhasználók azonosítására DSA- vagy RSA-kulcsokat tudunk készíteni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh-keygen <span class=nt>-t</span> dsa
Generating public/private dsa key pair.
Enter file <span class=k>in </span>which to save the key <span class=o>(</span>/home/felhasználó/.ssh/id_dsa<span class=o>)</span>:
Created directory <span class=s1>&#39;/home/felhasználó/.ssh&#39;</span><span class=nb>.</span>
Enter passphrase <span class=o>(</span>empty <span class=k>for </span>no passphrase<span class=o>)</span>:
Enter same passphrase again:
Your identification has been saved <span class=k>in</span> /home/felhasználó/.ssh/id_dsa.
Your public key has been saved <span class=k>in</span> /home/felhasználó/.ssh/id_dsa.pub.
The key fingerprint is:
bb:48:db:f2:93:57:80:b6:aa:bc:f5:d5:ba:8f:79:17 felhasználó@gép.hu</code></pre></div></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> ekkor a hitelesítésre létrehoz egy publikus és egy privát kulcsból álló párt. A privát kulcs a <span class=filename>~/.ssh/id_dsa</span> vagy <span class=filename>~/.ssh/id_rsa</span> állományba kerül, miközben a publikus kulcs a <span class=filename>~/.ssh/id_dsa.pub</span> vagy <span class=filename>~/.ssh/id_rsa.pub</span> lesz attól függõen, hogy DSA vagy RSA a kulcs típusa. A módszer mûködéséhez a publikus DSA- vagy RSA-kulcsot a távoli számítógép <span class=filename>~/.ssh/authorized_keys</span> állományába kell bemásolni.</p></div><div class=paragraph><p>Így tehát a távoli számítógépre jelszavak alkalmazása helyett SSH-kulccsal tudunk belépni.</p></div><div class=paragraph><p>Ha az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> parancsnak megadunk egy jelmondatot is, akkor a felhasználó a privát kulcsát csak ennek megadásával tudja használni. A hosszú jelmondatok állandó beirogatásától a <a href=#security-ssh-agent>Az ssh-agent és az ssh-add</a> szakaszban hamarosan bemutatásra került <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> igyekszik megkímélni minket.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>A különbözõ opciók és állományok eltérhetnek a számítógépünkre telepített OpenSSH verziójától függõen. Ilyen esetben javasolt felkeresni az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> man oldalát.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=security-ssh-agent>14.11.7. Az ssh-agent és az ssh-add<a class=anchor href=#security-ssh-agent></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> segédprogramokkal be tudjuk tölteni az SSH-kulcsokat a memóriába, amivel elkerülhetjük a jelmondat állandó begépelését.</p></div><div class=paragraph><p>A hitelesítést az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> program kezeli a betöltött privát kulcsok alapján. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> használatával egy másik programot is elindhatunk, egy parancsértelmezõtõl kezdve egy ablakkezelõig szinte bármit.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> programot úgy tudjuk egy parancsértelmezõben használni, hogy elõször is elindítjuk vele az adott parancsértelmezõt. Ezután az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> lefuttatásával hozzá kell adnunk egy identitást, annak jelmondatának megadásával. Miután ezeket megtettük, a felhasználó bármelyik olyan távoli gépre be tud jelentkezni, ahol a publikus kulcsát ismerik. Például:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh-agent csh
% ssh-add
Enter passphrase <span class=k>for</span> /home/felhasználó/.ssh/id_dsa:
Identity added: /home/felhasználó/.ssh/id_dsa <span class=o>(</span>/home/felhasználó/.ssh/id_dsa<span class=o>)</span>
%</code></pre></div></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> programot X11-el úgy tudjuk használni, ha az <span class=filename>~/.xinitrc</span> állományba tesszük bele. Ezzel az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> az összes X11-ben indított program számára rendelkezésre áll. Példának vegyük ezt az <span class=filename>~/.xinitrc</span> állományt:</p></div><div class="literalblock programlisting"><div class=content><pre>exec ssh-agent startxfce4</pre></div></div><div class=paragraph><p>Így az X11 indulásakor mindig elindul az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a>, amely pedig elindítja az XFCE alkalmazást. Miután átírtuk a saját állományunkat, a rendszer életbeléptetéséhez indítsuk újra az X11-et, az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> futtatásával pedig töltsük be az összes SSH-kulcsunkat.</p></div></div><div class=sect2><h3 id=security-ssh-tunneling>14.11.8. Tunnelezés SSH-val<a class=anchor href=#security-ssh-tunneling></a></h3><div class=paragraph><p>Az OpenSSH-val létre tudunk hozni egy tunnelt, amellyel egy másik protokoll adatait tudjuk titkosított módon becsomagolni.</p></div><div class=paragraph><p>Az alábbi parancs arra utasítja az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> programot, hogy hozzon létre egy tunnelt a telnet használatához:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 5023:localhost:23 felhasználó@izé.mizé.hu
%</code></pre></div></div><div class=paragraph><p>Az <code>ssh</code> parancsnak a következõ kapcsolókat adtuk meg:</p></div><div class=dlist><dl><dt class=hdlist1><code>-2</code></dt><dd><p>Az <code>ssh</code> parancs a protokoll második változatát használja. (Ne adjuk meg, ha régi SSH szerverekkel dolgozunk.)</p></dd><dt class=hdlist1><code>-N</code></dt><dd><p>Tunnel létrehozása. Ha nem adjuk meg, akkor az <code>ssh</code> egy hagyományos munkamenet felépítését kezdi meg.</p></dd><dt class=hdlist1><code>-f</code></dt><dd><p>Az <code>ssh</code> a háttérben fusson.</p></dd><dt class=hdlist1><code>-L</code></dt><dd><p>Egy helyi tunnel a <em>helyiport:távoligép:távoliport</em> felírásban.</p></dd><dt class=hdlist1><code>felhasználó@izé.mizé.hu</code></dt><dd><p>A távoli SSH szerver.</p></dd></dl></div><div class=paragraph><p>Az SSH által létrehozott járatok úgy mûködnek, hogy létrehozunk egy csatlakozást a <code>localhost</code> (a helyi gép) megadott portján. Ezután minden olyan kapcsolatot, ami a helyi gép adott portjára érkezik, SSH-n keresztül átirányítunk a távoli gép portjára.</p></div><div class=paragraph><p>Ebben a példában a helyi gép <em>5023</em> portját átirányítjuk a helyi gép <em>23</em> portjára. Mivel a <em>23</em> a telnet portja, ezért az így definiált SSH járattal egy biztonságos telnet munkamenetet hozunk létre.</p></div><div class=paragraph><p>Ezen a módon tetszõleges nem biztonságos TCP protokollt, például SMTP-t, POP3-at, FTP-t stb. be tudunk csomagolni.</p></div><div class=exampleblock><div class=title>Példa 1. Biztonságos tunnel létrehozása SSH-val SMTP-hez</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 5025:localhost:25 felhasználó@levelező.szerver.hu
felhasználó@levelező.szerver.hu<span class=s1>&#39;s password: *****
% telnet localhost 5025
Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;</span>^]<span class=s1>&#39;.
220 levelező.szerver.hu ESMTP</span></code></pre></div></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> és további felhasználói hozzáférések alkalmazásával ezen a módon ki tudunk alakítani egy minden további problémától és zûrtõl mentes SSH tunnelezési környezetet. A jelszavak helyett kulcsokat használunk és minden tunnel külön felhasználóként is futtatható.</p></div></div></div><div class=sect3><h4 id=_gyakorlati_példák_a_tunnelek_használatára>14.11.8.1. Gyakorlati példák a tunnelek használatára<a class=anchor href=#_gyakorlati_példák_a_tunnelek_használatára></a></h4><div class=sect4><h5 id=_egy_pop3_szerver_biztonságos_elérése>14.11.8.1.1. Egy POP3 szerver biztonságos elérése<a class=anchor href=#_egy_pop3_szerver_biztonságos_elérése></a></h5><div class=paragraph><p>Tegyük fel, hogy a munkahelyünkön van egy SSH szerver, amire kívülrõl lehet csatlakozni, illetve vele egy hálózatban van egy POP3 levelezõ szerver is. A munkahelyünk és az otthonunk között levõ hálózati útvonalat részben vagy teljesen nem tartjuk megbízhatónak. Ezért az e-mailjeinket valamilyen biztonságos módon szeretnénk elérni. Ezt úgy tudjuk megvalósítani, ha otthonról csatlakozunk a munkahelyen levõ SSH szerverre és ezen keresztül érjük a levelezõ szervert.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 2110:levél.gép.hu:110 felhasználó@ssh-szerver.gép.hu
felhasználó@ssh-szerver.gép.hu<span class=s1>&#39;s password: ******</span></code></pre></div></div><div class=paragraph><p>Miután a tunnel létrejött és mûködõképes, állítsuk be a levelezõ kliensünkben, hogy a POP3 kéréseket a <code>localhost</code> 2110 portjára küldje. Innen pedig biztonságos módon megy tovább a <code>levél.gép.hu</code> címre.</p></div></div><div class=sect4><h5 id=_egy_szigorú_tûzfal_megkerülése>14.11.8.1.2. Egy szigorú tûzfal megkerülése<a class=anchor href=#_egy_szigorú_tûzfal_megkerülése></a></h5><div class=paragraph><p>Egyes hálózati adminisztrátorok túlságosan szigorú szabályokat adnak meg a tûzfalban, és nem csak a bejövõ kapcsolatokat szûrik, hanem a kimenõket is. A távoli gépekhez csak a 22 (SSH) és 80 (böngészés) portjaikon tudunk csatlakozni.</p></div><div class=paragraph><p>Mi viszont szeretnénk más (nem egészen a munkánkkal kapcsolatos) szolgáltatásokat is elérni, például egy Ogg Vorbis szerverrõl zenét hallgatni. Ehhez a szerverhez viszont csak akkor tudnánk csatlakozni, ha a 22 vagy 80 portokon üzemelne.</p></div><div class=paragraph><p>Ezt a problémát úgy oldhatjuk meg, ha felépítünk egy SSH kapcsolatot a hálózatunk tûzfalán kívül levõ számítógéppel és segítségével átbújunk az Ogg Vorbis szerverhez.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ssh <span class=nt>-2</span> <span class=nt>-N</span> <span class=nt>-f</span> <span class=nt>-L</span> 8888:zene.gép.hu:8000 felhasználó@tűzfalazatlan-rendszer.gép.org
felhasználó@tűzfalazatlan-rendszer.gép.org<span class=s1>&#39;s password: *******</span></code></pre></div></div><div class=paragraph><p>A zenelejátszó kliensüknek adjuk meg a <code>localhost</code> 8888 portját, amely pedig a tûzfal sikeres kijátszásával továbbítódik a <code>zene.gép.hu</code> 8000-res portjára.</p></div></div></div></div><div class=sect2><h3 id=_az_allowusers_felhasználói_beállítás>14.11.9. Az <code>AllowUsers</code> felhasználói beállítás<a class=anchor href=#_az_allowusers_felhasználói_beállítás></a></h3><div class=paragraph><p>Gyakran nem árt korlátozni a felhasználók bejelentkezését. Az <code>AllowUsers</code> erre tökéletesen megfelel. Például, ha csak <code>192.168.1.32</code> címrõl engedjük bejelentkezni a <code>root</code> felhasználót, akkor ehhez valami ilyesmit kell beírnunk az <span class=filename>/etc/ssh/sshd_config</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>AllowUsers root@192.168.1.32</pre></div></div><div class=paragraph><p>Ezzel pedig csupán nevének megadásával engedélyezzük az <code>admin</code> felhasználó bejelentkezését (bárhonnan):</p></div><div class="literalblock programlisting"><div class=content><pre>AllowUsers admin</pre></div></div><div class=paragraph><p>Egy sorban több felhasználó is megadható, mint például:</p></div><div class="literalblock programlisting"><div class=content><pre>AllowUsers root@192.168.1.32 admin</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ilyenkor ne felejtsük el megadni az összes bejelentkezésre (valamilyen formában) jogosult felhasználót megadni, máskülönben kizárjuk ezeket.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Miután elvégeztük a szükséges változtatásokat az <span class=filename>/etc/ssh/sshd_config</span> állományban, utasítsuk az <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> démont a konfigurációs állományok újraolvasására:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/sshd reload</span></code></pre></div></div></div><div class=sect2><h3 id=_ajánlott_olvasnivalók_angolul>14.11.10. Ajánlott olvasnivalók (angolul)<a class=anchor href=#_ajánlott_olvasnivalók_angolul></a></h3><div class=paragraph><p><a href=http://www.openssh.com/>OpenSSH</a></p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=scp&amp;sektion=1&amp;format=html">scp(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1&amp;format=html">ssh-keygen(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1&amp;format=html">ssh-agent(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh-add&amp;sektion=1&amp;format=html">ssh-add(1)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh_config&amp;sektion=5&amp;format=html">ssh_config(5)</a></p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=sftp-server&amp;sektion=8&amp;format=html">sftp-server(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd_config&amp;sektion=5&amp;format=html">sshd_config(5)</a></p></div></div></div></div><div class=sect1><h2 id=fs-acl>14.12. Az állományrendszerek hozzáféréseit vezérlõ listák<a class=anchor href=#fs-acl></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD 5.0 és késõbbi változatai különbözõ fejlesztéseket hoztak az állományrendszerekben, például a pillanatképek készítése vagy a hozzáférés-vezérlési listák (Access Control List, ACL-ek) támogatása.</p></div><div class=paragraph><p>A hozzáférés-vezérlési listák a szabványos UNIX®-os engedély modellt bõvítik ki egy igen kompatibilis (POSIX®.1e) módon. Használatával a rendszergazdák egy sokkal kifinomultabb biztonsági modellt tudhatnak a kezük ügyében.</p></div><div class=paragraph><p>Az UFS állományrendszerek ACL támogatását úgy tudjuk engedélyezni, ha a rendszermagot az</p></div><div class="literalblock programlisting"><div class=content><pre>options UFS_ACL</pre></div></div><div class=paragraph><p>paraméterrel fordítjuk le. Amennyiben ezt nem fordítottuk bele, akkor az ACL támogatással rendelkezõ állományrendszerek csatlakoztatása során egy figyelmeztetést kapunk. Ez az opció a <span class=filename>GENERIC</span> rendszermag része. Az ACL az állományrendszeren engedélyezett kiterjesztett tulajdonságokra támaszkodik. Ezeket a kiterjesztett tulajdonságokat a következõ generációs UNIX® állományrendszer, az UFS2 már alapból ismeri.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>UFS1 típusú állományrendszereken sokkal nagyobb a kiterjesztett tulajdonságok kezelésének költsége, mint az UFS2 esetében. Az UFS2 jóval nagyobb teljesítménnyel képes dolgozni a kiterjesztett tulajdonságokkal. Emiatt a hozzáférés-vezérlési listák használatához az UFS2 sokkal inkább ajánlott, mint az UFS1.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Az ACL használatát a csatlakoztatáskor megadott <code>acls</code> beállítással engedélyezhetjük, amelyet érdemes felvennünk az <span class=filename>/etc/fstab</span> állományba. Ha a <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> segédprogrammal az állományrendszer fejlécében levõ szuperblokk ACL kapcsolóját átírjuk, akkor ez a beállítás automatikussá tehetõ. A szuperblokk használata több okból is ajánlatos:</p></div><div class=ulist><ul><li><p>A csatlakoztatáskor megadott ACL beállítás nem változtatható egy egyszerû újracsatlakoztatással (<a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> <code>-u</code>), csak egy teljes leválasztással (<a href="https://man.freebsd.org/cgi/man.cgi?query=umount&amp;sektion=8&amp;format=html">umount(8)</a>) és egy friss csatlakoztatással (<a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a>). Ennek értelmében az ACL-ek a rendszerindító állományrendszeren a rendszer indulása után nem engedélyezhetõek. Ám ez azt is jelenti, hogy egy már használatban levõ állományrendszer beállításai sem változtathatóak meg.</p></li><li><p>Ha a kapcsolót a szuperblokkban állítjuk be, akkor az állományrendszert még akkor is ACL támogatással csatlakoztatja a rendszer, ha azt nem adtuk meg az <span class=filename>fstab</span> állományban vagy az eszközeink átrendezõdtek. Így az állományrendszereket még véletlenül sem tudjuk ACL használata nélkül csatlakoztatni, ami egyébként így komoly biztonsági problémákat okozhatna.</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Beállíthatjuk úgy is ACL kezelését, hogy egy friss csatlakoztatás nélkül is bekapcsolható legyen, azonban az ilyen állományrendszerek ACL nélküli csatlakoztatását nem ajánljuk senkinek, mivel ha egyszer már engedélyeztük a használatukat, majd kikapcsoljuk ezeket és végül a kiterjesztett tulajdonságok törlése nélkül újra engedélyezzük, akkor nagyon könnyen pórul járhatunk. Ha elkezdtük használni az ACL-eket egy állományrendszeren, akkor ne tiltsuk le ezeket, mert az így keletkezõ állományvédelem nem feltétlenül lesz kompatibilis a felhasználók által beállítottakkal, és az ACL újraengedélyezése a változásaik elõtti korábbi ACL engedélyeket fogja visszaállítani az állományokra, aminek hatása kiszámíthatatlan.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A hozzáférés-vezérlési listákat használó állományrendszerek esetén egy <code>+</code> (plusz) jellel ábrázolják a kiterjesztett engedélyeket. Például:</p></div><div class="literalblock programlisting"><div class=content><pre>drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 könyvtár1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 könyvtár2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 könyvtár3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre></div></div><div class=paragraph><p>Láthatjuk, hogy a <span class=filename>könyvtár1</span>, <span class=filename>könyvtár2</span> és <span class=filename>könyvtár3</span> könyvtárakhoz tartoznak ACL típusú engedélyek, míg a <span class=filename>public_html</span> könyvtárhoz nem.</p></div><div class=sect2><h3 id=_az_acl_ek_használata>14.12.1. Az ACL-ek használata<a class=anchor href=#_az_acl_ek_használata></a></h3><div class=paragraph><p>Az állományrendszerben található ACL engedélyeket a <a href="https://man.freebsd.org/cgi/man.cgi?query=getfacl&amp;sektion=1&amp;format=html">getfacl(1)</a> segédprogrammal nézhetjük meg. Például a <span class=filename>próba</span> állomány ACL engedélyeit a következõ paranccsal tudjuk megnézni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% getfacl próba
	<span class=c>#file:próba</span>
	<span class=c>#owner:1001</span>
	<span class=c>#group:1001</span>
	user::rw-
	group::r--
	other::r--</code></pre></div></div><div class=paragraph><p>Egy állomány ACL engedélyeit a <a href="https://man.freebsd.org/cgi/man.cgi?query=setfacl&amp;sektion=1&amp;format=html">setfacl(1)</a> segédprogrammal tudjuk megváltoztatni. Figyeljük meg:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% setfacl <span class=nt>-k</span> próba</code></pre></div></div><div class=paragraph><p>A <code>-k</code> opció törli az összes ACL alapú engedélyt egy állományról vagy állományrendszerrõl. Ennél viszont sokkal hasznosabb a <code>-b</code> opció használata, mivel az meghagyja az ACL mûködéséhez szükséges alapvetõ mezõket.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% setfacl <span class=nt>-m</span> u:trhodes:rwx,group:web:r--,o::--- próba</code></pre></div></div><div class=paragraph><p>Ebben a fenti parancsban a <code>-m</code> opciót pedig arra használtuk, hogy módosítsuk az alapértelmezett ACL bejegyzéseket. Mivel az ezt megelõzõ parancsban teljesen töröltük még az elõredefiniált bejegyzéseket is, ez a parancs a megadott paraméterekkel kiegészítve ezeket vissza fogja állítani. Ügyeljünk arra, hogy ha olyan felhasználót vagy csoportot adunk meg, ami nem létezik a rendszerben, akkor a szabvány kimenetre egy <code>Invalid argument</code> hibaüzenetet kapunk.</p></div></div></div></div><div class=sect1><h2 id=security-portaudit>14.13. A külsõ programok biztonsági problémáinak figyelése<a class=anchor href=#security-portaudit></a></h2><div class=sectionbody><div class=paragraph><p>Az utóbbi években a biztonsági kérdésekkel foglalkozó világban számos fejlesztésre került sor a sebezhetõségi figyelmeztetések feldolgozásában. Manapság tulajdonképpen bármilyen operációs rendszer fokozott veszélynek teszik ki magát a külsõ programok telepítésével és használatával.</p></div><div class=paragraph><p>A sebezhetõségekrõl beszámoló értesítések a biztonság egyik alapköve, azonban a FreeBSD projekt nem tud ilyen jelentéseket kiadni a FreeBSD alaprendszerén kívül minden egyes külsõ alkalmazáshoz. Azonban lehetõségünk van enyhíteni a külsõ csomagok sebezhetõségén és figyelmeztetni a rendszergazdákat az ismert biztonsági problémákra. A FreeBSD-nek van egy Portaudit nevû segédprogramja, amit kizárólag erre a célra hoztak létre.</p></div><div class=paragraph><p>A <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portaudit/>ports-mgmt/portaudit</a> port egy adatbázist használ, ahol a FreeBSD biztonsági csapata és a portok fejlesztõi tartják karban az ismert biztonsági problémákat.</p></div><div class=paragraph><p>A Portaudit használatának megkezdéséhez telepítsük a Portgyûjteménybõl:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/ports-mgmt/portaudit &amp;&amp; make install clean</span></code></pre></div></div><div class=paragraph><p>A telepítési folyamat során a <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a> konfigurációs állományai is frissítõdnek, így a Portaudit is lefut a napi biztonsági ellenõrzések folyamán. Gondoskodjunk róla, hogy a <code>root</code> felhasználónak levélben elküldött a napi biztonsági értesítéseket rendesen elolvassuk. Nincs szükségünk további beállításokra.</p></div><div class=paragraph><p>A telepítés után a rendszergazda a következõ paranccsal tudja frissíteni a saját adatbázispéldányát és megnézni a pillanatnyilag telepített csomagok ismert sebezhetõségeit:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portaudit -Fda</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ez az adatbázis a <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a> minden egy futásakor magától frissül, ezért ez a parancs lényegében elhagyható. Egyedül a soronkövetkezõ példákhoz kell kiadni.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A Portgyûjteménybõl telepített külsõ alkalmazások megbízhatóságának ellenõrzését az alábbi parancs kiadásával bármikor elvégezhetjük:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portaudit -a</span></code></pre></div></div><div class=paragraph><p>A Portaudit ennek hatására valahogy így fogja megjeleníteni a sebezhetõ csomagokat:</p></div><div class="literalblock programlisting"><div class=content><pre>Affected package: cups-base-1.1.22.0_1
Type of problem: cups-base -- HPGL buffer overflow vulnerability.
Reference: &lt;http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html&gt;

1 problem(s) in your installed packages found.

You are advised to update or deinstall the affected package(s) immediately.</pre></div></div><div class=paragraph><p>Fordítása:</p></div><div class="literalblock programlisting"><div class=content><pre>Érintett csomag: cups-base-1.1.22.0_1
A probléma jellege: cups-base -- HPGL puffer túlcsordulási sebezhetõség.
Link: &lt;http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html&gt;

A telepített csomagokkal kapcsolatban 1 problemát találtam.

Javasoljuk, hogy az érintett csomagokat azonnal frissítse vagy távolítsa el.</pre></div></div><div class=paragraph><p>Ha a böngészõnket az itt megadott címre irányítjuk, akkor megismerhetjük a kérdéses sebezhetõség pontosabb részleteit. Ezen az oldalon megtalálhatjuk a hiba által érintett verziókat a FreeBSD portok verziója szerint, illetve más olyan honlapokat, ahol biztonsági figyelmeztetéseket találhatunk.</p></div><div class=paragraph><p>Röviden összefoglalva, a Portaudit egy komoly segédeszköz és hitetlenül hasznos kiegészítõje a Portupgrade portnak.</p></div></div></div><div class=sect1><h2 id=security-advisories>14.14. A FreeBSD biztonsági figyelmeztetései<a class=anchor href=#security-advisories></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD több más kereskedelmi minõségû operációs rendszerhez hasonlóan "Biztonsági figyelmeztéseket" (Security Advisory) ad ki. Ezek a figyelmeztetések általában megjelennek a biztonsággal foglalkozó levelezési listákon és a hivatkozott hibák kijavítása után a megfelelõ kiadások hibajegyzékében is. Ebben a szakaszban megismerjük és értelmezzük ezeket a figyelmeztetéseket, valamint megtudhatjuk, milyen lépéseket kell megtennünk a rendszerünk kijavításához.</p></div><div class=sect2><h3 id=_hogyan_épül_fel_egy_figyelmeztetés>14.14.1. Hogyan épül fel egy figyelmeztetés?<a class=anchor href=#_hogyan_épül_fel_egy_figyelmeztetés></a></h3><div class=paragraph><p>A FreeBSD biztonsági figyelmeztetései az alább látható formában jelennek meg, amit mi most a <a href=https://lists.FreeBSD.org/subscription/freebsd-security-notifications>FreeBSD security notifications levelezési lista</a> levelezési listáról kölcsönöztünk.</p></div><div class="literalblock programlisting"><div class=content><pre>=============================================================================
FreeBSD-SA-XX:XX.UTIL                                     Security Advisory
                                                          The FreeBSD Project

Topic:          denial of service due to some problem<i class=conum data-value=1></i><b>(1)</b>

Category:       core<i class=conum data-value=2></i><b>(2)</b>
Module:         sys<i class=conum data-value=3></i><b>(3)</b>
Announced:      2003-09-23<i class=conum data-value=4></i><b>(4)</b>
Credits:        Person@EMAIL-ADDRESS<i class=conum data-value=5></i><b>(5)</b>
Affects:        All releases of FreeBSD<i class=conum data-value=6></i><b>(6)</b>
                FreeBSD 4-STABLE prior to the correction date
Corrected:      2003-09-23 16:42:59 UTC (RELENG_4, 4.9-PRERELEASE)
                2003-09-23 20:08:42 UTC (RELENG_5_1, 5.1-RELEASE-p6)
                2003-09-23 20:07:06 UTC (RELENG_5_0, 5.0-RELEASE-p15)
                2003-09-23 16:44:58 UTC (RELENG_4_8, 4.8-RELEASE-p8)
                2003-09-23 16:47:34 UTC (RELENG_4_7, 4.7-RELEASE-p18)
                2003-09-23 16:49:46 UTC (RELENG_4_6, 4.6-RELEASE-p21)
                2003-09-23 16:51:24 UTC (RELENG_4_5, 4.5-RELEASE-p33)
                2003-09-23 16:52:45 UTC (RELENG_4_4, 4.4-RELEASE-p43)
                2003-09-23 16:54:39 UTC (RELENG_4_3, 4.3-RELEASE-p39)<i class=conum data-value=7></i><b>(7)</b>
CVE Name:	CVE-XXXX-XXXX<i class=conum data-value=8></i><b>(8)</b>

For general information regarding FreeBSD Security Advisories,
including descriptions of the fields above, security branches, and the
following sections, please visit
http://www.FreeBSD.org/security/.

I.   Background<i class=conum data-value=9></i><b>(9)</b>

II.  Problem Description<i class=conum data-value=10></i><b>(10)</b>

III. Impact<i class=conum data-value=11></i><b>(11)</b>

IV.  Workaround<i class=conum data-value=12></i><b>(12)</b>

V.   Solution<i class=conum data-value=13></i><b>(13)</b>

VI.  Correction details<i class=conum data-value=14></i><b>(14)</b>

VII. References<i class=conum data-value=15></i><b>(15)</b></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>A <code>Topic</code> mezõben olvashatjuk pontosan mi is maga a probléma. Alapvetõen bemutatja az érintett biztonsági figyelmeztetést és megemlíti a sebezhetõ segédprogramot.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>A <code>Category</code> mezõ hivatkozik a rendszer azon részére, amelyre a hiba kihatással lehet. Értéke lehet <code>core</code>, <code>contrib</code> vagy <code>ports</code>. A <code>core</code> kategória azt jelzi, hogy a sebezhetõség a FreeBSD legfontosabb komponenseit érinti. A <code>contrib</code> kategória a FreeBSD projekt számára felajánlott szoftverek, mint például a sendmail sebezhetõségére utal. Végezetül a <code>ports</code> kategória jelzi, hogy a sebezhetõség valamelyik, a Portgyûjteményben szereplõ szoftverre érvényes.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>A <code>Module</code> mezõ a sebezhetõ komponens helyét nevezi meg, például <code>sys</code>. Ebben a példában azt láthatjuk, hogy a <code>sys</code> modul a hibás. Ezért a sebezhetõség egy rendszermagban használt komponenst érint.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Az <code>Announced</code> mezõ a biztonsági figyelmeztetés kiadásának vagy széleskörû kihirdetésének dátumát rögzíti. Ez azt jelenti, hogy a biztonsági csapat meggyõzõdött a probléma létezésérõl és a hibát orvosoló javítás már felkerült a FreeBSD forráskódjába.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>A <code>Credits</code> mezõ azokat az egyéneket vagy szervezeteket említi meg, akik észlelték a sebezhetõséget és jelentették.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Az <code>Affects</code> mezõben megadják, hogy a FreeBSD melyik kiadásaira van hatással a sebezhetõség. Ha a rendszermag esetén lefuttatjuk az <code>ident</code> parancsot az érintett állományokra, akkor megtudhatjuk a pontos revíziójukat. A portoknál a verziószám a port neve után szerepel a <span class=filename>/var/db/pkg</span> könyvtárban. Ha a rendszerünket nem frissítettük CVS-rõl és fordítottuk újra, akkor nagy a valószínûsége, hogy a sebezhetõség minket is érint.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>A <code>Corrected</code> mezõ tartalmazza a a kijavítás dátumát, idejét, idõzónáját és az ezt tartalmazó kiadást.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>Az ismert sebezhetõségek adatbázisában (Common Vulnerabilities Database, CVD) használt azonosítási információk alapján végzett keresések számára fenntartott.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>A <code>Background</code> mezõ adja meg részleteiben a sebezhetõ programmal kapcsolatos tudnivalókat. Az esetek többségében itt írják le, hogy miért jött létre az adott eszköz a FreeBSD-ben, mire használják és hogyan keletkezett.</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>A <code>Problem Description</code> mezõ a biztonsági rést részletezi. Ebben a részben szerepelhet a hibás kódrészlet vagy akár még az is, hogy miként kell vele elõidézni a hibát.</td></tr><tr><td><i class=conum data-value=11></i><b>11</b></td><td>Az <code>Impact</code> mezõ a probléma lehetséges hatásait írja körül a rendszerben. Ez például lehet egy DoS támadás, speciális engedélyek ellopása vagy akár a rendszeradminisztrátori jogok megszerzése.</td></tr><tr><td><i class=conum data-value=12></i><b>12</b></td><td>A <code>Workaround</code> mezõ igyekszik elfogadható megoldást nyújtani a rendszerük frissítésére képtelen rendszergazdák számára. Ennek oka lehet az idõ rövidsége, a hálózati elérhetõség vagy más okokból fakadó elcsúszás. Ennek ellenére a biztonsági kérdéseket sosem szabad félvállról venni, ezért a sebezhetõ rendszereket vagy ki kell javítani vagy valamilyen módon meg kell kerülni a biztonsági rés kialakulását.</td></tr><tr><td><i class=conum data-value=13></i><b>13</b></td><td>A <code>Solution</code> mezõ utasításokkal segít a rendszer kijavítását. Ez egy lépésrõl lépésre tesztelt és ellenõrzött módszer, amellyel a rendszerünket megfelelõen ki tudjuk javítani és biztonságossá tenni.</td></tr><tr><td><i class=conum data-value=14></i><b>14</b></td><td>A <code>Correction Details</code> mezõ mutatja a CVS-ág vagy kiadás nevét, amelyben a pontokat aláhúzásra cserélték. Ezenkívül még az egyes ágakban az érintett állományok revízióját is mutatja.</td></tr><tr><td><i class=conum data-value=15></i><b>15</b></td><td>A <code>References</code> mezõ általában a témával kapcsolatos további forrásokat kínálja fel URL, könyv, levelezési lista vagy hírcsoport formájában.</td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=security-accounting>14.15. A futó programok nyilvántartása<a class=anchor href=#security-accounting></a></h2><div class=sectionbody><div class=paragraph><p>A futó programok nyilvántartása olyan biztonsági módszer, ahol a rendszergazda figyelemmel kíséri a rendszer használatban levõ erõforrásait, a felhasználók közti megoszlását, gondoskodik a rendszer felügyeletérõl és valamennyire nyomon követi a felhasználók parancsait.</p></div><div class=paragraph><p>Ennek a módszernek egyaránt megvannak a maga elõnyei és hátrányai. Az egyik elõnye, hogy a használatával a behatolás egészen a betörés pontjáig visszakövethetõ. Hátranya viszont, hogy a futó programok nyilvántartása rengeteg mennyiségû naplót generál és ehhez sok lemezterületre lesz szükségünk. Ebben a szakaszban végigjárjuk a programok nyilvántartásának alapjait.</p></div><div class=sect2><h3 id=_a_futó_programok_nyilvántartásának_engedélyezése_és_használata>14.15.1. A futó programok nyilvántartásának engedélyezése és használata<a class=anchor href=#_a_futó_programok_nyilvántartásának_engedélyezése_és_használata></a></h3><div class=paragraph><p>A futó programok nyilvántartását elõször engedélyeznünk kell. Ehhez a következõ parancsokat kell kiadnunk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/account/acct</span>

<span class=c># accton /var/account/acct</span>

<span class=c># echo &#39;accounting_enable=&#34;YES&#34;&#39; &gt;&gt; /etc/rc.conf</span></code></pre></div></div><div class=paragraph><p>Miután aktiváltuk, a nyilvántartást elkezdi számbavenni a processzor kihasználtságát, a parancsokat stb. A nyilvántartás emberek számára nem olvasható formátumban készül, ezért csak az <a href="https://man.freebsd.org/cgi/man.cgi?query=sa&amp;sektion=8&amp;format=html">sa(8)</a> segédprogrammal tudjuk megnézni. Ha nem adunk meg neki semmilyen opciót, akkor az <code>sa</code> kilistázza a felhasználónkénti hívásokat, az összes eltelt idõt percben, a teljes processzor- és felhasználói idõt percben, az I/O mûveletek átlagos számát stb.</p></div><div class=paragraph><p>A kiadott parancsokról a <a href="https://man.freebsd.org/cgi/man.cgi?query=lastcomm&amp;sektion=1&amp;format=html">lastcomm(1)</a> programmal tudunk tájékozódni. A <code>lastcomm</code> segítségével ki tudjuk íratni a felhasználók adott terminálon kiadott parancsait is, mint például:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># lastcomm ls</span>
	trhodes ttyp1</code></pre></div></div><div class=paragraph><p>Ezzel megjelenik a <code>trhodes</code> nevû felhasználó <code>ttyp1</code> terminálon kiadott összes ismert <code>ls</code> parancsa.</p></div><div class=paragraph><p>Számos hasznos beállítást és hozzájuk tartozó leírást találhatunk még a <a href="https://man.freebsd.org/cgi/man.cgi?query=lastcomm&amp;sektion=1&amp;format=html">lastcomm(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=acct&amp;sektion=5&amp;format=html">acct(5)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=sa&amp;sektion=8&amp;format=html">sa(8)</a> man oldalakon.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 2024. március 9. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/hu/books/handbook/users class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/hu/books/handbook/jails class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#security-synopsis>14.1. Áttekintés</a></li><li><a href=#security-intro>14.2. Bevezetés</a></li><li><a href=#securing-freebsd>14.3. A FreeBSD védelme</a></li><li><a href=#crypt>14.4. DES, Blowfish, MD5 és a Crypt</a></li><li><a href=#one-time-passwords>14.5. Egyszeri jelszavak</a></li><li><a href=#tcpwrappers>14.6. A TCP kapcsolatok burkolása</a></li><li><a href=#kerberosIV>14.7. KerberosIV</a></li><li><a href=#kerberos5>14.8. Kerberos5</a></li><li><a href=#openssl>14.9. OpenSSL</a></li><li><a href=#ipsec>14.10. VPN IPsec felett</a></li><li><a href=#openssh>14.11. OpenSSH</a></li><li><a href=#fs-acl>14.12. Az állományrendszerek hozzáféréseit vezérlõ listák</a></li><li><a href=#security-portaudit>14.13. A külsõ programok biztonsági problémáinak figyelése</a></li><li><a href=#security-advisories>14.14. A FreeBSD biztonsági figyelmeztetései</a></li><li><a href=#security-accounting>14.15. A futó programok nyilvántartása</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/hu/books/handbook/handbook_hu.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/hu/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/hu/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>Hungarian</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/hu class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/hu/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>