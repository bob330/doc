<!doctype html><html class=theme-light lang=hu><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/hu/books/handbook/network-servers/><title>29. Fejezet - Hálózati szerverek | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="29. Fejezet - Hálózati szerverek"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="hu"><meta property="og:url" content="https://docs.freebsd.org/hu/books/handbook/network-servers/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/hu\/books\/handbook\/network-servers\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/hu>Documentation portal</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/hu/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/hu/books>Books</a></li><li><a href=https://docs.freebsd.org/hu/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/hu/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=hu>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/preface/>Előszó</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/preface/#preface-audience>Kiknek szánjuk ezt a könyvet</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/preface/#preface-changes-from3>Változtatások a harmadik kiadás óta</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/preface/#preface-changes-from2>Változtatások a második kiadás (2004) óta</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/preface/#preface-changes>Változtatások az elsõ kiadás (2001) óta</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/preface/#preface-overview>A könyv felépítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/preface/#preface-conv>A könyvben alkalmazott konvenciók</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/preface/#preface-acknowledgements>Köszönetnyilvánítás</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/parti/>I. Rész Bevezetés</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/introduction/>1. Fejezet - Bemutatkozás</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/introduction/#introduction-synopsis>1.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/introduction/#nutshell>1.2. Üdvözöljük a FreeBSD-ben!</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/introduction/#history>1.3. A FreeBSD Projektrõl</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/install/>2. Fejezet - A FreeBSD telepítése</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-synopsis>2.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-hardware>2.2. Hardverkövetelmények</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-pre>2.3. A telepítés elõtt elvégzendõ feladatok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-start>2.4. A telepítés megkezdése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#using-sysinstall>2.5. A sysinstall bemutatása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-steps>2.6. Lemezterület lefoglalása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-choosing>2.7. A telepítendõ összetevõk kiválasztása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-media>2.8. A telepítés eszközének kiválasztása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-final-warning>2.9. A telepítés véglegesítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-post>2.10. A telepítés után</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-trouble>2.11. Hibakeresés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-advanced>2.12. Telepítési útmutató haladóknak</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/install/#install-diff-media>2.13. Saját telepítõeszköz elkészítése</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/basics/>3. Fejezet - A UNIX alapjai</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#basics-synopsis>3.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#consoles>3.2. Virtuális konzolok és terminálok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#permissions>3.3. Engedélyek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#dirstructure>3.4. A könyvtárak elrendezése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#disk-organization>3.5. A lemezek szervezése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#mount-unmount>3.6. Állományrendszerek csatlakoztatása és leválasztása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#basics-processes>3.7. Folyamatok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#basics-daemons>3.8. Démonok, jelzések és a futó programok leállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#shells>3.9. Parancsértelmezõk</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#editors>3.10. Szövegszerkesztõk</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#basics-devices>3.11. Eszközök és eszközleírók</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#binary-formats>3.12. Bináris formátumok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/basics/#basics-more-information>3.13. Bõvebben olvashatunk…​</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/ports/>4. Fejezet - Alkalmazások telepítése: csomagok és portok</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/ports/#ports-synopsis>4.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ports/#ports-overview>4.2. Az alkalmazások telepítésének összefoglalása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ports/#ports-finding-applications>4.3. A számunkra szükséges alkalmazások felkutatása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ports/#packages-using>4.4. A csomagrendszer használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ports/#ports-using>4.5. A Portgyûjtemény használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ports/#ports-nextsteps>4.6. Telepítés utáni teendõk</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ports/#ports-broken>4.7. Teendõ a sérült portokkal</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/x11/>5. Fejezet - Az X Window System</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/x11/#x11-synopsis>5.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/x11/#x-understanding>5.2. Az X áttekintése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/x11/#x-install>5.3. Az X11 telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/x11/#x-config>5.4. Az X11 beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/x11/#x-fonts>5.5. Betûtípusok használata az X11-ben</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/x11/#x-xdm>5.6. Az X bejelentkeztetõ képernyõje</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/x11/#x11-wm>5.7. Munkakörnyezetek</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/partii/>II. Rész Gyakori feladatok</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/desktop/>6. Fejezet - Asztali alkalmazások</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/desktop/#desktop-synopsis>6.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/desktop/#desktop-browsers>6.2. Böngészõk</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/desktop/#desktop-productivity>6.3. Irodai eszközök</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/desktop/#desktop-viewers>6.4. Dokumentum-megjelenítõk</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/desktop/#desktop-finance>6.5. Pénzügyi szoftverek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/desktop/#desktop-summary>6.6. Összefoglalás</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/multimedia/>7. Fejezet - Multimédia</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/multimedia/#multimedia-synopsis>7.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/multimedia/#sound-setup>7.2. A hangkártya beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/multimedia/#sound-mp3>7.3. MP3</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/multimedia/#video-playback>7.4. Videók lejátszása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/multimedia/#tvcard>7.5. TV kártyák beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/multimedia/#scanners>7.6. Lapolvasók</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/>8. Fejezet - A FreeBSD rendszermag testreszabása</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Miért készítsünk saját rendszermagot?</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/#kernelconfig-devices>8.3. A rendszerünkben levõ hardverek összeszedése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/#kernelconfig-modules>8.4. Meghajtók, alrendszerek és modulok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/#kernelconfig-building>8.5. Saját rendszermag készítése és telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/#kernelconfig-config>8.6. A konfigurációs állomány</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/kernelconfig/#kernelconfig-trouble>8.7. Ha valamilyen hiba történne</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/printing/>9. Fejezet - Nyomtatás</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/printing/#printing-synopsis>9.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/printing/#printing-intro-spooler>9.2. Bevezetés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/printing/#printing-intro-setup>9.3. Kezdeti beállítások</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/printing/#printing-advanced>9.4. Magasszintû nyomtatóbeállítás</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/printing/#printing-using>9.5. A nyomtatók használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/printing/#printing-lpd-alternatives>9.6. Más nyomtatási rendszerek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/printing/#printing-troubleshooting>9.7. Hibakeresés</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/>10. fejezet - Bináris Linux kompatibilitás</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Telepítés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#linuxemu-mathematica>10.3. A Mathematica® telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#linuxemu-maple>10.4. A Maple™ telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#linuxemu-matlab>10.5. A MATLAB® telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#linuxemu-oracle>10.6. Az Oracle® telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#sapr3>10.7. Az SAP® R/3® telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/linuxemu/#linuxemu-advanced>10.8. Témák haladóknak</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/partiii/>III. Rész Rendszeradminisztráció</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/config/>11. Fejezet - Beállítás és finomhangolás</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#config-synopsis>11.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-initial>11.2. Kezdeti beállítások</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-core-configuration>11.3. A mag beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-appconfig>11.4. Az alkalmazások beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-starting-services>11.5. Szolgáltatások indítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-cron>11.6. A <code>cron</code> segédprogram beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-rcd>11.7. Az rc használata FreeBSD alatt</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#config-network-setup>11.8. A hálózati kártyák beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-virtual-hosts>11.9. Virtuális címek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-configfiles>11.10. Konfigurációs állományok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-sysctl>11.11. Finomhangolás a sysctl használatával</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-disk>11.12. A lemezek finomhangolása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#configtuning-kernel-limits>11.13. A rendszermag korlátainak finomhangolása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#adding-swap-space>11.14. A lapozóterület bõvítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#acpi-overview>11.15. Energia- és erõforrásgazdálkodás</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/config/#ACPI-debug>11.16. A FreeBSD ACPI támogatásának használata és nyomonkövetése</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/boot/>12. Fejezet - A FreeBSD rendszerindítási folyamata</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/boot/#boot-synopsis>12.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/boot/#boot-introduction>12.2. A rendszerindítás problémája</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/boot/#boot-blocks>12.3. A boot manager és az indulás fokozatai</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/boot/#boot-kernel>12.4. Kapcsolat a rendszermaggal a rendszerindítás folyamán</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/boot/#device-hints>12.5. Eszköz útmutatók (device.hints)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/boot/#boot-init>12.6. Init: A folyamatirányítás elindítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/boot/#boot-shutdown>12.7. A leállítási folyamat</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/users/>13. Fejezet - Felhasználók és hozzáférések alapvető kezelése</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-synopsis>13.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-introduction>13.2. Bevezetés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-superuser>13.3. Az adminisztrátori hozzáférés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-system>13.4. Rendszerhozzáférések</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-user>13.5. Felhasználói hozzáférések</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-modifying>13.6. A hozzáférések módosítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-limiting>13.7. A felhasználók korlátozása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/users/#users-groups>13.8. Csoportok</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/security/>14. Fejezet - Biztonság</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#security-synopsis>14.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#security-intro>14.2. Bevezetés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#securing-freebsd>14.3. A FreeBSD védelme</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#crypt>14.4. DES, Blowfish, MD5 és a Crypt</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#one-time-passwords>14.5. Egyszeri jelszavak</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#tcpwrappers>14.6. A TCP kapcsolatok burkolása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#ipsec>14.10. VPN IPsec felett</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#fs-acl>14.12. Az állományrendszerek hozzáféréseit vezérlõ listák</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#security-portaudit>14.13. A külsõ programok biztonsági problémáinak figyelése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#security-advisories>14.14. A FreeBSD biztonsági figyelmeztetései</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/security/#security-accounting>14.15. A futó programok nyilvántartása</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/jails/>15. Fejezet - A jail alrendszer</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/jails/#jails-synopsis>15.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/jails/#jails-terms>15.2. A jail alrendszerhez kapcsolódó fogalmak</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/jails/#jails-intro>15.3. Bevezetés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/jails/#jails-build>15.4. A jailek létrehozása és vezérlése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/jails/#jails-tuning>15.5. Finomhangolás és karbantartás</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/jails/#jails-application>15.6. A jailek alkalmazása</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/mac/>16. Fejezet - Kötelező hozzáférés-vezérlés (MAC)</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-synopsis>16.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-inline-glossary>16.2. A fejezet fontosabb fogalmai</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-initial>16.3. A MAC ismertetése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-understandlabel>16.4. Bõvebben a MAC címkéirõl</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-planning>16.5. A védelem megtervezése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-modules>16.6. A modulok beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-seeotheruids>16.7. A seeotheruids MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-bsdextended>16.8. A bsdextended MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-ifoff>16.9. Az ifoff MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-portacl>16.10. A portacl MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-partition>16.11. A partition MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-mls>16.12. A többszintû biztonsági MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-biba>16.13. A Biba MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-lomac>16.14. A LOMAC MAC-modul</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-implementing>16.15. A Nagios elzárása a MAC rendszerrel</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-userlocked>16.16. A felhasználók korlátozása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mac/#mac-troubleshoot>16.17. A hibák elhárítása a MAC rendszerben</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/audit/>17. Fejezet - Biztonsági események vizsgálata</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/audit/#audit-synopsis>17.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/audit/#audit-inline-glossary>17.2. A fejezet fontosabb fogalmai</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/audit/#audit-install>17.3. A vizsgálat támogatásának telepítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/audit/#audit-config>17.4. A vizsgálat beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/audit/#audit-administration>17.5. A vizsgálati alrendszer használata</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/disks/>18. Fejezet - Háttértárak</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#disks-synopsis>18.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#disks-naming>18.2. Az eszközök elnevezései</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#disks-adding>18.3. Lemezek hozzáadása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#usb-disks>18.5. USB tárolóeszközök</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#creating-cds>18.6. Lézeres tárolóeszközök (CD-k) létrehozása és használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#creating-dvds>18.7. Lézeres tárolóeszközök (DVD-k) létrehozása és használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#floppies>18.8. Hajlékonylemezek létrehozása és használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#backups-tapebackups>18.9. Szalagok létrehozása és használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#backups-floppybackups>18.10. Biztonsági mentés hajlékonylemezekre</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#backup-strategies>18.11. Mentési stratégiák</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#backup-basics>18.12. Alapvetõ tudnivalók a biztonsági mentésrõl</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#disks-virtual>18.13. Hálózat, memória és állomány alapú állományrendszerek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#snapshots>18.14. Az állományrendszerek pillanatképei</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#quotas>18.15. Az állományrendszerek kvótái</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#disks-encrypting>18.16. A lemezpartíciók titkosítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/disks/#swap-encrypting>18.17. A lapozóterület titkosítása</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/geom/>19. Fejezet - GEOM: A moduláris lemezszervező rendszer</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/geom/#GEOM-synopsis>19.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/geom/#GEOM-intro>19.2. A GEOM bemutatása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/geom/#GEOM-striping>19.3. RAID0 - Csíkozás</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - Tükrözés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/geom/#geom-ggate>19.5. Eszközök hálózati illesztése a GEOM-ban</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/geom/#geom-glabel>19.6. A lemezes eszközök címkézése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/geom/#geom-gjournal>19.7. Naplózó UFS GEOM-on keresztül</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/filesystems/>20. Fejezet - Támogatott állományrendszerek</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/filesystems/#filesystems-synopsis>20.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/filesystems/#filesystems-zfs>20.2. A Z állományrendszer (ZFS)</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/vinum/>21. Fejezet - A Vinum kötetkezelő</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-synopsis>21.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-intro>21.2. Kicsik a lemezeink</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-access-bottlenecks>21.3. A hozzáférési idõk szûk keresztmetszetei</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-data-integrity>21.4. Adatintegritás</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-objects>21.5. A Vinum objektumai</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-examples>21.6. Példák</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-object-naming>21.7. Az objektumok elnevezése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-config>21.8. A Vinum beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/vinum/#vinum-root>21.9. Rendszerindítás Vinum-kötetrõl</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/virtualization/>22. Fejezet - Virtualizáció</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/virtualization/#virtualization-synopsis>22.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/virtualization/#virtualization-guest>22.2. A FreeBSD mint vendég</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/virtualization/#virtualization-host>22.3. A FreeBSD mint gazda</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/l10n/>23. Fejezet - Honosítás - Az I18N/L10N használata és beállítása</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/l10n/#l10n-synopsis>23.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/l10n/#l10n-basics>23.2. Az alapok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/l10n/#using-localization>23.3. A honosítás használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/l10n/#l10n-compiling>23.4. I18N programok fordítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/l10n/#lang-setup>23.5. A FreeBSD honosítása adott nyelvekre</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/>24. Fejezet - A FreeBSD frissítése és frissen tartása</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. A FreeBSD frissítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. A Portgyûjtemény frissítése a Portsnap használatával</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. A dokumentáció frissítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#current-stable>24.5. A fejlesztõi ág követése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#synching>24.6. A forrás szinkronizálása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#makeworld>24.7. Az alaprendszer újrafordítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/cutting-edge/#small-lan>24.8. A források követése több géppel</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/dtrace/>25. Fejezet - DTrace</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/dtrace/#dtrace-synopsis>25.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/dtrace/#dtrace-implementation>25.2. Eltérések az implementációban</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/dtrace/#dtrace-enable>25.3. A DTrace támogatásának engedélyezése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/dtrace/#dtrace-using>25.4. A DTrace használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/dtrace/#dtrace-language>25.5. A D nyelv</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/partiv/>IV. Rész Hálózati kommunikáció</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/serialcomms/>26. Fejezet - Soros vonali kommunikáció</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/serialcomms/#serial-synopsis>26.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/serialcomms/#serial>26.2. Bevezetés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/serialcomms/#term>26.3. Terminálok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/serialcomms/#dialup>26.4. Betárcsázós szolgáltatások</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/serialcomms/#dialout>26.5. A betárcsázós szolgáltatások használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/serialcomms/#serialconsole-setup>26.6. A soros vonali konzol beállítása</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/>27. Fejezet - A PPP és a SLIP</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/#userppp>27.2. A felhasználói PPP alkalmazása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/#ppp>27.3. A rendszerszintû PPP alkalmazása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. PPP kapcsolatok hibaelhárítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/#pppoe>27.5. A PPP használata Ethernet felett (PPPoE)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/#pppoa>27.6. PPP ATM felett (PPPoA)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/ppp-and-slip/#slip>27.7. A SLIP használata</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/mail/>28. Fejezet - Elektronikus levelezés</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-synopsis>28.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-using>28.2. Az elektronikus levelezés használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#sendmail>28.3. A sendmail beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-changingmta>28.4. A levéltovábbító ügynök megváltoztatása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-trouble>28.5. A hibák elhárítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-advanced>28.6. Komolyabb témák</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#SMTP-UUCP>28.7. SMTP és az UUCP</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#outgoing-only>28.8. Csak küldés beállítása</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#SMTP-dialup>28.9. Levelezés betárcsázós kapcsolattal</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#SMTP-Auth>28.10. Az SMTP hitelesítése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-agents>28.11. Levelezõ kliensek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-fetchmail>28.12. A fetchmail használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mail/#mail-procmail>28.13. A procmail használata</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle checked>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/>29. Fejezet - Hálózati szerverek</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-servers-synopsis>29.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-inetd>29.2. Az inetd"szuperszerver"</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-nfs>29.3. A hálózati állományrendszer (NFS)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-nis>29.4. Hálózati információs rendszer (NIS/YP)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-dhcp>29.5. A hálózat automatikus beállítása (DHCP)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-dns>29.6. Névfeloldás (DNS)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-apache>29.7. Az Apache webszerver</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-ftp>29.8. Állományok átvitele (FTP)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-samba>29.9. Állomány- és nyomtatási szolgáltatások Microsoft® Windows® kliensek számára (Samba)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-ntp>29.10. Az órák egyeztetése az NTP használatával</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/network-servers/#network-syslogd>29.11. Távoli gépek naplózása <code>syslogd</code> használatával</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/firewalls/>30. Fejezet - Tűzfalak</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/firewalls/#firewalls-intro>30.1. Bevezetés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/firewalls/#firewalls-concepts>30.2. Röviden a tûzfalakról</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/firewalls/#firewalls-apps>30.3. Tûzfalak</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/firewalls/#firewalls-pf>30.4. Az OpenBSD csomagszûrõje (PF) és az ALTQ</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/firewalls/#firewalls-ipf>30.5. Az IPFILTER (IPF) tûzfal</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/>31. Fejezet - Egyéb haladó hálózati témák</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Áttekintés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-routing>31.2. Átjárók és az útválasztás</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-wireless>31.3. Vezeték nélküli hálózatok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-bridging>31.5. Hálózati hidak</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-aggregation>31.6. Linkek összefûzése és hibatûrése</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-diskless>31.7. Lemez nélküli mûködés</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-isdn>31.8. ISDN</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-natd>31.9. Hálózati címfordítás</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-plip>31.10. Párhuzamos vonali IP (PLIP)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-ipv6>31.11. Az IPv6</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#network-atm>31.12. Az Aszinkron adatátviteli mód (ATM)</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/advanced-networking/#carp>31.13. A Közös cím redundancia protokoll (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/partv/>V. Rész Függelék</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/>A. Függelék - A FreeBSD beszerzése</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#mirrors-cdrom>A.1. CD és DVD kiadók</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#mirrors-ftp>A.2. FTP oldalak</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#anoncvs>A.3. Anonim CVS</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#ctm>A.4. A CTM használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#cvsup>A.5. A CVSup használata</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#cvs-tags>A.6. CVS címkék</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#mirrors-afs>A.7. AFS oldalak</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/mirrors/#mirrors-rsync>A.8. Rsync oldalak</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/>B. függelék - Irodalomjegyzék</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-freebsd>B.1. A FreeBSD-rõl szóló könyvek és folyóiratok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-userguides>B.2. Felhasználói kézikönyvek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-adminguides>B.3. Rendszeradminisztrátori kézikönyvek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-programmers>B.4. Programozói kézikönyvek</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-osinternals>B.5. Az operációs rendszerek belsõ mûködésérõl</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-security>B.6. Biztonságról szóló írások</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-hardware>B.7. Hardverrel foglalkozó írások</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-history>B.8. UNIX® történelem</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/bibliography/#bibliography-journals>B.9. Magazinok és folyóiratok</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/eresources/>C. Függelék - Források az interneten</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/eresources/#eresources-mail>C.1. Levelezési listák</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/eresources/#eresources-news>C.2. Usenet hírcsoportok</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/eresources/#eresources-web>C.3. Világhálós szolgáltatások</a></li><li><a href=https://docs.freebsd.org/hu/books/handbook/eresources/#eresources-email>C.4. E-mail címek</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/hu/books/handbook/pgpkeys/>D. Függelék - PGP-kulcsok</a><ul><li><a href=https://docs.freebsd.org/hu/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Tisztségviselők</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>29. Fejezet - Hálózati szerverek</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#network-servers-synopsis>29.1. Áttekintés</a></li><li><a href=#network-inetd>29.2. Az inetd"szuperszerver"</a></li><li><a href=#network-nfs>29.3. A hálózati állományrendszer (NFS)</a></li><li><a href=#network-nis>29.4. Hálózati információs rendszer (NIS/YP)</a></li><li><a href=#network-dhcp>29.5. A hálózat automatikus beállítása (DHCP)</a></li><li><a href=#network-dns>29.6. Névfeloldás (DNS)</a></li><li><a href=#network-apache>29.7. Az Apache webszerver</a></li><li><a href=#network-ftp>29.8. Állományok átvitele (FTP)</a></li><li><a href=#network-samba>29.9. Állomány- és nyomtatási szolgáltatások Microsoft® Windows® kliensek számára (Samba)</a></li><li><a href=#network-ntp>29.10. Az órák egyeztetése az NTP használatával</a></li><li><a href=#network-syslogd>29.11. Távoli gépek naplózása <code>syslogd</code> használatával</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=network-servers-synopsis>29.1. Áttekintés<a class=anchor href=#network-servers-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Ebben a fejezetben a UNIX® típusú rendszerekben leggyakrabban alkalmazott hálózati szolgáltatások közül fogunk néhányat bemutatni. Ennek során megismerjük a hálózati szolgáltatások különbözõ típusainak telepítését, beállítását, tesztelését és karbantartását. A fejezet tartalmát folyamatosan példákkal igyekszünk illusztrálni.</p></div><div class=paragraph><p>A fejezet elolvasása során megismerjük:</p></div><div class=ulist><ul><li><p>hogyan dolgozzunk az inetd démonnal;</p></li><li><p>hogyan állítsuk be a hálózati állományrendszereket;</p></li><li><p>hogyan állítsunk be egy hálózati információs szervert a felhasználói hozzáférések megosztására;</p></li><li><p>hogyan állítsuk be automatikusan a hálózati hozzáférésünket a DHCP használatával;</p></li><li><p>hogyan állítsunk be névfeloldó szervereket;</p></li><li><p>hogyan állítsuk be az Apache webszervert;</p></li><li><p>hogyan állítsuk be az állományok átviteléért felelõs (FTP) szervert;</p></li><li><p>a Samba használatával hogyan állítsunk be Windows®-os kliensek számára állomány- és nyomtatószervert;</p></li><li><p>az NTP protokoll segítségével hogyan egyeztessük az idõt és dátumot, hogyan állítsunk be egy idõszervert;</p></li><li><p>a szabványos naplózó démon, a <code>syslogd</code> beállítását hálózati keresztüli naplózásra.</p></li></ul></div><div class=paragraph><p>A fejezet elolvasásához ajánlott:</p></div><div class=ulist><ul><li><p>az <span class=filename>/etc/rc</span> szkriptek alapjainak ismerete;</p></li><li><p>az alapvetõ hálózati fogalmak ismerete;</p></li><li><p>a külsõ szoftverek telepítésének ismerete (<a href=../ports/#ports>Alkalmazások telepítése. csomagok és portok</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=network-inetd>29.2. Az inetd"szuperszerver"<a class=anchor href=#network-inetd></a></h2><div class=sectionbody><div class=sect2><h3 id=network-inetd-overview>29.2.1. Áttekintés<a class=anchor href=#network-inetd-overview></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> démont gyakran csak "internet szuperszerverként" nevezik, mivel a helyi szolgáltatások kapcsolatainak kezeléséért felelõs. Amikor az inetd fogad egy csatlakozási kérelmet, akkor eldönti róla, hogy ez melyik programhoz tartozik és elindít egy példányt belõle, majd átadja neki a socketet (az így meghívott program a szabvány bemenetéhez, kimenetéhez és hibajelzési csatornájához kapja meg a socket leíróit). Az inetd használatával úgy tudjuk csökkenteni a rendszerünk terhelését, hogy a csak alkalmanként meghívott szolgáltatásokat nem futtatjuk teljesen független önálló módban.</p></div><div class=paragraph><p>Az inetd démont elsõsorban más démonok elindítására használjuk, de néhány triviális protokollt közvetlenül is képes kezelni, mint például a chargen, auth és a daytime.</p></div><div class=paragraph><p>Ebben a fejezetben az inetd beállításának alapjait foglaljuk össze mind parancssoros módban, mind pedig az <span class=filename>/etc/inetd.conf</span> konfigurációs állományon keresztül.</p></div></div><div class=sect2><h3 id=network-inetd-settings>29.2.2. Beállítások<a class=anchor href=#network-inetd-settings></a></h3><div class=paragraph><p>Az inetd mûködése az <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> rendszeren keresztül inicializálható. Az <code>inetd_enable</code> ugyan alapból a <code>NO</code> értéket veszi fel, vagyis tiltott, de a sysinstall használatával már akár a telepítés során bekapcsolható attól függõen, hogy a felhasználó milyen konfigurációt választott. Ha tehát a:</p></div><div class="literalblock programlisting"><div class=content><pre>inetd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>vagy</p></div><div class="literalblock programlisting"><div class=content><pre>inetd_enable=&#34;NO&#34;</pre></div></div><div class=paragraph><p>sort tesszük az <span class=filename>/etc/rc.conf</span> állományba, akkor azzal az inetd démont indíthatjuk el vagy tilthatjuk le a rendszer indítása során. Az</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/inetd rcvar</span></code></pre></div></div><div class=paragraph><p>paranccsal lekérdezhetjük a pillanatnyilag érvényes beállítást.</p></div><div class=paragraph><p>Emellett még az inetd démonnak az <code>inetd_flags</code> változón keresztül különbözõ parancssori paramétereket is át tudunk adni.</p></div></div><div class=sect2><h3 id=network-inetd-cmdline>29.2.3. Parancssori paraméterek<a class=anchor href=#network-inetd-cmdline></a></h3><div class=paragraph><p>Hasonlóan a legtöbb szerverhez, az inetd viselkedését is befolyásolni tudjuk a parancssorban átadható különbözõ paraméterekkel. Ezek teljes listája a következõ:</p></div><div class=paragraph><p><code>inetd [-d] [-l] [-w] [-W] [-c maximum] [-C arány] [-a cím | név] [-p állomány] [-R arány] [-s maximum] [konfigurációs állomány]</code></p></div><div class=paragraph><p>Ezek a paraméterek az <span class=filename>/etc/rc.conf</span> állományban az <code>inetd_flags</code> segítségével adhatóak meg az inetd részére. Alapértelmezés szerint az <code>inetd_flags</code> értéke <code>-wW -C 60</code>, ami az inetd által biztosított szolgáltatások TCP protokollon keresztüli wrappelését kapcsolja be, illetve egy IP-címrõl nem engedi a felkínált szolgáltatások elérését percenként hatvannál többször.</p></div><div class=paragraph><p>A kezdõ felhasználók örömmel nyugtázhatják, hogy ezeket az alapbeállításokat nem szükséges módosítaniuk. A késõbbiekben majd fény derül arra, hogy a kiszolgálás gyakoriságának szabályozása remek védekezést nyújthat túlzottan nagy mennyiségû kapcsolódási kérelem ellen. A megadható paraméterek teljes listája az <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> man oldalán olvasható.</p></div><div class=dlist><dl><dt class=hdlist1>-c <em>maximum</em></dt><dd><p>Az egyes szolgáltatásokhoz egyszerre felépíthetõ kapcsolatok alapértelmezett maximális számát adja meg. Alapból ezt a démont nem korlátozza. A <code>max-child</code> beállítással ez akár szolgáltatásonként külön is megadható.</p></dd><dt class=hdlist1>-C <em>arány</em></dt><dd><p>Korlátozza, hogy egyetlen IP-címrõl alapból hányszor hívhatóak meg az egyes szolgáltatások egy percen belül. Ez az érték alapból korlátlan. A <code>max-connections-per-ip-per-minute</code> beállítással ez szolgáltatásonként is definiálható.</p></dd><dt class=hdlist1>-R <em>arány</em></dt><dd><p>Megadja, hogy egy szolgáltatást egy perc alatt mennyiszer lehet meghívni. Ez az érték alapértelmezés szerint 256. A 0 megadásával eltöröljük ezt a típusú korlátozást.</p></dd><dt class=hdlist1>-s <em>maximum</em></dt><dd><p>Annak maximumát adja meg, hogy egyetlen IP-címrõl egyszerre az egyes szolgáltatásokat mennyiszer tudjuk elérni. Alapból ez korlátlan. Szolgáltatásonként ezt a <code>max-child-per-ip</code> paraméterrel tudjuk felülbírálni.</p></dd></dl></div></div><div class=sect2><h3 id=network-inetd-conf>29.2.4. Az <span class=filename>inetd.conf</span> állomány<a class=anchor href=#network-inetd-conf></a></h3><div class=paragraph><p>Az inetd beállítását az <span class=filename>/etc/inetd.conf</span> konfigurációs állományon keresztül végezhetjük el.</p></div><div class=paragraph><p>Amikor az <span class=filename>/etc/inetd.conf</span> állományban módosítunk valamit, az inetd démont a következõ paranccsal meg kell kérnünk, hogy olvassa újra:</p></div><div id=network-inetd-reread class=exampleblock><div class=title>Példa 1. Az inetd konfigurációs állományának újraolvasása</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/inetd reload</span></code></pre></div></div></div></div><div class=paragraph><p>A konfigurációs állomány minden egyes sora egy-egy démont ír le. A megjegyzéseket egy "#" jel vezeti be. Az <span class=filename>/etc/inetd.conf</span> állomány bejegyzéseinek formátuma az alábbi:</p></div><div class="literalblock programlisting"><div class=content><pre>szolgáltatás-neve
socket-típusa
protokoll
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]
felhasználó[:csoport][/bejelentkezési-osztály]
szerver-program
szerver-program-paraméterei</pre></div></div><div class=paragraph><p>Az IPv4 protokollt használó <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpd&amp;sektion=8&amp;format=html">ftpd(8)</a> démon bejegyzése például így néz ki:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</pre></div></div><div class=dlist><dl><dt class=hdlist1>szolgáltatás-neve</dt><dd><p>Ez az adott démon által képviselt szolgáltatást nevezi meg, amelynek szerepelnie kell az <span class=filename>/etc/services</span> állományban. Ez határozza meg, hogy az inetd milyen porton figyelje a beérkezõ kapcsolatokat. Ha egy új szolgáltatást hozunk létre, akkor azt elõször az <span class=filename>/etc/services</span> állományba kell felvennünk.</p></dd><dt class=hdlist1>csatlakozás-típusa</dt><dd><p>Ennek az értéke <code>stream</code>, <code>dgram</code>, <code>raw</code>, vagy <code>seqpacket</code> lehet. A <code>stream</code> típust használja a legtöbb kapcsolat-orientált TCP démon, miközben a <code>dgram</code> típus az UDP szállítási protokollt alkalmazó démonok esetében használatos.</p></dd><dt class=hdlist1>protokoll</dt><dd><p>Valamelyik a következõk közül:</p><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Protokoll</th><th class="tableblock halign-left valign-top">Magyarázat</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp, tcp4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TCP IPv4</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp, udp4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UDP IPv4</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TCP IPv6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UDP IPv6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp46</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TCP IPv4 és v6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp46</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UDP IPv4 és v6</p></td></tr></tbody></table></dd><dt class=hdlist1>{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]</dt><dd><p>A <code>wait|nowait</code> beállítás mondja meg, hogy az inetd démonból meghívott démon saját maga képes-e kezelni kapcsolatokat. A <code>dgram</code> típusú kapcsolatok esetében egyértelmûen a <code>wait</code> beállítást kell használni, miközben a <code>stream</code> esetén, ahol általában több szálon dolgozunk, a <code>nowait</code> megadása javasolt. A <code>wait</code> hatására általában egyetlen démonnak adunk át több socketet, míg a <code>nowait</code> minden sockethez egy újabb példányt indít el.</p><div class=paragraph><p>Az inetd által indítható példányokat a <code>max-child</code> megadásával korlátozhatjuk. Ha tehát például az adott démon számára legfeljebb példány létrehozását engedélyezzük, akkor a <code>nowait</code> után <code>/10</code> beállítást kell megadnunk. A <code>/0</code> használatával korlátlan mennyiségû példányt engedélyezhetünk.</p></div><div class=paragraph><p>A <code>max-child</code> mellett még további két másik beállítás jöhet számításba az egyes démonok által kezelhetõ kapcsolatok maximális számának korlátozásában. A <code>max-connections-per-ip-per-minute</code> az egyes IP-címekrõl befutó lekezelhetõ kapcsolatok percenkénti számát szabályozza, így például ha itt a tizes értéket adjuk meg, akkor az adott szolgáltatáshoz egy IP-címrõl percenként csak tízszer férhetünk hozzá. A <code>max-child-per-ip</code> az egyes IP-címekhez egyszerre elindítható példányok számára ír elõ egy korlátot. Ezek a paraméterek segítenek megóvni rendszerünket az erõforrások akaratos vagy akaratlan kimerítésétõl és a DoS (Denial of Service) típusú támadásoktól.</p></div><div class=paragraph><p>Ebben a mezõben a <code>wait</code> vagy <code>nowait</code> valamelyikét kötelezõ megadni. A <code>max-child</code>, <code>max-connections-per-ip-per-minute</code> és <code>max-child-per-ip</code> paraméterek ellenben elhagyhatóak.</p></div><div class=paragraph><p>A <code>stream</code> típusú több szálon futó démonok a <code>max-child</code>, <code>max-connections-per-ip-per-minute</code> vagy <code>max-child-per-ip</code> korlátozása nélkül egyszerûen csak így adhatóak meg: <code>nowait</code>.</p></div><div class=paragraph><p>Ha ugyanezt a démont tíz kapcsolatra lekorlátozzuk, akkor a következõt kell megadnunk: <code>nowait/10</code>.</p></div><div class=paragraph><p>Amikor pedig IP-címenként 20 kapcsolatot engedélyezünk percenként és mindössze 10 példányt, akkor: <code>nowait/10/20</code>.</p></div><div class=paragraph><p>Az iménti beállítások a <a href="https://man.freebsd.org/cgi/man.cgi?query=fingerd&amp;sektion=8&amp;format=html">fingerd(8)</a> démon alapértelmezett paramétereinél is megtalálhatóak:</p></div><div class="literalblock programlisting"><div class=content><pre>finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre></div></div><div class=paragraph><p>Végezetül engedélyezzük 100 példányt, melyek közül IP-címenként 5 használható: <code>nowait/100/0/5</code>.</p></div></dd><dt class=hdlist1>felhasználó</dt><dd><p>Ezzel azt a felhasználót adjuk meg, akinek a nevében az adott démon futni fog. Az esetek túlnyomó részében a démonokat a <code>root</code> felhasználó futtatja. Láthatjuk azonban, hogy biztonsági okokból bizonyos démonok a <code>daemon</code> vagy a legkevesebb joggal rendelkezõ <code>nobody</code> felhasználóval futnak.</p></dd><dt class=hdlist1>szerver-program</dt><dd><p>A kapcsolat felépülésekor az itt teljes elérési úttal megadott démon indul el. Ha ezt a szolgáltatást maga az inetd belsõleg valósítja meg, akkor ebben a mezõben az <code>internal</code> értéket adjuk meg.</p></dd><dt class=hdlist1>szerver-program-paraméterei</dt><dd><p>Ez a <code>szerver-program</code> beállítással együtt mûködik, és ebben a mezõben a démon meghívásakor alkalmazandó paramétereket tudjuk rögzíteni, amelyet a démon nevével kezdünk. Ha a démont a parancssorból a <code>sajátdémon -d</code> paranccsal hívnánk meg, akkor a <code>sajátdémon -d</code> lesz <code>szerver-program-paraméterei</code> beállítás helyes értéke is. Természetesen, ha a démon egy belsõleg megvalósított szolgáltatás, akkor ebben a mezõben is az <code>internal</code> fog megjelenni.</p></dd></dl></div></div><div class=sect2><h3 id=network-inetd-security>29.2.5. Védelem<a class=anchor href=#network-inetd-security></a></h3><div class=paragraph><p>Attól függõen, hogy a telepítés során mit választottunk, az inetd által támogatott szolgáltatások egyes része talán alapból engedélyezett is. Amennyiben egy adott démont konkrétan nem használunk, akkor érdemes megfontolni a letiltását. A kérdéses démon sorába tegyünk egy "#" jelet az <span class=filename>/etc/inetd.conf</span> állományba, majd <a href=#network-inetd-reread>olvastassuk újra az inetd beállításait</a>. Egyes démonok, mint például az fingerd használata egyáltalán nem ajánlott, mivel a támadók számára hasznos információkat tudnak kiszivárogtatni.</p></div><div class=paragraph><p>Más démonok nem ügyelnek a védelemre, és a kapcsolatokhoz rendelt lejárati idejük túlságosan hosszú vagy éppen nincs is. Ezzel a támadónak lehetõsége van lassú kapcsolatokkal leterhelni az adott démont, ezáltal kimeríteni a rendszer erõforrásait. Ha úgy találjuk, hogy túlságosan sok az ilyen kapcsolat, akkor jó ötletnek bizonyulhat a démonok számára a <code>max-connections-per-ip-per-minute</code>, <code>max-child</code> vagy <code>max-child-per-ip</code> korlátozások elrendelése.</p></div><div class=paragraph><p>Alapértelmezés szerint a TCP kapcsolatok wrappelése engedélyezett. A <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a> man oldalon találhatjuk meg az inetd által meghívható különféle démonok TCP-alapú korlátozásainak lehetõségeit.</p></div></div><div class=sect2><h3 id=network-inetd-misc>29.2.6. Egyéb lehetõségek<a class=anchor href=#network-inetd-misc></a></h3><div class=paragraph><p>A daytime, time, echo, discard, chargen és auth szolgáltatások feladatainak mindegyikét maga az inetd is képes ellátni.</p></div><div class=paragraph><p>Az auth szolgáltatás a hálózati keresztül azonosítást teszi lehetõvé és bizonyos mértékig beállítható. A többit egyszerûen csak kapcsoljuk ki vagy be.</p></div><div class=paragraph><p>A témában az <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> man oldalán tudunk még jobban elmerülni.</p></div></div></div></div><div class=sect1><h2 id=network-nfs>29.3. A hálózati állományrendszer (NFS)<a class=anchor href=#network-nfs></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD több állományrendszert ismer, köztük a hálózati állományrendszert (Network File System, NFS) is. Az NFS állományok és könyvtárak megosztását teszi lehetõvé a hálózaton keresztül. Az NFS használatával a felhasználók és a programok képesek majdnem úgy elérni a távoli rendszereken található állományokat, mintha helyben léteznének.</p></div><div class=paragraph><p>Íme az NFS néhány legjelentõsebb elõnye:</p></div><div class=ulist><ul><li><p>A helyi munkaállomások kevesebb tárterületet használnak, mivel a közös adatokat csak egyetlen számítógépen tároljuk és megosztjuk mindenki között.</p></li><li><p>A felhasználóknak nem kell a hálózat minden egyes gépén külön felhasználói könyvtárral rendelkezniük. Ezek ugyanis az NFS segítségével akár egy szerveren is beállíthatóak és elérhetõvé tehetõek a hálózaton keresztül.</p></li><li><p>A különbözõ háttértárak, mint például a floppy lemezek, CD-meghajtók és Zip® meghajtók a hálózaton több számítógép között megoszthatóak. Ezzel csökkenteni tudjuk a hálózatunkban szükséges cserélhetõ lemezes eszközök számát.</p></li></ul></div><div class=sect2><h3 id=_ahogy_az_nfs_mûködik>29.3.1. Ahogy az NFS mûködik<a class=anchor href=#_ahogy_az_nfs_mûködik></a></h3><div class=paragraph><p>Az NFS legalább két fõ részbõl rakható össze: egy szerverbõl és egy vagy több kliensbõl. A kliensek a szerver által megosztott adatokhoz képesek távolról hozzáférni. A megfelelõ mûködéshez mindössze csak néhány programot kell beállítani és futtatni.</p></div><div class=paragraph><p>A szervernek a következõ démonokat kell mûködtetnie:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Démon</th><th class="tableblock halign-left valign-top">Leírás</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>nfsd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az NFS démon, amely kiszolgálja az NFS kliensektõl érkezõ kéréseket.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>mountd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az NFS csatlakoztató démonja, amely végrehajtja az <a href="https://man.freebsd.org/cgi/man.cgi?query=nfsd&amp;sektion=8&amp;format=html">nfsd(8)</a> által átküldött kéréseket.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpcbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Ez a démon lehetõvé teszi az NFS kliensek számára, hogy fel tudják deríteni az NFS szerver által használt portot.</p></td></tr></tbody></table><div class=paragraph><p>A kliensen is futnia kell egy démonnak, amelynek a neve nfsiod. Az nfsiod démon az NFS szerver felõl érkezõ kéréseket szolgálja ki. A használata teljesen opcionális, csupán a teljesítményt hívatott javítani, de a normális és helyes mûködéshez nincs rá szükségünk. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=nfsiod&amp;sektion=8&amp;format=html">nfsiod(8)</a> man oldalán errõl többet is megtudhatunk.</p></div></div><div class=sect2><h3 id=network-configuring-nfs>29.3.2. Az NFS beállítása<a class=anchor href=#network-configuring-nfs></a></h3><div class=paragraph><p>Az NFS beállítása viszonylag egyértelmûen adja magát. A mûködéséhez szükséges programok automatikus elindítása csupán néhány apró módosítást igényel az <span class=filename>/etc/rc.conf</span> állományban.</p></div><div class=paragraph><p>Az NFS szerveren gondoskodjunk róla, hogy az alábbi beállítások szerepeljenek az <span class=filename>/etc/rc.conf</span> állományban:</p></div><div class="literalblock programlisting"><div class=content><pre>rpcbind_enable=&#34;YES&#34;
nfs_server_enable=&#34;YES&#34;
mountd_flags=&#34;-r&#34;</pre></div></div><div class=paragraph><p>A mountd magától el fog indulni, ha az NFS szervert engedélyezzük.</p></div><div class=paragraph><p>A kliensen a következõ beállítást kell felvennünk az <span class=filename>/etc/rc.conf</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>nfs_client_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Az <span class=filename>/etc/exports</span> állomány adja meg, hogy az NFS milyen állományrendszereket exportáljon (vagy másképpen szólva "osszon meg"). Az <span class=filename>/etc/exports</span> állományban tehát a megosztani kívánt állományrendszereket kell szerepeltetnünk, és azt, hogy melyik számítógépekkel tudjuk ezeket elérni. A gépek megnevezése mellett a hozzáférésre további megszorításokat írhatunk fel. Ezek részletes leírását az <a href="https://man.freebsd.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;format=html">exports(5)</a> man oldalon találjuk meg.</p></div><div class=paragraph><p>Lássunk néhány példát az <span class=filename>/etc/exports</span> állományban megjelenõ bejegyzésekre:</p></div><div class=paragraph><p>A most következõ példákban az állományrendszerek exportálásának finomságait igyekszünk érzékeltetni, noha a konkrét beállítások gyakran a rendszerünktõl és a hálózati konfigurációtól függenek. Például, ha a <span class=filename>/cdrom</span> könytárat akarjuk három gép számára megosztani, akik a szerverrel megegyezõ tartományban találhatóak (ezért nem is kell megadnunk a tartományt) vagy mert egyszerûen megtalálhatók az <span class=filename>/etc/hosts</span> állományunkban. Az <code>-ro</code> beállítás az exportált állományrendszereket írásvédetté teszi. Ezzel a beállítással a távoli rendszerek nem lesznek képesek módosítani az exportált állományrendszer tartalmát.</p></div><div class="literalblock programlisting"><div class=content><pre>/cdrom -ro gép1 gép2 gép3</pre></div></div><div class=paragraph><p>A következõ sorban a <span class=filename>/home</span> könyvtárat három gép számára osztjuk meg, melyeket IP-címekkel adtunk meg. Ez olyan helyi hálózat esetén hasznos, ahol nem állítottunk be névfeloldást. Esetleg a belsõ hálózati neveket az <span class=filename>/etc/hosts</span> állományban is tárolhatjuk. Ezzel utóbbival kapcsolatban a <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> man oldalt érdemes fellapoznunk. Az <code>-alldirs</code> beállítás lehetõvé teszi, hogy az alkönyvtárak is csatlakozási pontok lehessenek. Más szóval, nem fogja csatlakoztatni az alkönyvtárakat, de megengedi a kliensek számára, hogy csak azokat a könyvtárakat csatlakoztassák, amelyeket kell vagy amelyekre szükségünk van.</p></div><div class="literalblock programlisting"><div class=content><pre>/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre></div></div><div class=paragraph><p>A következõ sorban az <span class=filename>/a</span> könyvtárat úgy exportáljuk, hogy az állományrendszerhez két különbözõ tartományból is hozzá lehessen férni. A <code>-maproot=root</code> beállítás hatására a távoli rendszer <code>root</code> felhasználója az exportált állományrendszeren szintén <code>root</code> felhasználóként fogja írni az adatokat. Amennyiben a <code>-maproot=root</code> beállítást nem adjuk meg, akkor a távoli rendszeren hiába <code>root</code> az adott felhasználó, az exportált állományrendszeren nem lesz képes egyetlen állományt sem módosítani.</p></div><div class="literalblock programlisting"><div class=content><pre>/a  -maproot=root  gep.minta.com doboz.haz.org</pre></div></div><div class=paragraph><p>A kliensek is csak a megfelelõ engedélyek birtokában képesek elérni a megosztott állományrendszereket. Ezért a klienst ne felejtsük el felvenni a szerver <span class=filename>/etc/exports</span> állományába.</p></div><div class=paragraph><p>Az <span class=filename>/etc/exports</span> állományban az egyes sorok az egyes állományrendszerekre és az egyes gépekre vonatkoznak. A távoli gépek állományrendszerenként csak egyszer adhatóak meg, és csak egy alapértelmezett bejegyzésük lehet. Például tegyük fel, hogy a <span class=filename>/usr</span> egy önálló állományrendszer. Ennek megfelelõen az alábbi bejegyzések az <span class=filename>/etc/exports</span> állományban érvénytelenek:</p></div><div class="literalblock programlisting"><div class=content><pre># Nem használható, ha a /usr egy állományrendszer:
/usr/src   kliens
/usr/ports kliens</pre></div></div><div class=paragraph><p>Egy állományrendszerhez, vagyis itt a <span class=filename>/usr</span> partícióhoz, két export sort is megadtunk ugyanahhoz a <code>kliens</code> nevû géphez. Helyesen így kell megoldani az ilyen helyzeteket:</p></div><div class="literalblock programlisting"><div class=content><pre>/usr/src /usr/ports  kliens</pre></div></div><div class=paragraph><p>Az adott géphez tartozó egy állományrendszerre vonatkozó exportoknak mindig egy sorban kell szerepelniük. A kliens nélkül felírt sorok egyetlen géphez tartozónak fognak számítani. Ezzel az állományrendszerek megosztását tudjuk szabályozni, de legtöbbek számára nem jelent gondot.</p></div><div class=paragraph><p>Most egy érvényes exportlista következik, ahol a <span class=filename>/usr</span> és az <span class=filename>/exports</span> mind helyi állományrendszerek:</p></div><div class="literalblock programlisting"><div class=content><pre># Osszuk meg az src és ports könyvtárakat a kliens01 és kliens02 részére, de csak a
# kliens01 férhessen hozzá rendszeradminisztrátori jogokkal:
/usr/src /usr/ports -maproot=root    kliens01
/usr/src /usr/ports               kliens02
# A kliensek az /exports könyvtárban teljes joggal rendelkeznek és azon belül
# bármit tudnak csatlakoztatni. Rajtuk kívül mindenki csak írásvédetten képes
# elérni az /exports/obj könyvtárat:
/exports -alldirs -maproot=root      kliens01 kliens02
/exports/obj -ro</pre></div></div><div class=paragraph><p>A mountd démonnal az <span class=filename>/etc/exports</span> állományt minden egyes módosítása után újra be kell olvastatni, mivel a változtatásaink csak így fognak érvényesülni. Ezt megcsinálhatjuk úgy is, hogy küldünk egy HUP (hangup, avagy felfüggesztés) jelzést a már futó démonnak:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -HUP `cat /var/run/mountd.pid`</span></code></pre></div></div><div class=paragraph><p>vagy meghívjuk a <code>mountd</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> szkriptet a megfelelõ paraméterrel:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/mountd onereload</span></code></pre></div></div><div class=paragraph><p>Az <a href=../config/#configtuning-rcd>Az rc használata FreeBSD alatt</a>ban tudhatunk meg részleteket az rc szkriptek használatáról.</p></div><div class=paragraph><p>Ezek után akár a FreeBSD újraindításával is aktiválhatjuk a megosztásokat, habár ez nem feltétlenül szükséges. Ha <code>root</code> felhasználónként kiadjuk a következõ parancsokat, akkor azzal minden szükséges programot elindítunk.</p></div><div class=paragraph><p>Az NFS szerveren tehát:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rpcbind</span>
<span class=c># nfsd -u -t -n 4</span>
<span class=c># mountd -r</span></code></pre></div></div><div class=paragraph><p>Az NFS kliensen pedig:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># nfsiod -n 4</span></code></pre></div></div><div class=paragraph><p>Ezzel most már minden készen áll a távoli állományrendszer csatlakoztatására. A példákban a szerver neve <code>szerver</code> lesz, valamint a kliens neve <code>kliens</code>. Ha csak ideiglenesen akarunk csatlakoztatni egy állományrendszert vagy egyszerûen csak ki akarjuk próbálni a beállításainkat, a kliensen <code>root</code> felhasználóként az alábbi parancsot hajtsuk végre:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount szerver:/home /mnt</span></code></pre></div></div><div class=paragraph><p>Ezzel a szerveren található <span class=filename>/home</span> könyvtárat fogjuk a kliens <span class=filename>/mnt</span> könyvtárába csatlakoztatni. Ha mindent jól beállítottunk, akkor a kliensen most már be tudunk lépni az <span class=filename>/mnt</span> könyvtárba és láthatjuk a szerveren található állományokat.</p></div><div class=paragraph><p>Ha a számítógép indításával automatikusan akarunk hálózati állományrendszereket csatlakoztatni, akkor vegyük fel ezeket az <span class=filename>/etc/fstab</span> állományba. Erre íme egy példa:</p></div><div class="literalblock programlisting"><div class=content><pre>szerver:/home	/mnt	nfs	rw	0	0</pre></div></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a> man megtalálhatjuk az összes többi beállítást.</p></div></div><div class=sect2><h3 id=_zárolások>29.3.3. Zárolások<a class=anchor href=#_zárolások></a></h3><div class=paragraph><p>Bizonyos alkalmazások (például a mutt) csak akkor mûködnek megfelelõen, ha az állományokat a megfelelõ módon zárolják. Az NFS esetében az rpc.lockd használható az ilyen zárolások megvalósítására. Az engedélyezéséhez mind a szerveren és a kliensen vegyük fel a következõ sort az <span class=filename>/etc/rc.conf</span> állományba (itt már feltételezzük, hogy az NFS szervert és klienst korábban beállítottuk):</p></div><div class="literalblock programlisting"><div class=content><pre>rpc_lockd_enable=&#34;YES&#34;
rpc_statd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>A következõ módon indíthatjuk el:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/lockd start</span>
<span class=c># /etc/rc.d/statd start</span></code></pre></div></div><div class=paragraph><p>Ha nincs szükségünk valódi zárolásra az NFS kliensek és az NFS szerver között, akkor megcsinálhatjuk azt is, hogy az NFS kliensen a <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8&amp;format=html">mount_nfs(8)</a> programnak az <code>-L</code> paraméter átadásával csak helyileg végzünk zárolást. Ennek további részleterõl a <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8&amp;format=html">mount_nfs(8)</a> man oldalon kaphatunk felvilágosítást.</p></div></div><div class=sect2><h3 id=_gyakori_felhasználási_módok>29.3.4. Gyakori felhasználási módok<a class=anchor href=#_gyakori_felhasználási_módok></a></h3><div class=paragraph><p>Az NFS megoldását a gyakorlatban rengeteg esetben alkalmazzák. Ezek közül most felsoroljuk a legelterjedtebbeket:</p></div><div class=ulist><ul><li><p>Több gép között megosztunk egy telepítõlemezt vagy más telepítõeszközt. Ez így sokkal olcsóbb és gyakorta kényelmes megoldás abban az esetben, ha egyszerre több gépre akarjuk ugyanazt a szoftvert telepíteni.</p></li><li><p>Nagyobb hálózatokon sokkal kényelmesebb lehet egy központi NFS szerver használata, ahol a felhasználók könyvtárait tároljuk. Ezek a felhasználói könyvtárak aztán megoszthatóak a hálózaton keresztül, így a felhasználók mindig ugyanazt a könyvárat kapják függetlenül attól, hogy milyen munkaállomásról is jelentkeztek be.</p></li><li><p>Több géppel is képes így osztozni az <span class=filename>/usr/ports/distfiles</span> könyvtáron. Ezen a módon sokkal gyorsabban tudunk portokat telepíteni a gépekre, mivel nem kell külön mindegyikre letölteni az ehhez szükséges forrásokat.</p></li></ul></div></div><div class=sect2><h3 id=network-amd>29.3.5. Automatikus csatlakoztatás az amd használatával<a class=anchor href=#network-amd></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=amd&amp;sektion=8&amp;format=html">amd(8)</a> (automatikus csatlakoztató démon, az automatic mounter daemon) önmûködõen csatlakoztatja a távoli állományrendszereket, amikor azokon belül valamelyik állományhoz vagy könyvtárhoz próbálunk hozzáférni. Emellett az amd az egy ideje már inaktív állományrendszereket is automatikusan leválasztja. Az amd használata egy remek alternatívát kínál az általában az <span class=filename>/etc/fstab</span> állományban megjelenõ állandóan csatlakoztatott állományrendszerekkel szemben.</p></div><div class=paragraph><p>Az amd úgy mûködik, hogy kapcsolódik egy NFS szerver <span class=filename>/host</span> és <span class=filename>/net</span> könyvtáraihoz. Amikor egy állományt akarunk elérni ezeken a könyvtárakon belül, az amd kikeresi a megfelelõ távoli csatlakoztatást és magától csatlakoztatja. A <span class=filename>/net</span> segítségével egy IP-címrõl tudunk exportált állományrendszereket csatlakoztatni, miközben a <span class=filename>/host</span> a távoli gép hálózati neve esetében használatos.</p></div><div class=paragraph><p>Ha tehát a <span class=filename>/host/izemize/usr</span> könyvtárban akarunk elérni egy állományt, akkor az amd démonnak ahhoz elõször az <code>izemize</code> nevû géprõl exportált <span class=filename>/usr</span> könyvtárat kell csatlakoztatnia.</p></div><div class=exampleblock><div class=title>Példa 2. Egy exportált állományrendszer csatlakoztatása az amd használatával</div><div class=content><div class=paragraph><p>Egy távoli számítógép által rendelkezésre bocsátott megosztásokat a <code>showmount</code> paranccsal tudjuk lekérdezni. Például az <code>izemize</code> gépen elérhetõ exportált állományrendszereket így láthatjuk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% showmount <span class=nt>-e</span> izemize
Exports list on izemize:
/usr                               10.10.10.0
/a                                 10.10.10.0
% <span class=nb>cd</span> /host/izemize/usr</code></pre></div></div></div></div><div class=paragraph><p>Ahogy a példában látjuk is, a <code>showmount</code> parancs a <span class=filename>/usr</span> könyvtárat mutatja megosztásként. Amikor tehát belépünk a <span class=filename>/host/izemize/usr</span> könyvtárba, akkor amd magától megpróbálja feloldani az <code>izemize</code> hálózati nevet és csatlakoztatni az elérni kívánt exportált állományrendszert.</p></div><div class=paragraph><p>Az amd az indító szkripteken keresztül az <span class=filename>/etc/rc.conf</span> alábbi beállításával engedélyezhetõ:</p></div><div class="literalblock programlisting"><div class=content><pre>amd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Emellett még az <code>amd_flags</code> használatával további paraméterek is átadható az amd felé. Alapértelmezés szerint az <code>amd_flags</code> tartalmaz az alábbi:</p></div><div class="literalblock programlisting"><div class=content><pre>amd_flags=&#34;-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map&#34;</pre></div></div><div class=paragraph><p>Az <span class=filename>/etc/amd.map</span> állomány adja meg az exportált állományrendszerek alapértelmezett beállításait. Az <span class=filename>/etc/amd.conf</span> állományban az amd további lehetõségeit konfigurálhatjuk..</p></div><div class=paragraph><p>Ha többet is szeretnénk tudni a témáról, akkor az <a href="https://man.freebsd.org/cgi/man.cgi?query=amd&amp;sektion=8&amp;format=html">amd(8)</a> és az <a href="https://man.freebsd.org/cgi/man.cgi?query=amd.conf&amp;sektion=8&amp;format=html">amd.conf(8)</a> man oldalakat javasolt elolvasnunk.</p></div></div><div class=sect2><h3 id=network-nfs-integration>29.3.6. Problémák más rendszerek használatakor<a class=anchor href=#network-nfs-integration></a></h3><div class=paragraph><p>Némely PC-s ISA buszos Ethernet kártyákra olyan korlátozások érvényesek, melyek komoly hálózati problémák keletkezéséhez vezethetnek, különösen az NFS esetében. Ez a nehézség nem FreeBSD-függõ, de a FreeBSD rendszereket is érinti.</p></div><div class=paragraph><p>Ez gond általában majdnem mindig akkor merül fel, amikor egy (FreeBSD-s) PC egy hálózatba kerül többek közt a Silicon Graphic és a Sun Microsystems által gyártott nagyteljesítményû munkaállomásokkal. Az NFS csatlakoztatása és bizonyos mûveletek még hibátlanul végrehajtódnak, azonban hirtelen a szerver látszólag nem válaszol többet a kliens felé úgy, hogy a többi rendszertõl folyamatosan dolgozza felfele a kéréseket. Ez a kliens rendszeren tapasztalható csak, amikor a kliens FreeBSD vagy egy munkaállomás. Sok rendszeren egyszerûen rendesen le sem lehet állítani a klienst, ha a probléma egyszer már felütötte a fejét. Egyedüli megoldás gyakran csak a kliens újraindítása marad, mivel az NFS-ben kialakult helyzetet máshogy nem lehet megoldani.</p></div><div class=paragraph><p>Noha a "helyes" megoldás az lenne, ha beszereznénk egy nagyobb teljesítményû és kapacitású kártyát a FreeBSD rendszer számára, azonban egy jóval egyszerûbb kerülõút is található a kielégítõ mûködés eléréséhez. Ha a FreeBSD rendszer képviseli a <em>szervert</em>, akkor a kliensnél adjuk meg a <code>-w=1024</code> beállítást is a csatlakoztatásnál. Ha a FreeBSD rendszer a <em>kliens</em> szerepét tölti be, akkor az NFS állományrendszert az <code>-r=1024</code> beállítással csatlakoztassuk róla. Ezek a beállítások az <span class=filename>fstab</span> állomány negyedik mezõjében is megadhatóak az automatikus csatlakoztatáshoz, vagy manuális esetben a <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> parancsnak a <code>-o</code> paraméterrel.</p></div><div class=paragraph><p>Hozzá kell azonban tennünk, hogy létezik egy másik probléma, amit gyakran ezzel tévesztenek össze, amikor az NFS szerverek és kliensek nem ugyanabban a hálózatban találhatóak. Ilyen esetekben mindenképpen <em>gyõzõdjünk meg róla</em>, hogy az útválasztók rendesen továbbküldik a mûködéshez szükséges UDP információkat, különben nem sokat tudunk tenni a megoldás érdekében.</p></div><div class=paragraph><p>A most következõ példákban a <code>gyorsvonat</code> lesz a nagyteljesítményû munkaállomás (felület) neve, illetve a <code>freebsd</code> pedig a gyengébb teljesítményû Ethernet kártyával rendelkezõ FreeBSD rendszer (felület) neve. A szerveren az <span class=filename>/osztott</span> nevû könyvtárat fogjuk NFS állományrendszerként exportálni (lásd <a href="https://man.freebsd.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;format=html">exports(5)</a>), amelyet majd a <span class=filename>/projekt</span> könyvtárba fogunk csatlakoztatni a kliensen. Minden esetben érdemes lehet még megadnunk a <code>hard</code> vagy <code>soft</code>, illetve <code>bg</code> opciókat is.</p></div><div class=paragraph><p>Ebben a példában a FreeBSD rendszer (<code>freebsd</code>) lesz a kliens, és az <span class=filename>/etc/fstab</span> állományában így szerepel az exportált állományrendszer:</p></div><div class="literalblock programlisting"><div class=content><pre>gyorsvonat:/osztott /projekt nfs rw,-r=1024 0 0</pre></div></div><div class=paragraph><p>És így tudjuk manuálisan csatlakoztatni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t nfs -o -r=1024 gyorsvonat:/osztott /projekt</span></code></pre></div></div><div class=paragraph><p>Itt a FreeBSD rendszer lesz a szerver, és a <code>gyorsvonat</code><span class=filename>/etc/fstab</span> állománya így fog kinézni:</p></div><div class="literalblock programlisting"><div class=content><pre>freebsd:/osztott /projekt nfs rw,-w=1024 0 0</pre></div></div><div class=paragraph><p>Manuálisan így csatlakoztathatjuk az állományrendszert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t nfs -o -w=1024 freebsd:/osztott /projekt</span></code></pre></div></div><div class=paragraph><p>Szinte az összes 16 bites Ethernet kártya képes mûködni a fenti írási vagy olvasási korlátozások nélkül is.</p></div><div class=paragraph><p>A kíváncsibb olvasók számára eláruljuk, hogy pontosan miért is következik be ez a hiba, ami egyben arra is magyarázatot ad, hogy miért nem tudjuk helyrehozni. Az NFS általában 8 kilobyte-os "blokkokkal" dolgozik (habár kisebb méretû darabkákat is tud készíteni). Mivel az Ethernet által kezelt legnagyobb méret nagyjából 1500 byte, ezért az NFS "blokkokat" több Ethernet csomagra kell osztani - még olyankor is, ha ez a program felsõbb rétegeiben osztatlan egységként látszik - ezt aztán fogadni kell, összerakni és <em>nyugtázni</em> mint egységet. A nagyteljesítményû munkaállomások a szabvány által még éppen megengedett szorossággal képesek ontani magukból az egy egységhez tartozó csomagokat, közvetlenül egymás után. A kisebb, gyengébb teljesítményû kártyák esetében azonban az egymáshoz tartozó, késõbb érkezõ csomagok ráfutnak a korábban megkapott csomagokra még pontosan azelõtt, hogy elérnék a gépet, így az egységek nem állíthatóak össze vagy nem nyugtázhatóak. Ennek eredményeképpen a munkaállomás egy adott idõ múlva megint próbálkozik, de ismét az egész 8 kilobyte-os blokkot küldi el, ezért ez a folyamat a végtelenségig ismétlõdik.</p></div><div class=paragraph><p>Ha a küldendõ egységek méretét az Ethernet által kezelt csomagok maximális mérete alá csökkentjük, akkor biztosak lehetünk benne, hogy a teljes Ethernet csomag egyben megérkezik és nyugtázódik, így elkerüljük a holtpontot.</p></div><div class=paragraph><p>A nagyteljesítményû munkaállomások természetesen továbbra is küldhetnek a PC-s rendszerek felé túlfutó csomagokat, de egy jobb kártyával az ilyen túlfutások nem érintik az NFS által használt "egységeket". Amikor egy ilyen túlfutás bekövetkezik, az érintett egységet egyszerûen újra elküldik, amelyet a rákövetkezõ alkalommal nagy valószínûséggel már tudunk rendesen fogadni, összerakni és nyugtázni.</p></div></div></div></div><div class=sect1><h2 id=network-nis>29.4. Hálózati információs rendszer (NIS/YP)<a class=anchor href=#network-nis></a></h2><div class=sectionbody><div class=sect2><h3 id=_mi_ez>29.4.1. Mi ez?<a class=anchor href=#_mi_ez></a></h3><div class=paragraph><p>A hálózati információs szolgáltatást (Network Information Service, avagy NIS) a Sun Microsystems fejlesztette ki a UNIX® (eredetileg SunOS™) rendszerek központosított karbantartásához. Mostanra már lényegében ipari szabvánnyá nõtte ki magát, hiszen az összes nagyobb UNIX®-szerû rendszer (a Solaris™, HP-UX, AIX®, Linux, NetBSD, OpenBSD, FreeBSD stb.) támogatja a NIS használatát.</p></div><div class=paragraph><p>A NIS régebben sárga oldalak (Yellow Pages) néven volt ismert, de a különbözõ jogi problémák miatt késõbb ezt a Sun megváltoztatta. A régi elnevezést (és a yp rövidítést) azonban még napjainkban is lehet néhol látni.</p></div><div class=paragraph><p>Ez egy RPC alapján mûködõ, kliens/szerver felépítésû rendszer, amely az egy NIS tartomány belül levõ számítógépek számára teszi lehetõvé ugyanazon konfigurációs állományok használatát. Segítségével a rendszergazda a NIS klienseket a lehetõ legkevesebb adat hozzáadásával, eltávolításával vagy módosításával képes egyetlen helyrõl beállítani.</p></div><div class=paragraph><p>Hasonló a Windows NT® tartományaihoz, és habár a belsõ implementációt tekintve már akadnak köztük jelentõs eltérések is, az alapvetõ funkciók szintjén mégis összevethetõek.</p></div></div><div class=sect2><h3 id=_a_témához_tartozó_fogalmak_és_programok>29.4.2. A témához tartozó fogalmak és programok<a class=anchor href=#_a_témához_tartozó_fogalmak_és_programok></a></h3><div class=paragraph><p>A NIS telepítése számos fogalom és fontos felhasználói program kerül elõ FreeBSD-n, akár egy NIS szervert akarunk beállítani, akár csak egy NIS klienst:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Fogalom</th><th class="tableblock halign-left valign-top">Leírás</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>NIS tartománynév</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A NIS központi szerverei és az összes hozzájuk tartozó kliens (beleértve az alárendelt szervereket) rendelkezik egy NIS tartománynévvel. Hasonló a Windows NT® által használt tartománynevekhez, de a NIS tartománynevei semmilyen kapcsolatban nem állnak a névfeloldással.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpcbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az RPC (Remote Procedure Call, a NIS által használt egyik hálózati protokoll) engedélyezéséhez lesz rá szükségünk. Ha az rpcbind nem fut, akkor sem NIS szervert, sem pedig NIS klienst nem tudunk mûködtetni.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ypbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A NIS klienst "köti össze" a hozzá tartozó NIS szerverrel. A NIS tartománynevet a rendszertõl veszi, és az RPC használatával csatlakozik a szerverhez. Az ypbind a NIS környezet kliens és szerver közti kommunikációjának magját alkotja. Ha az ypbind leáll a kliens gépén, akkor nem tudjuk elérni a NIS szervert.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ypserv</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Csak a NIS szervereken szabad futnia, mivel ez maga a NIS szerver programja. Ha az <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> leáll, akkor a szerver nem lesz képes tovább kiszolgálni a NIS kéréseket (szerencsére az alárendelt szerverek képesek átvenni ezeket). A NIS bizonyos változatai (de nem az, amelyik a FreeBSD-ben is megjelenik) nem próbálnak meg más szerverekhez csatlakozni, ha bedöglik az aktuális használt szerver. Ezen gyakran egyedül csak a szervert képviselõ program (vagy akár az egész szerver) újraindítása segíthet, illetve az ypbind újraindítása a kliensen.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpc.yppasswdd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Ez egy olyan program, amelyet csak a NIS központi szerverein kell csak futtatni. Ez a démon a NIS kliensek számára a NIS jelszavaik megváltoztatását teszi lehetõvé. Ha ez a démon nem fut, akkor a felhasználók csak úgy tudják megváltoztatni a jelszavukat, ha bejelentkeznek a központi NIS szerverre.</p></td></tr></tbody></table></div><div class=sect2><h3 id=_hogyan_mûködik>29.4.3. Hogyan mûködik?<a class=anchor href=#_hogyan_mûködik></a></h3><div class=paragraph><p>A NIS környezetekben háromféle gép létezik: a központi szerverek, az alárendelt szerverek és a kliensek. A szerverek képezik a gépek konfigurációs információinak központi tárhelyét. A központi szerverek tárolják ezen információk hiteles másolatát, míg ezt az alárendelt szerverek redundánsan tükrözik. A kliensek a szerverekre támaszkodnak ezen információk beszerzéséhez.</p></div><div class=paragraph><p>Sok állomány tartalma megosztható ezen a módon. Például a <span class=filename>master.passwd</span>, a <span class=filename>group</span> és <span class=filename>hosts</span> állományokat meg szokták osztani NFS-en. Amikor a kliensen futó valamelyik programnak olyan információra lenne szüksége, amely általában ezekben az állományokban nála megtalálható lenne, akkor helyette a NIS szerverhez fordul.</p></div><div class=sect3><h4 id=_a_gépek_típusai>29.4.3.1. A gépek típusai<a class=anchor href=#_a_gépek_típusai></a></h4><div class=ulist><ul><li><p>A <em>központi NIS szerver</em>. Ez a szerver, amely leginkább a Windows NT® elsõdleges tartományvezérlõjéhez hasonlítható tartja karban az összes, NIS kliensek által használt állományt. A <span class=filename>passwd</span>, <span class=filename>group</span>, és összes többi ehhez hasonló állomány ezen a központi szerveren található meg.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Egy gép akár több NIS tartományban is lehet központi szerver. Ezzel a lehetõséggel viszont itt most nem foglalkozunk, mivel most csak egy viszonylag kis méretû NIS környezetet feltételezünk.</p></div></td></tr></tbody></table></div></li><li><p>Az <em>alárendelt NIS szerverek</em>. A Windows NT® tartalék tartományvezérlõihez hasonlítanak, és az alárendelt NIS szerverek feladata a központi NIS szerveren tárolt adatok másolatainak karbantartása. Az alárendelt NIS szerverek a redundancia megvalósításában segítenek, aminek leginkább a fontosabb környezetekben van szerepe. Emellett a központi szerver terhelésének kiegyenlítését is elvégzik. A NIS kliensek elsõként mindig ahhoz a NIS szerverhez csatlakoznak, amelytõl elõször választ kapnak, legyen akár az egy alárendelt szerver.</p></li><li><p>A <em>NIS kliensek</em>. A NIS kliensek, hasonlóan a Windows NT® munkaállomásokhoz, a NIS szerveren (amely a Windows NT® munkaállomások esetében a tartományvezérlõ) keresztül jelentkeznek be.</p></li></ul></div></div></div><div class=sect2><h3 id=_a_nisyp_használata>29.4.4. A NIS/YP használata<a class=anchor href=#_a_nisyp_használata></a></h3><div class=paragraph><p>Ebben a szakaszban egy példa NIS környezetet állítunk be.</p></div><div class=sect3><h4 id=_tervezés>29.4.4.1. Tervezés<a class=anchor href=#_tervezés></a></h4><div class=paragraph><p>Tegyük fel, hogy egy aprócska egyetemi labor rendszergazdái vagyunk. A labor, mely 15 FreeBSD-s gépet tudhat magáénak, jelen pillanatban még semmilyen központosított adminisztráció nem létezik. Mindegyik gép saját <span class=filename>/etc/passwd</span> és <span class=filename>/etc/master.passwd</span> állománnyal rendelkezik. Ezeket az állományokat saját kezûleg kell szinkronban tartani. Tehát ha most felveszünk egy felhasználót a laborhoz, akkor az <code>adduser</code> parancsot mind a 15 gépen ki kell adni. Egyértelmû, hogy ez így nem maradhat, ezért úgy döntöttük, hogy a laborban NIS-t fogunk használni, és két gépet kinevezünk szervernek.</p></div><div class=paragraph><p>Az iméntieknek megfelelõen a labor most valahogy így néz ki:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">A gép neve</th><th class="tableblock halign-left valign-top">IP-cím</th><th class="tableblock halign-left valign-top">A gép szerepe</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ellington</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>központi NIS</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>coltrane</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>alárendelt NIS</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>basie</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.4</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>tanszéki munkaállomás</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>bird</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>kliensgép</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>cli[1-11]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.[6-17]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>a többi kliensgép</p></td></tr></tbody></table><div class=paragraph><p>Ha még nincs tapasztalatunk a NIS rendszerek összeállításában, akkor elõször jó ötlet lehet végiggondolni, miként is akarjuk kialakítani. A hálózatunk méretétõl függetlenül is akadnak olyan döntések, amelyeket mindenképpen meg kell hoznunk.</p></div><div class=sect4><h5 id=_a_nis_tartománynév_megválasztása>29.4.4.1.1. A NIS tartománynév megválasztása<a class=anchor href=#_a_nis_tartománynév_megválasztása></a></h5><div class=paragraph><p>Ez nem az a "tartománynév", amit megszokhattunk. Ennek a pontos neve "NIS tartománynév". Amikor a kliensek kérnek valamilyen információt, akkor megadják annak a NIS tartománynak a nevét is, amelynek részei. Így tud egy hálózaton több szerver arról dönteni, hogy melyikük melyik kérést válaszolja meg. A NIS által használt tartománynévre tehát inkább úgy érdemes gondolni, mint egy valamilyen módon összetartozó gépek közös nevére.</p></div><div class=paragraph><p>Elõfordul, hogy egyes szervezetek az interneten is nyilvántartott tartománynevüket választják NIS tartománynévnek. Ez alapvetõen nem ajánlott, mivel a hálózati problémák felderítése közben félreértéseket szülhet. A NIS tartománynévnek a hálózatunkon belül egyedinek kell lennie, és lehetõleg minél jobban írja le az általa csoportba sorolt gépeket. Például a Kis Kft. üzleti osztályát tegyük a "kis-uzlet" NIS tartományba. Ebben a példában most a <code>proba-tartomany</code> nevet választottuk.</p></div><div class=paragraph><p>A legtöbb operációs rendszer azonban (köztük a SunOS™) a NIS tartománynevet használja internetes tartománynévként is. Ha a hálózatunkon egy vagy több ilyen gép is található, akkor a NIS tartomány nevének az internetes tartománynevet <em>kell</em> megadnunk.</p></div></div><div class=sect4><h5 id=_a_szerverek_fizikai_elvárásai>29.4.4.1.2. A szerverek fizikai elvárásai<a class=anchor href=#_a_szerverek_fizikai_elvárásai></a></h5><div class=paragraph><p>Nem árt néhány dolgot fejben tartani, amikor a NIS szervernek használt gépet kiválasztjuk. Az egyik ilyen szerencsétlen dolog az a szintû függõség, ami a NIS kliensek felõl megfigyelhetõ a szerverek felé. Ha egy kliens nem tudja a NIS tartományon belül felvenni a kapcsolatot valamelyik szerverrel, akkor az a gép könnyen megbízhatatlanná válhat. Felhasználói- és csoportinformációk nélkül a legtöbb rendszer egy idõre le is merevedik. Ennek figyelembevételével tehát olyan gépet kell szervernek választanunk, amelyet nem kell gyakran újraindítani, és nem végzünk rajta semmilyen komoly munkát. A célnak legjobban megfelelõ NIS szerverek valójában olyan gépek, amelyek egyedüli feladata csak a NIS kérések kiszolgálása. Ha a hálózatunk nem annyira leterhelt, akkor még a NIS szerver mellett más programokat is futtathatunk, de ne feledjük, hogy ha a NIS szolgáltatás megszûnik, akkor az az <em>összes</em> NIS kliensen éreztetni fogja kedvezõtlen hatását.</p></div></div></div><div class=sect3><h4 id=_a_nis_szerverek>29.4.4.2. A NIS szerverek<a class=anchor href=#_a_nis_szerverek></a></h4><div class=paragraph><p>A NIS rendszerben tárolt összes információ általános példánya egyetlen gépen található meg, amelyet a központi NIS szervernek hívunk. Az információk tárolására szánt adatbázis pedig NIS táblázatoknak (NIS map) nevezzük. FreeBSD alatt ezek a táblázatok a <span class=filename>/var/yp/tartománynév</span> könyvtárban találhatóak, ahol a <span class=filename>tartománynév</span> a kiszolgált NIS tartományt nevezi meg. Egyetlen NIS szerver egyszerre akár több tartományt is kiszolgálhat, így itt több könyvtár is található, minden támogatott tartományhoz egy. Minden tartomány saját, egymástól független táblázatokkal rendelkezik.</p></div><div class=paragraph><p>A központi és alárendelt NIS szerverek az <code>ypserv</code> démon segítségével dolgozzák fel a NIS kéréseket. Az <code>ypserv</code> felelõs a NIS kliensektõl befutó kérések fogadásáért, és a kért tartomány valamint táblázat nevébõl meghatározza az adatbázisban tárolt állományt, majd innen visszaküldi a hozzá tartozó adatot a kliensnek.</p></div><div class=sect4><h5 id=_a_központi_nis_szerver_beállítása>29.4.4.2.1. A központi NIS szerver beállítása<a class=anchor href=#_a_központi_nis_szerver_beállítása></a></h5><div class=paragraph><p>A központi NIS szerver beállítása viszonylag magától értetõdõ, de a nehézségét az igényeink szabják meg. A FreeBSD alapból támogatja a NIS használatát. Ezért mindössze annyit kell tennünk, hogy a következõ sorokat betesszük az <span class=filename>/etc/rc.conf</span> állományba, és a FreeBSD gondoskodik a többirõl.</p></div><div class="exampleblock procedure"><div class=content><div class="literalblock programlisting"><div class=content><pre>nisdomainname=&#34;proba-tartomany&#34;</pre></div></div><div class="olist arabic"><ol class=arabic><li><p>Ez a sor adja meg a hálózati beállítások (vagy például az újraindítás) során a NIS tartomány nevét, amely a korábbiak szerint itt most a <code>proba-tartomany</code>.</p></li></ol></div><div class="literalblock programlisting"><div class=content><pre>nis_server_enable=&#34;YES&#34;</pre></div></div><div class="olist arabic"><ol class=arabic><li><p>Ezzel utasítjuk a FreeBSD-t, hogy a hálózati alkalmazások következõ indításakor a NIS szervert is aktiválja.</p></li></ol></div><div class="literalblock programlisting"><div class=content><pre>nis_yppasswdd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Ezzel engedélyezzük az <code>rpc.yppasswdd</code> démont, amely a korábban említettek szerint lehetõvé teszi a felhasználók számára, hogy a közvetlenül a kliensekrõl változtassák meg a NIS jelszavukat.</p></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A konkrét NIS beállításainktól függõen további bejegyzések felvételére is szükségünk lehet. Erre késõbb még <a href=#network-nis-server-is-client>"az olyan NIS szervereknél, amelyek egyben NIS kliensek"</a>, vissza fogunk térni.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Miután ezeket beállítottuk, rendszeradminisztrátorként adjuk ki az <code>/etc/netstart</code> parancsot. Az <span class=filename>/etc/rc.conf</span> állományban szereplõ adatok alapján mindent beállít magától. Még mielõtt inicializálnánk a NIS táblázatokat, indítsuk el manuálisan az ypserv démont:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/ypserv start</span></code></pre></div></div></div><div class=sect4><h5 id=_a_nis_táblázatok_inicializálása>29.4.4.2.2. A NIS táblázatok inicializálása<a class=anchor href=#_a_nis_táblázatok_inicializálása></a></h5><div class=paragraph><p>A <em>NIS táblázatok</em> lényegében a <span class=filename>/var/yp</span> könyvtárban tárolt adatbázisok. A központi NIS szerver <span class=filename>/etc</span> könyvtárában található konfigurációs állományokból állítódnak elõ, egyetlen kivétellel: ez az <span class=filename>/etc/master.passwd</span> állomány. Ennek megvan a maga oka, hiszen nem akarjuk a <code>root</code> és az összes többi fontosabb felhasználóhoz tartozó jelszót az egész NIS tartománnyal megosztani. Ennek megfelelõen a NIS táblázatok inicializálásához a következõt kell tennünk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cp /etc/master.passwd /var/yp/master.passwd</span>
<span class=c># cd /var/yp</span>
<span class=c># vi master.passwd</span></code></pre></div></div><div class=paragraph><p>El kell távolítanunk az összes rendszerszintû (<code>bin</code>, <code>tty</code>, <code>kmem</code>, <code>games</code>, stb), és minden olyan egyéb hozzáférést, amelyeket nem akarjuk közvetíteni a NIS kliensek felé (például a <code>root</code> és minden más nullás, vagyis rendszeradminisztrátori azonosítóval ellátott hozzáférést).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Gondoskodjunk róla, hogy az <span class=filename>/var/yp/master.passwd</span> állomány sem a csoport, sem pedig bárki más számára nem olvasható (600-as engedély)! Ennek beállításához használjuk az <code>chmod</code> parancsot, ha szükséges.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ha végeztünk, akkor már tényleg itt az ideje inicializálni NIS táblázatainkat. A FreeBSD erre egy <code>ypinit</code> nevû szkriptet ajánl fel (errõl a saját man oldalán tudhatunk meg többet). Ez a szkript egyébként a legtöbb UNIX® típusú operációs rendszeren megtalálható, de nem az összesen. A Digital UNIX/Compaq Tru64 UNIX rendszereken ennek a neve <code>ypsetup</code>. Mivel most a központi NIS szerver táblázatait hozzuk létre, azért az <code>ypinit</code> szkriptnek át kell adnunk a <code>-m</code> opciót is. A NIS táblázatok elõállításánál feltételezzük, hogy a fentebb ismertetett lépéseket már megtettük, majd kiadjuk ezt a parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# ypinit <span class=nt>-m</span> proba-tartomany
Server Type: MASTER Domain: proba-tartomany
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? <span class=o>[</span>y/n: n] n
Ok, please remember to go back and redo manually whatever fails.
If you don<span class=s1>&#39;t, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  coltrane
next host to add:  ^D
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] y

[ .. a táblázatok generálása .. ]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</span></code></pre></div></div><div class=paragraph><p>Az üzenetek fordítása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>A szerver típusa: KÖZPONTI, tartomány: proba-tartomany
Az YP szerver létrehozásához meg kell válaszolni néhány kérdést az
eljárás megkezdése előtt.
Szeretnénk, ha az eljárás megszakadna a nem végzetes hibák esetén is? <span class=o>[</span>i/n: n] n
Rendben, akkor ne felejtsük el manuálisan kijavítani a hibát, ha
valamivel gond lenne.  Ha nem tesszük meg, akkor előfordulhat, hogy
valami nem fog rendesen működni.  Most össze kell állítanunk egy listát
a tartomány YP szervereiről.
Jelenleg a rod.darktech.org a központi szerver.
Kérjünk, adjon meg további alárendelt szervereket, soronként egyet.
Amikor ezt befejeztük, a &lt;control D&gt; lenyomásával tudunk
kilépni.
központi szerver : ellington
következő gép    : coltrane
következő gép    : ^D
A NIS szerverek listája jelenleg a következő:
ellington
coltrane
Ez megfelelő?  <span class=o>[</span>i/n: i] i

<span class=o>[</span> .. a táblázatok generálása .. <span class=o>]</span>

A NIS táblázatok sikeressen frissültek.
Az elligon szervert minden hiba nélkül sikerült központi szerverként
beállítani.</code></pre></div></div><div class=paragraph><p>Az <code>ypinit</code> a <span class=filename>/var/yp/Makefile.dist</span> állományból létrehozza a <span class=filename>/var/yp/Makefile</span> állományt. Amennyiben ez létrejött, az állomány feltételezi, hogy csak FreeBSD-s gépek részvételével akarunk kialakítani egy egyszerveres NIS környezetet. Mivel a <code>proba-tartomany</code> még egy alárendelt szervert is tartalmaz, ezért át kell írnunk a <span class=filename>/var/yp/Makefile</span> állományt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# vi /var/yp/Makefile</code></pre></div></div><div class=paragraph><p>Ezt a sort kell megjegyzésbe tennünk:</p></div><div class="literalblock programlisting"><div class=content><pre>NOPUSH = &#34;True&#34;</pre></div></div><div class=paragraph><p>(ha még nem lenne úgy).</p></div></div><div class=sect4><h5 id=_az_alárendelt_nis_szerverek_beállítása>29.4.4.2.3. Az alárendelt NIS szerverek beállítása<a class=anchor href=#_az_alárendelt_nis_szerverek_beállítása></a></h5><div class=paragraph><p>Az alárendelt NIS szerverek beállítása még a központinál is egyszerûbb. Jelentkezzünk be az alárendelt szerverre és az eddigieknek megfelelõen írjuk át az <span class=filename>/etc/rc.conf</span> állományt. Az egyetlen különbség ezúttal csupán annyi lesz, hogy az <code>ypinit</code> lefuttatásakor a <code>-s</code> opciót kell megadnunk (mint slave, vagyis alárendelt). A <code>-s</code> opció használatához a központi NIS szerver nevét is át kell adnunk, ezért a konkrét parancs valahogy így fog kinézni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>coltrane# ypinit <span class=nt>-s</span> ellington proba-tartomany

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? <span class=o>[</span>y/n: n]  n

Ok, please remember to go back and redo manually whatever fails.
If you don<span class=s1>&#39;t, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don&#39;</span>t forget to update map ypservers on ellington.</code></pre></div></div><div class=paragraph><p>Most már lennie kell egy <span class=filename>/var/yp/proba-tartomany</span> nevû könyvtárunknak is. A központi NIS szerver táblázatainak másolata itt fognak tárolódni. Ezeket soha ne felejtsük el frissen tartani. Az alárendelt szervereken a következõ <span class=filename>/etc/crontab</span> bejegyzések pontosan ezt a feladatot látják el:</p></div><div class="literalblock programlisting"><div class=content><pre>20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre></div></div><div class=paragraph><p>Ez a két sor gondoskodik róla, hogy az alárendelt szerverek ne felejtsék el egyeztetni a táblázataikat a központi szerver táblázataival. Ezek a bejegyzések nem nélkülözhetetlenek a megfelelõ mûködéshez, mivel a központi szerver automatikusan feltölti az alárendelt szerverekre a létrejött változásokat. Mivel azonban a jelszavak létfontosságúak a szervertõl függõ rendszerek számára, ezért ajánlott explicit módon is elõírni a frissítést. Ez a forgalmasabb hálózatokon nagyobb jelentõséggel bír, mivel ott a táblázatok frissítése nem mindig fejezõdik be rendesen.</p></div><div class=paragraph><p>Most pedig futassuk le a <code>/etc/netstart</code> parancsot az alárendelt szervereken is, amivel így elindul a NIS szerver.</p></div></div></div><div class=sect3><h4 id=_a_nis_kliensek>29.4.4.3. A NIS kliensek<a class=anchor href=#_a_nis_kliensek></a></h4><div class=paragraph><p>A NIS kliens az <code>ypbind</code> démon segítségével egy kötésnek (bind) nevezett kapcsolatot épít ki egy adott NIS szerverrel. Az <code>ypbind</code> ellenõrzi a rendszer alapértelmezett tartományát (ezt a <code>domainname</code> paranccsal állítottunk be), majd RPC kéréseket kezd szórni a helyi hálózaton. Ezek a kérések annak a tartománynak a nevét tartalmazzák, amelyhez az <code>ypbind</code> megpróbál kötést létrehozni. Ha az adott tartomány kiszolgálására beállított szerver észleli ezeket a kéréseket, akkor válaszol az <code>ypbind</code> démonnak, amely pedig feljegyzi a szerver címét. Ha több szerver is elérhetõ (például egy központi és több alárendelt), akkor az <code>ypbind</code> az elsõként válaszoló címét fogja rögzíteni. Innentõl kezdve a kliens közvetlenül ennek a szervernek fogja küldeni a NIS kéréseit. Az <code>ypbind</code> idõnként "megpingeli" a szervert, hogy meggyõzõdjön az elérhetõségérõl. Ha az <code>ypbind</code> egy adott idõn belül nem kap választ a ping kéréseire, akkor megszünteti a kötést a tartományhoz és nekilát keresni egy másik szervert.</p></div><div class=sect4><h5 id=_a_nis_kliensek_beállítása>29.4.4.3.1. A NIS kliensek beállítása<a class=anchor href=#_a_nis_kliensek_beállítása></a></h5><div class=paragraph><p>Egy FreeBSD-s gépet NIS kliensként meglehetõsen egyszerûen lehet beállítani.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Nyissuk meg az <span class=filename>/etc/rc.conf</span> állományt és a NIS tartománynév beállításához, valamint az <code>ypbind</code> elindításához a következõket írjuk bele:</p><div class="literalblock programlisting"><div class=content><pre>nisdomainname=&#34;proba-tartomany&#34;
nis_client_enable=&#34;YES&#34;</pre></div></div></li><li><p>A NIS szerveren található jelszavak importálásához távolítsuk el az összes felhasználói hozzáférést az <span class=filename>/etc/master.passwd</span> állományunkból és a <code>vipw</code> segítségével adjuk hozzá az alábbi sort az állomány végéhez:</p><div class="literalblock programlisting"><div class=content><pre>+:::::::::</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ez a sor beenged bárkit a rendszerünkre, akinek a NIS szervereken van érvényes hozzáférése. A NIS klienseket ezzel a sorral sokféle módon tudjuk állítani. A <a href=#network-netgroups>hálózati csoportokról szóló szakaszban</a> találunk majd errõl több információt. A téma mélyebb megismeréséhez az O’Reilly <code>Managing NFS and NIS</code> címû könyvét ajánljuk.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Legalább helyi hozzáférést (vagyis amit nem NIS-en keresztül importálunk) azonban mindenképpen hagyjunk meg az <span class=filename>/etc/master.passwd</span> állományunkban, és ez a hozzáférés legyen a <code>wheel</code> csoport tagja. Ha valami gond lenne a NIS használatával, akkor ezen a hozzáférésen keresztül tudunk a gépre távolról bejelentkezni, majd innen <code>root</code> felhasználóra váltva megoldani a felmerült problémákat.</p></div></td></tr></tbody></table></div></li><li><p>A NIS szerverrõl az összes lehetséges csoport-bejegyzést az <span class=filename>/etc/group</span> állományban így tudjuk importálni:</p><div class="literalblock programlisting"><div class=content><pre>+:*::</pre></div></div></li></ol></div></div></div><div class=paragraph><p>Miután elvégeztük ezeket a lépéseket, képesek leszünk futtatni az <code>ypcat passwd</code> parancsot, és látni a NIS szerver jelszavakat tartalmazó táblázatát.</p></div></div></div></div><div class=sect2><h3 id=_a_nis_biztonsága>29.4.5. A NIS biztonsága<a class=anchor href=#_a_nis_biztonsága></a></h3><div class=paragraph><p>Általában tetszõleges távoli felhasználó küldhet RPC kéréseket az <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> számára és kérheti le a NIS táblázatok tartalmát, feltéve, hogy ismeri a tartomány nevét. Az ilyen hitelesítés nélküli mûveletek ellen az <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> úgy védekezik, hogy tartalmaz egy "securenets" nevû lehetõséget, amellyel az elérhetõségüket tudjuk leszûkíteni gépek egy csoportjára. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> indításakor ezeket az információkat a <span class=filename>/var/yp/securenets</span> állományból próbálja meg betölteni.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Az elérési útvonala megadható a <code>-p</code> opció használatával. Ez az állomány olyan bejegyzéseket tartalmaz, amelyekben egy hálózati cím és tõle láthatatlan karakterekkel elválasztva egy hálózati maszk szerepel. A "#" karakterrel kezdõdõ sorokat megjegyzésnek nyilvánítjuk. Egy minta securenets állomány valahogy így nézne ki:</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre># Engedélyezzük önmagunkról a csatlakozást -- kell!
127.0.0.1     255.255.255.255
# Engedélyezzük a 192.168.128.0 hálózatról érkezõ csatlakozásokat:
192.168.128.0 255.255.255.0
# Engedélyezzük a laborban található 10.0.0.0 és 10.0.15.255 közti
# címekkel rendelkezõ gépek csatlakozását:
10.0.0.0      255.255.240.0</pre></div></div><div class=paragraph><p>Ha az <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> olyan címrõl kap kérést, amely illeszkedik az elõírt címek valamelyikére, akkor a szokásos módon feldolgozza azt. Ellenkezõ esetben a kérést figyelmen kívül hagyja és egy figyelmeztetést vesz fel hozzá a naplóba. Ha a <span class=filename>/var/yp/securenets</span> állomány nem létezik, akkor az <code>ypserv</code> tetszõleges géprõl engedélyezi a csatlakozást.</p></div><div class=paragraph><p>Az <code>ypserv</code> lehetõséget ad a Wietse Venema által fejlesztett TCP Wrapper csomag használatára is. Ezzel a rendszergazda a <span class=filename>/var/yp/securenets</span> állomány helyett a TCP Wrapper konfigurációs állományai alapján képes szabályozni az elérhetõséget.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Miközben mind a két módszer nyújt valamilyen fajta védelmet, de a privilegizált portok teszteléséhez hasonlóan az "IP álcázásával" (IP spoofing) sebezhetõek. Ezért az összes NIS-hez tartozó forgalmat tûzfallal kell blokkolnunk.</p></div><div class=paragraph><p>Az <span class=filename>/var/yp/securenets</span> állományt használó szerverek nem képesek az elavult TCP/IP implementációkat használó érvényes klienseket rendesen kiszolgálni. Egyes ilyen implementációk a címben a géphez tartozó biteket nullára állítják az üzenetszóráshoz, és/vagy ezért az üzenetszóráshoz használt cím kiszámításakor nem tudja észleli a hálózati maszkot. A legtöbb ilyen probléma megoldható a kliens konfigurációjának megváltoztatásával, míg más problémák megoldása a kérdéses kliensek nyugdíjazását kívánják meg, vagy a <span class=filename>/var/yp/securenets</span> használatának elhagyását.</p></div><div class=paragraph><p>Egy régebbi TCP/IP implementációval üzemelõ szerveren pedig a <span class=filename>/var/yp/securenets</span> állomány használata kifejezetten rossz ötlet, és a hálózatunk nagy részében képes használhatatlanná tenni a NIS funkcióit.</p></div><div class=paragraph><p>A TCP Wrapper csomag alkalmazása a NIS szerverünk válaszadáshoz szükséges idejét is segít csökkenteni. Az ilyenkor jelentkezõ plusz késlekedés mellesleg elég nagy lehet ahhoz, hogy a klienseknél idõtúllépés következzen be, különösen a terheltebb hálózatokon vagy a lassú NIS szerverek esetében. Ha egy vagy több kliensünk is ilyen tüneteket mutat, akkor érdemes a kérdéses kliens rendszereket alárendelt NIS szerverekké alakítani és önmagukhoz rendelni.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_egyes_felhasználók_bejelentkezésének_megakadályozása>29.4.6. Egyes felhasználók bejelentkezésének megakadályozása<a class=anchor href=#_egyes_felhasználók_bejelentkezésének_megakadályozása></a></h3><div class=paragraph><p>A laborunkban van egy <code>basie</code> nevû gép, amely a tanszék egyetlen munkaállomása. Ezt a gépet nem akarjuk kivenni a NIS tartományból, de a központi NIS szerver <span class=filename>passwd</span> állománya mégis egyaránt tartalmazza a hallgatók és az oktatók eléréseit. Mit lehet ilyenkor tenni?</p></div><div class=paragraph><p>Adott felhasználók esetében le tudjuk tiltani a bejelentkezést a gépen még olyankor is, ha léteznek a NIS adatbázisában. Ehhez mindössze a kliensen az <span class=filename>/etc/master.passwd</span> állomány végére be kell tennünk egy <code>-felhasználónév</code> sort, ahol a <em>felhasználónév</em> annak a felhasználónak a neve, akit nem akarunk beengedni a gépre. Ezt leginkább a <code>vipw</code> használatán keresztül érdemes megtennünk, mivel a <code>vipw</code> az <span class=filename>/etc/master.passwd</span> állomány alapján végez némi ellenõrzést, valamint a szerkesztés befejeztével magától újragenerálja a jelszavakat tároló adatbázist. Például, ha a <code>bill</code> nevû felhasználót ki akarjuk tiltani a <code>basie</code> nevû géprõl, akkor:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>basie# vipw
<span class=o>[</span>vegyük fel a <span class=nt>-bill</span> <span class=nb>sort </span>a végére, majd lépjünk ki]
vipw: rebuilding the database...
vipw: <span class=k>done

</span>basie# <span class=nb>cat</span> /etc/master.passwd

root:[jelszó]:0:0::0:0:The super-user:/root:/bin/csh
toor:[jelszó]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:<span class=k>*</span>:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:<span class=k>*</span>:2:5::0:0:System &amp;:/:/sbin/nologin
bin:<span class=k>*</span>:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
<span class=nb>tty</span>:<span class=k>*</span>:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:<span class=k>*</span>:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:<span class=k>*</span>:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:<span class=k>*</span>:8:8::0:0:News Subsystem:/:/sbin/nologin
man:<span class=k>*</span>:9:9::0:0:Mister Man Pages:/usr/shared/man:/sbin/nologin
<span class=nb>bind</span>:<span class=k>*</span>:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:<span class=k>*</span>:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:<span class=k>*</span>:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:<span class=k>*</span>:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:<span class=k>*</span>:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
+:::::::::
<span class=nt>-bill</span>

basie#</code></pre></div></div></div><div class=sect2><h3 id=network-netgroups>29.4.7. A hálózati csoportok alkalmazása<a class=anchor href=#network-netgroups></a></h3><div class=paragraph><p>Az elõzõ szakaszban ismertetett módszer viszonylag jól mûködik olyan esetekben, amikor nagyon kevés felhasználóra és/vagy számítógépre kell alkalmaznunk speciális megszorításokat. A nagyobb hálózatokban szinte <em>biztos</em>, hogy elfelejtünk kizárni egyes felhasználókat az érzékeny gépekrõl, vagy az összes gépen egyenként kell ehhez a megfelelõ beállításokat elvégezni, és ezzel lényegében elvesztjük a NIS legfontosabb elõnyét, vagyis a <em>központosított</em> karbantarthatóságot.</p></div><div class=paragraph><p>A NIS fejlesztõi erre a problémára a <em>hálózati csoportokat</em> létrehozásával válaszoltak. A céljuk és mûködésük szempontjából leginkább a UNIX®-os állományrendszerekben található csoportokhoz mérhetõek. A legnagyobb eltérés a numerikus azonosítók hiányában mutatkozik meg, valamint a hálózati csoportokat a felhasználókon kívül további hálózati csoportok megadásával is ki lehet alakítani.</p></div><div class=paragraph><p>A hálózati csoportok a nagyobb, bonyolultabb, többszáz felhasználós hálózatok számára jöttek létre. Egy részrõl ez nagyon jó dolog, különösen akkor, ha egy ilyen helyzettel kell szembenéznünk. Másrészrõl ez a mértékû bonyolultság szinte teljesen lehetetlenné teszi a hálózati csoportok egyszerû bemutatását. A szakasz további részében használt példa is ezt a problémát igyekszik illusztrálni.</p></div><div class=paragraph><p>Tételezzük fel, hogy laborunkban a NIS sikeres bevezetése felkeltette a fõnökeink figyelmét. Így a következõ feladatunk az lett, hogy terjesszük ki a NIS tartományt az egyetemen található néhány másik gépre is. Az alábbi két táblázatban az új felhasználók és az új számítógép neveit találjuk, valamint a rövid leírásukat.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Felhasználók nevei</th><th class="tableblock halign-left valign-top">Leírás</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>alpha</code>, <code>beta</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>az IT tanszék hétköznapi dolgozói</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>charlie</code>, <code>delta</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>az IT tanszék újdonsült dolgozói</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>echo</code>, <code>foxtrott</code>, <code>golf</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>átlagos dolgozók</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>able</code>, <code>baker</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ösztöndíjasok</p></td></tr></tbody></table><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Gépek nevei</th><th class="tableblock halign-left valign-top">Leírás</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>haboru</code>, <code>halal</code>, <code>ehseg</code>, <code>szennyezes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A legfontosabb szervereink. Csak az IT tanszék dolgozói férhetnek hozzájuk.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>buszkeseg</code>, <code>kapzsisag</code>, <code>irigyseg</code>, <code>harag</code>, <code>bujasag</code>, <code>lustasag</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Kevésbé fontos szerverek. Az IT tankszék összes tagja el tudja érni ezeket a gépeket.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>egy</code>, <code>ketto</code>, <code>harom</code>, <code>negy</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Átlagos munkaállomások. Egyedül csak a <em>valódi</em> dolgozók jelentkezhetnek be ezekre a gépekre.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>szemetes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Egy nagyon régi gép, semmi értékes adat nincs rajta. Akár még az öszöndíjasok is nyúzhatják.</p></td></tr></tbody></table><div class=paragraph><p>Ha ezeket az igényeket úgy próbáljuk meg teljesíteni, hogy a felhasználókat egyenként blokkoljuk, akkor minden rendszer <span class=filename>passwd</span> állományába külön fel kell vennünk a <code>-felhasználó</code> sorokat a letiltott felhasználókhoz. Ha csak egyetlen bejegyzést is kihagyunk, akkor könnyen bajunk származhat belõle. Ez a rendszer kezdeti beállítása során még talán nem okoz gondot, de az új felhasználókat <em>biztosan</em> el fogjuk felejteni felvenni a megfelelõ csoportokba. Elvégre Murphy is optimista volt.</p></div><div class=paragraph><p>A hálózati csoportok használata ilyen helyzetekben számos elõnyt rejt. Nem kell az egyes felhasználókat külön felvenni, egy felhasználót felveszünk valamelyik csoportba vagy csoportokba, és a csoportok összes tagjának egyszerre tudjuk tiltani vagy engedélyezni a hozzáféréseket. Ha hozzáadunk egy új gépet a hálózatunkhoz, akkor mindössze a hálózati csoportok bejelentkezési korlátozásait kell beállítani. Ha új felhasználót veszünk fel, akkor a felhasználót kell vennünk egy vagy több hálózati csoportba. Ezek a változtatások függetlenek egymástól, és nincs szükség "minden felhasználó és minden gép összes kombinációjára". Ha a NIS beállításainkat elõzetesen körültekintõen megterveztük, akkor egyetlen központi konfigurációs állományt kell módosítani a gépek elérésének engedélyezéséhez vagy tiltásához.</p></div><div class=paragraph><p>Az elsõ lépés a hálózati csoportokat tartalmazó NIS táblázat inicializálása. A FreeBSD <a href="https://man.freebsd.org/cgi/man.cgi?query=ypinit&amp;sektion=8&amp;format=html">ypinit(8)</a> programja alapértelmezés szerint nem hozza létre ezt a táblázatot, de ha készítünk egy ilyet, akkor a NIS implementációja képes kezelni. Egy ilyen üres táblázat elkészítéséhez ennyit kell begépelni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# vi /var/yp/netgroup</code></pre></div></div><div class=paragraph><p>Ezután elkezdhetjük felvenni a tartalmát. A példánk szerint legalább négy hálózati csoportot kell csinálnunk: az IT dolgozóinak, az IT új dolgozóinak, a normál dolgozóknak és az öszöndíjasoknak.</p></div><div class="literalblock programlisting"><div class=content><pre>IT_DOLG       (,alpha,proba-tartomany)    (,beta,proba-tartomany)
IT_UJDOLG     (,charlie,proba-tartomany)  (,delta,proba-tartomany)
FELHASZNALO   (,echo,proba-tartomany)     (,foxtrott,proba-tartomany) \
              (,golf,proba-tartomany)
OSZTONDIJAS   (,able,proba-tartomany)     (,baker,proba-tartomany)</pre></div></div><div class=paragraph><p>Az <code>IT_DOLG</code>, <code>IT_UJDOLG</code> stb. a hálózati csoportok nevei lesznek. Minden egyes zárójelezett csoport egy vagy több felhasználói hozzáférést tartalmaz. A csoportokban szereplõ három mezõ a következõ:</p></div><div class="olist arabic"><ol class=arabic><li><p>Azon gépek neve, amelykre a következõ elemek érvényesek. Ha itt nem adunk meg neveket, akkor a bejegyzés az összes gépre vonatkozik. Ha megadjuk egy gép nevét, akkor jutalmunk a teljes sötétség, a rettegetés és totális megtébolyodás.</p></li><li><p>A csoporthoz tartozó hozzáférés neve.</p></li><li><p>A hozzáféréshez kapcsolódó NIS tartomány. A csoportba más NIS tartományokból is át tudunk hozni hozzáféréseket, ha netalán éppen olyan szerencsétlenek lennénk, hogy több NIS tartományt is felügyelnünk kell.</p></li></ol></div><div class=paragraph><p>A mezõk mindegyike tartalmazhat dzsókerkaraktereket. Errõl részletesebben a <a href="https://man.freebsd.org/cgi/man.cgi?query=netgroup&amp;sektion=5&amp;format=html">netgroup(5)</a> man oldalon olvashatunk.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A hálózati csoportoknak lehetõleg ne adjunk 8 karakternél hosszabb nevet, különösen abban az esetben, ha a NIS tartományban más operációs rendszereket is használunk. A nevekben eltérnek a kis- és nagybetûk. Ha a hálózati csoportokat nevét nagybetûkkel írjuk, akkor könnyen különbséget tudunk tenni a felhasználók, gépek és hálózati csoportok nevei között.</p></div><div class=paragraph><p>Egyes (nem FreeBSD alapú) NIS kliensek nem képesek kezelni a nagyon sok bejegyzést tartalmazó hálózati csoportokat. Például a SunOS™ néhány korábbi verziója fennakad rajta, ha egy hálózati csoport 15 <em>bejegyzésnél</em> többet tartalmaz. Az ilyen korlátozások alól úgy tudunk kibújni, ha 15 felhasználónként újabb hálózati csoportokat hozunk létre, amelyekkel az eredeti hálózati csoportot építjük fel:</p></div><div class="literalblock programlisting"><div class=content><pre>NAGYCSP1  (,joe1,tartomany)  (,joe2,tartomany)  (,joe3,tartomany) [...]
NAGYCSP2  (,joe16,tartomany)  (,joe17,tartomany) [...]
NAGYCSP3  (,joe31,tartomany)  (,joe32,tartomany)
NAGYCSOPORT  NAGYCSP1 NAGYCSP2 NAGYCSP3</pre></div></div><div class=paragraph><p>Ugyanez a folyamat javasolt olyan esetekben is, ahol 225 felhasználónál többre lenne szükség egyetlen hálózati csoporton belül.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Az így létrehozott új NIS táblázat szétküldése meglehetõsen könnyû feladat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# <span class=nb>cd</span> /var/yp
ellington# make</code></pre></div></div><div class=paragraph><p>Ez a parancs létrehoz három NIS táblázatot: <span class=filename>netgroup</span>, <span class=filename>netgroup.byhost</span> és <span class=filename>netgroup.byuser</span>. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ypcat&amp;sektion=1&amp;format=html">ypcat(1)</a> paranccsal ellenõrizni is tudjuk az új NIS táblázatainkat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington% ypcat <span class=nt>-k</span> netgroup
ellington% ypcat <span class=nt>-k</span> netgroup.byhost
ellington% ypcat <span class=nt>-k</span> netgroup.byuser</code></pre></div></div><div class=paragraph><p>Az elsõ parancs kimenete a <span class=filename>/var/yp/netgroup</span> állomány tartalmára emlékeztethet minket. A második parancsnak nincs semmilyen kimenete, hacsak nem adtunk meg valamilyen gépfüggõ hálózati csoportot. A harmadik parancs a hálózati csoportokat listázza ki a felhasználókhoz.</p></div><div class=paragraph><p>A kliensek beállítása tehát nagyon egyszerû. A <code>haboru</code> nevû szerver beállításához indítsuk el a <a href="https://man.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;format=html">vipw(8)</a> programot, és cseréljük a</p></div><div class="literalblock programlisting"><div class=content><pre>+:::::::::</pre></div></div><div class=paragraph><p>sort erre:</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_DOLG:::::::::</pre></div></div><div class=paragraph><p>Innentõl kezdve kizárólag csak az <code>IT_DOLG</code> csoportban található felhasználók fognak bekerülni a <code>haboru</code> jelszó adatbázisába, és csak ezek a felhasználók tudnak ide bejelentkezni.</p></div><div class=paragraph><p>Sajnos ez a korlátozás a parancsértelmezõ <code>~</code> funkciójára és összes olyan rutinra is vonatkozik, amelyet a felhasználói nevek és azok numerikus azonosító között képez le. Más szóval a <code>cd ~felhasználó</code> parancs nem fog mûködni, és az <code>ls -l</code> parancs kimenetében a felhasználói nevek helyett csak numerikus azonosítók jelennek meg, továbbá a <code>find . -user joe -print No such user</code> (<code>Nincs ilyen felhasználó</code>) hibát fog visszaadni. Ez úgy tudjuk megjavítani, ha úgy importáljuk a szerverre az összes felhasználó bejegyzését, hogy <em>közben tiltjuk a hozzáférésüket</em>.</p></div><div class=paragraph><p>Ehhez vegyünk fel egy újabb sort az <span class=filename>/etc/master.passwd</span> állományba. A sor valahogy így fog kinézni:</p></div><div class=paragraph><p><code>+:::::::::/sbin/nologin</code>, amely annyit tesz, hogy "importáljuk az összes bejegyzést, de a hozzájuk tartozó parancsértelmezõ a <span class=filename>/sbin/nologin</span> legyen". A <code>passwd</code> állományban tetszõleges mezõ tartalmát le tudjuk úgy cserélni, ha megadunk neki egy alapértelmezett értéket az <span class=filename>/etc/master.passwd</span> állományban.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Vigyázzunk, hogy a <code>:::::::::/sbin/nologin` sort az `@IT_DOLG:::::::::</code> sor után írjuk. Ha nem így teszünk, akkor a NIS-bõl importált összes felhasználói hozzáférés a <span class=filename>/sbin/nologin</span> parancsértelmezõt kapja.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Miután elvégeztük ezt a változtatást, minden újabb dolgozó felvétele után csupán egyetlen táblázatot kell megváltoztatnunk. Ugyanezt a taktikát követhetjük a kevésbé fontosabb szerverek esetében is, hogy ha a helyi <span class=filename>/etc/master.passwd</span> állományukban a korábbi <code>+:::::::::</code> bejegyzést valami ilyesmivel helyettesítjük:</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_DOLG:::::::::
+@IT_UJDOLG:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Az egyszerû munkaállomások esetében pedig ezekre a sorokra lesz szükségünk:</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_DOLG:::::::::
+@FELHASZNALOK:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Minden remekül üzemel egészen addig, amíg néhány hét múlva ismét változik a házirend: az IT tanszékre ösztöndíjasok érkeznek. Az IT ösztöndíjasai a munkaállomásokat és a kevésbé fontosabb szervereket tudják használni. Az új IT dolgozók már a központi szerverekre is bejelentkezhetnek. Így tehát létrehozunk egy új hálózati csoportot <code>IT_OSZTONDIJAS</code> néven, majd felvesszük ide az új IT ösztöndíjasokat, és nekilátunk végigzongorázni az összes gép összes konfigurációs állományát…​ Ahogy azonban egy régi mondás is tartja: "A központosított tervezésben ejtett hibák teljes káoszhoz vezetnek".</p></div><div class=paragraph><p>A NIS az ilyen helyzeteket úgy igyekszik elkerülni, hogy megengedi újabb hálózati csoportok létrehozását más hálózati csoportokból. Egyik ilyen lehetõség a szerep alapú hálózati csoportok kialakítása. Például, ha a fontosabb szerverek bejelentkezési korlátozásai számára hozzunk létre egy <code>NAGYSRV</code> nevû csoportot, valamint egy másik hálózati csoportot <code>KISSRV</code> néven a kevésbé fontosabb szerverekhez, végül <code>MUNKA</code> néven egy harmadik hálózati csoportot a munkaállomásokhoz. Mindegyik ilyen hálózati csoport tartalmazza azokat a csoportokat, amelyek engedélyezik a gépek elérését. A hálózati csoportok leírását tartalmazó NIS táblázat most valahogy így fog kinézni:</p></div><div class="literalblock programlisting"><div class=content><pre>NAGYSRV  IT_DOLG IT_UJDOLG
KISSRV   IT_DOLG IT_UJDOLG IT_OSZTONDIJAS
MUNKA    IT_DOLG IT_OSZTONDIJAS FELHASZNALOK</pre></div></div><div class=paragraph><p>A bejelentkezési megszorítások ilyen típusú megadása viszonylag jól mûködik, hogy ha azonos korlátozások alá esõ gépek csoportjait akarjuk felírni. Bánatunk ez a kivétel, és nem a szabály. Az esetek nagy többségében ugyanis a bejelentkezésre vonatkozó korlátozásokat gépenként kell egyesével megadni.</p></div><div class=paragraph><p>A hálózati csoportok gépfüggõ megadása tehát az iménti házirendhez társuló igények kielégítésének egyik módja. Ebben a forgatókönyvben az <span class=filename>/etc/master.passwd</span> állomány minden számítógépen két "+"-os sorral kezdõdik. Közülük az elsõ a gépen engedélyezett hozzáféréseket tartalmazó hálózati csoportra vonatkozik, a második pedig az összes többi hozzáféréshez az <span class=filename>/sbin/nologin</span> parancsértelmezõt kapcsolja hozzá. Itt jó ötlet, ha a gép nevének "VÉGIG-NAGYBETûS" változatát adjuk meg a hozzá tartozó hálózati csoport nevének:</p></div><div class="literalblock programlisting"><div class=content><pre>+@GÉPNÉV:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Miután elvégeztük ezt a feladatot minden egyes gépen, az <span class=filename>/etc/master.passwd</span> állomány helyi változatait soha többé nem kell módosítanunk. Az összes többi változtatást a NIS táblázaton keresztül tudjuk keresztül vinni. Íme a felvázolt forgatókönyvhöz tartozó hálózati csoportok kiépítésének egyik lehetséges változata, egy-két finomsággal kiegészítve:</p></div><div class="literalblock programlisting"><div class=content><pre># Elõször a felhasználók csoportjait adjuk meg:
IT_DOLG         (,alpha,proba-tartomany)    (,beta,proba-tartomany)
IT_UJDOLG       (,charlie,proba-tartomany)  (,delta,proba-tartomany)
TANSZ1          (,echo,proba-tartomany)     (,foxtrott,proba-tartomany)
TANSZ2          (,golf,proba-taromany)      (,hotel,proba-tartomany)
TANSZ3          (,india,proba-taromany)     (,juliet,proba-tartomany)
IT_OSZTONDIJAS  (,kilo,proba-tartomany)     (,lima,proba-tartomany)
D_OSZTONDIJAS   (,able,proba-tartomany)     (,baker,proba-tartomany)
#
# Most pedig hozzunk létre csoportokat szerepek szerint:
FELHASZNALOK     TANSZ1   TANSZ2          TANSZ3
NAGYSRV          IT_DOLG  IT_UJDOLG
KISSRV           IT_DOLG  IT_UJDOLG       IT_OSZTONDIJAS
MUNKA            IT_DOLG  IT_OSZTONDIJAS  FELHASZNALOK
#
# Következzenek a speciális feladatokhoz tartozó csoportok:
# Az echo és a golf tudja elérni a vírusvédelemért felelõs gépet:
VEDELEM          IT_DOLG  (,echo,proba-tartomany)  (,golf,proba-tartomany)
#
# Gép alapú hálózati csoportok
# A fõ szervereink:
HABORU      NAGYSRV
EHSEG       NAGYSRV
# Az india nevû felhasználó hozzá szeretné ehhez férni:
SZENNYEZES  NAGYSRV  (,india,proba-tartomany)
#
# Ez valóban fontos és komolyan szabályoznunk kell:
HALAL       IT_DOLG
#
# Az elõbb említett vírusvédelmi gép:
EGY         VEDELEM
#
# Egyetlen felhasználóra korlátozzuk le ezt a gépet:
KETTO       (,hotel,proba-tartomany)
# [...és itt folytatódik a többi csoporttal]</pre></div></div><div class=paragraph><p>Ha a felhasználói hozzáféréseinket valamilyen adatbázisban tároljuk, akkor a táblázat elsõ részét akár az adatbázis lekérdezésein keresztül is elõ tudjuk állítani. Ezzel a módszerrel az új felhasználók automatikusan hozzáférnek a gépekhez.</p></div><div class=paragraph><p>Legyünk viszont óvatosak: nem mindig javasolt gépeken alapuló hálózati csoportokat készíteni. Ha a hallgatói laborokba egyszerre több tucat vagy akár több száz azonos konfigurációjú gépet telepítünk, akkor a gép alapú csoportok helyett inkább szerep alapú csoportokat építsünk fel, mivel így a NIS táblázatok méretét egy elfogadható méreten tudjuk tartani.</p></div></div><div class=sect2><h3 id=_amit_feltétlenül_észben_kell_tartanunk>29.4.8. Amit feltétlenül észben kell tartanunk<a class=anchor href=#_amit_feltétlenül_észben_kell_tartanunk></a></h3><div class=paragraph><p>Még mindig akad néhány olyan dolog, amit másképpen kell csinálnunk azután, hogy most már NIS környezetben vagyunk.</p></div><div class=ulist><ul><li><p>Amikor egy új felhasználót akarunk felvenni a laborba, akkor <em>csak</em> a központi NIS szerverre kell felvennünk, és <em>újra kell generáltatnunk a NIS táblázatokat</em>. Ha ezt elfelejtjük megtenni, akkor az új felhasználó a központi NIS szerveren kívül sehova sem lesz képes bejelentkezni. Például, ha fel akarjuk venni a <code>jsmith</code> nevû felhasználót a laborba, akkor ezt kell tennünk:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw useradd jsmith</span>
<span class=c># cd /var/yp</span>
<span class=c># make proba-tartomany</span></code></pre></div></div><div class=paragraph><p>Vagy a <code>pw useradd jsmith</code> parancs helyett az <code>adduser jsmith</code> parancsot is használhatjuk.</p></div></li><li><p><em>A rendszergazdai szintû hozzáféréseket ne tároljuk a NIS táblázatokban</em>. Olyan gépekre egyáltalán ne is küldjünk olyan karbantartáshoz használt hozzáféréseket, amelynek a felhasználói hivatalosan nem is férhetnének hozzájuk.</p></li><li><p><em>A központi NIS szervert és az alárendelt szervereket óvjuk minél jobban, és igyekezzünk minimalizálni a kieséseiket</em>. Ha valaki feltöri vagy egyszerûen csak kikapcsolja ezeket a gépeket, akkor ezzel lényegében mindenkit megakadályoz abban, hogy be tudjon jelentkezni a laborban.</p><div class=paragraph><p>Ezek a központosított vezérlésû rendszerek legfõbb gyengeségei. Ha nem védjük kellõen a NIS szervereinket, akkor azzal nagyon ellenséget szerezhetünk magunknak!</p></div></li></ul></div></div><div class=sect2><h3 id=_kompatibilitás_a_nis_elsõ_változatával>29.4.9. Kompatibilitás a NIS elsõ változatával<a class=anchor href=#_kompatibilitás_a_nis_elsõ_változatával></a></h3><div class=paragraph><p>A FreeBSD-ben megtalálható ypserv szolgáltatás valamennyire képes ellátni a NIS elsõ változatát használó klienseket is. A FreeBSD NIS implementációja csak a NIS v2 protokollt használja, azonban mivel más implementációk kompatibilisek kívánnak maradni a régebbi rendszerekkel, ismerik a v1 protokollt is. Az ilyen rendszerekhez tartozó ypbind démonok még olyankor is megpróbálnak v1-es NIS szerverekhez kötést létrehozni, amikor valójában nincs is rá szükségük (és gyakran még akkor is ilyet keresnek, amikor az üzenetükre már válaszolt egy v2-es szerver). Hozzátennénk, hogy bár az ypserver ezen változata a normál klienshívásokat képes feldolgozni, a táblázatokat már nem tudja átküldeni a v1-es klienseknek. Ebbõl következik, hogy a központi vagy alárendelt szerverek nem tudnak együttmûködni olyan NIS szerverekkel, amelyek csak a v1-es protokollt beszélik. Szerencsére ilyen szervereket manapság már alig használnak.</p></div></div><div class=sect2><h3 id=network-nis-server-is-client>29.4.10. NIS szerverek, melyek egyben NIS kliensek<a class=anchor href=#network-nis-server-is-client></a></h3><div class=paragraph><p>Óvatosan kell bánnunk az ypserv elindításával olyan többszerveres tartományokban, ahol a szerverek maguk is NIS kliensek. Alapvetõen nincs abban semmi kivetnivaló, ha a szervereket saját magukhoz kötjük ahelyett, hogy engednénk nekik a kötési kérések küldését és így egymáshoz kötnénk ezeket. Különös hibák tudnak származni olyan helyzetekben, amikor az egyik szerver leáll, miközben a többiek pedig függenek tõle. Végül is ilyenkor minden kliens szépen kivárja a szükséges idõt, aztán megpróbál más szerverekhez kötõdni, de az itt fellépõ késlekedés jelentõs mennyiségû lehet, és ez a hibajelenség ismét fennállhat, mivel elõfordulhat, hogy a szerverek megint egymáshoz kapcsolódnak.</p></div><div class=paragraph><p>A klienst úgy tudjuk egy adott szerverhez kötni, ha az <code>ypbind</code> parancsot a <code>-S</code> beállítással indítjuk. Ha mindezt nem akarjuk manuálisan megtenni a NIS szerver minden egyes újraindításakor, akkor vegyük fel a következõ sorokat az <span class=filename>/etc/rc.conf</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>nis_client_enable=&#34;YES&#34;	# elindítjuk a klienst is
nis_client_flags=&#34;-S NIS tartomány,szerver&#34;</pre></div></div><div class=paragraph><p>Részletesebb lásd az <a href="https://man.freebsd.org/cgi/man.cgi?query=ypbind&amp;sektion=8&amp;format=html">ypbind(8)</a> man oldalát.</p></div></div><div class=sect2><h3 id=_a_jelszavak_formátuma>29.4.11. A jelszavak formátuma<a class=anchor href=#_a_jelszavak_formátuma></a></h3><div class=paragraph><p>A NIS rendszerek kiépítése során az emberek leggyakrabban a jelszavak formátumával kapcsolatban tapasztalnak nehézségeket. Ha a szerverünk DES titkosítású jelszavakat használ, akkor csak olyan klienseket fog tudni támogatni, amelyek szintén így kódolják ezeket. Például, ha a hálózaton vannak Solaris™ rendszerû NIS klienseink, akkor szinte biztos, hogy DES titkosítást kell használnunk.</p></div><div class=paragraph><p>A szerverek és a kliensek által használt formátumokat az <span class=filename>/etc/login.conf</span> állományba tekintve deríthetjük ki. Ha a gépek többségén a DES titkosítást látjuk, akkor a <code>default</code> osztálynak egy ilyen bejegyzést kell tartalmaznia:</p></div><div class="literalblock programlisting"><div class=content><pre>default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[a többit most nem mutatjuk]</pre></div></div><div class=paragraph><p>A <code>passwd_format</code> tulajdonság további lehetséges értékei lehetnek a <code>blf</code> és az <code>md5</code> (melyek rendre a Blowfish és MD5 titkosítású jelszavakat adják meg).</p></div><div class=paragraph><p>Ha változtattunk valamit az <span class=filename>/etc/login.conf</span> állományban, akkor a bejelentkezési tulajdonságok adatbázisát is újra kell generálni, melyet <code>root</code> felhasználóként a következõ módon tehetünk meg:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cap_mkdb /etc/login.conf</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Az <span class=filename>/etc/master.passwd</span> állományban jelenlevõ jelszavak formátuma azonban nem frissítõdik egészen addig, amíg a felhasználók a bejelentkezési adatbázis újragenerálása <em>után</em> meg nem változtatják a jelszavaikat.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Úgy tudjuk még biztosítani, hogy a jelszavak megfelelõ formátumban kódolódjanak, ha az <span class=filename>/etc/auth.conf</span> állományban megkeressük a <code>crypt_default</code> sort, amelyben a választható jelszóformátumok felhasználásái sorrendjét találhatjuk meg. Itt tehát mindössze annyit kell tennünk, hogy a kiszemelt formátumot a lista elejére tesszük. Például, ha a DES titkosítású jelszavakat akarunk használni, akkor ez a bejegyzés így fog kinézni:</p></div><div class="literalblock programlisting"><div class=content><pre>crypt_default	=	des blf md5</pre></div></div><div class=paragraph><p>Ha a fenti lépéseket követjük az összes FreeBSD alapú NIS szervernél és kliensnél, akkor biztosra mehetünk abban, hogy a hálózatunkon belül ugyanazt a jelszóformátumot fogják használni. Ha gondunk akadna a NIS kliensek hitelesítésével, akkor itt érdemes kezdeni a hiba felderítését. Ne felejtsük: ha egy NIS szervert egy heterogén hálózatba akarunk telepíteni, akkor valószínûleg az összes rendszeren a DES titkosítást kell választani, mivel általában ez a közös nevezõ ebben a tekintetben.</p></div></div></div></div><div class=sect1><h2 id=network-dhcp>29.5. A hálózat automatikus beállítása (DHCP)<a class=anchor href=#network-dhcp></a></h2><div class=sectionbody><div class=sect2><h3 id=_mi_az_a_dhcp>29.5.1. Mi az a DHCP?<a class=anchor href=#_mi_az_a_dhcp></a></h3><div class=paragraph><p>A Dinamikus állomáskonfigurációs protokoll, avagy Dynamic Host Configuration Protocol (DHCP) annak eszközeit írja le, hogy egy rendszer miként tud csatlakozni egy hálózathoz és miként tudja azon belül megszerezni a kommunikációhoz szükséges információkat. A FreeBSD 6.0 elõtti változatai az ISC (Internet Systems Consortium, vagyis az internetes rendszerkonzorcium) által kidolgozott DHCP kliens (<a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a>) implementációját tartalmazzák. A késõbbi verziókban pedig az OpenBSD 3.7 verziójából átvett <code>dhclient</code> paranccsal dolgozhatunk. Ebben a szakaszban a <code>dhclient</code> parancsra vonatkozó összes információ egyaránt érvényes az ISC és az OpenBSD által fejlesztett DHCP kliensekre. A DHCP szerver az ISC-tõl származik.</p></div></div><div class=sect2><h3 id=_mivel_foglalkozik_ez_a_szakasz>29.5.2. Mivel foglalkozik ez a szakasz<a class=anchor href=#_mivel_foglalkozik_ez_a_szakasz></a></h3><div class=paragraph><p>Ebben a szakaszban az ISC és az OpenBSD DHCP klienseinek kliens- és szerver oldali komponsenseit mutatjuk be. A kliens oldali program neve a <code>dhclient</code>, amely a FreeBSD részeként érkezik, és a szerver oldali elem pedig a <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp31-server/>net/isc-dhcp31-server</a> porton keresztül érhetõ el. A lentebb említett hivatkozások mellett a témában még a <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5&amp;format=html">dhcp-options(5)</a> és a <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5&amp;format=html">dhclient.conf(5)</a> man adhatnak bõvebb felvilágosítást a témában.</p></div></div><div class=sect2><h3 id=_ahogyan_mûködik>29.5.3. Ahogyan mûködik<a class=anchor href=#_ahogyan_mûködik></a></h3><div class=paragraph><p>Amikor a <code>dhclient</code>, vagyis a DHCP kliens elindul egy kliensgépen, akkor a hálózaton üzenetszórással próbálja meg elkérni a konfigurációjához szükséges adatokat. Alapértelmezés szerint ezek a kérések a 68-as UDP porton keresztül mennek. A szerver ezekre a 67-es UDP porton válaszol, ahol visszaad a kliensnek egy IP-címet és a hálózat használatához szükséges további információkat, mint például a hálózati maszkot, az alapértelmezett átjáró és a névfeloldásért felelõs szerverek címét. Az összes ilyen jellegû adat egy DHCP "bérlet" (lease) formájában érkezik meg, amely csak egy adott ideig érvényes (ezt a DHCP szerver karbantartója állítja be). Így a hálózaton a kliens nélküli IP-címeket egy idõ után automatikusan visszanyerjük.</p></div><div class=paragraph><p>A DHCP kliensek rengeteg információt képes elkérni a szervertõl. Ezek teljes listáját a <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5&amp;format=html">dhcp-options(5)</a> man oldalán olvashatjuk el.</p></div></div><div class=sect2><h3 id=_használat_a_freebsd_n_belül>29.5.4. Használat a FreeBSD-n belül<a class=anchor href=#_használat_a_freebsd_n_belül></a></h3><div class=paragraph><p>A FreeBSD teljes egészében tartalmazza az ISC vagy az OpenBSD DHCP kliensét, a <code>dhclient</code> programot (attól függõen, hogy a FreeBSD melyik változatát használjuk). A DHCP kliensek támogatása a telepítõben és az alaprendszerben is megtalálható, és ezzel mentesülünk minden konkrét hálózati beállítás alól a DHCP szervereket alkalmazó hálózatokon. A <code>dhclient</code> a FreeBSD 3.2 változata óta megtalálható a rendszerben.</p></div><div class=paragraph><p>DHCP használatát a sysinstall is lehetõvé teszi. Amikor egy hálózati felületet a sysinstall programon belül állítunk be, akkor a második kérdés mindig ez szokott lenni: "Do you want to try DHCP configuration of the interface?" ("Megpróbáljuk DHCP használatával beállítani a felületet?") Ha erre igennel válaszolunk, akkor azzal lényegében a <code>dhclient</code> parancsot indítjuk el, és ha mindez sikerrel zárul, akkor szinte magától kitöltõdik az összes hálózati beállításunk.</p></div><div class=paragraph><p>A DHCP használatához két dolgot kell beállítanunk a rendszerünkön:</p></div><div class=ulist><ul><li><p>Gondoskodjunk róla, hogy a <span class=filename>bpf</span> eszköz része a rendszermagunknak. Ha még nem lenne benne, akkor a rendszermag beállításait tartalmazó állományba vegyük fel a <code>device bpf</code> sort és fordítsuk újra a rendszermagot. A rendszermagok fordításáról a <a href=../kernelconfig/#kernelconfig>A FreeBSD rendszermag testreszabása</a>ben tudhatunk meg többet.</p><div class=paragraph><p>A <span class=filename>bpf</span> eszköz alapból megtalálható a <span class=filename>GENERIC</span> rendszermagokban, így ha ezt használjuk, akkor nem kell saját verziót készítenünk a DHCP használatához.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Azok számára viszont, akik biztonsági szempontból aggódnak a rendszerük miatt, meg kell említenünk, hogy a <span class=filename>bpf</span> egyben az az eszköz, amely a csomagok lehallgatását is lehetõvé teszi (habár az ilyeneket <code>root</code> felhasználóként lehet csak elindítani). A <span class=filename>bpf</span><em>kell</em> a DHCP használatához, azonban ha nagyon fontos nekünk a rendszerünk biztonsága, akkor a <span class=filename>bpf</span> eszközt érdemes kivennünk a rendszermagból, ha még pillanatnyilag nem használunk ilyet.</p></div></td></tr></tbody></table></div></li><li><p>Az <span class=filename>/etc/rc.conf</span> állományunkat az alábbiak szerint kell módosítani:</p><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0=&#34;DHCP&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Az <code>fxp0</code> eszközt ne felejtsük el kicserélni arra a felületre, amelyet automatikusan akarunk beállítani. Ennek mikéntje a <a href=../config/#config-network-setup>A hálózati kártyák beállítása</a>ban olvasható.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ha a <code>dhclient</code> a rendszerünkben máshol található, vagy egyszerûen csak további beállításokat akarunk átadni a <code>dhclient</code> parancsnak, akkor adjuk meg a következõt is (változtassuk meg igényeink szerint):</p></div><div class="literalblock programlisting"><div class=content><pre>dhclient_program=&#34;/sbin/dhclient&#34;
dhclient_flags=&#34;&#34;</pre></div></div></li></ul></div><div class=paragraph><p>A DHCP szerver, a dhcpd a <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp31-server/>net/isc-dhcp31-server</a> port részeként érhetõ el. Az a port tartalmazza az ISC DHCP szerverét és a hozzá tartozó dokumentációt.</p></div></div><div class=sect2><h3 id=_állományok>29.5.5. Állományok<a class=anchor href=#_állományok></a></h3><div class=ulist><ul><li><p><span class=filename>/etc/dhclient.conf</span></p><div class=paragraph><p>A <code>dhclient</code> mûködéséhez szükség lesz egy konfigurációs állományra, aminek a neve <span class=filename>/etc/dhclient.conf</span>. Ez az állomány általában csak megjegyzéseket tartalmaz, mivel az alapértelmezett értékek többnyire megfelelõek. Ezt a konfigurációs állományt a <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5&amp;format=html">dhclient.conf(5)</a> man oldal írja le.</p></div></li><li><p><span class=filename>/sbin/dhclient</span></p><div class=paragraph><p>A <code>dhclient</code> statikusan linkelt és az <span class=filename>/sbin</span> könyvtárban található. A <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a> man oldal tud róla részletesebb felvilágosítást adni.</p></div></li><li><p><span class=filename>/sbin/dhclient-script</span></p><div class=paragraph><p>A <code>dhclient-script</code> a FreeBSD-ben levõ DHCP kliens konfigurációs szkriptje. Mûködését a <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8&amp;format=html">dhclient-script(8)</a> man oldal írja le, de a felhasználók részérõl semmilyen módosítást nem igényel.</p></div></li><li><p><span class=filename>/var/db/dhclient.leases</span></p><div class=paragraph><p>A DHCP kliens az érvényes bérleteket tartja nyilván ezekben az állományban és naplóként használja. A <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5&amp;format=html">dhclient.leases(5)</a> man oldal ezt valamivel bõvebben kifejti.</p></div></li></ul></div></div><div class=sect2><h3 id=_további_olvasnivalók>29.5.6. További olvasnivalók<a class=anchor href=#_további_olvasnivalók></a></h3><div class=paragraph><p>A DHCP protokoll mûködését az <a href=http://www.freesoft.org/CIE/RFC/2131/>RFC 2131</a> mutatja be. A témához kapcsolódóan <a href=http://www.dhcp.org/>itt</a> tudunk még leírásokat találni.</p></div></div><div class=sect2><h3 id=network-dhcp-server>29.5.7. A DHCP szerverek telepítése és beállítása<a class=anchor href=#network-dhcp-server></a></h3><div class=sect3><h4 id=_mirõl_szól_ez_a_szakasz>29.5.7.1. Mirõl szól ez a szakasz<a class=anchor href=#_mirõl_szól_ez_a_szakasz></a></h4><div class=paragraph><p>Ebben a szakaszban arról olvashatunk, hogy miként kell egy FreeBSD típusú rendszert DHCP szervernek beállítani, ha az ISC (internetes rendszerkonzorcium) DHCP szerverét használjuk.</p></div><div class=paragraph><p>Ez a szerver nem része a FreeBSD-nek, ezért a szolgáltatás elindításához elõször fel kell raknunk a <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp31-server/>net/isc-dhcp31-server</a> portot. A Portgyûjtemény használatára vonatkozóan a <a href=../ports/#ports>Alkalmazások telepítése. csomagok és portok</a> lehet segítségünkre.</p></div></div><div class=sect3><h4 id=_a_dhcp_szerver_telepítése>29.5.7.2. A DHCP szerver telepítése<a class=anchor href=#_a_dhcp_szerver_telepítése></a></h4><div class=paragraph><p>Ha a FreeBSD rendszerünket DHCP szerverként akarjuk beállítani, akkor ehhez elsõként a <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> eszköz jelenlétét kell biztosítani a rendszermagban. Ehhez vegyük fel a <code>device bpf</code> sort a rendszermagunk beállításait tartalmazó állományba, majd fordítsuk újra a rendszermagot. A rendszermag lefordításáról a <a href=../kernelconfig/#kernelconfig>A FreeBSD rendszermag testreszabása</a>ben olvashatunk.</p></div><div class=paragraph><p>A <span class=filename>bpf</span> eszköz a FreeBSD-hez alapból adott <span class=filename>GENERIC</span> rendszermag része, ezért a DHCP használatához nem kell feltétlenül újat fordítanunk.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A biztonsági szempontok miatt aggódó felhasználók részére megjegyezzük, hogy a <span class=filename>bpf</span> eszköz egyben a csomagok lehallgatását is lehetõvé teszi (habár az ilyen témájú programok futtatásához megfelelõ jogokra is szükség van). A <span class=filename>bpf</span> használata <em>kötelezõ</em> a DHCP mûködtetéséhez, de ha nagyon kényesek vagyunk a biztonságot illetõen, akkor minden olyan esetben, amikor nem használjuk ki ezt a lehetõséget, távolítsuk el a rendszermagból.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A következõ lépésben át kell szerkesztenünk a mintaként mellékelt <span class=filename>dhcpd.conf</span> állományt, amelyet a <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp31-server/>net/isc-dhcp31-server</a> port rakott fel. Ez alapértelmezés szerint a <span class=filename>/usr/local/etc/dhcpd.conf.sample</span> néven található meg, és mielõtt bármit is változtatnánk rajta, másoljuk le <span class=filename>/usr/local/etc/dhcpd.conf</span> néven.</p></div></div><div class=sect3><h4 id=_a_dhcp_szerver_beállítása>29.5.7.3. A DHCP szerver beállítása<a class=anchor href=#_a_dhcp_szerver_beállítása></a></h4><div class=paragraph><p>A <span class=filename>dhcpd.conf</span> az alhálózatokat illetve a gépeket érintõ deklarációkat tartalmazza, és talán a legkönnyebben a következõ példa alapján mutatható be:</p></div><div class="literalblock programlisting"><div class=content><pre>option domain-name &#34;minta.com&#34;;<i class=conum data-value=1></i><b>(1)</b>
option domain-name-servers 192.168.4.100;<i class=conum data-value=2></i><b>(2)</b>
option subnet-mask 255.255.255.0;<i class=conum data-value=3></i><b>(3)</b>

default-lease-time 3600;<i class=conum data-value=4></i><b>(4)</b>
max-lease-time 86400;<i class=conum data-value=5></i><b>(5)</b>
ddns-update-style none;<i class=conum data-value=6></i><b>(6)</b>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<i class=conum data-value=7></i><b>(7)</b>
  option routers 192.168.4.1;<i class=conum data-value=8></i><b>(8)</b>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<i class=conum data-value=9></i><b>(9)</b>
  fixed-address levelezes.minta.com;<i class=conum data-value=10></i><b>(10)</b>
}</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Ez a beállítás adja meg a kliensek számára az alapértelmezett keresési tartományt (search domain). A <a href="https://man.freebsd.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5&amp;format=html">resolv.conf(5)</a> tud ezzel kapcsolatban részletesebb információkat adni.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Ez a beállítás adja meg a kliensek által használt névfeloldó szerverek vesszõvel elválasztott felsorolását.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>A kliensekhez tartozó hálózati maszk.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>A kliens egy adott idõre kérhet bérleti jogot, egyébként a szerver dönt a bérlet lejárati idejérõl (másodpercekben).</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Ez az a maximális idõ, amennyire a szerver hajlandó bérbe adni IP-címet. A kliens ugyan hosszabb idõre is kérheti és meg is kapja, de legfeljebb csak <code>max-lease-time</code> másodpercig lesz érvényes.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Ez a beállítás határozza meg, hogy a DHCP szervernek frissítse-e a névoldási információkat a bérlések elfogadásánál vagy visszamondásánál. Az ISC implementációjánál ez a beállítás <em>kötelezõ</em>.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Ezzel adjuk meg milyen tartományból tudunk IP-címeket kiosztani a kliensek számára. A kezdõ címet is beleértve, innen fogunk kiutalni egyet a klienseknek.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>A kliensek felé elküldött alapértelmezett átjáró címe.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>A gép hardveres MAC-címe (így a DHCP szerver képes felismerni a kérés küldõjét).</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>Ennek megadásával a gépek mindig ugyanazt az IP-címet kapják. Itt már megadhatunk egy hálózati nevet, mivel a bérlethez tartozó információk visszaküldése elõtt maga a DHCP szerver fogja feloldani a gép nevét.</td></tr></tbody></table></div><div class=paragraph><p>Miután befejeztük a <span class=filename>dhcpd.conf</span> módosítását, a DHCP szerver az <span class=filename>/etc/rc.conf</span> állományban tudjuk engedélyezni, vagyis tegyük bele a következõt:</p></div><div class="literalblock programlisting"><div class=content><pre>dhcpd_enable=&#34;YES&#34;
dhcpd_ifaces=&#34;dc0&#34;</pre></div></div><div class=paragraph><p>A <code>dc0</code> felület nevét helyettesítsük annak a felületnek (vagy whitespace karakterekkel elválasztott felületeknek) a nevével, amelyen keresztül a DHCP szerver várni fogja a kliensek kéréseit.</p></div><div class=paragraph><p>Ezután a következõ parancs kiadásával indítsuk el a szervert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/etc/rc.d/isc-dhcpd start</span></code></pre></div></div><div class=paragraph><p>Amikor a jövõben valamit változtatunk a konfigurációs állományon, akkor ezzel kapcsolatban fontos megemlíteni, hogy ha csak egy <code>SIGHUP</code> jelzést küldünk a dhcpd démonnak, akkor az a többi démontól eltérõen önmagában még <em>nem</em> eredményezi a konfigurációs adatok újraolvasását. Helyette a <code>SIGTERM</code> jelzéssel kell leállítani a programot, majd újraindítani a fenti paranccsal.</p></div></div><div class=sect3><h4 id=_állományok_2>29.5.7.4. Állományok<a class=anchor href=#_állományok_2></a></h4><div class=ulist><ul><li><p><span class=filename>/usr/local/sbin/dhcpd</span></p><div class=paragraph><p>A dhcpd statikusan linkelt és a <span class=filename>/usr/local/sbin</span> könyvtárban található. A porttal együtt felkerülõ <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd&amp;sektion=8&amp;format=html">dhcpd(8)</a> man oldal ad részletesebb útmutatást dhcpd használatáról.</p></div></li><li><p><span class=filename>/usr/local/etc/dhcpd.conf</span></p><div class=paragraph><p>Mielõtt a dhcpd megkezdhetné mûködését, egy konfigurációs állományra is szükségünk lesz, amely a <span class=filename>/usr/local/etc/dhcpd.conf</span>. Ez az állomány tartalmazza az összes olyan információt, ami kell a kliensek megfelelõ kiszolgálásához valamint a szerver mûködéséhez. Ez a konfigurációs állomány porthoz tartozó <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5&amp;format=html">dhcpd.conf(5)</a> man oldalon kerül ismertetésre.</p></div></li><li><p><span class=filename>/var/db/dhcpd.leases</span></p><div class=paragraph><p>A DHCP szerver ebben az állományba tartja nyilván a kiadott bérleteket, egy napló formájában. A porthoz kapcsolódó <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5&amp;format=html">dhcpd.leases(5)</a> man oldalon errõl többet is megtudhatunk.</p></div></li><li><p><span class=filename>/usr/local/sbin/dhcrelay</span></p><div class=paragraph><p>A dhcrelay állománynak olyan komolyabb környezetekben van szerepe, ahol a DHCP szerver a kliensektõl érkezõ kéréseket egy másik hálózaton található DHCP szerverhez továbbítja. Ha szükség lenne erre a lehetõségre, akkor telepítsük fel a <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp31-relay/>net/isc-dhcp31-relay</a> portot. A porthoz tartozó <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8&amp;format=html">dhcrelay(8)</a> man oldal ennek részleteit taglalja.</p></div></li></ul></div></div></div></div></div><div class=sect1><h2 id=network-dns>29.6. Névfeloldás (DNS)<a class=anchor href=#network-dns></a></h2><div class=sectionbody><div class=sect2><h3 id=_áttekintés>29.6.1. Áttekintés<a class=anchor href=#_áttekintés></a></h3><div class=paragraph><p>A FreeBSD alapértelmezés szerint a BIND (Berkeley Internet Name Domain) egyik verzióját tartalmazza, amely a névfeloldási (Domain Name System, DNS) protokoll egyik elterjedt implementációja. A DNS protokollon keresztül tudunk az IP-címekhez neveket rendelni és fordítva. Például a <code>www.FreeBSD.org</code> névre a FreeBSD Projekt webszerverének IP-címét kapjuk meg, miközben a <code>ftp.FreeBSD.org</code> pedig a hozzá tartozó FTP szerver IP-címét fogja visszaadni. Ehhez hasonlóan a fordítottja is megtörténhet, vagyis egy IP-címhez is kérhetjük a hálózati név feloldását. A névfeloldási kérések kiszolgálásához nem feltétlenül szükséges névszervert futtatni a rendszerünkön.</p></div><div class=paragraph><p>A FreeBSD jelen pillanatban alapból a BIND9 névszervert tartalmazza. A benne szereplõ változata több biztonsági javítást, új állományrendszeri kiosztást és automatizált <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> beállítást is magában foglal.</p></div><div class=paragraph><p>Az interneten keresztüli névfeloldást legfelsõ szintû tartományoknak (Top Level Domain, TLD) nevezett hitelesített tövek némileg bonyolult rendszerén alapszik, valamint más egyéb olyan névszervereken, amelyek további egyéni információkat tárolnak és táraznak.</p></div><div class=paragraph><p>A BIND fejlesztését jelenleg az Internet Systems Consortium (<a href=http://www.isc.org/>http://www.isc.org/</a>) felügyeli.</p></div></div><div class=sect2><h3 id=_alapfogalmak>29.6.2. Alapfogalmak<a class=anchor href=#_alapfogalmak></a></h3><div class=paragraph><p>A leírás megértéséhez be kell mutatnunk néhány névfeloldással kapcsolatos fogalmat.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Fogalom</th><th class="tableblock halign-left valign-top">Meghatározás</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Közvetlen névfeloldás (forward DNS)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A hálózati nevek leképezése IP-címekre.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>õs (origin)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Egy adott zóna állományban szereplõ tartományra vonatkozik.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>named, BIND</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A FreeBSD-n belüli BIND névszerver különbözõ megnevezései.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Névfeloldó (resolver)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az a program a rendszerben, amelyhez a hálózaton levõ gépek a zónák adatainak elérésével kapcsolatban fordulnak.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Inverz névfeloldás (reverse DNS)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az IP-címek leképzése hálózati nevekre.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Gyökérzóna (root zone)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az interneten található zónák hierarchiájának töve. Minden zóna ebbe a gyökérzónába esik, ahhoz hasonlóan, ahogy egy állományrendszerben az állományok a gyökérkönyvtárba.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Zóna (zone)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Egy különálló tartomány, altartomány vagy a névfeloldás azon része, amelyet egyazon fennhatóság alatt tartanak karban.</p></td></tr></tbody></table><div class=paragraph><p>Példák zónákra:</p></div><div class=ulist><ul><li><p>A gyökérzónára a leírásokban általában <code>.</code> néven szoktak hivatkozni.</p></li><li><p>A <code>org.</code> egy legfelsõ szintû tartomány (TLD) a gyökérzónán belül.</p></li><li><p>A <code>minta.org.</code> a <code>org.</code> TLD tartomány alatti zóna.</p></li><li><p>A <code>1.168.192.in-addr.arpa</code> egy olyan zóna, amelyek a <code>192.168.1.*</code> IP-címtartományban szereplõ összes címet jelöli.</p></li></ul></div><div class=paragraph><p>Mint láthatjuk, a hálózati nevek balról kiegészülve pontosodnak. Tehát például a <code>minta.org.</code> sokkal pontosabb meghatározás, mint a <code>org.</code>, ahogy az <code>org.</code> magánál a gyökérzónánál jelent többet. A hálózati nevek felosztása leginkább egy állományrendszerhez hasonlítható, például a <span class=filename>/dev</span> könyvtár a gyökéren belül található, és így tovább.</p></div></div><div class=sect2><h3 id=_miért_érdemes_névszervert_futtatni>29.6.3. Miért érdemes névszervert futtatni<a class=anchor href=#_miért_érdemes_névszervert_futtatni></a></h3><div class=paragraph><p>A névszerverek általában két alakban jelennek meg. Egyikük a hitelesített névszerver, a másikuk a gyorsítótárazó névszerver.</p></div><div class=paragraph><p>Egy hitelesített névszerverre akkor van szükségünk, ha:</p></div><div class=ulist><ul><li><p>a világ többi része felé akarunk hiteles névfeloldási információkat szolgáltatni;</p></li><li><p>regisztráltunk egy tartományt (például <code>minta.org</code>) és az alatta levõ hálózati nevekhez is szeretnénk IP-címeket rendeltetni;</p></li><li><p>a IP-címtartományunkban szükség van inverz névfeloldási bejegyzésekre (amely IP-címbõl ad meg hálózati nevet) is;</p></li><li><p>a kérések teljesítéséhez egy tartalék avagy második, alárendelt (slave) névszerver kell.</p></li></ul></div><div class=paragraph><p>A gyorsítótárazó névszerverre akkor van szükségünk, ha:</p></div><div class=ulist><ul><li><p>egy helyi névfeloldó szerver felhasználásával fel akarjuk gyorsítani az egyébként a külsõ névszerver felé irányuló kérések kiszolgálását.</p></li></ul></div><div class=paragraph><p>Amikor valaki lekérdezi a <code>www.FreeBSD.org</code> címét, akkor a névfeloldó elõször általában a kapcsolatot rendelkezésre bocsátó internet-szolgáltató névszerverét kérdezi meg és onnan kapja meg a választ. Egy helyi, gyorsítótárazó névszerver használata esetén azonban egy ilyen kérést csak egyszer kell kiadni a külsõ névszervernek. Ezután már minden további ilyen kérés el sem hagyja a belsõ hálózatunkat, mivel a válasz szerepel a gyorsítótárban.</p></div></div><div class=sect2><h3 id=_ahogyan_mûködik_2>29.6.4. Ahogyan mûködik<a class=anchor href=#_ahogyan_mûködik_2></a></h3><div class=paragraph><p>FreeBSD alatt a BIND démon nyilvánvaló okokból named néven érhetõ el.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Állomány</th><th class="tableblock halign-left valign-top">Leírás</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A BIND démon.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rndc&amp;sektion=8&amp;format=html">rndc(8)</a></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A névszervert vezérlõ segédprogram.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A BIND által kezelt zónák adatait tároló könyvtár.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb/named.conf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A démon konfigurációs állománya.</p></td></tr></tbody></table><div class=paragraph><p>Attól függõen, hogy miként állítjuk be az adott zónát a szerveren, a hozzá tartozó állományok a <span class=filename>/etc/namedb</span> könyvtáron belül a <span class=filename>master</span>, <span class=filename>slave</span> vagy <span class=filename>dynamic</span> alkönyvtárban foglalnak helyet. Az itt tárolt állományokban levõ névfeloldási információk alapján válaszol a névszerver a felé intézett kérésekre.</p></div></div><div class=sect2><h3 id=_a_bind_elindítása>29.6.5. A BIND elindítása<a class=anchor href=#_a_bind_elindítása></a></h3><div class=paragraph><p>Mivel a BIND alapból elérhetõ a rendszerben, viszonylag könnyen be tudjuk állítani.</p></div><div class=paragraph><p>A named alapértelmezett beállítása szerint egy <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> környezetben futó egyszerû névfeloldást végzõ szerver, amely a helyi IPv4 interfészen (127.0.0.1) fogadja a kéréseket. Ezzel a beállítással a következõ parancson keresztül tudjuk elindítani:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/named onestart</span></code></pre></div></div><div class=paragraph><p>Ha engedélyezni akarjuk a named démont minden egyes rendszerindításkor, tegyük a következõ sort az <span class=filename>/etc/rc.conf</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>named_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Értelemszerûen az <span class=filename>/etc/namedb/named.conf</span> tele van olyan beállítási lehetõségekkel, amelyek meghaladják ennek a leírásnak a kereteit. Ha viszont kíváncsiak vagyunk a FreeBSD-ben a named indításához használt beállításokra, akkor az <span class=filename>/etc/defaults/rc.conf</span> állományban nézzük meg <code>named_*</code> változókat és olvassuk át az <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> man oldalt. Emellett még a <a href=../config/#configtuning-rcd>Az rc használata FreeBSD alatt</a>t is hasznos lehet elolvasni.</p></div></div><div class=sect2><h3 id=_a_konfigurációs_állományok>29.6.6. A konfigurációs állományok<a class=anchor href=#_a_konfigurációs_állományok></a></h3><div class=paragraph><p>A named beállításait tartalmazó állományok pillanatnyilag az <span class=filename>/etc/namedb</span> könyvtárban találhatóak és hacsak nem egy egyszerû névfeloldóra tartunk igényt, akkor a használata elõtt módosítanunk is kell. Itt ejtjük meg a beállítások nagy részét.</p></div><div class=sect3><h4 id=_etcnamedbnamed_conf>29.6.6.1. <span class=filename>/etc/namedb/named.conf</span><a class=anchor href=#_etcnamedbnamed_conf></a></h4><div class="literalblock programlisting"><div class=content><pre>// $FreeBSD$
//
// Részletesebb leírást a named.conf(5) és named(8) man oldalakon, valamint
// a /usr/shared/doc/bind9 könyvtárban találhatunk.
//
// Ha egy hitelesített szervert akarunk beállítani, akkor igyekezzünk
// a névfeloldás összes finom részletével pontosan tisztában lenni.
// Ugyanis még a legkisebb hibákkal is egyrészt elvághatunk gépeket az
// internet-lérésétõl, vagy másrészt felesleges forgalmat tudunk
// generálni
//

options {
	// A chroot könyvtárhoz relatív elérési út, amennyiben létezik
	directory	&#34;/etc/namedb&#34;;
	pid-file	&#34;/var/run/named/pid&#34;;
	dump-file	&#34;/var/dump/named_dump.db&#34;;
	statistics-file	&#34;/var/stats/named.stats&#34;;

// Ha a named démont csak helyi névfeloldóként használjuk, akkor ez
// egy biztonságos alapbeállítás. Ha viszont a named démon az egész
// hálózatunkat is kiszolgálja, akkor ezt a beállítást tegyük
// megjegyzésbe, vagy adjunk meg egy rendes IP-címet, esetleg
// töröljük ki.
	listen-on	{ 127.0.0.1; };

// Ha rendszerünkön engedélyezett az IPv6 használata, akkor a helyi
// névfeloldó használatához ezt a sort vegyük ki a megjegyzésbõl.
// A hálózatunk többi részérõl pedig úgy lehet elérni, ha itt megadunk
// egy IPv6 címet, vagy az &#34;any&#34; kulcsszót.
//	listen-on-v6	{ ::1; };

// Az alábbi zónákat már a lentebb található üres zónák eleve lefedik.
// Ha tehát a lenti üres zónákat kivesszük a konfigurációból, akkor
// ezeket a sorokat is tegyük megjegyzésbe.
	disable-empty-zone &#34;255.255.255.255.IN-ADDR.ARPA&#34;;
	disable-empty-zone &#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA&#34;;
	disable-empty-zone &#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA&#34;;

// Ha a szolgáltatónk névszervert is elérhetõvé tett számunkra, akkor
// itt adjuk meg annak az IP-címét és engedélyezzük az alábbi sort.
// Ezzel egyben kihasználjuk a gyorsítótárat is, így mérsékeljük az
// internet felé mozgó névfeloldásokat.
/*
	forwarders {
		127.0.0.1;
	};
*

// Ha a &#39;forwarders&#39; rész nem üres, akkor alapértelmezés szerint a
// &#39;forward first&#39; értékkel rendelkezik.  Ekkor a kérést a helyi szerver
// kapja abban az esetben, amikor a &#39;forwarders&#39; részben megadott
// szerverek nem tudják megválaszolni.  Emellett a névszerverben a
// következõ sor hozzáadásával letilthatjuk, hogy önmagától ne
// kezdeményezzen kéréseket:
//     forward only;

// Ha a kérések továbbítását az /etc/resolv.conf állományban megadott
// bejegyzések mentén szeretnénk automatikusan konfigurálni, akkor vegyük
// ki a megjegyzésbõl az alábbi sort és adjuk hozzá az /etc/rc.conf
// állományhoz a name_auto_forward=yes sort.  Emellett használható még a
// named_auto_forward_only beállítás is (amely fentebb leírt funkciót
// valósítja meg).
//     include &#34;/etc/namedb/auto_forward.conf&#34;;</pre></div></div><div class=paragraph><p>Ahogy arról a megjegyzésekben is szó esik, úgy tudjuk aktiválni a gyorsítótárat, ha megadjuk a <code>forwarders</code> beállítást. Normális körülmények között a névszerver az interneten az egyes névszervereket rekurzívan fogja keresni egészen addig, amíg meg nem találja a keresett választ. Az iménti beállítás engedélyezésével azonban elõször a szolgáltató névszerverét (vagy az általa kijelölt névszervert) fogjuk megkérdezni, a saját gyorsítótárából. Ha a szolgáltató kérdéses névszervere egy gyakran használt, gyors névszerver, akkor ezt érdemes bekapcsolnunk.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Itt a <code>127.0.0.1</code> megadása <em>nem</em> mûködik. Mindenképpen írjuk át a szolgáltatónk névszerverének IP-címére.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>	/*
	   A BIND legújabb változataiban alapértelmezés szerint minden egyes
	   kimenõ kérésnél más, véletlenszerûen választott UDP portot
	   használnak, ezáltal jelentõs mértékben csökkenthetõ a gyorsítótár
	   meghamisíthatóságának (cache poisoning) esélye.  Javasoljuk
	   mindenkinek, hogy használják ki ezt a lehetõséget és eszerint
	   állítsák be a tûzfalakat.

	   Ha nem sikerül a tûzfalat hozzáigazítani ehhez a
	   viselkedéshez AKKOR ÉS CSAK IS AKKOR engedélyezzük a lenti
	   beállítást.  Alkalmazásával sokkal kevésbé lesz ellenálló a
	   névszerver a különbözõ hamisítási kísérletekkel szemben,
	   ezért lehetõség szerint kerüljük el.

	   Az NNNNN helyére egy 49160 és 65530 közti számot kell
	   beírnunk.
	 */
	 // query-source address * port NNNNN;
};

// Ha engedélyezzük a helyi névszervert, akkor az /etc/resolv.conf
// állományban elsõ helyen megadni a 127.0.0.1 címet. Sõt, az
// /etc/rc.conf állományból se felejtsük ki.

// A hagyományos &#34;root-hints&#34; megoldás.  Használjuk ezt VAGY a lentebb
// megadott alárendelt zónákat.
zone &#34;.&#34; { type hint; file &#34;named.root&#34;; };

/*	Több szempontból is elõnyös, ha a következõ zónákat alárendeljük a
	gyökér névfeloldó szervereknek:
	1. A helyi felhasználók kéréseit gyorsabban tudjuk feloldalni.
	2. A gyökérszerverek felé nem megy semmilyen hamis forgalom.
	3. A gyökérszerverek meghibásodása vagy elosztott DoS támadás
	   esetén rugalmasabban tudunk reagálni.

	Másfelöl azonban ez a módszer a &#34;hints&#34; állomány alkalmazásával
	szemben több felügyeletet igényel, mivel figyelnünk kell, nehogy
	egy váratlan meghibásodás mûködésképtelenné tegye a
	szerverünket.  Ez a megoldás leginkább a sok klienst kiszolgáló
	névszerverek esetén bizonyulhat jövedelmezõbbnek.  Óvatosan
	bánjunk vele!

	A módszer alkalmazásához vegyük ki a megjegyzésbõl a következõ
	bejegyzéseket és tegyük megjegyzésbe a fenti hint zónát.
*/

zone &#34;.&#34; {
	type slave;
	file &#34;slave/root.slave&#34;;
	masters {
		192.5.5.241;	// F.ROOT-SERVERS.NET.
	};
	notify no;
};

zone &#34;arpa&#34; {
	type slave;
	file &#34;slave/arpa.slave&#34;;
	masters {
		192.5.5.241;	// F.ROOT-SERVERS.NET.
	};
	notify no;
}

zone &#34;in-addr.arpa&#34; {
	type slave;
	file &#34;slave/in-addr.arpa.slave&#34;;
	masters {
		192.5.5.241;	// F.ROOT-SERVERS.NET.
	};
	notify no;
};
*/

/*	Az alábbi zónák helyi kiszolgálásával meg tudjuk akadályozni, hogy
	a belõlük indított kérések elhagyják a hálózatunkat és a elérjük
	a gyökér névfeloldó szervereket.  Ez a megközelítés két komoly
	elõnnyel rendelkezik:
	1. A helyi felhasználók kéréseit gyorsabban tudjuk
	   megválaszolni.
	2. A gyökérszerverek felé nem továbbítódik semmilyen hamis
	   forgalom.
*/
// RFC 1912
zone &#34;localhost&#34;	{ type master; file &#34;master/localhost-forward.db&#34;; };
zone &#34;127.in-addr.arpa&#34;	{ type master; file &#34;master/localhost-reverse.db&#34;; };
zone &#34;255.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };

// A helyi IPv6 címek részére létrehozott RFC 1912-szerû zóna
zone &#34;0.ip6.arpa&#34;	{ type master; file &#34;master/localhost-reverse.db&#34;; };

// &#34;Ez&#34; a hálózat (RFC 1912 és 3330)
zone &#34;0.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };

// Magáncélú hálózatok (RFC 1918)
zone &#34;10.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;16.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;17.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;18.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;19.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;20.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;21.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;22.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;23.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;24.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;25.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;26.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;27.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;28.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;29.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;30.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;31.172.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;168.192.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };

// Helyi link/APIPA (RFC 3330 és 3927)
zone &#34;254.169.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };

// Dokumentációs próbahálózat (RFC 3330)
zone &#34;2.0.192.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };

// Útválasztási teljesítmény tesztelésére (RFC 3330)
zone &#34;18.198.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };
zone &#34;19.198.in-addr.arpa&#34;	{ type master; file &#34;master/empty.db&#34;; };

// Az IANA részére fentartott - a régi E osztályú címtér
zone &#34;240.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;241.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;242.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;243.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;244.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;245.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;246.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;247.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;248.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;249.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;250.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;251.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;252.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;253.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;254.in-addr.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };

// Hozzárendelés nélküli IPv6-címek (RFC 4291)
zone &#34;1.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;3.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;4.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;5.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;6.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;7.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;8.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;9.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;a.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;b.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;c.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;d.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;e.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;0.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;1.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;2.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;3.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;4.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;5.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;6.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;7.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;8.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;9.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;a.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;b.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;0.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;1.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;2.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;3.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;4.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;5.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;6.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;7.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };

// IPv6 ULA (RFC 4193)
zone &#34;c.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;d.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };

// IPv6 helyi link (RFC 4291)
zone &#34;8.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;9.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;a.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;b.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };

// Elavult IPv6 helyi címek (RFC 3879)
zone &#34;c.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;d.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;e.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };
zone &#34;f.e.f.ip6.arpa&#34;		{ type master; file &#34;master/empty.db&#34;; };

// Az IP6.INT már elavult (RFC 4159)
zone &#34;ip6.int&#34;			{ type master; file &#34;master/empty.db&#34;; };

// FONTOS: Ne használjuk ezeket az IP-címeket, mert nem valódiak,
// csupán illusztrációs és dokumentációs célokból adtuk meg!
//
// Az alárendelt zónák beállításaira vonatkozó bejegyzések. Érdemes
// ilyet beállítani legalább ahhoz a zónához, amelyhez a tartományunk is
// tartozik. Az elsõdleges névszerverhez tartozó IP-címet érdeklõdjük meg
// az illetékes hálózati rendszergazdától.
//
// Soha ne felejtsünk el megadni zónát az inverz kereséshez!  A neve az IP-cím
// tagjainak fordított sorrendjébõl // származik, amelyhez hozzátoldunk még egy
// &#34;.IN-ADDR.ARPA&#34; (illetve IPv6 esetén &#34;.IP6.ARPA&#34;) részt.
//
// Mielõtt nekilátnánk egy elsõdleges zóna beállításának, gondoljuk
// végig, hogy tényleg a megfelelõ szinten ismerjük a névfeloldás és
// a BIND mûködését. Gyakran ugyanis egyáltalán nem nyilvánvaló
// csapdákba tudunk esni.  Egy alárendelt zóna beállítása általában sokkal egyszerûbb feladat.
//
// FONTOS: Ne kövessük vakon a most következõ példát :-) Helyette inkább
// valódi neveket és címeket adjunk meg.

/* Példa dinamikus zónára
key &#34;mintaorgkulcs&#34; {
	algorithm hmac-md5;
	secret &#34;sf87HJqjkqh8ac87a02lla==&#34;;
};
zone &#34;minta.org&#34; {
	type master;
	allow-update {
		key &#34;mintaorgkulcs&#34;;
	};
	file &#34;dynamic/minta.org&#34;;
};
*/

/* Példa inverz alárendelt zónákra
zone &#34;1.168.192.in-addr.arpa&#34; {
	type slave;
	file &#34;slave/1.168.192.in-addr.arpa&#34;;
	masters {
		192.168.1.1;
	};
};
*/</pre></div></div><div class=paragraph><p>A <span class=filename>named.conf</span> állományban tehát így adhatunk meg közvetlen és inverz alárendelt zónákat.</p></div><div class=paragraph><p>Minden egyes újabb kiszolgált zónához az egy új bejegyzést kell felvenni a <span class=filename>named.conf</span> állományban.</p></div><div class=paragraph><p>Például a <code>minta.org</code> címhez tartozó legegyszerûbb ilyen bejegyzés így néz ki:</p></div><div class="literalblock programlisting"><div class=content><pre>zone &#34;minta.org&#34; {
	type master;
	file &#34;master/minta.org&#34;;
};</pre></div></div><div class=paragraph><p>Ez egy központi zóna, ahogy arról a <code>type</code> mezõ, vagyis a típusa is árulkodik. Továbbá a <code>file</code> mezõben láthatjuk, hogy a hozzá tartozó információkat az <span class=filename>/etc/namedb/master/minta.org</span> állományban tárolja.</p></div><div class="literalblock programlisting"><div class=content><pre>zone &#34;minta.org&#34; {
	type slave;
	file &#34;slave/minta.org&#34;;
};</pre></div></div><div class=paragraph><p>Az alárendelt esetben a zónához tartozó információkat a zóna központi szerverétõl kapjuk meg és megadott állományban mentjük el. Ha valamiért a központi szerver leáll vagy nem érhetõ el, akkor az alárendelt szerver az átküldött zóna információk alapján képes helyette kiszolgálni a kéréseket.</p></div></div><div class=sect3><h4 id=_a_zóna_állományok>29.6.6.2. A zóna állományok<a class=anchor href=#_a_zóna_állományok></a></h4><div class=paragraph><p>A <code>minta.org</code> címhez tartozó példa központi zóna állomány (amely az <span class=filename>/etc/namedb/master/néven.org</span> érhetõ el) tartalma az alábbi:</p></div><div class="literalblock programlisting"><div class=content><pre>$TTL 3600        ; alapértelmezés szerint 1 óra
minta.org.      IN      SOA      ns1.minta.org. admin.minta.org. (
                                2006051501      ; sorozatszám
                                10800           ; frissítés
                                3600            ; ismétlés
                                604800          ; lejárat
                                300             ; TTL negatív válasz
                        )

; névszerverek
                IN      NS      ns1.minta.org.
                IN      NS      ns2.minta.org.

; MX rekordok
                IN      MX 10   mx.minta.org.
                IN      MX 20   levelezes.minta.org.

                IN      A       192.168.1.1

; a gépek nevei
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
levelezes       IN      A       192.168.1.5

; álnevek
www             IN      CNAME   minta.org.</pre></div></div><div class=paragraph><p>A "."-ra végzõdõ hálózati nevek abszolút nevek, míg minden más "." nélküli név az õsére vezehetõ vissza (tehát relatív). Például az <code>ns1</code> névbõl az <code>ns1.minta.org</code> keletkezik.</p></div><div class=paragraph><p>A zóna állományok felépítése a következõ:</p></div><div class="literalblock programlisting"><div class=content><pre>rekordnév      IN rekordtípus   érték</pre></div></div><div class=paragraph><p>A névfeloldásban leggyakrabban alkalmazott rekordok típusai:</p></div><div class=dlist><dl><dt class=hdlist1>SOA</dt><dd><p>a zóna fennhatóságának kezdete</p></dd><dt class=hdlist1>NS</dt><dd><p>egy hitelesített névszerver</p></dd><dt class=hdlist1>A</dt><dd><p>egy gép címe</p></dd><dt class=hdlist1>CNAME</dt><dd><p>egy álnév kanonikus neve</p></dd><dt class=hdlist1>MX</dt><dd><p>levélváltó</p></dd><dt class=hdlist1>PTR</dt><dd><p>mutató a tartománynévre (az inverz feloldás használja)</p></dd></dl></div><div class="literalblock programlisting"><div class=content><pre>minta.org. IN SOA ns1.minta.org. admin.minta.org. (
                        2006051501      ; sorozatszám
                        10800           ; 3 óránként frissítsünk
                        3600            ; 1 óra után próbálkozzunk újra
                        604800          ; 1 hét után jár le
                        300 )           ; TTL negatív válasz</pre></div></div><div class=dlist><dl><dt class=hdlist1><code>minta.org.</code></dt><dd><p>a tartomány neve, amely egyben a zóna õse</p></dd><dt class=hdlist1><code>ns1.minta.org.</code></dt><dd><p>a zóna elsõdleges/hitelesített névszervere</p></dd><dt class=hdlist1><code>admin.minta.org.</code></dt><dd><p>a zónáért felelõs személy neve, akinek az e-mail címét a "@" behelyettesítésével kapjuk meg. (Tehát a <a href=mailto:admin@example.org>admin@example.org</a> címbõl <code>admin.example.org</code> lesz.)</p></dd><dt class=hdlist1><code>2006051501</code></dt><dd><p>az állomány sorozatszáma. Ezt a zóna állomány módosításakor mindig növelnünk kell. Manapság a rendszergazdák a sorozatszámot <code>ééééhhnnvv</code> alakban adják meg. A <code>2006051501</code> tehát azt jelenti, hogy az állományt 2006. május 15-én módosították utoljára, és a <code>01</code> pedig arra utal, hogy aznap elõször. A sorozatszám megadása fontos az alárendelt névszerverek számára, mivel így tudják megállapítani, hogy a zóna mikor változott utoljára.</p></dd></dl></div><div class="literalblock programlisting"><div class=content><pre>                IN NS           ns1.minta.org.</pre></div></div><div class=paragraph><p>Ez egy NS bejegyzés. A zónához tartozó minden hitelesített névszervernek lennie kell legalább egy ilyen bejegyzésének.</p></div><div class="literalblock programlisting"><div class=content><pre>localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
levelezes       IN      A       192.168.1.5</pre></div></div><div class=paragraph><p>Az A rekord egy gép nevét adja meg. Ahogy a fenti példából is kiderül, az <code>ns1.minta.org</code> név a <code>192.168.1.2</code> címre képzõdik le.</p></div><div class="literalblock programlisting"><div class=content><pre>                IN      A       192.168.1.1</pre></div></div><div class=paragraph><p>Ez a sor <code>192.168.1.1</code> címet rendeli az aktuális õshöz, amely jelen esetünkben az <code>example.org</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>www             IN CNAME        @</pre></div></div><div class=paragraph><p>A kanonikus neveket tároló rekordokat általában egy gép álneveihez használjuk. Ebben a példában a <code>www</code> a "fõgép" egyik álneve, amely itt éppenséggel a <code>minta.org</code> (<code>192.168.1.1</code>) tartományneve. A CNAME rekordok mellé más típusú rekordokat ugyanarra a hálózati névre soha ne adjunk meg.</p></div><div class="literalblock programlisting"><div class=content><pre>                IN MX   10      levelezes.minta.org.</pre></div></div><div class=paragraph><p>Az MX rekord adja meg, hogy milyen levelezõ szerverek felelõsek a zónába érkezõ levelek fogadásáért. A <code>levelezes.minta.org</code> a levelezõ szerver hálózati neve, ahol a 10 az adott levelezõ szerver prioritása.</p></div><div class=paragraph><p>Több levelezõ szerver is megadható 10-es, 20-as stb. prioritásokkal. A <code>minta.org</code> tartományon belül elõször mindig a legnagyobb MX prioritással rendelkezõ levelezõ szervernek próbáljuk meg továbbítani a leveleket (a legkisebb prioritási értékkel rendelkezõ rekord), majd ezután a második legnagyobbnak stb. egészen addig, amíg a levelet tovább nem küldtük.</p></div><div class=paragraph><p>Az in-addr.arpa zóna állományok (inverz DNS) esetén ugyanez a felépítés, kivéve, hogy a PTR típusú bejegyzések szerepelnek az A és CNAME helyett.</p></div><div class="literalblock programlisting"><div class=content><pre>$TTL 3600

1.168.192.in-addr.arpa. IN SOA ns1.minta.org. admin.minta.org. (
                        2006051501      ; sorozatszám
                        10800           ; frissítés
                        3600            ; ismétlés
                        604800          ; lejárat
                        300 )           ; TTL negatív válasz

        IN      NS      ns1.minta.org.
        IN      NS      ns2.minta.org.

1       IN      PTR     minta.org.
2       IN      PTR     ns1.minta.org.
3       IN      PTR     ns2.minta.org.
4       IN      PTR     mx.minta.org.
5       IN      PTR     levelezes.minta.org.</pre></div></div><div class=paragraph><p>Ez az állomány írja le tehát a kitalált tartományunkon belül az IP-címek és hálózati nevek összerendelését.</p></div><div class=paragraph><p>Érdemes megemlíteni, hogy a PTR rekordok jobb oldalán álló nevek mindegyikének teljes hálózati névnek kell lennie (vagyis "." karakterrel kell végzõdnie).</p></div></div></div><div class=sect2><h3 id=_a_gyorsítótárazó_névszerver>29.6.7. A gyorsítótárazó névszerver<a class=anchor href=#_a_gyorsítótárazó_névszerver></a></h3><div class=paragraph><p>A gyorsítótárazó névszerver az a névszerver, amely elsõdleges feladata a rekurzív kérések kiszolgálása. Egyszerûen továbbítja a beérkezõ kéréseket, majd megjegyzi azokat, így késõbb közvetlenül tud válaszolni.</p></div></div><div class=sect2><h3 id=_biztonság>29.6.8. Biztonság<a class=anchor href=#_biztonság></a></h3><div class=paragraph><p>Habár a névfeloldás szempontjából a BIND a legelterjedtebb, a biztonságosságával azért akadnak gondok. Gyakran találnak benne potenciális és kihasználható biztonsági réseket.</p></div><div class=paragraph><p>A FreeBSD azonban a named démont automatikusan egy <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> környezetbe helyezi. Emellett még léteznek további más védelmi mechanizmusok is, amelyek segítségével el tudjuk kerülni a névfeloldást célzó esetleges támadásokat.</p></div><div class=paragraph><p>Sosem árt olvasgatni a <a href=http://www.cert.org/>CERT</a> által kiadott biztonsági figyelmeztetéseket és feliratkozni a <a href=https://lists.FreeBSD.org/subscription/freebsd-security-notifications>FreeBSD security notifications levelezési lista</a> címére, hogy folyamatosan értesüljünk az interneten és a FreeBSD-ben talált különbözõ biztonsági hibákról.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Ha valamilyen gondunk támadna, akkor esetleg próbálkozzunk meg a forrásaink frissítésével és a named újrafordításával.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_egyéb_olvasnivalók>29.6.9. Egyéb olvasnivalók<a class=anchor href=#_egyéb_olvasnivalók></a></h3><div class=paragraph><p>A BIND/named man oldalai: <a href="https://man.freebsd.org/cgi/man.cgi?query=rndc&amp;sektion=8&amp;format=html">rndc(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=named.conf&amp;sektion=8&amp;format=html">named.conf(8)</a></p></div><div class=ulist><ul><li><p><a href=http://www.isc.org/software/bind>Az ISC BIND hivatalos honlapja (angolul)</a></p></li><li><p><a href=http://www.isc.org/software/guild>Az ISC BIND hivatalos fóruma (angolul)</a></p></li><li><p><a href=http://www.oreilly.com/catalog/dns5/>O’Reilly DNS and BIND 5th Edition</a></p></li><li><p><a href=http://www.rfc-editor.org/rfc/rfc1034.txt>RFC1034 - Domain Names - Concepts and Facilities</a></p></li><li><p><a href=http://www.rfc-editor.org/rfc/rfc1035.txt>RFC1035 - Domain Names - Implementation and Specification</a></p></li></ul></div></div></div></div><div class=sect1><h2 id=network-apache>29.7. Az Apache webszerver<a class=anchor href=#network-apache></a></h2><div class=sectionbody><div class=sect2><h3 id=_áttekintés_2>29.7.1. Áttekintés<a class=anchor href=#_áttekintés_2></a></h3><div class=paragraph><p>A FreeBSD szolgálja ki a legforgalmasabb honlapok nagy részét szerte a világban. A mögöttük álló webszerverek általában az Apache webszervert alkalmazzák. Az Apache használatához szükséges csomagok megtalálhatóak a FreeBSD telepítõlemezén is. Ha a FreeBSD elsõ telepítésekor még nem telepítettük volna az Apache szerverét, akkor a <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13/>www/apache13</a> vagy <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache12/>www/apache12</a> portból tudjuk feltenni.</p></div><div class=paragraph><p>Az Apache szervert sikeres telepítését követõen be kell állítanunk.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ebben a szakaszban az Apache webszerver 1.3.X változatát mutatjuk be, mivel ezt használják a legtöbben FreeBSD alatt. Az Apache 2.X rengeteg új technológiát vezetett be, de ezekkel itt most nem foglalkozunk. Az Apache 2.X változatával kapcsolatban keressük fel a <a href=http://httpd.apache.org/>http://httpd.apache.org/</a> oldalt.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_beállítás>29.7.2. Beállítás<a class=anchor href=#_beállítás></a></h3><div class=paragraph><p>Az Apache webszerver konfigurációs állománya FreeBSD alatt <span class=filename>/usr/local/etc/apache/httpd.conf</span> néven található. Ez az állomány egy szokványos UNIX®-os szöveges konfigurációs állomány, ahol a megjegyzéseket egy <code>#</code> karakterrel vezetjük be. Az itt használható összes lehetséges beállítási lehetõség átfogó ismertetése meghaladná az egész kézikönyv határait, ezért most csak a leggyakrabban módosított direktívákat fogjuk ismertetni.</p></div><div class=dlist><dl><dt class=hdlist1><code>ServerRoot "/usr/local"</code></dt><dd><p>Ez adja meg az Apache számára az alapértelmezett könyvtárat. A binárisai ezen belül a <span class=filename>bin</span> és <span class=filename>sbin</span> alkönyvtárakban, a konfigurációs állományai pedig az <span class=filename>etc/apache</span> könyvtárban tárolódnak.</p></dd><dt class=hdlist1><code>ServerAdmin <a href=mailto:saját@címünk.az>saját@címünk.az</a>.interneten</code></dt><dd><p>Erre a címre küldhetik nekünk a szerverrel kapcsolatos hibákat. Ez a cím egyes szerver által generált oldalakon jelenik meg, például hibák esetében.</p></dd><dt class=hdlist1><code>ServerName www.minta.com</code></dt><dd><p>A <code>ServerName</code> segítségével meg tudjuk adni, hogy milyen nevet küldjön vissza a szerver a klienseknek olyankor, ha az nem egyezne meg a jelenlegivel (vagyis a <code>www</code> nevet használjuk a gépünk valódi neve helyett).</p></dd><dt class=hdlist1><code>DocumentRoot "/usr/local/www/data"</code></dt><dd><p>A <code>DocumentRoot</code> adja meg azt a könyvtárat, ahonnan kiszolgáljuk a dokumentumokat. Alapértelmezés szerint az összes kérés erre a könyvtárra fog vonatkozni, de a szimbolikus linkek és az álnevek akár más helyekre is mutathatnak.</p></dd></dl></div><div class=paragraph><p>A változtatások végrehajtása elõtt mindig is jó ötlet biztonsági másolatot készíteni az Apache konfigurációs állományairól. Ahogy sikerült összerakni egy számunkra megfelelõ konfigurációt, készen is állunk az Apache futtatására.</p></div></div><div class=sect2><h3 id=_az_apache_futtatása>29.7.3. Az Apache futtatása<a class=anchor href=#_az_apache_futtatása></a></h3><div class=paragraph><p>A többi hálózati szervertõl eltérõen az Apache nem az inetd szuperszerverbõl fut. A kliensektõl érkezõ HTTP kérések minél gyorsabb kiszolgálásának érdekében úgy állítottuk be, hogy önállóan fusson. Ehhez egy szkriptet is mellékeltünk, amellyel igyekeztünk a lehetõ legjobban leegyszerûsíteni a szerver indítását, leállítását és újraindítását. Az Apache elsõ indításához adjuk ki a következõ parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl start</span></code></pre></div></div><div class=paragraph><p>Így pedig a szervert bármikor leállíthatjuk:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl stop</span></code></pre></div></div><div class=paragraph><p>Ha valamilyen okból megváltoztattuk volna a szerver beállításait, akkor ezen a módon tudjuk újraindítani:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl restart</span></code></pre></div></div><div class=paragraph><p>Ha a jelenleg megnyitott kapcsolatok felbontása nélkül akarjuk újraindítani az Apache szervert, akkor ezt írjuk be:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl graceful</span></code></pre></div></div><div class=paragraph><p>Mindezekrõl az <a href="https://man.freebsd.org/cgi/man.cgi?query=apachectl&amp;sektion=8&amp;format=html">apachectl(8)</a> man oldalon találunk bõvebb leírást.</p></div><div class=paragraph><p>Amennyiben szükségünk lenne az Apache elindítására a rendszer indításakor, akkor a következõ sort vegyünk fel az <span class=filename>/etc/rc.conf</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>apache_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Az Apache 2.2 esetében:</p></div><div class="literalblock programlisting"><div class=content><pre>apache22_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Amikor az Apache <code>httpd</code> nevû programjának szeretnénk további paranccsori paramétereket átadni a rendszer indítása során, akkor ezeket így tudjuk megadni az <span class=filename>rc.conf</span> állományban:</p></div><div class="literalblock programlisting"><div class=content><pre>apache_flags=&#34;&#34;</pre></div></div><div class=paragraph><p>Most, miután a webszerverünk mûködik, a böngészõnkkel mindezt ellenõrizni is tudjuk a <code><a href=http://localhost/ class=bare>http://localhost/</a></code> cím beírásával. Ilyenkor az alapértelmezés szerinti <span class=filename>/usr/local/www/data/index.html</span> állomány tartalmát láthatjuk.</p></div></div><div class=sect2><h3 id=_virtuális_nevek>29.7.4. Virtuális nevek<a class=anchor href=#_virtuális_nevek></a></h3><div class=paragraph><p>Az Apache a virtuális nevek használatának két különbözõ módját ismeri. Ezek közül az elsõ módszer a név alapú virtualizáció (Name-based Virtual Hosting). Ilyenkor a kliens HTTP/1.1 fejlécébõl próbálja meg a szerver megállapítani a hivatkozási nevet. Segítségével több tartomány is osztozhat egyetlen IP-címen.</p></div><div class=paragraph><p>Az Apache név alapú virtualizációjának beállításához az alábbi beállítást kell hozzátennünk a <span class=filename>httpd.conf</span> állományhoz:</p></div><div class="literalblock programlisting"><div class=content><pre>NameVirtualHost *</pre></div></div><div class=paragraph><p>Ha a webszerverünk neve <code>www.tartomany.hu</code>, és hozzá egy <code>www.valamilyenmasiktartomany.hu</code> virtuális nevet akarunk megadni, akkor azt a következõképpen tehetjük meg a <span class=filename>httpd.conf</span> állományon belül:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&lt;VirtualHost <span class=k>*</span><span class=o>&gt;</span>
ServerName www.tartomany.hu
DocumentRoot /www/tartomany.hu
&lt;/VirtualHost&gt;

&lt;VirtualHost <span class=k>*</span><span class=o>&gt;</span>
ServerName www.valamilyenmasiktartomany.hu
DocumentRoot /www/valamilyenmasiktartomany.hu
&lt;/VirtualHost&gt;</code></pre></div></div><div class=paragraph><p>A címek és elérési utak helyére helyettesítsük be a használni kívánt címeket és elérési utakat.</p></div><div class=paragraph><p>A virtuális nevek beállításának további részleteivel kapcsolatosan keressük fel az Apache hivatalos dokumentációját a <a href=http://httpd.apache.org/docs/vhosts/>http://httpd.apache.org/docs/vhosts/</a> címen (angolul).</p></div></div><div class=sect2><h3 id=_apache_modulok>29.7.5. Apache-modulok<a class=anchor href=#_apache_modulok></a></h3><div class=paragraph><p>Az alap szerver képességeinek kiegészítéséhez több különbözõ Apache modul áll rendelkezésünkre. A FreeBSD Portgyûjteménye az Apache telepítése mellett lehetõséget ad a népszerûbb bõvítményeinek telepítésére is.</p></div><div class=sect3><h4 id=_mod_ssl>29.7.5.1. mod_ssl<a class=anchor href=#_mod_ssl></a></h4><div class=paragraph><p>A mod_ssl modul az OpenSSL könyvtár használatával valósít meg erõs titkosítást a biztonságos socket réteg második, illetve harmadik verziójával (Secure Sockets Layer, SSL v2/v3) és a biztonságos szállítási rétegbeli (Transport Layer Security v1) protokoll segítségével. Ez a modul mindent biztosít ahhoz, hogy a megfelelõ hatóságok által aláírt tanúsítványokat tudjunk kérni, és ezáltal egy védett webszervert futtassunk FreeBSD-n.</p></div><div class=paragraph><p>Ha még nem telepítettünk volna fel az Apache szervert, akkor a <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13-modssl/>www/apache13-modssl</a> porton keresztül a mod_ssl modullal együtt is fel tudjuk rakni az Apache 1.3.X változatát. Az SSL támogatása pedig már az Apache 2.X <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a> porton keresztül elérhetõ változataiban alapértelmezés szerint engedélyezett.</p></div></div><div class=sect3><h4 id=_kapcsolódás_nyelvekhez>29.7.5.2. Kapcsolódás nyelvekhez<a class=anchor href=#_kapcsolódás_nyelvekhez></a></h4><div class=paragraph><p>Mindegyik nagyobb szkriptnyelvhez létezik egy külön Apache-modul, amelyek segítségével komplett Apache-modulokat tudunk készíteni az adott nyelven. Gyakran a dinamikus honlapok is így próbálják a szerverbe épített belsõ értelmezõn keresztül a külsõ értelmezõ indításából és benne a szkriptek lefuttatásából fakadó költségeket megspórolni, ahogy errõl a következõ szakaszokban olvashatunk.</p></div></div></div><div class=sect2><h3 id=_dinamikus_honlapok>29.7.6. Dinamikus honlapok<a class=anchor href=#_dinamikus_honlapok></a></h3><div class=paragraph><p>Az utóbbi évtizedben egyre több vállalkozás fordult az internet felé bevételeik és részesedéseinek növelésének reményében, amivel egyre jobban megnõtt az igény a dinamikus honlapokra is. Miközben bizonyos cégek, mint például a Microsoft®, a saját fejlesztésû termékeikbe építettek be ehhez támogatást, addig a nyílt forrásokkal foglalkozó közösség sem maradt tétlen és felvette a kesztyût. A dinamikus tartalom létrehozásához többek közt Django, Ruby on Rails, a mod_perl és a mod_php modulok használhatóak.</p></div><div class=sect3><h4 id=_django>29.7.6.1. Django<a class=anchor href=#_django></a></h4><div class=paragraph><p>A Django egy BSD típusú licensszel rendelkezõ keretrendszer, amelynek használatával nagy teljesítményû és elegáns webes alkalmazásokat tudunk gyorsan kifejleszteni. Tartalmaz egy objektum-relációs leképezõt, így az adattípusokat Python-objektumokként tudjuk leírni, és ezekhez az objektumokhoz egy sokrétû, dinamikus adatbázis hozzáférést nyújtó alkalmazásfejlesztõi felületet, így a fejlesztõknek egyetlen SQL utasítást sem kell megírniuk. Találhatunk még benne továbbá egy bõvíthetõ sablonrendszert, amelynek köszönhetõen az alkalmazás belsõ mûködése elválasztható a HTML-beli megjelenésétõl.</p></div><div class=paragraph><p>A Django mûködéséhez a mod_python modulra, az Apache szerverre és egy tetszõlegesen választott SQL alapú adatbázisrendszerre van szükség. A hozzá tartozó FreeBSD port mindezeket automatikusan telepíti a megadott beállítások szerint.</p></div><div id=network-www-django-install class=exampleblock><div class=title>Példa 3. A Django telepítése az Apache, mod_python3 és a PostgreSQL használatával</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/www/py-django; make all install clean -DWITH_MOD_PYTHON3 -DWITH_POSTGRESQL</span></code></pre></div></div></div></div><div class=paragraph><p>Miután a Django és a hozzá szükséges komponensek felkerültek rendszerünkre, hozzunk létre egy könyvtárat a leendõ Django projektünknek és állítsuk be az Apache szervert, hogy az oldalunk belül a megadott linkekre a saját alkalmazásunkat hívja meg a beágyazott Python-értelmezõn keresztül.</p></div><div id=network-www-django-apache-config class=exampleblock><div class=title>Példa 4. Az Apache beállítása a Django és mod_python használatához</div><div class=content><div class=paragraph><p>A következõ sort kell hozzátennünk a <span class=filename>httpd.conf</span> állományhoz, hogy az Apache bizonyos linkeket a webes alkalmazás felé irányítson át:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&lt;Location <span class=s2>&#34;/&#34;</span><span class=o>&gt;</span>
    SetHandler python-program
    PythonPath <span class=s2>&#34;[&#39;/a/django/csomagok/helye/&#39;] + sys.path&#34;</span>
    PythonHandler django.core.handlers.modpython
    SetEnv DJANGO_SETTINGS_MODULE azoldalam.beallitasai
    PythonAutoReload On
    PythonDebug On
&lt;/Location&gt;</code></pre></div></div></div></div></div><div class=sect3><h4 id=_ruby_on_rails>29.7.6.2. Ruby on Rails<a class=anchor href=#_ruby_on_rails></a></h4><div class=paragraph><p>A Ruby on Rails egy olyan másik nyílt forráskódú keretrendszer, amivel lényegében egy teljes fejlesztõi készletet kapunk és amelyet kifejezetten arra élezték ki, hogy segítségével a webfejlesztõk sokkal gyorsabban tudjanak haladni és a komolyabb alkalmazások gyorsabb elkészítése se okozzon nekik gondot. A Portrgyûjteménybõl pillanatok alatt telepíthetõ.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/www/rubygem-rails; make all install clean</span></code></pre></div></div></div><div class=sect3><h4 id=_mod_perl>29.7.6.3. mod_perl<a class=anchor href=#_mod_perl></a></h4><div class=paragraph><p>Az Apache és Perl egyesítésén fáradozó projekt a Perl programozási nyelv és az Apache webszerver erejének összehangolásán dolgozik. A mod_perl modulon keresztül Perlben vagyunk képesek modulokat készíteni az Apache szerverhez. Ráadásul a szerverben egy belsõ állandó értelmezõ is található hozzá, ezzel igyekeznek megspórolni a külsõ értelmezõ és a Perl indításából keletkezõ többletköltségeket.</p></div><div class=paragraph><p>A mod_perl több különbözõ módon állítható munkába. A mod_perl használatához nem szabad elfelejtenünk, hogy a mod_perl 1.0-ás verziója csak az Apache 1.3 változatával mûködik, és a mod_perl 2.0-ás változata pedig csak az Apache 2.X változataival. A mod_perl 1.0 a <a class=package href=https://cgit.freebsd.org/ports/tree/www/mod_perl/>www/mod_perl</a> portból telepíthetõ, valamint a statikusan beépített változata a <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13-modperl/>www/apache13-modperl</a> portban található. A mod_perl 2.0 a <a class=package href=https://cgit.freebsd.org/ports/tree/www/mod_perl2/>www/mod_perl2</a> portból rakható fel.</p></div></div><div class=sect3><h4 id=_mod_php>29.7.6.4. mod_php<a class=anchor href=#_mod_php></a></h4><div class=paragraph><p>A PHP, vagy másik nevén "PHP, a hipertext feldolgozó" egy általános célú szkriptnyelv, amelyet kifejezetten honlapok fejlesztéséhez hoztak létre. A szabványos HTML ágyazható nyelv felépítésében a C, Java™ és Perl nyelveket ötvözi annak elérése érdekében, hogy ezzel segítse a fejlesztõket a dinamikusan generált oldalak minél gyorsabb megírásában.</p></div><div class=paragraph><p>A PHP5 támogatását úgy tudjuk hozzáadni az Apache webszerverhez, ha telepítjük a <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> portot.</p></div><div class=paragraph><p>Ha a <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> portot most telepítjük elõször, akkor a vele kapcsolatos beállításokat tartalmazó <code>OPTIONS</code> menü automatikusan megjelenik. Ha ezzel nem találkoznánk, mert például valamikor korábban már felraktuk volna a <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> portot, akkor a port könyvtárában következõ parancs kiadásával tudjuk újra visszahozni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make config</span></code></pre></div></div><div class=paragraph><p>A beállítások között jelöljük be az <code>APACHE</code> opciót, amelynek eredményeképpen létrejön az Apache webszerverhez használható mod_php5 betölthetõ modul.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A PHP4 modult még ma is rengeteg szerver használja több különbözõ okból (például kompatibilitási problémák vagy a már korábban kiadott tartalom miatt). Ha tehát a mod_php5 helyett inkább a mod_php4 modulra lenne szükségünk, akkor a <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php4/>lang/php4</a> portot használjuk. A <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php4/>lang/php4</a> portnál is megtalálhatjuk a <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> fordítási idejû beállításainak nagy részét.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Az iméntiek révén települnek és beállítódnak a dinamikus PHP alkalmazások támogatásához szükséges mouldok. Az <span class=filename>/usr/local/etc/apache/httpd.conf</span> állományban ellenõrizni is tudjuk, hogy az alábbi részek megjelentek-e:</p></div><div class="literalblock programlisting"><div class=content><pre>LoadModule php5_module        libexec/apache/libphp5.so</pre></div></div><div class="literalblock programlisting"><div class=content><pre>AddModule mod_php5.c
    &lt;IfModule mod_php5.c&gt;
        DirectoryIndex index.php index.html
    &lt;/IfModule&gt;
    &lt;IfModule mod_php5.c&gt;
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
    &lt;/IfModule&gt;</pre></div></div><div class=paragraph><p>Ahogy befejezõdött a mûvelet, a PHP modul betöltéséhez mindösszesen az <code>apachectl</code> paranccsal kell óvatosan újraindítanunk a webszervert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># apachectl graceful</span></code></pre></div></div><div class=paragraph><p>A PHP jövõbeni frissítéseihez már nem lesz szükségünk a <code>make config</code> parancsra, mivel a korábban kiválasztott <code>OPTIONS</code> menün belüli beállítasainkat a FreeBSD Portgyûjteményéhez tartozó keretrendszer automatikusan elmenti.</p></div><div class=paragraph><p>A PHP FreeBSD-ben megtalálható támogatása kifejezetten moduláris, ezért az alap telepítése igencsak korlátozott. A további elemek hozzáadásához a <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5-extensions/>lang/php5-extensions</a> portot tudjuk használni. A port egy menüvezérelt felületet nyújt a PHP különbözõ bõvítményeinek telepítéséhez. Az egyes bõvítményeket azonban a megfelelõ portok használatával is fel tudjuk rakni.</p></div><div class=paragraph><p>Például PHP5 modulhoz úgy tudunk támogatást adni a MySQL adatbázis szerverhez, ha telepítjük a <span class=filename>databases/php5-mysql</span> portot.</p></div><div class=paragraph><p>Miután telepítettünk egy bõvítményt, az Apache szerverrel újra be kell töltetnünk a megváltozott beállításokat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># apachectl graceful</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=network-ftp>29.8. Állományok átvitele (FTP)<a class=anchor href=#network-ftp></a></h2><div class=sectionbody><div class=sect2><h3 id=_áttekintés_3>29.8.1. Áttekintés<a class=anchor href=#_áttekintés_3></a></h3><div class=paragraph><p>Az adatállomány átviteli protokoll (File Transfer Protocol, FTP) a felhasználók számára lehetõséget ad az ún. FTP szerverekre állományokat feltölteni, illetve onnan állományokat letölteni. A FreeBSD alaprendszere is tartalmaz egy ilyen FTP szerverprogramot, ftpd néven. Ezért FreeBSD alatt egy FTP szerver beállítása meglehetõsen egyszerû.</p></div></div><div class=sect2><h3 id=_beállítás_2>29.8.2. Beállítás<a class=anchor href=#_beállítás_2></a></h3><div class=paragraph><p>A beállítás legfontosabb lépése, hogy eldöntsük milyen hozzáféréseken át lehet elérni az FTP szervert. Egy hétköznapi FreeBSD rendszerben rengeteg hozzáférés a különbözõ démonokhoz tartozik, de az ismeretlen felhasználók számára nem kellene megengednünk ezek használatát. Az <span class=filename>/etc/ftpusers</span> állományban szerepelnek azok a felhasználók, akik semmilyen módon nem érhetik el az FTP szolgáltatást. Alapértelmezés szerint itt találhatjuk az elõbb említett rendszerszintû hozzáféréseket is, de ide minden további nélkül felvehetjük azokat a felhasználókat, akiknél nem akarjuk engedni az FTP elérését.</p></div><div class=paragraph><p>Más esetekben elõfordulhat, hogy csak korlátozni akarjuk egyes felhasználók FTP elérését. Ezt az <span class=filename>/etc/ftpchroot</span> állományon keresztül tehetjük meg. Ebben az állományban a lekorlátozni kívánt felhasználókat és csoportokat írhatjuk bele. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5&amp;format=html">ftpchroot(5)</a> man oldalán olvashatjuk el ennek részleteit, ezért ennek pontos részleteit itt most nem tárgyaljuk.</p></div><div class=paragraph><p>Ha az FTP szerverünkhöz névtelen (anonim) hozzáférést is engedélyezni akarunk, akkor ahhoz elõször készítenünk kell egy <code>ftp</code> nevû felhasználót a FreeBSD rendszerünkben. A felhasználók ezután az <code>ftp</code> vagy <code>anonymous</code> nevek, valamint egy tetszõleges jelszó (ez a hagyományok szerint a felhasználó e-mail címe) használatával is képesek lesznek bejelentkezni. Az FTP szerver ezután a névtelen felhasználók esetében meghívja a <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=2&amp;format=html">chroot(2)</a> rendszerhívást, és ezzel lekorlátozza hozzáférésüket az <code>ftp</code> felhasználó könyvtárára.</p></div><div class=paragraph><p>Két szöveges állományban adhatunk meg a becsatlakozó FTP kliensek számára üdvözlõ üzeneteket. Az <span class=filename>/etc/ftpwelcome</span> állomány tartalmát még a bejelentkezés elõtt látni fogják a felhasználók, a sikeres bejelentkezést követõen pedig az <span class=filename>/etc/ftpmotd</span> állomány tartalmát látják. Vigyázzunk, mert ennek az állománynak már a bejelentkezési környezethez képest relatív az elérése, ezért a névtelen felhasználók esetében ez konkrétan az <span class=filename>~ftp/etc/ftpmotd</span> állomány lesz.</p></div><div class=paragraph><p>Ahogy beállítottuk az FTP szervert, az <span class=filename>/etc/inetd.conf</span> állományban is engedélyeznünk kell. Itt mindössze annyira lesz szükségünk, hogy eltávolítsuk a megjegyzést jelzõ "#" karaktert a már meglevõ ftpd sor elõl:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</pre></div></div><div class=paragraph><p>Ahogy arról már a <a href=#network-inetd-reread>Az inetd konfigurációs állományának újraolvasása</a> szót ejtett, az inetd beállításait újra be kell olvastatnunk a konfigurációs állomány megváltoztatása után. A <a href=#network-inetd-settings>Beállítások</a> írja le az inetd engedélyezésének részleteit.</p></div><div class=paragraph><p>Az ftpd önálló szerverként is elindítható. Ehhez mindössze elegendõ csak a megfelelõ változót beállítani az <span class=filename>/etc/rc.conf</span> állományban:</p></div><div class="literalblock programlisting"><div class=content><pre>ftpd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Miután megadtuk az iménti változót, a szerver el fog indulni a rendszer következõ indítása során. Szükség esetén természetesen <code>root</code> felhasználóként a következõ paranccsal is közvetlenül elindítható:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/ftpd start</span></code></pre></div></div><div class=paragraph><p>Most már be is tudunk jelentkezni az FTP szerverre:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ftp localhost</code></pre></div></div></div><div class=sect2><h3 id=_karbantartás>29.8.3. Karbantartás<a class=anchor href=#_karbantartás></a></h3><div class=paragraph><p>Az ftpd démon a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> használatával naplózza az üzeneteket. Alapértelmezés szerint a rendszernaplózó démon az FTP mûködésére vonatkozó üzeneteket az <span class=filename>/var/log/xferlog</span> állományba írja. Az FTP naplóinak helyét az <span class=filename>/etc/syslog.conf</span> állományban tudjuk módosítani:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp.info      /var/log/xferlog</pre></div></div><div class=paragraph><p>Legyünk körültekintõek a névtelen FTP szerverek üzemeltetésekor. Azt pedig kétszer is gondoljuk meg, hogy engedélyezzük-e a névtelen felhasználók számára állományok feltöltését, hiszen könnyen azon kaphatjuk magunkat, hogy az FTP oldalunk illegális állománycserék színterévé válik vagy esetleg valami sokkal rosszabb történik. Ha mindenképpen szükségünk lenne erre a lehetõségre, akkor állítsunk be olyan engedélyeket a feltöltött állományokra, hogy a többi névtelen felhasználó ezeket a tartalmuk tüzetes ellenõrzéséig ne is olvashassa.</p></div></div></div></div><div class=sect1><h2 id=network-samba>29.9. Állomány- és nyomtatási szolgáltatások Microsoft® Windows® kliensek számára (Samba)<a class=anchor href=#network-samba></a></h2><div class=sectionbody><div class=sect2><h3 id=_áttekintés_4>29.9.1. Áttekintés<a class=anchor href=#_áttekintés_4></a></h3><div class=paragraph><p>A Samba egy olyan elterjedt nyílt forráskódú szoftver, ami Microsoft® Windows® kliensek számára tesz lehetõvé állomány- és nyomtatási szolgáltatásokat. Az ilyen kliensek általa helyi meghajtóként képesek elérni a FreeBSD állományrendszerét, vagy helyi nyomtatóként a FreeBSD általt kezelt nyomtatókat.</p></div><div class=paragraph><p>A Samba csomagja általában megtalálható a FreeBSD telepítõeszközén. Ha a FreeBSD-vel együtt nem raktuk fel a Samba csomagját, akkor ezt késõbb <a class=package href=https://cgit.freebsd.org/ports/tree/net/samba3/>net/samba3</a> port vagy csomag telepítésével pótolhatjuk.</p></div></div><div class=sect2><h3 id=_beállítás_3>29.9.2. Beállítás<a class=anchor href=#_beállítás_3></a></h3><div class=paragraph><p>A Samba konfigurációs állománya a telepítés után <span class=filename>/usr/local/shared/examples/samba/smb.conf.default</span> néven található meg. Ezt kell lemásolnunk <span class=filename>/usr/local/etc/smb.conf</span> néven, amelyet aztán a Samba tényleges használata elõtt módosítanunk kell.</p></div><div class=paragraph><p>Az <span class=filename>smb.conf</span> állomány a Samba futásához használt beállításokat tartalmazza, mint például Windows® kliensek számára felkínált a nyomtatók és "megosztások" adatait. A Samba csomagban ezen kívül találhatunk még egy swat nevû webes eszközt, amellyel egyszerû módon tudjuk az <span class=filename>smb.conf</span> állományt állítgatni.</p></div><div class=sect3><h4 id=_a_samba_webes_adminisztrációs_eszköze_swat>29.9.2.1. A Samba webes adminisztrációs eszköze (SWAT)<a class=anchor href=#_a_samba_webes_adminisztrációs_eszköze_swat></a></h4><div class=paragraph><p>A Samba webes adminisztrációs segédeszköze (Samba Web Administration Tool, SWAT) az inetd démonon keresztül fut démonként. Ennek megfelelõn az <span class=filename>/etc/inetd.conf</span> állományban a következõ sort kell kivennünk megjegyzésbõl, mielõtt a swat segítségével megkezdenénk a Samba beállítását:</p></div><div class="literalblock programlisting"><div class=content><pre>swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</pre></div></div><div class=paragraph><p>Ahogy azt a <a href=#network-inetd-reread>Az inetd konfigurációs állományának újraolvasása</a> is mutatja, az inetd démont újra kell indítanunk a megváltozott konfigurációs állományának újbóli beolvasásához.</p></div><div class=paragraph><p>Miután az <span class=filename>inetd.conf</span> állományban a swat engedélyezésre került, a böngészõnk segítségével próbáljunk meg a <a href=http://localhost:901>http://localhost:901</a> címre csatlakozni. Elõször a rendszer <code>root</code> hozzáférésével kell bejelentkeznünk.</p></div><div class=paragraph><p>Miután sikeresen bejelentkeztünk a Samba beállításait tárgyaló lapra, el tudjuk olvasni a rendszer dokumentációját, vagy a <b class=menuref>Globals</b> fülre kattintva nekiláthatunk a beállítások elvégzésének. A <b class=menuref>Globals</b> részben található opciók az <span class=filename>/usr/local/etc/smb.conf</span> állomány <code>[global]</code> szekciójában található változókat tükrözik.</p></div></div><div class=sect3><h4 id=_általános_beállítások>29.9.2.2. Általános beállítások<a class=anchor href=#_általános_beállítások></a></h4><div class=paragraph><p>Akár a swat eszközzel, akár a <span class=filename>/usr/local/etc/smb.conf</span> közvetlen módosításával dolgozunk, a Samba beállítása során a következõkkel mindenképpen össze fogunk futni:</p></div><div class=dlist><dl><dt class=hdlist1><code>workgroup</code></dt><dd><p>A szervert elérni kívánó számítógépek által használt NT tartomány vagy munkacsoport neve.</p></dd><dt class=hdlist1><code>netbios name</code></dt><dd><p>A Samba szerver NetBIOS neve. Alapértelmezés szerint ez a név a gép hálózati nevének elsõ tagja.</p></dd><dt class=hdlist1><code>server string</code></dt><dd><p>Ez a szöveg jelenik meg akkor, ha például a <code>net view</code> paranccsal vagy valamilyen más hálózati segédprogrammal kérdezzük le a szerver beszédesebb leírását.</p></dd></dl></div></div><div class=sect3><h4 id=_biztonsági_beállítások>29.9.2.3. Biztonsági beállítások<a class=anchor href=#_biztonsági_beállítások></a></h4><div class=paragraph><p>A <span class=filename>/usr/local/etc/smb.conf</span> állományban a két legfontosabb beállítás a választott biztonsági modell és a kliensek felhasználói jelszavainak tárolásához használt formátum. Az alábbi direktívák vezérlik ezeket:</p></div><div class=dlist><dl><dt class=hdlist1><code>security</code></dt><dd><p>Itt a két leggyakoribb beállítás a <code>security = share</code> és a <code>security = user</code>. Ha a kliensek a FreeBSD gépen található felhasználói neveiket használják, akkor felhasználói szintû védelemre van szükségünk (tehát a user beállításra). Ez az alapértelmezett biztonsági házirend és ilyenkor a klienseknek elõször be kell jelentkezniük a megosztott erõforrások eléréséhez.</p><div class=paragraph><p>A megosztás (share) szintû védelem esetében, a klienseknek nem kell a szerveren érvényes felhasználói névvel és jelszóval rendelkezniük a megosztott erõforrások eléréséhez. Ez volt az alapbeállítás a Samba korábbi változataiban.</p></div></dd><dt class=hdlist1><code>passdb backend</code></dt><dd><p>A Samba számos különbözõ hitelesítési modellt ismer. A klienseket LDAP, NIS+, SQL adatbázis vagy esetleg egy módosított jelszó állománnyal is tudjuk hitelesíteni. Az alapértelmezett hitelesítési módszer a <code>smbpasswd</code>, így itt most ezzel foglalkozunk.</p></dd></dl></div><div class=paragraph><p>Ha feltesszük, hogy az alapértelmezett <code>smbpasswd</code> formátumot választottuk, akkor a Samba úgy fogja tudni hitelesíteni a klienseket, ha elõtte létrehozzuk a <span class=filename>/usr/local/private/smbpasswd</span> állományt. Ha a Windows®-os kliensekkel is el akarjuk érni a UNIX®-os felhasználói hozzáféréseinket, akkor használjuk a következõ parancsot:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># smbpasswd -a felhasználónév</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A Samba a 3.0.23c verziójától kezdõdõen a hitelesítéshez szükséges állományokat a <span class=filename>/usr/local/etc/samba</span> könyvtárban tárolja. A felhasználói hozzáférések hozzáadására innentõl már a <code>tdbsam</code> parancs használata javasolt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pdbedit -a -u felhasználónév</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>A <a href=http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/>hivatalos Samba HOGYAN</a> ezekrõl a beállításokról szolgál további információkkal (angolul). Viszont az itt vázolt alapok viszont már elegendõek a Samba elindításához.</p></div></div></div><div class=sect2><h3 id=_a_samba_elindítása>29.9.3. A Samba elindítása<a class=anchor href=#_a_samba_elindítása></a></h3><div class=paragraph><p>A <a class=package href=https://cgit.freebsd.org/ports/tree/net/samba3/>net/samba3</a> port a Samba irányítására egy új indító szkriptet tartalmaz. A szkript engedélyezéséhez, tehát általa a Samba elindításának, leállításának és újraindításának lehetõvé tételéhez vegyük fel a következõ sort az <span class=filename>/etc/rc.conf</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>samba_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Ha még finomabb irányításra vágyunk:</p></div><div class="literalblock programlisting"><div class=content><pre>nmbd_enable=&#34;YES&#34;</pre></div></div><div class="literalblock programlisting"><div class=content><pre>smbd_enable=&#34;YES&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ezzel egyben a rendszer indításakor automatikusan be is indítjuk a Samba szolgáltatást.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A Samba a következõkkel bármikor elindítható:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/etc/rc.d/samba start</span>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</code></pre></div></div><div class=paragraph><p>Az rc szkriptekkel kapcsolatban a <a href=../config/#configtuning-rcd>Az rc használata FreeBSD alatt</a>t ajánljuk elolvasásra.</p></div><div class=paragraph><p>A Samba jelen pillanatban három különálló démonból áll. Láthatjuk is, hogy az nmbd és smbd démonokat elindította a <span class=filename>samba</span> szkript. Ha az <span class=filename>smb.conf</span> állományban engedélyeztük a winbind névfeloldási szolgáltatást is, akkor láthatjuk, hogy ilyenkor a winbindd démon is elindul.</p></div><div class=paragraph><p>A Samba így állítható le akármikor:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/etc/rc.d/samba stop</span></code></pre></div></div><div class=paragraph><p>A Samba egy összetett szoftvercsomag, amely a Microsoft® Windows® hálózatokkal kapcsolatos széles körû együttmûködést tesz lehetõvé. Az általa felkínált alapvetõ lehetõségeken túl a többit a <a href=http://www.samba.org>http://www.samba.org</a> honlapon ismerhetjük meg (angolul).</p></div></div></div></div><div class=sect1><h2 id=network-ntp>29.10. Az órák egyeztetése az NTP használatával<a class=anchor href=#network-ntp></a></h2><div class=sectionbody><div class=sect2><h3 id=_áttekintés_5>29.10.1. Áttekintés<a class=anchor href=#_áttekintés_5></a></h3><div class=paragraph><p>Idõvel a számítógép órája hajlamos elmászni. A hálózati idõ protokoll (Network Time Protocol, NTP) az egyik módja az óránk pontosan tartásának.</p></div><div class=paragraph><p>Rengeteg internetes szolgáltatás elvárja vagy éppen elõnyben részesíti a számítógép órájának pontosságát. Például egy webszervertõl megkérdezhetik, hogy egy állományt adott ideje módosítottak-e. A helyi hálózatban az egyazon állományszerveren megosztott állományok ellentmondásmentes dátumozása érdekében szinte elengedhetetlen az órák szinkronizálása. Az olyan szolgáltatások, mint a <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> is komolyan építkeznek a pontosan járó rendszerórára, amikor egy adott pillanatban kell lefuttatniuk parancsokat.</p></div><div class=paragraph><p>A FreeBSD alapból az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> NTP szervert tartalmazza, amellyel más NTP szerverek segítségével tudjuk beállítani gépünk óráját, vagy éppen idõvel kapcsolatos információkat szolgáltatni másoknak.</p></div></div><div class=sect2><h3 id=_a_megfelelõ_ntp_szerverek_kiválasztása>29.10.2. A megfelelõ NTP szerverek kiválasztása<a class=anchor href=#_a_megfelelõ_ntp_szerverek_kiválasztása></a></h3><div class=paragraph><p>Az óránk egyeztetéséhez egy vagy több NTP szerverre lesz szükségünk. Elõfordulhat, hogy a hálózati rendszergazdánk vagy az internet-szolgáltatónk már beállított egy ilyen szervert erre a célra. Ezzel kapcsolatban olvassuk el a megfelelõ leírásokat. A <a href=http://ntp.isc.org/bin/view/Servers/WebHome>nyilvánosan elérhetõ NTP szerverekrõl készült egy lista</a>, ahonnan könnyedén ki tudjuk keresni a számunkra leginkább megfelelõ (hozzánk legközelebbi) szervert. Ne hagyjuk figyelmen kívül a szerverre vonatkozó házirendet és kérjünk engedélyt a használatához, amennyiben ez szükséges.</p></div><div class=paragraph><p>Több, egymással közvetlen kapcsolatban nem álló NTP szerver választásával járunk jól, ha netalán az egyikük váratlanul elérhetetlenné vagy az órája pontatlanná válna. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> a visszakapott válaszokat intelligensen használja fel, mivel esetükben a megbízható szervereket részesíti elõnyben.</p></div></div><div class=sect2><h3 id=_a_gépünk_beállítása>29.10.3. A gépünk beállítása<a class=anchor href=#_a_gépünk_beállítása></a></h3><div class=sect3><h4 id=_alapvetõ_beállítások>29.10.3.1. Alapvetõ beállítások<a class=anchor href=#_alapvetõ_beállítások></a></h4><div class=paragraph><p>Ha a számítógépünk indításakor akarjuk egyeztetni az óránkat, akkor erre az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> nevû programot használhatjuk. Ez olyan asztali gépek számára megfelelõ választás, amelyeket gyakran indítanak újra és csak idõnként kell szinkronizálnunk. A legtöbb gépnek viszont az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> használatára van szüksége.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> elindítása olyan esetekben is hasznos, ahol az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> is fut. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> az órát fokozatosan állítja, ellenben az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> az eltérés mértékétõl és irányától függetlenül egyszerûen átállítja a gép óráját a pontos idõre.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> elindítását úgy tudjuk engedélyezni a rendszer indításakor, ha az <span class=filename>/etc/rc.conf</span> állományba berakjuk az <code>ntpdate_enable="YES"</code> sort. Emellett még <code>ntpdate_flags</code> változóban meg kell adnunk az alkalmazott beállítások mellett azokat a szervereket, amelyekkel szinkronizálni akarunk.</p></div></div><div class=sect3><h4 id=_általános_beállítások_2>29.10.3.2. Általános beállítások<a class=anchor href=#_általános_beállítások_2></a></h4><div class=paragraph><p>Az NTP az <span class=filename>/etc/ntp.conf</span> állományon keresztül állítható, amelyek felépítését az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a> man oldal tárgyalja. Íme erre egy egyszerû példa:</p></div><div class="literalblock programlisting"><div class=content><pre>server ntplocal.minta.com prefer
server timeserver.minta.org
server ntp2a.minta.net

driftfile /var/db/ntp.drift</pre></div></div><div class=paragraph><p>A <code>server</code> beállítás adja meg az egyeztetéshez használt szervereket, soronként egyet. Ha egy szerver mellett szerepel még a <code>prefer</code> paraméter is, ahogy azt a példában a <code>ntplocal.minta.com</code> mellett láthattuk, akkor a többivel szemben azt a szervert fogjuk elõnyben részesíteni. Az így kiemelt szervertõl érkezõ választ abban az esetben viszont eldobjuk, hogy a többi szervertõl kapott válasz jelentõs mértékben eltér tõle. Minden más esetben a õ válasza lesz a mérvadó. A <code>prefer</code> paramétert általában olyan NTP szerverekhez használják, amelyek közismerten nagy pontosságúak, tehát például külön erre a célra szánt felügyeleti eszközt is tartalmaznak.</p></div><div class=paragraph><p>A <code>driftfile</code> beállítással azt az állományt adjuk meg, amiben a rendszeróra frekvencia eltolódásait tároljuk. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> program ezzel ellensúlyozza automatikusan az óra természetes elmászását, ezáltal lehetõvé téve, hogy egy viszonylag pontos idõt kapjuk még abban az esetben is, amikor egy kis idõre külsõ idõforrások nélkül maradnánk.</p></div><div class=paragraph><p>A <code>driftfile</code> beállítással egyben azt az állományt jelöljük ki, amely az NTP szervertõl kapott korábbi válaszokat tárolja. Ez az NTP mûködéséhez szükséges belsõ adatokat tartalmaz, ezért semmilyen más programnak nem szabad módosítania.</p></div></div><div class=sect3><h4 id=_a_szerverünk_elérésének_szabályozása>29.10.3.3. A szerverünk elérésének szabályozása<a class=anchor href=#_a_szerverünk_elérésének_szabályozása></a></h4><div class=paragraph><p>Alapértelmezés szerint az NTP szerverünket bárki képes elérni az interneten. Az <span class=filename>/etc/ntp.conf</span> állományban szereplõ <code>restrict</code> beállítás segítségével azonban meg tudjuk mondani, milyen gépek érhetik el a szerverünket.</p></div><div class=paragraph><p>Ha az NTP szerverünk felé mindenféle próbálkozást el akarunk utasítani, akkor az <span class=filename>/etc/ntp.conf</span> állományba a következõ sort kell felvennünk:</p></div><div class="literalblock programlisting"><div class=content><pre>restrict default ignore</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ezzel egyben azonban a helyi beállításainkban szereplõ szerverek elérését is megakadályozzuk. Ha külsõ NTP szerverekkel is szeretnénk szinkronizálni, akkor itt is engedélyezünk kell ezeket. Errõl bõvebben lásd az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a> man oldalon.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ha csak a belsõ hálózatunkban levõ gépek számára szeretnénk elérhetõvé tenni az órák egyeztetését, de sem a szerver állapotának módosítását nem engedélyezzük, sem pedig azt, hogy a vele egyenrangú szerverekkel szinkronizáljon, akkor az iménti helyett a</p></div><div class="literalblock programlisting"><div class=content><pre>restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</pre></div></div><div class=paragraph><p>sort írjuk bele, ahol a <code>192.168.1.0</code> a belsõ hálózatunk IP-címe és a <code>255.255.255.0</code> a hozzá tartozó hálózati maszk.</p></div><div class=paragraph><p>Az <span class=filename>/etc/ntp.conf</span> több <code>restrict</code> típusú beállítást is tartalmazhat. Ennek részleteirõl az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a> man oldalon, az <code>Access Control Support</code> címû szakaszban olvashatunk.</p></div></div></div><div class=sect2><h3 id=_az_ntp_futtatása>29.10.4. Az NTP futtatása<a class=anchor href=#_az_ntp_futtatása></a></h3><div class=paragraph><p>Úgy tudjuk az NTP szervert elindítani a rendszerünkkel együtt, ha az <span class=filename>/etc/rc.conf</span> állományban szerepeltetjük az <code>ntpd_enable="YES"</code> sort. Ha az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> számára további beállításokat is át akarunk adni, akkor az <span class=filename>/etc/rc.conf</span> állományban adjuk meg az <code>ntpd_flags</code> paramétert.</p></div><div class=paragraph><p>Ha a gépünk újraindítása nélkül akarjuk elindítani a szerver, akkor az <code>ntpd</code> parancsot adjuk ki az <span class=filename>/etc/rc.conf</span> állományban a <code>ntpd_flags</code> változóhoz megadott paraméterekkel. Mint például:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ntpd -p /var/run/ntpd.pid</span></code></pre></div></div></div><div class=sect2><h3 id=_az_ntpd_használati_idõleges_internet_csatlakozással>29.10.5. Az ntpd használati idõleges internet csatlakozással<a class=anchor href=#_az_ntpd_használati_idõleges_internet_csatlakozással></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> program megfelelõ mûködéséhez nem szükséges állandó internet kapcsolat. Ha azonban igény szerinti tárcsázással építjünk fel ideiglenes kapcsolatot, akkor érdemes letiltani az NTP forgalmát, nehogy feleslegesen aktiválja vagy tartsa életben a vonalat. Ha PPP típusú kapcsolatunk van, akkor az <span class=filename>/etc/ppp/ppp.conf</span> állományban a <code>filter</code> direktívával tudjuk ezt leszabályozni. Például:</p></div><div class="literalblock programlisting"><div class=content><pre> set filter dial 0 deny udp src eq 123
 # Nem engedjük az NTP által küldött adatoknak, hogy tárcsázást
 # kezdeményezzenek:
 set filter dial 1 permit 0 0
 set filter alive 0 deny udp src eq 123
 # Nem engedjük az NTP adatainak, hogy fenntartsák a kapcsolatot:
 set filter alive 1 deny udp dst eq 123
 set filter alive 2 permit 0/0 0/0</pre></div></div><div class=paragraph><p>Mindenezekrõl részletesebb felvilágosítást a <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> man oldal <code>PACKET FILTERING</code> címû szakaszában és a <span class=filename>/usr/shared/examples/ppp/</span> könyvtárban található példákban kaphatunk.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Egyes internet-szolgáltatók blokkolják az alacsonyabb portokat, ezáltal az NTP nem használható, mivel a válaszok nem fogják elérni a gépünket.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_további_olvasnivalók_2>29.10.6. További olvasnivalók<a class=anchor href=#_további_olvasnivalók_2></a></h3><div class=paragraph><p>Az NTP szerver dokumentációja HTML formátumban a <span class=filename>/usr/shared/doc/ntp/</span> könyvtárban található.</p></div></div></div></div><div class=sect1><h2 id=network-syslogd>29.11. Távoli gépek naplózása <code>syslogd</code> használatával<a class=anchor href=#network-syslogd></a></h2><div class=sectionbody><div class=paragraph><p>A rendszernaplókkal kapcsolatos mûveletek egyaránt fontosak a biztonság és a karbantartás szempontjából. Ha közepes vagy nagyobb méretû, esetleg különbözõ típusú hálózatokban adminisztrálunk több gépet, akkor könnyen átláthatatlanná válhat a naplók rendszeres felügyelete. Ilyen helyzetekben a távoli naplózás beállításával az egész folyamatot sokkal kényelmesebbé tehetjük.</p></div><div class=paragraph><p>Némileg képesek vagyunk enyhíteni a naplóállományok kezelésének terhét, ha egyetlen központi szerverre küldjük át az adatokat. Ekkor a FreeBSD alaprendszerében megtalálható alapeszközökkel, mint például a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> vagy a <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> felhasználásával egyetlen helyen be tudjuk állítani a naplók összegyûjtését, összefésülését és cseréjét. A most következõ példa konfigurációban az <code>A</code> gép, a <code>naploszerver.minta.com</code> fogja gyûjteni a helyi hálózatról érkezõ naplóinformációkat. A <code>B</code> gép, a <code>naplokliens.minta.com</code> pedig a szervernek küldi a naplózandó adatokat. Éles környezetben mind a két gépnek rendelkeznie kell megfelelõ DNS bejegyzésekkel, vagy legalább szerepelniük kell egymás <span class=filename>/etc/hosts</span> állományaiban. Ha ezt elmulasztjuk, a szerver nem lesz hajlandó adatokat fogadni.</p></div><div class=sect2><h3 id=_a_naplószerver_beállítása>29.11.1. A naplószerver beállítása<a class=anchor href=#_a_naplószerver_beállítása></a></h3><div class=paragraph><p>A naplószerverek olyan gépek, amelyeket úgy állítottunk be, hogy naplózási információkat tudjanak fogadni távoli számítógépekrõl. A legtöbb esetben így egyszerûsíteni tudunk a konfiguráción, vagy olykor egyszerûen csak hasznos, ha ezt a megoldást alkalmazzuk. Függetlenül attól, hogy miért használjuk, a továbblépés elõtt néhány elõkészületet meg kell tennünk.</p></div><div class=paragraph><p>Egy rendesen beállított naplószervernek legalább a következõ követelményeknek kell eleget tennie:</p></div><div class=ulist><ul><li><p>az 514-es UDP portot engedélyezni kell mind a kliensen, mind pedig a szerveren futó tûzfal szabályrendszerében;</p></li><li><p>a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> képes legyen a távoli kliens gépekrõl érkezõ üzeneteket fogadni;</p></li><li><p>a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> szervernek és az összes kliensnek rendelkeznie kell érvényes DNS (közvetlen és inverz) bejegyzésekkel vagy szerepelnie kell az <span class=filename>/etc/hosts</span> állományban.</p></li></ul></div><div class=paragraph><p>A naplószerver beállításához mindegyik klienst fel kell vennünk az <span class=filename>/etc/syslog.conf</span> állományba, valamint meg kell adnunk a megfelelõ funkciót (facility):</p></div><div class="literalblock programlisting"><div class=content><pre>+naplokliens.minta.com
*.*     /var/log/naplokliens.log</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a> man oldalán megtalálhatjuk a különbözõ támogatott és elérhetõ <em>funkciókat</em>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Miután beállítottuk, az összes adott funkcióhoz tartozó üzenet az elõbb megadott állományba (<span class=filename>/var/log/naplokliens.log</span>) fog kerülni.</p></div><div class=paragraph><p>A szerveren továbbá meg kell adnunk a következõ sort az <span class=filename>/etc/rc.conf</span> állományban:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_enable=&#34;YES&#34;
syslogd_flags=&#34;-a naplokliens.minta.com -vv&#34;</pre></div></div><div class=paragraph><p>Az elsõ sorral engedélyezzük a <code>syslogd</code> elindítását a rendszerindítás során, majd a második sorral engedélyezzük, hogy a kliens naplózni tudjon a szerverre. Itt még látható a <code>-vv</code> opció, amellyel a naplózott üzenetek részletességét tudjuk növelni. Ennek nagyon fontos a szerepe a naplózási funkciók behangolásakor, mivel így a rendszergazdák pontosan láthatják milyen típusú üzenetek milyen funkcióval kerültek rögzítésre a naplóban.</p></div><div class=paragraph><p>Befejezésképpen hozzuk létre a naplóállományt. Teljesen mindegy, hogy erre milyen megoldást alkalmazunk, például a <a href="https://man.freebsd.org/cgi/man.cgi?query=touch&amp;sektion=1&amp;format=html">touch(1)</a> remekül megfelel:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/log/naplokliens.log</span></code></pre></div></div><div class=paragraph><p>Ezután indítsuk újra és ellenõrizzük a <code>syslogd</code> démont:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/syslogd restart</span>
<span class=c># pgrep syslog</span></code></pre></div></div><div class=paragraph><p>Ha válaszul megkapjuk a futó démon azonosítóját, akkor sikerült újraindítanunk, elkezdhetjük a kliens beállítását. Ha valamiért nem indult volna újra a szerver, az <span class=filename>/var/log/messages</span> állományból próbáljuk meg kideríteni az okát.</p></div></div><div class=sect2><h3 id=_a_naplókliens_beállítása>29.11.2. A naplókliens beállítása<a class=anchor href=#_a_naplókliens_beállítása></a></h3><div class=paragraph><p>A naplókliens az a gép, amely egy helyi naplópéldány karbantartása mellett továbbküldni a naplózandó információkat egy naplószervernek.</p></div><div class=paragraph><p>Hasonlóan a naplószerverekhez, a klienseknek is teljesítenie bizonyos alapvetõ elvárásokat:</p></div><div class=ulist><ul><li><p>a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> démon küldjön bizonyos típusú üzeneteket a naplószervernek, amely ezeket pedig képes legyen fogadni;</p></li><li><p>a hozzá tartozó tûzfal engedje át a forgalmat az 514-es UDP porton;</p></li><li><p>rendelkezzen mind közvetlen, mind pedig inverz DNS bejegyzéssel, vagy szerepeljenek az <span class=filename>/etc/hosts</span> állományban.</p></li></ul></div><div class=paragraph><p>A kliens beállítása sokkal egyszerûbb a szerverhez képest. A kliensen adjuk hozzá a következõ sorokat az <span class=filename>/etc/rc.conf</span> állományhoz:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_enabled=&#34;YES&#34;
syslogd_flags=&#34;-s -vv&#34;</pre></div></div><div class=paragraph><p>A szerver beállításaihoz hasonlóan itt is engedélyezzük a <code>syslogd</code> démont és megnöveljük a naplózott üzenetek részletességét. A <code>-s</code> kapcsolóval pedig megakadályozzuk, hogy a kliens más gépekrõl is hajlandó legyen naplóüzeneteket elfogadni.</p></div><div class=paragraph><p>A funkciók a rendszernek azon részét írják le, amelyhez létrejön az adott üzenet. Tehát például az <code>ftp</code> és <code>ipfw</code> egyaránt ilyen funkciók. Amikor keletkezik egy naplóüzenet valamelyikükhöz, általában megjelenik a nevük. A funkciókhoz tartozik még egy prioritás vagy szint is, amellyel az adott üzenet fontosságát jelzik. Ezek közül a leggyakoribb a <code>warning</code> (mint "figyelmeztetés") és <code>info</code> (mint "információ"). A használható funkciók és a hozzájuk tartozó prioritások teljes listáját a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> man oldalán olvashatjuk.</p></div><div class=paragraph><p>A naplószervert meg kell adnunk a kliens <span class=filename>/etc/syslog.conf</span> állományában. Itt a <code>@</code> szimbólummal jelezzük, hogy az adatokat egy távoli szerverre szeretnénk továbbküldeni, valahogy így:</p></div><div class="literalblock programlisting"><div class=content><pre>*.*               @naploszerver.minta.com</pre></div></div><div class=paragraph><p>Ezután a beállítás érvényesítéséhez újra kell indítanunk a <code>syslogd</code> démont:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/syslogd restart</span></code></pre></div></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=logger&amp;sektion=1&amp;format=html">logger(1)</a> használatával próbáljuk ki a kliensrõl a aplóüzenetek hálózaton keresztüli küldését, és küldjünk valamit a <code>syslogd</code> démonnak:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># logger &#34;Udvozlet a naplokliensrol&#34;</span></code></pre></div></div><div class=paragraph><p>A parancs kiadása után az üzenetnek mind a kliens, mind pedig a szerver <span class=filename>/var/log/messages</span> állományában meg kell jelennie.</p></div></div><div class=sect2><h3 id=_hibakeresés>29.11.3. Hibakeresés<a class=anchor href=#_hibakeresés></a></h3><div class=paragraph><p>Elõfordulhat, hogy a naplószerver valamiért nem kapja meg rendesen az üzeneteket, ezért valamilyen módon meg kell keresnünk a hiba okát. Ez több minden lehet, de általában két leggyakoribb ok valamilyen hálózati kapcsolódási vagy DNS beállítási hiba. Ezek teszteléséhez gondoskodjunk róla, hogy a gépek kölcsönösen elérhetõek egymásról az <span class=filename>/etc/rc.conf</span> állományban megadott hálózati nevük szerint. Ha ezzel látszólag minden rendben van, akkor próbáljuk meg módosítani a <code>syslogd_flags</code> értékét az <span class=filename>/etc/rc.conf</span> állományban.</p></div><div class=paragraph><p>A most következõ példában a <span class=filename>/var/log/naplokliens.log</span> teljesen üres, illetve a <span class=filename>/var/log/messages</span> állomány semmilyen hibára utaló okot nem tartalmaz. A hibakereséshez még több információt a <code>syslogd_flags</code> átírásával tudunk kérni:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_flags=&#34;-d -a naploklien.minta.com -vv&#34;</pre></div></div><div class=paragraph><p>Természetesen ne felejtsük el újraindítani a szervert:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/syslogd restart</span></code></pre></div></div><div class=paragraph><p>A démon újraindítása után közvetlenül az alábbiakhoz hasonló üzenetek árasztják el a képernyõt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>logmsg: pri 56, flags 4, from naploszerver.minta.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from naploszerver.minta.com, msg syslogd: kernel boot file is /boot/kernel/kernel
Logging to FILE /var/log/messages
syslogd: kernel boot file is /boot/kernel/kernel
cvthname<span class=o>(</span>192.168.1.10<span class=o>)</span>
validate: dgram from IP 192.168.1.10, port 514, name naplokliens.minta.com<span class=p>;</span>
rejected <span class=k>in </span>rule 0 due to name mismatch.</code></pre></div></div><div class=paragraph><p>A diagnosztikai üzeneteket végigolvasva nyilvánvaló válik, hogy azért dobja el az üzeneteket a szerver, mert nem megfelelõ a gép neve. Miután átnézzük a beállításainkat, felfedezhetünk az <span class=filename>/etc/rc.conf</span> állományban egy apró hibát:</p></div><div class="literalblock programlisting"><div class=content><pre>syslogd_flags=&#34;-d -a naploklien.minta.com -vv&#34;</pre></div></div><div class=paragraph><p>Láthatjuk, hogy ebben a sorban a <code>naplokliens</code> névnek kellene szerepelni, nem pedig a <code>naploklien</code> névnek. Miután elvégeztük a szükséges javításokat, indítsuk újra a szervert és vizsgáljuk meg az eredményt:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/syslogd restart</span>
logmsg: pri 56, flags 4, from naploszerver.minta.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from naploszerver.minta.com, msg syslogd: kernel boot file is /boot/kernel/kernel
syslogd: kernel boot file is /boot/kernel/kernel
logmsg: pri 166, flags 17, from naploszerver.minta.com, msg Dec 10 20:55:02 &lt;syslog.err&gt; naploszerver.minta.com syslogd: exiting on signal 2
cvthname<span class=o>(</span>192.168.1.10<span class=o>)</span>
validate: dgram from IP 192.168.1.10, port 514, name naplokliens.minta.com<span class=p>;</span>
accepted <span class=k>in </span>rule 0.
logmsg: pri 15, flags 0, from naplokliens.minta.com, msg Dec 11 02:01:28 pgj: Masodik teszt uzenet
Logging to FILE /var/log/naplokliens.log
Logging to FILE /var/log/messages</code></pre></div></div><div class=paragraph><p>Itt már minden üzenet rendben megérkezett és a megfelelõ állományokba került (a <span class=filename>/var/log/messages</span> a kliensen, és a <span class=filename>/var/log/naplokliens.log</span> a szerveren)).</p></div></div><div class=sect2><h3 id=_biztonsági_megfontolások>29.11.4. Biztonsági megfontolások<a class=anchor href=#_biztonsági_megfontolások></a></h3><div class=paragraph><p>Mint minden hálózati szolgáltatás esetén, ilyenkor is figyelembe kell vennünk bizonyos biztonsági megfontolásokat a tényleges konfiguráció kiépítése elõtt. Olykor elõfordulhat, hogy a naplók különbözõ kényes információkat tartalmaznak, mint például a helyi rendszeren futó szolgáltatások nevei, felhasználói nevek vagy egyéb konfigurációs adatok. A kliens és a szerver között hálózaton utazó adatok viszont se nem titkosítottak, se nem jelszóval védettek. Ha titkosítást szeretnénk használni, akkor javasoljuk például a <a class=package href=https://cgit.freebsd.org/ports/tree/security/stunnel/>security/stunnel</a> portot, amellyel egy titkosított tunnelen keresztül tudunk adatokat küldeni a hálózaton.</p></div><div class=paragraph><p>A helyi rendszer biztonságának szavatolása is fontos lehet. A naplók sem a használat során, sem pedig a lecserélésük után nem kerülnek titkosításra. Emiatt a helyi rendszerhez hozzáférõ felhasználók kedvükre nyerhetnek ki belõlük a rendszerünket érintõ konfigurációs információkat. Ezért ilyenkor nagyon fontos, hogy mindig a megfelelõ engedélyeket állítsuk be a naplókra. A <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> segédprogrammal be tudjuk állítani a frissen létrehozott és a lecserélt naplók engedélyeit. Tehát könnyen megakadályozhatjuk a helyi felhasználók kíváncsiskodását, ha itt a naplók engedélyeit például a <code>600</code> kóddal adjuk meg.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 2024. március 9. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/hu/books/handbook/mail class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/hu/books/handbook/firewalls class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#network-servers-synopsis>29.1. Áttekintés</a></li><li><a href=#network-inetd>29.2. Az inetd"szuperszerver"</a></li><li><a href=#network-nfs>29.3. A hálózati állományrendszer (NFS)</a></li><li><a href=#network-nis>29.4. Hálózati információs rendszer (NIS/YP)</a></li><li><a href=#network-dhcp>29.5. A hálózat automatikus beállítása (DHCP)</a></li><li><a href=#network-dns>29.6. Névfeloldás (DNS)</a></li><li><a href=#network-apache>29.7. Az Apache webszerver</a></li><li><a href=#network-ftp>29.8. Állományok átvitele (FTP)</a></li><li><a href=#network-samba>29.9. Állomány- és nyomtatási szolgáltatások Microsoft® Windows® kliensek számára (Samba)</a></li><li><a href=#network-ntp>29.10. Az órák egyeztetése az NTP használatával</a></li><li><a href=#network-syslogd>29.11. Távoli gépek naplózása <code>syslogd</code> használatával</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/hu/books/handbook/handbook_hu.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/hu/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/hu/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>Hungarian</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/hu class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/hu/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>