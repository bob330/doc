<!doctype html><html class=theme-light lang=hu><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/hu/books/handbook/firewalls/><title>30. Fejezet - Tűzfalak | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="30. Fejezet - Tűzfalak"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="hu"><meta property="og:url" content="http://172.16.201.134:1313/hu/books/handbook/firewalls/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/hu\/books\/handbook\/firewalls\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/hu>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/hu/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/hu/books>Books</a></li><li><a href=http://172.16.201.134:1313/hu/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/hu/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=hu>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/preface/>Előszó</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-audience>Kiknek szánjuk ezt a könyvet</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes-from3>Változtatások a harmadik kiadás óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes-from2>Változtatások a második kiadás (2004) óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-changes>Változtatások az elsõ kiadás (2001) óta</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-overview>A könyv felépítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-conv>A könyvben alkalmazott konvenciók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/preface/#preface-acknowledgements>Köszönetnyilvánítás</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/parti/>I. Rész Bevezetés</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/>1. Fejezet - Bemutatkozás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#introduction-synopsis>1.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#nutshell>1.2. Üdvözöljük a FreeBSD-ben!</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/introduction/#history>1.3. A FreeBSD Projektrõl</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/install/>2. Fejezet - A FreeBSD telepítése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-synopsis>2.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-hardware>2.2. Hardverkövetelmények</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-pre>2.3. A telepítés elõtt elvégzendõ feladatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-start>2.4. A telepítés megkezdése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#using-sysinstall>2.5. A sysinstall bemutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-steps>2.6. Lemezterület lefoglalása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-choosing>2.7. A telepítendõ összetevõk kiválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-media>2.8. A telepítés eszközének kiválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-final-warning>2.9. A telepítés véglegesítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-post>2.10. A telepítés után</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-trouble>2.11. Hibakeresés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-advanced>2.12. Telepítési útmutató haladóknak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/install/#install-diff-media>2.13. Saját telepítõeszköz elkészítése</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/basics/>3. Fejezet - A UNIX alapjai</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-synopsis>3.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#consoles>3.2. Virtuális konzolok és terminálok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#permissions>3.3. Engedélyek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#dirstructure>3.4. A könyvtárak elrendezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#disk-organization>3.5. A lemezek szervezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#mount-unmount>3.6. Állományrendszerek csatlakoztatása és leválasztása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-processes>3.7. Folyamatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-daemons>3.8. Démonok, jelzések és a futó programok leállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#shells>3.9. Parancsértelmezõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#editors>3.10. Szövegszerkesztõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-devices>3.11. Eszközök és eszközleírók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#binary-formats>3.12. Bináris formátumok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/basics/#basics-more-information>3.13. Bõvebben olvashatunk…​</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/ports/>4. Fejezet - Alkalmazások telepítése: csomagok és portok</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-synopsis>4.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-overview>4.2. Az alkalmazások telepítésének összefoglalása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-finding-applications>4.3. A számunkra szükséges alkalmazások felkutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#packages-using>4.4. A csomagrendszer használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-using>4.5. A Portgyûjtemény használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-nextsteps>4.6. Telepítés utáni teendõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ports/#ports-broken>4.7. Teendõ a sérült portokkal</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/x11/>5. Fejezet - Az X Window System</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x11-synopsis>5.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-understanding>5.2. Az X áttekintése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-install>5.3. Az X11 telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-config>5.4. Az X11 beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-fonts>5.5. Betûtípusok használata az X11-ben</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x-xdm>5.6. Az X bejelentkeztetõ képernyõje</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/x11/#x11-wm>5.7. Munkakörnyezetek</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partii/>II. Rész Gyakori feladatok</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/>6. Fejezet - Asztali alkalmazások</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-synopsis>6.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-browsers>6.2. Böngészõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-productivity>6.3. Irodai eszközök</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-viewers>6.4. Dokumentum-megjelenítõk</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-finance>6.5. Pénzügyi szoftverek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/desktop/#desktop-summary>6.6. Összefoglalás</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/>7. Fejezet - Multimédia</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#multimedia-synopsis>7.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#sound-setup>7.2. A hangkártya beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#sound-mp3>7.3. MP3</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#video-playback>7.4. Videók lejátszása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#tvcard>7.5. TV kártyák beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/multimedia/#scanners>7.6. Lapolvasók</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/>8. Fejezet - A FreeBSD rendszermag testreszabása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Miért készítsünk saját rendszermagot?</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-devices>8.3. A rendszerünkben levõ hardverek összeszedése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-modules>8.4. Meghajtók, alrendszerek és modulok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-building>8.5. Saját rendszermag készítése és telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-config>8.6. A konfigurációs állomány</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/kernelconfig/#kernelconfig-trouble>8.7. Ha valamilyen hiba történne</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/printing/>9. Fejezet - Nyomtatás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-synopsis>9.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-intro-spooler>9.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-intro-setup>9.3. Kezdeti beállítások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-advanced>9.4. Magasszintû nyomtatóbeállítás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-using>9.5. A nyomtatók használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-lpd-alternatives>9.6. Más nyomtatási rendszerek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/printing/#printing-troubleshooting>9.7. Hibakeresés</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/>10. fejezet - Bináris Linux kompatibilitás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Telepítés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-mathematica>10.3. A Mathematica® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-maple>10.4. A Maple™ telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-matlab>10.5. A MATLAB® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-oracle>10.6. Az Oracle® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#sapr3>10.7. Az SAP® R/3® telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/linuxemu/#linuxemu-advanced>10.8. Témák haladóknak</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partiii/>III. Rész Rendszeradminisztráció</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/config/>11. Fejezet - Beállítás és finomhangolás</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#config-synopsis>11.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-initial>11.2. Kezdeti beállítások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-core-configuration>11.3. A mag beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-appconfig>11.4. Az alkalmazások beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-starting-services>11.5. Szolgáltatások indítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-cron>11.6. A <code>cron</code> segédprogram beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-rcd>11.7. Az rc használata FreeBSD alatt</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#config-network-setup>11.8. A hálózati kártyák beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-virtual-hosts>11.9. Virtuális címek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-configfiles>11.10. Konfigurációs állományok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-sysctl>11.11. Finomhangolás a sysctl használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-disk>11.12. A lemezek finomhangolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#configtuning-kernel-limits>11.13. A rendszermag korlátainak finomhangolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#adding-swap-space>11.14. A lapozóterület bõvítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#acpi-overview>11.15. Energia- és erõforrásgazdálkodás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/config/#ACPI-debug>11.16. A FreeBSD ACPI támogatásának használata és nyomonkövetése</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/boot/>12. Fejezet - A FreeBSD rendszerindítási folyamata</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-synopsis>12.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-introduction>12.2. A rendszerindítás problémája</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-blocks>12.3. A boot manager és az indulás fokozatai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-kernel>12.4. Kapcsolat a rendszermaggal a rendszerindítás folyamán</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#device-hints>12.5. Eszköz útmutatók (device.hints)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-init>12.6. Init: A folyamatirányítás elindítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/boot/#boot-shutdown>12.7. A leállítási folyamat</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/users/>13. Fejezet - Felhasználók és hozzáférések alapvető kezelése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-synopsis>13.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-introduction>13.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-superuser>13.3. Az adminisztrátori hozzáférés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-system>13.4. Rendszerhozzáférések</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-user>13.5. Felhasználói hozzáférések</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-modifying>13.6. A hozzáférések módosítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-limiting>13.7. A felhasználók korlátozása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/users/#users-groups>13.8. Csoportok</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/security/>14. Fejezet - Biztonság</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-synopsis>14.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-intro>14.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#securing-freebsd>14.3. A FreeBSD védelme</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#crypt>14.4. DES, Blowfish, MD5 és a Crypt</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#one-time-passwords>14.5. Egyszeri jelszavak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#tcpwrappers>14.6. A TCP kapcsolatok burkolása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#ipsec>14.10. VPN IPsec felett</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#fs-acl>14.12. Az állományrendszerek hozzáféréseit vezérlõ listák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-portaudit>14.13. A külsõ programok biztonsági problémáinak figyelése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-advisories>14.14. A FreeBSD biztonsági figyelmeztetései</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/security/#security-accounting>14.15. A futó programok nyilvántartása</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/jails/>15. Fejezet - A jail alrendszer</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-synopsis>15.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-terms>15.2. A jail alrendszerhez kapcsolódó fogalmak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-intro>15.3. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-build>15.4. A jailek létrehozása és vezérlése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-tuning>15.5. Finomhangolás és karbantartás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/jails/#jails-application>15.6. A jailek alkalmazása</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mac/>16. Fejezet - Kötelező hozzáférés-vezérlés (MAC)</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-synopsis>16.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-inline-glossary>16.2. A fejezet fontosabb fogalmai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-initial>16.3. A MAC ismertetése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-understandlabel>16.4. Bõvebben a MAC címkéirõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-planning>16.5. A védelem megtervezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-modules>16.6. A modulok beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-seeotheruids>16.7. A seeotheruids MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-bsdextended>16.8. A bsdextended MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-ifoff>16.9. Az ifoff MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-portacl>16.10. A portacl MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-partition>16.11. A partition MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-mls>16.12. A többszintû biztonsági MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-biba>16.13. A Biba MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-lomac>16.14. A LOMAC MAC-modul</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-implementing>16.15. A Nagios elzárása a MAC rendszerrel</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-userlocked>16.16. A felhasználók korlátozása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mac/#mac-troubleshoot>16.17. A hibák elhárítása a MAC rendszerben</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/audit/>17. Fejezet - Biztonsági események vizsgálata</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-synopsis>17.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-inline-glossary>17.2. A fejezet fontosabb fogalmai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-install>17.3. A vizsgálat támogatásának telepítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-config>17.4. A vizsgálat beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/audit/#audit-administration>17.5. A vizsgálati alrendszer használata</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/disks/>18. Fejezet - Háttértárak</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-synopsis>18.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-naming>18.2. Az eszközök elnevezései</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-adding>18.3. Lemezek hozzáadása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#usb-disks>18.5. USB tárolóeszközök</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#creating-cds>18.6. Lézeres tárolóeszközök (CD-k) létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#creating-dvds>18.7. Lézeres tárolóeszközök (DVD-k) létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#floppies>18.8. Hajlékonylemezek létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backups-tapebackups>18.9. Szalagok létrehozása és használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backups-floppybackups>18.10. Biztonsági mentés hajlékonylemezekre</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backup-strategies>18.11. Mentési stratégiák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#backup-basics>18.12. Alapvetõ tudnivalók a biztonsági mentésrõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-virtual>18.13. Hálózat, memória és állomány alapú állományrendszerek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#snapshots>18.14. Az állományrendszerek pillanatképei</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#quotas>18.15. Az állományrendszerek kvótái</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#disks-encrypting>18.16. A lemezpartíciók titkosítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/disks/#swap-encrypting>18.17. A lapozóterület titkosítása</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/geom/>19. Fejezet - GEOM: A moduláris lemezszervező rendszer</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-synopsis>19.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-intro>19.2. A GEOM bemutatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-striping>19.3. RAID0 - Csíkozás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - Tükrözés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-ggate>19.5. Eszközök hálózati illesztése a GEOM-ban</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-glabel>19.6. A lemezes eszközök címkézése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/geom/#geom-gjournal>19.7. Naplózó UFS GEOM-on keresztül</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/>20. Fejezet - Támogatott állományrendszerek</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/#filesystems-synopsis>20.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/filesystems/#filesystems-zfs>20.2. A Z állományrendszer (ZFS)</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/>21. Fejezet - A Vinum kötetkezelő</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-synopsis>21.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-intro>21.2. Kicsik a lemezeink</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-access-bottlenecks>21.3. A hozzáférési idõk szûk keresztmetszetei</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-data-integrity>21.4. Adatintegritás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-objects>21.5. A Vinum objektumai</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-examples>21.6. Példák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-object-naming>21.7. Az objektumok elnevezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-config>21.8. A Vinum beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/vinum/#vinum-root>21.9. Rendszerindítás Vinum-kötetrõl</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/>22. Fejezet - Virtualizáció</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-synopsis>22.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-guest>22.2. A FreeBSD mint vendég</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/virtualization/#virtualization-host>22.3. A FreeBSD mint gazda</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/>23. Fejezet - Honosítás - Az I18N/L10N használata és beállítása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-synopsis>23.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-basics>23.2. Az alapok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#using-localization>23.3. A honosítás használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#l10n-compiling>23.4. I18N programok fordítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/l10n/#lang-setup>23.5. A FreeBSD honosítása adott nyelvekre</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/>24. Fejezet - A FreeBSD frissítése és frissen tartása</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-synopsis>24.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>24.2. A FreeBSD frissítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-portsnap>24.3. A Portgyûjtemény frissítése a Portsnap használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#updating-upgrading-documentation>24.4. A dokumentáció frissítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#current-stable>24.5. A fejlesztõi ág követése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#synching>24.6. A forrás szinkronizálása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#makeworld>24.7. Az alaprendszer újrafordítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/cutting-edge/#small-lan>24.8. A források követése több géppel</a></li></ul></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/>25. Fejezet - DTrace</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-synopsis>25.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-implementation>25.2. Eltérések az implementációban</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-enable>25.3. A DTrace támogatásának engedélyezése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-using>25.4. A DTrace használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/dtrace/#dtrace-language>25.5. A D nyelv</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partiv/>IV. Rész Hálózati kommunikáció</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/>26. Fejezet - Soros vonali kommunikáció</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serial-synopsis>26.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serial>26.2. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#term>26.3. Terminálok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#dialup>26.4. Betárcsázós szolgáltatások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#dialout>26.5. A betárcsázós szolgáltatások használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/serialcomms/#serialconsole-setup>26.6. A soros vonali konzol beállítása</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/>27. Fejezet - A PPP és a SLIP</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#userppp>27.2. A felhasználói PPP alkalmazása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp>27.3. A rendszerszintû PPP alkalmazása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.4. PPP kapcsolatok hibaelhárítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#pppoe>27.5. A PPP használata Ethernet felett (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#pppoa>27.6. PPP ATM felett (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/ppp-and-slip/#slip>27.7. A SLIP használata</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mail/>28. Fejezet - Elektronikus levelezés</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-synopsis>28.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-using>28.2. Az elektronikus levelezés használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#sendmail>28.3. A sendmail beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-changingmta>28.4. A levéltovábbító ügynök megváltoztatása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-trouble>28.5. A hibák elhárítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-advanced>28.6. Komolyabb témák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-UUCP>28.7. SMTP és az UUCP</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#outgoing-only>28.8. Csak küldés beállítása</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-dialup>28.9. Levelezés betárcsázós kapcsolattal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#SMTP-Auth>28.10. Az SMTP hitelesítése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-agents>28.11. Levelezõ kliensek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-fetchmail>28.12. A fetchmail használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mail/#mail-procmail>28.13. A procmail használata</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/>29. Fejezet - Hálózati szerverek</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-servers-synopsis>29.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-inetd>29.2. Az inetd"szuperszerver"</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-nfs>29.3. A hálózati állományrendszer (NFS)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-nis>29.4. Hálózati információs rendszer (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-dhcp>29.5. A hálózat automatikus beállítása (DHCP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-dns>29.6. Névfeloldás (DNS)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-apache>29.7. Az Apache webszerver</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-ftp>29.8. Állományok átvitele (FTP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-samba>29.9. Állomány- és nyomtatási szolgáltatások Microsoft® Windows® kliensek számára (Samba)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-ntp>29.10. Az órák egyeztetése az NTP használatával</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers/#network-syslogd>29.11. Távoli gépek naplózása <code>syslogd</code> használatával</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle checked>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/>30. Fejezet - Tűzfalak</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-intro>30.1. Bevezetés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-concepts>30.2. Röviden a tûzfalakról</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-apps>30.3. Tûzfalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-pf>30.4. Az OpenBSD csomagszûrõje (PF) és az ALTQ</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-ipf>30.5. Az IPFILTER (IPF) tûzfal</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/firewalls/#firewalls-ipfw>30.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/>31. Fejezet - Egyéb haladó hálózati témák</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. Áttekintés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-routing>31.2. Átjárók és az útválasztás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-wireless>31.3. Vezeték nélküli hálózatok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-bluetooth>31.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-bridging>31.5. Hálózati hidak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-aggregation>31.6. Linkek összefûzése és hibatûrése</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-diskless>31.7. Lemez nélküli mûködés</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-isdn>31.8. ISDN</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-natd>31.9. Hálózati címfordítás</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-plip>31.10. Párhuzamos vonali IP (PLIP)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-ipv6>31.11. Az IPv6</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#network-atm>31.12. Az Aszinkron adatátviteli mód (ATM)</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking/#carp>31.13. A Közös cím redundancia protokoll (CARP)</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/partv/>V. Rész Függelék</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/>A. Függelék - A FreeBSD beszerzése</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-cdrom>A.1. CD és DVD kiadók</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-ftp>A.2. FTP oldalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#anoncvs>A.3. Anonim CVS</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#ctm>A.4. A CTM használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#cvsup>A.5. A CVSup használata</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#cvs-tags>A.6. CVS címkék</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-afs>A.7. AFS oldalak</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/mirrors/#mirrors-rsync>A.8. Rsync oldalak</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/>B. függelék - Irodalomjegyzék</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-freebsd>B.1. A FreeBSD-rõl szóló könyvek és folyóiratok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-userguides>B.2. Felhasználói kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-adminguides>B.3. Rendszeradminisztrátori kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-programmers>B.4. Programozói kézikönyvek</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-osinternals>B.5. Az operációs rendszerek belsõ mûködésérõl</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-security>B.6. Biztonságról szóló írások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-hardware>B.7. Hardverrel foglalkozó írások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-history>B.8. UNIX® történelem</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/bibliography/#bibliography-journals>B.9. Magazinok és folyóiratok</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/>C. Függelék - Források az interneten</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-mail>C.1. Levelezési listák</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-news>C.2. Usenet hírcsoportok</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-web>C.3. Világhálós szolgáltatások</a></li><li><a href=http://172.16.201.134:1313/hu/books/handbook/eresources/#eresources-email>C.4. E-mail címek</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/hu/books/handbook/pgpkeys/>D. Függelék - PGP-kulcsok</a><ul><li><a href=http://172.16.201.134:1313/hu/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Tisztségviselők</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>30. Fejezet - Tűzfalak</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#firewalls-intro>30.1. Bevezetés</a></li><li><a href=#firewalls-concepts>30.2. Röviden a tûzfalakról</a></li><li><a href=#firewalls-apps>30.3. Tûzfalak</a></li><li><a href=#firewalls-pf>30.4. Az OpenBSD csomagszûrõje (PF) és az ALTQ</a></li><li><a href=#firewalls-ipf>30.5. Az IPFILTER (IPF) tûzfal</a></li><li><a href=#firewalls-ipfw>30.6. IPFW</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=firewalls-intro>30.1. Bevezetés<a class=anchor href=#firewalls-intro></a></h2><div class=sectionbody><div class=paragraph><p>A tûzfalakkal a rendszerünkön keresztülfolyó bejövõ és kimenõ forgalmat tudjuk szûrni. A tûzfalak egy vagy több "szabályrendszer" alapján vizsgálják az éppen érkezõ vagy távozó hálózati csomagokat, és vagy továbbengedik ezeket vagy megállítják. A tûzfalak szabályai a csomagok egy vagy több jellemzõjét veszik szemügyre, amelyek lehetnek például a protokoll típusa, a forrás vagy cél hálózati címe, esetleg a forrás- vagy a célport.</p></div><div class=paragraph><p>A tûzfalak jelentõs mértékben képesek gyarapítani egy gép vagy egy hálózat védelmét. Leginkább a következõkre tudjuk felhasználni:</p></div><div class=ulist><ul><li><p>A belsõ hálózatunkban futó alkalmazások, szolgáltatások, gépek megvédésére és elszigetelésére az internetrõl érkezõ nem kívánt forgalom ellen</p></li><li><p>A belsõ hálózatban levõ gépek elérését tudjuk korlátozni vagy letiltani az interneten elérhetõ szolgáltatások felé</p></li><li><p>A hálózati címfordítás (Network Address Translation, NAT) beállításához, ahol a belsõ hálózatunk privát IP-címeket használnak és egy közös kapcsolaton keresztül érik el az internetet (egyetlen IP-címmel, vagy pedig automatikusan kiosztott publikus címekkel).</p></li></ul></div><div class=paragraph><p>A fejezet elolvasása során megismerjük:</p></div><div class=ulist><ul><li><p>hogyan adjuk meg helyesen a csomagok szûrését leíró szabályokat;</p></li><li><p>a FreeBSD-be épített tûzfalak közti különbségeket;</p></li><li><p>hogyan állítsuk be és használjuk az OpenBSD PF tûzfalát;</p></li><li><p>hogyan állítsuk be és használjuk az IPFILTER tûzfalat;</p></li><li><p>hogyan állítsuk be és használjuk az IPFW tûzfalat.</p></li></ul></div><div class=paragraph><p>A fejezet elolvasása elõtt ajánlott:</p></div><div class=ulist><ul><li><p>a FreeBSD-hez és az internethez kötõdõ alapvetõ fogalmak ismerete.</p></li></ul></div></div></div><div class=sect1><h2 id=firewalls-concepts>30.2. Röviden a tûzfalakról<a class=anchor href=#firewalls-concepts></a></h2><div class=sectionbody><div class=paragraph><p>A tûzfalak szabályrendszereit alapvetõen kétféleképpen tudjuk összeállítani: "inkluzív", vagyis megengedõ, illetve "exkluzív" vagyis kizáró módon. Az exkluzív tûzfalak minden forgalmat átengednek, amirõl nem rendelkeznek a tûzfal szabályai. Az inkluzív tûzfalak ennek pontosan az ellenkezõjét teszik. Csak azt a forgalmat engedik át, amirõl van szabály és minden mást blokkolnak.</p></div><div class=paragraph><p>Az inkluzív tûzfalak alkalmazásával sokkal jobban kezünkbentudjuk tartani a hálózatunk kimenõ forgalmát, ezért leginkább az internetes szolgáltatásokat futtató rendszerek esetében bizonyulhat jobb választásnak. Emellett az internetrõl a hálózatunk felé irányuló forgalmat is képes szabályozni. Ekkor az egyetlen szabályra sem illeszkedõ csomagokat egyszerûen eldobjuk és naplózzuk. Az inkluzív tûzfalak általában biztonságosabbak az exkluzív típusú társaiknál, mivel esetükben jelentõs mértékben visszaszorul a nem kívánatos átfolyó forgalom.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Hacsak nem emeljük ki külön, a fejezet további részében minden példaként megadott szabályrendszer inkluzív tûzfalat hoz létre.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ez a típusú védelem még tovább fokozható az "állapottartó tûzfalak" (stateful firewall) használatával. Az ilyen típusú tûzfalak szemmel tartják a rajtuk keresztül megnyitott kapcsolatokat, és vagy csak a már meglevõ kapcsolathoz tartozó forgalmat engedik át vagy nyitnak egy újat. Az állapottartó tûzfalak hátránya, hogy a "Denial of Service" (DoS) típusú támadásokkal szemben sokkal sérülékenyebbek olyan helyzetekben, amikor az új kapcsolatok nagyon gyorsan jönnek létre. A legtöbb tûzfal esetében azonban tudjuk vegyíteni az állapottartó és nem állapottartó viselkedést, és ezzel egy ideális beállítást kialakítani.</p></div></div></div><div class=sect1><h2 id=firewalls-apps>30.3. Tûzfalak<a class=anchor href=#firewalls-apps></a></h2><div class=sectionbody><div class=paragraph><p>A FreeBSD alaprendszerébe három különbözõ tûzfalat építettek be, melyek a következõk: az <em>IPFILTER</em> (másik nevén IPF), az <em>IPFIREWALL</em> (más néven IPFW) és az <em>OpenBSD csomagszûrõje</em> (Packet Filter, azaz PF). A forgalom szabályozására (vagyis alapvetõen a sávszélesség kihasználtságának vezérlésére) a FreeBSD két beépített csomagot tartalmaz: ez az <a href="https://man.freebsd.org/cgi/man.cgi?query=altq&amp;sektion=4&amp;format=html">altq(4)</a> és a <a href="https://man.freebsd.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;format=html">dummynet(4)</a>. Általában a Dummynet az IPFW, míg az ALTQ a PF partnere. Az IPFILTER esetében maga az IPFILTER végzi a címfordítást és a szûrést, a sávszélességet pedig az IPFW a <a href="https://man.freebsd.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;format=html">dummynet(4)</a> <em>vagy</em> a PF az ALTQ segítségével. Az IPFW és a PF szabályokkal rendelkezik a rendszerünkbe érkezõ vagy onnan távozó csomagokról, habár megoldásaik teljesen máshogy mûködnek és a szabályok megadási módja is eltér.</p></div><div class=paragraph><p>A FreeBSD azért tartalmaz egyszerre ennyiféle tûzfalat, mert az emberek elvárásai és igényei eltérnek. Egyikük sem tekinthetõ a legjobbnak.</p></div><div class=paragraph><p>A szerzõ egyébként az IPFILTER megoldását részesíti elõnyben, mivel egy hálózati címfordítást alkalmazó környezetben sokkal könnyebb vele megfogalmazni az állapottartó szabályokat, valamint tartalmaz egy beépített FTP proxyt is, amivel így a kimenõ FTP kapcsolatok beállítása még tovább egyszerûsödik.</p></div><div class=paragraph><p>Mivel az összes tûzfal a csomagok fejlécének bizonyos mezõinek alapján dolgozik, ezért a tûzfal szabályrendszerét megalkotó egyénnek teljesen tisztában kell lennie a TCP/IP mûködésével, továbbá azzal, hogy ezekben a mezõkben milyen értékek szerepelhetnek és ezeket hogyan használják egy átlagos kapcsolat alatt. Ebben a témában a <a href=http://www.ipprimer.com/overview.cfm>http://www.ipprimer.com/overview.cfm</a> címen találhatunk egy remek ismertetõt (angolul).</p></div></div></div><div class=sect1><h2 id=firewalls-pf>30.4. Az OpenBSD csomagszûrõje (PF) és az ALTQ<a class=anchor href=#firewalls-pf></a></h2><div class=sectionbody><div class=paragraph><p>2003 júliusában az OpenBSD PF néven ismert csomagszûrõjét átírták FreeBSD-re és elérhetõvé tették a FreeBSD Portgyûjteményének részeként. A PF programot beépítetten tartalmazó elsõ kiadás pedig 2004 novemberében a FreeBSD 5.3 volt. A PF egy teljes, mindentudó tûzfal, amely támogatja az ún. ALTQ (Alternate Queuing, vagyis a "váltóbesorolás") megoldást. Az ALTQ lehetõvé teszi a sávszélesség korlátozását a szolgáltatás minõsége (Quality of Service, QoS) alapján.</p></div><div class=paragraph><p>Az OpenBSD Projekt kiváló munkát végez a PF <a href=http://www.openbsd.org/faq/pf/>felhasználói útmutatójának</a> karbantartásával. A kézikönyv ezen szakasza ezért elsõsorban azzal foglalkozik, hogyan kell a PF-et FreeBSD alatt használni, miközben igyekszik egy általános összefoglalást adni a témáról. A részletesebb információkkal kapcsolatban azonban feltétlenül nézzük meg a felhasználói útmutatót.</p></div><div class=paragraph><p>A <a href=http://pf4freebsd.love2party.net/>http://pf4freebsd.love2party.net/</a> címen olvashatunk többet arról (angolul), hogy a PF-et hogyan használjunk FreeBSD-n.</p></div><div class=sect2><h3 id=_a_pf_rendszermagmodulok_használata>30.4.1. A PF rendszermagmodulok használata<a class=anchor href=#_a_pf_rendszermagmodulok_használata></a></h3><div class=paragraph><p>A PF modul betöltéséhez a következõ sort kell felvennünk az <span class=filename>/etc/rc.conf</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>pf_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Ezt követõen futtassuk le a hozzá tartozó rendszerindító szkriptet:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/pf start</span></code></pre></div></div><div class=paragraph><p>A PF modul abban az esetben nem fog betöltõdni, ha nem találja a szabályokat tartalmazó konfigurációs állományt. Ez alapértelmezés szerint az <span class=filename>/etc/pf.conf</span> állomány. Ha a szabályok leírása rendszerünkön máshol található, akkor az <span class=filename>/etc/rc.conf</span> állományban a következõ módon adhatjuk meg annak pontos helyét:</p></div><div class="literalblock programlisting"><div class=content><pre>pf_rules=&#34;/elérési/út/pf.conf&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A FreeBSD 7.0 kiadással a minta <span class=filename>pf.conf</span> állomány az <span class=filename>/etc</span> könyvtárból átkerült a <span class=filename>/usr/shared/examples/pf</span> könyvtárba. A FreeBSD 7.0 elõtti kiadásokban alapértelmezés szerint található egy <span class=filename>pf.conf</span> állomány az <span class=filename>/etc</span> könyvtárban.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A PF modul parancssorból akár kézzel is betölthetõ:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload pf.ko</span></code></pre></div></div><div class=paragraph><p>A PF mûködésének naplózását a <code>pflog.ko</code> teszi lehetõvé, amelyet az alábbi sor hozzáadásával engedélyezhetünk az <span class=filename>/etc/rc.conf</span> állományban:</p></div><div class="literalblock programlisting"><div class=content><pre>pflog_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>A modul betöltését a hozzá tartozó rendszerindító szkript segítségével kérhetjük:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/pflog start</span></code></pre></div></div><div class=paragraph><p>Ha a PF többi funkcióját is használni szeretnénk, akkor ehhez egy új rendszermagot kell fordítanunk PF támogatással.</p></div></div><div class=sect2><h3 id=_a_pf_rendszermagbeli_beállításai>30.4.2. A PF rendszermagbeli beállításai<a class=anchor href=#_a_pf_rendszermagbeli_beállításai></a></h3><div class=paragraph><p>Noha egyáltalán nem szükséges beépítenünk a PF támogatását a rendszermagba, abban az esetben mégis szükségünk lehet rá, amikor a PF olyan komolyabb lehetõségeit szeretnénk kiaknázni, amelyek már nem részei a modulnak. Ilyen például a <a href="https://man.freebsd.org/cgi/man.cgi?query=pfsync&amp;sektion=4&amp;format=html">pfsync(4)</a>, amely a PF által használt állapottáblázatok bizonyos változásainak megjelenítésére alkalmas pszeudoeszköz. A <a href="https://man.freebsd.org/cgi/man.cgi?query=carp&amp;sektion=4&amp;format=html">carp(4)</a> megoldásával párosítva így akár hibatûrõ tûzfalak is kialakíthatóak a PF-fel. A CARP megoldásáról a kézikönyvben bõvebb ismertetést a <a href=../advanced-networking/#carp>A Közös cím redundancia protokoll (CARP)</a> ad.</p></div><div class=paragraph><p>A PF rendszermag konfigurációs beállításai a <span class=filename>/usr/src/sys/conf/NOTES</span> állományban találhatóak:</p></div><div class="literalblock programlisting"><div class=content><pre>device pf
device pflog
device pfsync</pre></div></div><div class=paragraph><p>A <code>device pf</code> beállítás engedélyezi a csomagszûrõ tûzfalat (<a href="https://man.freebsd.org/cgi/man.cgi?query=pf&amp;sektion=4&amp;format=html">pf(4)</a>).</p></div><div class=paragraph><p>A <code>device pflog</code> megadásával keletkezik egy <a href="https://man.freebsd.org/cgi/man.cgi?query=pflog&amp;sektion=4&amp;format=html">pflog(4)</a> pszeudo hálózati eszköz, amellyel egy <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> eszközre érkezõ forgalmat tudunk naplózni. Ezután a <a href="https://man.freebsd.org/cgi/man.cgi?query=pflogd&amp;sektion=8&amp;format=html">pflogd(8)</a> démon használható tõle származó naplózott adatok rögzítésére.</p></div><div class=paragraph><p>A <code>device pfsync</code> engedélyezi a <a href="https://man.freebsd.org/cgi/man.cgi?query=pfsync&amp;sektion=4&amp;format=html">pfsync(4)</a> pszeudo hálózati eszköz létrejöttét, amely az ún. "állapotváltások" megfigyelésére alkalmas.</p></div></div><div class=sect2><h3 id=_az_rc_conf_állományban_elérhetõ_beállítások>30.4.3. Az <span class=filename>rc.conf</span> állományban elérhetõ beállítások<a class=anchor href=#_az_rc_conf_állományban_elérhetõ_beállítások></a></h3><div class=paragraph><p>A következõ <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> beállítások aktiválják a rendszerindítás során a PF és a <a href="https://man.freebsd.org/cgi/man.cgi?query=pflog&amp;sektion=4&amp;format=html">pflog(4)</a> használatát:</p></div><div class="literalblock programlisting"><div class=content><pre>pf_enable=&#34;YES&#34;                 # a PF engedélyezése (a modul betöltése, ha kell)
pf_rules=&#34;/etc/pf.conf&#34;         # a pf szabályait tartalmazó állomány
pf_flags=&#34;&#34;                     # a pfctl indításához szükséges további paraméterek
pflog_enable=&#34;YES&#34;              # a pflogd(8) elindítása
pflog_logfile=&#34;/var/log/pflog&#34;  # hol tartsa a pflogd az naplóit
pflog_flags=&#34;&#34;                  # a pflogd indításához szükséges paraméterek</pre></div></div><div class=paragraph><p>Ha a tûzfalunk mögött egy helyi hálózat is meghúzódik, akkor az ott levõ gépek számára valamilyen módon tudnunk kell továbbítani a csomagokat vagy címfordítást kell végezni, így ez is mindenképpen kelleni fog:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;            # az átjáró funkciók engedélyezése</pre></div></div></div><div class=sect2><h3 id=_a_szûrési_szabályok_megfogalmazása>30.4.4. A szûrési szabályok megfogalmazása<a class=anchor href=#_a_szûrési_szabályok_megfogalmazása></a></h3><div class=paragraph><p>A PF a beállításait a <a href="https://man.freebsd.org/cgi/man.cgi?query=pf.conf&amp;sektion=5&amp;format=html">pf.conf(5)</a> állomány tárolja (amely alapértelmezés szerint az <span class=filename>/etc/pf.conf</span> helyen található), és az ebben található szabályok alapján módosítja, dobja el vagy éppen engedi át a csomagokat. A FreeBSD rendszerünkben ehhez találhatunk néhány példát a <span class=filename>/usr/shared/examples/pf/</span> könyvtárban. A PF által használt szabályokról minden részletre kiterjedõen a PF <a href=http://www.openbsd.org/faq/pf/>felhasználói útmutatójában</a> olvashatunk.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>A PF <a href=http://www.openbsd.org/faq/pf/>felhasználói útmutatójának</a> olvasásakor ne feledkezzünk meg róla, hogy a különbözõ FreeBSD verziók különbözõ PF verziókat tartalmaznak. A FreeBSD 7.<em>X</em> és késõbbi változatok az OpenBSD 4.1 kiadásában szereplõ PF változatot tartalmazzák.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A <a href=https://lists.FreeBSD.org/subscription/freebsd-pf>FreeBSD packet filter levelezési lista</a> remek hely a PF tûzfal beállításával és futtatásával kapcsolatos kérdésekre. A kérdezés elõtt azonban ne felejtsük el alaposan átnézni az archívumot!</p></div></div><div class=sect2><h3 id=_a_pf_használata>30.4.5. A PF használata<a class=anchor href=#_a_pf_használata></a></h3><div class=paragraph><p>A PF a <a href="https://man.freebsd.org/cgi/man.cgi?query=pfctl&amp;sektion=8&amp;format=html">pfctl(8)</a> segítségével vezérelhetõ. Az alábbiakban ezzel kapcsolatban most összefoglalunk néhány hasznos parancsot (de ne felejtsük el megnézni a <a href="https://man.freebsd.org/cgi/man.cgi?query=pfctl&amp;sektion=8&amp;format=html">pfctl(8)</a> man oldalon található többi lehetõséget sem):</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Parancs</th><th class="tableblock halign-left valign-top">Leírás</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -e</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A PF engedélyezése</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -d</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A PF tiltása</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -F all -f /etc/pf.conf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az összes (címfordítási, szûrési, állapottartási stb.) szabály törlése, és az <span class=filename>/etc/pf.conf</span> állomány újratöltése</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -s [ rules | nat | state ]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A szûrési (<code>rules</code>), címfordítási (<code>nat</code>) és állapottartási (<code>state</code>) információk lekérdezése</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pfctl -vnf /etc/pf.conf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Az <span class=filename>/etc/pf.conf</span> állomány ellenõrzése a benne levõ szabályok betöltése nélkül</p></td></tr></tbody></table></div><div class=sect2><h3 id=_az_altq_engedélyezése>30.4.6. Az ALTQ engedélyezése<a class=anchor href=#_az_altq_engedélyezése></a></h3><div class=paragraph><p>Az ALTQ kizárólag csak úgy használható, ha a konfigurációs beállításokon keresztül beépítjük a FreeBSD rendszermagjába. Az ALTQ alkalmazását nem minden hálózati kártya meghajtója támogatja, ezért ezt a <a href="https://man.freebsd.org/cgi/man.cgi?query=altq&amp;sektion=4&amp;format=html">altq(4)</a> man oldalon ellenõrizzük.</p></div><div class=paragraph><p>A következõ rendszermag konfigurációs beállításokkal engedélyezhetjük az ALTQ használatát és bõvíthetjük azt további lehetõségekkel:</p></div><div class="literalblock programlisting"><div class=content><pre>options         ALTQ
options         ALTQ_CBQ        # osztályozás alapú besorolás (Class Bases Queuing, CBQ)
options         ALTQ_RED        # véletlen korai észlelés (Random Early Detection, RED)
options         ALTQ_RIO        # RED befele/kifele
options         ALTQ_HFSC       # hiearchikus csomagütemezõ (Hierarchical Packet Scheduler, HFSC)
options         ALTQ_PRIQ       # prioritásos besorolás (Priority Queuing, PRIQ)
options         ALTQ_NOPCC      # az SMP esetén kell</pre></div></div><div class=paragraph><p>Az <code>options ALTQ</code> az ALTQ rendszert engedélyezi.</p></div><div class=paragraph><p>Az <code>options ALTQ_CBQ</code> engedélyezi a osztályozás alapú besorolást (<em>Class Based Queuing</em>, CBQ). A CBQ használatával a kapcsolatunkhoz tartozó sávszélességet különbözõ osztályokra vagy sorokra tudjuk bontani és a szûrési szabályoknak megfelelõen osztályozni segítségükkel a forgalmat.</p></div><div class=paragraph><p>Az <code>options ALTQ_RED</code> a véletlen korai észlelés (<em>Random Early Detection</em>, RED) használatát engedélyezi. A RED a hálózati forgalomban keletkezõ torlódások elkerülésére alkalmas. A RED ezt a problémát úgy oldja meg, hogy méri a sorok hosszát és összeveti a hozzá tartozó minimális és maximális küszöbértékekkel. Ha a sor hossza meghaladja a számára elõírt maximális értéket, akkor az új csomagokat eldobja. Nevéhez hûen a RED az eldobásra ítélt csomagokat véletlenszerûen választja ki.</p></div><div class=paragraph><p>Az <code>options ALTQ_RIO</code> engedélyezi a RED használatát mind a két irányba, tehát be- és kifelé.</p></div><div class=paragraph><p>Az <code>options ALTQ_HFSC</code> a pártatlan hierachikus szolgáltatási görbe alapú csomagütemezõt (<em>Hierarchical Fair Service Curve Packet Scheduler</em>, HFSC) engedélyezi. Vele kapcsolatban a <a href=http://www-2.cs.cmu.edu/~hzhang/HFSC/main.html>http://www-2.cs.cmu.edu/~hzhang/HFSC/main.html</a> címen találhatunk bõvebben olvasnivalót (angolul).</p></div><div class=paragraph><p>Az <code>options ALTQ_PRIQ</code> a prioritásos besorolást (<em>Priority Queuing</em>, PRIQ) teszi elérhetõvé. A PRIQ mindig elsõként a nagyobb értékû sorban levõ forgalmat továbbítja.</p></div><div class=paragraph><p>Az <code>options ALTQ_NOPCC</code> az ALTQSMP, vagyis többprocesszoros támogatását adja meg. Ilyen típusú rendszerekben ez kötelezõ.</p></div></div></div></div><div class=sect1><h2 id=firewalls-ipf>30.5. Az IPFILTER (IPF) tûzfal<a class=anchor href=#firewalls-ipf></a></h2><div class=sectionbody><div class=paragraph><p>Az IPFILTER szerzõje Darren Reed. Az IPFILTER nem kötõdik egyik rendszerhez sem: ez egy olyan nyílt forráskódú alkalmazás, amelyet átírtak FreeBSD, NetBSD, OpenBSD, SunOS™, HP/UX és Solaris™ operációs rendszerekre. Az IPFILTER karbantartása és támogatása pillanatnyilag is aktív, folyamatosan jelennek meg újabb változatai.</p></div><div class=paragraph><p>Az IPFILTER egy rendszermag oldalán mûködõ tûzfalazási és egy címfordítási mechanizmusra alapszik, amelyet felhasználói programokkal tudunk felügyelni és vezérelni. A tûzfal szabályai az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> segédprogrammal állíthatóak be vagy törölhetõek. A hálózati címfordításra vonatkozó szabályokat az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipnat&amp;sektion=1&amp;format=html">ipnat(1)</a> segédprogrammal állíthatjuk be vagy törölhetjük. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> segédprogram képes futás közben statisztikákat készíteni az IPFILTER rendszermagban elhelyezkedõ részeinek viselkedésérõl. Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipmon&amp;sektion=8&amp;format=html">ipmon(8)</a> program pedig az IPFILTER cselekvéseit képes a rendszernaplókba feljegyezni.</p></div><div class=paragraph><p>Az IPF eredetileg olyan szabályfeldolgozási módszer szerint készült, amelyben "az utolsó egyezõ szabály nyer" és csak állapotnélküli szabályokat ismert. Az idõ múlásával az IPF részévé vált a "quick" opció és a "keep state" opción keresztül az állapottartás is, melyek drámai mértékben korszerûsítették a szabályok feldolgozásának elvét. Az IPF hivatalos dokumentációja csak a régi szabályok létrehozását és azok feldolgozásának leírását tartalmazza. A korszerûsített funkciók csak kiegészítésképpen jelennek meg, és az általuk felkínált elõnyök megértése egy sokkal magasabb szintû és biztonságosabb tûzfal megépítését teszik lehetõvé.</p></div><div class=paragraph><p>A szakaszban szereplõ utasításokban olyan szabályok szerepelnek, amelyek kihasználják a "quick" és "keep state" opciókat. Ezek az inkluzív tûzfalszabályok létrehozásának alapjai.</p></div><div class=paragraph><p>A régi típusú szabályokról a <a href=http://www.obfuscation.org/ipf/ipf-howto.html#TOC_1>http://www.obfuscation.org/ipf/ipf-howto.html#TOC_1</a> és <a href=http://coombs.anu.edu.au/~avalon/ip-filter.html>http://coombs.anu.edu.au/~avalon/ip-filter.html</a> címeken olvashatunk (angolul).</p></div><div class=paragraph><p>Az IPF gyakran ismételt kérdései a <a href=http://www.phildev.net/ipf/index.html>http://www.phildev.net/ipf/index.html</a> címen érhetõek el (angolul).</p></div><div class=paragraph><p>A nyílt forrású IPFILTER levelezési lista kereshetõ archívumait a <a href="http://marc.theaimsgroup.com/?l=ipfilter">http://marc.theaimsgroup.com/?l=ipfilter</a> címen találjuk (angolul).</p></div><div class=sect2><h3 id=_az_ipf_engedélyezése>30.5.1. Az IPF engedélyezése<a class=anchor href=#_az_ipf_engedélyezése></a></h3><div class=paragraph><p>Az IPF megtalálható a FreeBSD alaptelepítésében mint menet közben külön betölthetõ modul. Ha az <span class=filename>rc.conf</span> állományba beírjuk a <code>ipfilter_enable="YES"</code> sort, akkor ez a modul dinamikusan betöltõdik. A betölthetõ modul alapból naplóz és a <code>default pass all</code> beállítást tartalmazza. Ha helyette a <code>block all</code> szabályt akarjuk használni, akkor emiatt még nem kell feltétlenül újrafordítanunk a FreeBSD rendszermagját, elég ha egyszerûen csak a szabályrendszerünk végére beszúrjuk.</p></div></div><div class=sect2><h3 id=_a_rendszermag_beállításai>30.5.2. A rendszermag beállításai<a class=anchor href=#_a_rendszermag_beállításai></a></h3><div class=paragraph><p>Az IPF használatához nem kötelezõ a következõ beállításokkal újrafordítani a FreeBSD rendszermagját, itt csupán háttérinformációként szerepel. Amikor az IPF a rendszermagba kerül, a betölhetõ modulra nem lesz szükség.</p></div><div class=paragraph><p>Az IPF a rendszermag forrásai között található <span class=filename>/usr/src/sys/conf/NOTES</span> állományban megadott beállításai a következõ módon foglalhatóak össze:</p></div><div class="literalblock programlisting"><div class=content><pre>options IPFILTER
options IPFILTER_LOG
options IPFILTER_DEFAULT_BLOCK</pre></div></div><div class=paragraph><p>Az <code>options IPFILTER</code> engedélyezi az "IPFILTER" tûzfal támogatását.</p></div><div class=paragraph><p>Az <code>options IPFILTER_LOG</code> hatására az IPF az <span class=filename>ipl</span> csomagnaplózó pszeudo eszközre jegyzi fel a forgalmat - minden olyan szabály esetén, ahol megjelenik a <code>log</code> kulcsszó.</p></div><div class=paragraph><p>Az <code>options IPFILTER_DEFAULT_BLOCK</code> megváltoztatja az alapértelmezett viselkedést, tehát minden olyan csomag, amely nem illeszkedik a tûzfal valamelyik <code>pass</code> típusú (átengedõ) szabályára, blokkolásra kerül.</p></div><div class=paragraph><p>Ezek a beállítások csak azt követõen érvényesülnek, ha fordítottunk és telepítettünk velük egy új rendszermagot.</p></div></div><div class=sect2><h3 id=_az_rc_conf_állomány_beállításai>30.5.3. Az <span class=filename>rc.conf</span> állomány beállításai<a class=anchor href=#_az_rc_conf_állomány_beállításai></a></h3><div class=paragraph><p>Az <span class=filename>/etc/rc.conf</span> állományban a következõ utasításokra lesz szükségünk az IPF mûködésbe hozására a rendszer indítása során:</p></div><div class="literalblock programlisting"><div class=content><pre>ipfilter_enable=&#34;YES&#34;             # az ipf tûzfal indítása
ipfilter_rules=&#34;/etc/ipf.rules&#34;   # betölti a szabályokat tartalmazó szöveges állományt
ipmon_enable=&#34;YES&#34;                # elindítja az IP monitor naplózását
ipmon_flags=&#34;-Ds&#34;                 # D = indítás démonként
                                  # s = naplózás a syslog használatával
                                  # v = a tcp ablak, ack, seq csomagok naplózása
                                  # n = az IP-címek és portok feloldása</pre></div></div><div class=paragraph><p>Ha olyan helyi hálózat áll meg a tûzfal mögött, amely egy fenntartott privát IP-címtartományt használ, akkor még a következõ utasításokra is szükségünk lesz a címfordítás bekapcsolásához:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;              # a helyi hálózat átjárója
ipnat_enable=&#34;YES&#34;                # az ipnat funkció elindítása
ipnat_rules=&#34;/etc/ipnat.rules&#34;    # az ipnat mûködéséhez szükséges definíciók</pre></div></div></div><div class=sect2><h3 id=_ipf>30.5.4. IPF<a class=anchor href=#_ipf></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> parancs használható a szabályokat tartalmazó állomány betöltésére. Általában egy állományba írjuk össze a tûzfal szabályait és ezzel a paranccsal cseréljük le egyszerre a tûzfalban levõ jelenlegi szabályokat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipf -Fa -f /etc/ipf.rules</span></code></pre></div></div><div class=paragraph><p>Az <code>-Fa</code> az összes belsõ szabály törlését jelenti.</p></div><div class=paragraph><p>Az <code>-f</code> jelzi, hogy egy állományból kell beolvasni a betöltendõ szabályokat.</p></div><div class=paragraph><p>Ezzel mintegy lehetõségünk van változtatni a korábban összeállított szabályainkon, futtatni a fenti IPF parancsot és ezen keresztül úgy frissíteni a szabályok friss másolatával a már mûködõ tûzfalat, hogy nem is kell újraindítanunk a rendszert. Ez a módszer igen kényelmes az új szabályok kipróbálásához, mivel bármikor tetszõlegesen végrehajtható.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> man oldala tartalmazza a parancsnak megadható további beállításokat.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> parancs a szabályokat tároló állományt egy szabványos szöveges állománynak tekinti, semmilyen szimbolikus helyettesítést alkalmazó szkriptet nem fogad el.</p></div><div class=paragraph><p>Lehetõségünk van azonban olyan IPF szabályokat készíteni, amelyek kiaknázzák a szkriptek szimbolikus helyettesítésének lehetõségeit. Errõl bõvebben lásd <a href=#firewalls-ipf-rules-script>A szabályok felírása szimbolikus helyettesítéssel</a>.</p></div></div><div class=sect2><h3 id=_az_ipfstat>30.5.5. Az IPFSTAT<a class=anchor href=#_az_ipfstat></a></h3><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> alapértelmezés szerint a arra használatos, hogy le tudjuk kérdezni és megjeleníteni a tûzfalhoz tartozó számlálók értékeit, amelyek a legutóbbi indítás vagy az <code>ipf -Z</code> parancs által kiadott lenullázásuk óta a bejövõ vagy kimenõ forgalomból a megadott szabályoknak megfelelõ csomagok alapján gyûjtenek össze statisztikákat.</p></div><div class=paragraph><p>A parancs mûködésének részleteit az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> man oldalon olvashatjuk.</p></div><div class=paragraph><p>Az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> meghívása alapból így néz ki:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>input packets: blocked 99286 passed 1255609 nomatch 14686 counted 0
 output packets: blocked 4200 passed 1284345 nomatch 14687 counted 0
 input packets logged: blocked 99286 passed 0
 output packets logged: blocked 0 passed 0
 packets logged: input 0 output 0
 log failures: input 3898 output 0
 fragment state<span class=o>(</span><span class=k>in</span><span class=o>)</span>: kept 0 lost 0
 fragment state<span class=o>(</span>out<span class=o>)</span>: kept 0 lost 0
 packet state<span class=o>(</span><span class=k>in</span><span class=o>)</span>: kept 169364 lost 0
 packet state<span class=o>(</span>out<span class=o>)</span>: kept 431395 lost 0
 ICMP replies: 0 TCP RSTs sent: 0
 Result cache hits<span class=o>(</span><span class=k>in</span><span class=o>)</span>: 1215208 <span class=o>(</span>out<span class=o>)</span>: 1098963
 IN Pullups succeeded: 2 failed: 0
 OUT Pullups succeeded: 0 failed: 0
 Fastroute successes: 0 failures: 0
 TCP <span class=nb>cksum </span>fails<span class=o>(</span><span class=k>in</span><span class=o>)</span>: 0 <span class=o>(</span>out<span class=o>)</span>: 0
 Packet log flags <span class=nb>set</span>: <span class=o>(</span>0<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Az <code>-i</code> mint bejövõ (inbound), vagy az <code>-o</code> mint kimenõ (outbound) forgalomra vonatkozó paraméterek megadásával a rendszermagban az adott oldalon jelenleg telepített és alkalmazott szabályokat kérhetjük le és jeleníthetjük meg.</p></div><div class=paragraph><p>Az <code>ipfstat -in</code> parancs így a bejövõ forgalomra vonatkozó belsõ szabályokat mutatja a szabályok számával.</p></div><div class=paragraph><p>Az <code>ipfstat -on</code> parancs a kimenõ forgalmat érintõ belsõ szabályokat mutatja a szabályok számával.</p></div><div class=paragraph><p>Az eredmény körülbelül ilyen lesz:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>@1 pass out on xl0 from any to any
@2 block out on dc0 from any to any
@3 pass out quick on dc0 proto tcp/udp from any to any keep state</code></pre></div></div><div class=paragraph><p>Az <code>ipfstat -ih</code> a bejövõ forgalomhoz tartozó belsõ szabályokat mutatja és mindegyik elé odaírja, hogy eddig mennyi csomag illeszkedett rájuk.</p></div><div class=paragraph><p>Az <code>ipfstat -oh</code> ugyanígy a kimentõ forgalom esetén mutatja a belsõ szabályokat és mindegyik elõtt feltünteti, hogy az adott pillanatig mennyi csomag illeszkedett rájuk.</p></div><div class=paragraph><p>A kimenete nagyjából ilyen lesz:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>2451423 pass out on xl0 from any to any
354727 block out on dc0 from any to any
430918 pass out quick on dc0 proto tcp/udp from any to any keep state</code></pre></div></div><div class=paragraph><p>Az <code>ipfstat</code> parancs talán egyik legfontosabb funkciója a <code>-t</code> kapcsolóval csalható elõ, melynek hatására a rendszerben aktív állapotok táblázatát mutatja meg ugyanúgy, ahogy a <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> a FreeBSD rendszerben futó programokat. Amikor a tûzfalunk támadás alatt áll, ezzel a funkcióval tudjuk a problémát beazonosítani, leásni a mélyébe és látni a támadótól érkezõ csomagokat. A kiegészítésképpen megadható alkapcsolók megadásával kiválaszthatjuk azt a cél vagy forrás IP-címet, portot vagy protokollt, amelyet valós idõben meg akarunk figyelni. Ennek részleteit az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfstat&amp;sektion=8&amp;format=html">ipfstat(8)</a> man oldalán láthatjuk.</p></div></div><div class=sect2><h3 id=_az_ipmon>30.5.6. Az IPMON<a class=anchor href=#_az_ipmon></a></h3><div class=paragraph><p>Az <code>ipmon</code> megfelelõ mûködéséhez be kell kapcsolnunk a rendszermag <code>IPFILTER_LOG</code> beállítását. Ez a parancs két különbözõ módban használható. Ha parancsot a <code>-D</code> opció nélkül gépeljük be, akkor ezek közül alapból a natív módot kapjuk meg.</p></div><div class=paragraph><p>A démon mód abban az esetben hasznos, ha folyamatosan naplózni akarjuk a rendszerben zajló eseményeket, majd késõbb ezeket átnézni. Így képes egymással együttmûködni a FreeBSD és az IPFILTER. A FreeBSD beépítve tartalmaz olyan lehetõséget, aminek révén magától cseréli a rendszernaplókat. Ezért ha átküldjük a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> démonnak a naplózandó üzeneteket, akkor sokkal jobban járunk, mintha egyszerûen csak mezei állományba naplóznánk. Az <span class=filename>rc.conf</span> alapértelmezései között az <code>ipmon_flags</code> beállítás a <code>-Ds</code> kapcsolókat rögzíti:</p></div><div class="literalblock programlisting"><div class=content><pre>ipmon_flags=&#34;-Ds&#34; # D = indítás démonként
                  # s = naplózás a syslog használatával
                  # v = a tcp ablak, ack, seq csomagok naplózása
                  # n = az IP-címek és portok nevének feloldása</pre></div></div><div class=paragraph><p>Ennek a viselkedésnek az elõnyei minden bizonnyal egyértelmûek. Segítségével képesek vagyunk az esetek megtörténte után átnézni, hogyan milyen csomagokat dobott el a rendszer, azok milyen címekrõl érkeztek és hova szánták. Ez egy komoly fegyver a támadók lenyomozásában.</p></div><div class=paragraph><p>Hiába engedélyezzük a naplózást, az IPF önszántából semmilyen naplózási szabályt nem fog gyártani. A tûzfal gazdájának kell eldöntenie, hogy a szabályokat közül melyiket akarja naplózni, és így neki kell megadnia a <code>log</code> kulcsszót ezekben az esetekben. Normális esetben csak a <code>deny</code> szabályokat naplózzák.</p></div><div class=paragraph><p>Egyáltalán nem ritka, hogy a szabályrendszer végén egy alapértelmezés szerint mindent eldobó szabály áll, amely naplóz. Ezzel lehetõségünk nyílik rögzíteni azokat a csomagokat, amelyek egyetlen szabályra sem illeszkedtek.</p></div></div><div class=sect2><h3 id=_naplózás_az_ipmon_használatával>30.5.7. Naplózás az IPMON használatával<a class=anchor href=#_naplózás_az_ipmon_használatával></a></h3><div class=paragraph><p>A syslogd egy saját módszert alkalmaz a naplózott adatok elkülönítésére. Egy "funkciók" (facility) és "szintek" (level) segítségével kialakított speciális csoportosítást alkalmaz. Az IPMON <code>-Ds</code> módja alapértelmezés szerint a <code>local0</code> "funkciót" használja. Ezen túl a következõ szinteken különíthetjük el igényeinknek megfelelõen a naplózott adatokat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>LOG_INFO - az átengedés vagy blokkolás helyett a <span class=s2>&#34;log&#34;</span> kulcsszóval ellátott csomagok
LOG_NOTICE - az át is engedett csomagok
LOG_WARNING - a blokkolt csomagok
LOG_ERR - a naplózott csomagok közül azok, amelyek túlságosan kicsik <span class=o>(</span>hibás a fejlécük<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Az IPFILTER csak akkor tud naplózni a <span class=filename>/var/log/ipfilter.log</span> állományba, ha elõtte létrehozzuk. Az alábbi parancs erre tökéletesen megfelelõ:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># touch /var/log/ipfilter.log</span></code></pre></div></div><div class=paragraph><p>A <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> mûködését az <span class=filename>/etc/syslog.conf</span> állományban szereplõ definíciók vezérlik. A <span class=filename>syslog.conf</span> állomány számottevõ mértékben képes meghatározni azt, ahogy a syslog az IPF és a hozzá hasonló alkalmazásoktól kapott rendszerszintû üzeneteket kezeli.</p></div><div class=paragraph><p>Az <span class=filename>/etc/syslog.conf</span> állományba az alábbi sor kell felvennünk:</p></div><div class="literalblock programlisting"><div class=content><pre>local0.* /var/log/ipfilter.log</pre></div></div><div class=paragraph><p>A <code>local0.*</code> megadásával az összes ilyen típusú üzenet egy elõre rögzített helyre kerül.</p></div><div class=paragraph><p>Az <span class=filename>/etc/syslog.conf</span> állományban elvégzett módosításokat úgy léptethetjük érvénybe, ha újraindítjuk a számítógépet vagy az <code>/etc/rc.d/syslogd reload</code> paranccsal megkérjük a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> démont, hogy olvassa újra az <span class=filename>/etc/syslog.conf</span> állományt.</p></div><div class=paragraph><p>Az imént létrehozott naplót ne felejtsük el megadni az <span class=filename>/etc/newsyslog.conf</span> állományban sem, és akkor ezzel a cseréjét is megoldjuk.</p></div></div><div class=sect2><h3 id=_a_naplózott_üzenetek_formátuma>30.5.8. A naplózott üzenetek formátuma<a class=anchor href=#_a_naplózott_üzenetek_formátuma></a></h3><div class=paragraph><p>Az <code>ipmon</code> által létrehozott üzenetek whitespace karakterekkel elválasztott adatmezõkbõl állnak. A következõ mezõk az összes üzenet esetében megjelennek:</p></div><div class="olist arabic"><ol class=arabic><li><p>A csomag megérkezésének dátuma</p></li><li><p>A csomag megérkezésének idõpontja. ÓÓ:PP:MM.E alakban jelennek meg az órák, percek, másodpercek és ezredmásodpercek (ez több számjegy hosszú is lehet) szerint</p></li><li><p>Azon interfész a neve, ahol a csomag feldolgozásra került, például <span class=filename>dc0</span></p></li><li><p>A szabályhoz tartozó csoport és sorszám, például <code>@0:17</code></p></li></ol></div><div class=paragraph><p>Ezek az <code>ipfstat -in</code> paranccsal nézhetõek meg.</p></div><div class="olist arabic"><ol class=arabic><li><p>Cselekvés: a p mint átment (passed), b mint blokkolt (blocked), S mint rövid csomag (short packet), n mint egyik szabályra sem illeszkedett (not match), L mint naplózás (log). A módosítók megjelenítésének sorrendje: S, p, b, n, L. A nagybetûs P és B azt jelzi, hogy a csomagot egy felsõbb szintû beállítás miatt naplózták, nem egy szabály hatására.</p></li><li><p>Címek: ez tulajdonképpen három mezõt takar: a forrás címet és portot (melyet egy vesszõ választ el), a → jelet és cél címet és portot. Például: <code>209.53.17.22,80 → 198.73.220.17,1722</code>.</p></li><li><p>A <code>PR</code> után a protokoll neve vagy száma olvasható, például <code>PR tcp</code>.</p></li><li><p>A <code>len</code> csomaghoz tartozó fejléc és törzsének teljes hosszát jelöli, például <code>len 20 40</code>.</p></li></ol></div><div class=paragraph><p>Amennyiben a csomag TCP, egy kötõjellel kezdõdõen további mezõk is megjelenhetnek a beállított opcióknak megfelelõ betûk képében. A betûket és beállításaikat az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=5&amp;format=html">ipf(5)</a> man oldalán olvashatjuk.</p></div><div class=paragraph><p>Amennyiben a csomag ICMP, a sort két mezõ zárja, melyek közül az elsõ tartalma mindig "ICMP", és ezt egy perjellel elválasztva az ICMP üzenet típusa és altípusa követi. Tehát például az ICMP 3/3 a "nem elérhetõ port" üzenetet hordozza.</p></div></div><div class=sect2><h3 id=firewalls-ipf-rules-script>30.5.9. A szabályok felírása szimbolikus helyettesítéssel<a class=anchor href=#firewalls-ipf-rules-script></a></h3><div class=paragraph><p>Az IPF használatában gyakorlott felhasználók közül néhányan képesek olyan stílusú szabályrendszert készíteni, ahol szimbolikus helyettesítést használnak. Ennek az egyik legnagyobb elõnye az, hogy ilyenkor elég csak a szimbolikus névhez tartozó értéket megváltoztatni és amikor a szkript lefut, akkor az összes rá hivatkozó szabályba ez kerül be. Szkript lévén a szimbolikus helyettesítéssel ki tudjuk emelni a gyakran használt értékeket és behelyettesíteni ezeket több helyre. Ezt a most következõ példában láthatjuk.</p></div><div class=paragraph><p>Az itt alkalmazott felírás kompatibilis az <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=csh&amp;sektion=1&amp;format=html">csh(1)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a> parancsértelmezõkkel.</p></div><div class=paragraph><p>A szimbolikus helyettesítést egy dollárjellel fejezzük ki: <code>$</code>.</p></div><div class=paragraph><p>A szimbolikus mezõkben nem szerepel a $ jelölés.</p></div><div class=paragraph><p>A szimbolikus mezõ tartalmát kettõs idézõjelbe (<code>"</code>) tesszük.</p></div><div class=paragraph><p>Kezdjük így el a szabályok írását:</p></div><div class="literalblock programlisting"><div class=content><pre>######### Az IPF szabályait tartalmazó szkript eleje ###########

oif=&#34;dc0&#34;            # a kimenõ interfész neve
odns=&#34;192.0.2.11&#34;    # az internet szolgáltató névszerverének IP-címe
myip=&#34;192.0.2.7&#34;     # a szolgáltatótól kapott statikus IP-címünk
ks=&#34;keep state&#34;
fks=&#34;flags S keep state&#34;

# Választhatunk, hogy az /etc/ipf.rules állományt ebbõl a szkriptbõl
# hozzuk létre vagy futtathatjuk &#34;magát&#34; a szkriptet.
#
# Egyszerre csak az egyik sort használjuk.
#
# 1) Ezzel gyárhatjuk le az /etc/ipf.rules állományt:
#cat &gt; /etc/ipf.rules &lt;&lt; EOF
#
# 2) Ezzel futtathajuk &#34;magát&#34; a szkriptet:
/sbin/ipf -Fa -f - &lt;&lt; EOF

# Engedélyezzük a szolgáltató névszerverének elérését.
pass out quick on $oif proto tcp from any to $odns port = 53 $fks
pass out quick on $oif proto udp from any to $odns port = 53 $ks

# Engedélyezzük kifelé a titkosítatlan www funkciót.
pass out quick on $oif proto tcp from $myip to any port = 80 $fks

# Engedélyezzük kifelé a TLS SSL felett üzemelõ titkosított www funkciót.
pass out quick on $oif proto tcp from $myip to any port = 443 $fks
EOF
################## Itt az IPF szkript vége ########################</pre></div></div><div class=paragraph><p>Ennyi lenne. A példában szereplõ szabályok most nem annyira lényegesek, a hangsúly most igazából a szimbolikus helyettesítésen és annak használatán van. Ha a fenti példát az <span class=filename>/etc/ipf.rules.script</span> állományba mentjük, akkor ezeket a szabályokat a következõ paranccsal újra tudjuk tölteni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh /etc/ipf.rules.script</span></code></pre></div></div><div class=paragraph><p>Egyetlen aprócska gond van a beágyazott szimbólumokat tartalmazó állományokkal: az IPF maga nem képes megérteni a helyettesítéseket, azért közvetlenül nem olvassa a szkriptet.</p></div><div class=paragraph><p>Ez a szkript két módon hasznosítható:</p></div><div class=ulist><ul><li><p>Vegyük ki megjegyzésbõl a <code>cat</code> paranccsal kezdõdõ sort, és tegyük megjegyzésbe az <code>/sbin/ipf</code> kezdetût. A megszokottak szerint tegyük az <code>ipfilter_enable="YES"</code> sort az <span class=filename>/etc/rc.conf</span> állományba, majd minden egyes módosítása után futtassuk le a szkriptet az <span class=filename>/etc/ipf.rules</span> állomány létrehozásához vagy frissítéséhez.</p></li><li><p>Tiltsuk le az IPFILTER aktiválását a rendszerindításkor, tehát írjuk bele az <code>ipfilter_enable="NO"</code> sort (ami mellesleg az alapértelmezett értéke) az <span class=filename>/etc/rc.conf</span> állományba.</p><div class=paragraph><p>Tegyünk egy, az alábbi szkripthez hasonlót az <span class=filename>/usr/local/etc/rc.d/</span> könyvtárba. A szkriptnek adjuk valamilyen értelmes nevet, például <span class=filename>ipf.loadrules.sh</span>. Az <span class=filename>.sh</span> kiterjesztés használata kötelezõ.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
sh /etc/ipf.rules.script</pre></div></div><div class=paragraph><p>A szkript engedélyeit állítsuk be úgy, hogy a <code>root</code> tulajdonában legyen és képes legyen olvasni, írni valamint végrehajtani.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 700 /usr/local/etc/rc.d/ipf.loadrules.sh</span></code></pre></div></div></li></ul></div><div class=paragraph><p>Most miután a rendszer elindult, az IPF szabályai be fognak töltõdni.</p></div></div><div class=sect2><h3 id=_szabályrendszerek_az_ipf_ben>30.5.10. Szabályrendszerek az IPF-ben<a class=anchor href=#_szabályrendszerek_az_ipf_ben></a></h3><div class=paragraph><p>Az IPF esetében a szabályrendszer olyan szabályokból áll, amelyek a csomagokról tartalmuk alapján eldöntik, hogy át kell engedni vagy vissza kell tartani. A gépek közt két irányban áramló csomagok egy munkamenet alapú társalgást képeznek. A tûzfalhoz tartozó szabályrendszer egyaránt feldolgozza a internetrõl a hálózatunk felé igyekvõ csomagokat, illetve a hálózatunk ezekre adott válaszait. Az egyes TCP/IP szolgáltatásokat (mint például telnet, www, levelezés stb.) a hozzájuk tartozó protokol és szabványos (fogadó) portszám írja le. Ezekre a forrásról általában valamilyen nem szabványos (magasabb értékû) portról érkeznek csomagok. Ekkor a kommunikáció összes paramétere (vagyis a portok és címek) bármelyike alapján definiálhatunk blokkolást vagy továbbengedést leíró szabályokat.</p></div><div class=paragraph><p>Az IPF eredetileg úgy íródott, hogy a szabályokat "az utolsó illeszkedõ szabály nyer" stílusban dolgozza fel és csak állapot nélküli szabályokat ismert. Az idõk folyamán az IPF szabályai kiegészültek a "quick" és az állapottartásra vonatkozó "keep state" opciókkal, amelynek köszönhetõen óriási mértékben korszerûsödött a szabályok feldolgozása.</p></div><div class=paragraph><p>A szakaszban szereplõ utasítások olyan szabályokat alkalmaznak, amelyekben egyaránt szerepel a "quick" és az állapottartásért felelõs "keep state" beállítás. Ez az inkluzív tûzfalak létrehozásának egyik alapeszköze.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>A tûzfal szabályainak összeállítása során <em>nagyon óvatosnak</em> kell lennünk! Bizonyos beállítások hatására akár <em>ki is zárhatjuk magunkat</em> a szerverünkrõl. Az ebbõl fakadó esetleges kellemetlenségek elkerülése érdekében javasoljuk, hogy a tûzfal alapjait elõször helyi konzolról építsük fel, ne pedig távolról, például ssh segítségével.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_a_szabályok_felépítése>30.5.11. A szabályok felépítése<a class=anchor href=#_a_szabályok_felépítése></a></h3><div class=paragraph><p>A szabályok felépítésének bemutatását itt most leszûkítjük a modern állapottartó szabályokra és az "elsõ illeszkedõ szabály nyer" típusú feldolgozásra. A szabályok felírásának régebbi módjai az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipf&amp;sektion=8&amp;format=html">ipf(8)</a> man oldalon találhatóak.</p></div><div class=paragraph><p>A <code>#</code> karakterrel egy megjegyzés kezdetét jelezzük, és általában a sor végén vagy egy külön sorban bukkan fel. Az üres sorokat a rendszer nem veszi figyelembe.</p></div><div class=paragraph><p>A szabályok kulcsszavakat tartalmaznak. Ezeknek a kulcsszavaknak balról jobbra haladva adott sorrendben kell szerepelniük. A kulcsszavakat kiemeltük. Egyes kulcsszavakhoz további beállítások is tartozhatnak, amelyek maguk is kulcsszavak lehetnek, és még további opciókkal rendelkezhetnek. Az alábbi nyelvtan mindegyik elemét kiemeltük és az alábbiakban egyenként kifejtjük a részleteiket.</p></div><div class=paragraph><p><em>CSELEKVÉS BE-KI OPCIÓK SZûRÉS ÁLLAPOTTARTÓ PROTOKOLL FORRÁS_CÍM,CÉL_CÍM OBJEKTUM PORTSZÁM TCP_BEÁLLÍTÁS ÁLLAPOTTARTÓ</em></p></div><div class=paragraph><p><em>CSELEKVÉS</em> = block | pass</p></div><div class=paragraph><p><em>BE-KI</em> = in | out</p></div><div class=paragraph><p><em>OPCIÓK</em> = log | quick | on <em>interfész</em></p></div><div class=paragraph><p><em>SZûRÉS</em> = proto <em>érték</em> | <em>forrás/cél IP</em> | port = <em>szám</em> | flags <em>beállítás</em></p></div><div class=paragraph><p><em>PROTOKOLL</em> = tcp/udp | udp | tcp | icmp</p></div><div class=paragraph><p><em>FORRÁS_CÍM,CÉL_CÍM</em> = all | from <em>objektum</em> to <em>objektum</em></p></div><div class=paragraph><p><em>OBJEKTUM</em> = <em>IP-cím</em> | any</p></div><div class=paragraph><p><em>PORTSZÁM</em> = <em>portszám</em></p></div><div class=paragraph><p><em>TCP_BEÁLLÍTÁS</em> = S</p></div><div class=paragraph><p><em>ÁLLAPOTTARTÓ</em> = keep state</p></div><div class=sect3><h4 id=_cselekvés>30.5.11.1. CSELEKVÉS<a class=anchor href=#_cselekvés></a></h4><div class=paragraph><p>A cselekvés határozza meg, hogy mit kell tenni azokkal a csomagokkal, amelyek illeszkednek a szabály többi részére. Minden szabályhoz tartoznia <em>kell</em> egy cselekvésnek. A következõ cselekvések közül választhatunk:</p></div><div class=paragraph><p>A <code>block</code> megadásával a szabályban szereplõ szûrési feltételre illeszkedõ csomagot eldobjuk.</p></div><div class=paragraph><p>A <code>pass</code> megadásával a szabályban szereplõ szûrési feltételre illeszkedõ csomagot átengedjük a tûzfalon.</p></div></div><div class=sect3><h4 id=_be_ki>30.5.11.2. BE-KI<a class=anchor href=#_be_ki></a></h4><div class=paragraph><p>Az összes szûrési szabály esetében kötelezõ egyértelmûen nyilatkozunk arról, hogy a bemenõ vagy a kimenõ forgalomra vonatkozik. Ezért a következõ kulcsszó vagy az <code>in</code> vagy pedig az <code>out</code>, de közülük egyszerre csak az egyiket szabad használni, máskülönben a szabály hibásnak minõsül.</p></div><div class=paragraph><p>Az <code>in</code> jelenti, hogy a szabályt az internet felõl az adott interfészen beérkezõ csomagokra kell alkalmazni.</p></div><div class=paragraph><p>Az <code>out</code> jelenti, hogy a szabályt az internet felé az adott interfészen kiküldött csomagokra kell alkalmazni.</p></div></div><div class=sect3><h4 id=_opciók>30.5.11.3. OPCIÓK<a class=anchor href=#_opciók></a></h4><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ezek az opciók csak a lentebb bemutatott sorrendben használhatók.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A <code>log</code> jelzi, hogy illeszkedés esetén a csomag fejlécét az <span class=filename>ipl</span> eszközön keresztül naplózni kell (lásd a naplózásról szóló szakaszt).</p></div><div class=paragraph><p>A <code>quick</code>jelzi, hogy illeszkedés esetén ez lesz a legutolsónak ellenõrzött szabály és így egy olyan "rövidzárat" tudunk képezni a feldolgozásban, amellyel elkerüljük a csomagra egyébként vonatkozó többi szabály illesztését. Ez az opció a korszerûsített szabályfeldolgozás kihasználásához elengedhetetlen.</p></div><div class=paragraph><p>Az <code>on</code> használatával a szûrés feltételei közé bevonhatjuk a csomaghoz tartozó hálózati interfészt. Itt az interfészek az <a href="https://man.freebsd.org/cgi/man.cgi?query=ifconfig&amp;sektion=8&amp;format=html">ifconfig(8)</a> által megjelenített formában adhatóak meg. Az opció megadásával csak az adott interfészen az adott irányba (befelé/kifelé) közlekedõ csomagokra fog illeszkedni a szabály. Ez az opció a korszerûsített szabályfeldolgozás kihasználásához nélkülözhetetlen.</p></div><div class=paragraph><p>Amikor naplózunk egy csomagot, akkor a hozzá tartozó fejléc az IPL csomagnaplózó pszeudo eszközhöz kerül. A <code>log</code> kulcsszó után közvetlenül a következõ minõsítõk szerepelhetnek (a következõ sorrendben):</p></div><div class=paragraph><p>A <code>body</code> jelzi, hogy a csomag tartalmának elsõ 128 byte-ját még jegyezzük fel a fejléc mellé.</p></div><div class=paragraph><p>A <code>first</code> minõsítõt akkor érdemes használnunk, amikor a <code>log</code> kulcsszót a <code>keep state</code> opcióval együtt alkalmazzuk, mivel ilyenkor csak a szabályt kialakító csomag kerül naplózásra és nem minden olyan, ami illeszkedik az állapottartási feltételekre.</p></div></div><div class=sect3><h4 id=_szûrés>30.5.11.4. SZûRÉS<a class=anchor href=#_szûrés></a></h4><div class=paragraph><p>Ebben a szakaszban olyan kulcsszavak jelenhetnek meg, amelyekkel a csomagok különféle tulajdonságai alapján ítélkezhetünk azok illeszkedésérõl. Itt adott egy kiinduló kulcsszó, amelyhez további kulcsszavak is tartoznak, és amelyek közül csak egyet választhatunk. Az alábbi általános tulajdonságok alapján tudjuk szûrni a csomagokat, ebben a sorrendben:</p></div></div><div class=sect3><h4 id=_protokoll>30.5.11.5. PROTOKOLL<a class=anchor href=#_protokoll></a></h4><div class=paragraph><p>A <code>proto</code> egy olyan kulcsszó, amelyhez hozzá kell rendelnünk még valamelyik opcióját is. Ez az opció segít az adott protokolloknak megfelelõen válogatni a csomagok között. A korszerûsített szabályfeldolgozás lehetõségeinek kihasználásához nélkülözhetetlen.</p></div><div class=paragraph><p>Opcióként a <code>tcp/udp | udp | tcp | icmp</code>, vagy bármelyik, az <span class=filename>/etc/protocols</span> állományban megtalálható kulcsszó felhasználható. A <code>tcp/udp</code> ebbõl a szempontból speciálisnak tekinthetõ, mivel hatására egyszerre illeszthetõek a szabályra a TCP és UDP csomagok, és így a protokolltól eltekintve azonos szabályok felesleges többszörözését kerülhetjük el.</p></div></div><div class=sect3><h4 id=_forrás_címcél_cím>30.5.11.6. FORRÁS_CÍM/CÉL_CÍM<a class=anchor href=#_forrás_címcél_cím></a></h4><div class=paragraph><p>Az <code>all</code> kulcsszó gyakorlatilag a "from any to any" ("bárhonnan bárhova") szinonímája és nem tartozik hozzá paraméter.</p></div><div class=paragraph><p>A <code>from forrás to cél</code> felépítése: a <code>from</code> és <code>to</code> kulcsszavak az IP-címek illesztésére használhatóak. Ilyenkor a szabályokban a forrás <em>és</em> a cél paramétereknek is szerepelniük kell. Az <code>any</code> egy olyan speciális kulcsszó, amely tetszõleges IP-címre illeszkedik. Néhány példa az alkalmazására: <code>from any to any</code> vagy <code>from 0.0.0.0/0 to any</code>, <code>from any to 0.0.0.0/0</code>, <code>from 0.0.0.0/0 to any</code> vagy <code>from any to 0.0.0.0</code>.</p></div><div class=paragraph><p>Az IP-címek megadhatóak pontozott numerikus formában a hálózati maszk bitekben mért hosszával együtt, vagy akár egyetlen pontozott numerikus IP-címként.</p></div><div class=paragraph><p>Nincs lehetõség olyan IP-címtartományok illesztésére, amelyek nem adhatóak meg kényelmesen ponttal elválasztott számok és maszk hosszával. A <a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/ipcalc/>net-mgmt/ipcalc</a> port az ilyen számításokat könnyíti meg. A hálózati maszkok hosszának megállapításban segíthet az említett segédprogram (angol nyelvû) honlapja: <a href=http://jodies.de/ipcalc>http://jodies.de/ipcalc</a>.</p></div></div><div class=sect3><h4 id=_port>30.5.11.7. PORT<a class=anchor href=#_port></a></h4><div class=paragraph><p>Amikor portra vonatkozó illeszkedést írunk elõ, megadhatjuk a forrásra és célra, amit aztán vagy csak TCP vagy pedig csak UDP csomagokra alkalmazunk. A portok feltételeinek megfogalmazásánál használhatjuk a portok számát vagy az <span class=filename>/etc/services</span> állományban szereplõ nevüket. Amikor a port egy <code>from</code> típusú objektum leírásában jelenik meg, akkor automatikusan a forrásportot jelenti, míg a <code>to</code> objektum leírásában pedig a célportot. A <code>to</code> objektumoknál a port megadása elengedhetetlen a korszerûsített szabályfeldolgozás elõnyeinek kihasználásához. Példa: <code>from any to any port = 80</code>.</p></div><div class=paragraph><p>Az egyes portokat különbözõ mûveletek segítségével, numerikusan hasonlíthatjuk össze, ahol akár porttartományt is megadhatunk.</p></div><div class=paragraph><p>port "=" | "!=" | "&lt;" | ">" | "⇐" | ">=" | "eq" | "ne" | "lt" | "gt" | "le" | "ge".</p></div><div class=paragraph><p>A porttartományok megadásához használjuk a <code>port</code> "&lt;>" | ">&lt;" felírási módot.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>A forrásra és célra vonatkozó paraméterek után szereplõ másik két paraméter nélkülözhetetlen a korszerûsített szabályfeldolgozás mûködéséhez.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_tcp_beállítás>30.5.11.8. TCP_BEÁLLÍTÁS<a class=anchor href=#_tcp_beállítás></a></h4><div class=paragraph><p>A beállítások csak a TCP forgalom szûrésénél érvényesülnek. A betûk jelölik azokat a lehetséges beállításokat, amelyek a TCP csomagok fejlécében megvizsgálhatóak.</p></div><div class=paragraph><p>A korszerûsített szabályfeldolgozás a <code>flags S</code> paraméter segítségével ismeri fel a TCP munkameneteket kezdeményezõ kéréseket.</p></div></div><div class=sect3><h4 id=_állapottartó>30.5.11.9. ÁLLAPOTTARTÓ<a class=anchor href=#_állapottartó></a></h4><div class=paragraph><p>A <code>keep state</code> jelzi, hogy a szabály paramétereinek megfelelõ bármely csomag aktiválja az állapottartó szûrés használatát.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ez a beállítás feltétlenül szükséges a korszerûsített szabályfeldolgozás megfelelõ kihasználásához.</p></div></td></tr></tbody></table></div></div></div><div class=sect2><h3 id=_állapottartó_csomagszûrés>30.5.12. Állapottartó csomagszûrés<a class=anchor href=#_állapottartó_csomagszûrés></a></h3><div class=paragraph><p>Az állapottartó szûrés a csomagok kétirányú áramlását egy létrejött kapcsolatba sorolja be. Amikor aktiválódik, az állapottartó szabály elõre dinamikusan létrehozza a kétirányú kommunikációban megforduló csomagokhoz a megfelelõ belsõ szabályokat. Olyan vizsgálatokat végez, amelyek segítségével ki tudja deríteni, hogy a csomag küldõje és címzettje között fennálló kétirányú kapcsolat érvényes szabályok szerint zajlik-e. Minden olyan csomagot, amely nem illeszkedik megfelelõen a kapcsolatra vonatkozó sémára, csalásnak tekintjük és automatikusan eldobjuk.</p></div><div class=paragraph><p>Az állapottartás révén lehetõségünk van a TCP vagy UDP kapcsolatokhoz tartozó ICMP csomagokat is átengedni a tûzfalon. Tehát ha kapunk egy 3-as típusú, 4-es kódú ICMP választ valamilyen böngészésre használt állapottartó szabályon keresztül kiküldött kérésre, akkor az automatikusan bejöhet. Amelyik csomagot az IPF egyértelmûen képes besorolni az aktív kapcsolatba, még ha az eltérõ protokollt is használ, beengedi.</p></div><div class=paragraph><p>Ami ilyenkor történik:</p></div><div class=paragraph><p>Az internethez csatlakozó interfészen keresztül kifelé haladó csomagokat elõször egy dinamikus állapottábla alapján illesztjük, és ha a csomag illeszkedik az aktív kapcsolatban következõként várt csomagra, akkor átmegy a tûzfalon és a dinamikus állapottáblában frissül a kapcsolat állapota. Az aktív munkameneten kívül csomagok pedig egyszerûen a kimenõ szabályrendszer szerint kerülnek ellenõrzésre.</p></div><div class=paragraph><p>Hasonlóan az elõzõhöz, az internethez csatlakozó interfészen keresztül befelé haladó csomagokat elõször egy dinamikus állapottábla alapján illesztjük, és ha a csomag illeszkedik az aktív kapcsolatban következõként várt csomagra, akkor átmegy a tûzfalon és a dinamikus állapottáblában frissül a kapcsolat állapota. Az aktív munkamenethez nem tartozó csomagok pedig egyszerûen a bejövõ szabályrendszer szerint kerülnek ellenõrzésre.</p></div><div class=paragraph><p>Amikor egy kapcsolat befejezõdik, automatikusan törlõdik a dinamikus állapottáblából.</p></div><div class=paragraph><p>Az állapottartó csomagszûrés használatával az újonnan keletkezõ kapcsolatok elutasítására vagy engedélyezésére tudunk koncentrálni. Ha engedélyeztük egy új kapcsolat létrejöttét, akkor a rákövetkezõ összes többi csomag automatikusan átmegy a tûzfalon és minden más hamis csomag eldobódik. Ha tiltjuk az új kapcsolatot, akkor egyetlen rákövetkezõ csomag sem juthat át. Az állapottartó szûrés által felkínált fejlett elemzési lehetõségek képesek védelmet nyújtani a behatolók részérõl alkalmazott megannyi különbözõ támadási módszer ellen.</p></div></div><div class=sect2><h3 id=_példa_inkluzív_szabályrendszerre>30.5.13. Példa inkluzív szabályrendszerre<a class=anchor href=#_példa_inkluzív_szabályrendszerre></a></h3><div class=paragraph><p>A most következõ szabályrendszer arra mutat példát, hogyan programozzunk le egy nagyon biztonságos inkluzív tûzfalat. Az inkluzív tûzfalak csak a szabályainak megfelelõ szolgáltatásokat engedik keresztül, és alapértelmezés szerint minden mást blokkolnak. Egy hálózat gépeit védõ tûzfalnak, amelyet gyakran "hálózati tûzfalnak" (network firewall) is neveznek, legalább két hálózati interfésszel kell rendelkeznie. Ezeket az interfészeket általában úgy állítják be, hogy tökéletesen megbíznak az egyik oldalban (a helyi hálózatban), a másikban (az internetben) pedig egyáltalán nem. A tûzfalat egyébként úgy is beállíthatjuk, hogy csak a tûzfalat mûködtetõ gépet védje - ezt "egyrendszeres tûzfalnak" (host based firewall) nevezik. Az ilyen típusú megoldásokat nem biztonságos hálózaton keresztül kommunikáló szervereknél alkalmaznak.</p></div><div class=paragraph><p>Mindegyik UNIX®-típusú rendszert, köztük a FreeBSD-t is úgy alakították ki, hogy az operációs rendszeren belüli kommunikáció az <span class=filename>lo0</span> interfészen és a <code>127.0.0.1</code> IP-címen keresztül történik. A tûzfal szabályai között feltétlenül szerepelniük kell olyanoknak, amelyek lehetõvé teszik ezen a speciális intefészen a csomagok zavartalan mozgását.</p></div><div class=paragraph><p>Az internetre csatlakozó interfészhez kell rendelni a kifelé és befelé haladó forgalom hitelesítését é a hozzáférésének vezérlését. Ez lehet a felhasználói PPP által létrehozott <span class=filename>tun0</span> interfész vagy a DSL-, illetve kábelmodemhez csatlakozó hálózati kártya.</p></div><div class=paragraph><p>Ahol egy vagy több hálózati kártya is csatlakozik több különbözõ helyi hálózathoz, úgy kell beállítani a hozzájuk tartozó interfészeket, hogy egymás felé és az internet felé képesek legyenek küldeni és fogadni.</p></div><div class=paragraph><p>A szabályokat elõször három nagy csoportba kell szerveznünk: elõször jönnek a megbízható interfészek, ezeket követik az internet felé mutató interfészek, végül internet felõl jövõ, nem megbízható interfészeke.</p></div><div class=paragraph><p>Az egyes csoportokban szereplõ szabályokat úgy kell megadni, hogy közülük elõre kerüljenek a leggyakrabban alkalmazottak, és a csoport utolsó szabálya blokkoljon és naplózzon minden csomagot az adott interfészen és irányban.</p></div><div class=paragraph><p>A kimenõ forgalomat vezérlõ szabályrendszer csak <code>pass</code> (tehát átengedõ) szabályokat tartalmazhat, amelyek bentrõl az interneten elérhetõ szolgáltatásokat azonosítják egyértelmûen. Az összes ilyen szabályban meg kell jelenni a <code>quick</code>, <code>on</code>, <code>proto</code>, <code>port</code> és <code>keep state</code> beállításoknak. A <code>proto tcp</code> szabályok esetében meg kell adni a <code>flag</code> opciót is, amivel fel tudjuk ismertetni a kapcsolatok keletkezését és ezen keresztül aktiválni az állapottartást.</p></div><div class=paragraph><p>A bejövõ forgalmat vezérlõ szabályrendszerben elõször az eldobni kívánt csomagokat kell megadni, aminek két eltérõ oka van. Elõször is elõfordulhat, hogy a veszélyes csomagok részleges illeszkedés miatt szabályosnak tûnnek. Az ilyen csomagokat értelemszerûen nem lenne szabad beengedni a szabályok részleges megfelelése alapján. A másodszor az eleve ismerten problémás és értelmetlen csomagokat csendben el kellene vetni, mielõtt a szakaszhoz tartozó utolsó szabály fogná meg és naplózná. Ez az utolsó szabály egyébként szükség esetén felhasználható a támadók elleni bizonyítékok begyûjtésére.</p></div><div class=paragraph><p>A másik, amire még oda kell figyelnünk, hogy a blokkolt csomagok esetében semmilyen válasz nem keletkezzen, egyszerûen csak tûnjenek el. Így a támadó nem fogja tudni, hogy a csomagjai vajon elérték-e a rendszerünket. Minél kevesebb információt tudnak összegyûjteni a rendszerünkrõl a támadók, annál több idõt kell szánniuk csínytevéseik kieszelésére. A <code>log first</code> opciót tartalmazó szabályok csak az illeszkedésnél fogják naplózni a hozzájuk tartozó eseményt. Erre láthatunk példát az <code>nmap OS fingerprint</code> szabálynál. Az <a class=package href=https://cgit.freebsd.org/ports/tree/security/nmap/>security/nmap</a> segédprogramot a támadók gyakran alkalmazzák a megtámadni kívánt szerver operációs rendszerének felderítésére.</p></div><div class=paragraph><p>Minden <code>log first</code> opcióval megadott szabály illeszkedésénél a <code>ipfstat -hio</code> parancs meghatározódik az eddigi illeszkedések aktuális száma. Nagyobb értékek esetében következtethetünk arra, hogy a rendszerünket megtámadták (vagyis csomagokkal árasztják éppen el).</p></div><div class=paragraph><p>Az ismeretlen portszámok felderítésére az <span class=filename>/etc/services</span> állomány, esetleg a <a href=http://www.securitystats.com/tools/portsearch.php>http://www.securitystats.com/tools/portsearch.php</a> (angol nyelvû) honlap használható.</p></div><div class=paragraph><p>Érdemes továbbá megnézni a trójai programok által használt portokat a <a href=http://www.simovits.com/trojans/trojans.html>http://www.simovits.com/trojans/trojans.html</a> címen (angolul).</p></div><div class=paragraph><p>A következõ szabályrendszer egy olyan biztonságos "inkluzív" típusú tûzfal, amelyet éles rendszeren is használnak. Ezt a rendszerünkön nem használt szolgáltatásokra vonatkozó <code>pass</code> szabályok törlésével könnyedén a saját igényeink szerint alakíthatjuk.</p></div><div class=paragraph><p>Ha nem akarunk látni bizonyos üzeneteket, akkor vegyünk fel hozzájuk egy <code>block</code> típusú szabályt a befelé irányuló forgalomhoz tartozó szabályok közé.</p></div><div class=paragraph><p>A szabályokban írjuk át a <span class=filename>dc0</span> interfész nevét annak a hálózati kártyának az interfészére, amelyen keresztül csatlakozunk az internethez. A felhasználói PPP esetében ez a <span class=filename>tun0</span> lesz.</p></div><div class=paragraph><p>Tehát a következõket kell beírni az <span class=filename>/etc/ipf.rules</span> állományba:</p></div><div class="literalblock programlisting"><div class=content><pre>#################################################################
# A helyi hálózatunkon zajló forgalmat ne korlátozzuk.
# Csak akkor kell, ha helyi hálózathoz is csatlakozunk.
#################################################################

#pass out quick on xl0 all
#pass in quick on xl0 all

#################################################################
# A belsõ interfészen szintén ne korlátozzunk semmit.
#################################################################
pass in quick on lo0 all
pass out quick on lo0 all

#################################################################
# Az internet felé forgalmazó interfész (kimenõ kapcsolatok)
# A saját hálózatunkról belülrõl vagy errõl az átjáróról
# kezdeményezett kapcsolatokat vizsgáljuk az internet felé.
#################################################################

# Engedélyezzük az internet szolgáltatók névszerverének elérését,
# az &#34;xxx&#34; helyett a névszervet IP-címét kell megadni.
# Másoljuk le ezeket a sorokat, ha a szolgáltatónknak több
# névszerverét is beakarjuk állítani. A címeiket az /etc/resolv.conf
# állományban találjuk.
pass out quick on dc0 proto tcp from any to xxx port = 53 flags S keep state
pass out quick on dc0 proto udp from any to xxx port = 53 keep state

# DSL vagy kábeles hálózatoknál engedélyezzük a
# szolgáltatónk DHCP szerverének elérését.
# Ez a szabály nem kell, ha &#34;felhasználói PPP&#34;-vel
# kapcsolódunk az internethez, ilyenkor tehát az egész
# csoport törölhetõ.
# Használjuk az alábbi szabályt és keressük meg a naplóban az
# IP-címet. Ha megtaláltuk, akkor tegyük bele a megjegyzésben
# szereplõ szabályba és töröljük az elsõ szabályt.
pass out log quick on dc0 proto udp from any to any port = 67 keep state
#pass out quick on dc0 proto udp from any to z.z.z.z port = 67 keep state

# Kifelé engedélyezzük a szabványos nem biztonságos WWW funkciókat.
pass out quick on dc0 proto tcp from any to any port = 80 flags S keep state

# Kifelé engedélyezzük a biztonságos WWW funkciókat TLS SSL
# protokollal.
pass out quick on dc0 proto tcp from any to any port = 443 flags S keep state

# Kifelé engedélyezzük az e-mailek küldését és fogadását.
pass out quick on dc0 proto tcp from any to any port = 110 flags S keep state
pass out quick on dc0 proto tcp from any to any port = 25 flags S keep state

# Kifelé engedélyezzük az idõ szolgáltatást.
pass out quick on dc0 proto tcp from any to any port = 37 flags S keep state

# Kifelé engedélyezzük az nntp híreket.
pass out quick on dc0 proto tcp from any to any port = 119 flags S keep state

# Kifelé engedélyezzük az átjáróról és a helyi hálózatról a nem
# biztonságos FTP használatát (passzív és akív módokban is). Ez a
# funkció a mûködéséhez a nat szabályokat tartalmazó állományban
# hivatkozott FTP proxyt használja. Amennyiben a pkg_add paranccsal
# csomagokat akarunk telepíteni az átjáróra, erre a szabályra
# mindenképpen szükségünk lesz.
pass out quick on dc0 proto tcp from any to any port = 21 flags S keep state

# Kifelé engedélyezzük az ssh/sftp/scp # (biztonságos telnet/rlogin/FTP)
# szolgáltatások # elérését az SSH (secure shell) használatával.
pass out quick on dc0 proto tcp from any to any port = 22 flags S keep state

# Kifelé engedélyezzük a nem biztonságos telnet elérését.
pass out quick on dc0 proto tcp from any to any port = 23 flags S keep state

# Kifelé engedélyezzük FreeBSD CVSUp funkcióját.
pass out quick on dc0 proto tcp from any to any port = 5999 flags S keep state

# Kifelé engedélyezzük a pinget.
pass out quick on dc0 proto icmp from any to any icmp-type 8 keep state

# Kifelé engedélyezzük a helyi hálózatról érkezõ whois kéréseket.
pass out quick on dc0 proto tcp from any to any port = 43 flags S keep state

# Minden mást eldobunk és naplózzuk az elsõ elõfordulásukat.
# Ez a szabály blokkol alapértelmezés szerint mindent.
block out log first quick on dc0 all

#################################################################
# Az internet felõli interfész (bejövõ kapcsolatok)
# A saját hálózatunk felé vagy erre az átjáróra
# nyitott kapcsolatokat vizsgáljuk az internet felõl.
#################################################################

# Eldobjuk az összes olyan bejövõ forgalmat, amit hivatalosan nem
# lehetne továbbítani vagy fenntartott címterülethez tartozik.
block in quick on dc0 from 192.168.0.0/16 to any    #RFC 1918: privát IP
block in quick on dc0 from 172.16.0.0/12 to any     #RFC 1918: privát IP
block in quick on dc0 from 10.0.0.0/8 to any        #RFC 1918: privát IP
block in quick on dc0 from 127.0.0.0/8 to any       #helyi
block in quick on dc0 from 0.0.0.0/8 to any         #helyi
block in quick on dc0 from 169.254.0.0/16 to any    #DHCP
block in quick on dc0 from 192.0.2.0/24 to any      #dokumentációs célokra fenntartva
block in quick on dc0 from 204.152.64.0/23 to any   #Sun klaszterek összekötésére használt
block in quick on dc0 from 224.0.0.0/3 to any       #D és E osztályú multicast

##### Itt eldobunk egy rakás csúf dolgot ############
# Ezeket nem akarjuk a naplóban látni:

# Eldobjuk a töredékcsomagokat.
block in quick on dc0 all with frags

# Eldobjuk a túlságosan rövid TCP csomagokat.
block in quick on dc0 proto tcp all with short

# Eldobjuk a forrás által közvetített (source routed) csomagokat.
block in quick on dc0 all with opt lsrr
block in quick on dc0 all with opt ssrr

# Elutasítjuk az &#34;OS fingerprint&#34; kéréseket.
# Naplózzuk az elsõ elõfordulást, így nálunk lesz a kíváncsiskodó
# egyén IP-címe.
block in log first quick on dc0 proto tcp from any to any flags FUP

# Eldobunk mindent, aminek speciális beállításai vannak.
block in quick on dc0 all with ipopts

# Elutasítjuk a publikus pinget.
block in quick on dc0 proto icmp all icmp-type 8

# Elutasítjuk az ident kéréseket.
block in quick on dc0 proto tcp from any to any port = 113

# Blokkoljuk az összes Netbios szolgáltatást: 137=név, 138=datagram,
# 139=session. A Netbios az MS Windows megosztását implementálja.
# Blokkoljuk az MS Windows hosts2 névszerver kéréseit is a 81-es
# porton.
block in log first quick on dc0 proto tcp/udp from any to any port = 137
block in log first quick on dc0 proto tcp/udp from any to any port = 138
block in log first quick on dc0 proto tcp/udp from any to any port = 139
block in log first quick on dc0 proto tcp/udp from any to any port = 81

# Engedélyezzük a szolgáltatónk DHCP szerverétõl érkezõ forgalmat.
# Ebben a szabályban meg kell adnunk a szolgáltató DHCP szerverének
# IP-címét, mivel itt csak a hiteles forrásból fogadunk el csomagokat.
# Erre csak DSL- és kábelmodemes kapcsolat esetében van szükség, a
# &#34;felhasználói PPP&#34; alkalmazása során szükségtelen. Ez az IP-cím
# megegyezik a kimenõ kapcsolatoknál megadott címmel.
pass in quick on dc0 proto udp from z.z.z.z to any port = 68 keep state

# Befelé engedélyezzük a szabványos WWW funkciót, mivel webszerverünk
# van.
pass in quick on dc0 proto tcp from any to any port = 80 flags S keep state

# Befelé engedélyezzük az internetrõl érkezõ nem biztonságos telnet
# kapcsolatokat. Azért nem biztonságos, mert az azonosítókat és
# jelszavakat titkosítatlan formában közli az interneten keresztül.
# Töröljük ezt a szabályt, ha nem használunk telnet szervert.
#pass in quick on dc0 proto tcp from any to any port = 23 flags S keep state

# Befelé engedélyezzük az internetrõl # érkezõ ssh/sftp/scp (biztonságos
# telnet/rlogin/FTP) # kapcsolatokat az SSH (secure shell) használatával.
pass in quick on dc0 proto tcp from any to any port = 22 flags S keep state

# Minden mást dobjuk el és naplózzuk az elsõ elõfordulásukat.
# Az elsõ alkalom naplózásával elejét tudjuk venni a &#34;Denial of
# Service&#34; típusú támadásoknak, amivel egyébként lehetséges lenne a
# napló elárasztása.
# Ez a szabály blokkol alapértelmezés szerint mindent.
block in log first quick on dc0 all
################### Itt van a szabályok vége ##############################</pre></div></div></div><div class=sect2><h3 id=_nat>30.5.14. NAT<a class=anchor href=#_nat></a></h3><div class=paragraph><p>A NAT jelentése <em>Network Address Translation</em>, vagyis hálózati címfordítás. A Linux® esetében ezt "IP masqueradingnak", vagyis IP maszkolásnak hívják. A hálózati címfordítás és az IP maszkolás lényegben ugyanazt takarja. Az IPF címfordításért felelõs funkciójának köszönhetõen képesek vagyunk a tûzfal mögött elhelyezkedõ helyi hálózat számára megosztani az internet-szolgáltatól kapott publikus IP-címet.</p></div><div class=paragraph><p>Sokakban felmerülhet a kérdés, hogy erre vajon mi szükségünk lehet. Az internet-szolgáltatók a magánszemélyeknek általában dinamikus IP-címeket osztanak ki. A dinamikus itt arra utal, hogy a címünk minden alkalommal változik, amikor betárcsázunk a szolgáltatóhoz vagy amikor ki- és bekapcsoljuk a modemünket. Ez a dinamikus IP-cím fog azonosítani minket az interneten.</p></div><div class=paragraph><p>Most tegyük fel, hogy öt gépünk van otthon, viszont csak egyetlen elõfizetéssel rendelkezünk. Ebben az esetben öt telefonvonalat kellene használnunk és mindegyik géphez elõfizetni az internetre.</p></div><div class=paragraph><p>A hálózati címfordítás alkalmazásával azonban mindössze egyetlen elõfizetés kell. A gépek közül négyet hozzákötünk egy switch-hez és a switch-et pedig a fennmaradó géphez, amelyen FreeBSD fut. Ez utóbbi lesz az így kialakított helyi hálózatunk átjárója. A tûzfalban mûködõ címfordítás segítségével a helyi hálózaton található gépek IP-címeit észrevétlenül át tudjuk fordítani a hálózatunk publikus IP-címére, ahogy a csomagok elhagyják az átjárót. A beérkezõ csomagok esetében mindez visszafelé történik meg.</p></div><div class=paragraph><p>Az IP-címek közül adott egy tartomány, amit a címfordítást használó helyi hálózatok részére tartanak fenn. Az RFC 1918 szerint az alábbi IP-címtartományok használhatók a helyi hálózatban, mivel ezeken keresztül közvetlenül sosem lehet kijutni az internetre:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Kezdõ IP: <code>10.0.0.0</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>-</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Záró IP: <code>10.255.255.255</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Kezdõ IP: <code>172.16.0.0</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>-</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Záró IP: <code>172.31.255.255</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Kezdõ IP: <code>192.168.0.0</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>-</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Záró IP: <code>192.168.255.255</code></p></td></tr></tbody></table></div><div class=sect2><h3 id=_ipnat>30.5.15. IPNAT<a class=anchor href=#_ipnat></a></h3><div class=paragraph><p>A címfordításra vonatkozó szabályokat az <code>ipnat</code> paranccsal tudjuk betölteni. Az ilyen típusú szabályokat általában az <span class=filename>/etc/ipnat.rules</span> állományban találjuk. A részleteket lásd az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipnat&amp;sektion=1&amp;format=html">ipnat(1)</a> man oldalán.</p></div><div class=paragraph><p>Amikor a címfordítás üzembe helyezése után meg akarjuk változtatni a címfordítás szabályait, elõször a címfordítás szabályait tartalmazó állományt módosítsuk, majd a belsõ címfordítási szabályok és a címfordítási táblázatban szereplõ aktív bejegyzések törléséhez futassuk le az <code>ipnat</code> parancsot a <code>-CF</code> beállítással.</p></div><div class=paragraph><p>A címfordítási szabályok újratöltését egy ehhez hasonló paranccsal tudjuk elvégezni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -CF -f /etc/ipnat.szabályok</span></code></pre></div></div><div class=paragraph><p>A címfordításhoz tartozó statisztikákat ezzel a paranccsal tudjuk lekérdezni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -s</span></code></pre></div></div><div class=paragraph><p>A címfordítási táblázatban pillanatnyilag szereplõ összerendeléseket a következõ paranccsal tudjuk listázni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -l</span></code></pre></div></div><div class=paragraph><p>A szabályok feldolgozásával és az aktív szabályokkal/bejegyzésekkel kapcsolatos információk részletezését így engedélyezhetjük:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipnat -v</span></code></pre></div></div></div><div class=sect2><h3 id=_a_címfordítási_szabályok>30.5.16. A címfordítási szabályok<a class=anchor href=#_a_címfordítási_szabályok></a></h3><div class=paragraph><p>A címfordítási szabályok nagyon rugalmasak és rengeteg olyan funkciót meg tudunk velük valósítani, ami az üzleti és otthoni felhasználók számára egyaránt hasznos.</p></div><div class=paragraph><p>Itt most a szabályok felépítését csak egyszerûsítve mutatjuk be, leginkább a nem üzleti környezetek tekintetében. A szabályok komplett formai leírását az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipnat&amp;sektion=5&amp;format=html">ipnat(5)</a> man oldalán találjuk.</p></div><div class=paragraph><p>Egy címfordítási szabály tehát valahogy így néz ki:</p></div><div class="literalblock programlisting"><div class=content><pre>map INTERFÉSZ HELYI_IP_TARTOMÁNY -&gt; PUBLIKUS_CÍM</pre></div></div><div class=paragraph><p>A szabályt a <code>map</code> kulcsszó kezdi.</p></div><div class=paragraph><p>A <em>INTERFÉSZ</em> helyére az internet felé mutató külsõ interfész nevét írjuk be.</p></div><div class=paragraph><p>A <em>HELYI_IP_TARTOMÁNY</em> lesz az, amelyben a kliensek címeznek. Ez például a <code>192.168.1.0/24</code>.</p></div><div class=paragraph><p>A <em>PUBLIKUS_CÍM</em> lehet egy külsõ IP-cím vagy a <code>0/32</code> speciális kulcsszó, amellyel a <em>FELÜLET</em>-hez rendelt IP-címre hivatkozunk.</p></div></div><div class=sect2><h3 id=_hogyan_mûködik_a_hálózati_címfordítás>30.5.17. Hogyan mûködik a hálózati címfordítás<a class=anchor href=#_hogyan_mûködik_a_hálózati_címfordítás></a></h3><div class=paragraph><p>A publikus cél felé haladó csomag megérkezik a helyi hálózatról. Miután a kimenõ kapcsolatokra vonatkozó szabályok átengedik, a címfordítás kapja meg a szerepet és fentrõl lefelé haladva nekilát alkalmazni a saját szabályait, ahol az elsõ egyezõ szerint cselekszik. A címfordítás a szabályokat a csomaghoz tartozó interfészre és a forrás IP-címére illeszti. Amikor a csomag interfészének neve illeszkedik egy címfordítási szabályra, akkor ezután a csomag forrás (vagyis a helyi hálózaton belüli) IP-címérõl igyekszik eldönteni, hogy a szabály nyilának bal oldalán szereplõ tartományba esik-e. Ha erre is illeszkedik, akkor a forrás IP-címét átírjuk a <code>0/32</code> kulcsszó alapján felderített publikus IP-címre. A címfordító rutin ezt feljegyzi a saját belsõ táblázatába, így amikor a csomag visszatér az internetrõl, akkor képes lesz visszafordítani az eredeti belsõ IP-címére és feldolgozásra átadni a tûzfal szabályainak.</p></div></div><div class=sect2><h3 id=_a_címfordítás_engedélyezése>30.5.18. A címfordítás engedélyezése<a class=anchor href=#_a_címfordítás_engedélyezése></a></h3><div class=paragraph><p>A címfordítás életre keltéséhez a következõket kell beállítanunk az <span class=filename>/etc/rc.conf</span> állományban.</p></div><div class=paragraph><p>Elõször engedélyezzük a gépünknek, hogy közvetítsen forgalmat az interfészek között:</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Minden alkalommal indítsuk el a címfordításért felelõs IPNAT programot:</p></div><div class="literalblock programlisting"><div class=content><pre>ipnat_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Adjuk meg az IPNAT számára a betöltendõ szabályokat:</p></div><div class="literalblock programlisting"><div class=content><pre>ipnat_rules=&#34;/etc/ipnat.rules&#34;</pre></div></div></div><div class=sect2><h3 id=_hálózati_címfordítás_nagyon_nagy_helyi_hálózatok_esetében>30.5.19. Hálózati címfordítás nagyon nagy helyi hálózatok esetében<a class=anchor href=#_hálózati_címfordítás_nagyon_nagy_helyi_hálózatok_esetében></a></h3><div class=paragraph><p>Az olyan helyi hálózatokban, ahol rengeteg PC található vagy több alhálózatot is tartalmaz, az összes privát IP-cím egyetlen publikus IP-címbe tömörítése igen komoly problémává tud dagadni és az azonos portok gyakori használata a helyi hálózatra kötött számítógépek között ütközéseket okoz. Két módon tudunk megoldást nyújtani erre a problémára.</p></div><div class=sect3><h4 id=_a_használható_portok_kiosztása>30.5.19.1. A használható portok kiosztása<a class=anchor href=#_a_használható_portok_kiosztása></a></h4><div class=paragraph><p>Egy normális címfordítási szabály valahogy így nézne ki:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 0/32</pre></div></div><div class=paragraph><p>A fenti szabályban a csomag forrásportját az IPNAT változatlanul a feldolgozás után hagyja. Ha ehhez még hozzátesszük a <code>portmap</code> kulcsszót, akkor ezzel utasítani tudjuk az IPNAT-ot, hogy csak az adott tartományban képezze le a forrásportokat. Például a következõ szabály hatására az IPNAT a forrásportokat egy adott tartományon belül fogja módosítani:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 0/32 portmap tcp/udp 20000:60000</pre></div></div><div class=paragraph><p>Ha viszont még inkább meg akarjuk könnyíteni a dolgunkat, akkor itt egyszerûen csak adjuk meg az <code>auto</code> kulcsszót, amellyel az IPNAT önmagától megállapítja, hogy milyen portokat tud használni:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 0/32 portmap tcp/udp auto</pre></div></div></div><div class=sect3><h4 id=_több_publikus_cím_használata>30.5.19.2. Több publikus cím használata<a class=anchor href=#_több_publikus_cím_használata></a></h4><div class=paragraph><p>Minden nagyobb helyi hálózat esetében elérkezünk ahhoz a ponthoz, ahol már egyetlen publikus cím nem elég. Ha több publikus IP-címmel is rendelkezünk, akkor ezekbõl a címekbõl egy "közös készletet" hozhatunk létre, amibõl majd az IPNAT válogathat miközben a csomagok címeit átírja kifelé menetben.</p></div><div class=paragraph><p>Például ahelyett, hogy a csomagokat egyetlen publikus IP-címre képeznénk le, ahogy itt tesszük:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 204.134.75.1</pre></div></div><div class=paragraph><p>A hálózati maszk segítségével meg tudjuk adni IP-címek egy tartományát is:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 204.134.75.0/255.255.255.0</pre></div></div><div class=paragraph><p>CIDR-jelöléssel:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 192.168.1.0/24 -&gt; 204.134.75.0/24</pre></div></div></div></div><div class=sect2><h3 id=_a_portok_átirányítása>30.5.20. A portok átirányítása<a class=anchor href=#_a_portok_átirányítása></a></h3><div class=paragraph><p>Gyakran elõfordul, hogy van webszerverünk, levelezõ szerverünk, adatbázis szerverünk és névszerverünk, melyek a helyi hálózat különbözõ gépein futnak. Ebben az esetben a szerverekhez tartozó forgalmat is fordítanunk kell, illetve valamilyen módon a bejövõ forgalmat is át kell irányítanunk a helyi hálózat megfelelõ gépeihez. Az IPNAT ezt a gondot a hálózati címfordítás átirányítást támogató funkcióival szünteti meg. Tegyük fel, hogy a <code>10.0.10.25</code> belsõ címen van egy webszerverünk, amelyhez a <code>20.20.20.5</code> publikus IP tartozik. Ilyenkor a következõ szabályt adjuk meg:</p></div><div class="literalblock programlisting"><div class=content><pre>rdr dc0 20.20.20.5/32 port 80 -&gt; 10.0.10.25 port 80</pre></div></div><div class=paragraph><p>vagy:</p></div><div class="literalblock programlisting"><div class=content><pre>rdr dc0 0.0.0.0/0 port 80 -&gt; 10.0.10.25 port 80</pre></div></div><div class=paragraph><p>Így tudjuk beállítani a <code>10.0.10.33</code> címmel rendelkezõ névszervert a kintrõl érkezõ névfeloldási kérések fogadására:</p></div><div class="literalblock programlisting"><div class=content><pre>rdr dc0 20.20.20.5/32 port 53 -&gt; 10.0.10.33 port 53 udp</pre></div></div></div><div class=sect2><h3 id=_az_ftp_és_a_címfordítás>30.5.21. Az FTP és a címfordítás<a class=anchor href=#_az_ftp_és_a_címfordítás></a></h3><div class=paragraph><p>Az FTP egy olyan õskövület, amely még az internet egy régi korszakából maradt fenn, amikor az egyetemek között még bérelt vonal létezett és az FTP szolgált a kutatók közt az állományok megosztására. Ez még abban az idõben történt, amikor a biztonság egyáltalán nem volt lényeges szempont. Az évek elõrehaladtával az FTP protokoll beleivódott a feltörekvõ internet gerincébe és a titkosítatlanul küldött azonosítóival és jelszavaival továbbra is ugyanolyan védtelen maradt. Az FTP két változatban, aktív és passzív módban képes mûködni. Az eltérés kettejük között az adatcsatorna megállapításában van. A passzív mód sokkal biztonságosabb, mivel ilyenkor az adatcsatornát az FTP kapcsolatot kezdeményezõ állítja be. Az FTP különbözõ módjainak magyarázatát és a köztük levõ különbséget a <a href=http://www.slacksite.com/other/ftp.html>http://www.slacksite.com/other/ftp.html</a> címen ismerhetjük meg részleteiben (angolul).</p></div><div class=sect3><h4 id=_az_ipnat_szabályai>30.5.21.1. Az IPNAT szabályai<a class=anchor href=#_az_ipnat_szabályai></a></h4><div class=paragraph><p>Az IPNAT egy speciális beépített FTP proxyval rendelkezik, amelyre a hálózati címfordítás leképezései között hivatkozhatunk. Képes figyelni az összes aktív vagy passzív FTP kapcsolathoz tartozó kimenõ kérést és ezekhez dinamikusan létrehozni olyan ideiglenes szûrési szabályokat, amelyek valóban csak az adatcsatornához felhasznált portokat tartalmazzák. Ezzel ki tudjuk küszöbölni az FTP azon káros hatását a tûzfalra nézve, hogy egyszerre túlságosan sok magasabb tartománybeli port legyen nyitva.</p></div><div class=paragraph><p>Ez a szabály a belsõ hálózat összes FTP forgalmát lekezeli:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 10.0.10.0/29 -&gt; 0/32 proxy port 21 ftp/tcp</pre></div></div><div class=paragraph><p>Ez a szabály pedig az átjáróról érkezõ FTP forgalommal bírkózik meg:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 0.0.0.0/0 -&gt; 0/32 proxy port 21 ftp/tcp</pre></div></div><div class=paragraph><p>Ez a szabály kezeli a belsõ hálózatról érkezõ összes nem FTP típusú forgalmat:</p></div><div class="literalblock programlisting"><div class=content><pre>map dc0 10.0.10.0/29 -&gt; 0/32</pre></div></div><div class=paragraph><p>Az FTP leképzésére vonatkozó szabály a szokásos leképzési szabály elé kerül. Az összes csomag fentrõl haladva az elsõ illeszkedõ szabály alapján kerül feldolgozásra. Elõször az interfész nevét vizsgáljuk, majd a belsõ hálózatbeli forrás IP-t, végül azt, hogy a csomag egy FTP kapcsolat része. Ha minden paraméterében megfelel, akkor az FTP proxy készít egy ideiglenes szûrési szabályt hozzá, amellyel az FTP kapcsolathoz tartozó csomagok mind a két irányba képesek lesznek vándorolni, természetesen a címfordítással együtt. Az összes többi bentrõl érkezõ csomag átlép ezen a szabályon és megáll a harmadiknál, ahol az interfésznek és forrás IP-nek megfelelõen átfordítjuk a címét.</p></div></div><div class=sect3><h4 id=_az_ipnat_szûrési_szabályai_ftp_re>30.5.21.2. Az IPNAT szûrési szabályai FTP-re<a class=anchor href=#_az_ipnat_szûrési_szabályai_ftp_re></a></h4><div class=paragraph><p>Az FTP esetében csak egyetlen szûrési szabályra van szükségünk a hálózati címfordításba épített FTP proxy használatához.</p></div><div class=paragraph><p>FTP proxy nélkül az alábbi három szabály kellene:</p></div><div class="literalblock programlisting"><div class=content><pre># Kifelé engedélyezzük a belsõ gépek FTP elérést az internet irányába,
# aktív és passzív módokban.
pass out quick on rl0 proto tcp from any to any port = 21 flags S keep state

# Kifelé engedélyezzük a passzív módhoz tartozó magasabb tartománybeli
# adatcsatornákat.
pass out quick on rl0 proto tcp from any to any port &gt; 1024 flags S keep state

# Aktív módban beengedjük az FTP szervertõl érkezõ adatcsatornát.
pass in quick on rl0 proto tcp from any to any port = 20 flags S keep state</pre></div></div></div></div></div></div><div class=sect1><h2 id=firewalls-ipfw>30.6. IPFW<a class=anchor href=#firewalls-ipfw></a></h2><div class=sectionbody><div class=paragraph><p>Az IPFIREWALL (IPFW) a FreeBSD által támogatott tûzfalazó alkalmazás, melyet a FreeBSD Projektben résztvevõ önkéntesek fejlesztettek ki és tartanak karban. Régi típusú, állapottartás nélküli szabályokat használ, és az itt használatos szabályírási technikát "egyszerû állapottartó megoldásnak" nevezzük.</p></div><div class=paragraph><p>Az IPFW szabvány FreeBSD-ben levõ, mintaként szolgáló szabályrendszere (ez az <span class=filename>/etc/rc.firewall</span> és <span class=filename>/etc/rc.firewall6</span> állományokban található meg) annyira egyszerû, hogy komolyabb módosítások nélkül nem ajánlatos használni. Ez a példa nem tartalmaz állapottartó szûrést, ami viszont a legtöbb esetben kívánatos lenne, ezért ezt a szakaszt nem erre alapozzuk.</p></div><div class=paragraph><p>Az IPFW állapottartás nélküli szabályainak felépítésében olyan technikailag kifinomult leválogatási képességek bújnak meg, amelyek jócskán meghaladják az átlagos tûzfalépítõk tudását. Az IPFW elsõsorban olyan szakemberek vagy szakmailag elõrehaladott felhasználók számára készült, akiknek speciális csomagszûrési igényeik vannak. A különbözõ protokollok használatának és a hozzájuk tartozó fejlécinformációk mindenre kiterjedõ ismerete szinte nélkülözhetetlen az IPFW valódi erejének kihasználásához. Ez a szint azonban túlmutat a kézikönyv ezen szakaszának keretein.</p></div><div class=paragraph><p>Az IPFW hét komponensbõl épül fel, melyek közül az elsõdleges a rendszermag tûzfalazásért felelõs szabályfeldolgozó és a hozzá tartozó csomagnyilvántartás, majd ezt követi a naplózás, a hálózati címfordítást aktiváló <code>divert</code> szabály, valamint a komolyabb célok megvalósítására alkalmas lehetõségek: a forgalom korlátozásáért felelõs dummynet, a továbbküldésre alkalmas <code>fwd rule</code> szabály, a hálózati hidak támogatása, illetve az ipstealth. Az IPFW egyaránt használható IPv4 és IPv6 esetén.</p></div><div class=sect2><h3 id=firewalls-ipfw-enable>30.6.1. Az IPFW engedélyezése<a class=anchor href=#firewalls-ipfw-enable></a></h3><div class=paragraph><p>Az IPFW az alap FreeBSD telepítésben külön, futás idõben betölthetõ modulként érhetõ el. Ha az <span class=filename>rc.conf</span> állományban megadjuk a <code>firewall_enable="YES"</code> beállítást, akkor a rendszer indulásakor ezt a modult dinamikusan betölti. Az IPFW-t csak akkor kell a FreeBSD rendszermagjába beépítenünk, ha szükségünk van a címfordítási funkciójára is.</p></div><div class=paragraph><p>Ha tehát az <span class=filename>rc.conf</span> állományban megadtuk a <code>firewall_enable="YES"</code> sort és újraindítottuk a számítógépünket, akkor a következõ fehérrel kiemelt üzenet fog megjelenni a rendszerindítás során:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ipfw2 initialized, divert disabled, rule-based forwarding disabled, default to deny, logging disabled</code></pre></div></div><div class=paragraph><p>A "logging disabled" üzenetbõl kiderül, hogy a modul nem végez naplózást. A naplózást és a hozzá tartozó részletesség szintjét úgy tudjuk beállítani, ha az <span class=filename>/etc/sysctl.conf</span> állományba felvesszük a következõ sorokat, amivel a következõ indításkor már mûködni fog:</p></div><div class="literalblock programlisting"><div class=content><pre>net.inet.ip.fw.verbose=1
net.inet.ip.fw.verbose_limit=5</pre></div></div></div><div class=sect2><h3 id=firewalls-ipfw-kernel>30.6.2. A rendszermag beállításai<a class=anchor href=#firewalls-ipfw-kernel></a></h3><div class=paragraph><p>Ha nem akarjuk kihasználni az IPFW által felkínált címfordítási lehetõségeket, akkor egyáltalán nem szükséges a FreeBSD rendszermagjába belefordítani a támogatását. Ezért az alábbiakat csak kiegészítõ információként tüntettük fel.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL</pre></div></div><div class=paragraph><p>Ez a beállítás engedélyezi az IPFW használatát a rendszermag részeként.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL_VERBOSE</pre></div></div><div class=paragraph><p>Ezzel és a <code>log</code> kulcsszóval tudjuk az IPFW szabályain keresztülhaladó csomagokat naplózni.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL_VERBOSE_LIMIT=5</pre></div></div><div class=paragraph><p>Ez az érték korlátozza a <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> segítségével naplózott azonos bejegyzések maximális számát. Ezt a beállítást olyan veszélyes környezetekben érdemes használnunk, ahol naplózni akarunk. Segítségével meg tudjuk akadályozni, hogy a rendszernapló elárasztásával megakasszák a rendszerünket.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPFIREWALL_DEFAULT_TO_ACCEPT</pre></div></div><div class=paragraph><p>Ezen beállítás hatására a tûzfal alapértelmezés szerint mindent átenged, ami általában akkor jöhet jól, amikor elõször beállítjuk a tûzfalat.</p></div><div class="literalblock programlisting"><div class=content><pre>options    IPDIVERT</pre></div></div><div class=paragraph><p>Ezzel a beállítással engedélyezzük a címfordítás használatát.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ha nem adjuk meg az IPFIREWALL_DEFAULT_TO_ACCEPT beállítást, vagy ha nem engedélyezzük a bejövõ csomagokat, akkor a gépünkre semmilyen csomag nem lesz képes bejutni, illetve onnan kijutni.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=firewalls-ipfw-rc>30.6.3. Az <span class=filename>/etc/rc.conf</span> beállításai<a class=anchor href=#firewalls-ipfw-rc></a></h3><div class=paragraph><p>Így tudjuk engedélyezni a tûzfalat:</p></div><div class="literalblock programlisting"><div class=content><pre>firewall_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>A FreeBSD-hez mellékelt alapértelmezett tûzfaltípusok közül az <span class=filename>/etc/rc.firewall</span> állomány átolvasásával tudunk választani, és megadni az alábbi helyett:</p></div><div class="literalblock programlisting"><div class=content><pre>firewall_type=&#34;open&#34;</pre></div></div><div class=paragraph><p>A következõ értékek állnak rendelkezésünkre:</p></div><div class=ulist><ul><li><p><code>open</code> - átengedi az összes forgalmat</p></li><li><p><code>client</code> - csak ezt a gépet védi</p></li><li><p><code>simple</code> - az egész hálózatot védi</p></li><li><p><code>closed</code> - a helyi interfész kivételével minden IP alapú forgalmat tilt</p></li><li><p><code>UNKNOWN</code> - tiltja a tûzfal szabályainak betöltését</p></li><li><p><span class=filename>állománynév</span> - a tûzfal szabályait tartalmazó állomány abszolút elérési útvonala</p></li></ul></div><div class=paragraph><p>Két különbözõ módon lehet betölteni a saját ipfw szabályainkat. Az egyik közülük, ha a <code>firewall_type</code> változóban megadjuk a <em>tûzfal szabályait</em> tartalmazó állomány abszolút elérési útvonalát, az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a> parancssori beállításai nélkül. Az alábbi példában egy olyan egyszerû szabályrendszert láthatunk, amely blokkolja az összes bejövõ és kimenõ forgalmat:</p></div><div class="literalblock programlisting"><div class=content><pre>add deny in
add deny out</pre></div></div><div class=paragraph><p>Másrészrõl az <code>firewall_script</code> változóban is megadhatjuk azt a szkriptet, amelyben a rendszerindítás során meghívjuk <code>ipfw</code> parancsot. Az iménti szabályrendszert az alábbi szkripttel tudjuk kiváltani:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh

ipfw -q flush

ipfw add deny in
ipfw add deny out</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ha a <code>firewall_type</code> változó <code>client</code> vagy <code>simple</code> értékét használjuk, akkor az <span class=filename>/etc/rc.firewall</span> állományban található alapértelmezett szabályokat érdemes átvizsgálnunk, hogy kellõen illeszkednek-e az adott géphez. Hozzátennénk, hogy a fejezetben szereplõ példák azt feltételezik, hogy a <code>firewall_script</code> értéke az <span class=filename>/etc/ipfw.rules</span> állomány.</p></div></td></tr></tbody></table></div><div class=paragraph><p>A naplózás így engedélyezhetõ:</p></div><div class="literalblock programlisting"><div class=content><pre>firewall_logging=&#34;YES&#34;</pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>A <code>firewall_logging</code> változó egyedül csak annyit tesz, hogy beállítja a <code>net.inet.ip.fw.verbose</code> sysctl változónak az <code>1</code> értéket (lásd <a href=#firewalls-ipfw-enable>Az IPFW engedélyezése</a>). A napló korlátozására nincs külön változó az <span class=filename>rc.conf</span> állományon belül, de az <span class=filename>/etc/sysctl.conf</span> állomány segítségével és manuálisan be tudjuk állítani a hozzá tartozó változót:</p></div><div class="literalblock programlisting"><div class=content><pre>net.inet.ip.fw.verbose_limit=5</pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>Amennyiben a gépünk átjáróként viselkedik, tehát a <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> segítségével címfordítást végez, a <a href=../advanced-networking/#network-natd>Hálózati címfordítás</a>ban olvashatunk utána, hogy ehhez az <span class=filename>/etc/rc.conf</span> állományban milyen beállításokat kell megadnunk.</p></div></div><div class=sect2><h3 id=firewalls-ipfw-cmd>30.6.4. Az IPFW parancs<a class=anchor href=#firewalls-ipfw-cmd></a></h3><div class=paragraph><p>Normál esetben az <code>ipfw</code> parancs használatos arra, hogy a tûzfal mûködése közben az aktív belsõ szabályai közé vegyünk fel vagy töröljünk közülük manuálisan bejegyzéseket. Ennek a módszernek az egyedüli hátránya, hogy az így végrehajtott módosítások el fognak veszni a rendszer leállításával. Itt inkább azt a megoldást javasoljuk, hogy az összes szabályt tegyük bele egy állományba és a rendszerindítás során ezt töltsük be, majd ha változtatni akarunk a tûzfalon, akkor ezt az állományt módosítsuk és a régiek törlésével töltsük be újra az egész szabályrendszert.</p></div><div class=paragraph><p>Az <code>ipfw</code> parancs mellesleg remekül használható a jelenleg futó tûzfalszabályok megjelenítésére a konzolon. Az IPFW nyilvántartásában az egyes szabályokhoz dinamikusan jönnek létre számlálók, amelyek a rá illeszkedõ csomagokat számolják. A tûzfal tesztelése folyamán a szabályok és hozzá tartozó számlálók lekérdezése a megfelelõ mûködés ellenõrzésének egyik lehetséges módja.</p></div><div class=paragraph><p>A szabályokat így tudjuk egymás után felsoroltatni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw list</span></code></pre></div></div><div class=paragraph><p>A szabályokat így tudjuk az utolsó illeszkedésük idejével együtt megjeleníteni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -t list</span></code></pre></div></div><div class=paragraph><p>A következõ példában a nyilvántartási információkat kérdezzük le, ekkor a szabályok mellett az illeszkedõ csomagok száma is láthatóvá válik. Az elsõ sorban a szabály száma szerepel, majd ezt követi rendre az illeszkedõ kimenõ és bejövõ csomagok mennyisége, valamint végül maga a szabály.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -a list</span></code></pre></div></div><div class=paragraph><p>A statikus szabályok mellett a dinamikusakat így lehet kilistázni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -d list</span></code></pre></div></div><div class=paragraph><p>A lejárt dinamikus szabályokat is meg tudjuk nézni:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -d -e list</span></code></pre></div></div><div class=paragraph><p>A számlálók nullázása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw zero</span></code></pre></div></div><div class=paragraph><p>Csak a <em>SZÁM</em> sorszámú szabályhoz tartozó számlálók nullázása:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw zero SZÁM</span></code></pre></div></div></div><div class=sect2><h3 id=firewalls-ipfw-rules>30.6.5. Szabályrendszerek az IPFW-ben<a class=anchor href=#firewalls-ipfw-rules></a></h3><div class=paragraph><p>Az IPFW esetében a szabályrendszer olyan szabályokból áll, amelyek a csomagokról tartalmuk alapján eldöntik, hogy át kell engedni vagy vissza kell tartani. A gépek közt két irányban áramló csomagok egy munkamenet alapú társalgást képeznek. A tûzfalhoz tartozó szabályrendszer egyaránt feldolgozza a internetrõl a hálózatunk felé igyekvõ csomagokat, illetve a hálózatunk ezekre adott válaszait. Az egyes TCP/IP szolgáltatásokat (mint például telnet, www, levelezés stb.) a hozzájuk tartozó protokol és szabványos (fogadó) portszám írja le. Ezekre a forrásról általában valamilyen nem szabványos (magasabb értékû) portról érkeznek csomagok. Ekkor a kommunikáció összes paramétere (vagyis a portok és címek) bármelyike alapján definiálhatunk blokkolást vagy továbbengedést leíró szabályokat.</p></div><div class=paragraph><p>Amikor egy csomag eléri a tûzfalat, a szabályrendszer elsõ szabályával kerül összehasonlításra és amíg nem illeszkedik valamelyikre, addig lefut rá a többi szabály is fentrõl lefelé egyesével, a sorszámuknak megfelelõ növekvõ sorrendben. Ha a csomag megfelel valamelyik szabály leválogatási paramétereinek, akkor a benne megnevezett cselekvés zajlik le, és számára a feldolgozás befejezõdik. Ezt a viselkedést neveztük "az elsõ illeszkedés nyer" típusú keresésnek. Amennyiben a csomag egyetlen szabályra sem illeszkedik, akkor az IPFW 65535-ös sorszámú állandó szabálya fogja elcsípni, amely feladata szerint eldobja az összes hozzá beérkezõ csomagot anélkül, hogy bármit is válaszolna a csomag feladójának.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A keresés a <code>count</code>, <code>skipto</code> és <code>tee</code> szabályok után még folytatódik.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Az itt szereplõ utasítások különbözõ állapottartásra vonatkozó opciókat, például a <code>keep state</code>, <code>limit</code>, <code>in</code>, <code>out</code> és <code>via</code> kulcsszavakat tartalmazó szabályokon alapulnak. Lényegében ezt tekinthetjük az inkluzív típusú tûzfalak kiindulási alapjaként.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>A tûzfal szabályainak beállítása során nem árt óvatosnak lennünk, mert figyelmetlenségünk révén könnyen kizárathatjuk magunkat a gépünkrõl.</p></div></td></tr></tbody></table></div><div class=sect3><h4 id=firewalls-ipfw-rules-syntax>30.6.5.1. A szabályok felépítése<a class=anchor href=#firewalls-ipfw-rules-syntax></a></h4><div class=paragraph><p>Az itt bemutatásra kerülõ szabályok felépítését csak olyan mértékig részletezzük, ami elengedõ a szabványos inkluzív típusú tûzfalak kialakításához. A szabályok felépítésének pontos leírását az <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=8&amp;format=html">ipfw(8)</a> man oldalán találhatjuk meg.</p></div><div class=paragraph><p>A szabályok kulcsszavakat tartalmaznak. Ezeket a kulcsszavakat soronként egy elõre rögzített sorrendben kell szerepeltetni. A kulcsszavakat a szövegben kiemeltük. Bizonyos kulcsszavakhoz további opciókhoz is tartozhatnak, amelyek gyakran maguk is kulcsszavak és szintén további opciókat tartalmazhatnak.</p></div><div class=paragraph><p>A <code>#</code> egy megjegyzés kezdetét jelzi, mely egyaránt megjelenhet egy külön sorban, vagy egy szabályt tartalmazó sor végén. Az üres sorok nem vesznek részt a feldolgozásban.</p></div><div class=paragraph><p><em>PARANCS SZABÁLY_SZÁM CSELEKVÉS NAPLÓZÁS SZûRÉS ÁLLAPOTTARTÁS</em></p></div><div class=sect4><h5 id=_parancs>30.6.5.1.1. PARANCS<a class=anchor href=#_parancs></a></h5><div class=paragraph><p>Minden új szabály elõttt az <span class=parameter>add</span> (mint hozzáadás) parancsnak kell szerepelni, amellyel a belsõ táblázatba tudjuk felvenni.</p></div></div><div class=sect4><h5 id=_szabály_szám>30.6.5.1.2. SZABÁLY_SZÁM<a class=anchor href=#_szabály_szám></a></h5><div class=paragraph><p>A szabályokhoz mindig tartozik egy sorszám is.</p></div></div><div class=sect4><h5 id=_cselekvés_2>30.6.5.1.3. CSELEKVÉS<a class=anchor href=#_cselekvés_2></a></h5><div class=paragraph><p>A szabályhoz az alábbi cselekvések valamelyike kapcsolható, amely akkor hajtódik végre, amikor a csomag megfelel a hozzá tartozó szûrési feltételeknek.</p></div><div class=paragraph><p><span class=parameter>allow | accept | pass | permit</span></p></div><div class=paragraph><p>A fentiek közül mindegyik ugyanazt jelenti, vagyis hatásukra az illeszkedõ csomag kilép a tûzfalból. Ez a szabály megállítja a keresést.</p></div><div class=paragraph><p><span class=parameter>check-state</span></p></div><div class=paragraph><p>A csomagot a dinamikus szabályokat tároló táblázattal veti össze. Ha itt egyezést talál, akkor végrehajtja az egyezõ dinamikus szabályhoz tartozó cselekvést, minden más esetben továbblép a következõ szabályra. Ennek a szabálynak nincs illeszthetõ paramétere. Ha a szabályrendszerben nem szerepel ilyen, akkor a dinamikus szabályok vizsgálatát az elsõ <code>keep-state</code> vagy <code>limit</code> használatánál vonja be a rendszer.</p></div><div class=paragraph><p><span class=parameter>deny | drop</span></p></div><div class=paragraph><p>Mind a két szó ugyanarra utal, vagyis a szabályra illeszkedõ csomagokat el kell dobni. Ebben az esetben a keresés befejezõdik.</p></div></div><div class=sect4><h5 id=_naplózás>30.6.5.1.4. NAPLÓZÁS<a class=anchor href=#_naplózás></a></h5><div class=paragraph><p><span class=parameter>log</span> vagy <span class=parameter>logamount</span></p></div><div class=paragraph><p>Amikor egy csomag egy <code>log</code> kulcsszót tartalmazó szabályra illeszkedik, akkor a rendszernaplóban egy üzenet keletkezik a <code>security</code> (biztonság) funkción keresztül. A naplóba ténylegesen csak akkor kerül bele az üzenet, ha az adott szabály még nem haladta meg a hozzá tartozó <code>logamount</code> paraméter értékét. Ha ezt nem adtuk meg, akkor az itt érvényes korlát a <code>net.inet.ip.fw.verbose_limit</code> sysctl változóból fog származni. A nulla érték mind a két esetben megszünteti ezt a korlátozást. Ha elértük a korlátot, akkor a naplózást úgy tudjuk újra engedélyezni, ha töröljük a naplózáshoz tartozó számláló értékét, lásd az <code>ipfw reset log</code> parancsot.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A naplózás mindig az összes paraméter illeszkedésének ellenõrzése után történik, de még a cselekvés (accept, deny) elvégzése elõtt. Teljesen rajtunk múlik, hogyan milyen szabályokat naplózunk.</p></div></td></tr></tbody></table></div></div><div class=sect4><h5 id=_szûrés_2>30.6.5.1.5. SZûRÉS<a class=anchor href=#_szûrés_2></a></h5><div class=paragraph><p>Ebben a szakaszban azok a kulcsszavak találhatóak, amelyek segítségével a csomagok különbözõ tulajdonságait tudjuk megvizsgálni és eldönteni, hogy illeszkedik-e a szabályra vagy sem. A következõ általános tulajdonságokat tudjuk megvizsgálni, ebben a kötött sorrendben:</p></div><div class=paragraph><p><span class=parameter>udp | tcp | icmp</span></p></div><div class=paragraph><p>Bármilyen más olyan protokoll is megadható, amely megtalálható az <span class=filename>/etc/protocols</span> állományban. Ezzel adjuk a csomaghoz tartozó protokollt. Használata kötelezõ.</p></div><div class=paragraph><p><span class=parameter>from <em>forrás</em> to <em>cél</em></span></p></div><div class=paragraph><p>Mind a <code>from</code> és <code>to</code> kulcsszavak IP-címek illesztésére alkalmasak. A szabályoknak tartalmazniuk kell a <em>forrás</em> ÉS a <em>cél</em> paramétereket is. Az <code>any</code> egy olyan kulcsszó, amely tetszõleges IP-címre illeszkedik. A <code>me</code> pedig egy olyan speciális kulcsszó, amely a tûzfalat mûködtetõ FreeBSD-s gép (tehát ez a gép) adott interfészhez tartozó IP-címét jelöli, mint ahogy a <code>from me to any</code>, <code>from any to me</code>, <code>from 0.0.0.0/0 to any</code>, <code>from any to 0.0.0.0/0</code>, <code>from 0.0.0.0 to any</code>, <code>from any to 0.0.0.0</code> vagy <code>from me to 0.0.0.0</code> paraméterekben. Az IP-címek numerikus pontozott formában a hálózati maszk hosszával együtt (CIDR-jelöléssel), vagy egyszerûen csak pontozott formában adhatóak meg. A hálózati maszkok megállapításában a <a class=package href=https://cgit.freebsd.org/ports/tree/net-mgmt/ipcalc/>net-mgmt/ipcalc</a> port lehet segítségünkre. Errõl bõvebb információkat a segédprogram honlapján, a <a href=http://jodies.de/ipcalc>http://jodies.de/ipcalc</a> címen találhatunk (angolul).</p></div><div class=paragraph><p><span class=parameter>port <em>szám</em></span></p></div><div class=paragraph><p>A portszámokat is ismerõ protokollok esetében (mint például a TCP vagy UDP) adhatjuk meg. Fontos, hogy itt annak a szolgáltatásnak a portszámát adjuk meg, amelyre a szabály vonatkozik. A szolgáltatás (az <span class=filename>/etc/services</span> állományból származó) nevét is megadhatjuk a port száma helyett.</p></div><div class=paragraph><p><span class=parameter>in | out</span></p></div><div class=paragraph><p>A beérkezõ valamint a kimenõ csomagokat adhatjuk meg ezen a módon. Itt az <code>in</code> és <code>out</code> kulcsszavak, melyeket kötelezõ megadni a szabály részeként.</p></div><div class=paragraph><p><span class=parameter>via <em>interfész</em></span></p></div><div class=paragraph><p>Név szerint az adott interfészen keresztül haladó csomagokat tudjuk szûrni. A <code>via</code> kulcsszó hatására a használt interfész is számítani fog a csomag feldolgozása során.</p></div><div class=paragraph><p><span class=parameter>setup</span></p></div><div class=paragraph><p>Ez a kulcsszó a TCP csomagok esetében a kapcsolatok felépítésére vonatkozó kéréseket segít beazonosítani.</p></div><div class=paragraph><p><span class=parameter>keep-state</span></p></div><div class=paragraph><p>Ez egy kötelezõ kulcsszó. Feldolgozásakor a tûzfal létrehoz dinamikus szabályt, amely alapértelmezés szerint az egyazon protokollt használó forrás és cél IP/port párosok közti kétirányú forgalomra fog automatikusan illeszkedni.</p></div><div class=paragraph><p><span class=parameter>limit {<em>forráscím</em> | <em>forrásport</em> | <em>célcím</em> | <em>célport</em>}</span></p></div><div class=paragraph><p>A tûzfal csak <em>N</em> darab, a szabálynak megfelelõ azonos paraméterû kapcsolatot fog átengedi. Itt egy vagy több forrás- és célcím valamint forrás- és célport adható meg. A <code>limit</code> és a <code>keep-state</code> egy szabályon belül nem használható. A <code>limit</code> ugyanazokat az állapottartó funkciókat képviseli, mint a <code>keep-state</code>, csak a saját kiegészítéseivel megtoldva.</p></div></div></div><div class=sect3><h4 id=_állapottartás>30.6.5.2. ÁLLAPOTTARTÁS<a class=anchor href=#_állapottartás></a></h4><div class=paragraph><p>Az állapottartó szûrés a kétirányú csomagváltásokat egy létrejött kapcsolatba sorolja. Olyan vizsgálatokat végez, amivel képes megállapítani, hogy a csomag küldõje és címzettje között kialakult kommunikáció követ-e valamilyen kétirányú csomagküldésre érvényes folyamatot. Az így felállított sablontól eltérõ összes csomag hamisnak minõsül és automatikusan eldobásra kerül.</p></div><div class=paragraph><p>A <code>check-state</code> segítségével ellenõrizhetjük, hogy az adott csomag a IPFW szerint megfelel-e valamelyik dinamikusan leképzett szabálynak. Ha egyezik valamelyikõjükkel, akkor a csomag a tûzfalból kilépve folytatja útját és a kommunikációban soron következõ csomag számára létrejön egy másik dinamikus szabály. Ha nincs egyezés, akkor csomag feldolgozása a szabályrendszer következõ szabályánál folytatódik.</p></div><div class=paragraph><p>A dinamikus szabályokat kezelõ rutin sebezhetõ, mivel ha egyszerre nagy mennyiségû SYN csomagot küldünk, akkor olyan sok dinamikus bejegyzés keletkezik, hogy egyszerûen kifogyunk a rendelkezésre álló erõforrásokból. A FreeBSD fejlesztõi azonban az ilyen természetû támadások kivédésére is felkészítették, és kialakították belõle a <code>limit</code> opciót. Alkalmazásával le tudjuk korlátozni az egyszerre folyó párhuzamos kapcsolatok számát a forrás vagy a cél a <code>limit</code> paraméternél megadott mezõinek és a csomag IP-címe alapján. Így az adott szabályhoz és IP-címhez csak elõre rögzített mennyiségû nyitott állapotú dinamikus szabály létezhet egy idõben. Ha ezt a korlátot átlépjük, a csomag eldobódik.</p></div></div><div class=sect3><h4 id=_a_tûzfal_üzeneteinek_naplózása>30.6.5.3. A tûzfal üzeneteinek naplózása<a class=anchor href=#_a_tûzfal_üzeneteinek_naplózása></a></h4><div class=paragraph><p>A naplózás elõnyei nyilvánvalóak. Ha engedélyezzük, aktiválása után képesek leszünk olyan információknak utánanézni, mint például milyen csomagokat dobtunk el, honnan érkeztek, hova tartottak. Ez egy komoly fegyverünk lehet a potenciális támadókkal szemben.</p></div><div class=paragraph><p>Azonban hiába engedélyezzünk önmagában a naplózást, attól az IPFW még saját magától nem fog naplózást elõíró szabályokat gyártani. A tûzfal karbantartóinak maguknak kell eldöntenie, hogy a szabályrendszerben mely szabályokhoz tartozzon naplózás, nekik kell felvenni ezekhez a <code>log</code> kulcsszót. Általában csak az eldobással járó <code>deny</code> típusú szabályokat vagy a bejövõ ICMP pingeket szokták naplózni. Gyakran úgy oldják meg ezt, hogy a szabályrendszer utolsó szabályaként lemásolják az <code>ipfw</code> alapértelmezett "mindent eldobunk" szabályát és a naplózást adják meg benne. Ezen a módon fény derül azokra a csomagokra, amelyek a szabályrendszerben semmire sem illeszkedtek.</p></div><div class=paragraph><p>A naplózás azonban egy kétélû fegyver, mivel ha nem vagyunk elég körültekintõek, akkor a sok naplóinformáció között könnyen el tudunk veszni és a lemezünk is gyorsan betelhet a mindent elfoglaló naplóktól. Mellesleg a naplók megdagasztását célzó DoS típusú támadás a rendszerek lebénítására alkalmazott egyik legõsibb technika. Ezek az üzenetek nem csak a rendszernaplóba kerülnek bele, hanem az elsõdleges konzol képernyõjére is kiíródnak, ami egy idõ után idegesítõ tud lenni.</p></div><div class=paragraph><p>A rendszermag <code>IPFIREWALL_VERBOSE_LIMIT=5</code> beállításával azonban képesek vagyunk korlátozni azokat a rendszernapló felé küldött egymás után következõ üzeneteket, amelyek ugyanarra a szabályra vonatkoznak. Amikor ezt a beállítást megadjuk a rendszermag fordításánál, akkor az egyes szabályokhoz az általa meghatározott értéken felül nem jön létre több hasonló üzenet. Hiszen semmi sem derül ki 200 teljesen azonos naplóüzenetbõl. Például, ha az egyes szabályokhoz legfeljebb öt egymást követõ üzenetet engedélyezünk, akkor a többi fennmaradó azonos üzenetet összeszámolja a rendszer és a következõ módon közvetíti a rendszernaplózó szolgáltatás felé:</p></div><div class="literalblock programlisting"><div class=content><pre>last message repeated 45 times</pre></div></div><div class=paragraph><p>Ami magyarul így hangzik:</p></div><div class="literalblock programlisting"><div class=content><pre>az utolsó üzenet 45 alkalommal ismétlõdött meg</pre></div></div><div class=paragraph><p>Az összes csomagokkal kapcsolatos naplózás alapértelmezés szerint a <span class=filename>/var/log/security</span> állományba kerül, amelyet az <span class=filename>/etc/syslog.conf</span> állomány definiál.</p></div></div><div class=sect3><h4 id=firewalls-ipfw-rules-script>30.6.5.4. Szabályokat tartalmazó szkript készítése<a class=anchor href=#firewalls-ipfw-rules-script></a></h4><div class=paragraph><p>A rutinosabb IPFW felhasználók a szabályokat egy állományban programozzák le olyan stílusban, hogy szkriptként is futtatható legyen. Ennek az egyik legnagyobb elõnye, hogy a tûzfal szabályai így egyszerre cserélhetõek a rendszer újraindítása nélkül. Ez a módszer nagyon kényelmes az új szabályok kipróbálásánál, mivel tetszõleges alkalommal végrehajthatjuk. Mivel ez egy szkript, ki tudjuk használni az itt megszokott szimbolikus helyettesítés által felkínált lehetõségeket, és ezzel a gyakran használt értékeket is egyszerre több szabályban tudjuk helyettesíteni. Erre a következõkben fogunk egy konkrét példát látni.</p></div><div class=paragraph><p>A szkript felépítése kompatibilis a <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=csh&amp;sektion=1&amp;format=html">csh(1)</a> és <a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a> parancsértelmezõkkel. A szimbolikus mezõk helyettesítését a $ vagyis dollárjel vezeti be. Maguk a szimbolikus mezõk nem tartalmazzák a $ elõtagot. A szimbolikus mezõk értékeit "kettõs idézõjelek" között kell megadni.</p></div><div class=paragraph><p>A szabályok összeírását kezdjük el így:</p></div><div class="literalblock programlisting"><div class=content><pre>####### itt kezdõdik az ipfw szabályait tartalmazó szkript ######
#
ipfw -q -f flush       # töröljük az összes aktuális szabályt
# Set defaults
oif=&#34;tun0&#34;             # a kimenõ interfész
odns=&#34;192.0.2.11&#34;      # az internet szolgáltató névszerverének IP-címe
cmd=&#34;ipfw -q add &#34;     # a szabályok hozzáadásához szükséges elemek
ks=&#34;keep-state&#34;        # csupán a lustaság miatt
$cmd 00500 check-state
$cmd 00502 deny all from any to any frag
$cmd 00501 deny tcp from any to any established
$cmd 00600 allow tcp from any to any 80 out via $oif setup $ks
$cmd 00610 allow tcp from any to $odns 53 out via $oif setup $ks
$cmd 00611 allow udp from any to $odns 53 out via $oif $ks
#### itt fejezõdik be az ipfw szabályait tartalmazó szkript ######</pre></div></div><div class=paragraph><p>Ezzel készen is vagyunk. Most ne törõdjünk a példában szereplõ szabályokkal, itt most a szimbolikus helyettesítés használatát igyekeztük bemutatni.</p></div><div class=paragraph><p>Ha az iménti példát az <span class=filename>/etc/ipfw.rules</span> állományba mentettük el, akkor az alábbi parancs kiadásával tudjuk újratölteni a benne szereplõ szabályokat:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh /etc/ipfw.rules</span></code></pre></div></div><div class=paragraph><p>Az <span class=filename>/etc/ipfw.rules</span> állományt egyébként tetszõleges néven hívhatjuk és bárhová rakhatjuk.</p></div><div class=paragraph><p>Ugyanez természetesen elérhetõ a következõ parancsok egymás utáni begépelésével is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw -q -f flush</span>
<span class=c># ipfw -q add check-state</span>
<span class=c># ipfw -q add deny all from any to any frag</span>
<span class=c># ipfw -q add deny tcp from any to any established</span>
<span class=c># ipfw -q add allow tcp from any to any 80 out via tun0 setup keep-state</span>
<span class=c># ipfw -q add allow tcp from any to 192.0.2.11 53 out via tun0 setup keep-state</span>
<span class=c># ipfw -q add 00611 allow udp from any to 192.0.2.11 53 out via tun0 keep-state</span></code></pre></div></div></div><div class=sect3><h4 id=_állapottartó_szabályrendszerek>30.6.5.5. Állapottartó szabályrendszerek<a class=anchor href=#_állapottartó_szabályrendszerek></a></h4><div class=paragraph><p>A most következõ címfordítás nélküli szabályrendszer arra mutat példát, hogyan valósítsunk meg egy biztonságos "inkluzív" tûzfalat. Az inkluzív tûzfalak csak a szabályainak megfelelõ szolgáltatásokat engedik át, minden mást alapértelmezés szerint tiltanak. A komplett hálózati szegmensek védelmére összeállított tûzfalaknak legalább két interfészük van, amelyek mindegyikéhez tartoznia kell szabályoknak a megfelelõ mûködéshez.</p></div><div class=paragraph><p>Az UNIX® mintájú operációs rendszer, köztül a FreeBSD is olyan, hogy a rendszerben belüli kommunikációt a <span class=filename>lo0</span> nevû interfészen és a <code>127.0.0.1</code> IP-címen bonyolítja le. A tûzfalban mindenképpen szerepelniük kell olyan szabályoknak, amelyek gondoskodnak ezen speciális belsõ csomagok zavartalan közlekedésérõl.</p></div><div class=paragraph><p>Az internet felé csatlakozó interfész lesz az, amelyen keresztül a kifelé menõ kéréseket hitelesítjük és vezéreljük az internet elérését, valamint ahol szûrjük az internet felõl érkezõ kéréseket. Ez lehet a PPP esetében a <span class=filename>tun0</span> eszköz, vagy a DSL-, illetve kábelmodemhez csatlakozó hálózati kártya.</p></div><div class=paragraph><p>Abban az esetben, amikor egy vagy több hálózati kártyával csatlakozunk a tûzfal mögött található belsõ helyi hálózatra, szintén gondoskodnunk kell a helyi hálózaton belül mozgó csomagok akadálymentes továbbításáról.</p></div><div class=paragraph><p>A szabályokat elõször három nagyobb osztályba kell sorolnunk: az összes szabadon forgalmazó interfész, a publikus kimenõ és a publikus bejövõ interfész csoportjába.</p></div><div class=paragraph><p>A publikus interfészekhez tartozó csoportokban úgy kell rendeznünk a szabályokat, hogy elõre kerüljenek a gyakrabban használtak és hátra a kevésbé használtak, valamint a csoportok utolsó szabálya blokkoljon és naplózzon minden csomagot az adott interfészen és irányban.</p></div><div class=paragraph><p>A következõ szabályrendszerben szereplõ, a kimenõ kapcsolatokat tartalmazó csoport csak olyan <code>allow</code> típusú szabályokat tartalmaz, amelyek szûrési feltételei egyértelmûen azonosítják az interneten elérhetõ szolgáltatásokat. Az összes szabályban megjelennek a <code>proto</code>, <code>port</code>, <code>in</code>/<code>out</code>, <code>via</code> és <code>keep state</code> opciók. A <code>proto tcp</code> szabályokban emellett szerepel még egy <code>setup</code> opció is, amellyel a kapcsolatokat kezdeményezõ csomagokat tudjuk azonosítani és felvenni az állapottartásért felelõs dinamikus szabályok közé.</p></div><div class=paragraph><p>A bejövõ forgalmat vezérlõ szabályrendszerben elõször az eldobni kívánt csomagokat kell megadni, aminek két eltérõ oka van. Elõször is elõfordulhat, hogy a veszélyes csomagok részleges illeszkedés miatt szabályosnak tûnnek. Az ilyen csomagokat értelemszerûen nem lenne szabad beengedni a szabályok részleges megfelelése alapján. A másodszor az eleve ismerten problémás és értelmetlen csomagokat csendben el kellene vetni, mielõtt a szakaszhoz tartozó utolsó szabály fogná meg és naplózná. Ez az utolsó szabály egyébként szükség esetén felhasználható a támadók elleni bizonyítékok begyûjtésére.</p></div><div class=paragraph><p>A másik, amire még oda kell figyelnünk, hogy a blokkolt csomagok esetében semmilyen válasz nem keletkezzen, egyszerûen csak tûnjenek el. Így a támadó nem fogja tudni, hogy a csomagjai vajon elérték-e a rendszerünket. Minél kevesebb információt tudnak összegyûjteni a rendszerünkrõl a támadók, annál biztonságosabbnak tekinthetõ. Amikor ismeretlen portokra érkezõ csomagokat naplózunk, érdemes az <span class=filename>/etc/services/</span> állományban vagy <a href=http://www.securitystats.com/tools/portsearch.php>http://www.securitystats.com/tools/portsearch.php</a> címen (angolul) utánanézni a porthoz tartozó szolgáltatásnak. A különbözõ trójai programok által portok számai ezen a linken érhetõek el (angolul): <a href=http://www.simovits.com/trojans/trojans.html>http://www.simovits.com/trojans/trojans.html</a>.</p></div></div><div class=sect3><h4 id=_példa_egy_inkluzív_szabályrendszerre>30.6.5.6. Példa egy inkluzív szabályrendszerre<a class=anchor href=#_példa_egy_inkluzív_szabályrendszerre></a></h4><div class=paragraph><p>A most következõ, címfordítást nem tartalmazó szabályrendszer teljesen inkluzív típusú. Éles rendszereken is nyugodtan alkalmazhatjuk. Egyszerûen csak annyit kell tennünk, hogy megjegyzésbe tesszük az olyan szolgáltatásokra vonatkozó szabályokat, amelyeket nem akarunk engedélyezni. Amikor pedig olyan üzenetek jelennek meg a naplóban, amelyeket nem akarunk tovább látni, a bejövõ kapcsolatokhoz vegyünk fel egy <code>deny</code> típusú szabályt hozzájuk. Minden szabályban cseréljük ki a <code>dc0</code> interfészt arra a hálózati kártyára, amely közvetlenül csatlakoztatja rendszerünket az internethez. A felhasználói PPP esetében ez a <code>tun0</code>.</p></div><div class=paragraph><p>A szabályok használatában felfedezhetünk egyfajta rendszerszerûséget:</p></div><div class=ulist><ul><li><p>Mindegyik sorban, ahol az internet felé nyitunk meg egy kapcsolatot, a <code>keep-state</code> opciót használjuk.</p></li><li><p>Az internetrõl az összes hitelesített szolgáltatás elérése tartalmazza a <code>limit</code> opciót az elárasztások kivédése miatt.</p></li><li><p>Az összes szabályban az <code>in</code> vagy az <code>out</code> paraméterrel megadjuk szûrni kívánt forgalom irányát.</p></li><li><p>Az összes szabályban szerepel a <code>via</code> paraméterrel a csomagokat továbbító interfész neve.</p></li></ul></div><div class=paragraph><p>Az alábbi szabályokat tegyük az <span class=filename>/etc/ipfw.rules</span> állományba.</p></div><div class="literalblock programlisting"><div class=content><pre>############## Itt kezdõdnek az IPFW szabályai ##########################
# Kezdés elõtt töröljük az összes aktív szabályt.
ipfw -q -f flush

# Állítsuk be a parancsok további szükséges opciót.
cmd=&#34;ipfw -q add&#34;
pif=&#34;dc0&#34;     # az internethez csatlakozó
              # interfész neve

#################################################################
# A belsõ hálózat számára ne korlátozzunk semmit se.
# Ha nincs helyi hálózatunk, akkor erre nincs szükségünk.
# Az &#39;xl0&#39; nevét írjuk át a helyi hálózatra csatlakozó
# interfész nevére.
################################################################
#$cmd 00005 allow all from any to any via xl0

################################################################
# A rendszer belsõ interfészét se szûrjük.
################################################################
$cmd 00010 allow all from any to any via lo0

################################################################
# A csomagot engedjük át a tûzfalon, ha korábban már felvettünk
# hozzá egy dinamikus szabályt a keep-state opcióval.
################################################################
$cmd 00015 check-state

################################################################
# Az internet felé forgalmazó interfész (kimenõ kapcsolatok)
# A saját hálózatunkról belülrõl vagy errõl az átjáróról
# kezdeményezett kapcsolatokat vizsgáljuk az internet felé.
################################################################

# Kifelé engedélyezzük az internet-szolgáltatónk névszerverének
# elérését. Az x.x.x.x a szolgáltatónk névszerverének IP-címe
# legyen. Ha a szolgáltatónak több névszervere is van, akkor
# másoljuk le ezeket a sorokat és az /etc/resolv.conf
# állományban található IP-címeket helyettesítsük be.
$cmd 00110 allow tcp from any to x.x.x.x 53 out via $pif setup keep-state
$cmd 00111 allow udp from any to x.x.x.x 53 out via $pif keep-state

# Kábel/DSL konfigurációk esetében kifelé engedélyezzük a
# szolgáltatónk DHCP szerverének elérését. Ha a &#34;felhasználói
# PPP&#34;-t használjuk, akkor erre nem lesz szükségünk, az egész
# csoportot törölhetjük. Az alábbi szabállyal csíphetjük el a
# beírandó IP-címet. Ha a naplóban megtaláltuk, akkor vegyük
# ki az elsõ szabályt, a másodikba írjuk bele a címet és
# engedélyezzük.
$cmd 00120 allow log udp from any to any 67 out via $pif keep-state
#$cmd 00120 allow udp from any to x.x.x.x 67 out via $pif keep-state

# Kifelé engedélyezzük a szabvány nem biztonságos WWW
# funkció elérését.
$cmd 00200 allow tcp from any to any 80 out via $pif setup keep-state

# Kifelé engedélyezzük a biztonságos HTTPS funkció
# elérését TLS SSL használatával.
$cmd 00220 allow tcp from any to any 443 out via $pif setup keep-state

# Kifelé engedélyezzük a e-mailek küldését és fogadását.
$cmd 00230 allow tcp from any to any 25 out via $pif setup keep-state
$cmd 00231 allow tcp from any to any 110 out via $pif setup keep-state

# Kifelé engedélyezzük a FreeBSD (a make install és a CVSUP)
# funkcióit. Ezzel lényegében a rendszeradminisztrátornak
# ,,ISTENI&#39;&#39; jogokat adunk.
$cmd 00240 allow tcp from me to any out via $pif setup keep-state uid root

# Kifelé engedélyezzük a pinget.
$cmd 00250 allow icmp from any to any out via $pif keep-state

# Kifelé engedélyezzük az idõ szolgáltatást.
$cmd 00260 allow tcp from any to any 37 out via $pif setup keep-state

# Kifelé engedélyezzük az nntp news szolgáltatást
# (vagyis a hírcsoportokat)
$cmd 00270 allow tcp from any to any 119 out via $pif setup keep-state

# Kifelé engedélyezzük a biztonságos FTP, telnet és SCP
# elérését az SSH (secure shell) használatával.
$cmd 00280 allow tcp from any to any 22 out via $pif setup keep-state

# Kifelé engedélyezzük a whois szolgáltatást.
$cmd 00290 allow tcp from any to any 43 out via $pif setup keep-state

# Dobjuk el és naplózzunk mindent, ami megpróbál kijutni.
# Ez a szabály gondoskodik róla, hogy alapértelmezés szerint
# mindent blokkoljunk.
$cmd 00299 deny log all from any to any out via $pif

################################################################
# Az internet felõli interfész (bejövõ kapcsolatok)
# A saját hálózatunk felé vagy erre az átjáróra
# nyitott kapcsolatokat vizsgáljuk az internet felõl.
################################################################

# Blokkoljunk minden olyan bejövõ forgalmat, amely a fenntartott
# címtartományok felé tart.
$cmd 00300 deny all from 192.168.0.0/16 to any in via $pif  #RFC 1918: privát IP
$cmd 00301 deny all from 172.16.0.0/12 to any in via $pif   #RFC 1918: privát IP
$cmd 00302 deny all from 10.0.0.0/8 to any in via $pif      #RFC 1918: privát IP
$cmd 00303 deny all from 127.0.0.0/8 to any in via $pif     #helyi
$cmd 00304 deny all from 0.0.0.0/8 to any in via $pif       #helyi
$cmd 00305 deny all from 169.254.0.0/16 to any in via $pif  #DHCP
$cmd 00306 deny all from 192.0.2.0/24 to any in via $pif    #dokumentációs célokra fenntartott
$cmd 00307 deny all from 204.152.64.0/23 to any in via $pif #Sun klaszterek összekötésére használt
$cmd 00308 deny all from 224.0.0.0/3 to any in via $pif     #D és E osztályú multicast

# A nyilvános pingek tiltása.
$cmd 00310 deny icmp from any to any in via $pif

# Az ident szolgáltatás tiltása.
$cmd 00315 deny tcp from any to any 113 in via $pif

# Blokkoljuk az összes Netbios szolgáltatást: 137=név, 138=datagram,
# 139=session. A Netbios az MS Windows megosztását implementálja.
# Blokkoljuk az MS Windows hosts2 névszerver kéréseit is a 81-es
# porton.
$cmd 00320 deny tcp from any to any 137 in via $pif
$cmd 00321 deny tcp from any to any 138 in via $pif
$cmd 00322 deny tcp from any to any 139 in via $pif
$cmd 00323 deny tcp from any to any 81 in via $pif

# Eldobjuk az összes késõn érkezõ csomagot.
$cmd 00330 deny all from any to any frag in via $pif

# Eldobjuk azokat az ACK csomagokat, amelyek egyik dinamikus
# szabálynak sem felelnek meg.
$cmd 00332 deny tcp from any to any established in via $pif

# Befelé engedélyezzük a szolgáltató DHCP szerverének válaszát. Ebben
# a szabályban csak a DHCP szerver IP-címe szerepelhet, mivel ez az
# egyetlen olyan hitelesített forrás, ami ilyen csomagokat küldhet.
# Ez csak a kábeles és DSL típusú kapcsolatok esetében szükséges.
# Amikor a &#34;felhasználói PPP&#34;-vel csatlakozunk az internethez, nem
# kell ez a szabály. Ugyanazt az IP-címet kell megadnunk, amelyet a
# kimenõ kapcsolatoknál is.
#$cmd 00360 allow udp from any to x.x.x.x 67 in via $pif keep-state

# Befelé engedélyezzük a szabvány WWW funkciót, mivel webszerverünk
# is van.
$cmd 00400 allow tcp from any to me 80 in via $pif setup limit src-addr 2

# Befelé engedélyezzük a biztonságos FTP, telnet és SCP
# típusú kapcsolatokat az internetrõl.
$cmd 00410 allow tcp from any to me 22 in via $pif setup limit src-addr 2

# Befelé engedélyezzük az internetrõl érkezõ nem biztonságos telnet
# kapcsolatokat. Azért tekintjük nem biztonságosnak, mert az
# azonosítók és a jelszavak az interneten titkosítatlanul vándorolnak.
# Töröljük ezt a csoportot, ha nincs telnet szolgáltatásunk.
$cmd 00420 allow tcp from any to me 23 in via $pif setup limit src-addr 2

# Dobjuk el és naplózzuk az összes többi kintrõl érkezõ csomagot.
$cmd 00499 deny log all from any to any in via $pif

# Alapértelmezés szerint dobjuk el mindent. Az ide érkezõ
# csomagokat is naplózzuk, amibõl többet is ki tudunk majd
# deríteni.
$cmd 00999 deny log all from any to any
############# Itt fejezõdnek be az IPFW szabályai #####################</pre></div></div></div><div class=sect3><h4 id=_példa_hálózati_címfordításra_és_állapottartásra>30.6.5.7. Példa hálózati címfordításra és állapottartásra<a class=anchor href=#_példa_hálózati_címfordításra_és_állapottartásra></a></h4><div class=paragraph><p>Az IPFW címfordító funkciójának kihasználásához további konfigurációs beállítások alkalmazására is szükségünk lesz. A rendszermagban opció között meg kell adnunk az <code>option IPDIVERT</code> sort a többi <code>IPFIREWALL</code> sor mellett, és fordítanunk egy saját verziót.</p></div><div class=paragraph><p>Emellett még az <span class=filename>/etc/rc.conf</span> állományban is engedélyezni kell az IPFW alapvetõ funkcióit.</p></div><div class="literalblock programlisting"><div class=content><pre>natd_enable=&#34;YES&#34;                   # engedélyezzük a címfordításért felelõs démont
natd_interface=&#34;rl0&#34;                # az internet felé mutató hálózati kártya neve
natd_flags=&#34;-dynamic -m&#34;            # -m = a portszámok megtartása, ha lehetséges</pre></div></div><div class=paragraph><p>Az állapottartó szabályok használata a <code>divert natd</code> címfordítási opcióval együtt nagyban növeli a szabályrendszer leprogramozásának bonyolultságát. A <code>check-state</code> és <code>divert natd</code> szabályok helye kritikus a megfelelõ mûködés tekintetében. Az eddig megszokott egyszerû viselkedés itt már nem érvényesül. Bevezetünk egy új cselekvést is, amelynek a neve <code>skipto</code>. A <code>skipto</code> parancs használatához elengedhetetlen a szabályok sorszámozása, mivel pontosan tudnunk kell, hogy a <code>skipto</code> hatására hova kell ugrania a vezérlésnek.</p></div><div class=paragraph><p>A következõ példában nem fogunk sok megjegyzést látni, mivel benne az egyik lehetséges programozási stílust próbáljuk érzékeltetni és a csomagok szabályrendszerek közti áramlását magyarázzuk.</p></div><div class=paragraph><p>A feldolgozás a szabályokat tartalmazó állomány tetején található elsõ szabállyal kezdõdik, és innen egyesével pereg végig lefelé a feldolgozás egészen addig, amíg a csomag a szûrési feltételek valamelyikének eleget nem tesz és távozik a tûzfalból. Leginkább a 100-as, 101-es, 450-es, 500-as és 510-es sorszámú szabályokat emelnénk ki. Ezek vezérlik kimenõ és bejövõ csomagok fordítását, ezért a hozzájuk tartozó dinamikus állapottartó bejegyzések mindig a helyi hálózat IP-címeire hivatkoznak. Amit még érdemes megfigyelnünk, hogy az összes áteresztõ és eldobó szabályban szerepel a csomag haladási iránya (tehát kimenõ vagy éppen bejövõ) és az érintett interfészt megnevezése. Emellett azt is vegyük észre, hogy az összes kifelé irányuló kapcsolatlétrehozási kérés az 500-as sorszámú szabályhoz fog ugrani a címfordítás elvégzéséhez.</p></div><div class=paragraph><p>Tegyük fel, hogy a helyi hálózatunkon levõ felhasználók szeretnek honlapokat nézgetni az interneten. A honlapok a 80-as porton keresztül kommunikálnak. Tehát amikor egy ilyen csomag eléri a tûzfalat, nem fog illeszkedni a 100-as szabályra, mert a fejléce szerint kifelé halad és nem befelé. A 101-es szabályon is átlép, mivel ez az elsõ csomag, így a dinamikus állapottartó táblázatban sem szerepel még. A csomag végül a 125-ös szabályra fog illeszkedni: kifelé halad az internetre csatlakozó hálózati kártyán. A csomagban azonban még mindig az eredeti forrás IP-címe található, amely a helyi hálózat egyik gépére hivatkozik. A szabály illeszkedésekor két cselekvés is végbemegy. A <code>keep-state</code> opció hatására ez a szabály felveszi ezt a kapcsolatot az állapottartó dinamikus szabályok közé és végrehajtja a másik megadott feladatot. Ez a feladat része a dinamikus táblázatba rögzített bejegyzésnek, ami ebben az esetben a <code>skipto 500</code> ("ugorjunk az 500-as szabályra") lesz. Az 500-as szabály a továbbküldés elõtt lefordítja a csomag forrás IP-címét. Ezt ne felejtsük el, nagyon fontos! A csomag ezután eljut a céljához, és visszatérve ismét belép a szabályrendszer tetején. Ezúttal illeszkedni fog a 100-as szabályra és a cél IP-címét visszafordítjuk a helyi hálózatunk megfelelõ gépének címére. Ezután a <code>check-state</code> szabályhoz kerül, amely megtalálja a dinamikus szabályok között és továbbengedi a belsõ hálózatra. Ezzel visszakerül a küldõ géphez, amely egy újabb csomagot küld egy újabb adatszeletet kérve a távoli szervertõl. Ekkor már a <code>check-state</code> szabály megtalálja a hozzá tartozó bejegyzést a dinamikus szabályok között és végrehajtódik a korábban letárolt <code>skipto 500</code> mûvelet. A csomag erre az 500-as szabályra ugrik, ahol lefordítjuk a címét és továbbküldjük.</p></div><div class=paragraph><p>Az bejövõ oldalon minden, ami egy korábban kialakult kapcsolat részeként érkezik, automatikusan a <code>check-state</code> és a megfelelõ helyre rakott <code>divert natd</code> szabályok által dolgozódik fel. Itt mindössze a rossz csomagok eldobásával és a hitelesített szolgáltatások elérésének biztosításával kell foglalkoznunk. Például a tûzfalon egy webszerver fut, és azt szeretnénk, hogy az internetrõl képesek legyenek elérni a rajta levõ oldalakat. Az újonnan beérkezõ kapcsolatépítési kérelem a 100-as szabályra fog illeszkedni, amelynek a cél IP-címét a tûzfal helyi hálózaton található címére fogjuk leképezni. A csomagot ezután még megvizsgáljuk, nem tartalmaz-e valamilyen huncutságot, majd végül a 425-ös szabálynál fog kikötni. Az egyezéskor két dolog történhet: a csomaghoz felveszünk egy dinamikus szabályt, de ezúttal az adott forrás IP-címrõl érkezõ kapcsolatkérések számát 2-re lekorlátozzuk. Ezzel az adott szolgáltatás portján meg tudjuk óvni a tûzfalat üzemeltetõ gépet a DoS típusú támadásoktól. A csomagot ezután hozzá tartozó cselekvés szerint továbbengedjük a belsõ hálózat felé. Visszatéréskor a tûzfal felismeri, hogy a csomag egy már meglevõ kapcsolathoz tartozik, ezért közvetlenül az 500-as szabályhoz kerül címfordításra, majd a kimenõ interfészen keresztül továbbküldjük.</p></div><div class=paragraph><p>Íme az elsõ példa egy ilyen szabályrendszerre:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
cmd=&#34;ipfw -q add&#34;
skip=&#34;skipto 500&#34;
pif=rl0
ks=&#34;keep-state&#34;
good_tcpo=&#34;22,25,37,43,53,80,443,110,119&#34;

ipfw -q -f flush

$cmd 002 allow all from any to any via xl0  # nem szûrjük a belsõ hálózatot
$cmd 003 allow all from any to any via lo0  # nem szûrjük a helyi interfészt

$cmd 100 divert natd ip from any to any in via $pif
$cmd 101 check-state

# A kimenõ csomagok hitelesítése:
$cmd 120 $skip udp from any to xx.168.240.2 53 out via $pif $ks
$cmd 121 $skip udp from any to xx.168.240.5 53 out via $pif $ks
$cmd 125 $skip tcp from any to any $good_tcpo out via $pif setup $ks
$cmd 130 $skip icmp from any to any out via $pif $ks
$cmd 135 $skip udp from any to any 123 out via $pif $ks

# Az összes olyan csomagot eldobjuk, amely a fenntartott
# címtartományokba tart:
$cmd 300 deny all from 192.168.0.0/16  to any in via $pif  #RFC 1918: privát IP
$cmd 301 deny all from 172.16.0.0/12   to any in via $pif  #RFC 1918: privát IP
$cmd 302 deny all from 10.0.0.0/8      to any in via $pif  #RFC 1918: privát IP
$cmd 303 deny all from 127.0.0.0/8     to any in via $pif  #helyi
$cmd 304 deny all from 0.0.0.0/8       to any in via $pif  #helyi
$cmd 305 deny all from 169.254.0.0/16  to any in via $pif  #DHCP
$cmd 306 deny all from 192.0.2.0/24    to any in via $pif  #dokumentációs célokra fenntartott
$cmd 307 deny all from 204.152.64.0/23 to any in via $pif  #Sun klaszter
$cmd 308 deny all from 224.0.0.0/3     to any in via $pif  #D és E osztályú multicast

# Az érkezõ csomagok hitelesítése:
$cmd 400 allow udp from xx.70.207.54 to any 68 in $ks
$cmd 420 allow tcp from any to me 80 in via $pif setup limit src-addr 1

$cmd 450 deny log ip from any to any

# Ide ugrunk a kimenõ állapottartó szabályoknál:
$cmd 500 divert natd ip from any to any out via $pif
$cmd 510 allow ip from any to any

##################### a szabályok vége ##################</pre></div></div><div class=paragraph><p>A következõ példa teljesen megegyezik az elõzõvel, azonban itt már dokumentációs szándékkal szerepelnek megjegyzések is, melyek a tapasztalatlan IPFW szabályíróknak segítik jobban megérteni a szabályok pontos mûködését.</p></div><div class=paragraph><p>A második példa:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
############# Az IPFW szabályai itt kezdõdnek ###########################
# Kezdés elõtt töröljük az összes jelenleg aktív szabályt:
ipfw -q -f flush

# Beállítjuk a parancsok megfelelõ elõtagjait:
cmd=&#34;ipfw -q add&#34;
skip=&#34;skipto 800&#34;
pif=&#34;rl0&#34;     # az internethez csatlakozó
              # hálózati interfész neve

#################################################################
# A belsõ hálózat számára ne korlátozzunk semmit se.
# Ha nincs helyi hálózatunk, akkor erre nincs szükségünk.
# Az &#39;xl0&#39; nevét írjuk át a helyi hálózatra csatlakozó
# interfész nevére.
#################################################################
$cmd 005 allow all from any to any via xl0

#################################################################
# A rendszer belsõ interfészét se szûrjük.
#################################################################
$cmd 010 allow all from any to any via lo0

#################################################################
# Ellenõrizzük, hogy ez egy beérkezõ csomag és ha igen, akkor
# fordítsuk a címét.
#################################################################
$cmd 014 divert natd ip from any to any in via $pif

#################################################################
# Ha ehhez a csomaghoz korábban már vettük fel dinamikus
# szabályt a keep-state opció révén, akkor engedjük tovább.
#################################################################
$cmd 015 check-state

#################################################################
# Az internet felé forgalmazó interfész (kimenõ kapcsolatok)
# A saját hálózatunkról belülrõl vagy errõl az átjáróról
# kezdeményezett kapcsolatokat vizsgáljuk az internet felé.
#################################################################

# Kifelé engedélyezzük az internet-szolgáltatónk névszerverének
# elérését. Az x.x.x.x a szolgáltató névszerverének IP-címe
# lesz. Ha a szolgáltatónknak több névszervere is van, akkor
# az /etc/resolv.conf állományból nézzük ki a címeiket és
# másoljuk le az alábbi sor mindegyikükhöz.
$cmd 020 $skip tcp from any to x.x.x.x 53 out via $pif setup keep-state

# A kábeles és DSL kapcsolatok esetén engedélyezzük a szolgáltató
# DHCP szerverének elérését.
$cmd 030 $skip udp from any to x.x.x.x 67 out via $pif keep-state

# Kifelé engedélyezzük a szabvány nem biztonságos WWW funkciót
$cmd 040 $skip tcp from any to any 80 out via $pif setup keep-state

# Kifelé engedélyezzük a biztonságos HTTPS funkciót a TLS SSL
# használatával.
$cmd 050 $skip tcp from any to any 443 out via $pif setup keep-state

# Kifelé engedélyezzük az e-mailek küldését és fogadását.
$cmd 060 $skip tcp from any to any 25 out via $pif setup keep-state
$cmd 061 $skip tcp from any to any 110 out via $pif setup keep-state

# Kifelé engedélyezzük a FreeBSD (make install és CVSUP) funkcióit.
# Ezzel a rendszeradminisztrátornak ,,ISTENI&#39;&#39; jogokat adunk.
$cmd 070 $skip tcp from me to any out via $pif setup keep-state uid root

# Kifelé engedélyezzük a pinget.
$cmd 080 $skip icmp from any to any out via $pif keep-state

# Kifelé engedélyezzük az idõ szolgáltatást.
$cmd 090 $skip tcp from any to any 37 out via $pif setup keep-state

# Kifelé engedélyezzük az nntp news szolgáltatást (tehát a
# hírcsoportokat).
$cmd 100 $skip tcp from any to any 119 out via $pif setup keep-state

# Kifelé engedélyezzük a biztonságos FTP, telnet és SCP
# funkciókat az SSH (secure shell) használatával.
$cmd 110 $skip tcp from any to any 22 out via $pif setup keep-state

# Kifelé engedélyezzük ki a whois kéréseket.
$cmd 120 $skip tcp from any to any 43 out via $pif setup keep-state

# Kifelé engedélyezzük az NTP idõszerver elérését.
$cmd 130 $skip udp from any to any 123 out via $pif keep-state

#################################################################
# Az internet felõli interfész (bejövõ kapcsolatok)
# A saját hálózatunk felé vagy erre az átjáróra
# nyitott kapcsolatokat vizsgáljuk az internet felõl.
#################################################################

# Tiltsuk a fenntartott címtartományok felé haladó összes beérkezõ
# forgalmat.
$cmd 300 deny all from 192.168.0.0/16  to any in via $pif  #RFC 1918: privát IP
$cmd 301 deny all from 172.16.0.0/12   to any in via $pif  #RFC 1918: privát IP
$cmd 302 deny all from 10.0.0.0/8      to any in via $pif  #RFC 1918: privát IP
$cmd 303 deny all from 127.0.0.0/8     to any in via $pif  #helyi
$cmd 304 deny all from 0.0.0.0/8       to any in via $pif  #helyi
$cmd 305 deny all from 169.254.0.0/16  to any in via $pif  #DHCP
$cmd 306 deny all from 192.0.2.0/24    to any in via $pif  #dokumentációs célokra fenntartott
$cmd 307 deny all from 204.152.64.0/23 to any in via $pif  #Sun klaszter
$cmd 308 deny all from 224.0.0.0/3     to any in via $pif  #D és E osztályú multicast

# Az ident tiltása.
$cmd 315 deny tcp from any to any 113 in via $pif

# Blokkoljuk az összes Netbios szolgáltatást: 137=név, 138=datagram,
# 139=session. A Netbios az MS Windows megosztását implementálja.
# Blokkoljuk az MS Windows hosts2 névszerver kéréseit is a 81-es
# porton.
$cmd 320 deny tcp from any to any 137 in via $pif
$cmd 321 deny tcp from any to any 138 in via $pif
$cmd 322 deny tcp from any to any 139 in via $pif
$cmd 323 deny tcp from any to any 81  in via $pif

# Dobjuk el a késõn érkezõ csomagokat.
$cmd 330 deny all from any to any frag in via $pif

# Dobjuk el azokat az ACK csomagokat, amelyekre nincs
# dinamikus szabály.
$cmd 332 deny tcp from any to any established in via $pif

# Engedélyezzük a szolgáltató DHCP szerverétõl érkezõ forgalmat. Ennek
# a szabálynak tartalmaznia kell a DHCP szerver címét, mert csak tõle
# fogadunk el ilyen típusú csomagokat. Egyedül csak kábeles vagy DSL
# konfigurációk esetén használatos, a &#34;felhasználói PPP&#34; esetében
# törölhetjük. Ez ugyanaz az IP-cím, amelyet a kimenõ kapcsolatoknál
# megadtunk.
$cmd 360 allow udp from x.x.x.x to any 68 in via $pif keep-state

# Befelé engedélyezzük a szabvány WWW funkciót, mivel van
# webszerverünk.
$cmd 370 allow tcp from any to me 80 in via $pif setup limit src-addr 2

# Befelé engedélyezzük a biztonságos FTP, telnet és SCP
# használatát az internetrõl.
$cmd 380 allow tcp from any to me 22 in via $pif setup limit src-addr 2

# Befelé engedélyezzük a nem biztonságos telnet elérését az
# internetrõl. Azért nem tekintjük biztonságosnak, mert az
# azonosítókat és a jelszavakat az interneten titkosítatlanul
# közvetíti. Ha nincs telnet szolgáltatásunk, akkor törölhetjük is ezt
# a csoportot.
$cmd 390 allow tcp from any to me 23 in via $pif setup limit src-addr 2

# Dobjuk el és naplózzuk az összes internetrõl érkezõ hitelesítetlen kapcsolatot.
$cmd 400 deny log all from any to any in via $pif

# Dobjuk el és naplózzuk az összes internetre menõ hitelesítetlen kapcsolatot.
$cmd 450 deny log all from any to any out via $pif

# Ez lesz a kimenõ szabályokhoz tartozó &#34;skipto&#34; célja.
$cmd 800 divert natd ip from any to any out via $pif
$cmd 801 allow ip from any to any

# Minden mást alapértelmezés szerint tiltunk és naplózunk.
$cmd 999 deny log all from any to any
############# Az IPFW szabályai itt fejezõdnek be #####################</pre></div></div></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: 2024. március 9. by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/hu/books/handbook/network-servers class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/hu/books/handbook/advanced-networking class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#firewalls-intro>30.1. Bevezetés</a></li><li><a href=#firewalls-concepts>30.2. Röviden a tûzfalakról</a></li><li><a href=#firewalls-apps>30.3. Tûzfalak</a></li><li><a href=#firewalls-pf>30.4. Az OpenBSD csomagszûrõje (PF) és az ALTQ</a></li><li><a href=#firewalls-ipf>30.5. Az IPFILTER (IPF) tûzfal</a></li><li><a href=#firewalls-ipfw>30.6. IPFW</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/hu/books/handbook/handbook_hu.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/hu/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/hu/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>Hungarian</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/hu class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/hu/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>