<!doctype html><html class=theme-light lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Describes the FreeBSD Documentation Build Process"><meta name=keywords content="build,process,make"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/en/books/fdp-primer/doc-build/><title>Chapter 5. The FreeBSD Documentation Build Process | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapter 5. The FreeBSD Documentation Build Process"><meta property="og:description" content="Describes the FreeBSD Documentation Build Process"><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="en"><meta property="og:url" content="http://172.16.201.134:1313/en/books/fdp-primer/doc-build/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/en\/books\/fdp-primer\/doc-build\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/en>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/en/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/en/books>Books</a></li><li><a href=http://172.16.201.134:1313/en/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/en/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=en>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>â™¥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-b7306da1bb485b7286d40e9c2cb5be39 class=toggle>
<label class="icon cursor" for=chapter-b7306da1bb485b7286d40e9c2cb5be39><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/preface/>Preface</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/preface/#preface-prompts>Shell Prompts</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/preface/#preface-conventions>Typographic Conventions</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/preface/#preface-notes>Notes, Tips, Important Information, Warnings, and Examples</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/preface/#preface-acknowledgements>Acknowledgments</a></li></ul></li><li><input type=checkbox id=chapter-29d92feeaf1e5f539b7d012d928b5155 class=toggle>
<label class="icon cursor" for=chapter-29d92feeaf1e5f539b7d012d928b5155><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/overview/>Chapter 1. Overview</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/overview/#overview-documentation-ecosystem>1.1. Documentation in the FreeBSD Ecosystem</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/overview/#overview-quick-start>1.2. Quick Start</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/overview/#overview-doc>1.3. The FreeBSD Documentation Set</a></li></ul></li><li><input type=checkbox id=chapter-53538f3d80dbb59821d1242029b4ff36 class=toggle>
<label class="icon cursor" for=chapter-53538f3d80dbb59821d1242029b4ff36><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/tools/>Chapter 2. Tools</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/tools/#tools-required>2.1. Required Tools</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/tools/#tools-optional>2.2. Optional Tools</a></li></ul></li><li><input type=checkbox id=chapter-f1f9c80f60ba5edf2789507096cdd958 class=toggle>
<label class="icon cursor" for=chapter-f1f9c80f60ba5edf2789507096cdd958><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/>Chapter 3. The Working Copy</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/#working-copy-doc-and-src>3.1. Documentation and Manual Pages</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/#working-copy-choosing-directory>3.2. Choosing a Directory</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/#working-copy-checking-out>3.3. Checking Out a Copy</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/#working-copy-updating>3.4. Updating a Working Copy</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/#working-copy-revert>3.5. Reverting Changes</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/#working-copy-making-diff>3.6. Making a Diff</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/working-copy/#working-copy-git-references>3.7. Git References</a></li></ul></li><li><input type=checkbox id=chapter-396290e216e97e56be79c0bf59aa5d3c class=toggle>
<label class="icon cursor" for=chapter-396290e216e97e56be79c0bf59aa5d3c><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/structure/>Chapter 4. Documentation Directory Structure</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/structure/#structure-top>4.1. The Top Level, doc/</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/structure/#structure-locale>4.2. The Directories</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/structure/#structure-document>4.3. Document-Specific Information</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/structure/#structure-document-books>4.4. The Books: books/</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/structure/#structure-document-articles>4.5. The Articles: articles/</a></li></ul></li><li><input type=checkbox id=chapter-c9fed99d77feff62be2ba2a790878f57 class=toggle checked>
<label class="icon cursor" for=chapter-c9fed99d77feff62be2ba2a790878f57><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/doc-build/>Chapter 5. The FreeBSD Documentation Build Process</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/doc-build/#doc-build-rendering>5.1. Rendering AsciiDoc into Output</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/doc-build/#doc-build-toolset>5.2. The FreeBSD Documentation Build Toolset</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/doc-build/#doc-build-makefile>5.3. Understanding the Makefile in the Documentation Tree</a></li></ul></li><li><input type=checkbox id=chapter-0844b33a38680adf1ffecd7c05a32996 class=toggle>
<label class="icon cursor" for=chapter-0844b33a38680adf1ffecd7c05a32996><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/>Chapter 6. Asciidoctor Primer</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/#asciidoctor-primer-overview>6.1. Overview</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/#asciidoctor-headings>6.2. Headings</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/#asciidoctor-paragraphs>6.3. Paragraphs</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/#asciidoctor-lists>6.4. Lists</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/#asciidoctor-links>6.5. Links</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/#asciidoctor-images-icons>6.6. Images and Icons</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer/#asciidoctor-conclusion>6.7. Conclusion</a></li></ul></li><li><input type=checkbox id=chapter-d978234db05f55232e1508329c627026 class=toggle>
<label class="icon cursor" for=chapter-d978234db05f55232e1508329c627026><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/rosetta/>Chapter 7. Rosetta Stone</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/rosetta/#docbook-vs-asciidoc>7.1. Comparison between Docbook and AsciiDoc</a></li></ul></li><li><input type=checkbox id=chapter-5bf5737df201a39d24dd12282c4ec707 class=toggle>
<label class="icon cursor" for=chapter-5bf5737df201a39d24dd12282c4ec707><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/>Chapter 8. Translations</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_what_do_i18n_and_l10n_mean>8.1. What do i18n and l10n mean?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_is_there_a_mailing_list_for_translators>8.2. Is there a mailing list for translators?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_are_more_translators_needed>8.3. Are more translators needed?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_what_languages_do_i_need_to_know>8.4. What languages do I need to know?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_what_software_do_i_need_to_know>8.5. What software do I need to know?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_how_do_i_find_out_who_else_might_be_translating_to_the_same_language>8.6. How do I find out who else might be translating to the same language?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_no_one_else_is_translating_to_my_language_what_do_i_do>8.7. No one else is translating to my language. What do I do?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_i_have_translated_some_documentation_where_do_i_send_it>8.8. I have translated some documentation, where do I send it?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_i_am_the_only_person_working_on_translating_to_this_language_how_do_i_submit_my_translation>8.9. I am the only person working on translating to this language, how do I submit my translation?</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/translations/#_can_i_include_language_or_country_specific_text_in_my_translation>8.10. Can I include language or country specific text in my translation?</a></li></ul></li><li><input type=checkbox id=chapter-4c26075c95e8385954362754f200221f class=toggle>
<label class="icon cursor" for=chapter-4c26075c95e8385954362754f200221f><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/>Chapter 9. PO Translations</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/#po-translations-introduction>9.1. Introduction</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/#po-translations-quick-start>9.2. Quick Start</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/#po-translations-creating>9.3. Creating New Translations</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/#po-translations-translating>9.4. Translating</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/#po-translations-tips>9.5. Tips for Translators</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/#po-translations-building>9.6. Building a Translated Document</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/po-translations/#po-translations-submitting>9.7. Submitting the New Translation</a></li></ul></li><li><input type=checkbox id=chapter-1a71bac2a010c9586b8374ddde4bd168 class=toggle>
<label class="icon cursor" for=chapter-1a71bac2a010c9586b8374ddde4bd168><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/>Chapter 10. Weblate Translations</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-introduction>10.1. Introduction</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-become-translator>10.2. How to Become a FreeBSD Translator</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-introduce-yourself>10.3. Introduce Yourself</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-login>10.4. Login to Weblate</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-find-language-team>10.5. Find a Language Team to Join In</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-translating-online>10.6. Translating Online on Weblate</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-translating-offline>10.7. Translating Offline</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-automatic-suggestions>10.8. Translation based on Automatic Suggestions</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-proofreading-qa>10.9. Proofreading and Weblate Quality Checks</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-building>10.10. Building the Translated Document</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-submitting-translations>10.11. Submitting Translations</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/weblate/#weblate-faq>10.12. FAQ (Frequently Asked Questions)</a></li></ul></li><li><input type=checkbox id=chapter-d5c37c3b292615ed3b32c724f1aeca67 class=toggle>
<label class="icon cursor" for=chapter-d5c37c3b292615ed3b32c724f1aeca67><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/>Chapter 11. Manual Pages</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/#manual-pages-introduction>11.1. Introduction</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/#manual-pages-sections>11.2. Sections</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/#manual-pages-markup>11.3. Markup</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/#manual-pages-sample-structures>11.4. Sample Manual Page Structures</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/#manual-pages-testing>11.5. Testing</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/#manual-pages-examples-as-templates>11.6. Example Manual Pages to Use as Templates</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/manual-pages/#manual-pages-resources>11.7. Resources</a></li></ul></li><li><input type=checkbox id=chapter-3af27860c7797b51450ee2834177144d class=toggle>
<label class="icon cursor" for=chapter-3af27860c7797b51450ee2834177144d><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/>Chapter 12. Writing Style</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/#writing-style-tips>12.1. Tips</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/#writing-style-guidelines>12.2. Guidelines</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/#writing-style-guide>12.3. Style Guide</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/#one-sentence-per-line>12.4. One sentence per line</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/#writing-style-acronyms>12.5. Acronyms</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/#writing-style-special-characters>12.6. Special Character List</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/writing-style/#writing-style-linting-vale>12.7. Linting with Vale</a></li></ul></li><li><input type=checkbox id=chapter-5aa2f59c91ba8d629cfb0e0017137828 class=toggle>
<label class="icon cursor" for=chapter-5aa2f59c91ba8d629cfb0e0017137828><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/editor-config/>Chapter 13. Editor Configuration</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/editor-config/#editor-config-vim>13.1. Vim</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/editor-config/#editor-config-emacs>13.2. Emacs</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/editor-config/#editor-config-nano>13.3. nano</a></li></ul></li><li><input type=checkbox id=chapter-e1303701cd2611cedea3e42dea8e9b20 class=toggle>
<label class="icon cursor" for=chapter-e1303701cd2611cedea3e42dea8e9b20><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/trademarks/>Chapter 14. Trademarks</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/trademarks/#trademark-symbols>14.1. Trademark Symbols</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/trademarks/#trademark-citing>14.2. Trademark Citing</a></li></ul></li><li><input type=checkbox id=chapter-9e068d46f37202a68d2d6badf4589aa1 class=toggle>
<label class="icon cursor" for=chapter-9e068d46f37202a68d2d6badf4589aa1><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/see-also/>Chapter 15. See Also</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/see-also/#see-also-fdp>15.1. The FreeBSD Documentation Project</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/see-also/#see-also-hugo>15.2. Hugo</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/see-also/#see-also-asciidoc>15.3. AsciiDoctor</a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/see-also/#see-also-html>15.4. HTML</a></li></ul></li><li><input type=checkbox id=chapter-65f742e97efd231694cb5a3cd4c16613 class=toggle>
<label class="icon cursor" for=chapter-65f742e97efd231694cb5a3cd4c16613><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/fdp-primer/examples/>Appendix A. Examples</a><ul><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/examples/#examples-asciidoctor-book>A.1. AsciiDoctor <strong>book</strong></a></li><li><a href=http://172.16.201.134:1313/en/books/fdp-primer/examples/#examples-asciidoctor-article>A.2. AsciiDoctor <strong>article</strong></a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapter 5. The FreeBSD Documentation Build Process</h1><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#doc-build-rendering>5.1. Rendering AsciiDoc into Output</a></li><li><a href=#doc-build-toolset>5.2. The FreeBSD Documentation Build Toolset</a></li><li><a href=#doc-build-makefile>5.3. Understanding the Makefile in the Documentation Tree</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody><div class=paragraph><p>This chapter covers organization of the documentation build process and how <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> is used to control it.</p></div></div></div><div class=sect1><h2 id=doc-build-rendering>5.1. Rendering AsciiDoc into Output<a class=anchor href=#doc-build-rendering></a></h2><div class=sectionbody><div class=paragraph><p>Different types of output can be produced from a single AsciiDoc source file.</p></div><table class="tableblock frame-none grid-all stretch"><col style=width:20%><col style=width:20%><col style=width:60%><thead><tr><th class="tableblock halign-left valign-top">Formats</th><th class="tableblock halign-left valign-top">File Type</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>html</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>HTML</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>An <code>article</code> or <code>book</code> chapter.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pdf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>PDF</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Portable Document Format.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>epub</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>EPUB</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Electronic Publication.
ePub file format.</p></td></tr></tbody></table><div class=sect2><h3 id=doc-build-rendering-html>5.1.1. Rendering to html<a class=anchor href=#doc-build-rendering-html></a></h3><div class=paragraph><p>To render the documentation and the website to <code>html</code> use one of the following examples.</p></div><div id=documentation-build-example class=exampleblock><div class=title>Example 1. Build the documentation</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make</code></pre></div></div></div></div><div id=website-build-example class=exampleblock><div class=title>Example 2. Build the website</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/website
% make</code></pre></div></div></div></div><div id=project-build-example class=exampleblock><div class=title>Example 3. Build the entire documentation project</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc
% make <span class=nt>-j2</span></code></pre></div></div></div></div><div class=paragraph><p>Advanced build examples are given below:</p></div><div id=documentation-build-example-verbose class=exampleblock><div class=title>Example 4. Build English and Spanish documentation with verbose and debug messages</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make <span class=nv>DOC_LANG</span><span class=o>=</span><span class=s2>&#34;en es&#34;</span> <span class=nv>HUGO_ARGS</span><span class=o>=</span><span class=s2>&#34;--verbose --debug&#34;</span></code></pre></div></div></div></div><div id=documentation-build-example-server class=exampleblock><div class=title>Example 5. Build and serve the content with Hugoâ€™s internal webserver</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make run</code></pre></div></div><div class=paragraph><p>This webserver runs on <code>localhost</code>, port <code>1313</code> by default.</p></div><div class=paragraph><p>To serve the content with Hugoâ€™s internal webserver binding a specific IP address and port:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make run <span class=nv>BIND</span><span class=o>=</span>192.168.15.10 <span class=nv>HUGO_ARGS</span><span class=o>=</span><span class=s2>&#34;-p 8080&#34;</span></code></pre></div></div><div class=paragraph><p>A <code>hostname</code> can also be set as base url to Hugoâ€™s internal webserver:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make run <span class=nv>BIND</span><span class=o>=</span>192.168.15.10 <span class=nv>HOSTNAME</span><span class=o>=</span>example.com</code></pre></div></div></div></div><div id=documentation-build-example-offline class=exampleblock><div class=title>Example 6. Build documentation in html for offline usage</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make html</code></pre></div></div><div class=paragraph><p>To compress the html output, add <code>DOC_HTML_ARCHIVE=1</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% <span class=nv>DOC_HTML_ARCHIVE</span><span class=o>=</span>1 make html</code></pre></div></div></div></div></div><div class=sect2><h3 id=doc-build-rendering-pdf>5.1.2. Rendering to pdf<a class=anchor href=#doc-build-rendering-pdf></a></h3><div class=paragraph><p>To render the documentation to <code>pdf</code>, use one of the following examples.</p></div><div id=document-pdf-example class=exampleblock><div class=title>Example 7. Build all documents in pdf</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make pdf</code></pre></div></div></div></div><div id=document-pdf-articles-example class=exampleblock><div class=title>Example 8. Build all articles in pdf</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make pdf-articles</code></pre></div></div></div></div><div id=document-pdf-books-example class=exampleblock><div class=title>Example 9. Build all books in pdf</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make pdf-books</code></pre></div></div></div></div><div id=document-pdf-language-example class=exampleblock><div class=title>Example 10. Build documents in pdf for specific languages</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make <span class=nv>DOC_LANG</span><span class=o>=</span><span class=s2>&#34;en&#34;</span> pdf</code></pre></div></div><div class=paragraph><p>This will build all English documents in pdf.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> ~/doc/documentation
% make <span class=nv>DOC_LANG</span><span class=o>=</span><span class=s2>&#34;en fr&#34;</span> pdf-books</code></pre></div></div><div class=paragraph><p>This will build all English and French books in pdf.</p></div></div></div></div></div></div><div class=sect1><h2 id=doc-build-toolset>5.2. The FreeBSD Documentation Build Toolset<a class=anchor href=#doc-build-toolset></a></h2><div class=sectionbody><div class=paragraph><p>These are the tools used to build and install the FDP documentation.</p></div><div class=ulist><ul><li><p>The primary build tool is <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>, specifically Berkeley Make.</p></li><li><p>Hugo</p></li><li><p>AsciiDoctor</p></li><li><p>Git</p></li></ul></div></div></div><div class=sect1><h2 id=doc-build-makefile>5.3. Understanding the Makefile in the Documentation Tree<a class=anchor href=#doc-build-makefile></a></h2><div class=sectionbody><div class=paragraph><p>There are three <span class=filename>Makefile</span> files for building some or all of the documentation project.</p></div><div class=ulist><ul><li><p>The <span class=filename>Makefile</span> in the <span class=filename>documentation</span> directory will build only the documentation.</p></li><li><p>The <span class=filename>Makefile</span> in the <span class=filename>website</span> directory will build only the website.</p></li><li><p>The <span class=filename>Makefile</span> at the top of the tree will build both the documentation and the website.</p></li></ul></div><div class=paragraph><p>The <span class=filename>Makefile</span> appearing in subdirectories also support <code>make run</code> to serve built content with Hugoâ€™s internal webserver.
This webserver runs on port 1313 by default.</p></div><div class=sect2><h3 id=documentation-makefile>5.3.1. Documentation Makefile<a class=anchor href=#documentation-makefile></a></h3><div class=paragraph><p>This <span class=filename>Makefile</span> takes the following form:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># Generate the FreeBSD documentation</span>
<span class=c>#</span>
<span class=c># Copyright (c) 2020-2021, The FreeBSD Documentation Project</span>
<span class=c># Copyright (c) 2020-2021, Sergio Carlavilla &lt;carlavilla@FreeBSD.org&gt;</span>
<span class=c>#</span>
<span class=c># Targets intended for use on the command line</span>
<span class=c>#</span>
<span class=c># all (default)	-	generate the books TOC and compile all the documentation</span>
<span class=c># clean		- 	removes generated files</span>
<span class=c># run		-	serves the built documentation site for local browsing</span>
<span class=c># pdf		-	build PDF versions of the articles and books.</span>
<span class=c># html		-	build HTML versions of the articles and books for</span>
<span class=c>#			offline use.</span>
<span class=c>#			If variable DOC_HTML_ARCHIVE is set, all documents will be</span>
<span class=c>#			archived/compressed, and only these files will be kept in the public</span>
<span class=c>#			directory.</span>
<span class=c># epub		-	build EPUB versions of the articles and books (Experimental).</span>
<span class=c>#</span>
<span class=c># The run target uses hugo&#39;s built-in webserver to make the documentation site</span>
<span class=c># available for local browsing.  The documentation should have been built prior</span>
<span class=c># to attempting to use the `run` target.  By default, hugo will start its</span>
<span class=c># webserver on port 1313.</span>

<span class=nv>MAINTAINER</span><span class=o>=</span>carlavilla@FreeBSD.org <i class=conum data-value=1></i><b>(1)</b>

<span class=c># List of languages without book translations</span>
<span class=nv>ARTICLEONLY_LANGS</span><span class=o>=</span>	bn-bd da ko <span class=nb>tr</span>
<span class=c># List of languages without article translations</span>
<span class=nv>BOOKONLY_LANGS</span><span class=o>=</span>		mn

<span class=c># List of all languages we have content for</span>
<span class=nv>ALL_LANGUAGES</span><span class=o>=</span>	bn-bd da de el en es fr hu it ja ko mn <span class=nb>nl </span>pl pt-br ru <span class=nb>tr </span>zh-cn zh-tw <i class=conum data-value=2></i><b>(2)</b>

LOCALBASE?<span class=o>=</span>	/usr/local

RUBY_CMD <span class=o>=</span>	<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/ruby <i class=conum data-value=3></i><b>(3)</b>
HUGO_CMD <span class=o>=</span>	<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/hugo <i class=conum data-value=4></i><b>(4)</b>
HUGO_ARGS?<span class=o>=</span>	<span class=nt>--verbose</span> <span class=nt>--minify</span>
HUGO_OFFLINE_ARGS?<span class=o>=</span> 	<span class=nt>--environment</span> offline <span class=nt>--verbose</span> <span class=nt>--minify</span>
<span class=nv>ASCIIDOCTOR_CMD</span><span class=o>=</span>	<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/asciidoctor
<span class=nv>ASCIIDOCTORPDF_CMD</span><span class=o>=</span>	<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/asciidoctor-pdf

.if defined<span class=o>(</span>DOC_LANG<span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=o>!</span>empty<span class=o>(</span>DOC_LANG<span class=o>)</span>
<span class=nv>LANGUAGES</span><span class=o>=</span>	<span class=k>${</span><span class=nv>DOC_LANG</span>:S/,/<span class=p> /g</span><span class=k>}</span>
.if  <span class=k>${</span><span class=nv>LANGUAGES</span>:Men<span class=k>}</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span> <span class=o>&amp;&amp;</span> <span class=k>${</span><span class=p>.TARGETS</span>:Mpdf<span class=p>*</span><span class=k>}</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span> <span class=o>&amp;&amp;</span> <span class=k>${</span><span class=p>.TARGETS</span>:Mhtml<span class=p>*</span><span class=k>}</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span>
.warning <span class=s2>&#34;Warning: cannot skip &#39;en&#39;; adding it back&#34;</span>
LANGUAGES+<span class=o>=</span>	en
.endif
.else
<span class=nv>LANGUAGES</span><span class=o>=</span>	<span class=k>${</span><span class=nv>ALL_LANGUAGES</span><span class=k>}</span>
.endif

RUBYLIB <span class=o>=</span>	../shared/lib
.export	RUBYLIB

<span class=nv>RUN_DEPENDS</span><span class=o>=</span>	<span class=k>${</span><span class=nv>HUGO_CMD</span><span class=k>}</span> <span class=se>\</span>
		<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/asciidoctor <span class=se>\</span>
		<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/rougify

.ifndef HOSTNAME
<span class=nb>.</span>  ifdef BIND
.HOST<span class=o>=</span><span class=si>$(</span>BIND<span class=si>)</span>
<span class=nb>.</span>  <span class=k>else</span>
.HOST<span class=o>=</span>localhost
<span class=nb>.</span>  endif
.else
.HOST<span class=o>=</span><span class=si>$(</span>HOSTNAME<span class=si>)</span>
.endif

<span class=c># Strip the languages with only articles from the list of languages we</span>
<span class=c>#  will use to build books.</span>
<span class=nv>BOOK_LANGS</span><span class=o>=</span> <span class=k>${</span><span class=nv>LANGUAGES</span><span class=k>}</span>
.for a <span class=k>in</span> <span class=k>${</span><span class=nv>ARTICLEONLY_LANGS</span><span class=k>}</span>
BOOK_LANGS:<span class=o>=</span>	<span class=k>${</span><span class=nv>BOOK_LANGS</span>:N<span class=k>${</span><span class=nv>a</span><span class=k>}}</span>
.endfor

<span class=c># Strip the languages with only books from the list of languages we</span>
<span class=c>#  will use to build articles.</span>
<span class=nv>ARTICLE_LANGS</span><span class=o>=</span> <span class=k>${</span><span class=nv>LANGUAGES</span><span class=k>}</span>
.for a <span class=k>in</span> <span class=k>${</span><span class=nv>BOOKONLY_LANGS</span><span class=k>}</span>
ARTICLE_LANGS:<span class=o>=</span>	<span class=k>${</span><span class=nv>ARTICLE_LANGS</span>:N<span class=k>${</span><span class=nv>a</span><span class=k>}}</span>
.endfor

<span class=c># Take the list of all languages, and take out the ones we have been</span>
<span class=c>#   asked for.  We&#39;ll feed this to hugo.</span>
<span class=nv>SKIP_LANGS</span><span class=o>=</span>
.for a <span class=k>in</span> <span class=k>${</span><span class=nv>ALL_LANGUAGES</span><span class=k>}</span>
.if  <span class=k>${</span><span class=nv>LANGUAGES</span>:M<span class=k>${</span><span class=nv>a</span><span class=k>}}</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span>
SKIP_LANGS+<span class=o>=</span>    <span class=k>${</span><span class=nv>a</span><span class=k>}</span>
.endif
.endfor

.ORDER: all run <i class=conum data-value=5></i><b>(5)</b>

.ORDER: requirements <i class=conum data-value=6></i><b>(6)</b>
.ORDER: starting-message
.ORDER: starting-message build
.ORDER: build

all: requirements starting-message generate-pgpkeys-txt build
run: requirements starting-message generate-pgpkeys-txt run-local

<span class=c># clean does not call pdf-clean as that is a subset of hugo-clean</span>
clean: hugo-clean pgp-clean

requirements:
.for dep <span class=k>in</span> <span class=k>${</span><span class=nv>RUN_DEPENDS</span><span class=k>}</span>
.if <span class=o>!</span>exists<span class=o>(</span><span class=k>${</span><span class=nv>dep</span><span class=k>}</span><span class=o>)</span>
	@<span class=o>(</span><span class=nb>echo</span> <span class=k>${</span><span class=nv>dep</span><span class=k>}</span> not found, please run <span class=s1>&#39;pkg install docproj&#39;</span><span class=p>;</span> <span class=nb>exit </span>1<span class=o>)</span>
.endif
.endfor

requirements-pdf:
.if <span class=o>!</span>exists<span class=o>(</span><span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/asciidoctor-pdf<span class=o>)</span>
	@<span class=o>(</span><span class=nb>echo</span> <span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/asciidoctor-pdf not found, please run <span class=s1>&#39;pkg install rubygem-asciidoctor-pdf&#39;</span><span class=p>;</span> <span class=nb>exit </span>1<span class=o>)</span>
.endif

requirements-epub:
.if <span class=o>!</span>exists<span class=o>(</span><span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/asciidoctor-epub3<span class=o>)</span>
	@<span class=o>(</span><span class=nb>echo</span> <span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/asciidoctor-epub3 not found, please run <span class=s1>&#39;pkg install rubygem-asciidoctor-epub3&#39;</span><span class=p>;</span> <span class=nb>exit </span>1<span class=o>)</span>
.endif

starting-message: .PHONY <i class=conum data-value=7></i><b>(7)</b>
	@echo <span class=nt>---------------------------------------------------------------</span>
	@echo                   Building the documentation
	@echo  included languages: <span class=k>${</span><span class=nv>LANGUAGES</span><span class=k>}</span>
	@echo  excluded languages: <span class=k>${</span><span class=nv>SKIP_LANGS</span><span class=k>}</span>
	@echo <span class=nt>---------------------------------------------------------------</span>

generate-pgpkeys-txt: static/pgpkeys/pgpkeys.txt

static/pgpkeys/pgpkeys.txt: static/pgpkeys/<span class=k>*</span>key
	<span class=k>${</span><span class=nv>RUBY_CMD</span><span class=k>}</span> ./tools/global-pgpkeys-creator.rb

run-local: .PHONY <i class=conum data-value=8></i><b>(8)</b>
	<span class=nv>HUGO_DISABLELANGUAGES</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>${</span><span class=nv>SKIP_LANGS</span><span class=k>}</span><span class=s2>&#34;</span> <span class=k>${</span><span class=nv>HUGO_CMD</span><span class=k>}</span> server <span class=se>\</span>
		<span class=k>${</span><span class=nv>HUGO_ARGS</span><span class=k>}</span> <span class=nt>-D</span> <span class=si>$(</span>BIND:D--bind<span class=o>=</span><span class=si>$(</span>BIND<span class=si>))</span> <span class=nt>--baseURL</span><span class=o>=</span><span class=s2>&#34;http://</span><span class=si>$(</span>.HOST<span class=si>)</span><span class=s2>:1313&#34;</span>

build: .PHONY <i class=conum data-value=9></i><b>(9)</b>
	<span class=nv>HUGO_DISABLELANGUAGES</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>${</span><span class=nv>SKIP_LANGS</span><span class=k>}</span><span class=s2>&#34;</span> <span class=k>${</span><span class=nv>HUGO_CMD</span><span class=k>}</span> <span class=k>${</span><span class=nv>HUGO_ARGS</span><span class=k>}</span>

build-offline: .PHONY
	<span class=nv>HUGO_DISABLELANGUAGES</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>${</span><span class=nv>SKIP_LANGS</span><span class=k>}</span><span class=s2>&#34;</span> <span class=k>${</span><span class=nv>HUGO_CMD</span><span class=k>}</span> <span class=k>${</span><span class=nv>HUGO_OFFLINE_ARGS</span><span class=k>}</span>

pgp-clean: .PHONY
	<span class=nb>rm</span> <span class=nt>-f</span> static/pgpkeys/pgpkeys.txt

hugo-clean: .PHONY
	<span class=nb>rm</span> <span class=nt>-rf</span> resources public

<span class=c>#</span>
<span class=c># PDF targets</span>
<span class=c># Use DOC_LANG to choose the language, e.g., make DOC_LANG=&#34;en fr&#34; pdf-books</span>
<span class=c>#</span>
pdf: pdf-articles pdf-books

pdf-books: requirements-pdf
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>BOOK_LANGS</span><span class=k>}</span>
	./tools/asciidoctor.sh books <span class=k>${</span><span class=nv>_lang</span><span class=k>}</span> pdf
.endfor

pdf-articles: requirements-pdf
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>ARTICLE_LANGS</span><span class=k>}</span>
	./tools/asciidoctor.sh articles <span class=k>${</span><span class=nv>_lang</span><span class=k>}</span> pdf
.endfor

pdf-clean: pdf-articles-clean pdf-books-clean

pdf-books-clean:
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>BOOK_LANGS</span><span class=k>}</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/books
	<span class=nt>-rmdir</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>
.endfor
	<span class=nt>-rmdir</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/

pdf-articles-clean:
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>ARTICLE_LANGS</span><span class=k>}</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/articles
.if <span class=o>!</span>exists<span class=o>(</span><span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/books<span class=o>)</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>
.endif
.endfor
	<span class=nt>-rmdir</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public

<span class=c>#</span>
<span class=c># HTML targets</span>
<span class=c>#</span>
html: build-offline html-clean-global html-clean-articles html-clean-books html-archive html-archive-clean-files

html-clean: hugo-clean

html-clean-global:
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/index.html
	<span class=nb>rm</span> <span class=nt>-rf</span> pgpkeys js

html-clean-articles:
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>ARTICLE_LANGS</span><span class=k>}</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/index.html
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/articles/index.html
.endfor

html-clean-books:
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>BOOK_LANGS</span><span class=k>}</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/books/index.html
.endfor

html-archive:
.if defined<span class=o>(</span>DOC_HTML_ARCHIVE<span class=o>)</span>
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>ARTICLE_LANGS</span><span class=k>}</span>
	./tools/asciidoctor.sh articles <span class=k>${</span><span class=nv>_lang</span><span class=k>}</span> archive
.endfor
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>BOOK_LANGS</span><span class=k>}</span>
	./tools/asciidoctor.sh books <span class=k>${</span><span class=nv>_lang</span><span class=k>}</span> archive
.endfor
.endif

html-archive-clean-files:
.if defined<span class=o>(</span>DOC_HTML_ARCHIVE<span class=o>)</span>
	find <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/ <span class=o>!</span> <span class=nt>-name</span> <span class=s1>&#39;*.pdf&#39;</span> <span class=o>!</span> <span class=nt>-name</span> <span class=s1>&#39;*.tar.gz&#39;</span> <span class=nt>-type</span> f <span class=nt>-delete</span>
	find <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/ <span class=nt>-type</span> d <span class=nt>-empty</span> <span class=nt>-delete</span>
.endif

<span class=c>#</span>
<span class=c># EPUB targets</span>
<span class=c># Use DOC_LANG to choose the language, e.g., make DOC_LANG=&#34;en fr&#34; epub-books</span>
<span class=c>#</span>
epub: epub-articles epub-books

epub-books: requirements-epub
	@echo <span class=nt>---------------------------------------------------------------</span>
	@echo <span class=o>!!!</span> EPUB output is experimental <span class=o>!!!</span>
	@echo
	@echo Asciidoctor EPUB3 is currently alpha software. Use accordingly. Although the
	@echo bulk of AsciiDoc content is converted, thereâ€™s still work needed to fill <span class=k>in</span>
	@echo gaps where conversion is incomplete or unstyled.
	@echo https://docs.asciidoctor.org/epub3-converter/latest/#project-status
	@echo <span class=nt>---------------------------------------------------------------</span>
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>BOOK_LANGS</span><span class=k>}</span>
	./tools/asciidoctor.sh books <span class=k>${</span><span class=nv>_lang</span><span class=k>}</span> epub
.endfor

epub-articles: requirements-epub
	@echo <span class=nt>---------------------------------------------------------------</span>
	@echo <span class=o>!!!</span> EPUB output is experimental <span class=o>!!!</span>
	@echo
	@echo Asciidoctor EPUB3 is currently alpha software. Use accordingly. Although the
	@echo bulk of AsciiDoc content is converted, thereâ€™s still work needed to fill <span class=k>in</span>
	@echo gaps where conversion is incomplete or unstyled.
	@echo https://docs.asciidoctor.org/epub3-converter/latest/#project-status
	@echo <span class=nt>---------------------------------------------------------------</span>
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>ARTICLE_LANGS</span><span class=k>}</span>
	./tools/asciidoctor.sh articles <span class=k>${</span><span class=nv>_lang</span><span class=k>}</span> epub
.endfor

epub-clean: epub-articles-clean epub-books-clean

epub-books-clean:
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>BOOK_LANGS</span><span class=k>}</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/books
	<span class=nt>-rmdir</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>
.endfor
	<span class=nt>-rmdir</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/

epub-articles-clean:
.for _lang <span class=k>in</span> <span class=k>${</span><span class=nv>ARTICLE_LANGS</span><span class=k>}</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/articles
.if <span class=o>!</span>exists<span class=o>(</span><span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>/books<span class=o>)</span>
	<span class=nb>rm</span> <span class=nt>-fr</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public/<span class=k>${</span><span class=nv>_lang</span><span class=k>}</span>
.endif
.endfor
	<span class=nt>-rmdir</span> <span class=k>${</span><span class=p>.CURDIR</span><span class=k>}</span>/public</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>The <code>MAINTAINER</code> flag specifies who is the maintainer of this Makefile.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td><code>ALL_LANGUAGES</code> flag specifies in which languages the table of contents has to be generated.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td><code>RUBY_CMD</code> flag specifies the location of the Ruby binary.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td><code>HUGO_CMD</code> flag specifies the location of the Hugo binary.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td><code>.ORDER</code> directives are used to ensure multiple make jobs may run without problem.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td><code>all</code> target builds the documentation and puts the result in <strong>~/doc/documentation/public</strong>.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td><code>starting-message</code> shows a message in the CLI to show the user that the process is running.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td><code>run-local</code> runs hugo webserver on port 1313, or a random free port if that is already in use.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td><code>build</code> builds the documentation and puts the result in the <strong>~/doc/documentation/public</strong>.</td></tr></tbody></table></div></div><div class=sect2><h3 id=website-makefile>5.3.2. Website Makefile<a class=anchor href=#website-makefile></a></h3><div class=paragraph><p>This <span class=filename>Makefile</span> takes the form of:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># Generate the FreeBSD website</span>
<span class=c>#</span>
<span class=c># Copyright (c) 2020-2021, The FreeBSD Documentation Project</span>
<span class=c># Copyright (c) 2020-2021, Sergio Carlavilla &lt;carlavilla@FreeBSD.org&gt;</span>
<span class=c>#</span>
<span class=c># Targets intended for use on the command line</span>
<span class=c>#</span>
<span class=c># all (default)	-	generate the releases.toml and compile all the website</span>
<span class=c># run	-			serves the built website for local browsing</span>
<span class=c>#</span>
<span class=c># The run target uses hugo&#39;s built-in webserver to make the built website</span>
<span class=c># available for local browsing.  The website should have been built prior</span>
<span class=c># to attempting to use the `run` target.  By default, hugo will start its</span>
<span class=c># webserver on port 1313.</span>

<span class=nv>MAINTAINER</span><span class=o>=</span>carlavilla@FreeBSD.org <i class=conum data-value=1></i><b>(1)</b>

<span class=c># List of all languages we have content for</span>
<span class=nv>ALL_LANGUAGES</span><span class=o>=</span>	de el en es fr hu it ja <span class=nb>nl </span>ru <span class=nb>tr </span>zh-cn zh-tw

LOCALBASE?<span class=o>=</span>	/usr/local

RUBY_CMD <span class=o>=</span>	<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/ruby <i class=conum data-value=2></i><b>(2)</b>
HUGO_CMD <span class=o>=</span>	<span class=k>${</span><span class=nv>LOCALBASE</span><span class=k>}</span>/bin/hugo <i class=conum data-value=3></i><b>(3)</b>
HUGO_ARGS?<span class=o>=</span>	<span class=nt>--verbose</span>
RUBYLIB <span class=o>=</span>	../shared/lib
.export	RUBYLIB

.ifndef HOSTNAME
<span class=nb>.</span>  ifdef BIND
.HOST<span class=o>=</span><span class=si>$(</span>BIND<span class=si>)</span>
<span class=nb>.</span>  <span class=k>else</span>
.HOST<span class=o>=</span>localhost
<span class=nb>.</span>  endif
.else
.HOST<span class=o>=</span><span class=si>$(</span>HOSTNAME<span class=si>)</span>
.endif

.if defined<span class=o>(</span>DOC_LANG<span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=o>!</span>empty<span class=o>(</span>DOC_LANG<span class=o>)</span>
<span class=nv>LANGUAGES</span><span class=o>=</span>      <span class=k>${</span><span class=nv>DOC_LANG</span>:S/,/<span class=p> /g</span><span class=k>}</span>
.if  <span class=k>${</span><span class=nv>LANGUAGES</span>:Men<span class=k>}</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span>
.warning <span class=s2>&#34;Warning: cannot skip &#39;en&#39;; adding it back&#34;</span>
LANGUAGES+<span class=o>=</span>	en
.endif
.else
<span class=nv>LANGUAGES</span><span class=o>=</span>	<span class=k>${</span><span class=nv>ALL_LANGUAGES</span><span class=k>}</span>
.endif

<span class=c># Take the list of all languages, and take out the ones we have been</span>
<span class=c>#   asked for via DOC_LANG.  We&#39;ll feed this to hugo.</span>
<span class=nv>SKIP_LANGS</span><span class=o>=</span>
.for a <span class=k>in</span> <span class=k>${</span><span class=nv>ALL_LANGUAGES</span><span class=k>}</span>
.if <span class=k>${</span><span class=nv>LANGUAGES</span>:M<span class=k>${</span><span class=nv>a</span><span class=k>}}</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span>
SKIP_LANGS+<span class=o>=</span>	<span class=k>${</span><span class=nv>a</span><span class=k>}</span>
.endif
.endfor

.ORDER: all run <i class=conum data-value=4></i><b>(4)</b>

.ORDER: starting-message generate-releases
.ORDER: starting-message build
.ORDER: generate-releases build
.ORDER: build post-build
.ORDER: post-build end-message

all: starting-message generate-releases build post-build end-message <i class=conum data-value=5></i><b>(5)</b>
run: starting-message generate-releases run-local
clean: hugo-clean releases-clean

starting-message: .PHONY <i class=conum data-value=6></i><b>(6)</b>
	@echo <span class=s2>&#34;---------------------------------------------------------------&#34;</span>
	@echo <span class=s2>&#34;Building the website started on </span><span class=nv>$$</span><span class=s2>(date)&#34;</span>
	@echo <span class=s2>&#34; included languages: </span><span class=k>${</span><span class=nv>LANGUAGES</span><span class=k>}</span><span class=s2>&#34;</span>
	@echo <span class=s2>&#34; excluded languages: </span><span class=k>${</span><span class=nv>SKIP_LANGS</span><span class=k>}</span><span class=s2>&#34;</span>
	@echo <span class=s2>&#34;---------------------------------------------------------------&#34;</span>

end-message: .PHONY
	@echo <span class=s2>&#34;---------------------------------------------------------------&#34;</span>
	@echo <span class=s2>&#34;Building the website completed on </span><span class=nv>$$</span><span class=s2>(date)&#34;</span>
	@echo <span class=s2>&#34;---------------------------------------------------------------&#34;</span>

generate-releases: data/releases.toml <i class=conum data-value=7></i><b>(7)</b>

data/releases.toml:
	<span class=k>${</span><span class=nv>RUBY_CMD</span><span class=k>}</span> ./tools/releases-toml.rb

run-local: .PHONY <i class=conum data-value=8></i><b>(8)</b>
	<span class=nv>HUGO_DISABLELANGUAGES</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>${</span><span class=nv>SKIP_LANGS</span><span class=k>}</span><span class=s2>&#34;</span> <span class=k>${</span><span class=nv>HUGO_CMD</span><span class=k>}</span> server <span class=se>\</span>
	    <span class=k>${</span><span class=nv>HUGO_ARGS</span><span class=k>}</span> <span class=nt>-D</span> <span class=si>$(</span>BIND:D--bind<span class=o>=</span><span class=si>$(</span>BIND<span class=si>))</span> <span class=nt>--baseURL</span><span class=o>=</span><span class=s2>&#34;http://</span><span class=si>$(</span>.HOST<span class=si>)</span><span class=s2>:1313&#34;</span>

build: .PHONY <i class=conum data-value=9></i><b>(9)</b>
	<span class=nv>HUGO_DISABLELANGUAGES</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>${</span><span class=nv>SKIP_LANGS</span><span class=k>}</span><span class=s2>&#34;</span> <span class=k>${</span><span class=nv>HUGO_CMD</span><span class=k>}</span> <span class=k>${</span><span class=nv>HUGO_ARGS</span><span class=k>}</span>

post-build: cgi-permissions

cgi-permissions:
	@chmod 555 ./public/cgi/<span class=k>*</span>.cgi

hugo-clean:
	<span class=nb>rm</span> <span class=nt>-fr</span> public resources

releases-clean:
	<span class=nb>rm</span> <span class=nt>-f</span> data/releases.toml</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>The <code>MAINTAINER</code> flag specifies who is the maintainer of this Makefile.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td><code>RUBY_CMD</code> flag specifies the location of the Ruby binary.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td><code>HUGO_CMD</code> flag specifies the location of the Hugo binary.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td><code>.ORDER</code> directives are used to ensure multiple make jobs may run without problem.</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td><code>all</code> target builds the website and puts the result in <strong>~/doc/website/public</strong>.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td><code>starting-message</code> shows a message in the CLI to show the user that the process is running.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td><code>generate-releases</code> calls the script used to convert from AsciiDoc variables to TOML variables.
With this conversion, the releases variables can be used in AsciiDoc and in the Hugo custom templates.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td><code>run-local</code> runs hugo webserver on port 1313, or a random free port if that is already in use.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td><code>build</code> builds the website and puts the result in the <strong>~/doc/website/public</strong>.</td></tr></tbody></table></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: March 9, 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/en/books/fdp-primer/structure class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/en/books/fdp-primer/asciidoctor-primer class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#doc-build-rendering>5.1. Rendering AsciiDoc into Output</a></li><li><a href=#doc-build-toolset>5.2. The FreeBSD Documentation Build Toolset</a></li><li><a href=#doc-build-makefile>5.3. Understanding the Makefile in the Documentation Tree</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/en/books/fdp-primer/fdp-primer_en.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/en/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/en/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>English</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/en class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/en/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>â™¥</span> by the FreeBSD Community</span></section></div></footer></body></html>