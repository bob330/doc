<!doctype html><html class=theme-light lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Advanced pkg-plist Practices"><meta name=keywords content="pkg-plist,practices,configuration"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/en/books/porters-handbook/plist/><title>Chapter 8. Advanced pkg-plist Practices | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapter 8. Advanced pkg-plist Practices"><meta property="og:description" content="Advanced pkg-plist Practices"><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="en"><meta property="og:url" content="http://172.16.201.134:1313/en/books/porters-handbook/plist/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/en\/books\/porters-handbook\/plist\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/en>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/en/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/en/books>Books</a></li><li><a href=http://172.16.201.134:1313/en/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/en/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=en>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>â™¥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-c934186a5adac4f64b993f751abed30c class=toggle>
<label for=chapter-c934186a5adac4f64b993f751abed30c><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-why/>Chapter 1. Introduction</a></li><li><input type=checkbox id=chapter-2798d78fe854f2709bab5ca473b97050 class=toggle>
<label for=chapter-2798d78fe854f2709bab5ca473b97050><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/new-port/>Chapter 2. Making a New Port</a></li><li><input type=checkbox id=chapter-c0d52b9121b517084e01f59cefa725e1 class=toggle>
<label class="icon cursor" for=chapter-c0d52b9121b517084e01f59cefa725e1><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/>Chapter 3. Quick Porting</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-makefile>3.1. Writing the Makefile</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-desc>3.2. Writing the Description Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-checksum>3.3. Creating the Checksum File</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-testing>3.4. Testing the Port</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-portlint>3.5. Checking the Port with <code>portlint</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-submitting>3.6. Submitting the New Port</a></li></ul></li><li><input type=checkbox id=chapter-3694de03923da61ba10a0a25efca6ef0 class=toggle>
<label class="icon cursor" for=chapter-3694de03923da61ba10a0a25efca6ef0><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/>Chapter 4. Slow Porting</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-work>4.1. How Things Work</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-sources>4.2. Getting the Original Sources</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-modifying>4.3. Modifying the Port</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-patch>4.4. Patching</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-configure>4.5. Configuring</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-user-input>4.6. Handling User Input</a></li></ul></li><li><input type=checkbox id=chapter-165f6a6dba6651f8c25fc63ab83d6538 class=toggle>
<label class="icon cursor" for=chapter-165f6a6dba6651f8c25fc63ab83d6538><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/>Chapter 5. Configuring the Makefile</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-source>5.1. The Original Source</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-naming>5.2. Naming</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-categories>5.3. Categorization</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-distfiles>5.4. The Distribution Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-maintainer>5.5. <code>MAINTAINER</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-comment>5.6. <code>COMMENT</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-www>5.7. Project website</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#licenses>5.8. Licenses</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-portscout>5.9. <code>PORTSCOUT</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-depend>5.10. Dependencies</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-masterdir>5.11. Slave Ports and <code>MASTERDIR</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-manpages>5.12. Man Pages</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-info>5.13. Info Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-options>5.14. Makefile Options</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-wrkdir>5.15. Specifying the Working Directory</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#conflicts>5.16. Conflict Handling</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#install>5.17. Installing Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#binary-alias>5.18. Use <code>BINARY_ALIAS</code> to Rename Commands Instead of Patching the Build</a></li></ul></li><li><input type=checkbox id=chapter-19e3150e00beb84341d8ac1a73936ef0 class=toggle>
<label class="icon cursor" for=chapter-19e3150e00beb84341d8ac1a73936ef0><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/>Chapter 6. Special Considerations</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#splitting-long-files>6.1. Splitting long files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#staging>6.2. Staging</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#bundled-libs>6.3. Bundled Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#porting-shlibs>6.4. Shared Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#porting-restrictions>6.5. Ports with Distribution Restrictions or Legal Concerns</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#building>6.6. Building Mechanisms</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-autotools>6.7. Using GNU Autotools</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-gettext>6.8. Using GNU <code>gettext</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-perl>6.9. Using Perl</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-x11>6.10. Using X11</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-gnome>6.11. Using GNOME</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#gnome-components>6.12. GNOME Components</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-qt>6.13. Using Qt</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-kde>6.14. Using KDE</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-lxqt>6.15. Using LXQt</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-java>6.16. Using Java</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-php>6.17. Web Applications, Apache and PHP</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-python>6.18. Using Python</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-tcl>6.19. Using Tcl/Tk</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-sdl>6.20. Using SDL</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-wx>6.21. Using wxWidgets</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-lua>6.22. Using Lua</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-guile>6.23. Using Guile</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-iconv>6.24. Using <code>iconv</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-xfce>6.25. Using Xfce</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-budgie>6.26. Using Budgie</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-databases>6.27. Using Databases</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#rc-scripts>6.28. Starting and Stopping Services (<code>rc</code> Scripts)</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#users-and-groups>6.29. Adding Users and Groups</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#requiring-kernel-sources>6.30. Ports That Rely on Kernel Sources</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#go-libs>6.31. Go Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#haskell-libs>6.32. Haskell Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#shell-completion>6.33. Shell Completion Files</a></li></ul></li><li><input type=checkbox id=chapter-2a77b1fa0736427c336503055c700137 class=toggle>
<label class="icon cursor" for=chapter-2a77b1fa0736427c336503055c700137><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/>Chapter 7. Flavors</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-intro>7.1. An Introduction to Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-using>7.2. Using FLAVORS</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-php>7.3. <code>USES=php</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-python>7.4. <code>USES=python</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-lua>7.5. <code>USES=lua</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-guile>7.6. <code>USES=guile</code> and Flavors</a></li></ul></li><li><input type=checkbox id=chapter-154554011c772e1e6cc0108eef5e0b2b class=toggle checked>
<label class="icon cursor" for=chapter-154554011c772e1e6cc0108eef5e0b2b><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/>Chapter 8. Advanced pkg-plist Practices</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-sub>8.1. Changing pkg-plist Based on Make Variables</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-cleaning>8.2. Empty Directories</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-config>8.3. Configuration Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-dynamic>8.4. Dynamic Versus Static Package List</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-autoplist>8.5. Automated Package List Creation</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-keywords>8.6. Expanding Package List with Keywords</a></li></ul></li><li><input type=checkbox id=chapter-5955b0791ccd51005b5bc5bebeec91e5 class=toggle>
<label class="icon cursor" for=chapter-5955b0791ccd51005b5bc5bebeec91e5><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/>Chapter 9. pkg-*</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#porting-message>9.1. pkg-message</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#pkg-install>9.2. pkg-install, pkg-pre-install, and pkg-post-install</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#pkg-deinstall>9.3. pkg-deinstall, pkg-pre-deinstall, and pkg-post-deinstall</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#pkg-names>9.4. Changing the Names of pkg-*</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#using-sub-files>9.5. Making Use of <code>SUB_FILES</code> and <code>SUB_LIST</code></a></li></ul></li><li><input type=checkbox id=chapter-ee86a11caedb6395ed82b94ec7a9c6cd class=toggle>
<label class="icon cursor" for=chapter-ee86a11caedb6395ed82b94ec7a9c6cd><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/>Chapter 10. Testing the Port</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#make-describe>10.1. Running <code>make describe</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#make-test>10.2. Running <code>make test</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-portclippy>10.3. Portclippy / Portfmt</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-portlint>10.4. Portlint</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-porttools>10.5. Port Tools</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#porting-prefix>10.6. <code>PREFIX</code> and <code>DESTDIR</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-poudriere>10.7. poudriere</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-debugging-ports>10.8. Debugging ports</a></li></ul></li><li><input type=checkbox id=chapter-4ccaefe2590c044ca2b79c46e79fe17f class=toggle>
<label class="icon cursor" for=chapter-4ccaefe2590c044ca2b79c46e79fe17f><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/upgrading/>Chapter 11. Upgrading a Port</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/upgrading/#git-diff>11.1. Using Git to Make Patches</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/upgrading/#moved-and-updating-files>11.2. UPDATING and MOVED</a></li></ul></li><li><input type=checkbox id=chapter-1023911bc0041506653280b832dea3b2 class=toggle>
<label class="icon cursor" for=chapter-1023911bc0041506653280b832dea3b2><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/>Chapter 12. Security</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/#security-intro>12.1. Why Security is So Important</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/#security-fix>12.2. Fixing Security Vulnerabilities</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/#security-notify>12.3. Keeping the Community Informed</a></li></ul></li><li><input type=checkbox id=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7 class=toggle>
<label class="icon cursor" for=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/>Chapter 13. Dos and Don'ts</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-intro>13.1. Introduction</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#porting-wrkdir>13.2. <code>WRKDIR</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#porting-wrkdirprefix>13.3. <code>WRKDIRPREFIX</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#porting-versions>13.4. Differentiating Operating Systems and OS Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-after-port-mk>13.5. Writing Something After bsd.port.mk</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-sh-exec>13.6. Use the <code>exec</code> Statement in Wrapper Scripts</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-rational>13.7. Do Things Rationally</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-cc>13.8. Respect Both <code>CC</code> and <code>CXX</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-cflags>13.9. Respect <code>CFLAGS</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-verbose-logs>13.10. Verbose Build Logs</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-feedback>13.11. Feedback</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-readme>13.12. README.html</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-noinstall>13.13. Marking a Port Not Installable with <code>BROKEN</code>, <code>FORBIDDEN</code>, or <code>IGNORE</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-arch>13.14. Architectural Considerations</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-deprecated>13.15. Marking a Port for Removal with <code>DEPRECATED</code> or <code>EXPIRATION_DATE</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-dot-error>13.16. Avoid Use of the <code>.error</code> Construct</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-sysctl>13.17. Usage of sysctl</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-rerolling-distfiles>13.18. Rerolling Distfiles</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-use-posix-standards>13.19. Use POSIX Standards</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-misc>13.20. Miscellanea</a></li></ul></li><li><input type=checkbox id=chapter-5ef4c4c471a3f55c74fb71881f9d8713 class=toggle>
<label for=chapter-5ef4c4c471a3f55c74fb71881f9d8713><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-samplem/>Chapter 14. A Sample Makefile</a></li><li><input type=checkbox id=chapter-15c16456ccd7b4dc2a25fa8defa336a1 class=toggle>
<label class="icon cursor" for=chapter-15c16456ccd7b4dc2a25fa8defa336a1><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/>Chapter 15. Order of Variables in Port Makefiles</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-portname>15.1. <code>PORTNAME</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-patch>15.2. <code>PATCHFILES</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-maintainer>15.3. <code>MAINTAINER</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-license>15.4. <code>LICENSE</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-broken>15.5. Generic <code>BROKEN</code>/<code>IGNORE</code>/<code>DEPRECATED</code> Messages</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-depends>15.6. The Dependencies Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-flavors>15.7. Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-uses>15.8. <code>USES</code> and <code>USE_x</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-variables>15.9. Standard bsd.port.mk Variables</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-options>15.10. Options and Helpers</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-rest>15.11. The Rest of the Variables</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-targets>15.12. The Targets</a></li></ul></li><li><input type=checkbox id=chapter-70f5a4755700a24529175d26e65871bf class=toggle>
<label class="icon cursor" for=chapter-70f5a4755700a24529175d26e65871bf><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/>Chapter 16. Keeping Up</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#freshports>16.1. FreshPorts</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#cgit>16.2. The Web Interface to the Source Repository</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#ports-mailing-list>16.3. The FreeBSD Ports Mailing List</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#build-cluster>16.4. The FreeBSD Port Building Cluster</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#distfile-survey>16.5. Portscout: the FreeBSD Ports Distfile Scanner</a></li></ul></li><li><input type=checkbox id=chapter-8225273087f0e195be28132f4b5a0562 class=toggle>
<label class="icon cursor" for=chapter-8225273087f0e195be28132f4b5a0562><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/>Chapter 17. Using USES Macros</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-intro>17.1. An Introduction to <code>USES</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-7z>17.2. <code>7z</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ada>17.3. <code>ada</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-autoreconf>17.4. <code>autoreconf</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-blaslapack>17.5. <code>blaslapack</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-bdb>17.6. <code>bdb</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-bison>17.7. <code>bison</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-budgie>17.8. <code>budgie</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cabal>17.9. <code>cabal</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cargo>17.10. <code>cargo</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-charsetfix>17.11. <code>charsetfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cmake>17.12. <code>cmake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-compiler>17.13. <code>compiler</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cpe>17.14. <code>cpe</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cran>17.15. <code>cran</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-desktop-file-utils>17.16. <code>desktop-file-utils</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-desthack>17.17. <code>desthack</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-display>17.18. <code>display</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-dos2unix>17.19. <code>dos2unix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-drupal>17.20. <code>drupal</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ebur128>17.21. <code>ebur128</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-eigen>17.22. <code>eigen</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-elfctl>17.23. <code>elfctl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-erlang>17.24. <code>erlang</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fakeroot>17.25. <code>fakeroot</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fam>17.26. <code>fam</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-firebird>17.27. <code>firebird</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fonts>17.28. <code>fonts</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fortran>17.29. <code>fortran</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fuse>17.30. <code>fuse</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gem>17.31. <code>gem</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gettext>17.32. <code>gettext</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gettext-runtime>17.33. <code>gettext-runtime</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gettext-tools>17.34. <code>gettext-tools</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ghostscript>17.35. <code>ghostscript</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gl>17.36. <code>gl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gmake>17.37. <code>gmake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gnome>17.38. <code>gnome</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-go>17.39. <code>go</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gperf>17.40. <code>gperf</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-grantlee>17.41. <code>grantlee</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-groff>17.42. <code>groff</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gssapi>17.43. <code>gssapi</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gstreamer>17.44. <code>gstreamer</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-guile>17.45. <code>guile</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-horde>17.46. <code>horde</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-iconv>17.47. <code>iconv</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-imake>17.48. <code>imake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-kde>17.49. <code>kde</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-kmod>17.50. <code>kmod</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ldap>17.51. <code>ldap</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-lha>17.52. <code>lha</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-libarchive>17.53. <code>libarchive</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-libedit>17.54. <code>libedit</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-libtool>17.55. <code>libtool</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-linux>17.56. <code>linux</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-llvm>17.57. <code>llvm</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-localbase>17.58. <code>localbase</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-lua>17.59. <code>lua</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-luajit>17.60. <code>luajit</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-lxqt>17.61. <code>lxqt</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-magick>17.62. <code>magick</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-makeinfo>17.63. <code>makeinfo</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-makeself>17.64. <code>makeself</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-mate>17.65. <code>mate</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-meson>17.66. <code>meson</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-metaport>17.67. <code>metaport</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-minizip>17.68. <code>minizip</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-mysql>17.69. <code>mysql</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-mono>17.70. <code>mono</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-motif>17.71. <code>motif</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ncurses>17.72. <code>ncurses</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-nextcloud>17.73. <code>nextcloud</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ninja>17.74. <code>ninja</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-nodejs>17.75. <code>nodejs</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-objc>17.76. <code>objc</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-octave>17.77. <code>octave</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-openal>17.78. <code>openal</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pathfix>17.79. <code>pathfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pear>17.80. <code>pear</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-perl5>17.81. <code>perl5</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pgsql>17.82. <code>pgsql</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-php>17.83. <code>php</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pkgconfig>17.84. <code>pkgconfig</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pure>17.85. <code>pure</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pyqt>17.86. <code>pyqt</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pytest>17.87. <code>pytest</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-python>17.88. <code>python</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qmail>17.89. <code>qmail</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qmake>17.90. <code>qmake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qt>17.91. <code>qt</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qt-dist>17.92. <code>qt-dist</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-readline>17.93. <code>readline</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ruby>17.94. <code>ruby</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-samba>17.95. <code>samba</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-scons>17.96. <code>scons</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-shared-mime-info>17.97. <code>shared-mime-info</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-shebangfix>17.98. <code>shebangfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-sqlite>17.99. <code>sqlite</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ssl>17.100. <code>ssl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tar>17.101. <code>tar</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tcl>17.102. <code>tcl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-terminfo>17.103. <code>terminfo</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tex>17.104. <code>tex</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tk>17.105. <code>tk</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-uidfix>17.106. <code>uidfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-uniquefiles>17.107. <code>uniquefiles</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-vala>17.108. <code>vala</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-varnish>17.109. <code>varnish</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-webplugin>17.110. <code>webplugin</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-xfce>17.111. <code>xfce</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-xorg>17.112. <code>xorg</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-xorg-cat>17.113. <code>xorg-cat</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-zip>17.114. <code>zip</code></a></li></ul></li><li><input type=checkbox id=chapter-7713ccc63287693c9be6c832b2c1e850 class=toggle>
<label class="icon cursor" for=chapter-7713ccc63287693c9be6c832b2c1e850><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/>Chapter 18. __FreeBSD_version Values</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-15>18.1. FreeBSD 15 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-14>18.2. FreeBSD 14 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-13>18.3. FreeBSD 13 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-12>18.4. FreeBSD 12 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-11>18.5. FreeBSD 11 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-10>18.6. FreeBSD 10 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-9>18.7. FreeBSD 9 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-8>18.8. FreeBSD 8 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-7>18.9. FreeBSD 7 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-6>18.10. FreeBSD 6 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-5>18.11. FreeBSD 5 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-4>18.12. FreeBSD 4 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-3>18.13. FreeBSD 3 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-2.2>18.14. FreeBSD 2.2 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-2>18.15. FreeBSD 2 Before 2.2-RELEASE Versions</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapter 8. Advanced pkg-plist Practices</h1><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#plist-sub>8.1. Changing pkg-plist Based on Make Variables</a></li><li><a href=#plist-cleaning>8.2. Empty Directories</a></li><li><a href=#plist-config>8.3. Configuration Files</a></li><li><a href=#plist-dynamic>8.4. Dynamic Versus Static Package List</a></li><li><a href=#plist-autoplist>8.5. Automated Package List Creation</a></li><li><a href=#plist-keywords>8.6. Expanding Package List with Keywords</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=plist-sub>8.1. Changing pkg-plist Based on Make Variables<a class=anchor href=#plist-sub></a></h2><div class=sectionbody><div class=paragraph><p>Some ports, particularly the <code>p5-</code> ports, need to change their <span class=filename>pkg-plist</span> depending on what options they are configured with (or version of <code>perl</code>, in the case of <code>p5-</code> ports).
To make this easy, any instances in <span class=filename>pkg-plist</span> of <code>%%OSREL%%</code>, <code>%%PERL_VER%%</code>, and <code>%%PERL_VERSION%%</code> will be substituted appropriately.
The value of <code>%%OSREL%%</code> is the numeric revision of the operating system (for example, <code>4.9</code>).
<code>%%PERL_VERSION%%</code> and <code>%%PERL_VER%%</code> is the full version number of <code>perl</code> (for example, <code>5.8.9</code>).
Several other <code>%%<em>VARS</em>%%</code> related to portâ€™s documentation files are described in <a href=../makefiles/#install-documentation>the relevant section</a>.</p></div><div class=paragraph><p>To make other substitutions, set <code>PLIST_SUB</code> with a list of <code><em>VAR=VALUE</em></code> pairs and instances of <code>%%<em>VAR</em>%%</code> will be substituted with <em>VALUE</em> in <span class=filename>pkg-plist</span>.</p></div><div class=paragraph><p>For instance, if a port installs many files in a version-specific subdirectory, use a placeholder for the version so that <span class=filename>pkg-plist</span> does not have to be regenerated every time the port is updated.
For example, set:</p></div><div class="literalblock programlisting"><div class=content><pre>OCTAVE_VERSION=	${PORTREVISION}
PLIST_SUB=	OCTAVE_VERSION=${OCTAVE_VERSION}</pre></div></div><div class=paragraph><p>in the <span class=filename>Makefile</span> and use <code>%%OCTAVE_VERSION%%</code> wherever the version shows up in <span class=filename>pkg-plist</span>.
When the port is upgraded, it will not be necessary to edit dozens (or in some cases, hundreds) of lines in <span class=filename>pkg-plist</span>.</p></div><div class=paragraph><p>If files are installed conditionally on the options set in the port, the usual way of handling it is prefixing <span class=filename>pkg-plist</span> lines with a <code>%%OPT%%</code> for lines needed when the option is enabled, or <code>%%NO_OPT%%</code> when the option is disabled, and adding <code>OPTIONS_SUB=yes</code> to the <span class=filename>Makefile</span>.
See <a href=../makefiles/#options_sub><code>OPTIONS_SUB</code></a> for more information.</p></div><div class=paragraph><p>For instance, if there are files that are only installed when the <code>X11</code> option is enabled, and <span class=filename>Makefile</span> has:</p></div><div class="literalblock programlisting"><div class=content><pre>OPTIONS_DEFINE=	X11
OPTIONS_SUB=	yes</pre></div></div><div class=paragraph><p>In <span class=filename>pkg-plist</span>, put <code>%%X11%%</code> in front of the lines only being installed when the option is enabled, like this :</p></div><div class="literalblock programlisting"><div class=content><pre>%%X11%%bin/foo-gui</pre></div></div><div class=paragraph><p>This substitution will be done between the <code>pre-install</code> and <code>do-install</code> targets, by reading from <span class=filename>PLIST</span> and writing to <span class=filename>TMPPLIST</span> (default: <span class=filename>WRKDIR/.PLIST.mktmp</span>).
So if the port builds <span class=filename>PLIST</span> on the fly, do so in or before <code>pre-install</code>.
Also, if the port needs to edit the resulting file, do so in <code>post-install</code> to a file named <span class=filename>TMPPLIST</span>.</p></div><div class=paragraph><p>Another way of modifying a portâ€™s packing list is based on setting the variables <code>PLIST_FILES</code> and <code>PLIST_DIRS</code>.
The value of each variable is regarded as a list of pathnames to write to <span class=filename>TMPPLIST</span> along with <span class=filename>PLIST</span> contents.
While names listed in <code>PLIST_FILES</code> and <code>PLIST_DIRS</code> are subject to <code>%%<em>VAR</em>%%</code> substitution as described above, it is better to use the <code>${<em>VAR</em>}</code> directly.
Except for that, names from <code>PLIST_FILES</code> will appear in the final packing list unchanged, while <code>@dir</code> will be prepended to names from <code>PLIST_DIRS</code>.
To take effect, <code>PLIST_FILES</code> and <code>PLIST_DIRS</code> must be set before <span class=filename>TMPPLIST</span> is written, that is, in <code>pre-install</code> or earlier.</p></div><div class=paragraph><p>From time to time, using <code>OPTIONS_SUB</code> is not enough.
In those cases, adding a specific <code><em>TAG</em></code> to <code>PLIST_SUB</code> inside the <span class=filename>Makefile</span> with a special value of <code>@comment</code>, makes package tools to ignore the line.
For instance, if some files are only installed when the <code>X11</code> option is on and the architecture is <code>i386</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>.include &lt;bsd.port.pre.mk&gt;

.if ${PORT_OPTIONS:MX11} &amp;&amp; ${ARCH} == &#34;i386&#34;
PLIST_SUB+=	X11I386=&#34;&#34;
.else
PLIST_SUB+=	X11I386=&#34;@comment &#34;
.endif</pre></div></div></div></div><div class=sect1><h2 id=plist-cleaning>8.2. Empty Directories<a class=anchor href=#plist-cleaning></a></h2><div class=sectionbody><div class=sect2><h3 id=plist-dir-cleaning>8.2.1. Cleaning Up Empty Directories<a class=anchor href=#plist-dir-cleaning></a></h3><div class=paragraph><p>When being de-installed, a port has to remove empty directories it created.
Most of these directories are removed automatically by <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a>, but for directories created outside of <span class=filename>${PREFIX}</span>, or empty directories, some more work needs to be done.
This is usually accomplished by adding <code>@dir</code> lines for those directories.
Subdirectories must be deleted before deleting parent directories.</p></div><div class="literalblock programlisting"><div class=content><pre>[...]
@dir /var/games/oneko/saved-games
@dir /var/games/oneko</pre></div></div></div><div class=sect2><h3 id=plist-dir-empty>8.2.2. Creating Empty Directories<a class=anchor href=#plist-dir-empty></a></h3><div class=paragraph><p>Empty directories created during port installation need special attention.
They must be present when the package is created.
If they are not created by the port code, create them in the <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>post-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/some/directory</pre></div></div><div class=paragraph><p>Add the directory to <span class=filename>pkg-plist</span> like any other.
For example:</p></div><div class="literalblock programlisting"><div class=content><pre>@dir some/directory</pre></div></div></div></div></div><div class=sect1><h2 id=plist-config>8.3. Configuration Files<a class=anchor href=#plist-config></a></h2><div class=sectionbody><div class=paragraph><p>If the port installs configuration files to <span class=filename>PREFIX/etc</span> (or elsewhere) do <em>not</em> list them in <span class=filename>pkg-plist</span>.
That will cause <code>pkg delete</code> to remove files that have been carefully edited by the user, and a re-installation will wipe them out.</p></div><div class=paragraph><p>Instead, install sample files with a <span class=filename>filename.sample</span> extension.
The <code>@sample</code> macro automates this, see <a href=../plist/#plist-keywords-sample>Expanding Package List with Keywords</a> for what it does exactly.
For each sample file, add a line to <span class=filename>pkg-plist</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>@sample etc/orbit.conf.sample</pre></div></div><div class=paragraph><p>If there is a very good reason not to install a working configuration file by default, only list the sample filename in <span class=filename>pkg-plist</span>,
without the <code>@sample</code> followed by a space part, and add a <a href=../pkg-files/#porting-message>message</a> pointing out that the user must copy and edit the file before the software will work.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>When a port installs its configuration in a subdirectory of <span class=filename>${PREFIX}/etc</span>, use <code>ETCDIR</code>, which defaults to <code>${PREFIX}/etc/${PORTNAME}</code>, it can be overridden in the ports <span class=filename>Makefile</span> if there is a convention for the port to use some other directory.
The <code>%%ETCDIR%%</code> macro will be used in its stead in <span class=filename>pkg-plist</span>.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The sample configuration files should always have the <span class=filename>.sample</span> suffix.
If for some historical reason using the standard suffix is not possible, or if the sample files come from some other directory, use this construct:</p></div><div class="literalblock programlisting"><div class=content><pre>@sample etc/orbit.conf-dist etc/orbit.conf</pre></div></div><div class=paragraph><p>or</p></div><div class="literalblock programlisting"><div class=content><pre>@sample %%EXAMPLESDIR%%/orbit.conf etc/orbit.conf</pre></div></div><div class=paragraph><p>The format is <code>@sample <em>sample-file actual-config-file</em></code>.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=plist-dynamic>8.4. Dynamic Versus Static Package List<a class=anchor href=#plist-dynamic></a></h2><div class=sectionbody><div class=paragraph><p>A <em>static package list</em> is a package list which is available in the Ports Collection either as <span class=filename>pkg-plist</span> (with or without variable substitution), or embedded into the <span class=filename>Makefile</span> via <code>PLIST_FILES</code> and <code>PLIST_DIRS</code>.
Even if the contents are auto-generated by a tool or a target in the Makefile <em>before</em> the inclusion into the Ports Collection by a committer (for example, using <code>make makeplist</code>), this is still considered a static list, since it is possible to examine it without having to download or compile the distfile.</p></div><div class=paragraph><p>A <em>dynamic package list</em> is a package list which is generated at the time the port is compiled based upon the files and directories which are installed.
It is not possible to examine it before the source code of the ported application is downloaded and compiled, or after running a <code>make clean</code>.</p></div><div class=paragraph><p>While the use of dynamic package lists is not forbidden, maintainers should use static package lists wherever possible, as it enables users to <a href="https://man.freebsd.org/cgi/man.cgi?query=grep&amp;sektion=1&amp;format=html">grep(1)</a> through available ports to discover, for example, which port installs a certain file.
Dynamic lists should be primarily used for complex ports where the package list changes drastically based upon optional features of the port (and thus maintaining a static package list is infeasible), or ports which change the package list based upon the version of dependent software used.
For example, ports which generate docs with Javadoc.</p></div></div></div><div class=sect1><h2 id=plist-autoplist>8.5. Automated Package List Creation<a class=anchor href=#plist-autoplist></a></h2><div class=sectionbody><div class=paragraph><p>First, make sure the port is almost complete, with only <span class=filename>pkg-plist</span> missing.
Running <code>make makeplist</code> will show an example for <span class=filename>pkg-plist</span>.
The output of <code>makeplist</code> must be double checked for correctness as it tries to automatically guess a few things, and can get it wrong.</p></div><div class=paragraph><p>User configuration files should be installed as <span class=filename>filename.sample</span>, as
it is described in <a href=../plist/#plist-config>Configuration Files</a>.
<span class=filename>info/dir</span> must not be listed and appropriate <span class=filename>install-info</span> lines must be added as noted in the <a href=../makefiles/#makefile-info>info files</a> section.
Any libraries installed by the port must be listed as specified in the <a href=../special/#porting-shlibs>shared libraries</a> section.</p></div><div class=sect2><h3 id=plist-autoplist-regex>8.5.1. Expanding <code>PLIST_SUB</code> with Regular Expressions<a class=anchor href=#plist-autoplist-regex></a></h3><div class=paragraph><p>Strings to be replaced sometimes need to be very specific to avoid undesired replacements.
This is a common problem with shorter values.</p></div><div class=paragraph><p>To address this problem, for each <code><em>PLACEHOLDER</em>=<em>value</em></code>, a <code>PLACEHOLDER_regex=regex</code> can be set, with the <code><em>regex</em></code> part matching <em>value</em> more precisely.</p></div><div id=plist-autoplist-regex-ex1 class=exampleblock><div class=title>Example 1. Using PLIST_SUB with Regular Expressions</div><div class=content><div class=paragraph><p>Perl ports can install architecture dependent files in a specific tree.
On FreeBSD to ease porting, this tree is called <code>mach</code>.
For example, a port that installs a file whose path contains <code>mach</code> could have that part of the path string replaced with the wrong values.
Consider this <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	Machine-Build
DISTVERSION=	1
CATEGORIES=	devel perl5
MASTER_SITES=	CPAN
PKGNAMEPREFIX=	p5-

MAINTAINER=	perl@FreeBSD.org
COMMENT=	Building machine
WWW=		https://search.cpan.org/dist/Machine-Build

USES=		perl5
USE_PERL5=	configure

PLIST_SUB=	PERL_ARCH=mach</pre></div></div><div class=paragraph><p>The files installed by the port are:</p></div><div class="literalblock programlisting"><div class=content><pre>/usr/local/bin/machine-build
/usr/local/lib/perl5/site_perl/man/man1/machine-build.1.gz
/usr/local/lib/perl5/site_perl/man/man3/Machine::Build.3.gz
/usr/local/lib/perl5/site_perl/Machine/Build.pm
/usr/local/lib/perl5/site_perl/mach/5.20/Machine/Build/Build.so</pre></div></div><div class=paragraph><p>Running <code>make makeplist</code> wrongly generates:</p></div><div class="literalblock programlisting"><div class=content><pre>bin/%%PERL_ARCH%%ine-build
%%PERL5_MAN1%%/%%PERL_ARCH%%ine-build.1.gz
%%PERL5_MAN3%%/Machine::Build.3.gz
%%SITE_PERL%%/Machine/Build.pm
%%SITE_PERL%%/%%PERL_ARCH%%/%%PERL_VER%%/Machine/Build/Build.so</pre></div></div><div class=paragraph><p>Change the <code>PLIST_SUB</code> line from the <span class=filename>Makefile</span> to:</p></div><div class="literalblock programlisting"><div class=content><pre>PLIST_SUB=	PERL_ARCH=mach \
		PERL_ARCH_regex=\bmach\b</pre></div></div><div class=paragraph><p>Now <code>make makeplist</code> correctly generates:</p></div><div class="literalblock programlisting"><div class=content><pre>bin/machine-build
%%PERL5_MAN1%%/machine-build.1.gz
%%PERL5_MAN3%%/Machine::Build.3.gz
%%SITE_PERL%%/Machine/Build.pm
%%SITE_PERL%%/%%PERL_ARCH%%/%%PERL_VER%%/Machine/Build/Build.so</pre></div></div></div></div></div></div></div><div class=sect1><h2 id=plist-keywords>8.6. Expanding Package List with Keywords<a class=anchor href=#plist-keywords></a></h2><div class=sectionbody><div class=paragraph><p>All keywords can also take optional arguments in parentheses.
The arguments are owner, group, and mode.
This argument is used on the file or directory referenced.
To change the owner, group, and mode of a configuration file, use:</p></div><div class="literalblock programlisting"><div class=content><pre>@sample(games,games,640) etc/config.sample</pre></div></div><div class=paragraph><p>The arguments are optional.
If only the group and mode need to be changed, use:</p></div><div class="literalblock programlisting"><div class=content><pre>@sample(,games,660) etc/config.sample</pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>If a keyword is used on an <a href=../makefiles/#makefile-options>optional</a> entry, it must to be added after the helper:</p></div><div class="literalblock programlisting"><div class=content><pre>%%FOO%%@sample etc/orbit.conf.sample</pre></div></div><div class=paragraph><p>This is because the options plist helpers are used to comment out the line, so they need to be put first.
See <a href=../makefiles/#options_sub><code>OPTIONS_SUB</code></a> for more information.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=plist-keywords-desktop-file-utils>8.6.1. <code>@desktop-file-utils</code><a class=anchor href=#plist-keywords-desktop-file-utils></a></h3><div class=paragraph><p>Will run <code>update-desktop-database -q</code> after installation and deinstallation.
<em>Never</em> use directly, add <a href=../uses/#uses-desktop-file-utils><code>USES=desktop-file-utils</code></a> to the <span class=filename>Makefile</span>.</p></div></div><div class=sect2><h3 id=plist-keywords-fc>8.6.2. <code>@fc</code> <em>directory</em><a class=anchor href=#plist-keywords-fc></a></h3><div class=paragraph><p>Add a <code>@dir</code> entry for the directory passed as an argument, and run <code>fc-cache -fs</code> on that directory after installation and deinstallation.</p></div></div><div class=sect2><h3 id=plist-keywords-fontsdir>8.6.3. <code>@fontsdir</code> <em>directory</em><a class=anchor href=#plist-keywords-fontsdir></a></h3><div class=paragraph><p>Add a <code>@dir</code> entry for the directory passed as an argument, and run <code>mkfontscale</code> and <code>mkfontdir</code> on that directory after installation and deinstallation.
Additionally, on deinstallation, it removes the <span class=filename>fonts.scale</span> and <span class=filename>fonts.dir</span> cache files if they are empty.</p></div></div><div class=sect2><h3 id=plist-keywords-info>8.6.4. <code>@info</code> <em>file</em><a class=anchor href=#plist-keywords-info></a></h3><div class=paragraph><p>Add the file passed as argument to the plist, and updates the info document index on installation and deinstallation.
Additionally, it removes the index if empty on deinstallation.
This should never be used manually, but always through <code>INFO</code>.
See <a href=../makefiles/#makefile-info>Info Files</a> for more information.</p></div></div><div class=sect2><h3 id=plist-keywords-kld>8.6.5. <code>@kld</code> <em>directory</em><a class=anchor href=#plist-keywords-kld></a></h3><div class=paragraph><p>Runs <code>kldxref</code> on the directory on installation and deinstallation.
Additionally, on deinstallation, it will remove the directory if empty.</p></div></div><div class=sect2><h3 id=plist-keywords-rmtry>8.6.6. <code>@rmtry</code> <em>file</em><a class=anchor href=#plist-keywords-rmtry></a></h3><div class=paragraph><p>Will remove the file on deinstallation, and not give an error if the file is not there.</p></div></div><div class=sect2><h3 id=plist-keywords-sample>8.6.7. <code>@sample</code> <em>file</em> [<em>file</em>]<a class=anchor href=#plist-keywords-sample></a></h3><div class=paragraph><p>This is used to handle installation of configuration files, through example files bundled with the package.
The "actual", non-sample, file is either the second filename, if present, or the first filename without the <span class=filename>.sample</span> extension.</p></div><div class=paragraph><p>This does three things. First, add the first file passed as argument, the sample file, to the plist.
Then, on installation, if the actual file is not found, copy the sample file to the actual file.
And finally, on deinstallation, remove the actual file if it has not been modified.
See <a href=../plist/#plist-config>Configuration Files</a> for more information.</p></div></div><div class=sect2><h3 id=plist-keywords-shared-mime-info>8.6.8. <code>@shared-mime-info</code> <em>directory</em><a class=anchor href=#plist-keywords-shared-mime-info></a></h3><div class=paragraph><p>Runs <code>update-mime-database</code> on the directory on installation and deinstallation.</p></div></div><div class=sect2><h3 id=plist-keywords-shell>8.6.9. <code>@shell</code> <em>file</em><a class=anchor href=#plist-keywords-shell></a></h3><div class=paragraph><p>Add the file passed as argument to the plist.</p></div><div class=paragraph><p>On installation, add the full path to <em>file</em> to <span class=filename>/etc/shells</span>, while making sure it is not added twice.
On deinstallation, remove it from <span class=filename>/etc/shells</span>.</p></div></div><div class=sect2><h3 id=plist-keywords-terminfo>8.6.10. <code>@terminfo</code><a class=anchor href=#plist-keywords-terminfo></a></h3><div class=paragraph><p>Do not use by itself.
If the port installs <span class=filename>*.terminfo</span> files, add <a href=../uses/#uses-terminfo><code>USES=terminfo</code></a> to its <span class=filename>Makefile</span>.</p></div><div class=paragraph><p>On installation and deinstallation, if <code>tic</code> is present, refresh <span class=filename>${PREFIX}/shared/misc/terminfo.db</span> from the <span class=filename>*.terminfo</span> files in <span class=filename>${PREFIX}/shared/misc</span>.</p></div></div><div class=sect2><h3 id=plist-keywords-base>8.6.11. Base Keywords<a class=anchor href=#plist-keywords-base></a></h3><div class=paragraph><p>There are a few keywords that are hardcoded, and documented in <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-create&amp;sektion=8&amp;format=html">pkg-create(8)</a>. For the sake of completeness, they are also documented here.</p></div><div class=sect3><h4 id=plist-keywords-base-empty>8.6.11.1. <code>@</code> [<em>file</em>]<a class=anchor href=#plist-keywords-base-empty></a></h4><div class=paragraph><p>The empty keyword is a placeholder to use when the fileâ€™s owner, group, or mode need to be changed.
For example, to set the group of the file to <code>games</code> and add the setgid bit, add:</p></div><div class="literalblock programlisting"><div class=content><pre>@(,games,2755) sbin/daemon</pre></div></div></div><div class=sect3><h4 id=plist-keywords-base-exec>8.6.11.2. <code>@preexec</code> <em>command</em>, <code>@postexec</code> <em>command</em>, <code>@preunexec</code> <em>command</em>, <code>@postunexec</code> <em>command</em><a class=anchor href=#plist-keywords-base-exec></a></h4><div class=paragraph><p>Execute <em>command</em> as part of the package installation or deinstallation process.</p></div><div class=dlist><dl><dt class=hdlist1><code>@preexec</code> <em>command</em></dt><dd><p>Execute <em>command</em> as part of the <span class=filename>pre-install</span> scripts.</p></dd><dt class=hdlist1><code>@postexec</code> <em>command</em></dt><dd><p>Execute <em>command</em> as part of the <span class=filename>post-install</span> scripts.</p></dd><dt class=hdlist1><code>@preunexec</code> <em>command</em></dt><dd><p>Execute <em>command</em> as part of the <span class=filename>pre-deinstall</span> scripts.</p></dd><dt class=hdlist1><code>@postunexec</code> <em>command</em></dt><dd><p>Execute <em>command</em> as part of the <span class=filename>post-deinstall</span> scripts.</p></dd></dl></div><div class=paragraph><p>If <em>command</em> contains any of these sequences somewhere in it, they are expanded inline.
For these examples, assume that <code>@cwd</code> is set to <span class=filename>/usr/local</span> and the last extracted file was <span class=filename>bin/emacs</span>.</p></div><div class=dlist><dl><dt class=hdlist1><code>%F</code></dt><dd><p>Expand to the last filename extracted (as specified).
In the example case <span class=filename>bin/emacs</span>.</p></dd><dt class=hdlist1><code>%D</code></dt><dd><p>Expand to the current directory prefix, as set with <code>@cwd</code>.
In the example case <span class=filename>/usr/local</span>.</p></dd><dt class=hdlist1><code>%B</code></dt><dd><p>Expand to the basename of the fully qualified filename, that is, the current directory prefix plus the last filespec, minus the trailing filename.
In the example case, that would be <span class=filename>/usr/local/bin</span>.</p></dd><dt class=hdlist1><code>%f</code></dt><dd><p>Expand to the filename part of the fully qualified name, or the converse of <code>%B</code>.
In the example case, <span class=filename>emacs</span>.</p></dd></dl></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>These keywords are here to help you set up the package so that it is as ready to use as possible.
They <em>must not</em> be abused to start services, stop services, or run any other commands that will modify the currently running system.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=plist-keywords-base-mode>8.6.11.3. <code>@mode</code> <em>mode</em><a class=anchor href=#plist-keywords-base-mode></a></h4><div class=paragraph><p>Set default permission for all subsequently extracted files to <em>mode</em>.
Format is the same as that used by <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a>.
Use without an arg to set back to default permissions (mode of the file while being packed).</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>This must be a numeric mode, like <code>644</code>, <code>4755</code>, or <code>600</code>.
It cannot be a relative mode like <code>u+s</code>.</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=plist-keywords-base-owner>8.6.11.4. <code>@owner</code> <em>user</em><a class=anchor href=#plist-keywords-base-owner></a></h4><div class=paragraph><p>Set default ownership for all subsequent files to <em>user</em>.
Use without an argument to set back to default ownership (<code>root</code>).</p></div></div><div class=sect3><h4 id=plist-keywords-base-group>8.6.11.5. <code>@group</code> <em>group</em><a class=anchor href=#plist-keywords-base-group></a></h4><div class=paragraph><p>Set default group ownership for all subsequent files to <em>group</em>.
Use without an arg to set back to default group ownership (<code>wheel</code>).</p></div></div><div class=sect3><h4 id=plist-keywords-base-comment>8.6.11.6. <code>@comment</code> <em>string</em><a class=anchor href=#plist-keywords-base-comment></a></h4><div class=paragraph><p>This line is ignored when packing.</p></div></div><div class=sect3><h4 id=plist-keywords-base-dir>8.6.11.7. <code>@dir</code> <em>directory</em><a class=anchor href=#plist-keywords-base-dir></a></h4><div class=paragraph><p>Declare directory name. By default, directories created under <code>PREFIX</code> by a package installation are automatically removed.
Use this when an empty directory under <code>PREFIX</code> needs to be created, or when the directory needs to have non default owner, group, or mode.
Directories outside of <code>PREFIX</code> need to be registered.
For example, <span class=filename>/var/db/${PORTNAME}</span> needs to have a <code>@dir</code> entry whereas <span class=filename>${PREFIX}/shared/${PORTNAME}</span> does not if it contains files or uses the default owner, group, and mode.</p></div></div><div class=sect3><h4 id=plist-keywords-base-exec-deprecated>8.6.11.8. <code>@exec</code> <em>command</em>, <code>@unexec</code> <em>command</em> (Deprecated)<a class=anchor href=#plist-keywords-base-exec-deprecated></a></h4><div class=paragraph><p>Execute <em>command</em> as part of the installation or deinstallation process.
Please use <a href=../plist/#plist-keywords-base-exec><code>@preexec</code> <em>command</em></a> instead.</p></div></div><div class=sect3><h4 id=plist-keywords-base-dirrm>8.6.11.9. <code>@dirrm</code> <em>directory</em> (Deprecated)<a class=anchor href=#plist-keywords-base-dirrm></a></h4><div class=paragraph><p>Declare directory name to be deleted at deinstall time.
By default, directories created under <code>PREFIX</code> by a package installation are deleted when the package is deinstalled.</p></div></div><div class=sect3><h4 id=plist-keywords-base-dirrmtry>8.6.11.10. <code>@dirrmtry</code> <em>directory</em> (Deprecated)<a class=anchor href=#plist-keywords-base-dirrmtry></a></h4><div class=paragraph><p>Declare directory name to be removed, as for <code>@dirrm</code>, but does not issue a warning if the directory cannot be removed.</p></div></div></div><div class=sect2><h3 id=plist-keywords-creating-new>8.6.12. Creating New Keywords<a class=anchor href=#plist-keywords-creating-new></a></h3><div class=paragraph><p>Package list files can be extended by keywords that are defined in the <span class=filename>${PORTSDIR}/Keywords</span> directory.
The settings for each keyword are stored in a UCL file named <span class=filename>keyword.ucl</span>.
The file must contain at least one of these sections:</p></div><div class=ulist><ul><li><p><code>attributes</code></p></li><li><p><code>action</code></p></li><li><p><code>pre-install</code></p></li><li><p><code>post-install</code></p></li><li><p><code>pre-deinstall</code></p></li><li><p><code>post-deinstall</code></p></li><li><p><code>pre-upgrade</code></p></li><li><p><code>post-upgrade</code></p></li></ul></div><div class=sect3><h4 id=plist-keywords-attributes>8.6.12.1. <code>attributes</code><a class=anchor href=#plist-keywords-attributes></a></h4><div class=paragraph><p>Changes the owner, group, or mode used by the keyword.
Contains an associative array where the possible keys are <code>owner</code>, <code>group</code>, and <code>mode</code>.
The values are, respectively, a user name, a group name, and a file mode.
For example:</p></div><div class="literalblock programlisting"><div class=content><pre>attributes: { owner: &#34;games&#34;, group: &#34;games&#34;, mode: 0555 }</pre></div></div></div><div class=sect3><h4 id=plist-keywords-action>8.6.12.2. <code>action</code><a class=anchor href=#plist-keywords-action></a></h4><div class=paragraph><p>Defines what happens to the keywordâ€™s parameter. Contains an array where the possible values are:</p></div><div class=dlist><dl><dt class=hdlist1><code>setprefix</code></dt><dd><p>Set the prefix for the next plist entries.</p></dd><dt class=hdlist1><code>dir</code></dt><dd><p>Register a directory to be created on install and removed on deinstall.</p></dd><dt class=hdlist1><code>dirrm</code></dt><dd><p>Register a directory to be deleted on deinstall.
Deprecated.</p></dd><dt class=hdlist1><code>dirrmtry</code></dt><dd><p>Register a directory to try and deleted on deinstall.
Deprecated.</p></dd><dt class=hdlist1><code>file</code></dt><dd><p>Register a file.</p></dd><dt class=hdlist1><code>setmode</code></dt><dd><p>Set the mode for the next plist entries.</p></dd><dt class=hdlist1><code>setowner</code></dt><dd><p>Set the owner for the next plist entries.</p></dd><dt class=hdlist1><code>setgroup</code></dt><dd><p>Set the group for the next plist entries.</p></dd><dt class=hdlist1><code>comment</code></dt><dd><p>Does not do anything, equivalent to not entering an <code>action</code> section.</p></dd><dt class=hdlist1><code>ignore_next</code></dt><dd><p>Ignore the next entry in the plist.</p></dd></dl></div></div><div class=sect3><h4 id=plist-keywords-arguments>8.6.12.3. <code>arguments</code><a class=anchor href=#plist-keywords-arguments></a></h4><div class=paragraph><p>If set to <code>true</code>, adds argument handling, splitting the whole line, <code>%@</code>, into numbered arguments, <code>%1</code>, <code>%2</code>, and so on.
For example, for this line:</p></div><div class="literalblock programlisting"><div class=content><pre>@foo some.content other.content</pre></div></div><div class=paragraph><p><code>%1</code> and <code>%2</code> will contain:</p></div><div class="literalblock programlisting"><div class=content><pre>some.content
other.content</pre></div></div><div class=paragraph><p>It also affects how the <a href=../plist/#plist-keywords-action><code>action</code></a> entry works.
When there is more than one argument, the argument number must be specified.
For example:</p></div><div class="literalblock programlisting"><div class=content><pre>actions: [file(1)]</pre></div></div></div><div class=sect3><h4 id=plist-keywords-pre-post>8.6.12.4. <code>pre-install</code>, <code>post-install</code>, <code>pre-deinstall</code>, <code>post-deinstall</code>, <code>pre-upgrade</code>, <code>post-upgrade</code><a class=anchor href=#plist-keywords-pre-post></a></h4><div class=paragraph><p>These keywords contains a <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a> script to be executed before or after installation, deinstallation, or upgrade of the package.
In addition to the usual <code>@exec %<em>foo</em></code> placeholders described in
<a href=../plist/#plist-keywords-base-exec><code>@preexec</code> <em>command</em></a>, there is a new one, <code>%@</code>, which represents the argument of the keyword.</p></div></div><div class=sect3><h4 id=plist-keywords-examples>8.6.12.5. Custom Keyword Examples<a class=anchor href=#plist-keywords-examples></a></h4><div id=plist-keywords-fc-example class=exampleblock><div class=title>Example 2. Example of a <code>@dirrmtryecho</code> Keyword</div><div class=content><div class=paragraph><p>This keyword does two things, it adds a <code>@dirrmtry <em>directory</em></code> line to the packing list, and echoes the fact that the directory is removed when deinstalling the package.</p></div><div class="literalblock programlisting"><div class=content><pre>actions: [dirrmtry]
post-deinstall: &lt;&lt;EOD
  echo &#34;Directory %D/%@ removed.&#34;
EOD</pre></div></div></div></div><div id=plist-keywords-sample-example class=exampleblock><div class=title>Example 3. Real Life Example, How <code>@sample</code> is Implemented</div><div class=content><div class=paragraph><p>This keyword does three things.
It adds the first <em>filename</em> passed as an argument to <code>@sample</code> to the packing list, it adds to the <code>post-install</code> script instructions to copy the sample to the actual configuration file if it does not already exist, and it adds to the <code>post-deinstall</code> instructions to remove the configuration file if it has not been modified.</p></div><div class="literalblock programlisting"><div class=content><pre>actions: [file(1)]
arguments: true
post-install: &lt;&lt;EOD
  case &#34;%1&#34; in
  /*) sample_file=&#34;%1&#34; ;;
  *) sample_file=&#34;%D/%1&#34; ;;
  esac
  target_file=&#34;${sample_file%.sample}&#34;
  set -- %@
  if [ $# -eq 2 ]; then
      target_file=${2}
  fi
  case &#34;${target_file}&#34; in
  /*) target_file=&#34;${target_file}&#34; ;;
  *) target_file=&#34;%D/${target_file}&#34; ;;
  esac
  if ! [ -f &#34;${target_file}&#34; ]; then
    /bin/cp -p &#34;${sample_file}&#34; &#34;${target_file}&#34; &amp;&amp; \
      /bin/chmod u+w &#34;${target_file}&#34;
  fi
EOD
pre-deinstall: &lt;&lt;EOD
  case &#34;%1&#34; in
  /*) sample_file=&#34;%1&#34; ;;
  *) sample_file=&#34;%D/%1&#34; ;;
  esac
  target_file=&#34;${sample_file%.sample}&#34;
  set -- %@
  if [ $# -eq 2 ]; then
      set -- %@
      target_file=${2}
  fi
  case &#34;${target_file}&#34; in
  /*) target_file=&#34;${target_file}&#34; ;;
  *) target_file=&#34;%D/${target_file}&#34; ;;
  esac
  if cmp -s &#34;${target_file}&#34; &#34;${sample_file}&#34;; then
    rm -f &#34;${target_file}&#34;
  else
    echo &#34;You may need to manually remove ${target_file} if it is no longer needed.&#34;
  fi
EOD</pre></div></div></div></div></div></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: September 23, 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=c6f45f0053" target=_blank>Fernando ApesteguÃ­a</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#plist-sub>8.1. Changing pkg-plist Based on Make Variables</a></li><li><a href=#plist-cleaning>8.2. Empty Directories</a></li><li><a href=#plist-config>8.3. Configuration Files</a></li><li><a href=#plist-dynamic>8.4. Dynamic Versus Static Package List</a></li><li><a href=#plist-autoplist>8.5. Automated Package List Creation</a></li><li><a href=#plist-keywords>8.6. Expanding Package List with Keywords</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/en/books/porters-handbook/porters-handbook_en.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/en/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/en/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>English</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/en class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/en/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>â™¥</span> by the FreeBSD Community</span></section></div></footer></body></html>