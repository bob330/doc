<!doctype html><html class=theme-light lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Testing a FreeBSD Port"><meta name=keywords content="testing,port,Portclippy,Portfmt,Portlint,poudriere,sets"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/en/books/porters-handbook/testing/><title>Chapter 10. Testing the Port | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapter 10. Testing the Port"><meta property="og:description" content="Testing a FreeBSD Port"><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="en"><meta property="og:url" content="http://172.16.201.134:1313/en/books/porters-handbook/testing/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/en\/books\/porters-handbook\/testing\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/en>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/en/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/en/books>Books</a></li><li><a href=http://172.16.201.134:1313/en/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/en/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=en>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>â™¥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-c934186a5adac4f64b993f751abed30c class=toggle>
<label for=chapter-c934186a5adac4f64b993f751abed30c><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-why/>Chapter 1. Introduction</a></li><li><input type=checkbox id=chapter-2798d78fe854f2709bab5ca473b97050 class=toggle>
<label for=chapter-2798d78fe854f2709bab5ca473b97050><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/new-port/>Chapter 2. Making a New Port</a></li><li><input type=checkbox id=chapter-c0d52b9121b517084e01f59cefa725e1 class=toggle>
<label class="icon cursor" for=chapter-c0d52b9121b517084e01f59cefa725e1><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/>Chapter 3. Quick Porting</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-makefile>3.1. Writing the Makefile</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-desc>3.2. Writing the Description Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-checksum>3.3. Creating the Checksum File</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-testing>3.4. Testing the Port</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-portlint>3.5. Checking the Port with <code>portlint</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/quick-porting/#porting-submitting>3.6. Submitting the New Port</a></li></ul></li><li><input type=checkbox id=chapter-3694de03923da61ba10a0a25efca6ef0 class=toggle>
<label class="icon cursor" for=chapter-3694de03923da61ba10a0a25efca6ef0><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/>Chapter 4. Slow Porting</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-work>4.1. How Things Work</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-sources>4.2. Getting the Original Sources</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-modifying>4.3. Modifying the Port</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-patch>4.4. Patching</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-configure>4.5. Configuring</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/slow-porting/#slow-user-input>4.6. Handling User Input</a></li></ul></li><li><input type=checkbox id=chapter-165f6a6dba6651f8c25fc63ab83d6538 class=toggle>
<label class="icon cursor" for=chapter-165f6a6dba6651f8c25fc63ab83d6538><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/>Chapter 5. Configuring the Makefile</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-source>5.1. The Original Source</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-naming>5.2. Naming</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-categories>5.3. Categorization</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-distfiles>5.4. The Distribution Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-maintainer>5.5. <code>MAINTAINER</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-comment>5.6. <code>COMMENT</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-www>5.7. Project website</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#licenses>5.8. Licenses</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-portscout>5.9. <code>PORTSCOUT</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-depend>5.10. Dependencies</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-masterdir>5.11. Slave Ports and <code>MASTERDIR</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-manpages>5.12. Man Pages</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-info>5.13. Info Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-options>5.14. Makefile Options</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#makefile-wrkdir>5.15. Specifying the Working Directory</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#conflicts>5.16. Conflict Handling</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#install>5.17. Installing Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/makefiles/#binary-alias>5.18. Use <code>BINARY_ALIAS</code> to Rename Commands Instead of Patching the Build</a></li></ul></li><li><input type=checkbox id=chapter-19e3150e00beb84341d8ac1a73936ef0 class=toggle>
<label class="icon cursor" for=chapter-19e3150e00beb84341d8ac1a73936ef0><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/>Chapter 6. Special Considerations</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#splitting-long-files>6.1. Splitting long files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#staging>6.2. Staging</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#bundled-libs>6.3. Bundled Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#porting-shlibs>6.4. Shared Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#porting-restrictions>6.5. Ports with Distribution Restrictions or Legal Concerns</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#building>6.6. Building Mechanisms</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-autotools>6.7. Using GNU Autotools</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-gettext>6.8. Using GNU <code>gettext</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-perl>6.9. Using Perl</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-x11>6.10. Using X11</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-gnome>6.11. Using GNOME</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#gnome-components>6.12. GNOME Components</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-qt>6.13. Using Qt</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-kde>6.14. Using KDE</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-lxqt>6.15. Using LXQt</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-java>6.16. Using Java</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-php>6.17. Web Applications, Apache and PHP</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-python>6.18. Using Python</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-tcl>6.19. Using Tcl/Tk</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-sdl>6.20. Using SDL</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-wx>6.21. Using wxWidgets</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-lua>6.22. Using Lua</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-guile>6.23. Using Guile</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-iconv>6.24. Using <code>iconv</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-xfce>6.25. Using Xfce</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-budgie>6.26. Using Budgie</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#using-databases>6.27. Using Databases</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#rc-scripts>6.28. Starting and Stopping Services (<code>rc</code> Scripts)</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#users-and-groups>6.29. Adding Users and Groups</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#requiring-kernel-sources>6.30. Ports That Rely on Kernel Sources</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#go-libs>6.31. Go Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#haskell-libs>6.32. Haskell Libraries</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/special/#shell-completion>6.33. Shell Completion Files</a></li></ul></li><li><input type=checkbox id=chapter-2a77b1fa0736427c336503055c700137 class=toggle>
<label class="icon cursor" for=chapter-2a77b1fa0736427c336503055c700137><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/>Chapter 7. Flavors</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-intro>7.1. An Introduction to Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-using>7.2. Using FLAVORS</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-php>7.3. <code>USES=php</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-python>7.4. <code>USES=python</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-lua>7.5. <code>USES=lua</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/flavors/#flavors-auto-guile>7.6. <code>USES=guile</code> and Flavors</a></li></ul></li><li><input type=checkbox id=chapter-154554011c772e1e6cc0108eef5e0b2b class=toggle>
<label class="icon cursor" for=chapter-154554011c772e1e6cc0108eef5e0b2b><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/>Chapter 8. Advanced pkg-plist Practices</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-sub>8.1. Changing pkg-plist Based on Make Variables</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-cleaning>8.2. Empty Directories</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-config>8.3. Configuration Files</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-dynamic>8.4. Dynamic Versus Static Package List</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-autoplist>8.5. Automated Package List Creation</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/plist/#plist-keywords>8.6. Expanding Package List with Keywords</a></li></ul></li><li><input type=checkbox id=chapter-5955b0791ccd51005b5bc5bebeec91e5 class=toggle>
<label class="icon cursor" for=chapter-5955b0791ccd51005b5bc5bebeec91e5><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/>Chapter 9. pkg-*</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#porting-message>9.1. pkg-message</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#pkg-install>9.2. pkg-install, pkg-pre-install, and pkg-post-install</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#pkg-deinstall>9.3. pkg-deinstall, pkg-pre-deinstall, and pkg-post-deinstall</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#pkg-names>9.4. Changing the Names of pkg-*</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files/#using-sub-files>9.5. Making Use of <code>SUB_FILES</code> and <code>SUB_LIST</code></a></li></ul></li><li><input type=checkbox id=chapter-ee86a11caedb6395ed82b94ec7a9c6cd class=toggle checked>
<label class="icon cursor" for=chapter-ee86a11caedb6395ed82b94ec7a9c6cd><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/>Chapter 10. Testing the Port</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#make-describe>10.1. Running <code>make describe</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#make-test>10.2. Running <code>make test</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-portclippy>10.3. Portclippy / Portfmt</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-portlint>10.4. Portlint</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-porttools>10.5. Port Tools</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#porting-prefix>10.6. <code>PREFIX</code> and <code>DESTDIR</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-poudriere>10.7. poudriere</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/testing/#testing-debugging-ports>10.8. Debugging ports</a></li></ul></li><li><input type=checkbox id=chapter-4ccaefe2590c044ca2b79c46e79fe17f class=toggle>
<label class="icon cursor" for=chapter-4ccaefe2590c044ca2b79c46e79fe17f><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/upgrading/>Chapter 11. Upgrading a Port</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/upgrading/#git-diff>11.1. Using Git to Make Patches</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/upgrading/#moved-and-updating-files>11.2. UPDATING and MOVED</a></li></ul></li><li><input type=checkbox id=chapter-1023911bc0041506653280b832dea3b2 class=toggle>
<label class="icon cursor" for=chapter-1023911bc0041506653280b832dea3b2><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/>Chapter 12. Security</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/#security-intro>12.1. Why Security is So Important</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/#security-fix>12.2. Fixing Security Vulnerabilities</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/security/#security-notify>12.3. Keeping the Community Informed</a></li></ul></li><li><input type=checkbox id=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7 class=toggle>
<label class="icon cursor" for=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/>Chapter 13. Dos and Don'ts</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-intro>13.1. Introduction</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#porting-wrkdir>13.2. <code>WRKDIR</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#porting-wrkdirprefix>13.3. <code>WRKDIRPREFIX</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#porting-versions>13.4. Differentiating Operating Systems and OS Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-after-port-mk>13.5. Writing Something After bsd.port.mk</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-sh-exec>13.6. Use the <code>exec</code> Statement in Wrapper Scripts</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-rational>13.7. Do Things Rationally</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-cc>13.8. Respect Both <code>CC</code> and <code>CXX</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-cflags>13.9. Respect <code>CFLAGS</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-verbose-logs>13.10. Verbose Build Logs</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-feedback>13.11. Feedback</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-readme>13.12. README.html</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-noinstall>13.13. Marking a Port Not Installable with <code>BROKEN</code>, <code>FORBIDDEN</code>, or <code>IGNORE</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-arch>13.14. Architectural Considerations</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-deprecated>13.15. Marking a Port for Removal with <code>DEPRECATED</code> or <code>EXPIRATION_DATE</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-dot-error>13.16. Avoid Use of the <code>.error</code> Construct</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-sysctl>13.17. Usage of sysctl</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-rerolling-distfiles>13.18. Rerolling Distfiles</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-use-posix-standards>13.19. Use POSIX Standards</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-dads/#dads-misc>13.20. Miscellanea</a></li></ul></li><li><input type=checkbox id=chapter-5ef4c4c471a3f55c74fb71881f9d8713 class=toggle>
<label for=chapter-5ef4c4c471a3f55c74fb71881f9d8713><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/porting-samplem/>Chapter 14. A Sample Makefile</a></li><li><input type=checkbox id=chapter-15c16456ccd7b4dc2a25fa8defa336a1 class=toggle>
<label class="icon cursor" for=chapter-15c16456ccd7b4dc2a25fa8defa336a1><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/>Chapter 15. Order of Variables in Port Makefiles</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-portname>15.1. <code>PORTNAME</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-patch>15.2. <code>PATCHFILES</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-maintainer>15.3. <code>MAINTAINER</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-license>15.4. <code>LICENSE</code> Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-broken>15.5. Generic <code>BROKEN</code>/<code>IGNORE</code>/<code>DEPRECATED</code> Messages</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-depends>15.6. The Dependencies Block</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-flavors>15.7. Flavors</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-uses>15.8. <code>USES</code> and <code>USE_x</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-variables>15.9. Standard bsd.port.mk Variables</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-options>15.10. Options and Helpers</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-rest>15.11. The Rest of the Variables</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/order/#porting-order-targets>15.12. The Targets</a></li></ul></li><li><input type=checkbox id=chapter-70f5a4755700a24529175d26e65871bf class=toggle>
<label class="icon cursor" for=chapter-70f5a4755700a24529175d26e65871bf><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/>Chapter 16. Keeping Up</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#freshports>16.1. FreshPorts</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#cgit>16.2. The Web Interface to the Source Repository</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#ports-mailing-list>16.3. The FreeBSD Ports Mailing List</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#build-cluster>16.4. The FreeBSD Port Building Cluster</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/keeping-up/#distfile-survey>16.5. Portscout: the FreeBSD Ports Distfile Scanner</a></li></ul></li><li><input type=checkbox id=chapter-8225273087f0e195be28132f4b5a0562 class=toggle>
<label class="icon cursor" for=chapter-8225273087f0e195be28132f4b5a0562><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/>Chapter 17. Using USES Macros</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-intro>17.1. An Introduction to <code>USES</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-7z>17.2. <code>7z</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ada>17.3. <code>ada</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-autoreconf>17.4. <code>autoreconf</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-blaslapack>17.5. <code>blaslapack</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-bdb>17.6. <code>bdb</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-bison>17.7. <code>bison</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-budgie>17.8. <code>budgie</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cabal>17.9. <code>cabal</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cargo>17.10. <code>cargo</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-charsetfix>17.11. <code>charsetfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cmake>17.12. <code>cmake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-compiler>17.13. <code>compiler</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cpe>17.14. <code>cpe</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-cran>17.15. <code>cran</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-desktop-file-utils>17.16. <code>desktop-file-utils</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-desthack>17.17. <code>desthack</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-display>17.18. <code>display</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-dos2unix>17.19. <code>dos2unix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-drupal>17.20. <code>drupal</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ebur128>17.21. <code>ebur128</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-eigen>17.22. <code>eigen</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-elfctl>17.23. <code>elfctl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-erlang>17.24. <code>erlang</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fakeroot>17.25. <code>fakeroot</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fam>17.26. <code>fam</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-firebird>17.27. <code>firebird</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fonts>17.28. <code>fonts</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fortran>17.29. <code>fortran</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-fuse>17.30. <code>fuse</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gem>17.31. <code>gem</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gettext>17.32. <code>gettext</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gettext-runtime>17.33. <code>gettext-runtime</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gettext-tools>17.34. <code>gettext-tools</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ghostscript>17.35. <code>ghostscript</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gl>17.36. <code>gl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gmake>17.37. <code>gmake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gnome>17.38. <code>gnome</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-go>17.39. <code>go</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gperf>17.40. <code>gperf</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-grantlee>17.41. <code>grantlee</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-groff>17.42. <code>groff</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gssapi>17.43. <code>gssapi</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-gstreamer>17.44. <code>gstreamer</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-guile>17.45. <code>guile</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-horde>17.46. <code>horde</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-iconv>17.47. <code>iconv</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-imake>17.48. <code>imake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-kde>17.49. <code>kde</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-kmod>17.50. <code>kmod</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ldap>17.51. <code>ldap</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-lha>17.52. <code>lha</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-libarchive>17.53. <code>libarchive</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-libedit>17.54. <code>libedit</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-libtool>17.55. <code>libtool</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-linux>17.56. <code>linux</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-llvm>17.57. <code>llvm</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-localbase>17.58. <code>localbase</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-lua>17.59. <code>lua</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-luajit>17.60. <code>luajit</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-lxqt>17.61. <code>lxqt</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-magick>17.62. <code>magick</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-makeinfo>17.63. <code>makeinfo</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-makeself>17.64. <code>makeself</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-mate>17.65. <code>mate</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-meson>17.66. <code>meson</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-metaport>17.67. <code>metaport</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-minizip>17.68. <code>minizip</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-mysql>17.69. <code>mysql</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-mono>17.70. <code>mono</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-motif>17.71. <code>motif</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ncurses>17.72. <code>ncurses</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-nextcloud>17.73. <code>nextcloud</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ninja>17.74. <code>ninja</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-nodejs>17.75. <code>nodejs</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-objc>17.76. <code>objc</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-octave>17.77. <code>octave</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-openal>17.78. <code>openal</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pathfix>17.79. <code>pathfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pear>17.80. <code>pear</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-perl5>17.81. <code>perl5</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pgsql>17.82. <code>pgsql</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-php>17.83. <code>php</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pkgconfig>17.84. <code>pkgconfig</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pure>17.85. <code>pure</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pyqt>17.86. <code>pyqt</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-pytest>17.87. <code>pytest</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-python>17.88. <code>python</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qmail>17.89. <code>qmail</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qmake>17.90. <code>qmake</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qt>17.91. <code>qt</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-qt-dist>17.92. <code>qt-dist</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-readline>17.93. <code>readline</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ruby>17.94. <code>ruby</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-samba>17.95. <code>samba</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-scons>17.96. <code>scons</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-shared-mime-info>17.97. <code>shared-mime-info</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-shebangfix>17.98. <code>shebangfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-sqlite>17.99. <code>sqlite</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-ssl>17.100. <code>ssl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tar>17.101. <code>tar</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tcl>17.102. <code>tcl</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-terminfo>17.103. <code>terminfo</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tex>17.104. <code>tex</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-tk>17.105. <code>tk</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-uidfix>17.106. <code>uidfix</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-uniquefiles>17.107. <code>uniquefiles</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-vala>17.108. <code>vala</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-varnish>17.109. <code>varnish</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-webplugin>17.110. <code>webplugin</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-xfce>17.111. <code>xfce</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-xorg>17.112. <code>xorg</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-xorg-cat>17.113. <code>xorg-cat</code></a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/uses/#uses-zip>17.114. <code>zip</code></a></li></ul></li><li><input type=checkbox id=chapter-7713ccc63287693c9be6c832b2c1e850 class=toggle>
<label class="icon cursor" for=chapter-7713ccc63287693c9be6c832b2c1e850><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/>Chapter 18. __FreeBSD_version Values</a><ul><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-15>18.1. FreeBSD 15 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-14>18.2. FreeBSD 14 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-13>18.3. FreeBSD 13 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-12>18.4. FreeBSD 12 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-11>18.5. FreeBSD 11 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-10>18.6. FreeBSD 10 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-9>18.7. FreeBSD 9 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-8>18.8. FreeBSD 8 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-7>18.9. FreeBSD 7 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-6>18.10. FreeBSD 6 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-5>18.11. FreeBSD 5 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-4>18.12. FreeBSD 4 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-3>18.13. FreeBSD 3 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-2.2>18.14. FreeBSD 2.2 Versions</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook/versions/#versions-2>18.15. FreeBSD 2 Before 2.2-RELEASE Versions</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapter 10. Testing the Port</h1><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#make-describe>10.1. Running <code>make describe</code></a></li><li><a href=#make-test>10.2. Running <code>make test</code></a></li><li><a href=#testing-portclippy>10.3. Portclippy / Portfmt</a></li><li><a href=#testing-portlint>10.4. Portlint</a></li><li><a href=#testing-porttools>10.5. Port Tools</a></li><li><a href=#porting-prefix>10.6. <code>PREFIX</code> and <code>DESTDIR</code></a></li><li><a href=#testing-poudriere>10.7. poudriere</a></li><li><a href=#testing-debugging-ports>10.8. Debugging ports</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=make-describe>10.1. Running <code>make describe</code><a class=anchor href=#make-describe></a></h2><div class=sectionbody><div class=paragraph><p>Several of the FreeBSD port maintenance tools, such as <a href="https://man.freebsd.org/cgi/man.cgi?query=portupgrade&amp;sektion=1&amp;format=html">portupgrade(1)</a>, rely on a database called <span class=filename>/usr/ports/INDEX</span> which keeps track of such items as port dependencies.
<span class=filename>INDEX</span> is created by the top-level <span class=filename>ports/Makefile</span> via <code>make index</code>, which descends into each port subdirectory and executes <code>make describe</code> there.
Thus, if <code>make describe</code> fails in any port, no one can generate <span class=filename>INDEX</span>, and many people will quickly become unhappy.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>It is important to be able to generate this file no matter what options are present in <span class=filename>make.conf</span>, so please avoid doing things such as using <code>.error</code> statements when (for instance) a dependency is not satisfied.
(See <a href=../porting-dads/#dads-dot-error>Avoid Use of the <code>.error</code> Construct</a>.)</p></div></td></tr></tbody></table></div><div class=paragraph><p>If <code>make describe</code> produces a string rather than an error message, everything is probably safe.
See <span class=filename>bsd.port.mk</span> for the meaning of the string produced.</p></div><div class=paragraph><p>Also note that running a recent version of <code>portlint</code> (as specified in the next section) will cause <code>make describe</code> to be run automatically.</p></div></div></div><div class=sect1><h2 id=make-test>10.2. Running <code>make test</code><a class=anchor href=#make-test></a></h2><div class=sectionbody><div class=paragraph><p>Even if the port builds fine, it is a good idea to ensure that the software
correctly does what it is supposed to do.
If the original upstream project provides tests along with the software, it is a
good idea to run them and check everything works as expected.</p></div><div class=paragraph><p>A port can enable tests automatically by using the <code>TEST_TARGET</code> variable.
When set, this variable contains the name of the testing target of the port.
This is usually just <code>test</code> but other names include <code>tests</code>, <code>check</code> or for
specific cases things like <code>run_tests.py</code>.</p></div><div class=paragraph><p>In addition to the <code>TEST_TARGET</code> variable the framework provides the following
variables to control the tests execution:</p></div><div class=ulist><ul><li><p><code>TEST_WRKSRC</code> is the directory to do the tests in.</p></li><li><p><code>TEST_ENV</code> contains additional variables to be passed to the test stage.</p></li><li><p><code>TEST_ARGS</code> contains any extra arguments passed to the test stage.</p></li></ul></div><div class=paragraph><p>Examples of use of these variables can be found in <a class=package href=https://cgit.freebsd.org/ports/tree/cad/xyce/>cad/xyce</a>,
<a class=package href=https://cgit.freebsd.org/ports/tree/www/libjwt/>www/libjwt</a> and others.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Please make sure that tests do not break when updating a port.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=testing-portclippy>10.3. Portclippy / Portfmt<a class=anchor href=#testing-portclippy></a></h2><div class=sectionbody><div class=paragraph><p>Those tools come from <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portfmt/>ports-mgmt/portfmt</a>.</p></div><div class=paragraph><p>Portclippy is a linter that checks if variables in the <span class=filename>Makefile</span> are in the correct order according to <a href=../order/#porting-order>Order of Variables in Port Makefiles</a>.</p></div><div class=paragraph><p>Portfmt is a tool for automatically formatting <span class=filename>Makefile</span>.</p></div></div></div><div class=sect1><h2 id=testing-portlint>10.4. Portlint<a class=anchor href=#testing-portlint></a></h2><div class=sectionbody><div class=paragraph><p>Do check the port with <a href=../quick-porting/#porting-portlint><code>portlint</code></a> before submitting or committing it.
<code>portlint</code> warns about many common errors, both functional and stylistic.
For a new port, <code>portlint -A</code> is the most thorough; for an existing port, <code>portlint -C</code> is sufficient.</p></div><div class=paragraph><p>Since <code>portlint</code> uses heuristics to try to figure out errors, it can produce false positive warnings.
In addition, occasionally something that is flagged as a problem really cannot be done in any other way due to limitations in the ports framework.
When in doubt, the best thing to do is ask on <a href=https://lists.FreeBSD.org/subscription/freebsd-ports>FreeBSD ports mailing list</a>.</p></div></div></div><div class=sect1><h2 id=testing-porttools>10.5. Port Tools<a class=anchor href=#testing-porttools></a></h2><div class=sectionbody><div class=paragraph><p>The <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/porttools/>ports-mgmt/porttools</a> program is part of the Ports Collection.</p></div><div class=paragraph><p><code>port</code> is the front-end script, which can help simplify the testing job.
Whenever a new port or an update to an existing one needs testing, use <code>port
test</code> to test the port, including the <a href=../testing/#testing-portlint><code>portlint</code></a> checking.
This command also detects and lists any files that are not listed in <span class=filename>pkg-plist</span>.
For example:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># port test /usr/ports/net/csup</span></code></pre></div></div></div></div><div class=sect1><h2 id=porting-prefix>10.6. <code>PREFIX</code> and <code>DESTDIR</code><a class=anchor href=#porting-prefix></a></h2><div class=sectionbody><div class=paragraph><p><code>PREFIX</code> determines where the port will be installed.
It defaults to <span class=filename>/usr/local</span>, but can be set by the user to a custom path like <span class=filename>/opt</span>.
The port must respect the value of this variable.</p></div><div class=paragraph><p><code>DESTDIR</code>, if set by the user, determines the complete alternative environment, usually a jail or an installed system mounted somewhere other than <span class=filename>/</span>.
A port will actually install into <span class=filename>DESTDIR/PREFIX</span>, and register with the package database in <span class=filename>DESTDIR/var/db/pkg</span>.
<code>DESTDIR</code> is handled automatically by the ports infrastructure with <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a>.
There is no need for modifications or any extra care to write <code>DESTDIR</code>-compliant ports.</p></div><div class=paragraph><p>The value of <code>PREFIX</code> will be set to <code>LOCALBASE</code> (defaulting to <span class=filename>/usr/local</span>).
If <code>USE_LINUX_PREFIX</code> is set, <code>PREFIX</code> will be <code>LINUXBASE</code> (defaulting to <span class=filename>/compat/linux</span>).</p></div><div class=paragraph><p>Avoiding hard-coded <span class=filename>/usr/local</span> paths in the source makes the port much more flexible and able to cater to the needs of other sites.
Often, this can be accomplished by replacing occurrences of <span class=filename>/usr/local</span> in the portâ€™s various <span class=filename>Makefile</span>s with <code>${PREFIX}</code>.
This variable is automatically passed down to every stage of the build and install processes.</p></div><div class=paragraph><p>Make sure the application is not installing things in <span class=filename>/usr/local</span> instead of <code>PREFIX</code>.
A quick test for such hard-coded paths is:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make clean<span class=p>;</span> make package <span class=nv>PREFIX</span><span class=o>=</span>/var/tmp/<span class=sb>`</span>make <span class=nt>-V</span> PORTNAME<span class=sb>`</span></code></pre></div></div><div class=paragraph><p>If anything is installed outside of <code>PREFIX</code>, the package creation process will complain that it cannot find the files.</p></div><div class=paragraph><p>In addition, it is worth checking the same with the stage directory support (see <a href=../special/#staging>Staging</a>):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make stage <span class=o>&amp;&amp;</span> make check-plist <span class=o>&amp;&amp;</span> make stage-qa <span class=o>&amp;&amp;</span> make package</code></pre></div></div><div class=ulist><ul><li><p><code>check-plist</code> checks for files missing from the plist, and files in the plist that are not installed by the port.</p></li><li><p><code>stage-qa</code> checks for common problems like bad shebang, symlinks pointing outside the stage directory, setuid files, and non-stripped librariesâ€¦â€‹</p></li></ul></div><div class=paragraph><p>These tests will not find hard-coded paths inside the portâ€™s files, nor will it verify that <code>LOCALBASE</code> is being used to correctly refer to files from other ports.
The temporarily installed port in <span class=filename>/var/tmp/<code>make -V PORTNAME</code></span> must be tested for proper operation to make sure there are no problems with paths.</p></div><div class=paragraph><p><code>PREFIX</code> must not be set explicitly in a portâ€™s <span class=filename>Makefile</span>.
Users installing the port may have set <code>PREFIX</code> to a custom location, and the port must respect that setting.</p></div><div class=paragraph><p>Refer to programs and files from other ports with the variables mentioned above, not explicit pathnames.
For instance, if the port requires a macro <code>PAGER</code> to have the full pathname of <code>less</code>, do not use a literal path of <span class=filename>/usr/local/bin/less</span>.
Instead, use <code>${LOCALBASE}</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>-DPAGER=\&#34;${LOCALBASE}/bin/less\&#34;</pre></div></div><div class=paragraph><p>The path with <code>LOCALBASE</code> is more likely to still work if the system administrator has moved the whole <span class=filename>/usr/local</span> tree somewhere else.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>All these tests are done automatically when running <code>poudriere testport</code> or <code>poudriere bulk -t</code>.
It is highly recommended that every ports contributor install and test their ports with it.
See <a href=../testing/#testing-poudriere>poudriere</a> for more information.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=testing-poudriere>10.7. poudriere<a class=anchor href=#testing-poudriere></a></h2><div class=sectionbody><div class=paragraph><p>For a ports contributor, poudriere is one of the most important and helpful testing and build tools.
Its main features include:</p></div><div class=ulist><ul><li><p>Bulk building of the entire ports tree, specific subsets of the ports tree, or a single port including its dependencies</p></li><li><p>Automatic packaging of build results</p></li><li><p>Generation of build log files per port</p></li><li><p>Providing a signed <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> repository</p></li><li><p>Testing of port builds before submitting a patch to the FreeBSD bug tracker or committing to the ports tree</p></li><li><p>Testing for successful ports builds using different options</p></li></ul></div><div class=paragraph><p>Because poudriere performs its building in a clean <a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=8&amp;format=html">jail(8)</a> environment and uses <a href="https://man.freebsd.org/cgi/man.cgi?query=zfs&amp;sektion=8&amp;format=html">zfs(8)</a> features,
it has several advantages over traditional testing on the host system:</p></div><div class=ulist><ul><li><p>No pollution of the host environment: No leftover files, no accidental removals, no changes of existing configuration files.</p></li><li><p>Verify <span class=filename>pkg-plist</span> for missing or superfluous entries</p></li><li><p>Ports committers sometimes ask for a poudriere log alongside a patch submission to assess whether the patch is ready for integration into the ports tree</p></li></ul></div><div class=paragraph><p>It is also quite straightforward to set up and use, has no dependencies, and will run on any supported FreeBSD release.
This section shows how to install, configure, and run poudriere as part of the normal workflow of a ports contributor.</p></div><div class=paragraph><p>The examples in this section show a default file layout, as standard in FreeBSD.
Substitute any local changes accordingly.
The ports tree, represented by <code>${PORTSDIR}</code>, is located in <span class=filename>/usr/ports</span>.
Both <code>${LOCALBASE}</code> and <code>${PREFIX}</code> are <span class=filename>/usr/local</span> by default.</p></div><div class=sect2><h3 id=testing-poudriere-installing>10.7.1. Installing poudriere<a class=anchor href=#testing-poudriere-installing></a></h3><div class=paragraph><p>poudriere is available in the ports tree in <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/>ports-mgmt/poudriere</a>.
It can be installed using <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> or from ports:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg install poudriere</span></code></pre></div></div><div class=paragraph><p>or</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -C /usr/ports/ports-mgmt/poudriere install clean</span></code></pre></div></div><div class=paragraph><p>There is also a work-in-progress version of poudriere which will eventually become the next release.
It is available in <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere-devel/>ports-mgmt/poudriere-devel</a>.
This development version is used for the official FreeBSD package builds, so it is well tested.
It often has newer interesting features.
A ports committer will want to use the development version because it is what is used in production, and has all the new features that will make sure everything is exactly right.
A contributor will not necessarily need those as the most important fixes are backported to released version.
The main reason for the use of the development version to build the official package is because it is faster,
in a way that will shorten a full build from 18 hours to 17 hours when using a high end 32 CPU server with 128GB of RAM.
Those optimizations will not matter a lot when building ports on a desktop machine.</p></div></div><div class=sect2><h3 id=testing-poudriere-setup>10.7.2. Setting Up poudriere<a class=anchor href=#testing-poudriere-setup></a></h3><div class=paragraph><p>The port installs a default configuration file, <span class=filename>/usr/local/etc/poudriere.conf</span>.
Each parameter is documented in the configuration file.</p></div><div class=paragraph><p>Here is a minimal example config file:</p></div><div class="literalblock programlisting"><div class=content><pre>ZPOOL=zroot
BASEFS=/usr/local/poudriere
DISTFILES_CACHE=/usr/ports/distfiles
RESOLV_CONF=/etc/resolv.conf</pre></div></div><div class=dlist><dl><dt class=hdlist1><code>ZPOOL</code></dt><dd><p>The name of the ZFS storage pool which poudriere shall use.
Must be listed in the output of <code>zpool status</code>.</p></dd><dt class=hdlist1><code>BASEFS</code></dt><dd><p>The root mount point for poudriere file systems.
This entry will cause poudriere to mount <code>tank/poudriere</code> to <code>/poudriere</code>.</p></dd><dt class=hdlist1><code>DISTFILES_CACHE</code></dt><dd><p>Defines where distfiles are stored.
In this example, poudriere and the host share the distfiles storage directory.
This avoids downloading tarballs which are already present on the system.
Please create this directory if it does not already exist so that poudriere can find it.</p></dd><dt class=hdlist1><code>RESOLV_CONF</code></dt><dd><p>Use the host <span class=filename>/etc/resolv.conf</span> inside jails for DNS.
This is needed so jails can resolve the URLs of distfiles when downloading.
It is not needed when using a proxy.
Refer to the default configuration file for proxy configuration.</p></dd></dl></div></div><div class=sect2><h3 id=testing-poudriere-create-jails>10.7.3. Creating poudriere Jails<a class=anchor href=#testing-poudriere-create-jails></a></h3><div class=paragraph><p>Create the base jails which poudriere will use for building:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere jail -c -j 131Ramd64 -v 13.1-RELEASE -a amd64</span></code></pre></div></div><div class=paragraph><p>Fetch a <code>13.1-RELEASE</code> for <code>amd64</code> from the FTP server given by <code>FREEBSD_HOST</code> in <span class=filename>poudriere.conf</span>,
create the zfs file system <code>tank/poudriere/jails/131Ramd64</code>,
mount it on <span class=filename>/poudriere/jails/131Ramd64</span> and extract the <code>13.1-RELEASE</code> tarballs into this file system.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere jail -c -j 12i386 -v stable/12 -a i386 -m git+https</span></code></pre></div></div><div class=paragraph><p>Create <code>tank/poudriere/jails/12i386</code>, mount it on <span class=filename>/poudriere/jails/12i386</span>,
then check out the tip of the Git branch of <code>FreeBSD-12-STABLE</code> from <code>GIT_HOST</code> in <span class=filename>poudriere.conf</span> or the default <code>git.freebsd.org</code> into <span class=filename>/poudriere/jails/12i386/usr/src</span>,
then complete a <code>buildworld</code> and install it into <span class=filename>/poudriere/jails/12i386</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>While it is possible to build a newer version of FreeBSD on an older version, most of the time it will not run.
For example, if a <code>stable/13</code> jail is needed, the host will have to run <code>stable/13</code> too.
Running <code>13.1-RELEASE</code> is not enough.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>To create a poudriere jail for <code>14.0-CURRENT</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere jail -c -j 14amd64 -v main -a amd64 -m git+https</span></code></pre></div></div><div class=paragraph><p>In order to run a <code>14.0-CURRENT</code> poudriere jail the host must be running <code>14.0-CURRENT</code>.
In general, newer kernels can build and run older jails.
For instance, a <code>14.0-CURRENT</code> kernel can build and run a <code>12.4-STABLE</code> if the <code>COMPAT_FREEBSD12</code> kernel option was compiled in (on by default in <code>14.0-CURRENT</code><span class=filename>GENERIC</span> kernel config).</p></div></td></tr></tbody></table></div><div class=paragraph><p>A list of jails currently known to poudriere can be shown with <code>poudriere jail -l</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere jail -l</span>
JAILNAME             VERSION              ARCH    METHOD
131Ramd64            13.1-RELEASE         amd64   ftp
12i386               12.4-STABLE          i386    git+https</code></pre></div></div></div><div class=sect2><h3 id=testing-poudriere-maintaining-jails>10.7.4. Keeping poudriere Jails Updated<a class=anchor href=#testing-poudriere-maintaining-jails></a></h3><div class=paragraph><p>Managing updates is very straightforward.
The command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere jail -u -j JAILNAME</span></code></pre></div></div><div class=paragraph><p>updates the specified jail to the latest version available.
For FreeBSD releases, update to the latest patchlevel with <a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a>.
For FreeBSD versions built from source, update to the latest git revision in the branch.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>For jails employing a <code>git+*</code> method, it is helpful to add <code>-J <em>NumberOfParallelBuildJobs</em></code> to speed up the build by increasing the number of parallel compile jobs used.
For example, if the building machine has 6 CPUs, use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere jail -u -J 6 -j JAILNAME</span></code></pre></div></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=testing-poudriere-ports-tree>10.7.5. Setting Up Ports Trees for Use with poudriere<a class=anchor href=#testing-poudriere-ports-tree></a></h3><div class=paragraph><p>There are multiple ways to use ports trees in poudriere.
The most straightforward way is to have poudriere create a default ports tree for itself, using <a href=https://docs.freebsd.org/en/books/handbook/mirrors/#git>Git</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere ports -c -m git+https -B main</span></code></pre></div></div><div class=paragraph><p>These commands create <code>tank/poudriere/ports/default</code>, mount it on <span class=filename>/poudriere/ports/default</span>, and populate it using Git.
Afterward it is included in the list of known ports trees:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere ports -l</span>
PORTSTREE METHOD    TIMESTAMP           PATH
default   git+https 2020-07-20 04:23:56 /poudriere/ports/default</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Note that the "default" ports tree is special.
Each of the build commands explained later will implicitly use this ports tree unless specifically specified otherwise.
To use another tree, add <code>-p <em>treename</em></code> to the commands.</p></div></td></tr></tbody></table></div><div class=paragraph><p>The best way to deal with local modifications for a ports contributor is to use <a href=https://docs.freebsd.org/en/books/handbook/mirrors/#git>Git</a>.
As with the creation of jails, it is possible to use a different method for creating the ports tree.
To add an additional ports tree for testing local modifications and ports development, checking out the tree via git (as described above) is preferable.</p></div></div><div class=sect2><h3 id=testing-poudriere-ports-tree-manual>10.7.6. Using Manually Managed Ports Trees with poudriere<a class=anchor href=#testing-poudriere-ports-tree-manual></a></h3><div class=paragraph><p>Depending on the workflow, it can be extremely helpful to use ports trees which are maintained manually.
For instance, if there is a local copy of the ports tree in <span class=filename>/work/ports</span>, point poudriere to the location:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere ports -c -m null -M /work/ports -p development</span></code></pre></div></div><div class=paragraph><p>This will be listed in the table of known trees:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere ports -l</span>
PORTSTREE   METHOD    TIMESTAMP           PATH
development null      2020-07-20 05:06:33 /work/ports</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The dash or <code>null</code> in the <code>METHOD</code> column means that poudriere will not update or change this ports tree, ever.
It is completely up to the user to maintain this tree, including all local modifications that may be used for testing new ports and submitting patches.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=testing-poudriere-ports-tree-updating>10.7.7. Keeping poudriere Ports Trees Updated<a class=anchor href=#testing-poudriere-ports-tree-updating></a></h3><div class=paragraph><p>As straightforward as with jails described earlier:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere ports -u -p PORTSTREE</span></code></pre></div></div><div class=paragraph><p>Will update the given <em>PORTSTREE</em>, one tree given by the output of <code>poudriere -l</code>, to the latest revision available on the official servers.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ports trees without a method, see
<a href=../testing/#testing-poudriere-ports-tree-manual>Using Manually Managed Ports Trees with poudriere</a>, cannot be updated like this and must be updated manually by the porter.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=testing-poudriere-testing-ports>10.7.8. Testing Ports<a class=anchor href=#testing-poudriere-testing-ports></a></h3><div class=paragraph><p>After jails and ports trees have been set up, the result of a contributorâ€™s modifications to the ports tree can be tested.</p></div><div class=paragraph><p>For example, local modifications to the <a class=package href=https://cgit.freebsd.org/ports/tree/www/firefox/>www/firefox</a> port located in <span class=filename>/work/ports/www/firefox</span> can be tested in the previously created 13.1-RELEASE jail:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere testport -j 131Ramd64 -p development -o www/firefox</span></code></pre></div></div><div class=paragraph><p>This will build all dependencies of Firefox.
If a dependency has been built previously and is still up-to-date, the pre-built package is installed.
If a dependency has no up-to-date package, one will be built with default options in a jail.
Then Firefox itself is built.</p></div><div class=paragraph><p>The complete build of every port is logged to <span class=filename>/poudriere/data/logs/bulk/131Ri386-development/build-time/logs</span>.</p></div><div class=paragraph><p>The directory name <code>131Ri386-development</code> is derived from the arguments to <code>-j</code> and <code>-p</code>, respectively.
For convenience, a symbolic link <span class=filename>/poudriere/data/logs/bulk/131Ri386-development/latest</span> is also maintained.
The link points to the latest <em>build-time</em> directory.
Also in this directory is an <span class=filename>index.html</span> for observing the build process with a web browser.</p></div><div class=paragraph><p>By default, poudriere cleans up the jails and leaves log files in the directories mentioned above.
To ease investigation, jails can be kept running after the build by adding <code>-i</code> to <code>testport</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere testport -j 131Ramd64 -p development -i -o www/firefox</span></code></pre></div></div><div class=paragraph><p>After the build completes, and regardless of whether it was successful, a shell is provided within the jail.
The shell is used to investigate further.
poudriere can be told to leave the jail running after the build finishes with <code>-I</code>.
poudriere will show the command to run when the jail is no longer needed.
It is then possible to <a href="https://man.freebsd.org/cgi/man.cgi?query=jexec&amp;sektion=8&amp;format=html">jexec(8)</a> into it:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere testport -j 131Ramd64 -p development -I -o www/firefox</span>
<span class=o>[</span>...]
<span class=o>====&gt;&gt;</span> Installing <span class=nb>local </span>Pkg repository to /usr/local/etc/pkg/repos
<span class=o>====&gt;&gt;</span> Leaving jail 131Ramd64-development-n running, mounted at /poudriere/data/.m/131Ramd64-development/ref <span class=k>for </span>interactive run testing
<span class=o>====&gt;&gt;</span> To enter jail: jexec 131Ramd64-development-n <span class=nb>env</span> <span class=nt>-i</span> <span class=nv>TERM</span><span class=o>=</span><span class=nv>$TERM</span> /usr/bin/login <span class=nt>-fp</span> root
<span class=o>====&gt;&gt;</span> To stop jail: poudriere jail <span class=nt>-k</span> <span class=nt>-j</span> 131Ramd64 <span class=nt>-p</span> development
<span class=c># jexec 131Ramd64-development-n env -i TERM=$TERM /usr/bin/login -fp root</span>
<span class=c># [do some stuff in the jail]</span>
<span class=c># exit</span>
<span class=c># poudriere jail -k -j 131Ramd64 -p development</span>
<span class=o>====&gt;&gt;</span> Umounting file systems</code></pre></div></div><div class=paragraph><p>An integral part of the FreeBSD ports build infrastructure is the ability to tweak ports to personal preferences with options.
These can be tested with poudriere as well.
Adding the <code>-c</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere testport -c -o www/firefox</span></code></pre></div></div><div class=paragraph><p>Presents the port configuration dialog before the port is built.
The ports given after <code>-o</code> in the format <code><em>category</em>/<em>portname</em></code> will use the specified options, all dependencies will use the default options.
Testing dependent ports with non-default options can be accomplished using sets,
see <a href=../testing/#testing-poudriere-sets>Using Sets</a>.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>When testing ports where <span class=filename>pkg-plist</span> is altered during build depending on the selected options,
it is recommended to perform a test run with all options selected <em>and</em> one with all options deselected.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=testing-poudriere-sets>10.7.9. Using Sets<a class=anchor href=#testing-poudriere-sets></a></h3><div class=paragraph><p>For all actions involving builds, a so-called <em>set</em> can be specified using <code>-z <em>setname</em></code>.
A set refers to a fully independent build.
This allows, for instance, usage of <code>testport</code> with non-standard options for the dependent ports.</p></div><div class=paragraph><p>To use sets, poudriere expects an existing directory structure similar to <code>PORT_DBDIR</code>, defaults to <span class=filename>/var/db/ports</span> in its configuration directory.
This directory is then <a href="https://man.freebsd.org/cgi/man.cgi?query=nullfs&amp;sektion=5&amp;format=html">nullfs(5)</a>-mounted into the jails where the ports and their dependencies are built.
Usually a suitable starting point can be obtained by recursively copying the existing <code>PORT_DBDIR</code> to <span class=filename>/usr/local/etc/poudriere.d/jailname-portname-setname-options</span>.
This is described in detail in <a href="https://man.freebsd.org/cgi/man.cgi?query=poudriere&amp;sektion=8&amp;format=html">poudriere(8)</a>.
For instance, testing <a class=package href=https://cgit.freebsd.org/ports/tree/www/firefox/>www/firefox</a> in a specific set named <code>devset</code>, add the <code>-z devset</code> parameter to the <code>testport</code> command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere testport -j 131Ramd64 -p development -z devset -o www/firefox</span></code></pre></div></div><div class=paragraph><p>This will look for the existence of these directories in this order:</p></div><div class=ulist><ul><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-development-devset-options</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-devset-options</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-development-options</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/devset-options</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/development-options</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-options</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/options</span></p></li></ul></div><div class=paragraph><p>From this list, poudriere <a href="https://man.freebsd.org/cgi/man.cgi?query=nullfs&amp;sektion=5&amp;format=html">nullfs(5)</a>-mounts the <em>first existing</em> directory tree into the <span class=filename>/var/db/ports</span> directory of the build jails.
Hence, all custom options are used for all the ports during this run of <code>testport</code>.</p></div><div class=paragraph><p>After the directory structure for a set is provided, the options for a particular port can be altered.
For example:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere options -c www/firefox -z devset</span></code></pre></div></div><div class=paragraph><p>The configuration dialog for <a class=package href=https://cgit.freebsd.org/ports/tree/www/firefox/>www/firefox</a> is shown, and options can be edited.
The selected options are saved to the <code>devset</code> set.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>poudriere is very flexible in the option configuration.
poudriere can be set for particular jails, ports trees, and for multiple ports by one command.
Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=poudriere&amp;sektion=8&amp;format=html">poudriere(8)</a> for details.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=testing-poudriere-make-conf>10.7.10. Providing a Custom <span class=filename>make.conf</span> File<a class=anchor href=#testing-poudriere-make-conf></a></h3><div class=paragraph><p>Similar to using sets, poudriere will also use a custom <span class=filename>make.conf</span> if it is provided.
No special command line argument is necessary.
Instead, poudriere looks for existing files matching a name scheme derived from the command line.
For instance:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere testport -j 131Ramd64 -p development -z devset -o www/firefox</span></code></pre></div></div><div class=paragraph><p>causes poudriere to check for the existence of these files in this order:</p></div><div class=ulist><ul><li><p><span class=filename>/usr/local/etc/poudriere.d/make.conf</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/devset-make.conf</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/development-make.conf</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-make.conf</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-development-make.conf</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-devset-make.conf</span></p></li><li><p><span class=filename>/usr/local/etc/poudriere.d/131Ramd64-development-devset-make.conf</span></p></li></ul></div><div class=paragraph><p>Unlike with sets, all of the found files will be appended, <em>in that order</em>, into one <span class=filename>make.conf</span> inside the build jails.
It is hence possible to have general make variables, intended to affect all builds in <span class=filename>/usr/local/etc/poudriere.d/make.conf</span>.
Special variables, intended to affect only certain jails or sets can be set in specialised <span class=filename>make.conf</span> files, such as <span class=filename>/usr/local/etc/poudriere.d/131Ramd64-development-devset-make.conf</span>.</p></div><div id=testing-poudriere-sets-perl class=exampleblock><div class=title>Example 1. Using <span class=filename>make.conf</span> to Change Default Perl</div><div class=content><div class=paragraph><p>To build a set with a non default Perl version, for example, <code>5.20</code>, using a set named <code>perl5-20</code>, create a <span class=filename>perl5-20-make.conf</span> with this line:</p></div><div class="literalblock programlisting"><div class=content><pre>DEFAULT_VERSIONS+= perl=5.20</pre></div></div><div class=sidebarblock><div class=content><div class=paragraph><p>Note the use of <code>+=</code> so that if the variable is already set in the default <span class=filename>make.conf</span> its content will not be overwritten.</p></div></div></div></div></div></div><div class=sect2><h3 id=testing-poudriere-pruning-distfiles>10.7.11. Pruning no Longer Needed Distfiles<a class=anchor href=#testing-poudriere-pruning-distfiles></a></h3><div class=paragraph><p>poudriere comes with a built-in mechanism to remove outdated distfiles that are no longer used by any port of a given tree.
The command</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere distclean -p portstree</span></code></pre></div></div><div class=paragraph><p>will scan the distfiles folder, <code>DISTFILES_CACHE</code> in <span class=filename>poudriere.conf</span>,
versus the ports tree given by the <code>-p <em>portstree</em></code> argument and prompt for removal of those distfiles.
To skip the prompt and remove all unused files unconditionally, the <code>-y</code> argument can be added:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># poudriere distclean -p portstree -y</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=testing-debugging-ports>10.8. Debugging ports<a class=anchor href=#testing-debugging-ports></a></h2><div class=sectionbody><div class=paragraph><p>Sometimes things go wrong and the port fails at run time.
The framework provides some facilities to help in debugging ports.
These helpers are limited since the way of debugging a port heavily depends on
the technology used.
The following variables help with debugging ports:</p></div><div class=ulist><ul><li><p><code>WITH_DEBUG</code>. If set, ports are built with debugging symbols.</p></li><li><p><code>WITH_DEBUG_PORTS</code>. Specifies a list of ports to be built with <code>WITH_DEBUG</code> set.</p></li><li><p><code>DEBUG_FLAGS</code>. Used to specify additional flags to <code>CFLAGS</code>. Defaults to <code>-g</code>.</p></li></ul></div><div class=paragraph><p>When <code>WITH_DEBUG</code> is set, either globally or for a list of ports, the resulting
binaries are not stripped.</p></div><div class=paragraph><p>These variables can be specified in <span class=filename>make.conf</span> or in the command
line:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd category/port &amp;&amp; make -DWITH_DEBUG DEBUG_FLAGSS=&#34;-g -O0&#34;</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If the port is built using <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/>ports-mgmt/poudriere</a> the debugging
variables must be specified in poudriereâ€™s <span class=filename>make.conf</span> and not in
<span class=filename>/etc/make.conf</span>.
Refer to <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/>ports-mgmt/poudriere</a> documentation for details.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Please refer to the debugging information in the
<a href=https://docs.freebsd.org/en/books/developers-handbook/tools#debugging>Developerâ€™s Handbook</a>
for more details about the debugging tools available.</p></div></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: September 20, 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=2d2f5d38cc" target=_blank>Fernando ApesteguÃ­a</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/en/books/porters-handbook/pkg-files class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/en/books/porters-handbook/upgrading class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#make-describe>10.1. Running <code>make describe</code></a></li><li><a href=#make-test>10.2. Running <code>make test</code></a></li><li><a href=#testing-portclippy>10.3. Portclippy / Portfmt</a></li><li><a href=#testing-portlint>10.4. Portlint</a></li><li><a href=#testing-porttools>10.5. Port Tools</a></li><li><a href=#porting-prefix>10.6. <code>PREFIX</code> and <code>DESTDIR</code></a></li><li><a href=#testing-poudriere>10.7. poudriere</a></li><li><a href=#testing-debugging-ports>10.8. Debugging ports</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/en/books/porters-handbook/porters-handbook_en.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/en/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/en/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>English</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/en class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/en/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>â™¥</span> by the FreeBSD Community</span></section></div></footer></body></html>