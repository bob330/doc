<!doctype html><html class=theme-light lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Programming Tools"><meta name=keywords content="tools,Interpreters,Compilers,cc,make,Debugging,lldb,gdb,clang,Emacs"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/en/books/developers-handbook/tools/><title>Chapter 2. Programming Tools | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapter 2. Programming Tools"><meta property="og:description" content="Programming Tools"><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="en"><meta property="og:url" content="http://172.16.201.134:1313/en/books/developers-handbook/tools/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/en\/books\/developers-handbook\/tools\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/en>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/en/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/en/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/en/books>Books</a></li><li><a href=http://172.16.201.134:1313/en/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/en/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=en>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-b1b18a35567534d1699b4dd27b58b2ff class=toggle>
<label for=chapter-b1b18a35567534d1699b4dd27b58b2ff><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/parti/>Part I. Basics</a></li><li><input type=checkbox id=chapter-3af9d0cd3607fbe44d37e3a13957c40f class=toggle>
<label class="icon cursor" for=chapter-3af9d0cd3607fbe44d37e3a13957c40f><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/introduction/>Chapter 1. Introduction</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/introduction/#introduction-devel>1.1. Developing on FreeBSD</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/introduction/#introduction-bsdvision>1.2. The BSD Vision</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/introduction/#introduction-archguide>1.3. Architectural Guidelines</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/introduction/#introduction-layout>1.4. The Layout of /usr/src</a></li></ul></li><li><input type=checkbox id=chapter-15219234c513f9a79d9cb2d3bcf73d13 class=toggle checked>
<label class="icon cursor" for=chapter-15219234c513f9a79d9cb2d3bcf73d13><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/>Chapter 2. Programming Tools</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#tools-synopsis>2.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#tools-intro>2.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#tools-programming>2.3. Introduction to Programming</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#tools-compiling>2.4. Compiling with <code>cc</code></a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#tools-make>2.5. Make</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#debugging>2.6. Debugging</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#emacs>2.7. Using Emacs as a Development Environment</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/tools/#tools-reading>2.8. Further Reading</a></li></ul></li><li><input type=checkbox id=chapter-7319f5d899d5be33daaf1f2d5f180558 class=toggle>
<label class="icon cursor" for=chapter-7319f5d899d5be33daaf1f2d5f180558><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/>Chapter 3. Secure Programming</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/#secure-synopsis>3.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/#secure-philosophy>3.2. Secure Design Methodology</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/#secure-bufferov>3.3. Buffer Overflows</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/#secure-setuid>3.4. SetUID issues</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/#secure-chroot>3.5. Limiting your program’s environment</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/#secure-trust>3.6. Trust</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure/#secure-race-conditions>3.7. Race Conditions</a></li></ul></li><li><input type=checkbox id=chapter-0240ccaf7010beed911378cfab7bd8fc class=toggle>
<label class="icon cursor" for=chapter-0240ccaf7010beed911378cfab7bd8fc><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/l10n/>Chapter 4. Localization and Internationalization - L10N and I18N</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/l10n/#l10n-programming>4.1. Programming I18N Compliant Applications</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/l10n/#posix-nls>4.2. Localized Messages with POSIX.1 Native Language Support (NLS)</a></li></ul></li><li><input type=checkbox id=chapter-c3107aaf64e60e1ee09bc33fc9fd641a class=toggle>
<label class="icon cursor" for=chapter-c3107aaf64e60e1ee09bc33fc9fd641a><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/policies/>Chapter 5. Source Tree Guidelines and Policies</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/policies/#policies-style>5.1. Style Guidelines</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/policies/#policies-maintainer>5.2. <code>MAINTAINER</code> on Makefiles</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/policies/#policies-contributed>5.3. Contributed Software</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/policies/#policies-encumbered>5.4. Encumbered Files</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/policies/#policies-shlib>5.5. Shared Libraries</a></li></ul></li><li><input type=checkbox id=chapter-c7b4fd5a7f8f049234fe3bc225acef44 class=toggle>
<label class="icon cursor" for=chapter-c7b4fd5a7f8f049234fe3bc225acef44><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/testing/>Chapter 6. Regression and Performance Testing</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/testing/#testing-micro-benchmark>6.1. Micro Benchmark Checklist</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/testing/#testing-tinderbox>6.2. The FreeBSD Source Tinderbox</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/testing/#_the_index_cgi_script>6.3. The index.cgi Script</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/testing/#_official_build_servers>6.4. Official Build Servers</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/testing/#_official_summary_site>6.5. Official Summary Site</a></li></ul></li><li><input type=checkbox id=chapter-1f9b02a65f2bc5d4015a050d706fa837 class=toggle>
<label for=chapter-1f9b02a65f2bc5d4015a050d706fa837><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/partii/>Part II. Interprocess Communication</a></li><li><input type=checkbox id=chapter-5e03777f678dd5731a581d7956d19c13 class=toggle>
<label class="icon cursor" for=chapter-5e03777f678dd5731a581d7956d19c13><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/>Chapter 7. Sockets</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/#sockets-synopsis>7.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/#sockets-diversity>7.2. Networking and Diversity</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/#sockets-protocols>7.3. Protocols</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/#sockets-model>7.4. The Sockets Model</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/#sockets-essential-functions>7.5. Essential Socket Functions</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/#sockets-helper-functions>7.6. Helper Functions</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/sockets/#sockets-concurrent-servers>7.7. Concurrent Servers</a></li></ul></li><li><input type=checkbox id=chapter-5cbeeaa29a95a5f152e5ccc3901d0fd3 class=toggle>
<label class="icon cursor" for=chapter-5cbeeaa29a95a5f152e5ccc3901d0fd3><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/ipv6/>Chapter 8. IPv6 Internals</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/ipv6/#ipv6-implementation>8.1. IPv6/IPsec Implementation</a></li></ul></li><li><input type=checkbox id=chapter-c9a07b517dc2e43d169c8e013e23cfc1 class=toggle>
<label for=chapter-c9a07b517dc2e43d169c8e013e23cfc1><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/partiii/>Part III. Kernel</a></li><li><input type=checkbox id=chapter-db22f8e5e5e9496dbc711815e2e05f36 class=toggle>
<label class="icon cursor" for=chapter-db22f8e5e5e9496dbc711815e2e05f36><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/kernelbuild/>Chapter 9. Building and Installing a FreeBSD Kernel</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kernelbuild/#kernelbuild-traditional>9.1. Building the Faster but Brittle Way</a></li></ul></li><li><input type=checkbox id=chapter-3036877c53948cfb76174f2776bbdf64 class=toggle>
<label class="icon cursor" for=chapter-3036877c53948cfb76174f2776bbdf64><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/>Chapter 10. Kernel Debugging</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-obtain>10.1. Obtaining a Kernel Crash Dump</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-gdb>10.2. Debugging a Kernel Crash Dump with <code>kgdb</code></a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-online-ddb>10.3. On-Line Kernel Debugging Using DDB</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-online-gdb>10.4. On-Line Kernel Debugging Using Remote GDB</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-console>10.5. Debugging a Console Driver</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-deadlocks>10.6. Debugging Deadlocks</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-dcons>10.7. Kernel debugging with Dcons</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/kerneldebug/#kerneldebug-options>10.8. Glossary of Kernel Options for Debugging</a></li></ul></li><li><input type=checkbox id=chapter-86707094ce48d6e89e5f45569c084cea class=toggle>
<label for=chapter-86707094ce48d6e89e5f45569c084cea><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/partiv/>Part IV. Architectures</a></li><li><input type=checkbox id=chapter-43b1e1e6d2a94eb8b161876bc22ce644 class=toggle>
<label class="icon cursor" for=chapter-43b1e1e6d2a94eb8b161876bc22ce644><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/>Chapter 11. x86 Assembly Language Programming</a><ul><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-intro>A.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-the-tools>A.2. The Tools</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-system-calls>A.3. System Calls</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-return-values>A.4. Return Values</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-portable-code>A.5. Creating Portable Code</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-first-program>A.6. Our First Program</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-unix-filters>A.7. Writing UNIX® Filters</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-buffered-io>A.8. Buffered Input and Output</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-command-line>A.9. Command Line Arguments</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-environment>A.10. UNIX® Environment</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-files>A.11. Working with Files</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-one-pointed-mind>A.12. One-Pointed Mind</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-fpu>A.13. Using the FPU</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-caveats>A.14. Caveats</a></li><li><a href=http://172.16.201.134:1313/en/books/developers-handbook/x86/#x86-acknowledgements>A.15. Acknowledgements</a></li></ul></li><li><input type=checkbox id=chapter-c49dfe630861d471fb2f58f5b554ed84 class=toggle>
<label for=chapter-c49dfe630861d471fb2f58f5b554ed84><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/partv/>Part V. Appendices</a></li><li><input type=checkbox id=chapter-ac9541a3f38001d13964c1b0b324bb83 class=toggle>
<label for=chapter-ac9541a3f38001d13964c1b0b324bb83><a role=button></a></label><a href=http://172.16.201.134:1313/en/books/developers-handbook/bibliography/>Bibliography</a></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapter 2. Programming Tools</h1><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#tools-synopsis>2.1. Synopsis</a></li><li><a href=#tools-intro>2.2. Introduction</a></li><li><a href=#tools-programming>2.3. Introduction to Programming</a></li><li><a href=#tools-compiling>2.4. Compiling with <code>cc</code></a></li><li><a href=#tools-make>2.5. Make</a></li><li><a href=#debugging>2.6. Debugging</a></li><li><a href=#emacs>2.7. Using Emacs as a Development Environment</a></li><li><a href=#tools-reading>2.8. Further Reading</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=tools-synopsis>2.1. Synopsis<a class=anchor href=#tools-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>This chapter is an introduction to using some of the programming tools supplied with FreeBSD,
although much of it will be applicable to many other versions of UNIX®.
It does <em>not</em> attempt to describe coding in any detail.
Most of the chapter assumes little or no previous programming knowledge,
although it is hoped that most programmers will find something of value in it.</p></div></div></div><div class=sect1><h2 id=tools-intro>2.2. Introduction<a class=anchor href=#tools-intro></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD offers an excellent development environment.
Compilers for C and C++ and an assembler come with the basic system, not to mention classic UNIX® tools such as <code>sed</code> and <code>awk</code>.
If that is not enough, there are many more compilers and interpreters in the Ports collection.
The following section, <a href=../tools/#tools-programming>Introduction to Programming</a>, lists some of the available options.
FreeBSD is very compatible with standards such as POSIX® and ANSI C, as well with its own BSD heritage, so it is possible to write applications that will compile and run with little or no modification on a wide range of platforms.</p></div><div class=paragraph><p>However, all this power can be rather overwhelming at first if you have never written programs on a UNIX® platform before.
This document aims to help you get up and running, without getting too deeply into more advanced topics.
The intention is that this document should give you enough of the basics to be able to make some sense of the documentation.</p></div><div class=paragraph><p>Most of the document requires little or no knowledge of programming, although it does assume a basic competence with using UNIX® and a willingness to learn!</p></div></div></div><div class=sect1><h2 id=tools-programming>2.3. Introduction to Programming<a class=anchor href=#tools-programming></a></h2><div class=sectionbody><div class=paragraph><p>A program is a set of instructions that tell the computer to do various things; sometimes the instruction it has to perform depends on what happened when it performed a previous instruction.
This section gives an overview of the two main ways in which you can give these instructions, or "commands" as they are usually called.
One way uses an <em>interpreter</em>, the other a <em>compiler</em>.
As human languages are too difficult for a computer to understand in an unambiguous way, commands are usually written in one or other languages specially designed for the purpose.</p></div><div class=sect2><h3 id=_interpreters>2.3.1. Interpreters<a class=anchor href=#_interpreters></a></h3><div class=paragraph><p>With an interpreter, the language comes as an environment, where you type in commands at a prompt and the environment executes them for you.
For more complicated programs, you can type the commands into a file and get the interpreter to load the file and execute the commands in it.
If anything goes wrong, many interpreters will drop you into a debugger to help you track down the problem.</p></div><div class=paragraph><p>The advantage of this is that you can see the results of your commands immediately, and mistakes can be corrected readily.
The biggest disadvantage comes when you want to share your programs with someone.
They must have the same interpreter, or you must have some way of giving it to them, and they need to understand how to use it.
Also users may not appreciate being thrown into a debugger if they press the wrong key! From a performance point of view, interpreters can use up a lot of memory, and generally do not generate code as efficiently as compilers.</p></div><div class=paragraph><p>In my opinion, interpreted languages are the best way to start if you have not done any programming before.
This kind of environment is typically found with languages like Lisp, Smalltalk, Perl and Basic.
It could also be argued that the UNIX® shell (<code>sh</code>, <code>csh</code>) is itself an interpreter, and many people do in fact write shell "scripts" to help with various "housekeeping" tasks on their machine.
Indeed, part of the original UNIX® philosophy was to provide lots of small utility programs that could be linked together in shell scripts to perform useful tasks.</p></div></div><div class=sect2><h3 id=_interpreters_available_with_freebsd>2.3.2. Interpreters Available with FreeBSD<a class=anchor href=#_interpreters_available_with_freebsd></a></h3><div class=paragraph><p>Here is a list of interpreters that are available from the FreeBSD Ports Collection, with a brief discussion of some of the more popular interpreted languages.</p></div><div class=paragraph><p>Instructions on how to get and install applications from the Ports Collection can be found in the <a href=https://docs.freebsd.org/en/books/handbook/#ports-using>Ports section</a> of the handbook.</p></div><div class=dlist><dl><dt class=hdlist1>BASIC</dt><dd><p>Short for Beginner’s All-purpose Symbolic Instruction Code.
Developed in the 1950s for teaching University students to program and provided with every self-respecting personal computer in the 1980s, BASIC has been the first programming language for many programmers.
It is also the foundation for Visual Basic.</p><div class=paragraph><p>The Bywater Basic Interpreter can be found in the Ports Collection as <a class=package href=https://cgit.freebsd.org/ports/tree/lang/bwbasic/>lang/bwbasic</a> and the Phil Cockroft’s Basic Interpreter (formerly Rabbit Basic) is available as <a class=package href=https://cgit.freebsd.org/ports/tree/lang/pbasic/>lang/pbasic</a>.</p></div></dd><dt class=hdlist1>Lisp</dt><dd><p>A language that was developed in the late 1950s as an alternative to the "number-crunching" languages that were popular at the time.
Instead of being based on numbers, Lisp is based on lists; in fact, the name is short for "List Processing".
It is very popular in AI (Artificial Intelligence) circles.</p><div class=paragraph><p>Lisp is an extremely powerful and sophisticated language, but can be rather large and unwieldy.</p></div><div class=paragraph><p>Various implementations of Lisp that can run on UNIX® systems are available in the Ports Collection for FreeBSD.
CLISP by Bruno Haible and Michael Stoll is available as <a class=package href=https://cgit.freebsd.org/ports/tree/lang/clisp/>lang/clisp</a>.
SLisp, a simpler Lisp implementations, is available as <a class=package href=https://cgit.freebsd.org/ports/tree/lang/slisp/>lang/slisp</a>.</p></div></dd><dt class=hdlist1>Perl</dt><dd><p>Very popular with system administrators for writing scripts; also often used on World Wide Web servers for writing CGI scripts.</p><div class=paragraph><p>Perl is available in the Ports Collection as <a class=package href=https://cgit.freebsd.org/ports/tree/lang/perl5.36/>lang/perl5.36</a> for all FreeBSD releases.</p></div></dd><dt class=hdlist1>Scheme</dt><dd><p>A dialect of Lisp that is rather more compact and cleaner than Common Lisp.
Popular in Universities as it is simple enough to teach to undergraduates as a first language,
while it has a high enough level of abstraction to be used in research work.</p><div class=paragraph><p>Scheme is available from the Ports Collection as <a class=package href=https://cgit.freebsd.org/ports/tree/lang/elk/>lang/elk</a> for the Elk Scheme Interpreter.
The MIT Scheme Interpreter can be found in <a class=package href=https://cgit.freebsd.org/ports/tree/lang/mit-scheme/>lang/mit-scheme</a> and the SCM Scheme Interpreter in <a class=package href=https://cgit.freebsd.org/ports/tree/lang/scm/>lang/scm</a>.</p></div></dd><dt class=hdlist1>Lua</dt><dd><p>Lua is a lightweight embeddable scripting language.
It is widely portable and relatively simple.
Lua is available in the Ports Collection in <a class=package href=https://cgit.freebsd.org/ports/tree/lang/lua54/>lang/lua54</a>.
It is also included in the base system as <span class=filename>/usr/libexec/flua</span> for use by base system components.
Third party software should not depend on <span class=filename>flua</span>.</p></dd><dt class=hdlist1>Python</dt><dd><p>Python is an Object-Oriented, interpreted language.
Its advocates argue that it is one of the best languages to start programming with, since it is relatively easy to start with, but is not limited in comparison to other popular interpreted languages that are used for the development of large, complex applications (Perl and Tcl are two other languages that are popular for such tasks).</p><div class=paragraph><p>The latest version of Python is available from the Ports Collection in <a class=package href=https://cgit.freebsd.org/ports/tree/lang/python/>lang/python</a>.</p></div></dd><dt class=hdlist1>Ruby</dt><dd><p>Ruby is an interpreter, pure object-oriented programming language.
It has become widely popular because of its easy to understand syntax, flexibility when writing code, and the ability to easily develop and maintain large, complex programs.</p><div class=paragraph><p>Ruby is available from the Ports Collection as <a class=package href=https://cgit.freebsd.org/ports/tree/lang/ruby32/>lang/ruby32</a>.</p></div></dd><dt class=hdlist1>Tcl and Tk</dt><dd><p>Tcl is an embeddable, interpreted language, that has become widely used and became popular mostly because of its portability to many platforms.
It can be used both for quickly writing small, prototype applications, or (when combined with Tk, a GUI toolkit) fully-fledged, featureful programs.</p><div class=paragraph><p>Various versions of Tcl are available as ports for FreeBSD.
The latest version, Tcl 8.7, can be found in <a class=package href=https://cgit.freebsd.org/ports/tree/lang/tcl87/>lang/tcl87</a>.</p></div></dd></dl></div></div><div class=sect2><h3 id=_compilers>2.3.3. Compilers<a class=anchor href=#_compilers></a></h3><div class=paragraph><p>Compilers are rather different.
First of all, you write your code in a file (or files) using an editor.
You then run the compiler and see if it accepts your program.
If it did not compile, grit your teeth and go back to the editor;
if it did compile and gave you a program, you can run it either at a shell command prompt or in a debugger to see if it works properly.<sup class=footnote>[<a id=_footnoteref_1 class=footnote href=#_footnotedef_1 title="View footnote.">1</a>]</sup></p></div><div class=paragraph><p>Obviously, this is not quite as direct as using an interpreter.
However it allows you to do a lot of things which are very difficult or even impossible with an interpreter,
such as writing code which interacts closely with the operating system-or even writing your own operating system!
It is also useful if you need to write very efficient code, as the compiler can take its time and optimize the code,
which would not be acceptable in an interpreter.
Moreover, distributing a program written for a compiler is usually more straightforward than one written for an interpreter-you can just give them a copy of the executable, assuming they have the same operating system as you.</p></div><div class=paragraph><p>As the edit-compile-run-debug cycle is rather tedious when using separate programs, many commercial compiler makers have produced Integrated Development Environments (IDEs for short).
FreeBSD does not include an IDE in the base system, but <a class=package href=https://cgit.freebsd.org/ports/tree/devel/kdevelop/>devel/kdevelop</a> is available in the Ports Collection and many use Emacs for this purpose.
Using Emacs as an IDE is discussed in <a href=../tools/#emacs>Using Emacs as a Development Environment</a>.</p></div></div></div></div><div class=sect1><h2 id=tools-compiling>2.4. Compiling with <code>cc</code><a class=anchor href=#tools-compiling></a></h2><div class=sectionbody><div class=paragraph><p>This section deals with the clang compiler for C and C++, as it’s installed with the FreeBSD base system.
Clang is installed as <code>cc</code>; the GNU compiler <a class=package href=https://cgit.freebsd.org/ports/tree/lang/gcc/>gcc</a> is available in the Ports Collection.
The details of producing a program with an interpreter vary considerably between interpreters, and are usually well covered in the documentation and on-line help for the interpreter.</p></div><div class=paragraph><p>Once you have written your masterpiece, the next step is to convert it into something that will (hopefully!) run on FreeBSD.
This usually involves several steps, each of which is done by a separate program.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>Pre-process your source code to remove comments and do other tricks like expanding macros in C.</p></li><li><p>Check the syntax of your code to see if you have obeyed the rules of the language. If you have not, it will complain!</p></li><li><p>Convert the source code into assembly language-this is very close to machine code, but still understandable by humans. Allegedly.</p></li><li><p>Convert the assembly language into machine code-yep, we are talking bits and bytes, ones and zeros here.</p></li><li><p>Check that you have used things like functions and global variables in a consistent way. For example, if you have called a non-existent function, it will complain.</p></li><li><p>If you are trying to produce an executable from several source code files, work out how to fit them all together.</p></li><li><p>Work out how to produce something that the system’s run-time loader will be able to load into memory and run.</p></li><li><p>Finally, write the executable on the filesystem.</p></li></ol></div><div class=paragraph><p>The word <em>compiling</em> is often used to refer to just steps 1 to 4-the others are referred to as <em>linking</em>.
Sometimes step 1 is referred to as <em>pre-processing</em> and steps 3-4 as <em>assembling</em>.</p></div><div class=paragraph><p>Fortunately, almost all this detail is hidden from you, as <code>cc</code> is a front end that manages calling all these programs with the right arguments for you; simply typing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc foobar.c</code></pre></div></div><div class=paragraph><p>will cause <span class=filename>foobar.c</span> to be compiled by all the steps above.
If you have more than one file to compile, just do something like</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc foo.c bar.c</code></pre></div></div><div class=paragraph><p>Note that the syntax checking is just that - checking the syntax.
It will not check for any logical mistakes you may have made, like putting the program into an infinite loop,
or using a bubble sort when you meant to use a binary sort.<sup class=footnote>[<a id=_footnoteref_2 class=footnote href=#_footnotedef_2 title="View footnote.">2</a>]</sup></p></div><div class=paragraph><p>There are lots and lots of options for <code>cc</code>, which are all in the manual page.
Here are a few of the most important ones, with examples of how to use them.</p></div><div class=dlist><dl><dt class=hdlist1><code>-o <em>filename</em></code></dt><dd><p>The output name of the file. If you do not use this option, <code>cc</code> will produce an executable called <span class=filename>a.out</span>.<sup class=footnote>[<a id=_footnoteref_3 class=footnote href=#_footnotedef_3 title="View footnote.">3</a>]</sup></p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc foobar.c               executable is a.out
% cc <span class=nt>-o</span> foobar foobar.c     executable is foobar</code></pre></div></div></dd><dt class=hdlist1><code>-c</code></dt><dd><p>Just compile the file, do not link it.
Useful for toy programs where you just want to check the syntax, or if you are using a <span class=filename>Makefile</span>.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-c</span> foobar.c</code></pre></div></div><div class=paragraph><p>This will produce an <em>object file</em> (not an executable) called <span class=filename>foobar.o</span>.
This can be linked together with other object files into an executable.</p></div></dd><dt class=hdlist1><code>-g</code></dt><dd><p>Create a debug version of the executable.
This makes the compiler put information into the executable about which line of which source file corresponds to which function call.
A debugger can use this information to show the source code as you step through the program, which is <em>very</em> useful;
the disadvantage is that all this extra information makes the program much bigger.
Normally, you compile with <code>-g</code> while you are developing a program and then compile a "release version" without <code>-g</code> when you are satisfied it works properly.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-g</span> foobar.c</code></pre></div></div><div class=paragraph><p>This will produce a debug version of the program. <sup class=footnote>[<a id=_footnoteref_4 class=footnote href=#_footnotedef_4 title="View footnote.">4</a>]</sup></p></div></dd><dt class=hdlist1><code>-O</code></dt><dd><p>Create an optimized version of the executable.
The compiler performs various clever tricks to try to produce an executable that runs faster than normal.
You can add a number after the <code>-O</code> to specify a higher level of optimization, but this often exposes bugs in the compiler’s optimizer.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-O</span> <span class=nt>-o</span> foobar foobar.c</code></pre></div></div><div class=paragraph><p>This will produce an optimized version of <span class=filename>foobar</span>.</p></div></dd></dl></div><div class=paragraph><p>The following three flags will force <code>cc</code> to check that your code complies to the relevant international standard,
often referred to as the ANSI standard, though strictly speaking it is an ISO standard.</p></div><div class=dlist><dl><dt class=hdlist1><code>-Wall</code></dt><dd><p>Enable all the warnings which the authors of <code>cc</code> believe are worthwhile.
Despite the name, it will not enable all the warnings <code>cc</code> is capable of.</p></dd><dt class=hdlist1><code>-ansi</code></dt><dd><p>Turn off most, but not all, of the non-ANSI C features provided by <code>cc</code>.
Despite the name, it does not guarantee strictly that your code will comply to the standard.</p></dd><dt class=hdlist1><code>-pedantic</code></dt><dd><p>Turn off <em>all</em> <code>cc</code>'s non-ANSI C features.</p></dd></dl></div><div class=paragraph><p>Without these flags, <code>cc</code> will allow you to use some of its non-standard extensions to the standard.
Some of these are very useful, but will not work with other compilers - in fact,
one of the main aims of the standard is to allow people to write code that will work with any compiler on any system.
This is known as <em>portable code</em>.</p></div><div class=paragraph><p>Generally, you should try to make your code as portable as possible,
as otherwise you may have to completely rewrite the program later to get it to work somewhere else - and who knows what you may be using in a few years time?</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-Wall</span> <span class=nt>-ansi</span> <span class=nt>-pedantic</span> <span class=nt>-o</span> foobar foobar.c</code></pre></div></div><div class=paragraph><p>This will produce an executable <span class=filename>foobar</span> after checking <span class=filename>foobar.c</span> for standard compliance.</p></div><div class=dlist><dl><dt class=hdlist1><code>-l<em>library</em></code></dt><dd><p>Specify a function library to be used at link time.</p><div class=paragraph><p>The most common example of this is when compiling a program that uses some of the mathematical functions in C.
Unlike most other platforms, these are in a separate library from the standard C one and you have to tell the compiler to add it.</p></div><div class=paragraph><p>The rule is that if the library is called <span class=filename>libsomething.a</span>, you give <code>cc</code> the argument <code>-l<em>something</em></code>.
For example, the math library is <span class=filename>libm.a</span>, so you give <code>cc</code> the argument <code>-lm</code>.
A common "gotcha" with the math library is that it has to be the last library on the command line.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-o</span> foobar foobar.c <span class=nt>-lm</span></code></pre></div></div><div class=paragraph><p>This will link the math library functions into <span class=filename>foobar</span>.</p></div><div class=paragraph><p>If you are compiling C++ code, use c++.
c++ can also be invoked as clang++ on FreeBSD.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% c++ <span class=nt>-o</span> foobar foobar.cc</code></pre></div></div><div class=paragraph><p>This will both produce an executable <span class=filename>foobar</span> from the C++ source file <span class=filename>foobar.cc</span>.</p></div></dd></dl></div><div class=sect2><h3 id=_common_cc_queries_and_problems>2.4.1. Common <code>cc</code> Queries and Problems<a class=anchor href=#_common_cc_queries_and_problems></a></h3><div class=sect3><h4 id=_i_compiled_a_file_called_foobar_c_and_i_cannot_find_an_executable_called_foobar_where_has_it_gone>2.4.1.1. I compiled a file called foobar.c and I cannot find an executable called foobar. Where has it gone?<a class=anchor href=#_i_compiled_a_file_called_foobar_c_and_i_cannot_find_an_executable_called_foobar_where_has_it_gone></a></h4><div class=paragraph><p>Remember, <code>cc</code> will call the executable <span class=filename>a.out</span> unless you tell it differently.
Use the <code>-o <em>filename</em></code> option:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-o</span> foobar foobar.c</code></pre></div></div></div><div class=sect3><h4 id=_ok_i_have_an_executable_called_foobar_i_can_see_it_when_i_run_ls_but_when_i_type_in_foobar_at_the_command_prompt_it_tells_me_there_is_no_such_file_why_can_it_not_find_it>2.4.1.2. OK, I have an executable called foobar, I can see it when I run ls, but when I type in foobar at the command prompt it tells me there is no such file. Why can it not find it?<a class=anchor href=#_ok_i_have_an_executable_called_foobar_i_can_see_it_when_i_run_ls_but_when_i_type_in_foobar_at_the_command_prompt_it_tells_me_there_is_no_such_file_why_can_it_not_find_it></a></h4><div class=paragraph><p>Unlike MS-DOS®, UNIX® does not look in the current directory when it is trying to find out which executable you want it to run, unless you tell it to.
Type <code>./foobar</code>, which means "run the file called <span class=filename>foobar</span> in the current directory."</p></div></div></div><div class=sect2><h3 id=_i_called_my_executable_test_but_nothing_happens_when_i_run_it_what_is_going_on>2.4.2. I called my executable test, but nothing happens when I run it. What is going on?<a class=anchor href=#_i_called_my_executable_test_but_nothing_happens_when_i_run_it_what_is_going_on></a></h3><div class=paragraph><p>Most UNIX® systems have a program called <code>test</code> in <span class=filename>/usr/bin</span> and the shell is picking that one up before it gets to checking the current directory.
Either type:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% ./test</code></pre></div></div><div class=paragraph><p>or choose a better name for your program!</p></div><div class=sect3><h4 id=_i_compiled_my_program_and_it_seemed_to_run_all_right_at_first_then_there_was_an_error_and_it_said_something_about_core_dumped_what_does_that_mean>2.4.2.1. I compiled my program and it seemed to run all right at first, then there was an error and it said something about core dumped. What does that mean?<a class=anchor href=#_i_compiled_my_program_and_it_seemed_to_run_all_right_at_first_then_there_was_an_error_and_it_said_something_about_core_dumped_what_does_that_mean></a></h4><div class=paragraph><p>The name <em>core dump</em> dates back to the very early days of UNIX®, when the machines used core memory for storing data.
Basically, if the program failed under certain conditions, the system would write the contents of core memory to disk in a file called <span class=filename>core</span>, which the programmer could then pore over to find out what went wrong.</p></div></div><div class=sect3><h4 id=_fascinating_stuff_but_what_i_am_supposed_to_do_now>2.4.2.2. Fascinating stuff, but what I am supposed to do now?<a class=anchor href=#_fascinating_stuff_but_what_i_am_supposed_to_do_now></a></h4><div class=paragraph><p>Use a debugger to analyze the core (see <a href=../tools/#debugging>Debugging</a>).</p></div></div><div class=sect3><h4 id=_when_my_program_dumped_core_it_said_something_about_a_segmentation_fault_what_is_that>2.4.2.3. When my program dumped core, it said something about a segmentation fault. What is that?<a class=anchor href=#_when_my_program_dumped_core_it_said_something_about_a_segmentation_fault_what_is_that></a></h4><div class=paragraph><p>This basically means that your program tried to perform some sort of illegal operation on memory;
UNIX® is designed to protect the operating system and other programs from rogue programs.</p></div><div class=paragraph><p>Common causes for this are:</p></div><div class=ulist><ul><li><p>Trying to write to a NULL pointer, eg</p><div class="literalblock programlisting"><div class=content><pre>char *foo = NULL;
strcpy(foo, &#34;bang!&#34;);</pre></div></div></li><li><p>Using a pointer that has not been initialized, eg</p><div class="literalblock programlisting"><div class=content><pre>char *foo;
strcpy(foo, &#34;bang!&#34;);</pre></div></div><div class=paragraph><p>The pointer will have some random value that, with luck, will point into an area of memory that is not available to your program and the kernel will kill your program before it can do any damage.
If you are unlucky, it will point somewhere inside your own program and corrupt one of your data structures, causing the program to fail mysteriously.</p></div></li><li><p>Trying to access past the end of an array, eg</p><div class="literalblock programlisting"><div class=content><pre>int bar[20];
bar[27] = 6;</pre></div></div></li><li><p>Trying to store something in read-only memory, eg</p><div class="literalblock programlisting"><div class=content><pre>char *foo = &#34;My string&#34;;
strcpy(foo, &#34;bang!&#34;);</pre></div></div><div class=paragraph><p>UNIX® compilers often put string literals like <code>"My string"</code> into read-only areas of memory.</p></div></li><li><p>Doing naughty things with <code>malloc()</code> and <code>free()</code>, eg</p><div class="literalblock programlisting"><div class=content><pre>char bar[80];
free(bar);</pre></div></div><div class=paragraph><p>or</p></div><div class="literalblock programlisting"><div class=content><pre>char *foo = malloc(27);
free(foo);
free(foo);</pre></div></div></li></ul></div><div class=paragraph><p>Making one of these mistakes will not always lead to an error, but they are always bad practice.
Some systems and compilers are more tolerant than others,
which is why programs that run well on one system can crash when you try them on another.</p></div></div><div class=sect3><h4 id=_sometimes_when_i_get_a_core_dump_it_says_bus_error_it_says_in_my_unix_book_that_this_means_a_hardware_problem_but_the_computer_still_seems_to_be_working_is_this_true>2.4.2.4. Sometimes when I get a core dump it says bus error. It says in my UNIX® book that this means a hardware problem, but the computer still seems to be working. Is this true?<a class=anchor href=#_sometimes_when_i_get_a_core_dump_it_says_bus_error_it_says_in_my_unix_book_that_this_means_a_hardware_problem_but_the_computer_still_seems_to_be_working_is_this_true></a></h4><div class=paragraph><p>No, fortunately not (unless of course you really do have a hardware problem…​).
This is usually another way of saying that you accessed memory in a way you should not have.</p></div></div><div class=sect3><h4 id=_this_dumping_core_business_sounds_as_though_it_could_be_quite_useful_if_i_can_make_it_happen_when_i_want_to_can_i_do_this_or_do_i_have_to_wait_until_there_is_an_error>2.4.2.5. This dumping core business sounds as though it could be quite useful, if I can make it happen when I want to. Can I do this, or do I have to wait until there is an error?<a class=anchor href=#_this_dumping_core_business_sounds_as_though_it_could_be_quite_useful_if_i_can_make_it_happen_when_i_want_to_can_i_do_this_or_do_i_have_to_wait_until_there_is_an_error></a></h4><div class=paragraph><p>Yes, just go to another console or xterm, do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% ps</code></pre></div></div><div class=paragraph><p>to find out the process ID of your program, and do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% <span class=nb>kill</span> <span class=nt>-ABRT</span> pid</code></pre></div></div><div class=paragraph><p>where <code><em>pid</em></code> is the process ID you looked up.</p></div><div class=paragraph><p>This is useful if your program has got stuck in an infinite loop, for instance.
If your program happens to trap SIGABRT, there are several other signals which have a similar effect.</p></div><div class=paragraph><p>Alternatively, you can create a core dump from inside your program, by calling the <code>abort()</code> function.
See the manual page of <a href="https://man.freebsd.org/cgi/man.cgi?query=abort&amp;sektion=3&amp;format=html">abort(3)</a> to learn more.</p></div><div class=paragraph><p>If you want to create a core dump from outside your program, but do not want the process to terminate, you can use the <code>gcore</code> program.
See the manual page of <a href="https://man.freebsd.org/cgi/man.cgi?query=gcore&amp;sektion=1&amp;format=html">gcore(1)</a> for more information.</p></div></div></div></div></div><div class=sect1><h2 id=tools-make>2.5. Make<a class=anchor href=#tools-make></a></h2><div class=sectionbody><div class=sect2><h3 id=_what_is_make>2.5.1. What is <code>make</code>?<a class=anchor href=#_what_is_make></a></h3><div class=paragraph><p>When you are working on a simple program with only one or two source files, typing in</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc file1.c file2.c</code></pre></div></div><div class=paragraph><p>is not too bad, but it quickly becomes very tedious when there are several files-and it can take a while to compile, too.</p></div><div class=paragraph><p>One way to get around this is to use object files and only recompile the source file if the source code has changed.
So we could have something like:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc file1.o file2.o … file37.c …</code></pre></div></div><div class=paragraph><p>if we had changed <span class=filename>file37.c</span>, but not any of the others, since the last time we compiled.
This may speed up the compilation quite a bit, but does not solve the typing problem.</p></div><div class=paragraph><p>Or we could write a shell script to solve the typing problem, but it would have to re-compile everything, making it very inefficient on a large project.</p></div><div class=paragraph><p>What happens if we have hundreds of source files lying about? What if we are working in a team with other people who forget to tell us when they have changed one of their source files that we use?</p></div><div class=paragraph><p>Perhaps we could put the two solutions together and write something like a shell script that would contain some kind of magic rule saying when a source file needs compiling.
Now all we need now is a program that can understand these rules, as it is a bit too complicated for the shell.</p></div><div class=paragraph><p>This program is called <code>make</code>.
It reads in a file, called a <em>makefile</em>, that tells it how different files depend on each other, and works out which files need to be re-compiled and which ones do not.
For example, a rule could say something like "if <span class=filename>fromboz.o</span> is older than <span class=filename>fromboz.c</span>, that means someone must have changed <span class=filename>fromboz.c</span>, so it needs to be re-compiled."
The makefile also has rules telling make <em>how</em> to re-compile the source file, making it a much more powerful tool.</p></div><div class=paragraph><p>Makefiles are typically kept in the same directory as the source they apply to, and can be called <span class=filename>makefile</span>, <span class=filename>Makefile</span> or <span class=filename>MAKEFILE</span>.
Most programmers use the name <span class=filename>Makefile</span>, as this puts it near the top of a directory listing, where it can easily be seen.<sup class=footnote>[<a id=_footnoteref_5 class=footnote href=#_footnotedef_5 title="View footnote.">5</a>]</sup></p></div></div><div class=sect2><h3 id=_example_of_using_make>2.5.2. Example of Using <code>make</code><a class=anchor href=#_example_of_using_make></a></h3><div class=paragraph><p>Here is a very simple make file:</p></div><div class="literalblock programlisting"><div class=content><pre>foo: foo.c
	cc -o foo foo.c</pre></div></div><div class=paragraph><p>It consists of two lines, a dependency line and a creation line.</p></div><div class=paragraph><p>The dependency line here consists of the name of the program (known as the <em>target</em>),
followed by a colon, then whitespace, then the name of the source file.
When <code>make</code> reads this line, it looks to see if <span class=filename>foo</span> exists;
if it exists, it compares the time <span class=filename>foo</span> was last modified to the time <span class=filename>foo.c</span> was last modified.
If <span class=filename>foo</span> does not exist, or is older than <span class=filename>foo.c</span>, it then looks at the creation line to find out what to do.
In other words, this is the rule for working out when <span class=filename>foo.c</span> needs to be re-compiled.</p></div><div class=paragraph><p>The creation line starts with a tab (press <kbd>tab</kbd>) and then the command you would type to create <span class=filename>foo</span> if you were doing it at a command prompt.
If <span class=filename>foo</span> is out of date, or does not exist, <code>make</code> then executes this command to create it.
In other words, this is the rule which tells make how to re-compile <span class=filename>foo.c</span>.</p></div><div class=paragraph><p>So, when you type <code>make</code>, it will make sure that <span class=filename>foo</span> is up to date with respect to your latest changes to <span class=filename>foo.c</span>.
This principle can be extended to <span class=filename>Makefile</span>'s with hundreds of targets-in fact, on FreeBSD,
it is possible to compile the entire operating system just by typing <code>make world</code> in the appropriate directory!</p></div><div class=paragraph><p>Another useful property of makefiles is that the targets do not have to be programs.
For instance, we could have a make file that looks like this:</p></div><div class="literalblock programlisting"><div class=content><pre>foo: foo.c
	cc -o foo foo.c

install:
	cp foo /home/me</pre></div></div><div class=paragraph><p>We can tell make which target we want to make by typing:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% make target</code></pre></div></div><div class=paragraph><p><code>make</code> will then only look at that target and ignore any others.
For example, if we type <code>make foo</code> with the makefile above, make will ignore the <code>install</code> target.</p></div><div class=paragraph><p>If we just type <code>make</code> on its own, make will always look at the first target and then stop without looking at any others.
So if we typed <code>make</code> here, it will just go to the <code>foo</code> target, re-compile <span class=filename>foo</span> if necessary, and then stop without going on to the <code>install</code> target.</p></div><div class=paragraph><p>Notice that the <code>install</code> target does not actually depend on anything! This means that the command on the following line is always executed when we try to make that target by typing <code>make install</code>.
In this case, it will copy <span class=filename>foo</span> into the user’s home directory.
This is often used by application makefiles, so that the application can be installed in the correct directory when it has been correctly compiled.</p></div><div class=paragraph><p>This is a slightly confusing subject to try to explain.
If you do not quite understand how <code>make</code> works, the best thing to do is to write a simple program like "hello world" and a make file like the one above and experiment.
Then progress to using more than one source file, or having the source file include a header file.
<code>touch</code> is very useful here-it changes the date on a file without you having to edit it.</p></div></div><div class=sect2><h3 id=_make_and_include_files>2.5.3. Make and include-files<a class=anchor href=#_make_and_include_files></a></h3><div class=paragraph><p>C code often starts with a list of files to include, for example stdio.h.
Some of these files are system-include files, some of them are from the project you are now working on:</p></div><div class="literalblock programlisting"><div class=content><pre>#include &lt;stdio.h&gt;
#include &#34;foo.h&#34;

int main(....</pre></div></div><div class=paragraph><p>To make sure that this file is recompiled the moment <span class=filename>foo.h</span> is changed, you have to add it in your <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>foo: foo.c foo.h</pre></div></div><div class=paragraph><p>The moment your project is getting bigger and you have more and more own include-files to maintain,
it will be a pain to keep track of all include files and the files which are depending on it.
If you change an include-file but forget to recompile all the files which are depending on it,
the results will be devastating.
<code>clang</code> has an option to analyze your files and to produce a list of include-files and their dependencies: <code>-MM</code>.</p></div><div class=paragraph><p>If you add this to your Makefile:</p></div><div class="literalblock programlisting"><div class=content><pre>depend:
	cc -E -MM *.c &gt; .depend</pre></div></div><div class=paragraph><p>and run <code>make depend</code>, the file <span class=filename>.depend</span> will appear with a list of object-files, C-files and the include-files:</p></div><div class="literalblock programlisting"><div class=content><pre>foo.o: foo.c foo.h</pre></div></div><div class=paragraph><p>If you change <span class=filename>foo.h</span>, next time you run <code>make</code> all files depending on <span class=filename>foo.h</span> will be recompiled.</p></div><div class=paragraph><p>Do not forget to run <code>make depend</code> each time you add an include-file to one of your files.</p></div></div><div class=sect2><h3 id=_freebsd_makefiles>2.5.4. FreeBSD Makefiles<a class=anchor href=#_freebsd_makefiles></a></h3><div class=paragraph><p>Makefiles can be rather complicated to write.
Fortunately, BSD-based systems like FreeBSD come with some very powerful ones as part of the system.
One very good example of this is the FreeBSD ports system.
Here is the essential part of a typical ports <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>MASTER_SITES=   ftp://freefall.cdrom.com/pub/FreeBSD/LOCAL_PORTS/
DISTFILES=      scheme-microcode+dist-7.3-freebsd.tgz

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>Now, if we go to the directory for this port and type <code>make</code>, the following happens:</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>A check is made to see if the source code for this port is already on the system.</p></li><li><p>If it is not, an FTP connection to the URL in MASTER_SITES is set up to download the source.</p></li><li><p>The checksum for the source is calculated and compared it with one for a known, good, copy of the source. This is to make sure that the source was not corrupted while in transit.</p></li><li><p>Any changes required to make the source work on FreeBSD are applied-this is known as <em>patching</em>.</p></li><li><p>Any special configuration needed for the source is done. (Many UNIX® program distributions try to work out which version of UNIX® they are being compiled on and which optional UNIX® features are present-this is where they are given the information in the FreeBSD ports scenario).</p></li><li><p>The source code for the program is compiled. In effect, we change to the directory where the source was unpacked and do <code>make</code>-the program’s own make file has the necessary information to build the program.</p></li><li><p>We now have a compiled version of the program. If we wish, we can test it now; when we feel confident about the program, we can type <code>make install</code>. This will cause the program and any supporting files it needs to be copied into the correct location; an entry is also made into a <code>package database</code>, so that the port can easily be uninstalled later if we change our mind about it.</p></li></ol></div><div class=paragraph><p>Now I think you will agree that is rather impressive for a four line script!</p></div><div class=paragraph><p>The secret lies in the last line, which tells <code>make</code> to look in the system makefile called <span class=filename>bsd.port.mk</span>.
It is easy to overlook this line, but this is where all the clever stuff comes from-someone has written a makefile that tells <code>make</code> to do all the things above (plus a couple of other things I did not mention,
including handling any errors that may occur) and anyone can get access to that just by putting a single line in their own make file!</p></div><div class=paragraph><p>If you want to have a look at these system makefiles, they are in <span class=filename>/usr/share/mk</span>,
but it is probably best to wait until you have had a bit of practice with makefiles,
as they are very complicated (and if you do look at them, make sure you have a flask of strong coffee handy!)</p></div></div><div class=sect2><h3 id=_more_advanced_uses_of_make>2.5.5. More Advanced Uses of <code>make</code><a class=anchor href=#_more_advanced_uses_of_make></a></h3><div class=paragraph><p><code>Make</code> is a very powerful tool, and can do much more than the simple example above shows.
Unfortunately, there are several different versions of <code>make</code>, and they all differ considerably.
The best way to learn what they can do is probably to read the documentation-hopefully this introduction will have given you a base from which you can do this.
The <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> manual page offers a comprehensive discussion of variables, arguments, and how to use make.</p></div><div class=paragraph><p>Many applications in the ports use GNU make, which has a very good set of "info" pages.
If you have installed any of these ports, GNU make will automatically have been installed as <code>gmake</code>.
It is also available as a port and package in its own right.</p></div><div class=paragraph><p>To view the info pages for GNU make, you will have to edit <span class=filename>dir</span> in the <span class=filename>/usr/local/info</span> directory to add an entry for it.
This involves adding a line like</p></div><div class="literalblock programlisting"><div class=content><pre> * Make: (make).                 The GNU Make utility.</pre></div></div><div class=paragraph><p>to the file. Once you have done this, you can type <code>info</code> and then select <span class=guimenuitem>make</span> from the menu (or in Emacs, do <code>C-h i</code>).</p></div></div></div></div><div class=sect1><h2 id=debugging>2.6. Debugging<a class=anchor href=#debugging></a></h2><div class=sectionbody><div class=sect2><h3 id=_introduction_to_available_debuggers>2.6.1. Introduction to Available Debuggers<a class=anchor href=#_introduction_to_available_debuggers></a></h3><div class=paragraph><p>Using a debugger allows running the program under more controlled circumstances.
Typically, it is possible to step through the program a line at a time, inspect the value of variables, change them, tell the debugger to run up to a certain point and then stop, and so on.
It is also possible to attach to a program that is already running, or load a core file to investigate why the program crashed.</p></div><div class=paragraph><p>This section is intended to be a quick introduction to using debuggers and does not cover specialized topics such as debugging the kernel.
For more information about that, refer to <a href=../kerneldebug/#kerneldebug>Kernel Debugging</a>.</p></div><div class=paragraph><p>The standard debugger supplied with FreeBSD is called <code>lldb</code> (LLVM debugger).
As it is part of the standard installation for that release, there is no need to do anything special to use it.
It has good command help, accessible via the <code>help</code> command, as well as <a href=https://lldb.llvm.org/>a web tutorial and documentation</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>lldb</code> command is also available <a href=https://docs.freebsd.org/en/books/handbook/ports/#ports-using>from ports or packages</a> as <a class=package href=https://cgit.freebsd.org/ports/tree/devel/llvm/>devel/llvm</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>The other debugger available with FreeBSD is called <code>gdb</code> (GNU debugger).
Unlike lldb, it is not installed by default on FreeBSD;
to use it, <a href=https://docs.freebsd.org/en/books/handbook/#ports-using/>install</a> <a class=package href=https://cgit.freebsd.org/ports/tree/devel/gdb/>devel/gdb</a> from ports or packages.
It has excellent on-line help, as well as a set of info pages.</p></div><div class=paragraph><p>The two debuggers have a similar feature set, so which one to use is largely a matter of taste.
If familiar with one only, use that one.
People familiar with neither or both but wanting to use one from inside Emacs will need to use <code>gdb</code> as <code>lldb</code> is unsupported by Emacs.
Otherwise, try both and see which one you prefer.</p></div></div><div class=sect2><h3 id=_using_lldb>2.6.2. Using lldb<a class=anchor href=#_using_lldb></a></h3><div class=sect3><h4 id=_starting_lldb>2.6.2.1. Starting lldb<a class=anchor href=#_starting_lldb></a></h4><div class=paragraph><p>Start up lldb by typing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% lldb <span class=nt>--</span> progname</code></pre></div></div></div><div class=sect3><h4 id=_running_a_program_with_lldb>2.6.2.2. Running a Program with lldb<a class=anchor href=#_running_a_program_with_lldb></a></h4><div class=paragraph><p>Compile the program with <code>-g</code> to get the most out of using <code>lldb</code>.
It will work without, but will only display the name of the function currently running, instead of the source code.
If it displays a line like:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>Breakpoint 1: where <span class=o>=</span> temp<span class=sb>`</span>main, address <span class=o>=</span> …</code></pre></div></div><div class=paragraph><p>(without an indication of source code filename and line number) when setting a breakpoint, this means that the program was not compiled with <code>-g</code>.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Most <code>lldb</code> commands have shorter forms that can be used instead.
The longer forms are used here for clarity.</p></div></td></tr></tbody></table></div><div class=paragraph><p>At the <code>lldb</code> prompt, type <code>breakpoint set -n main</code>.
This will tell the debugger not to display the preliminary set-up code in the program being run and to stop execution at the beginning of the program’s code.
Now type <code>process launch</code> to actually start the program- it will start at the beginning of the set-up code and then get stopped by the debugger when it calls <code>main()</code>.</p></div><div class=paragraph><p>To step through the program a line at a time, type <code>thread step-over</code>.
When the program gets to a function call, step into it by typing <code>thread step-in</code>.
Once in a function call, return from it by typing <code>thread step-out</code> or use <code>up</code> and <code>down</code> to take a quick look at the caller.</p></div><div class=paragraph><p>Here is a simple example of how to spot a mistake in a program with <code>lldb</code>.
This is our program (with a deliberate mistake):</p></div><div class="literalblock programlisting"><div class=content><pre>#include &lt;stdio.h&gt;

int bazz(int anint);

main() {
	int i;

	printf(&#34;This is my program\n&#34;);
	bazz(i);
	return 0;
}

int bazz(int anint) {
	printf(&#34;You gave me %d\n&#34;, anint);
	return anint;
}</pre></div></div><div class=paragraph><p>This program sets i to be <code>5</code> and passes it to a function <code>bazz()</code> which prints out the number we gave it.</p></div><div class=paragraph><p>Compiling and running the program displays</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-g</span> <span class=nt>-o</span> temp temp.c
% ./temp
This is my program
anint <span class=o>=</span> <span class=nt>-5360</span></code></pre></div></div><div class=paragraph><p>That is not what was expected! Time to see what is going on!</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% lldb <span class=nt>--</span> temp
<span class=o>(</span>lldb<span class=o>)</span> target create <span class=s2>&#34;temp&#34;</span>
Current executable <span class=nb>set </span>to <span class=s1>&#39;temp&#39;</span> <span class=o>(</span>x86_64<span class=o>)</span><span class=nb>.</span>
<span class=o>(</span>lldb<span class=o>)</span> breakpoint <span class=nb>set</span> <span class=nt>-n</span> main				Skip the set-up code
Breakpoint 1: where <span class=o>=</span> temp<span class=sb>`</span>main + 15 at temp.c:8:2, address <span class=o>=</span> 0x00000000002012ef	lldb puts breakpoint at main<span class=o>()</span>
<span class=o>(</span>lldb<span class=o>)</span> process launch					Run as far as main<span class=o>()</span>
Process 9992 launching
Process 9992 launched: <span class=s1>&#39;/home/pauamma/tmp/temp&#39;</span> <span class=o>(</span>x86_64<span class=o>)</span>	Program starts running

Process 9992 stopped
<span class=k>*</span> thread <span class=c>#1, name = &#39;temp&#39;, stop reason = breakpoint 1.1	lldb stops at main()</span>
    frame <span class=c>#0: 0x00000000002012ef temp`main at temp.c:8:2</span>
   5	main<span class=o>()</span> <span class=o>{</span>
   6		int i<span class=p>;</span>
   7
-&gt; 8		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;This is my program</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>			Indicates the line where it stopped
   9		bazz<span class=o>(</span>i<span class=o>)</span><span class=p>;</span>
   10		<span class=k>return </span>0<span class=p>;</span>
   11	<span class=o>}</span>
<span class=o>(</span>lldb<span class=o>)</span> thread step-over			Go to next line
This is my program						Program prints out
Process 9992 stopped
<span class=k>*</span> thread <span class=c>#1, name = &#39;temp&#39;, stop reason = step over</span>
    frame <span class=c>#0: 0x0000000000201300 temp`main at temp.c:9:7</span>
   6		int i<span class=p>;</span>
   7
   8		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;This is my program</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>
-&gt; 9		bazz<span class=o>(</span>i<span class=o>)</span><span class=p>;</span>
   10		<span class=k>return </span>0<span class=p>;</span>
   11	<span class=o>}</span>
   12
<span class=o>(</span>lldb<span class=o>)</span> thread step-in			step into bazz<span class=o>()</span>
Process 9992 stopped
<span class=k>*</span> thread <span class=c>#1, name = &#39;temp&#39;, stop reason = step in</span>
    frame <span class=c>#0: 0x000000000020132b temp`bazz(anint=-5360) at temp.c:14:29	lldb displays stack frame</span>
   11	<span class=o>}</span>
   12
   13	int bazz<span class=o>(</span>int anint<span class=o>)</span> <span class=o>{</span>
-&gt; 14		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;You gave me %d</span><span class=se>\n</span><span class=s2>&#34;</span>, anint<span class=o>)</span><span class=p>;</span>
   15		<span class=k>return </span>anint<span class=p>;</span>
   16	<span class=o>}</span>
<span class=o>(</span>lldb<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Hang on a minute! How did anint get to be <code>-5360</code>? Was it not set to <code>5</code> in <code>main()</code>? Let us move up to <code>main()</code> and have a look.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>lldb<span class=o>)</span> up		Move up call stack
frame <span class=c>#1: 0x000000000020130b temp`main at temp.c:9:2		lldb displays stack frame</span>
   6		int i<span class=p>;</span>
   7
   8		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;This is my program</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>
-&gt; 9		bazz<span class=o>(</span>i<span class=o>)</span><span class=p>;</span>
   10		<span class=k>return </span>0<span class=p>;</span>
   11	<span class=o>}</span>
   12
<span class=o>(</span>lldb<span class=o>)</span> frame variable i			Show us the value of i
<span class=o>(</span>int<span class=o>)</span> i <span class=o>=</span> <span class=nt>-5360</span>							lldb displays <span class=nt>-5360</span></code></pre></div></div><div class=paragraph><p>Oh dear! Looking at the code, we forgot to initialize i.
We meant to put</p></div><div class="literalblock programlisting"><div class=content><pre>...
main() {
	int i;

	i = 5;
	printf(&#34;This is my program\n&#34;);
...</pre></div></div><div class=paragraph><p>but we left the <code>i=5;</code> line out.
As we did not initialize i, it had whatever number happened to be in that area of memory when the program ran,
which in this case happened to be <code>-5360</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>lldb</code> command displays the stack frame every time we go into or out of a function, even if we are using <code>up</code> and <code>down</code> to move around the call stack.
This shows the name of the function and the values of its arguments, which helps us keep track of where we are and what is going on.
(The stack is a storage area where the program stores information about the arguments passed to functions and where to go when it returns from a function call.)</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_examining_a_core_file_with_lldb>2.6.2.3. Examining a Core File with lldb<a class=anchor href=#_examining_a_core_file_with_lldb></a></h4><div class=paragraph><p>A core file is basically a file which contains the complete state of the process when it crashed.
In "the good old days", programmers had to print out hex listings of core files and sweat over machine code manuals, but now life is a bit easier.
Incidentally, under FreeBSD and other 4.4BSD systems, a core file is called <span class=filename>progname.core</span> instead of just <span class=filename>core</span>, to make it clearer which program a core file belongs to.</p></div><div class=paragraph><p>To examine a core file, specify the name of the core file in addition to the program itself.
Instead of starting up <code>lldb</code> in the usual way, type <code>lldb -c <em>progname</em>.core -- <em>progname</em></code>.</p></div><div class=paragraph><p>The debugger will display something like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% lldb <span class=nt>-c</span> <span class=o><span class="</span>.filename">progname.core</span> <span class=nt>--</span> <span class=o><span class="</span>.filename">progname</span>
<span class=o>(</span>lldb<span class=o>)</span> target create <span class=s2>&#34;<span class=filename>progname</span>&#34;</span> <span class=nt>--core</span> <span class=s2>&#34;<span class=filename>progname</span>.core&#34;</span>
Core file <span class=s1>&#39;/home/pauamma/tmp/<span class=filename>progname.core</span>&#39;</span> <span class=o>(</span>x86_64<span class=o>)</span> was loaded.
<span class=o>(</span>lldb<span class=o>)</span></span></span></code></pre></div></div><div class=paragraph><p>In this case, the program was called <span class=filename>progname</span>, so the core file is called <span class=filename>progname.core</span>.
The debugger does not display why the program crashed or where.
For this, use <code>thread backtrace all</code>.
This will also show how the function where the program dumped core was called.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>lldb<span class=o>)</span> thread backtrace all
<span class=k><strong></strong></span><strong> thread <span class=c>#1, name = &#39;progname&#39;, stop reason = signal SIGSEGV</span>
  <span class=k></span></strong> frame <span class=c>#0: 0x0000000000201347 progname`bazz(anint=5) at temp2.c:17:10</span>
    frame <span class=c>#1: 0x0000000000201312 progname`main at temp2.c:10:2</span>
    frame <span class=c>#2: 0x000000000020110f progname`_start(ap=&lt;unavailable&gt;, cleanup=&lt;unavailable&gt;) at crt1.c:76:7</span>
<span class=o>(</span>lldb<span class=o>)</span></code></pre></div></div><div class=paragraph><p><code>SIGSEGV</code> indicates that the program tried to access memory (run code or read/write data usually) at a location that does not belong to it, but does not give any specifics.
For that, look at the source code at line 10 of file temp2.c, in <code>bazz()</code>.
The backtrace also says that in this case, <code>bazz()</code> was called from <code>main()</code>.</p></div></div><div class=sect3><h4 id=_attaching_to_a_running_program_with_lldb>2.6.2.4. Attaching to a Running Program with lldb<a class=anchor href=#_attaching_to_a_running_program_with_lldb></a></h4><div class=paragraph><p>One of the neatest features about <code>lldb</code> is that it can attach to a program that is already running.
Of course, that requires sufficient permissions to do so.
A common problem is stepping through a program that forks and wanting to trace the child, but the debugger will only trace the parent.</p></div><div class=paragraph><p>To do that, start up another <code>lldb</code>, use <code>ps</code> to find the process ID for the child, and do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>lldb<span class=o>)</span> process attach <span class=nt>-p</span> pid</code></pre></div></div><div class=paragraph><p>in <code>lldb</code>, and then debug as usual.</p></div><div class=paragraph><p>For that to work well, the code that calls <code>fork</code> to create the child needs to do something like the following (courtesy of the <code>gdb</code> info pages):</p></div><div class="literalblock programlisting"><div class=content><pre>...
if ((pid = fork()) &lt; 0)		/* _Always_ check this */
	error();
else if (pid == 0) {		/* child */
	int PauseMode = 1;

	while (PauseMode)
		sleep(10);	/* Wait until someone attaches to us */
	...
} else {			/* parent */
	...</pre></div></div><div class=paragraph><p>Now all that is needed is to attach to the child, set PauseMode to <code>0</code> with <code>expr PauseMode = 0</code> and wait for the <code>sleep()</code> call to return.</p></div></div></div><div class=sect2><h3 id=_remote_debugging_using_lldb>2.6.3. Remote Debugging Using LLDB<a class=anchor href=#_remote_debugging_using_lldb></a></h3><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The described functionality is available starting with LLDB version 12.0.0.
Users of FreeBSD releases containing an earlier LLDB version may wish to use the snapshot available in <a href=https://docs.freebsd.org/en/books/handbook/#ports-using>ports or packages</a>, as <a class=package href=https://cgit.freebsd.org/ports/tree/devel/llvm-devel/>devel/llvm-devel</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Starting with LLDB 12.0.0, remote debugging is supported on FreeBSD.
This means that <code>lldb-server</code> can be started to debug a program on one host, while the interactive <code>lldb</code> client connects to it from another one.</p></div><div class=paragraph><p>To launch a new process to be debugged remotely, run <code>lldb-server</code> on the remote server by typing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% lldb-server g host:port <span class=nt>--</span> progname</code></pre></div></div><div class=paragraph><p>The process will be stopped immediately after launching, and <code>lldb-server</code> will wait for the client to connect.</p></div><div class=paragraph><p>Start <code>lldb</code> locally and type the following command to connect to the remote server:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>lldb<span class=o>)</span> gdb-remote host:port</code></pre></div></div><div class=paragraph><p><code>lldb-server</code> can also attach to a running process.
To do that, type the following on the remote server:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% lldb-server g host:port <span class=nt>--attach</span> pid-or-name</code></pre></div></div></div><div class=sect2><h3 id=_using_gdb>2.6.4. Using gdb<a class=anchor href=#_using_gdb></a></h3><div class=sect3><h4 id=_starting_gdb>2.6.4.1. Starting gdb<a class=anchor href=#_starting_gdb></a></h4><div class=paragraph><p>Start up gdb by typing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% gdb progname</code></pre></div></div><div class=paragraph><p>although many people prefer to run it inside Emacs.
To do this, type:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash> M-x gdb RET progname RET</code></pre></div></div><div class=paragraph><p>Finally, for those finding its text-based command-prompt style off-putting, there is a graphical front-end for it (<a class=package href=https://cgit.freebsd.org/ports/tree/devel/xxgdb/>devel/xxgdb</a>) in the Ports Collection.</p></div></div><div class=sect3><h4 id=_running_a_program_with_gdb>2.6.4.2. Running a Program with gdb<a class=anchor href=#_running_a_program_with_gdb></a></h4><div class=paragraph><p>Compile the program with <code>-g</code> to get the most out of using <code>gdb</code>.
It will work without, but will only display the name of the function currently running, instead of the source code.
A line like:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>... <span class=o>(</span>no debugging symbols found<span class=o>)</span> ...</code></pre></div></div><div class=paragraph><p>when <code>gdb</code> starts up means that the program was not compiled with <code>-g</code>.</p></div><div class=paragraph><p>At the <code>gdb</code> prompt, type <code>break main</code>.
This will tell the debugger to skip the preliminary set-up code in the program being run and to stop execution at the beginning of the program’s code.
Now type <code>run</code> to start the program- it will start at the beginning of the set-up code and then get stopped by the debugger when it calls <code>main()</code>.</p></div><div class=paragraph><p>To step through the program a line at a time, press <code>n</code>.
When at a function call, step into it by pressing <code>s</code>.
Once in a function call, return from it by pressing <code>f</code>, or use <code>up</code> and <code>down</code> to take a quick look at the caller.</p></div><div class=paragraph><p>Here is a simple example of how to spot a mistake in a program with <code>gdb</code>.
This is our program (with a deliberate mistake):</p></div><div class="literalblock programlisting"><div class=content><pre>#include &lt;stdio.h&gt;

int bazz(int anint);

main() {
	int i;

	printf(&#34;This is my program\n&#34;);
	bazz(i);
	return 0;
}

int bazz(int anint) {
	printf(&#34;You gave me %d\n&#34;, anint);
	return anint;
}</pre></div></div><div class=paragraph><p>This program sets i to be <code>5</code> and passes it to a function <code>bazz()</code> which prints out the number we gave it.</p></div><div class=paragraph><p>Compiling and running the program displays</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% cc <span class=nt>-g</span> <span class=nt>-o</span> temp temp.c
% ./temp
This is my program
anint <span class=o>=</span> 4231</code></pre></div></div><div class=paragraph><p>That was not what we expected! Time to see what is going on!</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% gdb temp
GDB is free software and you are welcome to distribute copies of it
 under certain conditions<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show copying&#34;</span> to see the conditions.
There is absolutely no warranty <span class=k>for </span>GDB<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show warranty&#34;</span> <span class=k>for </span>details.
GDB 4.13 <span class=o>(</span>i386-unknown-freebsd<span class=o>)</span>, Copyright 1994 Free Software Foundation, Inc.
<span class=o>(</span>gdb<span class=o>)</span> <span class=nb>break </span>main				Skip the set-up code
Breakpoint 1 at 0x160f: file temp.c, line 9.	gdb puts breakpoint at main<span class=o>()</span>
<span class=o>(</span>gdb<span class=o>)</span> run					Run as far as main<span class=o>()</span>
Starting program: /home/james/tmp/temp		Program starts running

Breakpoint 1, main <span class=o>()</span> at temp.c:9		gdb stops at main<span class=o>()</span>
<span class=o>(</span>gdb<span class=o>)</span> n						Go to next line
This is my program				Program prints out
<span class=o>(</span>gdb<span class=o>)</span> s						step into bazz<span class=o>()</span>
bazz <span class=o>(</span><span class=nv>anint</span><span class=o>=</span>4231<span class=o>)</span> at temp.c:17			gdb displays stack frame
<span class=o>(</span>gdb<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Hang on a minute! How did anint get to be <code>4231</code>? Was it not set to <code>5</code> in <code>main()</code>? Let us move up to <code>main()</code> and have a look.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>gdb<span class=o>)</span> up					Move up call stack
<span class=c>#1  0x1625 in main () at temp.c:11		gdb displays stack frame</span>
<span class=o>(</span>gdb<span class=o>)</span> p i					Show us the value of i
<span class=nv>$1</span> <span class=o>=</span> 4231					gdb displays 4231</code></pre></div></div><div class=paragraph><p>Oh dear! Looking at the code, we forgot to initialize i.
We meant to put</p></div><div class="literalblock programlisting"><div class=content><pre>...
main() {
	int i;

	i = 5;
	printf(&#34;This is my program\n&#34;);
...</pre></div></div><div class=paragraph><p>but we left the <code>i=5;</code> line out.
As we did not initialize i, it had whatever number happened to be in that area of memory when the program ran,
which in this case happened to be <code>4231</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>gdb</code> command displays the stack frame every time we go into or out of a function, even if we are using <code>up</code> and <code>down</code> to move around the call stack.
This shows the name of the function and the values of its arguments, which helps us keep track of where we are and what is going on.
(The stack is a storage area where the program stores information about the arguments passed to functions and where to go when it returns from a function call.)</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_examining_a_core_file_with_gdb>2.6.4.3. Examining a Core File with gdb<a class=anchor href=#_examining_a_core_file_with_gdb></a></h4><div class=paragraph><p>A core file is basically a file which contains the complete state of the process when it crashed.
In "the good old days", programmers had to print out hex listings of core files and sweat over machine code manuals, but now life is a bit easier.
Incidentally, under FreeBSD and other 4.4BSD systems, a core file is called <span class=filename>progname.core</span> instead of just <span class=filename>core</span>, to make it clearer which program a core file belongs to.</p></div><div class=paragraph><p>To examine a core file, start up <code>gdb</code> in the usual way.
Instead of typing <code>break</code> or <code>run</code>, type</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>gdb<span class=o>)</span> core progname.core</code></pre></div></div><div class=paragraph><p>If the core file is not in the current directory, type <code>dir /path/to/core/file</code> first.</p></div><div class=paragraph><p>The debugger should display something like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% gdb <span class=o><span class="</span>.filename">progname</span>
GDB is free software and you are welcome to distribute copies of it
 under certain conditions<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show copying&#34;</span> to see the conditions.
There is absolutely no warranty <span class=k>for </span>GDB<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show warranty&#34;</span> <span class=k>for </span>details.
GDB 4.13 <span class=o>(</span>i386-unknown-freebsd<span class=o>)</span>, Copyright 1994 Free Software Foundation, Inc.
<span class=o>(</span>gdb<span class=o>)</span> core <span class=o><span class="</span>.filename">progname.core</span>
Core was generated by <span class=sb>`</span><span class=o><span class="</span>.filename">progname</span><span class=s1>&#39;.
Program terminated with signal 11, Segmentation fault.
Cannot access memory at address 0x7020796d.
#0  0x164a in bazz (anint=0x5) at temp.c:17
(gdb)</span></span></span></span></code></pre></div></div><div class=paragraph><p>In this case, the program was called <span class=filename>progname</span>, so the core file is called <span class=filename>progname.core</span>.
We can see that the program crashed due to trying to access an area in memory that was not available to it in a function called <code>bazz</code>.</p></div><div class=paragraph><p>Sometimes it is useful to be able to see how a function was called,
as the problem could have occurred a long way up the call stack in a complex program.
<code>bt</code> causes <code>gdb</code> to print out a back-trace of the call stack:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>gdb<span class=o>)</span> bt
<span class=c>#0  0x164a in bazz (anint=0x5) at temp.c:17</span>
<span class=c>#1  0xefbfd888 in end ()</span>
<span class=c>#2  0x162c in main () at temp.c:11</span>
<span class=o>(</span>gdb<span class=o>)</span></code></pre></div></div><div class=paragraph><p>The <code>end()</code> function is called when a program crashes;
in this case, the <code>bazz()</code> function was called from <code>main()</code>.</p></div></div><div class=sect3><h4 id=_attaching_to_a_running_program_with_gdb>2.6.4.4. Attaching to a Running Program with gdb<a class=anchor href=#_attaching_to_a_running_program_with_gdb></a></h4><div class=paragraph><p>One of the neatest features about <code>gdb</code> is that it can attach to a program that is already running.
Of course, that requires sufficient permissions to do so.
A common problem is stepping through a program that forks and wanting to trace the child, but the debugger will only trace the parent.</p></div><div class=paragraph><p>To do that, start up another <code>gdb</code>, use <code>ps</code> to find the process ID for the child, and do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=o>(</span>gdb<span class=o>)</span> attach pid</code></pre></div></div><div class=paragraph><p>in <code>gdb</code>, and then debug as usual.</p></div><div class=paragraph><p>For that to work well, the code that calls <code>fork</code> to create the child needs to do something like the following (courtesy of the <code>gdb</code> info pages):</p></div><div class="literalblock programlisting"><div class=content><pre>...
if ((pid = fork()) &lt; 0)		/* _Always_ check this */
	error();
else if (pid == 0) {		/* child */
	int PauseMode = 1;

	while (PauseMode)
		sleep(10);	/* Wait until someone attaches to us */
	...
} else {			/* parent */
	...</pre></div></div><div class=paragraph><p>Now all that is needed is to attach to the child, set PauseMode to <code>0</code>, and wait for the <code>sleep()</code> call to return!</p></div></div></div></div></div><div class=sect1><h2 id=emacs>2.7. Using Emacs as a Development Environment<a class=anchor href=#emacs></a></h2><div class=sectionbody><div class=sect2><h3 id=_emacs>2.7.1. Emacs<a class=anchor href=#_emacs></a></h3><div class=paragraph><p>Emacs is a highly customizable editor-indeed, it has been customized to the point where it is more like an operating system than an editor!
Many developers and sysadmins do in fact spend practically all their time working inside Emacs, leaving it only to log out.</p></div><div class=paragraph><p>It is impossible even to summarize everything Emacs can do here, but here are some of the features of interest to developers:</p></div><div class=ulist><ul><li><p>Very powerful editor, allowing search-and-replace on both strings and regular expressions (patterns), jumping to start/end of block expression, etc, etc.</p></li><li><p>Pull-down menus and online help.</p></li><li><p>Language-dependent syntax highlighting and indentation.</p></li><li><p>Completely customizable.</p></li><li><p>You can compile and debug programs within Emacs.</p></li><li><p>On a compilation error, you can jump to the offending line of source code.</p></li><li><p>Friendly-ish front-end to the <code>info</code> program used for reading GNU hypertext documentation, including the documentation on Emacs itself.</p></li><li><p>Friendly front-end to <code>gdb</code>, allowing you to look at the source code as you step through your program.</p></li></ul></div><div class=paragraph><p>And doubtless many more that have been overlooked.</p></div><div class=paragraph><p>Emacs can be installed on FreeBSD using the <a class=package href=https://cgit.freebsd.org/ports/tree/editors/emacs/>editors/emacs</a> port.</p></div><div class=paragraph><p>Once it is installed, start it up and do <code>C-h t</code> to read an Emacs tutorial-that means hold down <kbd>control</kbd>, press <kbd>h</kbd>, let go of <kbd>control</kbd>, and then press <kbd>t</kbd>.
(Alternatively, you can use the mouse to select <span class=guimenuitem>Emacs Tutorial</span> from the <b class=menuref>Help</b> menu.)</p></div><div class=paragraph><p>Although Emacs does have menus, it is well worth learning the key bindings,
as it is much quicker when you are editing something to press a couple of keys than to try to find the mouse and then click on the right place.
And, when you are talking to seasoned Emacs users, you will find they often casually throw around expressions like “M-x replace-s RET foo RET bar RET” so it is useful to know what they mean.
And in any case, Emacs has far too many useful functions for them to all fit on the menu bars.</p></div><div class=paragraph><p>Fortunately, it is quite easy to pick up the key-bindings, as they are displayed next to the menu item.
My advice is to use the menu item for, say, opening a file until you understand how it works and feel confident with it, then try doing C-x C-f.
When you are happy with that, move on to another menu command.</p></div><div class=paragraph><p>If you cannot remember what a particular combination of keys does, select <span class=guimenuitem>Describe Key</span> from the <b class=menuref>Help</b> menu and type it in-Emacs will tell you what it does.
You can also use the <span class=guimenuitem>Command Apropos</span> menu item to find out all the commands which contain a particular word in them, with the key binding next to it.</p></div><div class=paragraph><p>By the way, the expression above means hold down the <kbd>Meta</kbd> key, press <kbd>x</kbd>, release the <kbd>Meta</kbd> key, type <code>replace-s</code> (short for <code>replace-string</code>-another feature of Emacs is that you can abbreviate commands), press the <kbd>return</kbd> key, type <code>foo</code> (the string you want replaced), press the <kbd>return</kbd> key, type bar (the string you want to replace <code>foo</code> with) and press <kbd>return</kbd> again.
Emacs will then do the search-and-replace operation you have just requested.</p></div><div class=paragraph><p>If you are wondering what on earth <kbd>Meta</kbd> is, it is a special key that many UNIX® workstations have.
Unfortunately, PC’s do not have one, so it is usually <kbd>alt</kbd> (or if you are unlucky, the <kbd>escape</kbd> key).</p></div><div class=paragraph><p>Oh, and to get out of Emacs, do <code>C-x C-c</code> (that means hold down the <kbd>control</kbd> key, press <kbd>x</kbd>, press <kbd>c</kbd> and release the <kbd>control</kbd> key).
If you have any unsaved files open, Emacs will ask you if you want to save them.
(Ignore the bit in the documentation where it says <code>C-z</code> is the usual way to leave Emacs-that leaves Emacs hanging around in the background, and is only really useful if you are on a system which does not have virtual terminals).</p></div></div><div class=sect2><h3 id=_configuring_emacs>2.7.2. Configuring Emacs<a class=anchor href=#_configuring_emacs></a></h3><div class=paragraph><p>Emacs does many wonderful things; some of them are built in, some of them need to be configured.</p></div><div class=paragraph><p>Instead of using a proprietary macro language for configuration, Emacs uses a version of Lisp specially adapted for editors, known as Emacs Lisp.
Working with Emacs Lisp can be quite helpful if you want to go on and learn something like Common Lisp.
Emacs Lisp has many features of Common Lisp, although it is considerably smaller (and thus easier to master).</p></div><div class=paragraph><p>The best way to learn Emacs Lisp is to read the online <a href=https://www.gnu.org/software/emacs/manual/elisp.html>Emacs Reference</a> manual.</p></div><div class=paragraph><p>However, there is no need to actually know any Lisp to get started with configuring Emacs,
as I have included a sample <span class=filename>.emacs</span>, which should be enough to get you started.
Just copy it into your home directory and restart Emacs if it is already running;
it will read the commands from the file and (hopefully) give you a useful basic setup.</p></div></div><div class=sect2><h3 id=_a_sample_emacs>2.7.3. A Sample <span class=filename>.emacs</span><a class=anchor href=#_a_sample_emacs></a></h3><div class=paragraph><p>Unfortunately, there is far too much here to explain it in detail; however there are one or two points worth mentioning.</p></div><div class=ulist><ul><li><p>Everything beginning with a <code>;</code> is a comment and is ignored by Emacs.</p></li><li><p>In the first line, the <code>-<strong>- Emacs-Lisp -</strong>-</code> is so that we can edit <span class=filename>.emacs</span> itself within Emacs and get all the fancy features for editing Emacs Lisp. Emacs usually tries to guess this based on the filename, and may not get it right for <span class=filename>.emacs</span>.</p></li><li><p>The <kbd>tab</kbd> key is bound to an indentation function in some modes, so when you press the tab key, it will indent the current line of code. If you want to put a tab character in whatever you are writing, hold the <kbd>control</kbd> key down while you are pressing the <kbd>tab</kbd> key.</p></li><li><p>This file supports syntax highlighting for C, C++, Perl, Lisp and Scheme, by guessing the language from the filename.</p></li><li><p>Emacs already has a pre-defined function called <code>next-error</code>. In a compilation output window, this allows you to move from one compilation error to the next by doing <code>M-n</code>; we define a complementary function, <code>previous-error</code>, that allows you to go to a previous error by doing <code>M-p</code>. The nicest feature of all is that <code>C-c C-c</code> will open up the source file in which the error occurred and jump to the appropriate line.</p></li><li><p>We enable Emacs’s ability to act as a server, so that if you are doing something outside Emacs and you want to edit a file, you can just type in</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% emacsclient filename</code></pre></div></div><div class=paragraph><p>and then you can edit the file in your Emacs!<sup class=footnote>[<a id=_footnoteref_6 class=footnote href=#_footnotedef_6 title="View footnote.">6</a>]</sup></p></div></li></ul></div><div class=exampleblock><div class=title>Example 1. A Sample <span class=filename>.emacs</span></div><div class=content><div class="literalblock programlisting"><div class=content><pre>;; -*-Emacs-Lisp-*-

;; This file is designed to be re-evaled; use the variable first-time
;; to avoid any problems with this.
(defvar first-time t
  &#34;Flag signifying this is the first time that .emacs has been evaled&#34;)

;; Meta
(global-set-key &#34;\M- &#34; &#39;set-mark-command)
(global-set-key &#34;\M-\C-h&#34; &#39;backward-kill-word)
(global-set-key &#34;\M-\C-r&#34; &#39;query-replace)
(global-set-key &#34;\M-r&#34; &#39;replace-string)
(global-set-key &#34;\M-g&#34; &#39;goto-line)
(global-set-key &#34;\M-h&#34; &#39;help-command)

;; Function keys
(global-set-key [f1] &#39;manual-entry)
(global-set-key [f2] &#39;info)
(global-set-key [f3] &#39;repeat-complex-command)
(global-set-key [f4] &#39;advertised-undo)
(global-set-key [f5] &#39;eval-current-buffer)
(global-set-key [f6] &#39;buffer-menu)
(global-set-key [f7] &#39;other-window)
(global-set-key [f8] &#39;find-file)
(global-set-key [f9] &#39;save-buffer)
(global-set-key [f10] &#39;next-error)
(global-set-key [f11] &#39;compile)
(global-set-key [f12] &#39;grep)
(global-set-key [C-f1] &#39;compile)
(global-set-key [C-f2] &#39;grep)
(global-set-key [C-f3] &#39;next-error)
(global-set-key [C-f4] &#39;previous-error)
(global-set-key [C-f5] &#39;display-faces)
(global-set-key [C-f8] &#39;dired)
(global-set-key [C-f10] &#39;kill-compilation)

;; Keypad bindings
(global-set-key [up] &#34;\C-p&#34;)
(global-set-key [down] &#34;\C-n&#34;)
(global-set-key [left] &#34;\C-b&#34;)
(global-set-key [right] &#34;\C-f&#34;)
(global-set-key [home] &#34;\C-a&#34;)
(global-set-key [end] &#34;\C-e&#34;)
(global-set-key [prior] &#34;\M-v&#34;)
(global-set-key [next] &#34;\C-v&#34;)
(global-set-key [C-up] &#34;\M-\C-b&#34;)
(global-set-key [C-down] &#34;\M-\C-f&#34;)
(global-set-key [C-left] &#34;\M-b&#34;)
(global-set-key [C-right] &#34;\M-f&#34;)
(global-set-key [C-home] &#34;\M-&lt;&#34;)
(global-set-key [C-end] &#34;\M-&gt;&#34;)
(global-set-key [C-prior] &#34;\M-&lt;&#34;)
(global-set-key [C-next] &#34;\M-&gt;&#34;)

;; Mouse
(global-set-key [mouse-3] &#39;imenu)

;; Misc
(global-set-key [C-tab] &#34;\C-q\t&#34;)	; Control tab quotes a tab.
(setq backup-by-copying-when-mismatch t)

;; Treat &#39;y&#39; or &lt;CR&gt; as yes, &#39;n&#39; as no.
(fset &#39;yes-or-no-p &#39;y-or-n-p)
(define-key query-replace-map [return] &#39;act)
(define-key query-replace-map [?\C-m] &#39;act)

;; Load packages
(require &#39;desktop)
(require &#39;tar-mode)

;; Pretty diff mode
(autoload &#39;ediff-buffers &#34;ediff&#34; &#34;Intelligent Emacs interface to diff&#34; t)
(autoload &#39;ediff-files &#34;ediff&#34; &#34;Intelligent Emacs interface to diff&#34; t)
(autoload &#39;ediff-files-remote &#34;ediff&#34;
  &#34;Intelligent Emacs interface to diff&#34;)

(if first-time
    (setq auto-mode-alist
	  (append &#39;((&#34;\\.cpp$&#34; . c++-mode)
		    (&#34;\\.hpp$&#34; . c++-mode)
		    (&#34;\\.lsp$&#34; . lisp-mode)
		    (&#34;\\.scm$&#34; . scheme-mode)
		    (&#34;\\.pl$&#34; . perl-mode)
		    ) auto-mode-alist)))

;; Auto font lock mode
(defvar font-lock-auto-mode-list
  (list &#39;c-mode &#39;c++-mode &#39;c++-c-mode &#39;emacs-lisp-mode &#39;lisp-mode &#39;perl-mode &#39;scheme-mode)
  &#34;List of modes to always start in font-lock-mode&#34;)

(defvar font-lock-mode-keyword-alist
  &#39;((c++-c-mode . c-font-lock-keywords)
    (perl-mode . perl-font-lock-keywords))
  &#34;Associations between modes and keywords&#34;)

(defun font-lock-auto-mode-select ()
  &#34;Automatically select font-lock-mode if the current major mode is in font-lock-auto-mode-list&#34;
  (if (memq major-mode font-lock-auto-mode-list)
      (progn
	(font-lock-mode t))
    )
  )

(global-set-key [M-f1] &#39;font-lock-fontify-buffer)

;; New dabbrev stuff
;(require &#39;new-dabbrev)
(setq dabbrev-always-check-other-buffers t)
(setq dabbrev-abbrev-char-regexp &#34;\\sw\\|\\s_&#34;)
(add-hook &#39;emacs-lisp-mode-hook
	  &#39;(lambda ()
	     (set (make-local-variable &#39;dabbrev-case-fold-search) nil)
	     (set (make-local-variable &#39;dabbrev-case-replace) nil)))
(add-hook &#39;c-mode-hook
	  &#39;(lambda ()
	     (set (make-local-variable &#39;dabbrev-case-fold-search) nil)
	     (set (make-local-variable &#39;dabbrev-case-replace) nil)))
(add-hook &#39;text-mode-hook
	  &#39;(lambda ()
	     (set (make-local-variable &#39;dabbrev-case-fold-search) t)
	     (set (make-local-variable &#39;dabbrev-case-replace) t)))

;; C++ and C mode...
(defun my-c++-mode-hook ()
  (setq tab-width 4)
  (define-key c++-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (define-key c++-mode-map &#34;\C-ce&#34; &#39;c-comment-edit)
  (setq c++-auto-hungry-initial-state &#39;none)
  (setq c++-delete-function &#39;backward-delete-char)
  (setq c++-tab-always-indent t)
  (setq c-indent-level 4)
  (setq c-continued-statement-offset 4)
  (setq c++-empty-arglist-indent 4))

(defun my-c-mode-hook ()
  (setq tab-width 4)
  (define-key c-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (define-key c-mode-map &#34;\C-ce&#34; &#39;c-comment-edit)
  (setq c-auto-hungry-initial-state &#39;none)
  (setq c-delete-function &#39;backward-delete-char)
  (setq c-tab-always-indent t)
;; BSD-ish indentation style
  (setq c-indent-level 4)
  (setq c-continued-statement-offset 4)
  (setq c-brace-offset -4)
  (setq c-argdecl-indent 0)
  (setq c-label-offset -4))

;; Perl mode
(defun my-perl-mode-hook ()
  (setq tab-width 4)
  (define-key c++-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (setq perl-indent-level 4)
  (setq perl-continued-statement-offset 4))

;; Scheme mode...
(defun my-scheme-mode-hook ()
  (define-key scheme-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent))

;; Emacs-Lisp mode...
(defun my-lisp-mode-hook ()
  (define-key lisp-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (define-key lisp-mode-map &#34;\C-i&#34; &#39;lisp-indent-line)
  (define-key lisp-mode-map &#34;\C-j&#34; &#39;eval-print-last-sexp))

;; Add all of the hooks...
(add-hook &#39;c++-mode-hook &#39;my-c++-mode-hook)
(add-hook &#39;c-mode-hook &#39;my-c-mode-hook)
(add-hook &#39;scheme-mode-hook &#39;my-scheme-mode-hook)
(add-hook &#39;emacs-lisp-mode-hook &#39;my-lisp-mode-hook)
(add-hook &#39;lisp-mode-hook &#39;my-lisp-mode-hook)
(add-hook &#39;perl-mode-hook &#39;my-perl-mode-hook)

;; Complement to next-error
(defun previous-error (n)
  &#34;Visit previous compilation error message and corresponding source code.&#34;
  (interactive &#34;p&#34;)
  (next-error (- n)))

;; Misc...
(transient-mark-mode 1)
(setq mark-even-if-inactive t)
(setq visible-bell nil)
(setq next-line-add-newlines nil)
(setq compile-command &#34;make&#34;)
(setq suggest-key-bindings nil)
(put &#39;eval-expression &#39;disabled nil)
(put &#39;narrow-to-region &#39;disabled nil)
(put &#39;set-goal-column &#39;disabled nil)
(if (&gt;= emacs-major-version 21)
	(setq show-trailing-whitespace t))

;; Elisp archive searching
(autoload &#39;format-lisp-code-directory &#34;lispdir&#34; nil t)
(autoload &#39;lisp-dir-apropos &#34;lispdir&#34; nil t)
(autoload &#39;lisp-dir-retrieve &#34;lispdir&#34; nil t)
(autoload &#39;lisp-dir-verify &#34;lispdir&#34; nil t)

;; Font lock mode
(defun my-make-face (face color &amp;optional bold)
  &#34;Create a face from a color and optionally make it bold&#34;
  (make-face face)
  (copy-face &#39;default face)
  (set-face-foreground face color)
  (if bold (make-face-bold face))
  )

(if (eq window-system &#39;x)
    (progn
      (my-make-face &#39;blue &#34;blue&#34;)
      (my-make-face &#39;red &#34;red&#34;)
      (my-make-face &#39;green &#34;dark green&#34;)
      (setq font-lock-comment-face &#39;blue)
      (setq font-lock-string-face &#39;bold)
      (setq font-lock-type-face &#39;bold)
      (setq font-lock-keyword-face &#39;bold)
      (setq font-lock-function-name-face &#39;red)
      (setq font-lock-doc-string-face &#39;green)
      (add-hook &#39;find-file-hooks &#39;font-lock-auto-mode-select)

      (setq baud-rate 1000000)
      (global-set-key &#34;\C-cmm&#34; &#39;menu-bar-mode)
      (global-set-key &#34;\C-cms&#34; &#39;scroll-bar-mode)
      (global-set-key [backspace] &#39;backward-delete-char)
					;      (global-set-key [delete] &#39;delete-char)
      (standard-display-european t)
      (load-library &#34;iso-transl&#34;)))

;; X11 or PC using direct screen writes
(if window-system
    (progn
      ;;      (global-set-key [M-f1] &#39;hilit-repaint-command)
      ;;      (global-set-key [M-f2] [?\C-u M-f1])
      (setq hilit-mode-enable-list
	    &#39;(not text-mode c-mode c++-mode emacs-lisp-mode lisp-mode
		  scheme-mode)
	    hilit-auto-highlight nil
	    hilit-auto-rehighlight &#39;visible
	    hilit-inhibit-hooks nil
	    hilit-inhibit-rebinding t)
      (require &#39;hilit19)
      (require &#39;paren))
  (setq baud-rate 2400)			; For slow serial connections
  )

;; TTY type terminal
(if (and (not window-system)
	 (not (equal system-type &#39;ms-dos)))
    (progn
      (if first-time
	  (progn
	    (keyboard-translate ?\C-h ?\C-?)
	    (keyboard-translate ?\C-? ?\C-h)))))

;; Under UNIX
(if (not (equal system-type &#39;ms-dos))
    (progn
      (if first-time
	  (server-start))))

;; Add any face changes here
(add-hook &#39;term-setup-hook &#39;my-term-setup-hook)
(defun my-term-setup-hook ()
  (if (eq window-system &#39;pc)
      (progn
;;	(set-face-background &#39;default &#34;red&#34;)
	)))

;; Restore the &#34;desktop&#34; - do this as late as possible
(if first-time
    (progn
      (desktop-load-default)
      (desktop-read)))

;; Indicate that this file has been read at least once
(setq first-time nil)

;; No need to debug anything now

(setq debug-on-error nil)

;; All done
(message &#34;All done, %s%s&#34; (user-login-name) &#34;.&#34;)</pre></div></div></div></div></div><div class=sect2><h3 id=_extending_the_range_of_languages_emacs_understands>2.7.4. Extending the Range of Languages Emacs Understands<a class=anchor href=#_extending_the_range_of_languages_emacs_understands></a></h3><div class=paragraph><p>Now, this is all very well if you only want to program in the languages already catered for in <span class=filename>.emacs</span> (C, C++, Perl, Lisp and Scheme), but what happens if a new language called "whizbang" comes out, full of exciting features?</p></div><div class=paragraph><p>The first thing to do is find out if whizbang comes with any files that tell Emacs about the language.
These usually end in <span class=filename>.el</span>, short for "Emacs Lisp".
For example, if whizbang is a FreeBSD port, we can locate these files by doing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>% find /usr/ports/lang/whizbang <span class=nt>-name</span> <span class=s2>&#34;*.el&#34;</span> <span class=nt>-print</span></code></pre></div></div><div class=paragraph><p>and install them by copying them into the Emacs site Lisp directory.
On FreeBSD, this is <span class=filename>/usr/local/share/emacs/site-lisp</span>.</p></div><div class=paragraph><p>So for example, if the output from the find command was</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash>/usr/ports/lang/whizbang/work/misc/whizbang.el</code></pre></div></div><div class=paragraph><p>we would do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=c># cp /usr/ports/lang/whizbang/work/misc/whizbang.el /usr/local/share/emacs/site-lisp</span></code></pre></div></div><div class=paragraph><p>Next, we need to decide what extension whizbang source files have.
Let us say for the sake of argument that they all end in <span class=filename>.wiz</span>.
We need to add an entry to our <span class=filename>.emacs</span> to make sure Emacs will be able to use the information in <span class=filename>whizbang.el</span>.</p></div><div class=paragraph><p>Find the auto-mode-alist entry in <span class=filename>.emacs</span> and add a line for whizbang, such as:</p></div><div class="literalblock programlisting"><div class=content><pre>...
(&#34;\\.lsp$&#34; . lisp-mode)
(&#34;\\.wiz$&#34; . whizbang-mode)
(&#34;\\.scm$&#34; . scheme-mode)
...</pre></div></div><div class=paragraph><p>This means that Emacs will automatically go into <code>whizbang-mode</code> when you edit a file ending in <span class=filename>.wiz</span>.</p></div><div class=paragraph><p>Just below this, you will find the font-lock-auto-mode-list entry.
Add <code>whizbang-mode</code> to it like so:</p></div><div class="literalblock programlisting"><div class=content><pre>;; Auto font lock mode
(defvar font-lock-auto-mode-list
  (list &#39;c-mode &#39;c++-mode &#39;c++-c-mode &#39;emacs-lisp-mode &#39;whizbang-mode &#39;lisp-mode &#39;perl-mode &#39;scheme-mode)
  &#34;List of modes to always start in font-lock-mode&#34;)</pre></div></div><div class=paragraph><p>This means that Emacs will always enable <code>font-lock-mode</code> (ie syntax highlighting) when editing a <span class=filename>.wiz</span> file.</p></div><div class=paragraph><p>And that is all that is needed. If there is anything else you want done automatically when you open up <span class=filename>.wiz</span>,
you can add a <code>whizbang-mode hook</code> (see <code>my-scheme-mode-hook</code> for a simple example that adds <code>auto-indent</code>).</p></div></div></div></div><div class=sect1><h2 id=tools-reading>2.8. Further Reading<a class=anchor href=#tools-reading></a></h2><div class=sectionbody><div class=paragraph><p>For information about setting up a development environment for contributing fixes to FreeBSD itself, please see <a href="https://man.freebsd.org/cgi/man.cgi?query=development&amp;sektion=7&amp;format=html">development(7)</a>.</p></div><div class=ulist><ul><li><p>Brian Harvey and Matthew Wright <em>Simply Scheme</em> MIT 1994. ISBN 0-262-08226-8</p></li><li><p>Randall Schwartz <em>Learning Perl</em> O’Reilly 1993 ISBN 1-56592-042-2</p></li><li><p>Patrick Henry Winston and Berthold Klaus Paul Horn <em>Lisp (3rd Edition)</em> Addison-Wesley 1989 ISBN 0-201-08319-1</p></li><li><p>Brian W. Kernighan and Rob Pike <em>The Unix Programming Environment</em> Prentice-Hall 1984 ISBN 0-13-937681-X</p></li><li><p>Brian W. Kernighan and Dennis M. Ritchie <em>The C Programming Language (2nd Edition)</em> Prentice-Hall 1988 ISBN 0-13-110362-8</p></li><li><p>Bjarne Stroustrup <em>The C++ Programming Language</em> Addison-Wesley 1991 ISBN 0-201-53992-6</p></li><li><p>W. Richard Stevens <em>Advanced Programming in the Unix Environment</em> Addison-Wesley 1992 ISBN 0-201-56317-7</p></li><li><p>W. Richard Stevens <em>Unix Network Programming</em> Prentice-Hall 1990 ISBN 0-13-949876-1</p></li></ul></div></div></div><div id=footnotes><hr><div class=footnote id=_footnotedef_1><a href=#_footnoteref_1>1</a>. If you run it in the shell, you may get a core dump.</div><div class=footnote id=_footnotedef_2><a href=#_footnoteref_2>2</a>. In case you did not know, a binary sort is an efficient way of sorting things into order and a bubble sort is not.</div><div class=footnote id=_footnotedef_3><a href=#_footnoteref_3>3</a>. The reasons for this are buried in the mists of history.</div><div class=footnote id=_footnotedef_4><a href=#_footnoteref_4>4</a>. Note, we did not use the -o flag to specify the executable name, so we will get an executable called a.out. Producing a debug version called foobar is left as an exercise for the reader!</div><div class=footnote id=_footnotedef_5><a href=#_footnoteref_5>5</a>. They do not use the MAKEFILE form as block capitals are often used for documentation files like README.</div><div class=footnote id=_footnotedef_6><a href=#_footnoteref_6>6</a>. Many Emacs users set their EDITOR environment to emacsclient so this happens every time they need to edit a file.</div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: September 20, 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=2d2f5d38cc" target=_blank>Fernando Apesteguía</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/en/books/developers-handbook/introduction class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/en/books/developers-handbook/secure class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#tools-synopsis>2.1. Synopsis</a></li><li><a href=#tools-intro>2.2. Introduction</a></li><li><a href=#tools-programming>2.3. Introduction to Programming</a></li><li><a href=#tools-compiling>2.4. Compiling with <code>cc</code></a></li><li><a href=#tools-make>2.5. Make</a></li><li><a href=#debugging>2.6. Debugging</a></li><li><a href=#emacs>2.7. Using Emacs as a Development Environment</a></li><li><a href=#tools-reading>2.8. Further Reading</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/en/books/developers-handbook/developers-handbook_en.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/en/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/en/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>English</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/en class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/en/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>