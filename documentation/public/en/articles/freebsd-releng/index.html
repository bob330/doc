<!doctype html><html class=theme-light lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Describes the approach used by the FreeBSD release engineering team to make production quality releases of the FreeBSD Operating System. It describes the tools available for those interested in producing customized FreeBSD releases for corporate rollouts or commercial productization"><meta name=keywords content="releases,engineering,process,FreeBSD"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/en/articles/freebsd-releng/><title>FreeBSD Release Engineering | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="FreeBSD Release Engineering"><meta property="og:description" content="Describes the approach used by the FreeBSD release engineering team to make production quality releases of the FreeBSD Operating System. It describes the tools available for those interested in producing customized FreeBSD releases for corporate rollouts or commercial productization"><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="en"><meta property="og:url" content="https://docs.freebsd.org/en/articles/freebsd-releng/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/en\/articles\/freebsd-releng\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/en>Documentation portal</a></li><li><a href=https://docs.freebsd.org/en/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/en/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/en/books>Books</a></li><li><a href=https://docs.freebsd.org/en/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/en/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=en>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><main class=main-wrapper-article><div class=article><h1 class=title>FreeBSD Release Engineering</h1><div class=legalnotice><a id=trademarks></a><details><summary>trademarks</summary><p>FreeBSD is a registered trademark of the FreeBSD Foundation.</p><p>Git and the Git logo are either registered trademarks or trademarks of Software Freedom Conservancy, Inc., corporate home of the Git Project, in the United States and/or other countries.</p><p>Intel, Celeron, Centrino, Core, EtherExpress, i386, i486, Itanium, Pentium, and Xeon are trademarks or registered trademarks of Intel Corporation or its subsidiaries in the United States and other countries.</p><p>Many of the designations used by manufacturers and sellers to distinguish their products are claimed as trademarks. Where those designations appear in this document, and the FreeBSD Project was aware of the trademark claim, the designations have been followed by the “™” or the “®” symbol.</p></details></div><div class=toc-mobile><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#introduction>1. Introduction to the FreeBSD Release Engineering Process</a></li><li><a href=#releng-prep>2. General Information and Preparation</a></li><li><a href=#releng-terms>3. Release Engineering Terminology</a></li><li><a href=#releng-website>4. Website Changes During the Release Cycle</a></li><li><a href=#releng-head>5. Release from main</a></li><li><a href=#releng-stable>6. Release from stable/</a></li><li><a href=#releng-building>7. Building FreeBSD Installation Media</a></li><li><a href=#releng-mirrors>8. Publishing FreeBSD Installation Media to Project Mirrors</a></li><li><a href=#releng-wrapup>9. Wrapping up the Release Cycle</a></li><li><a href=#releng-eol>10. Release End-of-Life</a></li></ul></nav></div><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>Abstract</p></div><div class=paragraph><p>This article describes the release engineering process of the FreeBSD Project.</p></div><hr></div></div><div class=sect1><h2 id=introduction>1. Introduction to the FreeBSD Release Engineering Process<a class=anchor href=#introduction></a></h2><div class=sectionbody><div class=paragraph><p>Development of FreeBSD has a very specific workflow.
In general, all changes to the FreeBSD base system are committed to the main branch, which reflects the top of the source tree.</p></div><div class=paragraph><p>After a reasonable testing period, changes can then be merged to the stable/ branches.
The default minimum timeframe before merging to stable/ branches is three (3) days.</p></div><div class=paragraph><p>Although a general rule to wait a minimum of three days before merging from main, there are a few special circumstances where an immediate merge may be necessary, such as a critical security fix, or a bug fix that directly inhibits the release build process.</p></div><div class=paragraph><p>After several months, and the number of changes in the stable/ branch have grown significantly, it is time to release the next version of FreeBSD.
These releases have been historically referred to as "point" releases.</p></div><div class=paragraph><p>In between releases from the stable/ branches, approximately every two (2) years, a release will be cut directly from main.
These releases have been historically referred to as "dot-zero" releases.</p></div><div class=paragraph><p>This article will highlight the workflow and responsibilities of the FreeBSD Release Engineering Team for both "dot-zero" and "point"' releases.</p></div><div class=paragraph><p>The following sections of this article describe:</p></div><div class=dlist><dl><dt class=hdlist1><a href=../freebsd-releng/#releng-prep>General Information and Preparation</a></dt><dd><p>General information and preparation before starting the release cycle.</p></dd><dt class=hdlist1><a href=../freebsd-releng/#releng-website>Website Changes During the Release Cycle</a></dt><dd><p>Website Changes During the Release Cycle</p></dd><dt class=hdlist1><a href=../freebsd-releng/#releng-terms>Release Engineering Terminology</a></dt><dd><p>Terminology and general information, such as the "code slush" and "code freeze", used throughout this document.</p></dd><dt class=hdlist1><a href=../freebsd-releng/#releng-head>Release from main</a></dt><dd><p>The Release Engineering process for a "dot-zero" release.</p></dd><dt class=hdlist1><a href=../freebsd-releng/#releng-stable>Release from stable/</a></dt><dd><p>The Release Engineering process for a "point" release.</p></dd><dt class=hdlist1><a href=../freebsd-releng/#releng-building>Building FreeBSD Installation Media</a></dt><dd><p>Information related to the specific procedures to build installation medium.</p></dd><dt class=hdlist1><a href=../freebsd-releng/#releng-mirrors>Publishing FreeBSD Installation Media to Project Mirrors</a></dt><dd><p>Procedures to publish installation medium.</p></dd><dt class=hdlist1><a href=../freebsd-releng/#releng-wrapup>Wrapping up the Release Cycle</a></dt><dd><p>Wrapping up the release cycle.</p></dd></dl></div></div></div><div class=sect1><h2 id=releng-prep>2. General Information and Preparation<a class=anchor href=#releng-prep></a></h2><div class=sectionbody><div class=paragraph><p>Approximately two months before the start of the release cycle, the FreeBSD Release Engineering Team decides on a schedule for the release.
The schedule includes the various milestone points of the release cycle, such as freeze dates, branch dates, and build dates.
For example:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Milestone</th><th class="tableblock halign-left valign-top">Anticipated Date</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>main slush:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>May 27, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>main freeze:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>June 10, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>main KBI freeze:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>June 24, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>doc/</code> tree slush [1]:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>June 24, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Ports quarterly branch [2]:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 1, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>stable/13 branch:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 8, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>doc/</code> tree tag [3]:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 8, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>BETA1 build starts:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 8, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>main thaw:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 9, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>BETA2 build starts:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 15, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>BETA3 build starts [*]:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 22, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>releng/13.0 branch:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 29, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RC1 build starts:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 29, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>stable/13 thaw:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>July 30, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RC2 build starts:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>August 5, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Final Ports package builds [4]:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>August 6, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Ports release tag:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>August 12, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RC3 build starts [*]:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>August 12, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RELEASE build starts:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>August 19, 2016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RELEASE announcement:</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>September 2, 2016</p></td></tr></tbody></table><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Items marked with "[*]" are "as needed".</p></div></td></tr></tbody></table></div><div class="olist arabic"><ol class=arabic><li><p>The <code>doc/</code> tree slush is coordinated by the FreeBSD Documentation Engineering Team.</p></li><li><p>The Ports quarterly branch used is determined by when the final <code>RC</code> build is planned. A new quarterly branch is created on the first day of the quarter, so this metric should be used when taking the release cycle milestones into account. The quarterly branch is created by the FreeBSD Ports Management Team.</p></li><li><p>The <code>doc/</code> tree is tagged by the FreeBSD Documentation Engineering Team.</p></li><li><p>The final Ports package build is done by the FreeBSD Ports Management Team after the final (or what is expected to be final) <code>RC</code> build.</p></li></ol></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If the release is being created from an existing stable/ branch, the KBI freeze date can be excluded, since the KBI is already considered frozen on established stable/ branches.</p></div></td></tr></tbody></table></div><div class=paragraph><p>When writing the release cycle schedule, a number of things need to be taken into consideration, in particular milestones where the target date depends on predefined milestones upon which there is a dependency.
For example, the Ports Collection release tag originates from the active quarterly branch at the time of the last <code>RC</code>.
This in part defines which quarterly branch is used, when the release tag can happen, and what revision of the ports tree is used for the final <code>RELEASE</code> build.</p></div><div class=paragraph><p>After general agreement on the schedule, the FreeBSD Release Engineering Team emails the schedule to the FreeBSD Developers.</p></div><div class=paragraph><p>It is somewhat typical that many developers will inform the FreeBSD Release Engineering Team about various works-in-progress.
In some cases, an extension for the in-progress work will be requested, and in other cases, a request for "blanket approval" to a particular subset of the tree will be made.</p></div><div class=paragraph><p>When such requests are made, it is important to make sure timelines (even if estimated) are discussed.
For blanket approvals, the length of time for the blanket approval should be made clear.
For example, a FreeBSD developer may request blanket approvals from the start of the code slush until the start of the <code>RC</code> builds.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>To keep track of blanket approvals, the FreeBSD Release Engineering Team uses an internal repository to keep a running log of such requests, which defines the area upon which a blanket approval was granted, the author(s), when the blanket approval expires, and the reason the approval was granted.
One example of this is granting blanket approval to <span class=filename>release/doc/</span> to all FreeBSD Release Engineering Team members until the final <code>RC</code> to update the release notes and other release-related documentation.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The FreeBSD Release Engineering Team also uses this repository to track pending approval requests that are received just prior to starting various builds during the release cycle, which the Release Engineer specifies the cutoff period with an email to the FreeBSD developers.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Depending on the underlying set of code in question, and the overall impact the set of code has on FreeBSD as a whole, such requests may be approved or denied by the FreeBSD Release Engineering Team.</p></div><div class=paragraph><p>The same applies to work-in-progress extensions.
For example, in-progress work for a new device driver that is otherwise isolated from the rest of the tree may be granted an extension.
A new scheduler, however, may not be feasible, especially if such dramatic changes do not exist in another branch.</p></div><div class=paragraph><p>The schedule is also added to the Project website, in the <code>doc/</code> repository, in <span class=filename>~/website/content/en/releases/13.0R/schedule.adoc</span>. This file is continuously updated as the release cycle progresses.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In most cases, the <span class=filename>schedule.adoc</span> can be copied from a prior release and updated accordingly.</p></div></td></tr></tbody></table></div><div class=paragraph><p>In addition to adding <span class=filename>schedule.adoc</span> to the website, <span class=filename>~/shared/releases.adoc</span> is also updated to add the link to the schedule to various subpages, as well as enabling the link to the schedule on the Project website index page.</p></div><div class=paragraph><p>The schedule is also linked from <span class=filename>~/website/content/en/releng/_index.adoc</span>.</p></div><div class=paragraph><p>Approximately one month prior to the scheduled "code slush", the FreeBSD Release Engineering Team sends a reminder email to the FreeBSD Developers.</p></div></div></div><div class=sect1><h2 id=releng-terms>3. Release Engineering Terminology<a class=anchor href=#releng-terms></a></h2><div class=sectionbody><div class=paragraph><p>This section describes some of the terminology used throughout the rest of this document.</p></div><div class=sect2><h3 id=releng-terms-code-slush>3.1. The Code Slush<a class=anchor href=#releng-terms-code-slush></a></h3><div class=paragraph><p>Although the code slush is not a hard freeze on the tree, the FreeBSD Release Engineering Team requests that bugs in the existing code base take priority over new features.</p></div><div class=paragraph><p>The code slush does not enforce commit approvals to the branch.</p></div></div><div class=sect2><h3 id=releng-terms-code-freeze>3.2. The Code Freeze<a class=anchor href=#releng-terms-code-freeze></a></h3><div class=paragraph><p>The code freeze marks the point in time where all commits to the branch require explicit approval from the FreeBSD Release Engineering Team.</p></div><div class=paragraph><p>The FreeBSD Git repository contains several hooks to perform sanity checks before any commit is actually committed to the tree.
One of these hooks will evaluate if committing to a particular branch requires specific approval.</p></div><div class=paragraph><p>To enforce commit approvals by the FreeBSD Release Engineering Team, the Release Engineering Team must approve any changes to the branch, in which case the commit log must include an <code>Approved by: re (login)</code> line, where "login" is the login ID of the approver.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>During the code freeze, FreeBSD committers are urged to follow the <a href=https://wiki.freebsd.org/Releng/ChangeRequestGuidelines>Change Request Guidelines</a>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=releng-terms-kbi-freeze>3.3. The KBI/KPI Freeze<a class=anchor href=#releng-terms-kbi-freeze></a></h3><div class=paragraph><p>KBI/KPI stability implies that the caller of a function across two different releases of software that implement the function results in the same end state.
The caller, whether it is a process, thread, or function, expects the function to operate in a certain way, otherwise the KBI/KPI stability on the branch is broken.</p></div></div></div></div><div class=sect1><h2 id=releng-website>4. Website Changes During the Release Cycle<a class=anchor href=#releng-website></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the changes to the website that should occur as the release cycle progresses.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The files specified throughout this section are relative to the <code>main</code> branch of the <code>doc</code> repository.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=releng-website-prerelease>4.1. Website Changes Before the Release Cycle Begins<a class=anchor href=#releng-website-prerelease></a></h3><div class=paragraph><p>When the release cycle schedule is available, these files need to be updated to enable different functionalities on the FreeBSD Project website:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File to Edit</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/shared/releases.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Change <code>beta-upcoming</code> from <code>IGNORE</code> to <code>INCLUDE</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/shared/releases.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Change <code>beta-testing</code> from <code>IGNORE</code> to <code>INCLUDE</code></p></td></tr></tbody></table></div><div class=sect2><h3 id=releng-website-beta-rc>4.2. Website Changes During <code>BETA</code> or <code>RC</code><a class=anchor href=#releng-website-beta-rc></a></h3><div class=paragraph><p>When transitioning from <code>PRERELEASE</code> to <code>BETA</code>, these files need to be updated to enable the "Help Test" block on the download page. All files are relative to <span class=filename>head/</span> in the <code>doc</code> repository:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File to Edit</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/shared/releases.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>betarel-vers</code> to <code>BETA<em>1</em></code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/data/en/news/news.toml</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Add an entry announcing the <code>BETA</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/static/security/advisory-template.txt</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Add the new <code>BETA</code>, <code>RC</code>, or final <code>RELEASE</code> to the template</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/static/security/errata-template.txt</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Add the new <code>BETA</code>, <code>RC</code>, or final <code>RELEASE</code> to the template</p></td></tr></tbody></table><div class=paragraph><p>Once the releng/13.0 branch is created, the various release-related documents need to be added to the <code>doc/</code> repository.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The relevant release-related documents exist in the <span class=filename>doc</span> repository for FreeBSD 12.x and later.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=releng-ports-beta-rc>4.3. Ports Changes During <code>BETA</code>, <code>RC</code>, and the Final <code>RELEASE</code><a class=anchor href=#releng-ports-beta-rc></a></h3><div class=paragraph><p>For each build during the release cycle, the <code>MANIFEST</code> files containing the <code>SHA256</code> of the various distribution sets, such as <code>base.txz</code>, <code>kernel.txz</code>, and so on, are added to the <a class=package href=https://cgit.freebsd.org/ports/tree/misc/freebsd-release-manifests/>misc/freebsd-release-manifests</a> port.
This allows utilities other than , such as <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/>ports-mgmt/poudriere</a>, to safely use these distribution sets by providing a mechanism through which the checksums can be verified.</p></div></div></div></div><div class=sect1><h2 id=releng-head>5. Release from main<a class=anchor href=#releng-head></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the general procedures of the FreeBSD release cycle from the main branch.</p></div><div class=sect2><h3 id=releng-head-builds-alpha>5.1. FreeBSD “ALPHA” Builds<a class=anchor href=#releng-head-builds-alpha></a></h3><div class=paragraph><p>Starting with the FreeBSD 10.0-RELEASE cycle, the notion of “ALPHA” builds was introduced.
Unlike the <code>BETA</code> and <code>RC</code> builds, <code>ALPHA</code> builds are not included in the FreeBSD Release schedule.</p></div><div class=paragraph><p>The idea behind <code>ALPHA</code> builds is to provide regular FreeBSD-provided builds before the creation of the stable/ branch.</p></div><div class=paragraph><p>FreeBSD <code>ALPHA</code> snapshots should be built approximately once a week.</p></div><div class=paragraph><p>For the first <code>ALPHA</code> build, the <code>BRANCH</code> value in <span class=filename>sys/conf/newvers.sh</span> needs to be changed from <code>CURRENT</code> to <code>ALPHA1</code>.
For subsequent <code>ALPHA</code> builds, increment each <code>ALPHA<em>N</em></code> value by one.</p></div><div class=paragraph><p>See <a href=../freebsd-releng/#releng-building>Building FreeBSD Installation Media</a> for information on building the <code>ALPHA</code> images.</p></div></div><div class=sect2><h3 id=releng-head-branching>5.2. Creating the stable/13 Branch<a class=anchor href=#releng-head-branching></a></h3><div class=paragraph><p>When creating the stable/ branch, several changes are required in both the new stable/ branch and the main branch.
The files listed are relative to the repository root.
To create the new stable/13 branch in Git:</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Make sure that you are in the main branch</p></div></td></tr></tbody></table></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git checkout -b stable/13</code></pre></div></div><div class=paragraph><p>Once the stable/13 branch has been created, make the following edits:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File to Edit</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>UPDATING</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the FreeBSD version, and remove the notice about <code>WITNESS</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>contrib/jemalloc/include/jemalloc/jemalloc_FreeBSD.h</span></p></td><td class="tableblock halign-left valign-top"><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>#ifndef MALLOC_PRODUCTION
#define MALLOC_PRODUCTION
#endif</code></pre></div></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>lib/clang/llvm.build.mk</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Uncomment <code>-DNDEBUG</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/*/conf/GENERIC*</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove debugging support</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/*/conf/MINIMAL</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove debugging support</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>release/release.conf.sample</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>SRCBRANCH</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/*/conf/GENERIC-NODEBUG</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove these kernel configurations</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/arm/conf/std.arm*</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove debugging options</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/conf/newvers.sh</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the <code>BRANCH</code> value to reflect <code>BETA1</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>share/mk/src.opts.mk</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Move <code>REPRODUCIBLE_BUILD</code> from <code>__DEFAULT_NO_OPTIONS</code> to <code>__DEFAULT_YES_OPTIONS</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>share/mk/src.opts.mk</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Move <code>LLVM_ASSERTIONS</code> from <code>__DEFAULT_YES_OPTIONS</code> to <code>__DEFAULT_NO_OPTIONS</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>libexec/rc/rc.conf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Set <code>dumpdev</code> from <code>AUTO</code> to <code>NO</code> (it is configurable via for those that want it enabled by default)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>release/Makefile</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove the <code>debug.witness.trace</code> entries</p></td></tr></tbody></table><div class=paragraph><p>Then in the main branch, which will now become a new major version:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File to Edit</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>UPDATING</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the FreeBSD version</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/conf/newvers.sh</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the <code>BRANCH</code> value to reflect <code>CURRENT</code>, and increment <code>REVISION</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>Makefile.inc1</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>TARGET_TRIPLE</code> and <code>MACHINE_TRIPLE</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/sys/param.h</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>__FreeBSD_version</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>gnu/usr.bin/cc/cc_tools/freebsd-native.h</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>FBSD_MAJOR</code> and <code>FBSD_CC_VER</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>contrib/gcc/config.gcc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Append the <code>freebsdversion.h</code> section</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>lib/clang/llvm.build.mk</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the value of <code>OS_VERSION</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>lib/clang/freebsd_cc_version.h</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>FREEBSD_CC_VERSION</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>lib/clang/include/lld/Common/Version.inc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>LLD_REVISION_STRING</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>Makefile.libcompat</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>LIB32CPUFLAGS</code></p></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=releng-stable>6. Release from stable/<a class=anchor href=#releng-stable></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the general procedures of the FreeBSD release cycle from an extablished stable/ branch.</p></div><div class=sect2><h3 id=releng-stable-slush>6.1. FreeBSD <code>stable</code> Branch Code Slush<a class=anchor href=#releng-stable-slush></a></h3><div class=paragraph><p>In preparation for the code freeze on a <code>stable</code> branch, several files need to be updated to reflect the release cycle is officially in progress.
These files are all relative to the top-most level of the stable branch:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File to Edit</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/conf/newvers.sh</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the <code>BRANCH</code> value to reflect <code>PRERELEASE</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>Makefile.inc1</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>TARGET_TRIPLE</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>lib/clang/llvm.build.mk</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>OS_VERSION</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>Makefile.libcompat</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>LIB32CPUFLAGS</code></p></td></tr></tbody></table></div><div class=sect2><h3 id=releng-stable-builds-beta>6.2. FreeBSD <code>BETA</code> Builds<a class=anchor href=#releng-stable-builds-beta></a></h3><div class=paragraph><p>Following the code slush, the next phase of the release cycle is the code freeze.
This is the point at which all commits to the stable branch require explicit approval from the FreeBSD Release Engineering Team.
This is enforced by <a href=mailto:gitadm@FreeBSD.org>gitadm@FreeBSD.org</a> who handles the repository.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>There are two general exceptions to requiring commit approval during the release cycle.
The first is any change that needs to be committed by the Release Engineer to proceed with the day-to-day workflow of the release cycle, the other is security fixes that may occur during the release cycle.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Once the code freeze is in effect, the next build from the branch is labeled <code>BETA1</code>.
This is done by updating the <code>BRANCH</code> value in <span class=filename>sys/conf/newvers.sh</span> from <code>PRERELEASE</code> to <code>BETA1</code>.</p></div><div class=paragraph><p>Once this is done, the first set of <code>BETA</code> builds are started.
Subsequent <code>BETA</code> builds do not require updates to any files other than <span class=filename>sys/conf/newvers.sh</span>, incrementing the <code>BETA</code> build number.</p></div></div><div class=sect2><h3 id=releng-stable-branching>6.3. Creating the releng/13.0 Branch<a class=anchor href=#releng-stable-branching></a></h3><div class=paragraph><p>When the first <code>RC</code> (Release Candidate) build is ready to begin, the releng/ branch is created.
This is a multi-step process that must be done in a specific order, to avoid anomalies such as overlaps with <code>__FreeBSD_version</code> values, for example.
The paths listed below are relative to the repository root.
The order of commits and what to change are:</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Make sure that you are in the stable/13 branch</p></div></td></tr></tbody></table></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git checkout -b releng/13.0</code></pre></div></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File to Edit</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/conf/newvers.sh</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Change <code>BETA<em>X</em></code> to <code>RC1</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/sys/param.h</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>__FreeBSD_version</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/conf/kern.opts.mk</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Move <code>REPRODUCIBLE_BUILD</code> from <code><em>DEFAULT_NO_OPTIONS</em></code><em> to <code></code></em><code>DEFAULT_YES_OPTIONS</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>etc/pkg/FreeBSD.conf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Replace <code>latest</code> with <code>quarterly</code> as the default package repository location</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>release/pkg_repos/release-dvd.conf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Replace <code>latest</code> with <code>quarterly</code> as the default package repository location</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/conf/newvers.sh</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>BETA<em>X</em></code> with <code>PRERELEASE</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/sys/param.h</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update <code>__FreeBSD_version</code></p></td></tr></tbody></table><div class=paragraph><p>Then, <a href=mailto:gitadm@FreeBSD.org>gitadm@FreeBSD.org</a> adds new approvers for the releng branch as did for the stable branch.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git add .
% git commit</code></pre></div></div><div class=paragraph><p>Now that two new <code>__FreeBSD_version</code> values exist, also update <span class=filename>~/documentation/content/en/books/porters-handbook/versions/chapter.adoc</span> in the Documentation Project repository.</p></div><div class=paragraph><p>After the first <code>RC</code> build has completed and tested, the stable/ branch can be "thawed" by <a href=mailto:gitadm@FreeBSD.org>gitadm@FreeBSD.org</a>.</p></div><div class=paragraph><p>Following the availability of the first <code>RC</code>, FreeBSD Bugmeister Team should be emailed to add the new FreeBSD <code>-RELEASE</code> to the <code>versions</code> available in the drop-down menu shown in the bug tracker.</p></div></div></div></div><div class=sect1><h2 id=releng-building>7. Building FreeBSD Installation Media<a class=anchor href=#releng-building></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the general procedures producing FreeBSD development snapshots and releases.</p></div><div class=sect2><h3 id=releng-build-scripts>7.1. Release Build Scripts<a class=anchor href=#releng-build-scripts></a></h3><div class=paragraph><p>Prior to FreeBSD 9.0-RELEASE, <span class=filename>src/release/Makefile</span> was updated to support , and the <span class=filename>src/release/generate-release.sh</span> script was introduced as a wrapper to automate invoking the targets.</p></div><div class=paragraph><p>Prior to FreeBSD 9.2-RELEASE, <span class=filename>src/release/release.sh</span> was introduced, which heavily based on <span class=filename>src/release/generate-release.sh</span> included support to specify configuration files to override various options and environment variables.
Support for configuration files provided support for cross building each architecture for a release by specifying a separate configuration file for each invocation.</p></div><div class=paragraph><p>As a brief example of using <span class=filename>src/release/release.sh</span> to build a single release in <span class=filename>/scratch</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell># /bin/sh /usr/src/release/release.sh</code></pre></div></div><div class=paragraph><p>As a brief example of using <span class=filename>src/release/release.sh</span> to build a single, cross-built release using a different target directory, create a custom <span class=filename>release.conf</span> containing:</p></div><div class="literalblock programlisting"><div class=content><pre># release.sh configuration for powerpc/powerpc64
CHROOTDIR=&#34;/scratch-powerpc64&#34;
TARGET=&#34;powerpc&#34;
TARGET_ARCH=&#34;powerpc64&#34;
KERNEL=&#34;GENERIC64&#34;</pre></div></div><div class=paragraph><p>Then invoke <span class=filename>src/release/release.sh</span> as:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell># /bin/sh /usr/src/release/release.sh -c $HOME/release.conf</code></pre></div></div><div class=paragraph><p>See and <span class=filename>src/release/release.conf.sample</span> for more details and example usage.</p></div></div><div class=sect2><h3 id=releng-build-release>7.2. Building FreeBSD Releases<a class=anchor href=#releng-build-release></a></h3><div class=paragraph><p>During the release cycle, a copy of <span class=filename>CHECKSUM.SHA512</span> and <span class=filename>CHECKSUM.SHA256</span> for each architecture are stored in the FreeBSD Release Engineering Team internal repository in addition to being included in the various announcement emails.
Each <span class=filename>MANIFEST</span> containing the hashes of <span class=filename>base.txz</span>, <span class=filename>kernel.txz</span>, etc. are added to <a class=package href=https://cgit.freebsd.org/ports/tree/misc/freebsd-release-manifests/>misc/freebsd-release-manifests</a> in the Ports Collection, as well.</p></div><div class=paragraph><p>In preparation for the release build, several files need to be updated:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File to Edit</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>sys/conf/newvers.sh</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the <code>BRANCH</code> value to <code>RELEASE</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>UPDATING</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Add the anticipated announcement date</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>lib/csu/common/crtbrand.S</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Replace <code>__FreeBSD_version</code> with the value in <span class=filename>sys/sys/param.h</span></p></td></tr></tbody></table><div class=paragraph><p>After building the final <code>RELEASE</code>, the releng/13.0 branch is tagged as release/13.0.0 using the revision from which the <code>RELEASE</code> was built.
Similar to creating the stable/13 and releng/13.0 branches, this is done with <code>git tag</code>.
From the repository root:</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Make sure that you are in the releng/13.0 branch</p></div></td></tr></tbody></table></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git tag release/13.0.0</code></pre></div></div></div></div></div><div class=sect1><h2 id=releng-mirrors>8. Publishing FreeBSD Installation Media to Project Mirrors<a class=anchor href=#releng-mirrors></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the procedure to publish FreeBSD development snapshots and releases to the Project mirrors.</p></div><div class=sect2><h3 id=releng-mirrors-staging>8.1. Staging FreeBSD Installation Media Images<a class=anchor href=#releng-mirrors-staging></a></h3><div class=paragraph><p>Staging FreeBSD snapshots and releases is a two part process:</p></div><div class=ulist><ul><li><p>Creating the directory structure to match the hierarchy on <code>ftp-master</code></p><div class=paragraph><p>If <code>EVERYTHINGISFINE</code> is defined in the build configuration files, <span class=filename>main.conf</span> in the case of the build scripts referenced above, this happens automatically in the after the build is complete, creating the directory structure in <span class=filename>${DESTDIR}/R/ftp-stage</span> with a path structure matching what is expected on <code>ftp-master</code>.
This is equivalent to running the following in the directly:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell># make -C /usr/src/release -f Makefile.mirrors EVERYTHINGISFINE=1 ftp-stage</code></pre></div></div><div class=paragraph><p>After each architecture is built, <span class=filename>thermite.sh</span> will rsync the <span class=filename>${DESTDIR}/R/ftp-stage</span> from the build to <span class=filename>/snap/ftp/snapshots</span> or <span class=filename>/snap/ftp/releases</span> on the build host, respectively.</p></div></li><li><p>Copying the files to a staging directory on <code>ftp-master</code> before moving the files into <span class=filename>pub/</span> to begin propagation to the Project mirrors</p><div class=paragraph><p>Once all builds have finished, <span class=filename>/snap/ftp/snapshots</span>, or <span class=filename>/snap/ftp/releases</span> for a release, is polled by <code>ftp-master</code> using rsync to <span class=filename>/archive/tmp/snapshots</span> or <span class=filename>/archive/tmp/releases</span>, respectively.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>On <code>ftp-master</code> in the FreeBSD Project infrastructure, this step requires <code>root</code> level access, as this step must be executed as the <code>archive</code> user.</p></div></td></tr></tbody></table></div></li></ul></div></div><div class=sect2><h3 id=releng-mirrors-publishing>8.2. Publishing FreeBSD Installation Media<a class=anchor href=#releng-mirrors-publishing></a></h3><div class=paragraph><p>Once the images are staged in <span class=filename>/archive/tmp/</span>, they are ready to be made public by putting them in <span class=filename>/archive/pub/FreeBSD</span>.
To reduce propagation time, is used to create hard links from <span class=filename>/archive/tmp</span> to <span class=filename>/archive/pub/FreeBSD</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>For this to be effective, both <span class=filename>/archive/tmp</span> and <span class=filename>/archive/pub</span> must reside on the same logical filesystem.</p></div></td></tr></tbody></table></div><div class=paragraph><p>There is a caveat, however, where rsync must be used after to correct the symbolic links in <span class=filename>pub/FreeBSD/snapshots/ISO-IMAGES</span> which will replace with a hard link, increasing the propagation time.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>As with the staging steps, this requires <code>root</code> level access, as this step must be executed as the <code>archive</code> user.</p></div></td></tr></tbody></table></div><div class=paragraph><p>As the <code>archive</code> user:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cd /archive/tmp/snapshots
% pax -r -w -l . /archive/pub/FreeBSD/snapshots
% /usr/local/bin/rsync -avH /archive/tmp/snapshots/* /archive/pub/FreeBSD/snapshots/</code></pre></div></div><div class=paragraph><p>Replace <em>snapshots</em> with <em>releases</em> as appropriate.</p></div></div></div></div><div class=sect1><h2 id=releng-wrapup>9. Wrapping up the Release Cycle<a class=anchor href=#releng-wrapup></a></h2><div class=sectionbody><div class=paragraph><p>This section describes general post-release tasks.</p></div><div class=sect2><h3 id=releng-wrapup-en>9.1. Post-Release Errata Notices<a class=anchor href=#releng-wrapup-en></a></h3><div class=paragraph><p>As the release cycle approaches conclusion, it is common to have several EN (Errata Notice) candidates to address issues that were discovered late in the cycle.
Following the release, the FreeBSD Release Engineering Team and the FreeBSD Security Team revisit changes that were not approved prior to the final release, and depending on the scope of the change in question, may issue an EN.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The actual process of issuing ENs is handled by the FreeBSD Security Team.</p></div></td></tr></tbody></table></div><div class=paragraph><p>To request an Errata Notice after a release cycle has completed, a developer should fill out the <a href=https://www.freebsd.org/security/errata-template.txt>Errata Notice template</a>, in particular the <code>Background</code>, <code>Problem Description</code>, <code>Impact</code>, and if applicable, <code>Workaround</code> sections.</p></div><div class=paragraph><p>The completed Errata Notice template should be emailed together with either a patch against the releng/ branch or a list of revisions from the stable/ branch.</p></div><div class=paragraph><p>For Errata Notice requests immediately following the release, the request should be emailed to both the FreeBSD Release Engineering Team and the FreeBSD Security Team.
Once the releng/ branch has been handed over to the FreeBSD Security Team as
described in <a href=../freebsd-releng/#releng-wrapup-handoff>Handoff to the FreeBSD Security Team</a>, Errata Notice requests should be sent to the FreeBSD Security Team.</p></div></div><div class=sect2><h3 id=releng-wrapup-handoff>9.2. Handoff to the FreeBSD Security Team<a class=anchor href=#releng-wrapup-handoff></a></h3><div class=paragraph><p>Roughly two weeks following the release, the Release Engineer updates the Git repository changing the approver from the Release engineering team to the security officer for the releng/13.0 branch.</p></div></div></div></div><div class=sect1><h2 id=releng-eol>10. Release End-of-Life<a class=anchor href=#releng-eol></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the website-related files to update when a release reaches EoL (End-of-Life).</p></div><div class=sect2><h3 id=releng-eol-website>10.1. Website Updates for End-of-Life<a class=anchor href=#releng-eol-website></a></h3><div class=paragraph><p>When a release reaches End-of-Life, references to that release should be removed and/or updated on the website:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File</th><th class="tableblock halign-left valign-top">What to Change</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/themes/beastie/layouts/index.html</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove <code>u-relXXX-announce</code> and <code>u-relXXX-announce</code> references.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/content/en/releases/_index.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Move the <code>u-relXXX-*</code> variables from the supported release list to the Legacy Releases list.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/content/en/releng/_index.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Update the appropriate releng branch to reflect the branch is no longer supported.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/content/en/security/_index.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove the branch from the supported branch list.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/content/en/security/unsupported.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Add the branch to the unsupported branch list.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/content/en/where.adoc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove the URLs for the release.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/themes/beastie/layouts/partials/sidenav.html</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove <code>u-relXXX-announce</code> and <code>u-relXXX-announce</code> references.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/static/security/advisory-template.txt</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove references to the release and releng branch.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>~/website/static/security/errata-template.txt</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Remove references to the release and releng branch.</p></td></tr></tbody></table></div></div></div><hr><div class=last-modified><p><strong>Last modified on</strong>: September 20, 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=2d2f5d38cc" target=_blank>Fernando Apesteguía</a></p></div></div><aside class=toc><div class=toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#introduction>1. Introduction to the FreeBSD Release Engineering Process</a></li><li><a href=#releng-prep>2. General Information and Preparation</a></li><li><a href=#releng-terms>3. Release Engineering Terminology</a></li><li><a href=#releng-website>4. Website Changes During the Release Cycle</a></li><li><a href=#releng-head>5. Release from main</a></li><li><a href=#releng-stable>6. Release from stable/</a></li><li><a href=#releng-building>7. Building FreeBSD Installation Media</a></li><li><a href=#releng-mirrors>8. Publishing FreeBSD Installation Media to Project Mirrors</a></li><li><a href=#releng-wrapup>9. Wrapping up the Release Cycle</a></li><li><a href=#releng-eol>10. Release End-of-Life</a></li></ul></nav><hr><div class=resources><h3>Resources</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Download PDF"></i><a href=https://download.freebsd.org/doc/en/articles/freebsd-releng/freebsd-releng_en.pdf>Download PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/en/_index target=_blank>Edit this page</a></li></ul></div></div></aside></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/en/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>English</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/en class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/en/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>