<!doctype html><html class=theme-light lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/><title>第16章 やっていいことといけないこと | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="第16章 やっていいことといけないこと"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ja"><meta property="og:url" content="https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/ja\/books\/porters-handbook\/porting-dads\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ja>Documentation portal</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/ja/books>Books</a></li><li><a href=https://docs.freebsd.org/ja/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/ja/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ja>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-89897b13690206c8d016b08d866ebe49 class=toggle>
<label for=chapter-89897b13690206c8d016b08d866ebe49><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/why-port/>第1章 はじめに</a></li><li><input type=checkbox id=chapter-6619d34d40746c4cdcc07a792381c027 class=toggle>
<label for=chapter-6619d34d40746c4cdcc07a792381c027><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/own-port/>第2章 自分で port を作成するには</a></li><li><input type=checkbox id=chapter-c0d52b9121b517084e01f59cefa725e1 class=toggle>
<label class="icon cursor" for=chapter-c0d52b9121b517084e01f59cefa725e1><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/quick-porting/>第3章 3 分間 porting</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/quick-porting/#porting-makefile>3.1. <span class=filename>Makefile</span> の作成</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/quick-porting/#porting-desc>3.2. package 記述ファイルの作成</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/quick-porting/#porting-checksum>3.3. チェックサムファイルの作成</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/quick-porting/#porting-testing>3.4. port のテスト</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/quick-porting/#porting-portlint>3.5. <code>portlint</code> によるチェック</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/quick-porting/#porting-submitting>3.6. port の提出</a></li></ul></li><li><input type=checkbox id=chapter-78c64b7f0aa40d4648859dde83f4ee13 class=toggle>
<label class="icon cursor" for=chapter-78c64b7f0aa40d4648859dde83f4ee13><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/slow/>第4章 本格的な port</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/slow/#slow-work>4.1. port 構築の詳細</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/slow/#slow-sources>4.2. オリジナルのソースの入手</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/slow/#slow-modifying>4.3. port の修正</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/slow/#slow-patch>4.4. パッチの適用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/slow/#slow-configure>4.5. コンフィグレーション</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/slow/#slow-user-input>4.6. ユーザからの入力の扱い</a></li></ul></li><li><input type=checkbox id=chapter-869403c3f74bf6ec89e800963596e31a class=toggle>
<label class="icon cursor" for=chapter-869403c3f74bf6ec89e800963596e31a><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/>第5章 Makefile の作成</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-source>5.1. オリジナルのソース</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-naming>5.2. 名前の付け方</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-categories>5.3. カテゴリ分類</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-distfiles>5.4. 配布ファイル</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-maintainer>5.5. <code>MAINTAINER</code></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-comment>5.6. <code>COMMENT</code></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-depend>5.7. 依存関係</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-wrkdir>5.8. 作業ディレクトリの指定</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#conflicts>5.9. <code>CONFLICTS</code></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/makefile/#makefile-build>5.10. ビルドのメカニズム</a></li></ul></li><li><input type=checkbox id=chapter-19e3150e00beb84341d8ac1a73936ef0 class=toggle>
<label class="icon cursor" for=chapter-19e3150e00beb84341d8ac1a73936ef0><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/>第6章 特別な配慮</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#porting-shlibs>6.1. 共有ライブラリ</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#porting-restrictions>6.2. 配布制限がある ports</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-perl>6.3. <code>perl</code> の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-x11>6.4. X11 の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-automake>6.5. <code>automake</code>, <code>autoconf</code> および <code>libtool</code> の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-gnome>6.6. GNOME の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-kde>6.7. KDE の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-bison>6.8. Bison の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-java>6.9. Java の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-python>6.10. Python の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-emacs>6.11. Emacs の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-ruby>6.12. Ruby の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/special/#using-sdl>6.13. SDL の利用</a></li></ul></li><li><input type=checkbox id=chapter-cfdd4a61297a40347b44190bffb9e967 class=toggle>
<label for=chapter-cfdd4a61297a40347b44190bffb9e967><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-masterdir/>第7章 MASTERDIR</a></li><li><input type=checkbox id=chapter-22e9c415e2790a95b60e5aa0ef1a0965 class=toggle>
<label for=chapter-22e9c415e2790a95b60e5aa0ef1a0965><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/shared/>第8章 共有ライブラリのバージョン</a></li><li><input type=checkbox id=chapter-0e9c6b3c9458983885b31acab2f13136 class=toggle>
<label for=chapter-0e9c6b3c9458983885b31acab2f13136><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-manpages/>第9章 マニュアルページ</a></li><li><input type=checkbox id=chapter-272fb4ef4cb19464343707eeb40986f2 class=toggle>
<label class="icon cursor" for=chapter-272fb4ef4cb19464343707eeb40986f2><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-motif/>第10章 Motif を必要とする port</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-motif/#motif-use>10.1. <code>USE_MOTIF</code></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-motif/#motif-lib>10.2. <code>MOTIFLIB</code></a></li></ul></li><li><input type=checkbox id=chapter-045fe63771cd111bb783b4fa7409a860 class=toggle>
<label for=chapter-045fe63771cd111bb783b4fa7409a860><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/x11-fonts/>第11章 X11 のフォント</a></li><li><input type=checkbox id=chapter-314ea4400f3f871d3e726d940cef30c0 class=toggle>
<label for=chapter-314ea4400f3f871d3e726d940cef30c0><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-info/>第12章 Info ファイル</a></li><li><input type=checkbox id=chapter-5955b0791ccd51005b5bc5bebeec91e5 class=toggle>
<label class="icon cursor" for=chapter-5955b0791ccd51005b5bc5bebeec91e5><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/pkg-files/>第13章 pkg-* ファイル</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/pkg-files/#porting-message>13.1. <span class=filename>pkg-message</span></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/pkg-files/#pkg-install>13.2. <span class=filename>pkg-install</span></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/pkg-files/#pkg-deinstall>13.3. <span class=filename>pkg-deinstall</span></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/pkg-files/#pkg-req>13.4. <span class=filename>pkg-req</span></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/pkg-files/#porting-plist>13.5. make の変数にあわせた <span class=filename>pkg-plist</span> の変更</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/pkg-files/#pkg-names>13.6. <span class=filename>pkg-*</span> ファイルの名前変更</a></li></ul></li><li><input type=checkbox id=chapter-ee86a11caedb6395ed82b94ec7a9c6cd class=toggle>
<label class="icon cursor" for=chapter-ee86a11caedb6395ed82b94ec7a9c6cd><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/testing/>第14章 port のテスト</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/testing/#testing-portlint>14.1. portlint</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/testing/#porting-prefix>14.2. <code>PREFIX</code></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/testing/#testing-freshports>14.3. FreshPorts 正当性テスト</a></li></ul></li><li><input type=checkbox id=chapter-24703a9f2b5ab277e796cbfa6f5fd1e4 class=toggle>
<label for=chapter-24703a9f2b5ab277e796cbfa6f5fd1e4><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/port-upgrading/>第15章 アップグレード</a></li><li><input type=checkbox id=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7 class=toggle checked>
<label class="icon cursor" for=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/>第16章 やっていいことといけないこと</a><ul><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-intro>16.1. はじめに</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-strip>16.2. バイナリの strip</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-install>16.3. <code>INSTALL_*</code> マクロ</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#porting-wrkdir>16.4. <code>WRKDIR</code></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#porting-wrkdirprefix>16.5. <code>WRKDIRPREFIX</code></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#porting-versions>16.6. OS の種類やバージョンの識別</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#freebsd-versions>16.7. __FreeBSD_version の値</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-after-port-mk>16.8. <span class=filename>bsd.port.mk</span> の後に書くこと</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-documentation>16.9. 付加的な文書のインストール</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-subdirs>16.10. ディレクトリ構成</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#porting-cleaning>16.11. 空のディレクトリの削除</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-uid>16.12. UID</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-rational>16.13. 合理的な port</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-cc>16.14. <code>CC</code> および <code>CXX</code> の尊重</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-cflags>16.15. <code>CFLAGS</code> の尊重</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-config>16.16. コンフィグレーション (設定) ファイル</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-freedback>16.17. フィードバック</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-readme>16.18. <span class=filename>README.html</span></a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-broken>16.19. Port に <code>BROKEN</code>, <code>FORBIDDEN</code> などの印をつける</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-workarounds>16.20. 必要な回避策</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-misc>16.21. その他諸々</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-dads/#dads-stuck>16.22. 困ったら…​</a></li></ul></li><li><input type=checkbox id=chapter-5ef4c4c471a3f55c74fb71881f9d8713 class=toggle>
<label for=chapter-5ef4c4c471a3f55c74fb71881f9d8713><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-samplem/>第17章 Makefile のサンプル</a></li><li><input type=checkbox id=chapter-b421e468bf239e07d899e0d2f5e7b2e5 class=toggle>
<label for=chapter-b421e468bf239e07d899e0d2f5e7b2e5><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-autoplist/>第18章 パッキングリストの自動生成</a></li><li><input type=checkbox id=chapter-9df8872e9cd736e47497099d9a6619cc class=toggle>
<label for=chapter-9df8872e9cd736e47497099d9a6619cc><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/porters-handbook/changes/>第19章 この文書と ports システムの変更</a></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>第16章 やっていいことといけないこと</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#dads-intro>16.1. はじめに</a></li><li><a href=#dads-strip>16.2. バイナリの strip</a></li><li><a href=#dads-install>16.3. <code>INSTALL_*</code> マクロ</a></li><li><a href=#porting-wrkdir>16.4. <code>WRKDIR</code></a></li><li><a href=#porting-wrkdirprefix>16.5. <code>WRKDIRPREFIX</code></a></li><li><a href=#porting-versions>16.6. OS の種類やバージョンの識別</a></li><li><a href=#freebsd-versions>16.7. __FreeBSD_version の値</a></li><li><a href=#dads-after-port-mk>16.8. <span class=filename>bsd.port.mk</span> の後に書くこと</a></li><li><a href=#dads-documentation>16.9. 付加的な文書のインストール</a></li><li><a href=#dads-subdirs>16.10. ディレクトリ構成</a></li><li><a href=#porting-cleaning>16.11. 空のディレクトリの削除</a></li><li><a href=#dads-uid>16.12. UID</a></li><li><a href=#dads-rational>16.13. 合理的な port</a></li><li><a href=#dads-cc>16.14. <code>CC</code> および <code>CXX</code> の尊重</a></li><li><a href=#dads-cflags>16.15. <code>CFLAGS</code> の尊重</a></li><li><a href=#dads-config>16.16. コンフィグレーション (設定) ファイル</a></li><li><a href=#dads-freedback>16.17. フィードバック</a></li><li><a href=#dads-readme>16.18. <span class=filename>README.html</span></a></li><li><a href=#dads-broken>16.19. Port に <code>BROKEN</code>, <code>FORBIDDEN</code> などの印をつける</a></li><li><a href=#dads-workarounds>16.20. 必要な回避策</a></li><li><a href=#dads-misc>16.21. その他諸々</a></li><li><a href=#dads-stuck>16.22. 困ったら…​</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=dads-intro>16.1. はじめに<a class=anchor href=#dads-intro></a></h2><div class=sectionbody><div class=paragraph><p>このセクションではソフトウェアを port する上で、 良くある落し穴などについて説明します。 このリストを使ってあなた自身が作成した port のチェックはもとより、 さらに<a href=http://www.FreeBSD.org/cgi/query-pr-summary.cgi?query>障害報告データベース</a> にある他の人が提出した port のチェックもできます。 PR データベースにある、 他の人が作成した port のチェックもできます。 あなたがチェックした port についてのコメントを<a href=https://docs.freebsd.org/ja/articles/contributing/#CONTRIB-GENERAL>バグ報告と一般的な論評</a>にしたがって送ってください。 PR データベースにある port をチェックすることは、 わたしたちがそれらを commit するのを早めるとともに、 何をしているかをあなたが理解していることも証明します。</p></div></div></div><div class=sect1><h2 id=dads-strip>16.2. バイナリの strip<a class=anchor href=#dads-strip></a></h2><div class=sectionbody><div class=paragraph><p>バイナリは特に必要がなければ、手動で strip しないでください。 すべてのバイナリは strip すべきですが、 <code>INSTALL_PROGRAM</code> マクロがバイナリのインストールと strip を同時に行います (次節をご覧ください)。</p></div><div class=paragraph><p>ファイルを strip する必要はあるものの <code>INSTALL_PROGRAM</code> マクロを使いたくない場合は、 <code>${STRIP_CMD}</code> でプログラムを strip できます。 これは、多くの場合 <code>post-install</code> ターゲット内で行われます。たとえば</p></div><div class="literalblock programlisting"><div class=content><pre>post-install:
	${STRIP_CMD} ${PREFIX}/bin/xdl</pre></div></div><div class=paragraph><p>インストールされた実行形式がすでに strip されているかどうかは <code>file</code> コマンドで確認できます。 "not stripped" と表示されなければ strip されていることを示しています。 さらに、<a href="https://man.freebsd.org/cgi/man.cgi?query=strip&amp;sektion=1&amp;format=html">strip(1)</a> はすでに strip されたプログラムは strip せず、問題なく終了します。</p></div></div></div><div class=sect1><h2 id=dads-install>16.3. <code>INSTALL_*</code> マクロ<a class=anchor href=#dads-install></a></h2><div class=sectionbody><div class=paragraph><p>あなた自身の <code>*-install</code> ターゲットでファイルの正しいモードとオーナを保証するために、 必ず <span class=filename>bsd.port.mk</span> で提供されているマクロを使用してください。</p></div><div class=ulist><ul><li><p><code>${INSTALL_PROGRAM}</code> は実行可能なバイナリをインストール (し、その過程で strip 処理)するコマンドです。</p></li><li><p><code>${INSTALL_SCRIPT}</code> は実行可能なスクリプトをインストールするコマンドです。</p></li><li><p><code>${INSTALL_DATA}</code> は共有可能なデータをインストールするコマンドです。</p></li><li><p><code>${INSTALL_MAN}</code> はマニュアルとその他の文書をインストールするコマンドです (圧縮はしません)。</p></li></ul></div><div class=paragraph><p>これらは基本的に <code>install</code> コマンドに適切なフラグを与えたものです。 それらは distfile の <span class=filename>Makefile</span> で、頭に "BSD_" が付けられた (つまり BSD_INSTALL_PROGRM というような) 形で使うことができます。 どのようにこれらを使用するかは以下の例を見てください。</p></div></div></div><div class=sect1><h2 id=porting-wrkdir>16.4. <code>WRKDIR</code><a class=anchor href=#porting-wrkdir></a></h2><div class=sectionbody><div class=paragraph><p><code>WRKDIR</code> の外に存在するファイルには何も書き込んではいけません。 port のビルド中に書き込み可能なことが保証されているのは <code>WRKDIR</code> の中だけです (書き込み不可のツリー上での port ビルドの例については、 <a href=https://docs.freebsd.org/ja/books/handbook/ports#PORTS-CD>CDROM からの ports のインストール</a> を参照のこと)。 <span class=filename>pkg-*</span> ファイルを変更する必要があるときには、 ファイルを上書きするのではなく <a href=#porting-pkgfiles>変数の再定義</a>により 行なうようにしてください。</p></div></div></div><div class=sect1><h2 id=porting-wrkdirprefix>16.5. <code>WRKDIRPREFIX</code><a class=anchor href=#porting-wrkdirprefix></a></h2><div class=sectionbody><div class=paragraph><p><code>WRKDIRPREFIX</code> を尊重していることを確認してください。特に、別の port の <code>WRKDIR</code> を参照しているときには気を付けてください。 正しい場所は、 <span class=filename>WRKDIRPREFIXPORTSDIR/subdir/name/work</span> です。 <span class=filename>PORTSDIR/subdir/name/work</span> や <span class=filename>.CURDIR/../../subdir/name/work</span> ではありません。</p></div><div class=paragraph><p>また、 自分で <code>WRKDIR</code> 定義するときには先頭に <code>${WRKDIRPREFIX}${.CURDIR}</code> が付いていることを確認してください。</p></div></div></div><div class=sect1><h2 id=porting-versions>16.6. OS の種類やバージョンの識別<a class=anchor href=#porting-versions></a></h2><div class=sectionbody><div class=paragraph><p>どのバージョンの Unix で動かすかによって、 変更や条件つきコンパイルが必要なコードに出くわすこともあるでしょう。 そのような変更を行なう場合には、 古い FreeBSD システムへのバックポートや、 CSRG の 4.4BSD, BSD/386, 386BSD, NetBSD, OpenBSD 等、 他の BSD システムへの移植が可能なように、 できるだけ汎用的な変更を行なうことを心がけてください。</p></div><div class=paragraph><p>4.3BSD/Reno (1990) と、それより新しいバージョンの BSD コードを区別するには、 <span class=filename>&lt;sys/param.h></span> で定義されている <code>BSD</code> マクロを利用するのがよいでしょう。 このファイルがすでにインクルードされていれば良いのですが、 そうでない場合には、その <span class=filename>.c</span> ファイルの 適当な場所に以下のコードを追加してください。</p></div><div class="literalblock programlisting"><div class=content><pre>#if (defined(__unix__) || defined(unix)) &amp;&amp; !defined(USG)
#include &lt;sys/param.h&gt;
#endif</pre></div></div><div class=paragraph><p>これらの二つのシンボルが定義されているシステムには必ず <span class=filename>sys/param.h</span> があるはずです。 もしそうでないシステムを発見したら、 <a href=https://lists.FreeBSD.org/subscription/freebsd-ports>FreeBSD ports メーリングリスト</a> までメールを送ってわたしたちに伝えてください。</p></div><div class=paragraph><p>あるいは、GNU Autoconf のスタイルを使用することもできます。</p></div><div class="literalblock programlisting"><div class=content><pre>#ifdef HAVE_SYS_PARAM_H
#include &lt;sys/param.h&gt;
#endif</pre></div></div><div class=paragraph><p>この方法を使用するときには、 <span class=filename>Makefile</span> 中の <code>CFLAGS</code>に <code>-DHAVE_SYS_PARAM_H</code> を加えることを忘れないようにしてください。</p></div><div class=paragraph><p>いったん <span class=filename>sys/param.h</span> がインクルードされると、</p></div><div class="literalblock programlisting"><div class=content><pre>#if (defined(BSD) &amp;&amp; (BSD &gt;= 199103))</pre></div></div><div class=paragraph><p>このようにしてそのコードが 4.3 Net2 コードベース、 またはそれより新しいもの (例: FreeBSD 1.x, 4.3/Reno, NetBSD 0.9, 386BSD, BSD/386 1.1 とそれ以前) の上でコンパイルされているかを検出できます。</p></div><div class="literalblock programlisting"><div class=content><pre>#if (defined(BSD) &amp;&amp; (BSD &gt;= 199306))</pre></div></div><div class=paragraph><p>これは、4.4コードベース、またはそれより新しいもの (例: FreeBSD 2.x, 4.4, NetBSD 1.0, BSD/386 2.0 とそれ以後) の上でコンパイルされているかどうかを検出するために使用します。</p></div><div class=paragraph><p>4.4BSD-Lite2 コードベースでは <code>BSD</code> マクロの値は <code>199506</code> になっています。 これは参考程度の意味合いしかありません。 4.4-Lite ベースの FreeBSD と 4.4-Lite2 での変更がマージされたバージョンとを区別するのに使用するべきものではありません。 この目的のためにはかわりに {freebsd} マクロを使用してください。</p></div><div class=paragraph><p>以下は控え目に使ってください。</p></div><div class=ulist><ul><li><p>{freebsd} はFreeBSDのすべての版で定義されています。 変更が FreeBSD だけに適用されるとき以外は使用しないでください。 port でよくある <code>strerror()</code> ではなく <code>sys_errlist[]</code> を使うなどは FreeBSDでの変更ではなく BSD の流儀です。</p></li><li><p>FreeBSD 2.xでは {freebsd} が <code>2</code> と定義されています。 それ以前の版では <code>1</code> になっています。 その後の版でもメジャー番号に合うように上げています。</p></li><li><p>もし FreeBSD 1.x システムと FreeBSD 2.x 以降のシステムを区別する必要があれば、 上で述べた <code>BSD</code> マクロを使用するのが大抵の場合において正しい答です。 もし FreeBSD 特有の変更であれば (<code>ld</code> を使うときの共有ライブラリ用のオプションなど)、 {freebsd}を使い <code>#if {freebsd} > 1</code> のようにFreeBSD 2.x および、 それ以降のシステムを検出するのはかまいません。 もし 2.0-RELEASE 以降の FreeBSD システムを細かく検出したければ、 以下を使用することができます。</p><div class="literalblock programlisting"><div class=content><pre>#if __FreeBSD__ &gt;= 2
#include &lt;osreldate.h&gt;
#    if __FreeBSD_version &gt;= 199504
         /* 2.0.5+ release specific code here */
#    endif
#endif</pre></div></div></li></ul></div><div class=paragraph><p>これまで、何百もの port が作られてきましたが、 {freebsd} が正しく使われたのは一つか二つの場合だけでしょう。 以前の port が間違ってふさわしくない場所で そのマクロを使っているからといって、 それをまねする理由はありません。</p></div></div></div><div class=sect1><h2 id=freebsd-versions>16.7. __FreeBSD_version の値<a class=anchor href=#freebsd-versions></a></h2><div class=sectionbody><div class=paragraph><p>以下は、<span class=filename>sys/param.h</span> で定義されている <code>__FreeBSD_version</code> の便利な一覧です。</p></div><table class="tableblock frame-none grid-all stretch"><caption class=title>表 1. __FreeBSD_version values</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Release</th><th class="tableblock halign-left valign-top">__FreeBSD_version</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.0-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>119411</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199501, 199503</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.0.5-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199504</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1 以前の 2.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199508</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1.0-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199511</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1.5 以前の 2.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199512</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1.5-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199607</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1.6 以前の 2.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199608</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1.6-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199612</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.1.7-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>199612</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>220000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.1-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>220000 (変更なし)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.1-RELEASE 以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>220000 (変更なし)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>texinfo-3.9 以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>221001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>top 導入以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>221002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.2-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>222000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.2-RELEASE 以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>222001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.5-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>225000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.5-RELEASE 以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>225001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ldconfig -R マージ以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>225002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.6-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>226000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.7-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>227000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.7-RELEASE 以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>227001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=semctl&amp;sektion=2&amp;format=html">semctl(2)</a> 変更以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>227002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.8-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>228000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2.2.8-RELEASE 以降の 2.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>228001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=2&amp;format=html">mount(2)</a> 変更以前の 3.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=2&amp;format=html">mount(2)</a> 変更以降の 3.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=semctl&amp;sektion=2&amp;format=html">semctl(2)</a> 変更以降の 3.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ioctl 引数変更以降の 3.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300003</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ELF 化以降の 3.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300004</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.0-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300005</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.0-RELEASE 以降の 3.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300006</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3/4 の分岐以降の 3.0-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>300007</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.1-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>310000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.1-RELEASE 以降の 3.1-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>310001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>C++ コンストラクタ/デストラクタ順序変更の後の 3.1-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>310002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.2-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>320000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>320001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>バイナリ互換性のない IPFW とソケットの変更後の 3.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>320002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.3-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>330000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.3-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>330001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libc に <a href="https://man.freebsd.org/cgi/man.cgi?query=mkstemp&amp;sektion=3&amp;format=html">mkstemp(3)</a> が追加された後の 3.3-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>330002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.4-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>340000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.4-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>340001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.5-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>350000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.5-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>350001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3.4 が分岐した後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>dynamic linker の変更後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>C++ コンストラクタ/デストラクタ順序変更の後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=dladdr&amp;sektion=3&amp;format=html">dladdr(3)</a> 機能追加後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400003</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>__deregister_frame_info dynamic linker のバグ修正、 EGCS 1.1.2 導入後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400004</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=suser&amp;sektion=9&amp;format=html">suser(9)</a> の API 変更、newbus 化 以降の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400005</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>cdevsw 登録方法の変更後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400006</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ソケットレベルの証明書 (credential) のために so_cred が追加された後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400007</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libc_r への poll syscall ラッパー追加後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400008</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>kernel の <code>dev_t</code> 型から <code>struct spacinfo</code> ポインタへの 変更後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400009</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=2&amp;format=html">jail(2)</a> のセキュリティホール 修正後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400010</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sigset_t</code> の データ型変更後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400011</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>システムコンパイラを gcc 2.95.2 にアップグレードした 後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400012</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>動的組み込み可能な Linux モードの ioctl ハンドラが 追加された後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400013</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>OpenSSL 導入後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400014</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>GCC 2.95.2 の C++ ABI 変更で、 デフォルトを -fvtable-thunks から -fno-vtable-thunks に 変更した後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400015</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>OpenSSH 導入後の 4.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.0-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400017</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.0-RELEASE 以降の 4.0-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400018</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>チェックサム計算タイミングの変更後の 4.0-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400019</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libxpg4 が libc にマージされた後の 4.0-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400020</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Binutils を 2.10.0 にアップグレードし、 ELF バイナリのマーク付け (branding) 方法を変更し、 tcsh をベースシステムに導入した後の 4.0-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>400021</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.1-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>410000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.1-RELEASE 以降の 4.1-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>410001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=setproctitle&amp;sektion=3&amp;format=html">setproctitle(3)</a> が libutil から libc に 移動した後の 4.1-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>410002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.1.1-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>411000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.1.1-RELEASE 以降の 4.1.1-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>411001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.2-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>420000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libgcc.a と libgcc_r.a の結合および、関連する GCC linkage 変更が行なわれた後の 4.2-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>420001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.3-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>430000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>wint_t 導入後の 4.3-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>430001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>PCI パワーステート API マージ後の 4.3-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>430002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.4-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>440000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>d_thread_t 導入後の 4.4-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>440001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>マウント構造変更 (ファイルシステム kld に影響あり) 後の 4.4-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>440002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>smbfs のユーザランド部が取り込まれた後の 4.4-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>440003</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.5-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>450000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>usb の構成要素の名称が変更された後の 4.5-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>450001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> の <code>sendmail_enable</code> 変数が <code>NONE</code> という値をとれるようになった後の 4.5-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>450004</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>package 作成のデフォルトを XFree86 4 に移行した後の 4.5-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>450005</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>accept filter が修正され、 簡単なサービス妨害攻撃には影響を受けなくなった後の 4.5-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>450006</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.6-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>460000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a> をドキュメントに適合するよう修正して、 送信されたいかなるヘッダも、 ファイルから送信されたデータの総量に合計しないようにした 4.6-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>460001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.6.2-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>460002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.6-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>460100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sed -i</code> を MFC した後の 4.6-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>460101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>多くの新たな pkg_install の機能を HEAD から MFC した後の 4.6-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>460102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.7-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>470000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.7-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>470100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>sF の代わりに </em>std{in,out,err}p 参照生成を開始。 これは、std{in,out,err} をコンパイル時の定数から、 ランタイムに変更します。</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>470101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>m_aux mbuf を m_tag で置き換える mbuf の変更を MFC した後の 4.7-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>470102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>OpenSSL 0.9.7 導入後の 4.7-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>470103</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.8-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>480000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.8-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>480100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=realpath&amp;sektion=3&amp;format=html">realpath(3)</a> がスレッドセーフになった後の 4.8-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>480101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.8-STABLE における twe の 3ware API の変更</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>480102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.9-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>490000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.9-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>490100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>構造体 kinfo_eproc に e_sid が追加された後の 4.9-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>490101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rtld に libmap 機能を MFC した後の 4.9-STABLE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>490102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4.10-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>491000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ELF ヘッダフィールドの追加と ELF バイナリのマーク付け (branding) 方法の変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500001</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>kld メタデータ変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500002</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>buf/bio 変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500003</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>binutils アップグレード後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500004</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libxpg4 コードの libc へのマージと、 TASKQ インターフェイスの導入後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500005</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>AGP インターフェイス追加後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500006</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Perl を 5.6.0 にアップグレードした後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500007</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>KAME コードを 2000/07 版のソースに更新した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500008</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ether_ifattach() および ether_ifdetach() 変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500009</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>mtree のデフォルトをオリジナルの変種に戻し、 シンボリックリンクをたどる -L オプションを追加した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500010</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>kqueue API 変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500011</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=setproctitle&amp;sektion=3&amp;format=html">setproctitle(3)</a> が libutil から libc へ移動した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500012</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>最初の SMPng がコミットされた後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500013</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>&lt;sys/select.h> が &lt;sys/selinfo.h> に 移動した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500014</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libgcc.a と libgcc_r.a の結合および関連する GCC linkage 変更が行なわれた後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500015</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libc と libc_r の混合リンクを許し、 -pthread オプションを deprecate する 変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500016</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>mountd 等が使用する kernel-exported API の 安定化のため、ucred 構造体から xucred 構造体へ 移行した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500017</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>CPU 依存の最適化を制御するための make 変数 CPUTYPE が追加された後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500018</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>&lt;machine/ioctl_fd.h> が &lt;sys/fdcio.h> に移動した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500019</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ロケール名変更の後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500020</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Bzip2 導入後の 5.0-CURRENT。 また、S/Key が削除されていることも示す。</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500021</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SSE サポート後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500022</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>KSE マイルストーン 2 以降の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500023</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>d_thread_t 導入、および UUCP を ports に移動した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500024</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>64 ビットプラットホーム上のデスクリプタおよび cred 受け渡し ABI 変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500025</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>package 作成のデフォルトを XFree86 4 に移行し、libc に新たに strnstr() 関数を追加した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500026</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libc に新たに strcasestr() 関数を追加した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500027</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>smbfs のユーザランド部が取り込まれた後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500028</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>C99 の新しい特定サイズの整数型追加後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500028 (変更なし)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=sendfile&amp;sektion=2&amp;format=html">sendfile(2)</a> の戻り値が変更された後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500029</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ファイルフラグにふさわしいサイズの <code>fflags_t</code> が導入された後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500030</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>usb の構成要素の名称が変更された後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500031</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Perl 5.6.1 導入後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500032</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> の <code>sendmail_enable</code> 変数が <code>NONE</code> という値をとれるようになった後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500033</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>mtx_init() に 3 番目の引数が加わった後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500034</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>GCC 3.1 が取り込まれた 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500035</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>/usr/src に Perl がなくなった 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500036</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=dlfunc&amp;sektion=3&amp;format=html">dlfunc(3)</a> 追加後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500037</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>構造体 sockbuf のメンバの型が一部変更され、順序が変更された後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500038</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ヘッダで <em>BSD_FOO_T</em> の使用をやめ、 _FOO_T_DECLARED を使うようになった後の 5.0-CURRENT。 また、この変数は <a href="https://man.freebsd.org/cgi/man.cgi?query=bzip2&amp;sektion=1&amp;format=html">bzip2(1)</a> パッケージに対応したことが確実な目安としても使えます。</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500039</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ディスクラベルの内部構造の依存性を除く名目で行われた、 ディスク関連の機能へのさまざまな変更を加えた後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500040</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libc に <a href="https://man.freebsd.org/cgi/man.cgi?query=getopt_long&amp;sektion=3&amp;format=html">getopt_long(3)</a> を加えた後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500041</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Binutils 2.13 にアップグレードした後の 5.0-CURRENT。このアップグレードには、新たな FreeBSD の emulation, vec および出力形式が含まれている。</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500042</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>libc に pthread_XXX への弱いスタブを追加し、 libXThrStub.so が obsolete になった後の 5.0-CURRENT。 5.0-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500043</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RELENG_5_0 が分岐した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>&lt;sys/dkstat.h> は空なので include すべきではない</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>d_mmap_t インターフェイス変更後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>taskqueue_swi が Giant ロック無しで実行され、 Giant ロックされて実行される taskqueue_swi_giant が追加された後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500103</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>cdevsw_add() と cdevsw_remove() はもう存在しません。 MAJOR_AUTO 割り当て機能が登場しました</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500104</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>cdevsw の新たな初期化方法が導入された後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500105</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>devstat_add_entry() が devstat_new_entry() に置き換えられました</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500106</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Devstat のインターフェイス変更。 sys/sys/param.h 1.149 を参照のこと</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500107</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>トークンリングインターフェイスの変更</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500108</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>vm_paddr_t の追加</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500109</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=realpath&amp;sektion=3&amp;format=html">realpath(3)</a> がスレッドセーフになった後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500110</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=usbhid&amp;sektion=3&amp;format=html">usbhid(3)</a> が NetBSD と同期した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500111</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>新たな NSS 実装と POSIX.1 準拠の getpw*_r, getgr*_r 関数が導入後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500112</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>古い rc システムを削除した後の 5.0-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>500113</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>5.1-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RELENG_5_1 が分岐した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>sigtimedwait(2) と sigwaitinfo(2) の動作を修正した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=bus_dma_tag_create&amp;sektion=9&amp;format=html">bus_dma_tag_create(9)</a> に lockfunc と lockfuncarg フィールドを追加した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>GCC 3.3.1-pre 20030711 snapshot 導入後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501103</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>5.1-CURRENT における twe の 3ware API の変更</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501104</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>/bin と /sbin がダイナミックリンクされ、 ライブラリを /lib に移動した 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501105</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Coda 6.x のカーネルサポートを追加した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501106</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>16550 UART 定数を <span class=filename>&lt;dev/sio/sioreg.h></span> から <span class=filename>&lt;dev/ic/ns16550.h></span> に移動した後の 5.1-CURRENT。 また、rtld が 無条件で libmap 機能をサポートした時点。</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501107</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>PFIL_HOOKS API を更新した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501108</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>kiconv(3) を追加した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501109</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>cdevsw の open および close のデフォルトの操作を変更した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501110</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>cdevsw のレイアウトを変更した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501111</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>kobj の多重継承を追加した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501112</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>構造体 ifnet の if_xname が変更された後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501113</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>/bin と /sbin をダイナミックリンクに変更した後の 5.1-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>501114</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>5.2-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>5.2.1-RELEASE</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502010</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RELENG_5_2 が分岐した後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502100</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><em>cxa_atexit/</em>cxa_finalize 関数が libc に追加された後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502101</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>デフォルトの pthread ライブラリを libc_r から libpthread に変更した後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502102</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>デバイスドライバ API の大規模パッチをあてた後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502103</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>getopt_long_only() が追加された後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502104</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>C に対して NULL が ((void *)0) になり、warning をより多く出すようになった 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502105</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>pf がビルドおよびインストールされるようになった後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502106</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>sparc64 で time_t を 64 ビットの値に変更した後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502107</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>一部のヘッダで Intel C/C++ に対応し、 execve(2) をより厳密に POSIX に適合させた後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502108</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>bus_alloc_resource_any API 導入後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502109</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>UTF-8 ロケール追加後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502110</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>getvfsent(3) API を削除した後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502111</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>make に .warning 命令を追加した後の 5.2-CURRENT</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>502112</p></td></tr></tbody></table><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>(2.2-STABLE は 2.2.5-RELESE 以後、 "2.2.5-STABLE" と呼ばれることがあります。) 見てのとおりこれは年・月というフォーマットになっていましたが、 バージョン 2.2 からより直接的にメジャー/マイナー番号を使うように変更になりました。 並行していくつかのブランチ (枝分かれしたバージョン) を開発する場合には、 リリースされた日付でそれらのリリースを分類することが不可能だからです (あなたが今 port を作成するときに、古い -CURRENT 達について心配する必要はありません。 これは参考のために挙げられているに過ぎないからです)。</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=dads-after-port-mk>16.8. <span class=filename>bsd.port.mk</span> の後に書くこと<a class=anchor href=#dads-after-port-mk></a></h2><div class=sectionbody><div class=paragraph><p><code>.include &lt;bsd.port.mk></code> の行の後には何も書かないようにしてください。 大抵の場合は <span class=filename>Makefile</span> の中程のどこかで <span class=filename>bsd.port.pre.mk</span> をインクルードして、 最後に <span class=filename>bsd.port.pre.mk</span> をインクルードすることによって避けることができます。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><span class=filename>bsd.port.pre.mk</span>/<span class=filename>bsd.port.post.mk</span> のペアか <span class=filename>bsd.port.mk</span> だけのどちらかだけをインクルードし、二つを混ぜないでください。</p></div></td></tr></tbody></table></div><div class=paragraph><p>前者はいくつかの変数の定義だけをして <span class=filename>Makefile</span> でのテストに使用し、後者は残りを定義します。</p></div><div class=paragraph><p>以下は <span class=filename>bsd.port.pre.mk</span> で定義される重要な変数です (これは、すべてではありません。 完全なリストは <span class=filename>bsd.port.mk</span> を参照してください)。</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">変数名</th><th class="tableblock halign-left valign-top">解説</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ARCH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>uname -m</code> で返されるアーキテクチャ。(例、<code>i386</code>)。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>OPSYS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>uname -s</code> で返されるオペレーティングシステム (例、<code>FreeBSD</code>)。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>OSREL</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>オペレーティングシステムのリリースバージョン (例、<code>2.1.5</code>, <code>2.2.7</code>)。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>OSVERSION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>数字形式のオペレーティングシステムのバージョン、 上記の <a href=#freebsd-versions><code>__FreeBSD_version</code></a> と同じです。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PORTOBJFORMAT</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>システムのオブジェクトフォーマット (<code>elf</code> あるいは <code>aout</code> ただし、"最近の" FreeBSD のバージョンでは <code>aout</code> は廃止予定になっています)。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LOCALBASE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>"local" ツリーのベース。 (例、<code>/usr/local/</code>)。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>X11BASE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>"X11" ツリーのベース。 (例、<code>/usr/X11R6/</code>)。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PREFIX</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ports のインストール先 (<a href=#porting-prefix><code>PREFIX</code>について</a>を参照)。</p></td></tr></tbody></table><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>USE_IMAKE</code>, <code>USE_X_PREFIX</code> あるいは <code>MASTERDIR</code> などの変数を定義する必要がある場合には、 <span class=filename>bsd.port.pre.mk</span> をインクルード前に定義してください。 他のものは <span class=filename>bsd.port.pre.mk</span> の前でも後でもかまいません。</p></div></td></tr></tbody></table></div><div class=paragraph><p>以下は <span class=filename>bsd.port.pre.mk</span> の後に書けるものの例です。</p></div><div class="literalblock programlisting"><div class=content><pre># no need to compile lang/perl5 if perl5 is already in system
.if ${OSVERSION} &gt; 300003
BROKEN= perl is in system
.endif

# only one shlib version number for ELF
.if ${PORTOBJFORMAT} == &#34;elf&#34;
TCL_LIB_FILE=  ${TCL_LIB}.${SHLIB_MAJOR}
.else
TCL_LIB_FILE=  ${TCL_LIB}.${SHLIB_MAJOR}.${SHLIB_MINOR}
.endif

# software already makes link for ELF, but not for a.out
post-install:
.if ${PORTOBJFORMAT} == &#34;aout&#34;
       ${LN} -sf liblinpack.so.1.0 ${PREFIX}/lib/liblinpack.so
.endif</pre></div></div><div class=paragraph><p><code>BROKEN=</code> と <code>TCL_LIB_FILE=</code> の後にスペースではなくタブを使うことを覚えていましたか? :-)</p></div></div></div><div class=sect1><h2 id=dads-documentation>16.9. 付加的な文書のインストール<a class=anchor href=#dads-documentation></a></h2><div class=sectionbody><div class=paragraph><p>普通のマニュアルや info ファイルの他にユーザにとって有用だと思えるような文書がある場合には、 <span class=filename>PREFIX/shared/doc</span> の下にインストールしてください。 これは前記と同様 <code>post-install</code> ターゲットの中から行なうと良いでしょう。</p></div><div class=paragraph><p>まず、あなたの port のために新しいディレクトリを作ります。 どの port の文書か簡単にわかるような名前にする必要がありますので、 普通は <code>PORTNAME</code> を使うと良いでしょう。 もちろん、ユーザが異なるバージョンのものを同時に使うことが予想される port の場合には <code>PKGNAME</code> をそのまま使っても構いません。</p></div><div class=paragraph><p>ユーザが <span class=filename>/etc/make.conf</span> でこの部分を禁止するために <code>NOPORTDOCS</code> という変数をセットしている場合には、 これらの文書がインストールされないようにしてください。 こんな具合です。</p></div><div class="literalblock programlisting"><div class=content><pre>post-install:
.if !defined(NOPORTDOCS)
        ${MKDIR} ${DOCSDIR}
        ${INSTALL_MAN} ${WRKSRC}/docs/xvdocs.ps ${DOCSDIR}
.endif</pre></div></div><div class=paragraph><p>ここでは、変数をいくつかと、それを <span class=filename>Makefile</span> で利用した時にどう展開されるかを説明します。</p></div><div class=ulist><ul><li><p><code>${DATADIR}</code> は <span class=filename>${PREFIX}/shared/${PORTNAME}</span> に展開されます。</p></li><li><p><code>${DOCSDIR}</code> は <span class=filename>${PREFIX}/shared/doc/${PORTNAME}</span> に展開されます。</p></li><li><p><code>${EXAMPLESDIR}</code> は <span class=filename>${PREFIX}/shared/examples/${PORTNAME}</span> に展開されます。</p></li></ul></div><div class=paragraph><p>文書ファイルおよびディレクトリはすべて <span class=filename>pkg-plist</span> の中に <code>%%PORTDOCS%%</code> を頭につけて書く必要があります。 たとえば、次のようにしてください。</p></div><div class="literalblock programlisting"><div class=content><pre>%%PORTDOCS%%%%DOCSDIR%%/AUTHORS
%%PORTDOCS%%%%DOCSDIR%%/CONTACT
%%PORTDOCS%%@dirrm %%DOCSDIR%%</pre></div></div><div class=paragraph><p>インストール時に <span class=filename>pkg-message</span> ファイルを利用してメッセージを表示することができます。詳細は <a href=#porting-message>pkg-message を使う</a> のセクションを参照してください。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><span class=filename>pkg-message</span> ファイルを <span class=filename>pkg-plist</span> に加える必要はありません。</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=dads-subdirs>16.10. ディレクトリ構成<a class=anchor href=#dads-subdirs></a></h2><div class=sectionbody><div class=paragraph><p>インストール時には <code>PREFIX</code> の正しいサブディレクトリにファイルを置くように心がけてください。 ソフトウェアによっては新しいディレクトリを一つ作って、 ファイルを全部それに入れてしまうものがありますが、 それは良くありません。 また、バイナリ、ヘッダファイルとマニュアル以外のすべてを <span class=filename>lib</span> というディレクトリに入れてしまう port もありますが、これも BSD 的なファイルシステム構成とはうまく合いません。 これは以下のように分散すべきです。 <span class=filename>etc</span> にセットアップ/コンフィグレーションファイル、 <span class=filename>libexec</span> に内部で使用されるプログラム (コマンドラインから呼ばれることのないコマンド)、 <span class=filename>sbin</span> に管理者用のコマンド、 <span class=filename>info</span> に GNU Info 用の文書、 そして <span class=filename>share</span> にアーキテクチャに依存しないファイルが入ります。 詳細については <a href="https://man.freebsd.org/cgi/man.cgi?query=hier&amp;sektion=7&amp;format=html">hier(7)</a> を参照してください。 <span class=filename>/usr</span> の構成方針はほとんどそのまま <span class=filename>/usr/local</span> にもあてはまります。 USENET "ニュース"を扱う ports は例外です。 これらはファイルのインストール先として <span class=filename>PREFIX/news</span> を使用します。</p></div></div></div><div class=sect1><h2 id=porting-cleaning>16.11. 空のディレクトリの削除<a class=anchor href=#porting-cleaning></a></h2><div class=sectionbody><div class=paragraph><p>ports は削除の際に、 自分自身を消去したあとに (ディレクトリの) 削除をするようにしてください。 これは大抵の場合 <code>@dirrm</code> の行を ports が作成するすべてのディレクトリについて加えることによって実現できます。 親ディレクトリは子ディレクトリを先に消さないと消せないことに注意してください。</p></div><div class="literalblock programlisting"><div class=content><pre> :
lib/X11/oneko/pixmaps/cat.xpm
lib/X11/oneko/sounds/cat.au
 :
@dirrm lib/X11/oneko/pixmaps
@dirrm lib/X11/oneko/sounds
@dirrm lib/X11/oneko</pre></div></div><div class=paragraph><p>といった感じです。</p></div><div class=paragraph><p>しかし時として、 他の port とディレクトリを共有しているために <code>@dirrm</code> がエラーを返すことがあります。 <code>rmdir</code> を <code>@unexec</code> から呼びだすことによって、 警告(warning)なしで空のディレクトリのみを削除することができます。</p></div><div class="literalblock programlisting"><div class=content><pre>@unexec rmdir %D/shared/doc/gimp 2&gt;/dev/null || true</pre></div></div><div class=paragraph><p>これを使えば、たとえ他の port がファイルをインストールしていて <span class=filename>PREFIX/shared/doc/gimp</span> が空でない場合でもエラーメッセージは表示されませんし、 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1&amp;format=html">pkg_delete(1)</a> が異常終了することもありません。</p></div></div></div><div class=sect1><h2 id=dads-uid>16.12. UID<a class=anchor href=#dads-uid></a></h2><div class=sectionbody><div class=paragraph><p>あなたの port が、 インストールされるシステム上に特定のユーザを必要とする場合は <span class=filename>pkg-install</span> スクリプトから <code>pw</code> コマンドを実行して自動的にそのユーザを追加するようにしてください。 <a class=package href=https://cgit.freebsd.org/ports/tree/net/cvsup-mirror/>net/cvsup-mirror</a> の port が参考になるでしょう。</p></div><div class=paragraph><p>あなたの port がバイナリの package としてインストールされる場合とコンパイルされる場合の両方で、 同じユーザー/グループ ID を使わなければならないのなら、50 から 999 の間で空いている UID を選んで登録してください。 <a class=package href=https://cgit.freebsd.org/ports/tree/japanese/Wnn6/>japanese/Wnn6</a> の port が参考になるでしょう。</p></div><div class=paragraph><p>既にシステムや他の port で利用されている UID を使わないように十分注意してください。</p></div><div class=paragraph><p>現在の 50 から 999 までの間の UID は以下のとおりです。</p></div><div class="literalblock programlisting"><div class=content><pre>bind:*:53:53:Bind Sandbox:/:/sbin/nologin
majordom:*:54:54:Majordomo Pseudo User:/usr/local/majordomo:/nonexistent
cyrus:*:60:60:the cyrus mail server:/nonexistent:/nonexistent
gnats:*:61:1:GNATS database owner:/usr/local/shared/gnats/gnats-db:/bin/sh
proxy:*:62:62:Packet Filter pseudo-user:/nonexistent:/nonexistent
uucp:*:66:66:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67:X-10 daemon:/usr/local/xten:/nonexistent
pop:*:68:6:Post Office Owner (popper):/nonexistent:/sbin/nologin
wnn:*:69:7:Wnn:/nonexistent:/nonexistent
pgsql:*:70:70:PostgreSQL pseudo-user:/usr/local/pgsql:/bin/sh
oracle:*:71:71::0:0:Oracle:/usr/local/oracle7:/sbin/nologin
ircd:*:72:72:IRC daemon:/nonexistent:/nonexistent
ircservices:*:73:73:IRC services:/nonexistent:/nonexistent
ifmail:*:75:66:Ifmail user:/nonexistent:/nonexistent
www:*:80:80:World Wide Web Owner:/nonexistent:/sbin/nologin
alias:*:81:81:QMail user:/var/qmail/alias:/nonexistent
qmaild:*:82:81:QMail user:/var/qmail:/nonexistent
qmaill:*:83:81:QMail user:/var/qmail:/nonexistent
qmailp:*:84:81:QMail user:/var/qmail:/nonexistent
qmailq:*:85:82:QMail user:/var/qmail:/nonexistent
qmailr:*:86:82:QMail user:/var/qmail:/nonexistent
qmails:*:87:82:QMail user:/var/qmail:/nonexistent
mysql:*:88:88:MySQL Daemon:/var/db/mysql:/sbin/nologin
vpopmail:*:89:89:VPop Mail User:/usr/local/vpopmail:/nonexistent
firebird:*:90:90:Firebird Database Administrator:/usr/local/firebird:/bin/sh
mailman:*:91:91:Mailman User:/usr/local/mailman:/sbin/nologin
gdm:*:92:92:GDM Sandbox:/:/sbin/nologin
jabber:*:93:93:Jabber Daemon:/nonexistent:/nonexistent
p4admin:*:94:94:Perforce admin:/usr/local/perforce:/sbin/nologin
interch:*:95:95:Interchange user:/usr/local/interchange:/sbin/nologin
squeuer:*:96:96:SQueuer Owner:/nonexistent:/bin/sh
mud:*:97:97:MUD Owner:/usr/local/shared/dgd:/bin/sh
msql:*:98:98:mSQL-2 pseudo-user:/var/db/msqldb:/bin/sh
rscsi:*:99:99:Remote SCSI:/usr/local/rscsi:/usr/local/sbin/rscsi
squid:*:100:100:squid caching-proxy pseudo user:/usr/local/squid:/sbin/nologin
quagga:*:101:101:Quagga route daemon pseudo user:/usr/local/etc/quagga:/sbin/nologin
ganglia:*:102:102:Ganglia User:/nonexistent:/sbin/nologin
sgeadmin:*:103:103:Sun Grid Engine Admin:/nonexistent:/sbin/nologin
slimserv:*:104:104:Slim Devices SlimServer pseudo-user:/nonexistent:/sbin/nologin
fido:*:111:111:Fido System:/usr/local/fido:/bin/sh
postfix:*:125:125:Postfix Mail System:/var/spool/postfix:/sbin/nologin
rbldns:*:153:153:rbldnsd pseudo-user:/nonexistent:/sbin/nologin
sfs:*:171:171:Self-Certifying File System:/nonexistent:/sbin/nologin
agk:*:172:172:AquaGateKeeper:/nonexistent:/nonexistent
ldap:*:389:389:OpenLDAP Server:/nonexistent:/sbin/nologin
drweb:*:426:426:Dr.Web Mail Scanner:/nonexistent:/sbin/nologin
qtss:*:554:554:Darwin Streaming Server:/nonexistent:/sbin/nologin
ircdru:*:555:555:Russian hybrid IRC server:/nonexistent:/bin/sh
bacula:*:910:910:Bacula Daemon:/var/db/bacula:/sbin/nologin</pre></div></div><div class=paragraph><p>以下は、現在予約されている GID の一覧です。</p></div><div class="literalblock programlisting"><div class=content><pre>bind:*:53:
cyrus:*:60:
proxy:*:62:
authpf:*:63:
uucp:*:66:
dialer:*:68:
network:*:69:
pgsql:*:70:
www:*:80:
qnofiles:*:81:
qmail:*:82:
mailman:*:91:
postfix:*:125:
maildrop:*:126:
rbldns:*:153:
qtss:*:554:
ircdru:*:555:</pre></div></div><div class=paragraph><p>このリストを最新の状態に保つためにも、 この範囲の UID や GID を予約するような port を作ったり、 既存の port にそのような改変を行なってわたしたちに送るときには UID の予約に関する注意書きをつけてください。</p></div></div></div><div class=sect1><h2 id=dads-rational>16.13. 合理的な port<a class=anchor href=#dads-rational></a></h2><div class=sectionbody><div class=paragraph><p><span class=filename>Makefile</span> は単純かつ適切であるべきです。もし、 <span class=filename>Makefile</span> を数行短かくできたり、 もっと読みやすくできるのであればそうしてください。 たとえば、 シェルの <code>if</code> 構文を使うかわりに make の <code>.if</code> 構文を使う、 <code>EXTRACT*</code> の再定義で代用できるのであれば <code>do-extract</code> を再定義しない、 <code>CONFIGURE_ARGS += --prefix=${PREFIX}</code> とするかわりに <code>GNU_CONFIGURE</code> とする、などです。</p></div><div class=paragraph><p>何かをするのに自分で新しくコードをたくさん書かなければならなくなった場合は、 戻って <span class=filename>bsd.port.mk</span> であなたがやろうとしていることが既に実装されていないか見直してください。 読むのは大変ですが、難しく見える問題で <span class=filename>bsd.port.mk</span> が簡単な解決法を提供しているものが数多くあります。</p></div></div></div><div class=sect1><h2 id=dads-cc>16.14. <code>CC</code> および <code>CXX</code> の尊重<a class=anchor href=#dads-cc></a></h2><div class=sectionbody><div class=paragraph><p>Port は <code>CC</code> および <code>CXX</code> 変数を尊重すべきです。ここで言いたいのは、port は、既存の値を上書きしてこれらの変数をまるごと設定しなおすべきではなく、 その代わり必要な値を既存の値に追加してゆくべきだということです。 そうすれば、すべての ports に影響するビルドオプションをグローバルに設定できます。</p></div><div class=paragraph><p>Port がこれらの変数を尊重しない場合は、 <span class=filename>Makefile</span> に <code>NO_PACKAGE=ignores either cc or cxx</code> を追加してください。</p></div><div class=paragraph><p><code>CC</code> と <code>CXX</code> 変数を尊重している <span class=filename>Makefile</span> の例を次に示します。<code>?=</code> に注意してください。</p></div><div class="literalblock programlisting"><div class=content><pre>CC ?= gcc</pre></div></div><div class="literalblock programlisting"><div class=content><pre>CXX ?= g++</pre></div></div><div class=paragraph><p>こちらは、<code>CC</code> 変数も <code>CXX</code> 変数も尊重していない例です。</p></div><div class="literalblock programlisting"><div class=content><pre>CC = gcc</pre></div></div><div class="literalblock programlisting"><div class=content><pre>CXX = g++</pre></div></div><div class=paragraph><p>FreeBSD システム上では、<code>CC</code> および <code>CFLAGS</code> 変数は、どちらも <span class=filename>/etc/make.conf</span> で定義できます。最初の例では、システム全体の定義を保存している <span class=filename>/etc/make.conf</span> で値がすでに設定されてない場合に限って、値を設定します。 2 番目の例では、すでに設定されていた内容を上書きしてしまいます。</p></div></div></div><div class=sect1><h2 id=dads-cflags>16.15. <code>CFLAGS</code> の尊重<a class=anchor href=#dads-cflags></a></h2><div class=sectionbody><div class=paragraph><p><code>CFLAGS</code> 変数は尊重すべきです。 ここでいいたいのは、port は、 既存の値を上書きしてこの変数をまるごと設定しなおすべきではなく、 その代わり必要な値を既存の値に追加してゆくべきだということです。 そうすれば、すべてての ports に影響するビルドオプションをグローバルに設定できます。</p></div><div class=paragraph><p>port がこれを尊重しない場合は、 <code>NO_PACKAGE=ignores cflags</code> を <span class=filename>Makefile</span> に加えてください。</p></div><div class=paragraph><p><code>CFLAGS</code> 変数をきちんと考慮した <span class=filename>Makefile</span> の例を以下に示します。 <code>+=</code> の部分に注目してください。</p></div><div class="literalblock programlisting"><div class=content><pre>CFLAGS += -Wall -Werror</pre></div></div><div class=paragraph><p>次は <code>CFLAGS</code> 変数を考慮しない <span class=filename>Makefile</span> の例です。</p></div><div class="literalblock programlisting"><div class=content><pre>CFLAGS = -Wall -Werror</pre></div></div><div class=paragraph><p><code>CFLAGS</code> 変数は、FreeBSD システムの <span class=filename>/etc/make.conf</span> で定義されています。 最初の例では既存の定義を保存しつつ <code>CFLAGS</code> 変数にオプションフラグを追加しているのに対し、 二番目の例では既存の定義をすべて無効にしてしまっています。</p></div></div></div><div class=sect1><h2 id=dads-config>16.16. コンフィグレーション (設定) ファイル<a class=anchor href=#dads-config></a></h2><div class=sectionbody><div class=paragraph><p>もしあなたの port が設定ファイルを <span class=filename>PREFIX/etc</span> に置く必要がある場合には、それを単純にインストールしたり、 <span class=filename>pkg-plist</span> に加えては<em>いけません</em>。 こうしてしまうと <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1&amp;format=html">pkg_delete(1)</a> によってユーザが苦労して作ったファイルが消えてしまったり、 新しくインストールする時に上書きされてしまったりします。</p></div><div class=paragraph><p>かわりに見本となるファイルをサフィックス (<span class=filename>filename.sample</span> が良いでしょう) を付けてインストールして<a href=#porting-message>メッセージ</a>を表示し、 ソフトウェアを動かす前にユーザがそのファイルをコピーして編集をしなければならないことを知らせましょう。</p></div></div></div><div class=sect1><h2 id=dads-freedback>16.17. フィードバック<a class=anchor href=#dads-freedback></a></h2><div class=sectionbody><div class=paragraph><p>port を作るためにソフトウェアに変更を加えたら、 なるべく原作者にその旨を伝えてパッチ等を送ってください。 これらが次のリリースに取り入れられればアップグレードが楽になります。</p></div></div></div><div class=sect1><h2 id=dads-readme>16.18. <span class=filename>README.html</span><a class=anchor href=#dads-readme></a></h2><div class=sectionbody><div class=paragraph><p><span class=filename>README.html</span> というファイルを含めてはいけません。 このファイルは、cvs コレクションの一部ではなく、 <code>make readme</code> コマンドで生成されるファイルです。</p></div></div></div><div class=sect1><h2 id=dads-broken>16.19. Port に <code>BROKEN</code>, <code>FORBIDDEN</code> などの印をつける<a class=anchor href=#dads-broken></a></h2><div class=sectionbody><div class=paragraph><p>ある port にセキュリティ脆弱性があることが判明したり、 根本的に壊れてしまい修正に何時間もの注意深い作業が必要になったり、 基本的には廃れてしまったものの、 何らかの理由で ports ツリーには残される (もちろんあとで修正しますよね?) という日が来るのは避けられません。 ある port が壊れていることを示すために、port の <span class=filename>Makefile</span> では 3 つの <code>make</code> 変数が使えます。以下の <code>make</code> 変数の値は、 その port が壊れている理由を説明するためにユーザに示されます。 それぞれの make 変数は、ユーザと <span class=filename>Makefile</span> を処理する自動化システムに対して根本的に異なる意味を伝えますので、 正しい <code>make</code> 変数をお使いください。</p></div><div class=ulist><ul><li><p><code>BROKEN</code> は、動作しないためインストールすべきでない port 用のものです。これは、ユーザがその port をインストールしないようにしますが、 <code>BROKEN</code> とされた port は <a href=http://bento.FreeBSD.org/>Bento クラスタ</a>で引き続きビルドされます。 ユーザには port をインストールしてほしくないけれども Bento ではビルドしてほしい場合は、port を <code>BROKEN</code> にしてください。</p></li><li><p><code>FORBIDDEN</code> は、セキュリティ脆弱性があったり、その port をインストールすると FreeBSD システムの安全性に重大な懸念を生じる (たとえば、セキュアでないという評判があるプログラムや、 容易に悪用できるサービスを提供するプログラムなど) port 用のものです。 あるソフトウェアの一部に脆弱性があることが判明し、 修正がリリースされていない場合は <code>FORBIDDEN</code> にすべきです。 理想的には、セキュリティ脆弱性が発見された時は、 脆弱性を抱えた FreeBSD ホストの数を減らすために、 ただちに ports を更新すべきです (我々は、セキュアであるという評判を得たいのです)。 しかし、脆弱性が公表されてから、 脆弱性を抱えたソフトウェアの新しい版がリリースされるまでに無視できない時間があくことがままあります。 セキュリティ以外の理由で port を <code>FORBIDDEN</code> にしないでください。</p></li><li><p><code>IGNORE</code> は、どんな理由であれビルドすべきではない port 用です。 ユーザも <a href=http://bento.FreeBSD.org/>Bento クラスタ</a> も、どんな状況であれ <code>IGNORE</code> とされた port はビルドしません。 嘘だと思うなら、port のビルドを妨げるのに <code>IGNORE</code> を使ってみてください。</p></li></ul></div><div class=paragraph><p>この変数を使うのは、port が更新できない場合の最後の手段にしてください。 ずっと壊れたままの port は、ports ツリーから完全に削除すべきです。</p></div></div></div><div class=sect1><h2 id=dads-workarounds>16.20. 必要な回避策<a class=anchor href=#dads-workarounds></a></h2><div class=sectionbody><div class=paragraph><p>古いバージョンの FreeBSD のソフトウェアにあるバグを回避する必要があることがあります。</p></div><div class=ulist><ul><li><p><a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> は、少なくとも 4.8 と 5.0 を含むいくつかのバージョンで、<code>OSVERSION</code> に基づく比較に関してバグがあります。 これは、<code>make describe</code> の最中にエラーを起こすことになりやすく (したがって <code>make index</code> 全体も失敗することに) なります。回避策は、条件比較を括弧にいれることで、たとえば</p><div class="literalblock programlisting"><div class=content><pre>if ( ${OSVERSION} &gt; 500023 )</pre></div></div></li></ul></div><div class=paragraph><p>となります。4.9 と 5.2 で port のインストールテストを行っても、 この問題は<em>見つかりません</em>。</p></div></div></div><div class=sect1><h2 id=dads-misc>16.21. その他諸々<a class=anchor href=#dads-misc></a></h2><div class=sectionbody><div class=paragraph><p>ファイル <span class=filename>pkg-descr</span> と <span class=filename>pkg-plist</span> はそれぞれ二重にチェックしてください。 再検討してもっと良い記述があればそれに置きかえてください。</p></div><div class=paragraph><p>GNU General Public License (GNU一般公有使用許諾) のコピーは (すでにあるので) コピーしないでください。 お願いします。</p></div><div class=paragraph><p>法律に関することには十分注意をはらってください。 わたしたちに法律に反するような形でソフトウェアの配布をさせないでください!</p></div></div></div><div class=sect1><h2 id=dads-stuck>16.22. 困ったら…​<a class=anchor href=#dads-stuck></a></h2><div class=sectionbody><div class=paragraph><p>わたしたちに質問を送る前に、 既存の port の例と <span class=filename>bsd.port.mk</span> をちゃんと読んでください! <em>;)</em></p></div><div class=paragraph><p>それでもわからないことがあったら一人で悩まないでどんどん質問してください! <em>:-)</em></p></div></div></div></div><hr><div class=last-modified><p><strong>最終更新日</strong>: 2024年3月9日 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/ja/books/porters-handbook/port-upgrading class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/ja/books/porters-handbook/porting-samplem class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#dads-intro>16.1. はじめに</a></li><li><a href=#dads-strip>16.2. バイナリの strip</a></li><li><a href=#dads-install>16.3. <code>INSTALL_*</code> マクロ</a></li><li><a href=#porting-wrkdir>16.4. <code>WRKDIR</code></a></li><li><a href=#porting-wrkdirprefix>16.5. <code>WRKDIRPREFIX</code></a></li><li><a href=#porting-versions>16.6. OS の種類やバージョンの識別</a></li><li><a href=#freebsd-versions>16.7. __FreeBSD_version の値</a></li><li><a href=#dads-after-port-mk>16.8. <span class=filename>bsd.port.mk</span> の後に書くこと</a></li><li><a href=#dads-documentation>16.9. 付加的な文書のインストール</a></li><li><a href=#dads-subdirs>16.10. ディレクトリ構成</a></li><li><a href=#porting-cleaning>16.11. 空のディレクトリの削除</a></li><li><a href=#dads-uid>16.12. UID</a></li><li><a href=#dads-rational>16.13. 合理的な port</a></li><li><a href=#dads-cc>16.14. <code>CC</code> および <code>CXX</code> の尊重</a></li><li><a href=#dads-cflags>16.15. <code>CFLAGS</code> の尊重</a></li><li><a href=#dads-config>16.16. コンフィグレーション (設定) ファイル</a></li><li><a href=#dads-freedback>16.17. フィードバック</a></li><li><a href=#dads-readme>16.18. <span class=filename>README.html</span></a></li><li><a href=#dads-broken>16.19. Port に <code>BROKEN</code>, <code>FORBIDDEN</code> などの印をつける</a></li><li><a href=#dads-workarounds>16.20. 必要な回避策</a></li><li><a href=#dads-misc>16.21. その他諸々</a></li><li><a href=#dads-stuck>16.22. 困ったら…​</a></li></ul></nav><hr><div class=resources><h3>リソース</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="PDF 版のダウンロード"></i><a href=https://download.freebsd.org/doc/ja/books/porters-handbook/porters-handbook_ja.pdf>PDF 版のダウンロード</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ja/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/ja/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>日本語</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/ja class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/ja/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>