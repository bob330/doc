<!doctype html><html class=theme-light lang=ja><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/ja/books/handbook/config/><title>第11章 設定とチューニング | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="第11章 設定とチューニング"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ja"><meta property="og:url" content="http://172.16.201.134:1313/ja/books/handbook/config/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/ja\/books\/handbook\/config\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ja>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/ja/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/ja/books>Books</a></li><li><a href=http://172.16.201.134:1313/ja/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/ja/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ja>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/preface/>前書き</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-audience>想定している読者</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-changes-from3>第 3 版からの変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-changes-from2>第 2 版 (2004) からの変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-changes>第 1 版 (2001) からの変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-overview>この文書の構成</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-conv>この文書で用いられている表記法</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-acknowledgements>謝辞</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/parti/>パートI. 導入</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/>第1章 はじめに</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/#introduction-synopsis>1.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/#nutshell>1.2. FreeBSD へようこそ!</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/#history>1.3. FreeBSD プロジェクトについて</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/>第2章 FreeBSD のインストール</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. 最小ハードウェア要件</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-pre>2.3. インストール前に行う作業</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-start>2.4. インストールの開始</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#using-bsdinstall>2.5. bsdinstall の使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-partitioning>2.6. ディスク領域の割り当て</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-fetching-distribution>2.7. 配布ファイルのダウンロード</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-post>2.8. ネットワークインターフェース、アカウント、タイムゾーン、 サービスおよびセキュリティオプションの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.9. トラブルシューティング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#using-live-cd>2.10. Live CD を使う</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/basics/>第3章 FreeBSD の基礎知識</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-synopsis>3.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#consoles>3.2. 仮想コンソールと端末</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#users-synopsis>3.3. ユーザと基本的なアカウント管理</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#permissions>3.4. 許可属性</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#dirstructure>3.5. ディレクトリ構造</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#disk-organization>3.6. ディスク構成</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#mount-unmount>3.7. ファイルシステムのマウントとアンマウント</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-processes>3.8. プロセスおよびデーモン</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#shells>3.9. シェル</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#editors>3.10. テキストエディタ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-devices>3.11. デバイスとデバイスノード</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-more-information>3.12. マニュアルページ</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/ports/>第4章 アプリケーションのインストール - packages と ports</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-synopsis>4.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-overview>4.2. ソフトウェアのインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-finding-applications>4.3. ソフトウェアの探し方</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#pkgng-intro>4.4. pkg によるバイナリ package の管理</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-using>4.5. Ports Collection の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-poudriere>4.6. Poudriere を用いた package の構築</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-nextsteps>4.7. インストール後の作業</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-broken>4.8. うまく動作しない ports に遭遇した場合には</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/x11/>第5章 X Window System</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x11-synopsis>5.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-understanding>5.2. 用語の説明</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-install>5.3. Xorg のインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-config>5.4. Xorg の設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-fonts>5.5. Xorg でのフォントの使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-xdm>5.6. X ディスプレイマネージャ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x11-wm>5.7. デスクトップ環境</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-compiz-fusion>5.8. Compiz Fusion のインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x11-troubleshooting>5.9. トラブルシューティング</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partii/>パートII. 日々の生活</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/>第6章 デスクトップアプリケーション</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-synopsis>6.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-browsers>6.2. ブラウザ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-productivity>6.3. 生産的なアプリケーション</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-viewers>6.4. ドキュメントビューア</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-finance>6.5. 財務管理ソフトウェア</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/>第7章 マルチメディア</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#multimedia-synopsis>7.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#sound-setup>7.2. サウンドカードの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#sound-mp3>7.3. MP3 オーディオ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#video-playback>7.4. ビデオ再生</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#tvcard>7.5. TV カードの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#mythtv>7.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#scanners>7.7. 画像スキャナ</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/>第8章 FreeBSD カーネルのコンフィグレーション</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. なぜカスタムカーネルを作るか?</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-devices>8.3. システムのハードウェアについて知る</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-config>8.4. コンフィグレーションファイル</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-building>8.5. カスタムカーネルの構築とインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-trouble>8.6. 問題が起きた場合には</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/printing/>第9章 プリンタの利用</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-synopsis>9.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-intro-spooler>9.2. はじめに</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-intro-setup>9.3. 基本的な設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-advanced>9.4. プリンタ設定上級編</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-using>9.5. プリンタを使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-lpd-alternatives>9.6. 標準スプーラの代替品</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-troubleshooting>9.7. トラブルシューティング</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/>第10章 Linux® バイナリ互換機能</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/#linuxemu-synopsis>10.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Linux® バイナリ互換機能の設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/#linuxemu-advanced>10.3. 高度なトピックス</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partiii/>パートIII. システム管理</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle checked>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/config/>第11章 設定とチューニング</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#_この章では>11.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-core-configuration>11.2. 中核となる設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-appconfig>11.3. アプリケーションの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-starting-services>11.4. サービスの起動</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-virtual-hosts>11.5. バーチャルホスト</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-configfiles>11.6. 設定ファイル</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-sysctl>11.7. sysctl によるチューニング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-disk>11.8. ディスクのチューニング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-kernel-limits>11.9. Kernel 制限のチューニング</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/boot/>第12章 FreeBSD の起動のプロセス</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#boot-synopsis>12.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#boot-introduction>12.2. FreeBSD の起動プロセス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#device-hints>12.3. Device Hints</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#boot-shutdown>12.4. シャットダウン動作</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/security/>第13章 セキュリティ</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-synopsis>13.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-intro>13.2. はじめに</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#one-time-passwords>13.3. ワンタイムパスワード</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#tcpwrappers>13.4. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#kerberos5>13.5. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#openssl>13.6. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#ipsec>13.7. VPN over IPsec</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#openssh>13.8. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#fs-acl>13.9. ファイルシステムアクセス制御リスト (ACL)</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-portaudit>13.10. サードパーティ製ソフトウェアのセキュリティ問題を監視する</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-advisories>13.11. FreeBSD セキュリティ勧告</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-accounting>13.12. プロセスアカウンティング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-resourcelimits>13.13. リソースの制限</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/disks/>第14章 ストレージ</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-synopsis>14.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disk-naming>14.2. デバイス名</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-adding>14.3. ディスクの追加</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#raid>14.4. RAID</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#creating-cds>14.5. 光メディア (CD & DVD) の作成と使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#floppies>14.6. フロッピーディスクの作成と使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#backups-tapebackups>14.7. データテープの作成と使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#backups-floppybackups>14.8. フロッピーディスクへのバックアップ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#backup-basics>14.9. バックアップの基本</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-virtual>14.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#snapshots>14.11. ファイルシステムのスナップショット</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#quotas>14.12. ファイルシステムクォータ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-encrypting>14.13. ディスクパーティションの暗号化</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/>第15章 地域化 (localization) - i18n/L10n の利用と設定</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#l10n-synopsis>15.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#using-localization>15.2. 地域化の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#l10n-compiling>15.3. 国際化 (i18n) に対応したアプリケーションを見つける</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#lang-setup>15.4. 特定の言語にロケールを設定する</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/>第16章 FreeBSD のアップデートとアップグレード</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-upgrading-synopsis>16.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>16.2. FreeBSD Update</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-bootcode>16.3. ブートコードのアップデート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-upgrading-documentation>16.4. ドキュメントのアップデート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#current-stable>16.5. 開発ブランチを追いかける</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#makeworld>16.6. ソースを用いた FreeBSD のアップデート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#small-lan>16.7. 複数のマシンで追いかける</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partiv/>パートIV. ネットワーク通信</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/>第17章 シリアル通信</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#serial-synopsis>17.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#serial>17.2. はじめに</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#term>17.3. シリアル端末</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#dialup>17.4. ダイアルインサービス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#dialout>17.5. ダイアルアウトサービス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#serialconsole-setup>17.6. シリアルコンソールの設定</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/>第18章 PPP と SLIP</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#_この章では>18.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#userppp>18.2. ユーザ ppp の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#ppp>18.3. カーネル PPP の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#pppoe>18.4. PPP オーバイーサネット (PPPoE) の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#slip>18.5. SLIP の利用</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/mail/>第19章 電子メール</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-synopsis>19.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-using>19.2. 電子メールを使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#sendmail>19.3. sendmail の設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-changingmta>19.4. MTA の変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-trouble>19.5. トラブルシュート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-advanced>19.6. 先進的なトピックス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#SMTP-UUCP>19.7. UUCP とともに SMTP を使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#SMTP-dialup>19.8. ダイアルアップ接続でメールを使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#SMTP-Auth>19.9. SMTP 認証</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/>第20章 高度なネットワーク</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#advanced-networking-synopsis>20.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-routing>20.2. ゲートウェイと経路</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-wireless>20.3. 無線ネットワーク</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-bluetooth>20.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-bridging>20.5. ブリッジ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-nfs>20.6. NFS</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-diskless>20.7. ディスクレス稼働</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-isdn>20.8. ISDN</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-nis>20.9. NIS/YP</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-dhcp>20.10. DHCP</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-dns>20.11. DNS</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-ntp>20.12. NTP</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-natd>20.13. ネットワークアドレス変換 (NAT)</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-inetd>20.14. inetd"スーパサーバ"</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-plip>20.15. パラレルライン IP (PLIP)</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-ipv6>20.16. IPv6</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partv/>パートV. 付録</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/>付録A FreeBSD の入手方法</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#mirrors>A.1. Mirrors</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#git>A.2. Git の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#svn>A.3. Subversion の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#mirrors-cdrom>A.4. CD および DVD セット</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/>付録B. 参考図書</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-freebsd>B.1. FreeBSD 専門の書籍</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-userguides>B.2. 利用者向けのガイド</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-adminguides>B.3. 管理者向けのガイド</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#_プログラマ向けのガイド>B.4. プログラマ向けのガイド</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#_オペレーティングシステム内部>B.5. オペレーティングシステム内部</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#_セキュリティの参考資料>B.6. セキュリティの参考資料</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-hardware>B.7. ハードウェアの参考資料</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-history>B.8. UNIX® の歴史</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-journals>B.9. 定期刊行物、雑誌およびジャーナル</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/>付録 C. インターネット上のリソース</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-www>C.1. ウェブサイト</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-mail>C.2. メーリングリスト</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-news>C.3. Usenet ニュースグループ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-web>C.4. オフィシャルミラー</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/pgpkeys/>付録 D. OpenPGP Keys</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/pgpkeys/#pgpkeys-officers>D.1. オフィサ</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>第11章 設定とチューニング</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#_この章では>11.1. この章では</a></li><li><a href=#configtuning-core-configuration>11.2. 中核となる設定</a></li><li><a href=#configtuning-appconfig>11.3. アプリケーションの設定</a></li><li><a href=#configtuning-starting-services>11.4. サービスの起動</a></li><li><a href=#configtuning-virtual-hosts>11.5. バーチャルホスト</a></li><li><a href=#configtuning-configfiles>11.6. 設定ファイル</a></li><li><a href=#configtuning-sysctl>11.7. sysctl によるチューニング</a></li><li><a href=#configtuning-disk>11.8. ディスクのチューニング</a></li><li><a href=#configtuning-kernel-limits>11.9. Kernel 制限のチューニング</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=_この章では>11.1. この章では<a class=anchor href=#_この章では></a></h2><div class=sectionbody><div class=paragraph><p>システムを正しく設定することは、 メンテナンスや将来の更新の際の作業の量を減らします。 この章では FreeBSD システムの管理上の設定の側面について記述します。</p></div><div class=paragraph><p>またこの章では FreeBSD システムのパフォーマンスを最適化する チューニングについても記述します。</p></div><div class=paragraph><p>この章を読むと、以下のことがわかります。</p></div><div class=ulist><ul><li><p><span class=filename>rc.conf</span> の設定と <span class=filename>/usr/local/etc/rc.d</span> スタートアップシステムの基礎</p></li><li><p>ネットワークデバイスに対する、仮想ホストの設定方法</p></li><li><p><span class=filename>/etc</span> ディレクトリ内のさまざまな設定ファ イルの使い方</p></li><li><p><code>sysctl</code> 変数を使った FreeBSD のチューニング方法</p></li><li><p>ディスク性能のチューニング方法と、カーネルの制限の変更方法</p></li></ul></div><div class=paragraph><p>この章を読む前に、以下のことをやっておくとよいでしょう。</p></div><div class=ulist><ul><li><p>Unix と FreeBSD の基本を理解する (<a href=../basics/#basics>UNIX の基礎知識</a>)。</p></li><li><p>FreeBSD のソースコードを最新に保つこと (<a href=../cutting-edge/#updating-upgrading>FreeBSD のアップデートとアップグレード</a>) と、 カーネルコンフィグレーションおよび構築の基礎 (<a href=../kernelconfig/#kernelconfig>FreeBSD カーネルのコンフィグレーション</a>) に親しんでおく。</p></li></ul></div></div></div><div class=sect1><h2 id=configtuning-core-configuration>11.2. 中核となる設定<a class=anchor href=#configtuning-core-configuration></a></h2><div class=sectionbody><div class=paragraph><p>システムの設定情報が収められている主な場所は <span class=filename>/etc/rc.conf</span> です。 このファイルにはシステムの起動時にシステムの設定を行なうものをはじめ 多岐に渡る設定情報が含まれています。 そのファイル名はダイレクトに、それが <span class=filename>rc*</span> ファイル群の設定情報であることを示しています。</p></div><div class=paragraph><p>管理者は <span class=filename>/etc/defaults/rc.conf</span> のデフォルトの設定を <span class=filename>rc.conf</span> ファイルにエン トリを作ることで上書きすべきです。 デフォルトのファイルをそのまま <span class=filename>/etc</span> にコピーするのはやめるべきです。 それはデフォルト値であってサンプルではないのです。 システム固有のすべての変更は <span class=filename>rc.conf</span> ファイ ルの中でするべきです。</p></div><div class=paragraph><p>管理の手間を減らす為、クラスター化されたアプリケーションには サイト共通の設定とシステム固有の設定を分離するさまざまな戦略が適用できます。 推奨されるアプローチは、サイト共通の設定は <span class=filename>/etc/rc.conf.site</span> のような別のファイルに置き、 それをシステム固有の設定情報しか含ませない <span class=filename>/etc/rc.conf</span> からインクルードすることです。</p></div><div class=paragraph><p><span class=filename>rc.conf</span> は <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a> によって読み込まれているので、これはじつに簡単に達成できます。 たとえば、</p></div><div class=ulist><ul><li><p>rc.conf:</p><div class="literalblock programlisting"><div class=content><pre>	. rc.conf.site
	hostname=&#34;node15.example.com&#34;
	network_interfaces=&#34;fxp0 lo0&#34;
	ifconfig_fxp0=&#34;inet 10.1.1.1&#34;</pre></div></div></li><li><p>rc.conf.site:</p><div class="literalblock programlisting"><div class=content><pre>	defaultrouter=&#34;10.1.1.254&#34;
	saver=&#34;daemon&#34;
	blanktime=&#34;100&#34;</pre></div></div></li></ul></div><div class=paragraph><p><span class=filename>rc.conf.site</span> ファイルは <code>rsync</code> のようなプログラムを使うことで全システ ムに配布でき、一方 <span class=filename>rc.conf</span> ファイルはユニークなままを保つことができます。</p></div><div class=paragraph><p>システムを <a href="https://man.freebsd.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;format=html">sysinstall(8)</a> や <code>make world</code> 等で 更新した場合 <span class=filename>rc.conf</span> ファイルは上書きされません。 なのでシステムの設定情報が失われることもありません。</p></div></div></div><div class=sect1><h2 id=configtuning-appconfig>11.3. アプリケーションの設定<a class=anchor href=#configtuning-appconfig></a></h2><div class=sectionbody><div class=paragraph><p>基本的に、インストールされたアプリケーションには独自の文法を持つ 固有の設定ファイルがあります。 これらのファイルがベースシステムから分離されているということは重要で、 このためパッケージ管理ツールによる配置と管理が容易になっています。</p></div><div class=paragraph><p>基本的に、それらのファイルは <span class=filename>/usr/local/etc</span> にインストールされます。 設定ファイルの数が多数にのぼるアプリケーションに対しては、 それら用にサブディレクトリが作られます。</p></div><div class=paragraph><p>通常、ports やパッケージがインストールされると 設定ファイルのサンプルが一緒にインストールされます。 大抵、識別のためにサフィックスとして ".default" がついています。 アプリケーションのための設定ファイルがまだ存在していなければ、 .defaults ファイルをコピーすることで作成できます。</p></div><div class=paragraph><p><span class=filename>/usr/local/etc/apache</span> ディレクトリの例をご覧ください。</p></div><div class=literalblock><div class=content><pre>-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf
-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf.default
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf.default
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic.default
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types.default
-rw-r--r--  1 root  wheel   7980 May 20  1998 srm.conf
-rw-r--r--  1 root  wheel   7933 May 20  1998 srm.conf.default</pre></div></div><div class=paragraph><p>ファイルサイズの差から、<span class=filename>srm.conf</span> ファイルだけが変更されていることが分かります。 後に apache を更新した時にも、 この変更されたファイルは上書きされることはありません。</p></div></div></div><div class=sect1><h2 id=configtuning-starting-services>11.4. サービスの起動<a class=anchor href=#configtuning-starting-services></a></h2><div class=sectionbody><div class=paragraph><p>一つのシステムでサービスをいくつも立ち上げているということは よくあることです。 それらには独自の立ち上げかたがあることがあり、 それぞれ有利な点があります。</p></div><div class=paragraph><p>Ports collection やパッケージからインストールしたソフトウェアは しばしば <span class=filename>/usr/local/etc/rc.d</span> にスクリプトを置き、 システムが起動した時には <code>start</code>、システムをシャッ トダウンする時には <code>stop</code> を引数にして実行します。 これは <code>root</code> で実行すべき、または <code>root</code> で起動することを期待されているシステム ワイドなサービスを起動する場合に推奨される方法です。 これらのスクリプトはパッケージの一部としてインストール時に記録され、 パッケージとともに削除されます。</p></div><div class=paragraph><p><span class=filename>/usr/local/etc/rc.d</span> にある 一般的なスクリプトは次のようなものです。</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
echo -n &#39; FooBar&#39;

case &#34;$1&#34; in
start)
        /usr/local/bin/foobar
        ;;
stop)
        kill -9 `cat /var/run/foobar.pid`
        ;;
*)
        echo &#34;Usage: `basename $0` {start|stop}&#34; &gt;&amp;2
        exit 64
        ;;
esac

exit 0</pre></div></div><div class=paragraph><p>このスクリプトはその目的を果すべく起動時に <code>start</code>、 シャットダウン時に <code>stop</code> をつけて呼ばれます。</p></div><div class=paragraph><p>サービスの中には固有のポートに接続を受けたときに <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> から起動されるものもあります。 これはメールリーダサーバ (POP や IMAP 等) の場合によくあります。 これらのサービスは <span class=filename>/etc/inetd.conf</span> ファイルを編集することで有効化されます。 このファイルの編集に関する詳細は <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> を見てください。</p></div><div class=paragraph><p>これらの他に <span class=filename>/etc/rc.conf</span> による有効化/無効化がカバーされていないサービスもあります。 それらは伝統的に <span class=filename>/etc/rc.local</span> にコマンドを書き込むことで実行されていました。 FreeBSD 3.1 にはデフォルトの <span class=filename>/etc/rc.local</span> は存在していません。 もし管理者によって作られていれば、 その時は一般的なやりかたとして認められるべきでしょう。 <span class=filename>rc.local</span> は最後の場所と考えられているということを 知っておいてください。 サービスを起動させるのにもっといい場所があるなら そこから始めてください。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><span class=filename>/etc/rc.conf</span> でその他のコマンドを実行<em>しないでください</em>。 そのかわり、デーモンの起動やブート時のコマンド実行は <span class=filename>/usr/local/etc/rc.d</span> にスクリプトを配置してください。</p></div></td></tr></tbody></table></div><div class=paragraph><p>この他にサービスの起動に <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> を利用することもできます。 このアプローチには、<a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> がそのプロセスを <code>crontab</code> の所有者権限で実行したり、サービスが 非特権ユーザによって立ち上げられ管理されるなどといった有利な点が いくつもあります。</p></div><div class=paragraph><p>これで <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> の機能の利点を得ることができます。 日時の指定を <code>@reboot</code> で置き換えることでジョブは システムがブートした直後、<a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> が起動した時に実行されます。</p></div></div></div><div class=sect1><h2 id=configtuning-virtual-hosts>11.5. バーチャルホスト<a class=anchor href=#configtuning-virtual-hosts></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD の非常にありふれた用途の一つにバーチャルサイトの ホスティングがあります。 これは一つのサーバがネットワークには複数のサーバとして現れるものです。 これは一つのネットワークインタフェイスに 複数のアドレスを割当てることで実現されます。</p></div><div class=paragraph><p>ネットワークインタフェイスは "真の" アドレスを 一つと "別名" のアドレスを複数持ちます。これらの別 名は通常 <span class=filename>/etc/rc.conf</span> に別名のエントリを置くことで追加されます。</p></div><div class=paragraph><p><span class=filename>fxp0</span> インタフェイスへの別名のエント リは以下の様なものです。</p></div><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0_alias0=&#34;inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx&#34;</pre></div></div><div class=paragraph><p>別名のエントリは alias0 から始まり昇順に命名されなければなり ません (たとえば、_alias1, _alias2 の様になります)。設定プロセス は最初に欠けた番号のところで停まります。</p></div><div class=paragraph><p>別名のネットマスクの計算は重要ですが、幸いなことに非常に簡単です。 個々のインタフェイスについてそのネットワークのネットマスクを正しく 表現しているアドレスが必ず一つ必要です。 そのネットワークに所属しているそれ以外のアドレスのネットマスクは すべて 1 でなければなりません。</p></div><div class=paragraph><p>例として、<span class=filename>fxp0</span> インタフェイスが二つ のネットワークに接続されているものを考えてみましょう。 一つはネットマスクが 255.255.255.0 である 10.1.1.0 ネットワークで、もう一つはネットマスクが 255.255.255.240 である 202.0.75.16 ネットワークです。 システムは 10.1.1.0 には 10.1.1.1 として、 202.0.75.20 には 202.0.75.17 として現れるようにします。</p></div><div class=paragraph><p>以下のエントリはネットワークインタフェイスを上述の環境に正しく 設定するものです。</p></div><div class="literalblock programlisting"><div class=content><pre> ifconfig_fxp0=&#34;inet 10.1.1.1 netmask 255.255.255.0&#34;
 ifconfig_fxp0_alias0=&#34;inet 10.1.1.2 netmask 255.255.255.255&#34;
 ifconfig_fxp0_alias1=&#34;inet 10.1.1.3 netmask 255.255.255.255&#34;
 ifconfig_fxp0_alias2=&#34;inet 10.1.1.4 netmask 255.255.255.255&#34;
 ifconfig_fxp0_alias3=&#34;inet 10.1.1.5 netmask 255.255.255.255&#34;
 ifconfig_fxp0_alias4=&#34;inet 202.0.75.17 netmask 255.255.255.240&#34;
 ifconfig_fxp0_alias5=&#34;inet 202.0.75.18 netmask 255.255.255.255&#34;
 ifconfig_fxp0_alias6=&#34;inet 202.0.75.19 netmask 255.255.255.255&#34;
 ifconfig_fxp0_alias7=&#34;inet 202.0.75.20 netmask 255.255.255.255&#34;</pre></div></div></div></div><div class=sect1><h2 id=configtuning-configfiles>11.6. 設定ファイル<a class=anchor href=#configtuning-configfiles></a></h2><div class=sectionbody><div class=sect2><h3 id=_etc_のレイアウト>11.6.1. <span class=filename>/etc</span> のレイアウト<a class=anchor href=#_etc_のレイアウト></a></h3><div class=paragraph><p>設定のための情報が含まれているディレクトリはたくさんあります。 それぞれ以下のものを含んでいます。</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>システム全般の設定情報。 ここにあるデータはシステム 固有のものです。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/defaults</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>デフォルトのシステム設定ファイル。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/mail</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>追加的な <a href="https://man.freebsd.org/cgi/man.cgi?query=sendmail&amp;sektion=8&amp;format=html">sendmail(8)</a> の設定、他の MTA の設定ファイル。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/ppp</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザモード、およびカーネルモードの ppp プログラムの設定。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> のデータのデフォルトの置場。通常 boot ファイルはここに置かれ、 <span class=filename>/var/db</span> に置かれた他のデータを 参照するディレクティブを含みます。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/local/etc</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>インストールされたアプリケーションの設定ファイル。 アプリケーションごとのサブディレクトリを含んでいることがあります。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/local/etc/rc.d</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>インストールされたアプリケーションの起動/停止スクリプト。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/var/db</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>永続的なシステム固有のデータファイル。 たとえば <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> のゾーンファイル、データベースファイル等。</p></td></tr></tbody></table></div><div class=sect2><h3 id=_ホスト名>11.6.2. ホスト名<a class=anchor href=#_ホスト名></a></h3><div class=sect3><h4 id=_etcresolv_conf>11.6.2.1. <span class=filename>/etc/resolv.conf</span><a class=anchor href=#_etcresolv_conf></a></h4><div class=paragraph><p><span class=filename>/etc/resolv.conf</span> は FreeBSD に インターネットドメインネームシステム (DNS) にどのようにアクセスするかを指定します。</p></div><div class=paragraph><p><span class=filename>resolv.conf</span> の最もよくあるエントリは</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>nameserver</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>リゾルバが問い合わせるべきネームサーバの IP アドレス。 サーバはリストの順に 3 番目まで問い合わせられます。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>search</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ホスト名をルックアップするための検索リスト。 通常、ローカルなホスト名のドメインから決定されます。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>domain</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ローカルドメイン名。</p></td></tr></tbody></table><div class=paragraph><p>基本的な <span class=filename>resolv.conf</span>。</p></div><div class="literalblock programlisting"><div class=content><pre>search example.com
nameserver 147.11.1.11
nameserver 147.11.100.30</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>search</code> オプションと <code>domain</code> オプションは、 どちらか一方しか使ってはいけません。</p></div></td></tr></tbody></table></div><div class=paragraph><p>DHCP を利用している場合、<a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a> は通常 <span class=filename>resolv.conf</span> を DHCP サーバから受け取っ た情報で書き換えます。</p></div></div><div class=sect3><h4 id=_etchosts>11.6.2.2. <span class=filename>/etc/hosts</span><a class=anchor href=#_etchosts></a></h4><div class=paragraph><p><span class=filename>/etc/hosts</span> は古きインターネットを 偲ばせるシンプルなテキストのデータベースです。 これはホスト名と IP アドレスをマッピングする DNS や NIS と組み合わせて使われます。 LAN でつながれているローカルな計算機は、 名前引きを簡単にするために <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> サーバを立ち上げるかわりにここに書くことができます。 さらに <span class=filename>/etc/hosts</span> はインターネット名のローカルなレコードを提供し、 よくアクセスされる名前を外部に問い合わせるのを減らすためにも使えます。</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$
#
# Host Database
# This file should contain the addresses and aliases
# for local hosts that share this file.
# In the presence of the domain name service or NIS, this file may
# not be consulted at all; see /etc/nsswitch.conf for the resolution order.
#
#
::1                     localhost localhost.my.domain myname.my.domain
127.0.0.1               localhost localhost.my.domain myname.my.domain

#
# Imaginary network.
#10.0.0.2               myname.my.domain myname
#10.0.0.3               myfriend.my.domain myfriend
#
# According to RFC 1918, you can use the following IP networks for
# private nets which will never be connected to the Internet:
#
#       10.0.0.0        -   10.255.255.255
#       172.16.0.0      -   172.31.255.255
#       192.168.0.0     -   192.168.255.255
#
# In case you want to be able to connect to the Internet, you need
# real official assigned numbers.  PLEASE PLEASE PLEASE do not try
# to invent your own network numbers but instead get one from your
# network provider (if any) or from the Internet Registry (ftp to
# rs.internic.net, directory `/templates&#39;).
#</pre></div></div><div class=paragraph><p><span class=filename>/etc/hosts</span> は、 次のようなごく簡単なフォーマットになっています。</p></div><div class="literalblock programlisting"><div class=content><pre>[インターネットアドレス] [正式なホスト名] [別名1] [別名2] ...</pre></div></div><div class=paragraph><p>例:</p></div><div class="literalblock programlisting"><div class=content><pre>10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2</pre></div></div><div class=paragraph><p>これ以上の情報は <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> をあたってください。</p></div></div></div><div class=sect2><h3 id=_ログファイルに関係する設定>11.6.3. ログファイルに関係する設定<a class=anchor href=#_ログファイルに関係する設定></a></h3><div class=sect3><h4 id=_syslog_conf>11.6.3.1. <span class=filename>syslog.conf</span><a class=anchor href=#_syslog_conf></a></h4><div class=paragraph><p><span class=filename>syslog.conf</span> は <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> プログラムのための設定ファイルです。 これはどのタイプの <code>syslog</code> メッセージを対応する ログファイルに記録するかを指定します。</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$
#
#       Spaces ARE valid field separators in this file. However,
#       other *nix-like systems still insist on using tabs as field
#       separators. If you are sharing this file between systems, you
#       may want to use only tabs as field separators here.
#       Consult the syslog.conf(5) manual page.
*.err;kern.debug;auth.notice;mail.crit          /dev/console
*.notice;kern.debug;lpr.info;mail.crit;news.err /var/log/messages
security.*                                      /var/log/security
mail.info                                       /var/log/maillog
lpr.info                                        /var/log/lpd-errs
cron.*                                          /var/log/cron
*.err                                           root
*.notice;news.err                               root
*.alert                                         root
*.emerg                                         *
# uncomment this to log all writes to /dev/console to /var/log/console.log
#console.info                                   /var/log/console.log
# uncomment this to enable logging of all log messages to /var/log/all.log
#*.*                                            /var/log/all.log
# uncomment this to enable logging to a remote log host named loghost
#*.*                                            @loghost
# uncomment these if you&#39;re running inn
# news.crit                                     /var/log/news/news.crit
# news.err                                      /var/log/news/news.err
# news.notice                                   /var/log/news/news.notice
!startslip
*.*                                             /var/log/slip.log
!ppp
*.*                                             /var/log/ppp.log</pre></div></div><div class=paragraph><p>これ以上の情報は <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a> のマニュアルページに あたってください。</p></div></div><div class=sect3><h4 id=_newsyslog_conf>11.6.3.2. <span class=filename>newsyslog.conf</span><a class=anchor href=#_newsyslog_conf></a></h4><div class=paragraph><p><span class=filename>newsyslog.conf</span> は、通常 <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> によって予定を決めて実行されるプログラム <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> のための設定ファイルです。 <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> は、 ログファイルをいつ保存して再編するかを決定します。 <span class=filename>logfile</span> は <span class=filename>logfile.0</span> に移され、<span class=filename>logfile.0</span> は <span class=filename>logfile.1</span> に、そして以下同様に移されます。 また、ログファイルを <a href="https://man.freebsd.org/cgi/man.cgi?query=gzip&amp;sektion=1&amp;format=html">gzip(1)</a> 形式で保存することもできます。 この場合ファイル名は <span class=filename>logfile.0.gz</span>, <span class=filename>logfile.1.gz</span> の様になります。</p></div><div class=paragraph><p><span class=filename>newsyslog.conf</span> はどのログファイルが管理され、どのくらいの期間保存され、 そしていつ touch されるかを指定します。 ログファイルはあるサイズに到達するか、ある決められた時刻・ 日時で再編されあるいは保存されます。</p></div><div class="literalblock programlisting"><div class=content><pre># configuration file for newsyslog
# $FreeBSD$
#
# filename          [owner:group]    mode count size when [ZB] [/pid_file] [sig_num]
/var/log/cron                           600  3     100  *     Z
/var/log/amd.log                        644  7     100  *     Z
/var/log/kerberos.log                   644  7     100  *     Z
/var/log/lpd-errs                       644  7     100  *     Z
/var/log/maillog                        644  7     *    @T00  Z
/var/log/sendmail.st                    644  10    *    168   B
/var/log/messages                       644  5     100  *     Z
/var/log/all.log                        600  7     *    @T00  Z
/var/log/slip.log                       600  3     100  *     Z
/var/log/ppp.log                        600  3     100  *     Z
/var/log/security                       600  10    100  *     Z
/var/log/wtmp                           644  3     *    @01T05 B
/var/log/daily.log                      640  7     *    @T00  Z
/var/log/weekly.log                     640  5     1    $W6D0 Z
/var/log/monthly.log                    640  12    *    $M1D0 Z
/var/log/console.log                    640  5     100  *     Z</pre></div></div><div class=paragraph><p>これ以上の情報は <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> のマニュアルページに あたってください。</p></div></div></div><div class=sect2><h3 id=_sysctl_conf>11.6.4. <span class=filename>sysctl.conf</span><a class=anchor href=#_sysctl_conf></a></h3><div class=paragraph><p><span class=filename>sysctl.conf</span> は <span class=filename>rc.conf</span> によく似ています。 値は<code>変数=値</code>のかたちでセットされます。 指定された値はシステムがマルチユーザモードに移行した後でセットされます。 すべての変数がこのモードで設定可能というわけではありません。</p></div><div class=paragraph><p>以下は <span class=filename>sysctl.conf</span> のサンプルで 致命的なシグナルを記録しないように、また Linux プログラムに それらが実際は FreeBSD 上で動いていることを知らせる様に チューニングしています。</p></div><div class="literalblock programlisting"><div class=content><pre>kern.logsigexit=0       # Do not log fatal signal exits (e.g. sig 11)
compat.linux.osname=FreeBSD
compat.linux.osrelease=4.3-STABLE</pre></div></div></div></div></div><div class=sect1><h2 id=configtuning-sysctl>11.7. sysctl によるチューニング<a class=anchor href=#configtuning-sysctl></a></h2><div class=sectionbody><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> は稼働中の FreeBSD システムに変更を加えるためのインタフェイスです。 これには経験を積んだ管理者用の TCP/IP スタックや 仮想メモリシステムのパフォーマンスを劇的に改善する 先進的なオプションが含まれます。 500 を越えるシステム変数を <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> で読んだり セットしたりできます。</p></div><div class=paragraph><p>本質的には <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> の機能は次の二つ、 システムの設定を読むことと変更することです。</p></div><div class=paragraph><p>読み取り可能なすべての変数を表示するには以下のようにします。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl <span class=nt>-a</span></code></pre></div></div><div class=paragraph><p>個々の変数、たとえば <code>kern.maxproc</code> を読むには以下のようにします。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl kern.maxproc
kern.maxproc: 1044</code></pre></div></div><div class=paragraph><p>特定の変数をセットするには、直感的な文法 <em>変数</em>=<em>値</em> を使ってください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.maxfiles=5000</span>
kern.maxfiles: 2088 -&gt; 5000</code></pre></div></div><div class=paragraph><p>sysctl 変数の値は通常、文字列、数値、真偽値のいずれかです。 (真偽値は yes の場合には <code>1</code> で no の場合には <code>0</code> です)。</p></div></div></div><div class=sect1><h2 id=configtuning-disk>11.8. ディスクのチューニング<a class=anchor href=#configtuning-disk></a></h2><div class=sectionbody><div class=sect2><h3 id=_sysctl_変数>11.8.1. sysctl 変数<a class=anchor href=#_sysctl_変数></a></h3><div class=sect3><h4 id=_vfs_vmiodirenable>11.8.1.1. <code>vfs.vmiodirenable</code><a class=anchor href=#_vfs_vmiodirenable></a></h4><div class=paragraph><p><code>vfs.vmiodirenable</code> sysctl 変数のデフォルトは 1 (オン) で、 0 (オフ) または 1 (オン) にセットすることができます。 このパラメータはディレクトリがシステムによってどのように キャッシュされるかを制御します。 ほとんどのディレクトリは小さく、 ファイルシステムにおいては単一フラグメント (典型的には 1K) であり、バッファキャッシュではさらに小さくなっています (典型的には 512 バイト)。 しかしデフォルトモードで動作している時は、 大量のメモリを搭載していても バッファキャッシュは固定数のディレクトリしかキャッシュしません。 この sysctl をオンにすると、バッファキャッシュが VM ページキャッシュを、 ディレクトリをキャッシュするために使うことを可能にします。 これによる利点は、全てのメモリがディレクトリを キャッシュするのに使えるようになるということです。 欠点は、キャッシュに使われる最小のメモリの大きさが 512 バイトではなく 物理ページサイズ (大抵は 4K) になることです。 多数のファイルを操作するサービスを稼動しているなら、 常にこのオプションをオンにすることを推奨します。 そのようなサービスには、web キャッシュや大規模なメールシステム、 ニューズシステムなどが含まれます。 このオプションは一般にメモリを消費しますが、 性能を削減することはありません。 ただし実験して調べてみるべきでしょう。</p></div></div><div class=sect3><h4 id=_hw_ata_wc>11.8.1.2. <code>hw.ata.wc</code><a class=anchor href=#_hw_ata_wc></a></h4><div class=paragraph><p>FreeBSD 4.3 では IDE のライトキャッシュがオフになりました。 これは IDE ディスクへの書き込み帯域幅を減らしてしまうことになりますが、 ハードドライブベンダに起因するデータの一貫性に関する 重大な問題のために必要なことだと考えられました。 基本的には、書き込み完了時期について IDE ドライブが嘘をつくという問題です。 IDE ライトキャッシュがオンであると IDE ハードドライブはデータを順番に書きこまないばかりか、 ディスクの負荷が高い時にはいくつかのブロックの書き込みを 無期限に延期してしまいます。 クラッシュや電源故障の場合、 ファイルシステムの重大な破壊をもたらします。 したがって私たちはデフォルトを安全側に変更しました。 残念ながらこれは大変な性能の低下をもたらし、 私たちはあきらめてこのリリース後にオンに戻しました。 <code>hw.ata.wc</code> sysctl 変数を見てデフォルトを チェックしてみるべきです。 もし IDE ライトキャッシュがオフになっていたら、 hw.ata.wc カーネル変数を 1 に戻すことでオンに戻すことができます。 これはブート時にブートローダから行わなければなりません。 カーネルがブートした後に行っても効果はありません。</p></div><div class=paragraph><p>詳しくは <a href="https://man.freebsd.org/cgi/man.cgi?query=ata&amp;sektion=4&amp;format=html">ata(4)</a> を見てください。</p></div></div></div><div class=sect2><h3 id=_ソフトアップデート>11.8.2. ソフトアップデート<a class=anchor href=#_ソフトアップデート></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> プログラムはファイルシステムを細かくチュー ニングするのに使えます。このプログラムにはさまざまなオプションがありま すが、ここではソフトアップデートをオンオフすることだけを考えま す。以下の様にして切り替えます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># tunefs -n enable /filesystem</span>
<span class=c># tunefs -n disable /filesystem</span></code></pre></div></div><div class=paragraph><p>ファイルシステムはマウントされているあいだは <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a> で変更することができません。 ソフトアップデートを有効にする いい機会はシングルユーザモードでどのパーティションもマウント されていない時です。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>FreeBSD 4.5 からは、ファイルシステム生成時に <a href="https://man.freebsd.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;format=html">newfs(8)</a> の <code>-U</code> オプションを使って ソフトアップデートを有効化できるようになりました。</p></div></td></tr></tbody></table></div><div class=paragraph><p>ソフトアップデートはメタデータの性能、 主にファイルの作成と削除の性能を劇的に改善します。 すべてのファイルシステムでソフトアップデートを有効にすることを推奨します。 ソフトアップデートに関して、2 つの欠点を意識すべきです。 1 つめは、ソフトアップデートはクラッシュ時におけるファイルシス テムの一貫性は保証しますが、 物理ディスクの更新が何秒か (1 分に達することもあります!) 遅れる可能性が高いことです。 システムがクラッシュした場合、より多くの作業結果が消えてしまうかもしれません。 2 つめは、ソフトアップデート はファイルシステムブロックを解放するのを遅らせるということです。 あるファイルシステム (たとえばルートファイルシステム) が満杯近くの時に それに対する大規模な更新、たとえば <code>make installworld</code> をすると、空き領域を使い果たして更新が失敗してしまうことがあります。</p></div></div></div></div><div class=sect1><h2 id=configtuning-kernel-limits>11.9. Kernel 制限のチューニング<a class=anchor href=#configtuning-kernel-limits></a></h2><div class=sectionbody><div class=sect2><h3 id=_fileprocess_制限>11.9.1. File/Process 制限<a class=anchor href=#_fileprocess_制限></a></h3><div class=sect3><h4 id=_kern_maxfiles>11.9.1.1. <code>kern.maxfiles</code><a class=anchor href=#_kern_maxfiles></a></h4><div class=paragraph><p><code>kern.maxfiles</code> はあなたのシステムの要求に 応じて増減させることができます。 この変数はあなたのシステムのファイル記述子の最大値を示します。 ファイル記述子テーブルが溢れるような時には、システムメッセー ジバッファに頻繁に <code>file: table is full</code> と表示されます。これは、 <code>dmesg</code> コマンドで確認できます。</p></div><div class=paragraph><p>ファイル、ソケット、パイプ (fifo) は それぞれオープンされるとファイル記述子を一つ消費します。 大規模なプロダクションサーバでは その時実行されているサービスの種類や数に応じては あっさり数千のファイル記述子が必要になります。</p></div><div class=paragraph><p><code>kern.maxfile</code> のデフォルト値はカーネル コンフィグレーションファイルの <code>MAXUSERS</code> オ プションで決まります。<code>kern.maxfiles</code> は <code>MAXUSERS</code> の値に比例して増加します。 カスタムカーネルをコンパイルする際は、このカーネルコンフィグ レーションオプションをシステムの利用法に合わせて設定するとよ いでしょう。カーネルは、この数値からほとんどの制限の初期値を 決定します。業務用マシンに、実際に 256 名のユーザが一度に接 続することはないかもしれませんが、大規模なウェブサーバに必要 なリソースは同程度になります。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>FreeBSD 4.5 からは、 カーネルコンフィグレーションファイルで <code>MAXUSERS</code> を <code>0</code> に設定すると、システムの RAM 容量に基づいて適切なデフォルト値が選択されます。</p></div></td></tr></tbody></table></div></div></div><div class=sect2><h3 id=_ネットワークの制限>11.9.2. ネットワークの制限<a class=anchor href=#_ネットワークの制限></a></h3><div class=paragraph><p>カーネルコンフィグレーションオプション <code>NMBCLUSTERS</code> は、そのシステムで利用可能なネッ トワーク mbuf の量を決定します。通信量の多いサーバで MBUF の量 が少ないと、FreeBSD の性能が低下してしまいます。クラスタ一つは およそ 2kB のメモリに対応しているので、1024 だとカーネルメモリ から約 2 MB をネットワークバッファに予約することになります。ど れだけ必要になるかを、簡単な計算で出すことができます。同時に最 大 1000 接続までゆくウェブサーバがあり、それぞれの接続によって 受信バッファ 16kB と送信バッファ 16kB が消費されるなら、ウェ ブサーバをまかなうのに 32MB 程度のネットワークバッファが必要 になります。経験的に有用な値は、それを 2 倍したものなので、 32MBx2 = 64MB/2K = 32768 になります。</p></div></div></div></div></div><hr><div class=last-modified><p><strong>最終更新日</strong>: 2024年3月9日 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/ja/books/handbook/partiii class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/ja/books/handbook/boot class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#_この章では>11.1. この章では</a></li><li><a href=#configtuning-core-configuration>11.2. 中核となる設定</a></li><li><a href=#configtuning-appconfig>11.3. アプリケーションの設定</a></li><li><a href=#configtuning-starting-services>11.4. サービスの起動</a></li><li><a href=#configtuning-virtual-hosts>11.5. バーチャルホスト</a></li><li><a href=#configtuning-configfiles>11.6. 設定ファイル</a></li><li><a href=#configtuning-sysctl>11.7. sysctl によるチューニング</a></li><li><a href=#configtuning-disk>11.8. ディスクのチューニング</a></li><li><a href=#configtuning-kernel-limits>11.9. Kernel 制限のチューニング</a></li></ul></nav><hr><div class=resources><h3>リソース</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="PDF 版のダウンロード"></i><a href=https://download.freebsd.org/doc/ja/books/handbook/handbook_ja.pdf>PDF 版のダウンロード</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ja/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/ja/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>日本語</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/ja class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/ja/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>