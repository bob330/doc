<!doctype html><html class=theme-light lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="FreeBSD オペレーティングシステムの基本的なコマンドと機能について"><meta name=keywords content="basics,virtual consoles,users,management,permissions,directory structure,disk organization,mounting,processes,daemons,shell,editor,manual pages,devices"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/ja/books/handbook/basics/><title>第3章 FreeBSD の基礎知識 | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="第3章 FreeBSD の基礎知識"><meta property="og:description" content="FreeBSD オペレーティングシステムの基本的なコマンドと機能について"><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ja"><meta property="og:url" content="https://docs.freebsd.org/ja/books/handbook/basics/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/ja\/books\/handbook\/basics\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ja>Documentation portal</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/ja/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/ja/books>Books</a></li><li><a href=https://docs.freebsd.org/ja/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/ja/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ja>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/preface/>前書き</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/preface/#preface-audience>想定している読者</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/preface/#preface-changes-from3>第 3 版からの変更</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/preface/#preface-changes-from2>第 2 版 (2004) からの変更</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/preface/#preface-changes>第 1 版 (2001) からの変更</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/preface/#preface-overview>この文書の構成</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/preface/#preface-conv>この文書で用いられている表記法</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/preface/#preface-acknowledgements>謝辞</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/parti/>パートI. 導入</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/introduction/>第1章 はじめに</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/introduction/#introduction-synopsis>1.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/introduction/#nutshell>1.2. FreeBSD へようこそ!</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/introduction/#history>1.3. FreeBSD プロジェクトについて</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/>第2章 FreeBSD のインストール</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. 最小ハードウェア要件</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-pre>2.3. インストール前に行う作業</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-start>2.4. インストールの開始</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#using-bsdinstall>2.5. bsdinstall の使用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-partitioning>2.6. ディスク領域の割り当て</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-fetching-distribution>2.7. 配布ファイルのダウンロード</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-post>2.8. ネットワークインターフェース、アカウント、タイムゾーン、 サービスおよびセキュリティオプションの設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.9. トラブルシューティング</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall/#using-live-cd>2.10. Live CD を使う</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle checked>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/basics/>第3章 FreeBSD の基礎知識</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#basics-synopsis>3.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#consoles>3.2. 仮想コンソールと端末</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#users-synopsis>3.3. ユーザと基本的なアカウント管理</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#permissions>3.4. 許可属性</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#dirstructure>3.5. ディレクトリ構造</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#disk-organization>3.6. ディスク構成</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#mount-unmount>3.7. ファイルシステムのマウントとアンマウント</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#basics-processes>3.8. プロセスおよびデーモン</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#shells>3.9. シェル</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#editors>3.10. テキストエディタ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#basics-devices>3.11. デバイスとデバイスノード</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/basics/#basics-more-information>3.12. マニュアルページ</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/ports/>第4章 アプリケーションのインストール - packages と ports</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#ports-synopsis>4.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#ports-overview>4.2. ソフトウェアのインストール</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#ports-finding-applications>4.3. ソフトウェアの探し方</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#pkgng-intro>4.4. pkg によるバイナリ package の管理</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#ports-using>4.5. Ports Collection の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#ports-poudriere>4.6. Poudriere を用いた package の構築</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#ports-nextsteps>4.7. インストール後の作業</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ports/#ports-broken>4.8. うまく動作しない ports に遭遇した場合には</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/x11/>第5章 X Window System</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x11-synopsis>5.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x-understanding>5.2. 用語の説明</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x-install>5.3. Xorg のインストール</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x-config>5.4. Xorg の設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x-fonts>5.5. Xorg でのフォントの使用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x-xdm>5.6. X ディスプレイマネージャ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x11-wm>5.7. デスクトップ環境</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x-compiz-fusion>5.8. Compiz Fusion のインストール</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/x11/#x11-troubleshooting>5.9. トラブルシューティング</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/partii/>パートII. 日々の生活</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/desktop/>第6章 デスクトップアプリケーション</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/desktop/#desktop-synopsis>6.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/desktop/#desktop-browsers>6.2. ブラウザ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/desktop/#desktop-productivity>6.3. 生産的なアプリケーション</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/desktop/#desktop-viewers>6.4. ドキュメントビューア</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/desktop/#desktop-finance>6.5. 財務管理ソフトウェア</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/>第7章 マルチメディア</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/#multimedia-synopsis>7.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/#sound-setup>7.2. サウンドカードの設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/#sound-mp3>7.3. MP3 オーディオ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/#video-playback>7.4. ビデオ再生</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/#tvcard>7.5. TV カードの設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/#mythtv>7.6. MythTV</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/multimedia/#scanners>7.7. 画像スキャナ</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/kernelconfig/>第8章 FreeBSD カーネルのコンフィグレーション</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. なぜカスタムカーネルを作るか?</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/kernelconfig/#kernelconfig-devices>8.3. システムのハードウェアについて知る</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/kernelconfig/#kernelconfig-config>8.4. コンフィグレーションファイル</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/kernelconfig/#kernelconfig-building>8.5. カスタムカーネルの構築とインストール</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/kernelconfig/#kernelconfig-trouble>8.6. 問題が起きた場合には</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/printing/>第9章 プリンタの利用</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/printing/#printing-synopsis>9.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/printing/#printing-intro-spooler>9.2. はじめに</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/printing/#printing-intro-setup>9.3. 基本的な設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/printing/#printing-advanced>9.4. プリンタ設定上級編</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/printing/#printing-using>9.5. プリンタを使う</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/printing/#printing-lpd-alternatives>9.6. 標準スプーラの代替品</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/printing/#printing-troubleshooting>9.7. トラブルシューティング</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/linuxemu/>第10章 Linux® バイナリ互換機能</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/linuxemu/#linuxemu-synopsis>10.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Linux® バイナリ互換機能の設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/linuxemu/#linuxemu-advanced>10.3. 高度なトピックス</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/partiii/>パートIII. システム管理</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/config/>第11章 設定とチューニング</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#_この章では>11.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-core-configuration>11.2. 中核となる設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-appconfig>11.3. アプリケーションの設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-starting-services>11.4. サービスの起動</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-virtual-hosts>11.5. バーチャルホスト</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-configfiles>11.6. 設定ファイル</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-sysctl>11.7. sysctl によるチューニング</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-disk>11.8. ディスクのチューニング</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/config/#configtuning-kernel-limits>11.9. Kernel 制限のチューニング</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/boot/>第12章 FreeBSD の起動のプロセス</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/boot/#boot-synopsis>12.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/boot/#boot-introduction>12.2. FreeBSD の起動プロセス</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/boot/#device-hints>12.3. Device Hints</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/boot/#boot-shutdown>12.4. シャットダウン動作</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/security/>第13章 セキュリティ</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#security-synopsis>13.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#security-intro>13.2. はじめに</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#one-time-passwords>13.3. ワンタイムパスワード</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#tcpwrappers>13.4. TCP Wrappers</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#kerberos5>13.5. Kerberos5</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#openssl>13.6. OpenSSL</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#ipsec>13.7. VPN over IPsec</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#openssh>13.8. OpenSSH</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#fs-acl>13.9. ファイルシステムアクセス制御リスト (ACL)</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#security-portaudit>13.10. サードパーティ製ソフトウェアのセキュリティ問題を監視する</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#security-advisories>13.11. FreeBSD セキュリティ勧告</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#security-accounting>13.12. プロセスアカウンティング</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/security/#security-resourcelimits>13.13. リソースの制限</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/disks/>第14章 ストレージ</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#disks-synopsis>14.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#disk-naming>14.2. デバイス名</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#disks-adding>14.3. ディスクの追加</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#raid>14.4. RAID</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#creating-cds>14.5. 光メディア (CD & DVD) の作成と使用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#floppies>14.6. フロッピーディスクの作成と使用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#backups-tapebackups>14.7. データテープの作成と使用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#backups-floppybackups>14.8. フロッピーディスクへのバックアップ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#backup-basics>14.9. バックアップの基本</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#disks-virtual>14.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#snapshots>14.11. ファイルシステムのスナップショット</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#quotas>14.12. ファイルシステムクォータ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/disks/#disks-encrypting>14.13. ディスクパーティションの暗号化</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/l10n/>第15章 地域化 (localization) - i18n/L10n の利用と設定</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/l10n/#l10n-synopsis>15.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/l10n/#using-localization>15.2. 地域化の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/l10n/#l10n-compiling>15.3. 国際化 (i18n) に対応したアプリケーションを見つける</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/l10n/#lang-setup>15.4. 特定の言語にロケールを設定する</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/>第16章 FreeBSD のアップデートとアップグレード</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/#updating-upgrading-synopsis>16.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>16.2. FreeBSD Update</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/#updating-bootcode>16.3. ブートコードのアップデート</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/#updating-upgrading-documentation>16.4. ドキュメントのアップデート</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/#current-stable>16.5. 開発ブランチを追いかける</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/#makeworld>16.6. ソースを用いた FreeBSD のアップデート</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/cutting-edge/#small-lan>16.7. 複数のマシンで追いかける</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/partiv/>パートIV. ネットワーク通信</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/serialcomms/>第17章 シリアル通信</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/serialcomms/#serial-synopsis>17.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/serialcomms/#serial>17.2. はじめに</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/serialcomms/#term>17.3. シリアル端末</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/serialcomms/#dialup>17.4. ダイアルインサービス</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/serialcomms/#dialout>17.5. ダイアルアウトサービス</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/serialcomms/#serialconsole-setup>17.6. シリアルコンソールの設定</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/ppp-and-slip/>第18章 PPP と SLIP</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/ppp-and-slip/#_この章では>18.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ppp-and-slip/#userppp>18.2. ユーザ ppp の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ppp-and-slip/#ppp>18.3. カーネル PPP の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ppp-and-slip/#pppoe>18.4. PPP オーバイーサネット (PPPoE) の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/ppp-and-slip/#slip>18.5. SLIP の利用</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/mail/>第19章 電子メール</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#mail-synopsis>19.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#mail-using>19.2. 電子メールを使う</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#sendmail>19.3. sendmail の設定</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#mail-changingmta>19.4. MTA の変更</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#mail-trouble>19.5. トラブルシュート</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#mail-advanced>19.6. 先進的なトピックス</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#SMTP-UUCP>19.7. UUCP とともに SMTP を使う</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#SMTP-dialup>19.8. ダイアルアップ接続でメールを使う</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mail/#SMTP-Auth>19.9. SMTP 認証</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/>第20章 高度なネットワーク</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#advanced-networking-synopsis>20.1. この章では</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-routing>20.2. ゲートウェイと経路</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-wireless>20.3. 無線ネットワーク</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-bluetooth>20.4. Bluetooth</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-bridging>20.5. ブリッジ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-nfs>20.6. NFS</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-diskless>20.7. ディスクレス稼働</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-isdn>20.8. ISDN</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-nis>20.9. NIS/YP</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-dhcp>20.10. DHCP</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-dns>20.11. DNS</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-ntp>20.12. NTP</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-natd>20.13. ネットワークアドレス変換 (NAT)</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-inetd>20.14. inetd"スーパサーバ"</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-plip>20.15. パラレルライン IP (PLIP)</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/advanced-networking/#network-ipv6>20.16. IPv6</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/partv/>パートV. 付録</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/mirrors/>付録A FreeBSD の入手方法</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/mirrors/#mirrors>A.1. Mirrors</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mirrors/#git>A.2. Git の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mirrors/#svn>A.3. Subversion の利用</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/mirrors/#mirrors-cdrom>A.4. CD および DVD セット</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/>付録B. 参考図書</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#bibliography-freebsd>B.1. FreeBSD 専門の書籍</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#bibliography-userguides>B.2. 利用者向けのガイド</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#bibliography-adminguides>B.3. 管理者向けのガイド</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#_プログラマ向けのガイド>B.4. プログラマ向けのガイド</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#_オペレーティングシステム内部>B.5. オペレーティングシステム内部</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#_セキュリティの参考資料>B.6. セキュリティの参考資料</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#bibliography-hardware>B.7. ハードウェアの参考資料</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#bibliography-history>B.8. UNIX® の歴史</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/bibliography/#bibliography-journals>B.9. 定期刊行物、雑誌およびジャーナル</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/eresources/>付録 C. インターネット上のリソース</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/eresources/#eresources-www>C.1. ウェブサイト</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/eresources/#eresources-mail>C.2. メーリングリスト</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/eresources/#eresources-news>C.3. Usenet ニュースグループ</a></li><li><a href=https://docs.freebsd.org/ja/books/handbook/eresources/#eresources-web>C.4. オフィシャルミラー</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/ja/books/handbook/pgpkeys/>付録 D. OpenPGP Keys</a><ul><li><a href=https://docs.freebsd.org/ja/books/handbook/pgpkeys/#pgpkeys-officers>D.1. オフィサ</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>第3章 FreeBSD の基礎知識</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#basics-synopsis>3.1. この章では</a></li><li><a href=#consoles>3.2. 仮想コンソールと端末</a></li><li><a href=#users-synopsis>3.3. ユーザと基本的なアカウント管理</a></li><li><a href=#permissions>3.4. 許可属性</a></li><li><a href=#dirstructure>3.5. ディレクトリ構造</a></li><li><a href=#disk-organization>3.6. ディスク構成</a></li><li><a href=#mount-unmount>3.7. ファイルシステムのマウントとアンマウント</a></li><li><a href=#basics-processes>3.8. プロセスおよびデーモン</a></li><li><a href=#shells>3.9. シェル</a></li><li><a href=#editors>3.10. テキストエディタ</a></li><li><a href=#basics-devices>3.11. デバイスとデバイスノード</a></li><li><a href=#basics-more-information>3.12. マニュアルページ</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=basics-synopsis>3.1. この章では<a class=anchor href=#basics-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>この章では FreeBSD オペレーティングシステムの基本的なコマンドと機能について記述しています。
ここに書かれてあることのほとんどは、どんな UNIX® -like なオペレーティングシステムにもあてはまります。
FreeBSD の初心者であれば、この章を読んでおいた方がきっといいはずです。</p></div><div class=paragraph><p>この章を読んで分かることは、次のようなことです。</p></div><div class=ulist><ul><li><p>仮想コンソールの使い方と設定方法</p></li><li><p>FreeBSD システム上でユーザやグループを作成し管理する方法</p></li><li><p>UNIX® のファイルの許可属性の仕組みと FreeBSD のファイルフラグについて</p></li><li><p>FreeBSD のファイルシステムの構成</p></li><li><p>FreeBSD のディスク構成</p></li><li><p>ファイルシステムをマウント、アンマウントする方法</p></li><li><p>プロセス、デーモンとシグナルとはなにか</p></li><li><p>シェルとはなにか。 また、デフォルトのログイン環境を変える方法</p></li><li><p>テキストエディタの基本的な使い方</p></li><li><p>デバイスおよびデバイスノードとはなにか</p></li><li><p>さらに詳しい情報を得るためのマニュアルページの読み方</p></li></ul></div></div></div><div class=sect1><h2 id=consoles>3.2. 仮想コンソールと端末<a class=anchor href=#consoles></a></h2><div class=sectionbody><div class=paragraph><p>起動時に自動的にグラフィカルな環境が起動するように FreeBSD を設定していなければ、システムが起動すると、以下のようなコマンドラインのログインプロンプトが表示されます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>FreeBSD/amd64 <span class=o>(</span>pc3.example.org<span class=o>)</span> <span class=o>(</span>ttyv0<span class=o>)</span>

login:</code></pre></div></div><div class=paragraph><p>最初の行はシステムの情報です。
<code>amd64</code> は、このシステム上で 64 ビット版の FreeBSD が動作していることを示しています。
ホスト名は <code>pc3.example.org</code>、<code>ttyv0</code> は "システムコンソール" であることを示しています。
次の行はログインプロンプトです。</p></div><div class=paragraph><p>FreeBSD はマルチユーザシステムなので、ユーザを区別する何がしかの手段が必要です。
システム上のプログラムを実行できるようになるには、すべてのユーザに対してシステムにログインすることが義務付けられています。
すべてのユーザは、一意な "ユーザ名" と "パスワード" を持っています。</p></div><div class=paragraph><p>システムコンソールにログインするには、システムのインストール時に <a href=../bsdinstall/#bsdinstall-addusers>ユーザの追加</a> で追加したユーザ名を入力して、<kbd>Enter</kbd> を押してください。
次にそのユーザのパスワードを入力して、<kbd>Enter</kbd> を押してください。
セキュリティの観点から、パスワードは <em>表示されません</em>。</p></div><div class=paragraph><p>パスワードを正確に入力したら、日々のメッセージ (MOTD) が表示され、
コマンドプロンプトが表示されます。
ユーザ作成時に選択したシェルに依存しますが、このプロンプトは <code>#</code>, <code>$</code> または <code>%</code> といった記号です。
プロンプトはユーザが FreeBSD のシステムコンソールへログインし、利用可能なコマンドを実行する準備ができていることを示しています。</p></div><div class=sect2><h3 id=consoles-virtual>3.2.1. 仮想コンソール<a class=anchor href=#consoles-virtual></a></h3><div class=paragraph><p>システムコンソールからシステムに対話的にコマンドを実行できますが、FreeBSD システム上でキーボードによりコマンドラインから利用しているユーザは、通常代わりに仮想コンソールにログインします。
デフォルトではシステムからのメッセージはシステムコンソールに出力され、これらのメッセージが、ユーザが作業しているコマンドまたはファイル上に表示されるため、ユーザが現在の作業に集中できなくなるためです。</p></div><div class=paragraph><p>デフォルトでは FreeBSD は、複数の仮想コンソールを表示してコマンドを入力できるように設定されています。
各仮想コンソールは、個別のログインプロンプトおよびシェルを持っており、簡単に仮想コンソール間の切り替えができます。
これにより、グラフィカルな環境において同時に複数のウィンドウを開いてコマンドラインの環境を提供できます。</p></div><div class=paragraph><p>FreeBSD では <span class=keyseq><kbd>Alt</kbd>+<kbd>F1</kbd></span> から <span class=keyseq><kbd>Alt</kbd>+<kbd>F8</kbd></span> までのキーの組み合わせが、仮想コンソール間の切り替えに予約されています。
システムコンソール (<code>ttyv0</code>) に切り替えるには、<span class=keyseq><kbd>Alt</kbd>+<kbd>F1</kbd></span> を使ってください。
最初の仮想コンソール (<code>ttyv1</code>) にアクセスするには <span class=keyseq><kbd>Alt</kbd>+<kbd>F2</kbd></span>、2 番目の仮想コンソール (<code>ttyv2</code>) にアクセスするには <span class=keyseq><kbd>Alt</kbd>+<kbd>F3</kbd></span>、といったように使ってください。
Xorg をグラフィカルなコンソールとして使用しているときには、<span class=keyseq><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd></span> の組み合わせを使用すると、テキストベースの仮想コンソールへ戻ります。</p></div><div class=paragraph><p>あるコンソールから他に切り替えるのに応じて、FreeBSD は画面への出力を管理します。
結果として、FreeBSD で動かすコマンドを入力するのに使える複数の画面とキーボードを仮想的に実現できるのです。
ある仮想コンソールで実行したプログラムは、ユーザが別の仮想コンソールに切り替えても実行を停止しません。</p></div><div class=paragraph><p>FreeBSD のコンソールおよびキーボードドライバに関するさらなる技術的な説明については、<a href="https://man.freebsd.org/cgi/man.cgi?query=kbdcontrol&amp;sektion=1&amp;format=html">kbdcontrol(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1&amp;format=html">vidcontrol(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=atkbd&amp;sektion=4&amp;format=html">atkbd(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=syscons&amp;sektion=4&amp;format=html">syscons(4)</a> および <a href="https://man.freebsd.org/cgi/man.cgi?query=vt&amp;sektion=4&amp;format=html">vt(4)</a> を参照してください。</p></div><div class=paragraph><p>FreeBSD では以下の <code>/etc/ttys</code> のセクションのように複数の利用可能な仮想コンソールが設定されています。</p></div><div class="literalblock programlisting"><div class=content><pre># name    getty                         type  status comments
#
ttyv0   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
# Virtual terminals
ttyv1   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
ttyv2   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
ttyv3   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
ttyv4   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
ttyv5   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
ttyv6   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
ttyv7   &#34;/usr/libexec/getty Pc&#34;         xterm   on  secure
ttyv8   &#34;/usr/X11R6/bin/xdm -nodaemon&#34;  xterm   off secure</pre></div></div><div class=paragraph><p>仮想コンソールを無効にするには、無効にしたい仮想コンソールの行をコメント記号 (<code>#</code>) から始まるように設定してください。
たとえば、利用可能な仮想コンソールを 8 つから 4 つに減らす場合には、<code>ttyv5</code> から <code>ttyv8</code> までの仮想コンソールを表す最後の 4 行の先頭に <code>#</code> を挿入してください。
システムコンソールを表す <code>ttyv0</code> から始まる行はコメントアウト <em>しないでください。</em>
最後の仮想コンソール (<code>ttyv8</code>) は、 <a href=../x11/#x11>X Window System</a> で説明されているように Xrog がインストールされて設定されている場合に、グラフィカル環境にアクセスするために使用されます。</p></div><div class=paragraph><p>このファイルのそれぞれのカラムと仮想コンソールに設定可能なオプションの詳しい説明は、<a href="https://man.freebsd.org/cgi/man.cgi?query=ttys&amp;sektion=5&amp;format=html">ttys(5)</a> のマニュアルを参照してください。</p></div></div><div class=sect2><h3 id=consoles-singleuser>3.2.2. シングルユーザモード<a class=anchor href=#consoles-singleuser></a></h3><div class=paragraph><p>FreeBSD のブートメニューでは、"シングルユーザモード" と表示されているオプションが提供されています。
このオプションを選択すると、システムは "シングルユーザモード" と呼ばれる特別なモードで起動します。
このモードは、システムが起動しない場合に修正のため、または <code>root</code> のパスワードが分からなくなってしまいリセットするときなど、特別な状況で利用されます。
シングルユーザモードで動かしている場合は、ネットワークや他の仮想コンソールは利用できません。
しかし、システムへの完全な <code>root</code> 権限を利用でき、デフォルトの設定では <code>root</code> のパスワードは必要ありません。
このような理由のため、このモードで起動する場合には物理的なキーボードへのアクセスが必要であり、FreeBSD システムの安全性の観点からキーボードに物理的にアクセスできる人を決めておく事が必要です。
シングルユーザモードを管理する設定は、<code>/etc/ttys</code> ファイルの以下のセクションにあります。</p></div><div class="literalblock programlisting"><div class=content><pre># name  getty                           type  status  comments
#
# If console is marked &#34;insecure&#34;, then init will ask for the root password
# when going to single-user mode.
console none                            unknown  off  secure</pre></div></div><div class=paragraph><p>デフォルトでは、status は <code>secure</code> に設定されています。
これは、キーボードへアクセスできるかユーザが誰であるかが重要ではない、もしくはアクセスできるユーザについては物理的なセキュリティポリシーでコントロールされていることが前提となっています。
この設定を <code>insecure</code> に変更するケースとしては、システムは安全ではなく、誰でもキーボードにアクセスできる環境が想定されます。
この行を <code>insecure</code> に変更すると、FreeBSD がシングルユーザモードで起動した場合に <code>root</code> のパスワードが要求されます。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><em><code>insecure</code> に変更する場合は十分注意してください! </em><code>root</code> のパスワードを忘れてしまうと、シングルユーザモードで起動することはできますが、FreeBSD の起動のプロセスに詳しくない人が起動できるようにするのは難しいかも知れません。</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=consoles-vidcontrol>3.2.3. コンソールのビデオモードの変更<a class=anchor href=#consoles-vidcontrol></a></h3><div class=paragraph><p>FreeBSD のデフォルトのビデオモードは 1024x768 や 1280x1024 など、グラフィックチップおよびディスプレイが対応しているサイズに調整されます。
別のビデオモードを使うには、<code>VESA</code> モジュールをロードしてください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kldload vesa</span></code></pre></div></div><div class=paragraph><p>その後、ハードウェアが対応しているビデオモードを <a href="https://man.freebsd.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1&amp;format=html">vidcontrol(1)</a> を使って確認してください。
以下を実行すると、対応しているビデオモードを調べることができます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vidcontrol -i mode</span></code></pre></div></div><div class=paragraph><p>このコマンドは、使用しているハードウェアが対応しているビデオモードの一覧を表示します。
その後、<a href="https://man.freebsd.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1&amp;format=html">vidcontrol(1)</a> を <code>root</code> ユーザで実行して、新しく使用するビデオモードを選択してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># vidcontrol MODE_279</span></code></pre></div></div><div class=paragraph><p>このビデオモードで良ければ、起動時に自動的に設定されるように <code>/etc/rc.conf</code> に以下のように追加してください。</p></div><div class="literalblock programlisting"><div class=content><pre>allscreens_flags=&#34;MODE_279&#34;</pre></div></div></div></div></div><div class=sect1><h2 id=users-synopsis>3.3. ユーザと基本的なアカウント管理<a class=anchor href=#users-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD は、複数のユーザが同時にコンピュータを使えるようにします。 スクリーンとキーボードの前に一度に座れるのはその中の一人だけですが ユーザは何人でもネットワークを通してログインできます。 システムを使うためには、 どのユーザもアカウントがなければなりません。</p></div><div class=paragraph><p>この章では、以下のことを説明します。</p></div><div class=ulist><ul><li><p>FreeBSD システムにおけるさまざまな種類のユーザアカウントについて</p></li><li><p>ユーザアカウントを追加、削除および変更する方法</p></li><li><p>ユーザやグループが利用できるリソースの上限を制御する方法</p></li><li><p>グループの作成、 およびグループにユーザをメンバとして追加する方法</p></li></ul></div><div class=sect2><h3 id=users-introduction>3.3.1. アカウントの種類<a class=anchor href=#users-introduction></a></h3><div class=paragraph><p>FreeBSD システムへアクセスするには、 かならずアカウントが使われ、 また、プロセスもすべてユーザによって実行されるので、 ユーザとアカウントの管理は、重要なものです。</p></div><div class=paragraph><p>アカウントには大きく分けて三種類あります。 システムアカウント (system accounts)、ユーザアカウント (user accounts)、 そしてスーパーユーザ (superuser) です。</p></div><div class=sect3><h4 id=users-system>3.3.1.1. システムアカウント<a class=anchor href=#users-system></a></h4><div class=paragraph><p>システムアカウントは、DNS、メール、 ウェブサーバといった各種サービスを運用するために使われます。 この目的は、セキュリティを確保するためです。 もしすべてのサービスがスーパーユーザで実行されていると、 それらのサービスはどんな動作でも可能となり、 適切な制限を適用することができません。</p></div><div class=paragraph><p>システムアカウントの具体例は、 <code>daemon</code>, <code>operator</code>, <code>bind</code>, <code>news</code> および <code>www</code> といったものです。</p></div><div class=paragraph><p><code>nobody</code> は通常の特権を持たないシステムアカウントです。 しかし、<code>nobody</code> を利用するサービスが増えれば増えるほど、 それに所属するファイルやプロセスも増え、 その特権も大きくなるということを忘れないようにしてください。</p></div></div><div class=sect3><h4 id=users-user>3.3.1.2. ユーザアカウント<a class=anchor href=#users-user></a></h4><div class=paragraph><p>ユーザアカウントは、 主に現実のユーザがシステムにアクセスする手段として用いられるものです。 システムにアクセスするすべてのユーザは、 それぞれ唯一のユーザアカウントを持つべきです。 こうすることで管理者は誰が何を行なっているかがわかりますし、 他の人の設定を壊してしまうようなことを避けることができます。</p></div><div class=paragraph><p>それぞれのユーザは快適にシステムを利用するため、 シェル、エディタ、キー設定、言語など、 各自の環境をセットアップすることができます。</p></div><div class=paragraph><p>FreeBSD システム上のどのアカウントにも、 以下のような情報がなにかしら結び付けられています。</p></div><div class=dlist><dl><dt class=hdlist1>ユーザ名</dt><dd><p><code>login:</code> プロンプトに対して入力するユーザの名前です。
各ユーザは一意なユーザ名を持つ必要があります。
有効なユーザ名を作成するには <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=5&amp;format=html">passwd(5)</a> に記載されているいくつもの規則があります。
アプリケーションの上位互換性を保つために、8 文字以下の小文字からなるユーザ名を使うことが推奨されています。</p></dd><dt class=hdlist1>パスワード</dt><dd><p>各アカウントにはパスワードがあります。</p></dd><dt class=hdlist1>ユーザ ID (UID)</dt><dd><p>ユーザ ID (UID) は、 FreeBSD システムがユーザを一意に識別するための数値です。 ユーザ名を指定できるコマンドは、 ユーザ名を UID に変換してから扱っています。
65535 より大きな UID は、ソフトウェアによっては互換性の問題を引き起こす可能性があるので、65535 以下の UID を使用することが推奨されています。</p></dd><dt class=hdlist1>グループ ID (GID)</dt><dd><p>グループ ID (GID) は、 ユーザが属する第一グループを一意に識別するための数値です。 グループは、UID ではなく、 ユーザの GID に基づいて資源へのアクセスを制御する仕組みです。 これは、ある種の設定ファイルのサイズを大幅に小さくします。 ユーザは、複数のグループに所属できます。 65535 より大きな GID は、ソフトウェアに問題を引き起こす可能性があるので、 65535 以下の GID を使うことを推奨します。</p></dd><dt class=hdlist1>ログインクラス</dt><dd><p>ログインクラスはグループの仕組みを拡張したもので、 別々のユーザに対してシステムを調整する時に、 さらなる柔軟性を提供します。ログインクラスの詳細については、 <a href=#users-limiting>[users-limiting]</a> で説明します。</p></dd><dt class=hdlist1>パスワードの有効期限</dt><dd><p>デフォルトでは、パスワードに有効期限は設定されていません。
しかしながら、パスワードの有効期限をユーザごとに設定し、一部またはすべてのユーザに、一定の時間がたったらパスワードを強制的に変更させることができます。</p></dd><dt class=hdlist1>アカウント失効時間</dt><dd><p>デフォルトでは、FreeBSD はアカウントを失効させません。 たとえば学校で生徒のアカウントがある場合など、 限られた期間だけのアカウントを作成するなら、 そのアカウントがいつ失効するか <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> を使って指定できます。 有効期間が経過したら、 そのアカウントのディレクトリやファイルは残っていますが、 システムへのログインはできなくなります。</p></dd><dt class=hdlist1>ユーザの氏名</dt><dd><p>FreeBSD ではユーザ名でアカウントを一意に識別しますが、 必ずしもユーザの本名を反映したものではありません。 この情報をアカウントに関連付けることもできます。 この情報は、コメントのように、空白、大文字、および 8 字以上で記載できます。</p></dd><dt class=hdlist1>ホームディレクトリ</dt><dd><p>ホームディレクトリは、システム中のディレクトリへのフルパスです。
これはユーザがログインした時に作業を開始するディレクトリです。
一般的な慣習は、すべてのユーザのホームディレクトリを <code>/home/username</code> か <code>/usr/home/username</code> の下に置くことです。
各ユーザは、個人のファイルやサブディレクトリを、ユーザのホームディレクトリに保存します。</p></dd><dt class=hdlist1>ユーザシェル</dt><dd><p>シェルは、 ユーザがシステムと対話するデフォルトの環境を提供します。 いろいろな種類のシェルがあり、 経験を積んだユーザはそれぞれ好みがあり、 それをアカウントの設定に反映できます。</p></dd></dl></div></div><div class=sect3><h4 id=users-superuser>3.3.1.3. スーパーユーザアカウント<a class=anchor href=#users-superuser></a></h4><div class=paragraph><p>スーパーユーザアカウントは通常 <code>root</code> と呼ばれ、 システム管理を行なうために使われ、権限に制限がありません。 そのため、このアカウントはメールのやりとり、システムの調査、 プログラミングといった日常的な作業を行なうために使われるべきものではありません。</p></div><div class=paragraph><p>その理由は、スーパーユーザが通常のユーザアカウントと異なり、 操作にまったく制限を受けないことによります。 そのためスーパーユーザアカウントで操作を間違えると、 システムに重大な影響を与えてしまう恐れがあるのです。 ユーザアカウントでは、 仮に操作を間違えてもシステムを壊してしまうようなことはできないようになっています。 そのため、ユーザアカウントでログインし、 高い権限が必要なコマンドを実行するときだけスーパーユーザになることが推奨されています。</p></div><div class=paragraph><p>スーパーユーザで実行するコマンドはいつでも、 二回、三回と確認してください。 なぜならスペースが多かったり、文字が欠けていたりするだけで、 取り返しのつかないデータの破壊につながる可能性があるからです。</p></div><div class=paragraph><p>スーパーユーザの権限を得るには、さまざまな方法があります。 <code>root</code> ユーザとしてログインする方法もありますが、 これはまったくお勧めできません。</p></div><div class=paragraph><p>スーパーユーザの権限を手に入れるには、かわりに <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> を使って下さい。 <code>-</code> オプションをつけて実行すると、 実行したユーザに root ユーザの環境が設定されます。 このコマンドは <code>wheel</code> グループに入ってるユーザのみが実行でき、他のユーザは実行出来ません。 また、実行時には <code>root</code> ユーザのパスワードを必要とします。</p></div><div class=paragraph><p>以下の例では、<code>make install</code> を行うときにスーパーユーザの権限が必要なので、 このコマンドを実行する時だけユーザはスーパーユーザになります。 コマンドを実行したら、ユーザは <code>exit</code> を実行してスーパーユーザからログアウトし、 通常のユーザアカウントの権限に戻ります。</p></div><div class=exampleblock><div class=title>例 1. スーパーユーザ権限でプログラムをインストールする</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% configure
% make
% su -
Password:
<span class=c># make install</span>
<span class=c># exit</span>
%</code></pre></div></div></div></div><div class=paragraph><p>1 人の管理者が一台のマシン、 もしくは小規模なネットワークを管理する場合には、 <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> のフレームワークはうまく機能するでしょう。 この代わりとなるのは、 <a class=package href=https://cgit.freebsd.org/ports/tree/security/sudo/>security/sudo</a> package または port です。これはログ機能や、 スーパーユーザの権限で実行できるユーザやコマンドを設定できます。</p></div></div></div><div class=sect2><h3 id=users-modifying>3.3.2. アカウント情報の管理<a class=anchor href=#users-modifying></a></h3><div class=paragraph><p>FreeBSD は、ユーザアカウントを操作するためにさまざまなコマンドを用意しています。
もっとも一般的なコマンドが <a href=#users-modifying-utilities>ユーザアカウントを管理するためのユーティティ</a> にまとめられています。
その後で、各コマンドについて詳しい使用例を示します。
各ユーティリティの詳細や使用例についてはマニュアルページを参照してください。</p></div><table id=users-modifying-utilities class="tableblock frame-all grid-all stretch"><caption class=title>表 1. ユーザアカウントを管理するためのユーティティ</caption><col style=width:25%><col><tbody><tr><th class="tableblock halign-left valign-top"><p class=tableblock>コマンド</p></th><td class="tableblock halign-left valign-top"><p class=tableblock>要約</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=adduser&amp;sektion=8&amp;format=html">adduser(8)</a></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>コマンドラインからユーザを追加するための推奨アプリケーション</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rmuser&amp;sektion=8&amp;format=html">rmuser(8)</a></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>コマンドラインからユーザを削除するための推奨アプリケーション</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=chpass&amp;sektion=1&amp;format=html">chpass(1)</a></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザデータベースの情報を変更するための柔軟なツール</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザのパスワードを変更するコマンドラインツール</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザアカウントのあらゆる箇所を変更する強力で柔軟なツール</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=bsdconfig&amp;sektion=8&amp;format=html">bsdconfig(8)</a></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>システムの設定のためのユーティリティ。アカウント管理に対応しています。</p></td></tr></tbody></table><div class=sect3><h4 id=users-adduser>3.3.2.1. ユーザの追加<a class=anchor href=#users-adduser></a></h4><div class=paragraph><p>新しいユーザの登録に推奨されるプログラムは <a href="https://man.freebsd.org/cgi/man.cgi?query=adduser&amp;sektion=8&amp;format=html">adduser(8)</a> です。
ユーザを追加すると、このプログラムは、<code>/etc/passwd</code> と <code>/etc/group</code> を自動的に更新します。
また、新規ユーザのホームディレクトリを作成し、<code>/usr/share/skel</code> から、デフォルトで使用される設定ファイルをコピーします。
また、新しく作成されたユーザに対して、ウェルカムメッセージをメールで送信することも可能です。
このユーティリティは、スーパーユーザ権限で実行する必要があります。</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=adduser&amp;sektion=8&amp;format=html">adduser(8)</a> は、新しいユーザアカウントを対話的に段階的に作成するユーティリティです。
<a href=#users-modifying-adduser>FreeBSD におけるユーザの追加</a> で示されているように、必要な情報を入力するか、括弧内に示されているデフォルトの値を <kbd>Return</kbd> を押して承認してください。
この例では、ユーザは <a href="https://man.freebsd.org/cgi/man.cgi?query=su&amp;sektion=1&amp;format=html">su(1)</a> によってスーパユーザ権限を取得することが可能となる <code>wheel</code> グループに所属します。
操作が終了すると、ユーティリティは別のユーザを追加するか、終了するかを尋ねてきます。</p></div><div id=users-modifying-adduser class=exampleblock><div class=title>例 2. FreeBSD におけるユーザの追加</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># adduser</span>
Username: jru
Full name: J. Random User
Uid <span class=o>(</span>Leave empty <span class=k>for </span>default<span class=o>)</span>:
Login group <span class=o>[</span>jru]:
Login group is jru. Invite jru into other <span class=nb>groups</span>? <span class=o>[]</span>: wheel
Login class <span class=o>[</span>default]:
Shell <span class=o>(</span>sh csh tcsh zsh nologin<span class=o>)</span> <span class=o>[</span>sh]: zsh
Home directory <span class=o>[</span>/home/jru]:
Home directory permissions <span class=o>(</span>Leave empty <span class=k>for </span>default<span class=o>)</span>:
Use password-based authentication? <span class=o>[</span><span class=nb>yes</span><span class=o>]</span>:
Use an empty password? <span class=o>(</span><span class=nb>yes</span>/no<span class=o>)</span> <span class=o>[</span>no]:
Use a random password? <span class=o>(</span><span class=nb>yes</span>/no<span class=o>)</span> <span class=o>[</span>no]:
Enter password:
Enter password again:
Lock out the account after creation? <span class=o>[</span>no]:
Username   : jru
Password   : <span class=k>****</span>
Full Name  : J. Random User
Uid        : 1001
Class      :
Groups     : jru wheel
Home       : /home/jru
Shell      : /usr/local/bin/zsh
Locked     : no
OK? <span class=o>(</span><span class=nb>yes</span>/no<span class=o>)</span>: <span class=nb>yes
</span>adduser: INFO: Successfully added <span class=o>(</span>jru<span class=o>)</span> to the user database.
Add another user? <span class=o>(</span><span class=nb>yes</span>/no<span class=o>)</span>: no
Goodbye!</code></pre></div></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>入力したパスワードは画面に表示されませんので、 ユーザアカウントを作成する際には、 パスワードを間違えて入力してしまわないように注意してください。</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=users-rmuser>3.3.2.2. ユーザの削除<a class=anchor href=#users-rmuser></a></h4><div class=paragraph><p>システムから完全にユーザを削除するには、スーパーユーザ権限で <a href="https://man.freebsd.org/cgi/man.cgi?query=rmuser&amp;sektion=8&amp;format=html">rmuser(8)</a> を実行してください。
このコマンドは、次の手順を実行します。</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>指定されたユーザの <a href="https://man.freebsd.org/cgi/man.cgi?query=crontab&amp;sektion=1&amp;format=html">crontab(1)</a> エントリが存在する場合には削除。</p></li><li><p>指定されたユーザの <a href="https://man.freebsd.org/cgi/man.cgi?query=at&amp;sektion=1&amp;format=html">at(1)</a> ジョブをすべて削除。</p></li><li><p>指定されたユーザが所有するすべてのプロセスに対して SIGKILL シグナルを送信。</p></li><li><p>ローカルパスワードファイルから、 指定されたユーザのエントリを削除。</p></li><li><p>指定されたユーザのホームディレクトリを削除 (ディレクトリの所有者が指定されたユーザのものだった場合)。実際のホームディレクトリへのシンボリックリンクの削除も含まれます。</p></li><li><p><code>/var/mail</code> から、指定されたユーザの到着メールファイルを削除。</p></li><li><p><code>/tmp</code>, <code>/var/tmp</code>, および <code>/var/tmp/vi.recover</code> から、指定されたユーザの所有するファイルを削除。</p></li><li><p><code>/etc/group</code> にある すべてのグループから、指定されたユーザを削除します
(指定されたユーザと同じ名前のグループで、そのユーザが削除されると空のグループとなる場合は、そのグループ自体が削除されます。
これは <a href="https://man.freebsd.org/cgi/man.cgi?query=adduser&amp;sektion=8&amp;format=html">adduser(8)</a> によってユーザごとに作成される、ユニークなグループに対応するものです)。</p></li><li><p>指定されたユーザが所有するすべてのメッセージキュー、共通メモリセグメントおよびセマフォを削除</p></li></ol></div></div></div><div class=paragraph><p>スーパユーザアカウントの削除に <a href="https://man.freebsd.org/cgi/man.cgi?query=rmuser&amp;sektion=8&amp;format=html">rmuser(8)</a> を利用することはできません。 スーパユーザアカウントの削除はほとんどすべての場合、 大規模なシステムの破壊を意味するからです。</p></div><div class=paragraph><p>デフォルトでは、以下の例のような対話モードが使われます。</p></div><div class=exampleblock><div class=title>例 3. <code>rmuser</code> による対話的なアカウントの削除</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rmuser jru</span>
Matching password entry:
jru:<span class=k>*</span>:1001:1001::0:0:J. Random User:/home/jru:/usr/local/bin/zsh
Is this the entry you wish to remove? y
Remove user<span class=s1>&#39;s home directory (/home/jru)? y
Removing user (jru): mailspool home passwd.</span></code></pre></div></div></div></div></div><div class=sect3><h4 id=users-chpass>3.3.2.3. ユーザ情報の変更<a class=anchor href=#users-chpass></a></h4><div class=paragraph><p>すべてのユーザは、<a href="https://man.freebsd.org/cgi/man.cgi?query=chpass&amp;sektion=1&amp;format=html">chpass(1)</a> を用いてデフォルトシェルやユーザアカウントに関連した個人情報を変更できます。
スーパユーザ権限に限り、このユーティリティを用いて他のユーザのアカウント情報も変更できます。</p></div><div class=paragraph><p>ユーザ名の他にオプションを指定しないと、 <a href="https://man.freebsd.org/cgi/man.cgi?query=chpass&amp;sektion=1&amp;format=html">chpass(1)</a> はユーザ情報を編集するエディタを表示します。 ユーザがエディタを終了すると、 ユーザデータベースが新しい情報に更新されます。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>スーパユーザ権限以外でこのユーティリティを実行した場合は、 エディタを抜けた後にユーザのパスワードを聞かれます。</p></div></td></tr></tbody></table></div><div class=paragraph><p><a href=#users-modifying-chpass-su>スーパユーザによる <code>chpass</code> の使用</a> では、スーパーユーザは <code>chpass jru</code> と入力し、このユーザに対して変更可能なフィールドが表示されています。
<code>jru</code> がこのコマンドを実行すると、最後の 6 フィールドのみが表示され編集が可能です。
この場合については、<a href=#users-modifying-chpass-ru>通常のユーザによる <code>chpass</code> の使用</a> で示されています。</p></div><div id=users-modifying-chpass-su class=exampleblock><div class=title>例 4. スーパユーザによる <code>chpass</code> の使用</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c>#Changing user database information for jru.</span>
Login: jru
Password: <span class=k>*</span>
Uid <span class=o>[</span><span class=c>#]: 1001</span>
Gid <span class=o>[</span><span class=c># or name]: 1001</span>
Change <span class=o>[</span>month day year]:
Expire <span class=o>[</span>month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</code></pre></div></div></div></div><div id=users-modifying-chpass-ru class=exampleblock><div class=title>例 5. 通常のユーザによる <code>chpass</code> の使用</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c>#Changing user database information for jru.</span>
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</code></pre></div></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=chfn&amp;sektion=1&amp;format=html">chfn(1)</a> および <a href="https://man.freebsd.org/cgi/man.cgi?query=chsh&amp;sektion=1&amp;format=html">chsh(1)</a> コマンドはいずれも、<a href="https://man.freebsd.org/cgi/man.cgi?query=chpass&amp;sektion=1&amp;format=html">chpass(1)</a> へのリンクです。
また、<a href="https://man.freebsd.org/cgi/man.cgi?query=ypchpass&amp;sektion=1&amp;format=html">ypchpass(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=ypchfn&amp;sektion=1&amp;format=html">ypchfn(1)</a> および <a href="https://man.freebsd.org/cgi/man.cgi?query=ypchsh&amp;sektion=1&amp;format=html">ypchsh(1)</a> も同様です。
NIS のサポートは自動的に行なわれますの、 コマンドの先頭に <code>yp</code> をつける必要はありません。
NIS の設定については、ネットワークサーバの章で説明されています。</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=users-passwd>3.3.2.4. ユーザのパスワードの変更<a class=anchor href=#users-passwd></a></h4><div class=paragraph><p>いかなるユーザも <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> を使って簡単に自身のパスワードを変更できます。
誤って、または不正なパスワードの変更を避けるため、新しいパスワードを設定する前に、もとのパスワードの入力が求められます。</p></div><div class=exampleblock><div class=title>例 6. 自分のパスワードの変更</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% passwd
Changing <span class=nb>local </span>password <span class=k>for </span>jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: <span class=k>done</span></code></pre></div></div></div></div><div class=paragraph><p>スーパーユーザは、<a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> をユーザ名を指定して実行することにより、いかなるユーザのパスワードを変更できます。
スーパーユーザの権限でこのユーティリティを実行する際には、もとのパスワードを入力する必要はありません。
そのため、ユーザが元のパスワードを忘れてしまっても、パスワードを変更できます。</p></div><div class=exampleblock><div class=title>例 7. スーパーユーザ権限での他のユーザのパスワード変更</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># passwd jru</span>
Changing <span class=nb>local </span>password <span class=k>for </span>jru.
New password:
Retype new password:
passwd: updating the database...
passwd: <span class=k>done</span></code></pre></div></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=chpass&amp;sektion=1&amp;format=html">chpass(1)</a> 同様、<a href="https://man.freebsd.org/cgi/man.cgi?query=yppasswd&amp;sektion=1&amp;format=html">yppasswd(1)</a> は、 <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> へのリンクになっていますので、 NIS はどちらのコマンドでも動作します。</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=users-pw>3.3.2.5. システムユーザおよびグループの作成、削除、変更および表示<a class=anchor href=#users-pw></a></h4><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> は、ユーザやグループの作成、削除、変更および表示を行なうコマンドラインのユーティリティです。
これは、システムユーザファイルやシステムグループファイルのフロントエンドとして働きます。
<a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> はとても強力な一連のコマンドラインオプションを有しており、シェルスクリプトで使うのに向いていますが、新しいユーザは、この章で紹介されている他のコマンドに比べて難しいと感じるかもしれません。</p></div></div></div><div class=sect2><h3 id=users-groups>3.3.3. グループの管理<a class=anchor href=#users-groups></a></h3><div class=paragraph><p>グループとは、ユーザを羅列したものです。 グループは、グループ名と GID で識別されます。 FreeBSD では、 あるプロセスが何かするのを許可するかどうかをカーネルが判断する際に、 プロセスの UID とそのユーザが所属するグループの一覧を利用します。 ほとんどの場合、ユーザもしくはプロセスの GID は一覧の最初のグループを指しています。</p></div><div class=paragraph><p>グループ名から GID への写像は <code>/etc/group</code> にあります。
これは、コロンで区切られた 4 項目からなるテキストファイルです。
1 番目の項目はグループ名、2 番目は暗号化されたパスワード、3 番目が GID、4 番目がカンマで区切られたメンバの一覧です。
文法についての完全な説明は、<a href="https://man.freebsd.org/cgi/man.cgi?query=group&amp;sektion=5&amp;format=html">group(5)</a> をご覧ください。</p></div><div class=paragraph><p>スーパーユーザは、<code>/etc/group</code> をテキストエディタで編集できます。
ただし、よくある間違いを見つけてくれる <a href="https://man.freebsd.org/cgi/man.cgi?query=vigr&amp;sektion=8&amp;format=html">vigr(8)</a> を用いてグループファイルを編集することが好ましいです。
もしくは、<a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> を使ってグループの追加や編集をできます。
たとえば、<code>teamtwo</code> というグループを追加して、その存在を確認するには、次のように使います。</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>operator グループを使う時には、意図しないスーパーユーザへのアクセス権を与える可能性があるため注意が必要です。
シャットダウン、リブートおよびこのグループが所有する <code>/dev</code> のすべてにアクセスできるといったことが可能になってしまいます。</p></div></td></tr></tbody></table></div><div class=exampleblock><div class=title>例 8. <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> によるグループの追加</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw groupadd teamtwo</span>
<span class=c># pw groupshow teamtwo</span>
teamtwo:<span class=k>*</span>:1100:</code></pre></div></div></div></div><div class=paragraph><p>この例では、<code>1100</code> という番号は、 <code>teamtwo</code> の GID です。 この時点では、<code>teamtwo</code> にメンバはいません。 以下のコマンドは、 <code>jru</code> を <code>teamtwo</code> のメンバに追加します。</p></div><div class=exampleblock><div class=title>例 9. <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> により新しいグループにメンバを追加する</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw groupmod teamtwo -M jru</span>
<span class=c># pw groupshow teamtwo</span>
teamtwo:<span class=k>*</span>:1100:jru</code></pre></div></div></div></div><div class=paragraph><p><code>-M</code> の引数は、カンマで区切られた新しい (空の) グループに追加するもしくは存在するグループのメンバを置き換えるユーザの一覧です。
ユーザにとっては、このグループのメンバーシップはパスワードファイルに記載されているプライマリのグループとは異なります。
<a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> の <code>groupshow</code> コマンドを使った時は、そのユーザはグループの一員として表示されませんが、<a href="https://man.freebsd.org/cgi/man.cgi?query=id&amp;sektion=1&amp;format=html">id(1)</a> などのツールを使って情報を問い合わせれば、その情報を引き出せます。
ユーザをグループに追加をする際に、<a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> は <code>/etc/group</code> しか扱わず、 <code>/etc/passwd</code> から追加のデータを読んだりはしません。</p></div><div class=exampleblock><div class=title>例 10. <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> によるグループへのユーザ追加</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw groupmod teamtwo -m db</span>
<span class=c># pw groupshow teamtwo</span>
teamtwo:<span class=k>*</span>:1100:jru,db</code></pre></div></div></div></div><div class=paragraph><p>この例では、<code>-m</code> の引数は、 カンマで区切られたグループに追加するユーザの一覧です。
前の例と異なり、これらのユーザはグループに追加され、既存のグループのユーザを置き換えることはありません。</p></div><div class=exampleblock><div class=title>例 11. グループに所属しているユーザを調べるための <a href="https://man.freebsd.org/cgi/man.cgi?query=id&amp;sektion=1&amp;format=html">id(1)</a> の使い方</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>id </span>jru
<span class=nv>uid</span><span class=o>=</span>1001<span class=o>(</span>jru<span class=o>)</span> <span class=nv>gid</span><span class=o>=</span>1001<span class=o>(</span>jru<span class=o>)</span> <span class=nb>groups</span><span class=o>=</span>1001<span class=o>(</span>jru<span class=o>)</span>, 1100<span class=o>(</span>teamtwo<span class=o>)</span></code></pre></div></div></div></div><div class=paragraph><p>この例では、<code>jru</code> は <code>jru</code> グループと <code>teamtwo</code> グループのメンバです。</p></div><div class=paragraph><p>このコマンドや <code>/etc/group</code> のフォーマットの詳細については、 <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> および <a href="https://man.freebsd.org/cgi/man.cgi?query=group&amp;sektion=5&amp;format=html">group(5)</a> をご覧ください。</p></div></div></div></div><div class=sect1><h2 id=permissions>3.4. 許可属性<a class=anchor href=#permissions></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD では、すべてのファイルおよびディレクトリは一組の許可属性を持っています。
これらの許可属性は、ユーティリティを使って確認したり変更できます。
許可属性がどのように機能するかを知ることで、ユーザが必要とするファイルにアクセスできるかどうか、オペレーティングシステムが使用しているファイルや他のユーザが所有するファイルにアクセスできないことを理解できるようになります。</p></div><div class=paragraph><p>この節では、FreeBSD で使用される伝統的な UNIX® の許可属性について説明します。
より細かいファイルシステムのアクセス制御に関しては、<a href=../security/#fs-acl>アクセス制御リスト</a> をご覧ください。</p></div><div class=paragraph><p>UNIX® では、基本の許可属性は 3 つのアクセスタイプ (読み・書き・実行) を使って割り当てられます。
これらのアクセスタイプを使って、ファイルの所有者 (owner)、グループ (group) その他 (others) に対するファイルアクセスを設定します。
読み、書き、実行に関する許可属性は、それぞれ <code>r</code>, <code>w</code>, および <code>x</code> 文字で表されます。
これらの許可属性を表す際に、オンかオフ (<code>0</code>) による 2 進数表記も使われます。
数字で表現する場合には、 <code>r</code> は <code>4</code>、<code>w</code> は <code>2</code> そして <code>x</code> は <code>1</code> の値を持つよう、<code>rwx</code> の順番で表されます。</p></div><div class=paragraph><p>以下は、許可属性を表す際に用いられる数字およびアルファベットをまとめた表です。
"ディレクトリの表示" カラムでは、<code>-</code> は許可属性がオフに設定されていることを表します。</p></div><table class="tableblock frame-none grid-all stretch"><caption class=title>表 2. UNIX® 許可属性</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">値</th><th class="tableblock halign-left valign-top">許可属性</th><th class="tableblock halign-left valign-top">ディレクトリの表示</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>0</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み不可、書き込み不可、実行不可</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>---</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>1</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み不可、書き込み不可、実行可能</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>--x</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み不可、書き込み可能、実行不可</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-w-</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み不可、書き込み可能、実行可能</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-wx</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み可能、書き込み不可、実行不可</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>r--</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み可能、書き込み不可、実行可能</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>r-x</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み可能、書き込み可能、実行不可</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>rw-</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>7</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み可能、書き込み可能、実行可能</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>rwx</code></p></td></tr></tbody></table><div class=paragraph><p>コマンドライン引数 <code>-l</code> とともに <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> を使うと、詳細なディレクトリリストを見ることができ、ファイルの所有者、グループ、その他への許可属性を示す欄があるのがわかります。
例えば、<code>ls -l</code> を実行して、 適当なディレクトリを表示させると以下のようになります。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>ls</span> <span class=nt>-l</span>
total 530
<span class=nt>-rw-r--r--</span>  1 root  wheel     512 Sep  5 12:31 myfile
<span class=nt>-rw-r--r--</span>  1 root  wheel     512 Sep  5 12:31 otherfile
<span class=nt>-rw-r--r--</span>  1 root  wheel    7680 Sep  5 12:31 email.txt</code></pre></div></div><div class=paragraph><p><code>myfile</code> が含まれている行の一番目の列の最初の <code>(一番左の)</code> 文字は、そのファイルが普通のファイルなのか、ディレクトリなのか、キャラクタ型のデバイス特殊ファイルなのか、ソケットなのか、その他の特殊な疑似ファイルデバイスなのかといった種類を示す特別な文字です。
この例において、<code>-</code> という文字は、普通のファイルであることを示します。
その次に来る <code>rw-</code> と書かれた 3 文字は、そのファイルの所有者に許可を与えるものです。
その次の <code>r--</code> の 3 文字は、そのファイルが所属しているグループに許可を与えます。
最後の <code>r--</code> の 3 文字は、 システムに存在するその他のユーザに許可を与えます。
"-" は許可が与えられていないことを示します。
この例では、ファイルの所有者はこのファイルを読み書きでき、ファイルの所属しているグループに属するユーザはファイルを読むことだけでき、そのどちらでもないユーザは、 このファイルを読むだけできるように許可属性が与えられています。
上の表によれば、このファイルに与えられた許可属性は <code>644</code> となります。
ここで各数字は、このファイルの許可属性の 3 つの部分を表しています。</p></div><div class=paragraph><p>デバイスの場合の許可属性はどのようにコントロールされているのでしょうか?
FreeBSD は、大部分のハードウェアをファイルとして取り扱います。
そのため、プログラムからは普通のファイルとまったく同じようにオープンし、 データの読み書きができるようになっています。
これらのデバイス特殊ファイルは <code>/dev/</code> に収められています。</p></div><div class=paragraph><p>ディレクトリもまた、ファイルと同様に扱われます。
それは読み込み/書き込み/実行の許可属性を持ちます。
ディレクトリの実行ビットはファイルのそれとは少し違った意味を持ちます。
ディレクトリが実行可能になっているとき、<a href="https://man.freebsd.org/cgi/man.cgi?query=cd&amp;sektion=1&amp;format=html">cd(1)</a> を使ってそのディレクトリに移動することができます。
これは、そのディレクトリにあるファイルにアクセスできることを意味しています (ファイル自体の許可属性によります)。</p></div><div class=paragraph><p>ディレクトリの中の一覧を表示するには、そのディレクトリに読み込み属性が設定されていなければなりません。
名前が分かっているファイルを削除するには、そのファイルが含まれているディレクトリに 書き込み属性 <em>と</em> 実行属性 の両方が必要です。</p></div><div class=paragraph><p>この他にも許可属性ビットはありますが、いずれも setuid バイナリや sticky ディレクトリなどといった特殊な状況で使われます。
ファイルの許可属性そのものについて、また、それらの設定方法に関する詳しい情報は、 <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> マニュアルページを参照してください。</p></div><div class=sect2><h3 id=_シンボリック表記>3.4.1. シンボリック表記<a class=anchor href=#_シンボリック表記></a></h3><div class=paragraph><p>シンボリック表記と呼ばれる許可属性を表す方法では、ファイルやディレクトリの許可属性を、8 進数ではなく記号を用いて設定します。
シンボリック表記による許可属性を表す方法では、(who), (action), (permissions) という書式が用いられます。
利用できる値は以下の通りです。</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">オプション</th><th class="tableblock halign-left valign-top">文字</th><th class="tableblock halign-left valign-top">意味</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(who)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>u</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザ</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(who)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>g</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>ファイルを所持しているグループ</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(who)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>o</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>その他</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(who)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>a</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>すべて ("world")</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(action)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>+</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>許可属性を与える</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(action)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>-</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>許可属性を取り除く</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(action)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>=</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>許可属性を指定したものにする</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(permissions)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>r</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>読み込み</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(permissions)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>w</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>書き込み</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(permissions)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>実行</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(permissions)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>t</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Sticky ビット</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>(permissions)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>s</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UID または GID を設定する</p></td></tr></tbody></table><div class=paragraph><p>これらの値は、これまでと同様に <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> で用いますが、数字ではなく文字で指定します。
たとえば、<em>FILE</em> に対して <em>FILE</em> のグループメンバーおよび自分以外のすべてのユーザからアクセスを一切受け付けたくない、というときには以下のコマンドを実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>chmod </span><span class=nv>go</span><span class=o>=</span> FILE</code></pre></div></div><div class=paragraph><p>カンマ区切りで設定することで、ファイルの属性を一度に 2 つ以上変更できます。
以下の例では、<em>FILE</em> に対して自分以外のユーザから書き込みの権限を取り上げ、かわりにすべてのユーザが <em>FILE</em> を実行できるようにします。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>chmod </span>go-w,a+x FILE</code></pre></div></div></div><div class=sect2><h3 id=_freebsd_のファイルフラグ>3.4.2. FreeBSD のファイルフラグ<a class=anchor href=#_freebsd_のファイルフラグ></a></h3><div class=paragraph><p>ファイルの許可属性に加え、FreeBSD では "ファイルフラグ" を使えます。
これはファイルにセキュリティや管理上の属性を追加するものですが、ディレクトリには追加しません。
ファイルフラグにより、<code>root</code> ユーザでさえ誤ってファイルを消去、変更してしまうことを防ぐことができます。</p></div><div class=paragraph><p>ファイルフラグは、<a href="https://man.freebsd.org/cgi/man.cgi?query=chflags&amp;sektion=1&amp;format=html">chflags(1)</a> を使って、簡単なインタフェースで設定できます。
例えば、<code>file1</code> というファイルにシステムレベルで消去不可のフラグを設定するには、以下のコマンドを実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chflags sunlink file1</span></code></pre></div></div><div class=paragraph><p>消去不可のフラグを削除するには、以下のように <code>sunlink</code> の前に "no" をつけて実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chflags nosunlink file1</span></code></pre></div></div><div class=paragraph><p>ファイルに設定されているフラグを確認するには、<code>-lo</code> と一緒に <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> を実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ls -lo file1</span></code></pre></div></div><div class="literalblock programlisting"><div class=content><pre>-rw-r--r--  1 trhodes  trhodes  sunlnk 0 Mar  1 05:54 file1</pre></div></div><div class=paragraph><p>いくつかのファイルフラグの追加、削除は <code>root</code> ユーザしかできません。
他のフラグは、ファイルの所有者が変更できます。
<a href="https://man.freebsd.org/cgi/man.cgi?query=chflags&amp;sektion=1&amp;format=html">chflags(1)</a> と <a href="https://man.freebsd.org/cgi/man.cgi?query=chflags&amp;sektion=2&amp;format=html">chflags(2)</a> から、より詳細な情報を得ることをおすすめします。</p></div></div><div class=sect2><h3 id=_setuid_setgid_および_sticky_許可属性>3.4.3. setuid, setgid および sticky 許可属性<a class=anchor href=#_setuid_setgid_および_sticky_許可属性></a></h3><div class=paragraph><p>これまでに説明した許可属性のほかに、
すべての管理者が知っておくべき特別な設定が 3 つあります。
それは <code>setuid</code>, <code>setgid</code> および <code>sticky</code> 許可属性です。</p></div><div class=paragraph><p>これらの設定は、通常のユーザには許可されていない機能を提供するので、UNIX® の操作において重要となることがあります。
これらの許可属性を理解するためには、実ユーザ ID と実効ユーザ ID の違いに注意してください。</p></div><div class=paragraph><p>実ユーザ ID は、所有したりプロセスを開始する UID です。
実効 UID は、プロセスを実行するユーザ ID です。
たとえば、ユーザがパスワードを変更するときに利用する <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> は、実ユーザ ID で起動します。
しかしながら、パスワードデータベースのアップデートの際は、実効 ID の <code>root</code> ユーザの権限で実行されます。
この仕組みにより、<code>Permission Denied</code> エラーが表示されることなく、ユーザはパスワードを変更できます。</p></div><div class=paragraph><p>setuid 許可属性は、以下の例で示されているように、ユーザに対して <code>s</code> の許可属性をつけることで設定できます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod u+s suidexample.sh</span></code></pre></div></div><div class=paragraph><p>setuid 許可属性は、以下の例で示されているように、指定する許可属性に数字の 4 をつけることでも設定できます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 4755 suidexample.sh</span></code></pre></div></div><div class=paragraph><p>これで <code>suidexample.sh</code> の許可属性は以下のように設定されます。</p></div><div class="literalblock programlisting"><div class=content><pre>-rwsr-xr-x   1 trhodes  trhodes    63 Aug 29 06:36 suidexample.sh</pre></div></div><div class=paragraph><p><code>s</code> は、許可属性のファイル所有者の実行可能ビットに置き換わって反映されます。
この設定により、<a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> といったユーティリティが権限を昇格することができます。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>nosuid</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> オプションを使うと、このようなバイナリがユーザへの警告なしに権限を昇格できないように設定できます。
ただし <code>nosuid</code> ラッパにより回避できるため、このオプションを完全には信頼できません。</p></div></td></tr></tbody></table></div><div class=paragraph><p>リアルタイムに確認するために、2 つのターミナルを開いてください。
1 つのターミナル上で、通常のユーザ権限で <code>passwd</code> と入力してください。
パスワードの入力を待つ間に、もう一つのターミナル上で、プロセステーブルおよび <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> のユーザ情報を確認してください。</p></div><div class=paragraph><p>ターミナル A:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Changing <span class=nb>local </span>password <span class=k>for </span>trhodes
Old Password:</code></pre></div></div><div class=paragraph><p>ターミナル B:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ps aux | grep passwd</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>trhodes  5232  0.0  0.2  3420  1608   0  R+    2:10AM   0:00.00 <span class=nb>grep </span>passwd
root     5211  0.0  0.2  3620  1724   2  I+    2:09AM   0:00.01 passwd</code></pre></div></div><div class=paragraph><p>通常のユーザ権限で <a href="https://man.freebsd.org/cgi/man.cgi?query=passwd&amp;sektion=1&amp;format=html">passwd(1)</a> を実行したにもかかわらず、実効 UID の <code>root</code> が使われています。</p></div><div class=paragraph><p><code>setgid</code> 許可属性は <code>setuid</code> 許可属性と同様の機能を提供しますが、この許可属性はグループの設定を変更します。
この設定を行った上でアプリケーションまたはユーティリティを実行すると、プロセスを開始するユーザではなく、ファイルを所有するグループに対してこの許可属性を与えます。</p></div><div class=paragraph><p>記号を用いてファイルに <code>setgid</code> 許可属性を設定するには、<a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> で設定するグループに <code>s</code> の許可属性をつけて実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod g+s sgidexample.sh</span></code></pre></div></div><div class=paragraph><p>または、<a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> で設定する許可属性の先頭に 2 をつけて実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 2755 sgidexample.sh</span></code></pre></div></div><div class=paragraph><p>以下に示されるように、<code>s</code> がグループの許可属性に指定されています。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nt>-rwxr-sr-x</span>   1 trhodes  trhodes    44 Aug 31 01:49 sgidexample.sh</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>上記の例において、対象としているシェルスクリプトが実行可能なファイルであっても、シェルスクリプトは <a href="https://man.freebsd.org/cgi/man.cgi?query=setuid&amp;sektion=2&amp;format=html">setuid(2)</a> システムコールにアクセスできないため、実効ユーザ ID では実行されません。</p></div></td></tr></tbody></table></div><div class=paragraph><p><code>setuid</code> および <code>setgid</code> 許可属性ビットは、権限の昇格を許可するので、システムのセキュリティレベルを下げます。
一方 3 番目の特殊な許可属性 <code>sticky bit</code> は、システムのセキュリティを強化します。</p></div><div class=paragraph><p>ディレクトリに <code>sticky bit</code> を設定すると、ファイルの所有者のみがファイルを削除できるようになります。
<code>/tmp</code> といった共有のディレクトリにおいて、ファイルの所有者以外のユーザがファイルを削除できなくなるので有用です。
この許可属性を有効にするには、ファイルに対して <code>t</code> モードを追加してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod +t /tmp</span></code></pre></div></div><div class=paragraph><p>または、許可属性に 1 をつけて設定してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 1777 /tmp</span></code></pre></div></div><div class=paragraph><p><code>sticky bit</code> が設定されていると、許可属性の最後に <code>t</code> が表示されます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ls -al / | grep tmp</span></code></pre></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>drwxrwxrwt  10 root  wheel         512 Aug 31 01:49 tmp</code></pre></div></div></div></div></div><div class=sect1><h2 id=dirstructure>3.5. ディレクトリ構造<a class=anchor href=#dirstructure></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD のディレクトリ構造は、システム全体を理解するに当たって重要です。
最も重要なディレクトリは、ルートまたは "/" です。
このディレクトリは起動時に一番最初にマウントされ、オペレーティングシステムをマルチユーザで動作させるために必要なベースシステムが含まれています。
また、ルートディレクトリには、マルチユーザへの移行中に他のファイルシステムをマウントするためのマウントポイントも含まれます。</p></div><div class=paragraph><p>マウントポイントとは、追加するファイルシステムを接続する先の親のファイルシステム (普通はルートファイルシステム) のディレクトリのことです。
より詳細な説明は <a href=#disk-organization>ディスク構成</a> の節にあります。
標準的なマウントポイントには <code>/usr/</code>, <code>/var/</code>, <code>/tmp/</code>, <code>/mnt/</code> および <code>/cdrom/</code> があります。
通常これらのディレクトリについては、<code>/etc/fstab</code> というファイル中のエントリが参照されます。
このファイルは、さまざまなファイルシステムとマウントポイントの表であり、システムが参照します。
<code>/etc/fstab</code> に書かれたファイルシステムは <code>noauto</code> オプションが指定されていなければ、起動時に <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> スクリプトによって自動的にマウントされます。
詳細は <a href=#disks-fstab>fstab ファイル</a> の節をご覧ください。</p></div><div class=paragraph><p>ファイルシステム構造を網羅した説明は <a href="https://man.freebsd.org/cgi/man.cgi?query=hier&amp;sektion=7&amp;format=html">hier(7)</a> に書かれています。
以下の表は、もっともよく使われるディレクトリの簡単な概要です。</p></div><table class="tableblock frame-all grid-all stretch"><col style=width:25%><col><tbody><tr><th class="tableblock halign-left valign-top"><p class=tableblock>ディレクトリ</p></th><td class="tableblock halign-left valign-top"><p class=tableblock>説明</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ファイルシステムのルートディレクトリ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/bin/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>シングルユーザ環境とマルチユーザ環境の両方で重要な ユーザユーティリティ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/boot/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>オペレーティングシステムの起動時に使われるプログラムと設定ファイル</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/boot/defaults/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>デフォルトの起動設定ファイル; <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a> 参照</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/dev/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=4&amp;format=html">devfs(4)</a> により管理されるデバイスファイル</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/etc/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>システム設定ファイルとスクリプト</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/etc/defaults/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>デフォルトのシステム設定ファイル; 詳細については <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> 参照</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/etc/periodic/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> 経由で毎日・毎週・毎月実行されるスクリプト; 詳細については <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a> 参照</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/lib/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock><code>/bin</code> および <code>/sbin</code> にあるバイナリで必要とされる重要なシステムライブラリ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/libexec/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>重要なシステムファイル</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/media/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>CD, USB ドライブおよびフロッピーディスクなどのリムーバブルメディアのマウントポイントとして使用されるサブディレクトリを含むディレクトリ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/mnt/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>システム管理者が一時的なマウントポイントとしてよく使う空のディレクトリ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/net/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>自動マウント NFS 共有。<a href="https://man.freebsd.org/cgi/man.cgi?query=auto_master&amp;sektion=5&amp;format=html">auto_master(5)</a> を参照</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/proc/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>プロセスファイルシステム; 詳細については <a href="https://man.freebsd.org/cgi/man.cgi?query=procfs&amp;sektion=5&amp;format=html">procfs(5)</a> と <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_procfs&amp;sektion=8&amp;format=html">mount_procfs(8)</a> 参照</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/rescue/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rescue&amp;sektion=8&amp;format=html">rescue(8)</a> で説明されている緊急時のために静的にリンクされているプログラム</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/root/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock><code>root</code> アカウントのホームディレクトリ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/sbin/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>シングルユーザ環境とマルチユーザ環境の両方で重要なシステムプログラムと管理ユーティリティ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/tmp/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>システムの再起動では通常保存 <em>されない</em> 一時的なファイル。
メモリファイルシステムはよく <code>/tmp</code> にマウントされます。
これは <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> の tmpmfs 関係の変数を使うか、<code>/etc/fstab</code> に設定項目を記入することで自動化できます。
詳しくは <a href="https://man.freebsd.org/cgi/man.cgi?query=mdmfs&amp;sektion=8&amp;format=html">mdmfs(8)</a> を参照して下さい。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>大部分のユーザユーティリティとアプリケーション</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/bin/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>よく使うユーティリティとプログラミングツールとアプリケーション</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/include/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>C の標準ヘッダファイル</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/lib/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ライブラリ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/libdata/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>いろいろなユーティリティのデータファイル</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/libexec/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>他のプログラムから実行されるシステムデーモンとシステムユーティリティ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/local/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ローカルのプログラムやライブラリなど。
FreeBSD ports フレームワークのデフォルトインストール先としても使われます。
<code>/usr/local</code> 内では、 <a href="https://man.freebsd.org/cgi/man.cgi?query=hier&amp;sektion=7&amp;format=html">hier(7)</a> に書かれている <code>/usr</code> のための一般構造が使われます。
例外は man ディレクトリで、<code>/usr/local/share</code> の下ではなく <code>/usr/local</code> の下に直接置かれ、ports 関係文書は <code>share/doc/port</code> に置かれます。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/ports/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>FreeBSD Ports Collection (オプション)。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/sbin/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザにより実行されるシステムデーモンおよびシステムユーティリティ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/share/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>アーキテクチャに依存しないファイル</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/src/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>BSD のソースファイルまたはローカルのソースファイル、あるいは両方</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/var/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>さまざまな用途のログ・一時的なファイル・スプールファイル。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/var/log/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>いろいろなシステムログファイル</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>/var/tmp/</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>一時的なファイル。通常の設定では、ここにあるファイルはシステムが再起動しても失われません。</p></td></tr></tbody></table></div></div><div class=sect1><h2 id=disk-organization>3.6. ディスク構成<a class=anchor href=#disk-organization></a></h2><div class=sectionbody><div class=paragraph><p>ファイルを見つけるために FreeBSD が使用する構成の一番小さな単位はファイル名です。
ファイル名は、大文字と小文字を区別します。
このことは <code>readme.txt</code> および <code>README.TXT</code> が異なる二つのファイルであることを意味します。
FreeBSD はそのファイルがプログラム、または文書、あるいはその他の形式かどうかを決定するために拡張子を使用しません。</p></div><div class=paragraph><p>ファイルはディレクトリ内に格納されます。
ディレクトリはファイルを一つも含んでいないかもしれせんし、または数百のファイルを含んでいるかもしれません。
ディレクトリはまた別のディレクトリを含むことができるので、
データを体系づけるディレクトリの階層構造を構築できます。</p></div><div class=paragraph><p>ファイルおよびディレクトリは、必要な他のディレクトリ名とスラッシュ (<code>/</code>) を後に続けてファイル名またはディレクトリ名を与えることによって参照されます。
たとえば、<code>foo</code> ディレクトリがあって、その中に <code>bar</code> ディレクトリがあるとします。
そして、その中に <code>readme.txt</code> があるとすると、ファイルへのフルネーム、または <em>パス</em> は <code>foo/bar/readme.txt</code> となります。
ファイルとディレクトリ名を分けるために <code>\</code> を使う Windows® とは違うことに注意してください。
FreeBSD は、パスの中にドライブレターまたは他のドライブ名を使いません。
たとえば、FreeBSD では <code>c:\foo\bar\readme.txt</code> とは書きません。</p></div><div class=sect2><h3 id=disks-file-systems>3.6.1. ファイルシステム<a class=anchor href=#disks-file-systems></a></h3><div class=paragraph><p>ディレクトリおよびファイルはファイルシステム内に格納されます。
どのファイルシステムも、そのファイルシステムのための <em>ルートディレクトリ</em> とよばれる、まさに頂点の位置にちょうど一つのディレクトリを含んでいます。
このルートディレクトリは他のディレクトリを含むことができます。
一つのファイルシステムは <em>ルートファイルシステム</em> または <code>/</code> として設計されています。
すべてのファイルシステムは、ルートファイルシステム以下に <em>マウント</em> されます。
FreeBSD システムでどんなに多くのディスクを使用しても、すべてのディレクトリは、同じディスクの一部であるように見えるので問題ありません。</p></div><div class=paragraph><p><code>A</code>, <code>B</code> および <code>C</code> と呼ばれる三つのファイルシステムがあるケースを考えます。
それぞれのファイルファイルシステムには一つのルートディレクトリがあり、<code>A1</code>, <code>A2</code> と呼ばれている二つの他のディレクトリを含んでいます (同様に <code>B1</code>, <code>B2</code> および <code>C1</code>, <code>C2</code> があります)。</p></div><div class=paragraph><p><code>A</code> をルートファイルシステムとします。
このディレクトリになにが含まれているか見るために <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> コマンドを使うと、<code>A1</code> および <code>A2</code> の二つのサブディレクトリが表示されるでしょう。
ディレクトリツリーは以下のようになります。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/basics/example-dir1.png alt="ルートディレクトリおよび 2 つのサブツリーを持つディレクトリツリー"></div></div><div class=paragraph><p>ファイルシステムはマウント先のファイルシステム内のディレクトリにマウントしなければいけません。
それでは、<code>A1</code> ディレクトリに <code>B</code> ファイルシステムをマウントすると仮定します。
<code>B</code> のルートディレクトリは <code>A1</code> に置き換えられ、そして <code>B</code> 内のディレクトリがそれに応じて現れます。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/basics/example-dir2.png alt="ルートディレクトリおよび 2 つのサブツリーを持つディレクトリツリー。さらに B1 および B2 サブディレクトリが  A1 にぶら下がっています"></div></div><div class=paragraph><p><code>B1</code> または <code>B2</code> 内にあるどんなファイルも、必要なときに <code>/A1/B1</code> または <code>/A1/B2</code> で到達できます。
<code>/A1</code> にあったすべてのファイルは一時的に隠されました。
それらは <code>B</code> が <code>A</code> から <em>アンマウント</em> されたら再び現れるでしょう。</p></div><div class=paragraph><p>もし <code>B</code> が <code>A2</code> にマウントされていたら、この図のようになります。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/basics/example-dir3.png alt="ルートディレクトリおよび 2 つのサブツリーを持つディレクトリツリー。さらに B1 および B2 サブディレクトリが  A2 にぶら下がっています"></div></div><div class=paragraph><p>そして、パスはそれぞれ <code>/A2/B1</code> および <code>/A2/B2</code> となるでしょう。</p></div><div class=paragraph><p>ファイルシステムは互いのファイルシステム上にもマウントできます。
上記の最後の例に続けて、<code>C</code> ファイルシステム は <code>B</code> ファイルシステム内の <code>B1</code> ディレクトリ上にマウントできます。
次の図のようになります。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/basics/example-dir4.png alt=複雑なディレクトリツリー。さまざまなサブディレクトリがルート以下にぶら下がっています。></div></div><div class=paragraph><p>または <code>C</code> を <code>A</code> ファイルシステムの <code>A1</code> ディレクトリの下に直接マウントできます。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/basics/example-dir5.png alt=複雑なディレクトリツリー。さまざまなサブディレクトリがルート以下にぶら下がっています。></div></div><div class=paragraph><p>一つの大きなルートファイルシステムを用意し、他のファイルシステムを作成する必要としないことはまったくもって可能です。
この方法にはいくつかの短所と一つの利点があります。</p></div><div class=ulist><div class=title>マルチファイルシステムの利点</div><ul><li><p>異なったファイルシステムは異なった <em>マウントオプション</em> を使用できます。
たとえば、ルートファイルシステムを読みだし専用でマウントして、不注意によってユーザが重大なファイルを削除、または編集できないようにすることができます。
また、<code>/home</code> のようなユーザが書き込み可能なファイルシステムを他のファイルシステムと分けることによって、 <em>nosuid</em> でマウントすることが可能になります。
このオプションは、ファイルシステムに記録されている <em>suid</em>/<em>guid</em> の実行可能ビットを有効にしないので、安全性を高めることができるでしょう。</p></li><li><p>FreeBSD はファイルシステムがどのように使われているかによって、自動的にファイルシステム上のファイルの配置を最適化します。 したがって、連続的に書き込まれた多くの小さなファイルが含まれているファイルシステムは、より大きく少ないファイルが含まれているファイルシステムと異なる最適化をするでしょう。 一つの大きなファイルシステムを作成すると、この最適化は成り立たなくなります。</p></li><li><p>FreeBSD のファイルシステムはトラブルが起きても強固です。 しかしながら臨界点でのトラブルは、ファイルシステムの構造にまだ損害を与えるかもしれません。 マルチファイルシステムへデータを分割しておくことで、 必要なときにバックアップからレストアすることをより容易にして、まだシステムが回復するかもしれません。</p></li></ul></div><div class=ulist><div class=title>シングルファイルシステムの利点</div><ul><li><p>ファイルシステムは固定サイズです。 FreeBSD をインストールするときにファイルシステムを作成して、 固定サイズを割りあてたなら、 後になってそのパーティションをより大きくする必要があると気づくかもしれません。 パーティションのサイズを変更するには、 バックアップ、新しいサイズを指定したファイルシステムの再作成、 バックアップしたデータをリストアする作業が必要となるでしょう。</p><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>FreeBSD には、 <a href="https://man.freebsd.org/cgi/man.cgi?query=growfs&amp;sektion=8&amp;format=html">growfs(8)</a> コマンドがあります。
このコマンドは、この制限を取り除いて、ファイルシステムのファイルを直ちに増加させることを可能にします。
ファイルシステムは、そのファイルシステムのあるパーティションの空いている領域に対してのみ拡張できます。
パーティションを分割した後、空いている領域があれば、<a href="https://man.freebsd.org/cgi/man.cgi?query=gpart&amp;sektion=8&amp;format=html">gpart(8)</a> を用いてパーティションを拡張できます。
仮想ディスクの最後のパーティションであれば、ディスクを大きくすると、パーティションを拡張できます。</p></div></td></tr></tbody></table></div></li></ul></div></div><div class=sect2><h3 id=disks-partitions>3.6.2. ディスクパーティション<a class=anchor href=#disks-partitions></a></h3><div class=paragraph><p>ファイルシステムは <em>パーティション</em> 内に含まれています。
ディスクは 1 つのパーティションスキーム (<a href=#bsdinstall-part-manual>[bsdinstall-part-manual]</a>) を用いてパーティションに分割されます。
新しいスキームは GPT で、古い BIOS-ベースのコンピュータは MBR を使用します。
GPT は、サイズ、オフセットおよびタイプによるディスクのパーティション分割に対応しています。
多くのパーティションおよびパーティションタイプに対応しているため、GPT が利用できる場合はこのパーティションスキームを使用することが推奨されます。
GPT パーティションは、接尾語 <code>p1</code> が最初のパーティション、接尾語 <code>p2</code> が 2 番目のパーティションといったような接尾語を使います。
一方 MBR パーティションは少ない数のパーティションにのみ対応しています。
MBR パーティションは、FreeBSD では <code>スライス</code> として知られています。
スライスは他のオペレーティングシステムでも使うことができます。
FreeBSD のスライスはさらに、BSD ラベル (<a href="https://man.freebsd.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8&amp;format=html">bsdlabel(8)</a> 参照) を用いてパーディションに分割できます。</p></div><div class=paragraph><p>スライス番号は 1 から始まり <code>s</code> を前につけられて、デバイス名の後に続きます。
したがって、"da0<em>s1</em>" は一番目の SCSI ドライブ上の一番目のスライスです。
ディスク上に存在できる物理スライスは、4 つまでですが、適切な種類の物理スライス内に論理スライスを作成できます。
これらの拡張されたスライス番号は 5 から始まります。
したがって、 "ada0<em>s5</em>" は、一番目の SATA ディスク上の一番目の拡張スライスです。
これらのデバイスは、スライスを占有することを予期するファイルシステムによって使用されます。</p></div><div class=paragraph><p>GPT または BSD の各パーティションは、一つのファイルシステムだけを含むことができます。
このことは、ファイルシステムがファイルシステムの階層上の典型的なマウントポイント、または含まれているパーティション名によって記述されることを意味します。</p></div><div class=paragraph><p>FreeBSD は <em>スワップ領域</em> にもまたディスク領域を使用します。
スワップ領域は FreeBSD に <em>仮想メモリ</em> を提供します。
これはあなたのコンピュータが、 実際に搭載している以上のメモリがあるかのように振舞います。
FreeBSD がメモリを使い果たしたときに、現在使用されていないデータのいくつかをスワップ領域に移動し、そのデータが必要となったときに (その他のデータをスワップ領域に移動させてから) メモリ内に移動しなおします。
これは <em>ページング</em> と呼ばれます。</p></div><div class=paragraph><p>いくつかの BSD パーティションはある慣習と関係づけられています。</p></div><table class="tableblock frame-all grid-all stretch"><col style=width:25%><col><tbody><tr><th class="tableblock halign-left valign-top"><p class=tableblock>パーティション</p></th><td class="tableblock halign-left valign-top"><p class=tableblock>慣習</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>a</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>通常、ルートパーティションを含みます。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>b</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>通常、スワップ領域を含みます。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>c</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>通常、スライス全体と同じサイズです。
これは、スライス全体にアクセス必要のあるユーティリティ (たとえば、ひどいブロックスキャナ) が、 <code>c</code> パーティションにアクセスすることを可能にします。
通常、このパーティション内にファイルシステムは作成されません。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>d</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock><code>d</code> パーティションは、 それに関連づけられた特別な意味を持っていましたが、 今は無いので、普通のパーティションとして動作するでしょう。</p></td></tr></tbody></table><div class=paragraph><p>スライスおよび "危険な専用" の物理ドライブ、 そして他のドライブは <code>a</code> から <code>h</code> までの文字として表される BSD パーティションを含んでいます。
この文字はデバイス名に追加されます。
したがって、 "da0<em>a</em>" は一番目の "危険な専用" <code>da</code> ドライブ上の <code>a</code> パーティションです。
"ada1s3<em>e</em>" は、 二番目の SATA ディスク上の 三番目のスライス内にある五番目のパーティションです。</p></div><div class=paragraph><p>最後に、システム上のそれぞれのディスクは識別されます。
ディスク名はどの種類のディスクであるかを示す記号ではじまり、どのディスクかを示す数字が続きます。
パーティションやスライスとは異なり、ディスクの番号づけは 0 から始まります。
共通の記号は <a href=#disks-naming>ディスクデバイス名</a> に示されます。</p></div><div class=paragraph><p>スライスにあるパーティションを参照するときには、ディスク名、<code>s</code>、スライス番号、そしてパーティション文字を含めてください。
<a href=#basics-disk-slice-part>ディスク名、スライス名、パーティション名のサンプル</a> に例があります。
GPT パーディションはディスク名、<code>p</code> そしてパーティション番号が含まれます。</p></div><div class=paragraph><p><a href=#basics-concept-disk-model>ディスクの概念的構成</a> は、MBR スライスを用いたディスク構成の概念のモデルを示します。</p></div><div class=paragraph><p>FreeBSD をインストールする際には、MBR を使用する場合にはディスクスライスを設定し、次に FreeBSD に用いるスライス内のパーティションを作成します。
GPT を使用する場合には、各ファイルシステムにパーティションを設定します。
どちらのケースでも、それぞれのパーティション内にファイルシステムまたはスワップ領域を作成し、ファイルシステムがどこにマウントされるか決定してください。
パーティションの操作についての詳細は <a href="https://man.freebsd.org/cgi/man.cgi?query=gpart&amp;sektion=8&amp;format=html">gpart(8)</a> をご覧ください。</p></div><table id=disks-naming class="tableblock frame-none grid-all stretch"><caption class=title>表 3. ディスクデバイス名</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">ドライブタイプ</th><th class="tableblock halign-left valign-top">ドライブデバイス名</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SATA および IDE ハードドライブ</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>ada</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SCSI ハードドライブおよび USB ストレージデバイス</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>da</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>NVMe ストレージ</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>nvd</code> または <code>nda</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SATA および IDE CD-ROM ドライブ</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>cd</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SCSI CD-ROM ドライブ</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>cd</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>フロッピードライブ</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>fd</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SCSI テープドライブ</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>sa</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>RAID ドライバ</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>aacd</code> (Adaptec® AdvancedRAID), <code>mlxd</code> および <code>mlyd</code> (Mylex®), <code>amrd</code> (AMI MegaRAID®), <code>idad</code> (Compaq Smart RAID), <code>twed</code> (3ware® RAID) など</p></td></tr></tbody></table><div class=exampleblock><div class=content><table id=basics-disk-slice-part class="tableblock frame-none grid-all stretch informaltable"><caption class=title>表 4. ディスク名、スライス名、パーティション名のサンプル</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">名前</th><th class="tableblock halign-left valign-top">意味</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ada0s1a</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>一番目の SATA ディスク (<code>ada0</code>) 上の一番目のスライス (<code>s1</code>) 内の一番目のパーティション (<code>a</code>)。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>da1s2e</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>二番目の SCSI ディスク (<code>da1</code>) 上の二番目のスライス (<code>s2</code>) 内の五番目のパーティション (<code>e</code>)。</p></td></tr></tbody></table></div></div><div id=basics-concept-disk-model class=exampleblock><div class=title>例 12. ディスクの概念的構成</div><div class=content><div class=paragraph><p>これはシステムに接続された一番目の SATA ディスクの FreeBSD から見た図を示します。
ディスクサイズは 250 GB と仮定し、80 GB のスライス (MS-DOS® でいうパーティション) および 170 GB のスライスがあるとします。
一番目のスライスは Windows® NTFS ファイルシステム <code>C:</code> を含んでいます。
そして、二番目のスライスは FreeBSD のディスクを含んでいます。
これは FreeBSD インストーラが四つのデータパーティションと一つのスワップパーティションを作成した例です。</p></div><div class=paragraph><p>四つのパーティションはそれぞれファイルシステムを含んでいます。
パティション <code>a</code> はルートファイルシステム、<code>d</code> は <code>/var</code>, <code>e</code> は <code>/usr</code>、そして <code>f</code> は <code>/usr</code> に使用されています。
パーティション <code>c</code> はスライス全体を示しており、通常のパーティションとは異なる使われ方をします。</p></div><div class=imageblock><div class=content><img src=../../../../images/books/handbook/basics/disk-layout.png alt="Windows と FreeBSD を 1 つのドライブに共存させたレイアウト"></div></div></div></div></div></div></div><div class=sect1><h2 id=mount-unmount>3.7. ファイルシステムのマウントとアンマウント<a class=anchor href=#mount-unmount></a></h2><div class=sectionbody><div class=paragraph><p>ファイルシステムは <code>/</code> をルート (根) とする木構造として考えると視覚的に理解しやすいでしょう。
ルートディレクトリにある <code>/dev</code> や <code>/usr</code>、その他のディレクトリは枝に相当し、それらには、<code>/usr/local</code> などのように、さらに枝分かれすることができます。</p></div><div class=paragraph><p>さまざまな理由がありますが、 ディレクトリをいくつかの異なるファイルシステム上に構築するのが良いでしょう。
たとえば <code>/var</code> には、 <code>log/</code> や <code>spool/</code> など、さまざまな種類の一時ファイルを置くディレクトリがあるため、あふれてしまう可能性があります。
ルートファイルシステムをあふれさせるのは得策ではありませんので、普通は <code>/var</code> を <code>/</code> から分離します。</p></div><div class=paragraph><p>また、次のような場合も、ディレクトリツリーを別のファイルシステムに置く理由として良くあげられます。
それは、たとえば物理的に別のディスクにディレクトリツリーを置く場合、 <a href=../advanced-networking/#network-nfs>「ネットワークファイルシステム (NFS)」</a> で説明されているようにネットワークファイルシステムをマウントしたり、CDROM ドライブのような別の仮想ディスクに置くという場合です。</p></div><div class=sect2><h3 id=disks-fstab>3.7.1. fstab ファイル<a class=anchor href=#disks-fstab></a></h3><div class=paragraph><p><code>/etc/fstab</code> に書かれているファイルシステムは、<code>noauto</code> オプション指定されているエントリを除いて <a href=../boot/#boot>起動プロセス</a> の途中で自動的にマウントされます。
このファイルは、 次のような書式で書かれたエントリを含んでいます。</p></div><div class="literalblock programlisting"><div class=content><pre>device       /mount-point fstype     options      dumpfreq     passno</pre></div></div><div class=dlist><dl><dt class=hdlist1><code>device</code></dt><dd><p>デバイス名。<a href=../disks/#disks-naming>「デバイス名」</a> に説明があります。</p></dd><dt class=hdlist1><code>mount-point</code></dt><dd><p>ファイルシステムがマウントするディレクトリ。</p></dd><dt class=hdlist1><code>fstype</code></dt><dd><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> に渡されるファイルシステムタイプ。 FreeBSD ファイルシステムのデフォルトは <code>ufs</code> です。</p></dd><dt class=hdlist1><code>options</code></dt><dd><p>読み書きするファイルシステムには <code>rw</code>、読み込み専用のファイルシステムには <code>ro</code> を、必要な他のオプションの前に指定します。 よく使われるオプションは <code>noauto</code> で、 起動時にはマウントされないファイルシステムに使います。 その他のオプションは <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> マニュアルページに載っています。</p></dd><dt class=hdlist1><code>dumpfreq</code></dt><dd><p>これは <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a> が使うもので、 どのファイルシステムにダンプが必要なのかを決めます。 この項目がなければ、0 であるものとみなされます。</p></dd><dt class=hdlist1><code>passno</code></dt><dd><p>これは再起動後に <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> がチェックする UFS ファイルシステムの順番を決めます。
ファイルシステムチェックを飛ばしたいファイルシステムには、<code>passno</code> を 0 に設定してください。
ルートファイルシステムはどれよりも先にチェックする必要があり、<code>passno</code> は 1 に設定してください。 他のファイルシステムの <code>passno</code> は 1 以上に設定してください。 同じ <code>passno</code> のファイルシステムがあった場合、 <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> は可能であれば並行してファイルシステムのチェック を行なおうとします。</p></dd></dl></div><div class=paragraph><p><code>/etc/fstab</code> の書式やオプションに関しての詳細は、 <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a> をご覧ください。</p></div></div><div class=sect2><h3 id=disks-mount>3.7.2. <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> の使い方<a class=anchor href=#disks-mount></a></h3><div class=paragraph><p>ファイルシステムは <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> を用いてマウントされます。
基本な構文は以下のようになります。</p></div><div class=exampleblock><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount device mountpoint</span></code></pre></div></div></div></div><div class=paragraph><p><code>/etc/fstab</code> に記載されているファイルシステムについても、マウントポイントを指定することでマウントできます。</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> で説明されているように、このコマンドはたくさんのオプションを提供します。
最もよく使われるのは次のものです。</p></div><div class=dlist><div class=title>マウントオプション</div><dl><dt class=hdlist1><code>-a</code></dt><dd><p><code>/etc/fstab</code> にある全てのファイルシステムをマウントします。 例外は "noauto" の印がついているものと、 <code>-t</code> フラグで除外されたものと、 すでにマウントされているファイルシステムです。</p></dd><dt class=hdlist1><code>-d</code></dt><dd><p>実際にマウントシステムコールする以外のすべてのことをします。 このオプションは <code>-v</code> フラグと組み合わせて使い、 <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> が実際なにをしようとしているのか調べるのに便利です。</p></dd><dt class=hdlist1><code>-f</code></dt><dd><p>クリーンでないファイルシステムを強制的にマウントします (危険です)。もしくは、ファイルシステムのマウント状態を 読み書き可能から読み込みのみに変更するとき、 書き込みアクセスを強制的に取り消します。</p></dd><dt class=hdlist1><code>-r</code></dt><dd><p>ファイルシステムを読み込み専用でマウントします。
<code>-o ro</code> を使うのと同じです。</p></dd><dt class=hdlist1><code>-t <em>fstype</em></code></dt><dd><p>指定のファイルシステムタイプでマウントします。 または、<code>-a</code> を使った場合、 指定したタイプのファイルシステムのみマウントします。
デフォルトのファイルシステムタイプは "ufs" です。</p></dd><dt class=hdlist1><code>-u</code></dt><dd><p>ファイルシステムのマウントオプションを更新します。</p></dd><dt class=hdlist1><code>-v</code></dt><dd><p>詳細な出力にします。</p></dd><dt class=hdlist1><code>-w</code></dt><dd><p>ファイルシステムを読み書き可能にマウントします。</p></dd></dl></div><div class=paragraph><p><code>-o</code> には、 次のようなオプションを複数カンマで区切って指定できます。</p></div><div class=dlist><dl><dt class=hdlist1>nosuid</dt><dd><p>そのファイルシステム上の setuid や setgid フラグを解釈しません。 これもセキュリティのために有用なオプションです。</p></dd></dl></div></div><div class=sect2><h3 id=disks-umount>3.7.3. <a href="https://man.freebsd.org/cgi/man.cgi?query=umount&amp;sektion=8&amp;format=html">umount(8)</a> の使い方<a class=anchor href=#disks-umount></a></h3><div class=paragraph><p>ファイルシステムをアンマウントするには、<a href="https://man.freebsd.org/cgi/man.cgi?query=umount&amp;sektion=8&amp;format=html">umount(8)</a> を使ってください。
このコマンドは、パラメータとしてマウントポイントの一つ、 デバイス名、もしくは <code>-a</code> や <code>-A</code> といったオプションを取ります。</p></div><div class=paragraph><p>いずれの形式でも <code>-f</code> で強制的なアンマウントを行ない、 <code>-v</code> で詳細な出力を出します。
ただしほとんどの場合、<code>-f</code> は使わないほうがよいでしょう。
計算機がクラッシュしたりファイルシステム上部のデータが破壊されたりする恐れがあります。</p></div><div class=paragraph><p>マウントされているファイルシステムすべてをアンマウントするには、<code>-a</code> と <code>-A</code> を使ってください。
<code>-t</code> にファイルシステムタイプを指定すると、指定されたものだけがアンマウントされます。
<code>-A</code> を使うとルートファイルシステムはアンマウントしません。</p></div></div></div></div><div class=sect1><h2 id=basics-processes>3.8. プロセスおよびデーモン<a class=anchor href=#basics-processes></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD はマルチタスクのオペレーティングシステムです。
動作中のプログラムはそれぞれ <em>プロセス</em> と呼ばれます。
すべてのコマンドは実行すると、最低でも 1 つの新しいプロセスを開始します。
FreeBSD により実行されているシステムプロセスもたくさんあります。</p></div><div class=paragraph><p>各プロセスは <em>プロセス ID</em> (PID) と呼ばれる数字でただ一つに識別されます。
ファイルのように各プロセスには所有者とグループがあり、
所有者とグループの許可属性は、そのプロセスが開けるファイルやデバイスを決定するために使われます。
多くのプロセスには親プロセスもあります。
親プロセスとは、そのプロセスをスタートさせたプロセスのことです。
例えば、シェルがプロセスで、シェルから起動されるコマンドは、シェルを親プロセスとするプロセスとなります。
例外は <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> という特別なプロセスです。
<code>init</code> は FreeBSD がスタートするときに起動される最初のプロセスで、PID は常に <code>1</code> です。</p></div><div class=paragraph><p>ユーザから始終入力があるように設計されていないプログラムがあり、そういったプログラムは最初から端末と切り離されています。
例えば、ウェブサーバはユーザからの入力ではなくウェブのリクエストを処理します。
メールサーバも、 こういった種類のアプリケーションの一例です。
このような種類のプログラムは、 <em>デーモン</em> と呼ばれます。
デーモンはギリシャ神話から来ており、目に見えないように役立つことをしてくれる善でも悪でもない実体を表します。
このため、BSD のマスコットはスニーカーをはいてフォークを携えたかわいらしい姿のデーモンなのです。</p></div><div class=paragraph><p>通常デーモンとして動作するプログラムには末尾に "d" を持った名前をつける慣習があります。
例えば、BIND は Berkeley Internet Name Domain ですが、 実際実行されるプログラムは <code>named</code> です。
また、Apache ウェブサーバのプログラムは <code>httpd</code>、ラインプリンタスプーリングデーモンは <code>lpd</code> です。
これは単なる命名に関する慣習です。
例えば、Sendmail アプリケーションの主なメールデーモンは <code>sendmail</code> で、<code>maild</code> ではありません。</p></div><div class=sect2><h3 id=_プロセスを確認する>3.8.1. プロセスを確認する<a class=anchor href=#_プロセスを確認する></a></h3><div class=paragraph><p>システム上で実行中のプロセスを確認するには、<a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> または <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> を使ってください。
現在動作中のプロセスのリスト、プロセスの PID やプロセスが使っているメモリの量、どういうコマンドラインで起動されたのかなどを表示させるには、<a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> を使ってください。
<a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> を使用すると、動作中の全てのプロセスを表示できます。
数秒ごとに表示を更新するので、計算機が何をしているのかインタラクティブに知ることができます。</p></div><div class=paragraph><p>デフォルトでは、<a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> はユーザにより動作中かつ所有のコマンドのみを表示します。
例えば:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ps
 PID TT  STAT    TIME COMMAND
8203  0  Ss   0:00.59 /bin/csh
8895  0  R+   0:00.00 ps</code></pre></div></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> の出力はいくつかの列に整形されています。
<code>PID</code> の列はプロセス ID を表示します。
PID は 1 から順に 99999 まで割り当てられ、その後足りなくなると最初に戻って使い回されます。ただし、使用中の PID には割り当てられません。
<code>TT</code> の列はプログラムが動いている tty を示し、<code>STAT</code> はプログラムの状態を示します。
<code>TIME</code> はプログラムがその CPU 上で動いている時間の長さです。
通常はプログラムをスタートさせたときからの経過時間ではありません。
多くのプログラムは、CPU 上で時間を使う必要があるまでかなりの時間を費すためです。
最後に、<code>COMMAND</code> はそのプログラムを起動するのに使われたコマンドとなります。</p></div><div class=paragraph><p>表示する情報を変更するオプションが用意されています。
いちばん便利なのは <code>auxww</code> でしょう。
<code>a</code> はすべてのユーザの動作中のプロセス全部についての情報を表示します。
<code>u</code> はプロセスの所有者のユーザ名とメモリ使用量を表示します。
<code>x</code> はデーモンプロセスについての情報を表示し、<code>ww</code> で、スクリーンに入りきらないほど長くなったコマンドラインでも省略せず、<a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> に各プロセスの全コマンドラインを表示させます。</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> の出力も同様です。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% top
last pid:  9609<span class=p>;</span>  load averages:  0.56,  0.45,  0.36              up 0+00:20:03  10:21:46
107 processes: 2 running, 104 sleeping, 1 zombie
CPU:  6.2% user,  0.1% <span class=nb>nice</span>,  8.2% system,  0.4% interrupt, 85.1% idle
Mem: 541M Active, 450M Inact, 1333M Wired, 4064K Cache, 1498M Free
ARC: 992M Total, 377M MFU, 589M MRU, 250K Anon, 5280K Header, 21M Other
Swap: 2048M Total, 2048M Free

  PID USERNAME    THR PRI NICE   SIZE    RES STATE   C   TIME   WCPU COMMAND
  557 root          1 <span class=nt>-21</span>  r31   136M 42296K <span class=k>select  </span>0   2:20  9.96% Xorg
 8198 dru           2  52    0   449M 82736K <span class=k>select  </span>3   0:08  5.96% kdeinit4
 8311 dru          27  30    0  1150M   187M uwait   1   1:37  0.98% firefox
  431 root          1  20    0 14268K  1728K <span class=k>select  </span>0   0:06  0.98% moused
 9551 dru           1  21    0 16600K  2660K CPU3    3   0:01  0.98% top
 2357 dru           4  37    0   718M   141M <span class=k>select  </span>0   0:21  0.00% kdeinit4
 8705 dru           4  35    0   480M    98M <span class=k>select  </span>2   0:20  0.00% kdeinit4
 8076 dru           6  20    0   552M   113M uwait   0   0:12  0.00% soffice.bin
 2623 root          1  30   10 12088K  1636K <span class=k>select  </span>3   0:09  0.00% powerd
 2338 dru           1  20    0   440M 84532K <span class=k>select  </span>1   0:06  0.00% kwin
 1427 dru           5  22    0   605M 86412K <span class=k>select  </span>1   0:05  0.00% kdeinit4</code></pre></div></div><div class=paragraph><p>出力は2つのセクションに分かれています。
ヘッダ (最初の 5 または 6 行) は動作している最新のプロセスの PID、システムの平均負荷 (システムがどれくらい忙しいかの指標)、システムの稼働時間 (最後の再起動からの時間) と現在の時刻を示します。
ヘッダの中の他の数字は動作中のプロセスの数、使われているメモリとスワップ領域の量、そしてシステムが異なる CPU 状態に消費した時間と関係します。
ZFS ファイルシステムのモジュールをロードしている場合には、<code>ARC</code> 行にはディスクではなくメモリキャッシュから読み込んだデータ量が表示されます。</p></div><div class=paragraph><p>ヘッダの下には、PID、ユーザ名、消費 CPU 時間とプロセスを起動したコマンドといった <a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a> の出力と同じような情報を持った行が続きます。
<a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> を使うとデフォルトでプロセスが使っているメモリ容量を表示します。
メモリ使用量の欄は 2 項目に分かれており、 一方は合計使用量、 そしてもう一方は実使用量です。
合計使用量はアプリケーションが必要としているメモリ量で、実使用量はその時点で実際に使われているメモリ量です。</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> は自動的に 2 秒ごとに画面を更新します。
<code>-s</code> 使うと更新間隔を変更することができます。</p></div></div><div class=sect2><h3 id=basics-daemons>3.8.2. プロセスの終了<a class=anchor href=#basics-daemons></a></h3><div class=paragraph><p>動作中のプロセスもしくはデーモンと通信する一つの方法は、<a href="https://man.freebsd.org/cgi/man.cgi?query=kill&amp;sektion=1&amp;format=html">kill(1)</a> を用いて <em>シグナル</em> を送信する方法です。
送信可能なシグナルはたくさんあります。
特別な意味があるものもあれば、アプリケーションの文章に説明されているものもあります。
ユーザは自分が所有者となっているプロセスにのみシグナルを送ることができます。
他人のプロセスにシグナルを送ると、permission denied というエラーになるでしょう。
この例外は <code>root</code> ユーザで、 ルートユーザは誰のプロセスに対してもシグナルを送ることができます。</p></div><div class=paragraph><p>オペレーティングシステムもプロセスにシグナルを送ることができます。
アプリケーションを下手に書いてしまい、予想外のメモリにアクセスしようとすると、FreeBSD はプロセスに "セグメンテーション違反" シグナル (<code>SIGSEGV</code>) を送ります。
ある程度の時間が経ったら <a href="https://man.freebsd.org/cgi/man.cgi?query=alarm&amp;sektion=3&amp;format=html">alarm(3)</a> システムコールを使って警告してもらうように書かれているアプリケーションには、"警告" シグナル (<code>SIGALRM</code>) が送信されます。</p></div><div class=paragraph><p>プロセスを止めるためには2つのシグナル、<code>SIGTERM</code> か <code>SIGKILL</code> を使います。
<code>SIGTERM</code> は穏かにプロセスを終了させる方法です。
プロセスはシグナルを受け取ることができ、開いているすべてのログファイルを閉じ、終了前にしていたことを終えるように試みることができます。
中断できない処理の途中だと、<code>SIGTERM</code> をプロセスが無視することもあるかもしれません。</p></div><div class=paragraph><p>プロセスは <code>SIGKILL</code> を無視することができません。
プロセスに <code>SIGKILL</code> を送ると、プロセスは通常その時点で止まります。</p></div><div class=paragraph><p>他に良く使われるシグナルには、<code>SIGHUP</code>、<code>SIGUSR1</code> と <code>SIGUSR2</code> があります。
これらは一般的な用途のシグナルなので、このシグナルが送信されたときの応答は、アプリケーション毎に異なります。</p></div><div class=paragraph><p>例として、ウェブサーバの設定ファイルを変更後、ウェブサーバに設定を再読み込みさせる必要があります。
<code>httpd</code> を再起動するとウェブサーバは一瞬ながら停止してしまいます。
その代わりに <code>SIGHUP</code> シグナルを送りましょう。
デーモンごとに行動が違うので、<code>SIGHUP</code> が期待する結果となるように、そのデーモンの文書を読んで確認してください。</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>システム上のランダムプロセスを終了させるのはよくありません。
特に、PID が 1 の <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> は特別です。
<code>/bin/kill -s KILL 1</code> は推奨されていませんが、実行するといとも簡単にシステムをシャットダウンさせることができます。
<kbd>Return</kbd> を押す <em>前</em> に <a href="https://man.freebsd.org/cgi/man.cgi?query=kill&amp;sektion=1&amp;format=html">kill(1)</a> を実行する引数を二重にチェックする <em>癖</em> をつけてください。</p></div></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=shells>3.9. シェル<a class=anchor href=#shells></a></h2><div class=sectionbody><div class=paragraph><p><em>シェル</em> は、オペレーティングシステムを利用するためのコマンドラインインタフェースを提供します。
シェルは入力チャンネルからコマンドを受け取り、それらを実行します。
大部分のシェルは、日々の作業、ファイル管理やファイル名の展開、コマンドライン編集、コマンドマクロ、環境変数といった組み込みの機能を持ってます。
FreeBSD には Bourne Shell (<a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>) や 高機能 C-shell (<a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a>) が含まれています。
また、これ以外にも <code>zsh</code> や <code>bash</code> などのシェルが FreeBSD Ports Collection から利用可能です。</p></div><div class=paragraph><p>どのシェルを使うかは、まったく趣味の問題です。
あなたが C のプログラマだったとすれば、<a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a> のような C 風のシェルの方が落ち着くかもしれません。
Linux® ユーザであれば、<code>bash</code> を好まれるでしょう。
それぞれのシェルは、 ユーザの好みの作業環境で利用できる (もしくはできない) 独自の機能を持っているということ、そして、どのシェルを使うことにするかを決めるのはユーザ自身ということです。</p></div><div class=paragraph><p>シェルの一般的な機能の一つに、ファイル名の補完があります。
コマンドやファイル名の最初の数文字を入力して <kbd>Tab</kbd> を押すと、シェルにコマンドやファイル名の残りの部分を補完させることができます。
例として、<code>foobar</code> および <code>footbar</code> という二つのファイルがあるとします。
<code>foobar</code> を削除するために <code>rm foo</code> と入力し、<kbd>Tab</kbd> を押してファイル名を補完しようとします。</p></div><div class=paragraph><p>しかしシェルは <code>rm foo</code> とだけ出力します。
<code>foobar</code> および <code>football</code> のファイル名は、両方とも <code>foo</code> から始まるため、ファイル名の補完を完全には行なえませんでした。
一つ以上のファイル名にマッチした場合、ビープ音をらすシェルもあれば、選択できるすべてのファイル名を表示するシェルもあります。
この場合、希望するファイル名を同定するために、ユーザはさらに文字を入力する必要があります。
<code>t</code> を入力してもう一度 <kbd>Tab</kbd> を押すと、シェルはファイル名を確定でき、ファイル名の残りの部分が補完されます。</p></div><div class=paragraph><p>もう一つあげられるシェルの特徴として、環境変数があります。
環境変数とは、シェルの環境変数におけるキーと値とのペアです。
この環境変数は、そのシェルから起動されたプログラムから参照でき、それを利用してプログラムの設定を保存するのに利用されます。
<a href=#shell-env-vars>一般的な環境変数</a> は、一般的な環境変数とその意味の一覧です。
環境変数の名前は常に大文字です。</p></div><table id=shell-env-vars class="tableblock frame-all grid-all stretch"><caption class=title>表 5. 一般的な環境変数</caption><col style=width:25%><col><tbody><tr><th class="tableblock halign-left valign-top"><p class=tableblock>変数名</p></th><td class="tableblock halign-left valign-top"><p class=tableblock>意味</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>USER</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>現在のログインユーザのユーザ名。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>PATH</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>コロンで区切られた実行ファイル探索のための ディレクトリのリスト。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>DISPLAY</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>接続する Xorg ディスプレイのネットワーク名 (存在する場合のみ)。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>SHELL</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>現在のシェル。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>TERM</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザの端末種名。 端末のケーパビリティを決定するのに使われる。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>TERMCAP</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>種々の端末の機能を実現する端末のエスケープコードの データベースのエントリ。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>OSTYPE</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>オペレーティングシステムの種別。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>MACHTYPE</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>システムの CPU アーキテクチャ。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>EDITOR</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザの選んだテキストエディタ。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>PAGER</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>ユーザの選んだ画面上でテキストを見るためのユーティリティ。</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class=tableblock><code>MANPATH</code></p></th><td class="tableblock halign-left valign-top"><p class=tableblock>コロンで区切られたマニュアルページ探索のための ディレクトリのリスト。</p></td></tr></tbody></table><div class=paragraph><p>環境変数を設定する方法は、シェルごとに多少異なります。
<a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a> や <a href="https://man.freebsd.org/cgi/man.cgi?query=csh&amp;sektion=1&amp;format=html">csh(1)</a> では <code>setenv</code> を使います。
<a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a> や <code>bash</code> 等の Bourne シェルでは、<code>export</code> を使って現在の環境変数を設定します。
以下の例では、<code>tcsh</code> シェルでデフォルトの <code>EDITOR</code> を <code>/usr/local/bin/emacs</code> に設定します。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% setenv EDITOR /usr/local/bin/emacs</code></pre></div></div><div class=paragraph><p><code>bash</code> では次のようになります。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>export </span><span class=nv>EDITOR</span><span class=o>=</span><span class=s2>&#34;/usr/local/bin/emacs&#34;</span></code></pre></div></div><div class=paragraph><p>現在の設定を確認するために、コマンドライン中の変数名の前に <code>$</code> 文字を置くことで、環境変数を展開させることができます。
たとえば、<code>echo $TERM</code> は <code>$TERM</code> が セットされている内容を表示します。</p></div><div class=paragraph><p>シェルは特殊文字を、特別なデータを表すものとして扱います。
その特殊文字はメタキャラクタと呼ばれます。
もっとも一般的なメタキャラクタは <code>*</code> で、これはファイル名に含まれる、あらゆる文字を表します。
メタキャラクタはファイル名の展開に使われます。
たとえば、<code>echo *</code> と入力すると <code>ls</code> と入力したのとほとんど同じ結果を得られます。
これはシェルが <code>*</code> とマッチするすべてのファイルを受け取って <code>echo</code> はコマンドラインでそれらを表示するからです。</p></div><div class=paragraph><p>特殊文字をシェルに解釈させないようにするため、特殊文字の前にバックスラッシュ文字 (<code>\</code>) を置いてエスケープしてください。
例えば <code>echo $TERM</code> は端末の設定を表示し、<code>echo \$TERM</code> は <code>$TERM</code> とそのまま表示します。</p></div><div class=sect2><h3 id=changing-shells>3.9.1. シェルの変更<a class=anchor href=#changing-shells></a></h3><div class=paragraph><p>デフォルトのシェルを変更する一番簡単な方法は <code>chsh</code> を使うことです。
このコマンドを実行すると、環境変数 <code>EDITOR</code> で示されたエディタ (デフォルトでは <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a> が設定されている) が立ち上がります。
<code>Shell:</code> の行を変更するシェルの絶対パスに変更してください。</p></div><div class=paragraph><p>代わりに <code>chsh -s</code> を使うと、エディタを起動せずにシェルを変更できます。
たとえば、シェルを <code>bash</code> に変えたいなら、次のようにしてください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% chsh <span class=nt>-s</span> /usr/local/bin/bash</code></pre></div></div><div class=paragraph><p>プロンプトに対してパスワードを入力し、<kbd>Return</kbd> を押すと、シェルが変更されます。
新しいシェルを使うには、一度ログオフしてから再ログインしてください。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>使おうと思っているシェルは<em>必ず</em> <code>/etc/shells</code> 中に書かれていなければなりません。
シェルを <a href=../ports/#ports>アプリケーションのインストール - packages と ports</a> で説明されている FreeBSD の Ports Collection からインストールしたのであれば、自動的にこのファイルに追加されています。
もし書かれていなければ、以下のコマンドで、パスをシェルのパスに置き換えて使って追加してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo /usr/local/bin/bash &gt;&gt; /etc/shells</span></code></pre></div></div><div class=paragraph><p>その後 <a href="https://man.freebsd.org/cgi/man.cgi?query=chsh&amp;sektion=1&amp;format=html">chsh(1)</a> を実行してください。</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_高度なシェルの機能>3.9.2. 高度なシェルの機能<a class=anchor href=#_高度なシェルの機能></a></h3><div class=paragraph><p>UNIX® のシェルは単なるコマンドインタプリタではなく、ユーザが実行したコマンドの出力をリダイレクトしたり、入力をリダイレクトすることによりコマンドをお互いに繋げることで、最終的なコマンドの出力結果を改良できます。
この機能をビルトインコマンドとともに用いることで、ユーザは最大化された効率の環境を入手できます。</p></div><div class=paragraph><p>シェルのリダイレクト機能を使うことで、コマンドの出力や入力を別のコマンドに送ったり、ファイルに送ることができます。
たとえば、 <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> コマンドの出力をキャプチャするには、
出力をファイルにリダイレクトしてください。
以下はその例です。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>ls</span> <span class=o>&gt;</span> directory_listing.txt</code></pre></div></div><div class=paragraph><p>実行すると、現在の作業ディレクトリにあるファイルの一覧が <code>directory_listing.txt</code> に出力されます。
<a href="https://man.freebsd.org/cgi/man.cgi?query=sort&amp;sektion=1&amp;format=html">sort(1)</a> のようなコマンドは、入力を読み込むことができます。
先ほど得たファイルの一覧をソートするには、入力元をファイルにリダイレクトしてください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>sort</span> &lt; directory_listing.txt</code></pre></div></div><div class=paragraph><p>入力された内容はソートされ画面に出力されます。
この出力を他のファイルにリダイレクトするには、リダイレクトの向きを混ぜるように <a href="https://man.freebsd.org/cgi/man.cgi?query=sort&amp;sektion=1&amp;format=html">sort(1)</a> の出力をリダイレクトしてください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>sort</span> &lt; directory_listing.txt <span class=o>&gt;</span> sorted.txt</code></pre></div></div><div class=paragraph><p>これまでの例では、ファイルディスクリプタを用いてコマンドに対しリダイレクトを行っています。
すべての UNIX® システムは標準入力 (stdin)、標準出力 (stdout) および標準エラー (stderr) といったファイルディスクリプタを持っています。
それぞれに対象があり、
入力はキーボードまたはマウスなどの入力を提供するものが対象、出力はスクリーンであったりプリンタ用紙が対象です。
また、エラーは診断やエラーメッセージに用いられるものが対象です。
これらは、I/O ベースのファイルディスクリプタ、時にはストリームと考えられます。</p></div><div class=paragraph><p>これらのディスクリプタを使用することで、シェルは出力と入力についてさまざまなコマンドを経由させ、また、ファイルに対して出力し、もしくはファイルから読み込むようにリダイレクトできます。
リダイレクトの他の方法は、パイプの機能です。</p></div><div class=paragraph><p>UNIX® のパイプ記号 "|" は、コマンドの出力を他のプログラムに直接渡します。
基本的には、パイプはコマンドの標準出力を他のコマンドの標準出力に渡します。
以下はその例です。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cat </span>directory_listing.txt | <span class=nb>sort</span> | less</code></pre></div></div><div class=paragraph><p>この例では、<code>directory_listing.txt</code> の内容がソートされ、その結果が <a href="https://man.freebsd.org/cgi/man.cgi?query=less&amp;sektion=1&amp;format=html">less(1)</a> に渡されます。
このコマンドを実行すると、出力がスクロールして画面から見えなくなることをさけることができて、ユーザは出力を自分のペースでスクロールできます。</p></div></div></div></div><div class=sect1><h2 id=editors>3.10. テキストエディタ<a class=anchor href=#editors></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD の設定の多くは、テキストファイルの編集で行われます。
そのため、テキストエディタの扱いに慣れると良いでしょう。
FreeBSD には、基本システムの一部として二、三提供されるものと、Ports Collection から利用できる、たくさんのテキストエディタが用意されています。</p></div><div class=paragraph><p>学習が簡単なエディタは、 easy editor の略で <a href="https://man.freebsd.org/cgi/man.cgi?query=ee&amp;sektion=1&amp;format=html">ee(1)</a> と呼ばれるものです。
このエディタを立ち上げるには、<code>ee <em>filename</em></code> と入力してください。
ここで <em>filename</em> は、 編集しようとしているファイルの名前です。
一旦このコマンドの中に入れば、 エディタの機能を操作するコマンドはすべてディスプレイの上部に表示されています。
キャレット (<code>^</code>) は <kbd>Ctrl</kbd> を意味するので、<code>^e</code> は <span class=keyseq><kbd>Ctrl</kbd>+<kbd>e</kbd></span> を押すという意味になります。
<a href="https://man.freebsd.org/cgi/man.cgi?query=ee&amp;sektion=1&amp;format=html">ee(1)</a> を終了するには <kbd>Esc</kbd> を押し、そしてメインメニューから "leave editor" オプションを選択してください。
ファイルが更新されていたときは、エディタは変更をセーブするかどうかプロンプトを出します。</p></div><div class=paragraph><p>FreeBSD には、ベースシステムの一部として <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a> といったより強力なテキストエディタが用意されています。
<a class=package href=https://cgit.freebsd.org/ports/tree/editors/emacs/>editors/emacs</a> および <a class=package href=https://cgit.freebsd.org/ports/tree/editors/vim/>editors/vim</a> といった他のエディタは Ports Collection の一部として用意されています。
これらのエディタはやや学習が複雑ですが、より高い機能性を提供します。
しかし、あなたが多量のテキストを編集することを考えているなら、 vim や Emacs といった強力なエディタを習得することは、 より多くの時間を節約することでしょう。</p></div><div class=paragraph><p>ファイルを編集したり、文字入力を必要とするようなアプリケーションの多くは、自動的にテキストエディタを起動します。
<a href=#shells>シェル</a> の節で説明したように、デフォルトのエディタを変更するには <code>EDITOR</code> 環境変数に希望するエディタを設定してください。</p></div></div></div><div class=sect1><h2 id=basics-devices>3.11. デバイスとデバイスノード<a class=anchor href=#basics-devices></a></h2><div class=sectionbody><div class=paragraph><p>デバイスとはシステム上のハードウェアに関するものに対してよく使われる用語で、ディスクやプリンタ、グラフィックカードやキーボードが含まれます。
FreeBSD が起動するとき、ブートメッセージの大部分は検出されたデバイスについてのものです。
ブートメッセージは <code>/var/run/dmesg.boot</code> に保存されています。</p></div><div class=paragraph><p>各デバイスはデバイス名と番号を持ちます。
例えば、<code>ada0</code> は最初の SATA CD-ROM ドライブで、<code>kbd0</code> はキーボードを表します。</p></div><div class=paragraph><p>FreeBSD におけるほとんどのデバイス、デバイスノードと呼ばれる <code>/dev</code> にあるスペシャルファイルを通してアクセスしなければなりません。</p></div></div></div><div class=sect1><h2 id=basics-more-information>3.12. マニュアルページ<a class=anchor href=#basics-more-information></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD についてのもっとも包括的な文書は、 マニュアルページの形式になっているものです。
FreeBSD システム上のほとんどすべてのプログラムには、基本的な操作方法と利用可能な引数を説明しているリファレンスマニュアルが添付されています。
これらのマニュアルは <code>man</code> を使って見ることができます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% man コマンド名</code></pre></div></div><div class=paragraph><p>ここで <code>コマンド名</code> のところには、知りたいコマンドの名前を入れます。
たとえば <a href="https://man.freebsd.org/cgi/man.cgi?query=ls&amp;sektion=1&amp;format=html">ls(1)</a> について知りたい場合には、次のように入力します。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% man <span class=nb>ls</span></code></pre></div></div><div class=paragraph><p>マニュアルは、トピックごとにセクション番号で分類されています。
FreeBSD では、以下のセクションがあります。</p></div><div class="olist arabic"><ol class=arabic><li><p>ユーザコマンド</p></li><li><p>システムコールとエラー番号</p></li><li><p>C のライブラリ関数</p></li><li><p>デバイスドライバ</p></li><li><p>ファイル形式</p></li><li><p>ゲームや娯楽</p></li><li><p>さまざまな情報</p></li><li><p>システムの管理と操作のためのコマンド</p></li><li><p>システムカーネルインタフェース</p></li></ol></div><div class=paragraph><p>時折、 同じトピックがオンラインマニュアルの複数のセクションに記載されている場合があります。
たとえば、<code>chmod</code> ユーザコマンドと <code>chmod()</code> システムコールの場合がそれに該当します。
<a href="https://man.freebsd.org/cgi/man.cgi?query=man&amp;sektion=1&amp;format=html">man(1)</a> にセクション番号を与えることで、 表示したいセクションを指定できます。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% man 1 <span class=nb>chmod</span></code></pre></div></div><div class=paragraph><p>上のようにすれば、ユーザコマンド <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> のマニュアルページが表示されます。
オンラインマニュアルの特定セクションへの参照は、慣習的に書かれている文書で括弧の中に示されます。
すなわち、<a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> はユーザコマンドを、<a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=2&amp;format=html">chmod(2)</a> はシステムコールの方を示しています。</p></div><div class=paragraph><p>マニュアルページの名前を知らない場合には、<code>man -k</code> を使ってマニュアルページの解説 (description) からキーワードを検索してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% man <span class=nt>-k</span> mail</code></pre></div></div><div class=paragraph><p>このコマンドは、"mail" というキーワードをコマンド解説に含むコマンドの一覧を表示します。
これは <a href="https://man.freebsd.org/cgi/man.cgi?query=apropos&amp;sektion=1&amp;format=html">apropos(1)</a> と同等の機能です。</p></div><div class=paragraph><p><code>/usr/sbin</code> にあるすべてのコマンドの説明を読むには、以下のように実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> /usr/sbin
% man <span class=nt>-f</span> <span class=k>*</span> | more</code></pre></div></div><div class=paragraph><p>または、以下を実行してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> /usr/sbin
% whatis <span class=k>*</span> |more</code></pre></div></div><div class=sect2><h3 id=basics-info>3.12.1. GNU の Info ファイル<a class=anchor href=#basics-info></a></h3><div class=paragraph><p>FreeBSD には Free Software Foundation (FSF) によるアプリケーションやユーティリティが含まれています。
これらのプログラムには、マニュアルページに加えて <code>info</code> ファイルと呼ばれるハイパーテキスト形式の文書が付属しています。
この文書は <a href="https://man.freebsd.org/cgi/man.cgi?query=info&amp;sektion=1&amp;format=html">info(1)</a>、あるいは <a class=package href=https://cgit.freebsd.org/ports/tree/editors/emacs/>editors/emacs</a> をインストールしているなら emacs の info モードで読むことができます。</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=info&amp;sektion=1&amp;format=html">info(1)</a> を使うには、次のように入力してください。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% info</code></pre></div></div><div class=paragraph><p><code>h</code> と入力すると、 簡単な手引きを読むことができます。 クイックコマンドリファレンスは <code>?</code> を入力してください。</p></div></div></div></div></div><hr><div class=last-modified><p><strong>最終更新日</strong>: 2024年3月9日 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/ja/books/handbook/bsdinstall class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/ja/books/handbook/ports class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#basics-synopsis>3.1. この章では</a></li><li><a href=#consoles>3.2. 仮想コンソールと端末</a></li><li><a href=#users-synopsis>3.3. ユーザと基本的なアカウント管理</a></li><li><a href=#permissions>3.4. 許可属性</a></li><li><a href=#dirstructure>3.5. ディレクトリ構造</a></li><li><a href=#disk-organization>3.6. ディスク構成</a></li><li><a href=#mount-unmount>3.7. ファイルシステムのマウントとアンマウント</a></li><li><a href=#basics-processes>3.8. プロセスおよびデーモン</a></li><li><a href=#shells>3.9. シェル</a></li><li><a href=#editors>3.10. テキストエディタ</a></li><li><a href=#basics-devices>3.11. デバイスとデバイスノード</a></li><li><a href=#basics-more-information>3.12. マニュアルページ</a></li></ul></nav><hr><div class=resources><h3>リソース</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="PDF 版のダウンロード"></i><a href=https://download.freebsd.org/doc/ja/books/handbook/handbook_ja.pdf>PDF 版のダウンロード</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ja/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/ja/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt="Choose language">
<span>日本語</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/ja class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/ja/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>