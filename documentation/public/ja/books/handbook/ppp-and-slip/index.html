<!doctype html><html class=theme-light lang=ja><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/><title>第18章 PPP と SLIP | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="第18章 PPP と SLIP"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="ja"><meta property="og:url" content="http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/ja\/books\/handbook\/ppp-and-slip\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/ja>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/ja/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/ja/books>Books</a></li><li><a href=http://172.16.201.134:1313/ja/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/ja/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=ja>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/preface/>前書き</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-audience>想定している読者</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-changes-from3>第 3 版からの変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-changes-from2>第 2 版 (2004) からの変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-changes>第 1 版 (2001) からの変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-overview>この文書の構成</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-conv>この文書で用いられている表記法</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/preface/#preface-acknowledgements>謝辞</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/parti/>パートI. 導入</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/>第1章 はじめに</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/#introduction-synopsis>1.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/#nutshell>1.2. FreeBSD へようこそ!</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/introduction/#history>1.3. FreeBSD プロジェクトについて</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/>第2章 FreeBSD のインストール</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. 最小ハードウェア要件</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-pre>2.3. インストール前に行う作業</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-start>2.4. インストールの開始</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#using-bsdinstall>2.5. bsdinstall の使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-partitioning>2.6. ディスク領域の割り当て</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-fetching-distribution>2.7. 配布ファイルのダウンロード</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-post>2.8. ネットワークインターフェース、アカウント、タイムゾーン、 サービスおよびセキュリティオプションの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.9. トラブルシューティング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bsdinstall/#using-live-cd>2.10. Live CD を使う</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/basics/>第3章 FreeBSD の基礎知識</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-synopsis>3.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#consoles>3.2. 仮想コンソールと端末</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#users-synopsis>3.3. ユーザと基本的なアカウント管理</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#permissions>3.4. 許可属性</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#dirstructure>3.5. ディレクトリ構造</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#disk-organization>3.6. ディスク構成</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#mount-unmount>3.7. ファイルシステムのマウントとアンマウント</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-processes>3.8. プロセスおよびデーモン</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#shells>3.9. シェル</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#editors>3.10. テキストエディタ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-devices>3.11. デバイスとデバイスノード</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/basics/#basics-more-information>3.12. マニュアルページ</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/ports/>第4章 アプリケーションのインストール - packages と ports</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-synopsis>4.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-overview>4.2. ソフトウェアのインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-finding-applications>4.3. ソフトウェアの探し方</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#pkgng-intro>4.4. pkg によるバイナリ package の管理</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-using>4.5. Ports Collection の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-poudriere>4.6. Poudriere を用いた package の構築</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-nextsteps>4.7. インストール後の作業</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ports/#ports-broken>4.8. うまく動作しない ports に遭遇した場合には</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/x11/>第5章 X Window System</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x11-synopsis>5.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-understanding>5.2. 用語の説明</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-install>5.3. Xorg のインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-config>5.4. Xorg の設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-fonts>5.5. Xorg でのフォントの使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-xdm>5.6. X ディスプレイマネージャ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x11-wm>5.7. デスクトップ環境</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x-compiz-fusion>5.8. Compiz Fusion のインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/x11/#x11-troubleshooting>5.9. トラブルシューティング</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partii/>パートII. 日々の生活</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/>第6章 デスクトップアプリケーション</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-synopsis>6.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-browsers>6.2. ブラウザ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-productivity>6.3. 生産的なアプリケーション</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-viewers>6.4. ドキュメントビューア</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/desktop/#desktop-finance>6.5. 財務管理ソフトウェア</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/>第7章 マルチメディア</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#multimedia-synopsis>7.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#sound-setup>7.2. サウンドカードの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#sound-mp3>7.3. MP3 オーディオ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#video-playback>7.4. ビデオ再生</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#tvcard>7.5. TV カードの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#mythtv>7.6. MythTV</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/multimedia/#scanners>7.7. 画像スキャナ</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/>第8章 FreeBSD カーネルのコンフィグレーション</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. なぜカスタムカーネルを作るか?</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-devices>8.3. システムのハードウェアについて知る</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-config>8.4. コンフィグレーションファイル</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-building>8.5. カスタムカーネルの構築とインストール</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/kernelconfig/#kernelconfig-trouble>8.6. 問題が起きた場合には</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/printing/>第9章 プリンタの利用</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-synopsis>9.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-intro-spooler>9.2. はじめに</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-intro-setup>9.3. 基本的な設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-advanced>9.4. プリンタ設定上級編</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-using>9.5. プリンタを使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-lpd-alternatives>9.6. 標準スプーラの代替品</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/printing/#printing-troubleshooting>9.7. トラブルシューティング</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/>第10章 Linux® バイナリ互換機能</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/#linuxemu-synopsis>10.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Linux® バイナリ互換機能の設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/linuxemu/#linuxemu-advanced>10.3. 高度なトピックス</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partiii/>パートIII. システム管理</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/config/>第11章 設定とチューニング</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#_この章では>11.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-core-configuration>11.2. 中核となる設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-appconfig>11.3. アプリケーションの設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-starting-services>11.4. サービスの起動</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-virtual-hosts>11.5. バーチャルホスト</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-configfiles>11.6. 設定ファイル</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-sysctl>11.7. sysctl によるチューニング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-disk>11.8. ディスクのチューニング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/config/#configtuning-kernel-limits>11.9. Kernel 制限のチューニング</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/boot/>第12章 FreeBSD の起動のプロセス</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#boot-synopsis>12.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#boot-introduction>12.2. FreeBSD の起動プロセス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#device-hints>12.3. Device Hints</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/boot/#boot-shutdown>12.4. シャットダウン動作</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/security/>第13章 セキュリティ</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-synopsis>13.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-intro>13.2. はじめに</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#one-time-passwords>13.3. ワンタイムパスワード</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#tcpwrappers>13.4. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#kerberos5>13.5. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#openssl>13.6. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#ipsec>13.7. VPN over IPsec</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#openssh>13.8. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#fs-acl>13.9. ファイルシステムアクセス制御リスト (ACL)</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-portaudit>13.10. サードパーティ製ソフトウェアのセキュリティ問題を監視する</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-advisories>13.11. FreeBSD セキュリティ勧告</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-accounting>13.12. プロセスアカウンティング</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/security/#security-resourcelimits>13.13. リソースの制限</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/disks/>第14章 ストレージ</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-synopsis>14.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disk-naming>14.2. デバイス名</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-adding>14.3. ディスクの追加</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#raid>14.4. RAID</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#creating-cds>14.5. 光メディア (CD & DVD) の作成と使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#floppies>14.6. フロッピーディスクの作成と使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#backups-tapebackups>14.7. データテープの作成と使用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#backups-floppybackups>14.8. フロッピーディスクへのバックアップ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#backup-basics>14.9. バックアップの基本</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-virtual>14.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#snapshots>14.11. ファイルシステムのスナップショット</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#quotas>14.12. ファイルシステムクォータ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/disks/#disks-encrypting>14.13. ディスクパーティションの暗号化</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/>第15章 地域化 (localization) - i18n/L10n の利用と設定</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#l10n-synopsis>15.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#using-localization>15.2. 地域化の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#l10n-compiling>15.3. 国際化 (i18n) に対応したアプリケーションを見つける</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/l10n/#lang-setup>15.4. 特定の言語にロケールを設定する</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/>第16章 FreeBSD のアップデートとアップグレード</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-upgrading-synopsis>16.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>16.2. FreeBSD Update</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-bootcode>16.3. ブートコードのアップデート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#updating-upgrading-documentation>16.4. ドキュメントのアップデート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#current-stable>16.5. 開発ブランチを追いかける</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#makeworld>16.6. ソースを用いた FreeBSD のアップデート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/cutting-edge/#small-lan>16.7. 複数のマシンで追いかける</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partiv/>パートIV. ネットワーク通信</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/>第17章 シリアル通信</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#serial-synopsis>17.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#serial>17.2. はじめに</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#term>17.3. シリアル端末</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#dialup>17.4. ダイアルインサービス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#dialout>17.5. ダイアルアウトサービス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms/#serialconsole-setup>17.6. シリアルコンソールの設定</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle checked>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/>第18章 PPP と SLIP</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#_この章では>18.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#userppp>18.2. ユーザ ppp の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#ppp>18.3. カーネル PPP の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#pppoe>18.4. PPP オーバイーサネット (PPPoE) の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/ppp-and-slip/#slip>18.5. SLIP の利用</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/mail/>第19章 電子メール</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-synopsis>19.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-using>19.2. 電子メールを使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#sendmail>19.3. sendmail の設定</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-changingmta>19.4. MTA の変更</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-trouble>19.5. トラブルシュート</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#mail-advanced>19.6. 先進的なトピックス</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#SMTP-UUCP>19.7. UUCP とともに SMTP を使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#SMTP-dialup>19.8. ダイアルアップ接続でメールを使う</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mail/#SMTP-Auth>19.9. SMTP 認証</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/>第20章 高度なネットワーク</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#advanced-networking-synopsis>20.1. この章では</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-routing>20.2. ゲートウェイと経路</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-wireless>20.3. 無線ネットワーク</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-bluetooth>20.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-bridging>20.5. ブリッジ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-nfs>20.6. NFS</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-diskless>20.7. ディスクレス稼働</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-isdn>20.8. ISDN</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-nis>20.9. NIS/YP</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-dhcp>20.10. DHCP</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-dns>20.11. DNS</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-ntp>20.12. NTP</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-natd>20.13. ネットワークアドレス変換 (NAT)</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-inetd>20.14. inetd"スーパサーバ"</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-plip>20.15. パラレルライン IP (PLIP)</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/advanced-networking/#network-ipv6>20.16. IPv6</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/partv/>パートV. 付録</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/>付録A FreeBSD の入手方法</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#mirrors>A.1. Mirrors</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#git>A.2. Git の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#svn>A.3. Subversion の利用</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/mirrors/#mirrors-cdrom>A.4. CD および DVD セット</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/>付録B. 参考図書</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-freebsd>B.1. FreeBSD 専門の書籍</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-userguides>B.2. 利用者向けのガイド</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-adminguides>B.3. 管理者向けのガイド</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#_プログラマ向けのガイド>B.4. プログラマ向けのガイド</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#_オペレーティングシステム内部>B.5. オペレーティングシステム内部</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#_セキュリティの参考資料>B.6. セキュリティの参考資料</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-hardware>B.7. ハードウェアの参考資料</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-history>B.8. UNIX® の歴史</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/bibliography/#bibliography-journals>B.9. 定期刊行物、雑誌およびジャーナル</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/>付録 C. インターネット上のリソース</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-www>C.1. ウェブサイト</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-mail>C.2. メーリングリスト</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-news>C.3. Usenet ニュースグループ</a></li><li><a href=http://172.16.201.134:1313/ja/books/handbook/eresources/#eresources-web>C.4. オフィシャルミラー</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/ja/books/handbook/pgpkeys/>付録 D. OpenPGP Keys</a><ul><li><a href=http://172.16.201.134:1313/ja/books/handbook/pgpkeys/#pgpkeys-officers>D.1. オフィサ</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>第18章 PPP と SLIP</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#_この章では>18.1. この章では</a></li><li><a href=#userppp>18.2. ユーザ ppp の利用</a></li><li><a href=#ppp>18.3. カーネル PPP の利用</a></li><li><a href=#pppoe>18.4. PPP オーバイーサネット (PPPoE) の利用</a></li><li><a href=#slip>18.5. SLIP の利用</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=_この章では>18.1. この章では<a class=anchor href=#_この章では></a></h2><div class=sectionbody><div class=paragraph><p>もしあなたがモデムを使ってインターネットに接続したり, 他の人々に FreeBSD によるインターネットへのダイヤルアップ接続を 提供しようとしているのでしたら, PPP または SLIP 接続を選択することができます.</p></div><div class=paragraph><p>この節では 3 種類の PPP について説明しています. それは <em>ユーザ</em>, <em>カーネル</em>, そして <em>PPPoE</em> (PPP オーバイーサネット) です. また SLIP のクライアントとサーバの設定についても記述しています.</p></div><div class=paragraph><p>最初に説明するのは, ユーザ PPP です. ユーザ PPP は FreeBSD に 2.0.5-RELEASE の時に, 既に存在していたカーネル実装の PPP に加えて導入されました.</p></div><div class=paragraph><p>ユーザ PPP とカーネル PPP の主な違いは何かと疑問に思われるかも 知れませんが, その答えは簡単です. ユーザ PPP はデーモンとしては実行されず 必要に応じて実行されるのです. PPP インタフェイスを組み込んだカーネルは 必要ではなく, ユーザプロセスとして実行されカーネルとのデータの やり取りにはトンネルデバイスドライバ (<span class=filename>tun</span>) を 使用します.</p></div><div class=paragraph><p>この節ではこれ以降ユーザ PPP のことは, <code>pppd</code> のような他の PPP ソフトウエアと特に区別する必要がある場合を除いて, 単に ppp と記述します. またこの節に記述されているコマンドは すべて root で実行されなければなりません.</p></div></div></div><div class=sect1><h2 id=userppp>18.2. ユーザ ppp の利用<a class=anchor href=#userppp></a></h2><div class=sectionbody><div class=sect2><h3 id=_ユーザ_ppp>18.2.1. ユーザ PPP<a class=anchor href=#_ユーザ_ppp></a></h3><div class=sect3><h4 id=_前提条件>18.2.1.1. 前提条件<a class=anchor href=#_前提条件></a></h4><div class=paragraph><p>以下の情報を手に入れておく必要があるでしょう:</p></div><div class=ulist><ul><li><p>PPP で接続するインターネットサービスプロバイダ (ISP) のアカウント. さらに, 接続済みのモデム (またはその他のデバイス) があり, プロバイダとの接続が可能なように正しく設定されている.</p></li><li><p>プロバイダの電話番号.</p></li><li><p>ログイン名とパスワード. これは通常の unix 形式のログイン名と パスワードの組という場合もありますし, PPP PAP または CHAP の ログイン名とパスワードの組という場合もあります.</p></li><li><p>一つ以上のネームサーバの IP アドレス. 通常, プロバイダから IP アドレスを二つ指示されている はずです. 一つすら提供されていないならば, <span class=filename>ppp.conf</span> ファイル中で <code>enable dns</code> コマンドを使って ppp にネームサーバを設定するよう 指示できます.</p></li></ul></div><div class=paragraph><p>プロバイダからは以下の情報が提供されているはずですが, どうしても必要というわけではありません:</p></div><div class=ulist><ul><li><p>プロバイダのゲートウェイの IP アドレス. ゲートウェイとは, あなたがそこに接続をおこなって, <em>デフォルトルート</em> として設定することになるマシンです. プロバイダがこのアドレスを明示していなくても, 最初は 適当に設定しておいて, 接続時にプロバイダの PPP サーバから 正しいアドレスを教えてもらうことができます.</p><div class=paragraph><p>このアドレスは, ppp から <code>HISADDR</code>として参照されます.</p></div></li><li><p>プロバイダのネットマスク設定. プロバイダが明示していないとしても, ネットマスクとして <code>255.255.255.0</code> を使用しておけば問題ありません.</p></li><li><p>もしプロバイダから固定の IP アドレスとホスト名の割り当てを 受けていれば, その情報を指定しておくこともできます. 割り当てを受けていなければ, 接続先から適切な IP アドレスを指定してもらいます.</p></li></ul></div><div class=paragraph><p>もし, 必要な情報が不足していれば, プロバイダに連絡を取って 確認しておいてください.</p></div></div><div class=sect3><h4 id=_ppp_対応カーネルの構築>18.2.1.2. ppp 対応カーネルの構築<a class=anchor href=#_ppp_対応カーネルの構築></a></h4><div class=paragraph><p>説明でも述べているように, <code>ppp</code> はカーネルの <span class=filename>tun</span> デバイスを使います. 使っているカーネルがどれであっても, <span class=filename>tun</span> デバイスを設定しなければなりません. FreeBSDに付属しているデフォルトの <span class=filename>GENERIC</span> カーネルに合うように <span class=filename>tun</span> デバイスは前もって設定されています. しかしながら, 自分で修正したカーネルをインストールするのであれば, pppが正しく動くよう, カーネルが設定されているか確認しなくてはいけません.</p></div><div class=paragraph><p>これを確認するには, カーネルコンパイルディレクトリ (<span class=filename>/sys/i386/conf</span> または <span class=filename>/sys/pc98/conf</span>) に移動して, カーネルコンフィグレーションファイルを調べます. 以下の行がどこかに含まれている必要があります.</p></div><div class="literalblock programlisting"><div class=content><pre>pseudo-device tun 1</pre></div></div><div class=paragraph><p>この行がカーネルコンフィグレーションファイルに 含まれていない場合, この行を追加して カーネルの再コンパイルとインストールをおこなう必要があります. 元々の <span class=filename>GENERIC</span> カーネルは 標準でこれを含んでいますので, カスタムカーネルをインストールしているのではなかったり, <span class=filename>/sys</span> ディレクトリが存在しないのであれば, 何も変更する必要はありません. カーネルコンフィグレーションの詳細については, <a href=../kernelconfig/#kernelconfig>FreeBSD カーネルのコンフィグレーション</a> を参照してください.</p></div><div class=paragraph><p>以下のコマンドを実行することで, 現在のカーネルにトンネルデバイスが いくつ組み込まれているかを調べることができます:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig -a</span>
tun0: <span class=nv>flags</span><span class=o>=</span>8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
	inet 200.10.100.1 <span class=nt>--</span><span class=o>&gt;</span> 203.10.100.24 netmask 0xffffffff
tun1: <span class=nv>flags</span><span class=o>=</span>8050&lt;POINTOPOINT,RUNNING,MULTICAST&gt; mtu 576
tun2: <span class=nv>flags</span><span class=o>=</span>8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
	inet 203.10.100.1 <span class=nt>--</span><span class=o>&gt;</span> 203.10.100.20 netmask 0xffffffff
tun3: <span class=nv>flags</span><span class=o>=</span>8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>FreeBSD 4.0やより最近のリリースでは, すでに使われている <span class=filename>tun</span> デバイスしか見つけることが できないでしょう. これは, <em>全く</em> <span class=filename>tun</span> デバイスを見つけることが できないかもしれないということです. しかし, もしこうなって しまっても, 心配することはありません. そのデバイスは <code>ppp</code> が使おうとする時に動的に作られるはず だからです.</p></div></td></tr></tbody></table></div><div class=paragraph><p>この例ではトンネルデバイスが四つ存在し, そのうち二つに 設定がおこなわれ, 使用中であることがわかります. 上の例で <code>RUNNING</code> フラグがオンになっている ものがありますが, これは そのインタフェースが何かに使用されていることを示している だけであるということに注意してください. つまり, <code>RUNNING</code> になっていない インタフェースがあったとしても, それはエラーではありません.</p></div><div class=paragraph><p>トンネルデバイスがカーネルに組み込まれておらず, 何らかの理由で カーネルの再構築ができない場合でも, 方法がないわけではありません. 動的にデバイスをロードすることができるはずです. 詳細については <a href="https://man.freebsd.org/cgi/man.cgi?query=modload&amp;sektion=8&amp;format=html">modload(8)</a> や <a href="https://man.freebsd.org/cgi/man.cgi?query=lkm&amp;sektion=4&amp;format=html">lkm(4)</a> など, 適切なマニュアルを参照してください.</p></div></div><div class=sect3><h4 id=_tun_デバイスの確認>18.2.1.3. tun デバイスの確認<a class=anchor href=#_tun_デバイスの確認></a></h4><div class=paragraph><p>ほとんどのユーザは <span class=filename>tun</span> デバイス (<span class=filename>/dev/tun0</span>) が一つあれば充分でしょう. より多くのデバイスを使う場合 (すなわち, カーネルコンフィグレーション ファイルで <code>pseudo-device tun</code> の行に <code>1</code> 以外の数値を指定している場合), 以下で <span class=filename>tun0</span> と書かれている部分をすべて, あなたが使うデバイスの番号に あわせて読みかえてください.</p></div><div class=paragraph><p><span class=filename>tun0</span> デバイスが正しく作成されていることを確認する最も簡単な方法は, それを作り直すことです. そのためには, 以下のコマンドを実行します:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /dev</span>
<span class=c># ./MAKEDEV tun0</span></code></pre></div></div><div class=paragraph><p>カーネルに 16 個のトンネルデバイスを組み込んだのであれば, <span class=filename>tun0</span> だけでなく他の tun デバイスも作成しておく必要があるでしょう:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /dev</span>
<span class=c># ./MAKEDEV tun15</span></code></pre></div></div><div class=paragraph><p>また, カーネルが正しく設定されているかどうかを調べるために 以下のコマンドを実行して, このような出力が得られることを確認します:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig tun0</span>
tun0: <span class=nv>flags</span><span class=o>=</span>8050&lt;POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500</code></pre></div></div><div class=paragraph><p>まだ <code>RUNNING</code> フラグがセットされていない場合もあります. その時は以下のような出力が得られるでしょう:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig tun0</span>
tun0: <span class=nv>flags</span><span class=o>=</span>8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</code></pre></div></div><div class=paragraph><p>前述したように, FreeBSD 4.0 以降のリリースでは <span class=filename>tun</span> デバイスは要求に応じて 作られるので, もしそのデバイスがまだ使われていなければ, 見つけられないかもしれないということを思い出してください.</p></div></div><div class=sect3><h4 id=_名前の解決に関する設定>18.2.1.4. 名前の解決に関する設定<a class=anchor href=#_名前の解決に関する設定></a></h4><div class=paragraph><p>リゾルバ (resolver) はシステムの一部分で, IP アドレスとホスト名との 変換をおこないます. IP アドレスとホスト名を対応させるためのマップを, 二つの場所のうちの一つから探すように設定できます. 一つめは <span class=filename>/etc/hosts</span> (<code>man 5 hosts</code>) と呼ばれるファイルです. 二つめはインターネット ドメインネームサービス (DNS) と呼ばれる 分散データベースですが, これに関する議論は このドキュメントで扱う範囲を 越えていますので, これについての説明はおこないません.</p></div><div class=paragraph><p>リゾルバは名前のマッピングを おこなうシステムコールの集合体です. ただし どこからマッピング情報を見つけるのかは, 最初に指示しておく必要があります. これは まず <span class=filename>/etc/host.conf</span> ファイルを編集することでおこないます. 混乱の元になりますので, このファイルを <span class=filename>/etc/hosts.conf</span>と 呼んだりしては<em>いけません</em> (余分な <code>s</code> がついていますね).</p></div><div class=sect4><h5 id=_etchost_conf_ファイルの編集>18.2.1.4.1. <span class=filename>/etc/host.conf</span> ファイルの編集<a class=anchor href=#_etchost_conf_ファイルの編集></a></h5><div class=paragraph><p>このファイルには 以下の 2 行が (この順番で) 書かれているはずです:</p></div><div class="literalblock programlisting"><div class=content><pre>hosts
bind</pre></div></div><div class=paragraph><p>これは, 最初に <span class=filename>/etc/hosts</span> ファイルを調べ, そこで目的の名前が 見つけられなかった場合に DNS を引きにいくようリゾルバに指示します.</p></div></div><div class=sect4><h5 id=_etchosts5_ファイルの編集>18.2.1.4.2. /etc/hosts(5) ファイルの編集<a class=anchor href=#_etchosts5_ファイルの編集></a></h5><div class=paragraph><p>このファイルはローカルネットワーク上に存在するマシンの IP アドレスと ホスト名を含んでいるはずです. 最低でも ppp を動作させるマシンのエントリが 含まれている必要があります. そのマシンのホスト名が <code>foo.bar.com</code> で, IP アドレスが <code>10.0.0.1</code> であると仮定すると, <span class=filename>/etc/hosts</span> は 以下の行を含んでいなければいけません:</p></div><div class="literalblock programlisting"><div class=content><pre>127.0.0.1	localhost.bar.com	localhost
127.0.0.1	localhost.bar.com.
10.0.0.1	foo.bar.com		foo
10.0.0.1	foo.bar.com.</pre></div></div><div class=paragraph><p>一つめの行は <code>localhost</code> を現在のマシンの別名として定義しています. マシン固有の IP アドレスが何であっても, この行の IP アドレスは 常に <code>127.0.0.1</code> でなければいけません. 二つめの行はホスト名 <code>foo.bar.com</code> (と, その省略形 <code>foo</code>) を IP アドレス <code>10.0.0.1</code> にマップします.</p></div><div class=paragraph><p>もしプロバイダから固定の IP アドレスとホスト名を割り当てられて いるのであれば, それを <code>10.0.0.1</code> エントリのかわりに使ってください.</p></div></div><div class=sect4><h5 id=_etcresolv_conf_ファイルの編集>18.2.1.4.3. <span class=filename>/etc/resolv.conf</span> ファイルの編集<a class=anchor href=#_etcresolv_conf_ファイルの編集></a></h5><div class=paragraph><p><span class=filename>/etc/resolv.conf</span> はリゾルバの振舞いを指定します. もし自前の DNS サーバを走らせているのなら, このファイルは空のままに しておくこともできます. 通常は, 以下のように書いておく必要があるでしょう:</p></div><div class="literalblock programlisting"><div class=content><pre>domain bar.com
nameserver x.x.x.x
nameserver y.y.y.y</pre></div></div><div class=paragraph><p><code><em>x.x.x.x</em></code> と <code><em>y.y.y.y</em></code> はプロバイダから指示されたアドレスで, 接続するプロバイダが提供しているネームサーバを すべて書いてください. <code>domain</code> に指定するのは このマシンのデフォルトのドメイン名で, おそらく 書かなくても問題は無いでしょう. このファイルの各エントリの詳細については, <span class=filename>resolv.conf</span> のマニュアルページを参照してください.</p></div><div class=paragraph><p>バージョン 2 以降の ppp を使用している場合には, <code>enable dns</code> コマンドを使用してネームサーバのアドレスを プロバイダに問い合わせるように指示することができます. 上の指定とは異なるアドレスをプロバイダが指定してきた場合 (または <span class=filename>/etc/resolv.conf</span> でネームサーバが指定されていない場合), ppp はプロバイダが指定したアドレスで <span class=filename>resolv.conf</span> を書きかえます.</p></div></div></div><div class=sect3><h4 id=_ppp_の設定>18.2.1.5. <code>ppp</code> の設定<a class=anchor href=#_ppp_の設定></a></h4><div class=paragraph><p>ユーザ ppp と <code>pppd</code> (カーネルレベルの PPP 実装) は どちらも <span class=filename>/usr/shared/examples/ppp</span> ディレクトリに置かれた設定ファイルを使います. ここには設定ファイルのサンプルが用意されていて, ユーザ ppp の設定を おこなう際に大変参考になりますので, 削除したりしないでください.</p></div><div class=paragraph><p><code>ppp</code> の設定をするためには, 必要に応じていくつかのファイルを編集する必要が あります. 書き込む内容は, プロバイダが静的に IP アドレスを割り当てる (つまり, 固定の IP アドレスを一つ与えられて, 常にそれを使う) か, または動的に IP アドレスを割り当てる (つまり, PPP セッションごとに IP アドレスが変化する可能性がある) かということに ある程度依存します.</p></div><div class=sect4><h5 id=userppp-staticIP>18.2.1.5.1. 静的 IP アドレスによる PPP 接続<a class=anchor href=#userppp-staticIP></a></h5><div class=paragraph><p>まず <span class=filename>/etc/ppp/ppp.conf</span> という設定ファイルを作成する必要があります. これは以下の例とほとんど同じようなものになるでしょう.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>:</code> で終る行は 1 カラム目から始め, その他の行はスペースまたはタブで以下の例のように 段をつける (インデントする) 必要があります.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>1     default:
2       set device /dev/cuaa0
3       set speed 115200
4       set dial &#34;ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \&#34;\&#34; ATE1Q0 OK-AT-OK \\dATDT\\TTIMEOUT 40 CONNECT&#34;
5     provider:
6       set phone &#34;(123) 456 7890&#34;
7       set login &#34;TIMEOUT 10 \&#34;\&#34; \&#34;\&#34; gin:--gin: foo word: bar col: ppp&#34;
8       set timeout 300
9       set ifaddr x.x.x.x y.y.y.y 255.255.255.0 0.0.0.0
10      add default HISADDR
11      enable dns</pre></div></div><div class=paragraph><p>ファイルでは行番号を取り除いておいてください. これは解説の際に参照する行を示すためにつけたものです.</p></div><div class=dlist><dl><dt class=hdlist1>Line 1</dt><dd><p>デフォルトエントリを指定します. このエントリ中のコマンドは ppp が起動された際に自動的に実行されます.</p></dd><dt class=hdlist1>Line 2</dt><dd><p>モデムが接続されているデバイスを指定します. <span class=filename>COM1:</span> は <span class=filename>/dev/cuaa0</span> に, <span class=filename>COM2:</span> は <span class=filename>/dev/cuaa1</span> になります.</p></dd><dt class=hdlist1>Line 3</dt><dd><p>通信速度 (DTE 速度) を指定します. もし 115200 が使えない (最近のモデムなら大抵使えるはずですが) 場合には, かわりに 38400 を指定してみてください.</p></dd><dt class=hdlist1>Line 4</dt><dd><p>ダイアルスクリプトを指定します. ユーザ PPP は <a href="https://man.freebsd.org/cgi/man.cgi?query=chat&amp;sektion=8&amp;format=html">chat(8)</a> 言語に似た, 受信待ち文字列と 送信文字列の対からなるスクリプトを使用します. この言語の機能に関しては, マニュアルページを参照してください.</p></dd><dt class=hdlist1>Line 5</dt><dd><p>接続するプロバイダの名前 "provider" を エントリ名として指定します.</p></dd><dt class=hdlist1>Line 6</dt><dd><p>このプロバイダの電話番号を指定します. 複数の電話番号を <code>:</code> や <code>|</code> で区切って指定することができます. これら区切り文字の違いについては, <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> に 詳しく書かれています. 要約すると, 毎回違う番号に かけたいのであれば <code>:</code> を使います. 常に まず先頭の番号にかけてみて, つながらない時にだけ 2 番目以降の番号に かけたいのであれば <code>|</code> を使います. 例に示されているように, 常に電話番号全体を引用符で くくって (クォートして) おきます.</p></dd><dt class=hdlist1>Line 7</dt><dd><p>ダイアルスクリプトと同様に, ログインスクリプトも chat 言語風の記述をおこないます. この例は, 以下のようなログインセッションを使用する プロバイダのためのものです:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>J. Random Provider
login: foo
password: bar
protocol: ppp</code></pre></div></div><div class=paragraph><p>このスクリプトは必要に応じて 書きかえなければならないでしょう. 初めてスクリプトを書く時には, 予想した通りに 処理が進んだかどうかを確認するため, "chat" ログを とるようにしておいた方が良いでしょう.</p></div><div class=paragraph><p>PAP や CHAP を使用する場合には, ここでログインすることは ありませんから, ログイン文字列は空白のままにしておくべきです. 詳細については <a href=#userppp-PAPnCHAP>PAP および CHAP による認証</a>を参照してください.</p></div></dd><dt class=hdlist1>Line 8</dt><dd><p>デフォルトの接続タイムアウト時間を (秒数で) 指定します. この例では, 300 秒間 通信がおこなわれなければ 自動的に接続を切るように指定しています. タイムアウトさせたくない場合には, この値を 0 に設定します.</p></dd><dt class=hdlist1>Line 9</dt><dd><p>インタフェースのアドレスを指定します. 文字列 <em>x.x.x.x</em> は プロバイダに割り当てられた IP アドレスで置きかえてください. 文字列 <em>y.y.y.y</em> はプロバイダから指示されたゲートウェイ (接続先となるマシン) の IP アドレスで置きかえてください. プロバイダがゲートウェイのアドレスを 指示していない場合は, <code>10.0.0.2/0</code> を使用しておいてください. もし "仮の" アドレスを使用する必要がある場合には, <a href=#userppp-dynamicIP>動的 IP アドレスによる PPP 接続</a>に関する指示に従って, <span class=filename>/etc/ppp/ppp.linkup</span> にエントリを作成していることを 確認してください. この行が省略されている場合, ppp を <code>-auto</code> モードで動作させることはできません.</p></dd><dt class=hdlist1>Line 10</dt><dd><p>プロバイダのゲートウェイへの経路を デフォルトルートとして 追加します. 特殊文字列 <code>HISADDR</code> は, 9 行目で指定された ゲートウェイのアドレスで置きかえられます. <code>HISADDR</code> は 9 行目までは初期化されていませんので, その行よりも後でしか使えないことに 注意してください.</p></dd><dt class=hdlist1>Line 11</dt><dd><p>ネームサーバのアドレスが正しいか どうかを確認するため, プロバイダに問い合わせをおこなうよう ppp に指示します. プロバイダがこの機能をサポートしていれば, ppp は <span class=filename>/etc/resolv.conf</span> のネームサーバエントリを 正しいアドレスに更新することができます.</p></dd></dl></div><div class=paragraph><p>静的な IP アドレスを持っていて, 接続が完了する前にルーティングテーブルの エントリが正しく設定されているのであれば, <span class=filename>ppp.linkup</span> に エントリを追加する必要はありません. しかし, この場合でもエントリを追加して, 接続が完了した時点で プログラムを呼び出したいことがあるかもしれません. これについては後ほど sendmail を例として説明します.</p></div><div class=paragraph><p>これらの設定ファイルのサンプルが <span class=filename>/usr/shared/examples/ppp</span> ディレクトリに 置かれています.</p></div></div><div class=sect4><h5 id=userppp-dynamicIP>18.2.1.5.2. 動的 IP アドレスによる PPP 接続<a class=anchor href=#userppp-dynamicIP></a></h5><div class=paragraph><p>プロバイダが静的な IP アドレスの割り当てをおこなっていない場合, <code>ppp</code> が相手側のホスト (ゲートウェイ) と交渉して, こちら側と相手側のアドレスを 決めるように設定することができます. これは, 起動時には"仮の"アドレスを使っておいて, 接続後に IP コンフィグレーション プロトコル (IPCP) を使用して <code>ppp</code> が IP アドレスを正しく設定できるようにすることで実現されます. <a href=#userppp-staticIP>静的 IP アドレスによる PPP 接続</a>に 以下の変更を加える以外は, <span class=filename>ppp.conf</span> の設定は同じです:</p></div><div class="literalblock programlisting"><div class=content><pre>9       set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.0</pre></div></div><div class=paragraph><p>繰り返しますが, 行番号は取り除いておいてください. これは解説の際に参照する行を示すためにつけたものです. なお, 少なくともスペース 1 個分の段づけ (インデント) が必要です.</p></div><div class=dlist><dl><dt class=hdlist1>Line 9</dt><dd><p><code>/</code> 文字の後ろの数字は, アドレス交渉の際に固定しておきたい ビットの数です. 場合によっては, もっと適切な IP アドレスを 指定しておきたいこともあるかもしれませんが, ほとんどの場合には 上の例の通りで問題ありません.</p><div class=paragraph><p>最後の引数 (<code>0.0.0.0</code>) は, アドレスの交渉の際に <code>10.0.0.1</code> ではなく <code>0.0.0.0</code> を使用するよう ppp に指示するためのものです. <code>set ifaddr</code> コマンドの最初の引数として <code>0.0.0.0</code> を指定してはいけません. さもないと, <code>-auto</code> モードで動作させる際に 初期経路を設定することができなくなります.</p></div></dd></dl></div><div class=paragraph><p>バージョン 1.X の ppp を使用する場合, <span class=filename>/etc/ppp/ppp.linkup</span> にもエントリを作成しておく必要があります. <span class=filename>ppp.linkup</span> は接続が確立された後に使用されます. この時点では, <code>ppp</code> は<em>実際に</em>どの IP アドレスを使うべきなのか わかっているはずです. 以下のエントリは存在する仮の経路を削除し, 正しい経路を作成します:</p></div><div class="literalblock programlisting"><div class=content><pre>1     provider:
2       delete ALL
3       add default HISADDR</pre></div></div><div class=dlist><dl><dt class=hdlist1>Line 1</dt><dd><p>接続を確立する際に, <code>ppp</code> は以下のルールに従って <span class=filename>ppp.linkup</span> のエントリを検索します: まず <span class=filename>ppp.conf</span> で使用されたのと同じラベルを探します. もし見つからなければ, ゲートウェイの IP アドレスのエントリを 探します. このエントリは 4 オクテットの IP アドレス形式の ラベルです. それでも まだエントリが見つからなければ, <code>MYADDR</code> エントリを探します.</p></dd><dt class=hdlist1>Line 2</dt><dd><p>この行は, 使用する tun インタフェースに関する既存の経路を (ダイレクトルートのエントリを除き) すべて削除するよう <code>ppp</code> に指示します.</p></dd><dt class=hdlist1>Line 3</dt><dd><p>この行は <code>HISADDR</code> への経路をデフォルトルートとして 追加するように ppp に指示します. <code>HISADDR</code> は IPCP で 決定されたゲートウェイの IP アドレスで置きかえられます.</p></dd></dl></div><div class=paragraph><p>詳細なサンプルについては, <span class=filename>/usr/shared/examples/ppp/ppp.conf.sample</span> ファイル中のpmdemand エントリと <span class=filename>/usr/shared/examples/ppp/ppp.linkup.sample</span> を参照してください.</p></div><div class=paragraph><p>バージョン 2 の ppp から "sticky routes" が導入されました. <code>MYADDR</code> や <code>HISADDR</code> を含む <code>add</code> コマンドと <code>delete</code> コマンドを記憶して, <code>MYADDR</code> や <code>HISADDR</code> の アドレスが変化した際には経路の再設定をおこないます. したがって, これらのコマンドを <span class=filename>ppp.linkup</span> に 繰り返し記述する必要は無くなりました.</p></div></div><div class=sect4><h5 id=_かかってきた電話を_ppp_で受けるには>18.2.1.5.3. かかってきた電話を <code>ppp</code> で受けるには<a class=anchor href=#_かかってきた電話を_ppp_で受けるには></a></h5><div class=paragraph><p>かかってきた電話を <code>ppp</code> が受けるように設定する際に, そのマシンが LAN に接続されているのであれば, パケットを LAN に転送するかどうかを決定する必要があります. 転送をおこなう場合には, その LAN のサブネットから IP アドレスを ppp クライアントに割り当て, 以下のコマンドを指定するのが良いでしょう.</p></div><div class="literalblock programlisting"><div class=content><pre>gateway_enable=YES</pre></div></div><div class=sect5><h6 id=_どの_getty_を使いますか>18.2.1.5.3.1. どの getty を使いますか?<a class=anchor href=#_どの_getty_を使いますか></a></h6><div class=paragraph><p>getty でダイアルアップサービスをおこなう場合の優れた解説が <a href=../serialcomms/#dialup>FreeBSD でダイアルアップサービスをおこなうための設定</a>にあります.</p></div><div class=paragraph><p><code>getty</code> に代わるものとしては, <a href=http://www.leo.org/~doering/mgetty/index.html>mgetty</a> があります. これは <code>getty</code> をより柔軟にしたもので, ダイアルアップ回線での使用を意図して 設計されています.</p></div><div class=paragraph><p><code>mgetty</code> を使う場合の利点は, <code>mgetty</code> が積極的にモデムと<em>通信する</em> ということです. つまり, もし <span class=filename>/etc/ttys</span> でポートを閉じている場合, モデムは電話をとらなくなります.</p></div><div class=paragraph><p>最近のバージョンの <code>mgetty</code> (0.99beta 以降) では, PPP ストリームの 自動検出もサポートされています. これにより, クライアント側で スクリプトを準備しなくてもサーバに アクセスすることができます.</p></div><div class=paragraph><p><code>mgetty</code> に関する, より詳細な情報については <a href=#userppp-mgetty>Mgetty と AutoPPP</a> を参照してください.</p></div></div><div class=sect5><h6 id=_ppp_の実行許可>18.2.1.5.3.2. ppp の実行許可<a class=anchor href=#_ppp_の実行許可></a></h6><div class=paragraph><p><code>ppp</code> は通常, ID 0 のユーザ (root) として動作しなければいけませんが, 以下で説明するように, <code>ppp</code> を通常のユーザとしてサーバモードで実行させたい 場合には, そのユーザを <span class=filename>/etc/group</span> の <code>network</code> グループに 追加して, ppp を実行する許可を与えておかなければいけません.</p></div><div class=paragraph><p>また, そのユーザが設定ファイル内の目的のエントリに アクセスできるように, 以下のように <code>allow</code> コマンドで許可を与えておく必要があります:</p></div><div class="literalblock programlisting"><div class=content><pre>allow users fred mary</pre></div></div><div class=paragraph><p>このコマンドがデフォルトエントリに 書かれている場合には, 指定されたユーザは すべてのエントリをアクセスできるようになります.</p></div></div><div class=sect5><h6 id=_動的_ip_ユーザのための_ppp_シェルの設定>18.2.1.5.3.3. 動的 IP ユーザのための ppp シェルの設定<a class=anchor href=#_動的_ip_ユーザのための_ppp_シェルの設定></a></h6><div class=paragraph><p><span class=filename>/etc/ppp/ppp-shell</span> という名前で, 以下のような内容のファイルを 作成します:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
IDENT=`echo $0 | sed -e &#39;s/^.*-\(.*\)$/\1/&#39;`
CALLEDAS=&#34;$IDENT&#34;
TTY=`tty`

if [ x$IDENT = xdialup ]; then
	IDENT=`basename $TTY`
fi

echo &#34;PPP for $CALLEDAS on $TTY&#34;
echo &#34;Starting PPP for $IDENT&#34;

exec /usr/sbin/ppp -direct $IDENT</pre></div></div><div class=paragraph><p>このスクリプトには実行可能属性をつけておきます. 次に, 以下のコマンドを実行し, <span class=filename>ppp-dialup</span> という名前で このスクリプトへのリンクを作成します:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ln -s ppp-shell /etc/ppp/ppp-dialup</span></code></pre></div></div><div class=paragraph><p>すべてのダイアルアップ ppp ユーザのログイン<em>シェル</em>として このスクリプトを使用します. 以下は <code>pchilds</code> というユーザ名の ダイアルアップユーザを <span class=filename>/etc/password</span> へ登録した場合の例です. (パスワードファイルを直接エディタで編集したりせず, <code>vipw</code> を使ってください)</p></div><div class="literalblock programlisting"><div class=content><pre>pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</pre></div></div><div class=paragraph><p>任意のユーザが読むことのできる, <span class=filename>/home/ppp</span> ディレクトリを 作成します. <span class=filename>/etc/motd</span> が表示されないようにするため, このディレクトリには以下のように大きさが 0 バイトのファイルを 作成しておきます.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=nt>-r--r--r--</span>   1 root     wheel           0 May 27 02:23 .hushlogin
<span class=nt>-r--r--r--</span>   1 root     wheel           0 May 27 02:22 .rhosts</code></pre></div></div></div><div class=sect5><h6 id=_静的_ip_ユーザのための_ppp_シェルの設定>18.2.1.5.3.4. 静的 IP ユーザのための PPP シェルの設定<a class=anchor href=#_静的_ip_ユーザのための_ppp_シェルの設定></a></h6><div class=paragraph><p>上記と同じように <span class=filename>ppp-shell</span> ファイルを作成し, 静的な IP アドレスを割り当てるアカウントそれぞれについて <span class=filename>ppp-shell</span> へのシンボリックリンクを作成します.</p></div><div class=paragraph><p>例えば, クラス C ネットワークの経路制御を必要とする, 三人のダイアルアップユーザ <code>fred</code>, <code>sam</code>, <code>mary</code> がいるとすると, 以下のコマンドを実行することになります:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</span>
<span class=c># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</span>
<span class=c># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</span></code></pre></div></div><div class=paragraph><p>これらのユーザのダイアルアップアカウントでは, 上で作成した それぞれのシンボリックリンクを ログインシェルとして設定しておきます. (つまり, ユーザ <code>mary</code> のログインシェルは <span class=filename>/etc/ppp/ppp-mary</span> に なります).</p></div></div><div class=sect5><h6 id=_動的_ip_ユーザのための_ppp_conf_の設定>18.2.1.5.3.5. 動的 IP ユーザのための ppp.conf の設定<a class=anchor href=#_動的_ip_ユーザのための_ppp_conf_の設定></a></h6><div class=paragraph><p><span class=filename>/etc/ppp/ppp.conf</span> ファイルは, 大体以下のような内容になるでしょう:</p></div><div class="literalblock programlisting"><div class=content><pre>default:
  set debug phase lcp chat
  set timeout 0

ttyd0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyd1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>上の例のように段をつける (インデントする) 必要があることに注意してください.</p></div></td></tr></tbody></table></div><div class=paragraph><p><code>default:</code> エントリはセッションごとにロードされます. <span class=filename>/etc/ttys</span> で有効にしてある各ダイアルアップ回線ごとに一つ, 上記の <code>ttyd0:</code> のようなエントリを作成します. 各行の相手側アドレスとして, それぞれ別の IP アドレスを 動的 IP ユーザのための IP アドレスのプールから割り当てておく必要があります.</p></div></div><div class=sect5><h6 id=_静的_ip_ユーザのための_ppp_conf_の設定>18.2.1.5.3.6. 静的 IP ユーザのための <span class=filename>ppp.conf</span> の設定<a class=anchor href=#_静的_ip_ユーザのための_ppp_conf_の設定></a></h6><div class=paragraph><p>上のサンプルの <span class=filename>/usr/shared/examples/ppp/ppp.conf</span> の内容に加えて, 静的に IP を割り当てられたダイアルアップユーザ それぞれのためのエントリを追加する必要があります. ここでも <code>fred</code>, <code>sam</code>, <code>mary</code> の例を使うことにしましょう.</p></div><div class="literalblock programlisting"><div class=content><pre>fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</pre></div></div><div class=paragraph><p>必要であれば, それぞれの静的 IP ユーザに対する経路制御情報も <span class=filename>/etc/ppp/ppp.linkup</span> ファイルに書いておくべきでしょう. 以下の例ではクライアントの PPP リンクを経由する, クラス C の <code>203.14.101.0</code> ネットワークへの経路を追加しています.</p></div><div class="literalblock programlisting"><div class=content><pre>fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</pre></div></div></div></div><div class=sect4><h5 id=_mgetty_autoppp_マイクロソフト拡張の詳細>18.2.1.5.4. <code>mgetty</code>, AutoPPP, マイクロソフト拡張の詳細<a class=anchor href=#_mgetty_autoppp_マイクロソフト拡張の詳細></a></h5><div class=sect5><h6 id=userppp-mgetty>18.2.1.5.4.1. <code>mgetty</code> と AutoPPP<a class=anchor href=#userppp-mgetty></a></h6><div class=paragraph><p><code>AUTO_PPP</code> オプションつきでコンパイルした <code>mgetty</code> を使えば, <code>mgetty</code> が PPP 接続の LCP フェーズを検出して, 自動的に PPP シェルを起動するように 設定することができます. しかし この場合, デフォルトの login/password シーケンスは発生しないので, ユーザの認証は PAP または CHAP を使っておこなう必要があります.</p></div><div class=paragraph><p>このセクションでは, ユーザ (あなた) が問題なく <code>AUTO_PPP</code> オプションつきの <code>mgetty</code> (v0.99beta またはそれ以降) の設定, コンパイル, インストールができているものと仮定しています.</p></div><div class=paragraph><p><span class=filename>/usr/local/etc/mgetty+sendfax/login.config</span> ファイルが 以下の行を含んでいることを確認してください:</p></div><div class="literalblock programlisting"><div class=content><pre>/AutoPPP/ -     -       /etc/ppp/ppp-pap-dialup</pre></div></div><div class=paragraph><p>これにより, PPP 接続を検出したら <code>mgetty</code> が <span class=filename>ppp-pap-dialup</span> スクリプトを実行するようになります.</p></div><div class=paragraph><p><span class=filename>/etc/ppp/ppp-pap-dialup</span> という名前で, 以下のような内容のファイルを 作成します (このファイルには実行可能属性を つけておく必要があります):</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
exec /usr/sbin/ppp -direct pap</pre></div></div><div class=paragraph><p>さらに, かかってきた電話すべてを自分で扱うエントリを <span class=filename>/etc/ppp/ppp.conf</span> に作成します.</p></div><div class="literalblock programlisting"><div class=content><pre>pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</pre></div></div><div class=paragraph><p>この方法でログインする それぞれのユーザは, PAP によるユーザ認証を おこなうために <span class=filename>/etc/ppp/ppp.secret</span> ファイルにユーザ名とパスワードを 書いておくか, または <span class=filename>/etc/password</span> ファイルを使うように,</p></div><div class="literalblock programlisting"><div class=content><pre>enable passwdauth</pre></div></div><div class=paragraph><p>ユーザに静的な IP アドレスを割り当てる場合には, そのアドレスを <span class=filename>/etc/ppp/ppp.secret</span> の第三引数として指定することができます. サンプルについては, <span class=filename>/usr/shared/examples/ppp/ppp.secret.sample</span> を参照してください.</p></div></div><div class=sect5><h6 id=_マイクロソフト拡張>18.2.1.5.4.2. マイクロソフト拡張<a class=anchor href=#_マイクロソフト拡張></a></h6><div class=paragraph><p>クライアントからの要求に応じて, ppp が DNS や NetBIOS ネームサーバの アドレスを通知するように 設定をおこなうこともできます.</p></div><div class=paragraph><p>バージョン 1.X の ppp で これらの拡張機能を有効にするには, 以下の行を <span class=filename>/etc/ppp/ppp.conf</span> の適切なセクションに追加する必要があるでしょう.</p></div><div class="literalblock programlisting"><div class=content><pre>enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre></div></div><div class=paragraph><p>バージョン 2 以降の ppp では, 以下のようになります:</p></div><div class="literalblock programlisting"><div class=content><pre>accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre></div></div><div class=paragraph><p>これにより, クライアントはプライマリと セカンダリのネームサーバアドレス および NetBIOS ネームサーバホストを知ることができます.</p></div><div class=paragraph><p>バージョン 2 以降の ppp では, <code>set dns</code> の行を省略した場合には <span class=filename>/etc/resolv.conf</span> に書かれているネームサーバのアドレスを使用します.</p></div></div></div><div class=sect4><h5 id=userppp-PAPnCHAP>18.2.1.5.5. PAP および CHAP による認証<a class=anchor href=#userppp-PAPnCHAP></a></h5><div class=paragraph><p>いくつかのプロバイダでは, PAP または CHAP のいずれかの認証メカニズムを 使用して接続時の認証をおこなうように システムを設定しています. この場合, プロバイダは接続の際に <code>login:</code> プロンプトを送信せず, 最初から PPP で通信を始めようとするでしょう.</p></div><div class=paragraph><p>PAP ではパスワードがそのまま送られてしまうため, CHAP に比べると安全性が 低くなりますが, このパスワードはシリアル回線のみを通して送られます. そのため, クラッカーが "盗み聞き" する余地は多くないので, 通常ここの セキュリティは問題にはなりません.</p></div><div class=paragraph><p><a href=#userppp-staticIP>静的 IP アドレスによる PPP 接続</a>または <a href=#userppp-dynamicIP>動的 IP アドレスによる PPP 接続</a>の セクションに戻って, 以下の変更をおこないます:</p></div><div class="literalblock programlisting"><div class=content><pre>7       set login
...
12      set authname MyUserName
13      set authkey MyPassword</pre></div></div><div class=paragraph><p>これまでと同様に, 行番号は取り除いておいてください. これは解説の際に参照する行を示すためにつけたものです. なお, 少なくともスペース 1 個分の段づけ (インデント) が必要です.</p></div><div class=dlist><dl><dt class=hdlist1>Line 7</dt><dd><p>PAP または CHAP を使用する場合, 通常 プロバイダはサーバへの ログインを必要としません. そのため, "set login" 文字列を 無効にしておかなければいけません.</p></dd><dt class=hdlist1>Line 12</dt><dd><p>この行は PAP/CHAP ユーザ名を指定します. <em>MyUserName</em> に 正しい値を入れておく必要があります.</p></dd><dt class=hdlist1>Line 13</dt><dd><p>この行は PAP/CHAP パスワードを指定します. <em>MyPassword</em> に 正しい値を入れておく必要があります. PAP と CHAP はデフォルトで両方とも 受け付けられるようになって いますが, PAP や CHAP を使用するという 意思を明示するために,</p><div class="literalblock programlisting"><div class=content><pre>15      accept PAP</pre></div></div><div class=paragraph><p>または</p></div></dd></dl></div><div class="literalblock programlisting"><div class=content><pre>15      accept CHAP</pre></div></div><div class=literalblock><div class=content><pre>という行を追加しておくのも良いでしょう.</pre></div></div></div><div class=sect4><h5 id=_動作中の_ppp_の設定変更>18.2.1.5.6. 動作中の ppp の設定変更<a class=anchor href=#_動作中の_ppp_の設定変更></a></h5><div class=paragraph><p>適切な診断ポートが設定されている場合には, バックグラウンドで動作中の <code>ppp</code> プログラムと通信することができます. この設定をおこなうためには, 以下の行を設定ファイルに追加しておきます:</p></div><div class="literalblock programlisting"><div class=content><pre>set server /var/run/ppp-tun%d DiagnosticPassword 0177</pre></div></div><div class=paragraph><p>これにより, ppp は指定された unix ドメインの ソケットをモニタして, クライアントから正しいパスワードを受け取った後に アクセスを許可します. このソケット名に含まれる <code>%d</code> は, この ppp が使用している <span class=filename>tun</span> デバイスの デバイス番号で置きかえられます.</p></div><div class=paragraph><p>一旦ソケットの設定が終了したら, スクリプト中で <a href="https://man.freebsd.org/cgi/man.cgi?query=pppctl&amp;sektion=8&amp;format=html">pppctl(8)</a> を 使用して, 動作中の ppp を操作することができるでしょう.</p></div></div></div><div class=sect3><h4 id=userppp-final>18.2.1.6. システムの最終設定<a class=anchor href=#userppp-final></a></h4><div class=paragraph><p>これで <code>ppp</code> の設定は終りました. しかし <code>ppp</code> を動かす前に, まだ少し必要なことがあります. それらの設定は, すべて <span class=filename>/etc/rc.conf</span> ファイルを 編集することでおこないます. (このファイルは以前には <span class=filename>/etc/sysconfig</span> と呼ばれていました)</p></div><div class=paragraph><p>このファイルを上から順に設定していきます. まずは <code>hostname=</code> の行が設定されていることを確認します. 例えば以下のように:</p></div><div class="literalblock programlisting"><div class=content><pre>hostname=&#34;foo.bar.com&#34;</pre></div></div><div class=paragraph><p>もしプロバイダが静的な IP アドレスとホスト名を割り当てているのなら, ホスト名としてそれを使うのが おそらくベストでしょう.</p></div><div class=paragraph><p>次に <code>network_interfaces</code> 変数を調べます. 必要に応じて (on demand) プロバイダにダイアルするようにシステムを設定したい場合には, <span class=filename>tun0</span> デバイスがこのリストに追加されていることを確認しておきます. それ以外の場合には, tun0 デバイスをリストから削除しておきます.</p></div><div class="literalblock programlisting"><div class=content><pre>network_interfaces=&#34;lo0 tun0&#34; ifconfig_tun0=</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><code>ifconfig_tun0</code> 変数が空で, <span class=filename>/etc/start_if.tun0</span> という名前の ファイルが作成されていなければなりません. このファイルの内容は以下のようになります.</p></div><div class="literalblock programlisting"><div class=content><pre>ppp -auto mysystem</pre></div></div><div class=paragraph><p>このスクリプトはネットワークの設定時に実行され, ppp デーモンを自動モードで立ち上げます. このマシンがもし LAN のゲートウェイであれば, <code>-alias</code> スイッチも使用したいと思うかもしれません. 詳細に関しては, マニュアルページを参照してください.</p></div></td></tr></tbody></table></div><div class=paragraph><p>以下のようにルータプログラムを <code>NO</code> に設定します.</p></div><div class="literalblock programlisting"><div class=content><pre>router_enable=&#34;NO&#34;</pre></div></div><div class=paragraph><p><code>routed</code> は, <code>ppp</code> が作成したデフォルトのルーティングテーブル エントリを削除してしまう場合がありますので, (初期設定では起動されるようになっている) <code>routed</code> デーモンが 起動されないようにしておくことが重要です.</p></div><div class=paragraph><p><code>sendmail_flags</code> 行が <code>-q</code> オプションを含まないように 設定しておいた方がよいでしょう. さもないと, <code>sendmail</code> が アドレスを調べようとして発信をおこなってしまう場合があります. 以下のような設定で良いでしょう:</p></div><div class="literalblock programlisting"><div class=content><pre>sendmail_flags=&#34;-bd&#34;</pre></div></div><div class=paragraph><p>この結果, PPP リンクを立ち上げた時には いつでも以下のコマンドを実行して, キューにたまっているメールを <code>sendmail</code> に送信させる作業が必要になるでしょう.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/sbin/sendmail -q</span></code></pre></div></div><div class=paragraph><p><span class=filename>ppp.linkup</span> 中で <code>!bg</code> コマンドを使用することで, これを自動的に おこなうこともできます:</p></div><div class="literalblock programlisting"><div class=content><pre>1     provider:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</pre></div></div><div class=paragraph><p>こうするのが嫌であれば, SMTP トラフィックをブロックするように "dfilter" を設定しておくこともできます. 詳細についてはサンプルファイルを参照してください.</p></div><div class=paragraph><p>後はマシンをリブートするだけです.</p></div><div class=paragraph><p>リブートが終ったら,</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ppp</span></code></pre></div></div><div class=paragraph><p>コマンドを実行し, 続いて PPP セッションを開始させるために <code>dial provider</code> と入力することもできますし, (<span class=filename>start_if.tun0</span> スクリプトを作成していない場合に), 外部へのトラフィックが発生した時に, <code>ppp</code> が自動的に セッションを確立してくれるようにしたいのであれば, 以下のコマンドを実行することもできます.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ppp -auto provider</span></code></pre></div></div></div><div class=sect3><h4 id=_まとめ>18.2.1.7. まとめ<a class=anchor href=#_まとめ></a></h4><div class=paragraph><p>要約すると, 初めて ppp を設定する際には, 以下のステップが不可欠です:</p></div><div class=paragraph><p>クライアント側:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>カーネルに <span class=filename>tun</span> デバイスが組み込まれていることを確認.</p></li><li><p><span class=filename>/dev</span> ディレクトリに <span class=filename>tunX</span> デバイスファイルが 存在することを確認.</p></li><li><p><span class=filename>/etc/ppp/ppp.conf</span> にエントリを作成. ほとんどのプロバイダでは, <span class=filename>pmdemand</span> の例で充分でしょう.</p></li><li><p>動的 IP アドレスを使用するなら, <span class=filename>/etc/ppp/ppp.linkup</span> に エントリを作成.</p></li><li><p><span class=filename>/etc/rc.conf</span> (または <span class=filename>sysconfig</span>) ファイルを更新.</p></li><li><p>必要に応じてダイヤル (demand dialing) したいのであれば, <span class=filename>start_if.tun0</span> スクリプトを作成.</p></li></ol></div></div></div><div class=paragraph><p>サーバ側:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>カーネルに <span class=filename>tun</span> デバイスが組み込まれていることを確認.</p></li><li><p><span class=filename>/dev</span> ディレクトリに <span class=filename>tunX</span> デバイスファイルが 存在することを確認.</p></li><li><p>(<a href="https://man.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;format=html">vipw(8)</a> コマンドを使って) <span class=filename>/etc/passwd</span> にエントリを作成.</p></li><li><p>このユーザのホームディレクトリに <code>ppp -direct direct-server</code> か何かを実行するプロファイルを作成.</p></li><li><p><span class=filename>/etc/ppp/ppp.conf</span> にエントリを作成. <span class=filename>direct-server</span> の例で充分でしょう.</p></li><li><p><span class=filename>/etc/ppp/ppp.linkup</span> にエントリを作成.</p></li><li><p><span class=filename>/etc/rc.conf</span>ファイルを更新.</p></li></ol></div></div></div></div></div></div></div><div class=sect1><h2 id=ppp>18.3. カーネル PPP の利用<a class=anchor href=#ppp></a></h2><div class=sectionbody><div class=sect2><h3 id=_カーネル_ppp_の設定>18.3.1. カーネル PPP の設定<a class=anchor href=#_カーネル_ppp_の設定></a></h3><div class=paragraph><p>PPP の設定を始める前に, <code>pppd</code> が <span class=filename>/usr/sbin</span> にあり, また <span class=filename>/etc/ppp</span> という ディレクトリが存在することを確認してください.</p></div><div class=paragraph><p><code>pppd</code> はふたつのモードで動作します.</p></div><div class="olist arabic"><ol class=arabic><li><p>"クライアント" モード. シリアル接続やモデムを利用して, そのマシンを 外部のネットワークに PPP 接続したい場合に用います.</p></li><li><p>"サーバ" モード. そのマシンがネットワーク上にあるときに, PPP を使って ほかのコンピュータを接続する際に用います.</p></li></ol></div><div class=paragraph><p>どちらの場合でも, オプションファイルを設定する必要があります (<span class=filename>/etc/ppp/options</span> または, そのマシン上で PPP を使用する人が 複数いる場合には <span class=filename>~/.ppprc</span>).</p></div><div class=paragraph><p>また, ダイヤルとリモートホストへの接続をおこなうために, シリアル接続やモデムを 操作する, なんらかのソフトウェアが必要です (kermit が適しているでしょう).</p></div></div><div class=sect2><h3 id=_ppp_クライアントとしての動作>18.3.2. PPP クライアントとしての動作<a class=anchor href=#_ppp_クライアントとしての動作></a></h3><div class=paragraph><p>わたしは, CISCO ターミナルサーバの PPP 回線に接続するために, 下記のような <span class=filename>/etc/ppp/options</span> を使用しています.</p></div><div class="literalblock programlisting"><div class=content><pre>crtscts         # enable hardware flow control
modem           # modem control line
noipdefault     # remote PPP server must supply your IP address.
                # if the remote host doesn&#39;t send your IP during IPCP
                # negotiation , remove this option
passive         # wait for LCP packets
domain ppp.foo.com      # put your domain name here

:&lt;remote_ip&gt;    # put the IP of remote PPP host here
                # it will be used to route packets via PPP link
                # if you didn&#39;t specified the noipdefault option
                # change this line to &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute    # put this if you want that PPP server will be your
                # default router</pre></div></div><div class=paragraph><p>接続方法:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>kermit (またはその他のモデム操作プログラム) を使ってリモートホストに ダイヤルし, 接続してください. そして, あなたのユーザ名とパスワード (必要 であれば, その他にもリモートホストで PPP を有効にするための操作) を入力 します.</p></li><li><p>kermit を抜けてください. (回線を切断せずに)</p></li><li><p>下記のように入力します:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/src/usr.sbin/pppd.new/pppd /dev/tty01 19200</span></code></pre></div></div><div class=paragraph><p>(通信速度とデバイス名には, あなたの環境に適したものを入れてください)</p></div></li></ol></div></div></div><div class=paragraph><p>これでこのコンピュータは PPP で接続されました. もし, なんらかの理由で 接続に失敗したならば, <span class=filename>/etc/ppp/options</span> ファイルに <code>debug</code> オプションを追加して, 問題点を突き止めるために, コンソールに表示される メッセージを調べてください.</p></div><div class=paragraph><p>下記の <span class=filename>/etc/ppp/pppup</span> スクリプトは, 上記の作業を すべて自動的におこないます:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</pre></div></div><div class=paragraph><p><span class=filename>/etc/ppp/kermit.dial</span> は kermit 用のスクリプトで, ダイヤルして, リモートホストでの認証に必要なすべての処理をおこないます. (そのようなスクリプトの例は この文書の終わりに添付してあります)</p></div><div class=paragraph><p>PPP 接続を切断するには, 下記のような <span class=filename>/etc/ppp/pppdown</span> スクリプトを 使用します:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ X${pid} != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill -TERM ${pid}
fi

ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</pre></div></div><div class=paragraph><p>PPP が動作中かどうかを調べます (<span class=filename>/usr/etc/ppp/ppptest</span>):</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
pid=`ps ax| grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ X${pid} != &#34;X&#34; ] ; then
        echo &#39;pppd running: PID=&#39; ${pid-NONE}
else
        echo &#39;No pppd running.&#39;
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</pre></div></div><div class=paragraph><p>モデム回線を切断します (<span class=filename>/etc/ppp/kermit.hup</span>):</p></div><div class="literalblock programlisting"><div class=content><pre>set line /dev/tty01	; put your modem device here
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</pre></div></div><div class=paragraph><p>次は <code>kermit</code> の代わりに <code>chat</code> を使う方法です.</p></div><div class=paragraph><p>pppd 接続を確立するためには, 次の二つのファイルの設定だけで十分です.</p></div><div class=paragraph><p><span class=filename>/etc/ppp/options</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/cuaa1 115200

crtscts		# enable hardware flow control
modem		# modem control line
connect &#34;/usr/bin/chat -f /etc/ppp/login.chat.script&#34;
noipdefault	# remote PPP serve must supply your IP address.
	        # if the remote host doesn&#39;t send your IP during
                # IPCP negotiation, remove this option
passive         # wait for LCP packets
domain &lt;your.domain&gt;	# put your domain name here

:		# put the IP of remote PPP host here
	        # it will be used to route packets via PPP link
                # if you didn&#39;t specified the noipdefault option
                # change this line to &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute	# put this if you want that PPP server will be
	        # your default router</pre></div></div><div class=paragraph><p><span class=filename>/etc/ppp/login.chat.script</span>:</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>(実際には一行になります.)</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>ABORT BUSY ABORT &#39;NO CARRIER&#39; &#34;&#34; AT OK ATDT&lt;phone.number&gt;
 CONNECT &#34;&#34; TIMEOUT 10 ogin:-\\r-ogin: &lt;login-id&gt;
 TIMEOUT 5 sword: &lt;password&gt;</pre></div></div><div class=paragraph><p>正しくインストールし編集した後は, 必要な事はこれだけです</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pppd</span></code></pre></div></div><div class=paragraph><p>このサンプルは主に Trev Roydhouse &lt;<a href=mailto:Trev.Roydhouse@f401.n711.z3.fidonet.org>Trev.Roydhouse@f401.n711.z3.fidonet.org</a>> から寄せられた情報に基づいており, 承諾を得て使用しています.</p></div></div><div class=sect2><h3 id=_ppp_サーバとしての動作>18.3.3. PPP サーバとしての動作<a class=anchor href=#_ppp_サーバとしての動作></a></h3><div class=paragraph><p><span class=filename>/etc/ppp/options</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>crtscts                         # Hardware flow control
netmask 255.255.255.0           # netmask ( not required )
192.114.208.20:192.114.208.165  # ip&#39;s of local and remote hosts
                                # local ip must be different from one
                                # you assigned to the ethernet ( or other )
                                # interface on your machine.
                                # remote IP is ip address that will be
                                # assigned to the remote machine
domain ppp.foo.com              # your domain
passive                         # wait for LCP
modem                           # modem line</pre></div></div><div class=paragraph><p>下記のような <span class=filename>/etc/ppp/pppserv</span> スクリプトで, そのマシンを PPP サーバにすることができます.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</pre></div></div><div class=paragraph><p>PPP サーバを終了するには, この <span class=filename>/etc/ppp/pppservdown</span> スクリプト を使用します:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk &#39;{print $1;}&#39;`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</pre></div></div><div class=paragraph><p>下記の kermit スクリプトは, モデムの自動応答機能を有効, または無効にします (<span class=filename>/etc/ppp/kermit.ans</span>):</p></div><div class="literalblock programlisting"><div class=content><pre>set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; change this to out ATS0=0\13 if you want to disable
                ; autoanswer mod
inp 5 OK
echo \13
exit</pre></div></div><div class=paragraph><p>この <span class=filename>/etc/ppp/kermit.dial</span> スクリプトは, リモートホストに ダイヤルし, 認証手続きをするのに使用します. あなたは必要に応じて, これを 変更しないといけないでしょう. あなたのユーザ名とパスワードをこの スクリプトに書かなければいけませんし, モデムやリモートホストからの 応答によっては, 入力待ちの文を変更する必要もあります.</p></div><div class="literalblock programlisting"><div class=content><pre>;
; put the com line attached to the modem here:
;
set line /dev/tty01
;
; put the modem speed here:
;
set speed 19200
set file type binary            ; full 8 bit file xfer
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; Then SET CARRIER if necessary,
set dial display on             ; Then SET DIAL if necessary,
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; login prompt counter
goto slhup

:slcmd                          ; put the modem in command mode
echo Put the modem in command mode.
clear                           ; Clear unread characters from input buffer
pause 1
output +++                      ; hayes escape sequence
input 1 OK\13\10                ; wait for OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; if modem doesn&#39;t answer OK, try again

:slhup                          ; hang up the phone
clear                           ; Clear unread characters from input buffer
pause 1
echo Hanging up the phone.
output ath0\13                  ; hayes command for on hook
input 2 OK\13\10
if fail goto slcmd              ; if no OK answer, put modem in command mode

:sldial                         ; dial the number
pause 1
echo Dialing.
output atdt9,550311\13\10               ; put phone number here
assign \%x 0                    ; zero the time counter

:look
clear                           ; Clear unread characters from input buffer
increment \%x                   ; Count the seconds
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; login
assign \%x 0                    ; zero the time counter
pause 1
echo Looking for login prompt.

:slloop
increment \%x                   ; Count the seconds
clear                           ; Clear unread characters from input buffer
output \13
;
; put your expected login prompt here:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; try 10 times to get a login prompt
else goto slhup                 ; hang up and start again if 10 failures

:sluid
;
; put your userid here:
;
output ppp-login\13
input 1 {Password: }
;
; put your password here:
;
output ppp-password\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7No dialtone.  Check the telephone line!\7
exit 1

; local variables:
; mode: csh
; comment-start: &#34;; &#34;
; comment-start-skip: &#34;; &#34;
; end:</pre></div></div></div></div></div><div class=sect1><h2 id=pppoe>18.4. PPP オーバイーサネット (PPPoE) の利用<a class=anchor href=#pppoe></a></h2><div class=sectionbody><div class=paragraph><p>以下の解説は, PPPoE として知られる, PPP オーバイーサネットの設定法です.</p></div><div class=sect2><h3 id=_必要なもの>18.4.1. 必要なもの<a class=anchor href=#_必要なもの></a></h3><div class=paragraph><p>あなたのシステムで PPPoE を適切に機能させるためには, 以下のものが必要です.</p></div><div class=ulist><ul><li><p>FreeBSD 3.4やそれより新しいバージョンのカーネルソース</p></li><li><p>FreeBSD 3.4やそれより新しいバージョンのppp</p></li></ul></div></div><div class=sect2><h3 id=_カーネルコンフィギュレーション>18.4.2. カーネルコンフィギュレーション<a class=anchor href=#_カーネルコンフィギュレーション></a></h3><div class=paragraph><p>以下に示すオプションをカーネルコンフィギュレーションファイルに 追加して, その後 <a href=../kernelconfig/#kernelconfig>新しいカーネルを コンパイルする</a>必要があります.</p></div><div class=ulist><ul><li><p>options NETGRAPH</p></li></ul></div><div class=paragraph><p>以下は任意</p></div><div class=ulist><ul><li><p>options NETGRAPH_PPPOE</p></li><li><p>options NETGRAPH_SOCKET</p></li></ul></div><div class=paragraph><p>この機能は実行時には有効ではありませんが, 要求に応じて ppp は関係のあるモジュールを 読み込みます.</p></div></div><div class=sect2><h3 id=_ppp_conf_の設定>18.4.3. <span class=filename>ppp.conf</span> の設定<a class=anchor href=#_ppp_conf_の設定></a></h3><div class=paragraph><p>これは動作している <span class=filename>ppp.conf</span> の 例です:</p></div><div class="literalblock programlisting"><div class=content><pre>default: # or name_of_service_provider
  set device PPPoE:xl1 # replace xl1 with your ethernet device
  set mru 1492
  set mtu 1492
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD
  set log Phase tun command # you can add more detailed logging if you wish
  set dial
  set login
  set ifaddr 10.0.0.1/0 10.0.0.2/0
  add default HISADDR
  nat enable yes # if you want to enable nat for your local net

papchap:
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD</pre></div></div><div class=paragraph><p><a href=https://docs.freebsd.org/ja/books/faq/#PPPoEwithNAT>-nat オプションを付けてPPPoE</a>を起動する際には注意するべきです.</p></div></div><div class=sect2><h3 id=_ppp_の起動>18.4.4. PPP の起動<a class=anchor href=#_ppp_の起動></a></h3><div class=paragraph><p>以下を root 権限において実行することで, 起動させることができます:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ppp -ddial name_of_service_provider</span></code></pre></div></div></div><div class=sect2><h3 id=_システム起動時に_ppp_を立ち上げる>18.4.5. システム起動時に PPP を立ち上げる<a class=anchor href=#_システム起動時に_ppp_を立ち上げる></a></h3><div class=paragraph><p><span class=filename>/etc/rc.conf</span> ファイルに以下の行を追加 してください:</p></div><div class="literalblock programlisting"><div class=content><pre>ppp_enable=&#34;YES&#34;
ppp_mode=&#34;ddial&#34;
ppp_nat=&#34;YES&#34;
ppp_profile=&#34;default&#34; # or your provider</pre></div></div></div></div></div><div class=sect1><h2 id=slip>18.5. SLIP の利用<a class=anchor href=#slip></a></h2><div class=sectionbody><div class=sect2><h3 id=slipc>18.5.1. SLIPクライアントのセットアップ<a class=anchor href=#slipc></a></h3><div class=paragraph><p>ここには FreeBSD マシンを静的アドレスのネットワークにつなげる場合の SLIPのセットアップの一つの方法を書いてあります. ホスト名を動的に割り当てる(つまり, ダイヤルアップするたびにアドレスが かわる)ためには, おそらくもっと凝ったことが必要です.</p></div><div class=paragraph><p>まず, モデムがどのシリアルポートにつながっているか決めましょう. 私は <span class=filename>/dev/cuaa1</span> から <span class=filename>/dev/modem</span>へというシンボリックリンクを張り, コンフィグレーションではその名前だけを使っています. <span class=filename>/etc</span> や<span class=filename>.kermrc</span> など, システム全体に散らばっているファイルを修正する 必要がでるとまったく煩わしいのです!</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>ここで, <span class=filename>/dev/cuaa0</span>は <span class=filename>COM1</span>であり, <span class=filename>cuaa1</span>は<span class=filename>COM2</span>です.</p></div></td></tr></tbody></table></div><div class=paragraph><p>カーネルのコンフィグレーションファイルに</p></div><div class="literalblock programlisting"><div class=content><pre>pseudo-device   sl      1</pre></div></div><div class=paragraph><p>という記述があるのを確認してください. これは <span class=filename>GENERIC</span> カーネルに含まれている ので削除していない限り大丈夫でしょう.</p></div><div class=sect3><h4 id=_最初の設定>18.5.1.1. 最初の設定<a class=anchor href=#_最初の設定></a></h4><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p><span class=filename>/etc/hosts</span> ファイルにあなたのマシンのゲートウェイとネームサーバ を加えてください. 私のは以下のようになっています.</p><div class="literalblock programlisting"><div class=content><pre>127.0.0.1               localhost loghost
136.152.64.181          silvia.HIP.Berkeley.EDU silvia.HIP silvia
136.152.64.1            inr-3.Berkeley.EDU inr-3 slip-gateway
128.32.136.9            ns1.Berkeley.edu ns1
128.32.136.12           ns2.Berkeley.edu ns2</pre></div></div></li><li><p><span class=filename>/etc/host.conf</span> ファイル中で <code>hosts</code>が<code>bind</code> よりも前にあること を確認してください. さもないとヘンなことが起こるかもしれません.</p></li><li><p><span class=filename>/etc/rc.conf</span> ファイルを編集してください. なお, お使いの FreeBSD が 2.2.2 よりも前のバージョンのものの場合は, <span class=filename>/etc/sysconfig</span> を編集してください.</p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>行</p><div class="literalblock programlisting"><div class=content><pre>hostname=myname.my.domain</pre></div></div><div class=paragraph><p>を編集してホスト名をセットしてください. 完全なInternetホスト名を与えるべきです.</p></div></li><li><p>行</p><div class="literalblock programlisting"><div class=content><pre>network_interfaces=&#34;lo0&#34;</pre></div></div><div class=paragraph><p>を</p></div><div class="literalblock programlisting"><div class=content><pre>network_interfaces=&#34;lo0 sl0&#34;</pre></div></div><div class=paragraph><p>へ変更することにより ネットワークインタフェースのリストに sl0 を加えてください.</p></div></li><li><p>行</p><div class="literalblock programlisting"><div class=content><pre>ifconfig_sl0=&#34;inet ${hostname} slip-gateway netmask 0xffffff00 up&#34;</pre></div></div><div class=paragraph><p>を加えて sl0 のスタートアップフラグをセットしてください.</p></div></li><li><p>行</p><div class="literalblock programlisting"><div class=content><pre>defaultrouter=NO</pre></div></div><div class=paragraph><p>を</p></div><div class="literalblock programlisting"><div class=content><pre>defaultrouter=slip-gateway</pre></div></div><div class=paragraph><p>へ変更してデフォルトのルータを 指定してください.</p></div></li></ol></div></li><li><p>次の</p><div class="literalblock programlisting"><div class=content><pre>domain HIP.Berkeley.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</pre></div></div><div class=paragraph><p>という内容を含むファイル <span class=filename>/etc/resolv.conf</span> を作ってください. 見ればわかるように, これらはネームサーバホストを設定しています. もちろん, 実際のドメイン名やアドレスは あなたの環境に依存します.</p></div></li><li><p>root と toor (及びパスワードを持っていない他のアカウントすべて) のパスワード を設定してください. passwdコマンドを使いましょう. <span class=filename>/etc/passwd</span> や <span class=filename>/etc/master.passwd</span> といったファイルを編集してはいけません!</p></li><li><p>マシンを再起動して正しいホスト名で 立ち上がることを確認してください.</p></li></ol></div></div></div></div><div class=sect3><h4 id=_slip接続をおこなう>18.5.1.2. SLIP接続をおこなう<a class=anchor href=#_slip接続をおこなう></a></h4><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>モデムを起動, つながったらプロンプトで <code>slip</code>とタイプし, マシン名と パスワードを入力してください. 入力する必要があるものは環境に よって異なります. 私は次のようなスクリプトでkermitを使っています.</p><div class="literalblock programlisting"><div class=content><pre># kermit setup
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# The next macro will dial up and login
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Username:, if failure stop, -
output silvia\x0d, input 10 Password:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</pre></div></div><div class=paragraph><p>(もちろん, ホスト名とパスワードは変える必要があります). 接続するためには kermit のプロンプトで <code>slip</code>とタイプするだけです.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>ファイルシステムのどんなところにもプレインテキスト にパスワードを書いておくのは一般的にはよくありません. 覚悟の上で やってください. 私は単に不精なだけです.</p></div></td></tr></tbody></table></div></li><li><p>ここでkermitから抜け出し (<code>z</code>でkermitをサスペンドできます), root で</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># slattach -h -c -s 115200 /dev/modem</span></code></pre></div></div><div class=paragraph><p>と入力しましょう. もしルータの向う側のホストへ <code>ping</code> できるなら接続成功です! もしうまく いかなければslattachへの引数として <code>-c</code> の代わりに<code>-a</code>とやってみてください.</p></div></li></ol></div></div></div></div><div class=sect3><h4 id=_接続の切り方>18.5.1.3. 接続の切り方<a class=anchor href=#_接続の切り方></a></h4><div class=paragraph><p>slattachを殺すためにrootで</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -INT `cat /var/run/slattach.modem.pid`</span></code></pre></div></div><div class=paragraph><p>とタイプしてください. そして kermit に戻り (もしkermitをサスペンドしていたなら <code>fg</code>), kermitから抜けてください (<code>q</code>).</p></div><div class=paragraph><p>slattachのマニュアルページにはインタフェースを落すために <code>ifconfig sl0 down</code>をしなければいけないと書いていますが, 私には差がないように見えます. (<code>ifconfig sl0</code>とやっても同じ結果が得られる.)</p></div><div class=paragraph><p>時にはモデムがキャリアを落すのを 拒絶するかもしれません(私のは よくそうなります). その時は単にkermitをスタートしてまた終了 してください. 普通は2回目で落ちます.</p></div></div><div class=sect3><h4 id=_トラブルシューティング>18.5.1.4. トラブルシューティング<a class=anchor href=#_トラブルシューティング></a></h4><div class=paragraph><p>もし動かなければ自由に私に質問してください. 今までいろんな人がつまずいた のは次のようなことです.</p></div><div class=ulist><ul><li><p>slattach で <code>-c</code> や <code>-a</code> を使わなかった(私はなぜこれが致命的になり得るのか わかりませんが, このフラグを付けることで少なくとも一人の 問題は解決しました.)</p></li><li><p><code>sl0</code> の代わりに <code>s10</code> を使った(いくつかのフォントでは見分けるのは難しい かもしれません).</p></li><li><p>インタフェースの状態を見るために <code>ifconfig sl0</code> をやってみてください. 私は,</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig sl0</span>
sl0: <span class=nv>flags</span><span class=o>=</span>10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 <span class=nt>--</span><span class=o>&gt;</span> 136.152.64.1 netmask ffffff00</code></pre></div></div><div class=paragraph><p>となります.</p></div></li><li><p>また, pingが "no route to host" というメッセージを返す時には <code>netstat -r</code>でルーティングテーブルを確認しましょう. 私のは,</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># netstat -r</span>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt
Netmasks:
<span class=o>(</span>root node<span class=o>)</span>
<span class=o>(</span>root node<span class=o>)</span>

Route Tree <span class=k>for </span>Protocol Family inet:
<span class=o>(</span>root node<span class=o>)</span> <span class=o>=&gt;</span>
default          inr-3.Berkeley.EDU UG          8   224515  sl0 -      -
localhost.Berkel localhost.Berkeley UH          5    42127  lo0 -       0.438
inr-3.Berkeley.E silvia.HIP.Berkele UH          1        0  sl0 -      -
silvia.HIP.Berke localhost.Berkeley UGH        34 47641234  lo0 -       0.438
<span class=o>(</span>root node<span class=o>)</span></code></pre></div></div><div class=paragraph><p>となります. (これはたくさんのファイルを転送した後でのもので, あなたの見る数字はもっと小さいかも しれません).</p></div></li></ul></div></div></div><div class=sect2><h3 id=slips>18.5.2. SLIPサーバのセットアップ方法<a class=anchor href=#slips></a></h3><div class=paragraph><p>この文書の目的は, SLIPサーバ機能を FreeBSDシステムのもとで設定するため の助言を提供することです. SLIPサーバ機能を設定するということは, リモー トの SLIPクライアントがログインできるようにするために, 自動的に接続処 理をおこなうようにすることです. この文書は著者の経験に基づいておりますが, 実際のシステム構成や要望は異なりますから, すべての疑問にこの文書が答え ることはできません. なお, ここでの助言を試みた結果, あなたのシステムへ の悪影響やデータの損失が生じたとしても, 著者が責任を持つことはできませ んのでご了解をお願いします.</p></div><div class=sect3><h4 id=slips-prereqs>18.5.2.1. 前提<a class=anchor href=#slips-prereqs></a></h4><div class=paragraph><p>この文書の内容はテクニカルなものなので, 前提知識が必要です. すなわち, TCP/IPネットワークプロトコルについての知識, 特に, ネットワークとノード のアドレス指定をはじめ, ネットワークアドレスマスク, サブネット化, ルー ティング, および RIPなどのルーティングプロトコルなどに関する知識を前提 としています. ダイヤルアップサーバで SLIP機能を設定するためには, これ らの概念についての知識が必要ですから, もし不案内であると思われる方は, O’Reilly & Associates, Inc.から出版されている Craig Hunt氏の <em>TCP/IP Network Administration</em> (ISBN 0-937175-82-X)か, または Douglas Comer氏の TCP/IPプロトコルに関する一連の書籍をお読みください.</p></div><div class=paragraph><p>前提知識に加え, さらに, モデムの設定が完了しており, そのモデムを経由し てログインできるように, システムファイル群が適切に記述できているものと 仮定しています. もしモデムの準備ができていないときには, あらかじめダイヤ ルアップ機能の設定についてのチュートリアルをお読みください. Webブラ ウザが使えるのであれば <a href=http://www.FreeBSD.org/>http://www.FreeBSD.org/ </a>におけるチュー トリアルの一覧を調べてください. あるいは, この文書を見つけた場所を調べ て, <span class=filename>dialup.txt</span> やそれに類似した名前の文書をお読みください. 関連す るマニュアルページとしては, シリアルポート向けデバイスドライバについて の <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> をはじめ, モデムからのログインを 受理できるようにシステ ムを設定するための <a href="https://man.freebsd.org/cgi/man.cgi?query=ttys&amp;sektion=5&amp;format=html">ttys(5)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=gettytab&amp;sektion=5&amp;format=html">gettytab(5)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> など, さらには, シリアルポート関連パラメータ ( たと えば直接接続シリアルインタフェースの <code>clocal</code> ) についての <a href="https://man.freebsd.org/cgi/man.cgi?query=stty&amp;sektion=1&amp;format=html">stty(1)</a> なども助けになるかもしれません.</p></div></div><div class=sect3><h4 id=_概要>18.5.2.2. 概要<a class=anchor href=#_概要></a></h4><div class=paragraph><p>一般的な設定内容で FreeBSDを SLIPサーバとして利用すると, その動作は次 のようになります. まず, SLIPユーザが FreeBSD による SLIPサーバへ電話し て, SLIP専用IDでログインします. なお, このIDを持ったユーザはシェルとし て <span class=filename>/usr/sbin/sliplogin</span> を使います. この <code>sliplogin</code> は, ファイル <span class=filename>/etc/sliphome/slip.hosts</span> の中から, ログインIDと一致する 記述行を探します. もし一致する行があれば, ログインしたシリアル回線を, 利用可能な SLIPインタフェースへ接続し, その後にシェルスクリプト <span class=filename>/etc/sliphome/slip.login</span> で SLIPインタフェースを設定します.</p></div><div class=sect4><h5 id=_slipサーバへのログイン例>18.5.2.2.1. SLIPサーバへのログイン例<a class=anchor href=#_slipサーバへのログイン例></a></h5><div class=paragraph><p>仮に SLIPユーザIDが <code>Shelmerg</code> とします. すると, <span class=filename>/etc/master.passwd</span> における <code>Shelmerg</code> のエントリは次のよ うなものになります (実際には一つの行に続いている) .</p></div><div class="literalblock programlisting"><div class=content><pre>Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</pre></div></div><div class=paragraph><p><code>Shelmerg</code> がログインすると, <code>sliplogin</code> は, ファイル <span class=filename>/etc/sliphome/slip.hosts</span> からユーザIDと一致する行を探しま す. いま仮に, <span class=filename>/etc/sliphome/slip.hosts</span> に次のような記述がなされていたとします.</p></div><div class="literalblock programlisting"><div class=content><pre>Shelmerg        dc-slip sl-helmer       0xfffffc00      autocomp</pre></div></div><div class=paragraph><p><code>sliplogin</code> が上記のエントリを見つけると, <em>Shelmerg</em> が使用して いるシリアル回線を, 利用可能な SLIPインタフェースのなかの最初のものへ 接続し, 次の内容の <span class=filename>/etc/sliphome/slip.login</span> を実行します.</p></div><div class="literalblock programlisting"><div class=content><pre>/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</pre></div></div><div class=paragraph><p>もし上記の手順が正常に処理されると, <span class=filename>/etc/sliphome/slip.login</span> は, <code>sliplogin</code> が割り当てた SLIPインタフェース (この例では <span class=filename>slip.login</span> で与えられたパラメータのうちで最初の値である SLIP インタフェース0である) に対して <code>ifconfig</code> を実行し, ローカル IPアドレス (<code>dc-slip</code>)をはじめ, リモート IPアドレス (<code>sl-helmer</code>), SLIPインタフェースへのネットワークマスク (<code>0xfffffc00</code>), およびその他のフラグ (<code>autocomp</code>)を設定 します. 逆に, さきほどの手順が正常に終了しなかった場合, 通常は <code>sliplogin</code> は十分な情報を syslog の <code>daemon</code> 機能経由で <span class=filename>/var/log/messages</span> へ記録します ( <a href="https://man.freebsd.org/cgi/man.cgi?query=syslogd&amp;sektion=8&amp;format=html">syslogd(8)</a> や <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5&amp;format=html">syslog.conf(5)</a> のマニュアルページを参照のうえ, さらに <span class=filename>/etc/syslog.conf</span> を調べて <code>syslogd</code> がどのファイルへ記 録するかを確認のこと) .</p></div><div class=paragraph><p>例はこのくらいにして, さっそくシステムのセットアップを始めてみましょう.</p></div></div></div><div class=sect3><h4 id=_カーネルのコンフィグレーション>18.5.2.3. カーネルのコンフィグレーション<a class=anchor href=#_カーネルのコンフィグレーション></a></h4><div class=paragraph><p>FreeBSD のデフォルトのカーネルには, 通常, 二つの SLIPインタフェースが 準備されています (<span class=filename>sl0</span> と <span class=filename>sl1</span>) . これらのインタフェー スが使用中のカーネルに準備されているかどうかを調べるには, <code>netstat -i</code> を実行してください.</p></div><div class=paragraph><p><code>netstat -i</code> の出力例</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Name  Mtu   Network     Address            Ipkts Ierrs    Opkts Oerrs  Coll
ed0   1500  &lt;Link&gt;0.0.c0.2c.5f.4a         291311     0   174209     0   133
ed0   1500  138.247.224 ivory             291311     0   174209     0   133
lo0   65535 &lt;Link&gt;                            79     0       79     0     0
lo0   65535 loop        localhost             79     0       79     0     0
sl0<span class=k>*</span>  296   &lt;Link&gt;                             0     0        0     0     0
sl1<span class=k>*</span>  296   &lt;Link&gt;                             0     0        0     0     0</code></pre></div></div><div class=paragraph><p><code>netstat -i</code> の出力に <span class=filename>sl0</span> と <span class=filename>sl1</span> のインタフェー スが含まれているということから, カーネルには二つの SLIPインタフェー スが組み込まれているということを示しています. (<code>sl0</code> と <code>sl1</code> に付いたアスタリスクは, <code>netstat -i</code> の実行時点で はインタフェースが "ダウン" していることを表しています. )</p></div><div class=paragraph><p>なお, パケットのフォワード機能は FreeBSD のデフォルトのカーネルでは設定 されていません (すなわちルータとしては動作しない) . もしインターネット 接続ホストについての RFC要件 ( RFC 1009 [Requirements for Internet Gateways] と 1122 [Requirements for Internet Hosts - Communication Layers], おそらく 1127 [A Perspective on the Host Requirements RFCs] も ) に準拠して, FreeBSDによる SLIPサー バをルータとして動作させたいときには, <span class=filename>/etc/rc.conf</span> (バージョ ン 2.2.2 より前の FreeBSD では <span class=filename>/etc/sysconfig</span>) ファイル の <code>gateway_enable</code> 変数を <code>YES</code> としてください. もし古いシステ ムで <span class=filename>/etc/sysconfig</span> ファイルすらないときには, 次のコマン ドを <span class=filename>/etc/rc.local</span> へ追加してください.</p></div><div class="literalblock programlisting"><div class=content><pre>sysctl -w net.inet.ip.forwarding = 1</pre></div></div><div class=paragraph><p>この新しい設定を有効とするには, リブートする必要があります.</p></div><div class=paragraph><p>デフォルトのカーネルコンフィグレーションファイル (<span class=filename>/sys/i386/conf/GENERIC</span>) の最後の部分に, 次のような行がありま す.</p></div><div class="literalblock programlisting"><div class=content><pre>pseudo-device sl 2</pre></div></div><div class=paragraph><p>この行によって, 使用可能な SLIPデバイスの総数が決まります. すなわち, 行 末の数値が, 同時に動作可能な SLIP接続の最大数となります.</p></div><div class=paragraph><p>カーネルの再構築については, <a href=../kernelconfig/#kernelconfig>FreeBSDカー ネルのコンフィグレーション</a> を参照ください.</p></div></div><div class=sect3><h4 id=_sliploginのコンフィグレーション>18.5.2.4. Sliploginのコンフィグレーション<a class=anchor href=#_sliploginのコンフィグレーション></a></h4><div class=paragraph><p>すでにご説明したように, <span class=filename>/usr/sbin/sliplogin</span> のコンフィグレー ションのために, 3種類のファイルが<span class=filename>/etc/sliphome</span> ディレクトリに あります (<code>sliplogin</code> についての実際のマニュアルページとしては <a href="https://man.freebsd.org/cgi/man.cgi?query=sliplogin&amp;sektion=8&amp;format=html">sliplogin(8)</a> を参照のこと) . ファイル <span class=filename>slip.hosts</span> は SLIPユーザおよびその IPアドレスを決めます. 通常, ファイル <span class=filename>slip.login</span> は, SLIPインタフェースを設定することだけに使 用します. <span class=filename>slip.logout</span> はオプションのファイルで, <span class=filename>slip.login</span> で設定した内容を, シリアル接続が終了した時点で解除 するときに使用します.</p></div><div class=sect4><h5 id=_slip_hosts_のコンフィグレーション>18.5.2.4.1. <span class=filename>slip.hosts</span> のコンフィグレーション<a class=anchor href=#_slip_hosts_のコンフィグレーション></a></h5><div class=paragraph><p><span class=filename>/etc/sliphome/slip.hosts</span> には, 少なくとも 4 つの項目をホワイ トスペース (スペースやタブ) で区切って指定します.</p></div><div class=ulist><ul><li><p>SLIPユーザのログインID</p></li><li><p>SLIPリンクのローカル (SLIPサーバ側) アドレス</p></li><li><p>SLIPリンクのリモートアドレス</p></li><li><p>ネットワークマスク</p></li></ul></div><div class=paragraph><p>ホスト名をローカルおよびリモートのアドレスとして 記述できます (IPアドレ スの決定は, <span class=filename>/etc/host.conf</span> の指定内容に応じて, <span class=filename>/etc/hosts</span> か DNSのいずれかによって決定される) . また, ネット ワークマスクも <span class=filename>/etc/networks</span> ファイルに記述された名前を参照す ることで, 指定することもできると思います. これまでの例としてあげたシス テムでの <span class=filename>/etc/sliphome/slip.hosts</span> は次のようになります.</p></div><div class="literalblock programlisting"><div class=content><pre>#
# login local-addr      remote-addr     mask            opt1    opt2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</pre></div></div><div class=paragraph><p>それぞれの行の最後には, 次に示すオプションを一つ以上指定できます.</p></div><div class=ulist><ul><li><p><code>normal</code> - ヘッダを圧縮しない</p></li><li><p><code>compress</code> - ヘッダを圧縮する</p></li><li><p><code>autocomp</code> - リモートの設定に応じて, ヘッダを圧縮する</p></li><li><p><code>noicmp</code> - ICMPパケットを禁止する ( "ping" パケットは送出されず, バンド幅を占有しない)</p></li></ul></div><div class=paragraph><p>なお, FreeBSDバージョン2の初期リリースの <code>sliplogin</code> は, 旧 FreeBSD 1.xでは有効であった上記のオプションを無視していましたので, <code>normal</code>, <code>compress</code>, <code>autocomp</code>, そして <code>noicmp</code> などのオプションは FreeBSD 2.2でサポートされるまでは効果がありませんでした (た だしこれらのフラグを使うためには <span class=filename>slip.login</span> スクリプトへ記述する 必要がある) .</p></div><div class=paragraph><p>SLIPリンクでのローカルとリモート向けのアドレスの 選び方は, TCP/IPサブネッ トを専用に割り当てるか, または "プロキシ ARP" を SLIPサーバへ用いるかによって違います ( "プロキシ ARP" という用語のここでの使い方は本来のものではないが, 説明のためにこの用語を使う) . もし, どちらの方式を選ぶべきか判らなかったり, IPアドレスの割り当て方が不明のときには, 上述の <a href=#slips-prereqs>前提</a> の節で紹介した TCP/IP関連書籍を参考になさるか, またはあなたの IPネットワークを管理している方に相談なさると よいでしょう.</p></div><div class=paragraph><p>独立したサブネットを SLIPクライアントへ適用するときには, すでに割り当てられている IPネットワーク番号の範囲からサブネット番号を割り当て, 同 時にそのサブネットの範囲内で有効な IPアドレスを SLIPクライアントの IP 番号として割り当てる必要があります. さらに, この SLIPサブネットから SLIPサーバを経由して最も近い IPルータへの経路を静的に設定するか, または <code>gated</code> を FreeBSDによる SLIPサーバへインストールして, 適当 なルーティングプロトコルを使って, SLIPサーバ経由のサブネットへの経路情 報をルータ群へ通知できるように設定するか, のいずれかをおこなう必要があります.</p></div><div class=paragraph><p>"プロキシ ARP" 方式を採用するときには, SLIPクライアント向けの IPアドレス として, SLIPサーバのサブネットの範囲から 選んで割り当てるとともに, <a href="https://man.freebsd.org/cgi/man.cgi?query=arp&amp;sektion=8&amp;format=html">arp(8)</a> コマンドを使うために <span class=filename>/etc/sliphome/slip.login</span> と<span class=filename>/etc/sliphome/slip.logout</span> のスクリプトを修正して, SLIPサー バにおける ARPテーブル内のプロキシ ARPエントリへ 反映させる必要がありま す.</p></div></div><div class=sect4><h5 id=_slip_login_のコンフィグレーション>18.5.2.4.2. <span class=filename>slip.login</span> のコンフィグレーション<a class=anchor href=#_slip_login_のコンフィグレーション></a></h5><div class=paragraph><p>ファイル <span class=filename>/etc/sliphome/slip.login</span> の一般的な内容は次にようになります.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#	@(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</pre></div></div><div class=paragraph><p>この <span class=filename>slip.login</span> ファイルの役目は単に, SLIPインタフェースにつ いてのローカルとリモートのアドレス, およびそのネットワークマスクを <code>ifconfig</code> コマンドで設定することです.</p></div><div class=paragraph><p>もし "プロキシ ARP" 方式を採用する (SLIPクライアントへ独立したサブネットを使わない) ときには, ファイル <span class=filename>/etc/sliphome/slip.login</span> は次のような内容になります.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#	@(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# Answer ARP requests for the SLIP client with our Ethernet addr
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</pre></div></div><div class=paragraph><p>この <span class=filename>slip.login</span> で追加された行 <code>arp -s $5 00:11:22:33:44:55 pub</code> は, SLIPサーバにおける ARPテーブルへ新たなエントリを作ります. SLIPサーバ は, この ARPエントリが作られると, SLIPクライアントの IPアドレスと話し たい他の IPノードが要求してきたときにはいつも, SLIPサーバ の Ethernet MACアドレスを返すようになります.</p></div><div class=paragraph><p>上記の例を実際に流用なさるときには, 例にある Ethernet MACアドレス (<code>00:11:22:33:44:55</code>) を, あなたのシステムの実際のEthernetカー ドの MACアドレスと置き換えなければ "プロキシ ARP" はうまく動作しません! SLIPサーバの Ethernet MACアドレスを調べるには <code>netstat -i</code> コマ ンドを利用してください. 実行結果の第2行は次のようなものになるはずです.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923     0   129457     0   116</code></pre></div></div><div class=paragraph><p>この例での Ethernet MACアドレスは <code>00:02:c1:28:5f:4a</code> であると 読みます. なお <a href="https://man.freebsd.org/cgi/man.cgi?query=arp&amp;sektion=8&amp;format=html">arp(8)</a> における MAC アドレスの指定に際しては, コマンド <code>netstat -i</code> が付けた Ethernet MACアドレスのピリオド記 号をコロン記号と置き換え, かつ単一桁の 16 進数にはゼロを先頭に加える必 要があります. この指定についての正確な情報は <a href="https://man.freebsd.org/cgi/man.cgi?query=arp&amp;sektion=8&amp;format=html">arp(8)</a> を参照く ださい.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p><span class=filename>/etc/sliphome/slip.login</span> と <span class=filename>/etc/sliphome/slip.logout</span> を作成したならば, ファイル属性の "実行" ビット (すなわち <code>chmod 755 /etc/sliphome/slip.login /etc/sliphome/slip.logout</code>) を 設定しなければなりません. さもなければ <code>sliplogin</code> が うまく実行されません.</p></div></td></tr></tbody></table></div></div><div class=sect4><h5 id=_slip_logout_のコンフィグレーション>18.5.2.4.3. <span class=filename>slip.logout</span> のコンフィグレーション<a class=anchor href=#_slip_logout_のコンフィグレーション></a></h5><div class=paragraph><p>ファイル <span class=filename>/etc/sliphome/slip.logout</span> は必ずしも必要なものではあ りません (ただし "プロキシ ARP" を利用する場合を除く) . もしこのファイルを 作成するときには, 次に示す標準的な <span class=filename>slip.logout</span> スクリプト例を 参考にしてください.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#	slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down</pre></div></div><div class=paragraph><p>"プロキシ ARP" を利用する場合, この <span class=filename>/etc/sliphome/slip.logout</span> を 使って, 特定の SLIPクライアント向けの ARPエントリを削除したくなるようなときがあります.</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh -
#
#       @(#)slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down
# Quit answering ARP requests for the SLIP client
/usr/sbin/arp -d $5</pre></div></div><div class=paragraph><p>コマンド <code>arp -d $5</code> は, SLIPクライアントがログインした 際に, "プロキシ ARP" を使った <span class=filename>slip.login</span> によって追加され た ARPエントリを削除します.</p></div><div class=paragraph><p>これによって, 繰り返して利用することができるわけです. 必ず, <span class=filename>/etc/sliphome/slip.logout</span> を作成した後に, 実行ビットを設定し てください ( <code>chmod 755 /etc/sliphome/slip.logout</code> ) .</p></div></div></div><div class=sect3><h4 id=_ルーティングについての考慮点>18.5.2.5. ルーティングについての考慮点<a class=anchor href=#_ルーティングについての考慮点></a></h4><div class=paragraph><p>"プロキシ ARP" 方式を利用せずに SLIPクライアントとその他のネットワーク (Internetも含む) の構成要素との間でパケットをルーティングするときには, SLIPサーバ経由で SLIPクライアントが属するサブネットまでの経路を, 最も 近いデフォルトのルータ群へ静的な経路情報として 追加しなければならないか, または <code>gated</code> を FreeBSDによる SLIPサーバへインストールして, SLIP サブネットについての経路情報を, 適当なルーティングプロトコルでルー タ群へ通知できるように設定するか, のどちらかをおこなわなければなりません.</p></div><div class=sect4><h5 id=_静的な経路>18.5.2.5.1. 静的な経路<a class=anchor href=#_静的な経路></a></h5><div class=paragraph><p>静的な経路を最も近いデフォルトの ルータ群へ追加することが困難なことがあ ります (経路情報を追加できる権限がなければそもそも不可能となる). もし あなたの組織に複数のルータで構成された ネットワークがあるならば, ある種 のルータ (たとえば Ciscoや Proteonなど) は, 静的な経路を SLIPサブネッ トへ使うようにルータを設定しなければならないだけでなく, その静的経路を 他のどのルータへ知らせるのかもあらかじめ 指定しておく必要がありますから, 静的経路に基づくルーティングを軌道に乗せるには それなりの専門的技術やト ラブルシューティングやコツが必要だと思います.</p></div></div><div class=sect4><h5 id=_gatedの稼働>18.5.2.5.2. <code>gated</code>の稼働<a class=anchor href=#_gatedの稼働></a></h5><div class=paragraph><p>静的経路についての頭痛への代替手段は, <code>gated</code> を FreeBSDによる SLIPサー バへインストールして, 適切なルーティングプロトコル (RIP/OSPF/BGP/EGP) を使って SLIPサブネットについての経路情報を他のルータへ知らせるように 設定することです. <a href=../ports/#ports>ports コレクション</a>から <code>gated</code> を用いることもできますし, <a href=ftp://ftp.gated.merit.edu/research.and.development/gated/>GateD 匿名 FTP サイト</a> から探して自分自身で構築することもで きます. この文章を執筆時点の最新バージョンは <span class=filename>gated-R3_5Alpha_8.tar.Z</span> であり, このファイル "だけで" FreeBSDで 動作させることができます. <code>gated</code> についてのすべての情報と文書 は <a href=http://www.gated.merit.edu/>Merit GateD コンソーシアム</a> からはじまる Web 上で入手でき ます. <code>gated</code> のコンパイルとインストールを行ったならば, 独自の 設定のために <span class=filename>/etc/gated.conf</span> ファイルを記述してください. 次の 例は, 筆者が FreeBSDによる SLIP サーバで使っている内容と類似のものです.</p></div><div class="literalblock programlisting"><div class=content><pre>#
# gated configuration file for dc.dsu.edu; for gated version 3.5alpha5
# Only broadcast RIP information for xxx.xxx.yy out the ed Ethernet interface
#
#
# tracing options
#
traceoptions &#34;/var/tmp/gated.output&#34; replace size 100k files 2 general ;

rip yes {
 interface sl noripout noripin ;
 interface ed ripin ripout version 1 ;
 traceoptions route ;
} ;

#
# Turn on a bunch of tracing info for the interface to the kernel:
kernel {
 traceoptions remnants request routes info interface ;
} ;

#
# Propagate the route to xxx.xxx.yy out the Ethernet interface via RIP
#

export proto rip interface ed {
        proto direct {
                xxx.xxx.yy mask 255.255.252.0 metric 1; # SLIP connections
        } ;
} ;

#
# Accept routes from RIP via ed Ethernet interfaces

import proto rip interface ed {
        all ;
} ;</pre></div></div><div class=paragraph><p>この <span class=filename>gated.conf</span> ファイルの例では, SLIPのサブネット <em>xxx.xxx.yy</em> についての経路情報を RIPを使って Ethernetへブロー ドキャストしています. もし <span class=filename>ed</span> ドライバ以外の Ethernetドライバを使うのであれば, <span class=filename>ed</span> インタフェースの記述を適切なものに置き換えてくだ さい. またこの例では, <code>gated</code>の動作をデバッグするために, <span class=filename>/var/tmp/gated.output</span> へトレース情報を出力するように指示して います. <code>gated</code> が希望通りに動作したならば, このトレースオプショ ンを止めることができます. なお, 例における <em>xxx.xxx.yy</em> を, あ なた自身の SLIPサブネットのネットワークアドレスに換えてください (また <code>proto direct</code> 部分のネットワークマスクも換えることを忘れないこ と) .</p></div><div class=paragraph><p><code>gated</code> のコンパイルとインストールが終了し, コンフィグレーショ ンファイルの作成も完了したら, FreeBSDシステムではデフォルトの <code>routed</code>に代わって <code>gated</code> を起動してください. そのため には, <span class=filename>/etc/netstart</span> の <span class=filename>routed/gated</span> 起動パラメータを 適切な値に設定してください. <code>gated</code> のコマンドラインパラメータにつ いての情報は, <code>gated</code> のマニュアルページを参照してください.</p></div></div></div></div></div></div></div><hr><div class=last-modified><p><strong>最終更新日</strong>: 2024年3月9日 by <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/ja/books/handbook/serialcomms class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/ja/books/handbook/mail class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#_この章では>18.1. この章では</a></li><li><a href=#userppp>18.2. ユーザ ppp の利用</a></li><li><a href=#ppp>18.3. カーネル PPP の利用</a></li><li><a href=#pppoe>18.4. PPP オーバイーサネット (PPPoE) の利用</a></li><li><a href=#slip>18.5. SLIP の利用</a></li></ul></nav><hr><div class=resources><h3>リソース</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="PDF 版のダウンロード"></i><a href=https://download.freebsd.org/doc/ja/books/handbook/handbook_ja.pdf>PDF 版のダウンロード</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Edit this page"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/ja/_index target=_blank>Edit this page</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/ja/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Choose language">
<span>日本語</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>High contrast</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/ja class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/ja/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>