<!doctype html><html class=theme-light lang=it><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/it/books/handbook/network-servers/><title>Capitolo 27. Server di rete | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Capitolo 27. Server di rete"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="it"><meta property="og:url" content="http://172.16.201.134:1313/it/books/handbook/network-servers/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/it\/books\/handbook\/network-servers\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/it>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/it/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/it/books>Books</a></li><li><a href=http://172.16.201.134:1313/it/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/it/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=it>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Ricerca aria-label=Ricerca maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/preface/>Prefazione</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/preface/#preface-audience>A chi si rivolge</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/preface/#italian-notes>Note alla Edizione Italiana</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/preface/#preface-overview>Organizzazione di Questo Libro</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/preface/#preface-conv>Convenzioni usate in questo libro</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/preface/#preface-acknowledgements>Riconoscimenti</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/parti/>Parte I. Per Cominciare</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/introduction/>Capitolo 1. Introduzione</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/introduction/#introduction-synopsis>1.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/introduction/#nutshell>1.2. Benvenuto in FreeBSD!</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/introduction/#history>1.3. Informazioni sul FreeBSD Project</a></li></ul></li><li><input type=checkbox id=chapter-6aaec170775233b7c45f6cdcfb70d466 class=toggle>
<label class="icon cursor" for=chapter-6aaec170775233b7c45f6cdcfb70d466><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/install/>Capitolo 2. Installazione di FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-synopsis>2.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-pre>2.2. Compiti Prima dell’Installazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-start>2.3. Iniziare l’Installazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#using-sysinstall>2.4. Introduzione a Sysinstall</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-steps>2.5. Allocazione dello Spazio su Disco</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-choosing>2.6. Scegliere Cosa Installare</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-media>2.7. Scegli il Tuo Media di Installazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-final-warning>2.8. Procedere con l’Installazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-post>2.9. Post-installazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-supported-hardware>2.10. Hardware Supportato</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-trouble>2.11. Localizzazione dei guasti</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-advanced>2.12. Guida per un’Installazione Avanzata</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/install/#install-diff-media>2.13. Preparare i Propri Media di Installazione</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/basics/>Capitolo 3. Basi di Unix</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#basics-synopsis>3.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#consoles>3.2. Console Virtuali e Terminali</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#permissions>3.3. I Permessi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#dirstructure>3.4. Struttura delle Directory</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#disk-organization>3.5. Organizzazione del Disco</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#mount-unmount>3.6. Montaggio e Smontaggio dei File system</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#basics-processes>3.7. I Processi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#basics-daemons>3.8. I Demoni, i Segnali, e come Uccidere i Processi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#shells>3.9. Le Shell</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#editors>3.10. Editor di Testo</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#basics-devices>3.11. Dispositivi e Nodi di Dispositivo</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#binary-formats>3.12. Formati dei Binari</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/basics/#basics-more-information>3.13. Per Maggiori Informazioni</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/ports/>Capitolo 4. Installazione delle Applicazioni: Port e Package</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/ports/#ports-synopsis>4.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ports/#ports-overview>4.2. Uno Sguardo all’Installazione del Software</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ports/#ports-finding-applications>4.3. Ricerca della Propria Applicazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ports/#packages-using>4.4. Utilizzo del Sistema dei Package</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ports/#ports-using>4.5. Utilizzo della Collezione dei Port</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ports/#ports-nextsteps>4.6. Attività del Dopo Installazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ports/#ports-broken>4.7. Avere a che Fare con Port non Funzionanti</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/x11/>Capitolo 5. L'X Window System</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/x11/#x11-synopsis>5.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/x11/#x-understanding>5.2. Capire X</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/x11/#x-install>5.3. Installazione di X11</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/x11/#x-config>5.4. La Configurazione di X11</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/x11/#x-fonts>5.5. Usare i Font in X11</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/x11/#x-xdm>5.6. L’X Display Manager</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/x11/#x11-wm>5.7. Desktop Environment</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/partii/>Parte II. Compiti Ordinari</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/desktop/>Capitolo 6. Applicazioni Desktop</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/desktop/#desktop-synopsis>6.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/desktop/#desktop-browsers>6.2. Browser</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/desktop/#desktop-productivity>6.3. Produttività</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/desktop/#desktop-viewers>6.4. Visualizzatori di Documenti</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/desktop/#desktop-finance>6.5. Bilancio</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/desktop/#desktop-summary>6.6. Sommario</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/multimedia/>Capitolo 7. Multimedia</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/multimedia/#multimedia-synopsis>7.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/multimedia/#sound-setup>7.2. Configurazione della Scheda Audio</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/multimedia/#sound-mp3>7.3. Audio MP3</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/multimedia/#video-playback>7.4. Riproduzione Video</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/multimedia/#tvcard>7.5. Configurazione delle Schede TV</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/multimedia/#scanners>7.6. Scanner di immagini</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/kernelconfig/>Capitolo 8. Configurazione del Kernel di FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. Perchè creare un kernel custom?</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/kernelconfig/#kernelconfig-building>8.3. Compilare ed installare un Kernel Custom</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/kernelconfig/#kernelconfig-config>8.4. Il File di Configurazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/kernelconfig/#kernelconfig-trouble>8.5. Se Qualcosa Va Male</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/printing/>Capitolo 9. Stampa</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/printing/#_sinossi>9.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/printing/#printing-intro-spooler>9.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/printing/#printing-intro-setup>9.3. Basic Setup</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/printing/#printing-advanced>9.4. Advanced Printer Setup</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/printing/#printing-using>9.5. Using Printers</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/printing/#printing-lpd-alternatives>9.6. Alternatives to the Standard Spooler</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/printing/#printing-troubleshooting>9.7. Troubleshooting</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/>Capitolo 10. Compatibilità con i Binari di Linux</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#linuxemu-synopsis>10.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. Installazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#linuxemu-mathematica>10.3. Installazione di Mathematica®</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#linuxemu-maple>10.4. Installazione di Maple™</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#linuxemu-matlab>10.5. Installazione di MATLAB®</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#linuxemu-oracle>10.6. Installazione di Oracle®</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#sapr3>10.7. Installazione di SAP® R/3®</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/linuxemu/#linuxemu-advanced>10.8. Argomenti Avanzati</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/partiii/>Parte III. Amministrazione del Sistema</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/config/>Capitolo 11. Configurazione e Messa a Punto</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#config-synopsis>11.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-initial>11.2. Configurazione Iniziale</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-core-configuration>11.3. Configurazione Principale</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-appconfig>11.4. Configurazione delle Applicazioni</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-starting-services>11.5. Avvio dei Servizi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-cron>11.6. Configurare l’Utility <code>cron</code></a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-rcd>11.7. Usare rc con FreeBSD</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#config-network-setup>11.8. Configurazione delle Interfacce di Rete</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-virtual-hosts>11.9. Host Virtuali</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-configfiles>11.10. File di Configurazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-sysctl>11.11. Messa a Punto con sysctl</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-disk>11.12. Messa a Punto dei Dischi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#configtuning-kernel-limits>11.13. Messa a Punto dei Limiti del Kernel</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#adding-swap-space>11.14. Aggiunta di Spazio di Swap</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#acpi-overview>11.15. Gestione dell’Energia e delle Risorse</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/config/#ACPI-debug>11.16. Usare e Debuggare ACPI di FreeBSD</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/boot/>Capitolo 12. La Procedura di Avvio di FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/boot/#boot-synopsis>12.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/boot/#boot-introduction>12.2. Il Problema dell’Avvio</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/boot/#boot-blocks>12.3. Il Boot Manager e le Fasi di Boot</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/boot/#boot-kernel>12.4. Interazione con il Kernel Durante l’Avvio</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/boot/#device-hints>12.5. Device Hints</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/boot/#boot-init>12.6. Init: Inizializzazione del Controllo dei Processi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/boot/#boot-shutdown>12.7. Sequenza di Spegnimento</a></li></ul></li><li><input type=checkbox id=chapter-d251c21b963b5ab783e5aec225e02b5a class=toggle>
<label class="icon cursor" for=chapter-d251c21b963b5ab783e5aec225e02b5a><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/users/>Capitolo 13. Gestione degli Utenti e degli Account di Base</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-synopsis>13.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-introduction>13.2. Introduction</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-superuser>13.3. The Superuser Account</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-system>13.4. System Accounts</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-user>13.5. User Accounts</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-modifying>13.6. Modifying Accounts</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-limiting>13.7. Limiting Users</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-personalizing>13.8. Personalizing Users</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/users/#users-groups>13.9. Groups</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/security/>Capitolo 14. Sicurezza</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#security-synopsis>14.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#security-intro>14.2. Introduzione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#securing-freebsd>14.3. Rendere sicuro FreeBSD</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#crypt>14.4. DES, MD5 e Crypt</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#one-time-passwords>14.5. Password One-time</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#tcpwrappers>14.6. TCP Wrappers</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#kerberosIV>14.7. KerberosIV</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#kerberos5>14.8. Kerberos5</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#openssl>14.9. OpenSSL</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#ipsec>14.10. IPsec</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#openssh>14.11. OpenSSH</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#fs-acl>14.12. File System Access Control Lists</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#security-portaudit>14.13. Monitoring Third Party Security Issues</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#security-advisories>14.14. FreeBSD Security Advisories</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/security/#security-accounting>14.15. Process Accounting</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/jails/>Capitolo 15. Jail</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/jails/#jails-synopsis>15.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/jails/#jails-terms>15.2. Termini Relativi alle Jail</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/jails/#jails-intro>15.3. Introduzione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/jails/#jails-build>15.4. Creare e Controllare la Jail</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/jails/#jails-tuning>15.5. Messa a Punto ed Amministrazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/jails/#jails-application>15.6. Applicazioni di Jail</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/mac/>Capitolo 16. Mandatory Access Control</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-synopsis>16.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-inline-glossary>16.2. Key Terms in this Chapter</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-initial>16.3. Explanation of MAC</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-understandlabel>16.4. Understanding MAC Labels</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-modules>16.5. Module Configuration</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-bsdextended>16.6. The MAC bsdextended Module</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-ifoff>16.7. The MAC ifoff Module</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-portacl>16.8. The MAC portacl Module</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-labelingpolicies>16.9. MAC Policies with Labeling Features</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-partition>16.10. The MAC partition Module</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-mls>16.11. The MAC Multi-Level Security Module</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-biba>16.12. The MAC Biba Module</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-lomac>16.13. The MAC LOMAC Module</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-implementing>16.14. Implementing a Secure Environment with MAC</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#MAC-examplehttpd>16.15. Another Example: Using MAC to Constrain A Web Server</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-examplesandbox>16.16. An Example of a MAC Sandbox</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mac/#mac-troubleshoot>16.17. Troubleshooting the MAC Framework</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/audit/>Capitolo 17. Auditing degli Eventi di Sicurezza</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/audit/#audit-synopsis>17.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/audit/#audit-inline-glossary>17.2. Termini chiave - Parole da conoscere</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/audit/#audit-install>17.3. Installare il Supporto Audit</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/audit/#audit-config>17.4. Configurazione dell’Audit</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/audit/#audit-administration>17.5. Amministrare il Sottosistema Audit</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/disks/>Capitolo 18. Archiviazione dei Dati</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#disks-synopsis>18.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#disks-naming>18.2. Device Names</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#disks-adding>18.3. Adding Disks</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#raid>18.4. RAID</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#creating-cds>18.5. Creating and Using Optical Media (CDs & DVDs)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#floppies>18.6. Creating and Using Floppy Disks</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#backups-tapebackups>18.7. Creating and Using Data Tapes</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#backups-floppybackups>18.8. Backups to Floppies</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#backup-basics>18.9. Backup Basics</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#disks-virtual>18.10. Network, Memory, and File-Based File Systems</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#snapshots>18.11. File System Snapshots</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#quotas>18.12. File System Quotas</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#disks-encrypting>18.13. Encrypting Disk Partitions</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/disks/#swap-encrypting>18.14. Encrypting Swap Space</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/geom/>Capitolo 19. GEOM: Framework modulare per la trasformazione del disco</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/geom/#GEOM-synopsis>19.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/geom/#GEOM-intro>19.2. Introduzione a GEOM</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/geom/#GEOM-striping>19.3. RAID0 - Striping</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/geom/#GEOM-mirror>19.4. RAID1 - Mirroring</a></li></ul></li><li><input type=checkbox id=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e class=toggle>
<label class="icon cursor" for=chapter-dcd5a59a66ab6bff19287ccc6a33fd7e><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/vinum/>Capitolo 20. Il Gestore di Volumi Vinum</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-synopsis>20.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-intro>20.2. Dischi Troppo Piccoli</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-access-bottlenecks>20.3. Colli di Bottiglia nell’Accesso</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-data-integrity>20.4. Integrità dei Dati</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-objects>20.5. Oggetti Vinum</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-examples>20.6. Alcuni Esempi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-object-naming>20.7. Nomenclatura degli Oggetti</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-config>20.8. Configurare Vinum</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/vinum/#vinum-root>20.9. Usare Vinum nel Filesystem Root</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/virtualization/>Capitolo 21. Virtualizzazione</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/virtualization/#virtualization-synopsis>21.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/virtualization/#virtualization-guest>21.2. FreeBSD as a Guest OS</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/virtualization/#virtualization-host>21.3. FreeBSD as a Host OS</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/l10n/>Capitolo 22. Localizzazione - Uso e Impostazione dell'I18N/L10N</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/l10n/#l10n-synopsys>22.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/l10n/#l10n-basics>22.2. Principi di Base</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/l10n/#using-localization>22.3. Come Utilizzare la Localizzazione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/l10n/#l10n-compiling>22.4. Compilazione dei Programmi con Supporto I18N</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/l10n/#lang-setup>22.5. Localizzazione di FreeBSD con Lingue Particolari</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/cutting-edge/>Capitolo 23. Lo Stato dell'Arte</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/cutting-edge/#_sinossi>23.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/cutting-edge/#current-stable>23.2. FreeBSD-CURRENT vs. FreeBSD-STABLE</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/cutting-edge/#synching>23.3. Synchronizing Your Source</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/cutting-edge/#makeworld>23.4. Using <code>make world</code></a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/cutting-edge/#small-lan>23.5. Tracking for multiple machines</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/partiv/>Parte IV. Comunicazione di Rete</a></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/serialcomms/>Capitolo 24. Comunicazioni Seriali</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/serialcomms/#serial-synopsis>24.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/serialcomms/#serial>24.2. Introduzione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/serialcomms/#term>24.3. Terminali</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/serialcomms/#dialup>24.4. Servizio di Ricezione Chiamate</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/serialcomms/#dialout>24.5. Servizio di Effettuazione Chiamate</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/serialcomms/#serialconsole-setup>24.6. Impostazione della Console Seriale</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/ppp-and-slip/>Capitolo 25. PPP e SLIP</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/ppp-and-slip/#_sinossi>25.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ppp-and-slip/#userppp>25.2. Using User PPP</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ppp-and-slip/#ppp>25.3. Using Kernel PPP</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ppp-and-slip/#pppoe>25.4. Using PPP over Ethernet (PPPoE)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ppp-and-slip/#pppoa>25.5. Using PPP over ATM (PPPoA)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/ppp-and-slip/#slip>25.6. Using SLIP</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/mail/>Capitolo 26. Posta Elettronica</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-synopsis>26.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-using>26.2. Utilizzo della Posta Elettronica</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#sendmail>26.3. Configurazione di sendmail</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-changingmta>26.4. Sostituzione del proprio Mail Transfer Agent</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-trouble>26.5. Risoluzione dei Problemi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-advanced>26.6. Argomenti Avanzati</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#SMTP-UUCP>26.7. SMTP con UUCP</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#outgoing-only>26.8. Configurazione del Sistema di Posta solo per l’Invio</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#SMTP-dialup>26.9. Uso della Posta con una Connessione Dialup</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#SMTP-Auth>26.10. Autenticazione SMTP</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-agents>26.11. Mail User Agent</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-fetchmail>26.12. Usare fetchmail</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mail/#mail-procmail>26.13. Usare procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle checked>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/>Capitolo 27. Server di rete</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-servers-synopsis>27.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-inetd>27.2. Il "Super-Server"inetd</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-nfs>27.3. Network File System (NFS)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-nis>27.4. Network Information System (NIS/YP)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-dhcp>27.5. Configurazione Automatica della Rete (DHCP)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-dns>27.6. Domain Name System (DNS)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-apache>27.7. Apache HTTP Server</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-ftp>27.8. File Transfer Protocol (FTP)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-samba>27.9. Servizi di File e Stampa per client Microsoft® Windows® (Samba)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/network-servers/#network-ntp>27.10. Sincronizzazione del Clock con NTP</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/firewalls/>Capitolo 28. Firewall</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/firewalls/#firewalls-intro>28.1. Introduzione</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/firewalls/#firewalls-concepts>28.2. Concetti sui Firewall</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/firewalls/#firewalls-apps>28.3. Firewall come Applicaizoni Software</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/firewalls/#firewalls-pf>28.4. Il Firewall PF (Packet Filter)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/firewalls/#firewalls-ipf>28.5. Il Firewall IPF (IPFILTER)</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/firewalls/#firewalls-ipfw>28.6. IPFW</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/>Capitolo 29. Networking Avanzato</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#advanced-networking-synopsis>29.1. Sinossi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-routing>29.2. Gateways e Routes</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-wireless>29.3. Wireless</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-bluetooth>29.4. Bluetooth</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-bridging>29.5. Bridging</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-diskless>29.6. Modalità senza dischi</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-isdn>29.7. ISDN</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-natd>29.8. NAT</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-plip>29.9. PLIP</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-ipv6>29.10. IPv6</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/advanced-networking/#network-atm>29.11. ATM</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/partv/>Parte V. Appendici</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/>Appendice A. Ottenere FreeBSD</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#mirrors-cdrom>A.1. Editori di CDROM e DVD</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#mirrors-ftp>A.2. Siti FTP</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#anoncvs>A.3. CVS Anonimo</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#ctm>A.4. Uso di CTM</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#cvsup>A.5. Uso di CVSup</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#portsnap>A.6. Usare Portsnap</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#cvs-tags>A.7. Tag CVS</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#mirrors-afs>A.8. Siti AFS</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/mirrors/#mirrors-rsync>A.9. Siti rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/>Appendice B. Bibliografia</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-freebsd>B.1. Libri & Riviste Specifiche su FreeBSD</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-userguides>B.2. Guide per gli Utenti</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-adminguides>B.3. Guide per gli Amministratori</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-programmers>B.4. Guide per i Programmatori</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-osinternals>B.5. Architettura del Sistema Operativo</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-security>B.6. Riferimenti sulla Sicurezza</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-hardware>B.7. Riferimenti sull’Hardware</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-history>B.8. Storia di UNIX®</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/bibliography/#bibliography-journals>B.9. Riviste e Giornali</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/eresources/>Appendice C. Risorse su Internet</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/eresources/#eresources-mail>C.1. Mailing Lists</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/eresources/#eresources-news>C.2. Newsgroup Usenet</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/eresources/#eresources-web>C.3. Server World Wide Web</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/eresources/#eresources-email>C.4. Indirizzi Email</a></li><li><a href=http://172.16.201.134:1313/it/books/handbook/eresources/#eresources-shell>C.5. Shell Accounts</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=http://172.16.201.134:1313/it/books/handbook/pgpkeys/>Appendice D. Chiavi PGP</a><ul><li><a href=http://172.16.201.134:1313/it/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Cariche Ufficiali</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Indice del libro"></i>
Indice del libro</span></label></div><h1 class=title>Capitolo 27. Server di rete</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>Indice</h3><nav id=TableOfContents><ul><li><a href=#network-servers-synopsis>27.1. Sinossi</a></li><li><a href=#network-inetd>27.2. Il "Super-Server"inetd</a></li><li><a href=#network-nfs>27.3. Network File System (NFS)</a></li><li><a href=#network-nis>27.4. Network Information System (NIS/YP)</a></li><li><a href=#network-dhcp>27.5. Configurazione Automatica della Rete (DHCP)</a></li><li><a href=#network-dns>27.6. Domain Name System (DNS)</a></li><li><a href=#network-apache>27.7. Apache HTTP Server</a></li><li><a href=#network-ftp>27.8. File Transfer Protocol (FTP)</a></li><li><a href=#network-samba>27.9. Servizi di File e Stampa per client Microsoft® Windows® (Samba)</a></li><li><a href=#network-ntp>27.10. Sincronizzazione del Clock con NTP</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=network-servers-synopsis>27.1. Sinossi<a class=anchor href=#network-servers-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>Questo capitolo coprirà alcuni dei servizi di rete usati più di frequente sui sistemi UNIX®. Fra gli argomenti toccati, ci saranno l’installazione, la configurazione, il test ed la manutenzione di molti tipi diversi di servizi di rete. Per vostro beneficio in tutto il capitolo saranno inclusi file di configurazione di esempio.</p></div><div class=paragraph><p>Dopo aver letto questo capitolo, sarai in grado di:</p></div><div class=ulist><ul><li><p>Gestire il demone inetd.</p></li><li><p>Installare un file system di rete.</p></li><li><p>Installare un server NIS per condividere account utenti.</p></li><li><p>Installare impostazioni automatiche di rete usando DHCP.</p></li><li><p>Installare un server di risoluzione dei nomi.</p></li><li><p>Installare il server HTTP Apache.</p></li><li><p>Installare un File Transfer Protocol (FTP) Server.</p></li><li><p>Installare un file server e server di stampa per client Windows® usando Samba.</p></li><li><p>Sincronizzare la data e l’ora ed installare un time server, col protocollo NTP.</p></li></ul></div><div class=paragraph><p>Prima di leggere questo capitolo, dovresti:</p></div><div class=ulist><ul><li><p>Comprendere le basi dell’organizzazione degli scripts <span class=filename>/etc/rc</span>.</p></li><li><p>Avere familiarità con la terminologia di rete di base.</p></li><li><p>Sapere come installare software aggiuntivo di terze parti (<a href=../ports/#ports>Installazione delle Applicazioni. Port e Package</a>).</p></li></ul></div></div></div><div class=sect1><h2 id=network-inetd>27.2. Il "Super-Server"inetd<a class=anchor href=#network-inetd></a></h2><div class=sectionbody><div class=sect2><h3 id=network-inetd-overview>27.2.1. Uno sguardo d’insieme<a class=anchor href=#network-inetd-overview></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> viene talvolta definito l'"Internet Super-Server" perchè gestisce le connessioni verso molti servizi. Quando una connessione viene ricevuta da inetd, questo determina per quale programma la connessione sia destinata, esegue quel particolare processo e affida a lui la socket (il programma è invocato con la socket del servizio come descrittore di standard input, output ed error). Eseguire inetd per server dal carico non troppo alto può ridurre il carico complessivo di sistema, rispetto all’esecuzione individuale di ogni demone in modalità stand-alone.</p></div><div class=paragraph><p>Principalmente, inetd è usato per lanciare altri demoni, ma molti protocolli triviali sono gestiti direttamente, come ad esempio i protocolli chargen, auth, e daytime.</p></div><div class=paragraph><p>Questa sezione coprirà le basi della configurazione di inetd attraverso le opzioni da linea di comando ed il suo file di configurazione, <span class=filename>/etc/inetd.conf</span>.</p></div></div><div class=sect2><h3 id=network-inetd-settings>27.2.2. Impostazioni<a class=anchor href=#network-inetd-settings></a></h3><div class=paragraph><p>inetd viene inizializzato attraverso il sistema <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>. L’opzione <code>inetd_enable</code> è impostata a <code>NO</code> di default, ma può essere attivata da sysinstall durante l’installazione, a seconda della configurazione scelta dall’utente. Inserendo:</p></div><div class="literalblock programlisting"><div class=content><pre>inetd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>o</p></div><div class="literalblock programlisting"><div class=content><pre>inetd_enable=&#34;NO&#34;</pre></div></div><div class=paragraph><p>in <span class=filename>/etc/rc.conf</span> si abiliterà o meno la partenza di inetd al boot. Il comando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/inetd rcvar</span></code></pre></div></div><div class=paragraph><p>può essere utilizzato per mostrare le impostazioni attive al momento.</p></div><div class=paragraph><p>Inoltre, diverse opzioni di linea di comando possono essere passate a inetd attraverso l’opzione <code>inetd_flags</code>.</p></div></div><div class=sect2><h3 id=network-inetd-cmdline>27.2.3. Opzioni su linea di comando<a class=anchor href=#network-inetd-cmdline></a></h3><div class=paragraph><p>Come molti server di rete, inetd ha un numero di opzioni che possono essergli passate per modificare il suo comportamento. La lista di tutte le opzioni è:</p></div><div class=paragraph><p>inetd synopsis:</p></div><div class=paragraph><p><code>inetd [-d] [-l] [-w] [-W] [-c maximum] [-C rate] [-a address | hostname] [-p filename] [-R rate] [configuration file]</code></p></div><div class=paragraph><p>Si possono passare opzioni ad inetd usando l’opzione <code>inetd_flags</code> in <span class=filename>/etc/rc.conf</span>. Di default, <code>inetd_flags</code> è impostato a <code>-wW -C 60</code>, il che attiva il TCP wrapping per i servizi di inetd, ed impedisce ad ogni singolo indirizzo IP di richiedere qualsiasi servizio piùdi 60 volte al minuto.</p></div><div class=paragraph><p>Gli utenti novizi possono notare con piacere che questi parametri di solito non devono essere modificati, anche se bisogna menzionare il fatto che le opzioni di limitazione delle connessioni sono utili solo se ci si accorge di ricevere un numero eccessivo di connessioni. L’intera lista delle opzioni di <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> può essere trovata nel manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>.</p></div><div class=dlist><dl><dt class=hdlist1>-c maximum</dt><dd><p>Specifica il numero massimo di invocazioni simultanee per ogni servizio; il default è illimitato. Può essere sovrascritto per ogni servizio dal parametro <code>max-child</code>.</p></dd><dt class=hdlist1>-C rate</dt><dd><p>Specifica un numero massimo di volte in cui un servizio può essere invocato da un singolo indirizzo IP in un minuto; il default è illimitato. Può essere sovrascritto per ogni servizio con il parametro <code>max-connections-per-ip-per-minute</code>.</p></dd><dt class=hdlist1>-R rate</dt><dd><p>Specifica il numero massimo di volte che un servizio può essere invocato in un minuto; il default è 256. L’impostazione 0 permette un numero illimitato di invocazioni.</p></dd><dt class=hdlist1>-s maximum</dt><dd><p>Specifica il numero massimo di volte che un servizio può essere invocato per ogni periodo di tempo; il default è illimitato. Può essere sovrascritto per ogni singolo servizio con il parametro <code>max-child-per-ip</code>.</p></dd></dl></div></div><div class=sect2><h3 id=network-inetd-conf>27.2.4. <span class=filename>inetd.conf</span><a class=anchor href=#network-inetd-conf></a></h3><div class=paragraph><p>La configurazione di inetd è fatta attraverso il file <span class=filename>/etc/inetd.conf</span>.</p></div><div class=paragraph><p>Quando viene apportata una modifica a <span class=filename>/etc/inetd.conf</span>, si può forzare inetd a rileggere il suo file di configurazione eseguendo il comando:</p></div><div id=network-inetd-reread class=exampleblock><div class=title>Esempio 1. Ricaricare il file di configurazione di inetd</div><div class=content><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/inetd reload</span></code></pre></div></div></div></div><div class=paragraph><p>Ogni linea del file di configurazione specifica un singolo demone. I commenti nel file sono preceduti da un "#". Il formato di ogni riga del file <span class=filename>/etc/inetd.conf</span> è il seguente:</p></div><div class="literalblock programlisting"><div class=content><pre>nome del servizio
tipo della socket
protocollo
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute]]
utente[:gruppo][/classe-di-login]
programma-server
argomenti-del-programma-server</pre></div></div><div class=paragraph><p>Un esempio di linea per il demone <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpd&amp;sektion=8&amp;format=html">ftpd(8)</a> usando l’IPv4:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp     stream  tcp     nowait  root /usr/libexec/ftpd       ftpd -l</pre></div></div><div class=dlist><dl><dt class=hdlist1>nome-del-servizio</dt><dd><p>È il nome del servizio per il demone. Deve corrispondere ad un servizio elencato in <span class=filename>/etc/services</span>. Questo determina su quale porta inetd deve restare in ascolto. Se viene creato un nuovo servizio, deve essere messo prima in <span class=filename>/etc/services</span>.</p></dd><dt class=hdlist1>tipo-di-socket</dt><dd><p>Una a scelta fra <code>stream</code>, <code>dgram</code>, <code>raw</code>, o <code>seqpacket</code>. <code>stream</code> deve essere usata per demoni basati sulla connessione, tipo TCP, mentre <code>dgram</code> è usato per demoni che usano il protocollo di trasporto UDP.</p></dd><dt class=hdlist1>protocollo</dt><dd><p>Uno dei seguenti:</p><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Protocollo</th><th class="tableblock halign-left valign-top">Spiegazione</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp, tcp4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TCP IPv4</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp, udp4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UDP IPv4</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>TCP IPv6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp6</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UDP IPv6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>tcp46</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Entrambi TCP IPv4 e v6</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>udp46</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Entrambi UDP IPv4 e v6</p></td></tr></tbody></table></dd><dt class=hdlist1>{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]</dt><dd><p><code>wait|nowait</code> indica se il demone invocato da inetd è in grado di gestire la sua socket o meno. Il tipo di socket <code>dgram</code> deve usare l’opzione <code>wait</code>, mentre i demoni con socket stream, che sono in genere multi-thread, devono usare <code>nowait</code>. <code>wait</code> in genere fornisce socket multiple ad un singolo demone, mentre <code>nowait</code> lancia un demone figlio per ogni nuova socket.</p><div class=paragraph><p>Il massimo numero di demoni figli che inetd può lanciare si imposta attraverso l’opzione <code>max-child</code>. Se è richiesto un limite di dieci istanze per un particolare demone, un <code>/10</code> dovrebbe essere inserito dopo l’opzione <code>nowait</code>. Specificando <code>/0</code> si lascia un numero illimitato di figli.</p></div><div class=paragraph><p>Oltre all’opzione <code>max-child</code>, possono essere attivate due altre opzioni che limitano il massimo numero di connessioni da un singolo ip verso un particolare demone. <code>max-connections-per-ip-per-minute</code> limita il numero di connessioni da un particolare indirizzo IP per minuto, ad esempio un valore di dieci limiterebbe ogni singolo indirizzo IP a connettersi verso un certo servizio a dieci connessioni al minuto. <code>max-child-per-ip</code> limita il numero di figli che possono essere avviati su richiesta di un singolo indirizzo IP in ogni momento. Queste opzioni sono utili per prevenire eccessivo consumo delle risorse intenzionale o non intenzionale e attacchi Denial of Service (DoS) ad una macchina.</p></div><div class=paragraph><p>In questo campo, <code>wait</code> o <code>nowait</code> sono obbligatorie. <code>max-child</code> e <code>max-connections-per-ip-per-minute</code> e <code>max-child-per-ip</code> sono opzionali.</p></div><div class=paragraph><p>Un demone tipo-stream multi-thread senza i limiti <code>max-child</code> o <code>max-connections-per-ip-per-minute</code> dovrebbe essere semplicemente: <code>nowait</code>.</p></div><div class=paragraph><p>Lo stesso demone con un limite massimo di dieci demoni dovrebbe avere: <code>nowait/10</code>.</p></div><div class=paragraph><p>In aggiunta, la stessa impostazione con un limite di venti connessioni per IP al minuto ed un limite massimo di dieci demoni figli avrebbe: <code>nowait/10/20</code>.</p></div><div class=paragraph><p>Queste opzioni sono tutte utilizzate di default nelle impostazioni del demone <a href="https://man.freebsd.org/cgi/man.cgi?query=fingerd&amp;sektion=8&amp;format=html">fingerd(8)</a> come si vede di seguito:</p></div><div class="literalblock programlisting"><div class=content><pre>finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre></div></div><div class=paragraph><p>Alla fine, un esempio di questo campo con 100 figli in tutto, con un massimo di 5 per singolo indirizzo IP sarebbe: <code>nowait/100/0/5</code>.</p></div></dd><dt class=hdlist1>user</dt><dd><p>Questo è lo username sotto il quale un particolare demone dovrebbe girare. Di frequente, i demoni girano come utente <code>root</code>. Per motivi di sicurezza, è normale trovare alcuni server che girano con l’utente <code>daemon</code>, o il meno privilegiato utente <code>nobody</code>.</p></dd><dt class=hdlist1>server-program</dt><dd><p>Il percorso assoluto del demone che deve essere eseguito quando è ricevuta una connessione . Se il demone è un servizio offerto da inetd internamente, bisogna usare <code>internal</code>.</p></dd><dt class=hdlist1>server-program-arguments</dt><dd><p>Questa opzione funziona in congiunzione con <code>server-program</code> specificando gli argomenti, cominciando con <code>argv[0]</code>, passati al demone al momento dell’invocazione. Se <code>mydaemon -d</code> è la linea di comando, <code>mydaemon -d</code> sarà il valore dell’opzione <code>server-program-arguments</code>. Ancora, se un demone è un servizio interno, usa <code>internal</code>.</p></dd></dl></div></div><div class=sect2><h3 id=network-inetd-security>27.2.5. Sicurezza<a class=anchor href=#network-inetd-security></a></h3><div class=paragraph><p>A seconda delle scelte fatte all’installazione, molti servizi di inetd potrebbero essere attivi di default. Se non c’è necessità apparente per un particolare demone, considera di disabilitarlo. Usa un "#" a capo della riga del demone in questione in <span class=filename>/etc/inetd.conf</span>, e quindi <a href=#network-inetd-reread>ricarica la configurazione di inetd</a>. Alcuni demoni, come fingerd, potrebbero non essere assolutamente desiderati, poichè forniscono all’attaccante informazioni che gli potrebbero risultare utili.</p></div><div class=paragraph><p>Alcuni demoni non sono stati creati coll’obiettivo della sicurezza ed hanno timeout lunghi, o non esistenti. Questo permette ad un attaccante di inviare lentamente connessioni ad un particolare demone, saturando in questo modo le risorse disponibile. Può essere una buona idea impostare le limitazioni <code>max-connections-per-ip-per-minute</code> e <code>max-child</code> o <code>max-child-per-ip</code> su certi demoni se scopri di avere troppe connessioni.</p></div><div class=paragraph><p>Di default, il TCP wrapping è attivo. Consulta la pagina del manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts_access&amp;sektion=5&amp;format=html">hosts_access(5)</a> per impostare delle restrizioni TCP su certi demoni invocati da inetd.</p></div></div><div class=sect2><h3 id=network-inetd-misc>27.2.6. Miscellanei<a class=anchor href=#network-inetd-misc></a></h3><div class=paragraph><p>daytime, time, echo, discard, chargen, e auth sono tutti servizi interni di inetd.</p></div><div class=paragraph><p>Il servizio auth fornisce servizi di rete di identificazione ed è configurabile fino ad un certo punto, mentre gli altri possono solo essere accesi o spenti.</p></div><div class=paragraph><p>Consulta la paigna di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a> per dettagli più approfonditi.</p></div></div></div></div><div class=sect1><h2 id=network-nfs>27.3. Network File System (NFS)<a class=anchor href=#network-nfs></a></h2><div class=sectionbody><div class=paragraph><p>Fra i molti differenti file system che FreeBSD supporta c’è il Network File System, conosciuto anche come NFS. NFS permette ad un sistema di condividere directory e file con altri sistemi in rete. Usando NFS, utenti e programmi possono accedere a file su sistemi remoti quasi come se fossero files locali.</p></div><div class=paragraph><p>Alcuni dei più notevoli benefici che NFS ci fornisce sono:</p></div><div class=ulist><ul><li><p>Workstation locali usano meno spazio su disco perchè i dati usati in locale possono essere conservati su una singola macchina e restano accessibili agli altri sulla rete.</p></li><li><p>Non c’è bisogno per gli utenti di avere home directory separate su ogni macchina in rete. Le home directory possono essere poste sul server NFS e rese disponibili attraverso la rete.</p></li><li><p>Device di storage come floppy disk, drive CDROM, e drive Zip® possono essere usati da altre macchine sulla rete. Questo può ridurre il numero di device di storage rimuovibili sulla rete.</p></li></ul></div><div class=sect2><h3 id=_come_funziona_nfs>27.3.1. Come Funziona NFS<a class=anchor href=#_come_funziona_nfs></a></h3><div class=paragraph><p>NFS consiste di almeno due parti: un server ed uno o più client. Il client accede da remoto ai dati conservati sulla macchina server. Affinchè questo funzioni, alcuni processi devono essere configurati e devono essere attivi.</p></div><div class=paragraph><p>Il server deve avere attivi i seguenti demoni:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Demone</th><th class="tableblock halign-left valign-top">Descrizione</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>nfsd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Il demone NFS che serve richieste da client NFS.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>mountd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Il demone di mount NFS che serve le richieste che <a href="https://man.freebsd.org/cgi/man.cgi?query=nfsd&amp;sektion=8&amp;format=html">nfsd(8)</a> gli passa.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpcbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Questo demone permette ai client NFS di scoprire quali porte il server NFS sta usando.</p></td></tr></tbody></table><div class=paragraph><p>Il client può anche eseguire un demone, noto come nfsiod. Il demone nfsiod serve le richieste dal server NFS. E' opzionale, aiuta a migliorare le prestazioni ma non è indispensabile per operazioni corrette. Consultare la pagina di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=nfsiod&amp;sektion=8&amp;format=html">nfsiod(8)</a> per più informazioni.</p></div></div><div class=sect2><h3 id=network-configuring-nfs>27.3.2. Configurare NFS<a class=anchor href=#network-configuring-nfs></a></h3><div class=paragraph><p>La configurazione di NFS è un processo relativamente semplice. I processi che devono essere attivi possono essere tutti avviati al boot della macchina con poche modifiche al tuo file <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>Sul server NFS assicurati che le seguenti opzioni sono configurati nel file <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>rpcbind_enable=&#34;YES&#34;
nfs_server_enable=&#34;YES&#34;
mountd_flags=&#34;-r&#34;</pre></div></div><div class=paragraph><p>mountd viene eseguito automaticamente in caso il server NFS sia abilitato.</p></div><div class=paragraph><p>Sul client, accertati che questa riga sia attiva nel file <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>nfs_client_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Il file <span class=filename>/etc/exports</span> specifica quali file system NFS dovrebbe esportare (talora chiamate anche "share"). Ogni linea di <span class=filename>/etc/exports</span> specifica un file system che deve essere esportato e quali macchine hanno accesso a quel file system. Assieme alle macchine che hanno accesso a quel file system, possono esserci specificate anche opzioni. Ci sono molte opzioni di questo tipo che possono essere usate in questo file ma solo poche saranno menzionate qui. Puoi facilmente scoprire le altre opzioni leggendo la pagina di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;format=html">exports(5)</a>.</p></div><div class=paragraph><p>Queste sono alcune linee di esempio del file <span class=filename>/etc/exports</span>:</p></div><div class=paragraph><p>I seguenti esempi danno un’idea di come esportare file system, anche se le impostazioni possono essere diverse a seconda del tuo ambiente e della tua configurazione di rete. Ad esempio, per esportare la directory <span class=filename>/cdrom</span> a tre macchine di esempio che hanno lo stesso nome di dominio del server (da qui la mancanza di nome dominio per ognuno) o hanno delle linee nel vostro file <span class=filename>/etc/hosts</span>. L’opzione <code>-ro</code> rende il file system esportato read-only. Con questo flag, il sistema remoto non sarà in grado di scrivere alcun cambiamento sul file system esportato.</p></div><div class="literalblock programlisting"><div class=content><pre>/cdrom -ro host1 host2 host3</pre></div></div><div class=paragraph><p>La seguente linea esporta la directory <span class=filename>/home</span> a tre host identificati da indirizzo IP. E' una impostazione utile in caso tu abbia una rete privata senza un DNS server configurato. Opzionalmente il file <span class=filename>/etc/hosts</span> può essere configurato per hostname interni. Per favore rileggi <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> per più informazioni. Il flag <code>-alldirs</code> permette alle sottodirectory di fungere da mount point. In altre parole, non monterà le sottodirectory ma permetterà ai client di montare solo le directory che necessita o di cui ha bisogno.</p></div><div class="literalblock programlisting"><div class=content><pre>/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre></div></div><div class=paragraph><p>La linea seguente esporta <span class=filename>/a</span> cosicchè due client da diversi domini possono accedere al file system. L’opzione <code>-maproot=root</code> permette all’utente <code>root</code> sul sistema remoto di scrivere dati sul file system esportato come utente <code>root</code>. Se il flag <code>-maproot=root</code> non è specificato, anche se l’utente ha accesso come <code>root</code> sul file system remoto, non sarà in grado di modificare files sul file system esportato.</p></div><div class="literalblock programlisting"><div class=content><pre>/a  -maproot=root  host.example.com box.example.org</pre></div></div><div class=paragraph><p>Affinchè un client abbia accesso ad un file system, questo deve avere permessi adeguati. Assicurati che il client sia elencato nel file <span class=filename>/etc/exports</span>.</p></div><div class=paragraph><p>In <span class=filename>/etc/exports</span>, ogni linea rappresenta le informazioni per un file system esportato ad un host. Un host remoto può essere specificato solo una volta per file system, e può avere solo una entry di default. Ad esempio, supponi che <span class=filename>/usr</span> sia un singolo file system. Il seguente <span class=filename>/etc/exports</span> sarebbe invalido:</p></div><div class="literalblock programlisting"><div class=content><pre># Invalid when /usr is one file system
/usr/src   client
/usr/ports client</pre></div></div><div class=paragraph><p>Un file system, <span class=filename>/usr</span>, ha due linee che specificano exports verso lo stesso host, <code>client</code>. Il formato corretto per questa situazione è:</p></div><div class="literalblock programlisting"><div class=content><pre>/usr/src /usr/ports  client</pre></div></div><div class=paragraph><p>Le proprietà di un file system esportato ad un dato host devono essere tutte su una riga. Linee senza un cliente specificato sono trattate come un singolo host. Questo limita il modo di esportare file system, ma per la maggior parte delle persone non è un problema.</p></div><div class=paragraph><p>Il seguente è un esempio di valida lista di esportazione, dove <span class=filename>/usr</span> e <span class=filename>/exports</span> <span class=filename>/usr</span> and <span class=filename>/exports</span> sono file system locali:</p></div><div class="literalblock programlisting"><div class=content><pre># Export src and ports to client01 and client02, but
only
# client01 has root privileges on it
/usr/src /usr/ports -maproot=root    client01
/usr/src /usr/ports               client02
# The client machines have root and can mount anywhere
# on /exports. Anyone in the world can mount /exports/obj read-only
/exports -alldirs -maproot=root      client01 client02
/exports/obj -ro</pre></div></div><div class=paragraph><p>Il demone mountd deve essere forzato a rileggere il file <span class=filename>/etc/exports</span> ogni volta che lo modifichi, cosicchè i cambiamenti abbiano effetto. Questo può essere ottenuto inviando un segnale HUP al processo <code>mountd</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># kill -HUP `cat /var/run/mountd.pid`</span></code></pre></div></div><div class=paragraph><p>o invocando lo script <code>mountd</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> con i parametri appropriati:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/mountd onereload</span></code></pre></div></div><div class=paragraph><p>Sei invitato a far riferimento a <a href=../config/#configtuning-initial>Configurazione Iniziale</a> per maggiori informazioni sugli script rc.</p></div><div class=paragraph><p>Alternativamente, un reboot farà sì che FreeBSD imposti tutto correttamente. Non è necessario tuttavia effettuare un reboot. L’esecuzione del seguente comando da utente <code>root</code> dovrebbe avviare tutto.</p></div><div class=paragraph><p>Sul server NFS:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># rpcbind</span>
<span class=c># nfsd -u -t -n 4</span>
<span class=c># mountd -r</span></code></pre></div></div><div class=paragraph><p>Sul client NFS:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># nfsiod -n 4</span></code></pre></div></div><div class=paragraph><p>Ora dovrebbe essere tutto pronto per montare un file system remoto. In questi esempi il nome del server sarà <code>server</code> e quello del client sarà <code>client</code>. Se vuoi solo temporaneamente montare un file system remoto o anche testare la configurazione, basta che esegui un comando come questo come utente <code>root</code> sul client:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount server:/home</span>
/mnt</code></pre></div></div><div class=paragraph><p>Questo monterà la directory <span class=filename>/home</span> del server sopra <span class=filename>/mnt</span> sul client. Se tutto è impostato correttamente dovresti essere in grado di entrare nella directory <span class=filename>/mnt</span> sul client e vedere tutti i file che sono sul server.</p></div><div class=paragraph><p>Se vuoi montare automaticamente un file system remoto ogni volta che il computer fa boot, aggiungi il file system al file <span class=filename>/etc/fstab</span>. Questo è un esempio:</p></div><div class="literalblock programlisting"><div class=content><pre>server:/home /mnt nfs rw 0 0</pre></div></div><div class=paragraph><p>La pagina di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a> elenca tutte le possibili opzioni.</p></div></div><div class=sect2><h3 id=_locking>27.3.3. Locking<a class=anchor href=#_locking></a></h3><div class=paragraph><p>Alcune applicazioni (es. mutt) richiedono il lock dei file per operare in modo corretto. In caso di NFS, può essere utilizzato rpc.lockd per il lock dei file. Per abilitarlo, aggiungi la seguente riga al file <span class=filename>/etc/rc.conf</span> sia sul client che sul server (assumendo che il client e server NFS siano già configurati):</p></div><div class="literalblock programlisting"><div class=content><pre>rpc_lockd_enable=&#34;YES&#34;
rpc_statd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Avvia l’applicazione con:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/nfslocking start</span></code></pre></div></div><div class=paragraph><p>Se non è richiesto un lock reale tra il server e il client NFS, è possibile dire al client NFS di fare un lock locale passando l’opzione <code>-L</code> a <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8&amp;format=html">mount_nfs(8)</a>. Ulteriori dettagli possono essere trovati nella pagina man di <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8&amp;format=html">mount_nfs(8)</a>.</p></div></div><div class=sect2><h3 id=_usi_pratici>27.3.4. Usi Pratici<a class=anchor href=#_usi_pratici></a></h3><div class=paragraph><p>NFS ha molti usi pratici. Alcuni dei più usati sono elencati di seguito:</p></div><div class=ulist><ul><li><p>Fa sì che alcune macchine condividano un CDROM o un altro media fra di loro. Questo è un metodo più economico e spesso più convieniente di installare software su molte macchine.</p></li><li><p>Su grandi reti, potrebbe essere più conveniente configurare un server NFS centrale in cui conservare tutte le home directory degi utenti. Queste home directory possono essere esportate sulla rete cosicchè gli utenti abbiano sempre la stessa directory, indipendentemente dalla workstation dalla quale effettuino il login.</p></li><li><p>Molte macchine potrebbero avere una directory comune <span class=filename>/usr/ports/distfiles</span>. In questo modo, quando hai bisogno di installare un port su molte macchine, puoi velocemente accedere al sorgente senza scaricarlo su ogni macchina.</p></li></ul></div></div><div class=sect2><h3 id=network-amd>27.3.5. Mount automatici con amd<a class=anchor href=#network-amd></a></h3><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=amd&amp;sektion=8&amp;format=html">amd(8)</a> (il demone di mount automatico) monta automaticamente un file system remoto ogni volta che un file o una directory in quel file system viene acceduto. I file system che sono inattivi per un certo periodo di tempo possono anche essere smontati automaticamente da amd. L’uso di amd fornisce una semplice alternativa a mount permanenti, dato che i mount permanenti sono di solito elencati in <span class=filename>/etc/fstab</span>.</p></div><div class=paragraph><p>amd opera connettendosi ad un server NFS sulle directory <span class=filename>/host</span> e <span class=filename>/net</span>. Quando si accede ad un file all’interno di una di queste directory, amd fa una ricerca del mount remoto corrispondente e lo monta automaticamente. <span class=filename>/net</span> è usato per montare un file system esportato da un indirizzo IP, mentre <span class=filename>/host</span> è usato per montare un export da un hostname remoto.</p></div><div class=paragraph><p>Un accesso ad un file in <span class=filename>/host/foobar/usr</span> dovrebbe comunicare a amd di cercare di montare l’export <span class=filename>/usr</span> sull’host <code>foobar</code>.</p></div><div class=exampleblock><div class=title>Esempio 2. Montare un export con amd</div><div class=content><div class=paragraph><p>Puoi osservare i mount disponibili di un host remoto con il comando <code>showmount</code>. Ad esempio, per vedere i mounts di un host chiamato <code>foobar</code>, puoi usare:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% showmount <span class=nt>-e</span> foobar
Exports list on foobar:
/usr                               10.10.10.0
/a                                 10.10.10.0
% <span class=nb>cd</span> /host/foobar/usr</code></pre></div></div></div></div><div class=paragraph><p>Come si vede nell’esempio, il comando <code>showmount</code> mostra <span class=filename>/usr</span> come un export. Quando si cambia directory in <span class=filename>/host/foobar/usr</span>, amd cerca di risolvere <code>foobar</code> e automaticamente monta l’export desiderato.</p></div><div class=paragraph><p>amd può essere avviato dagli scripts di startup inserendo le seguenti linee in <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>amd_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Inoltre, altri flags personalizzati possono essere ad amd con le opzioni <code>amd_flags</code>. Di default, <code>amd_flags</code> è impostato a:</p></div><div class="literalblock programlisting"><div class=content><pre>amd_flags=&#34;-a /.amd_mnt -l syslog /host /etc/amd.map
/net /etc/amd.map&#34;</pre></div></div><div class=paragraph><p>Il file <span class=filename>/etc/amd.map</span> definisce le opzioni di default con le quali gli export sono montati. Il file <span class=filename>/etc/amd.conf</span> definisce alcune delle più avanzate caratteristiche di amd.</p></div><div class=paragraph><p>Consulta le pagine di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=amd&amp;sektion=8&amp;format=html">amd(8)</a> e <a href="https://man.freebsd.org/cgi/man.cgi?query=amd.conf&amp;sektion=8&amp;format=html">amd.conf(8)</a> per maggiori informazioni.</p></div></div><div class=sect2><h3 id=network-nfs-integration>27.3.6. Problemi nell’integrazione con altri sistemi<a class=anchor href=#network-nfs-integration></a></h3><div class=paragraph><p>Alcuni adapter Ethernet per sistemi PC hanno limitazioni che possono portare a seri problemi seri di rete, in particolare con NFS. Questa difficoltà non è specifica a FreeBSD, ma i sistemi FreeBSD ne sono affetti.</p></div><div class=paragraph><p>I problemi avvengono quasi sempre quando sistemi PC (FreeBSD) sono connessi in rete con workstation ad alta performance, tipo quelli di Silicon Graphics, Inc., e Sun Microsystems, Inc. Il mount NFS funziona, ed alcune operazioni possono avere successo, ma d’improvviso sembra che il server non dia più risposte al client, anche se le richieste da e verso altri sistemi continuano ad essere processate. Questo avviene sul sistema client, sia che il client sia il sistema FreeBSD sia che sia la workstation. Su molti sistemi, non c’è modo di effettuare lo shutdown del client in modo pulito una volta che questo problema si sia manifestato. L’unica soluzione è spesso quella di resettare il client, poichè la situazione NFS non può essere risolta.</p></div><div class=paragraph><p>Anche se la soluzione "corretta" è usare un adapter Ethernet dalle migliori prestazioni e capacità , c’è un semplice workaround che permetterà operazioni soddisfacenti. Se il sistem FreeBSD è il <em>server</em>, includi le opzioni <code>-w=1024</code> al mount dal client. Se il sistema FreeBSD è il <em>client</em>, allora monta il file system NFS con l’opzione <code>-r=1024</code>. Queste opzioni possono essere specificate usando il quarto campo della linea di <span class=filename>fstab</span> sul client per mount automatici, o usa il parametro <code>-o</code> del comando <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> per mount manuali.</p></div><div class=paragraph><p>Bisognerebbe notare che c’è un problema diverso, a volte confuso con questo, quando il server NFS ed il client sono su reti diverse. Se è questo il caso, <em>accertatevi</em> che i vostri router indirizzino correttamente l’informazione necessaria su UDP, o non andrai da nessuna parte, indipendentemente da cosa tu stia cercando di fare.</p></div><div class=paragraph><p>Nei seguenti esempi, <code>fastws</code> è il nome host (interfaccia) di una workstation ad alte prestazioni, e <code>freebox</code> è il nome host (interfaccia) di un sistema FreeBSD con un adapter Ethernet a basse prestazioni. Inoltre, <span class=filename>/sharedfs</span> sarà il file system esportato (vedi <a href="https://man.freebsd.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;format=html">exports(5)</a>), e <span class=filename>/project</span> sarà il mount point sul client per il file system montato. In tutti i casi, nota che le opzioni <code>hard</code> o <code>soft</code> e <code>bg</code> possono essere utili nella tua applicazione.</p></div><div class=paragraph><p>Esempi dal sistema FreeBSD (<code>freebox</code>) come client da <span class=filename>/etc/fstab</span> su <code>freebox</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>fastws:/sharedfs /project nfs rw,-r=1024 0 0</pre></div></div><div class=paragraph><p>Come comando manuale di mount da <code>freebox</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t nfs -o -r=1024 fastws:/sharedfs /project</span></code></pre></div></div><div class=paragraph><p>Esempi dal sistema FreeBSD come server in <span class=filename>/etc/fstab</span> su <code>fastws</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>freebox:/sharedfs /project nfs rw,-w=1024 0 0</pre></div></div><div class=paragraph><p>Come comando di mount manuale su <code>fastws</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t nfs -o -w=1024 freebox:/sharedfs /project</span></code></pre></div></div><div class=paragraph><p>Praticamente ogni Ethernet adapter a 16-bit permetterà operazioni senza le succitate restrizioni sulla dimensione di lettura e scrittura.</p></div><div class=paragraph><p>Per chiunque è interessato, ecco cosa succede quando occorre il problema, il che spiega anche perchè sia non riparabile. NFS tipicamente lavora con una dimensione di "block" di 8 K (anche se può creare frammenti di dimensione minore). Dal momento che la massima dimensione dei pacchetti Ethernet è attorno a 1500 bytes, il "block" NFS sarà diviso in molti pacchetti Ethernet anche se è pur sempre una singola unità per il codice di più alto livello e deve essere ricevuto, assemblato e <em>riconosciuto</em> come una unità . La workstation ad alta performance può inviare pacchetti che comprendono le unità NFS una dietro l’altra, l’una vicino all’altra come permette lo standard.i Sulla scheda a minore capacità , gli ultimi pacchetti sovrascrivono i precedenti pacchetti della stessa unità prima che possano essere trasferiti all’host e l’unità nella sua interezza non può essere ricostruita o riconosciuta. Come risultato, la workstation andrà in timeout e cercherà ancora di ripetere l’operazione, ma cercherà con la stessa unità da 8 K, ed il processo sarà ripetuto ancora, all’infinito.</p></div><div class=paragraph><p>Mantenendo la dimensione dell’unità al di sotto della limitazione dei pacchetti Ethernet, ci assicuriamo che ogni completo pacchetto Ethernet ricevuto possa essere ricono sciuto individualmente, evitando così la situazione deadlock.</p></div><div class=paragraph><p>Sovrascritture possono anche capitare quando una workstation ad alte prestazioni riversi dati verso un sistema PC, ma con la scheda di rete migliore, sovrascritture di questo tipo non sono garantite su "unità " NFS. Quando una sovrascrittura avviene, le unità affette saranno ritrasmesse, e c’è una buona probabilità che saranno ricevute, assemblate, e riconosciute.</p></div></div></div></div><div class=sect1><h2 id=network-nis>27.4. Network Information System (NIS/YP)<a class=anchor href=#network-nis></a></h2><div class=sectionbody><div class=sect2><h3 id=_cosè>27.4.1. Cos’è?<a class=anchor href=#_cosè></a></h3><div class=paragraph><p>NIS, che sta per Network Information Services, fu sviluppato da Sun Microsystems per centralizzare l’amministrazione di sistemi UNIX® (in origine SunOS™). Ora in sostanza è diventato uno standard di settore; tutti i sistemi UNIX® like (Solaris™, HP-UX, AIX®, Linux, NetBSD, OpenBSD, FreeBSD, etc) supportano NIS.</p></div><div class=paragraph><p>NIS in precedenza era noto come Yellow Pages, ma per una questione di marchi, Sun ha cambiato il nome. Il vecchio termine (e yp) è ancora si incontra ancora spesso.</p></div><div class=paragraph><p>E' un sistema client/server basato su RPC che permette ad un gruppo di macchine in un dominio NIS di condividere un insieme comune di file di configurazione. Questo permette ad un amministratore di sistema di installare sistemi client NIS con il minimo di dati di configurazione e di aggiungere, rimuovere o modificare dati di configurazione da una singola macchina.</p></div><div class=paragraph><p>E' simile al sistema di domini di Windows NT®; anche se le implementazioni interne dei due sistemi sono del tutto diverse, le funzionalità base possono essere paragonate.</p></div></div><div class=sect2><h3 id=_terminiprocessi_che_dovresti_conoscere>27.4.2. Termini/Processi che Dovresti Conoscere<a class=anchor href=#_terminiprocessi_che_dovresti_conoscere></a></h3><div class=paragraph><p>Ci sono parecchi termini e molti importanti processi utente che incontrerai quando cercherai di implementare NIS su FreeBSD, sia che cerchi di creare un server NIS sia che cerchi di installare un client NIS:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Termine</th><th class="tableblock halign-left valign-top">Descrizione</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Nome dominio NIS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Un server NIS master e tutti i suoi client (inclusi i suoi server slave) hanno un nome dominio NIS. Analogamente al nome dominio di Windows NT®, il nome dominio NIS non ha nulla a che fare con il DNS.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpcbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Deve essere in esecuzione al fine di abilitare RPC (Remote Procedure Call, un protocollo di rete usato da NIS). Se rpcbind non è attivo, sarà impossibile portare in esecuzione un server NIS o fungere da client NIS</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ypbind</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Esegue il "bind" di un client NIS al suo server. Prenderà il nome dominio NIS dal sistema, e, usando RPC, si connetterà al server. ypbind è il fulcro di una comunicazione client-server in ambiente NIS; se ypbind muore su un client, questo non sarà in grado di accedere il server NIS.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>ypserv</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Dovrebbe essere in esecuzione solo sui server NIS;è il processo NIS vero e proprio. Se <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> muore, il server non sarà più in grado di rispondere a richieste NIS (si spera ci sia un server slave per sostituirlo). Ci sono alcune implementazioni di NIS (ma non quello di FreeBSD) che non cerca di ricollegarsi ad un altro server se il server che stava usando muore. Spesso, l’unica cosa che aiuta in questo caso è riavviare il processo server (o anche l’intero server o il processo ypbind sul client).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>rpc.yppasswdd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Un altro processo che dovrebbe essere in esecuzione solo sui server master NIS; è un demone che permette a client NIS di cambiare le proprie password NIS. Se questo demone non è attivo, gli utenti dovranno loggarsi al server master NIS e cambiare le proprie password da lì.</p></td></tr></tbody></table></div><div class=sect2><h3 id=_come_funziona>27.4.3. Come funziona?<a class=anchor href=#_come_funziona></a></h3><div class=paragraph><p>Ci sono tre tipi di host in ambiente NIS: master server, slave server e client. I server fungono da magazzino centralizzato per le informazioni sulla configurazione degli host. I server master mantengono la copia "ufficiale" di queste informazioni, mentre i server slave effettuano il mirror di queste informazioni per ridondanza. I client si affidano al server per ottenere queste informazioni.</p></div><div class=paragraph><p>Le informazioni in molti file possono essere condivise in questo modo. I file <span class=filename>master.passwd</span> ,<span class=filename>group</span> e <span class=filename>hosts</span> sono in genere condivisi in questo modo via NIS. Qualora un processo su un client necessiti di informazioni che normalmente sarebbero trovate in questi file in locale, fa una query al server NIS a cui è legato.</p></div><div class=sect3><h4 id=_tipi_di_macchine>27.4.3.1. Tipi di macchine<a class=anchor href=#_tipi_di_macchine></a></h4><div class=ulist><ul><li><p>Un <em>server master NIS</em>. Questo server, analogamente a primary domain controller Windows NT® , mantiene i file usati da tutti i client NIS. Il file <span class=filename>passwd</span>, il file <span class=filename>group</span>, e vari altri file usati da client NIS vivono sul server master.</p><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>E' possibile per una macchina agire da master server NIS per più di un dominio NIS. Comunque, questo caso non sarà coperto in questa introduzione, che presuppone un ambiente NIS relativamente piccolo.</p></div></td></tr></tbody></table></div></li><li><p><em>NIS slave server</em>. Analogamente a backup domain controller Windows NT®, i server slave NIS mantengono copie dei file di dati del server master NIS. I server slave NIS garantiscono la ridondanza che viene richiesta in ambienti importanti. Inoltre aiutano a bilanciare il carico del server master: i client NIS si legano sempre al NIS server che risponde per primo alla loro richiesta, compresi i server slave.</p></li><li><p><em>NIS client</em>. I client NIS, come la maggior parte delle workstation Windows NT® , si autenticano nei confronti del NIS server (o del domain controller Windows NT® nel caso di workstation Windows NT®) per effettuare il login.</p></li></ul></div></div></div><div class=sect2><h3 id=_usare_nisyp>27.4.4. Usare NIS/YP<a class=anchor href=#_usare_nisyp></a></h3><div class=paragraph><p>Questa sezione riguarderà l’installazione di un ambiente di esempio NIS.</p></div><div class=sect3><h4 id=_il_piano>27.4.4.1. Il Piano<a class=anchor href=#_il_piano></a></h4><div class=paragraph><p>Supponiamo che tu sia l’amministratore di un piccolo laboratorio universitario. Questo laboratorio, che consiste di 15 macchine FreeBSD, al momento non ha un sistema centralizzato di amministrazione; ogni macchina ha il suo <span class=filename>/etc/passwd</span> e <span class=filename>/etc/master.passwd</span>. Questi file sono tenuti sincronizzati fra di loro attraverso intervento manuale; al momento, quando aggiungi un utente al laboratorio, devi eseguire <code>adduser</code> su tutte e 15 le macchine. Chiaramente, questa situazione è provvisoria, così hai deciso di convertire il laboratorio a NIS, usando due delle macchine come server.</p></div><div class=paragraph><p>Così la configurazione del laboratorio adesso sembra questa:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Nome della macchina</th><th class="tableblock halign-left valign-top">Indirizzo IP</th><th class="tableblock halign-left valign-top">Ruolo della macchina</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ellington</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>NIS master</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>coltrane</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>NIS slave</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>basie</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.4</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Workstation della facoltà</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>bird</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Macchina client</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>cli[1-11]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>10.0.0.[6-17]</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Altre macchine client</p></td></tr></tbody></table><div class=paragraph><p>Se stai installando uno schema NIS per la prima volta, è una buona idea riflettere su come affrontarlo. Indipendemente dalla dimensione della rete, ci sono alcune decisioni che devono essere prese.</p></div><div class=sect4><h5 id=_scegliere_un_nome_dominio_nis>27.4.4.1.1. Scegliere un nome dominio NIS<a class=anchor href=#_scegliere_un_nome_dominio_nis></a></h5><div class=paragraph><p>Questo può non essere il "nome dominio" a cui sei abituato. Per la precisione viene chiamato "nome dominio NIS". Quando un client fa il broadcast della sua richiesta per informazioni, include il nome del dominio NIS di cui fa parte. In questo modo molti server su una rete possono distinguere a quale server la richiesta è riferita. Considerate il nome dominio NIS come il nome per un gruppo di host che sono collegati per qualche motivo.</p></div><div class=paragraph><p>Alcune organizzazioni scelgono di usare il loro nome dominio Internet come nome dominio NIS. Questo non è raccomandabile in quanto può causare confusione quando si cerchi di debuggare problemi di rete. Il nome dominio NIS dovrebbe essere unico all’interno della tua rete ed è utile che sia descrittivo del gruppo di macchine che rappresenta. Per esempio, il dipartimento di Arte della Acme Inc. può essere nel dominio "acme-art". Per questo esempio, si presume tu abbia scelto il nome <code>test-domain</code>.</p></div><div class=paragraph><p>Comunque, alcuni sistemi operativi (principalmente SunOS™) usano il loro nome dominio NIS come loro nome dominio Internet. Se una o più macchine sulla tua rete hanno questa restrizione, tu <em>devi</em> usare il nome dominio Internet come il tuo nome dominio NIS.</p></div></div><div class=sect4><h5 id=_requisiti_fisici_dei_server>27.4.4.1.2. Requisiti fisici dei server<a class=anchor href=#_requisiti_fisici_dei_server></a></h5><div class=paragraph><p>Ci sono molte cose da tener in mente quando si sceglie quale macchina usare come server NIS. Una delle caratteristiche più sfortunate di NIS è il livello di dipendenza che i client hanno verso il server. Se un client non riesce a contattare il server per il suo dominio NIS, molto spesso la macchina risulta inutilizzabile. La mancanza di informazioni utente e di gruppo fa sì che molti sistemi si blocchino. Tenendo questo in mente dovresti accertati di scegliere una macchina che non sia soggetta a reboot frequenti o una che non sia usata per sviluppo. Il server NIS dovrebbe essere in teoria una macchina stand alone il cui unico scopo di esistenza è essere un server NIS. Se hai una rete non pesantemente trafficata, è accettabile installare il server NIS su una macchina che esegue altri servizi, basta ricordarsi che se il server NIS diventa irrangiungibile, <em>tutti</em> i tuoi client NIS ne saranno affetti in modo negativo.</p></div></div></div><div class=sect3><h4 id=_server_nis>27.4.4.2. Server NIS<a class=anchor href=#_server_nis></a></h4><div class=paragraph><p>Le copie canoniche di tutte le informazioni NIS sono conservate su una singola macchina chiamata il server master NIS. I database usati per conservare le informazioni sono chiamate mappe NIS. In FreeBSD, queste mappe sono conservate in <span class=filename>/var/yp/[nome-dominio]</span> dove <span class=filename>[nome-dominio]</span> è il nome del dominio NIS che si server. Un singolo server NIS può supportare molti domini al tempo stesso, di conseguenza è possibile avere molte directory di questo tipo, una per ogni dominio supportato. Ogni dominio avrà il suo insieme indipendente di mappe.</p></div><div class=paragraph><p>I server NIS master e slave gestiscono tutte le richieste NIS col demone <code>ypserv</code>. <code>ypserv</code> è responsabile per la ricezione delle richieste in entrata dai client NIS, traducendo il dominio richiesto e il nome mappa ad un percorso verso il file di database e trasmettendo i dati indietro al client.</p></div><div class=sect4><h5 id=_installare_un_server_master_nis>27.4.4.2.1. Installare un server master NIS<a class=anchor href=#_installare_un_server_master_nis></a></h5><div class=paragraph><p>Installare un server master NIS può essere relativamente semplice, a seconda delle tue necessità . FreeBSD presenta un supporto nativo per NIS. Tutto quello che devi fare è aggiungere le seguenti linee a <span class=filename>/etc/rc.conf</span>, e FreeBSD farà il resto.</p></div><div class="exampleblock procedure"><div class=content><div class="literalblock programlisting"><div class=content><pre>nisdomainname=&#34;test-domain&#34;</pre></div></div><div class="olist arabic"><ol class=arabic><li><p>Questa linea imposterà il nome domino NIS a <code>test-domain</code> al momento della configurazione di rete (ad esempio dopo il reboot).</p><div class="literalblock programlisting"><div class=content><pre>nis_server_enable=&#34;YES&#34;</pre></div></div></li><li><p>Questa linea dirà a FreeBSD di avviare i processi NIS server la prossima volta che la rete è riavviata.</p><div class="literalblock programlisting"><div class=content><pre>nis_yppasswdd_enable=&#34;YES&#34;</pre></div></div></li><li><p>Questo avvierà il demone <code>rpc.yppasswd</code> che, come accennato prima, permetterà agli utenti di cambiare la loro password NIS dalle macchine client.</p></li></ol></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>A seconda delle tue impostazioni NIS, potresti aver bisogno di aggiungere altre linee. Leggi la <a href=#network-nis-server-is-client>sezione sui NIS server che sono anche NIS client </a>, di seguito, per dettagli.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Ora, tutto quello che devi fare è eseguire il comando <code>/etc/netstart</code> come super-utente. Questo imposterà il sistema, usando i valori che hai specificato in <span class=filename>/etc/rc.conf</span>.</p></div></div><div class=sect4><h5 id=_inizializzare_le_mappe_nis>27.4.4.2.2. Inizializzare le mappe NIS<a class=anchor href=#_inizializzare_le_mappe_nis></a></h5><div class=paragraph><p>Le <em>mappe NIS</em> sono file di database, che sono conservati nella directory <span class=filename>/var/yp</span>. Sono generati da file di configurazione nella directory <span class=filename>/etc</span> del NIS master, con una eccezione: il file <span class=filename>/etc/master.passwd</span>. C’è un buon motivo per questo, infatti normalmente non vuoi che siano propagate le password a <code>root</code> e ad altri account amministrativi a tutti gli altri server nel dominio NIS. Così prima di inizializzare le mappe NIS, dovresti:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cp /etc/master.passwd /var/yp/master.passwd</span>
<span class=c># cd /var/yp</span>
<span class=c># vi master.passwd</span></code></pre></div></div><div class=paragraph><p>Dovresti rimuovere tutte le linee che riguardano account di sistema (<code>bin</code>, <code>tty</code>, <code>kmem</code>, <code>games</code>, etc.), così come altri account che non vuoi siano propagate ai client NIS (per esempio <code>root</code> ed ogni altro account con UID 0 (super-utente)).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Accertati che il file <span class=filename>/var/yp/master.passwd</span> non sia nè leggibile dal gruppo nè dal resto del mondo (modo 600)! Usa il comando <code>chmod</code>, se appropriato.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Quando hai finito, è il momento di inizializzare le mappe NIS! FreeBSD include uno script chiamato <code>ypinit</code> che lo fa per te (leggi la sua pagina di manuale per dettagli). Nota che questo script è disponibile sulla maggior parte dei sistemi operativi UNIX® ma non su tutti. Su Digital Unix/Compaq Tru64 UNIX è chiamato <code>ypsetup</code>. Poichè stiamo generando mappe per un NIS master, passeremo l’opzione <code>-m</code> al comando <code>ypinit</code>. Per generare le mappe NIS, supponendo che tu abbia già eseguito i passi di cui sopra, esegui:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# ypinit <span class=nt>-m</span> test-domain
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? <span class=o>[</span>y/n: n]
n
Ok, please remember to go back and redo manually whatever fails.
If you don<span class=s1>&#39;t, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  coltrane
next host to add:  ^D
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] y

[..output from map generation..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</span></code></pre></div></div><div class=paragraph><p><code>ypinit</code> dovrebbe aver creato <span class=filename>/var/yp/Makefile</span> da <span class=filename>/var/yp/Makefile.dist</span>. Quando creato, questo file assume che tu stia operando su un ambiente NIS a server singolo con solo macchine FreeBSD. Dal momento che <code>test-domain</code> ha anche un server slave, devi editare <span class=filename>/var/yp/Makefile</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# vi /var/yp/Makefile</code></pre></div></div><div class=paragraph><p>Dovresti commentare la linea che dice</p></div><div class="literalblock programlisting"><div class=content><pre>NOPUSH = &#34;True&#34;</pre></div></div><div class=paragraph><p>(se non è già commentata).</p></div></div><div class=sect4><h5 id=_impostare_un_server_slave_nis>27.4.4.2.3. Impostare un server slave NIS<a class=anchor href=#_impostare_un_server_slave_nis></a></h5><div class=paragraph><p>Impostare un server NIS slave è anche più semplice che impostare il master. Loggati al server slave ed edita il file <span class=filename>/etc/rc.conf</span> esattamente come hai fatto col server master. L’unica differenza è che ora dobbiamo usare l’opzione <code>-s</code> quando eseguiamo <code>ypinit</code>. L’opzione <code>-s</code> richiede che il nome del server NIS sia passato, così la nostra linea di comando assomiglia alla seguente:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>coltrane# ypinit <span class=nt>-s</span> ellington
test-domain

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? <span class=o>[</span>y/n: n]
n

Ok, please remember to go back and redo manually whatever fails.
If you don<span class=s1>&#39;t, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don&#39;</span>t forget to update map ypservers on ellington.</code></pre></div></div><div class=paragraph><p>Ora dovresti avere una directory chiamata <span class=filename>/var/yp/test-domain</span>. Copie delle mappe NIS del master server dovrebbero risiedere in questa directory. Dovresti accertarti che siano aggiornate. La seguente linea di <span class=filename>/etc/crontab</span> sul tuo server slave dovrebbe far ciò:</p></div><div class="literalblock programlisting"><div class=content><pre>20      *       *       *       *       root /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre></div></div><div class=paragraph><p>Queste due linee forzano lo slave a sincronizzare le sue mappe con le mappe del server master. Anche se queste entry non sono obbligatorie, dal momento che il server master cerca di assicurarsi che tutte le modifiche alle sue mappe NIS siano comunicate ad i suoi slave e perchè le informazioni sulle password sono vitali per i sistemi che dipendono dal server, è una buona idea forzare gli aggiornamenti. Questo è ancora più importante su reti trafficate dove gli aggiornamenti delle mappe potrebbero non essere completi.</p></div><div class=paragraph><p>Adesso, esegui il comando <code>/etc/netstart</code> anche sullo slave, per avviare il server NIS.</p></div></div></div><div class=sect3><h4 id=_client_nis>27.4.4.3. Client NIS<a class=anchor href=#_client_nis></a></h4><div class=paragraph><p>Un client NIS stabilisce quello che è chiamato un binding ad un particolare NIS server usando il demone <code>ypbind</code>. <code>ypbind</code> controlla il dominio di default del sistema (impostato dal comando <code>domainname</code>), ed inizia a fare broadcast di richieste RPC sulla rete locale. Queste richieste specificano il nome del dominio per il quale <code>ypbind</code> sta cercando di stabilire un binding. Se un server è stato configurato a servire il dominio richiesto, risponderà a <code>ypbind</code>, che registrerà l’indirizzo del server. Se ci sono molti server disponibili (ad esempio un master e molti slave), <code>ypbind</code> userà l’indirizzo del primo che risponde. Da quel momento in poi, il sistema client dirigerà tutte le sue richieste NIS a quel server. <code>ypbind</code> occasionalmente farà un "ping" del server per accertarsi che sia su ed attivo. Se non riceve una risposta di uno dei suoi ping in un tempo accettabile, <code>ypbind</code> segnerà il dominio come non connesso e inizierà di nuovo a fare broadcasting nella speranza di localizzare un altro server.</p></div><div class=sect4><h5 id=_impostare_un_client_nis>27.4.4.3.1. Impostare un client NIS<a class=anchor href=#_impostare_un_client_nis></a></h5><div class=paragraph><p>Impostare una macchina FreeBSD perchè sia un client NIS è abbastanza semplice.</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Edita il file <span class=filename>/etc/rc.conf</span> e aggiungi le seguenti linee per impostare il nome dominio NIS ed avviare <code>ypbind</code> all’avvio della rete:</p><div class="literalblock programlisting"><div class=content><pre>nisdomainname=&#34;test-domain&#34;
nis_client_enable=&#34;YES&#34;</pre></div></div></li><li><p>Per importare tutte le possibili linee di password dal server NIS, rimuovi tutti gli account utente dal tuo <span class=filename>/etc/master.passwd</span> ed usa <code>vipw</code> per aggiungere la seguente linea alla fine del file:</p><div class="literalblock programlisting"><div class=content><pre>+:::::::::</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Questa linea permetterà a chiunque con un valido account nella mappa delle password del server NIS di loggarsi sul client. Ci sono molti modi per configurare il tuo client NIS cambiando questa linea. Leggi la <a href=#network-netgroups>sezione sui netgroups</a> di seguito per maggiori informazioni. Per letture più dettagliate vedere il libro della O’Reilly <code>Managing NFS and NIS</code>.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Dovresti tenere almeno un account locale (non importato via NIS) nel tuo file <span class=filename>/etc/master.passwd</span> e questo account dovrebbe essere anche un membro del gruppo <code>wheel</code>. Se c’è qualche problema con NIS, questo account può essere usato per loggarsi da remoto, diventare <code>root</code> e riparare le cose.</p></div></td></tr></tbody></table></div></li><li><p>Per impostare tutte le possibili linee dei gruppi dal server NIS, aggiungi questa linea al tuo file <span class=filename>/etc/group</span>:</p><div class="literalblock programlisting"><div class=content><pre>+:*::</pre></div></div></li></ol></div></div></div><div class=paragraph><p>Dopo aver completato questi passi, dovresti essere in grado di eseguire <code>ypcat passwd</code> e vedere la mappa delle password del NIS server.</p></div></div></div></div><div class=sect2><h3 id=_sicurezza_di_nis>27.4.5. Sicurezza di NIS<a class=anchor href=#_sicurezza_di_nis></a></h3><div class=paragraph><p>In generale, ogni utente remoto può eseguire una RPC a <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> ed ottenere i contenuti delle tue mappe NIS, ammesso che l’utente remoto conosca il tuo nome dominio. Per prevenire tali transazioni non autorizzate, <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> supporta una caratteristica chiamata "securenets" che può essere usata per restringere l’accesso ad un dato insieme di host. All’avvio <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> cercherà di caricare le informazioni delle securenets da un file chiamato <span class=filename>/var/yp/securenets</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Questo percorso varia a secondo del percorso specificato con l’opzione <code>-p</code>. Questo file contiene linee che consistono di una specificazione della rete e di una maschera di rete separate da spazi vuoti. Le linee che cominciano con "#" sono considerati commenti. Un esempio di file securenets può assomigliare al seguente:</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre># allow connections from local host -- mandatory
127.0.0.1     255.255.255.255
# allow connections from any host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# allow connections from any host
# between 10.0.0.0 to 10.0.15.255
# this includes the machines in the testlab
10.0.0.0      255.255.240.0</pre></div></div><div class=paragraph><p>Se <a href="https://man.freebsd.org/cgi/man.cgi?query=ypserv&amp;sektion=8&amp;format=html">ypserv(8)</a> riceve una richiesta da un indirizzo che coincide con una di queste regole, processerà la richiesta normalmente. Se l’indirizzo non coincide la richiesta sarà ignorata ed un messaggio di warning sarà loggato. Se il file <span class=filename>/var/yp/securenets</span> non esiste, <code>ypserv</code> permetterà connessioni da ogni host.</p></div><div class=paragraph><p>Il programma <code>ypserv</code> ha anche supporto per il pacchetto di Wietse Venema TCP Wrapper. Questo permette all’amministratore di usare i file di configurazione di TCP Wrapper per controlli sull’accesso al posto di <span class=filename>/var/yp/securenets</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Pur essendo entrambi questi meccanismi di accesso di controllo abbastanza sicuri, questi, come il test di porta privilegiata, sono vulnerabili agli attacchi "IP spoofing". Tutto il traffico relativo a NIS dovrebbe essere bloccato al firewall.</p></div><div class=paragraph><p>I server che usano <span class=filename>/var/yp/securenets</span> possono non riuscire a servire client NIS legittimi che abbiano implementazioni TCP/IP obsolete. Alcune di queste implementazioni impostano a zero tutti i bit degli host quando fanno broadcast e/o non riescono a osservare la maschera di sotto-rete quando calcolano l’indirizzo broadcast. Mentre alcuni di questi problemi possono essere corretti cambiando la configurazione del client, altri problemi possono causare il ritiro dei client in questione o l’abbandono di <span class=filename>/var/yp/securenets</span>.</p></div><div class=paragraph><p>Usando <span class=filename>/var/yp/securenets</span> su un server con una tale obsoleta implementazione del TCP/IP è sicuramente una cattiva idea e causerà alla perdita della funzionalità NIS per gran parte della tua rete.</p></div><div class=paragraph><p>L’uso del pacchetto TCP Wrapper aumenta la latenza del tuo server NIS. Il ritardo addizionale può essere lungo a sufficienza tanto da causare dei timeout in programmi client, specialmente su reti trafficate o con server NIS lenti. Se uno o più client soffre di questi sintomi, dovresti convertire il sistema dei client in questione a server NIS slave e forzarli a non fare il binding a loro stessi.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_impedire_ad_alcuni_utenti_di_loggarsi>27.4.6. Impedire ad Alcuni Utenti di Loggarsi<a class=anchor href=#_impedire_ad_alcuni_utenti_di_loggarsi></a></h3><div class=paragraph><p>Nel nostro laboratorio c’è una macchina <code>basie</code> che si suppone sia una workstation solo della facoltà . Non vogliamo togliere questa macchina dal dominio NIS, tuttavia il file <span class=filename>passwd</span> sul server NIS master contiene account che sono sia della facoltà sia degli studenti. Cosa possiamo fare?</p></div><div class=paragraph><p>C’è un modo di impedire a specifici utenti di loggarsi ad una macchina, anche se sono presenti nel database NIS. Per farlo, tutto quello che devi fare è aggiungere <code>-username</code> alla fine del file <span class=filename>/etc/master.passwd</span> sulla macchina client, dove <em>username</em> è lo username dell’utente di cui vuoi impedire l’accesso. E' meglio fare questo con <code>vipw</code> dato che <code>vipw</code> farà un controllo di correttezza dei tuoi cambiamenti a <span class=filename>/etc/master.passwd</span>, e ricostruirà automaticamente il database delle password quando hai finito di editarlo. Ad esempio, se vogliamo impedire l’accesso all’utente <code>bill</code> verso l’host <code>basie</code> faremmo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>basie# vipw
<span class=o>[</span>aggiungi <span class=nt>-bill</span> alla fine del file, poi esci]
vipw: rebuilding the database...
vipw: <span class=k>done

</span>basie# <span class=nb>cat</span> /etc/master.passwd

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:<span class=k>*</span>:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:<span class=k>*</span>:2:5::0:0:System &amp;:/:/sbin/nologin
bin:<span class=k>*</span>:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
<span class=nb>tty</span>:<span class=k>*</span>:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:<span class=k>*</span>:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:<span class=k>*</span>:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:<span class=k>*</span>:8:8::0:0:News Subsystem:/:/sbin/nologin
man:<span class=k>*</span>:9:9::0:0:Mister Man Pages:/usr/shared/man:/sbin/nologin
<span class=nb>bind</span>:<span class=k>*</span>:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:<span class=k>*</span>:66:66::0:0:UUCP
pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:<span class=k>*</span>:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:<span class=k>*</span>:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:<span class=k>*</span>:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
+:::::::::
<span class=nt>-bill</span>

basie#</code></pre></div></div></div><div class=sect2><h3 id=network-netgroups>27.4.7. Usare i Netgroups<a class=anchor href=#network-netgroups></a></h3><div class=paragraph><p>Il metodo mostrato nella sezione precedente funziona ragionevolmente bene se hai bisogno di regole speciali per un numero molto piccolo di utenti e/o macchine. Su reti più grandi, <em>certamente</em> ti dimenticherai di impedire l’accesso di certi utenti a macchine dal ruolo critico, oppure potresti perfino finire a modificare ogni macchina separatamente, in questo modo perdendo il beneficio centrale di NIS: l’amministrazione <em>centralizzata</em>.</p></div><div class=paragraph><p>La soluzione degli sviluppatori NIS a questo problema è chiamata <em>netgroups</em>. Il loro scopo e la loro semantica possono essere paragonate ai normali gruppi utenti usati dal file system UNIX®. L’unica differenza è la mancanza di un ID numerico e l’abilità di definire un netgroup che includa sia gruppi utenti che altri netgroup.</p></div><div class=paragraph><p>I netgroup furono sviluppati per gestire grandi reti complesse con centinaia di utenti e macchine. Da un lato questa è una Buona Cosa se sei obbligato a gestire una simile situazione. Dall’altro, questa complessità rende praticamente impossibile spiegare i netgroup con esempi relativamente semplici. L’esempio usato nel resto di questa sezione dimostra questo problema.</p></div><div class=paragraph><p>Assumiamo che la favorevole introduzione di NIS nei tuoi laboratori catturi l’interesse dei tuoi superiori. Il tuo prossimo compito è di estendere il tuo dominio NIS per coprire alcune altre macchine del campo. Le due tabelle contengono i nomi dei nuovi utenti e delle nuove macchine, con una breve descrizione.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">User Name(s)</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>alpha</code>, <code>beta</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Impiegato normale del dipartimento IT</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>charlie</code>, <code>delta</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Il nuovo apprendista del dipartimento IT</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>echo</code>, <code>foxtrott</code>, <code>golf</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Impiegato ordinario</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>able</code>, <code>baker</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gli interni correnti</p></td></tr></tbody></table><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Machine Name(s)</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>war</code>, <code>death</code>, <code>famine</code>, <code>pollution</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Il tuoi server più importanti. Solo gli impiegati IT hanno il permesso di loggarsi in queste macchine.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pride</code>, <code>greed</code>, <code>envy</code>, <code>wrath</code>, <code>lust</code>, <code>sloth</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Server meno importanti. Tutti i membri del dipartimento IT hanno il permesso di loggarsi a queste macchine.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>one</code>, <code>two</code>, <code>three</code>, <code>four</code>, …​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Workstation normali. Solo <em>veri</em> impiegati hanno permesso di accedere a queste macchine.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>trashcan</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Una macchina molto vecchia senza alcun dato critico. Anche gli interni hanno permesso di usare questa macchina.</p></td></tr></tbody></table><div class=paragraph><p>Se provi ad implementare queste restrizioni bloccando separatamente ogni utente, dovresti aggiungere una linea <code>-user</code> ad ogni <span class=filename>passwd</span> per ogni utente che non ha il permesso di loggarsi in quel sistema. Se ti dimentichi anche solo di una linea, potresti essere nei pasticci. Può essere ragionevole fare ciò correttamente durante l’installazione iniziale, comunque <em>certamente</em> ti dimenticherai alla fine di aggiungere le linee per i nuovi utenti durante le operazioni giornaliere. Dopo tutto, Murphy era un ottimista.</p></div><div class=paragraph><p>Gestire questa situazione con i netgroup offre molti vantaggi. Non c’è bisogno di gestire separatamente ogni utente; basta assegnare un utente ad uno o più netgroup e permettere o impedire il login a tutti i membri del netgroup. Se aggiungi una nuova macchina, dovrai solo definire restrizioni di login per i netgroup. Se un nuovo utente viene aggiunto, dovrai solo aggiungere l’utente ad uno o più netgroup. Questi cambiamenti sono indipendenti l’uno dall’altro: non più "per ogni combinazione di utenti e macchine fai …​"Se la tua installazione NIS è pianificata con attenzione, dovrai solo modificare esattamente un file centrale di configurazione per garantire o negare l’accesso alle macchine.</p></div><div class=paragraph><p>Il primo passo è l’inizializzazione della mappa NIS netgroup. <a href="https://man.freebsd.org/cgi/man.cgi?query=ypinit&amp;sektion=8&amp;format=html">ypinit(8)</a> di FreeBSD non crea questa mappa di default, ma la sua implementazione NIS la supporterà una volta che è stata creata. Per aggiungere una linea alla mappa, semplicemente usa il comando</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# vi /var/yp/netgroup</code></pre></div></div><div class=paragraph><p>e poi inizia ad aggiungere contenuti. Per i nostri esempi abbiamo bisogno di almeno quattro netgroup: impiegati IT, apprendisti IT, impiegati normali ed interni.</p></div><div class="literalblock programlisting"><div class=content><pre>IT_EMP  (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
        (,golf,test-domain)
INTERNS (,able,test-domain)     (,baker,test-domain)</pre></div></div><div class=paragraph><p><code>IT_EMP</code>, <code>IT_APP</code> etc. sono i nomi dei netgroup. Ogni gruppo fra parentesi tonde aggiunge uno o più account utente. I tre campi dentro il gruppo sono:</p></div><div class="olist arabic"><ol class=arabic><li><p>Il nome degli host dove le seguenti caratteristiche sono valide. Se non specifichi un nome host, la linea è valida per tutti gli host. Se specifichi un nome host, entrerai nel regno dell’oscurità , dell’orrore e della confusione assoluta.</p></li><li><p>Il nome dell’account che appartiene a questo netgroup.</p></li><li><p>Il dominio NIS per l’account. Puoi importare account da altri domini NIS nel tuo netgroup se sei uno di quei ragazzi sfortunati con più di un dominio NIS.</p></li></ol></div><div class=paragraph><p>Ognuno di questi campi può contenere wildcards. Leggi <a href="https://man.freebsd.org/cgi/man.cgi?query=netgroup&amp;sektion=5&amp;format=html">netgroup(5)</a> per dettagli.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Nomi netgroup più lunghi di 8 caratteri non dovrebbero essere usati, specialmente se hai macchine che eseguono altri sistemi operativi all’interno del tuo dominio NIS. I nomi sono case sensitive; usare le lettere maiuscole per il tuo netgroup è un modo semplice per distinguere fra utenti, macchine e nomi di netgroup.</p></div><div class=paragraph><p>Alcuni client NIS (non FreeBSD) non possono gestire netgroup con un numero troppo grande di linee. Ad esempio, alcune vecchie versioni di SunOS™ iniziano ad avere problemi se un netgroup contiene più di 15 <em>linee</em>. Puoi superare questo limite creando molti sotto-netgroup con 15 o meno utenti ed un vero netgroup che consiste dei sotto-netgroup:</p></div><div class="literalblock programlisting"><div class=content><pre>BIGGRP1  (,joe1,domain)  (,joe2,domain)
(,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre></div></div><div class=paragraph><p>Puoi ripetere questo processo se hai bisogno di più di 225 utenti all’interno di un singolo netgroup.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Attivare e distribuire la tua nuova mappa NIS è facile:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington# <span class=nb>cd</span> /var/yp
ellington# make</code></pre></div></div><div class=paragraph><p>Questo genererà le tre mappe NIS <span class=filename>netgroup</span>, <span class=filename>netgroup.byhost</span> e <span class=filename>netgroup.byuser</span>. Usa <a href="https://man.freebsd.org/cgi/man.cgi?query=ypcat&amp;sektion=1&amp;format=html">ypcat(1)</a> per controllare che le tue nuove mappe NIS siano disponibili:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>ellington% ypcat <span class=nt>-k</span>
netgroup
ellington% ypcat <span class=nt>-k</span> netgroup.byhost
ellington% ypcat <span class=nt>-k</span>
netgroup.byuser</code></pre></div></div><div class=paragraph><p>L’output del tuo primo comando dovrebbe assomigliare a <span class=filename>/var/yp/netgroup</span>. Il secondo comando non produrrà output se non hai specificato netgroup specifici agli host. Il terzo comando può essere usato per ottenere una lista dei netgroup di un utente.</p></div><div class=paragraph><p>L’installazione del client è abbastanza semplice. Per configurare il server <code>war</code>, devi solo eseguire <a href="https://man.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;format=html">vipw(8)</a> e sostituire la linea</p></div><div class="literalblock programlisting"><div class=content><pre>+:::::::::</pre></div></div><div class=paragraph><p>con</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_EMP:::::::::</pre></div></div><div class=paragraph><p>Ora, solo i dati per l’utente definito nel netgroup <code>IT_EMP</code> sono importati nel database delle password di <code>war</code> e solo questi utenti hanno permesso di accesso.</p></div><div class=paragraph><p>Sfortunatamente, questa limitazione si applica anche alla funzione della shell <code>~</code> ed a tutte le routine che convertono fra nomi utenti e user ID numerici. In altre parole,<code>cd ~user ` non funzionerà , `ls -l</code> mostrerà gli ID numerici invece dello username e <code>find . -user joe -print</code> darà l’errore <code>No such user</code>. Per riparare questo, dovrai importare tutte le linee dell’utente <em>senza permettere a loro di loggarsi sui tuoi server</em>.</p></div><div class=paragraph><p>Questo può essere ottenuto aggiungendo un’altra linea a <span class=filename>/etc/master.passwd</span>. Questo dovrebbe contenere:</p></div><div class=paragraph><p><code>+:::::::::/sbin/nologin</code>, dal significato "Importa tutte le entry ma imposta la shell di login a <span class=filename>/sbin/nologin</span> nelle linee importate". Puoi sostituire ogni campo nella linea <code>passwd</code> piazzando un valore di default nel tuo <span class=filename>/etc/master.passwd</span>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Accertati che la linea <code>:::::::::/sbin/nologin` sia piazzata dopo `@IT_EMP:::::::::</code>. Altrimenti tutti gli account utente importati da NIS avranno <span class=filename>/sbin/nologin</span> come loro shell di login.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Dopo questo cambiamento, dovrai solo cambiare una mappa NIS se un nuovo impiegato si unisce al dipartimento IT. Puoi usare un simile approccio per i server meno importanti sostituendo <code>+:::::::::</code> nella tua versione locale di <span class=filename>/etc/master.passwd</span> con qualcosa del tipo:</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_EMP:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Le linee corrispondenti per le workstation normali potrebbero essere:</p></div><div class="literalblock programlisting"><div class=content><pre>+@IT_EMP:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>E tutto sarebbe a posto fino a che non c’è un cambiamento di policy dopo poche settimane: il dipartimento IT inizia ad assumere interni. Gli interni IT hanno permesso di usare le normali workstation ed i server meno importanti; e gli apprendisti IT hanno permesso di loggarsi ai server principali. Aggiungi un nuovo netgroup <code>IT_INTERN</code>, aggiungi i nuovi interni IT a questo nuovo netgroup <code>IT_INTERN</code>, e inizia a cambiare la configurazione su ogni nuova macchina…​ Come il vecchio adagio dice:"Errori nella pianificazione centralizzata porta a caos globale".</p></div><div class=paragraph><p>L’abilità NIS di creare netgroup da altri netgroup può essere usata per prevenire situazioni come queste. Una possibilità è la creazione di netgroup basati sul ruolo. Per esempio, potresti creare un netgroup chiamato <code>BIGSRV</code> per definire le restrizioni di login per i server importanti, un altro netgroup chiamato <code>SMALLSRV</code> per i server meno importanti ed un terzo netgroup chiamato <code>USERBOX</code> per le workstation normali. Ognuna di questi netgroup contiene i netgroup che hanno permesso di accesso a queste macchine. Le nuove linee della tua mappa NIS dovrebbero assomigliare a questa:</p></div><div class="literalblock programlisting"><div class=content><pre>BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP  ITINTERN
USERBOX   IT_EMP  ITINTERN USERS</pre></div></div><div class=paragraph><p>Questo metodo di definire restrizioni di login funziona ragionevolmente bene se puoi definire gruppi di macchine con restrizioni identiche. Sfortunatamente questa è l’eccezione, non la regola. La maggior parte del tempo, avrai necessità di definire restrizioni di login macchina per macchina.</p></div><div class=paragraph><p>Definizioni di netgroup specifiche per ogni macchina sono l’altra possibilità per gestire il cambiamento di policy delineato sopra. In questo scenario il <span class=filename>/etc/master.passwd</span> di ogni macchina deve contenere due linee che iniziano con "+". La prima di queste aggiunge un netgroup con l’account che ha il permesso di loggarsi alla macchina, il secondo aggiunge tutti gli altri account con <span class=filename>/sbin/nologin</span> come shell. E' buona norma usare la versione "MAIUSCOLA" del nome macchina come nome del netgroup. In altre parole, le linee dovrebbero assomigliare a questa:</p></div><div class="literalblock programlisting"><div class=content><pre>+@BOXNAME:::::::::
+:::::::::/sbin/nologin</pre></div></div><div class=paragraph><p>Una volta che hai completato questo task per tutte le macchine, non dovrai mai più modificare la versione locale di <span class=filename>/etc/master.passwd</span>. Tutti gli ulteriori cambiamenti possono essere gestiti modificando la mappa NIS. Di seguito un esempio di una possibile mappa netgroup per questo scenario con altri vantaggi addizionali:</p></div><div class="literalblock programlisting"><div class=content><pre># Define groups of users first
IT_EMP    (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITINTERN  (,kilo,test-domain)     (,lima,test-domain)
D_INTERNS (,able,test-domain)     (,baker,test-domain)
#
# Now, define some groups based on roles
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP    ITINTERN
USERBOX   IT_EMP  ITINTERN  USERS
#
# And a groups for a special tasks
# Allow echo and golf to access our anti-virus-machine
SECURITY  IT_EMP  (,echo,test-domain)  (,golf,test-domain)
#
# machine-based netgroups
# Our main servers
WAR       BIGSRV
FAMINE    BIGSRV
# User india needs access to this server
POLLUTION  BIGSRV  (,india,test-domain)
#
# This one is really important and needs more access restrictions
DEATH     IT_EMP
#
# The anti-virus-machine mentioned above
ONE       SECURITY
#
# Restrict a machine to a single user
TWO       (,hotel,test-domain)
# [...more groups to follow]</pre></div></div><div class=paragraph><p>Se stai usando qualche tipo di database per gestire i tuoi account utente, dovresti essere in grado di creare la prima parte della mappa con i tuoi tool di report del database. In questo modo, i nuovi utenti avranno accesso automaticamente alle macchine.</p></div><div class=paragraph><p>Un ultima nota di avvertimento: può non essere sempre consigliabile usare netgroup basati sulle macchine. Se stai per mettere in produzione qualche dozzina o perfino qualche centinaia di macchine identiche per laboratori studente, dovresti usare netgroup basati sul ruolo invece che netgroup basati sulla macchina, per tenere la dimensione della mappa NIS al di sotto di un limite ragionevole.</p></div></div><div class=sect2><h3 id=_cose_importanti_da_ricordare>27.4.8. Cose Importanti da Ricordare<a class=anchor href=#_cose_importanti_da_ricordare></a></h3><div class=paragraph><p>Ci sono ancora un paio di cose che dovrai cambiare ora che operi in ambiente NIS.</p></div><div class=ulist><ul><li><p>Ogni volta che devi aggiungere un utente al laboratorio devi aggiungerlo <em>solo</em> al server master NIS e <em>devi ricordarti di ricostruire le mappe NIS</em>. Se ti dimentichi di farlo il nuovo utente non sarà in grado di loggarsi in alcuna macchina eccetto che sul server NIS master. Per esempio, se abbiamo bisogno di aggiungere un nuovo utente <code>jsmith</code> al laboratorio, faremmo:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw useradd jsmith</span>
<span class=c># cd /var/yp</span>
<span class=c># make test-domain</span></code></pre></div></div><div class=paragraph><p>Puoi anche eseguire <code>adduser jsmith</code> invece di <code>pw useradd jsmith</code>.</p></div></li><li><p><em>Tieni gli account amministrativi fuori dalle mappe NIS</em>. Normalmente non vuoi che gli account amministrativ e le password si propaghino a macchine che avranno utenti che non dovrebbero avere accesso a quegli account.</p></li><li><p><em>Tieni al sicuro il NIS master e slave, e minimizza il tempo in cui sono giù</em>. Se qualcuno hackera o semplicemente spegne queste macchine riesce a privare molte persone della possibilità di loggarsi al laboratorio.</p><div class=paragraph><p>Questa è la principale debolezza di ogni sistema centralizzato di amministrazione. Se non proteggi il tuo server NIS, avrai un mucchio di utenti arrabbiati!</p></div></li></ul></div></div><div class=sect2><h3 id=_compatibilità_con_nis_v1>27.4.9. Compatibilità con NIS v1<a class=anchor href=#_compatibilità_con_nis_v1></a></h3><div class=paragraph><p>ypserv di FreeBSD supporta fino ad un certo punto client NIS v1. L’implementazione di NIS di FreeBSD usa solo il protocollo NIS v2, comunque altre implementazioni includono supporto per il protocollo v1 per compatibilità all’indietro coi vecchi sistemi. Il demone ypbind fornito con questi sistemi proverà a stabilire un binding con un server NIS v1 anche se potrebbero non averne mai bisogno (e possono continuare a fare broadcast in ricerca di uno anche dopo che hanno ricevuto risposta da un server v2). Nota che mentre il supporto per i client normali viene garantito, questa versione di ypserv non gestisce richieste di trasferimento di mappe v1; di conseguenza, non può essere usato come master o slave in congiunzione con server NIS più vecchi che supportano solo il protocollo v1. Fortunatamente, probabilmente non ci sono server del genere in uso oggi.</p></div></div><div class=sect2><h3 id=network-nis-server-is-client>27.4.10. Server NIS che Sono Anche Client<a class=anchor href=#network-nis-server-is-client></a></h3><div class=paragraph><p>Bisogna prestare molta attenzione quando si esegue ypserv in un dominio multi-server dove le macchine server sono anche client NIS. E' generalmente una buona idea forzare i server ad effettuare il binding a sè stessi piuttosto che permettere loro di effettuare il broadcast delle richieste binding e potenzialmente possono fare il bind una all’altra. Possono risultare strani errori quando un server va giù e gli altri sono dipendenti da lui. Alla fine, tutti i client andranno in timeout e cercheranno di effettuare il bind ad altri server, ma il ritardo di questa operazione può essere considerevole e l’uscita di errore è ancora presente dato che i server possono fare il binding fra di loro di nuovo.</p></div><div class=paragraph><p>Puoi forzare un host a fare il binding ad un server in particolare usando <code>ypbind</code> con l’opzione <code>-S</code>. Se non vuoi fare questa azione a mano ogni volta che fai il reboot del tuo server NIS, puoi aggiungere queste linee al tuo <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>nis_client_enable=&#34;YES&#34;  # run client stuff as well
nis_client_flags=&#34;-S NIS
domain,server&#34;</pre></div></div><div class=paragraph><p>Consulta <a href="https://man.freebsd.org/cgi/man.cgi?query=ypbind&amp;sektion=8&amp;format=html">ypbind(8)</a> per ulteriori informazioni.</p></div></div><div class=sect2><h3 id=_formato_delle_password>27.4.11. Formato delle Password<a class=anchor href=#_formato_delle_password></a></h3><div class=paragraph><p>Uno dei problemi più comuni in cui la gente incappa quando tenta di implementare NIS è la compatibilità del formato delle password. Se il tuo server NIS usa password criptate con DES, supporterà solo client che usano anche loro DES. Ad esempio, se hai client NIS Solaris™ nella rete, dovrai quasi certamente usare password criptate con DES.</p></div><div class=paragraph><p>Per controllare quale formato il tuo server e client usano, dai un’occhiata a <span class=filename>/etc/login.conf</span>. Se l’host è configurato per usare password criptate DES, la classe <code>default</code> conterrà una linea simile a questa:</p></div><div class="literalblock programlisting"><div class=content><pre>default:\
:passwd_format=des:\
:copyright=/etc/COPYRIGHT:\
[Further entries elided]</pre></div></div><div class=paragraph><p>Altri valori possibili per l’opzione <code>passwd_format</code> includono <code>blf</code> e <code>md5</code> (per password criptate con Blowfish e con MD5, rispettivamente).</p></div><div class=paragraph><p>Se hai fatto modifiche a <span class=filename>/etc/login.conf</span>, dovrai anche ricostruire il database delle possibilità di login, il che si ottiene eseguendo il seguente comando come <code>root</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cap_mkdb /etc/login.conf</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Il formato delle password che sono già in <span class=filename>/etc/master.passwd</span> non sarà aggiornato finchè un utente cambia la sua password per la prima volta <em>dopo</em> che il database delle possibilità di login è ricostruito.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Dopodichè per assicurarti che le password siano criptate con il formato che hai scelto, dovresti anche controllare che <code>crypt_default</code> in <span class=filename>/etc/auth.conf</span> dia precedenza al formato delle password scelto. Per farlo, inserisci il formato che hai scelto per primo nella lista. Ad esempio, quando usi password criptate DES, la linea dovrebbe essere:</p></div><div class="literalblock programlisting"><div class=content><pre>crypt_default  =  des blf md5</pre></div></div><div class=paragraph><p>Seguendo i passi sopra citati su ognuno dei FreeBSD basati su NIS server e client, puoi star sicuro che tutti siano d’accordo su quale formato delle password sia usato all’interno della rete. Se hai problemi nell’identificazione su un client NIS, questo è un buon punto di partenza per cercare possibili problemi. Ricordati: se vuoi mettere in produzione un server NIS per una rete eterogenea, dovrai probabilmente usare DES su tutti i sistemi poichè questo è il minimo standard comune.</p></div></div></div></div><div class=sect1><h2 id=network-dhcp>27.5. Configurazione Automatica della Rete (DHCP)<a class=anchor href=#network-dhcp></a></h2><div class=sectionbody><div class=sect2><h3 id=_cosè_il_dhcp>27.5.1. Cos’è il DHCP?<a class=anchor href=#_cosè_il_dhcp></a></h3><div class=paragraph><p>DHCP, il Protocollo di Configurazione Host Dinamico, descrive i passi attraverso i quali un sistema si può connettere ad una rete ed ottenere l’informazione necessaria per comunicare attraverso quella rete. Le versioni di FreeBSD prima della 6.0 usano l’implementazione DHCP client (<a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a>) dell’ISC (Internet Software Consortium). Le ultime versioni usano il <code>dhclient</code> di OpenBSD preso da OpenBSD 3.7. Tutte le informazioni specifiche all’implementazione di <code>dhclient</code> in questa sede sono riferite all’uso dei client DHCP sia di ISC che di OpenBSD. Il server DHCP è quello incluso nella distribuzione ISC.</p></div></div><div class=sect2><h3 id=_cosa_copre_questa_sezione>27.5.2. Cosa Copre Questa Sezione<a class=anchor href=#_cosa_copre_questa_sezione></a></h3><div class=paragraph><p>Questa sezione descrive sia il lato client del sistema DHCP di ISC e di OpenBSD che il lato server del sistema DHCP ISC. Il programma client, <code>dhclient</code>, è già integrato con FreeBSD, e la parte server è disponibile nel port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp3-server/>net/isc-dhcp3-server</a>. Le pagine di manuale <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5&amp;format=html">dhcp-options(5)</a>, e <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5&amp;format=html">dhclient.conf(5)</a>, oltre ai riferimenti elencati oltre, sono risorse utili.</p></div></div><div class=sect2><h3 id=_come_funziona_2>27.5.3. Come Funziona<a class=anchor href=#_come_funziona_2></a></h3><div class=paragraph><p>Quando <code>dhclient</code>, il client DHCP, viene eseguito sulla macchina client, inizia a fare broadcasting di richieste per informazioni di configurazione. Di default queste richieste sono sulla porta UDP 68. Il server risponde sulla porta UDP 67, dando al client un indirizzo IP ed altre informazioni rilevanti di rete come la netmask, il router ed il DNS server. Tutte queste informazioni arrivano sotto forma di un "rilascio" DHCP e sono valide sono per un certo periodo di tempo (configurato dall’amministratore del server DHCP). In questo modo, gli indirizzi IP bloccati da client che non sono più connessi alla rete possono essere riutilizzati automaticamente.</p></div><div class=paragraph><p>I client DHCP possono ottenere molti tipi di informazione dal server. Una lista esauriente può essere trovata in <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5&amp;format=html">dhcp-options(5)</a>.</p></div></div><div class=sect2><h3 id=_lintegrazione_con_freebsd>27.5.4. L’Integrazione con FreeBSD<a class=anchor href=#_lintegrazione_con_freebsd></a></h3><div class=paragraph><p>FreeBSD integra completamente il client DHCP ISC o OpenBSD, <code>dhclient</code> (a seconda della versione di FreeBSD utilizzata). Viene fornito supporto al client DHCP sia con l’installazione sia con il sistema base, rendendo inutile il bisogno di una conoscenza dettagliata della configurazione di rete su ogni rete che abbia un server DHCP. <code>dhclient</code> è stato incluso in tutte le distribuzioni FreeBSD a partire dalla 3.2.</p></div><div class=paragraph><p>DHCP è supportato da sysinstall. Quando configuri una interfaccia di rete con sysinstall, la seconda domanda che ti pone è: " Vuoi provare a configurare l’interfaccia via DHCP?". Una risposta affermativa eseguirà <code>dhclient</code>, e, se ha successo, riempirà le informazioni di configurazione della rete in automatico.</p></div><div class=paragraph><p>Ci sono due cose che devi fare per far sì che il tuo sistema usi il DHCP all’avvio:</p></div><div class=ulist><ul><li><p>Accertati che il device <span class=filename>bpf</span> sia compilato nel tuo kernel. Per fare ciò, aggiungi <code>device bpf</code> al tuo file di configurazione del kernel, e ricompilalo. Per maggiori informazioni su come ricompilare i kernel, vedi <a href=../kernelconfig/#kernelconfig>Configurazione del Kernel di FreeBSD</a>.</p><div class=paragraph><p>Il device <span class=filename>bpf</span> è già parte del kernel <span class=filename>GENERIC</span> che è fornito con FreeBSD, così se non hai un kernel custom, non dovresti aver bisogno di crearne uno al fine di far funzionare il DHCP.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Quelli di voi che sono particolarmente attenti alla sicurezza, dovrebbero sapere che il device <span class=filename>bpf</span> è anche il device che permette agli sniffer di pacchetti di funzionare correttamente (anche se devono sempre essere eseguiti come <code>root</code>). <span class=filename>bpf</span><em>è</em> richiesto per l’uso del DHCP, ma se siete molto attenti alla sicurezza, non dovreste probabilmente aggiungere <span class=filename>bpf</span> al vostro kernel in previsione di un uso futuro del DHCP.</p></div></td></tr></tbody></table></div></li><li><p>Edita il tuo <span class=filename>/etc/rc.conf</span> per includere la seguente linea:</p><div class="literalblock programlisting"><div class=content><pre>ifconfig_fxp0=&#34;DHCP&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Accertati di sostituire <code>fxp0</code> con il nome dell’interfaccia che intendi configurare dinamicamente, come descritto in .</p></div></td></tr></tbody></table></div><div class=paragraph><p>Se stai usando una locazione diversa per <code>dhclient</code>, o se desideri passare flags addizionali a <code>dhclient</code> includi anche le linee seguenti (editandole come necessario):</p></div><div class="literalblock programlisting"><div class=content><pre>dhcp_program=&#34;/sbin/dhclient&#34;
dhcp_flags=&#34;&#34;</pre></div></div></li></ul></div><div class=paragraph><p>Il server DHCP, dhcpd, è incluso come parte del port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp3-server/>net/isc-dhcp3-server</a> nella collezione dei ports. Questo port contiene il server DHCP ISC e la documentazione.</p></div></div><div class=sect2><h3 id=_files>27.5.5. Files<a class=anchor href=#_files></a></h3><div class=ulist><ul><li><p><span class=filename>/etc/dhclient.conf</span></p><div class=paragraph><p><code>dhclient</code> richiede un file di configurazione, <span class=filename>/etc/dhclient.conf</span>. Tipicamente il file contiene solo commenti, essendo i default ragionevolmente corretti. Questo file di configurazione è descritto dalla pagina di manuale <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5&amp;format=html">dhclient.conf(5)</a>.</p></div></li><li><p><span class=filename>/sbin/dhclient</span></p><div class=paragraph><p><code>dhclient</code> è linkato staticamente e risiede in <span class=filename>/sbin</span>. Le pagine di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient&amp;sektion=8&amp;format=html">dhclient(8)</a> danno maggiori informazioni su <code>dhclient</code>.</p></div></li><li><p><span class=filename>/sbin/dhclient-script</span></p><div class=paragraph><p><code>dhclient-script</code> è lo script di configurazione del client DHCP specifico di FreeBSD. Viene descritto in <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8&amp;format=html">dhclient-script(8)</a> ma non dovrebbe aver bisogno di nessuna modifica utente per funzionare correttamente.</p></div></li><li><p><span class=filename>/var/db/dhclient.leases</span></p><div class=paragraph><p>Il client DHCP mantiene un database di validi rilasci in questo file, che viene scritto come un log. <a href="https://man.freebsd.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5&amp;format=html">dhclient.leases(5)</a> ne dàuna descrizione leggermente più estesa.</p></div></li></ul></div></div><div class=sect2><h3 id=_ulteriori_letture>27.5.6. Ulteriori Letture<a class=anchor href=#_ulteriori_letture></a></h3><div class=paragraph><p>Il protocollo DHCP è descritto in maniera estesa in <a href=http://www.freesoft.org/CIE/RFC/2131/>RFC 2131</a>. Informazioni aggiuntive sono presenti a questo URL: <a href=http://www.dhcp.org/>http://www.dhcp.org/</a>.</p></div></div><div class=sect2><h3 id=network-dhcp-server>27.5.7. Installare e Configurare un Server DHCP<a class=anchor href=#network-dhcp-server></a></h3><div class=sect3><h4 id=_cosa_copre_questa_sezione_2>27.5.7.1. Cosa Copre Questa Sezione<a class=anchor href=#_cosa_copre_questa_sezione_2></a></h4><div class=paragraph><p>Questa sezione fornisce informazioni su come configurare un sistema FreeBSD che funzioni come un server DHCP usando l’implementazione del server DHCP dell’ISC (Internet Software Consortium).</p></div><div class=paragraph><p>Il server non viene fornito come parte di FreeBSD, così dovrai installare il port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp3-server/>net/isc-dhcp3-server</a> per fornire questo servizio. Vedi <a href=../ports/#ports>Installazione delle Applicazioni. Port e Package</a> per più informazioni su come usare la Collezione dei Port.</p></div></div><div class=sect3><h4 id=_installazione_del_dhcp_server>27.5.7.2. Installazione del DHCP Server<a class=anchor href=#_installazione_del_dhcp_server></a></h4><div class=paragraph><p>Per configurare il tuo sistema FreeBSD come un server DHCP, assicurati che il device <a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a> sia compilato nel kernel. Per farlo, aggiungi <code>device bpf</code> al file di configurazione del kernel, e ricompilalo. Per maggiori informazioni su come compilare un kernel, vedi <a href=../kernelconfig/#kernelconfig>Configurazione del Kernel di FreeBSD</a>.</p></div><div class=paragraph><p>Il device <span class=filename>bpf</span> è già parte del kernel <span class=filename>GENERIC</span> che viene fornito con FreeBSD, così non hai bisogno di creare un kernel custom per far funzionare il DHCP.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Quelli di voi che sono particolarmente attenti alla sicurezza, dovrebbero notare che <span class=filename>bpf</span> è anche il device che permette agli sniffer di pacchetti di funzionare correttamente (anche se tali programmi hanno bisogno di accesso privilegiato). <span class=filename>bpf</span> _è _ richiesto per il funzionamento del DHCP, ma se siete molto attenti alla sicurezza, probabilmente non dovreste includere <span class=filename>bpf</span> nel vostro kernel semplicemente perchè vi aspettate di usare il DHCP in qualche momento.</p></div></td></tr></tbody></table></div><div class=paragraph><p>La prossima cosa che devi fare è editare il file <span class=filename>dhcpd.conf</span> che è stato installato dal port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp3-server/>net/isc-dhcp3-server</a>. Di default, questo sarà <span class=filename>/usr/local/etc/dhcpd.conf.sample</span> e dovresti copiare questo file in <span class=filename>/usr/local/etc/dhcpd.conf</span> prima di procedere con i cambiamenti.</p></div></div><div class=sect3><h4 id=_configurare_il_server_dhcp>27.5.7.3. Configurare il Server DHCP<a class=anchor href=#_configurare_il_server_dhcp></a></h4><div class=paragraph><p><span class=filename>dhcpd.conf</span> è composto di dichiarazioni riguardanti sottoreti ed host, e forse lo si spiega meglio con un esempio:</p></div><div class="literalblock programlisting"><div class=content><pre>option domain-name &#34;example.com&#34;;<i class=conum data-value=1></i><b>(1)</b>
option domain-name-servers 192.168.4.100;<i class=conum data-value=2></i><b>(2)</b>
option subnet-mask 255.255.255.0;<i class=conum data-value=3></i><b>(3)</b>

default-lease-time 3600;<i class=conum data-value=4></i><b>(4)</b>
max-lease-time 86400;<i class=conum data-value=5></i><b>(5)</b>
ddns-update-style none;<i class=conum data-value=6></i><b>(6)</b>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<i class=conum data-value=7></i><b>(7)</b>
  option routers 192.168.4.1;<i class=conum data-value=8></i><b>(8)</b>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<i class=conum data-value=9></i><b>(9)</b>
  fixed-address mailhost.example.com;<i class=conum data-value=10></i><b>(10)</b>
}</pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>Questa opzione specifica il dominio che verrà servito ai client come il dominio di default di ricerca. Si veda <a href="https://man.freebsd.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5&amp;format=html">resolv.conf(5)</a> per più informazioni.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>Questa opzione specifica una lista di server DNS separata da virgole, che i client dovrebbero usare.</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>La netmask che sarà fornita ai client.</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>Un client potrebbe richiedere una lunghezza di tempo specifica per la quale il rilascio sarà valido. Altrimenti il server assegnerà un tempo di rilascio con questa durata (in secondi).</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>Questa è la lunghezza massima di tempo per la quale un server effettuerà un rilascio. Se un client dovesse richiedere un rilascio più lungo, sarà effettuato un rilascio, anche se sarà valido solo per <code>max-lease-time</code> secondi.</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>Questa opzione specifica se il server DHCP dovrà cercare di modificare il DNS quando un rilascio è accettato o liberato. Nella implementazione ISC questa opzione è <em>richiesta</em>.</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>Questo identifica quale indirizzo IP dovrà essere usato nel pool riservato per l’allocazione ad i client. Gli indirizzi IP fra, ed inclusi, quelli dichiarati sono assegnabili agli utenti.</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>Dichiara il default gateway che sarà assegnato ad i client.</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>L’indirizzo hardware MAC di un host (cosicchè il server DHCP possa riconoscere un host quando fa una richiesta).</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>Specifica che all’host dovrebbe sempre essere fornito lo stesso indirizzo IP. Nota che usare un hostname è corretto in questo caso, dato che il DHCP server risolverà l’hostname stesso prima di restituire l’informazione sul rilascio.</td></tr></tbody></table></div><div class=paragraph><p>Una volta che hai finito di scrivere il tuo <span class=filename>dhcpd.conf</span>, puoi abilitare il server DHCP in <span class=filename>/etc/rc.conf</span>, aggiungendo:</p></div><div class="literalblock programlisting"><div class=content><pre>dhcpd_enable=&#34;YES&#34;
dhcpd_ifaces=&#34;dc0&#34;</pre></div></div><div class=paragraph><p>Sostituisci il nome dell’interfaccia <code>dc0</code> con l’interfaccia (o le interfacce, separate da spazi) su cui il tuo server DHCP dovrebbe stare in ascolto per le richieste DHCP dei client.</p></div><div class=paragraph><p>Quindi, puoi procedere ad avviare il server con il seguente comando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/etc/rc.d/isc-dhcpd.sh start</span></code></pre></div></div><div class=paragraph><p>Se hai bisogno di fare altri cambiamenti alla configurazione del server in futuro, è importante notare che l’invio di un segnale <code>SIGHUP</code> a dhcpd_non_ fa sì che il file di configurazione sia ricaricato, come avviene con la maggior parte dei demoni. Dovrai inviare un segnale <code>SIGTERM</code> per fermare il processo, e poi riavviarlo usando il comando sopracitato.</p></div></div><div class=sect3><h4 id=_files_2>27.5.7.4. Files<a class=anchor href=#_files_2></a></h4><div class=ulist><ul><li><p><span class=filename>/usr/local/sbin/dhcpd</span></p><div class=paragraph><p>dhcpd è linkato staticamente e risiede in <span class=filename>/usr/local/sbin</span>. La pagina di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd&amp;sektion=8&amp;format=html">dhcpd(8)</a> installata con il port dà più informazioni su dhcpd.</p></div></li><li><p><span class=filename>/usr/local/etc/dhcpd.conf</span></p><div class=paragraph><p>dhcpd richiede un file di configurazione, <span class=filename>/usr/local/etc/dhcpd.conf</span>, prima che possa iniziare a fornire il servizio ai client. Questo file deve contenere tutte le informazioni che devono essere fornite ai client che sono serviti, oltre alle informazioni riguardanti le operazioni del server. Questo file di configurazione è descritto dalla pagina di manuale <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5&amp;format=html">dhcpd.conf(5)</a> installata dal port.</p></div></li><li><p><span class=filename>/var/db/dhcpd.leases</span></p><div class=paragraph><p>Il server DHCP mantiene un database dei rilasci che ha effettuato in questo file, che viene scritto come un log. La pagina di manuale <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5&amp;format=html">dhcpd.leases(5)</a>, installata dal port ne dà una descrizione leggermente pi` lunga.</p></div></li><li><p><span class=filename>/usr/local/sbin/dhcrelay</span></p><div class=paragraph><p>dhcrelay è usata in ambienti avanzati dove un server DHCP reinvia le richieste da un client ad un altro server DHCP su una rete separata. Se hai bisogno di questa funzionalità, installa il port <a class=package href=https://cgit.freebsd.org/ports/tree/net/isc-dhcp3-relay/>net/isc-dhcp3-relay</a>. La pagina di manuale <a href="https://man.freebsd.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8&amp;format=html">dhcrelay(8)</a> fornita col port contiene più dettagli.</p></div></li></ul></div></div></div></div></div><div class=sect1><h2 id=network-dns>27.6. Domain Name System (DNS)<a class=anchor href=#network-dns></a></h2><div class=sectionbody><div class=sect2><h3 id=_uno_sguardo_dinsieme>27.6.1. Uno sguardo d’insieme<a class=anchor href=#_uno_sguardo_dinsieme></a></h3><div class=paragraph><p>FreeBSD utilizza, di default, una versione di BIND (Berkeley Internet Name Domain), che è la più completa implementazione del protocollo DNS. DNS è il protocollo attraverso il quale nomi sono mappati ad indirizzi IP, e viceversa. Per esempio, una query per <code>www.FreeBSD.org ` riceverà una replica con l’indirizzo IP del web server del The FreeBSD Project, mentre una query per `ftp.FreeBSD.org</code> ritornerà l’indirizzo IP della corrispondente macchina FTP. Allo stesso modo, può avvenire l’opposto. Una query per un indirizzo IP può risolvere il suo nome host. Non è necessario avere in esecuzione un name server per fare DNS lookups su un sistema.</p></div><div class=paragraph><p>FreeBSD al momento viene distribuito con software DNSBIND9 di default. La nostra installazione fornisce caratteristiche di sicurezza migliorate, un nuovo layout del file system e configurazione <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a> automatica.</p></div><div class=paragraph><p>DNS è coordinato su Internet attraverso un sistema alquanto complesso di name server autoritativi, ed altri name server di più piccola scala che ospitano e gestiscono cache di informazioni individuali sui domini.</p></div><div class=paragraph><p>Al momento corrente, BIND è mantenuto dall’Internet Software Consortium <a href=http://www.isc.org/>http://www.isc.org/</a>.</p></div></div><div class=sect2><h3 id=_terminologia>27.6.2. Terminologia<a class=anchor href=#_terminologia></a></h3><div class=paragraph><p>Per comprendere questo documento, alcuni termini relativi al DNS devono essere capiti.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Termine</th><th class="tableblock halign-left valign-top">Definizione</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Forward DNS</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>La mappa da hostname ad indirizzi IP.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Origine</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Si riferisce al dominio coperto in un particolare file di zona.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>named, BIND, name server</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Nomi comuni per il pacchetto name server BIND all’interno di FreeBSD.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Risolutore</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Un processo di sistema attraverso il quale una macchina fa query su un name server per informazioni di zona.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>DNS inverso</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>L’opposto del forward DNS; mappare indirizzi IP su nomi host.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Zona root</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>L’inizio della gerarchia della zona Internet. Tutte le zone cadono sotto la zona root, analogamente a come tutti i file nel file system cadono sotto la directory root.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Zona</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Un dominio individuale, sottodominio, o porzione del DNS amministrato dalla stessa autorità</p></td></tr></tbody></table><div class=paragraph><p>Esempi di zone:</p></div><div class=ulist><ul><li><p><code>.</code> è la zona root</p></li><li><p><code>org.</code> è una zona Top Level Domain (TLD) sotto la zona root</p></li><li><p><code>example.org.</code> è una zona sotto la zona `org.`TLD</p></li><li><p><code>1.168.192.in-addr.arpa</code> è una zona che referenzia tutti gli indirizzi IP che cadono sotto lo spazio IP`192.168.1.*`.</p></li></ul></div><div class=paragraph><p>Come si può vedere, la parte più specifica di un nome host appare a sinistra. Per esempio <code>example.org.</code> è più specifico di <code>org.</code>, come <code>org.</code> è più specifico della zona root. La disposizione di ogni parte di un nome host è analoga ad un file system: la directory <span class=filename>/dev</span> cade all’interno della root, e così via.</p></div></div><div class=sect2><h3 id=_ragioni_per_avere_in_esecuzione_un_name_server>27.6.3. Ragioni per Avere in Esecuzione un Name Server<a class=anchor href=#_ragioni_per_avere_in_esecuzione_un_name_server></a></h3><div class=paragraph><p>Attualmente vengono usati due tipi di name server: un name server autoritativo, ed un name server cache.</p></div><div class=paragraph><p>Un name server autoritativo è necessario quando:</p></div><div class=ulist><ul><li><p>uno vuole servire informazioni DNS a tutto il mondo, rispondendo in maniera autoritativa alle query.</p></li><li><p>un dominio, tipo <code>example.org</code>, è registrato e gli indirizzi IP devono essere assegnati ad hostname sotto questo.</p></li><li><p>un blocco di indirizzi IP richiede entry di DNS inverso (da IP ad hostname).</p></li><li><p>un name server di backup, chiamato uno slave, deve rispondere alle query.</p></li></ul></div><div class=paragraph><p>Un name server cache è necessario quando:</p></div><div class=ulist><ul><li><p>un server locale DNS può tenere in cache e rispondere più velocemente rispetto ad effettuare query ad un name server all’esterno.</p></li><li><p>una riduzione nel traffico complessivo di rete è desiderato (è stato calcolato che il traffico DNS conta più del 5% sul traffico totale di Internet).</p></li></ul></div><div class=paragraph><p>Quando uno fa una query per risolvere <code>www.FreeBSD.org</code>, il risolutore di solito fa una query al name server dell’ISP a cui si è connessi, ed ottiene una risposta. Con un server DNS locale, che fa cache, la query deve essere effettuata una volta sola dal server DNS che fa cache. Ogni query aggiuntiva non dovrà cercare all’esterno della rete locale, dato che l’informazione è tenuta in cache localmente.</p></div></div><div class=sect2><h3 id=_come_funziona_3>27.6.4. Come Funziona<a class=anchor href=#_come_funziona_3></a></h3><div class=paragraph><p>In FreeBSD, il demone BIND è chiamato named per ovvie ragioni.</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File</th><th class="tableblock halign-left valign-top">Descrizione</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Il demone BIND.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><a href="https://man.freebsd.org/cgi/man.cgi?query=rndc&amp;sektion=8&amp;format=html">rndc(8)</a></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Programma di controllo del name server.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory dove risiedono le informazioni di zona di BIND.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/etc/namedb/named.conf</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>File di configurazione del demone.</p></td></tr></tbody></table><div class=paragraph><p>A seconda di come certe zone sono configurate sul server, i file relativi a quelle zone possono essere trovate nelle sottodirectory <span class=filename>master</span>, <span class=filename>slave</span>, or <span class=filename>dynamic</span> della directory <span class=filename>/etc/namedb</span>. Questi file contengono le informazioni DNS che saranno distribuite dal name server in risposta alle query.</p></div></div><div class=sect2><h3 id=_avviare_bind>27.6.5. Avviare BIND<a class=anchor href=#_avviare_bind></a></h3><div class=paragraph><p>Dato che BIND è installato di default, configurarlo è relativamente semplice.</p></div><div class=paragraph><p>La configurazione di default di named è quella di un name server basilare, eseguito in ambiente <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a>. Per avviare il server una volta con questa configurazione, usa il seguente comando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /etc/rc.d/named forcestart</span></code></pre></div></div><div class=paragraph><p>Per assicurarsi che il demone named sia avviato alla partenza, metti la seguente riga in <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>named_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Ci sono ovviamente molte opzioni di configurazione per <span class=filename>/etc/namedb/named.conf</span> che sono al di là dello scopo di questo documento. Comunque, se siete interessati nelle opzioni di avvio per named su FreeBSD, dai un’occhiata ai flags <code>named_</code> in <span class=filename>/etc/defaults/rc.conf</span> e consulta la pagina di manuale <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>. Anche la sezione <a href=../config/#configtuning-initial>Configurazione Iniziale</a> è una buona base di partenza.</p></div></div><div class=sect2><h3 id=_file_di_configurazione>27.6.6. File di Configurazione<a class=anchor href=#_file_di_configurazione></a></h3><div class=paragraph><p>I file di configurazione per named al corrente risiedono nella directory <span class=filename>/etc/named</span> e necessiteranno di modifiche prima dell’uso, a meno che non si voglia un semplice resolver. Qui è dove la maggior pare della configurazione viene effettuata.</p></div><div class=sect3><h4 id=_usando_make_localhost>27.6.6.1. Usando <code>make-localhost</code><a class=anchor href=#_usando_make_localhost></a></h4><div class=paragraph><p>Per configurare una zona master per il localhost visita la directory <span class=filename>/etc/namedb</span> ed esegui il seguente comando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sh make-localhost</span></code></pre></div></div><div class=paragraph><p>Se tutto è andato bene, un nuovo file dovrebbe esistere nella sottodirectory <span class=filename>master</span>. I nomi dei file dovrebbero essere <span class=filename>localhost.rev</span> per il local domain name e <span class=filename>localhost-v6.rev</span> per le configurazioni IPv6. Come il file di configurazione di default, l’informazione richiesta sarà presente nel file <span class=filename>named.conf</span>.</p></div></div><div class=sect3><h4 id=_etcnamedbnamed_conf>27.6.6.2. <span class=filename>/etc/namedb/named.conf</span><a class=anchor href=#_etcnamedbnamed_conf></a></h4><div class="literalblock programlisting"><div class=content><pre>// $FreeBSD$
//
// Refer to the named.conf(5) and named(8) man pages, and the documentation
// in /usr/shared/doc/bind9 for more details.
//
// If you are going to set up an authoritative server, make sure you
// understand the hairy details of how DNS works.  Even with
// simple mistakes, you can break connectivity for affected parties,
// or cause huge amounts of useless Internet traffic.

options {
  directory &#34;/etc/namedb&#34;;
  pid-file  &#34;/var/run/named/pid&#34;;
  dump-file &#34;/var/dump/named_dump.db&#34;;
  statistics-file &#34;/var/stats/named.stats&#34;;

// If named is being used only as a local resolver, this is a safe default.
// For named to be accessible to the network, comment this option, specify
// the proper IP address, or delete this option.
  listen-on { 127.0.0.1; };

// If you have IPv6 enabled on this system, uncomment this option for
// use as a local resolver.  To give access to the network, specify
// an IPv6 address, or the keyword &#34;any&#34;.
//  listen-on-v6  { ::1; };

// In addition to the &#34;forwarders&#34; clause, you can force your name
// server to never initiate queries of its own, but always ask its
// forwarders only, by enabling the following line:
//
//  forward only;

// If you&#39;ve got a DNS server around at your upstream provider, enter
// its IP address here, and enable the line below.  This will make you
// benefit from its cache, thus reduce overall DNS traffic in the Internet.
/*
  forwarders {
    127.0.0.1;
  };
*/</pre></div></div><div class=paragraph><p>Proprio come dicono i commenti, per beneficiare di una cache di un server superiore, può essere abilitato <code>forwarders</code>. Sotto circostanze normali, un name server farà query ricorsive attraverso Internet cercando certi name server fino a chè non trova la risposta che sta cercando. Averlo abilitato farà sì che sarà fatta prima una query verso il name server superiore (o il name server fornito), avvantaggiandosi della sua cache. Se il name server superiore è un name server molto trafficato e veloce, può valere la pena di abilitarlo.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p><code>127.0.0.1</code> <em>non</em> funzionerà qui. Cambia questo indirizzo IP in un name server superiore.</p></div></td></tr></tbody></table></div><div class="literalblock programlisting"><div class=content><pre>  /*
   * If there is a firewall between you and nameservers you want
   * to talk to, you might need to uncomment the query-source
   * directive below.  Previous versions of BIND always asked
   * questions using port 53, but BIND versions 8 and later
   * use a pseudo-random unprivileged UDP port by default.
   */
   // query-source address * port 53;
};

// If you enable a local name server, don&#39;t forget to enter 127.0.0.1
// first in your /etc/resolv.conf so this server will be queried.
// Also, make sure to enable it in /etc/rc.conf.

zone &#34;.&#34; {
  type hint;
  file &#34;named.root&#34;;
};

zone &#34;0.0.127.IN-ADDR.ARPA&#34; {
  type master;
  file &#34;master/localhost.rev&#34;;
};

// RFC 3152
zone &#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA&#34; {
  type master;
  file &#34;master/localhost-v6.rev&#34;;
};

// NB: Do not use the IP addresses below, they are faked, and only
// serve demonstration/documentation purposes!
//
// Example slave zone config entries.  It can be convenient to become
// a slave at least for the zone your own domain is in.  Ask
// your network administrator for the IP address of the responsible
// primary.
//
// Never forget to include the reverse lookup (IN-ADDR.ARPA) zone!
// (This is named after the first bytes of the IP address, in reverse
// order, with &#34;.IN-ADDR.ARPA&#34; appended.)
//
// Before starting to set up a primary zone, make sure you fully
// understand how DNS and BIND works.  There are sometimes
// non-obvious pitfalls.  Setting up a slave zone is simpler.
//
// NB: Don&#39;t blindly enable the examples below. :-)  Use actual names
// and addresses instead.

/* An example master zone
zone &#34;example.net&#34; {
  type master;
  file &#34;master/example.net&#34;;
};
*/

/* An example dynamic zone
key &#34;exampleorgkey&#34; {
  algorithm hmac-md5;
  secret &#34;sf87HJqjkqh8ac87a02lla==&#34;;
};

zone &#34;example.org&#34; {
  type master;
  allow-update {
    key &#34;exampleorgkey&#34;;
  };
  file &#34;dynamic/example.org&#34;;
};
*/

/* Examples of forward and reverse slave zones
zone &#34;example.com&#34; {
  type slave;
  file &#34;slave/example.com&#34;;
  masters {
    192.168.1.1;
  };
};
zone &#34;1.168.192.in-addr.arpa&#34; {
  type slave;
  file &#34;slave/1.168.192.in-addr.arpa&#34;;
  masters {
    192.168.1.1;
  };
};
*/</pre></div></div><div class=paragraph><p>In <span class=filename>named.conf</span>, ci sono esempi di linee slave per zone di forward ed inverse.</p></div><div class=paragraph><p>Per ogni nuova zona servita, una nuova linea di zona deve essere aggiunta a <span class=filename>named.conf</span>.</p></div><div class=paragraph><p>Per esempio, la più semplice entry per <code>example.org</code> può assomigliare a:</p></div><div class="literalblock programlisting"><div class=content><pre>zone &#34;example.org&#34; {
   type master;
   file &#34;master/example.org&#34;;
};</pre></div></div><div class=paragraph><p>La zona è una master, come indicato dall’entry <code>type</code>, e conserva le informazioni di zona su <span class=filename>/etc/namedb/master/example.org</span> indicata dalla entry <code>file</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>zone &#34;example.org&#34; {
   type slave;
   file &#34;slave/example.org&#34;;
};</pre></div></div><div class=paragraph><p>Nel caso slave, l’informazione di zona è trasferita dal name server master per quella zona particolare, e salvata nel file specificato. Se e quando il master muore o è irraggiungibile, il name server slave avrà le informazioni di zona trasferite e sarà in grado di servirlo.</p></div></div><div class=sect3><h4 id=_file_di_zona>27.6.6.3. File di Zona<a class=anchor href=#_file_di_zona></a></h4><div class=paragraph><p>Un esempio di file di zona master per <code>example.org</code> (che esiste all’interno di <span class=filename>/etc/namedb/master/example.org</span>) è la seguente:</p></div><div class="literalblock programlisting"><div class=content><pre>$TTL 3600        ; 1 hour
example.org.    IN      SOA      ns1.example.org. admin.example.org. (
                                2006051501      ; Serial
                                10800           ; Refresh
                                3600            ; Retry
                                604800          ; Expire
                                86400           ; Minimum TTL
                        )

; DNS Servers
                IN      NS      ns1.example.org.
                IN      NS      ns2.example.org.

; MX Records
                IN      MX 10   mx.example.org.
                IN      MX 20   mail.example.org.

                IN      A       192.168.1.1

; Machine Names
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
mail            IN      A       192.168.1.5

; Aliases
www             IN      CNAME   @</pre></div></div><div class=paragraph><p>Nota che ogni hostname che finisce in un "." è un nome esatto, mentre ogni entità senza un "." è referenziato all’origine. Per esempio <code>www</code> è trasformato in <code>www.origin</code>. Nel nostro file di zone fittizio, la nostra origine è <code>example.org</code>, così <code>www</code> si trasformerebbe in <code>www.example.org</code>.</p></div><div class=paragraph><p>Il formato di un file di zona è il seguente:</p></div><div class="literalblock programlisting"><div class=content><pre>recordname      IN recordtype
value</pre></div></div><div class=paragraph><p>I record DNS usati più di frequente:</p></div><div class=dlist><dl><dt class=hdlist1>SOA</dt><dd><p>inizio di una zona di autorità</p></dd><dt class=hdlist1>NS</dt><dd><p>un name server autoritativo</p></dd><dt class=hdlist1>A</dt><dd><p>un indirizzo host</p></dd><dt class=hdlist1>CNAME</dt><dd><p>il nome canonico per un alias</p></dd><dt class=hdlist1>MX</dt><dd><p>mail exchanger</p></dd><dt class=hdlist1>PTR</dt><dd><p>un puntatore a nome di dominio (usato nel DNS inverso)</p></dd></dl></div><div class="literalblock programlisting"><div class=content><pre>example.org. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serial
                        10800           ; Refresh after 3 hours
                        3600            ; Retry after 1 hour
                        604800          ; Expire after 1 week
                        86400 )         ; Minimum TTL of 1
day</pre></div></div><div class=dlist><dl><dt class=hdlist1><code>example.org.</code></dt><dd><p>il nome di dominio, inoltre è l’origine per questo file di zona.</p></dd><dt class=hdlist1><code>ns1.example.org.</code></dt><dd><p>il name server primario/autoritativo per questa zona.</p></dd><dt class=hdlist1><code>admin.example.org.</code></dt><dd><p>la persona responsabile per questa zona, un indirizzo email con "@" sostituito. (<a href=mailto:admin@example.org>admin@example.org</a> diventa <code>admin.example.org</code>)</p></dd><dt class=hdlist1><code>2006051501</code></dt><dd><p>il numero di serie del file. Questo deve essere aumentato ogni volta che il file di zona è modificato. Al giorno d’oggi molti amministratori preferiscono un formato <code>yyyymmddrr</code> per il numero di serie. <code>2006051501</code> significherebbe modificato l’ultima volta il 05/15/2006, l’ultimo <code>01</code> essendo la prima volta che il file di zona è stato modificato in questo giorno. Il numero di serie è importante dato che avverte name server slave per una zona quando questa ` modificata.</p></dd></dl></div><div class="literalblock programlisting"><div class=content><pre>       IN NS           ns1.example.org.</pre></div></div><div class=paragraph><p>Questa è una linea NS. Ogni name server che replicherà in maniera autoritativa la zona deve avere una di queste linee. Il <code>@</code> come visto potrebbe essere stato ` example.org.` Il <code>@</code> si traduce nell’origine.</p></div><div class="literalblock programlisting"><div class=content><pre>localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
mail            IN      A       192.168.1.5</pre></div></div><div class=paragraph><p>Il record A indica un nome macchina. Come visto sopra, <code>ns1.example.org</code> risolverebbe in <code>192.168.1.2</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>                IN      A       192.168.1.1</pre></div></div><div class=paragraph><p>Questa linea assegna l’indirizzo IP <code>192.168.1.1</code> alla corrente origine, in questo caso <code>example.org</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>www             IN CNAME        @</pre></div></div><div class=paragraph><p>Il record nome canonico è usato per dare alias ad una macchina. Nell’esempio, <code>www</code> è tramutato in alias nella macchina "master" che corrisponde al domain name <code>example.org ` (`192.168.1.1</code>). CNAME possono essere usati per fornire alias ad hostname o distribuire in round robin un hostname fra molte macchine.</p></div><div class="literalblock programlisting"><div class=content><pre>               IN MX   10      mail.example.org.</pre></div></div><div class=paragraph><p>Il record MX ` usato per specificare quali mail server sono responsabili per gestire mail entranti per la zona. `mail.example.org ` è l’hostname del mail server, e 10 è la priorità di quel mail server.</p></div><div class=paragraph><p>Uno può avere molti mail server, con priorità di 10, 20 e così via. Un mail server che cerca di consegnare una mail a <code>example.org</code> proverà prima l’MX con la più alta priorità (il record con il numero di priorita' minimo) poi il secondo, etc., fino a chè la mail non sia consegnata correttamente.</p></div><div class=paragraph><p>Per file di zona in-addr.arpa (DNS inverso), lo stesso formato è usato, eccetto con linee PTR al posto di A o CNAME.</p></div><div class="literalblock programlisting"><div class=content><pre>$TTL 3600
1.168.192.in-addr.arpa. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serial
                        10800           ; Refresh
                        3600            ; Retry
                        604800          ; Expire
                        3600 )          ; Minimum

        IN      NS      ns1.example.org.
        IN      NS      ns2.example.org.

1       IN      PTR     example.org.
2       IN      PTR     ns1.example.org.
3       IN      PTR     ns2.example.org.
4       IN      PTR     mx.example.org.
5       IN      PTR     mail.example.org.</pre></div></div><div class=paragraph><p>Questo file da la corretta mappa da indirizzi IP ad hostname per il nostro dominio fittizio.</p></div></div></div><div class=sect2><h3 id=_caching_name_server>27.6.7. Caching Name Server<a class=anchor href=#_caching_name_server></a></h3><div class=paragraph><p>Un name server caching è un name server che non è autoritativo per nessuna zona. Fa semplicemente query, e ne memorizza le risposte per uso successivo. Per impostarne uno, configura il name server come al solito, omettendo ogni inclusione di zona.</p></div></div><div class=sect2><h3 id=_sicurezza>27.6.8. Sicurezza<a class=anchor href=#_sicurezza></a></h3><div class=paragraph><p>Anche se BIND è la più comune implementazione del DNS, c’è sempre la questione della sicurezza. Talvolta vengono trovati possibili e sfruttabili buchi di sicurezza.</p></div><div class=paragraph><p>Mentre FreeBSD tiene named automaticamente in un ambiente <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=8&amp;format=html">chroot(8)</a>, ci sono molti altri meccanismi di sicurezza che potrebbero essere sfruttati per attacchi al servizio DNS.</p></div><div class=paragraph><p>È una buona idea leggere gli avvisi sulla sicurezza di <a href=http://www.cert.org/>CERT</a> e sottoscrivere le <a href=https://lists.FreeBSD.org/subscription/freebsd-security-notifications>mailing list sugli avvisi di sicurezza su FreeBSD</a> per stare aggiornato con le questioni correnti di sicurezza di Internet e FreeBSD.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Se sorge un problema, tenere i sorgenti aggiornati e fare una compilazione al volo di named non farebbe male.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_ulteriori_letture_2>27.6.9. Ulteriori letture<a class=anchor href=#_ulteriori_letture_2></a></h3><div class=paragraph><p>Pagine di manuale di BIND/named: <a href="https://man.freebsd.org/cgi/man.cgi?query=rndc&amp;sektion=8&amp;format=html">rndc(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> <a href="https://man.freebsd.org/cgi/man.cgi?query=named.conf&amp;sektion=8&amp;format=html">named.conf(8)</a></p></div><div class=ulist><ul><li><p><a href=http://www.isc.org/products/BIND/>Official ISC BIND Page</a></p></li><li><p><a href=http://www.isc.org/sw/guild/bf/>Official ISC BIND Forum</a></p></li><li><p><a href="http://www.nominum.com/getOpenSourceResource.php?id=6">BIND FAQ</a></p></li><li><p><a href=http://www.oreilly.com/catalog/dns4/>O’Reilly DNS and BIND 4th Edition</a></p></li><li><p><a href=ftp://ftp.isi.edu/in-notes/rfc1034.txt>RFC1034 - Domain Names - Concepts and Facilities</a></p></li><li><p><a href=ftp://ftp.isi.edu/in-notes/rfc1035.txt>RFC1035 - Domain Names - Implementation and Specification</a></p></li></ul></div></div></div></div><div class=sect1><h2 id=network-apache>27.7. Apache HTTP Server<a class=anchor href=#network-apache></a></h2><div class=sectionbody><div class=sect2><h3 id=_uno_sguardo_dinsieme_2>27.7.1. Uno sguardo d’insieme<a class=anchor href=#_uno_sguardo_dinsieme_2></a></h3><div class=paragraph><p>FreeBSD è usato per far girare alcuni dei siti web più trafficati al mondo. La maggioranza dei web server su Internet usano attualmene Apache HTTP Server. Il pacchetto software di Apache dovrebbe essere incluso nel tuo media di installazione di FreeBSD. Se non hai installato Apache quando hai installato FreeBSD per la prima volta, lo puoi installare dal port <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13/>www/apache13</a> o <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a>.</p></div><div class=paragraph><p>Una volta che Apache è stato installato con successo, deve essere configurato.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Questa sezione copre la versione 1.3.X di Apache HTTP Server dato che è la versione più usata per FreeBSD. Apache 2.X introduce molte nuove tecnologie ma queste non saranno discusse in questa sede. Per maggiori informazioni su Apache 2.X, per favore consulta <a href=httpd://httpd.apache.org/>httpd://httpd.apache.org/</a>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_configurazione>27.7.2. Configurazione<a class=anchor href=#_configurazione></a></h3><div class=paragraph><p>Il principale file di configurazione di Apache HTTP Server è installato in <span class=filename>/usr/local/etc/apache/httpd.conf</span> su FreeBSD. Questo file è un tipico file di testo di configurazione di UNIX® con linee di commento che cominciano col carattere <code>#</code>. Una descrizione comprensiva di tutte le possibili opzioni di configurazione è al di fuori dello scopo di questo libro, così solo le direttive usate più di frequente saranno descritte di seguito.</p></div><div class=dlist><dl><dt class=hdlist1><code>ServerRoot "/usr/local"</code></dt><dd><p>Questo specifica la gerachia di directory di default per l’installazione di Apache. I binari sono conservati nelle sottodirectory <span class=filename>bin</span> e <span class=filename>sbin</span> sotto la server root, ed i file di configurazione sono conservati sotto <span class=filename>etc/apache</span>.</p></dd><dt class=hdlist1><code>ServerAdmin you@your.address</code></dt><dd><p>L’indirizzo email al quale i problemi riguardanti il server dovrebbero essere inviati. Questo indirizzo appare su alcune pagine generate dal server, come alcuni documenti di errore.</p></dd><dt class=hdlist1><code>ServerName www.example.com</code></dt><dd><p><code>ServerName</code> ti permette di impostare un nome host che viene inviato ai client per il tuo server, se questo è differente da quello per il quale l’host è configurato (ad esempio usi `www ` invece del vero nome host).</p></dd><dt class=hdlist1><code>DocumentRoot "/usr/local/www/data"</code></dt><dd><p><code>DocumentRoot</code>: La directory dalla quale servirai documenti. Di default tutte le richieste sono girate a questa directory, ma link simbolici ed alias possono essere usati per puntare ad altre locazioni.</p></dd></dl></div><div class=paragraph><p>È sempre una buona idea fare copie di backup del tuo file di configurazione di Apache prima di modificarlo. Una volta che sei soddisfatto dalla tua configurazione iniziale sei pronto per iniziare ad eseguire Apache.</p></div></div><div class=sect2><h3 id=_eseguire_apache>27.7.3. Eseguire Apache<a class=anchor href=#_eseguire_apache></a></h3><div class=paragraph><p>Apache non viene eseguito dal super server inetd a differenza di molti altri server di rete. È configurato per girare standalone per migliori performance per gestire le richieste HTTP in entrata dai client web browser. Un wrapper shell script è incluso per rendere il più semplice possibile lo start, lo stop ed il restart del server. Per avviare Apache per la prima volta, esegui:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl start</span></code></pre></div></div><div class=paragraph><p>Puoi fermare il server in ogni istante digitando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl stop</span></code></pre></div></div><div class=paragraph><p>Dopo aver fatto modifiche al file di configurazione per una qualsiasi ragione, avrai bisogno di riavviare il server:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl restart</span></code></pre></div></div><div class=paragraph><p>Per riavviare Apache senza mandare in abort le connessioni correnti, esegui.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/sbin/apachectl graceful</span></code></pre></div></div><div class=paragraph><p>Informazioni addizionali sono disponibili sulla pagina di manuale di <a href="https://man.freebsd.org/cgi/man.cgi?query=apachectl&amp;sektion=8&amp;format=html">apachectl(8)</a>.</p></div><div class=paragraph><p>Per eseguire Apache all’avvio del sistema, aggiungi la seguente linea ad <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>apache_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>o per Apache 2.2:</p></div><div class="literalblock programlisting"><div class=content><pre>apache22_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Se volessi fornire opzioni addizionali di linea di comando al programma Apache`httpd` avviato al boot di sistema, puoi specificarle con una linea addizionale in <span class=filename>rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>apache_flags=&#34;&#34;</pre></div></div><div class=paragraph><p>Ora che il web server è in esecuzione puoi navigare il tuo sito web puntando il tuo web browser ad <code><a href=http://localhost/ class=bare>http://localhost/</a></code>. La pagina di default che viene mostrata è <span class=filename>/usr/local/www/data/index.html</span>.</p></div></div><div class=sect2><h3 id=_virtual_hosting>27.7.4. Virtual Hosting<a class=anchor href=#_virtual_hosting></a></h3><div class=paragraph><p>Apache supporta due tipi diversi di Virtual Hosting. Il primo metodo è Virtual Hosting basato sul nome. Il Virtual Hosting basato sul nome usa gli header HTTP/1.1 per scoprire l’hostname. Questo permette a molti domini diversi di condividere lo stesso indirizzo IP.</p></div><div class=paragraph><p>Per fare sì che Apache usi Virtual Hosting basato sui nomi aggiungi una entry come la seguente al tuo file <span class=filename>httpd.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>NameVirtualHost *</pre></div></div><div class=paragraph><p>Se il tuo webserver era nominato <code>www.domain.tld</code> e tu avessi voluto installare un dominio virtuale per `www.someotherdomain.tld ` avresti dovuto aggiungere le seguenti entry a <span class=filename>httpd.conf</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>&lt;VirtualHost <span class=k>*</span><span class=o>&gt;</span>
ServerName www.domain.tld
DocumentRoot /www/domain.tld
&lt;/VirtualHost&gt;

&lt;VirtualHost <span class=k>*</span><span class=o>&gt;</span>
ServerName www.someotherdomain.tld
DocumentRoot /www/someotherdomain.tld
&lt;/VirtualHost&gt;</code></pre></div></div><div class=paragraph><p>Sostituisci gli indirizzi con gli indirizzi che vuoi usare ed i percorsi dei documenti con quelli che usi.</p></div><div class=paragraph><p>Per maggiori informazioni sull’impostazione dei virtual host, per favore consulta la documentazione ufficiale a <a href=http://httpd.apache.org/docs/vhosts/>http://httpd.apache.org/docs/vhosts/</a>.</p></div></div><div class=sect2><h3 id=_moduli_apache>27.7.5. Moduli Apache<a class=anchor href=#_moduli_apache></a></h3><div class=paragraph><p>Ci sono molti diversi moduli Apache disponibili per aggiungere funzionalità al server base. La Collezione Port di FreeBSD fornisce un modo semplice di installare Apache assieme ad alcuni dei più popolari moduli aggiuntivi.</p></div><div class=sect3><h4 id=_mod_ssl>27.7.5.1. mod_ssl<a class=anchor href=#_mod_ssl></a></h4><div class=paragraph><p>Il modulo mod_ssl usa la libreria OpenSSL per fornire una forte crittografia attraverso i protocolli Secure Sockets Layer (SSL v2/v3) e Transport Layer Security (TLS v1). Questo modulo fornisce tutto il necessario per richiedere un certificato firmato da un’autorità fidata che emette certificati, cosicchè puoi eseguire un web server sicuro su FreeBSD.</p></div><div class=paragraph><p>Se non hai ancora installato Apache, una versione di Apache 1.3.X che includa mod_ssl può essere installata con il port <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13-modssl/>www/apache13-modssl</a>. Il supporto ad SSL è anche disponibile per Apache 2.X nel port <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache22/>www/apache22</a>, dove viene abilitato di default.</p></div></div><div class=sect3><h4 id=_siti_web_dinamici_con_perl_php>27.7.5.2. Siti web dinamici con Perl & PHP<a class=anchor href=#_siti_web_dinamici_con_perl_php></a></h4><div class=paragraph><p>Negli ultimi anni, molte aziende si sono rivolte a Internet per migliorare i loro ricavi e aumentare la loro esposizione. Questo ha anche aumentato il bisogno di contenuti interattivi web. Mentre alcune società come Microsoft® hanno introdotto soluzioni nei loro prodotti proprietari, la comunità open source ha risposto all’appello. Due opzioni per contenuti web dinamici includono mod_perl & mod_php.</p></div><div class=sect4><h5 id=_mod_perl>27.7.5.2.1. mod_perl<a class=anchor href=#_mod_perl></a></h5><div class=paragraph><p>Il progetto di integrazione Apache/Perl mette assieme la grande potenza del linguaggio di programmazione Perl e l’Apache HTTP Server. Con il modulo mod_perl è possibile scrivere moduli Apache interamente in Perl. In aggiunta l’interprete persistente integrato nel server evita l’overhead di avviare un interprete esterno e la penalizzazione del tempo di caricamento Perl.</p></div><div class=paragraph><p>mod_perl è disponibile in alcuni modi diversi. Per usare mod_perl ricorda che mod_perl 1.0 funziona solo con Apache 1.3 e mod_perl 2.0 funziona solo con Apache 2.X. mod_perl 1.0 è disponibile in <a class=package href=https://cgit.freebsd.org/ports/tree/www/mod_perl/>www/mod_perl</a> ed una versione compilata staticamente è disponibile in <a class=package href=https://cgit.freebsd.org/ports/tree/www/apache13-modperl/>www/apache13-modperl</a>. mod_perl 2.0 è disponibile in <a class=package href=https://cgit.freebsd.org/ports/tree/www/mod_perl2/>www/mod_perl2</a>.</p></div></div><div class=sect4><h5 id=_mod_php>27.7.5.2.2. mod_php<a class=anchor href=#_mod_php></a></h5><div class=paragraph><p>PHP, anche noto come "Hypertext Prepocessor" è un linguaggio di scripting di scopo generale che è particolarmente adatto per lo sviluppo Web. Adatto ad essere usato all’interno dell’HTML, la sua sintassi deriva dal C, Java™, e Perl con l’intenzione di permettere agli sviluppatori web di scrivere pagine web generate dinamicamente in modo veloce.</p></div><div class=paragraph><p>Per integrare supporto a PHP5 per il web server Apache, inizia con l’installare il port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a>.</p></div><div class=paragraph><p>Se il port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> viene installato per la prima volta, le <code>OPTIONS</code> disponibili saranno mostrate automaticamente. Se non viene mostrato un menu, ad esempio perché il port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a> è stato installato qualche volta in passato, è sempre possibile rivedere il menu a dialogo con le opzioni eseguendo:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make config</span></code></pre></div></div><div class=paragraph><p>nella directory dei port.</p></div><div class=paragraph><p>Nel menu a dialogo delle opzioni, flagga l’opzione <code>APACHE</code> per compilare mod_php5 come modulo caricabile per il web server Apache.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Molti siti stanno ancora usando PHP4 per varie ragioni (ad esempio questioni di compatibilità o applicativi web già costruiti). Se si necessita del modulo mod_php4 invece che di mod_php5, siete pregati di usare il port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php4/>lang/php4</a>. Il port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php4/>lang/php4</a> supporta molte delle configurazioni e delle opzioni di build-time del port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5/>lang/php5</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Questo installerà e configurerà i moduli richiesti per supportare applicazioni web dinamiche PHP. Controlla che le seguenti linee siano state aggiunte al file <span class=filename>/usr/local/etc/apache/httpd.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>LoadModule php5_module        libexec/apache/libphp5.so
AddModule mod_php5.c
    &lt;IfModule mod_php5.c&gt;
        DirectoryIndex index.php index.html
    &lt;/IfModule&gt;

    &lt;IfModule mod_php5.c&gt;
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
    &lt;/IfModule&gt;</pre></div></div><div class=paragraph><p>Una volta completato, una semplice chiamata al comando <code>apachectl</code> per un tranquillo restart è richiesto per caricare il modulo PHP:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># apachectl graceful</span></code></pre></div></div><div class=paragraph><p>Per upgrade futuri di PHP, il comando <code>make config</code> non sarà richiesto; le <code>OPTIONS</code> selezionate sono salvate automaticamente dal sistema dei Ports di FreeBSD.</p></div><div class=paragraph><p>Il supporto a PHP in FreeBSD è estremamente modulare così l’installazione base è molto limitata. È molto facile aggiungere supporto usando il port <a class=package href=https://cgit.freebsd.org/ports/tree/lang/php5-extensions/>lang/php5-extensions</a>. Questo port fornisce un interfaccia a menu per l’installazione di estensioni a PHP. Alternativamente le singole estensioni possono essere installate usando il port appropriato.</p></div><div class=paragraph><p>Ad esempio, per aggiungere supporto al database MySQL a PHP5, semplicemente installa <a class=package href=https://cgit.freebsd.org/ports/tree/databases/php5-mysql/>databases/php5-mysql</a>.</p></div><div class=paragraph><p>Dopo aver installato un’estensione, il server Apache deve essere riavviato per caricare i cambiamenti della nuova configurazione:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># apachectl graceful</span></code></pre></div></div></div></div></div></div></div><div class=sect1><h2 id=network-ftp>27.8. File Transfer Protocol (FTP)<a class=anchor href=#network-ftp></a></h2><div class=sectionbody><div class=sect2><h3 id=_uno_sguardo_dinsieme_3>27.8.1. Uno sguardo d’insieme<a class=anchor href=#_uno_sguardo_dinsieme_3></a></h3><div class=paragraph><p>Il File Transfer Protocol (FTP) fornisce agli utenti un semplice modo di trasferire file da e verso un server FTP. FreeBSD include software per server FTP nel sistema base. Questo rende l’installazione e l’ammininistrazione di un server FTP molto semplice.</p></div></div><div class=sect2><h3 id=_configurazione_2>27.8.2. Configurazione<a class=anchor href=#_configurazione_2></a></h3><div class=paragraph><p>Il più importante passo di configurazione è decidere a quali account saraà permesso accedere al server FTP. Un sistema normale FreeBSD ha un certo numero di account di sistema usati per vari demoni, ma agli utenti estranei non dovrebbe essere permesso di loggarsi con questi account. Il file <span class=filename>/etc/ftpusers</span> è una lista di utenti a cui è negato l’accesso FTP. Di default include gli account di sistema sopra citati ma è possibile aggiungere utenti specifici che non dovrebbero avere accesso FTP.</p></div><div class=paragraph><p>Può essere che tu voglia restringere l’accesso ad alcuni utenti senza impedir loro di usare completamente FTP. Ciò può essere ottenuto con il file <span class=filename>/etc/ftpchroot</span>. Questo file elenca utenti e gruppi soggetti a restrizioni di accesso FTP. La pagina di manuale <a href="https://man.freebsd.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5&amp;format=html">ftpchroot(5)</a> ha tutti i dettagli così non sarà descritta qui.</p></div><div class=paragraph><p>Se tu volessi abilitare accesso anonimo FTP al tuo server, devi creare un utente chiamato <code>ftp</code> sul tuo sistema FreeBSD. Gli utenti allora potranno loggarsi al tuo server FTP con uno username di <code>ftp</code> o <code>anonymous</code> e con una password qualsiasi (di norma dovrebbe essere usato un indirizzo email dell’utente come password). Il server FTP chiamerà <a href="https://man.freebsd.org/cgi/man.cgi?query=chroot&amp;sektion=2&amp;format=html">chroot(2)</a> quando un utente anonimo si logga, per restringere l’accesso solo alla home directory di <code>ftp</code>.</p></div><div class=paragraph><p>Ci sono due file di testo che specificano messaggi di benvenuto per i client FTP. Il contenuto del file <span class=filename>/etc/ftpwelcome</span> sarà mostrato agli utenti prima che raggiungano il prompt del login. Dopo un login di successo, il contenuto del file <span class=filename>/etc/ftpmotd</span> sarà mostrato. Nota che il percorso di questo file è relativo all’ambiente di login, così saraà mostrato il file <span class=filename>~ftp/etc/ftpmotd</span>.</p></div><div class=paragraph><p>Una volta che il server FTP è stato configurato correttamente, deve essere abilitato in <span class=filename>/etc/inetd.conf</span>. Tutto ciò che viene richiesto è rimuovere il simbolo di commento "#" dall’inizio della linea relativa a ftpd:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp  stream  tcp  nowait  root  /usr/libexec/ftpd ftpd -l</pre></div></div><div class=paragraph><p>Come spiegato in <a href=#network-inetd-reread>Ricaricare il file di configurazione di inetd</a>, la configurazione di inetd deve essere ricaricata dopo che che questo file di configurazione è stato cambiato.</p></div><div class=paragraph><p>Ora puoi loggarti al tuo server FTP digitando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ftp localhost</code></pre></div></div></div><div class=sect2><h3 id=_manutenzione>27.8.3. Manutenzione<a class=anchor href=#_manutenzione></a></h3><div class=paragraph><p>Il demone ftpd usa <a href="https://man.freebsd.org/cgi/man.cgi?query=syslog&amp;sektion=3&amp;format=html">syslog(3)</a> per loggare i mesaggi. Di default il demone dei log di sistema girerà i messaggi relativi a FTP nel file <span class=filename>/var/log/xferlog</span>. La posizione del log FTP può essere modificata cambiando la seguente linea in <span class=filename>/etc/syslog.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp.info      /var/log/xferlog</pre></div></div><div class=paragraph><p>Presta attenzione ai problemi potenziali correlati all’esecuzione di un server FTP anonimo. In particolare, dovresti pensarci due volte prima di permettere agli utenti anonimi di fare upload di file. Potresti scoprire che il tuo sito FTP è diventato un forum per il commercio di software commerciale senza licenza o anche peggio. Se hai veramente bisogno di permettere upload FTP anonimi, allora dovresti impostare i permessi in modo che questi file non possano essere letti da altri utenti fino a che non siano stati revisionati.</p></div></div></div></div><div class=sect1><h2 id=network-samba>27.9. Servizi di File e Stampa per client Microsoft® Windows® (Samba)<a class=anchor href=#network-samba></a></h2><div class=sectionbody><div class=sect2><h3 id=_uno_sguardo_dinsieme_4>27.9.1. Uno sguardo d’insieme<a class=anchor href=#_uno_sguardo_dinsieme_4></a></h3><div class=paragraph><p>Samba è un popolare pacchetto software open source che fornisce servizi di file e stampa per client Microsoft® Windows®. Tali client possono connettersi ed usare un file system FreeBSD come se fosse un disco locale, o stampanti FreeBSD come se fossero stampanti locali.</p></div><div class=paragraph><p>Il pacchetto software Samba dovrebbe essere incluso nel tuo media di installazione FreeBSD. Se non hai installato Samba quando hai installato per la prima volta FreeBSD, puoi sempre installarlo dal port o pacchetto <a class=package href=https://cgit.freebsd.org/ports/tree/net/samba3/>net/samba3</a>.</p></div></div><div class=sect2><h3 id=_configurazione_3>27.9.2. Configurazione<a class=anchor href=#_configurazione_3></a></h3><div class=paragraph><p>Un file di configurazione di Samba di default è installato in <span class=filename>/usr/local/shared/examples/smb.conf.default</span>. Questo file deve essere copiato in <span class=filename>/usr/local/etc/smb.conf</span> e personalizzato prima che Samba possa essere usato.</p></div><div class=paragraph><p>Il file <span class=filename>smb.conf</span> contiene informazione di configurazione runtime per Samba, come le definizioni delle stampanti e "share di file system" che vorresti condividere con Windows® client. Il pacchetto Samba include un tool basato sul web chiamato swat che fornisce un modo semplice di configurare il file <span class=filename>smb.conf</span>.</p></div><div class=sect3><h4 id=_usare_il_samba_web_administration_tool_swat>27.9.2.1. Usare il Samba Web Administration Tool (SWAT)<a class=anchor href=#_usare_il_samba_web_administration_tool_swat></a></h4><div class=paragraph><p>Il Samba Web Administration Tool (SWAT) viene eseguito come demone da inetd. Quindi, dovresti togliere i commenti alla seguente linea in <span class=filename>/etc/inetd.conf</span> prima che swat possa essere usato per configurare Samba:</p></div><div class="literalblock programlisting"><div class=content><pre>swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</pre></div></div><div class=paragraph><p>Come spiegato in <a href=#network-inetd-reread>Ricaricare il file di configurazione di inetd</a>, la configurazione di inetd deve essere ricaricata dopo che questo file di configurazione è stato cambiato.</p></div><div class=paragraph><p>Una volta che swat è stato abilitato in <span class=filename>inetd.conf</span>, puoi usare un browser per connetterti a <a href=http://localhost:901>http://localhost:901</a>. Dovrai prima loggarti con l’account di sistema <code>root</code>.</p></div><div class=paragraph><p>Una volta che ti sei loggato con successo alla pagina principale di configurazione di Samba, puoi navigare la documentazione di sistema, o iniziare cliccando sul tab <b class=menuref>Globals</b>. La sezione <b class=menuref>Globals</b> corrisponde alle variabili che sono impostate nella sezione <code>[global]</code> di <span class=filename>/usr/local/etc/smb.conf</span>.</p></div></div><div class=sect3><h4 id=_impostazioni_globali>27.9.2.2. Impostazioni Globali<a class=anchor href=#_impostazioni_globali></a></h4><div class=paragraph><p>Sia che tu stia usando swat o che tu stia editando direttamente <span class=filename>/usr/local/etc/smb.conf</span>, le prime direttive che tu puoi incontrare quando configuri Samba sono:</p></div><div class=dlist><dl><dt class=hdlist1><code>workgroup</code></dt><dd><p>Nome dominio NT o nome Workgroup per i computer che accedono a questo server.</p></dd><dt class=hdlist1><code>netbios name</code></dt><dd><p>Questo imposta il nome NetBIOS attraverso il quale un Samba è conosciuto. Di default è lo stesso della prima parte del nome host DNS.</p></dd><dt class=hdlist1><code>server string</code></dt><dd><p>Questo imposta la stringa che sarà mostrata con il comando <code>net view</code> e con alcuni altri strumenti di rete che cercano di mostrare testo descrittivo sul server.</p></dd></dl></div></div><div class=sect3><h4 id=_impostazioni_di_sicurezza>27.9.2.3. Impostazioni di Sicurezza<a class=anchor href=#_impostazioni_di_sicurezza></a></h4><div class=paragraph><p>Due delle più importanti impostazioni in <span class=filename>/usr/local/etc/smb.conf</span> sono i modelli di sicurezza usati, ed il formato delle password di backend per utenti client. Le seguenti direttive controllano queste opzioni:</p></div><div class=dlist><dl><dt class=hdlist1><code>security</code></dt><dd><p>Le due più comuni opzioni in questo caso sono <code>security = share</code> e <code>security = user</code>. Se i tuoi client usano nomi utente che sono gli stessi dei nomi utenti sulla tua macchina FreeBSD, allora vorrai sicurezza di tipo user. Questa è la policy di sicurezza di default e richiede ai client prima di loggarsi prima che possano accedere a risorse condivise.</p><div class=paragraph><p>Nel modello di sicurezza di tipo share, i client non hanno bisogno di loggarsi al server con una valida coppia username e password prima che provino a connettersi a risorse condivise. Questo è il modello di sicurezza di default per versioni precedenti di Samba.</p></div></dd><dt class=hdlist1><code>passdb backend</code></dt><dd><p>Samba ha molti modelli diversi di backend di autenticazione. Puoi autenticare i client con LDAP, NIS+, un database SQL, o un file di password modificato. Il metodo di autenticazione di default è <code>smbpasswd</code>, e questo sarà l’unico coperto qui.</p></dd></dl></div><div class=paragraph><p>Assumendo che il backend usato sia quello di default, <code>smbpasswd</code>, il file <span class=filename>/usr/local/private/smbpasswd</span> deve essere creato per permettere a Samba di autenticare i client. Se tu volessi dare ai tuoi account UNIX® accesso da client Windows®, usa il seguente comando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># smbpasswd -a username</span></code></pre></div></div><div class=paragraph><p>Per favore consulta l' <a href=http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/>Official Samba HOWTO</a> <a href=http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/>HOWTO Ufficiale di Samba</a> per informazioni addizionali sulle opzioni di configurazione. Con le basi delineate qui, dovresti avere tutto ciò di cui hai bisogno per avviare Samba.</p></div></div></div><div class=sect2><h3 id=_avviare_samba>27.9.3. Avviare Samba<a class=anchor href=#_avviare_samba></a></h3><div class=paragraph><p>Il port <a class=package href=https://cgit.freebsd.org/ports/tree/net/samba3/>net/samba3</a> aggiunge un nuovo script di avvio, che può essere usato per controllare Samba. Per abilitare questo script, in modo tale da essere usato per esempio per avviare fermare o far ripartire Samba, aggiungi la riga seguente al file <span class=filename>/etc/rc.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>samba_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>Oppure, per un controllo più accurato:</p></div><div class="literalblock programlisting"><div class=content><pre>nmbd_enable=&#34;YES&#34;</pre></div></div><div class="literalblock programlisting"><div class=content><pre>smbd_enable=&#34;YES&#34;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In questo modo Samba viene avviato automaticamente ad ogni avvio del sistema.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Per avviare Samba digita:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/etc/rc.d/samba start</span>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</code></pre></div></div><div class=paragraph><p>Fai riferimento alla <a href=../config/#configtuning-rcd>Usare rc con FreeBSD</a> per ulteriori informazioni sull’uso degli script rc.</p></div><div class=paragraph><p>Samba attualmente consiste di tre demoni separati. Dovresti osservare che entrambi nmbd e smbd siano avviati dallo script <span class=filename>samba</span>. Se hai abilitato servizi di risoluzione di nomi winbind in <span class=filename>smb.conf</span>, allora osserverai che anche il demone winbindd è avviato.</p></div><div class=paragraph><p>Puoi anche fermare Samba in ogni istante digitando:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># /usr/local/etc/rc.d/samba stop</span></code></pre></div></div><div class=paragraph><p>Samba è una suite complessa di software con funzionalità che permette una larga integrazione con reti Microsoft® Windows®. Per maggiori informazioni sulle funzionalità al di là dell’installazione di base descritta qui per favore consulta <a href=http://www.samba.org>http://www.samba.org</a>.</p></div></div></div></div><div class=sect1><h2 id=network-ntp>27.10. Sincronizzazione del Clock con NTP<a class=anchor href=#network-ntp></a></h2><div class=sectionbody><div class=sect2><h3 id=_uno_sguardo_dinsieme_5>27.10.1. Uno sguardo d’insieme<a class=anchor href=#_uno_sguardo_dinsieme_5></a></h3><div class=paragraph><p>Al passare del tempo, il clock di un computer tende a perdere la sincronizzazione. Il Network Time Protocol (NTP) fornisce un modo per assicurarti che il tuo clock sia accurato.</p></div><div class=paragraph><p>Molti servizi Internet si basano sul fatto che il clock del computer sia accurato, o comunque traggono notevole beneficio da questo fatto. Per esempio, un web server può ricevere richieste di inviare un file se questo è stato modificato da una certa data. In un ambiente locale di rete, è essenziale che i computer che condividono i file dallo stesso file server abbiano clock sincronizzati cosicchè i timestamp dei file siano consistenti. Anche servizi come <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> si basano su un clock di sistema accurato per eseguire comandi al momento specificato.</p></div><div class=paragraph><p>FreeBSD è dotato del server <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> NTP che può essere usato per interrogare altri server NTP per impostare il clock sulla tua macchina o fornire servizi di time ad altri.</p></div></div><div class=sect2><h3 id=_scegliere_server_ntp_appropriati>27.10.2. Scegliere Server NTP Appropriati<a class=anchor href=#_scegliere_server_ntp_appropriati></a></h3><div class=paragraph><p>Per sincronizzare il tuo clock, avrai bisogno di scegliere uno o più server NTP da usare. Il tuo amministratore di rete o ISP potrebbe aver impostato un server NTP, a questo scopo - controlla la loro documentazione per vedere se questo è il caso. C’è una <a href=http://ntp.isc.org/bin/view/Servers/WebHome>lista online di server NTP pubblicamente accessibili </a>che tu puoi usare per trovare un server NTP vicino a te. Accertati di essere al corrente della politica di ogni server che scegli, e chiedi il permesso se necessario.</p></div><div class=paragraph><p>Scegliere molti server NTP non connessi fra loro è una buona idea in caso uno dei server che stai usando diventa irraggiungibile o il suo clock è inaffidabile. <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> usa le risposte che riceve da altri server in modo intelligente; favorirà server inaffidabili meno di quelli affidabili.</p></div></div><div class=sect2><h3 id=_configurare_la_tua_macchina>27.10.3. Configurare la tua Macchina<a class=anchor href=#_configurare_la_tua_macchina></a></h3><div class=sect3><h4 id=_configurazione_base>27.10.3.1. Configurazione Base<a class=anchor href=#_configurazione_base></a></h4><div class=paragraph><p>Se desideri solo sincronizzare il tuo clock al momento del boot della macchina, puoi usare <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a>. Questo può essere appropriato per alcune macchine desktop che sono rebootate di frequente e richiedono sincronizzazione non frequente, ma le altre macchine dovrebbero eseguire <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a>.</p></div><div class=paragraph><p>Usare <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> al momento del boot è una buona idea per le macchine che eseguono <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a>. Il programma <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> cambia il clock gradualmente, mentre <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> imposta il clock, indipentemente da quanto grande sia la differenza fra l’impostazione di clock corrente di una macchina e l’ora corretta.</p></div><div class=paragraph><p>Per abilitare <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> al momento del boot, aggiungi <code>ntpdate_enable="YES"</code> a <span class=filename>/etc/rc.conf</span>. Avrai anche bisogno di specificare tutti i server con i quali ti desideri sincronizzare ed ogni flags passato a <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpdate&amp;sektion=8&amp;format=html">ntpdate(8)</a> in <code>ntpdate_flags</code>.</p></div></div><div class=sect3><h4 id=_configurazione_generale>27.10.3.2. Configurazione Generale<a class=anchor href=#_configurazione_generale></a></h4><div class=paragraph><p>NTP è configurato dal file <span class=filename>/etc/ntp.conf</span> nel formato descritto da <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a>. Questo è un semplice esempio:</p></div><div class="literalblock programlisting"><div class=content><pre>server ntplocal.example.com prefer
server timeserver.example.org
server ntp2a.example.net

driftfile /var/db/ntp.drift</pre></div></div><div class=paragraph><p>L’opzione <code>server</code> specifica quali server siano da usare, con un server elencato su ogni linea. Se un server è specificato con l’argomento <code>prefer</code>, come con <code>ntplocal.example.com</code>, quel server saraà preferito rispetto ad altri. Una risposta da un server preferito sarà scartata se differisce in modo significativo dalle risposte di altri server, altrimenti sarà usata senza nessuna considerazione delle altre risposte. L’argomento <code>prefer</code> è normalmente usato per server NTP che sono noti per essere molto accurati, come quelli con hardware a monitoraggio speciale del tempo.</p></div><div class=paragraph><p>L’opzione <code>driftfile</code> specifica quale file sia usato per conservare la frequenza di scostamento dal clock di sistema. Il programma <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> usa questo dato per compensare automaticamente le imprecisioni naturali del clock, permettendo di mantenere una impostazione ragionevolmente corretta anche se gli è impedito di accedere a tutte le sorgenti di sincronizzazione tempo esterne per un certo periodo di tempo.</p></div><div class=paragraph><p>L’opzione <code>driftfile</code> specifica quale file sia usato per conservare informazioni sulle risposte precedenti dai server NTP che usi. Questo file contiene informazioni interne per NTP. Non dovrebbe essere modificato da altri processi.</p></div></div><div class=sect3><h4 id=_controllare_laccesso_ad_i_tuoi_server>27.10.3.3. Controllare l’Accesso ad i tuoi Server<a class=anchor href=#_controllare_laccesso_ad_i_tuoi_server></a></h4><div class=paragraph><p>Di default, il tuo server NTP sarà accessibile a tutti gli host su Internet. L’opzione <code>restrict</code> in <span class=filename>/etc/ntp.conf</span> ti permette di controllare quali macchine possano accedere al tuo server.</p></div><div class=paragraph><p>Se vuoi negare a tutte le macchine accesso al tuo server NTP, aggiungi la seguente linea a <span class=filename>/etc/ntp.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>restrict default ignore</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Inoltre questo settaggio vieta l’accesso al tuo server dai server elencati nella tua configurazione locale. Se hai bisogno di sincronizzare il tuo server NTP con un server NTP esterno devi permettere il server che vuoi usare. Guada la pagina man <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a> per ulteriori dettagli.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Se vuoi permettere solo alle macchine della tua rete di sincronizzare il loro clock con il tuo server, ma assicurarti che non gli sia permesso configurare il server o che non sianousate come punto di riferimento per sincronizzarsi, aggiungi</p></div><div class="literalblock programlisting"><div class=content><pre>restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</pre></div></div><div class=paragraph><p>invece, dove`192.168.1.0` è un indirizzo IP sulla tua rete e <code>255.255.255.0</code> è la netmask della tua rete.</p></div><div class=paragraph><p><span class=filename>/etc/ntp.conf</span> può contenere molte opzioni <code>restrict</code>. Per maggiori dettagli, consulta la sezione <code>Access Control Support</code> di <a href="https://man.freebsd.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5&amp;format=html">ntp.conf(5)</a>.</p></div></div></div><div class=sect2><h3 id=_eseguire_il_server_ntp>27.10.4. Eseguire il Server NTP<a class=anchor href=#_eseguire_il_server_ntp></a></h3><div class=paragraph><p>Per assicurarsi che il server NTP sia avviato al momento del boot, aggiungi la linea <code>ntpd_enable="YES"</code> a <span class=filename>/etc/rc.conf</span>. Se desideri passare flag addizionali a <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a>, edita il parametro <code>ntpd_flags</code> in <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>Per avviare il server senza riavviare la tua macchina, esegui <code>ntpd</code> accertandoti di specificare ogni parametro addizionale in <code>ntpd_flags</code> presente in <span class=filename>/etc/rc.conf</span>. Per esempio:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ntpd -p /var/run/ntpd.pid</span></code></pre></div></div></div><div class=sect2><h3 id=_usare_ntpd_con_una_connessione_temporanea_ad_internet>27.10.5. Usare ntpd con una Connessione Temporanea ad Internet<a class=anchor href=#_usare_ntpd_con_una_connessione_temporanea_ad_internet></a></h3><div class=paragraph><p>Il programma <a href="https://man.freebsd.org/cgi/man.cgi?query=ntpd&amp;sektion=8&amp;format=html">ntpd(8)</a> non necessita di una connessione permanente ad Internet per funzionnare correttamente. Comunque, se hai una connessione temporanea che è configurata per effettuare una chiamata su richiesta, è una buona idea evitare che il traffico NTP causi la chiamata o mantenga la connessione attiva. Se stai usando PPP utente, puoi usare le direttive <code>filter</code> in <span class=filename>/etc/ppp/ppp.conf</span>. Per esempio:</p></div><div class="literalblock programlisting"><div class=content><pre> set filter dial 0 deny udp src eq 123
# Prevent NTP traffic from initiating dial out
set filter dial 1 permit 0 0
set filter alive 0 deny udp src eq 123
# Prevent incoming NTP traffic from keeping the connection open
set filter alive 1 deny udp dst eq 123
# Prevent outgoing NTP traffic from keeping the connection open
set filter alive 2 permit 0/0 0/0</pre></div></div><div class=paragraph><p>Pre maggiori dettagli consulta la sezione <code>PACKET FILTERING</code> in <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> e gli esempi in <span class=filename>/usr/shared/examples/ppp/</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Alcuni provider di accesso ad Internet bloccano le porte dal numero basso, impedendo ad NTP di funzionare dato che le repliche non raggiungono mai la tua macchina.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_informazioni_ulteriori>27.10.6. Informazioni Ulteriori<a class=anchor href=#_informazioni_ulteriori></a></h3><div class=paragraph><p>La documentazione per il server NTP può essere trovata in formato HTML in <span class=filename>/usr/shared/doc/ntp/</span>.</p></div></div></div></div></div><hr><div class=last-modified><p><strong>Ultima modifica</strong>: 9 marzo 2024 da <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Precedente></i><div class=container><a href=http://172.16.201.134:1313/it/books/handbook/mail class=direction>Precedente</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/it/books/handbook/firewalls class=direction>Successivo</a></div><i class="fa fa-angle-right" aria-hidden=true title=Successivo></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>Indice</h3><nav id=TableOfContents><ul><li><a href=#network-servers-synopsis>27.1. Sinossi</a></li><li><a href=#network-inetd>27.2. Il "Super-Server"inetd</a></li><li><a href=#network-nfs>27.3. Network File System (NFS)</a></li><li><a href=#network-nis>27.4. Network Information System (NIS/YP)</a></li><li><a href=#network-dhcp>27.5. Configurazione Automatica della Rete (DHCP)</a></li><li><a href=#network-dns>27.6. Domain Name System (DNS)</a></li><li><a href=#network-apache>27.7. Apache HTTP Server</a></li><li><a href=#network-ftp>27.8. File Transfer Protocol (FTP)</a></li><li><a href=#network-samba>27.9. Servizi di File e Stampa per client Microsoft® Windows® (Samba)</a></li><li><a href=#network-ntp>27.10. Sincronizzazione del Clock con NTP</a></li></ul></nav><hr><div class=resources><h3>Risorse</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="Scarica PDF"></i><a href=https://download.freebsd.org/doc/it/books/handbook/handbook_it.pdf>Scarica PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title="Modifica questa pagina"></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/it/_index target=_blank>Modifica questa pagina</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/it/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt="Scegli una lingua">
<span>Italian</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>Light</option><option value=theme-dark>Dark</option><option value=theme-high-contrast>Alto contrasto</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/it class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/it/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>