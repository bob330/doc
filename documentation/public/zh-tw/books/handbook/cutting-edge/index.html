<!doctype html><html class=theme-light lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/><title>章 23. 更新與升級 FreeBSD | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="章 23. 更新與升級 FreeBSD"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="zh-tw"><meta property="og:url" content="https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/zh-tw\/books\/handbook\/cutting-edge\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/zh-tw>Documentation portal</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/zh-tw/books>Books</a></li><li><a href=https://docs.freebsd.org/zh-tw/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/zh-tw/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=zh-tw>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-eb2a98ce203d8afd517726e6d8776be3 class=toggle>
<label class="icon cursor" for=chapter-eb2a98ce203d8afd517726e6d8776be3><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/>序</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/#preface-audience>給讀者的話</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/#preface-changes-from3>自第三版後的主要修訂</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/#preface-changes-from2>自第二版後的主要修訂 (2004)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/#preface-changes>自第一版後的主要修訂 (2001)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/#preface-overview>本書架構</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/#preface-conv>本書的編排體裁</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/preface/#preface-acknowledgements>銘謝</a></li></ul></li><li><input type=checkbox id=chapter-14a525fce014b90b8a458a894818255a class=toggle>
<label for=chapter-14a525fce014b90b8a458a894818255a><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/parti/>部 I. 入門</a></li><li><input type=checkbox id=chapter-f9c9f3451644df30d224350da97d5da6 class=toggle>
<label class="icon cursor" for=chapter-f9c9f3451644df30d224350da97d5da6><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/introduction/>章 1. 簡介</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/introduction/#introduction-synopsis>1.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/introduction/#nutshell>1.2. 歡迎使用 FreeBSD！</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/introduction/#history>1.3. 關於 FreeBSD 計劃</a></li></ul></li><li><input type=checkbox id=chapter-f693a3fa687a72d63ec8129ee302d664 class=toggle>
<label class="icon cursor" for=chapter-f693a3fa687a72d63ec8129ee302d664><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/>章 2. 安裝 FreeBSD</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-synopsis>2.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-hardware>2.2. 最低硬體需求</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-pre>2.3. 安裝前準備工作</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-start>2.4. 開始安裝</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#using-bsdinstall>2.5. 使用 bsdinstall</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-partitioning>2.6. 配置磁碟空間</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-final-warning>2.7. 確認安裝</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-post>2.8. 安裝後注意事項</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#bsdinstall-install-trouble>2.9. 疑難排解</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bsdinstall/#using-live-cd>2.10. 使用 Live CD</a></li></ul></li><li><input type=checkbox id=chapter-9f6db261075f578742036fcc6000eecd class=toggle>
<label class="icon cursor" for=chapter-9f6db261075f578742036fcc6000eecd><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/>章 3. FreeBSD 基礎</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#basics-synopsis>3.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#consoles>3.2. 虛擬 Console 與終端機</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#users-synopsis>3.3. 使用者與基礎帳號管理</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#permissions>3.4. 權限</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#dirstructure>3.5. 目錄結構</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#disk-organization>3.6. 磁碟組織</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#mount-unmount>3.7. 掛載與卸載檔案系統</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#basics-processes>3.8. 程序與 Daemon</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#shells>3.9. Shell</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#editors>3.10. 文字編輯器</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#basics-devices>3.11. 裝置及裝置節點</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/basics/#basics-more-information>3.12. 操作手冊</a></li></ul></li><li><input type=checkbox id=chapter-01c5707e95d14c0ff84bf62600c958d1 class=toggle>
<label class="icon cursor" for=chapter-01c5707e95d14c0ff84bf62600c958d1><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/>章 4. 安裝應用程式：套件與 Port</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#ports-synopsis>4.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#ports-overview>4.2. 安裝軟體的概要</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#ports-finding-applications>4.3. 搜尋軟體</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#pkgng-intro>4.4. 使用 pkg 管理 Binary 套件</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#ports-using>4.5. 使用 Port 套件集</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#ports-poudriere>4.6. 使用 Poudriere 編譯套件</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#ports-nextsteps>4.7. 安裝後的注意事項</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ports/#ports-broken>4.8. 處理損壞的 Port</a></li></ul></li><li><input type=checkbox id=chapter-3405c00581365a8b5d16af70fe4d1b72 class=toggle>
<label class="icon cursor" for=chapter-3405c00581365a8b5d16af70fe4d1b72><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/>章 5. X Window 系統</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x11-synopsis>5.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x-understanding>5.2. 術語</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x-install>5.3. 安裝 Xorg</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x-config>5.4. Xorg 設定</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x-fonts>5.5. 在 Xorg 使用字型</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x-xdm>5.6. X 顯示管理程式</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x11-wm>5.7. 桌面環境</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x-compiz-fusion>5.8. 安裝 Compiz Fusion</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/x11/#x11-understanding>5.9. 疑難排解</a></li></ul></li><li><input type=checkbox id=chapter-0eab3565e8f59f5a8a896dfba7eb3680 class=toggle>
<label for=chapter-0eab3565e8f59f5a8a896dfba7eb3680><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/partii/>部 II. 一般作業</a></li><li><input type=checkbox id=chapter-b33cf28993f3f7bf5baf036e79da0f39 class=toggle>
<label class="icon cursor" for=chapter-b33cf28993f3f7bf5baf036e79da0f39><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/desktop/>章 6. 桌面應用程式</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/desktop/#desktop-synopsis>6.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/desktop/#desktop-browsers>6.2. 瀏覽器</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/desktop/#desktop-productivity>6.3. 辦工工具</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/desktop/#desktop-viewers>6.4. 文件閱覽程式</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/desktop/#desktop-finance>6.5. 財務</a></li></ul></li><li><input type=checkbox id=chapter-152f694a19312ad72ec7bb4e1c3c33b2 class=toggle>
<label class="icon cursor" for=chapter-152f694a19312ad72ec7bb4e1c3c33b2><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/>章 7. 多媒體</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/#multimedia-synopsis>7.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/#sound-setup>7.2. 設定音效卡</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/#sound-mp3>7.3. MP3 音樂</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/#video-playback>7.4. 影片播放</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/#tvcard>7.5. 電視卡</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/#mythtv>7.6. MythTV</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/multimedia/#scanners>7.7. 影像掃描器</a></li></ul></li><li><input type=checkbox id=chapter-80888b4ee02e3e409e5f71cf97a36450 class=toggle>
<label class="icon cursor" for=chapter-80888b4ee02e3e409e5f71cf97a36450><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/kernelconfig/>章 8. 設定 FreeBSD 核心</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/kernelconfig/#kernelconfig-synopsis>8.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/kernelconfig/#kernelconfig-custom-kernel>8.2. 為何要編譯自訂的核心?</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/kernelconfig/#kernelconfig-devices>8.3. 偵測系統硬體</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/kernelconfig/#kernelconfig-config>8.4. 設定檔</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/kernelconfig/#kernelconfig-building>8.5. 編譯與安裝自訂核心</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/kernelconfig/#kernelconfig-trouble>8.6. 如果發生錯誤</a></li></ul></li><li><input type=checkbox id=chapter-cb174c55879b17ab955f2f16989a79e0 class=toggle>
<label class="icon cursor" for=chapter-cb174c55879b17ab955f2f16989a79e0><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/printing/>章 9. 列印</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/printing/#printing-quick-start>9.1. 快速開始</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/printing/#printing-connections>9.2. 印表機連線</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/printing/#printing-pdls>9.3. 常見的頁面描述語言</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/printing/#printing-direct>9.4. 直接列印</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/printing/#printing-lpd>9.5. LPD (行列式印表機 Daemon)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/printing/#printing-other>9.6. 其他列印系統</a></li></ul></li><li><input type=checkbox id=chapter-c12b8c3f2a8fcefce87087241f695c83 class=toggle>
<label class="icon cursor" for=chapter-c12b8c3f2a8fcefce87087241f695c83><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/linuxemu/>章 10. Linux® Binary 相容性</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/linuxemu/#linuxemu-synopsis>10.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/linuxemu/#linuxemu-lbc-install>10.2. 設定 Linux™ Binary 相容性</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/linuxemu/#linuxemu-advanced>10.3. 進階主題</a></li></ul></li><li><input type=checkbox id=chapter-03b11ba627b9a0c85b247f5641bde272 class=toggle>
<label for=chapter-03b11ba627b9a0c85b247f5641bde272><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/partiii/>部 III. 系統管理</a></li><li><input type=checkbox id=chapter-6c31587f8d736319f099cd4dc1961301 class=toggle>
<label class="icon cursor" for=chapter-6c31587f8d736319f099cd4dc1961301><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/>章 11. 設定與調校</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#config-synopsis>11.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-starting-services>11.2. 啟動服務</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-cron>11.3. 設定 cron(8)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-rcd>11.4. 管理 FreeBSD 中的服務</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#config-network-setup>11.5. 設定網路介面卡</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-virtual-hosts>11.6. 虛擬主機</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-syslog>11.7. 設定系統日誌</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-configfiles>11.8. 設定檔</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-sysctl>11.9. 使用 sysctl(8) 調校</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-disk>11.10. 調校磁碟</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#configtuning-kernel-limits>11.11. 調校核心限制</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#adding-swap-space>11.12. 增加交換空間</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/config/#acpi-overview>11.13. 電源與資源管理</a></li></ul></li><li><input type=checkbox id=chapter-459f0012b3b4f0b6b123010f029da5e4 class=toggle>
<label class="icon cursor" for=chapter-459f0012b3b4f0b6b123010f029da5e4><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/boot/>章 12. FreeBSD 開機程序</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/boot/#boot-synopsis>12.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/boot/#boot-introduction>12.2. FreeBSD 開機程序</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/boot/#boot-splash>12.3. 設定開機啟動畫面</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/boot/#device-hints>12.4. 裝置提示</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/boot/#boot-shutdown>12.5. 關機程序</a></li></ul></li><li><input type=checkbox id=chapter-917c75fcffbb14d48ed6d0a48e7028f2 class=toggle>
<label class="icon cursor" for=chapter-917c75fcffbb14d48ed6d0a48e7028f2><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/>章 13. 安全性</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#security-synopsis>13.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#security-intro>13.2. 簡介</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#one-time-passwords>13.3. 一次性密碼</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#tcpwrappers>13.4. TCP Wrapper</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#kerberos5>13.5. Kerberos</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#openssl>13.6. OpenSSL</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#ipsec>13.7. VPN over IPsec</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#openssh>13.8. OpenSSH</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#fs-acl>13.9. 存取控制清單</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#security-pkg>13.10. 監視第三方安全性問題</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#security-advisories>13.11. FreeBSD 安全報告</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#security-accounting>13.12. 程序追蹤</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#security-resourcelimits>13.13. 限制資源</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/security/#security-sudo>13.14. 使用 Sudo 分享管理權限</a></li></ul></li><li><input type=checkbox id=chapter-1a2a8e719703649c2c66d99aa7a25fd4 class=toggle>
<label class="icon cursor" for=chapter-1a2a8e719703649c2c66d99aa7a25fd4><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/jails/>章 14. Jail</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/jails/#jails-synopsis>14.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/jails/#jails-terms>14.2. Jail 相關術語</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/jails/#jails-build>14.3. 建立和控制 Jail</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/jails/#jails-tuning>14.4. 調校與管理</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/jails/#jails-application>14.5. 更新多個 Jail</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/jails/#jails-ezjail>14.6. 使用 ezjail 管理 Jail</a></li></ul></li><li><input type=checkbox id=chapter-8f4620c77e572cbb58917911a33c73cf class=toggle>
<label class="icon cursor" for=chapter-8f4620c77e572cbb58917911a33c73cf><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/>章 15. 強制存取控制 (MAC)</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-synopsis>15.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-inline-glossary>15.2. 關鍵詞</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-understandlabel>15.3. 了解 MAC 標籤</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-planning>15.4. 規劃安全架構</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-policies>15.5. 可用的 MAC 管理政策</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-userlocked>15.6. User Lock Down</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-implementing>15.7. 在 MAC Jail 中使用 Nagios</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mac/#mac-troubleshoot>15.8. MAC 架構疑難排解</a></li></ul></li><li><input type=checkbox id=chapter-9598d66a76cb3182057b6bcd775149a0 class=toggle>
<label class="icon cursor" for=chapter-9598d66a76cb3182057b6bcd775149a0><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/audit/>章 16. 安全事件稽查</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/audit/#audit-synopsis>16.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/audit/#audit-inline-glossary>16.2. 關鍵詞</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/audit/#audit-config>16.3. 稽查設定</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/audit/#audit-administration>16.4. 查看稽查線索</a></li></ul></li><li><input type=checkbox id=chapter-e1edcad13d9db6e8e4cb645d378ecfaf class=toggle>
<label class="icon cursor" for=chapter-e1edcad13d9db6e8e4cb645d378ecfaf><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/>章 17. 儲存設備</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#disks-synopsis>17.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#disks-adding>17.2. 加入磁碟</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#disks-growing>17.3. 重設大小與擴增磁碟</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#usb-disks>17.4. USB 儲存裝置</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#creating-cds>17.5. 建立與使用 CD 媒體</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#creating-dvds>17.6. 建立與使用 DVD 媒體</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#floppies>17.7. 建立與使用軟碟</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#backup-basics>17.8. 備份基礎概念</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#disks-virtual>17.9. 記憶體磁碟</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#snapshots>17.10. 檔案系統快照</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#quotas>17.11. 磁碟配額</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#disks-encrypting>17.12. 磁碟分割區加密</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#swap-encrypting>17.13. 交換空間加密</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/disks/#disks-hast>17.14. 高可用存儲空間 (HAST)</a></li></ul></li><li><input type=checkbox id=chapter-dde37901a0e0ea32745b67607854900f class=toggle>
<label class="icon cursor" for=chapter-dde37901a0e0ea32745b67607854900f><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/>章 18. GEOM: 模組化磁碟轉換框架</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-synopsis>18.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-striping>18.2. RAID0 - 串連 (Striping)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-mirror>18.3. RAID1 - 鏡像 (Mirroring)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-raid3>18.4. RAID3 - 位元級串連與獨立奇偶校驗</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-graid>18.5. 軟體 RAID 裝置</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-ggate>18.6. GEOM Gate Network</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-glabel>18.7. 磁碟裝置標籤</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/geom/#geom-gjournal>18.8. UFS Journaling 透過 GEOM</a></li></ul></li><li><input type=checkbox id=chapter-73e82560fcb7145b7c0e2ec47af8fc04 class=toggle>
<label class="icon cursor" for=chapter-73e82560fcb7145b7c0e2ec47af8fc04><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/>章 19. Z 檔案系統 (ZFS)</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-differences>19.1. 什麼使 ZFS 與眾不同</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-quickstart>19.2. 快速入門指南</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-zpool>19.3. <code>zpool</code> 管理</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-zfs>19.4. <code>zfs</code> 管理</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-zfs-allow>19.5. 委託管理</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-advanced>19.6. 進階主題</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-links>19.7. 其他資源</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/zfs/#zfs-term>19.8. ZFS 特色與術語</a></li></ul></li><li><input type=checkbox id=chapter-7af71270807eb7b70cd3eedc6577b254 class=toggle>
<label class="icon cursor" for=chapter-7af71270807eb7b70cd3eedc6577b254><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/filesystems/>章 20. 其他檔案系統</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/filesystems/#filesystems-synopsis>20.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/filesystems/#filesystems-linux>20.2. Linux™ 檔案系統</a></li></ul></li><li><input type=checkbox id=chapter-375257268d95faaf87faf4f7a2e6aa67 class=toggle>
<label class="icon cursor" for=chapter-375257268d95faaf87faf4f7a2e6aa67><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/>章 21. 虛擬化</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-synopsis>21.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-guest-parallels>21.2. 在 Mac OS™ X 的 Parallels 安裝 FreeBSD 為客端</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-guest-virtualpc>21.3. 在 Windows™ 的 Virtual PC 安裝 FreeBSD 為客端</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-guest-vmware>21.4. 在 Mac OS™ 的 VMware Fusion 安裝 FreeBSD 為客端</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-guest-virtualbox>21.5. 在 VirtualBox™ 安裝 FreeBSD 作為客端</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-host-virtualbox>21.6. 以 FreeBSD 作為主端使用 VirtualBox™</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-host-bhyve>21.7. 以 FreeBSD 作為主端安裝 bhyve</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/virtualization/#virtualization-host-xen>21.8. 以 FreeBSD 作為主端安裝 Xen™</a></li></ul></li><li><input type=checkbox id=chapter-49f1e96591c090304ea532012257f4ef class=toggle>
<label class="icon cursor" for=chapter-49f1e96591c090304ea532012257f4ef><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/l10n/>章 22. 在地化 - i18n/L10n 使用與安裝</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/l10n/#l10n-synopsis>22.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/l10n/#using-localization>22.2. 使用語系</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/l10n/#l10n-compiling>22.3. 尋找 i18n 應用程式</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/l10n/#lang-setup>22.4. 特定語言的語系設定</a></li></ul></li><li><input type=checkbox id=chapter-dead2b4c5ea325dd390a9b0dccd8f763 class=toggle checked>
<label class="icon cursor" for=chapter-dead2b4c5ea325dd390a9b0dccd8f763><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/>章 23. 更新與升級 FreeBSD</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/#updating-upgrading-synopsis>23.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate>23.2. FreeBSD 更新</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/#updating-upgrading-documentation>23.3. 更新文件集</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/#current-stable>23.4. 追蹤開發分支</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/#makeworld>23.5. 從原始碼更新 FreeBSD</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/cutting-edge/#small-lan>23.6. 多部機器追蹤</a></li></ul></li><li><input type=checkbox id=chapter-913e72bfb3d6947b2869d3e9447a6eaa class=toggle>
<label class="icon cursor" for=chapter-913e72bfb3d6947b2869d3e9447a6eaa><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/usb-device-mode/>章 25. USB Device Mode / USB OTG</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/usb-device-mode/#usb-device-mode-synopsis>25.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/usb-device-mode/#usb-device-mode-terminals>25.2. USB 虛擬序列埠</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/usb-device-mode/#usb-device-mode-network>25.3. USB 裝置模式網路介面</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/usb-device-mode/#usb-device-mode-storage>25.4. USB 虛擬儲存裝置</a></li></ul></li><li><input type=checkbox id=chapter-bbd25f9a194f9c39ca2d658c75767db5 class=toggle>
<label for=chapter-bbd25f9a194f9c39ca2d658c75767db5><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/partiv/>部 IV. 網路通訊</a></li><li><input type=checkbox id=chapter-29c1eeb0e9dedc487a98399e2737ee8a class=toggle>
<label class="icon cursor" for=chapter-29c1eeb0e9dedc487a98399e2737ee8a><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/dtrace/>章 24. DTrace</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/dtrace/#dtrace-synopsis>24.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/dtrace/#dtrace-implementation>24.2. 實作差異</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/dtrace/#dtrace-enable>24.3. 開啟 DTrace 支援</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/dtrace/#dtrace-using>24.4. 使用 DTrace</a></li></ul></li><li><input type=checkbox id=chapter-499dab596afd7ddac77e80295314e0dd class=toggle>
<label class="icon cursor" for=chapter-499dab596afd7ddac77e80295314e0dd><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/serialcomms/>章 26. 序列通訊</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/serialcomms/#serial-synopsis>26.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/serialcomms/#serial>26.2. 序列術語與硬體</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/serialcomms/#term>26.3. 終端機</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/serialcomms/#dialup>26.4. 撥入服務</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/serialcomms/#dialout>26.5. 撥出服務</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/serialcomms/#serialconsole-setup>26.6. 設定序列 Console</a></li></ul></li><li><input type=checkbox id=chapter-95e4571c48bee1cced5e84a538d302e3 class=toggle>
<label class="icon cursor" for=chapter-95e4571c48bee1cced5e84a538d302e3><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/ppp-and-slip/>章 27. PPP</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis>27.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ppp-and-slip/#userppp>27.2. 設定 PPP</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ppp-and-slip/#ppp-troubleshoot>27.3. PPP 連線疑難排解</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ppp-and-slip/#pppoe>27.4. 在乙太網路使用 PPP (PPPoE)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/ppp-and-slip/#pppoa>27.5. 在 ATM 使用 PPP (PPPoA)</a></li></ul></li><li><input type=checkbox id=chapter-f089ac726c401c9b4bd5c34a295e11bb class=toggle>
<label class="icon cursor" for=chapter-f089ac726c401c9b4bd5c34a295e11bb><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/>章 28. 電子郵件</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-synopsis>28.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-using>28.2. 郵件組成</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#sendmail>28.3. Sendmail 設定檔</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-changingmta>28.4. 更改郵件傳輸代理程式</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-trouble>28.5. 疑難排解</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-advanced>28.6. 進階主題</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#outgoing-only>28.7. 寄件設定</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#SMTP-dialup>28.8. 在撥號連線使用郵件</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#SMTP-Auth>28.9. SMTP 認證</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-agents>28.10. 郵件使用者代理程式</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-fetchmail>28.11. 使用 fetchmail</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mail/#mail-procmail>28.12. 使用 procmail</a></li></ul></li><li><input type=checkbox id=chapter-6de4de3fe925639d4175ce4b6f8c1829 class=toggle>
<label class="icon cursor" for=chapter-6de4de3fe925639d4175ce4b6f8c1829><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/>章 29. 網路伺服器</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-servers-synopsis>29.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-inetd>29.2. inetd 超級伺服器</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-nfs>29.3. 網路檔案系統 (NFS)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-nis>29.4. 網路資訊系統 (NIS)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-ldap>29.5. 輕量級目錄存取協定 (LDAP)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-dhcp>29.6. 動態主機設置協定 (DHCP)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-dns>29.7. 網域名稱系統 (DNS)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-apache>29.8. Apache HTTP 伺服器</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-ftp>29.9. 檔案傳輸協定 (FTP)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-samba>29.10. Microsoft™Windows™ 用戶端檔案與列印服務 (Samba)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-ntp>29.11. NTP 時間校對</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/network-servers/#network-iscsi>29.12. iSCSI Initiator 與 Target 設定</a></li></ul></li><li><input type=checkbox id=chapter-776d855c7b75e048f90b5c2c9b35ffe0 class=toggle>
<label class="icon cursor" for=chapter-776d855c7b75e048f90b5c2c9b35ffe0><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/firewalls/>章 30. 防火牆</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/firewalls/#firewalls-intro>30.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/firewalls/#firewalls-concepts>30.2. 防火牆概念</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/firewalls/#firewalls-pf>30.3. PF</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/firewalls/#firewalls-ipfw>30.4. IPFW</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/firewalls/#firewalls-ipf>30.5. IPFILTER (IPF)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/firewalls/#firewalls-blacklistd>30.6. Blacklistd</a></li></ul></li><li><input type=checkbox id=chapter-5b07f776a0e6155c1c89aa0d15610380 class=toggle>
<label class="icon cursor" for=chapter-5b07f776a0e6155c1c89aa0d15610380><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/>章 31. 進階網路設定</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#advanced-networking-synopsis>31.1. 概述</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-routing>31.2. 通訊閘與路由</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-wireless>31.3. 無線網路</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-usb-tethering>31.4. USB 網路共享</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-bluetooth>31.5. 藍牙</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-bridging>31.6. 橋接</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-aggregation>31.7. Link Aggregation 與容錯移轉</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-diskless>31.8. PXE 無磁碟作業</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-ipv6>31.9. IPv6</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#carp>31.10. 共用位址備援協定 (CARP)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/advanced-networking/#network-vlan>31.11. VLANs</a></li></ul></li><li><input type=checkbox id=chapter-171a77aa9d067a1024f849470e1f33e8 class=toggle>
<label for=chapter-171a77aa9d067a1024f849470e1f33e8><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/partv/>部 V. 附錄</a></li><li><input type=checkbox id=chapter-8050f436a0a7986a4aaded93d8e49469 class=toggle>
<label class="icon cursor" for=chapter-8050f436a0a7986a4aaded93d8e49469><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/mirrors/>附錄 A. 取得 FreeBSD</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mirrors/#mirrors-cdrom>A.1. CD 與 DVD 合集</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mirrors/#mirrors-ftp>A.2. FTP 站</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mirrors/#svn>A.3. 使用 Subversion</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/mirrors/#mirrors-rsync>A.4. 使用 rsync</a></li></ul></li><li><input type=checkbox id=chapter-128b630a8f88f158e7027fe6c2184d21 class=toggle>
<label class="icon cursor" for=chapter-128b630a8f88f158e7027fe6c2184d21><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/>附錄 B. 參考書目</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-freebsd>B.1. FreeBSD 相關書籍</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-userguides>B.2. 使用指南</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-adminguides>B.3. 管理指南</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-programmers>B.4. 開發指南</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-osinternals>B.5. 深入作業系統</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-security>B.6. 安全性參考文獻</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-hardware>B.7. 硬體參考文獻</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-history>B.8. UNIX™ 歷史</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/bibliography/#bibliography-journals>B.9. 期刊與雜誌</a></li></ul></li><li><input type=checkbox id=chapter-8bbb8867c46dac315e2253945d8c18a8 class=toggle>
<label class="icon cursor" for=chapter-8bbb8867c46dac315e2253945d8c18a8><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/eresources/>附錄 C. 網路資源</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/eresources/#eresources-www>C.1. 網站</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/eresources/#eresources-mail>C.2. 郵遞論壇 (Mailing List)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/eresources/#eresources-news>C.3. Usenet 新聞群組</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/eresources/#eresources-web>C.4. 官方鏡像站</a></li></ul></li><li><input type=checkbox id=chapter-a80ea4f5a4480b8725422710f954ef36 class=toggle>
<label class="icon cursor" for=chapter-a80ea4f5a4480b8725422710f954ef36><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/handbook/pgpkeys/>附錄 D. OpenPGP 金鑰</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/handbook/pgpkeys/#pgpkeys-officers>D.1. Officers</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>章 23. 更新與升級 FreeBSD</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#updating-upgrading-synopsis>23.1. 概述</a></li><li><a href=#updating-upgrading-freebsdupdate>23.2. FreeBSD 更新</a></li><li><a href=#updating-upgrading-documentation>23.3. 更新文件集</a></li><li><a href=#current-stable>23.4. 追蹤開發分支</a></li><li><a href=#makeworld>23.5. 從原始碼更新 FreeBSD</a></li><li><a href=#small-lan>23.6. 多部機器追蹤</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=updating-upgrading-synopsis>23.1. 概述<a class=anchor href=#updating-upgrading-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD 在每次的發佈之間持續在開發。有些人偏好正式發佈的版本，也有另一群人喜歡使用最新的開發版本。然而，即使是正式發佈的版本也時常會有安全性與其他緊急修復的更新，因此，無論使用哪種版本，FreeBSD 都提供所有必要的工具來讓系統能維持最新的版本，且讓各種版本都能簡單的升級。本章將說明如何追蹤開發版本的系統及讓 FreeBSD 系統維持最新版本的基本工具。</p></div><div class=paragraph><p>讀完這章，您將了解：</p></div><div class=ulist><ul><li><p>如何使用 freebsd-update, Subversion 來維持 FreeBSD 系統為最新版。</p></li><li><p>如何比對已安裝系統與已知原始複本間的狀態。</p></li><li><p>如何使用 Subversion 或說明文件 Port 來維持已安裝的文件為新版。</p></li><li><p>兩種開發分支間的差異：FreeBSD-STABLE 與 FreeBSD-CURRENT。</p></li><li><p>如何重新編譯及重新安裝整個基礎系統 (Base system)。</p></li></ul></div><div class=paragraph><p>在開始閱讀這章之前，您需要：</p></div><div class=ulist><ul><li><p>正確的設定網路連線 (<a href=../advanced-networking/#advanced-networking>進階網路設定</a>)。</p></li><li><p>了解如何安裝其他第三方軟體 (<a href=../ports/#ports>安裝應用程式：套件與 Port</a>)。</p></li></ul></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>本章會經常使用 <code>svnlite</code> 來取得與更新 FreeBSD 原始碼。您也可以使用 <a class=package href=https://cgit.freebsd.org/ports/tree/devel/subversion/>devel/subversion</a> Port 或套件。</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=updating-upgrading-freebsdupdate>23.2. FreeBSD 更新<a class=anchor href=#updating-upgrading-freebsdupdate></a></h2><div class=sectionbody><div class=paragraph><p>隨時套用安全性更新以及升級到新發佈的作業系統版本對管理一個持續運作的系統是非常重要的任務，FreeBSD 內含可以執行這兩項任務的工具程式，叫做 <code>freebsd-update</code>。</p></div><div class=paragraph><p>這個工具程式支援使用 Binary 對 FreeBSD 做安全性與和錯誤更新，不需要手動編譯和安裝修補 (Patch) 或新核心。目前由安全性團隊提供支援的 Binary 更新可用於所有的架構和發行版。支援的發行版清單及各自的支援期限列於 <a href=https://www.FreeBSD.org/security/>https://www.FreeBSD.org/security/</a>。</p></div><div class=paragraph><p>這個工具程式也支援升級作業系統到次要的發佈版以及升級到另一個發佈版分支。在升級到新的發佈版本前，需先查看該版本的發佈公告，因為發行公告中包含了該發行版本的相關重要資訊。發行公告可自 <a href=https://www.FreeBSD.org/releases/>https://www.FreeBSD.org/releases/</a> 取得。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>如果有使用 <code>crontab</code> 來執行 <a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a>，則必須在升級作業系統前先關閉。</p></div></td></tr></tbody></table></div><div class=paragraph><p>本節將說明 <code>freebsd-update</code> 使用的設定檔， 示範如何套用安全性修補及如何升級到主要或次要的作業系統發行版，並討論升級作業系統的需要考量的事項。</p></div><div class=sect2><h3 id=freebsdupdate-config-file>23.2.1. 設定檔<a class=anchor href=#freebsdupdate-config-file></a></h3><div class=paragraph><p><code>freebsd-update</code> 預設的設定檔不需變更即可運作。 部份使用者可能會想要調校位於 <span class=filename>/etc/freebsd-update.conf</span> 的預設設定檔來對程序有更好的控制。該設定檔中的註解均有說明可用的選項，但以下幾個項目可能需要進一步的說明：</p></div><div class="literalblock programlisting"><div class=content><pre># Components of the base system which should be kept updated.
Components world kernel</pre></div></div><div class=paragraph><p>這個參數控制 FreeBSD 要保持最新版本的部份。 預設是更新整個基礎系統 (Base system) 和核心。 可指定個別元件，例如：<code>src/base</code> 或 <code>src/sys</code>。 雖然如此，最好的選項是維持預設值，因為更改指定特定項目時需列出每一個需要的項目。時間一久可能會因為原始碼和 Binary 檔案沒有更新而造成慘重的後果。</p></div><div class="literalblock programlisting"><div class=content><pre># Paths which start with anything matching an entry in an IgnorePaths
# statement will be ignored.
IgnorePaths /boot/kernel/linker.hints</pre></div></div><div class=paragraph><p>要保持特定的目錄在更新過程不被更動，例如 <span class=filename>/bin</span> 或 <span class=filename>/sbin</span>，可以將他們的路徑加到此敘述中。 這個選項可以防止 <code>freebsd-update</code> 覆蓋本地的修改。</p></div><div class="literalblock programlisting"><div class=content><pre># Paths which start with anything matching an entry in an UpdateIfUnmodified
# statement will only be updated if the contents of the file have not been
# modified by the user (unless changes are merged; see below).
UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile</pre></div></div><div class=paragraph><p>這個選項只會更新特定目錄中未修改的設定檔。任何使用者修改的檔案都不會自動更新。 有另一個選項 <code>KeepModifiedMetadata</code> 可讓 <code>freebsd-update</code> 在合併時儲存使用者做的變更。</p></div><div class="literalblock programlisting"><div class=content><pre># When upgrading to a new FreeBSD release, files which match MergeChanges
# will have any local changes merged into the version from the new release.
MergeChanges /etc/ /var/named/etc/ /boot/device.hints</pre></div></div><div class=paragraph><p>列出 <code>freebsd-update</code> 應嘗試合併的設定檔目錄。 檔案合併程序是指一系列類似 <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> 做的 <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> 修補動作， 但是選項比較少。 合併的動作包含接受、開啟編輯器，或讓 <code>freebsd-update</code> 中止。 如果有疑慮，請先備份 <span class=filename>/etc</span>，然後再接受合併。 更多關於 <code>mergemaster</code> 的資訊， 參見 <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a>。</p></div><div class="literalblock programlisting"><div class=content><pre># Directory in which to store downloaded updates and temporary
# files used by FreeBSD Update.
# WorkDir /var/db/freebsd-update</pre></div></div><div class=paragraph><p>這個目錄是所有修補檔和暫存檔的存放處。當使用者進行版本升級時，這個位置應該要有至少 1GB 的可用磁碟空間。</p></div><div class="literalblock programlisting"><div class=content><pre># When upgrading between releases, should the list of Components be
# read strictly (StrictComponents yes) or merely as a list of components
# which *might* be installed of which FreeBSD Update should figure out
# which actually are installed and upgrade those (StrictComponents no)?
# StrictComponents no</pre></div></div><div class=paragraph><p>當這個選項設定為 <code>yes</code> 時，<code>freebsd-update</code> 將會假設 <code>Components</code> 清單已完成，將不會對清單之外的項目做變更。 實際上 <code>freebsd-update</code> 會將嘗試更新每一個屬於 <code>Components</code> 清單中的檔案。</p></div></div><div class=sect2><h3 id=freebsdupdate-security-patches>23.2.2. 套用安全性修補<a class=anchor href=#freebsdupdate-security-patches></a></h3><div class=paragraph><p>套用 FreeBSD 安全性修補的過程已經被簡化，讓系統管理員可使用 <code>freebsd-update</code> 來保持系統更新。更多有關 FreeBSD 安全性報告的資訊可以參考 <a href=../security/#security-advisories>FreeBSD 安全報告</a>。</p></div><div class=paragraph><p>FreeBSD 安全性修補可以使用以下指令下載並安裝。 第一個指令會偵測是否有可用的修補，如果有，將列出若執行修補後會變更的檔案清單。第二個指令將會套用修補。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update fetch</span>
<span class=c># freebsd-update install</span></code></pre></div></div><div class=paragraph><p>如果更新套用了任何核心修補，系統將會需要重新開機以使用修補過的核心。如果修補套用在任何執行中的 Binary，受影響的應用程式應重新啟動來使用修補過的 Binary 版本。</p></div><div class=paragraph><p>加入以下項目至 <span class=filename>/etc/crontab</span> 可設定系統每天自動檢查更新一次：</p></div><div class="literalblock programlisting"><div class=content><pre>@daily                                  root    freebsd-update cron</pre></div></div><div class=paragraph><p>如果有新的修補，該程式會會自動下載，但不會執行。<code>root</code> 使用者會收到電子郵件通知複查該修補並手動執行 <code>freebsd-update install</code> 安裝。</p></div><div class=paragraph><p>如果有發生任何錯誤，<code>freebsd-update</code> 可以使用以下指令還原最後所做的變更：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update rollback</span>
Uninstalling updates... <span class=k>done</span>.</code></pre></div></div><div class=paragraph><p>再次強調，若核心或任何核心模組有做過修改應重新啟動系統，以及任何受影響的 Binary 應重新執行。</p></div><div class=paragraph><p>只有 <span class=filename>GENERIC</span> 核心可使用 <code>freebsd-update</code> 自動更新。 如果有安裝自訂的核心，在 <code>freebsd-update</code> 完成安裝更新後，需要重新編譯和重新安裝。 預設的核心名稱為 <em>GENERIC</em>，可使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=uname&amp;sektion=1&amp;format=html">uname(1)</a> 指令來檢查安裝的核心。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>隨時在 <span class=filename>/boot/GENERIC</span> 保留一份 <span class=filename>GENERIC</span> 核心的複本將有助於診斷各種問題及執行版本升級。請參考 <a href=#freebsd-update-custom-kernel-9x>在 FreeBSD 9.X 及之後版本自訂核心</a> 來了解有關如何取得 <span class=filename>GENERIC</span> 核心的複本說明。</p></div></td></tr></tbody></table></div><div class=paragraph><p>除非在 <span class=filename>/etc/freebsd-update.conf</span> 的預設設定檔被修改，否則 <code>freebsd-update</code> 將會安裝更新後的核心原始碼和其餘的更新，可依平常的方式執行重新編譯與重新安裝核心。</p></div><div class=paragraph><p>以 <code>freebsd-update</code> 發行的更新並非總是會更新核心。若核心的原始碼沒有被 <code>freebsd-update install</code> 修改則不需要重新編譯自訂的核心。雖然如此 <code>freebsd-update</code> 總是會更新 <span class=filename>/usr/src/sys/conf/newvers.sh</span>，目前修補的版本如 <code>uname -r</code> 執行結果中的 <code>-p</code> 數字，便是由該檔取得。即使沒有做任何其他變更，重新編譯自訂核心可讓 <code>uname</code> 準確的回報系統目前的修補版本。當維護多個系統時這會特別有用，因其可讓你快速評估每個系統安裝的更新。</p></div></div><div class=sect2><h3 id=freebsdupdate-upgrade>23.2.3. 執行主要及次要版號升級<a class=anchor href=#freebsdupdate-upgrade></a></h3><div class=paragraph><p>從 FreeBSD 的次要版本升級到另一個版本，例如從 FreeBSD 9.0 到 FreeBSD 9.1, 叫作 <em>次要版本 (Minor version)</em> 更新。 <em>主要版本 (Major version)</em> 更新發生在當 FreeBSD 從一個主要版本升級到主要版本升級到另一個主要版本時，例如從 FreeBSD 9.X 到 FreeBSD 10.X。 兩種更新都可以透過提供 <code>freebsd-update</code> 目標的發佈版本來執行。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>如果系統正在執行自訂的核心，請在開始升級前，確定有保留一份 <span class=filename>GENERIC</span> 核心的複本在 <span class=filename>/boot/GENERIC</span>。 請參考 <a href=#freebsd-update-custom-kernel-9x>在 FreeBSD 9.X 及之後版本自訂核心</a> 關於如何取得 <span class=filename>GENERIC</span> 核心複本的說明。</p></div></td></tr></tbody></table></div><div class=paragraph><p>在 FreeBSD 9.0 系統執行以下指令，將會把系統升級至 FreeBSD 9.1：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update -r 9.1-RELEASE upgrade</span></code></pre></div></div><div class=paragraph><p>收到這個指令後，<code>freebsd-update</code> 會開始評估設定檔和目前的系統來收集升級所需的資訊。 螢幕會顯示偵測到或沒偵測到的元件清單。例如：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Looking up update.FreeBSD.org mirrors... 1 mirrors found.
Fetching metadata signature <span class=k>for </span>9.0-RELEASE from update1.FreeBSD.org... <span class=k>done</span><span class=nb>.</span>
Fetching metadata index... <span class=k>done</span><span class=nb>.</span>
Inspecting system... <span class=k>done</span><span class=nb>.</span>

The following components of FreeBSD seem to be installed:
kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games
src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue
src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin
world/base world/info world/lib32 world/manpages

The following components of FreeBSD <span class=k>do </span>not seem to be installed:
kernel/generic world/catpages world/dict world/doc world/games
world/proflibs

Does this look reasonable <span class=o>(</span>y/n<span class=o>)</span>? y</code></pre></div></div><div class=paragraph><p>此時，<code>freebsd-update</code> 將會嘗試下載所有升級需要的檔案。 在某些情況，會詢問使用者一些關於要安裝什麼或要如何繼續。</p></div><div class=paragraph><p>當使用自訂核心，上述的步驟將會產生如下的警告：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>WARNING: This system is running a <span class=s2>&#34;MYKERNEL&#34;</span> kernel, which is not a
kernel configuration distributed as part of FreeBSD 9.0-RELEASE.
This kernel will not be updated: you MUST update the kernel manually
before running <span class=s2>&#34;/usr/sbin/freebsd-update install&#34;</span></code></pre></div></div><div class=paragraph><p>這時的警告可以安全地忽略，升級過程將會使用更新過的 <span class=filename>GENERIC</span> 核心來進行。</p></div><div class=paragraph><p>所有的修補都下載到本地系統之後， 將會開始套用更新。這個過程可能會花點時間，取決於機器的速度和工作量。設定檔將會被合併。 合併的過程中當檔案被合併或是手動合併畫面上出現編輯器時需要使用者操作。 每一個成功合併的結果將會顯示給使用者並繼續程序，失敗或忽略合併將會使程序中斷。使用者可能想要備份 <span class=filename>/etc</span> 並稍後手動合併重要的檔案，例如：<span class=filename>master.passwd</span> 或 <span class=filename>group</span>。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>所有的修補與合併動作會在另一個目錄進行，並不會直接修改。當成功套用所有修補，所有設定檔已合併且過程順利，使用者可使用以下指令將變更安裝到磁碟：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update install</span></code></pre></div></div></td></tr></tbody></table></div><div class=paragraph><p>核心與核心模組會先修補，若系統正在執行自訂的核心，使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=nextboot&amp;sektion=8&amp;format=html">nextboot(8)</a> 來設定下次開機使用更新過的 <span class=filename>/boot/GENERIC</span>：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># nextboot -k GENERIC</span></code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>若機器在遠端進行更新，請在使用 <span class=filename>GENERIC</span> 核心重新開機前，請確定該核心含有所有系統所需的驅動程式以正常開機並連線至網路。特別是在執行的自訂核心有使用到由核心模組提供內建功能，請確定將這些模組已暫時使用 <span class=filename>/boot/loader.conf</span> 設定檔載入到 <span class=filename>GENERIC</span> 核心。建議關閉非必須的服務和磁碟與網路掛載直到升級程序完成。</p></div></td></tr></tbody></table></div><div class=paragraph><p>機器現在應使用更新過的核心重新開機：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown -r now</span></code></pre></div></div><div class=paragraph><p>一旦系統重新上線，使用以下指令繼續 <code>freebsd-update</code>。 由於程序的狀態已被儲存，<code>freebsd-update</code> 不會重頭開始，但會進行下一個階段並移除所有舊的共用程式庫和目標檔。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update install</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>取決於是否有任何程式庫版本編號衝突，也可能只有兩個而不是三個安裝階段。</p></div></td></tr></tbody></table></div><div class=paragraph><p>升級程序現在完成了。如果所做的是主要的版本升級，則需依 <a href=#freebsdupdate-portsrebuild>主要版號升級後的套件升級</a> 的說明重新安裝所有的 Port 和套件。</p></div><div class=sect3><h4 id=freebsd-update-custom-kernel-9x>23.2.3.1. 在 FreeBSD 9.X 及之後版本自訂核心<a class=anchor href=#freebsd-update-custom-kernel-9x></a></h4><div class=paragraph><p>在使用 <code>freebsd-update</code> 前，請確定已有 <span class=filename>GENERIC</span> 核心的複本於 <span class=filename>/boot/GENERIC</span>。若只編譯過一次自訂核心，那麼 <span class=filename>/boot/kernel.old</span> 就是 <code>GENERIC</code> 核心，只需要將該目錄重新命名為 <span class=filename>/boot/kernel</span>。</p></div><div class=paragraph><p>若有編譯自訂核心過超過一次，或已經不曉得編譯自訂核心的次數，則需取得與目前作業系統版本相符的 <code>GENERIC</code> 核心複本。若可直接操作實體系統，則可以從安裝媒體取得 <code>GENERIC</code> 核心複本：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /cdrom</span>
<span class=c># cd /cdrom/usr/freebsd-dist</span>
<span class=c># tar -C/ -xvf kernel.txz boot/kernel/kernel</span></code></pre></div></div><div class=paragraph><p>或者，可以從原始碼重新編譯 <code>GENERIC</code> 核心：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make kernel __MAKE_CONF=/dev/null SRCCONF=/dev/null</span></code></pre></div></div><div class=paragraph><p>這個核心要被 <code>freebsd-update</code> 認做 <code>GENERIC</code> 核心，<span class=filename>GENERIC</span> 設定檔必須不能做任何修改，也建議在編譯核心時不要使用其他特殊選項。</p></div><div class=paragraph><p><code>freebsd-update</code> 僅需要 <span class=filename>/boot/GENERIC</span> 存在便可，因此不須重新開機進入 <span class=filename>GENERIC</span>。</p></div></div><div class=sect3><h4 id=freebsdupdate-portsrebuild>23.2.3.2. 主要版號升級後的套件升級<a class=anchor href=#freebsdupdate-portsrebuild></a></h4><div class=paragraph><p>一般來說，已安裝的應用程式在次要版本升級仍可沒問題的正常執行。但主要版本升級會採用不同的應用程式 Binary 介面 (Application Binary Interfaces, ABIs)，會導致大部份第三方應用程式無法正常執行。 因此在主要版本升級後，需要升及所有已安裝的套件和 Port，套件可以使用 <code>pkg upgrade</code> 來升級，而 Port 則需使用 <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portmaster/>ports-mgmt/portmaster</a> 工具。</p></div><div class=paragraph><p>強制升級所有已安裝的套件會使用檔案庫中新版本的套件來取得目前套件，即使該版號沒有增加。由於在升級 FreeBSD 主要版本時會變更 ABI 版本，因此這是必要動作。強制升級可以執行以下指令來完成：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg-static upgrade -f</span></code></pre></div></div><div class=paragraph><p>重新編譯所有已安裝的應用程式可以執行以下指令來完成：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portmaster -af</span></code></pre></div></div><div class=paragraph><p>這個指令會在安裝每個應用程式有可設定選項時顯示設定畫面，並會等待使用者操作該畫面，要避免這種情況並使用預設的設定選項，可在上述指令加上 <code>-G</code> 參數。</p></div><div class=paragraph><p>完成軟體升級後，最後需執行 <code>freebsd-update</code> 來完成最後的升級動作：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update install</span></code></pre></div></div><div class=paragraph><p>若有使用臨時 <span class=filename>GENERIC</span> 核心，便應在此時依據 <a href=../kernelconfig/#kernelconfig>設定 FreeBSD 核心</a> 的說明編譯並安裝新的自訂核心。</p></div><div class=paragraph><p>重新開機使用新的 FreeBSD 版本後，升級程序便正式完成。</p></div></div></div><div class=sect2><h3 id=freebsdupdate-system-comparison>23.2.4. 比對系統狀態<a class=anchor href=#freebsdupdate-system-comparison></a></h3><div class=paragraph><p>已安裝的 FreeBSD 版本狀態可以使用 <code>freebsd-update IDS</code> 與另一個已知良好的複本來做比對測試。 這個指令會評估目前版本的系統工具，程式庫和設定檔，可做為內建的入侵偵測系統來使用 (Intrusion Detection System, IDS)。</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>這個指令並非用來取代真正的 IDS，如 <a class=package href=https://cgit.freebsd.org/ports/tree/security/snort/>security/snort</a>。由於 <code>freebsd-update</code> 儲存在磁碟上，被竄改的可能性是顯而易見的，雖然這個可能性會因使用 <code>kern.securelevel</code> 以及將 <code>freebsd-update</code> 在不使用時以唯讀儲存而降低，最好的解決方案是能夠與安全的磁碟，如 DVD 或儲存在外部的 USB 磁碟裝置比對系統。替代的方式是使用內建工具的 IDS 功能，在 <a href=../security/#security-ids>Binary 檢驗</a> 有詳細說明</p></div></td></tr></tbody></table></div><div class=paragraph><p>要開始比對，需指定輸出的檔案來儲存結果：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># freebsd-update IDS &gt;&gt; outfile.ids</span></code></pre></div></div><div class=paragraph><p>系統將會開始檢查並且會產生相當長的檔案清單，內容包含發佈版本已知的與目前安裝版本的 SHA256 雜湊值會儲存到指定的輸出檔。</p></div><div class=paragraph><p>清單中的項目會相當的多，但輸出的格式可以很簡單的用來分析。例如，要取得與發佈版本不同的檔案清單，可使用以下指令：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cat outfile.ids | awk &#39;{ print $1 }&#39; | more</span>
/etc/master.passwd
/etc/motd
/etc/passwd
/etc/pf.conf</code></pre></div></div><div class=paragraph><p>實際的檔案會更多，此範例的輸出已精簡。部份檔案可能本來就會被修改。例如 <span class=filename>/etc/passwd</span> 在新增使用者到系統時會被修改，核心模組也有可能因使用 <code>freebsd-update</code> 更新而有所不同。要排除特定的檔案或目錄可將這些檔案或目錄加入到 <span class=filename>/etc/freebsd-update.conf</span> 中的 <code>IDSIgnorePaths</code> 選項。</p></div></div></div></div><div class=sect1><h2 id=updating-upgrading-documentation>23.3. 更新文件集<a class=anchor href=#updating-upgrading-documentation></a></h2><div class=sectionbody><div class=paragraph><p>說明文件是 FreeBSD 作業系統不可或缺的一部份。最新版本的 FreeBSD 文件除了可在 FreeBSD 網站 (<a href=https://www.FreeBSD.org/doc/>https://www.freebsd.org/doc/</a>) 取得，也可很簡單的取得本地的 FreeBSD 網站、使用手冊、FAQ 及文章副本。</p></div><div class=paragraph><p>本節將說明如何使用原始碼與 FreeBSD Port 套件集來取得最新版本 FreeBSD 文件本地複本。</p></div><div class=paragraph><p>有關編輯與提出修正說明文件的資訊，請參考 FreeBSD 文件計畫入門書 (<a href=https://docs.freebsd.org/zh-tw/books/fdp-primer/>FreeBSD Documentation Project Primer</a>)。</p></div><div class=sect2><h3 id=updating-installed-documentation>23.3.1. 自原始碼更新說明文件<a class=anchor href=#updating-installed-documentation></a></h3><div class=paragraph><p>從原始碼重新編譯 FreeBSD 文件需要一些不屬於 FreeBSD 基礎系統的工具。需要的工具可安裝由 FreeBSD 文件計劃所開發的 <a class=package href=https://cgit.freebsd.org/ports/tree/textproc/docproj/>textproc/docproj</a> 套件或 Port。</p></div><div class=paragraph><p>安裝完成之後，可使用 svnlite 來取得乾淨的文件原始碼複本：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># svnlite checkout https://svn.FreeBSD.org/doc/head /usr/doc</span></code></pre></div></div><div class=paragraph><p>第一次下載文件原始碼需要一些時間，請耐心等候執行完畢。</p></div><div class=paragraph><p>往後更新文件原始碼可執行：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># svnlite update /usr/doc</span></code></pre></div></div><div class=paragraph><p>下載最新的文件原始碼到 <span class=filename>/usr/doc</span> 之後，便完成要更新已安裝文件的準備動作。</p></div><div class=paragraph><p>完整更新所有可用的語言可以執行：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/doc</span>
<span class=c># make install clean</span></code></pre></div></div><div class=paragraph><p>若只想要更新特定語言，可對 <span class=filename>/usr/doc</span> 中特定語言的子目錄執行 <code>make</code>：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/doc/en_US.ISO8859-1</span>
<span class=c># make install clean</span></code></pre></div></div><div class=paragraph><p>另一個更新文件的方式是在 <span class=filename>/usr/doc</span> 或特定的語言子目錄下執行此指令：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make update</span></code></pre></div></div><div class=paragraph><p>要指定安裝的輸出格式可使用 <code>FORMATS</code> 來設定：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/doc</span>
<span class=c># make FORMATS=&#39;html html-split&#39; install clean</span></code></pre></div></div><div class=paragraph><p>有數個選項可更新部份文件或只編譯特定翻譯來簡化更新程序。這些選項可在 <span class=filename>/etc/make.conf</span> 設為系統全域的預設選項，或是透過指令傳送給 <code>make</code>。</p></div><div class=paragraph><p>選項有：</p></div><div class=dlist><dl><dt class=hdlist1><code>DOC_LANG</code></dt><dd><p>要編譯與安裝的語言及編碼清單，例如 <code>en_US.ISO8859-1</code> 代表英語文件。</p></dd><dt class=hdlist1><code>FORMATS</code></dt><dd><p>要編譯的輸出格式清單，目前支援 <code>html</code>, <code>html-split</code>, <code>txt</code>, <code>ps</code> 以及 <code>pdf</code>。</p></dd><dt class=hdlist1><code>DOCDIR</code></dt><dd><p>要安裝文件的位置，預設為 <span class=filename>/usr/shared/doc</span>。</p></dd></dl></div><div class=paragraph><p>要取得更多可做為 FreeBSD 系統全域選項的 <code>make</code> 變數，請參考 <a href="https://man.freebsd.org/cgi/man.cgi?query=make.conf&amp;sektion=5&amp;format=html">make.conf(5)</a>。</p></div></div><div class=sect2><h3 id=doc-ports-install-package>23.3.2. 自 Port 更新說明文件<a class=anchor href=#doc-ports-install-package></a></h3><div class=paragraph><p>前一節介紹了由原始碼更新 FreeBSD 文件的方法，本節將說明使用 Port 套件集的替代方法，可由以下方式達成：</p></div><div class=ulist><ul><li><p>安裝事先編譯好的文件套件，無須在本地編譯任何東西或安裝文件工具集。</p></li><li><p>使用 Port 框架來編譯文件原始碼，可讓取得與編譯文件的步驟更簡單。</p></li></ul></div><div class=paragraph><p>這個更新 FreeBSD 文件的方法，會使用到一系列由文件工程團隊 <a href=mailto:doceng@FreeBSD.org>doceng@FreeBSD.org</a> 每月更新的文件 Port 與套件。這些套件列於 FreeBSD Port 套件集的 docs 分類下 (<a href=http://www.freshports.org/docs/>http://www.freshports.org/docs/</a>)。</p></div><div class=paragraph><p>文件 Port 的組織方式如下：</p></div><div class=ulist><ul><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/misc/freebsd-doc-en/>misc/freebsd-doc-en</a> 套件或 Port 會安裝所有英語的文件。</p></li><li><p><a class=package href=https://cgit.freebsd.org/ports/tree/misc/freebsd-doc-all/>misc/freebsd-doc-all</a> 套件或 Port 會安裝所有可用語言的文件。</p></li><li><p>每個翻譯語言都有套件與 Port，如 <a class=package href=https://cgit.freebsd.org/ports/tree/misc/freebsd-doc-hu/>misc/freebsd-doc-hu</a> 為匈牙利語文件。</p></li></ul></div><div class=paragraph><p>當使用 Binary 套件時，會安裝指定語言 FreeBSD 文件的所有可用格式。例如以下指令會安裝最新的匈牙利語文件套件：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg install hu-freebsd-doc</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>套件使用的名稱格式與 Port 的名稱不同：<code><em>lang</em>-freebsd-doc</code>，其中 <em>lang</em> 是語言代碼的縮寫，例如 <code>hu</code> 代表匈牙利語，<code>zh_cn</code> 代表簡體中文。</p></div></td></tr></tbody></table></div><div class=paragraph><p>要指定文件的格式，需以編譯 Port 來代替安裝套件。例如要編譯並安裝英語文件：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/misc/freebsd-doc-en</span>
<span class=c># make install clean</span></code></pre></div></div><div class=paragraph><p>Port 提供設定選單來指定要編譯與安裝的格式，預設會選擇分頁的 HTML (類似 <a href=http://www.FreeBSD.org>http://www.FreeBSD.org</a> 使用的格式) 以及 PDF。</p></div><div class=paragraph><p>此外，編譯文件 Port 時也可指定數個 <code>make</code> 選項，包括：</p></div><div class=dlist><dl><dt class=hdlist1><code>WITH_HTML</code></dt><dd><p>編譯一份文件使用一個 HTML 檔的 HTML 格式。格式化後的文件會儲存至名稱為 <span class=filename>article.html</span> 或 <span class=filename>book.html</span> 的檔案。</p></dd><dt class=hdlist1><code>WITH_PDF</code></dt><dd><p>格式化的文件會儲存至名稱為 <span class=filename>article.pdf</span> 或 <span class=filename>book.pdf</span> 的檔案。</p></dd><dt class=hdlist1><code>DOCBASE</code></dt><dd><p>指定要安裝文件的位置，預設為 <span class=filename>/usr/local/shared/doc/freebsd</span>。</p></dd></dl></div><div class=paragraph><p>以下範例使用變數來安裝 PDF 的匈牙利語文件到特定目錄：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/ports/misc/freebsd-doc-hu</span>
<span class=c># make -DWITH_PDF DOCBASE=share/doc/freebsd/hu install clean</span></code></pre></div></div><div class=paragraph><p>文件套件或 Port 可以依 <a href=../ports/#ports>安裝應用程式：套件與 Port</a> 的說明更新。例如以下指令會使用 <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/portmaster/>ports-mgmt/portmaster</a> 更新已安裝的匈牙利語文件：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># portmaster -PP hu-freebsd-doc</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=current-stable>23.4. 追蹤開發分支<a class=anchor href=#current-stable></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD 有兩個開發分支：FreeBSD-CURRENT 及 FreeBSD-STABLE。</p></div><div class=paragraph><p>本節將說明每個分支及其的特定使用者，也會說明如何在各別分支維持系統為最新版。</p></div><div class=sect2><h3 id=current>23.4.1. 使用 FreeBSD-CURRENT<a class=anchor href=#current></a></h3><div class=paragraph><p>FreeBSD-CURRENT 是 FreeBSD 開發的 "最前線"，FreeBSD-CURRENT 的使用者需具備較強的技術能力。技術能力較弱的使用者應改追蹤 FreeBSD-STABLE 開發分支。</p></div><div class=paragraph><p>FreeBSD-CURRENT 是 FreeBSD 最新的原始碼，其中包括正在進行的開發工作、實驗性的變更以及不一定會在下一個官方發行版出現的過渡機制。 雖然 FreeBSD 開發者每天編譯 FreeBSD-CURRENT 原始碼，但仍可能有短暫時間原始碼是無法編譯的。雖然這些問題會儘快被解決，但是無論 FreeBSD-CURRENT 帶來災難或是新功能，同步原始碼時都要考量這個問題。</p></div><div class=paragraph><p>FreeBSD-CURRENT 主要給下以三種族群：</p></div><div class="olist arabic"><ol class=arabic><li><p>致力於開發某一部份原始碼樹的 FreeBSD 社群成員。</p></li><li><p>FreeBSD 社群成員中活耀的測試人員。 他們願意花時間解決問題，對 FreeBSD 的變更及大方向提出專業建議並送交修補。</p></li><li><p>隨時關注的使用者，使用目前原始碼做為參考用途，或是偶爾提供意見或貢獻原始碼。</p></li></ol></div><div class=paragraph><p><em>不應</em>將 FreeBSD-CURRENT 當做下一個發行版前取得新功能的快速途徑，因為尚未發行的功能並未被完整測試，很可能有問題。這也不是一個快速取得問題修正的方式，因為任何已知的問題修正有可能產生新的問題。 使用 FreeBSD-CURRENT 不在 "官方支援" 的範圍內。</p></div><div class=paragraph><p>若要追蹤 FreeBSD-CURRENT：</p></div><div class="olist arabic"><ol class=arabic><li><p>加入 <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-current>freebsd-current</a> 和 <a href=http://lists.FreeBSD.org/mailman/listinfo/svn-src-head>svn-src-head</a> 郵遞論壇。這是 <em>重要</em> 的，是為了要了解目前人們對於系統目前狀態的評論並接收有關 FreeBSD-CURRENT 目前狀態的重要公告。</p><div class=paragraph><p><a href=http://lists.FreeBSD.org/mailman/listinfo/svn-src-head>svn-src-head</a> 郵遞論壇會記錄每一次修改的提交項目，以及可能產生的副作用的相關資訊。</p></div><div class=paragraph><p>要加入這兩個郵遞論壇，請前往 <a href=http://lists.FreeBSD.org/mailman/listinfo>http://lists.FreeBSD.org/mailman/listinfo</a> 點選要訂閱的郵遞論壇，並依照網頁指示的步驟操作。要追蹤整個原始碼樹，不單只有 FreeBSD-CURRENT 的變更，可訂閱 <a href=http://lists.FreeBSD.org/mailman/listinfo/svn-src-all>svn-src-all</a> 郵遞論壇。</p></div></li><li><p>同步 FreeBSD-CURRENT 原始碼。 通常會使用 <a href=../mirrors/#svn>svnlite</a> 自列於 <a href=../mirrors/#svn-mirrors>Subversion 鏡像站</a> 中的其中一個 Subversion 鏡像站的 <code>head</code> 分支中取出 -CURRENT 的程式碼。</p></li><li><p>考量到檔案庫的大小，部份使用者選擇只同步他們有興趣或貢獻修補的部份原始碼。然而， 計劃要從原始碼編譯整個作業系統的使用者須下載 <em>全部</em> 的 FreeBSD-CURRENT，不可只有選擇的部份。</p><div class=paragraph><p>編譯 FreeBSD-CURRENT 前，請仔細地閱讀 <span class=filename>/usr/src/Makefile</span> 並依照 <a href=#makeworld>從原始碼更新 FreeBSD</a> 的指示操作。 閱讀 <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-current>FreeBSD-CURRENT 郵遞論壇</a> 以及 <span class=filename>/usr/src/UPDATING</span> 來了解升級的相關資訊，有時會含有升級下一個發行版的必要資訊。</p></div></li><li><p>要活躍！我們非常鼓勵 FreeBSD-CURRENT 的使用者發表他們對加強哪些功能或是修復哪些錯誤的建議。 如果您在建議時能附上相關程式碼的話，是最好的。</p></li></ol></div></div><div class=sect2><h3 id=stable>23.4.2. 使用 FreeBSD-STABLE<a class=anchor href=#stable></a></h3><div class=paragraph><p>FreeBSD-STABLE 是一個開發分支，會在主要的版本更新後產生，進入這個分支的步伐會比較緩慢，而且通常會假定已經在 FreeBSD-CURRENT 中做過測試，所以問題會比較少，但這<em>仍然</em>是一個開發分支，在任何時間點，FreeBSD-STABLE 中的原始碼不能保証能供一般使用，它只是另一個開發支線，並不是供最終使用者使用的資源，若沒有任何資源可以做測試的使用者應改使用最新版本的 FreeBSD 發佈版。</p></div><div class=paragraph><p>對於那些有興趣追蹤或為 FreeBSD 開發流程提供一些貢獻的人，特別是針對下一個主要發佈版的 FreeBSD，應該考慮追蹤 FreeBSD-STABLE。</p></div><div class=paragraph><p>雖然 FreeBSD-STABLE 分支應該已經做過編譯並執行過，但這仍然無法保証不會出任何問題。由於使用 FreeBSD-STABLE 的人比 FreeBSD-CURRENT 更多，因此不可避免的，有時仍會在 FreeBSD-STABLE 中發現未在 FreeBSD-CURRENT 中出現的問題與特殊狀況。基於這個原因，任何人都不應盲目的追蹤 FreeBSD-STABLE，特別重要的是 <em>不</em> 要將任何產線上的伺服器更新成未經開發或測試環境中測試過的 FreeBSD-STABLE。</p></div><div class=paragraph><p>若要追蹤 FreeBSD-STABLE：</p></div><div class="olist arabic"><ol class=arabic><li><p>加入 <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable>freebsd-stable</a> 郵遞論壇來隨時了解 FreeBSD-STABLE 可能需要的編譯相依項目或任何需要特別注意的問題，當有一些有爭議的修復或更新時，開發人員也會在郵遞論壇中公告，如果有使用者對所提出的更改有任何的疑慮，可讓使用者有機會能反應問題。</p><div class=paragraph><p>加入要追蹤的分支所相關的 svn 郵遞論壇，例如，在追蹤 9-STABLE 分支的使用者會加入 <a href=http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-9>svn-src-stable-9</a> 郵遞論壇，該郵遞論壇會記錄每次變更的提交記錄，以及有關可能出現的副作用的任何相關訊息。</p></div><div class=paragraph><p>要加入這些郵遞論壇，請前往 <a href=http://lists.FreeBSD.org/mailman/listinfo>http://lists.FreeBSD.org/mailman/listinfo</a> 點選要訂閱的郵遞論壇，並依照網頁指示的步驟操作。要追蹤整個原始碼樹的變更，可訂閱 <a href=http://lists.FreeBSD.org/mailman/listinfo/svn-src-all>svn-src-all</a> 郵遞論壇。</p></div></li><li><p>要安裝新的 FreeBSD-STABLE 系統，可安裝在 <a href=../mirrors/#mirrors>FreeBSD 鏡像站</a> 中最近的 FreeBSD-STABLE 發佈版或使用每月使用 FreeBSD-STABLE 所編譯的快照 (Snapshot)，請參考 <a href=https://www.FreeBSD.org/snapshots/>www.freebsd.org/snapshots</a> 取得更多有關快照的資訊。</p><div class=paragraph><p>要編譯或升級已有的 FreeBSD 系統到 FreeBSD-STABLE 可使用 <a href=../mirrors/#svn>svn</a> 來取出欲升級的分支程式碼，可用分支的名稱如：<code>stable/9</code> 會列在 <a href=https://www.FreeBSD.org/releng/>www.freebsd.org/releng</a>。</p></div></li><li><p>編譯 FreeBSD-STABLE 前，請仔細地閱讀 <span class=filename>/usr/src/Makefile</span> 並依照 <a href=#makeworld>從原始碼更新 FreeBSD</a> 的指示操作。 閱讀 <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable>FreeBSD-STABLE 郵遞論壇</a> 以及 <span class=filename>/usr/src/UPDATING</span> 來了解升級的相關資訊，有時會含有升級下一個發行版的必要資訊。</p></li></ol></div></div></div></div><div class=sect1><h2 id=makeworld>23.5. 從原始碼更新 FreeBSD<a class=anchor href=#makeworld></a></h2><div class=sectionbody><div class=paragraph><p>從編譯原始碼來更新 FreeBSD 比起用 Binary 更新有幾項優點，在編譯程式碼時可以自訂選項來充分運用特定硬體，部份基礎系統可以使用非預設的設定值編譯，或是在不需要或不想要的時候跳過編譯。使用編譯的程序來更新系統比起安裝 Binary 來更新會耗時許多，但能夠完整自訂一個量身定做版本的 FreeBSD。</p></div><div class=sect2><h3 id=updating-src-quick-start>23.5.1. 快速開始<a class=anchor href=#updating-src-quick-start></a></h3><div class=paragraph><p>這是從原始碼編譯來更新 FreeBSD 的標準步驟快速的參考，稍後的章節會更詳細的說明這個程序。</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>更新並編譯</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># svnlite update /usr/src  </span><i class=conum data-value=1></i><b>(1)</b>
check /usr/src/UPDATING  <i class=conum data-value=2></i><b>(2)</b>
<span class=c># cd /usr/src          </span><i class=conum data-value=3></i><b>(3)</b>
<span class=c># make -j4 buildworld  </span><i class=conum data-value=4></i><b>(4)</b>
<span class=c># make -j4 kernel      </span><i class=conum data-value=5></i><b>(5)</b>
<span class=c># shutdown -r now      </span><i class=conum data-value=6></i><b>(6)</b>
<span class=c># cd /usr/src          </span><i class=conum data-value=7></i><b>(7)</b>
<span class=c># make installworld    </span><i class=conum data-value=8></i><b>(8)</b>
<span class=c># mergemaster -Ui      </span><i class=conum data-value=9></i><b>(9)</b>
<span class=c># shutdown -r now      </span><i class=conum data-value=10></i><b>(10)</b></code></pre></div></div></li></ol></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>取得最新版本的原始碼，請參考 <a href=#updating-src-obtaining-src>更新原始碼</a> 來了解更多取得與更新原始碼的資訊。</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>檢查 <span class=filename>/usr/src/UPDATING</span> 看是否有任後在原始碼編譯之前或之後需要手動操作的步驟。</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td>前往原始碼目錄。</td></tr><tr><td><i class=conum data-value=4></i><b>4</b></td><td>編譯世界 (World)，即除了核心 (Kernel) 外的所有東西。</td></tr><tr><td><i class=conum data-value=5></i><b>5</b></td><td>編譯並安裝核心，此動作等同於 <code>make buildkernel installkernel</code>。</td></tr><tr><td><i class=conum data-value=6></i><b>6</b></td><td>重新啟動系統以使用新的核心。</td></tr><tr><td><i class=conum data-value=7></i><b>7</b></td><td>前往原始碼目錄。</td></tr><tr><td><i class=conum data-value=8></i><b>8</b></td><td>安裝世界。</td></tr><tr><td><i class=conum data-value=9></i><b>9</b></td><td>更新與合併在 <span class=filename>/etc/</span> 中的設定檔案。</td></tr><tr><td><i class=conum data-value=10></i><b>10</b></td><td>重新啟動系統以使用新編譯好的世界與核心。</td></tr></tbody></table></div></div></div></div><div class=sect2><h3 id=updating-src-preparing>23.5.2. 準備原始碼更新<a class=anchor href=#updating-src-preparing></a></h3><div class=paragraph><p>閱讀 <span class=filename>/usr/src/UPDATING</span>，從原始碼編譯之前與之後任何需要手動操作步驟會在此檔案中說明。</p></div></div><div class=sect2><h3 id=updating-src-obtaining-src>23.5.3. 更新原始碼<a class=anchor href=#updating-src-obtaining-src></a></h3><div class=paragraph><p>FreeBSD 的原始碼位於 <span class=filename>/usr/src/</span>，較建議透過 Subversion 版本控制系統來更新這份原始碼，要確認原始碼已在版本控制系統的管控下可：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># svnlite info /usr/src</span>
Path: /usr/src
Working Copy Root Path: /usr/src
...</code></pre></div></div><div class=paragraph><p>此結果代表 <span class=filename>/usr/src/</span> 已在版本控制系統的管控下並且可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=svnlite&amp;sektion=1&amp;format=html">svnlite(1)</a> 來更新：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># svnlite update /usr/src</span></code></pre></div></div><div class=paragraph><p>若該目錄最近沒有更新過，可能會需要一些時間來完成更新動作。在更新完成之後，原始碼便為最新版本，並可開始依下一章節的說明來編譯程序。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=title>取得原始碼</div><div class=paragraph><p>若輸出結果顯示 <code>'/usr/src' is not a working copy</code> 代表有缺少檔案或原始碼是採用其他方式安裝，若是如此，便需重新取出 (checkout) 原始碼。</p></div><table id=updating-src-obtaining-src-repopath class="tableblock frame-all grid-all stretch"><caption class=title>表 1. FreeBSD 版本與檔案庫路徑</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">uname -r 的輸出結果</th><th class="tableblock halign-left valign-top">檔案庫路徑</th><th class="tableblock halign-left valign-top">說明</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code><em>X.Y</em>-RELEASE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>base/releng/</code><em>X.Y</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>發佈版本加上關鍵的安全性與錯誤修正，較建議大多數使用者使用這個分支。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code><em>X.Y</em>-STABLE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>base/stable/</code><em>X</em></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>發佈版本加上所有在該分支上其他開發中的程式，<em>STABLE</em> 代表不會更改應用程式 Binary 介面 (Applications Binary Interface, ABI)，所以在先前版本所編譯的軟體仍可以正常運作，舉例來說，被編譯在 FreeBSD 10.1 可執行的軟體在編譯完 FreeBSD 10-STABLE 之後仍可以執行。</p><p class=tableblock>STABLE 分支偶爾也會有錯誤或無法相容的問題會影響使用者，雖然這些問題通常會很快的被修正。</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code><em>X</em>-CURRENT</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>base/head/</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>最新未發佈的 FreeBSD 開發版本，CURRENT 分支可能會有重大錯誤或不相容的問題，只建議進階的使用者使用。</p></td></tr></tbody></table><div class=paragraph><p>查看 FreeBSD 目前使用的版本可使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=uname&amp;sektion=1&amp;format=html">uname(1)</a>：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># uname -r</span>
10.3-RELEASE</code></pre></div></div><div class=paragraph><p>根據 <a href=#updating-src-obtaining-src-repopath>FreeBSD 版本與檔案庫路徑</a>，要更新 <code>10.3-RELEASE</code> 需使用的原始碼檔案庫路徑為 <code>base/releng/10.3</code>，在取出 (checkout) 原始碼時便要使用這個路徑：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mv /usr/src /usr/src.bak  </span><i class=conum data-value=1></i><b>(1)</b>
<span class=c># svnlite checkout https://svn.freebsd.org/base/releng/10.3 /usr/src  </span><i class=conum data-value=2></i><b>(2)</b></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>將舊的目錄移到其他地方，若沒有在這個目錄做過任何本地修改，可直接刪除這個目錄。</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td>將從 <a href=#updating-src-obtaining-src-repopath>FreeBSD 版本與檔案庫路徑</a> 查到的路徑加到檔案庫 URL 之後。第三個參數用來存放本地系統原始碼的目標目錄。</td></tr></tbody></table></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=updating-src-building>23.5.4. 從原始碼編譯<a class=anchor href=#updating-src-building></a></h3><div class=paragraph><p>編譯世界 (<em>world</em>) 即編譯整個作業系統除了核心 (Kernel)，要先做這個動作以便提供最新的工具來編譯核心，接著便可編譯核心：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make buildworld</span>
<span class=c># make buildkernel</span></code></pre></div></div><div class=paragraph><p>編譯完的程式會寫入至 <span class=filename>/usr/obj</span>。</p></div><div class=paragraph><p>以上這些均為基本的步驟，用來控制編譯的其他選項在以下章節會說明。</p></div><div class=sect3><h4 id=updating-src-building-clean-build>23.5.4.1. 執行清除編譯<a class=anchor href=#updating-src-building-clean-build></a></h4><div class=paragraph><p>部份 FreeBSD 編譯系統版本會保留先前編譯的程式於暫存的物件目錄 <span class=filename>/usr/obj</span>，避免重新編譯那些尚未更動過的程式碼可加速後續的編譯動作，若要強制重新編譯所有東西可在開始編譯前使用 <code>cleanworld</code>：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make cleanworld</span></code></pre></div></div></div><div class=sect3><h4 id=updating-src-building-jobs>23.5.4.2. 設定工作數量<a class=anchor href=#updating-src-building-jobs></a></h4><div class=paragraph><p>在多核處理器上增加編譯工作的數量可增加編譯速度，可使用 <code>sysctl hw.ncpu</code> 來查看有多少核心，不同處理器使用不同版本的 FreeBSD 編譯系統，所以唯一能了解不同工作數量對編譯速度影響的方式便是測試。在一開始可考慮選擇一個介於 1/2 到 2 倍核心數之間的數值，工作的數量可使用 <code>-j</code> 來指定。</p></div><div id=updating-src-building-jobs-example class=exampleblock><div class=title>例 1. 增加編譯工作數</div><div class=content><div class=paragraph><p>使用四個工作來編譯世界與核心：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make -j4 buildworld buildkernel</span></code></pre></div></div></div></div></div><div class=sect3><h4 id=updating-src-building-only-kernel>23.5.4.3. 只編譯核心<a class=anchor href=#updating-src-building-only-kernel></a></h4><div class=paragraph><p>若原始碼有更動，便須執行 <code>buildworld</code>，完成之後，便可隨時執行 <code>buildkernel</code> 來編譯核心，若要只編譯核心可：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make buildkernel</span></code></pre></div></div></div><div class=sect3><h4 id=updating-src-building-custom-kernel>23.5.4.4. 編譯自訂核心<a class=anchor href=#updating-src-building-custom-kernel></a></h4><div class=paragraph><p>標準的 FreeBSD 核心是以一個名為 <span class=filename>GENERIC</span> 的<em>核心設定檔 (Kernel config file)</em>為基礎，<span class=filename>GENERIC</span> 核心中內含了所有最常用的裝置驅動程式與選項，有時這個檔案對編譯自訂核心也非常有用，可根據其來加入或移除裝置驅動程式或選項來滿足特定需求。</p></div><div class=paragraph><p>例如，要開發一個 RAM 受到嚴重限制的小型嵌入式電腦，便可移除不需要的裝置驅動程式或選項來縮小核心。</p></div><div class=paragraph><p>核心設定檔位於 <span class=filename>/usr/src/sys/arch/conf/</span>，其中使用的 <em>arch</em> 即為 <code>uname -m</code> 輸出的結果，大部份的電腦為 <code>amd64</code>，那其設定檔目錄則為 <span class=filename>/usr/src/sys/amd64/conf/</span>。</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p><span class=filename>/usr/src</span> 可以被刪除或重建，所以較建議將自訂核心設定檔放在另一個目錄，如 <span class=filename>/root</span>，並將核心設定檔以連結放至 <span class=filename>conf</span> 目錄，若該目錄被刪除或覆寫，便可重新建立一個新的核心設定的連結。</p></div></td></tr></tbody></table></div><div class=paragraph><p>自訂設定檔可由複製 <span class=filename>GENERIC</span> 設定檔來建立，在此範例，新的自訂核心要用在儲存伺服器，所以將其命名為 <span class=filename>STORAGESERVER</span>：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cp /usr/src/sys/amd64/conf/GENERIC /root/STORAGESERVER</span>
<span class=c># cd /usr/src/sys/amd64/conf</span>
<span class=c># ln -s /root/STORAGESERVER .</span></code></pre></div></div><div class=paragraph><p>接著編譯 <span class=filename>/root/STORAGESERVER</span>，要加入或移除裝置或選項可見 <a href="https://man.freebsd.org/cgi/man.cgi?query=config&amp;sektion=5&amp;format=html">config(5)</a>。</p></div><div class=paragraph><p>自訂核心要在指令列設定 <code>KERNCONF</code> 為核心設定檔來編譯：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make buildkernel KERNCONF=STORAGESERVER</span></code></pre></div></div></div></div><div class=sect2><h3 id=updating-src-installing>23.5.5. 安裝編譯好的程式<a class=anchor href=#updating-src-installing></a></h3><div class=paragraph><p>在完成 <code>buildworld</code> 與 <code>buildkernel</code> 兩個步驟之後，便可安裝新的核心與世界：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make installkernel</span>
<span class=c># shutdown -r now</span>
<span class=c># cd /usr/src</span>
<span class=c># make installworld</span>
<span class=c># shutdown -r now</span></code></pre></div></div><div class=paragraph><p>若使用自訂核心，則同樣須設定 <code>KERNCONF</code> 來使用新的自訂核心：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span>
<span class=c># make installkernel KERNCONF=STORAGESERVER</span>
<span class=c># shutdown -r now</span>
<span class=c># cd /usr/src</span>
<span class=c># make installworld</span>
<span class=c># shutdown -r now</span></code></pre></div></div></div><div class=sect2><h3 id=updating-src-completing>23.5.6. 完成更新<a class=anchor href=#updating-src-completing></a></h3><div class=paragraph><p>還有最後一些的工作要做來完成更新，任何修改過的設定檔要與新版本的設定檔合併、移除找到的過時程式庫，然後重新啟動系統。</p></div><div class=sect3><h4 id=updating-src-completing-merge-mergemaster>23.5.6.1. 使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> 合併設定檔案<a class=anchor href=#updating-src-completing-merge-mergemaster></a></h4><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> 可簡單的將修改過的系統設定檔與新版設定檔合併。</p></div><div class=paragraph><p>使用 <code>-Ui</code>，<a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> 會自動更新那些未被使用者修改過的設定檔並安裝尚不存在的檔案：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mergemaster -Ui</span></code></pre></div></div><div class=paragraph><p>若檔案需要手動合併，會有互動式介面可讓使用者選擇要保留那一邊的檔案，請參考 <a href="https://man.freebsd.org/cgi/man.cgi?query=mergemaster&amp;sektion=8&amp;format=html">mergemaster(8)</a> 取得更多資訊。</p></div></div><div class=sect3><h4 id=updating-src-completing-check-old>23.5.6.2. 檢查過時的檔案與程式庫<a class=anchor href=#updating-src-completing-check-old></a></h4><div class=paragraph><p>部份廢棄的檔案或目錄可以在更新之後保留，可使用以下指令找出這些檔案：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make check-old</span></code></pre></div></div><div class=paragraph><p>並用以下指令刪除：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make delete-old</span></code></pre></div></div><div class=paragraph><p>部份廢棄的程式庫也可以保留下來，可使用以下指令來偵測這些程式庫：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make check-old-libs</span></code></pre></div></div><div class=paragraph><p>並使用以下指令刪除</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make delete-old-libs</span></code></pre></div></div><div class=paragraph><p>那些仍使用舊程式庫的程式將在刪除程式庫之後無法正常運作，而這些程式須要在刪除舊程式庫之後重新編譯或更換。</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>當確認所有舊檔案或目錄可安全的刪除時，要避免刪除每一個檔案時均需按下 <kbd>y</kbd> 與 <kbd>Enter</kbd> 鍵可在指令設定 <code>BATCH_DELETE_OLD_FILES</code>，例如：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make BATCH_DELETE_OLD_FILES=yes delete-old-libs</span></code></pre></div></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=updating-src-completing-restart>23.5.6.3. 更新後重新啟動<a class=anchor href=#updating-src-completing-restart></a></h4><div class=paragraph><p>更新之後的最後一個步驟便是重新啟動電腦，來讓所有的變更生效：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown -r now</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=small-lan>23.6. 多部機器追蹤<a class=anchor href=#small-lan></a></h2><div class=sectionbody><div class=paragraph><p>當有多部主機需要追蹤相同的原始碼樹，要在每一部主機的系統下載原始碼與重新編譯所有的東西會耗費不少磁碟空間、網路頻寬與 CPU 運算，要解決這個問題的方法是先在一部主機上做完大部份的工作，而其餘的主機透過 NFS 掛載使用編譯完的成果。本節會介紹如何做這件事。要取得更多有關使用 NFS 的資訊請參考 <a href=../network-servers/#network-nfs>網路檔案系統 (NFS)</a>。</p></div><div class=paragraph><p>首先，要先確認要執行同一組 Binary 的一群主機，這群主機又稱作 <em>建置集 (Build set)</em>，其中每部主機可以有自己的自訂核心，但會執行相同的 Userland binary。建置集中需挑選一部做為<em>建置主機 (Build machine)</em>，這部主機將會拿來編譯 World 與核心 (Kernel)，理想情況下，要挑選一部速度較快、有足夠的 CPU 能夠執行 <code>make buildworld</code> 與 <code>make buildkernel</code> 的主機。</p></div><div class=paragraph><p>再挑選一部主機做為<em>測試主機 (Test machine)</em>，這部主機,要在將系統更新上正式運作的環境前做測試，這<em>必須</em>一部能夠承受服務停止一段時間的主機，它也可是同時是建置主機，但不是一定要。</p></div><div class=paragraph><p>所有在此建置集中的主機需要透過 NFS 掛載在建置主機上的 <span class=filename>/usr/obj</span> 與 <span class=filename>/usr/src</span>。在有多個建置集時，<span class=filename>/usr/src</span> 也應放在其中一部建置主機，然後由其他主機使用 NFS 掛載。</p></div><div class=paragraph><p>確保在建置集中的所有主機的 <span class=filename>/etc/make.conf</span> 及 <span class=filename>/etc/src.conf</span> 與建置主機一致，這是由於建置主機必須編譯整個基礎系統 (Base system) 給所有建置集中的主機安裝。此外，每一部建置主機應在 <span class=filename>/etc/make.conf</span> 使用 <code>KERNCONF</code> 設定其核心名稱，且建置主機應列出所有要編譯的核心名稱在 <code>KERNCONF</code>，並且把自己要用的核心放在第一個。建置主機也必須有每部主機的核心設定檔在其 <span class=filename>/usr/src/sys/arch/conf</span>。</p></div><div class=paragraph><p>在建置主機上，編譯核心與 World 如 <a href=#makeworld>從原始碼更新 FreeBSD</a> 所述，但不要在建置主機上安裝所有編譯好的東西，而是要將編譯好的核心安裝到測試主機，在測試主機透過 NFS 掛載 <span class=filename>/usr/src</span> 及 <span class=filename>/usr/obj</span>。然後執行 <code>shutdown now</code> 進入單使用者模式來安裝新的核心與 World 並如同往常執行 <code>mergemaster</code>。完成之後，重新開機回到正常的多使用者模式運作。</p></div><div class=paragraph><p>在測試主機上檢驗完所有東西皆運作正常之後，使用相同的程序將編譯好的結果安裝到在建置集中的其他主機。</p></div><div class=paragraph><p>同樣的方法也可用在 Port 樹，第一個步驟是透過 NFS 共享 <span class=filename>/usr/ports</span> 給所有在建置集中的主機。要設定 <span class=filename>/etc/make.conf</span> 使用共享的 distfiles，可設定 <code>DISTDIR</code> 為由 NFS 掛載對應到的使用者 <code>root</code> 可寫入的通用共享目錄。每一台主機應設定 <code>WRKDIRPREFIX</code> 到一個本地的編譯目錄，若 Port 要在本地編譯。或者，若建置系統要編譯並散佈套件到建置集中的主機可在建置系統上設定 <code>PACKAGES</code> 到一個類似 <code>DISTDIR</code> 的目錄。</p></div></div></div></div><hr><div class=last-modified><p><strong>最後修改於</strong>: March 9, 2024 由 <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/zh-tw/books/handbook/l10n class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/zh-tw/books/handbook/dtrace class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#updating-upgrading-synopsis>23.1. 概述</a></li><li><a href=#updating-upgrading-freebsdupdate>23.2. FreeBSD 更新</a></li><li><a href=#updating-upgrading-documentation>23.3. 更新文件集</a></li><li><a href=#current-stable>23.4. 追蹤開發分支</a></li><li><a href=#makeworld>23.5. 從原始碼更新 FreeBSD</a></li><li><a href=#small-lan>23.6. 多部機器追蹤</a></li></ul></nav><hr><div class=resources><h3>資源</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="下載 PDF"></i><a href=https://download.freebsd.org/doc/zh-tw/books/handbook/handbook_zh-tw.pdf>下載 PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title=編輯此頁></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/zh-tw/_index target=_blank>編輯此頁</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/zh-tw/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt=選擇語言>
<span>繁體中文</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>淺色</option><option value=theme-dark>深色</option><option value=theme-high-contrast>高對比</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/zh-tw class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/zh-tw/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>