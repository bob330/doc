<!doctype html><html class=theme-light lang=zh-tw><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/><title>章 2. 程式開發工具 | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="章 2. 程式開發工具"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="zh-tw"><meta property="og:url" content="http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/zh-tw\/books\/developers-handbook\/tools\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/zh-tw>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books>Books</a></li><li><a href=http://172.16.201.134:1313/zh-tw/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/zh-tw/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=zh-tw>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-b1b18a35567534d1699b4dd27b58b2ff class=toggle>
<label for=chapter-b1b18a35567534d1699b4dd27b58b2ff><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/parti/>Part I. Grundlagen</a></li><li><input type=checkbox id=chapter-3af9d0cd3607fbe44d37e3a13957c40f class=toggle>
<label class="icon cursor" for=chapter-3af9d0cd3607fbe44d37e3a13957c40f><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/introduction/>章 1. 簡介</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/introduction/#introduction-devel>1.1. 在 FreeBSD 開發程式</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/introduction/#introduction-bsdvision>1.2. The BSD Vision</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/introduction/#introduction-archguide>1.3. 程式架構指南</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/introduction/#introduction-layout>1.4. <span class=filename>/usr/src</span> 的架構</a></li></ul></li><li><input type=checkbox id=chapter-15219234c513f9a79d9cb2d3bcf73d13 class=toggle checked>
<label class="icon cursor" for=chapter-15219234c513f9a79d9cb2d3bcf73d13><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/>章 2. 程式開發工具</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#tools-synopsis>2.1. 概敘</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#tools-intro>2.2. 簡介</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#tools-programming>2.3. Programming 概念</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#tools-compiling>2.4. 用 <code>cc</code> 來編譯程式</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#tools-make>2.5. Make</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#debugging>2.6. Debugging</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#emacs>2.7. Using Emacs as a Development Environment</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/tools/#tools-reading>2.8. Further Reading</a></li></ul></li><li><input type=checkbox id=chapter-7319f5d899d5be33daaf1f2d5f180558 class=toggle>
<label class="icon cursor" for=chapter-7319f5d899d5be33daaf1f2d5f180558><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/>章 3. Secure Programming</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/#secure-synopsis>3.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/#secure-philosophy>3.2. Secure Design Methodology</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/#secure-bufferov>3.3. Buffer Overflows</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/#secure-setuid>3.4. SetUID issues</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/#secure-chroot>3.5. Limiting your program’s environment</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/#secure-trust>3.6. Trust</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure/#secure-race-conditions>3.7. Race Conditions</a></li></ul></li><li><input type=checkbox id=chapter-0240ccaf7010beed911378cfab7bd8fc class=toggle>
<label class="icon cursor" for=chapter-0240ccaf7010beed911378cfab7bd8fc><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/l10n/>章 4. Localization and Internationalization - L10N and I18N</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/l10n/#l10n-programming>4.1. Programming I18N Compliant Applications</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/l10n/#posix-nls>4.2. Localized Messages with POSIX.1 Native Language Support (NLS)</a></li></ul></li><li><input type=checkbox id=chapter-c3107aaf64e60e1ee09bc33fc9fd641a class=toggle>
<label class="icon cursor" for=chapter-c3107aaf64e60e1ee09bc33fc9fd641a><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/policies/>章 5. Source Tree Guidelines and Policies</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/policies/#policies-style>5.1. Style Guidelines</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/policies/#policies-maintainer>5.2. <code>MAINTAINER</code> on Makefiles</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/policies/#policies-contributed>5.3. Contributed Software</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/policies/#policies-encumbered>5.4. Encumbered Files</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/policies/#policies-shlib>5.5. Shared Libraries</a></li></ul></li><li><input type=checkbox id=chapter-c7b4fd5a7f8f049234fe3bc225acef44 class=toggle>
<label class="icon cursor" for=chapter-c7b4fd5a7f8f049234fe3bc225acef44><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/testing/>章 6. Regression and Performance Testing</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/testing/#testing-micro-benchmark>6.1. Micro Benchmark Checklist</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/testing/#testing-tinderbox>6.2. The FreeBSD Source Tinderbox</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/testing/#_the_index_cgi_script>6.3. The <span class=filename>index.cgi</span> Script</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/testing/#_official_build_servers>6.4. Official Build Servers</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/testing/#_official_summary_site>6.5. Official Summary Site</a></li></ul></li><li><input type=checkbox id=chapter-1f9b02a65f2bc5d4015a050d706fa837 class=toggle>
<label for=chapter-1f9b02a65f2bc5d4015a050d706fa837><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/partii/>Part II. Interprozess-Kommunikation</a></li><li><input type=checkbox id=chapter-5e03777f678dd5731a581d7956d19c13 class=toggle>
<label class="icon cursor" for=chapter-5e03777f678dd5731a581d7956d19c13><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/>章 7. Sockets</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/#sockets-synopsis>7.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/#sockets-diversity>7.2. Networking and Diversity</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/#sockets-protocols>7.3. Protocols</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/#sockets-model>7.4. The Sockets Model</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/#sockets-essential-functions>7.5. Essential Socket Functions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/#sockets-helper-functions>7.6. Helper Functions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/sockets/#sockets-concurrent-servers>7.7. Concurrent Servers</a></li></ul></li><li><input type=checkbox id=chapter-5cbeeaa29a95a5f152e5ccc3901d0fd3 class=toggle>
<label class="icon cursor" for=chapter-5cbeeaa29a95a5f152e5ccc3901d0fd3><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/ipv6/>章 8. IPv6 Internals</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/ipv6/#ipv6-implementation>8.1. IPv6/IPsec Implementation</a></li></ul></li><li><input type=checkbox id=chapter-c9a07b517dc2e43d169c8e013e23cfc1 class=toggle>
<label for=chapter-c9a07b517dc2e43d169c8e013e23cfc1><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/partiii/>Part III. Kernel</a></li><li><input type=checkbox id=chapter-db22f8e5e5e9496dbc711815e2e05f36 class=toggle>
<label class="icon cursor" for=chapter-db22f8e5e5e9496dbc711815e2e05f36><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kernelbuild/>章 9. Building and Installing a FreeBSD Kernel</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kernelbuild/#kernelbuild-traditional>9.1. Building the Faster but Brittle Way</a></li></ul></li><li><input type=checkbox id=chapter-3036877c53948cfb76174f2776bbdf64 class=toggle>
<label class="icon cursor" for=chapter-3036877c53948cfb76174f2776bbdf64><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/>章 10. Kernel Debugging</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-obtain>10.1. Obtaining a Kernel Crash Dump</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-gdb>10.2. Debugging a Kernel Crash Dump with <code>kgdb</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-online-ddb>10.3. On-Line Kernel Debugging Using DDB</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-online-gdb>10.4. On-Line Kernel Debugging Using Remote GDB</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-console>10.5. Debugging a Console Driver</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-deadlocks>10.6. Debugging Deadlocks</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-dcons>10.7. Kernel debugging with Dcons</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/kerneldebug/#kerneldebug-options>10.8. Glossary of Kernel Options for Debugging</a></li></ul></li><li><input type=checkbox id=chapter-86707094ce48d6e89e5f45569c084cea class=toggle>
<label for=chapter-86707094ce48d6e89e5f45569c084cea><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/partiv/>Part IV. Architekturen</a></li><li><input type=checkbox id=chapter-43b1e1e6d2a94eb8b161876bc22ce644 class=toggle>
<label class="icon cursor" for=chapter-43b1e1e6d2a94eb8b161876bc22ce644><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/>章 11. x86 Assembly Language Programming</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-intro>11.1. Synopsis</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-the-tools>11.2. The Tools</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-system-calls>11.3. System Calls</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-return-values>11.4. Return Values</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-portable-code>11.5. Creating Portable Code</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-first-program>11.6. Our First Program</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-unix-filters>11.7. Writing UNIX® Filters</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-buffered-io>11.8. Buffered Input and Output</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-command-line>11.9. Command Line Arguments</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-environment>11.10. UNIX® Environment</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-files>11.11. Working with Files</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-one-pointed-mind>11.12. One-Pointed Mind</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-fpu>11.13. Using the FPU</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-caveats>11.14. Caveats</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/x86/#x86-acknowledgements>11.15. Acknowledgements</a></li></ul></li><li><input type=checkbox id=chapter-c49dfe630861d471fb2f58f5b554ed84 class=toggle>
<label for=chapter-c49dfe630861d471fb2f58f5b554ed84><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/partv/>Part V. Appendices</a></li><li><input type=checkbox id=chapter-ac9541a3f38001d13964c1b0b324bb83 class=toggle>
<label for=chapter-ac9541a3f38001d13964c1b0b324bb83><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/bibliography/>附錄</a></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>章 2. 程式開發工具</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#tools-synopsis>2.1. 概敘</a></li><li><a href=#tools-intro>2.2. 簡介</a></li><li><a href=#tools-programming>2.3. Programming 概念</a></li><li><a href=#tools-compiling>2.4. 用 <code>cc</code> 來編譯程式</a></li><li><a href=#tools-make>2.5. Make</a></li><li><a href=#debugging>2.6. Debugging</a></li><li><a href=#emacs>2.7. Using Emacs as a Development Environment</a></li><li><a href=#tools-reading>2.8. Further Reading</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody></div></div><div class=sect1><h2 id=tools-synopsis>2.1. 概敘<a class=anchor href=#tools-synopsis></a></h2><div class=sectionbody><div class=paragraph><p>本章將介紹如何使用一些 FreeBSD 所提供的程式開發工具(programing tools)， 本章所介紹的工具程式在其他版本的 上也可使用， 在此 <em>並不會</em> 嘗試描述寫程式時的每個細節， 本章大部分篇幅都是假設你以前沒有或只有少數的寫程式經驗， 不過，還是希望大多數的程式開發人員都能從中重新得到一些啟發。</p></div></div></div><div class=sect1><h2 id=tools-intro>2.2. 簡介<a class=anchor href=#tools-intro></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD 提供一個非常棒的開發環境， 比如說像是 C、C++、Fortran 和 assembler(組合語言)的編譯器(compiler), 在 FreeBSD 中都已經包含在基本的系統中了 更別提 Perl 和其他標準 工具，像是<code>sed</code> 以及 <code>awk</code>， 如果你還是覺得不夠，FreeBSD在 Ports collection 中還提供其他的編譯器和直譯器(interpreter), FreeBSD 相容許多標準，像是 和 ANSI C， 當然還有它所繼承的 BSD 傳統。 所以在 FreeBSD 上寫的程式不需修改或頂多稍微修改，就可以在許多平台上編譯、執行。</p></div><div class=paragraph><p>無論如何，就算你從來沒在 平台上寫過程式，也可以徹底感受到FreeBSD 令人無法抗拒的迷人魔力。 本章的目標就是協助你快速上手，而暫時不需深入太多進階主題， 並且講解一些基礎概念，以讓你可以瞭解我們在講些什麼。</p></div><div class=paragraph><p>本章內容並不要求你得有程式開發經驗，或者你只有一點點的經驗而已。 不過，我們假設你已經會 系統的基本操作， 而且更重要的是，請保持樂於學習的心態！</p></div></div></div><div class=sect1><h2 id=tools-programming>2.3. Programming 概念<a class=anchor href=#tools-programming></a></h2><div class=sectionbody><div class=paragraph><p>簡單的說，程式只是一堆指令的集合體；而這些指令是用來告訴電腦應該要作那些事情。 有時候，指令的執行取決於前一個指令的結果而定。 本章將會告訴你有 2 個主要的方法，讓你可以對電腦下達這些指示(instruction) 或 "命令(commands)"。 第一個方法就是 <em>直譯器(interpreter)</em>， 而第二個方法是 <em>編譯器(compiler)</em>。 由於對於電腦而言，人類語言的語意過於模糊而太難理解， 因此命令(commands)就常會以一種(或多種)程式語言寫成，用來指示電腦所要執行的特定動作為何。</p></div><div class=sect2><h3 id=_直譯器>2.3.1. 直譯器<a class=anchor href=#_直譯器></a></h3><div class=paragraph><p>使用直譯器時，所使用的程式語言就像變成一個會和你互動的環境。 當在命令提示列上打上命令時，直譯器會即時執行該命令。 在比較複雜的程式中，可以把所有想下達的命令統統輸入到某檔案裡面去， 然後呼叫直譯器去讀取該檔案，並且執行你寫在這個檔案中的指令。 如果所下的指令有錯誤產生，大多數的直譯器會進入偵錯模式(debugger)， 並且顯示相關錯誤訊息，以便對程式除錯。</p></div><div class=paragraph><p>這種方式好處在於：可以立刻看到指令的執行結果，以及錯誤也可迅速修正。 相對的，最大的壞處便是當你想把你寫的程式分享給其他人時，這些人必須要有跟你一樣的直譯器。 而且別忘了，他們也要會使用直譯器直譯程式才行。 當然使用者也不希望不小心按錯鍵，就進入偵錯模式而不知所措。 就執行效率而言，直譯器會使用到很多的記憶體， 而且這類直譯式程式，通常並不會比編譯器所編譯的程式的更有效率。</p></div><div class=paragraph><p>筆者個人認為，如果你之前沒有學過任何程式語言，最好先學學習直譯式語言(interpreted languages)， 像是 Lisp，Smalltalk，Perl 和 Basic 都是， 的 shell 像是 <code>sh</code> 和 <code>csh</code> 它們本身就是直譯器，事實上，很多人都在它們自己機器上撰寫各式的 shell "script"， 來順利完成各項 "housekeeping(維護)" 任務。 的使用哲學之一就是提供大量的小工具， 並使用 shell script 來組合運用這些小工具，以便工作更有效率。</p></div></div><div class=sect2><h3 id=_freebsd_提供的直譯器>2.3.2. FreeBSD 提供的直譯器<a class=anchor href=#_freebsd_提供的直譯器></a></h3><div class=paragraph><p>下面這邊有份 Ports Collection 所提供的直譯器清單，還有討論一些比較受歡迎的直譯式語言</p></div><div class=paragraph><p>至於如何使用 Ports Collection 安裝的說明，可參閱 FreeBSD Handbook 中的 <a href=https://docs.freebsd.org/en/books/handbook/ports#ports-using>Ports章節</a>。</p></div><div class=dlist><dl><dt class=hdlist1>BASIC</dt><dd><p>BASIC 是 Beginner’s ALL-purpose Symbolic Instruction Code 的縮寫。 BASIC 於 1950 年代開始發展，最初開發這套語言的目的是為了教導當時的大學學生如何寫程式。 到了 1980，BASIC已經是很多 programmer 第一個學習的程式語言了。 此外，BASIC 也是 Visual Basic 的基礎。</p><div class=paragraph><p>FreeBSD Ports Collection 也有收錄相關的 BASIC 直譯器。 Bywater Basic 直譯器放在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/bwbasic/>lang/bwbasic</a>。 而 Phil Cockroft’s Basic 直譯器(早期也叫 Rabbit Basic)放在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/pbasic/>lang/pbasic</a>。</p></div></dd><dt class=hdlist1>Lisp</dt><dd><p>LISP 是在 1950 年代開始發展的一個直譯式語言，而且 LISP 就是一種 "number-crunching" languages(迅速進行大量運算的程式語言)，在當時算是一個普遍的程式語言。 LISP 的表達不是基於數字(numbers)，而是基於表(lists)。 而最能表示出 LISP 特色的地方就在於： LISP 是 "List Processing" 的縮寫。 在人工智慧(Artificial Intelligence, AI)領域上 LISP 的各式應用非常普遍。</p><div class=paragraph><p>LISP 是非常強悍且複雜的程式語言，但是缺點是程式碼會非常大而且難以操作。</p></div><div class=paragraph><p>絕大部分的 LISP 直譯器都可以在 系統上運作，當然 的 Ports Collection 也有收錄。 GNU Common Lisp 收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/gcl/>lang/gcl</a>， Bruno Haible 和 Michael Stoll 的 CLISP 收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/clisp/>lang/clisp</a> ，此外 CMUCL(包含一個已經最佳化的編譯器)， 以及其他簡化版的 LISP 直譯器(比如以 C 語言寫的 SLisp，只用幾百行程式碼就實作大多數 Common Lisp 的功能) 則是分別收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/cmucl/>lang/cmucl</a> 以及 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/slisp/>lang/slisp</a>。</p></div></dd><dt class=hdlist1>Perl</dt><dd><p>對系統管理者而言，最愛用 perl 來撰寫 scripts 以管理主機， 同時也經常用來寫 WWW 主機上的 CGI Script 程式。</p><div class=paragraph><p>Perl 在 Ports Collection 內的 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/perl5/>lang/perl5</a>。 而 4.X 則是把 Perl 裝在 <code>/usr/bin/perl</code>。</p></div></dd><dt class=hdlist1>Scheme</dt><dd><p>Scheme 是 LISP 的另一分支，Scheme 的特點就是比 Common LISP 還要簡潔有力。 由於 Scheme 簡單，所以很多大學拿來當作第一堂程式語言教學教材。 而且對於研究人員來說也可以快速的開發他們所需要的程式。</p><div class=paragraph><p>Scheme 收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/elk/>lang/elk</a>， Elk Scheme 直譯器(由麻省理工學院所發展的 Scheme 直譯器)收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/mit-scheme/>lang/mit-scheme</a>， SCM Scheme Interpreter 收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/scm/>lang/scm</a>。</p></div></dd><dt class=hdlist1>Icon</dt><dd><p>Icon 屬高階程式語言，Icon 具有強大的字串(String)和結構(Structure)處理能力。 Ports Collection 所收錄的 Icon 直譯器版本則是放在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/icon/>lang/icon</a>。</p></dd><dt class=hdlist1>Logo</dt><dd><p>Logo 是種容易學習的程式語言，最常在一些教學課程中被拿來當作開頭範例。 如果要給小朋友開始上程式語言課的話，Logo 是相當不錯的選擇。 因為，即使對小朋友來說，要用 Logo 來秀出複雜多邊形圖形是相當輕鬆容易的。</p><div class=paragraph><p>Logo 在 Ports Collection 的最新版則是放在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/logo/>lang/logo</a>。</p></div></dd><dt class=hdlist1>Python</dt><dd><p>Python 是物件導向的直譯式語言， Python 的擁護者總是宣稱 Python 是最好入門的程式語言。 雖然 Python 可以很簡單的開始，但是不代表它就會輸給其他直譯式語言(像是 Perl 和 Tcl)， 事實證明 Python 也可以拿來開發大型、複雜的應用程式。</p><div class=paragraph><p>Ports Collection 收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/python/>lang/python</a>。</p></div></dd><dt class=hdlist1>Ruby</dt><dd><p>Ruby 是純物件導向的直譯式語言。 Ruby 目前非常流行，原因在於他易懂的程式語法結構，在撰寫程式時的彈性， 以及天生具有輕易的發展維護大型專案的能力。</p><div class=paragraph><p>Ports Collection 收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/ruby8/>lang/ruby8</a>。</p></div></dd><dt class=hdlist1>Tcl and Tk</dt><dd><p>Tcl 是內嵌式的直譯式語言，讓 Tcl 可以如此廣泛運用的原因是 Tcl 的移植性。 Tcl 也可以快速發展一個簡單但是具有雛型的程式或者具有完整功能的程式。</p><div class=paragraph><p>Tcl 許多的版本都可在 上運作，而最新的 Tcl 版本為 Tcl 8.4， Ports Collection 收錄在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/tcl84/>lang/tcl84</a>。</p></div></dd></dl></div></div><div class=sect2><h3 id=_編譯器>2.3.3. 編譯器<a class=anchor href=#_編譯器></a></h3><div class=paragraph><p>編譯器和直譯器兩者相比的話，有些不同，首先就是必須先把程式碼統統寫入到檔案裡面， 然後必須執行編譯器來試著編譯程式，如果編譯器不接受所寫的程式，那就必須一直修改程式， 直到編譯器接受且把你的程式編譯成執行檔。 此外，也可以在提示命令列，或在除錯器中執行你編譯好的程式看看它是否可以運作。</p></div><div class=paragraph><p>很明顯的，使用編譯器並不像直譯器般可以馬上得到結果。 不管如何，編譯器允許你作很多直譯器不可能或者是很難達到的事情。 例如：撰寫和作業系統密切互動的程式，甚至是你自己寫的作業系統！ 當你想要寫出高效率的程式時，編譯器便派上用場了。 編譯器可以在編譯時順便最佳化你的程式，但是直譯器卻不行。 而編譯器與直譯器最大的差別在於：當你想把你寫好的程式拿到另外一台機器上跑時， 你只要將編譯器編譯出來的可執行檔，拿到新機器上便可以執行， 而直譯器則必須要求新機器上，必須要有跟另一台機器上相同的直譯器， 才能組譯執行你的程式！</p></div><div class=paragraph><p>編譯式的程式語言包含 Pascal、C 和 c++， C 和 c++ 不是一個親和力十足的語言，但是很適合具有經驗的 Programmer。 Pascal 其實是一個設計用來教學用的程式語言，而且也很適合用來入門， 預設並沒有把 Pascal 整合進 base system 中， 但是 GNU Pascal Compiler 和 Free Pascal Compiler 都可分別在 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/gpc/>lang/gpc</a> 和 <a class=package href=https://cgit.freebsd.org/ports/tree/lang/fpc/>lang/fpc</a> 中找到。</p></div><div class=paragraph><p>如果你用不同的程式來寫編譯式程式，那麼不斷地編輯-編譯-執行-除錯的這個循環肯定會很煩人， 為了更簡化、方便程式開發流程，很多商業編譯器廠商開始發展所謂的 IDE (Integrated Development Environments) 開發環境， FreeBSD 預設並沒有把 IDE 整合進 base system 中， 但是你可透過 <a class=package href=https://cgit.freebsd.org/ports/tree/devel/kdevelop/>devel/kdevelop</a> 安裝 kdevelop 或使用 Emacs 來體驗 IDE 開發環境。 在後面的 <a href=#emacs>Using Emacs as a Development Environment</a> 專題將介紹，如何以 Emacs 來作為 IDE 開發環境。</p></div></div></div></div><div class=sect1><h2 id=tools-compiling>2.4. 用 <code>cc</code> 來編譯程式<a class=anchor href=#tools-compiling></a></h2><div class=sectionbody><div class=paragraph><p>本章範例只有針對 GNU C compiler 和 GNU C++ compiler 作說明， 這兩個在 FreeBSD base system 中就有了， 直接打 <code>cc</code> 或 <code>gcc</code> 就可以執行。 至於，如何用直譯器產生程式的說明，通常可在直譯器的文件或線上文件找到說明，因此不再贅述。</p></div><div class=paragraph><p>當你寫完你的傑作後，接下來便是讓這個程式可以在 FreeBSD 上執行， 通常這些要一些步驟才能完成，有些步驟則需要不同程式來完成。</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>預先處理(Pre-process)你的程式碼，移除程式內的註解，和其他技巧， 像是 expanding(擴大) C 的 marco。</p></li><li><p>確認你的程式語法是否確實遵照 C/C++ 的規定，如果沒有符合的話，編譯器會出現警告。</p></li><li><p>將原始碼轉成組合語言 它跟機器語言(machine code)非常相近，但仍在人類可理解的範圍內(據說應該是這樣)。</p></li><li><p>把組合語言轉成機器語言 是的，這裡說的機器語言就是常提到的 bit 和 byte，也就是 1 和 0。</p></li><li><p>確認程式中用到的函式呼叫、全域變數是否正確，舉例來說：如若呼叫了不存在的函式，編譯器會顯示警告。</p></li><li><p>如果程式是由程式碼檔案來編譯，編譯器會整合起來。</p></li><li><p>編譯器會負責產生東西，讓系統上的 run-time loader 可以把程式載入記憶體內執行。</p></li><li><p>最後會把編譯完的執行檔存在硬碟上。</p></li></ol></div></div></div><div class=paragraph><p>通常 <em>編譯(compiling)</em> 是指第 1 到第 4 個步驟。 其他步驟則稱為 <em>連結(linking)</em>， 有時候步驟 1 也可以是指 <em>預先處理(pre-processing)</em>， 而步驟 3 到步驟 4 則是 <em>組譯(assembling)</em>。</p></div><div class=paragraph><p>幸運的是，你可以不用理會以上細節，編譯器都會自動完成。 因為 <code>cc</code> 只是是個前端程式(front end)，它會依照正確的參數來呼叫相關程式幫你處理。 只需打：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc foobar.c</code></pre></div></div><div class=paragraph><p>上述指令會把 <span class=filename>foobar.c</span> 開始編譯，並完成上述動作。 如果你有許多檔案需要編譯，那請打類似下列指令即可：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc foo.c bar.c</code></pre></div></div><div class=paragraph><p>記住語法錯誤檢查就是 純粹檢查語法錯誤與否， 而不會幫你檢測任何邏輯錯誤，比如：無限迴圈，或是排序方式想用 binary sort 卻弄成 bubble sort。</p></div><div class=paragraph><p><code>cc</code> 有非常多的選項，都可透過線上手冊來查。 下面只提一些必要且重要的選項，以作為例子。</p></div><div class=dlist><dl><dt class=hdlist1><code>-o <em>檔名</em></code></dt><dd><p><code>-o</code> 編譯後的執行檔檔名，如果沒有使用這選項的話， 編譯好的程式預設檔名將會是 <span class=filename>a.out</span></p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc foobar.c               執行檔就是 a.out
% cc <span class=nt>-o</span> foobar foobar.c     執行檔就是 foobar</code></pre></div></div></dd><dt class=hdlist1><code>-c</code></dt><dd><p>使用 <code>-c</code> 時，只會編譯原始碼，而不作連結(linking)。 當只想確認語法是否正確或使用 Makefile 來編譯程式時，這個選項非常有用。</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell> % cc <span class=nt>-c</span> foobar.c</code></pre></div></div><div class=paragraph><p>這會產生叫做 <span class=filename>foobar</span> 的 <em>object file</em>(非執行檔)。 這檔可以與其他的 object file 連結在一起，而成執行檔。</p></div></dd><dt class=hdlist1><code>-g</code></dt><dd><p><code>-g</code> 將會把一些給 gdb 用的除錯訊息包進去執行檔裡面，所謂的除錯訊息例如： 程式在第幾行出錯、那個程式第幾行做什麼函式呼叫等等。除錯資訊<em>非常</em>好用。 但缺點就是：對於程式來說，額外的除錯訊息會讓編譯出來的程式比較肥些。 <code>-g</code> 的適用時機在於：當程式還在開發時使用就好， 而當你要釋出你的 "發行版本(release version)" 或者確認程式可運作正常的話，就不必用 <code>-g</code> 這選項了。</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-g</span> foobar.c</code></pre></div></div><div class=paragraph><p>這動作會產生有含除錯訊息的執行檔。</p></div></dd><dt class=hdlist1><code>-O</code></dt><dd><p><code>-O</code> 會產生最佳化的執行檔， 編譯器會使用一些技巧，來讓程式可以跑的比未經最佳化的程式還快， 可以在大寫 O 後面加上數字來指明想要的最佳化層級。 但是最佳化還是會有一些錯誤，舉例來說在 FreeBSD 2.10 release 中用 <code>cc</code> 且指定 <code>-O2</code> 時，在某些情形下會產生錯誤的執行檔。</p><div class=paragraph><p>只有當要釋出發行版本、或者加速程式時，才需要使用最佳化選項。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-O</span> <span class=nt>-o</span> foobar foobar.c</code></pre></div></div><div class=paragraph><p>這會產生 <span class=filename>foobar</span> 執行檔的最佳化版本。</p></div></dd></dl></div><div class=paragraph><p>以下三個參數將會強迫 <code>cc</code> 確認程式碼是否符合一些國際標準的規範， 也就是通常說的 ANSI 標準， 而 ANSI 嚴格來講屬 ISO 標準。</p></div><div class=dlist><dl><dt class=hdlist1><code>-Wall</code></dt><dd><p><code>-Wall</code> 顯示 <code>cc</code> 維護者所認為值得注意的所有警告訊息。 不過這名字可能會造成誤解，事實上它並未完全顯示 <code>cc</code> 所能注意到的各項警告訊息。</p></dd><dt class=hdlist1><code>-ansi</code></dt><dd><p><code>-ansi</code> 關閉 <code>cc</code> 特有的某些特殊非 ANSI C 標準功能。 不過這名字可能會造成誤解，事實上它並不保證你的程式會完全符合 ANSI 標準。</p></dd><dt class=hdlist1><code>-pedantic</code></dt><dd><p>全面關閉 <code>cc</code> 所特有的非 ANSI C 標準功能。</p></dd></dl></div><div class=paragraph><p>除了這些參數，<code>cc</code> 還允許你使用一些額外的參數取代標準參數，有些額外參數非常有用， 但是實際上並不是所有的編譯器都有提供這些參數。 照標準來寫程式的最主要目的就是，希望你寫出來的程式可以在所有編譯器上編譯、執行無誤， 當程式可以達成上述目的時，就稱為 <em>portable code(移植性良好的程式碼)</em>。</p></div><div class=paragraph><p>一般來說，在撰寫程式時就應要注意『移植性』。 否則。當想把程式拿到另外一台機器上跑的時候，就可能得需要重寫程式。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-Wall</span> <span class=nt>-ansi</span> <span class=nt>-pedantic</span> <span class=nt>-o</span> foobar foobar.c</code></pre></div></div><div class=paragraph><p>上述指令會確認 <span class=filename>foobar.c</span> 內的語法是否符合標準， 並且產生名為 <span class=filename>foobar</span> 的執行檔。</p></div><div class=dlist><dl><dt class=hdlist1><code>-l <em>library</em></code></dt><dd><p>告訴 gcc 在連結(linking)程式時你需要用到的函式庫名稱。</p><div class=paragraph><p>最常見的情況就是，當你在程式中使用了 C 數學函式庫， 跟其他作業平台不一樣的是，這函示學函式都不在標準函式庫(library)中， 因此編譯器並不知道這函式庫名稱，你必須告訴編譯器要加上它才行。</p></div><div class=paragraph><p>規則很簡單，如果有個函式庫叫做 <span class=filename>libsomething.a</span>， 就必須在編譯時加上參數 <code>-l <em>something</em></code> 才行。 舉例來說，數學函式庫叫做 <span class=filename>libm.a</span>， 所以你必須給 <code>cc</code> 的參數就是 <code>-lm</code>。 一般情況下，通常會把這參數必須放在指令的最後。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-o</span> foobar foobar.c <span class=nt>-lm</span></code></pre></div></div><div class=paragraph><p>上面這指令會讓 gcc 跟數學函式庫作連結，以便你的程式可以呼叫函式庫內含的數學函式。</p></div><div class=paragraph><p>如果你正在編譯的程式是 C++ 程式碼，你還必須額外指定 -lg++ 或者是 -lstdc++。 如果你的 FreeBSD 是 2.2(含)以後版本， 你可以用指令 c++ 來取代 <code>cc</code>。 在 FreeBSD 上 c++ 也可以用 g++ 取代。</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-o</span> foobar foobar.cc <span class=nt>-lg</span>++     適用 FreeBSD 2.1.6 或更早期的版本
% cc <span class=nt>-o</span> foobar foobar.cc <span class=nt>-lstdc</span>++  適用 FreeBSD 2.2 及之後的版本
% c++ <span class=nt>-o</span> foobar foobar.cc</code></pre></div></div><div class=paragraph><p>上述指令都會從原始檔 <span class=filename>foobar.cc</span> 編譯產生名為 <span class=filename>fooboar</span> 的執行檔。 這邊要提醒的是在 系統中 c++ 程式傳統都以 <span class=filename>.C</span>、 <span class=filename>.cxx</span> 或者是 <span class=filename>.cc</span> 作為副檔名， 而非 那種以 <span class=filename>.cpp</span> 作為副檔名的命名方式(不過也越來越普遍了)。 <code>gcc</code> 會依副檔名來決定用哪一種編譯器編譯， 然而，現在已經不再限制副檔名了， 所以可以自由的使用 <span class=filename>.cpp</span> 作為 c++ 程式碼的副檔名！</p></div></dd></dl></div><div class=sect2><h3 id=_常見的_cc_問題>2.4.1. 常見的 <code>cc</code> 問題<a class=anchor href=#_常見的_cc_問題></a></h3><div class=sect3><h4 id=_我用_sin_函示撰寫我的程式_但是有個錯誤訊息如下這代表著>2.4.1.1. 我用 sin() 函示撰寫我的程式， 但是有個錯誤訊息(如下)，這代表著？<a class=anchor href=#_我用_sin_函示撰寫我的程式_但是有個錯誤訊息如下這代表著></a></h4><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>/var/tmp/cc0143941.o: Undefined symbol <span class=sb>`</span>_sin<span class=s1>&#39; referenced from text segment</span></code></pre></div></div><div class=paragraph><p>當使用 <code>sin()</code> 這類的數學函示時， 你必須告訴 cc 要和數學函式庫作連結(linking)，就像這樣：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc temp.c <span class=nt>-lm</span></code></pre></div></div></div><div class=sect3><h4 id=_好吧我試著寫些簡單的程式來練習使用_lm_選項該程式會運算_2_1_的_6_次方>2.4.1.2. 好吧，我試著寫些簡單的程式，來練習使用 -lm 選項(該程式會運算 2.1 的 6 次方)<a class=anchor href=#_好吧我試著寫些簡單的程式來練習使用_lm_選項該程式會運算_2_1_的_6_次方></a></h4><div class=paragraph><p>當編譯器發現你呼叫一個函示時，它會確認該函示的回傳值類型(prototype)， 如果沒有特別指明，則預設的回傳值類型為 <span class=type>int(整數)</span>。 很明顯的，你的程式所需要的並不是回傳值類別為 <span class=type>int</span>。</p></div></div><div class=sect3><h4 id=_那如何才可以修正剛所說的問題>2.4.1.3. 那如何才可以修正剛所說的問題？<a class=anchor href=#_那如何才可以修正剛所說的問題></a></h4><div class=paragraph><p>數學函示的回傳值類型(prototype)會定義在 <span class=filename>math.h</span>， 如果你有 include 這檔，編譯器就會知道該函示的回傳值類型，如此一來該運算就會得到正確的結果！</p></div><div class="literalblock programlisting"><div class=content><pre>#include &lt;stdio.h&gt;

int main() {
	float f;

	f = pow(2.1, 6);
	printf(&#34;2.1 ^ 6 = %f\n&#34;, f);
	return 0;
}</pre></div></div><div class=paragraph><p>編譯後執行程式，得到下面這結果：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc temp.c <span class=nt>-lm</span></code></pre></div></div><div class=paragraph><p>加了上述內容之後，再重新編譯，最後執行：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ./a.out
2.1 ^ 6 <span class=o>=</span> 85.766121</code></pre></div></div><div class=paragraph><p>如果有用到數學函式，<em>請確定</em>要有 include <span class=filename>math.h</span> 這檔， 而且記得要和數學函式庫作連結。</p></div></div><div class=sect3><h4 id=_已經編譯好_foobar_c_但是編譯後找不到_foobar_執行檔_該去哪邊找呢>2.4.1.4. 已經編譯好 foobar.c， 但是編譯後找不到 foobar 執行檔。 該去哪邊找呢？<a class=anchor href=#_已經編譯好_foobar_c_但是編譯後找不到_foobar_執行檔_該去哪邊找呢></a></h4><div class=paragraph><p>記得，除非有指定編譯結果的執行檔檔名，否則預設的執行檔檔名是 a.out。 用 <code>-o <em>filename</em></code> 參數， 就可以達到所想要的結果，比如：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-o</span> foobar foobar.c</code></pre></div></div></div><div class=sect3><h4 id=_好有個編譯好的程式叫做_foobar_用_ls_指令時可以看到_但執行時訊息卻說卻沒有這檔案為什麼>2.4.1.5. 好，有個編譯好的程式叫做 foobar， 用 ls 指令時可以看到， 但執行時，訊息卻說卻沒有這檔案。為什麼？<a class=anchor href=#_好有個編譯好的程式叫做_foobar_用_ls_指令時可以看到_但執行時訊息卻說卻沒有這檔案為什麼></a></h4><div class=paragraph><p>與 不同的是，除非有指定執行檔的路徑， 否則 系統並不會在目前的目錄下尋找你想執行的檔案。 在指令列下打 <code>./foobar</code> 代表 "執行在這個目錄底下名為 <span class=filename>foobar</span> 的程式"， 或者也可以更改 <code>PATH</code> 環境變數設定如下，以達成類似效果：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>bin:/usr/bin:/usr/local/bin:.</code></pre></div></div><div class=paragraph><p>上一行最後的 "." 代表"如果在前面寫的其他目錄找不到，就找目前的目錄"。</p></div></div><div class=sect3><h4 id=_試著執行_test_執行檔_但是卻沒有任何事發生到底是哪裡出錯了>2.4.1.6. 試著執行 test 執行檔， 但是卻沒有任何事發生，到底是哪裡出錯了？<a class=anchor href=#_試著執行_test_執行檔_但是卻沒有任何事發生到底是哪裡出錯了></a></h4><div class=paragraph><p>大多數的 系統都會在路徑 <span class=filename>/usr/bin</span> 擺放執行檔。 除非有指定使用在目前目錄內的 <span class=filename>test</span>，否則 shell 會優先選擇位在 <span class=filename>/usr/bin</span> 的 <span class=filename>test</span>， 要指定檔名的話，作法類似：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ./test</code></pre></div></div><div class=paragraph><p>為了避免上述困擾，請為你的程式取更好的名稱吧！</p></div></div><div class=sect3><h4 id=_當執行我寫的程式時剛開始正常_接下來卻出現_core_dumped_錯誤訊息這錯誤訊息到底代表什麼>2.4.1.7. 當執行我寫的程式時剛開始正常， 接下來卻出現 core dumped 錯誤訊息。這錯誤訊息到底代表什麼？<a class=anchor href=#_當執行我寫的程式時剛開始正常_接下來卻出現_core_dumped_錯誤訊息這錯誤訊息到底代表什麼></a></h4><div class=paragraph><p>關於 <em>core dumped</em> 這個名稱的由來， 可以追溯到早期的 系統開始使用 core memory 對資料排序時。 基本上當程式在很多情況下發生錯誤後， 作業系統會把 core memory 中的資訊寫入 <span class=filename>core</span> 這檔案中， 以便讓 programmer 知道程式到底是為何出錯。</p></div></div><div class=sect3><h4 id=_真是太神奇了程式居然發生_core_dumped_了該怎麼辦>2.4.1.8. 真是太神奇了！程式居然發生 core dumped 了，該怎麼辦？<a class=anchor href=#_真是太神奇了程式居然發生_core_dumped_了該怎麼辦></a></h4><div class=paragraph><p>請用 <code>gdb</code> 來分析 core 結果(詳情請參考 <a href=#debugging>Debugging</a>)。</p></div></div><div class=sect3><h4 id=_當程式已經把_core_memory_資料_dump_出來後_同時也出現另一個錯誤_segmentation_fault_這意思是>2.4.1.9. 當程式已經把 core memory 資料 dump 出來後， 同時也出現另一個錯誤 segmentation fault 這意思是？<a class=anchor href=#_當程式已經把_core_memory_資料_dump_出來後_同時也出現另一個錯誤_segmentation_fault_這意思是></a></h4><div class=paragraph><p>基本上，這個錯誤表示你的程式在記憶體中試著做一個嚴重的非法運作(illegal operation)， 就是被設計來保護整個作業系統免於被惡質的程式破壞，所以才會告訴你這個訊息。</p></div><div class=paragraph><p>最常造成"segmentation fault"的原因通常為：</p></div><div class=ulist><ul><li><p>試著對一個 NULL 的指標(pointer)作寫入的動作，如</p><div class="literalblock programlisting"><div class=content><pre>char *foo = NULL;
strcpy(foo, &#34;bang!&#34;);</pre></div></div></li><li><p>使用一個尚未初始化(initialized)的指標，如：</p><div class="literalblock programlisting"><div class=content><pre>char *foo;
strcpy(foo, &#34;bang!&#34;);</pre></div></div><div class=paragraph><p>尚未初始化的指標的初始值將會是隨機的，如果你夠幸運的話， 這個指標的初始值會指向 kernel 已經用到的記憶體位置， kernel 會結束掉這個程式以確保系統運作正常。如果你不夠幸運， 初始指到的記憶體位置是你程式必須要用到的資料結構(data structures)的位置， 當這個情形發生時程式將會當的不知其所以然。</p></div></li><li><p>試著寫入超過陣列(array)元素個數，如：</p><div class="literalblock programlisting"><div class=content><pre>int bar[20];
bar[27] = 6;</pre></div></div></li><li><p>試著讀寫在唯讀記憶體(read-only memory)中的資料，如：</p><div class="literalblock programlisting"><div class=content><pre>char *foo = &#34;My string&#34;;
strcpy(foo, &#34;bang!&#34;);</pre></div></div><div class=paragraph><p>UNIX® compilers often put string literals like <code>"My string"</code> into read-only areas of memory.</p></div></li><li><p>Doing naughty things with <code>malloc()</code> and <code>free()</code>, eg</p><div class="literalblock programlisting"><div class=content><pre>char bar[80];
free(bar);</pre></div></div><div class=paragraph><p>or</p></div><div class="literalblock programlisting"><div class=content><pre>char *foo = malloc(27);
free(foo);
free(foo);</pre></div></div></li></ul></div><div class=paragraph><p>Making one of these mistakes will not always lead to an error, but they are always bad practice. Some systems and compilers are more tolerant than others, which is why programs that ran well on one system can crash when you try them on an another.</p></div></div><div class=sect3><h4 id=_sometimes_when_i_get_a_core_dump_it_says_bus_error_it_says_in_my_unix_book_that_this_means_a_hardware_problem_but_the_computer_still_seems_to_be_working_is_this_true>2.4.1.10. Sometimes when I get a core dump it says bus error. It says in my UNIX® book that this means a hardware problem, but the computer still seems to be working. Is this true?<a class=anchor href=#_sometimes_when_i_get_a_core_dump_it_says_bus_error_it_says_in_my_unix_book_that_this_means_a_hardware_problem_but_the_computer_still_seems_to_be_working_is_this_true></a></h4><div class=paragraph><p>No, fortunately not (unless of course you really do have a hardware problem…​). This is usually another way of saying that you accessed memory in a way you should not have.</p></div></div><div class=sect3><h4 id=_this_dumping_core_business_sounds_as_though_it_could_be_quite_useful_if_i_can_make_it_happen_when_i_want_to_can_i_do_this_or_do_i_have_to_wait_until_there_is_an_error>2.4.1.11. This dumping core business sounds as though it could be quite useful, if I can make it happen when I want to. Can I do this, or do I have to wait until there is an error?<a class=anchor href=#_this_dumping_core_business_sounds_as_though_it_could_be_quite_useful_if_i_can_make_it_happen_when_i_want_to_can_i_do_this_or_do_i_have_to_wait_until_there_is_an_error></a></h4><div class=paragraph><p>Yes, just go to another console or xterm, do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% ps</code></pre></div></div><div class=paragraph><p>to find out the process ID of your program, and do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>kill</span> <span class=nt>-ABRT</span> pid</code></pre></div></div><div class=paragraph><p>where <code><em>pid</em></code> is the process ID you looked up.</p></div><div class=paragraph><p>This is useful if your program has got stuck in an infinite loop, for instance. If your program happens to trap SIGABRT, there are several other signals which have a similar effect.</p></div><div class=paragraph><p>Alternatively, you can create a core dump from inside your program, by calling the <code>abort()</code> function. See the manual page of <a href="https://man.freebsd.org/cgi/man.cgi?query=abort&amp;sektion=3&amp;format=html">abort(3)</a> to learn more.</p></div><div class=paragraph><p>If you want to create a core dump from outside your program, but do not want the process to terminate, you can use the <code>gcore</code> program. See the manual page of <a href="https://man.freebsd.org/cgi/man.cgi?query=gcore&amp;sektion=1&amp;format=html">gcore(1)</a> for more information.</p></div></div></div></div></div><div class=sect1><h2 id=tools-make>2.5. Make<a class=anchor href=#tools-make></a></h2><div class=sectionbody><div class=sect2><h3 id=_what_is_make>2.5.1. What is <code>make</code>?<a class=anchor href=#_what_is_make></a></h3><div class=paragraph><p>When you are working on a simple program with only one or two source files, typing in</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc file1.c file2.c</code></pre></div></div><div class=paragraph><p>is not too bad, but it quickly becomes very tedious when there are several files-and it can take a while to compile, too.</p></div><div class=paragraph><p>One way to get around this is to use object files and only recompile the source file if the source code has changed. So we could have something like:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc file1.o file2.o … file37.c …</code></pre></div></div><div class=paragraph><p>if we had changed <span class=filename>file37.c</span>, but not any of the others, since the last time we compiled. This may speed up the compilation quite a bit, but does not solve the typing problem.</p></div><div class=paragraph><p>Or we could write a shell script to solve the typing problem, but it would have to re-compile everything, making it very inefficient on a large project.</p></div><div class=paragraph><p>What happens if we have hundreds of source files lying about? What if we are working in a team with other people who forget to tell us when they have changed one of their source files that we use?</p></div><div class=paragraph><p>Perhaps we could put the two solutions together and write something like a shell script that would contain some kind of magic rule saying when a source file needs compiling. Now all we need now is a program that can understand these rules, as it is a bit too complicated for the shell.</p></div><div class=paragraph><p>This program is called <code>make</code>. It reads in a file, called a <em>makefile</em>, that tells it how different files depend on each other, and works out which files need to be re-compiled and which ones do not. For example, a rule could say something like "if <span class=filename>fromboz.o</span> is older than <span class=filename>fromboz.c</span>, that means someone must have changed <span class=filename>fromboz.c</span>, so it needs to be re-compiled." The makefile also has rules telling make <em>how</em> to re-compile the source file, making it a much more powerful tool.</p></div><div class=paragraph><p>Makefiles are typically kept in the same directory as the source they apply to, and can be called <span class=filename>makefile</span>, <span class=filename>Makefile</span> or <span class=filename>MAKEFILE</span>. Most programmers use the name <span class=filename>Makefile</span>, as this puts it near the top of a directory listing, where it can easily be seen.<sup class=footnote>[<a id=_footnoteref_1 class=footnote href=#_footnotedef_1 title="View footnote.">1</a>]</sup></p></div></div><div class=sect2><h3 id=_example_of_using_make>2.5.2. Example of Using <code>make</code><a class=anchor href=#_example_of_using_make></a></h3><div class=paragraph><p>Here is a very simple make file:</p></div><div class="literalblock programlisting"><div class=content><pre>foo: foo.c
	cc -o foo foo.c</pre></div></div><div class=paragraph><p>It consists of two lines, a dependency line and a creation line.</p></div><div class=paragraph><p>The dependency line here consists of the name of the program (known as the <em>target</em>), followed by a colon, then whitespace, then the name of the source file. When <code>make</code> reads this line, it looks to see if <span class=filename>foo</span> exists; if it exists, it compares the time <span class=filename>foo</span> was last modified to the time <span class=filename>foo.c</span> was last modified. If <span class=filename>foo</span> does not exist, or is older than <span class=filename>foo.c</span>, it then looks at the creation line to find out what to do. In other words, this is the rule for working out when <span class=filename>foo.c</span> needs to be re-compiled.</p></div><div class=paragraph><p>The creation line starts with a tab (press <kbd>tab</kbd>) and then the command you would type to create <span class=filename>foo</span> if you were doing it at a command prompt. If <span class=filename>foo</span> is out of date, or does not exist, <code>make</code> then executes this command to create it. In other words, this is the rule which tells make how to re-compile <span class=filename>foo.c</span>.</p></div><div class=paragraph><p>So, when you type <code>make</code>, it will make sure that <span class=filename>foo</span> is up to date with respect to your latest changes to <span class=filename>foo.c</span>. This principle can be extended to <span class=filename>Makefile</span>'s with hundreds of targets-in fact, on FreeBSD, it is possible to compile the entire operating system just by typing <code>make world</code> in the appropriate directory!</p></div><div class=paragraph><p>Another useful property of makefiles is that the targets do not have to be programs. For instance, we could have a make file that looks like this:</p></div><div class="literalblock programlisting"><div class=content><pre>foo: foo.c
	cc -o foo foo.c

install:
	cp foo /home/me</pre></div></div><div class=paragraph><p>We can tell make which target we want to make by typing:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make target</code></pre></div></div><div class=paragraph><p><code>make</code> will then only look at that target and ignore any others. For example, if we type <code>make foo</code> with the makefile above, make will ignore the <code>install</code> target.</p></div><div class=paragraph><p>If we just type <code>make</code> on its own, make will always look at the first target and then stop without looking at any others. So if we typed <code>make</code> here, it will just go to the <code>foo</code> target, re-compile <span class=filename>foo</span> if necessary, and then stop without going on to the <code>install</code> target.</p></div><div class=paragraph><p>Notice that the <code>install</code> target does not actually depend on anything! This means that the command on the following line is always executed when we try to make that target by typing <code>make install</code>. In this case, it will copy <span class=filename>foo</span> into the user’s home directory. This is often used by application makefiles, so that the application can be installed in the correct directory when it has been correctly compiled.</p></div><div class=paragraph><p>This is a slightly confusing subject to try to explain. If you do not quite understand how <code>make</code> works, the best thing to do is to write a simple program like "hello world" and a make file like the one above and experiment. Then progress to using more than one source file, or having the source file include a header file. <code>touch</code> is very useful here-it changes the date on a file without you having to edit it.</p></div></div><div class=sect2><h3 id=_make_and_include_files>2.5.3. Make and include-files<a class=anchor href=#_make_and_include_files></a></h3><div class=paragraph><p>C code often starts with a list of files to include, for example stdio.h. Some of these files are system-include files, some of them are from the project you are now working on:</p></div><div class="literalblock programlisting"><div class=content><pre>#include &lt;stdio.h&gt;
#include &#34;foo.h&#34;

int main(....</pre></div></div><div class=paragraph><p>To make sure that this file is recompiled the moment <span class=filename>foo.h</span> is changed, you have to add it in your <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>foo: foo.c foo.h</pre></div></div><div class=paragraph><p>The moment your project is getting bigger and you have more and more own include-files to maintain, it will be a pain to keep track of all include files and the files which are depending on it. If you change an include-file but forget to recompile all the files which are depending on it, the results will be devastating. <code>clang</code> has an option to analyze your files and to produce a list of include-files and their dependencies: <code>-MM</code>.</p></div><div class=paragraph><p>If you add this to your Makefile:</p></div><div class="literalblock programlisting"><div class=content><pre>depend:
	cc -E -MM *.c &gt; .depend</pre></div></div><div class=paragraph><p>and run <code>make depend</code>, the file <span class=filename>.depend</span> will appear with a list of object-files, C-files and the include-files:</p></div><div class="literalblock programlisting"><div class=content><pre>foo.o: foo.c foo.h</pre></div></div><div class=paragraph><p>If you change <span class=filename>foo.h</span>, next time you run <code>make</code> all files depending on <span class=filename>foo.h</span> will be recompiled.</p></div><div class=paragraph><p>Do not forget to run <code>make depend</code> each time you add an include-file to one of your files.</p></div></div><div class=sect2><h3 id=_freebsd_makefiles>2.5.4. FreeBSD Makefiles<a class=anchor href=#_freebsd_makefiles></a></h3><div class=paragraph><p>Makefiles can be rather complicated to write. Fortunately, BSD-based systems like FreeBSD come with some very powerful ones as part of the system. One very good example of this is the FreeBSD ports system. Here is the essential part of a typical ports <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>MASTER_SITES=   ftp://freefall.cdrom.com/pub/FreeBSD/LOCAL_PORTS/
DISTFILES=      scheme-microcode+dist-7.3-freebsd.tgz

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>Now, if we go to the directory for this port and type <code>make</code>, the following happens:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>A check is made to see if the source code for this port is already on the system.</p></li><li><p>If it is not, an FTP connection to the URL in MASTER_SITES is set up to download the source.</p></li><li><p>The checksum for the source is calculated and compared it with one for a known, good, copy of the source. This is to make sure that the source was not corrupted while in transit.</p></li><li><p>Any changes required to make the source work on FreeBSD are applied-this is known as <em>patching</em>.</p></li><li><p>Any special configuration needed for the source is done. (Many UNIX® program distributions try to work out which version of UNIX® they are being compiled on and which optional UNIX® features are present-this is where they are given the information in the FreeBSD ports scenario).</p></li><li><p>The source code for the program is compiled. In effect, we change to the directory where the source was unpacked and do <code>make</code>-the program’s own make file has the necessary information to build the program.</p></li><li><p>We now have a compiled version of the program. If we wish, we can test it now; when we feel confident about the program, we can type <code>make install</code>. This will cause the program and any supporting files it needs to be copied into the correct location; an entry is also made into a <code>package database</code>, so that the port can easily be uninstalled later if we change our mind about it.</p></li></ol></div></div></div><div class=paragraph><p>Now I think you will agree that is rather impressive for a four line script!</p></div><div class=paragraph><p>The secret lies in the last line, which tells <code>make</code> to look in the system makefile called <span class=filename>bsd.port.mk</span>. It is easy to overlook this line, but this is where all the clever stuff comes from-someone has written a makefile that tells <code>make</code> to do all the things above (plus a couple of other things I did not mention, including handling any errors that may occur) and anyone can get access to that just by putting a single line in their own make file!</p></div><div class=paragraph><p>If you want to have a look at these system makefiles, they are in <span class=filename>/usr/shared/mk</span>, but it is probably best to wait until you have had a bit of practice with makefiles, as they are very complicated (and if you do look at them, make sure you have a flask of strong coffee handy!)</p></div></div><div class=sect2><h3 id=_more_advanced_uses_of_make>2.5.5. More Advanced Uses of <code>make</code><a class=anchor href=#_more_advanced_uses_of_make></a></h3><div class=paragraph><p><code>Make</code> is a very powerful tool, and can do much more than the simple example above shows. Unfortunately, there are several different versions of <code>make</code>, and they all differ considerably. The best way to learn what they can do is probably to read the documentation-hopefully this introduction will have given you a base from which you can do this.</p></div><div class=paragraph><p>The version of make that comes with FreeBSD is the Berkeley make; there is a tutorial for it in <span class=filename>/usr/shared/doc/psd/12.make</span>. To view it, do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% zmore paper.ascii.gz</code></pre></div></div><div class=paragraph><p>in that directory.</p></div><div class=paragraph><p>Many applications in the ports use GNU make, which has a very good set of "info" pages. If you have installed any of these ports, GNU make will automatically have been installed as <code>gmake</code>. It is also available as a port and package in its own right.</p></div><div class=paragraph><p>To view the info pages for GNU make, you will have to edit <span class=filename>dir</span> in the <span class=filename>/usr/local/info</span> directory to add an entry for it. This involves adding a line like</p></div><div class="literalblock programlisting"><div class=content><pre> * Make: (make).                 The GNU Make utility.</pre></div></div><div class=paragraph><p>to the file. Once you have done this, you can type <code>info</code> and then select <span class=guimenuitem>make</span> from the menu (or in Emacs, do <code>C-h i</code>).</p></div></div></div></div><div class=sect1><h2 id=debugging>2.6. Debugging<a class=anchor href=#debugging></a></h2><div class=sectionbody><div class=sect2><h3 id=_introduction_to_available_debuggers>2.6.1. Introduction to Available Debuggers<a class=anchor href=#_introduction_to_available_debuggers></a></h3><div class=paragraph><p>Using a debugger allows running the program under more controlled circumstances. Typically, it is possible to step through the program a line at a time, inspect the value of variables, change them, tell the debugger to run up to a certain point and then stop, and so on. It is also possible to attach to a program that is already running, or load a core file to investigate why the program crashed. It is even possible to debug the kernel, though that is a little trickier than the user applications we will be discussing in this section.</p></div><div class=paragraph><p>This section is intended to be a quick introduction to using debuggers and does not cover specialized topics such as debugging the kernel. For more information about that, refer to <a href=../kerneldebug/#kerneldebug>Kernel Debugging</a>.</p></div><div class=paragraph><p>The standard debugger supplied with FreeBSD 12.1 is called <code>lldb</code> (LLVM debugger). As it is part of the standard installation for that release, there is no need to do anything special to use it. It has good command help, accessible via the <code>help</code> command, as well as <a href=https://lldb.llvm.org/>a web tutorial and documentation</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>lldb</code> command is available for FreeBSD 11.3 <a href=https://docs.freebsd.org/en/books/handbook/ports/#ports-using>from ports or packages</a> as <a class=package href=https://cgit.freebsd.org/ports/tree/devel/llvm/>devel/llvm</a>. This will install the default version of lldb (currently 9.0).</p></div></td></tr></tbody></table></div><div class=paragraph><p>The other debugger available with FreeBSD is called <code>gdb</code> (GNU debugger). Unlike lldb, it is not installed by default on FreeBSD 12.1; to use it, <a href=https://docs.freebsd.org/en/books/handbook/ports/#ports-using>install</a> <a class=package href=https://cgit.freebsd.org/ports/tree/devel/gdb/>devel/gdb</a> from ports or packages. The version installed by default on FreeBSD 11.3 is old; instead, install <a class=package href=https://cgit.freebsd.org/ports/tree/devel/gdb/>devel/gdb</a> there as well. It has quite good on-line help, as well as a set of info pages.</p></div><div class=paragraph><p>Which one to use is largely a matter of taste. If familiar with one only, use that one. People familiar with neither or both but wanting to use one from inside Emacs will need to use <code>gdb</code> as <code>lldb</code> is unsupported by Emacs. Otherwise, try both and see which one you prefer.</p></div></div><div class=sect2><h3 id=_using_lldb>2.6.2. Using lldb<a class=anchor href=#_using_lldb></a></h3><div class=sect3><h4 id=_starting_lldb>2.6.2.1. Starting lldb<a class=anchor href=#_starting_lldb></a></h4><div class=paragraph><p>Start up lldb by typing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lldb <span class=nt>--</span> progname</code></pre></div></div></div><div class=sect3><h4 id=_running_a_program_with_lldb>2.6.2.2. Running a Program with lldb<a class=anchor href=#_running_a_program_with_lldb></a></h4><div class=paragraph><p>Compile the program with <code>-g</code> to get the most out of using <code>lldb</code>. It will work without, but will only display the name of the function currently running, instead of the source code. If it displays a line like:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>Breakpoint 1: where <span class=o>=</span> temp<span class=sb>`</span>main, address <span class=o>=</span> …</code></pre></div></div><div class=paragraph><p>(without an indication of source code filename and line number) when setting a breakpoint, this means that the program was not compiled with <code>-g</code>.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Most <code>lldb</code> commands have shorter forms that can be used instead. The longer forms are used here for clarity.</p></div></td></tr></tbody></table></div><div class=paragraph><p>At the <code>lldb</code> prompt, type <code>breakpoint set -n main</code>. This will tell the debugger not to display the preliminary set-up code in the program being run and to stop execution at the beginning of the program’s code. Now type <code>process launch</code> to actually start the program- it will start at the beginning of the set-up code and then get stopped by the debugger when it calls <code>main()</code>.</p></div><div class=paragraph><p>To step through the program a line at a time, type <code>thread step-over</code>. When the program gets to a function call, step into it by typing <code>thread step-in</code>. Once in a function call, return from it by typing <code>thread step-out</code> or use <code>up</code> and <code>down</code> to take a quick look at the caller.</p></div><div class=paragraph><p>Here is a simple example of how to spot a mistake in a program with <code>lldb</code>. This is our program (with a deliberate mistake):</p></div><div class="literalblock programlisting"><div class=content><pre>#include &lt;stdio.h&gt;

int bazz(int anint);

main() {
	int i;

	printf(&#34;This is my program\n&#34;);
	bazz(i);
	return 0;
}

int bazz(int anint) {
	printf(&#34;You gave me %d\n&#34;, anint);
	return anint;
}</pre></div></div><div class=paragraph><p>This program sets i to be <code>5</code> and passes it to a function <code>bazz()</code> which prints out the number we gave it.</p></div><div class=paragraph><p>Compiling and running the program displays</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-g</span> <span class=nt>-o</span> temp temp.c
% ./temp
This is my program
anint <span class=o>=</span> <span class=nt>-5360</span></code></pre></div></div><div class=paragraph><p>That is not what was expected! Time to see what is going on!</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lldb <span class=nt>--</span> temp
<span class=o>(</span>lldb<span class=o>)</span> target create <span class=s2>&#34;temp&#34;</span>
Current executable <span class=nb>set </span>to <span class=s1>&#39;temp&#39;</span> <span class=o>(</span>x86_64<span class=o>)</span><span class=nb>.</span>
<span class=o>(</span>lldb<span class=o>)</span> breakpoint <span class=nb>set</span> <span class=nt>-n</span> main				Skip the set-up code
Breakpoint 1: where <span class=o>=</span> temp<span class=sb>`</span>main + 15 at temp.c:8:2, address <span class=o>=</span> 0x00000000002012ef	lldb puts breakpoint at main<span class=o>()</span>
<span class=o>(</span>lldb<span class=o>)</span> process launch					Run as far as main<span class=o>()</span>
Process 9992 launching
Process 9992 launched: <span class=s1>&#39;/home/pauamma/tmp/temp&#39;</span> <span class=o>(</span>x86_64<span class=o>)</span>	Program starts running

Process 9992 stopped
<span class=k>*</span> thread <span class=c>#1, name = &#39;temp&#39;, stop reason = breakpoint 1.1	lldb stops at main()</span>
    frame <span class=c>#0: 0x00000000002012ef temp`main at temp.c:8:2</span>
   5	main<span class=o>()</span> <span class=o>{</span>
   6		int i<span class=p>;</span>
   7
-&gt; 8		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;This is my program</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>			Indicates the line where it stopped
   9		bazz<span class=o>(</span>i<span class=o>)</span><span class=p>;</span>
   10		<span class=k>return </span>0<span class=p>;</span>
   11	<span class=o>}</span>
<span class=o>(</span>lldb<span class=o>)</span> thread step-over			Go to next line
This is my program						Program prints out
Process 9992 stopped
<span class=k>*</span> thread <span class=c>#1, name = &#39;temp&#39;, stop reason = step over</span>
    frame <span class=c>#0: 0x0000000000201300 temp`main at temp.c:9:7</span>
   6		int i<span class=p>;</span>
   7
   8		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;This is my program</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>
-&gt; 9		bazz<span class=o>(</span>i<span class=o>)</span><span class=p>;</span>
   10		<span class=k>return </span>0<span class=p>;</span>
   11	<span class=o>}</span>
   12
<span class=o>(</span>lldb<span class=o>)</span> thread step-in			step into bazz<span class=o>()</span>
Process 9992 stopped
<span class=k>*</span> thread <span class=c>#1, name = &#39;temp&#39;, stop reason = step in</span>
    frame <span class=c>#0: 0x000000000020132b temp`bazz(anint=-5360) at temp.c:14:29	lldb displays stack frame</span>
   11	<span class=o>}</span>
   12
   13	int bazz<span class=o>(</span>int anint<span class=o>)</span> <span class=o>{</span>
-&gt; 14		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;You gave me %d</span><span class=se>\n</span><span class=s2>&#34;</span>, anint<span class=o>)</span><span class=p>;</span>
   15		<span class=k>return </span>anint<span class=p>;</span>
   16	<span class=o>}</span>
<span class=o>(</span>lldb<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Hang on a minute! How did anint get to be <code>-5360</code>? Was it not set to <code>5</code> in <code>main()</code>? Let us move up to <code>main()</code> and have a look.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>(</span>lldb<span class=o>)</span> up		Move up call stack
frame <span class=c>#1: 0x000000000020130b temp`main at temp.c:9:2		lldb displays stack frame</span>
   6		int i<span class=p>;</span>
   7
   8		<span class=nb>printf</span><span class=o>(</span><span class=s2>&#34;This is my program</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>
-&gt; 9		bazz<span class=o>(</span>i<span class=o>)</span><span class=p>;</span>
   10		<span class=k>return </span>0<span class=p>;</span>
   11	<span class=o>}</span>
   12
<span class=o>(</span>lldb<span class=o>)</span> frame variable i			Show us the value of i
<span class=o>(</span>int<span class=o>)</span> i <span class=o>=</span> <span class=nt>-5360</span>							lldb displays <span class=nt>-5360</span></code></pre></div></div><div class=paragraph><p>Oh dear! Looking at the code, we forgot to initialize i. We meant to put</p></div><div class="literalblock programlisting"><div class=content><pre>...
main() {
	int i;

	i = 5;
	printf(&#34;This is my program\n&#34;);
...</pre></div></div><div class=paragraph><p>but we left the <code>i=5;</code> line out. As we did not initialize i, it had whatever number happened to be in that area of memory when the program ran, which in this case happened to be <code>-5360</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>lldb</code> command displays the stack frame every time we go into or out of a function, even if we are using <code>up</code> and <code>down</code> to move around the call stack. This shows the name of the function and the values of its arguments, which helps us keep track of where we are and what is going on. (The stack is a storage area where the program stores information about the arguments passed to functions and where to go when it returns from a function call.)</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_examining_a_core_file_with_lldb>2.6.2.3. Examining a Core File with lldb<a class=anchor href=#_examining_a_core_file_with_lldb></a></h4><div class=paragraph><p>A core file is basically a file which contains the complete state of the process when it crashed.
In "the good old days", programmers had to print out hex listings of core files and sweat over machine code manuals, but now life is a bit easier.
Incidentally, under FreeBSD and other 4.4BSD systems, a core file is called <span class=filename>progname.core</span> instead of just <span class=filename>core</span>, to make it clearer which program a core file belongs to.</p></div><div class=paragraph><p>To examine a core file, specify the name of the core file in addition to the program itself.
Instead of starting up <code>lldb</code> in the usual way, type <code>lldb -c <em>progname</em>.core -- <em>progname</em></code>.</p></div><div class=paragraph><p>The debugger will display something like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% lldb <span class=nt>-c</span> <span class=o><span class="</span>.filename">progname.core</span> <span class=nt>--</span> <span class=o><span class="</span>.filename">progname</span>
<span class=o>(</span>lldb<span class=o>)</span> target create <span class=s2>&#34;<span class=filename>progname</span>&#34;</span> <span class=nt>--core</span> <span class=s2>&#34;<span class=filename>progname</span>.core&#34;</span>
Core file <span class=s1>&#39;/home/pauamma/tmp/<span class=filename>progname.core</span>&#39;</span> <span class=o>(</span>x86_64<span class=o>)</span> was loaded.
<span class=o>(</span>lldb<span class=o>)</span></span></span></code></pre></div></div><div class=paragraph><p>In this case, the program was called <span class=filename>progname</span>, so the core file is called <span class=filename>progname.core</span>.
The debugger does not display why the program crashed or where.
For this, use <code>thread backtrace all</code>.
This will also show how the function where the program dumped core was called.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>(</span>lldb<span class=o>)</span> thread backtrace all
<span class=k><strong></strong></span><strong> thread <span class=c>#1, name = &#39;progname&#39;, stop reason = signal SIGSEGV</span>
  <span class=k></span></strong> frame <span class=c>#0: 0x0000000000201347 progname`bazz(anint=5) at temp2.c:17:10</span>
    frame <span class=c>#1: 0x0000000000201312 progname`main at temp2.c:10:2</span>
    frame <span class=c>#2: 0x000000000020110f progname`_start(ap=&lt;unavailable&gt;, cleanup=&lt;unavailable&gt;) at crt1.c:76:7</span>
<span class=o>(</span>lldb<span class=o>)</span></code></pre></div></div><div class=paragraph><p><code>SIGSEGV</code> indicates that the program tried to access memory (run code or read/write data usually) at a location that does not belong to it, but does not give any specifics.
For that, look at the source code at line 10 of file temp2.c, in <code>bazz()</code>.
The backtrace also says that in this case, <code>bazz()</code> was called from <code>main()</code>.</p></div></div><div class=sect3><h4 id=_attaching_to_a_running_program_with_lldb>2.6.2.4. Attaching to a Running Program with lldb<a class=anchor href=#_attaching_to_a_running_program_with_lldb></a></h4><div class=paragraph><p>One of the neatest features about <code>lldb</code> is that it can attach to a program that is already running. Of course, that requires sufficient permissions to do so. A common problem is stepping through a program that forks and wanting to trace the child, but the debugger will only trace the parent.</p></div><div class=paragraph><p>To do that, start up another <code>lldb</code>, use <code>ps</code> to find the process ID for the child, and do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>(</span>lldb<span class=o>)</span> process attach <span class=nt>-p</span> pid</code></pre></div></div><div class=paragraph><p>in <code>lldb</code>, and then debug as usual.</p></div><div class=paragraph><p>For that to work well, the code that calls <code>fork</code> to create the child needs to do something like the following (courtesy of the <code>gdb</code> info pages):</p></div><div class="literalblock programlisting"><div class=content><pre>...
if ((pid = fork()) &lt; 0)		/* _Always_ check this */
	error();
else if (pid == 0) {		/* child */
	int PauseMode = 1;

	while (PauseMode)
		sleep(10);	/* Wait until someone attaches to us */
	...
} else {			/* parent */
	...</pre></div></div><div class=paragraph><p>Now all that is needed is to attach to the child, set PauseMode to <code>0</code> with <code>expr PauseMode = 0</code> and wait for the <code>sleep()</code> call to return.</p></div></div></div><div class=sect2><h3 id=_using_gdb>2.6.3. Using gdb<a class=anchor href=#_using_gdb></a></h3><div class=sect3><h4 id=_starting_gdb>2.6.3.1. Starting gdb<a class=anchor href=#_starting_gdb></a></h4><div class=paragraph><p>Start up gdb by typing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% gdb progname</code></pre></div></div><div class=paragraph><p>although many people prefer to run it inside Emacs. To do this, type:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell> M-x gdb RET progname RET</code></pre></div></div><div class=paragraph><p>Finally, for those finding its text-based command-prompt style off-putting, there is a graphical front-end for it (<a class=package href=https://cgit.freebsd.org/ports/tree/devel/xxgdb/>devel/xxgdb</a>) in the Ports Collection.</p></div></div><div class=sect3><h4 id=_running_a_program_with_gdb>2.6.3.2. Running a Program with gdb<a class=anchor href=#_running_a_program_with_gdb></a></h4><div class=paragraph><p>Compile the program with <code>-g</code> to get the most out of using <code>gdb</code>. It will work without, but will only display the name of the function currently running, instead of the source code. A line like:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>... <span class=o>(</span>no debugging symbols found<span class=o>)</span> ...</code></pre></div></div><div class=paragraph><p>when <code>gdb</code> starts up means that the program was not compiled with <code>-g</code>.</p></div><div class=paragraph><p>At the <code>gdb</code> prompt, type <code>break main</code>. This will tell the debugger to skip the preliminary set-up code in the program being run and to stop execution at the beginning of the program’s code. Now type <code>run</code> to start the program- it will start at the beginning of the set-up code and then get stopped by the debugger when it calls <code>main()</code>.</p></div><div class=paragraph><p>To step through the program a line at a time, press <code>n</code>. When at a function call, step into it by pressing <code>s</code>. Once in a function call, return from it by pressing <code>f</code>, or use <code>up</code> and <code>down</code> to take a quick look at the caller.</p></div><div class=paragraph><p>Here is a simple example of how to spot a mistake in a program with <code>gdb</code>. This is our program (with a deliberate mistake):</p></div><div class="literalblock programlisting"><div class=content><pre>#include &lt;stdio.h&gt;

int bazz(int anint);

main() {
	int i;

	printf(&#34;This is my program\n&#34;);
	bazz(i);
	return 0;
}

int bazz(int anint) {
	printf(&#34;You gave me %d\n&#34;, anint);
	return anint;
}</pre></div></div><div class=paragraph><p>This program sets i to be <code>5</code> and passes it to a function <code>bazz()</code> which prints out the number we gave it.</p></div><div class=paragraph><p>Compiling and running the program displays</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% cc <span class=nt>-g</span> <span class=nt>-o</span> temp temp.c
% ./temp
This is my program
anint <span class=o>=</span> 4231</code></pre></div></div><div class=paragraph><p>That was not what we expected! Time to see what is going on!</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% gdb temp
GDB is free software and you are welcome to distribute copies of it
 under certain conditions<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show copying&#34;</span> to see the conditions.
There is absolutely no warranty <span class=k>for </span>GDB<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show warranty&#34;</span> <span class=k>for </span>details.
GDB 4.13 <span class=o>(</span>i386-unknown-freebsd<span class=o>)</span>, Copyright 1994 Free Software Foundation, Inc.
<span class=o>(</span>gdb<span class=o>)</span> <span class=nb>break </span>main				Skip the set-up code
Breakpoint 1 at 0x160f: file temp.c, line 9.	gdb puts breakpoint at main<span class=o>()</span>
<span class=o>(</span>gdb<span class=o>)</span> run					Run as far as main<span class=o>()</span>
Starting program: /home/james/tmp/temp		Program starts running

Breakpoint 1, main <span class=o>()</span> at temp.c:9		gdb stops at main<span class=o>()</span>
<span class=o>(</span>gdb<span class=o>)</span> n						Go to next line
This is my program				Program prints out
<span class=o>(</span>gdb<span class=o>)</span> s						step into bazz<span class=o>()</span>
bazz <span class=o>(</span><span class=nv>anint</span><span class=o>=</span>4231<span class=o>)</span> at temp.c:17			gdb displays stack frame
<span class=o>(</span>gdb<span class=o>)</span></code></pre></div></div><div class=paragraph><p>Hang on a minute! How did anint get to be <code>4231</code>? Was it not set to <code>5</code> in <code>main()</code>? Let us move up to <code>main()</code> and have a look.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>(</span>gdb<span class=o>)</span> up					Move up call stack
<span class=c>#1  0x1625 in main () at temp.c:11		gdb displays stack frame</span>
<span class=o>(</span>gdb<span class=o>)</span> p i					Show us the value of i
<span class=nv>$1</span> <span class=o>=</span> 4231					gdb displays 4231</code></pre></div></div><div class=paragraph><p>Oh dear! Looking at the code, we forgot to initialize i. We meant to put</p></div><div class="literalblock programlisting"><div class=content><pre>...
main() {
	int i;

	i = 5;
	printf(&#34;This is my program\n&#34;);
...</pre></div></div><div class=paragraph><p>but we left the <code>i=5;</code> line out. As we did not initialize i, it had whatever number happened to be in that area of memory when the program ran, which in this case happened to be <code>4231</code>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>gdb</code> command displays the stack frame every time we go into or out of a function, even if we are using <code>up</code> and <code>down</code> to move around the call stack. This shows the name of the function and the values of its arguments, which helps us keep track of where we are and what is going on. (The stack is a storage area where the program stores information about the arguments passed to functions and where to go when it returns from a function call.)</p></div></td></tr></tbody></table></div></div><div class=sect3><h4 id=_examining_a_core_file_with_gdb>2.6.3.3. Examining a Core File with gdb<a class=anchor href=#_examining_a_core_file_with_gdb></a></h4><div class=paragraph><p>A core file is basically a file which contains the complete state of the process when it crashed. In "the good old days", programmers had to print out hex listings of core files and sweat over machine code manuals, but now life is a bit easier. Incidentally, under FreeBSD and other 4.4BSD systems, a core file is called <span class=filename>progname.core</span> instead of just <span class=filename>core</span>, to make it clearer which program a core file belongs to.</p></div><div class=paragraph><p>To examine a core file, start up <code>gdb</code> in the usual way. Instead of typing <code>break</code> or <code>run</code>, type</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>(</span>gdb<span class=o>)</span> core progname.core</code></pre></div></div><div class=paragraph><p>If the core file is not in the current directory, type <code>dir /path/to/core/file</code> first.</p></div><div class=paragraph><p>The debugger should display something like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% gdb <span class=o><span class="</span>.filename">progname</span>
GDB is free software and you are welcome to distribute copies of it
 under certain conditions<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show copying&#34;</span> to see the conditions.
There is absolutely no warranty <span class=k>for </span>GDB<span class=p>;</span> <span class=nb>type</span> <span class=s2>&#34;show warranty&#34;</span> <span class=k>for </span>details.
GDB 4.13 <span class=o>(</span>i386-unknown-freebsd<span class=o>)</span>, Copyright 1994 Free Software Foundation, Inc.
<span class=o>(</span>gdb<span class=o>)</span> core <span class=o><span class="</span>.filename">progname.core</span>
Core was generated by <span class=sb>`</span><span class=o><span class="</span>.filename">progname</span><span class=s1>&#39;.
Program terminated with signal 11, Segmentation fault.
Cannot access memory at address 0x7020796d.
#0  0x164a in bazz (anint=0x5) at temp.c:17
(gdb)</span></span></span></span></code></pre></div></div><div class=paragraph><p>In this case, the program was called <span class=filename>progname</span>, so the core file is called <span class=filename>progname.core</span>. We can see that the program crashed due to trying to access an area in memory that was not available to it in a function called <code>bazz</code>.</p></div><div class=paragraph><p>Sometimes it is useful to be able to see how a function was called, as the problem could have occurred a long way up the call stack in a complex program. <code>bt</code> causes <code>gdb</code> to print out a back-trace of the call stack:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>(</span>gdb<span class=o>)</span> bt
<span class=c>#0  0x164a in bazz (anint=0x5) at temp.c:17</span>
<span class=c>#1  0xefbfd888 in end ()</span>
<span class=c>#2  0x162c in main () at temp.c:11</span>
<span class=o>(</span>gdb<span class=o>)</span></code></pre></div></div><div class=paragraph><p>The <code>end()</code> function is called when a program crashes; in this case, the <code>bazz()</code> function was called from <code>main()</code>.</p></div></div><div class=sect3><h4 id=_attaching_to_a_running_program_with_gdb>2.6.3.4. Attaching to a Running Program with gdb<a class=anchor href=#_attaching_to_a_running_program_with_gdb></a></h4><div class=paragraph><p>One of the neatest features about <code>gdb</code> is that it can attach to a program that is already running. Of course, that requires sufficient permissions to do so. A common problem is stepping through a program that forks and wanting to trace the child, but the debugger will only trace the parent.</p></div><div class=paragraph><p>To do that, start up another <code>gdb</code>, use <code>ps</code> to find the process ID for the child, and do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=o>(</span>gdb<span class=o>)</span> attach pid</code></pre></div></div><div class=paragraph><p>in <code>gdb</code>, and then debug as usual.</p></div><div class=paragraph><p>For that to work well, the code that calls <code>fork</code> to create the child needs to do something like the following (courtesy of the <code>gdb</code> info pages):</p></div><div class="literalblock programlisting"><div class=content><pre>...
if ((pid = fork()) &lt; 0)		/* _Always_ check this */
	error();
else if (pid == 0) {		/* child */
	int PauseMode = 1;

	while (PauseMode)
		sleep(10);	/* Wait until someone attaches to us */
	...
} else {			/* parent */
	...</pre></div></div><div class=paragraph><p>Now all that is needed is to attach to the child, set PauseMode to <code>0</code>, and wait for the <code>sleep()</code> call to return!</p></div></div></div></div></div><div class=sect1><h2 id=emacs>2.7. Using Emacs as a Development Environment<a class=anchor href=#emacs></a></h2><div class=sectionbody><div class=sect2><h3 id=_emacs>2.7.1. Emacs<a class=anchor href=#_emacs></a></h3><div class=paragraph><p>Emacs is a highly customizable editor-indeed, it has been customized to the point where it is more like an operating system than an editor! Many developers and sysadmins do in fact spend practically all their time working inside Emacs, leaving it only to log out.</p></div><div class=paragraph><p>It is impossible even to summarize everything Emacs can do here, but here are some of the features of interest to developers:</p></div><div class=ulist><ul><li><p>Very powerful editor, allowing search-and-replace on both strings and regular expressions (patterns), jumping to start/end of block expression, etc, etc.</p></li><li><p>Pull-down menus and online help.</p></li><li><p>Language-dependent syntax highlighting and indentation.</p></li><li><p>Completely customizable.</p></li><li><p>You can compile and debug programs within Emacs.</p></li><li><p>On a compilation error, you can jump to the offending line of source code.</p></li><li><p>Friendly-ish front-end to the <code>info</code> program used for reading GNU hypertext documentation, including the documentation on Emacs itself.</p></li><li><p>Friendly front-end to <code>gdb</code>, allowing you to look at the source code as you step through your program.</p></li></ul></div><div class=paragraph><p>And doubtless many more that have been overlooked.</p></div><div class=paragraph><p>Emacs can be installed on FreeBSD using the <a class=package href=https://cgit.freebsd.org/ports/tree/editors/emacs/>editors/emacs</a> port.</p></div><div class=paragraph><p>Once it is installed, start it up and do <code>C-h t</code> to read an Emacs tutorial-that means hold down <kbd>control</kbd>, press <kbd>h</kbd>, let go of <kbd>control</kbd>, and then press <kbd>t</kbd>. (Alternatively, you can use the mouse to select <span class=guimenuitem>Emacs Tutorial</span> from the <b class=menuref>Help</b> menu.)</p></div><div class=paragraph><p>Although Emacs does have menus, it is well worth learning the key bindings, as it is much quicker when you are editing something to press a couple of keys than to try to find the mouse and then click on the right place. And, when you are talking to seasoned Emacs users, you will find they often casually throw around expressions like “M-x replace-s RET foo RET bar RET” so it is useful to know what they mean. And in any case, Emacs has far too many useful functions for them to all fit on the menu bars.</p></div><div class=paragraph><p>Fortunately, it is quite easy to pick up the key-bindings, as they are displayed next to the menu item. My advice is to use the menu item for, say, opening a file until you understand how it works and feel confident with it, then try doing C-x C-f. When you are happy with that, move on to another menu command.</p></div><div class=paragraph><p>If you cannot remember what a particular combination of keys does, select <span class=guimenuitem>Describe Key</span> from the <b class=menuref>Help</b> menu and type it in-Emacs will tell you what it does. You can also use the <span class=guimenuitem>Command Apropos</span> menu item to find out all the commands which contain a particular word in them, with the key binding next to it.</p></div><div class=paragraph><p>By the way, the expression above means hold down the <kbd>Meta</kbd> key, press <kbd>x</kbd>, release the <kbd>Meta</kbd> key, type <code>replace-s</code> (short for <code>replace-string</code>-another feature of Emacs is that you can abbreviate commands), press the <kbd>return</kbd> key, type <code>foo</code> (the string you want replaced), press the <kbd>return</kbd> key, type bar (the string you want to replace <code>foo</code> with) and press <kbd>return</kbd> again. Emacs will then do the search-and-replace operation you have just requested.</p></div><div class=paragraph><p>If you are wondering what on earth <kbd>Meta</kbd> is, it is a special key that many UNIX® workstations have. Unfortunately, PC’s do not have one, so it is usually <kbd>alt</kbd> (or if you are unlucky, the <kbd>escape</kbd> key).</p></div><div class=paragraph><p>Oh, and to get out of Emacs, do <code>C-x C-c</code> (that means hold down the <kbd>control</kbd> key, press <kbd>x</kbd>, press <kbd>c</kbd> and release the <kbd>control</kbd> key). If you have any unsaved files open, Emacs will ask you if you want to save them. (Ignore the bit in the documentation where it says <code>C-z</code> is the usual way to leave Emacs-that leaves Emacs hanging around in the background, and is only really useful if you are on a system which does not have virtual terminals).</p></div></div><div class=sect2><h3 id=_configuring_emacs>2.7.2. Configuring Emacs<a class=anchor href=#_configuring_emacs></a></h3><div class=paragraph><p>Emacs does many wonderful things; some of them are built in, some of them need to be configured.</p></div><div class=paragraph><p>Instead of using a proprietary macro language for configuration, Emacs uses a version of Lisp specially adapted for editors, known as Emacs Lisp. Working with Emacs Lisp can be quite helpful if you want to go on and learn something like Common Lisp. Emacs Lisp has many features of Common Lisp, although it is considerably smaller (and thus easier to master).</p></div><div class=paragraph><p>The best way to learn Emacs Lisp is to download the <a href=ftp://ftp.gnu.org/old-gnu/emacs/elisp-manual-19-2.4.tar.gz>Emacs Tutorial</a></p></div><div class=paragraph><p>However, there is no need to actually know any Lisp to get started with configuring Emacs, as I have included a sample <span class=filename>.emacs</span>, which should be enough to get you started. Just copy it into your home directory and restart Emacs if it is already running; it will read the commands from the file and (hopefully) give you a useful basic setup.</p></div></div><div class=sect2><h3 id=_a_sample_emacs>2.7.3. A Sample <span class=filename>.emacs</span><a class=anchor href=#_a_sample_emacs></a></h3><div class=paragraph><p>Unfortunately, there is far too much here to explain it in detail; however there are one or two points worth mentioning.</p></div><div class=ulist><ul><li><p>Everything beginning with a <code>;</code> is a comment and is ignored by Emacs.</p></li><li><p>In the first line, the <code>-<strong>- Emacs-Lisp -</strong>-</code> is so that we can edit <span class=filename>.emacs</span> itself within Emacs and get all the fancy features for editing Emacs Lisp. Emacs usually tries to guess this based on the filename, and may not get it right for <span class=filename>.emacs</span>.</p></li><li><p>The <kbd>tab</kbd> key is bound to an indentation function in some modes, so when you press the tab key, it will indent the current line of code. If you want to put a tab character in whatever you are writing, hold the <kbd>control</kbd> key down while you are pressing the <kbd>tab</kbd> key.</p></li><li><p>This file supports syntax highlighting for C, C++, Perl, Lisp and Scheme, by guessing the language from the filename.</p></li><li><p>Emacs already has a pre-defined function called <code>next-error</code>. In a compilation output window, this allows you to move from one compilation error to the next by doing <code>M-n</code>; we define a complementary function, <code>previous-error</code>, that allows you to go to a previous error by doing <code>M-p</code>. The nicest feature of all is that <code>C-c C-c</code> will open up the source file in which the error occurred and jump to the appropriate line.</p></li><li><p>We enable Emacs’s ability to act as a server, so that if you are doing something outside Emacs and you want to edit a file, you can just type in</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% emacsclient filename</code></pre></div></div><div class=paragraph><p>and then you can edit the file in your Emacs!<sup class=footnote>[<a id=_footnoteref_2 class=footnote href=#_footnotedef_2 title="View footnote.">2</a>]</sup></p></div></li></ul></div><div class=exampleblock><div class=title>例 1. A Sample <span class=filename>.emacs</span></div><div class=content><div class="literalblock programlisting"><div class=content><pre>;; -*-Emacs-Lisp-*-

;; This file is designed to be re-evaled; use the variable first-time
;; to avoid any problems with this.
(defvar first-time t
  &#34;Flag signifying this is the first time that .emacs has been evaled&#34;)

;; Meta
(global-set-key &#34;\M- &#34; &#39;set-mark-command)
(global-set-key &#34;\M-\C-h&#34; &#39;backward-kill-word)
(global-set-key &#34;\M-\C-r&#34; &#39;query-replace)
(global-set-key &#34;\M-r&#34; &#39;replace-string)
(global-set-key &#34;\M-g&#34; &#39;goto-line)
(global-set-key &#34;\M-h&#34; &#39;help-command)

;; Function keys
(global-set-key [f1] &#39;manual-entry)
(global-set-key [f2] &#39;info)
(global-set-key [f3] &#39;repeat-complex-command)
(global-set-key [f4] &#39;advertised-undo)
(global-set-key [f5] &#39;eval-current-buffer)
(global-set-key [f6] &#39;buffer-menu)
(global-set-key [f7] &#39;other-window)
(global-set-key [f8] &#39;find-file)
(global-set-key [f9] &#39;save-buffer)
(global-set-key [f10] &#39;next-error)
(global-set-key [f11] &#39;compile)
(global-set-key [f12] &#39;grep)
(global-set-key [C-f1] &#39;compile)
(global-set-key [C-f2] &#39;grep)
(global-set-key [C-f3] &#39;next-error)
(global-set-key [C-f4] &#39;previous-error)
(global-set-key [C-f5] &#39;display-faces)
(global-set-key [C-f8] &#39;dired)
(global-set-key [C-f10] &#39;kill-compilation)

;; Keypad bindings
(global-set-key [up] &#34;\C-p&#34;)
(global-set-key [down] &#34;\C-n&#34;)
(global-set-key [left] &#34;\C-b&#34;)
(global-set-key [right] &#34;\C-f&#34;)
(global-set-key [home] &#34;\C-a&#34;)
(global-set-key [end] &#34;\C-e&#34;)
(global-set-key [prior] &#34;\M-v&#34;)
(global-set-key [next] &#34;\C-v&#34;)
(global-set-key [C-up] &#34;\M-\C-b&#34;)
(global-set-key [C-down] &#34;\M-\C-f&#34;)
(global-set-key [C-left] &#34;\M-b&#34;)
(global-set-key [C-right] &#34;\M-f&#34;)
(global-set-key [C-home] &#34;\M-&lt;&#34;)
(global-set-key [C-end] &#34;\M-&gt;&#34;)
(global-set-key [C-prior] &#34;\M-&lt;&#34;)
(global-set-key [C-next] &#34;\M-&gt;&#34;)

;; Mouse
(global-set-key [mouse-3] &#39;imenu)

;; Misc
(global-set-key [C-tab] &#34;\C-q\t&#34;)	; Control tab quotes a tab.
(setq backup-by-copying-when-mismatch t)

;; Treat &#39;y&#39; or &lt;CR&gt; as yes, &#39;n&#39; as no.
(fset &#39;yes-or-no-p &#39;y-or-n-p)
(define-key query-replace-map [return] &#39;act)
(define-key query-replace-map [?\C-m] &#39;act)

;; Load packages
(require &#39;desktop)
(require &#39;tar-mode)

;; Pretty diff mode
(autoload &#39;ediff-buffers &#34;ediff&#34; &#34;Intelligent Emacs interface to diff&#34; t)
(autoload &#39;ediff-files &#34;ediff&#34; &#34;Intelligent Emacs interface to diff&#34; t)
(autoload &#39;ediff-files-remote &#34;ediff&#34;
  &#34;Intelligent Emacs interface to diff&#34;)

(if first-time
    (setq auto-mode-alist
	  (append &#39;((&#34;\\.cpp$&#34; . c++-mode)
		    (&#34;\\.hpp$&#34; . c++-mode)
		    (&#34;\\.lsp$&#34; . lisp-mode)
		    (&#34;\\.scm$&#34; . scheme-mode)
		    (&#34;\\.pl$&#34; . perl-mode)
		    ) auto-mode-alist)))

;; Auto font lock mode
(defvar font-lock-auto-mode-list
  (list &#39;c-mode &#39;c++-mode &#39;c++-c-mode &#39;emacs-lisp-mode &#39;lisp-mode &#39;perl-mode &#39;scheme-mode)
  &#34;List of modes to always start in font-lock-mode&#34;)

(defvar font-lock-mode-keyword-alist
  &#39;((c++-c-mode . c-font-lock-keywords)
    (perl-mode . perl-font-lock-keywords))
  &#34;Associations between modes and keywords&#34;)

(defun font-lock-auto-mode-select ()
  &#34;Automatically select font-lock-mode if the current major mode is in font-lock-auto-mode-list&#34;
  (if (memq major-mode font-lock-auto-mode-list)
      (progn
	(font-lock-mode t))
    )
  )

(global-set-key [M-f1] &#39;font-lock-fontify-buffer)

;; New dabbrev stuff
;(require &#39;new-dabbrev)
(setq dabbrev-always-check-other-buffers t)
(setq dabbrev-abbrev-char-regexp &#34;\\sw\\|\\s_&#34;)
(add-hook &#39;emacs-lisp-mode-hook
	  &#39;(lambda ()
	     (set (make-local-variable &#39;dabbrev-case-fold-search) nil)
	     (set (make-local-variable &#39;dabbrev-case-replace) nil)))
(add-hook &#39;c-mode-hook
	  &#39;(lambda ()
	     (set (make-local-variable &#39;dabbrev-case-fold-search) nil)
	     (set (make-local-variable &#39;dabbrev-case-replace) nil)))
(add-hook &#39;text-mode-hook
	  &#39;(lambda ()
	     (set (make-local-variable &#39;dabbrev-case-fold-search) t)
	     (set (make-local-variable &#39;dabbrev-case-replace) t)))

;; C++ and C mode...
(defun my-c++-mode-hook ()
  (setq tab-width 4)
  (define-key c++-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (define-key c++-mode-map &#34;\C-ce&#34; &#39;c-comment-edit)
  (setq c++-auto-hungry-initial-state &#39;none)
  (setq c++-delete-function &#39;backward-delete-char)
  (setq c++-tab-always-indent t)
  (setq c-indent-level 4)
  (setq c-continued-statement-offset 4)
  (setq c++-empty-arglist-indent 4))

(defun my-c-mode-hook ()
  (setq tab-width 4)
  (define-key c-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (define-key c-mode-map &#34;\C-ce&#34; &#39;c-comment-edit)
  (setq c-auto-hungry-initial-state &#39;none)
  (setq c-delete-function &#39;backward-delete-char)
  (setq c-tab-always-indent t)
;; BSD-ish indentation style
  (setq c-indent-level 4)
  (setq c-continued-statement-offset 4)
  (setq c-brace-offset -4)
  (setq c-argdecl-indent 0)
  (setq c-label-offset -4))

;; Perl mode
(defun my-perl-mode-hook ()
  (setq tab-width 4)
  (define-key c++-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (setq perl-indent-level 4)
  (setq perl-continued-statement-offset 4))

;; Scheme mode...
(defun my-scheme-mode-hook ()
  (define-key scheme-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent))

;; Emacs-Lisp mode...
(defun my-lisp-mode-hook ()
  (define-key lisp-mode-map &#34;\C-m&#34; &#39;reindent-then-newline-and-indent)
  (define-key lisp-mode-map &#34;\C-i&#34; &#39;lisp-indent-line)
  (define-key lisp-mode-map &#34;\C-j&#34; &#39;eval-print-last-sexp))

;; Add all of the hooks...
(add-hook &#39;c++-mode-hook &#39;my-c++-mode-hook)
(add-hook &#39;c-mode-hook &#39;my-c-mode-hook)
(add-hook &#39;scheme-mode-hook &#39;my-scheme-mode-hook)
(add-hook &#39;emacs-lisp-mode-hook &#39;my-lisp-mode-hook)
(add-hook &#39;lisp-mode-hook &#39;my-lisp-mode-hook)
(add-hook &#39;perl-mode-hook &#39;my-perl-mode-hook)

;; Complement to next-error
(defun previous-error (n)
  &#34;Visit previous compilation error message and corresponding source code.&#34;
  (interactive &#34;p&#34;)
  (next-error (- n)))

;; Misc...
(transient-mark-mode 1)
(setq mark-even-if-inactive t)
(setq visible-bell nil)
(setq next-line-add-newlines nil)
(setq compile-command &#34;make&#34;)
(setq suggest-key-bindings nil)
(put &#39;eval-expression &#39;disabled nil)
(put &#39;narrow-to-region &#39;disabled nil)
(put &#39;set-goal-column &#39;disabled nil)
(if (&gt;= emacs-major-version 21)
	(setq show-trailing-whitespace t))

;; Elisp archive searching
(autoload &#39;format-lisp-code-directory &#34;lispdir&#34; nil t)
(autoload &#39;lisp-dir-apropos &#34;lispdir&#34; nil t)
(autoload &#39;lisp-dir-retrieve &#34;lispdir&#34; nil t)
(autoload &#39;lisp-dir-verify &#34;lispdir&#34; nil t)

;; Font lock mode
(defun my-make-face (face color &amp;optional bold)
  &#34;Create a face from a color and optionally make it bold&#34;
  (make-face face)
  (copy-face &#39;default face)
  (set-face-foreground face color)
  (if bold (make-face-bold face))
  )

(if (eq window-system &#39;x)
    (progn
      (my-make-face &#39;blue &#34;blue&#34;)
      (my-make-face &#39;red &#34;red&#34;)
      (my-make-face &#39;green &#34;dark green&#34;)
      (setq font-lock-comment-face &#39;blue)
      (setq font-lock-string-face &#39;bold)
      (setq font-lock-type-face &#39;bold)
      (setq font-lock-keyword-face &#39;bold)
      (setq font-lock-function-name-face &#39;red)
      (setq font-lock-doc-string-face &#39;green)
      (add-hook &#39;find-file-hooks &#39;font-lock-auto-mode-select)

      (setq baud-rate 1000000)
      (global-set-key &#34;\C-cmm&#34; &#39;menu-bar-mode)
      (global-set-key &#34;\C-cms&#34; &#39;scroll-bar-mode)
      (global-set-key [backspace] &#39;backward-delete-char)
					;      (global-set-key [delete] &#39;delete-char)
      (standard-display-european t)
      (load-library &#34;iso-transl&#34;)))

;; X11 or PC using direct screen writes
(if window-system
    (progn
      ;;      (global-set-key [M-f1] &#39;hilit-repaint-command)
      ;;      (global-set-key [M-f2] [?\C-u M-f1])
      (setq hilit-mode-enable-list
	    &#39;(not text-mode c-mode c++-mode emacs-lisp-mode lisp-mode
		  scheme-mode)
	    hilit-auto-highlight nil
	    hilit-auto-rehighlight &#39;visible
	    hilit-inhibit-hooks nil
	    hilit-inhibit-rebinding t)
      (require &#39;hilit19)
      (require &#39;paren))
  (setq baud-rate 2400)			; For slow serial connections
  )

;; TTY type terminal
(if (and (not window-system)
	 (not (equal system-type &#39;ms-dos)))
    (progn
      (if first-time
	  (progn
	    (keyboard-translate ?\C-h ?\C-?)
	    (keyboard-translate ?\C-? ?\C-h)))))

;; Under UNIX
(if (not (equal system-type &#39;ms-dos))
    (progn
      (if first-time
	  (server-start))))

;; Add any face changes here
(add-hook &#39;term-setup-hook &#39;my-term-setup-hook)
(defun my-term-setup-hook ()
  (if (eq window-system &#39;pc)
      (progn
;;	(set-face-background &#39;default &#34;red&#34;)
	)))

;; Restore the &#34;desktop&#34; - do this as late as possible
(if first-time
    (progn
      (desktop-load-default)
      (desktop-read)))

;; Indicate that this file has been read at least once
(setq first-time nil)

;; No need to debug anything now

(setq debug-on-error nil)

;; All done
(message &#34;All done, %s%s&#34; (user-login-name) &#34;.&#34;)</pre></div></div></div></div></div><div class=sect2><h3 id=_extending_the_range_of_languages_emacs_understands>2.7.4. Extending the Range of Languages Emacs Understands<a class=anchor href=#_extending_the_range_of_languages_emacs_understands></a></h3><div class=paragraph><p>Now, this is all very well if you only want to program in the languages already catered for in <span class=filename>.emacs</span> (C, C++, Perl, Lisp and Scheme), but what happens if a new language called "whizbang" comes out, full of exciting features?</p></div><div class=paragraph><p>The first thing to do is find out if whizbang comes with any files that tell Emacs about the language. These usually end in <span class=filename>.el</span>, short for "Emacs Lisp". For example, if whizbang is a FreeBSD port, we can locate these files by doing</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% find /usr/ports/lang/whizbang <span class=nt>-name</span> <span class=s2>&#34;*.el&#34;</span> <span class=nt>-print</span></code></pre></div></div><div class=paragraph><p>and install them by copying them into the Emacs site Lisp directory. On FreeBSD, this is <span class=filename>/usr/local/shared/emacs/site-lisp</span>.</p></div><div class=paragraph><p>So for example, if the output from the find command was</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>/usr/ports/lang/whizbang/work/misc/whizbang.el</code></pre></div></div><div class=paragraph><p>we would do</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cp /usr/ports/lang/whizbang/work/misc/whizbang.el /usr/local/shared/emacs/site-lisp</span></code></pre></div></div><div class=paragraph><p>Next, we need to decide what extension whizbang source files have. Let us say for the sake of argument that they all end in <span class=filename>.wiz</span>. We need to add an entry to our <span class=filename>.emacs</span> to make sure Emacs will be able to use the information in <span class=filename>whizbang.el</span>.</p></div><div class=paragraph><p>Find the auto-mode-alist entry in <span class=filename>.emacs</span> and add a line for whizbang, such as:</p></div><div class="literalblock programlisting"><div class=content><pre>...
(&#34;\\.lsp$&#34; . lisp-mode)
(&#34;\\.wiz$&#34; . whizbang-mode)
(&#34;\\.scm$&#34; . scheme-mode)
...</pre></div></div><div class=paragraph><p>This means that Emacs will automatically go into <code>whizbang-mode</code> when you edit a file ending in <span class=filename>.wiz</span>.</p></div><div class=paragraph><p>Just below this, you will find the font-lock-auto-mode-list entry. Add <code>whizbang-mode</code> to it like so:</p></div><div class="literalblock programlisting"><div class=content><pre>;; Auto font lock mode
(defvar font-lock-auto-mode-list
  (list &#39;c-mode &#39;c++-mode &#39;c++-c-mode &#39;emacs-lisp-mode &#39;whizbang-mode &#39;lisp-mode &#39;perl-mode &#39;scheme-mode)
  &#34;List of modes to always start in font-lock-mode&#34;)</pre></div></div><div class=paragraph><p>This means that Emacs will always enable <code>font-lock-mode</code> (ie syntax highlighting) when editing a <span class=filename>.wiz</span> file.</p></div><div class=paragraph><p>And that is all that is needed. If there is anything else you want done automatically when you open up <span class=filename>.wiz</span>, you can add a <code>whizbang-mode hook</code> (see <code>my-scheme-mode-hook</code> for a simple example that adds <code>auto-indent</code>).</p></div></div></div></div><div class=sect1><h2 id=tools-reading>2.8. Further Reading<a class=anchor href=#tools-reading></a></h2><div class=sectionbody><div class=paragraph><p>For information about setting up a development environment for contributing fixes to FreeBSD itself, please see <a href="https://man.freebsd.org/cgi/man.cgi?query=development&amp;sektion=7&amp;format=html">development(7)</a>.</p></div><div class=ulist><ul><li><p>Brian Harvey and Matthew Wright <em>Simply Scheme</em> MIT 1994. ISBN 0-262-08226-8</p></li><li><p>Randall Schwartz <em>Learning Perl</em> O’Reilly 1993 ISBN 1-56592-042-2</p></li><li><p>Patrick Henry Winston and Berthold Klaus Paul Horn <em>Lisp (3rd Edition)</em> Addison-Wesley 1989 ISBN 0-201-08319-1</p></li><li><p>Brian W. Kernighan and Rob Pike <em>The Unix Programming Environment</em> Prentice-Hall 1984 ISBN 0-13-937681-X</p></li><li><p>Brian W. Kernighan and Dennis M. Ritchie <em>The C Programming Language (2nd Edition)</em> Prentice-Hall 1988 ISBN 0-13-110362-8</p></li><li><p>Bjarne Stroustrup <em>The C++ Programming Language</em> Addison-Wesley 1991 ISBN 0-201-53992-6</p></li><li><p>W. Richard Stevens <em>Advanced Programming in the Unix Environment</em> Addison-Wesley 1992 ISBN 0-201-56317-7</p></li><li><p>W. Richard Stevens <em>Unix Network Programming</em> Prentice-Hall 1990 ISBN 0-13-949876-1</p></li></ul></div></div></div><div id=footnotes><hr><div class=footnote id=_footnotedef_1><a href=#_footnoteref_1>1</a>. They do not use the MAKEFILE form as block capitals are often used for documentation files like README.</div><div class=footnote id=_footnotedef_2><a href=#_footnoteref_2>2</a>. Many Emacs users set their EDITOR environment to emacsclient so this happens every time they need to edit a file.</div></div></div><hr><div class=last-modified><p><strong>最後修改於</strong>: March 9, 2024 由 <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/introduction class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/zh-tw/books/developers-handbook/secure class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#tools-synopsis>2.1. 概敘</a></li><li><a href=#tools-intro>2.2. 簡介</a></li><li><a href=#tools-programming>2.3. Programming 概念</a></li><li><a href=#tools-compiling>2.4. 用 <code>cc</code> 來編譯程式</a></li><li><a href=#tools-make>2.5. Make</a></li><li><a href=#debugging>2.6. Debugging</a></li><li><a href=#emacs>2.7. Using Emacs as a Development Environment</a></li><li><a href=#tools-reading>2.8. Further Reading</a></li></ul></nav><hr><div class=resources><h3>資源</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="下載 PDF"></i><a href=https://download.freebsd.org/doc/zh-tw/books/developers-handbook/developers-handbook_zh-tw.pdf>下載 PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title=編輯此頁></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/zh-tw/_index target=_blank>編輯此頁</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/zh-tw/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt=選擇語言>
<span>繁體中文</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>淺色</option><option value=theme-dark>深色</option><option value=theme-high-contrast>高對比</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/zh-tw class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/zh-tw/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>