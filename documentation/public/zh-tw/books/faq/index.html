<!doctype html><html class=theme-light lang=zh-tw><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content="FAQ,FreeBSD FAQ"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/zh-tw/books/faq/><title>FreeBSD 常見問答集 | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="FreeBSD 常見問答集"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="zh-tw"><meta property="og:url" content="http://172.16.201.134:1313/zh-tw/books/faq/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/zh-tw\/books\/faq\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/zh-tw>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books>Books</a></li><li><a href=http://172.16.201.134:1313/zh-tw/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/zh-tw/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=zh-tw>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><div class=book><h1 class=title>FreeBSD 常見問答集</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=copyright>Copyright © 1995-2023 The FreeBSD Documentation Project</div><div class=legalnotice><a id=trademarks></a><details><summary>註冊商標</summary><p>FreeBSD 是 FreeBSD 基金會的註冊商標。</p><p>IEEE, POSIX 以及 802 是 Institute of Electrical and Electronics Engineers, Inc. 在美國的註冊商標。</p><p>Linux 是 Linus Torvalds 的註冊商標。</p><p>Microsoft, IntelliMouse, MS-DOS, Outlook, Windows, Windows Media 以及 Windows NT 是 Microsoft Corporation 在美國和/或其他國家的商標或註冊商標。</p><p>NetBSD是 NetBSD Foundation的註冊商標。</p><p>許多製造商和經銷商使用一些稱為商標的圖案或文字設計來區別自己的產品。 本文件中出現的眾多商標，以及 FreeBSD Project 本身廣所人知的商標，後面將以 “™” 或 “®” 符號來標示。</p></details></div><div class=toc-mobile><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#_前言>1. 前言</a></li><li><a href=#_文件與技術支援>2. 文件與技術支援</a></li><li><a href=#_安裝>3. 安裝</a></li><li><a href=#hardware>4. 硬體相容性</a></li><li><a href=#_troubleshooting>5. Troubleshooting</a></li><li><a href=#_user_applications>6. User Applications</a></li><li><a href=#_kernel_configuration>7. Kernel Configuration</a></li><li><a href=#_disks_file_systems_and_boot_loaders>8. Disks, File Systems, and Boot Loaders</a></li><li><a href=#_zfs>9. ZFS</a></li><li><a href=#_system_administration>10. System Administration</a></li><li><a href=#_the_x_window_system_and_virtual_consoles>11. The X Window System and Virtual Consoles</a></li><li><a href=#_networking>12. Networking</a></li><li><a href=#_security>13. Security</a></li><li><a href=#_ppp>14. PPP</a></li><li><a href=#_serial_communications>15. Serial Communications</a></li><li><a href=#_miscellaneous_questions>16. Miscellaneous Questions</a></li><li><a href=#_the_freebsd_funnies>17. The FreeBSD Funnies</a></li><li><a href=#_advanced_topics>18. Advanced Topics</a></li><li><a href=#_acknowledgments>19. Acknowledgments</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody><div class="paragraph abstract-title"><p>摘要</p></div><div class=paragraph><p>這份文件是 FreeBSD 常見問答集 ( (FAQ) )。我們盡可能地讓這份 FAQ 提供有用的資訊。</p></div><hr></div></div><div class=sect1><h2 id=_前言>1. 前言<a class=anchor href=#_前言></a></h2><div class=sectionbody><div class=sect2><h3 id=_什麼是_freebsd>1.1. 什麼是 FreeBSD？<a class=anchor href=#_什麼是_freebsd></a></h3><div class=paragraph><p>FreeBSD 是一個使用於桌機、筆電、伺服器與嵌入式系統平台的現代作業系統，支援多種<a href=https://www.FreeBSD.org/platforms/>平台</a>。</p></div><div class=paragraph><p>它是根據 U.C. Berkeley 所開發出來的 "4.4BSD-Lite" ，並加上了許多 "4.4BSD-Lite2" 的增強功能。它同時也間接使用了 U.C. Berkeley 所開發出來並由 William Jolitz 移植到 i386™ 的 "Net/2"，也就是 "386BSD"，不過現在 386BSD 的程式碼只剩下極少數還留 存在 FreeBSD 中。</p></div><div class=paragraph><p>FreeBSD 已被廣泛地被世界各地的公司行號、ISP、研究人員、電腦 專家、學生，以及家庭用戶所使用，用在工作、教育以及娛樂上。</p></div><div class=paragraph><p>如果想看關於 FreeBSD 更深入的資料，請看 <a href=https://docs.freebsd.org/en/books/handbook/>FreeBSD 使用手冊</a>。</p></div></div><div class=sect2><h3 id=_發展_freebsd_計畫的目的是什麼>1.2. 發展 FreeBSD 計畫的目的是什麼？<a class=anchor href=#_發展_freebsd_計畫的目的是什麼></a></h3><div class=paragraph><p>FreeBSD 計畫的目的是提供可以任意使用且沒有限制的穩定快速與一般用途的作業系統。</p></div></div><div class=sect2><h3 id=_freebsd_版權有任何限制嗎>1.3. FreeBSD 版權有任何限制嗎？<a class=anchor href=#_freebsd_版權有任何限制嗎></a></h3><div class=paragraph><p>有的。但是這並不是限制你怎麼去使用這些程式碼，而是你怎麼看待 FreeBSD 這個計畫。可以在此閱讀 <a href=https://www.FreeBSD.org/copyright/freebsd-license/>版權本文</a>，簡單來說總結如下:</p></div><div class=ulist><ul><li><p>請勿宣稱是您寫了這個程式。</p></li><li><p>如果它出問題了，不要控告我們。</p></li><li><p>不要移除和修改版權</p></li></ul></div><div class=paragraph><p>我們許多人在這個計畫投入很多心血，並不會介意獲得一些財務上的報酬，但是我們並沒有堅持一定要有。我們相信我們首要的"任務"是將程式碼提供給所有使用者，無論他們有任何的目的，這麼一來，這些程式碼才能被用在最多地方，也才能發揮它們最大的利益。我們相信這就是自由軟體最基本的目標之一，而且我們會盡全力去支持它。</p></div><div class=paragraph><p>在我們 source tree 中有部份的程式碼是採用所謂的<a href=https://www.FreeBSD.org/copyright/COPYING>GNU General Public License (GPL)</a> 或 <a href=https://www.FreeBSD.org/copyright/COPYING.LIB>GNU Library General Public License (LGPL)</a>版權宣告，雖然這些版權宣告是用來保障而非限制使用者的權 利，畢竟是不那麼自由了些。由於這些 GPL 的軟體在商業使用上會引起 非常複雜的版權問題，因此只要有機會，我們會盡量以採用比較鬆的 <a href=https://www.FreeBSD.org/copyright/freebsd-license/>FreeBSD 版權</a> 的軟體來取代這些 GPL 版權宣告的軟體。</p></div></div><div class=sect2><h3 id=_freebsd_可以取代我現在在用的作業系統嗎>1.4. FreeBSD 可以取代我現在在用的作業系統嗎？<a class=anchor href=#_freebsd_可以取代我現在在用的作業系統嗎></a></h3><div class=paragraph><p>對大部份的人來說是這樣沒錯，但事實上這問題並沒有這麼好回答。</p></div><div class=paragraph><p>大部份的人並不是真正在使用一個作業系統。他們使用的是應用程式 ；而那些應用程式才是真正用到作業系統的東西。FreeBSD 是設計用來提供一個強韌且功能完整的作業環境給應用程式來執行。它支援了多種瀏覽器，辦公室套件軟體，電子郵件閱讀軟體，繪圖程式，程式設計環境，網路伺服器軟體，以及幾乎所有你想要的東西。大部份的程式都可以靠 <a href=https://www.FreeBSD.org/ports/>Ports Collection</a> 來管理。</p></div><div class=paragraph><p>但是如果你想要使用的應用程式只能在某個特定的作業系統上面執行 的話，你就不能輕易地把它換掉，或者指望在 FreeBSD 上有很相似的應用程式才有機會。如果你想要的是一個強健的辦公室或是網路伺服器，或是一部穩定的工作站，FreeBSD 無疑是您的最佳選擇。世界各地有很多使用者，包括初學或資深的 UNIX™ 管理人員都選用 FreeBSD 當他們唯一的桌上作業系統。</p></div><div class=paragraph><p>如果你是從其他的 UNIX™-like 環境轉換到 FreeBSD 的話會很熟悉。 Windows™ 或是 Mac OS™ 的使用者可能會對 <a href=https://www.ghostbsd.org>GhostBSD</a> 、 <a href=https://www.midnightbsd.org>MidnightBSD</a> 、 <a href=https://www.nomadbsd.org>NomadBSD</a> 有興趣，他是基於 FreeBSD 的一個桌面環境發行版，非UNIX™ 使用者可能就要多花一點時間來學習怎麼用 UNIX™ 的 方法來做事。你可以從這份 FAQ 和 <a href=https://docs.freebsd.org/en/books/handbook/>FreeBSD 使用手冊</a> 來入門。</p></div></div><div class=sect2><h3 id=_為什麼要叫做_freebsd>1.5. 為什麼要叫做 FreeBSD？<a class=anchor href=#_為什麼要叫做_freebsd></a></h3><div class=ulist><ul><li><p>您可以免費使用它，即使是用於商業用途。</p></li><li><p>整個 FreeBSD 作業系統完整的原始程式都可以免費取得，而且不管是在使用，散佈或是整合進其他程式等各方面也只受到最小的限制 (不論是否用於商業用途)。</p></li><li><p>任何人都可以自由地把他對系統的改良或錯誤修正的程式碼加入 source tree 之中 (當然要符合幾個先決條件)。</p></li></ul></div><div class=paragraph><p>特別值得注意的是這裡的 “free” 出現了兩次，而且它們 的意思是不一樣的：一種代表 “免費”，另一種代表 “自由”。您可以拿 FreeBSD 去做任何您想要做的事，除了一些例外，例如您宣稱 FreeBSD 是您寫的。</p></div></div><div class=sect2><h3 id=_freebsd_及_netbsd_openbsd_以及其他_open_source_bsd_作業系統之間有何不同之處呢>1.6. FreeBSD 及 NetBSD, OpenBSD 以及其他 open source BSD 作業系統之間有何不同之處呢？<a class=anchor href=#_freebsd_及_netbsd_openbsd_以及其他_open_source_bsd_作業系統之間有何不同之處呢></a></h3><div class=paragraph><p>James Howard 寫了一篇關於不同計畫的差異和歷史淵源的好文章叫 <a href=https://jameshoward.us/archive/bsd-family-tree/>The BSD Family Tree</a> 可以回答這個問題。雖然有些資訊有點過時，但是關於歷史淵源的部份仍是相當正確的。</p></div><div class=paragraph><p>時至今日，大部分的 BSD 家族仍是共用修補和程式碼的。這些 BSD 家族有著共同的祖先。</p></div><div class=paragraph><p>FreeBSD 的設計目的如 <a href=https://docs.freebsd.org/zh-tw/books/faq/#FreeBSD-goals>發展 FreeBSD 計畫的目的是什麼</a> 所述。其他 BSD 家族的設計目的如下所述：</p></div><div class=ulist><ul><li><p>OpenBSD 目標在作業系統的安全性。OpenBSD團隊寫的 <a href="https://man.freebsd.org/cgi/man.cgi?query=ssh&amp;sektion=1&amp;format=html">ssh(1)</a> 和 <a href="https://man.freebsd.org/cgi/man.cgi?query=pf&amp;sektion=4&amp;format=html">pf(4)</a> 都移植到了 FreeBSD。</p></li><li><p>NetBSD 目標在易於移植到其他的硬體平台。</p></li><li><p>DragonFly BSD 是 FreeBSD 4.8 的一個分支，發展出許多有趣的特色，包括 HAMMER 檔案系統和支援 "vkernels" 使用者模式。</p></li></ul></div></div><div class=sect2><h3 id=_最新版的_freebsd_是那一版>1.7. 最新版的 FreeBSD 是那一版？<a class=anchor href=#_最新版的_freebsd_是那一版></a></h3><div class=paragraph><p>在 FreeBSD 開發的任何時間點，都有多個平行的分支。13.<em>X</em> releases 是從 <em>13-STABLE</em> 分支而來，而 12.<em>X</em> releases 是從 <em>12-STABLE</em> 分支而來。</p></div><div class=paragraph><p>在 12.0 之前，12.<em>X</em> 系列仍屬 <em>-STABLE</em>分支。 然而從14.<em>X</em> 發行開始，12.<em>X</em> 將只著重在重大問題上(比如：漏洞修補、安全維護)以及所謂的 "extended support" 。</p></div><div class=paragraph><p>Version <a href=ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/12.0-RELEASE/>12.0</a> is the latest release from the <em>12-STABLE</em> branch; it was released in December 2018. Version <a href=ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.4-RELEASE/>10.4</a> is the latest release from the <em>11-STABLE</em> branch; it was released in October 2017.</p></div><div class=paragraph><p>Releases 版 <a href=#release-freq>每幾個月</a> 才會發行一次。 雖然如此，有很多人和 FreeBSD 原始碼同步更新 (詳見 <a href=#current>FreeBSD-CURRENT</a> 和 <a href=#stable>FreeBSD-STABLE</a>的相關問題) ，但因為原始碼是一直不斷地在變動的，所以如果要這麼做的話得要花上更多的精力。</p></div><div class=paragraph><p>其他更多相關 FreeBSD 發行情報，可由 FreeBSD 網站上的 <a href=https://www.FreeBSD.org/releng/#release-build>Release Engineering 頁面</a> 和 <a href="https://man.freebsd.org/cgi/man.cgi?query=release&amp;sektion=7&amp;format=html">release(7)</a>得知。</p></div></div><div class=sect2><h3 id=_什麼是_freebsd_current>1.8. 什麼是 FreeBSD-CURRENT?<a class=anchor href=#_什麼是_freebsd_current></a></h3><div class=paragraph><p><a href=https://docs.freebsd.org/en/books/handbook/#current>FreeBSD-CURRENT</a> 指的是正在發展中的作業系統版本，它終將在適當的時機成為 FreeBSD-STABLE 分支。它實在是只適合給系統發展者以及有毅力的業餘愛好者使用 。如果想要得到有關如何使用<em>-CURRENT</em>的深入資訊，請參考<a href=https://docs.freebsd.org/en/books/handbook/>使用手冊</a>的<a href=https://docs.freebsd.org/en/books/handbook/#current>相關部份</a>。</p></div><div class=paragraph><p>如果您對 FreeBSD 本身並不是很熟悉那麼您就不應該使用FreeBSD-CURRENT。 這個分支的程式碼有時候變動得很快，而且可能會因此 而使您有好幾天的時間無法更新您的系統。我們假設使用 FreeBSD-CURRENT 的使用者都有能力去分析他們所遇到的問題，除錯，並且回報問題。</p></div></div><div class=sect2><h3 id=_什麼是_freebsd_stable>1.9. 什麼是 FreeBSD-STABLE ?<a class=anchor href=#_什麼是_freebsd_stable></a></h3><div class=paragraph><p><em>FreeBSD-STABLE</em> 是由主要發行版這個開發分支來的。他的變動較慢，而且一般來說假設他們都已經先在FreeBSD-CURRENT測試過了。然而在任何時候，FreeBSD-STABLE的原始碼仍有可能不一定適合一般用途，因為他可能包含在 FreeBSD-CURRENT 沒有發現到的錯誤。沒有能力和資源的使用者應該改使用 FreeBSD 正式發行版。另一方面，<em>FreeBSD-CURRENT</em> 從2.0開始就是另一個分支。</p></div><div class=paragraph><p>更多關於開發分支的資訊請見 "<a href=https://docs.freebsd.org/en/books/handbook/>FreeBSD Release Engineering: Creating the Release Branch</a>" ，分支的開發狀態和接下來的發行計畫時間表可以在 <a href=https://www.FreeBSD.org/releng>Release Engineering 資訊</a> 找到。</p></div><div class=paragraph><p><a href=https://www.freebsd.org/releases/12.3R/announce/>12.3</a> 版本是 12-STABLE 分支最新的正式發行版本，在 2021年12月7日發行。<a href=https://www.freebsd.org/releases/13.1R/announce/>13.1</a> 版本是 13-stable 分支最新的正式發行版本，在 2022年5月16日發行。</p></div></div><div class=sect2><h3 id=_每次新的_freebsd_將於什麼時候推出>1.10. 每次新的 FreeBSD 將於什麼時候推出？<a class=anchor href=#_每次新的_freebsd_將於什麼時候推出></a></h3><div class=paragraph><p>一般而言，Release Engineering Team <a href=mailto:re@FreeBSD.org>&lt;</a><a href=mailto:re@FreeBSD.org>re@FreeBSD.org</a>> 約每18個月發行一次主要發行版本，約平均每8個月發行一次次要發行版本。每次新版本的發表時程都會事先公告， 相關的開發人員就會知道，什麼時候該先把手邊的計劃完成並且測試過， 此外，這些更動都已經完整地測試過，確保新功能不會影響系統的穩定度。 雖然，等這些好東西進入<em>-STABLE</em> 的時間令人等得有些不耐煩， 但是大多數的使用者都認為這種謹慎的態度是 FreeBSD 最好的優點之一。</p></div><div class=paragraph><p>有關發行情報的更多細節部分(包括 release 的行程表、進度)，都可在 FreeBSD 網站上的 <a href=https://www.FreeBSD.org/releng/>發行情報</a> 上面獲得。</p></div><div class=paragraph><p>為了滿足那些需要 (或想要) 新鮮刺激感的使用者，上面已經提到我們每周都會發行 snapshots 版可供使用。</p></div></div><div class=sect2><h3 id=_freebsd_snapshots_版本什麼時候推出>1.11. FreeBSD snapshots 版本什麼時候推出?<a class=anchor href=#_freebsd_snapshots_版本什麼時候推出></a></h3><div class=paragraph><p>我們會根據目前<em>-CURRENT</em> 和 <em>-STABLE</em> 的狀況發行 <a href=https://www.freebsd.org/snapshots/>snapshot</a> 版。發表這些 snapshot 的目的在於:</p></div><div class=ulist><ul><li><p>測試最新版的安裝程式。</p></li><li><p>提供一個簡單的方法給那些喜歡使用 <em>-CURRENT</em> 或是 <em>-STABLE</em> 但是沒有時間和頻寬去每天升級的使用者。</p></li><li><p>為了替我們發展中的程式保留一個固定的參考點，以防止我們未來不幸搞砸了。(雖然一般而言 Subversion 可以防止類似者種的可怕事件)。</p></li><li><p>為了確保所有需要測試的新功能或修正都可以得到最多的測試。</p></li></ul></div><div class=paragraph><p>我們不對 <em>-CURRENT</em> snapshot 做任何的 "品質保證" 。如果你想要的是一個穩定且經過充分測試過的系統的話，最好選擇使用完整 releases。</p></div><div class=paragraph><p>您可以從 <a href=https://www.freebsd.org/snapshots/>snapshot</a> 取得 snapshot release。</p></div><div class=paragraph><p>對每個有在活動的分支，都會定期產生官方的 snapshots。</p></div></div><div class=sect2><h3 id=_誰負責_freebsd_的發展>1.12. 誰負責 FreeBSD 的發展？<a class=anchor href=#_誰負責_freebsd_的發展></a></h3><div class=paragraph><p>如果是一些有關 FreeBSD 計畫的關鍵性決定，像是整個計畫的走向 或是決定誰可以改 source tree 裡的程式碼這類的事，是由一個由 9 個 人所組成的 <a href=https://www.FreeBSD.org/administration/#t-core>core team</a> 來決定。而有另一群超過 350 個人的 <a href=https://docs.freebsd.org/en/articles/contributors/#staff-committers>committers</a> 有權利可以直接修改 FreeBSD 的 source tree。</p></div><div class=paragraph><p>無論如何，大多數的改變都會事前在 <a href=#mailing>郵件論壇</a>先討論過，而且不分角色，每個人都可以參與討論。</p></div></div><div class=sect2><h3 id=_我要如何取得_freebsd>1.13. 我要如何取得 FreeBSD？<a class=anchor href=#_我要如何取得_freebsd></a></h3><div class=paragraph><p>所有受到支援的版本都在 <a href=https://www.freebsd.org/where/>FreeBSD release locator pag</a>e:</p></div><div class=ulist><ul><li><p>最新的 <em>13-STABLE</em> 和 13.1-RELEASE 正式發行版本在 <a href=https://www.freebsd.org/where/#download-rel131>the appropriate architecture and installation mode for 13.1-RELEASE</a>。</p></li><li><p>最新的 <em>11-STABLE</em> 和 10.4-RELEASE 正式發行版本在 <a href=https://www.freebsd.org/where/#download-rel123>the appropriate architecture and installation mode for 12.3-RELEASE</a>。</p></li><li><p><a href=#current>-CURRENT</a> 和 <a href=#stable>-STABLE</a> 分支的<a href=https://www.FreeBSD.org/snapshots/>Snapshot</a>版本通常每個月會做一次， 主要是為了提供給那些熱心的測試者和開發人員。</p></li></ul></div><div class=paragraph><p>FreeBSD 的 CD、DVD，還有其他取得方式可以在 <a href=https://docs.freebsd.org/en/books/handbook/mirrors#mirrors>the Handbook</a> 中找到解答。</p></div></div><div class=sect2><h3 id=_我要如何去查詢提交問題回報problem_report簡稱pr資料庫呢>1.14. 我要如何去查詢、提交問題回報(Problem Report，簡稱PR)資料庫呢？<a class=anchor href=#_我要如何去查詢提交問題回報problem_report簡稱pr資料庫呢></a></h3><div class=paragraph><p>所有使用者的變更要求都可以經由網頁版的 PR <a href=https://bugs.FreeBSD.org/search/>查詢</a> 界面來察看。</p></div><div class=paragraph><p>可以使用瀏覽器經由<a href=https://www.FreeBSD.org/support/bugreports/>網頁版的 PR 界面</a> 來傳送問題回報</p></div><div class=paragraph><p>然而，在您回報問題之前，請先閱讀 <a href=https://docs.freebsd.org/zh-tw/articles/problem-reports/>如何撰寫 FreeBSD 的問題回報單</a>，這是一篇告訴你怎樣才能寫出一篇真正有用的問題回報單。</p></div></div></div></div><div class=sect1><h2 id=_文件與技術支援>2. 文件與技術支援<a class=anchor href=#_文件與技術支援></a></h2><div class=sectionbody><div class=sect2><h3 id=_有哪些_freebsd_相關的好書呢>2.1. 有哪些 FreeBSD 相關的好書呢？<a class=anchor href=#_有哪些_freebsd_相關的好書呢></a></h3><div class=paragraph><p>FreeBSD 文件計畫已陸續發表了相當廣泛範圍的文件，可在 <a href=https://www.FreeBSD.org/docs/>https://www.FreeBSD.org/docs/</a> 取得。除此之外，也可以參閱使用手冊的 <a href=https://docs.freebsd.org/en/books/handbook/bibliography#bibliography>參考書目</a>建議的其他書籍。</p></div></div><div class=sect2><h3 id=_這些文件有其他格式的嗎像是純文字ascii或_postscript_之類的格式>2.2. 這些文件有其他格式的嗎？像是：純文字(ASCII)或 PostScript 之類的格式？<a class=anchor href=#_這些文件有其他格式的嗎像是純文字ascii或_postscript_之類的格式></a></h3><div class=paragraph><p>有的。這些文件都分別以不同格式儲存以及壓縮處理並放在 FTP 上面，可以從各個 FreeBSD FTP 站的 <a href=https://download.freebsd.org/doc/>/pub/FreeBSD/doc/</a> 目錄內找到你要的。</p></div><div class=paragraph><p>文件以幾種不同的方式分類。包括：</p></div><div class=ulist><ul><li><p>文件名稱，例如：<code>faq</code> (常見問答集)或是 <code>handbook</code> (FreeBSD 使用手冊)等等。</p></li><li><p>文件的語言與編碼。他們是基於 FreeBSD 系統中 <span class=filename>/usr/shared/locale</span> 裡所見到的語系名稱。目前包含的語言與編碼如下：</p><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">語系名稱</th><th class="tableblock halign-left valign-top">說明</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>en_US.ISO8859-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>英文 (美國)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>bn_BD.ISO10646-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>孟加拉文 (孟加拉)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>da_DK.ISO8859-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>丹麥文 (丹麥)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>de_DE.ISO8859-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>德文 (德國)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>el_GR.ISO8859-7</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>希臘文 (希臘)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>es_ES.ISO8859-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>西班牙文 (西班牙)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>fr_FR.ISO8859-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>法文 (法國)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hu_HU.ISO8859-2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>匈牙利文 (匈牙利)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>it_IT.ISO8859-15</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>義大利文 (義大利)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ja_JP.eucJP</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>日文 (日本, EUC 編碼)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ko_KR.UTF-8</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>韓文 (韓國, UTF-8 編碼)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mn_MN.UTF-8</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>蒙古文 (蒙古, UTF-8 編碼)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>nl_NL.ISO8859-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>荷蘭文 (荷蘭)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pl_PL.ISO8859-2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>波蘭文 (波蘭)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pt_BR.ISO8859-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>葡萄牙文 (巴西)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ru_RU.KOI8-R</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>俄文 (俄羅斯, KOI8-R 編碼)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>tr_TR.ISO8859-9</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>土耳其文 (土耳其)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>zh_CN.UTF-8</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>簡體中文 (中國, UTF-8 編碼)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>zh_TW.UTF-8</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>正體中文 (台灣, UTF-8 編碼)</p></td></tr></tbody></table><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>上列的各國翻譯語系文件中，並非所有文件都有翻譯。</p></div></td></tr></tbody></table></div></li><li><p>文件的格式。我們的每份文件都提供許多不同的格式，每種格式各有利弊， 有些格式適合線上閱讀，有些則適合列印出美觀的文件。 這些不同格式的文件能夠確保我們的讀者們，無論是在螢幕上閱讀或是列印成紙本，都能夠閱讀他們感興趣的內容，目前有提供的格式如下：</p><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">格式</th><th class="tableblock halign-left valign-top">說明</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>html-split</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>依章節區分成多個小的、互相連結的 HTML 檔案</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>html</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>所有內容包含在單一個 HTML 檔案</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pdf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Adobe’s PDF 格式</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>txt</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>純文字</p></td></tr></tbody></table></li><li><p>壓縮和打包方式</p><div class="olist loweralpha"><ol class=loweralpha type=a><li><p>當採用 <code>html-split</code> 格式時，檔案先透過 <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> 工具來進行打包。接著再將產生出來的 <span class=filename>.tar</span> 檔接透過第二點所述的壓縮方式壓縮。</p></li><li><p>其他的格式都是單一個檔案。例如 <span class=filename>article.pdf</span>、<span class=filename>book.html</span> ，以此類推。</p><div class=paragraph><p>這些檔案接著透過 <code>zip</code> 或 <code>bz2</code> 來壓縮。 <a href="https://man.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;format=html">tar(1)</a> 工具可用來解壓縮這些檔案。</p></div><div class=paragraph><p>因此 PDF 版本的手冊經過 <code>bzip2</code> 壓縮後會存成一個叫做 <span class=filename>book.ps.bz2</span> 的檔案，並位於 <span class=filename>handbook/</span> 資料夾。</p></div></li></ol></div></li></ul></div><div class=paragraph><p>在選取格式與壓縮方式後，下載壓縮後的檔案並解壓縮，再把文件複製到想要的地方。</p></div><div class=paragraph><p>舉例來說，透過 <a href="https://man.freebsd.org/cgi/man.cgi?query=bzip2&amp;sektion=1&amp;format=html">bzip2(1)</a> 壓縮的英文問與答的章節分割 HTML 版本，可以在 <span class=filename>doc/en_US.ISO8859-1/books/faq/book.html-split.tar.bz2</span> 中找到。若要下載並解壓縮這個檔案，請輸入</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># fetch https://download.freebsd.org/doc/en_US.ISO8859-1/books/faq/book.html-split.tar.bz2</span>
<span class=c># tar xvf book.html-split.tar.bz2</span></code></pre></div></div><div class=paragraph><p>如果檔案被壓縮過的話，tar 會自動偵測正確的格式並解壓縮出一堆 <span class=filename>.html</span> 檔案。主要的檔案是 <span class=filename>index.html</span>，包含了主目錄跟介紹以及連接到文件其他部份的連結。</p></div></div><div class=sect2><h3 id=_哪裡有關於_freebsd_的郵遞論壇mailing_lists呢_有哪些可以使用的_freebsd_新聞群組news_groups呢>2.3. 哪裡有關於 FreeBSD 的郵遞論壇(mailing lists)呢？ 有哪些可以使用的 FreeBSD 新聞群組(news groups)呢?<a class=anchor href=#_哪裡有關於_freebsd_的郵遞論壇mailing_lists呢_有哪些可以使用的_freebsd_新聞群組news_groups呢></a></h3><div class=paragraph><p>請參考 FreeBSD 使用者手冊上的 <a href=https://docs.freebsd.org/en/books/handbook/eresources/#eresources-mail>郵件論壇 (mailing-lists)</a> 和 <a href=https://docs.freebsd.org/en/books/handbook/eresources/#eresources-news>新聞群組 (news-groups)</a> 。</p></div></div><div class=sect2><h3 id=_有_freebsd_irc_internet_relay_chat頻道嗎>2.4. 有 FreeBSD IRC (Internet Relay Chat)頻道嗎？<a class=anchor href=#_有_freebsd_irc_internet_relay_chat頻道嗎></a></h3><div class=paragraph><p>有的，大部分的 IRC 主機都有 FreeBSD 聊天頻道， FreeBSD wiki 有最新的 <a href=https://wiki.freebsd.org/IRC/Channels>list of IRC channels</a> 。</p></div><div class=paragraph><p>每個頻道都是不同且互相獨立的。因為他們的聊天風格不同，您可以每個都試試看來找到適合您的頻道。</p></div></div><div class=sect2><h3 id=_有沒有任何網頁形式的_freebsd_論壇呢>2.5. 有沒有任何網頁形式的 FreeBSD 論壇呢？<a class=anchor href=#_有沒有任何網頁形式的_freebsd_論壇呢></a></h3><div class=paragraph><p>官方的 FreeBSD 論壇位於 <a href=https://forums.FreeBSD.org/>https://forums.FreeBSD.org/</a>。</p></div></div><div class=sect2><h3 id=_可以從哪邊獲得商業化的_freebsd_的教育課程及技術支援呢>2.6. 可以從哪邊獲得商業化的 FreeBSD 的教育課程及技術支援呢？<a class=anchor href=#_可以從哪邊獲得商業化的_freebsd_的教育課程及技術支援呢></a></h3><div class=paragraph><p><a href=http://www.ixsystems.com>iXsystems, Inc.</a>， <a href=http://www.freebsdmall.com/>FreeBSD 商城</a>的母公司，提供 FreeBSD 開發與調校解決方案與 FreeBSD 與 TrueOS 的軟體 <a href=http://www.ixsystems.com/support>支援</a>。</p></div><div class=paragraph><p>BSD Certification Group, Inc. 提供 DragonFly BSD、FreeBSD、NetBSD 與 OpenBSD 的系統管理認證。請參閱 <a href=http://www.BSDCertification.org>他們的網站</a> 來獲得更多資訊。</p></div><div class=paragraph><p>如果有其他組織提供技術訓練或技術支援，請聯絡 FreeBSD 計畫來加入以上清單。</p></div></div></div></div><div class=sect1><h2 id=_安裝>3. 安裝<a class=anchor href=#_安裝></a></h2><div class=sectionbody><div class=sect2><h3 id=_which_platform_should_i_download_i_have_a_64_bit_capable_intel_cpu_but_i_only_see_amd64>3.1. Which platform should I download? I have a 64 bit capable Intel CPU, but I only see amd64.<a class=anchor href=#_which_platform_should_i_download_i_have_a_64_bit_capable_intel_cpu_but_i_only_see_amd64></a></h3><div class=paragraph><p>amd64 is the term FreeBSD uses for 64-bit compatible x86 architectures (also known as "x86-64" or "x64"). Most modern computers should use amd64. Older hardware should use i386. When installing on a non-x86-compatible architecture, select the platform which best matches the hardware.</p></div></div><div class=sect2><h3 id=_which_file_do_i_download_to_get_freebsd>3.2. Which file do I download to get FreeBSD?<a class=anchor href=#_which_file_do_i_download_to_get_freebsd></a></h3><div class=paragraph><p>On the <a href=https://www.freebsd.org/where/>Getting FreeBSD</a> page, select <code>[iso]</code> next to the architecture that matches the hardware.</p></div><div class=paragraph><p>Any of the following can be used:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">檔案</th><th class="tableblock halign-left valign-top">描述</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>disc1.iso</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Contains enough to install FreeBSD and a minimal set of packages.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>dvd1.iso</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Similar to <span class=filename>disc1.iso</span> but with additional packages.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>memstick.img</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A bootable image sufficient for writing to a USB stick.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>bootonly.iso</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A minimal image that requires network access during installation to completely install FreeBSD.</p></td></tr></tbody></table><div class=paragraph><p>Full instructions on this procedure and a little bit more about installation issues in general can be found in the <a href=https://docs.freebsd.org/en/books/handbook/bsdinstall#bsdinstall>Handbook entry on installing FreeBSD</a>.</p></div></div><div class=sect2><h3 id=_what_do_i_do_if_the_install_image_does_not_boot>3.3. What do I do if the install image does not boot?<a class=anchor href=#_what_do_i_do_if_the_install_image_does_not_boot></a></h3><div class=paragraph><p>This can be caused by not downloading the image in <em>binary</em> mode when using FTP.</p></div><div class=paragraph><p>Some FTP clients default their transfer mode to <em>ascii</em> and attempt to change any end-of-line characters received to match the conventions used by the client’s system. This will almost invariably corrupt the boot image. Check the SHA-256 checksum of the downloaded boot image: if it is not <em>exactly</em> that on the server, then the download process is suspect.</p></div><div class=paragraph><p>When using a command line FTP client, type <em>binary</em> at the FTP command prompt after getting connected to the server and before starting the download of the image.</p></div></div><div class=sect2><h3 id=_可以在哪邊找到安裝_freebsd_的解說步驟呢>3.4. 可以在哪邊找到安裝 FreeBSD 的解說步驟呢？<a class=anchor href=#_可以在哪邊找到安裝_freebsd_的解說步驟呢></a></h3><div class=paragraph><p>安裝說明可以在 <a href=https://docs.freebsd.org/en/books/handbook/bsdinstall#bsdinstall>使用手冊的安裝 FreeBSD</a> 找到。</p></div></div><div class=sect2><h3 id=_要跑_freebsd_至少需要什麼樣的配備呢>3.5. 要跑 FreeBSD 至少需要什麼樣的配備呢？<a class=anchor href=#_要跑_freebsd_至少需要什麼樣的配備呢></a></h3><div class=paragraph><p>FreeBSD 需要 486 以上的 PC，64 MB 以上的 RAM，和至少 1.1 GB 的硬碟空間。</p></div></div><div class=sect2><h3 id=_要怎樣才能自行打造專用的安裝磁片呢>3.6. 要怎樣才能自行打造專用的安裝磁片呢？<a class=anchor href=#_要怎樣才能自行打造專用的安裝磁片呢></a></h3><div class=paragraph><p>可以透過編譯客製化發行版本來建立客製化的 FreeBSD 安裝媒體。請參閱 <a href=https://docs.freebsd.org/en/articles/releng/>Release Engineering</a> 文章的說明。</p></div></div><div class=sect2><h3 id=_windows_可以與_freebsd_共存嗎>3.7. Windows 可以與 FreeBSD 共存嗎？<a class=anchor href=#_windows_可以與_freebsd_共存嗎></a></h3><div class=paragraph><p>如果 Windows™ 先安裝，那就可以。 FreeBSD 的開機管理程式將會管理 Windows™ 和 FreeBSD 的開機啟動。 如果 Windows™ 後安裝，它將覆蓋開機管理程式。如果發生這種情況，請見下一小節。</p></div></div><div class=sect2><h3 id=_another_operating_system_destroyed_my_boot_manager_how_do_i_get_it_back>3.8. Another operating system destroyed my Boot Manager. How do I get it back?<a class=anchor href=#_another_operating_system_destroyed_my_boot_manager_how_do_i_get_it_back></a></h3><div class=paragraph><p>This depends upon the boot manager. The FreeBSD boot selection menu can be reinstalled using <a href="https://man.freebsd.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8&amp;format=html">boot0cfg(8)</a>. For example, to restore the boot menu onto the disk <em>ada0</em>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># boot0cfg -B ada0</span></code></pre></div></div><div class=paragraph><p>The non-interactive MBR bootloader can be installed using <a href="https://man.freebsd.org/cgi/man.cgi?query=gpart&amp;sektion=8&amp;format=html">gpart(8)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gpart bootcode -b /boot/mbr ada0</span></code></pre></div></div><div class=paragraph><p>For more complex situations, including GPT disks, see <a href="https://man.freebsd.org/cgi/man.cgi?query=gpart&amp;sektion=8&amp;format=html">gpart(8)</a>.</p></div></div><div class=sect2><h3 id=_我需要安裝完整的原始碼嗎>3.9. 我需要安裝完整的原始碼嗎？<a class=anchor href=#_我需要安裝完整的原始碼嗎></a></h3><div class=paragraph><p>In general, no. There is nothing in the base system which requires the presence of the source to operate. Some ports, like <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/lsof/>sysutils/lsof</a>, will not build unless the source is installed. In particular, if the port builds a kernel module or directly operates on kernel structures, the source must be installed.</p></div></div><div class=sect2><h3 id=_需要重新_build_kernel_嗎>3.10. 需要重新 build kernel 嗎？<a class=anchor href=#_需要重新_build_kernel_嗎></a></h3><div class=paragraph><p>Usually not. The supplied <code>GENERIC</code> kernel contains the drivers an ordinary computer will need. <a href="https://man.freebsd.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8&amp;format=html">freebsd-update(8)</a>, the FreeBSD binary upgrade tool, cannot upgrade custom kernels, another reason to stick with the <code>GENERIC</code> kernel when possible. For computers with very limited RAM, such as embedded systems, it may be worthwhile to build a smaller custom kernel containing just the required drivers.</p></div></div><div class=sect2><h3 id=_should_i_use_des_blowfish_or_md5_passwords_and_how_do_i_specify_which_form_my_users_receive>3.11. Should I use DES, Blowfish, or MD5 passwords and how do I specify which form my users receive?<a class=anchor href=#_should_i_use_des_blowfish_or_md5_passwords_and_how_do_i_specify_which_form_my_users_receive></a></h3><div class=paragraph><p>FreeBSD uses <em>SHA512</em> by default. DES passwords are still available for backwards compatibility with operating systems that still use the less secure password format. FreeBSD also supports the Blowfish and MD5 password formats. Which password format to use for new passwords is controlled by the <code>passwd_format</code> login capability in <span class=filename>/etc/login.conf</span>, which takes values of <code>des</code>, <code>blf</code> (if these are available) or <code>md5</code>. See the <a href="https://man.freebsd.org/cgi/man.cgi?query=login.conf&amp;sektion=5&amp;format=html">login.conf(5)</a> manual page for more information about login capabilities.</p></div></div><div class=sect2><h3 id=_what_are_the_limits_for_ffs_file_systems>3.12. What are the limits for FFS file systems?<a class=anchor href=#_what_are_the_limits_for_ffs_file_systems></a></h3><div class=paragraph><p>For FFS file systems, the largest file system is practically limited by the amount of memory required to <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> the file system. <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> requires one bit per fragment, which with the default fragment size of 4 KB equates to 32 MB of memory per TB of disk. This does mean that on architectures which limit userland processes to 2 GB (e.g., i386™), the maximum <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a>'able filesystem is ~60 TB.</p></div><div class=paragraph><p>If there was not a <a href="https://man.freebsd.org/cgi/man.cgi?query=fsck&amp;sektion=8&amp;format=html">fsck(8)</a> memory limit the maximum filesystem size would be 2 ^ 64 (blocks) * 32 KB ⇒ 16 Exa * 32 KB ⇒ 512 ZettaBytes.</p></div><div class=paragraph><p>The maximum size of a single FFS file is approximately 2 PB with the default block size of 32 KB. Each 32 KB block can point to 4096 blocks. With triple indirect blocks, the calculation is 32 KB * 12 + 32 KB * 4096 + 32 KB * 4096^2 + 32 KB * 4096^3. Increasing the block size to 64 KB will increase the max file size by a factor of 16.</p></div></div><div class=sect2><h3 id=_why_do_i_get_an_error_message_readin_failed_after_compiling_and_booting_a_new_kernel>3.13. Why do I get an error message, readin failed after compiling and booting a new kernel?<a class=anchor href=#_why_do_i_get_an_error_message_readin_failed_after_compiling_and_booting_a_new_kernel></a></h3><div class=paragraph><p>The world and kernel are out of sync. This is not supported. Be sure to use <code>make buildworld</code> and <code>make buildkernel</code> to update the kernel.</p></div><div class=paragraph><p>Boot the system by specifying the kernel directly at the second stage, pressing any key when the <code>|</code> shows up before loader is started.</p></div></div><div class=sect2><h3 id=_是否有工具可以執行安裝後的設定工作嗎>3.14. 是否有工具可以執行安裝後的設定工作嗎？<a class=anchor href=#_是否有工具可以執行安裝後的設定工作嗎></a></h3><div class=paragraph><p>是的。bsdconfig 提供很棒的介面來進行 FreeBSD 安裝後設定。</p></div></div></div></div><div class=sect1><h2 id=hardware>4. 硬體相容性<a class=anchor href=#hardware></a></h2><div class=sectionbody><div class=sect2><h3 id=compatibility-general>4.1. 一般問題<a class=anchor href=#compatibility-general></a></h3><div class=sect3><h4 id=_i_want_to_get_a_piece_of_hardware_for_my_freebsd_system_which_modelbrandtype_is_best>4.1.1. I want to get a piece of hardware for my FreeBSD system. Which model/brand/type is best?<a class=anchor href=#_i_want_to_get_a_piece_of_hardware_for_my_freebsd_system_which_modelbrandtype_is_best></a></h4><div class=paragraph><p>This is discussed continually on the FreeBSD mailing lists but is to be expected since hardware changes so quickly. Read through the Hardware Notes for FreeBSD <a href=https://www.FreeBSD.org/releases/12.0r/hardware>12.0</a> or <a href=https://www.FreeBSD.org/releases/10.4r/hardware>10.4</a> and search the mailing list <a href=https://www.FreeBSD.org/search/#mailinglists>archives</a> before asking about the latest and greatest hardware. Chances are a discussion about that type of hardware took place just last week.</p></div><div class=paragraph><p>Before purchasing a laptop, check the archives for <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-mobile>FreeBSD laptop computer mailing list</a> and <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions>FreeBSD general questions mailing list</a>, or possibly a specific mailing list for a particular hardware type.</p></div></div><div class=sect3><h4 id=_what_are_the_limits_for_memory_does_freebsd_support_more_than_4gb_of_memory_ram_more_than_16gb_more_than_48gb>4.1.2. What are the limits for memory? Does FreeBSD support more than 4 GB of memory (RAM)? More than 16 GB? More than 48 GB?<a class=anchor href=#_what_are_the_limits_for_memory_does_freebsd_support_more_than_4gb_of_memory_ram_more_than_16gb_more_than_48gb></a></h4><div class=paragraph><p>FreeBSD as an operating system generally supports as much physical memory (RAM) as the platform it is running on does. Keep in mind that different platforms have different limits for memory; for example i386™ without PAE supports at most 4 GB of memory (and usually less than that because of PCI address space) and i386™ with PAE supports at most 64 GB memory. As of FreeBSD 10, AMD64 platforms support up to 4 TB of physical memory.</p></div></div><div class=sect3><h4 id=_why_does_freebsd_report_less_than_4gb_memory_when_installed_on_an_i386_machine>4.1.3. Why does FreeBSD report less than 4 GB memory when installed on an i386 machine?<a class=anchor href=#_why_does_freebsd_report_less_than_4gb_memory_when_installed_on_an_i386_machine></a></h4><div class=paragraph><p>The total address space on i386™ machines is 32-bit, meaning that at most 4 GB of memory is addressable (can be accessed). Furthermore, some addresses in this range are reserved by hardware for different purposes, for example for using and controlling PCI devices, for accessing video memory, and so on. Therefore, the total amount of memory usable by the operating system for its kernel and applications is limited to significantly less than 4 GB. Usually, 3.2 GB to 3.7 GB is the maximum usable physical memory in this configuration.</p></div><div class=paragraph><p>To access more than 3.2 GB to 3.7 GB of installed memory (meaning up to 4 GB but also more than 4 GB), a special tweak called PAE must be used. PAE stands for Physical Address Extension and is a way for 32-bit x86 CPUs to address more than 4 GB of memory. It remaps the memory that would otherwise be overlaid by address reservations for hardware devices above the 4 GB range and uses it as additional physical memory (see <a href="https://man.freebsd.org/cgi/man.cgi?query=pae&amp;sektion=4&amp;format=html">pae(4)</a>). Using PAE has some drawbacks; this mode of memory access is a little bit slower than the normal (without PAE) mode and loadable modules (see <a href="https://man.freebsd.org/cgi/man.cgi?query=kld&amp;sektion=4&amp;format=html">kld(4)</a>) are not supported. This means all drivers must be compiled into the kernel.</p></div><div class=paragraph><p>The most common way to enable PAE is to build a new kernel with the special ready-provided kernel configuration file called <span class=filename>PAE</span>, which is already configured to build a safe kernel. Note that some entries in this kernel configuration file are too conservative and some drivers marked as unready to be used with PAE are actually usable. A rule of thumb is that if the driver is usable on 64-bit architectures (like AMD64), it is also usable with PAE. When creating a custom kernel configuration file, PAE can be enabled by adding the following line:</p></div><div class="literalblock programlisting"><div class=content><pre>options       PAE</pre></div></div><div class=paragraph><p>PAE is not much used nowadays because most new x86 hardware also supports running in 64-bit mode, known as AMD64 or Intel™ 64. It has a much larger address space and does not need such tweaks. FreeBSD supports AMD64 and it is recommended that this version of FreeBSD be used instead of the i386™ version if 4 GB or more memory is required.</p></div></div></div><div class=sect2><h3 id=compatibility-processors>4.2. Architectures and Processors<a class=anchor href=#compatibility-processors></a></h3><div class=sect3><h4 id=_does_freebsd_support_architectures_other_than_the_x86>4.2.1. Does FreeBSD support architectures other than the x86?<a class=anchor href=#_does_freebsd_support_architectures_other_than_the_x86></a></h4><div class=paragraph><p>Yes. FreeBSD divides support into multiple tiers. Tier 1 architectures, such as i386 or amd64; are fully supported. Tiers 2 and 3 are supported on a best-effort basis. A full explanation of the tier system is available in the <a href=https://docs.freebsd.org/en/articles/committers-guide/#archs>Committer’s Guide.</a></p></div><div class=paragraph><p>A complete list of supported architectures can be found on the <a href=https://www.FreeBSD.org/platforms/>platforms page.</a></p></div></div><div class=sect3><h4 id=_does_freebsd_support_symmetric_multiprocessing_smp>4.2.2. Does FreeBSD support Symmetric Multiprocessing (SMP)?<a class=anchor href=#_does_freebsd_support_symmetric_multiprocessing_smp></a></h4><div class=paragraph><p>FreeBSD supports symmetric multi-processor (SMP) on all non-embedded platforms (e.g, i386, amd64, etc.). SMP is also supported in arm and MIPS kernels, although some CPUs may not support this. FreeBSD’s SMP implementation uses fine-grained locking, and performance scales nearly linearly with number of CPUs.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=smp&amp;sektion=4&amp;format=html">smp(4)</a> has more details.</p></div></div><div class=sect3><h4 id=_what_is_microcode_how_do_i_install_intel_cpu_microcode_updates>4.2.3. What is microcode? How do I install Intel CPU microcode updates?<a class=anchor href=#_what_is_microcode_how_do_i_install_intel_cpu_microcode_updates></a></h4><div class=paragraph><p>Microcode is a method of programmatically implementing hardware level instructions. This allows for CPU bugs to be fixed without replacing the on board chip.</p></div><div class=paragraph><p>Install <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/devcpu-data/>sysutils/devcpu-data</a>, then add:</p></div><div class="literalblock programlisting"><div class=content><pre>microcode_update_enable=&#34;YES&#34;</pre></div></div><div class=paragraph><p>to <span class=filename>/etc/rc.conf</span></p></div></div></div><div class=sect2><h3 id=compatibility-drives>4.3. Hard Drives, Tape Drives, and CD and DVD Drives<a class=anchor href=#compatibility-drives></a></h3><div class=sect3><h4 id=_what_kind_of_hard_drives_does_freebsd_support>4.3.1. What kind of hard drives does FreeBSD support?<a class=anchor href=#_what_kind_of_hard_drives_does_freebsd_support></a></h4><div class=paragraph><p>FreeBSD supports EIDE, SATA, SCSI, and SAS drives (with a compatible controller; see the next section), and all drives using the original "Western Digital" interface (MFM, RLL, ESDI, and of course IDE). A few ESDI controllers that use proprietary interfaces may not work: stick to WD1002/3/6/7 interfaces and clones.</p></div></div><div class=sect3><h4 id=_which_scsi_or_sas_controllers_are_supported>4.3.2. Which SCSI or SAS controllers are supported?<a class=anchor href=#_which_scsi_or_sas_controllers_are_supported></a></h4><div class=paragraph><p>See the complete list in the Hardware Notes for FreeBSD <a href=https://www.FreeBSD.org/releases/12.0r/hardware>12.0</a> or <a href=https://www.FreeBSD.org/releases/10.4r/hardware>10.4</a>.</p></div></div><div class=sect3><h4 id=_what_types_of_tape_drives_are_supported>4.3.3. What types of tape drives are supported?<a class=anchor href=#_what_types_of_tape_drives_are_supported></a></h4><div class=paragraph><p>FreeBSD supports all standard SCSI tape interfaces.</p></div></div><div class=sect3><h4 id=_does_freebsd_support_tape_changers>4.3.4. Does FreeBSD support tape changers?<a class=anchor href=#_does_freebsd_support_tape_changers></a></h4><div class=paragraph><p>FreeBSD supports SCSI changers using the <a href="https://man.freebsd.org/cgi/man.cgi?query=ch&amp;sektion=4&amp;format=html">ch(4)</a> device and the <a href="https://man.freebsd.org/cgi/man.cgi?query=chio&amp;sektion=1&amp;format=html">chio(1)</a> command. The details of how to control the changer can be found in <a href="https://man.freebsd.org/cgi/man.cgi?query=chio&amp;sektion=1&amp;format=html">chio(1)</a>.</p></div><div class=paragraph><p>While AMANDA and some other products already understands changers, other applications only know how to move a tape from one point to another. In this case, keep track of which slot a tape is in and which slot the tape currently in the drive needs to go back to.</p></div></div><div class=sect3><h4 id=_which_cd_rom_and_cd_rw_drives_are_supported_by_freebsd>4.3.5. Which CD-ROM and CD-RW drives are supported by FreeBSD?<a class=anchor href=#_which_cd_rom_and_cd_rw_drives_are_supported_by_freebsd></a></h4><div class=paragraph><p>Any SCSI drive connected to a supported controller is supported. Most ATAPI compatible IDE CD-ROMs are supported.</p></div><div class=paragraph><p>FreeBSD supports any ATAPI-compatible IDE CD-R or CD-RW drive.</p></div><div class=paragraph><p>FreeBSD also supports any SCSI CD-R or CD-RW drives. Install the <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/cdrtools/>sysutils/cdrtools</a> port or package, then use <code>cdrecord</code>.</p></div></div></div><div class=sect2><h3 id=compatibility-kbd-mice>4.4. Keyboards and Mice<a class=anchor href=#compatibility-kbd-mice></a></h3><div class=sect3><h4 id=moused>4.4.1. Is it possible to use a mouse outside the X Window system?<a class=anchor href=#moused></a></h4><div class=paragraph><p>The default console driver, <a href="https://man.freebsd.org/cgi/man.cgi?query=syscons&amp;sektion=4&amp;format=html">syscons(4)</a>, provides the ability to use a mouse pointer in text consoles to cut & paste text. Run the mouse daemon, <a href="https://man.freebsd.org/cgi/man.cgi?query=moused&amp;sektion=8&amp;format=html">moused(8)</a>, and turn on the mouse pointer in the virtual console:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># moused -p /dev/xxxx -t yyyy</span>
<span class=c># vidcontrol -m on</span></code></pre></div></div><div class=paragraph><p>Where <em>xxxx</em> is the mouse device name and <em>yyyy</em> is a protocol type for the mouse. The mouse daemon can automatically determine the protocol type of most mice, except old serial mice. Specify the <code>auto</code> protocol to invoke automatic detection. If automatic detection does not work, see the <a href="https://man.freebsd.org/cgi/man.cgi?query=moused&amp;sektion=8&amp;format=html">moused(8)</a> manual page for a list of supported protocol types.</p></div><div class=paragraph><p>For a PS/2 mouse, add <code>moused_enable="YES"</code> to <span class=filename>/etc/rc.conf</span> to start the mouse daemon at boot time. Additionally, to use the mouse daemon on all virtual terminals instead of just the console, add <code>allscreens_flags="-m on"</code> to <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>When the mouse daemon is running, access to the mouse must be coordinated between the mouse daemon and other programs such as X Windows. Refer to the FAQ<a href=#x-and-moused>Why does my mouse not work with X?</a> for more details on this issue.</p></div></div><div class=sect3><h4 id=_how_do_i_cut_and_paste_text_with_a_mouse_in_the_text_console>4.4.2. How do I cut and paste text with a mouse in the text console?<a class=anchor href=#_how_do_i_cut_and_paste_text_with_a_mouse_in_the_text_console></a></h4><div class=paragraph><p>It is not possible to remove data using the mouse. However, it is possible to copy and paste. Once the mouse daemon is running as described in the <a href=#moused>previous question</a>, hold down button 1 (left button) and move the mouse to select a region of text. Then, press button 2 (middle button) to paste it at the text cursor. Pressing button 3 (right button) will "extend" the selected region of text.</p></div><div class=paragraph><p>If the mouse does not have a middle button, it is possible to emulate one or remap buttons using mouse daemon options. See the <a href="https://man.freebsd.org/cgi/man.cgi?query=moused&amp;sektion=8&amp;format=html">moused(8)</a> manual page for details.</p></div></div></div><div class=sect2><h3 id=_my_mouse_has_a_fancy_wheel_and_buttons_can_i_use_them_in_freebsd>4.5. My mouse has a fancy wheel and buttons. Can I use them in FreeBSD?<a class=anchor href=#_my_mouse_has_a_fancy_wheel_and_buttons_can_i_use_them_in_freebsd></a></h3><div class=paragraph><p>The answer is, unfortunately, "It depends". These mice with additional features require specialized driver in most cases. Unless the mouse device driver or the user program has specific support for the mouse, it will act just like a standard two, or three button mouse.</p></div><div class=paragraph><p>For the possible usage of wheels in the X Window environment, refer to <a href=#x-and-wheel>that section</a>.</p></div><div class=sect3><h4 id=_how_do_i_use_my_delete_key_in_sh_and_csh>4.5.1. How do I use my delete key in sh and csh?<a class=anchor href=#_how_do_i_use_my_delete_key_in_sh_and_csh></a></h4><div class=paragraph><p>For the Bourne Shell, add the following lines to <span class=filename>~/.shrc</span>. See <a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=editrc&amp;sektion=5&amp;format=html">editrc(5)</a>.</p></div><div class="literalblock programlisting"><div class=content><pre>bind ^? ed-delete-next-char # for console
bind ^[[3~ ed-delete-next-char # for xterm</pre></div></div><div class=paragraph><p>For the C Shell, add the following lines to <span class=filename>~/.cshrc</span>. See <a href="https://man.freebsd.org/cgi/man.cgi?query=csh&amp;sektion=1&amp;format=html">csh(1)</a>.</p></div><div class="literalblock programlisting"><div class=content><pre>bindkey ^? delete-char # for console
bindkey ^[[3~ delete-char # for xterm</pre></div></div><div class=paragraph><p>For more information, see <a href=http://www.ibb.net/~anne/keyboard.html>this page</a>.</p></div></div></div><div class=sect2><h3 id=compatibility-other>4.6. Other Hardware<a class=anchor href=#compatibility-other></a></h3><div class=sect3><h4 id=_workarounds_for_no_sound_from_my_pcm4_sound_card>4.6.1. Workarounds for no sound from my pcm4 sound card?<a class=anchor href=#_workarounds_for_no_sound_from_my_pcm4_sound_card></a></h4><div class=paragraph><p>Some sound cards set their output volume to 0 at every boot. Run the following command every time the machine boots:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mixer pcm 100 vol 100 cd 100</span></code></pre></div></div></div><div class=sect3><h4 id=_does_freebsd_support_power_management_on_my_laptop>4.6.2. Does FreeBSD support power management on my laptop?<a class=anchor href=#_does_freebsd_support_power_management_on_my_laptop></a></h4><div class=paragraph><p>FreeBSD supports the ACPI features found in modern hardware. Further information can be found in <a href="https://man.freebsd.org/cgi/man.cgi?query=acpi&amp;sektion=4&amp;format=html">acpi(4)</a>.</p></div></div></div></div></div><div class=sect1><h2 id=_troubleshooting>5. Troubleshooting<a class=anchor href=#_troubleshooting></a></h2><div class=sectionbody><div class=sect2><h3 id=_why_is_freebsd_finding_the_wrong_amount_of_memory_on_i386_hardware>5.1. Why is FreeBSD finding the wrong amount of memory on i386 hardware?<a class=anchor href=#_why_is_freebsd_finding_the_wrong_amount_of_memory_on_i386_hardware></a></h3><div class=paragraph><p>The most likely reason is the difference between physical memory addresses and virtual addresses.</p></div><div class=paragraph><p>The convention for most PC hardware is to use the memory area between 3.5 GB and 4 GB for a special purpose (usually for PCI). This address space is used to access PCI hardware. As a result real, physical memory cannot be accessed by that address space.</p></div><div class=paragraph><p>What happens to the memory that should appear in that location is hardware dependent. Unfortunately, some hardware does nothing and the ability to use that last 500 MB of RAM is entirely lost.</p></div><div class=paragraph><p>Luckily, most hardware remaps the memory to a higher location so that it can still be used. However, this can cause some confusion when watching the boot messages.</p></div><div class=paragraph><p>On a 32-bit version of FreeBSD, the memory appears lost, since it will be remapped above 4 GB, which a 32-bit kernel is unable to access. In this case, the solution is to build a PAE enabled kernel. See the entry on memory limits for more information.</p></div><div class=paragraph><p>On a 64-bit version of FreeBSD, or when running a PAE-enabled kernel, FreeBSD will correctly detect and remap the memory so it is usable. During boot, however, it may seem as if FreeBSD is detecting more memory than the system really has, due to the described remapping. This is normal and the available memory will be corrected as the boot process completes.</p></div></div><div class=sect2><h3 id=_why_do_my_programs_occasionally_die_with_signal_11_errors>5.2. Why do my programs occasionally die with Signal 11 errors?<a class=anchor href=#_why_do_my_programs_occasionally_die_with_signal_11_errors></a></h3><div class=paragraph><p>Signal 11 errors are caused when a process has attempted to access memory which the operating system has not granted it access to. If something like this is happening at seemingly random intervals, start investigating the cause.</p></div><div class=paragraph><p>These problems can usually be attributed to either:</p></div><div class="olist arabic"><ol class=arabic><li><p>If the problem is occurring only in a specific custom application, it is probably a bug in the code.</p></li><li><p>If it is a problem with part of the base FreeBSD system, it may also be buggy code, but more often than not these problems are found and fixed long before us general FAQ readers get to use these bits of code (that is what -CURRENT is for).</p></li></ol></div><div class=paragraph><p>It is probably not a FreeBSD bug if the problem occurs compiling a program, but the activity that the compiler is carrying out changes each time.</p></div><div class=paragraph><p>For example, if <code>make buildworld</code> fails while trying to compile <span class=filename>ls.c</span> into <span class=filename>ls.o</span> and, when run again, it fails in the same place, this is a broken build. Try updating source and try again. If the compile fails elsewhere, it is almost certainly due to hardware.</p></div><div class=paragraph><p>In the first case, use a debugger such as <a href="https://man.freebsd.org/cgi/man.cgi?query=gdb&amp;sektion=1&amp;format=html">gdb(1)</a> to find the point in the program which is attempting to access a bogus address and fix it.</p></div><div class=paragraph><p>In the second case, verify which piece of hardware is at fault.</p></div><div class=paragraph><p>Common causes of this include:</p></div><div class="olist arabic"><ol class=arabic><li><p>The hard disks might be overheating: Check that the fans are still working, as the disk and other hardware might be overheating.</p></li><li><p>The processor running is overheating: This might be because the processor has been overclocked, or the fan on the processor might have died. In either case, ensure that the hardware is running at what it is specified to run at, at least while trying to solve this problem. If it is not, clock it back to the default settings.)</p><div class=paragraph><p>Regarding overclocking, it is far cheaper to have a slow system than a fried system that needs replacing! Also the community is not sympathetic to problems on overclocked systems.</p></div></li><li><p>Dodgy memory: if multiple memory SIMMS/DIMMS are installed, pull them all out and try running the machine with each SIMM or DIMM individually to narrow the problem down to either the problematic DIMM/SIMM or perhaps even a combination.</p></li><li><p>Over-optimistic motherboard settings: the BIOS settings, and some motherboard jumpers, provide options to set various timings. The defaults are often sufficient, but sometimes setting the wait states on RAM too low, or setting the "RAM Speed: Turbo" option will cause strange behavior. A possible idea is to set to BIOS defaults, after noting the current settings first.</p></li><li><p>Unclean or insufficient power to the motherboard. Remove any unused I/O boards, hard disks, or CD-ROMs, or disconnect the power cable from them, to see if the power supply can manage a smaller load. Or try another power supply, preferably one with a little more power. For instance, if the current power supply is rated at 250 Watts, try one rated at 300 Watts.</p></li></ol></div><div class=paragraph><p>Read the section on <a href=#signal11>Signal 11</a> for a further explanation and a discussion on how memory testing software or hardware can still pass faulty memory. There is an extensive FAQ on this at <a href=http://www.bitwizard.nl/sig11/>the SIG11 problem FAQ</a>.</p></div><div class=paragraph><p>Finally, if none of this has helped, it is possibly a bug in FreeBSD. Follow <a href=#access-pr>these instructions</a> to send a problem report.</p></div></div><div class=sect2><h3 id=_my_system_crashes_with_either_fatal_trap_12_page_fault_in_kernel_mode_or_panic_and_spits_out_a_bunch_of_information_what_should_i_do>5.3. My system crashes with either Fatal trap 12: page fault in kernel mode, or panic:, and spits out a bunch of information. What should I do?<a class=anchor href=#_my_system_crashes_with_either_fatal_trap_12_page_fault_in_kernel_mode_or_panic_and_spits_out_a_bunch_of_information_what_should_i_do></a></h3><div class=paragraph><p>The FreeBSD developers are interested in these errors, but need more information than just the error message. Copy the full crash message. Then consult the FAQ section on <a href=#kernel-panic-troubleshooting>kernel panics</a>, build a debugging kernel, and get a backtrace. This might sound difficult, but does not require any programming skills. Just follow the instructions.</p></div></div><div class=sect2><h3 id=_what_is_the_meaning_of_the_error_maxproc_limit_exceeded_by_uid_i_please_see_tuning7_and_login_conf5>5.4. What is the meaning of the error maxproc limit exceeded by uid %i, please see tuning(7) and login.conf(5)?<a class=anchor href=#_what_is_the_meaning_of_the_error_maxproc_limit_exceeded_by_uid_i_please_see_tuning7_and_login_conf5></a></h3><div class=paragraph><p>The FreeBSD kernel will only allow a certain number of processes to exist at one time. The number is based on the <code>kern.maxusers</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> variable. <code>kern.maxusers</code> also affects various other in-kernel limits, such as network buffers. If the machine is heavily loaded, increase <code>kern.maxusers</code>. This will increase these other system limits in addition to the maximum number of processes.</p></div><div class=paragraph><p>To adjust the <code>kern.maxusers</code> value, see the <a href=https://docs.freebsd.org/en/books/handbook/config-tuning#kern-maxfiles>File/Process Limits</a> section of the Handbook. While that section refers to open files, the same limits apply to processes.</p></div><div class=paragraph><p>If the machine is lightly loaded but running a very large number of processes, adjust the <code>kern.maxproc</code> tunable by defining it in <span class=filename>/boot/loader.conf</span>. The tunable will not get adjusted until the system is rebooted. For more information about tuning tunables, see <a href="https://man.freebsd.org/cgi/man.cgi?query=loader.conf&amp;sektion=5&amp;format=html">loader.conf(5)</a>. If these processes are being run by a single user, adjust <code>kern.maxprocperuid</code> to be one less than the new <code>kern.maxproc</code> value. It must be at least one less because one system program, <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a>, must always be running.</p></div></div><div class=sect2><h3 id=_why_do_full_screen_applications_on_remote_machines_misbehave>5.5. Why do full screen applications on remote machines misbehave?<a class=anchor href=#_why_do_full_screen_applications_on_remote_machines_misbehave></a></h3><div class=paragraph><p>The remote machine may be setting the terminal type to something other than <code>xterm</code> which is required by the FreeBSD console. Alternatively the kernel may have the wrong values for the width and height of the terminal.</p></div><div class=paragraph><p>Check the value of the <code>TERM</code> environment variable is <code>xterm</code>. If the remote machine does not support that try <code>vt100</code>.</p></div><div class=paragraph><p>Run <code>stty -a</code> to check what the kernel thinks the terminal dimensions are. If they are incorrect, they can be changed by running <code>stty rows <em>RR</em> cols <em>CC</em></code>.</p></div><div class=paragraph><p>Alternatively, if the client machine has <a class=package href=https://cgit.freebsd.org/ports/tree/x11/xterm/>x11/xterm</a> installed, then running <code>resize</code> will query the terminal for the correct dimensions and set them.</p></div></div><div class=sect2><h3 id=_why_does_it_take_so_long_to_connect_to_my_computer_via_ssh_or_telnet>5.6. Why does it take so long to connect to my computer via ssh or telnet?<a class=anchor href=#_why_does_it_take_so_long_to_connect_to_my_computer_via_ssh_or_telnet></a></h3><div class=paragraph><p>The symptom: there is a long delay between the time the TCP connection is established and the time when the client software asks for a password (or, in <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a>'s case, when a login prompt appears).</p></div><div class=paragraph><p>The problem: more likely than not, the delay is caused by the server software trying to resolve the client’s IP address into a hostname. Many servers, including the Telnet and SSH servers that come with FreeBSD, do this to store the hostname in a log file for future reference by the administrator.</p></div><div class=paragraph><p>The remedy: if the problem occurs whenever connecting the client computer to any server, the problem is with the client. If the problem only occurs when someone connects to the server computer, the problem is with the server.</p></div><div class=paragraph><p>If the problem is with the client, the only remedy is to fix the DNS so the server can resolve it. If this is on a local network, consider it a server problem and keep reading. If this is on the Internet, contact your ISP.</p></div><div class=paragraph><p>If the problem is with the server on a local network, configure the server to resolve address-to-hostname queries for the local address range. See <a href="https://man.freebsd.org/cgi/man.cgi?query=hosts&amp;sektion=5&amp;format=html">hosts(5)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> for more information. If this is on the Internet, the problem may be that the local server’s resolver is not functioning correctly. To check, try to look up another host such as <code>www.yahoo.com</code>. If it does not work, that is the problem.</p></div><div class=paragraph><p>Following a fresh install of FreeBSD, it is also possible that domain and name server information is missing from <span class=filename>/etc/resolv.conf</span>. This will often cause a delay in SSH, as the option <code>UseDNS</code> is set to <code>yes</code> by default in <span class=filename>/etc/ssh/sshd_config</span>. If this is causing the problem, either fill in the missing information in <span class=filename>/etc/resolv.conf</span> or set <code>UseDNS</code> to <code>no</code> in <span class=filename>sshd_config</span> as a temporary workaround.</p></div></div><div class=sect2><h3 id=_why_does_file_table_is_full_show_up_repeatedly_in_dmesg8>5.7. Why does file: table is full show up repeatedly in dmesg8?<a class=anchor href=#_why_does_file_table_is_full_show_up_repeatedly_in_dmesg8></a></h3><div class=paragraph><p>This error message indicates that the number of available file descriptors have been exhausted on the system. Refer to the <a href=https://docs.freebsd.org/en/books/handbook/config-tuning#kern-maxfiles>kern.maxfiles</a> section of the <a href=https://docs.freebsd.org/en/books/handbook/config-tuning#configtuning-kernel-limits>Tuning Kernel Limits</a> section of the Handbook for a discussion and solution.</p></div></div><div class=sect2><h3 id=_why_does_the_clock_on_my_computer_keep_incorrect_time>5.8. Why does the clock on my computer keep incorrect time?<a class=anchor href=#_why_does_the_clock_on_my_computer_keep_incorrect_time></a></h3><div class=paragraph><p>The computer has two or more clocks, and FreeBSD has chosen to use the wrong one.</p></div><div class=paragraph><p>Run <a href="https://man.freebsd.org/cgi/man.cgi?query=dmesg&amp;sektion=8&amp;format=html">dmesg(8)</a>, and check for lines that contain <code>Timecounter</code>. The one with the highest quality value that FreeBSD chose.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dmesg | grep Timecounter</span>
Timecounter <span class=s2>&#34;i8254&#34;</span> frequency 1193182 Hz quality 0
Timecounter <span class=s2>&#34;ACPI-fast&#34;</span> frequency 3579545 Hz quality 1000
Timecounter <span class=s2>&#34;TSC&#34;</span> frequency 2998570050 Hz quality 800
Timecounters tick every 1.000 msec</code></pre></div></div><div class=paragraph><p>Confirm this by checking the <code>kern.timecounter.hardware</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=3&amp;format=html">sysctl(3)</a>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.timecounter.hardware</span>
kern.timecounter.hardware: ACPI-fast</code></pre></div></div><div class=paragraph><p>It may be a broken ACPI timer. The simplest solution is to disable the ACPI timer in <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>debug.acpi.disabled=&#34;timer&#34;</pre></div></div><div class=paragraph><p>Or the BIOS may modify the TSC clock—​perhaps to change the speed of the processor when running from batteries, or going into a power saving mode, but FreeBSD is unaware of these adjustments, and appears to gain or lose time.</p></div><div class=paragraph><p>In this example, the <code>i8254</code> clock is also available, and can be selected by writing its name to the <code>kern.timecounter.hardware</code> <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=3&amp;format=html">sysctl(3)</a>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.timecounter.hardware=i8254</span>
kern.timecounter.hardware: TSC -&gt; i8254</code></pre></div></div><div class=paragraph><p>The computer should now start keeping more accurate time.</p></div><div class=paragraph><p>To have this change automatically run at boot time, add the following line to <span class=filename>/etc/sysctl.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>kern.timecounter.hardware=i8254</pre></div></div></div><div class=sect2><h3 id=_what_does_the_error_swap_pager_indefinite_wait_buffer_mean>5.9. What does the error swap_pager: indefinite wait buffer: mean?<a class=anchor href=#_what_does_the_error_swap_pager_indefinite_wait_buffer_mean></a></h3><div class=paragraph><p>This means that a process is trying to page memory from disk, and the page attempt has hung trying to access the disk for more than 20 seconds. It might be caused by bad blocks on the disk drive, disk wiring, cables, or any other disk I/O-related hardware. If the drive itself is bad, disk errors will appear in <span class=filename>/var/log/messages</span> and in the output of <code>dmesg</code>. Otherwise, check the cables and connections.</p></div></div><div class=sect2><h3 id=_what_is_a_lock_order_reversal>5.10. What is a lock order reversal?<a class=anchor href=#_what_is_a_lock_order_reversal></a></h3><div class=paragraph><p>The FreeBSD kernel uses a number of resource locks to arbitrate contention for certain resources. When multiple kernel threads try to obtain multiple resource locks, there’s always the potential for a deadlock, where two threads have each obtained one of the locks and blocks forever waiting for the other thread to release one of the other locks. This sort of locking problem can be avoided if all threads obtain the locks in the same order.</p></div><div class=paragraph><p>A run-time lock diagnostic system called <a href="https://man.freebsd.org/cgi/man.cgi?query=witness&amp;sektion=4&amp;format=html">witness(4)</a>, enabled in FreeBSD-CURRENT and disabled by default for stable branches and releases, detects the potential for deadlocks due to locking errors, including errors caused by obtaining multiple resource locks with a different order from different parts of the kernel. The <a href="https://man.freebsd.org/cgi/man.cgi?query=witness&amp;sektion=4&amp;format=html">witness(4)</a> framework tries to detect this problem as it happens, and reports it by printing a message to the system console about a <code>lock order reversal</code> (often referred to also as LOR).</p></div><div class=paragraph><p>It is possible to get false positives, as <a href="https://man.freebsd.org/cgi/man.cgi?query=witness&amp;sektion=4&amp;format=html">witness(4)</a> is conservative. A true positive report <em>does not</em> mean that a system is dead-locked; instead it should be understood as a warning that a deadlock could have happened here.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Problematic LORs tend to get fixed quickly, so check the <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-current>FreeBSD-CURRENT mailing list</a> before posting to it.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_what_does_called_with_the_following_non_sleepable_locks_held_mean>5.11. What does Called …​ with the following non-sleepable locks held mean?<a class=anchor href=#_what_does_called_with_the_following_non_sleepable_locks_held_mean></a></h3><div class=paragraph><p>This means that a function that may sleep was called while a mutex (or other unsleepable) lock was held.</p></div><div class=paragraph><p>The reason this is an error is because mutexes are not intended to be held for long periods of time; they are supposed to only be held to maintain short periods of synchronization. This programming contract allows device drivers to use mutexes to synchronize with the rest of the kernel during interrupts. Interrupts (under FreeBSD) may not sleep. Hence it is imperative that no subsystem in the kernel block for an extended period while holding a mutex.</p></div><div class=paragraph><p>To catch such errors, assertions may be added to the kernel that interact with the <a href="https://man.freebsd.org/cgi/man.cgi?query=witness&amp;sektion=4&amp;format=html">witness(4)</a> subsystem to emit a warning or fatal error (depending on the system configuration) when a potentially blocking call is made while holding a mutex.</p></div><div class=paragraph><p>In summary, such warnings are non-fatal, however with unfortunate timing they could cause undesirable effects ranging from a minor blip in the system’s responsiveness to a complete system lockup.</p></div><div class=paragraph><p>For additional information about locking in FreeBSD see <a href="https://man.freebsd.org/cgi/man.cgi?query=locking&amp;sektion=9&amp;format=html">locking(9)</a>.</p></div></div><div class=sect2><h3 id=_why_does_buildworldinstallworld_die_with_the_message_touch_not_found>5.12. Why does buildworld/installworld die with the message touch: not found?<a class=anchor href=#_why_does_buildworldinstallworld_die_with_the_message_touch_not_found></a></h3><div class=paragraph><p>This error does not mean that the <a href="https://man.freebsd.org/cgi/man.cgi?query=touch&amp;sektion=1&amp;format=html">touch(1)</a> utility is missing. The error is instead probably due to the dates of the files being set sometime in the future. If the CMOS clock is set to local time, run <code>adjkerntz -i</code> to adjust the kernel clock when booting into single-user mode.</p></div></div></div></div><div class=sect1><h2 id=_user_applications>6. User Applications<a class=anchor href=#_user_applications></a></h2><div class=sectionbody><div class=sect2><h3 id=_where_are_all_the_user_applications>6.1. Where are all the user applications?<a class=anchor href=#_where_are_all_the_user_applications></a></h3><div class=paragraph><p>Refer to <a href=https://www.FreeBSD.org/ports/>the ports page</a> for info on software packages ported to FreeBSD. The list currently tops 24,000 and is growing daily, so come back to check often or subscribe to the <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce>FreeBSD announcements mailing list</a> for periodic updates on new entries.</p></div><div class=paragraph><p>Most ports should work on all supported versions of FreeBSD. Those that do not are specifically marked as such. Each time a FreeBSD release is made, a snapshot of the ports tree at the time of release in also included in the <span class=filename>ports/</span> directory.</p></div><div class=paragraph><p>FreeBSD supports compressed binary packages to easily install and uninstall ports. Use <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=7&amp;format=html">pkg(7)</a> to control the installation of packages.</p></div></div><div class=sect2><h3 id=_how_do_i_download_the_ports_tree_should_i_be_using_subversion>6.2. How do I download the Ports tree? Should I be using Subversion?<a class=anchor href=#_how_do_i_download_the_ports_tree_should_i_be_using_subversion></a></h3><div class=paragraph><p>Any of the methods listed here work:</p></div><div class=ulist><ul><li><p>Use portsnap for most use cases. Refer to <a href=https://docs.freebsd.org/en/books/handbook/ports#ports-using>Using the Ports Collection</a> for instructions on how to use this tool.</p></li><li><p>Use Subversion if custom patches to the ports tree are needed. Refer to <a href=https://docs.freebsd.org/en/books/handbook/mirrors#svn>Using Subversion</a> for details.</p></li></ul></div></div><div class=sect2><h3 id=_does_freebsd_support_java>6.3. Does FreeBSD support Java?<a class=anchor href=#_does_freebsd_support_java></a></h3><div class=paragraph><p>Yes. Refer to <a href=https://www.FreeBSD.org/java/>https://www.FreeBSD.org/java/</a> for more information.</p></div></div><div class=sect2><h3 id=_why_can_i_not_build_this_port_on_my_11_x_or_12_x_stable_machine>6.4. Why can I not build this port on my 11.X -, or 12.X -STABLE machine?<a class=anchor href=#_why_can_i_not_build_this_port_on_my_11_x_or_12_x_stable_machine></a></h3><div class=paragraph><p>If the installed FreeBSD version lags significantly behind <em>-CURRENT</em> or <em>-STABLE</em>, update the Ports Collection using the instructions in <a href=https://docs.freebsd.org/en/books/handbook/ports#ports-using>Using the Ports Collection</a>. If the system is up-to-date, someone might have committed a change to the port which works for <em>-CURRENT</em> but which broke the port for <em>-STABLE</em>. <a href=https://bugs.FreeBSD.org/submit/>Submit</a> a bug report, since the Ports Collection is supposed to work for both the <em>-CURRENT</em> and <em>-STABLE</em> branches.</p></div></div><div class=sect2><h3 id=_i_just_tried_to_build_index_using_make_index_and_it_failed_why>6.5. I just tried to build INDEX using make index, and it failed. Why?<a class=anchor href=#_i_just_tried_to_build_index_using_make_index_and_it_failed_why></a></h3><div class=paragraph><p>First, make sure that the Ports Collection is up-to-date. Errors that affect building <span class=filename>INDEX</span> from an up-to-date copy of the Ports Collection are high-visibility and are thus almost always fixed immediately.</p></div><div class=paragraph><p>There are rare cases where <span class=filename>INDEX</span> will not build due to odd cases involving <code>OPTIONS_SET</code> being set in <span class=filename>make.conf</span>. If you suspect that this is the case, try to make <span class=filename>INDEX</span> with those variables turned off before reporting it to <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports>FreeBSD ports mailing list</a>.</p></div></div><div class=sect2><h3 id=_i_updated_the_sources_now_how_do_i_update_my_installed_ports>6.6. I updated the sources, now how do I update my installed ports?<a class=anchor href=#_i_updated_the_sources_now_how_do_i_update_my_installed_ports></a></h3><div class=paragraph><p>FreeBSD does not include a port upgrading tool, but it does have some tools to make the upgrade process somewhat easier. Additional tools are available to simplify port handling and are described the <a href=https://docs.freebsd.org/en/books/handbook/ports#ports-using>Upgrading Ports</a> section in the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_do_i_need_to_recompile_every_port_each_time_i_perform_a_major_version_update>6.7. Do I need to recompile every port each time I perform a major version update?<a class=anchor href=#_do_i_need_to_recompile_every_port_each_time_i_perform_a_major_version_update></a></h3><div class=paragraph><p>Yes! While a recent system will run with software compiled under an older release, things will randomly crash and fail to work once other ports are installed or updated.</p></div><div class=paragraph><p>When the system is upgraded, various shared libraries, loadable modules, and other parts of the system will be replaced with newer versions. Applications linked against the older versions may fail to start or, in other cases, fail to function properly.</p></div><div class=paragraph><p>For more information, see <a href=https://docs.freebsd.org/en/books/handbook/updating-upgrading#freebsdupdate-upgrade>the section on upgrades</a> in the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_do_i_need_to_recompile_every_port_each_time_i_perform_a_minor_version_update>6.8. Do I need to recompile every port each time I perform a minor version update?<a class=anchor href=#_do_i_need_to_recompile_every_port_each_time_i_perform_a_minor_version_update></a></h3><div class=paragraph><p>In general, no. FreeBSD developers do their utmost to guarantee binary compatibility across all releases with the same major version number. Any exceptions will be documented in the Release Notes, and advice given there should be followed.</p></div></div><div class=sect2><h3 id=_why_is_binsh_so_minimal_why_does_freebsd_not_use_bash_or_another_shell>6.9. Why is /bin/sh so minimal? Why does FreeBSD not use bash or another shell?<a class=anchor href=#_why_is_binsh_so_minimal_why_does_freebsd_not_use_bash_or_another_shell></a></h3><div class=paragraph><p>Many people need to write shell scripts which will be portable across many systems. That is why POSIX™ specifies the shell and utility commands in great detail. Most scripts are written in Bourne shell (<a href="https://man.freebsd.org/cgi/man.cgi?query=sh&amp;sektion=1&amp;format=html">sh(1)</a>), and because several important programming interfaces (<a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=system&amp;sektion=3&amp;format=html">system(3)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=popen&amp;sektion=3&amp;format=html">popen(3)</a>, and analogues in higher-level scripting languages like Perl and Tcl) are specified to use the Bourne shell to interpret commands. Because the Bourne shell is so often and widely used, it is important for it to be quick to start, be deterministic in its behavior, and have a small memory footprint.</p></div><div class=paragraph><p>The existing implementation is our best effort at meeting as many of these requirements simultaneously as we can. To keep <code>/bin/sh</code> small, we have not provided many of the convenience features that other shells have. That is why other more featureful shells like <code>bash</code>, <code>scsh</code>, <a href="https://man.freebsd.org/cgi/man.cgi?query=tcsh&amp;sektion=1&amp;format=html">tcsh(1)</a>, and <code>zsh</code> are available. Compare the memory utilization of these shells by looking at the "VSZ" and "RSS" columns in a <code>ps -u</code> listing.</p></div></div><div class=sect2><h3 id=_how_do_i_create_audio_cds_from_my_midi_files>6.10. How do I create audio CDs from my MIDI files?<a class=anchor href=#_how_do_i_create_audio_cds_from_my_midi_files></a></h3><div class=paragraph><p>To create audio CDs from MIDI files, first install <a class=package href=https://cgit.freebsd.org/ports/tree/audio/timidity/>audio/timidity</a> from ports then install manually the GUS patches set by Eric A. Welsh, available at <a href=http://alleg.sourceforge.net/digmid.html>http://alleg.sourceforge.net/digmid.html</a>. After TiMidity++ has been installed properly, MIDI files may be converted to WAV files with the following command line:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% timidity <span class=nt>-Ow</span> <span class=nt>-s</span> 44100 <span class=nt>-o</span> /tmp/juke/01.wav 01.mid</code></pre></div></div><div class=paragraph><p>The WAV files can then be converted to other formats or burned onto audio CDs, as described in the <a href=https://docs.freebsd.org/en/books/handbook/disks#creating-cds>FreeBSD Handbook</a>.</p></div></div></div></div><div class=sect1><h2 id=_kernel_configuration>7. Kernel Configuration<a class=anchor href=#_kernel_configuration></a></h2><div class=sectionbody><div class=sect2><h3 id=make-kernel>7.1. I would like to customize my kernel. Is it difficult?<a class=anchor href=#make-kernel></a></h3><div class=paragraph><p>Not at all! Check out the <a href=https://docs.freebsd.org/en/books/handbook/kernelconfig#kernelconfig>kernel config section of the Handbook</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The new <span class=filename>kernel</span> will be installed to the <span class=filename>/boot/kernel</span> directory along with its modules, while the old kernel and its modules will be moved to the <span class=filename>/boot/kernel.old</span> directory. If a mistake is made in the configuration, simply boot the previous version of the kernel.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_why_is_my_kernel_so_big>7.2. Why is my kernel so big?<a class=anchor href=#_why_is_my_kernel_so_big></a></h3><div class=paragraph><p><code>GENERIC</code> kernels shipped with FreeBSD are compiled in <em>debug mode</em>. Kernels built in debug mode contain debug data in separate files that are used for debugging. FreeBSD releases prior to 11.0 store these debug files in the same directory as the kernel itself, <span class=filename>/boot/kernel/</span>. In FreeBSD 11.0 and later the debug files are stored in <span class=filename>/usr/lib/debug/boot/kernel/</span>. Note that there will be little or no performance loss from running a debug kernel, and it is useful to keep one around in case of a system panic.</p></div><div class=paragraph><p>When running low on disk space, there are different options to reduce the size of <span class=filename>/boot/kernel/</span> and <span class=filename>/usr/lib/debug/</span>.</p></div><div class=paragraph><p>To not install the symbol files, make sure the following line exists in <span class=filename>/etc/src.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>WITHOUT_KERNEL_SYMBOLS=yes</pre></div></div><div class=paragraph><p>For more information see <a href="https://man.freebsd.org/cgi/man.cgi?query=src.conf&amp;sektion=5&amp;format=html">src.conf(5)</a>.</p></div><div class=paragraph><p>If you want to avoid building debug files altogether, make sure that both of the following are true:</p></div><div class=ulist><ul><li><p>This line does not exist in the kernel configuration file:</p><div class="literalblock programlisting"><div class=content><pre>makeoptions DEBUG=-g</pre></div></div></li><li><p>Do not run <a href="https://man.freebsd.org/cgi/man.cgi?query=config&amp;sektion=8&amp;format=html">config(8)</a> with <code>-g</code>.</p></li></ul></div><div class=paragraph><p>Either of the above settings will cause the kernel to be built in debug mode.</p></div><div class=paragraph><p>To build and install only the specified modules, list them in <span class=filename>/etc/make.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>MODULES_OVERRIDE= accf_http ipfw</pre></div></div><div class=paragraph><p>Replace <em>accf_httpd ipfw</em> with a list of needed modules. Only the listed modules will be built. This reduces the size of the kernel directory and decreases the amount of time needed to build the kernel. For more information, read <span class=filename>/usr/shared/examples/etc/make.conf</span>.</p></div><div class=paragraph><p>Unneeded devices can be removed from the kernel to further reduce the size. See <a href=#make-kernel>I would like to customize my kernel. Is it difficult?</a> for more information.</p></div><div class=paragraph><p>To put any of these options into effect, follow the instructions to <a href=https://docs.freebsd.org/en/books/handbook/kernelconfig/#kernelconfig-building>build and install</a> the new kernel.</p></div><div class=paragraph><p>For reference, the FreeBSD 11 amd64 kernel (<span class=filename>/boot/kernel/kernel</span>) is approximately 25 MB.</p></div></div><div class=sect2><h3 id=_why_does_every_kernel_i_try_to_build_fail_to_compile_even_generic>7.3. Why does every kernel I try to build fail to compile, even GENERIC?<a class=anchor href=#_why_does_every_kernel_i_try_to_build_fail_to_compile_even_generic></a></h3><div class=paragraph><p>There are a number of possible causes for this problem:</p></div><div class=ulist><ul><li><p>The source tree is different from the one used to build the currently running system. When attempting an upgrade, read <span class=filename>/usr/src/UPDATING</span>, paying particular attention to the "COMMON ITEMS" section at the end.</p></li><li><p>The <code>make buildkernel</code> did not complete successfully. The <code>make buildkernel</code> target relies on files generated by the <code>make buildworld</code> target to complete its job correctly.</p></li><li><p>Even when building <a href=#stable>FreeBSD-STABLE</a>, it is possible that the source tree was fetched at a time when it was either being modified or it was broken. Only releases are guaranteed to be buildable, although <a href=#stable>FreeBSD-STABLE</a> builds fine the majority of the time. Try re-fetching the source tree and see if the problem goes away. Try using a different mirror in case the previous one is having problems.</p></li></ul></div></div><div class=sect2><h3 id=_which_scheduler_is_in_use_on_a_running_system>7.4. Which scheduler is in use on a running system?<a class=anchor href=#_which_scheduler_is_in_use_on_a_running_system></a></h3><div class=paragraph><p>The name of the scheduler currently being used is directly available as the value of the <code>kern.sched.name</code> sysctl:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% sysctl kern.sched.name
kern.sched.name: ULE</code></pre></div></div></div><div class=sect2><h3 id=_what_is_kern_sched_quantum>7.5. What is kern.sched.quantum?<a class=anchor href=#_what_is_kern_sched_quantum></a></h3><div class=paragraph><p><code>kern.sched.quantum</code> is the maximum number of ticks a process can run without being preempted in the 4BSD scheduler.</p></div></div></div></div><div class=sect1><h2 id=_disks_file_systems_and_boot_loaders>8. Disks, File Systems, and Boot Loaders<a class=anchor href=#_disks_file_systems_and_boot_loaders></a></h2><div class=sectionbody><div class=sect2><h3 id=_how_can_i_add_my_new_hard_disk_to_my_freebsd_system>8.1. How can I add my new hard disk to my FreeBSD system?<a class=anchor href=#_how_can_i_add_my_new_hard_disk_to_my_freebsd_system></a></h3><div class=paragraph><p>See the <a href=https://docs.freebsd.org/en/books/handbook/disks#disks-adding>Adding Disks</a> section in the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_how_do_i_move_my_system_over_to_my_huge_new_disk>8.2. How do I move my system over to my huge new disk?<a class=anchor href=#_how_do_i_move_my_system_over_to_my_huge_new_disk></a></h3><div class=paragraph><p>The best way is to reinstall the operating system on the new disk, then move the user data over. This is highly recommended when tracking <em>-STABLE</em> for more than one release or when updating a release instead of installing a new one. Install booteasy on both disks with <a href="https://man.freebsd.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8&amp;format=html">boot0cfg(8)</a> and dual boot until you are happy with the new configuration. Skip the next paragraph to find out how to move the data after doing this.</p></div><div class=paragraph><p>Alternatively, partition and label the new disk with either <a href="https://man.freebsd.org/cgi/man.cgi?query=sade&amp;sektion=8&amp;format=html">sade(8)</a> or <a href="https://man.freebsd.org/cgi/man.cgi?query=gpart&amp;sektion=8&amp;format=html">gpart(8)</a>. If the disks are MBR-formatted, booteasy can be installed on both disks with <a href="https://man.freebsd.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8&amp;format=html">boot0cfg(8)</a> so that the computer can dual boot to the old or new system after the copying is done.</p></div><div class=paragraph><p>Once the new disk set up, the data cannot just be copied. Instead, use tools that understand device files and system flags, such as <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a>. Although it is recommended to move the data while in single-user mode, it is not required.</p></div><div class=paragraph><p>When the disks are formatted with UFS, never use anything but <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=restore&amp;sektion=8&amp;format=html">restore(8)</a> to move the root file system. These commands should also be used when moving a single partition to another empty partition. The sequence of steps to use <code>dump</code> to move the data from one UFS partitions to a new partition is:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p><code>newfs</code> the new partition.</p></li><li><p><code>mount</code> it on a temporary mount point.</p></li><li><p><code>cd</code> to that directory.</p></li><li><p><code>dump</code> the old partition, piping output to the new one.</p></li></ol></div></div></div><div class=paragraph><p>For example, to move <span class=filename>/dev/ada1s1a</span> with <span class=filename>/mnt</span> as the temporary mount point, type:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># newfs /dev/ada1s1a</span>
<span class=c># mount /dev/ada1s1a /mnt</span>
<span class=c># cd /mnt</span>
<span class=c># dump 0af - / | restore rf -</span></code></pre></div></div><div class=paragraph><p>Rearranging partitions with <code>dump</code> takes a bit more work. To merge a partition like <span class=filename>/var</span> into its parent, create the new partition large enough for both, move the parent partition as described above, then move the child partition into the empty directory that the first move created:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># newfs /dev/ada1s1a</span>
<span class=c># mount /dev/ada1s1a /mnt</span>
<span class=c># cd /mnt</span>
<span class=c># dump 0af - / | restore rf -</span>
<span class=c># cd var</span>
<span class=c># dump 0af - /var | restore rf -</span></code></pre></div></div><div class=paragraph><p>To split a directory from its parent, say putting <span class=filename>/var</span> on its own partition when it was not before, create both partitions, then mount the child partition on the appropriate directory in the temporary mount point, then move the old single partition:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># newfs /dev/ada1s1a</span>
<span class=c># newfs /dev/ada1s1d</span>
<span class=c># mount /dev/ada1s1a /mnt</span>
<span class=c># mkdir /mnt/var</span>
<span class=c># mount /dev/ada1s1d /mnt/var</span>
<span class=c># cd /mnt</span>
<span class=c># dump 0af - / | restore rf -</span></code></pre></div></div><div class=paragraph><p>The <a href="https://man.freebsd.org/cgi/man.cgi?query=cpio&amp;sektion=1&amp;format=html">cpio(1)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=pax&amp;sektion=1&amp;format=html">pax(1)</a> utilities are also available for moving user data. These are known to lose file flag information, so use them with caution.</p></div></div><div class=sect2><h3 id=_which_partitions_can_safely_use_soft_updates_i_have_heard_that_soft_updates_on_can_cause_problems_what_about_journaled_soft_updates>8.3. Which partitions can safely use Soft Updates? I have heard that Soft Updates on / can cause problems. What about Journaled Soft Updates?<a class=anchor href=#_which_partitions_can_safely_use_soft_updates_i_have_heard_that_soft_updates_on_can_cause_problems_what_about_journaled_soft_updates></a></h3><div class=paragraph><p>Short answer: Soft Updates can usually be safely used on all partitions.</p></div><div class=paragraph><p>Long answer: Soft Updates has two characteristics that may be undesirable on certain partitions. First, a Soft Updates partition has a small chance of losing data during a system crash. The partition will not be corrupted as the data will simply be lost. Second, Soft Updates can cause temporary space shortages.</p></div><div class=paragraph><p>When using Soft Updates, the kernel can take up to thirty seconds to write changes to the physical disk. When a large file is deleted the file still resides on disk until the kernel actually performs the deletion. This can cause a very simple race condition. Suppose one large file is deleted and another large file is immediately created. The first large file is not yet actually removed from the physical disk, so the disk might not have enough room for the second large file. This will produce an error that the partition does not have enough space, even though a large chunk of space has just been released. A few seconds later, the file creation works as expected.</p></div><div class=paragraph><p>If a system should crash after the kernel accepts a chunk of data for writing to disk, but before that data is actually written out, data could be lost. This risk is extremely small, but generally manageable.</p></div><div class=paragraph><p>These issues affect all partitions using Soft Updates. So, what does this mean for the root partition?</p></div><div class=paragraph><p>Vital information on the root partition changes very rarely. If the system crashed during the thirty-second window after such a change is made, it is possible that data could be lost. This risk is negligible for most applications, but be aware that it exists. If the system cannot tolerate this much risk, do not use Soft Updates on the root file system!</p></div><div class=paragraph><p><span class=filename>/</span> is traditionally one of the smallest partitions. If <span class=filename>/tmp</span> is on <span class=filename>/</span>, there may be intermittent space problems. Symlinking <span class=filename>/tmp</span> to <span class=filename>/var/tmp</span> will solve this problem.</p></div><div class=paragraph><p>Finally, <a href="https://man.freebsd.org/cgi/man.cgi?query=dump&amp;sektion=8&amp;format=html">dump(8)</a> does not work in live mode (-L) on a filesystem, with Journaled Soft Updates (SU+J).</p></div></div><div class=sect2><h3 id=_can_i_mount_other_foreign_file_systems_under_freebsd>8.4. Can I mount other foreign file systems under FreeBSD?<a class=anchor href=#_can_i_mount_other_foreign_file_systems_under_freebsd></a></h3><div class=paragraph><p>FreeBSD supports a variety of other file systems.</p></div><div class=dlist><dl><dt class=hdlist1>UFS</dt><dd><p>UFS CD-ROMs can be mounted directly on FreeBSD. Mounting disk partitions from Digital UNIX and other systems that support UFS may be more complex, depending on the details of the disk partitioning for the operating system in question.</p></dd><dt class=hdlist1>ext2/ext3</dt><dd><p>FreeBSD supports <code>ext2fs</code> and <code>ext3fs</code> partitions. See <a href="https://man.freebsd.org/cgi/man.cgi?query=ext2fs&amp;sektion=5&amp;format=html">ext2fs(5)</a> for more information.</p></dd><dt class=hdlist1>NTFS</dt><dd><p>FUSE based NTFS support is available as a port (<a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/fusefs-ntfs/>sysutils/fusefs-ntfs</a>). For more information see <a href=http://www.tuxera.com/community/ntfs-3g-manual/>ntfs-3g</a>.</p></dd><dt class=hdlist1>FAT</dt><dd><p>FreeBSD includes a read-write FAT driver. For more information, see <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8&amp;format=html">mount_msdosfs(8)</a>.</p></dd><dt class=hdlist1>ZFS</dt><dd><p>FreeBSD 包含由 Sun™ 移植過來的 ZFS 驅動程式。 目前的建議是僅在記憶體充足的 amd64 平臺上使用它。有關更詳細資訊, 請參閱 <a href="https://man.freebsd.org/cgi/man.cgi?query=zfs&amp;sektion=8&amp;format=html">zfs(8)</a>。</p></dd></dl></div><div class=paragraph><p>FreeBSD includes the Network File System NFS and the FreeBSD Ports Collection provides several FUSE applications to support many other file systems.</p></div></div><div class=sect2><h3 id=_how_do_i_mount_a_secondary_dos_partition>8.5. How do I mount a secondary DOS partition?<a class=anchor href=#_how_do_i_mount_a_secondary_dos_partition></a></h3><div class=paragraph><p>The secondary DOS partitions are found after <em>all</em> the primary partitions. For example, if <code>E</code> is the second DOS partition on the second SCSI drive, there will be a device file for "slice 5" in <span class=filename>/dev</span>. To mount it:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t msdosfs /dev/da1s5 /dos/e</span></code></pre></div></div></div><div class=sect2><h3 id=_is_there_a_cryptographic_file_system_for_freebsd>8.6. Is there a cryptographic file system for FreeBSD?<a class=anchor href=#_is_there_a_cryptographic_file_system_for_freebsd></a></h3><div class=paragraph><p>Yes, <a href="https://man.freebsd.org/cgi/man.cgi?query=gbde&amp;sektion=8&amp;format=html">gbde(8)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=geli&amp;sektion=8&amp;format=html">geli(8)</a>. See the <a href=https://docs.freebsd.org/en/books/handbook/disks#disks-encrypting>Encrypting Disk Partitions</a> section of the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_how_do_i_boot_freebsd_and_linux_using_grub>8.7. How do I boot FreeBSD and Linux using GRUB?<a class=anchor href=#_how_do_i_boot_freebsd_and_linux_using_grub></a></h3><div class=paragraph><p>To boot FreeBSD using GRUB, add the following to either <span class=filename>/boot/grub/menu.lst</span> or <span class=filename>/boot/grub/grub.conf</span>, depending upon which is used by the Linux™ distribution.</p></div><div class="literalblock programlisting"><div class=content><pre>title FreeBSD 9.1
	root (hd0,a)
	kernel /boot/loader</pre></div></div><div class=paragraph><p>Where <em>hd0,a</em> points to the root partition on the first disk. To specify the slice number, use something like this <em>(hd0,2,a)</em>. By default, if the slice number is omitted, GRUB searches the first slice which has the <code>a</code> partition.</p></div></div><div class=sect2><h3 id=_how_do_i_boot_freebsd_and_linux_using_booteasy>8.8. How do I boot FreeBSD and Linux using BootEasy?<a class=anchor href=#_how_do_i_boot_freebsd_and_linux_using_booteasy></a></h3><div class=paragraph><p>Install LILO at the start of the Linux™ boot partition instead of in the Master Boot Record. You can then boot LILO from BootEasy.</p></div><div class=paragraph><p>This is recommended when running Windows™ and Linux™ as it makes it simpler to get Linux™ booting again if Windows™ is reinstalled.</p></div></div><div class=sect2><h3 id=_how_do_i_change_the_boot_prompt_from_to_something_more_meaningful>8.9. How do I change the boot prompt from ??? to something more meaningful?<a class=anchor href=#_how_do_i_change_the_boot_prompt_from_to_something_more_meaningful></a></h3><div class=paragraph><p>This cannot be accomplished with the standard boot manager without rewriting it. There are a number of other boot managers in the <span class=filename>sysutils</span> category of the Ports Collection.</p></div></div><div class=sect2><h3 id=_how_do_i_use_a_new_removable_drive>8.10. How do I use a new removable drive?<a class=anchor href=#_how_do_i_use_a_new_removable_drive></a></h3><div class=paragraph><p>If the drive already has a file system on it, use a command like this:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -t msdosfs /dev/da0s1 /mnt</span></code></pre></div></div><div class=paragraph><p>If the drive will only be used with FreeBSD systems, partition it with UFS or ZFS. This will provide long filename support, improvement in performance, and stability. If the drive will be used by other operating systems, a more portable choice, such as msdosfs, is better.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># dd if=/dev/zero of=/dev/da0 count=2</span>
<span class=c># gpart create -s GPT /dev/da0</span>
<span class=c># gpart add -t freebsd-ufs /dev/da0</span></code></pre></div></div><div class=paragraph><p>Finally, create a new file system:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># newfs /dev/da0p1</span></code></pre></div></div><div class=paragraph><p>and mount it:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount /dev/da0s1 /mnt</span></code></pre></div></div><div class=paragraph><p>It is a good idea to add a line to <span class=filename>/etc/fstab</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=fstab&amp;sektion=5&amp;format=html">fstab(5)</a>) so you can just type <code>mount /mnt</code> in the future:</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/da0p1 /mnt ufs rw,noauto 0 0</pre></div></div></div><div class=sect2><h3 id=_why_do_i_get_incorrect_super_block_when_mounting_a_cd>8.11. Why do I get Incorrect super block when mounting a CD?<a class=anchor href=#_why_do_i_get_incorrect_super_block_when_mounting_a_cd></a></h3><div class=paragraph><p>The type of device to mount must be specified. This is described in the Handbook section on <a href=https://docs.freebsd.org/en/books/handbook/disks#mounting-cd>Using Data CDs</a>.</p></div></div><div class=sect2><h3 id=_why_do_i_get_device_not_configured_when_mounting_a_cd>8.12. Why do I get Device not configured when mounting a CD?<a class=anchor href=#_why_do_i_get_device_not_configured_when_mounting_a_cd></a></h3><div class=paragraph><p>This generally means that there is no CD in the drive, or the drive is not visible on the bus. Refer to the <a href=https://docs.freebsd.org/en/books/handbook/disks#mounting-cd>Using Data CDs</a> section of the Handbook for a detailed discussion of this issue.</p></div></div><div class=sect2><h3 id=_why_do_all_non_english_characters_in_filenames_show_up_as_on_my_cds_when_mounted_in_freebsd>8.13. Why do all non-English characters in filenames show up as ? on my CDs when mounted in FreeBSD?<a class=anchor href=#_why_do_all_non_english_characters_in_filenames_show_up_as_on_my_cds_when_mounted_in_freebsd></a></h3><div class=paragraph><p>The CD probably uses the "Joliet" extension for storing information about files and directories. This is discussed in the Handbook section on <a href=https://docs.freebsd.org/en/books/handbook/disks#mounting-cd>Using Data CD-ROMs</a>.</p></div></div><div class=sect2><h3 id=_a_cd_burned_under_freebsd_cannot_be_read_under_any_other_operating_system_why>8.14. A CD burned under FreeBSD cannot be read under any other operating system. Why?<a class=anchor href=#_a_cd_burned_under_freebsd_cannot_be_read_under_any_other_operating_system_why></a></h3><div class=paragraph><p>This means a raw file was burned to the CD, rather than creating an ISO 9660 file system. Take a look at the Handbook section on <a href=https://docs.freebsd.org/en/books/handbook/disks#mounting-cd>Using Data CDs</a>.</p></div></div><div class=sect2><h3 id=_how_can_i_create_an_image_of_a_data_cd>8.15. How can I create an image of a data CD?<a class=anchor href=#_how_can_i_create_an_image_of_a_data_cd></a></h3><div class=paragraph><p>This is discussed in the Handbook section on <a href=https://docs.freebsd.org/en/books/handbook/disks#mkisofs>Writing Data to an ISO File System</a>. For more on working with CD-ROMs, see the <a href=https://docs.freebsd.org/en/books/handbook/disks#creating-cds>Creating CDs Section</a> in the Storage chapter in the Handbook.</p></div></div><div class=sect2><h3 id=_why_can_i_not_mount_an_audio_cd>8.16. Why can I not mount an audio CD?<a class=anchor href=#_why_can_i_not_mount_an_audio_cd></a></h3><div class=paragraph><p>Trying to mount an audio CD will produce an error like <code>cd9660: /dev/cd0: Invalid argument</code>. This is because <code>mount</code> only works on file systems. Audio CDs do not have file systems; they just have data. Instead, use a program that reads audio CDs, such as the <a class=package href=https://cgit.freebsd.org/ports/tree/audio/xmcd/>audio/xmcd</a> package or port.</p></div></div><div class=sect2><h3 id=_how_do_i_mount_a_multi_session_cd>8.17. How do I mount a multi-session CD?<a class=anchor href=#_how_do_i_mount_a_multi_session_cd></a></h3><div class=paragraph><p>By default, <a href="https://man.freebsd.org/cgi/man.cgi?query=mount&amp;sektion=8&amp;format=html">mount(8)</a> will attempt to mount the last data track (session) of a CD. To load an earlier session, use the <code>-s</code> command line argument. Refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8&amp;format=html">mount_cd9660(8)</a> for specific examples.</p></div></div><div class=sect2><h3 id=_how_do_i_let_ordinary_users_mount_cd_roms_dvds_usb_drives_and_other_removable_media>8.18. How do I let ordinary users mount CD-ROMs, DVDs, USB drives, and other removable media?<a class=anchor href=#_how_do_i_let_ordinary_users_mount_cd_roms_dvds_usb_drives_and_other_removable_media></a></h3><div class=paragraph><p>As <code>root</code> set the sysctl variable <code>vfs.usermount</code> to <code>1</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl vfs.usermount=1</span></code></pre></div></div><div class=paragraph><p>To make this persist across reboots, add the line <code>vfs.usermount=1</code> to <span class=filename>/etc/sysctl.conf</span> so that it is reset at system boot time.</p></div><div class=paragraph><p>Users can only mount devices they have read permissions to. To allow users to mount a device permissions must be set in <span class=filename>/etc/devfs.conf</span>.</p></div><div class=paragraph><p>For example, to allow users to mount the first USB drive add:</p></div><div class="literalblock programlisting"><div class=content><pre># Allow all users to mount a USB drive.
	    own       /dev/da0       root:operator
	    perm      /dev/da0       0666</pre></div></div><div class=paragraph><p>All users can now mount devices they could read onto a directory that they own:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>mkdir</span> ~/my-mount-point
% mount <span class=nt>-t</span> msdosfs /dev/da0 ~/my-mount-point</code></pre></div></div><div class=paragraph><p>Unmounting the device is simple:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% umount ~/my-mount-point</code></pre></div></div><div class=paragraph><p>Enabling <code>vfs.usermount</code>, however, has negative security implications. A better way to access MS-DOS™ formatted media is to use the <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/mtools/>emulators/mtools</a> package in the Ports Collection.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The device name used in the previous examples must be changed according to the configuration.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_the_du_and_df_commands_show_different_amounts_of_disk_space_available_what_is_going_on>8.19. The du and df commands show different amounts of disk space available. What is going on?<a class=anchor href=#_the_du_and_df_commands_show_different_amounts_of_disk_space_available_what_is_going_on></a></h3><div class=paragraph><p>This is due to how these commands actually work. <code>du</code> goes through the directory tree, measures how large each file is, and presents the totals. <code>df</code> just asks the file system how much space it has left. They seem to be the same thing, but a file without a directory entry will affect <code>df</code> but not <code>du</code>.</p></div><div class=paragraph><p>When a program is using a file, and the file is deleted, the file is not really removed from the file system until the program stops using it. The file is immediately deleted from the directory listing, however. As an example, consider a file large enough to affect the output of <code>du</code> and <code>df</code>. A file being viewed with <code>more</code> can be deleted wihout causing an error. The entry is removed from the directory so no other program or user can access it. However, <code>du</code> shows that it is gone as it has walked the directory tree and the file is not listed. <code>df</code> shows that it is still there, as the file system knows that <code>more</code> is still using that space. Once the <code>more</code> session ends, <code>du</code> and <code>df</code> will agree.</p></div><div class=paragraph><p>This situation is common on web servers. Many people set up a FreeBSD web server and forget to rotate the log files. The access log fills up <span class=filename>/var</span>. The new administrator deletes the file, but the system still complains that the partition is full. Stopping and restarting the web server program would free the file, allowing the system to release the disk space. To prevent this from happening, set up <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a>.</p></div><div class=paragraph><p>Note that Soft Updates can delay the freeing of disk space and it can take up to 30 seconds for the change to be visible.</p></div></div><div class=sect2><h3 id=_how_can_i_add_more_swap_space>8.20. How can I add more swap space?<a class=anchor href=#_how_can_i_add_more_swap_space></a></h3><div class=paragraph><p>This section <a href=https://docs.freebsd.org/en/books/handbook/config-tuning#adding-swap-space>of the Handbook</a> describes how to do this.</p></div></div><div class=sect2><h3 id=_why_does_freebsd_see_my_disk_as_smaller_than_the_manufacturer_says_it_is>8.21. Why does FreeBSD see my disk as smaller than the manufacturer says it is?<a class=anchor href=#_why_does_freebsd_see_my_disk_as_smaller_than_the_manufacturer_says_it_is></a></h3><div class=paragraph><p>Disk manufacturers calculate gigabytes as a billion bytes each, whereas FreeBSD calculates them as 1,073,741,824 bytes each. This explains why, for example, FreeBSD’s boot messages will report a disk that supposedly has 80 GB as holding 76,319 MB.</p></div><div class=paragraph><p>Also note that FreeBSD will (by default) <a href=#disk-more-than-full>reserve</a> 8% of the disk space.</p></div></div><div class=sect2><h3 id=_how_is_it_possible_for_a_partition_to_be_more_than_100_full>8.22. How is it possible for a partition to be more than 100% full?<a class=anchor href=#_how_is_it_possible_for_a_partition_to_be_more_than_100_full></a></h3><div class=paragraph><p>A portion of each UFS partition (8%, by default) is reserved for use by the operating system and the <code>root</code> user. <a href="https://man.freebsd.org/cgi/man.cgi?query=df&amp;sektion=1&amp;format=html">df(1)</a> does not count that space when calculating the <code>Capacity</code> column, so it can exceed 100%. Notice that the <code>Blocks</code> column is always greater than the sum of the <code>Used</code> and <code>Avail</code> columns, usually by a factor of 8%.</p></div><div class=paragraph><p>For more details, look up <code>-m</code> in <a href="https://man.freebsd.org/cgi/man.cgi?query=tunefs&amp;sektion=8&amp;format=html">tunefs(8)</a>.</p></div></div></div></div><div class=sect1><h2 id=_zfs>9. ZFS<a class=anchor href=#_zfs></a></h2><div class=sectionbody><div class=sect2><h3 id=_使用_zfs_最少需要多少記憶體>9.1. 使用 ZFS 最少需要多少記憶體？<a class=anchor href=#_使用_zfs_最少需要多少記憶體></a></h3><div class=paragraph><p>至少需要 4GB 的記憶體才能跑得順，但不同的工作負載可能會造成相當大的差異。</p></div></div><div class=sect2><h3 id=_zil_是什麼而又何時會被使用>9.2. ZIL 是什麼而又何時會被使用？<a class=anchor href=#_zil_是什麼而又何時會被使用></a></h3><div class=paragraph><p>The ZIL (ZFS 動向日誌) 是一個紀錄日誌，用以實現系統當機時 POSIX 寫入保證的語義，多個正常 ZFS 寫入動作會被分成多個交易處理群組，並在交易處理群組被填滿時寫入磁碟 ("Transaction Group Commit")。然而像 <a href="https://man.freebsd.org/cgi/man.cgi?query=fsync&amp;sektion=2&amp;format=html">fsync(2)</a> 這樣的系統呼叫，會要求該系統呼叫在返回前，能承諾已將資料寫入磁碟，ZIL 就是用來紀錄確認為已執行寫入的資料，但其實尚未存在於磁碟上，即尚未完成交易處理，交易處理群組具有時間戳記，在系統當機後，找到 ZIL 最後一個有效的時間戳記，即將遺失的資料再舍併至磁碟上。</p></div></div><div class=sect2><h3 id=_我需要用固態硬碟_ssd_來存_zil_嗎>9.3. 我需要用固態硬碟 (SSD) 來存 ZIL 嗎？<a class=anchor href=#_我需要用固態硬碟_ssd_來存_zil_嗎></a></h3><div class=paragraph><p>ZFS 預設將 ZIL 儲存在包含所有資料的 zpool 中，如果應用程式的寫入負載很重，將 ZIL 儲存在同步速度非常快的獨立設備中，藉由循序寫入效能的提高可以改善整個系統的效能，對於其他類型的工作負載， 固態硬碟就不會有太大的助益。</p></div></div><div class=sect2><h3 id=_l2arc_是什麼>9.4. L2ARC 是什麼？<a class=anchor href=#_l2arc_是什麼></a></h3><div class=paragraph><p>The L2ARC (Second Level Adaptive Replacement Cache) 是存於快速儲存設備 SSD 上的讀取快取，此快取在重新開機後會消失，請注意記憶體是第一層的快取，只有在記憶體不足的情況下才需要 L2ARC。</p></div><div class=paragraph><p>L2ARC 需要 ARC 的空間來為其製作索引，因此，有一種反常的情況，如果有一種工作集 (working set) 可以完美地剛好放入 ARC，一旦系統使用 L2ARC，該工作集的運作將不再完美，因為 ARC 需要用一部分空間來保存 L2ARC 的索引，以至於必須將工作集的一部分存入比記憶體慢的 L2ARC。</p></div></div><div class=sect2><h3 id=_建議啟用去冗餘_deduplication_嗎>9.5. 建議啟用去冗餘 (deduplication) 嗎？<a class=anchor href=#_建議啟用去冗餘_deduplication_嗎></a></h3><div class=paragraph><p>一般而言，不建議這麼做。</p></div><div class=paragraph><p>去冗餘需要相當多的記憶體，而且會讓讀寫磁碟所需的時間變長，除非磁碟上儲存了非常多重複的資料，例如：虛擬機的映像檔或者是使用者的備份資料，否則開啟去冗餘可能弊大於利。另一個需要考量的狀況是：啟用去冗餘功能之後再將其關閉，無法將磁碟上去冗餘的狀態立即逆轉，必須等到下次修改了之前被去冗餘的資料，變更的區塊才會再被複製一份。</p></div><div class=paragraph><p>去冗餘也可能會導致某些非預期的情況，特別是刪除檔案時可能會慢很多。</p></div></div><div class=sect2><h3 id=_在我建立的_zfs_pool_中無法刪除和新增檔案應該怎麼修復>9.6. 在我建立的 ZFS pool 中無法刪除和新增檔案，應該怎麼修復？<a class=anchor href=#_在我建立的_zfs_pool_中無法刪除和新增檔案應該怎麼修復></a></h3><div class=paragraph><p>這很有可能是該 pool 的空間使用率已達 100% 滿了，因 ZFS 需要儲存空間以將紀錄交易處理的輔助資料 (metadata) 寫入，為了讓該 pool 回復至可用狀態，必須用檔案切除的方法 (truncate 命令) 刪除不重要的檔案：</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>truncate</span> <span class=nt>-s</span> 0 unimportant-file</code></pre></div></div><div class=paragraph><p>因為檔案切除不需要建立交易處理紀錄，並能釋放出可使用的磁碟區塊。</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>如果系統曾進行過額外的 ZFS dataset 調校，例如：去冗餘，釋放出來的空間也許不會立即可得。</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_zfs_支援固態硬碟_ssd_的_trim_功能嗎>9.7. ZFS 支援固態硬碟 (SSD) 的 TRIM 功能嗎？<a class=anchor href=#_zfs_支援固態硬碟_ssd_的_trim_功能嗎></a></h3><div class=paragraph><p>自 FreeBSD 10-CURRENT 修定 r<a href=https://svnweb.freebsd.org/changeset/base/240868>r240868</a> 開始，就支援 ZFS TRIM。ZFS TRIM 的支援分別已在 r<a href=https://svnweb.freebsd.org/changeset/base/252162>r252162</a> 和 r<a href=https://svnweb.freebsd.org/changeset/base/251419>r251419</a> 的修訂，加進所有 FreeBSD-STABLE 分支。</p></div><div class=paragraph><p>ZFS TRIM 預設就已開啟，也可以將其關閉，只要加入一行設定到 <span class=filename>/etc/sysctl.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>vfs.zfs.trim.enabled=0</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>ZFS TRIM 也可能某些設定中會無效，例如：在採用 GELI 裝置上的 ZFS 檔案系統。</p></div></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=_system_administration>10. System Administration<a class=anchor href=#_system_administration></a></h2><div class=sectionbody><div class=sect2><h3 id=_where_are_the_system_start_up_configuration_files>10.1. Where are the system start-up configuration files?<a class=anchor href=#_where_are_the_system_start_up_configuration_files></a></h3><div class=paragraph><p>The primary configuration file is <span class=filename>/etc/defaults/rc.conf</span> which is described in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a>. System startup scripts such as <span class=filename>/etc/rc</span> and <span class=filename>/etc/rc.d</span>, which are described in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>, include this file. <em>Do not edit this file!</em> Instead, to edit an entry in <span class=filename>/etc/defaults/rc.conf</span>, copy the line into <span class=filename>/etc/rc.conf</span> and change it there.</p></div><div class=paragraph><p>For example, if to start <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a>, the included DNS server:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># echo &#39;named_enable=&#34;YES&#34;&#39; &gt;&gt; /etc/rc.conf</span></code></pre></div></div><div class=paragraph><p>To start up local services, place shell scripts in the <span class=filename>/usr/local/etc/rc.d</span> directory. These shell scripts should be set executable, the default file mode is <code>555</code>.</p></div></div><div class=sect2><h3 id=_how_do_i_add_a_user_easily>10.2. How do I add a user easily?<a class=anchor href=#_how_do_i_add_a_user_easily></a></h3><div class=paragraph><p>Use the <a href="https://man.freebsd.org/cgi/man.cgi?query=adduser&amp;sektion=8&amp;format=html">adduser(8)</a> command, or the <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a> command for more complicated situations.</p></div><div class=paragraph><p>To remove the user, use the <a href="https://man.freebsd.org/cgi/man.cgi?query=rmuser&amp;sektion=8&amp;format=html">rmuser(8)</a> command or, if necessary, <a href="https://man.freebsd.org/cgi/man.cgi?query=pw&amp;sektion=8&amp;format=html">pw(8)</a>.</p></div></div><div class=sect2><h3 id=_why_do_i_keep_getting_messages_like_root_not_found_after_editing_etccrontab>10.3. Why do I keep getting messages like root: not found after editing /etc/crontab?<a class=anchor href=#_why_do_i_keep_getting_messages_like_root_not_found_after_editing_etccrontab></a></h3><div class=paragraph><p>This is normally caused by editing the system crontab. This is not the correct way to do things as the system crontab has a different format to the per-user crontabs. The system crontab has an extra field, specifying which user to run the command as. <a href="https://man.freebsd.org/cgi/man.cgi?query=cron&amp;sektion=8&amp;format=html">cron(8)</a> assumes this user is the first word of the command to execute. Since no such command exists, this error message is displayed.</p></div><div class=paragraph><p>To delete the extra, incorrect crontab:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># crontab -r</span></code></pre></div></div></div><div class=sect2><h3 id=_why_do_i_get_the_error_you_are_not_in_the_correct_group_to_su_root_when_i_try_to_su_to_root>10.4. Why do I get the error, you are not in the correct group to su root when I try to su to root?<a class=anchor href=#_why_do_i_get_the_error_you_are_not_in_the_correct_group_to_su_root_when_i_try_to_su_to_root></a></h3><div class=paragraph><p>This is a security feature. In order to <code>su</code> to <code>root</code>, or any other account with superuser privileges, the user account must be a member of the <code>wheel</code> group. If this feature were not there, anybody with an account on a system who also found out <code>root</code>'s password would be able to gain superuser level access to the system.</p></div><div class=paragraph><p>To allow someone to <code>su</code> to <code>root</code>, put them in the <code>wheel</code> group using <code>pw</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pw groupmod wheel -m lisa</span></code></pre></div></div><div class=paragraph><p>The above example will add user <code>lisa</code> to the group <code>wheel</code>.</p></div></div><div class=sect2><h3 id=_i_made_a_mistake_in_rc_conf_or_another_startup_file_and_now_i_cannot_edit_it_because_the_file_system_is_read_only_what_should_i_do>10.5. I made a mistake in rc.conf, or another startup file, and now I cannot edit it because the file system is read-only. What should I do?<a class=anchor href=#_i_made_a_mistake_in_rc_conf_or_another_startup_file_and_now_i_cannot_edit_it_because_the_file_system_is_read_only_what_should_i_do></a></h3><div class=paragraph><p>Restart the system using <code>boot -s</code> at the loader prompt to enter single-user mode. When prompted for a shell pathname, press <kbd>Enter</kbd> and run <code>mount -urw /</code> to re-mount the root file system in read/write mode. You may also need to run <code>mount -a -t ufs</code> to mount the file system where your favorite editor is defined. If that editor is on a network file system, either configure the network manually before mounting the network file systems, or use an editor which resides on a local file system, such as <a href="https://man.freebsd.org/cgi/man.cgi?query=ed&amp;sektion=1&amp;format=html">ed(1)</a>.</p></div><div class=paragraph><p>In order to use a full screen editor such as <a href="https://man.freebsd.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;format=html">vi(1)</a> or <a href="https://man.freebsd.org/cgi/man.cgi?query=emacs&amp;sektion=1&amp;format=html">emacs(1)</a>, run <code>export TERM=xterm</code> so that these editors can load the correct data from the <a href="https://man.freebsd.org/cgi/man.cgi?query=termcap&amp;sektion=5&amp;format=html">termcap(5)</a> database.</p></div><div class=paragraph><p>After performing these steps, edit <span class=filename>/etc/rc.conf</span> to fix the syntax error. The error message displayed immediately after the kernel boot messages should indicate the number of the line in the file which is at fault.</p></div></div><div class=sect2><h3 id=_why_am_i_having_trouble_setting_up_my_printer>10.6. Why am I having trouble setting up my printer?<a class=anchor href=#_why_am_i_having_trouble_setting_up_my_printer></a></h3><div class=paragraph><p>See the <a href=https://docs.freebsd.org/en/books/handbook/printing#printing>Handbook entry on printing</a> for troubleshooting tips.</p></div></div><div class=sect2><h3 id=_how_can_i_correct_the_keyboard_mappings_for_my_system>10.7. How can I correct the keyboard mappings for my system?<a class=anchor href=#_how_can_i_correct_the_keyboard_mappings_for_my_system></a></h3><div class=paragraph><p>Refer to the Handbook section on <a href=https://docs.freebsd.org/en/books/handbook/l10n#using-localization>using localization</a>, specifically the section on <a href=https://docs.freebsd.org/en/books/handbook/l10n#setting-console>console setup</a>.</p></div></div><div class=sect2><h3 id=_why_can_i_not_get_user_quotas_to_work_properly>10.8. Why can I not get user quotas to work properly?<a class=anchor href=#_why_can_i_not_get_user_quotas_to_work_properly></a></h3><div class="olist arabic"><ol class=arabic><li><p>It is possible that the kernel is not configured to use quotas. In this case, add the following line to the kernel configuration file and recompile the kernel:</p><div class="literalblock programlisting"><div class=content><pre>options QUOTA</pre></div></div><div class=paragraph><p>Refer to the<a href=https://docs.freebsd.org/en/books/handbook/disks#quotas>Handbook entry on quotas</a> for full details.</p></div></li><li><p>Do not turn on quotas on <span class=filename>/</span>.</p></li><li><p>Put the quota file on the file system that the quotas are to be enforced on:</p><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">File System</th><th class="tableblock halign-left valign-top">Quota file</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/admin/quotas</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/home</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/home/admin/quotas</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>…​</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>…​</p></td></tr></tbody></table></li></ol></div></div><div class=sect2><h3 id=_does_freebsd_support_system_v_ipc_primitives>10.9. Does FreeBSD support System V IPC primitives?<a class=anchor href=#_does_freebsd_support_system_v_ipc_primitives></a></h3><div class=paragraph><p>Yes, FreeBSD supports System V-style IPC, including shared memory, messages and semaphores, in the <span class=filename>GENERIC</span> kernel. With a custom kernel, support may be loaded with the <span class=filename>sysvshm.ko</span>, <span class=filename>sysvsem.ko</span> and <span class=filename>sysvmsg.ko</span> kernel modules, or enabled in the custom kernel by adding the following lines to the kernel configuration file:</p></div><div class="literalblock programlisting"><div class=content><pre>options    SYSVSHM          # enable shared memory
options    SYSVSEM          # enable for semaphores
options    SYSVMSG          # enable for messaging</pre></div></div><div class=paragraph><p>Recompile and install the kernel.</p></div></div><div class=sect2><h3 id=_what_other_mail_server_software_can_i_use_instead_of_sendmail>10.10. What other mail-server software can I use instead of Sendmail?<a class=anchor href=#_what_other_mail_server_software_can_i_use_instead_of_sendmail></a></h3><div class=paragraph><p>The <a href=http://www.sendmail.org/>Sendmail</a> server is the default mail-server software for FreeBSD, but it can be replaced with another MTA installed from the Ports Collection. Available ports include <a class=package href=https://cgit.freebsd.org/ports/tree/mail/exim/>mail/exim</a>, <a class=package href=https://cgit.freebsd.org/ports/tree/mail/postfix/>mail/postfix</a>, and <a class=package href=https://cgit.freebsd.org/ports/tree/mail/qmail/>mail/qmail</a>. Search the mailing lists for discussions regarding the advantages and disadvantages of the available MTAs.</p></div></div><div class=sect2><h3 id=_i_have_forgotten_the_root_password_what_do_i_do>10.11. I have forgotten the root password! What do I do?<a class=anchor href=#_i_have_forgotten_the_root_password_what_do_i_do></a></h3><div class=paragraph><p>Do not panic! Restart the system, type <code>boot -s</code> at the <code>Boot:</code> prompt to enter single-user mode. At the question about the shell to use, hit <kbd>Enter</kbd> which will display a <code>#</code> prompt. Enter <code>mount -urw /</code> to remount the root file system read/write, then run <code>mount -a</code> to remount all the file systems. Run <code>passwd root</code> to change the <code>root</code> password then run <a href="https://man.freebsd.org/cgi/man.cgi?query=exit&amp;sektion=1&amp;format=html">exit(1)</a> to continue booting.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If you are still prompted to give the <code>root</code> password when entering the single-user mode, it means that the console has been marked as <code>insecure</code> in <span class=filename>/etc/ttys</span>. In this case, it will be required to boot from a FreeBSD installation disk, choose the <span class=guimenuitem>Live CD</span> or <span class=guimenuitem>Shell</span> at the beginning of the install process and issue the commands mentioned above. Mount the specific partition in this case and then chroot to it. For example, replace <code>mount -urw /</code> with <code>mount /dev/ada0p1 /mnt; chroot /mnt</code> for a system on <em>ada0p1</em>.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If the root partition cannot be mounted from single-user mode, it is possible that the partitions are encrypted and it is impossible to mount them without the access keys. For more information see the section about encrypted disks in the FreeBSD <a href=https://docs.freebsd.org/en/books/handbook/disks#disks-encrypting>Handbook</a>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_how_do_i_keep_controlaltdelete_from_rebooting_the_system>10.12. How do I keep ControlAltDelete from rebooting the system?<a class=anchor href=#_how_do_i_keep_controlaltdelete_from_rebooting_the_system></a></h3><div class=paragraph><p>When using <a href="https://man.freebsd.org/cgi/man.cgi?query=syscons&amp;sektion=4&amp;format=html">syscons(4)</a>, the default console driver, build and install a new kernel with this line in the configuration file:</p></div><div class="literalblock programlisting"><div class=content><pre>options SC_DISABLE_REBOOT</pre></div></div><div class=paragraph><p>This can also be done by setting the following <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> which does not require a reboot or kernel recompile:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl hw.syscons.kbd_reboot=0</span></code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The above two methods are exclusive: The <a href="https://man.freebsd.org/cgi/man.cgi?query=sysctl&amp;sektion=8&amp;format=html">sysctl(8)</a> does not exist if the kernel is compiled with <code>SC_DISABLE_REBOOT</code>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_how_do_i_reformat_dos_text_files_to_unix_ones>10.13. How do I reformat DOS text files to UNIX ones?<a class=anchor href=#_how_do_i_reformat_dos_text_files_to_unix_ones></a></h3><div class=paragraph><p>Use this <a href="https://man.freebsd.org/cgi/man.cgi?query=perl&amp;sektion=1&amp;format=html">perl(1)</a> command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% perl <span class=nt>-i</span>.bak <span class=nt>-npe</span> <span class=s1>&#39;s/\r\n/\n/g&#39;</span> file<span class=o>(</span>s<span class=o>)</span></code></pre></div></div><div class=paragraph><p>where <em>file(s)</em> is one or more files to process. The modification is done in-place, with the original file stored with a <span class=filename>.bak</span> extension.</p></div><div class=paragraph><p>Alternatively, use <a href="https://man.freebsd.org/cgi/man.cgi?query=tr&amp;sektion=1&amp;format=html">tr(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>tr</span> <span class=nt>-d</span> <span class=s1>&#39;\r&#39;</span> &lt; dos-text-file <span class=o>&gt;</span> unix-file</code></pre></div></div><div class=paragraph><p><em>dos-text-file</em> is the file containing DOS text while <em>unix-file</em> will contain the converted output. This can be quite a bit faster than using <code>perl</code>.</p></div><div class=paragraph><p>Yet another way to reformat DOS text files is to use the <a class=package href=https://cgit.freebsd.org/ports/tree/converters/dosunix/>converters/dosunix</a> port from the Ports Collection. Consult its documentation about the details.</p></div></div><div class=sect2><h3 id=_how_do_i_re_read_etcrc_conf_and_re_start_etcrc_without_a_reboot>10.14. How do I re-read /etc/rc.conf and re-start /etc/rc without a reboot?<a class=anchor href=#_how_do_i_re_read_etcrc_conf_and_re_start_etcrc_without_a_reboot></a></h3><div class=paragraph><p>Go into single-user mode and then back to multi-user mode:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># shutdown now</span>
<span class=c># return</span>
<span class=c># exit</span></code></pre></div></div></div><div class=sect2><h3 id=_i_tried_to_update_my_system_to_the_latest_stable_but_got_betax_rc_or_prerelease_what_is_going_on>10.15. I tried to update my system to the latest -STABLE, but got -BETAx, -RC or -PRERELEASE! What is going on?<a class=anchor href=#_i_tried_to_update_my_system_to_the_latest_stable_but_got_betax_rc_or_prerelease_what_is_going_on></a></h3><div class=paragraph><p>Short answer: it is just a name. <em>RC</em> stands for "Release Candidate". It signifies that a release is imminent. In FreeBSD, <em>-PRERELEASE</em> is typically synonymous with the code freeze before a release. (For some releases, the <em>-BETA</em> label was used in the same way as <em>-PRERELEASE</em>.)</p></div><div class=paragraph><p>Long answer: FreeBSD derives its releases from one of two places. Major, dot-zero, releases, such as 9.0-RELEASE are branched from the head of the development stream, commonly referred to as <a href=#current>-CURRENT</a>. Minor releases, such as 6.3-RELEASE or 5.2-RELEASE, have been snapshots of the active <a href=#stable>-STABLE</a> branch. Starting with 4.3-RELEASE, each release also now has its own branch which can be tracked by people requiring an extremely conservative rate of development (typically only security advisories).</p></div><div class=paragraph><p>When a release is about to be made, the branch from which it will be derived from has to undergo a certain process. Part of this process is a code freeze. When a code freeze is initiated, the name of the branch is changed to reflect that it is about to become a release. For example, if the branch used to be called 6.2-STABLE, its name will be changed to 6.3-PRERELEASE to signify the code freeze and signify that extra pre-release testing should be happening. Bug fixes can still be committed to be part of the release. When the source code is in shape for the release the name will be changed to 6.3-RC to signify that a release is about to be made from it. Once in the RC stage, only the most critical bugs found can be fixed. Once the release (6.3-RELEASE in this example) and release branch have been made, the branch will be renamed to 6.3-STABLE.</p></div><div class=paragraph><p>For more information on version numbers and the various Subversion branches, refer to the <a href=https://docs.freebsd.org/en/articles/releng/>Release Engineering</a> article.</p></div></div><div class=sect2><h3 id=_i_tried_to_install_a_new_kernel_and_the_chflags1_failed_how_do_i_get_around_this>10.16. I tried to install a new kernel, and the chflags1 failed. How do I get around this?<a class=anchor href=#_i_tried_to_install_a_new_kernel_and_the_chflags1_failed_how_do_i_get_around_this></a></h3><div class=paragraph><p>Short answer: the security level is greater than 0. Reboot directly to single-user mode to install the kernel.</p></div><div class=paragraph><p>Long answer: FreeBSD disallows changing system flags at security levels greater than 0. To check the current security level:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.securelevel</span></code></pre></div></div><div class=paragraph><p>The security level cannot be lowered in multi-user mode, so boot to single-user mode to install the kernel, or change the security level in <span class=filename>/etc/rc.conf</span> then reboot. See the <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> manual page for details on <code>securelevel</code>, and see <span class=filename>/etc/defaults/rc.conf</span> and the <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> manual page for more information on <span class=filename>rc.conf</span>.</p></div></div><div class=sect2><h3 id=_i_cannot_change_the_time_on_my_system_by_more_than_one_second_how_do_i_get_around_this>10.17. I cannot change the time on my system by more than one second! How do I get around this?<a class=anchor href=#_i_cannot_change_the_time_on_my_system_by_more_than_one_second_how_do_i_get_around_this></a></h3><div class=paragraph><p>Short answer: the system is at a security level greater than 1. Reboot directly to single-user mode to change the date.</p></div><div class=paragraph><p>Long answer: FreeBSD disallows changing the time by more that one second at security levels greater than 1. To check the security level:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl kern.securelevel</span></code></pre></div></div><div class=paragraph><p>The security level cannot be lowered in multi-user mode. Either boot to single-user mode to change the date or change the security level in <span class=filename>/etc/rc.conf</span> and reboot. See the <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> manual page for details on <code>securelevel</code>, and see <span class=filename>/etc/defaults/rc.conf</span> and the <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;format=html">rc.conf(5)</a> manual page for more information on <span class=filename>rc.conf</span>.</p></div></div><div class=sect2><h3 id=_why_is_rpc_statd_using_256mb_of_memory>10.18. Why is rpc.statd using 256 MB of memory?<a class=anchor href=#_why_is_rpc_statd_using_256mb_of_memory></a></h3><div class=paragraph><p>No, there is no memory leak, and it is not using 256 MB of memory. For convenience, <code>rpc.statd</code> maps an obscene amount of memory into its address space. There is nothing terribly wrong with this from a technical standpoint; it just throws off things like <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=ps&amp;sektion=1&amp;format=html">ps(1)</a>.</p></div><div class=paragraph><p><a href="https://man.freebsd.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8&amp;format=html">rpc.statd(8)</a> maps its status file (resident on <span class=filename>/var</span>) into its address space; to save worrying about remapping the status file later when it needs to grow, it maps the status file with a generous size. This is very evident from the source code, where one can see that the length argument to <a href="https://man.freebsd.org/cgi/man.cgi?query=mmap&amp;sektion=2&amp;format=html">mmap(2)</a> is <code>0x10000000</code>, or one sixteenth of the address space on an IA32, or exactly 256 MB.</p></div></div><div class=sect2><h3 id=_why_can_i_not_unset_the_schg_file_flag>10.19. Why can I not unset the schg file flag?<a class=anchor href=#_why_can_i_not_unset_the_schg_file_flag></a></h3><div class=paragraph><p>The system is running at securelevel greater than 0. Lower the securelevel and try again. For more information, see <a href=#securelevel>the FAQ entry on securelevel</a> and the <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> manual page.</p></div></div><div class=sect2><h3 id=_what_is_vnlru>10.20. What is vnlru?<a class=anchor href=#_what_is_vnlru></a></h3><div class=paragraph><p><code>vnlru</code> flushes and frees vnodes when the system hits the <code>kern.maxvnodes</code> limit. This kernel thread sits mostly idle, and only activates when there is a huge amount of RAM and users are accessing tens of thousands of tiny files.</p></div></div><div class=sect2><h3 id=_what_do_the_various_memory_states_displayed_by_top_mean>10.21. What do the various memory states displayed by top mean?<a class=anchor href=#_what_do_the_various_memory_states_displayed_by_top_mean></a></h3><div class=ulist><ul><li><p><code>Active</code>: pages recently statistically used.</p></li><li><p><code>Inactive</code>: pages recently statistically unused.</p></li><li><p><code>Cache</code>: (most often) pages that have percolated from inactive to a status where they maintain their data, but can often be immediately reused (either with their old association, or reused with a new association). There can be certain immediate transitions from <code>active</code> to <code>cache</code> state if the page is known to be clean (unmodified), but that transition is a matter of policy, depending upon the algorithm choice of the VM system maintainer.</p></li><li><p><code>Free</code>: pages without data content, and can be immediately used in certain circumstances where cache pages might be ineligible. Free pages can be reused at interrupt or process state.</p></li><li><p><code>Wired</code>: pages that are fixed into memory, usually for kernel purposes, but also sometimes for special use in processes.</p></li></ul></div><div class=paragraph><p>Pages are most often written to disk (sort of a VM sync) when they are in the inactive state, but active pages can also be synced. This depends upon the CPU tracking of the modified bit being available, and in certain situations there can be an advantage for a block of VM pages to be synced, whether they are active or inactive. In most common cases, it is best to think of the inactive queue to be a queue of relatively unused pages that might or might not be in the process of being written to disk. Cached pages are already synced, not mapped, but available for immediate process use with their old association or with a new association. Free pages are available at interrupt level, but cached or free pages can be used at process state for reuse. Cache pages are not adequately locked to be available at interrupt level.</p></div><div class=paragraph><p>There are some other flags (e.g., busy flag or busy count) that might modify some of the described rules.</p></div></div><div class=sect2><h3 id=_how_much_free_memory_is_available>10.22. How much free memory is available?<a class=anchor href=#_how_much_free_memory_is_available></a></h3><div class=paragraph><p>There are a couple of kinds of "free memory". One kind is the amount of memory immediately available without paging anything else out. That is approximately the size of cache queue + size of free queue (with a derating factor, depending upon system tuning). Another kind of "free memory" is the total amount of VM space. That can be complex, but is dependent upon the amount of swap space and memory. Other kinds of "free memory" descriptions are also possible, but it is relatively useless to define these, but rather it is important to make sure that the paging rate is kept low, and to avoid running out of swap space.</p></div></div><div class=sect2><h3 id=_what_is_varempty>10.23. What is /var/empty?<a class=anchor href=#_what_is_varempty></a></h3><div class=paragraph><p><span class=filename>/var/empty</span> is a directory that the <a href="https://man.freebsd.org/cgi/man.cgi?query=sshd&amp;sektion=8&amp;format=html">sshd(8)</a> program uses when performing privilege separation. The <span class=filename>/var/empty</span> directory is empty, owned by <code>root</code> and has the <code>schg</code> flag set. This directory should not be deleted.</p></div></div><div class=sect2><h3 id=_i_just_changed_etcnewsyslog_conf_how_can_i_check_if_it_does_what_i_expect>10.24. I just changed /etc/newsyslog.conf. How can I check if it does what I expect?<a class=anchor href=#_i_just_changed_etcnewsyslog_conf_how_can_i_check_if_it_does_what_i_expect></a></h3><div class=paragraph><p>To see what <a href="https://man.freebsd.org/cgi/man.cgi?query=newsyslog&amp;sektion=8&amp;format=html">newsyslog(8)</a> will do, use the following:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% newsyslog <span class=nt>-nrvv</span></code></pre></div></div></div><div class=sect2><h3 id=_my_time_is_wrong_how_can_i_change_the_timezone>10.25. My time is wrong, how can I change the timezone?<a class=anchor href=#_my_time_is_wrong_how_can_i_change_the_timezone></a></h3><div class=paragraph><p>Use <a href="https://man.freebsd.org/cgi/man.cgi?query=tzsetup&amp;sektion=8&amp;format=html">tzsetup(8)</a>.</p></div></div></div></div><div class=sect1><h2 id=_the_x_window_system_and_virtual_consoles>11. The X Window System and Virtual Consoles<a class=anchor href=#_the_x_window_system_and_virtual_consoles></a></h2><div class=sectionbody><div class=sect2><h3 id=_what_is_the_x_window_system>11.1. What is the X Window System?<a class=anchor href=#_what_is_the_x_window_system></a></h3><div class=paragraph><p>The X Window System (commonly <code>X11</code>) is the most widely available windowing system capable of running on UNIX™ or UNIX™ like systems, including FreeBSD. <a href=http://www.x.org/wiki/>The X.Org Foundation</a> administers the <a href=http://en.wikipedia.org/wiki/X_Window_System_core_protocol>X protocol standards</a>, with the current reference implementation, version 11 release 7.7, so references are often shortened to <code>X11</code>.</p></div><div class=paragraph><p>Many implementations are available for different architectures and operating systems. An implementation of the server-side code is properly known as an <code>X server</code>.</p></div></div><div class=sect2><h3 id=_i_want_to_run_xorg_how_do_i_go_about_it>11.2. I want to run Xorg, how do I go about it?<a class=anchor href=#_i_want_to_run_xorg_how_do_i_go_about_it></a></h3><div class=paragraph><p>To install Xorg do one of the following:</p></div><div class=paragraph><p>Use the <a class=package href=https://cgit.freebsd.org/ports/tree/x11/xorg/>x11/xorg</a> meta-port, which builds and installs every Xorg component.</p></div><div class=paragraph><p>Use <a class=package href=https://cgit.freebsd.org/ports/tree/x11/xorg-minimal/>x11/xorg-minimal</a>, which builds and installs only the necessary Xorg components.</p></div><div class=paragraph><p>Install Xorg from FreeBSD packages:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell> <span class=c># pkg install xorg</span></code></pre></div></div><div class=paragraph><p>After the installation of Xorg, follow the instructions from the <a href=https://docs.freebsd.org/en/books/handbook/x11#x-config>X11 Configuration</a> section of the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_i_tried_to_run_x_but_i_get_a_no_devices_detected_error_when_i_type_startx_what_do_i_do_now>11.3. I tried to run X, but I get a No devices detected. error when I type startx. What do I do now?<a class=anchor href=#_i_tried_to_run_x_but_i_get_a_no_devices_detected_error_when_i_type_startx_what_do_i_do_now></a></h3><div class=paragraph><p>The system is probably running at a raised <code>securelevel</code>. It is not possible to start X at a raised <code>securelevel</code> because X requires write access to <a href="https://man.freebsd.org/cgi/man.cgi?query=io&amp;sektion=4&amp;format=html">io(4)</a>. For more information, see at the <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a> manual page.</p></div><div class=paragraph><p>There are two solutions to the problem: set the <code>securelevel</code> back down to zero or run <a href="https://man.freebsd.org/cgi/man.cgi?query=xdm&amp;sektion=1&amp;format=html">xdm(1)</a> (or an alternative display manager) at boot time before the <code>securelevel</code> is raised.</p></div><div class=paragraph><p>See <a href=#xdm-boot>How do I start XDM on boot?</a> for more information about running <a href="https://man.freebsd.org/cgi/man.cgi?query=xdm&amp;sektion=1&amp;format=html">xdm(1)</a> at boot time.</p></div></div><div class=sect2><h3 id=_why_does_my_mouse_not_work_with_x>11.4. Why does my mouse not work with X?<a class=anchor href=#_why_does_my_mouse_not_work_with_x></a></h3><div class=paragraph><p>When using <a href="https://man.freebsd.org/cgi/man.cgi?query=syscons&amp;sektion=4&amp;format=html">syscons(4)</a>, the default console driver, FreeBSD can be configured to support a mouse pointer on each virtual screen. To avoid conflicting with X, <a href="https://man.freebsd.org/cgi/man.cgi?query=syscons&amp;sektion=4&amp;format=html">syscons(4)</a> supports a virtual device called <span class=filename>/dev/sysmouse</span>. All mouse events received from the real mouse device are written to the <a href="https://man.freebsd.org/cgi/man.cgi?query=sysmouse&amp;sektion=4&amp;format=html">sysmouse(4)</a> device via <a href="https://man.freebsd.org/cgi/man.cgi?query=moused&amp;sektion=8&amp;format=html">moused(8)</a>. To use the mouse on one or more virtual consoles, <em>and</em> use X, see <a href=#moused>Is it possible to use a mouse outside the X Window system?</a> and set up <a href="https://man.freebsd.org/cgi/man.cgi?query=moused&amp;sektion=8&amp;format=html">moused(8)</a>.</p></div><div class=paragraph><p>Then edit <span class=filename>/etc/X11/xorg.conf</span> and make sure the following lines exist:</p></div><div class="literalblock programlisting"><div class=content><pre>Section &#34;InputDevice&#34;
   Option          &#34;Protocol&#34; &#34;SysMouse&#34;
   Option          &#34;Device&#34; &#34;/dev/sysmouse&#34;
.....</pre></div></div><div class=paragraph><p>Starting with Xorg version 7.4, the <code>InputDevice</code> sections in <span class=filename>xorg.conf</span> are ignored in favor of autodetected devices. To restore the old behavior, add the following line to the <code>ServerLayout</code> or <code>ServerFlags</code> section:</p></div><div class="literalblock programlisting"><div class=content><pre>Option &#34;AutoAddDevices&#34; &#34;false&#34;</pre></div></div><div class=paragraph><p>Some people prefer to use <span class=filename>/dev/mouse</span> under X. To make this work, <span class=filename>/dev/mouse</span> should be linked to <span class=filename>/dev/sysmouse</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=sysmouse&amp;sektion=4&amp;format=html">sysmouse(4)</a>) by adding the following line to <span class=filename>/etc/devfs.conf</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs.conf&amp;sektion=5&amp;format=html">devfs.conf(5)</a>):</p></div><div class="literalblock programlisting"><div class=content><pre>link    sysmouse    mouse</pre></div></div><div class=paragraph><p>This link can be created by restarting <a href="https://man.freebsd.org/cgi/man.cgi?query=devfs&amp;sektion=5&amp;format=html">devfs(5)</a> with the following command (as <code>root</code>):</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service devfs restart</span></code></pre></div></div></div><div class=sect2><h3 id=_my_mouse_has_a_fancy_wheel_can_i_use_it_in_x>11.5. My mouse has a fancy wheel. Can I use it in X?<a class=anchor href=#_my_mouse_has_a_fancy_wheel_can_i_use_it_in_x></a></h3><div class=paragraph><p>Yes, if X is configured for a 5 button mouse. To do this, add the lines <code>Buttons 5</code> and <code>ZAxisMapping 4 5</code> to the "InputDevice" section of <span class=filename>/etc/X11/xorg.conf</span>, as seen in this example:</p></div><div class="literalblock programlisting"><div class=content><pre>Section &#34;InputDevice&#34;
   Identifier      &#34;Mouse1&#34;
   Driver          &#34;mouse&#34;
   Option          &#34;Protocol&#34; &#34;auto&#34;
   Option          &#34;Device&#34; &#34;/dev/sysmouse&#34;
   Option          &#34;Buttons&#34; &#34;5&#34;
   Option          &#34;ZAxisMapping&#34; &#34;4 5&#34;
EndSection</pre></div></div><div class=paragraph><p>The mouse can be enabled in Emacsby adding these lines to <span class=filename>~/.emacs</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>;; wheel mouse
(global-set-key [mouse-4] &#39;scroll-down)
(global-set-key [mouse-5] &#39;scroll-up)</pre></div></div></div><div class=sect2><h3 id=_my_laptop_has_a_synaptics_touchpad_can_i_use_it_in_x>11.6. My laptop has a Synaptics touchpad. Can I use it in X?<a class=anchor href=#_my_laptop_has_a_synaptics_touchpad_can_i_use_it_in_x></a></h3><div class=paragraph><p>Yes, after configuring a few things to make it work.</p></div><div class=paragraph><p>In order to use the Xorg synaptics driver, first remove <code>moused_enable</code> from <span class=filename>rc.conf</span>.</p></div><div class=paragraph><p>To enable synaptics, add the following line to <span class=filename>/boot/loader.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>hw.psm.synaptics_support=&#34;1&#34;</pre></div></div><div class=paragraph><p>Add the following to <span class=filename>/etc/X11/xorg.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>Section &#34;InputDevice&#34;
Identifier  &#34;Touchpad0&#34;
Driver      &#34;synaptics&#34;
Option      &#34;Protocol&#34; &#34;psm&#34;
Option      &#34;Device&#34; &#34;/dev/psm0&#34;
EndSection</pre></div></div><div class=paragraph><p>And be sure to add the following into the "ServerLayout" section:</p></div><div class="literalblock programlisting"><div class=content><pre>InputDevice    &#34;Touchpad0&#34; &#34;SendCoreEvents&#34;</pre></div></div></div><div class=sect2><h3 id=_how_do_i_use_remote_x_displays>11.7. How do I use remote X displays?<a class=anchor href=#_how_do_i_use_remote_x_displays></a></h3><div class=paragraph><p>For security reasons, the default setting is to not allow a machine to remotely open a window.</p></div><div class=paragraph><p>To enable this feature, start X with the optional <code>-listen_tcp</code> argument:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% startx <span class=nt>-listen_tcp</span></code></pre></div></div></div><div class=sect2><h3 id=_what_is_a_virtual_console_and_how_do_i_make_more>11.8. What is a virtual console and how do I make more?<a class=anchor href=#_what_is_a_virtual_console_and_how_do_i_make_more></a></h3><div class=paragraph><p>Virtual consoles provide several simultaneous sessions on the same machine without doing anything complicated like setting up a network or running X.</p></div><div class=paragraph><p>When the system starts, it will display a login prompt on the monitor after displaying all the boot messages. Type in your login name and password to start working on the first virtual console.</p></div><div class=paragraph><p>To start another session, perhaps to look at documentation for a program or to read mail while waiting for an FTP transfer to finish, hold down <kbd>Alt</kbd> and press <kbd>F2</kbd>. This will display the login prompt for the second virtual console. To go back to the original session, press <span class=keyseq><kbd>Alt</kbd>+<kbd>F1</kbd></span>.</p></div><div class=paragraph><p>The default FreeBSD installation has eight virtual consoles enabled. <span class=keyseq><kbd>Alt</kbd>+<kbd>F1</kbd></span>, <span class=keyseq><kbd>Alt</kbd>+<kbd>F2</kbd></span>, <span class=keyseq><kbd>Alt</kbd>+<kbd>F3</kbd></span>, and so on will switch between these virtual consoles.</p></div><div class=paragraph><p>To enable more of virtual consoles, edit <span class=filename>/etc/ttys</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=ttys&amp;sektion=5&amp;format=html">ttys(5)</a>) and add entries for <span class=filename>ttyv8</span> to <span class=filename>ttyvc</span>, after the comment on "Virtual terminals":</p></div><div class="literalblock programlisting"><div class=content><pre># Edit the existing entry for ttyv8 in /etc/ttys and change
# &#34;off&#34; to &#34;on&#34;.
ttyv8   &#34;/usr/libexec/getty Pc&#34;         xterm  on secure
ttyv9   &#34;/usr/libexec/getty Pc&#34;         xterm  on secure
ttyva   &#34;/usr/libexec/getty Pc&#34;         xterm  on secure
ttyvb   &#34;/usr/libexec/getty Pc&#34;         xterm  on secure</pre></div></div><div class=paragraph><p>The more virtual terminals, the more resources that are used. This can be problematic on systems with 8 MB RAM or less. Consider changing <code>secure</code> to <code>insecure</code>.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>In order to run an X server, at least one virtual terminal must be left to <code>off</code> for it to use. This means that only eleven of the Alt-function keys can be used as virtual consoles so that one is left for the X server.</p></div></td></tr></tbody></table></div><div class=paragraph><p>For example, to run X and eleven virtual consoles, the setting for virtual terminal 12 should be:</p></div><div class="literalblock programlisting"><div class=content><pre>ttyvb   &#34;/usr/libexec/getty Pc&#34;         xterm  off secure</pre></div></div><div class=paragraph><p>The easiest way to activate the virtual consoles is to reboot.</p></div></div><div class=sect2><h3 id=_how_do_i_access_the_virtual_consoles_from_x>11.9. How do I access the virtual consoles from X?<a class=anchor href=#_how_do_i_access_the_virtual_consoles_from_x></a></h3><div class=paragraph><p>Use <span class=keyseq><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Fn</kbd></span> to switch back to a virtual console. Press <span class=keyseq><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd></span> to return to the first virtual console.</p></div><div class=paragraph><p>Once at a text console, use <span class=keyseq><kbd>Alt</kbd>+<kbd>Fn</kbd></span> to move between them.</p></div><div class=paragraph><p>To return to the X session, switch to the virtual console running X. If X was started from the command line using <code>startx</code>, the X session will attach to the next unused virtual console, not the text console from which it was invoked. For eight active virtual terminals, X will run on the ninth, so use <span class=keyseq><kbd>Alt</kbd>+<kbd>F9</kbd></span>.</p></div></div><div class=sect2><h3 id=xdm-boot>11.10. How do I start XDM on boot?<a class=anchor href=#xdm-boot></a></h3><div class=paragraph><p>There are two schools of thought on how to start <a href="https://man.freebsd.org/cgi/man.cgi?query=xdm&amp;sektion=1&amp;format=html">xdm(1)</a>. One school starts <code>xdm</code> from <span class=filename>/etc/ttys</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=ttys&amp;sektion=5&amp;format=html">ttys(5)</a>) using the supplied example, while the other runs <code>xdm</code> from <span class=filename>rc.local</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>) or from an <span class=filename>X</span> script in <span class=filename>/usr/local/etc/rc.d</span>. Both are equally valid, and one may work in situations where the other does not. In both cases the result is the same: X will pop up a graphical login prompt.</p></div><div class=paragraph><p>The <a href="https://man.freebsd.org/cgi/man.cgi?query=ttys&amp;sektion=5&amp;format=html">ttys(5)</a> method has the advantage of documenting which vty X will start on and passing the responsibility of restarting the X server on logout to <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a>. The <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> method makes it easy to <code>kill xdm</code> if there is a problem starting the X server.</p></div><div class=paragraph><p>If loaded from <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a>, <code>xdm</code> should be started without any arguments. <code>xdm</code> must start <em>after</em> <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a> runs, or else <code>getty</code> and <code>xdm</code> will conflict, locking out the console. The best way around this is to have the script sleep 10 seconds or so then launch <code>xdm</code>.</p></div><div class=paragraph><p>When starting <code>xdm</code> from <span class=filename>/etc/ttys</span>, there still is a chance of conflict between <code>xdm</code> and <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a>. One way to avoid this is to add the <code>vt</code> number in <span class=filename>/usr/local/lib/X11/xdm/Xservers</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>:0 local /usr/local/bin/X vt4</pre></div></div><div class=paragraph><p>The above example will direct the X server to run in <span class=filename>/dev/ttyv3</span>. Note the number is offset by one. The X server counts the vty from one, whereas the FreeBSD kernel numbers the vty from zero.</p></div></div><div class=sect2><h3 id=_why_do_i_get_couldnt_open_console_when_i_run_xconsole>11.11. Why do I get Couldn’t open console when I run xconsole?<a class=anchor href=#_why_do_i_get_couldnt_open_console_when_i_run_xconsole></a></h3><div class=paragraph><p>When X is started with <code>startx</code>, the permissions on <span class=filename>/dev/console</span> will <em>not</em> get changed, resulting in things like <code>xterm -C</code> and <code>xconsole</code> not working.</p></div><div class=paragraph><p>This is because of the way console permissions are set by default. On a multi-user system, one does not necessarily want just any user to be able to write on the system console. For users who are logging directly onto a machine with a VTY, the <a href="https://man.freebsd.org/cgi/man.cgi?query=fbtab&amp;sektion=5&amp;format=html">fbtab(5)</a> file exists to solve such problems.</p></div><div class=paragraph><p>In a nutshell, make sure an uncommented line of the form is in <span class=filename>/etc/fbtab</span> (see <a href="https://man.freebsd.org/cgi/man.cgi?query=fbtab&amp;sektion=5&amp;format=html">fbtab(5)</a>):</p></div><div class="literalblock programlisting"><div class=content><pre>/dev/ttyv0 0600 /dev/console</pre></div></div><div class=paragraph><p>It will ensure that whomever logs in on <span class=filename>/dev/ttyv0</span> will own the console.</p></div></div><div class=sect2><h3 id=_why_does_my_ps2_mouse_misbehave_under_x>11.12. Why does my PS/2 mouse misbehave under X?<a class=anchor href=#_why_does_my_ps2_mouse_misbehave_under_x></a></h3><div class=paragraph><p>The mouse and the mouse driver may have become out of synchronization. In rare cases, the driver may also erroneously report synchronization errors:</p></div><div class="literalblock programlisting"><div class=content><pre>psmintr: out of sync (xxxx != yyyy)</pre></div></div><div class=paragraph><p>If this happens, disable the synchronization check code by setting the driver flags for the PS/2 mouse driver to <code>0x100</code>. This can be easiest achieved by adding <code>hint.psm.0.flags="0x100"</code> to <span class=filename>/boot/loader.conf</span> and rebooting.</p></div></div><div class=sect2><h3 id=_how_do_i_reverse_the_mouse_buttons>11.13. How do I reverse the mouse buttons?<a class=anchor href=#_how_do_i_reverse_the_mouse_buttons></a></h3><div class=paragraph><p>Type <code>xmodmap -e "pointer = 3 2 1"</code>. Add this command to <span class=filename>~/.xinitrc</span> or <span class=filename>~/.xsession</span> to make it happen automatically.</p></div></div><div class=sect2><h3 id=_how_do_i_install_a_splash_screen_and_where_do_i_find_them>11.14. How do I install a splash screen and where do I find them?<a class=anchor href=#_how_do_i_install_a_splash_screen_and_where_do_i_find_them></a></h3><div class=paragraph><p>The detailed answer for this question can be found in the <a href=https://docs.freebsd.org/en/books/handbook/boot#boot-splash>Boot Time Splash Screens</a> section of the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_can_i_use_the_windows_keys_on_my_keyboard_in_x>11.15. Can I use the Windows keys on my keyboard in X?<a class=anchor href=#_can_i_use_the_windows_keys_on_my_keyboard_in_x></a></h3><div class=paragraph><p>Yes. Use <a href="https://man.freebsd.org/cgi/man.cgi?query=xmodmap&amp;sektion=1&amp;format=html">xmodmap(1)</a> to define which functions the keys should perform.</p></div><div class=paragraph><p>Assuming all Windows keyboards are standard, the keycodes for these three keys are the following:</p></div><div class=ulist><ul><li><p>115 — <kbd>Windows</kbd> key, between the left-hand <kbd>Ctrl</kbd> and <kbd>Alt</kbd> keys</p></li><li><p>116 — <kbd>Windows</kbd> key, to the right of <kbd>AltGr</kbd></p></li><li><p>117 — <kbd>Menu</kbd>, to the left of the right-hand <kbd>Ctrl</kbd></p></li></ul></div><div class=paragraph><p>To have the left <kbd>Windows</kbd> key print a comma, try this.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># xmodmap -e &#34;keycode 115 = comma&#34;</span></code></pre></div></div><div class=paragraph><p>To have the <kbd>Windows</kbd> key-mappings enabled automatically every time X is started, either put the <code>xmodmap</code> commands in <span class=filename>~/.xinitrc</span> or, preferably, create a <span class=filename>~/.xmodmaprc</span> and include the <code>xmodmap</code> options, one per line, then add the following line to <span class=filename>~/.xinitrc</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>xmodmap $HOME/.xmodmaprc</pre></div></div><div class=paragraph><p>For example, to map the 3 keys to be <kbd>F13</kbd>, <kbd>F14</kbd>, and <kbd>F15</kbd>, respectively. This would make it easy to map them to useful functions within applications or the window manager.</p></div><div class=paragraph><p>To do this, put the following in <span class=filename>~/.xmodmaprc</span>.</p></div><div class="literalblock programlisting"><div class=content><pre>keycode 115 = F13
keycode 116 = F14
keycode 117 = F15</pre></div></div><div class=paragraph><p>For the <a class=package href=https://cgit.freebsd.org/ports/tree/x11-wm/fvwm2/>x11-wm/fvwm2</a> desktop manager, one could map the keys so that <kbd>F13</kbd> iconifies or de-iconifies the window the cursor is in, <kbd>F14</kbd> brings the window the cursor is in to the front or, if it is already at the front, pushes it to the back, and <kbd>F15</kbd> pops up the main Workplace menu even if the cursor is not on the desktop, which is useful when no part of the desktop is visible.</p></div><div class=paragraph><p>The following entries in <span class=filename>~/.fvwmrc</span> implement the aforementioned setup:</p></div><div class="literalblock programlisting"><div class=content><pre>Key F13        FTIWS    A        Iconify
Key F14        FTIWS    A        RaiseLower
Key F15        A        A        Menu Workplace Nop</pre></div></div></div><div class=sect2><h3 id=_how_can_i_get_3d_hardware_acceleration_for_opengl>11.16. How can I get 3D hardware acceleration for OpenGL?<a class=anchor href=#_how_can_i_get_3d_hardware_acceleration_for_opengl></a></h3><div class=paragraph><p>The availability of 3D acceleration depends on the version of Xorg and the type of video chip. For an nVidia chip, use the binary drivers provided for FreeBSD by installing one of the following ports:</p></div><div class=paragraph><p>The latest versions of nVidia cards are supported by the <a class=package href=https://cgit.freebsd.org/ports/tree/x11/nvidia-driver/>x11/nvidia-driver</a> port.</p></div><div class=paragraph><p>Older drivers are available as <a class=package href="https://cgit.freebsd.org/ports/tree/x11/nvidia-driver-<mark>#</mark>/">x11/nvidia-driver-<mark>#</mark></a></p></div><div class=paragraph><p>nVidia provides detailed information on which card is supported by which driver on their web site: <a href=http://www.nvidia.com/object/IO_32667.html>http://www.nvidia.com/object/IO_32667.html</a>.</p></div><div class=paragraph><p>For Matrox G200/G400, check the <a class=package href=https://cgit.freebsd.org/ports/tree/x11-drivers/xf86-video-mga/>x11-drivers/xf86-video-mga</a> port.</p></div><div class=paragraph><p>For ATI Rage 128 and Radeon see <a href="https://man.freebsd.org/cgi/man.cgi?query=ati&amp;sektion=4&amp;format=html">ati(4)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=r128&amp;sektion=4&amp;format=html">r128(4)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=radeon&amp;sektion=4&amp;format=html">radeon(4)</a>.</p></div></div></div></div><div class=sect1><h2 id=_networking>12. Networking<a class=anchor href=#_networking></a></h2><div class=sectionbody><div class=sect2><h3 id=_where_can_i_get_information_on_diskless_booting>12.1. Where can I get information on diskless booting?<a class=anchor href=#_where_can_i_get_information_on_diskless_booting></a></h3><div class=paragraph><p>"Diskless booting" means that the FreeBSD box is booted over a network, and reads the necessary files from a server instead of its hard disk. For full details, see <a href=https://docs.freebsd.org/en/books/handbook/advanced-networking#network-diskless>the Handbook entry on diskless booting</a>.</p></div></div><div class=sect2><h3 id=_can_a_freebsd_box_be_used_as_a_dedicated_network_router>12.2. Can a FreeBSD box be used as a dedicated network router?<a class=anchor href=#_can_a_freebsd_box_be_used_as_a_dedicated_network_router></a></h3><div class=paragraph><p>Yes. Refer to the Handbook entry on <a href=https://docs.freebsd.org/en/books/handbook/advanced-networking#advanced-networking>advanced networking</a>, specifically the section on <a href=https://docs.freebsd.org/en/books/handbook/advanced-networking#network-routing>routing and gateways</a>.</p></div></div><div class=sect2><h3 id=_can_i_connect_my_windows_box_to_the_internet_via_freebsd>12.3. Can I connect my Windows box to the Internet via FreeBSD?<a class=anchor href=#_can_i_connect_my_windows_box_to_the_internet_via_freebsd></a></h3><div class=paragraph><p>Typically, people who ask this question have two PCs at home, one with FreeBSD and one with some version of Windows™ the idea is to use the FreeBSD box to connect to the Internet and then be able to access the Internet from the Windows™ box through the FreeBSD box. This is really just a special case of the previous question and works perfectly well.</p></div><div class=paragraph><p>Dialup users must use <code>-nat</code> and set <code>gateway_enable</code> to <em>YES</em> in <span class=filename>/etc/rc.conf</span>. For more information, refer to <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> or the <a href=https://docs.freebsd.org/en/books/handbook/ppp-and-slip#userppp>Handbook entry on user PPP</a>.</p></div><div class=paragraph><p>If the connection to the Internet is over Ethernet, use <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a>. A tutorial can be found in the <a href=https://docs.freebsd.org/en/books/handbook/#network-natd>natd</a> section of the Handbook.</p></div></div><div class=sect2><h3 id=_does_freebsd_support_ppp>12.4. Does FreeBSD support PPP?<a class=anchor href=#_does_freebsd_support_ppp></a></h3><div class=paragraph><p>Yes. <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> provides support for both incoming and outgoing connections.</p></div><div class=paragraph><p>For more information on how to use this, refer to the <a href=https://docs.freebsd.org/en/books/handbook/ppp-and-slip/#ppp-and-slip>Handbook chapter on PPP</a>.</p></div></div><div class=sect2><h3 id=_does_freebsd_support_nat_or_masquerading>12.5. Does FreeBSD support NAT or Masquerading?<a class=anchor href=#_does_freebsd_support_nat_or_masquerading></a></h3><div class=paragraph><p>Yes. For instructions on how to use NAT over a PPP connection, see the <a href=https://docs.freebsd.org/en/books/handbook/ppp-and-slip#userppp>Handbook entry on PPP</a>. To use NAT over some other sort of network connection, look at the <a href=https://docs.freebsd.org/en/books/handbook/#network-natd>natd</a> section of the Handbook.</p></div></div><div class=sect2><h3 id=_how_can_i_set_up_ethernet_aliases>12.6. How can I set up Ethernet aliases?<a class=anchor href=#_how_can_i_set_up_ethernet_aliases></a></h3><div class=paragraph><p>If the alias is on the same subnet as an address already configured on the interface, add <code>netmask 0xffffffff</code> to this command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig ed0 alias 192.0.2.2 netmask 0xffffffff</span></code></pre></div></div><div class=paragraph><p>Otherwise, specify the network address and netmask as usual:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ifconfig ed0 alias 172.16.141.5 netmask 0xffffff00</span></code></pre></div></div><div class=paragraph><p>More information can be found in the FreeBSD <a href=https://docs.freebsd.org/en/books/handbook/config-tuning/#configtuning-virtual-hosts>Handbook</a>.</p></div></div><div class=sect2><h3 id=_why_can_i_not_nfs_mount_from_a_linux_box>12.7. Why can I not NFS-mount from a Linux box?<a class=anchor href=#_why_can_i_not_nfs_mount_from_a_linux_box></a></h3><div class=paragraph><p>Some versions of the Linux™ NFS code only accept mount requests from a privileged port; try to issue the following command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># mount -o -P linuxbox:/blah /mnt</span></code></pre></div></div></div><div class=sect2><h3 id=_why_does_mountd_keep_telling_me_it_cant_change_attributes_and_that_i_have_a_bad_exports_list_on_my_freebsd_nfs_server>12.8. Why does mountd keep telling me it can’t change attributes and that I have a bad exports list on my FreeBSD NFS server?<a class=anchor href=#_why_does_mountd_keep_telling_me_it_cant_change_attributes_and_that_i_have_a_bad_exports_list_on_my_freebsd_nfs_server></a></h3><div class=paragraph><p>The most frequent problem is not understanding the correct format of <span class=filename>/etc/exports</span>. Review <a href="https://man.freebsd.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;format=html">exports(5)</a> and the <a href=https://docs.freebsd.org/en/books/handbook/network-servers/#network-nfs>NFS</a> entry in the Handbook, especially the section on <a href=https://docs.freebsd.org/en/books/handbook/#configuring-nfs>configuring NFS</a>.</p></div></div><div class=sect2><h3 id=_how_do_i_enable_ip_multicast_support>12.9. How do I enable IP multicast support?<a class=anchor href=#_how_do_i_enable_ip_multicast_support></a></h3><div class=paragraph><p>Install the <a class=package href=https://cgit.freebsd.org/ports/tree/net/mrouted/>net/mrouted</a> package or port and add <code>mrouted_enable="YES"</code> to <span class=filename>/etc/rc.conf</span> start this service at boot time.</p></div></div><div class=sect2><h3 id=_why_do_i_have_to_use_the_fqdn_for_hosts_on_my_site>12.10. Why do I have to use the FQDN for hosts on my site?<a class=anchor href=#_why_do_i_have_to_use_the_fqdn_for_hosts_on_my_site></a></h3><div class=paragraph><p>See the answer in the FreeBSD <a href=https://docs.freebsd.org/en/books/handbook/mail#mail-trouble>Handbook</a>.</p></div></div><div class=sect2><h3 id=_why_do_i_get_an_error_permission_denied_for_all_networking_operations>12.11. Why do I get an error, Permission denied, for all networking operations?<a class=anchor href=#_why_do_i_get_an_error_permission_denied_for_all_networking_operations></a></h3><div class=paragraph><p>If the kernel is compiled with the <code>IPFIREWALL</code> option, be aware that the default policy is to deny all packets that are not explicitly allowed.</p></div><div class=paragraph><p>If the firewall is unintentionally misconfigured, restore network operability by typing the following as <code>root</code>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># ipfw add 65534 allow all from any to any</span></code></pre></div></div><div class=paragraph><p>Consider setting <code>firewall_type="open"</code> in <span class=filename>/etc/rc.conf</span>.</p></div><div class=paragraph><p>For further information on configuring this firewall, see the <a href=https://docs.freebsd.org/en/books/handbook/firewalls#firewalls-ipfw>Handbook chapter</a>.</p></div></div><div class=sect2><h3 id=_why_is_my_ipfw_fwd_rule_to_redirect_a_service_to_another_machine_not_working>12.12. Why is my ipfw fwd rule to redirect a service to another machine not working?<a class=anchor href=#_why_is_my_ipfw_fwd_rule_to_redirect_a_service_to_another_machine_not_working></a></h3><div class=paragraph><p>Possibly because network address translation (NAT) is needed instead of just forwarding packets. A "fwd" rule only forwards packets, it does not actually change the data inside the packet. Consider this rule:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>01000 fwd 10.0.0.1 from any to foo 21</code></pre></div></div><div class=paragraph><p>When a packet with a destination address of <em>foo</em> arrives at the machine with this rule, the packet is forwarded to <em>10.0.0.1</em>, but it still has the destination address of <em>foo</em>. The destination address of the packet is not changed to <em>10.0.0.1</em>. Most machines would probably drop a packet that they receive with a destination address that is not their own. Therefore, using a "fwd" rule does not often work the way the user expects. This behavior is a feature and not a bug.</p></div><div class=paragraph><p>See the <a href=#service-redirect>FAQ about redirecting services</a>, the <a href="https://man.freebsd.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;format=html">natd(8)</a> manual, or one of the several port redirecting utilities in the <a href=https://www.FreeBSD.org/ports/>Ports Collection</a> for a correct way to do this.</p></div></div><div class=sect2><h3 id=_how_can_i_redirect_service_requests_from_one_machine_to_another>12.13. How can I redirect service requests from one machine to another?<a class=anchor href=#_how_can_i_redirect_service_requests_from_one_machine_to_another></a></h3><div class=paragraph><p>FTP and other service requests can be redirected with the <a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/socket/>sysutils/socket</a> package or port. Replace the entry for the service in <span class=filename>/etc/inetd.conf</span> to call <code>socket</code>, as seen in this example for ftpd:</p></div><div class="literalblock programlisting"><div class=content><pre>ftp stream tcp nowait nobody /usr/local/bin/socket socket ftp.example.com ftp</pre></div></div><div class=paragraph><p>where <em>ftp.example.com</em> and <em>ftp</em> are the host and port to redirect to, respectively.</p></div></div><div class=sect2><h3 id=_where_can_i_get_a_bandwidth_management_tool>12.14. Where can I get a bandwidth management tool?<a class=anchor href=#_where_can_i_get_a_bandwidth_management_tool></a></h3><div class=paragraph><p>There are three bandwidth management tools available for FreeBSD. <a href="https://man.freebsd.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;format=html">dummynet(4)</a> is integrated into FreeBSD as part of <a href="https://man.freebsd.org/cgi/man.cgi?query=ipfw&amp;sektion=4&amp;format=html">ipfw(4)</a>. <a href=http://www.sonycsl.co.jp/person/kjc/programs.html>ALTQ</a> has been integrated into FreeBSD as part of <a href="https://man.freebsd.org/cgi/man.cgi?query=pf&amp;sektion=4&amp;format=html">pf(4)</a>. Bandwidth Manager from <a href=http://www.etinc.com/>Emerging Technologies</a> is a commercial product.</p></div></div><div class=sect2><h3 id=_why_do_i_get_devbpf0_device_not_configured>12.15. Why do I get /dev/bpf0: device not configured?<a class=anchor href=#_why_do_i_get_devbpf0_device_not_configured></a></h3><div class=paragraph><p>The running application requires the Berkeley Packet Filter (<a href="https://man.freebsd.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;format=html">bpf(4)</a>), but it was removed from a custom kernel. Add this to the kernel config file and build a new kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>device bpf        # Berkeley Packet Filter</pre></div></div></div><div class=sect2><h3 id=_how_do_i_mount_a_disk_from_a_windows_machine_that_is_on_my_network_like_smbmount_in_linux>12.16. How do I mount a disk from a Windows machine that is on my network, like smbmount in Linux?<a class=anchor href=#_how_do_i_mount_a_disk_from_a_windows_machine_that_is_on_my_network_like_smbmount_in_linux></a></h3><div class=paragraph><p>Use the SMBFS toolset. It includes a set of kernel modifications and a set of userland programs. The programs and information are available as <a href="https://man.freebsd.org/cgi/man.cgi?query=mount_smbfs&amp;sektion=8&amp;format=html">mount_smbfs(8)</a> in the base system.</p></div></div><div class=sect2><h3 id=_what_are_these_messages_about_limiting_icmpopen_portclosed_port_response_in_my_log_files>12.17. What are these messages about: Limiting icmp/open port/closed port response in my log files?<a class=anchor href=#_what_are_these_messages_about_limiting_icmpopen_portclosed_port_response_in_my_log_files></a></h3><div class=paragraph><p>This kernel message indicates that some activity is provoking it to send a large amount of ICMP or TCP reset (RST) responses. ICMP responses are often generated as a result of attempted connections to unused UDP ports. TCP resets are generated as a result of attempted connections to unopened TCP ports. Among others, these are the kinds of activities which may cause these messages:</p></div><div class=ulist><ul><li><p>Brute-force denial of service (DoS) attacks (as opposed to single-packet attacks which exploit a specific vulnerability).</p></li><li><p>Port scans which attempt to connect to a large number of ports (as opposed to only trying a few well-known ports).</p></li></ul></div><div class=paragraph><p>The first number in the message indicates how many packets the kernel would have sent if the limit was not in place, and the second indicates the limit. This limit is controlled using <code>net.inet.icmp.icmplim</code>. This example sets the limit to <code>300</code> packets per second:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl net.inet.icmp.icmplim=300</span></code></pre></div></div><div class=paragraph><p>To disable these messages without disabling response limiting, use <code>net.inet.icmp.icmplim_output</code> to disable the output:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl net.inet.icmp.icmplim_output=0</span></code></pre></div></div><div class=paragraph><p>Finally, to disable response limiting completely, set <code>net.inet.icmp.icmplim</code> to <code>0</code>. Disabling response limiting is discouraged for the reasons listed above.</p></div></div><div class=sect2><h3 id=_what_are_these_arp_unknown_hardware_address_format_error_messages>12.18. What are these arp: unknown hardware address format error messages?<a class=anchor href=#_what_are_these_arp_unknown_hardware_address_format_error_messages></a></h3><div class=paragraph><p>This means that some device on the local Ethernet is using a MAC address in a format that FreeBSD does not recognize. This is probably caused by someone experimenting with an Ethernet card somewhere else on the network. This is most commonly seen on cable modem networks. It is harmless, and should not affect the performance of the FreeBSD system.</p></div></div><div class=sect2><h3 id=_why_do_i_keep_seeing_messages_like_192_168_0_10_is_on_fxp1_but_got_reply_from_00151767cf82_on_rl0_and_how_do_i_disable_it>12.19. Why do I keep seeing messages like: 192.168.0.10 is on fxp1 but got reply from 00:15:17:67:cf:82 on rl0, and how do I disable it?<a class=anchor href=#_why_do_i_keep_seeing_messages_like_192_168_0_10_is_on_fxp1_but_got_reply_from_00151767cf82_on_rl0_and_how_do_i_disable_it></a></h3><div class=paragraph><p>Because a packet is coming from outside the network unexpectedly. To disable them, set <code>net.link.ether.inet.log_arp_wrong_iface</code> to <code>0</code>.</p></div></div><div class=sect2><h3 id=_how_do_i_compile_an_ipv6_only_kernel>12.20. How do I compile an IPv6 only kernel?<a class=anchor href=#_how_do_i_compile_an_ipv6_only_kernel></a></h3><div class=paragraph><p>Configure your kernel with these settings:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>include GENERIC
ident GENERIC-IPV6ONLY
makeoptions MKMODULESENV+<span class=o>=</span><span class=s2>&#34;WITHOUT_INET_SUPPORT=&#34;</span>
nooptions INET
nodevice gre</code></pre></div></div></div></div></div><div class=sect1><h2 id=_security>13. Security<a class=anchor href=#_security></a></h2><div class=sectionbody><div class=sect2><h3 id=_what_is_a_sandbox>13.1. What is a sandbox?<a class=anchor href=#_what_is_a_sandbox></a></h3><div class=paragraph><p>"Sandbox" is a security term. It can mean two things:</p></div><div class=ulist><ul><li><p>A process which is placed inside a set of virtual walls that are designed to prevent someone who breaks into the process from being able to break into the wider system.</p><div class=paragraph><p>The process is only able to run inside the walls. Since nothing the process does in regards to executing code is supposed to be able to breach the walls, a detailed audit of its code is not needed in order to be able to say certain things about its security.</p></div><div class=paragraph><p>The walls might be a user ID, for example. This is the definition used in the <a href="https://man.freebsd.org/cgi/man.cgi?query=security&amp;sektion=7&amp;format=html">security(7)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=named&amp;sektion=8&amp;format=html">named(8)</a> man pages.</p></div><div class=paragraph><p>Take the <code>ntalk</code> service, for example (see <a href="https://man.freebsd.org/cgi/man.cgi?query=inetd&amp;sektion=8&amp;format=html">inetd(8)</a>). This service used to run as user ID <code>root</code>. Now it runs as user ID <code>tty</code>. The <code>tty</code> user is a sandbox designed to make it more difficult for someone who has successfully hacked into the system via <code>ntalk</code> from being able to hack beyond that user ID.</p></div></li><li><p>A process which is placed inside a simulation of the machine. It means that someone who is able to break into the process may believe that he can break into the wider machine but is, in fact, only breaking into a simulation of that machine and not modifying any real data.</p><div class=paragraph><p>The most common way to accomplish this is to build a simulated environment in a subdirectory and then run the processes in that directory chrooted so that <span class=filename>/</span> for that process is this directory, not the real <span class=filename>/</span> of the system).</p></div><div class=paragraph><p>Another common use is to mount an underlying file system read-only and then create a file system layer on top of it that gives a process a seemingly writeable view into that file system. The process may believe it is able to write to those files, but only the process sees the effects — other processes in the system do not, necessarily.</p></div><div class=paragraph><p>An attempt is made to make this sort of sandbox so transparent that the user (or hacker) does not realize that he is sitting in it.</p></div></li></ul></div><div class=paragraph><p>UNIX™ implements two core sandboxes. One is at the process level, and one is at the userid level.</p></div><div class=paragraph><p>Every UNIX™ process is completely firewalled off from every other UNIX™ process. One process cannot modify the address space of another.</p></div><div class=paragraph><p>A UNIX™ process is owned by a particular userid. If the user ID is not the <code>root</code> user, it serves to firewall the process off from processes owned by other users. The user ID is also used to firewall off on-disk data.</p></div></div><div class=sect2><h3 id=_what_is_securelevel>13.2. What is securelevel?<a class=anchor href=#_what_is_securelevel></a></h3><div class=paragraph><p><code>securelevel</code> is a security mechanism implemented in the kernel. When the securelevel is positive, the kernel restricts certain tasks; not even the superuser (<code>root</code>) is allowed to do them. The securelevel mechanism limits the ability to:</p></div><div class=ulist><ul><li><p>Unset certain file flags, such as <code>schg</code> (the system immutable flag).</p></li><li><p>Write to kernel memory via <span class=filename>/dev/mem</span> and <span class=filename>/dev/kmem</span>.</p></li><li><p>Load kernel modules.</p></li><li><p>Alter firewall rules.</p></li></ul></div><div class=paragraph><p>To check the status of the securelevel on a running system:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># sysctl -n kern.securelevel</span></code></pre></div></div><div class=paragraph><p>The output contains the current value of the securelevel. If it is greater than 0, at least some of the securelevel’s protections are enabled.</p></div><div class=paragraph><p>The securelevel of a running system cannot be lowered as this would defeat its purpose. If a task requires that the securelevel be non-positive, change the <code>kern_securelevel</code> and <code>kern_securelevel_enable</code> variables in <span class=filename>/etc/rc.conf</span> and reboot.</p></div><div class=paragraph><p>For more information on securelevel and the specific things all the levels do, consult <a href="https://man.freebsd.org/cgi/man.cgi?query=init&amp;sektion=8&amp;format=html">init(8)</a>.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>Securelevel is not a silver bullet; it has many known deficiencies. More often than not, it provides a false sense of security.</p></div><div class=paragraph><p>One of its biggest problems is that in order for it to be at all effective, all files used in the boot process up until the securelevel is set must be protected. If an attacker can get the system to execute their code prior to the securelevel being set (which happens quite late in the boot process since some things the system must do at start-up cannot be done at an elevated securelevel), its protections are invalidated. While this task of protecting all files used in the boot process is not technically impossible, if it is achieved, system maintenance will become a nightmare since one would have to take the system down, at least to single-user mode, to modify a configuration file.</p></div><div class=paragraph><p>This point and others are often discussed on the mailing lists, particularly the <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-security>FreeBSD security mailing list</a>. Search the archives <a href=https://www.FreeBSD.org/search/>here</a> for an extensive discussion. A more fine-grained mechanism is preferred.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_bind9_named_is_listening_on_some_high_numbered_ports_what_is_going_on>13.3. BIND9 (named) is listening on some high-numbered ports. What is going on?<a class=anchor href=#_bind9_named_is_listening_on_some_high_numbered_ports_what_is_going_on></a></h3><div class=paragraph><p>BIND uses a random high-numbered port for outgoing queries. Recent versions of it choose a new, random UDP port for each query. This may cause problems for some network configurations, especially if a firewall blocks incoming UDP packets on particular ports. To get past that firewall, try the <code>avoid-v4-udp-ports</code> and <code>avoid-v6-udp-ports</code> options to avoid selecting random port numbers within a blocked range.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p>If a port number (like 53) is specified via the <code>query-source</code> or <code>query-source-v6</code> options in <span class=filename>/usr/local/etc/namedb/named.conf</span>, randomized port selection will not be used. It is strongly recommended that these options not be used to specify fixed port numbers.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Congratulations, by the way. It is good practice to read <a href="https://man.freebsd.org/cgi/man.cgi?query=sockstat&amp;sektion=1&amp;format=html">sockstat(1)</a> output and notice odd things!</p></div></div><div class=sect2><h3 id=_the_sendmail_daemon_is_listening_on_port_587_as_well_as_the_standard_port_25_what_is_going_on>13.4. The Sendmail daemon is listening on port 587 as well as the standard port 25! What is going on?<a class=anchor href=#_the_sendmail_daemon_is_listening_on_port_587_as_well_as_the_standard_port_25_what_is_going_on></a></h3><div class=paragraph><p>Recent versions of Sendmail support a mail submission feature that runs over port 587. This is not yet widely supported, but is growing in popularity.</p></div></div><div class=sect2><h3 id=_what_is_this_uid_0_toor_account_have_i_been_compromised>13.5. What is this UID 0 toor account? Have I been compromised?<a class=anchor href=#_what_is_this_uid_0_toor_account_have_i_been_compromised></a></h3><div class=paragraph><p>Do not worry. <code>toor</code> is an "alternative" superuser account, where toor is root spelled backwards. It is intended to be used with a non-standard shell so the default shell for <code>root</code> does not need to change. This is important as shells which are not part of the base distribution, but are instead installed from ports or packages, are installed in <span class=filename>/usr/local/bin</span> which, by default, resides on a different file system. If <code>root</code>'s shell is located in <span class=filename>/usr/local/bin</span> and the file system containing <span class=filename>/usr/local/bin</span>) is not mounted, <code>root</code> will not be able to log in to fix a problem and will have to reboot into single-user mode in order to enter the path to a shell.</p></div><div class=paragraph><p>Some people use <code>toor</code> for day-to-day <code>root</code> tasks with a non-standard shell, leaving <code>root</code>, with a standard shell, for single-user mode or emergencies. By default, a user cannot log in using <code>toor</code> as it does not have a password, so log in as <code>root</code> and set a password for <code>toor</code> before using it to login.</p></div></div></div></div><div class=sect1><h2 id=_ppp>14. PPP<a class=anchor href=#_ppp></a></h2><div class=sectionbody><div class=sect2><h3 id=_i_cannot_make_ppp8_work_what_am_i_doing_wrong>14.1. I cannot make ppp8 work. What am I doing wrong?<a class=anchor href=#_i_cannot_make_ppp8_work_what_am_i_doing_wrong></a></h3><div class=paragraph><p>First, read <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> and the <a href=https://docs.freebsd.org/en/books/handbook/ppp-and-slip#userppp>PPP section of the Handbook</a>. To assist in troubleshooting, enable logging with the following command:</p></div><div class="literalblock programlisting"><div class=content><pre>set log Phase Chat Connect Carrier lcp ipcp ccp command</pre></div></div><div class=paragraph><p>This command may be typed at the <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> command prompt or it may be entered at the start of the <code>default</code> section in <span class=filename>/etc/ppp/ppp.conf</span>. Make sure that <span class=filename>/etc/syslog.conf</span> contains the lines below and the file <span class=filename>/var/log/ppp.log</span> exists:</p></div><div class="literalblock programlisting"><div class=content><pre>!ppp
*.*        /var/log/ppp.log</pre></div></div><div class=paragraph><p>A lot about what is going can be learned from the log file. Do not worry if it does not all make sense as it may make sense to someone else.</p></div></div><div class=sect2><h3 id=_why_does_ppp8_hang_when_i_run_it>14.2. Why does ppp8 hang when I run it?<a class=anchor href=#_why_does_ppp8_hang_when_i_run_it></a></h3><div class=paragraph><p>This is usually because the hostname will not resolve. The best way to fix this is to make sure that <span class=filename>/etc/hosts</span> is read first by the by ensuring that the <code>hosts</code> line is listed first in <span class=filename>/etc/host.conf</span>. Then, put an entry in <span class=filename>/etc/hosts</span> for the local machine. If there is no local network, change the <code>localhost</code> line:</p></div><div class="literalblock programlisting"><div class=content><pre>127.0.0.1        foo.example.com foo localhost</pre></div></div><div class=paragraph><p>Otherwise, add another entry for the host. Consult the relevant manual pages for more details.</p></div><div class=paragraph><p>When finished, verify that this command is successful: <code>ping -c1 hostname</code>.</p></div></div><div class=sect2><h3 id=_why_will_ppp8_not_dial_in_auto_mode>14.3. Why will ppp8 not dial in -auto mode?<a class=anchor href=#_why_will_ppp8_not_dial_in_auto_mode></a></h3><div class=paragraph><p>First, check that a default route exists. This command should display two entries:</p></div><div class="literalblock programlisting"><div class=content><pre>Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0</pre></div></div><div class=paragraph><p>If a default route is not listed, make sure that the <code>HISADDR</code> line has been added to <span class=filename>/etc/ppp/ppp.conf</span>.</p></div><div class=paragraph><p>Another reason for the default route line being missing is that a default route has been added to <span class=filename>/etc/rc.conf</span> and this line is missing from <span class=filename>/etc/ppp/ppp.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>delete ALL</pre></div></div><div class=paragraph><p>If this is the case, go back to the <a href=https://docs.freebsd.org/en/books/handbook/ppp-and-slip#userppp-final>Final System Configuration</a> section of the Handbook.</p></div></div><div class=sect2><h3 id=_what_does_no_route_to_host_mean>14.4. What does No route to host mean?<a class=anchor href=#_what_does_no_route_to_host_mean></a></h3><div class=paragraph><p>This error is usually because the following section is missing in <span class=filename>/etc/ppp/ppp.linkup</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>MYADDR:
  delete ALL
  add 0 0 HISADDR</pre></div></div><div class=paragraph><p>This is only necessary for a dynamic IP address or when the address of the default gateway is unknown. When using interactive mode, the following can be typed in after entering packet mode. Packet mode is indicated by the capitalized PPP in the prompt:</p></div><div class="literalblock programlisting"><div class=content><pre>delete ALL
add 0 0 HISADDR</pre></div></div><div class=paragraph><p>Refer to the <a href=https://docs.freebsd.org/en/books/handbook/#userppp-dynamicip>PPP and Dynamic IP addresses</a> section of the Handbook for further details.</p></div></div><div class=sect2><h3 id=_why_does_my_connection_drop_after_about_3_minutes>14.5. Why does my connection drop after about 3 minutes?<a class=anchor href=#_why_does_my_connection_drop_after_about_3_minutes></a></h3><div class=paragraph><p>The default PPP timeout is 3 minutes. This can be adjusted with the following line:</p></div><div class="literalblock programlisting"><div class=content><pre>set timeout NNN</pre></div></div><div class=paragraph><p>where <em>NNN</em> is the number of seconds of inactivity before the connection is closed. If <em>NNN</em> is zero, the connection is never closed due to a timeout. It is possible to put this command in <span class=filename>ppp.conf</span>, or to type it at the prompt in interactive mode. It is also possible to adjust it on the fly while the line is active by connecting to ppp’s server socket using <a href="https://man.freebsd.org/cgi/man.cgi?query=telnet&amp;sektion=1&amp;format=html">telnet(1)</a> or <a href="https://man.freebsd.org/cgi/man.cgi?query=pppctl&amp;sektion=8&amp;format=html">pppctl(8)</a>. Refer to the <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> man page for further details.</p></div></div><div class=sect2><h3 id=_why_does_my_connection_drop_under_heavy_load>14.6. Why does my connection drop under heavy load?<a class=anchor href=#_why_does_my_connection_drop_under_heavy_load></a></h3><div class=paragraph><p>If Link Quality Reporting (LQR) is configured, it is possible that too many LQR packets are lost between the FreeBSD system and the peer. <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> deduces that the line must therefore be bad, and disconnects. LQR is disabled by default and can be enabled with the following line:</p></div><div class="literalblock programlisting"><div class=content><pre>enable lqr</pre></div></div></div><div class=sect2><h3 id=_why_does_my_connection_drop_after_a_random_amount_of_time>14.7. Why does my connection drop after a random amount of time?<a class=anchor href=#_why_does_my_connection_drop_after_a_random_amount_of_time></a></h3><div class=paragraph><p>Sometimes, on a noisy phone line or even on a line with call waiting enabled, the modem may hang up because it incorrectly thinks that it lost carrier.</p></div><div class=paragraph><p>There is a setting on most modems for determining how tolerant it should be to temporary losses of carrier. Refer to the modem manual for details.</p></div></div><div class=sect2><h3 id=_why_does_my_connection_hang_after_a_random_amount_of_time>14.8. Why does my connection hang after a random amount of time?<a class=anchor href=#_why_does_my_connection_hang_after_a_random_amount_of_time></a></h3><div class=paragraph><p>Many people experience hung connections with no apparent explanation. The first thing to establish is which side of the link is hung.</p></div><div class=paragraph><p>When using an external modem, try using <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> to see if the TD light is flashing when data is transmitted. If it flashes but the RD light does not, the problem is with the remote end. If TD does not flash, the problem is local. With an internal modem, use the <code>set server</code> command in <span class=filename>ppp.conf</span>. When the hang occurs, connect to <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> using <a href="https://man.freebsd.org/cgi/man.cgi?query=pppctl&amp;sektion=8&amp;format=html">pppctl(8)</a>. If the network connection suddenly revives due to the activity on the diagnostic socket, or if it will not connect but the <code>set socket</code> command succeeded at startup time, the problem is local. If it can connect but things are still hung, enable local logging with <code>set log local async</code> and use <a href="https://man.freebsd.org/cgi/man.cgi?query=ping&amp;sektion=8&amp;format=html">ping(8)</a> from another window or terminal to make use of the link. The async logging will show the data being transmitted and received on the link. If data is going out and not coming back, the problem is remote.</p></div><div class=paragraph><p>Having established whether the problem is local or remote, there are now two possibilities:</p></div><div class=ulist><ul><li><p>If the problem is remote, read on entry <a href=#ppp-remote-not-responding>The remote end is not responding. What can I do?</a>.</p></li><li><p>If the problem is local, read on entry <a href=#ppp-hung>ppp(8) has hung. What can I do?</a>.</p></li></ul></div></div><div class=sect2><h3 id=ppp-remote-not-responding>14.9. The remote end is not responding. What can I do?<a class=anchor href=#ppp-remote-not-responding></a></h3><div class=paragraph><p>There is very little that can be done about this. Many ISPs will refuse to help users not running a Microsoft™ OS. Add <code>enable lqr</code> to <span class=filename>/etc/ppp/ppp.conf</span>, allowing <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> to detect the remote failure and hang up. This detection is relatively slow and therefore not that useful.</p></div><div class=paragraph><p>First, try disabling all local compression by adding the following to the configuration:</p></div><div class="literalblock programlisting"><div class=content><pre>disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
deny pred1 deflate deflate24 protocomp acfcomp shortseq vj</pre></div></div><div class=paragraph><p>Then reconnect to ensure that this makes no difference. If things improve or if the problem is solved completely, determine which setting makes the difference through trial and error. This is good information for the ISP, although it may make it apparent that it is not a Microsoft™ system.</p></div><div class=paragraph><p>Before contacting the ISP, enable async logging locally and wait until the connection hangs again. This may use up quite a bit of disk space. The last data read from the port may be of interest. It is usually ASCII data, and may even describe the problem (<code>Memory fault</code>, <code>Core dumped</code>).</p></div><div class=paragraph><p>If the ISP is helpful, they should be able to enable logging on their end, then when the next link drop occurs, they may be able to tell why their side is having a problem.</p></div></div><div class=sect2><h3 id=ppp-hung>14.10. <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> has hung. What can I do?<a class=anchor href=#ppp-hung></a></h3><div class=paragraph><p>In this case, rebuild <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> with debugging information, and then use <a href="https://man.freebsd.org/cgi/man.cgi?query=gdb&amp;sektion=1&amp;format=html">gdb(1)</a> to grab a stack trace from the ppp process that is stuck. To rebuild the ppp utility with debugging information, type:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src/usr.sbin/ppp</span>
<span class=c># env DEBUG_FLAGS=&#39;-g&#39; make clean</span>
<span class=c># env DEBUG_FLAGS=&#39;-g&#39; make install</span></code></pre></div></div><div class=paragraph><p>Then, restart ppp and wait until it hangs again. When the debug build of ppp hangs, start gdb on the stuck process by typing:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># gdb ppp `pgrep ppp`</span></code></pre></div></div><div class=paragraph><p>At the gdb prompt, use the <code>bt</code> or <code>where</code> commands to get a stack trace. Save the output of the gdb session, and "detach" from the running process by typing <code>quit</code>.</p></div></div><div class=sect2><h3 id=_i_keep_seeing_errors_about_magic_being_the_same_what_does_it_mean>14.11. I keep seeing errors about magic being the same. What does it mean?<a class=anchor href=#_i_keep_seeing_errors_about_magic_being_the_same_what_does_it_mean></a></h3><div class=paragraph><p>Occasionally, just after connecting, there may be messages in the log that say <code>Magic is same</code>. Sometimes, these messages are harmless, and sometimes one side or the other exits. Most PPP implementations cannot survive this problem, and even if the link seems to come up, there will be repeated configure requests and configure acknowledgments in the log file until <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> eventually gives up and closes the connection.</p></div><div class=paragraph><p>This normally happens on server machines with slow disks that are spawning a <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a> on the port, and executing <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> from a login script or program after login. There were reports of it happening consistently when using slirp. The reason is that in the time taken between <a href="https://man.freebsd.org/cgi/man.cgi?query=getty&amp;sektion=8&amp;format=html">getty(8)</a> exiting and <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> starting, the client-side <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> starts sending Line Control Protocol (LCP) packets. Because ECHO is still switched on for the port on the server, the client <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> sees these packets "reflect" back.</p></div><div class=paragraph><p>One part of the LCP negotiation is to establish a magic number for each side of the link so that "reflections" can be detected. The protocol says that when the peer tries to negotiate the same magic number, a NAK should be sent and a new magic number should be chosen. During the period that the server port has ECHO turned on, the client <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> sends LCP packets, sees the same magic in the reflected packet and NAKs it. It also sees the NAK reflect (which also means <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> must change its magic). This produces a potentially enormous number of magic number changes, all of which are happily piling into the server’s tty buffer. As soon as <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> starts on the server, it is flooded with magic number changes and almost immediately decides it has tried enough to negotiate LCP and gives up. Meanwhile, the client, who no longer sees the reflections, becomes happy just in time to see a hangup from the server.</p></div><div class=paragraph><p>This can be avoided by allowing the peer to start negotiating with the following line in <span class=filename>ppp.conf</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>set openmode passive</pre></div></div><div class=paragraph><p>This tells <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> to wait for the server to initiate LCP negotiations. Some servers however may never initiate negotiations. In this case, try something like:</p></div><div class="literalblock programlisting"><div class=content><pre>set openmode active 3</pre></div></div><div class=paragraph><p>This tells <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> to be passive for 3 seconds, and then to start sending LCP requests. If the peer starts sending requests during this period, <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> will immediately respond rather than waiting for the full 3 second period.</p></div></div><div class=sect2><h3 id=_lcp_negotiations_continue_until_the_connection_is_closed_what_is_wrong>14.12. LCP negotiations continue until the connection is closed. What is wrong?<a class=anchor href=#_lcp_negotiations_continue_until_the_connection_is_closed_what_is_wrong></a></h3><div class=paragraph><p>There is currently an implementation mis-feature in <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> where it does not associate LCP, CCP & IPCP responses with their original requests. As a result, if one PPP implementation is more than 6 seconds slower than the other side, the other side will send two additional LCP configuration requests. This is fatal.</p></div><div class=paragraph><p>Consider two implementations, <code>A</code> and <code>B</code>. <code>A</code> starts sending LCP requests immediately after connecting and <code>B</code> takes 7 seconds to start. When <code>B</code> starts, <code>A</code> has sent 3 LCP REQs. We are assuming the line has ECHO switched off, otherwise we would see magic number problems as described in the previous section. <code>B</code> sends a REQ, then an ACK to the first of <code>A’s REQs. This results in `A</code> entering the OPENED state and sending and ACK (the first) back to <code>B</code>. In the meantime, <code>B</code> sends back two more ACKs in response to the two additional REQs sent by <code>A</code> before <code>B</code> started up. <code>B</code> then receives the first ACK from <code>A</code> and enters the OPENED state. <code>A</code> receives the second ACK from <code>B</code> and goes back to the REQ-SENT state, sending another (forth) REQ as per the RFC. It then receives the third ACK and enters the OPENED state. In the meantime, <code>B</code> receives the forth REQ from <code>A</code>, resulting in it reverting to the ACK-SENT state and sending another (second) REQ and (forth) ACK as per the RFC. <code>A</code> gets the REQ, goes into REQ-SENT and sends another REQ. It immediately receives the following ACK and enters OPENED.</p></div><div class=paragraph><p>This goes on until one side figures out that they are getting nowhere and gives up.</p></div><div class=paragraph><p>The best way to avoid this is to configure one side to be <code>passive</code> — that is, make one side wait for the other to start negotiating. This can be done with the following command:</p></div><div class="literalblock programlisting"><div class=content><pre>set openmode passive</pre></div></div><div class=paragraph><p>Care should be taken with this option. This command can also be used to limit the amount of time that <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> waits for the peer to begin negotiations:</p></div><div class="literalblock programlisting"><div class=content><pre>set stopped N</pre></div></div><div class=paragraph><p>Alternatively, the following command (where <em>N</em> is the number of seconds to wait before starting negotiations) can be used:</p></div><div class="literalblock programlisting"><div class=content><pre>set openmode active N</pre></div></div><div class=paragraph><p>Check the manual page for details.</p></div></div><div class=sect2><h3 id=_why_does_ppp8_lock_up_when_i_shell_out_to_test_it>14.13. Why does ppp8 lock up when I shell out to test it?<a class=anchor href=#_why_does_ppp8_lock_up_when_i_shell_out_to_test_it></a></h3><div class=paragraph><p>When using <code>shell</code> or <code>!</code>, <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> executes a shell or the passed arguments. The ppp program will wait for the command to complete before continuing. Any attempt to use the PPP link while running the command will appear as a frozen link. This is because <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> is waiting for the command to complete.</p></div><div class=paragraph><p>To execute commands like this, use <code>!bg</code> instead. This will execute the given command in the background, and <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> can continue to service the link.</p></div></div><div class=sect2><h3 id=_why_does_ppp8_over_a_null_modem_cable_never_exit>14.14. Why does ppp8 over a null-modem cable never exit?<a class=anchor href=#_why_does_ppp8_over_a_null_modem_cable_never_exit></a></h3><div class=paragraph><p>There is no way for <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> to automatically determine that a direct connection has been dropped. This is due to the lines that are used in a null-modem serial cable. When using this sort of connection, LQR should always be enabled with the following line:</p></div><div class="literalblock programlisting"><div class=content><pre>enable lqr</pre></div></div><div class=paragraph><p>LQR is accepted by default if negotiated by the peer.</p></div></div><div class=sect2><h3 id=_why_does_ppp8_dial_for_no_reason_in_auto_mode>14.15. Why does ppp8 dial for no reason in -auto mode?<a class=anchor href=#_why_does_ppp8_dial_for_no_reason_in_auto_mode></a></h3><div class=paragraph><p>If <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> is dialing unexpectedly, determine the cause, and set up dial filters to prevent such dialing.</p></div><div class=paragraph><p>To determine the cause, use the following line:</p></div><div class="literalblock programlisting"><div class=content><pre>set log +tcp/ip</pre></div></div><div class=paragraph><p>This will log all traffic through the connection. The next time the line comes up unexpectedly, the reason will be logged with a convenient timestamp next to it.</p></div><div class=paragraph><p>Next, disable dialing under these circumstances. Usually, this sort of problem arises due to DNS lookups. To prevent DNS lookups from establishing a connection (this will <em>not</em> prevent <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> from passing the packets through an established connection), use the following:</p></div><div class="literalblock programlisting"><div class=content><pre>set dfilter 1 deny udp src eq 53
set dfilter 2 deny udp dst eq 53
set dfilter 3 permit 0/0 0/0</pre></div></div><div class=paragraph><p>This is not always suitable, as it will effectively break demand-dial capabilities. Most programs will need a DNS lookup before doing any other network related things.</p></div><div class=paragraph><p>In the DNS case, try to determine what is actually trying to resolve a host name. A lot of the time, Sendmail is the culprit. Make sure to configure Sendmail not to do any DNS lookups in its configuration file. See the section on <a href=https://docs.freebsd.org/en/books/handbook/serialcomms#dialup>using email with a dialup connection</a> in the FreeBSD Handbook for details. You may also want to add the following line to <span class=filename>.mc</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>define(`confDELIVERY_MODE&#39;, `d&#39;)dnl</pre></div></div><div class=paragraph><p>This will make Sendmail queue everything until the queue is run, usually, every 30 minutes, or until a <code>sendmail -q</code> is done, perhaps from <span class=filename>/etc/ppp/ppp.linkup</span>.</p></div></div><div class=sect2><h3 id=_what_do_these_ccp_errors_mean>14.16. What do these CCP errors mean?<a class=anchor href=#_what_do_these_ccp_errors_mean></a></h3><div class=paragraph><p>I keep seeing the following errors in my log file:</p></div><div class="literalblock programlisting"><div class=content><pre>CCP: CcpSendConfigReq
CCP: Received Terminate Ack (1) state = Req-Sent (6)</pre></div></div><div class=paragraph><p>This is because <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> is trying to negotiate Predictor1 compression, but the peer does not want to negotiate any compression at all. The messages are harmless, but can be silenced by disabling the compression:</p></div><div class="literalblock programlisting"><div class=content><pre>disable pred1</pre></div></div></div><div class=sect2><h3 id=_why_does_ppp8_not_log_my_connection_speed>14.17. Why does ppp8 not log my connection speed?<a class=anchor href=#_why_does_ppp8_not_log_my_connection_speed></a></h3><div class=paragraph><p>To log all lines of the modem conversation, enable the following:</p></div><div class="literalblock programlisting"><div class=content><pre>set log +connect</pre></div></div><div class=paragraph><p>This will make <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> log everything up until the last requested "expect" string.</p></div><div class=paragraph><p>To see the connect speed when using PAP or CHAP, make sure to configure <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> to expect the whole CONNECT line, using something like this:</p></div><div class="literalblock programlisting"><div class=content><pre>set dial &#34;ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \
  \&#34;\&#34; ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n&#34;</pre></div></div><div class=paragraph><p>This gets the CONNECT, sends nothing, then expects a line-feed, forcing <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> to read the whole CONNECT response.</p></div></div><div class=sect2><h3 id=_why_does_ppp8_ignore_the_character_in_my_chat_script>14.18. Why does ppp8 ignore the \ character in my chat script?<a class=anchor href=#_why_does_ppp8_ignore_the_character_in_my_chat_script></a></h3><div class=paragraph><p>The ppp utility parses each line in its configuration files so that it can interpret strings such as <code>set phone "123 456 789"</code> correctly and realize that the number is actually only one argument. To specify a <code>"</code> character, escape it using a backslash (<code>\</code>).</p></div><div class=paragraph><p>When the chat interpreter parses each argument, it re-interprets the argument to find any special escape sequences such as <code>\P</code> or <code>\T</code>. As a result of this double-parsing, remember to use the correct number of escapes.</p></div><div class=paragraph><p>To actually send a <code>\</code> character, do something like:</p></div><div class="literalblock programlisting"><div class=content><pre>set dial &#34;\&#34;\&#34; ATZ OK-ATZ-OK AT\\\\X OK&#34;</pre></div></div><div class=paragraph><p>It will result in the following sequence:</p></div><div class="literalblock programlisting"><div class=content><pre>ATZ
OK
AT\X
OK</pre></div></div><div class=paragraph><p>Or:</p></div><div class="literalblock programlisting"><div class=content><pre>set phone 1234567
set dial &#34;\&#34;\&#34; ATZ OK ATDT\\T&#34;</pre></div></div><div class=paragraph><p>It will result in the following sequence:</p></div><div class="literalblock programlisting"><div class=content><pre>ATZ
OK
ATDT1234567</pre></div></div></div><div class=sect2><h3 id=_what_are_fcs_errors>14.19. What are FCS errors?<a class=anchor href=#_what_are_fcs_errors></a></h3><div class=paragraph><p>FCS stands for Frame Check Sequence. Each PPP packet has a checksum attached to ensure that the data being received is the data being sent. If the FCS of an incoming packet is incorrect, the packet is dropped and the HDLC FCS count is increased. The HDLC error values can be displayed using the <code>show hdlc</code> command.</p></div><div class=paragraph><p>If the link is bad or if the serial driver is dropping packets, it will produce the occasional FCS error. This is not usually worth worrying about although it does slow down the compression protocols substantially.</p></div><div class=paragraph><p>If the link freezes as soon as it connects and produces a large number of FCS errors, make sure the modem is not using software flow control (XON/XOFF). If the link must use software flow control, use <code>set accmap 0x000a0000</code> to tell <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> to escape the <code>^Q</code> and <code>^S</code> characters.</p></div><div class=paragraph><p>Another reason for too many FCS errors may be that the remote end has stopped talking PPP. In this case, enable <code>async</code> logging to determine if the incoming data is actually a login or shell prompt. If it is a shell prompt at the remote end, it is possible to terminate <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> without dropping the line by using <code>close lcp</code> followed by <code>term</code>) to reconnect to the shell on the remote machine.</p></div><div class=paragraph><p>If nothing in the log file indicates why the link was terminated, ask the remote administrator or ISP why the session was terminated.</p></div></div><div class=sect2><h3 id=_none_of_this_helps_i_am_desperate_what_can_i_do>14.20. None of this helps — I am desperate! What can I do?<a class=anchor href=#_none_of_this_helps_i_am_desperate_what_can_i_do></a></h3><div class=paragraph><p>If all else fails, send the details of the error, the configuration files, how <a href="https://man.freebsd.org/cgi/man.cgi?query=ppp&amp;sektion=8&amp;format=html">ppp(8)</a> is being started, the relevant parts of the log file, and the output of <code>netstat -rn</code>, before and after connecting, to the <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions>FreeBSD general questions mailing list</a>.</p></div></div></div></div><div class=sect1><h2 id=_serial_communications>15. Serial Communications<a class=anchor href=#_serial_communications></a></h2><div class=sectionbody><div class=paragraph><p>This section answers common questions about serial communications with FreeBSD. PPP is covered in the <a href=#networking>Networking</a> section.</p></div><div class=sect2><h3 id=_which_multi_port_serial_cards_are_supported_by_freebsd>15.1. Which multi-port serial cards are supported by FreeBSD?<a class=anchor href=#_which_multi_port_serial_cards_are_supported_by_freebsd></a></h3><div class=paragraph><p>There is a list of these in the <a href=https://docs.freebsd.org/en/books/handbook/serialcomms#serial>Serial Communications</a> chapter of the Handbook.</p></div><div class=paragraph><p>Most multi-port PCI cards that are based on 16550 or clones are supported with no extra effort.</p></div><div class=paragraph><p>Some unnamed clone cards have also been known to work, especially those that claim to be AST compatible.</p></div><div class=paragraph><p>Check <a href="https://man.freebsd.org/cgi/man.cgi?query=uart&amp;sektion=4&amp;format=html">uart(4)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> to get more information on configuring such cards.</p></div></div><div class=sect2><h3 id=_how_do_i_get_the_boot_prompt_to_show_on_the_serial_console>15.2. How do I get the boot: prompt to show on the serial console?<a class=anchor href=#_how_do_i_get_the_boot_prompt_to_show_on_the_serial_console></a></h3><div class=paragraph><p>See <a href=https://docs.freebsd.org/en/books/handbook/serialcomms#serialconsole-setup>this section of the Handbook</a>.</p></div></div><div class=sect2><h3 id=_how_do_i_tell_if_freebsd_found_my_serial_ports_or_modem_cards>15.3. How do I tell if FreeBSD found my serial ports or modem cards?<a class=anchor href=#_how_do_i_tell_if_freebsd_found_my_serial_ports_or_modem_cards></a></h3><div class=paragraph><p>As the FreeBSD kernel boots, it will probe for the serial ports for which the kernel is configured. Either watch the boot messages closely or run this command after the system is up and running:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>grep</span> <span class=nt>-E</span> <span class=s1>&#39;^(sio|uart)[0-9]&#39;</span> &lt; /var/run/dmesg.boot
sio0: &lt;16550A-compatible COM port&gt; port 0x3f8-0x3ff irq 4 flags 0x10 on acpi0
sio0: <span class=nb>type </span>16550A
sio1: &lt;16550A-compatible COM port&gt; port 0x2f8-0x2ff irq 3 on acpi0
sio1: <span class=nb>type </span>16550A</code></pre></div></div><div class=paragraph><p>This example shows two serial ports. The first is on IRQ4, port address <code>0x3f8</code>, and has a 16550A-type UART chip. The second uses the same kind of chip but is on IRQ3 and is at port address <code>0x2f8</code>. Internal modem cards are treated just like serial ports, except that they always have a modem attached to the port.</p></div><div class=paragraph><p>The <span class=filename>GENERIC</span> kernel includes support for two serial ports using the same IRQ and port address settings in the above example. If these settings are not right for the system, or if there are more modem cards or serial ports than the kernel is configured for, reconfigure using the instructions in <a href=#make-kernel>building a kernel</a> for more details.</p></div></div><div class=sect2><h3 id=_how_do_i_access_the_serial_ports_on_freebsd>15.4. How do I access the serial ports on FreeBSD?<a class=anchor href=#_how_do_i_access_the_serial_ports_on_freebsd></a></h3><div class=paragraph><p>The third serial port, <span class=filename>sio2</span>, or <span class=filename>COM3</span>, is on <span class=filename>/dev/cuad2</span> for dial-out devices, and on <span class=filename>/dev/ttyd2</span> for dial-in devices. What is the difference between these two classes of devices?</p></div><div class=paragraph><p>When opening <span class=filename>/dev/ttydX</span> in blocking mode, a process will wait for the corresponding <span class=filename>cuadX</span> device to become inactive, and then wait for the carrier detect line to go active. When the <span class=filename>cuadX</span> device is opened, it makes sure the serial port is not already in use by the <span class=filename>ttydX</span> device. If the port is available, it steals it from the <span class=filename>ttydX</span> device. Also, the <span class=filename>cuadX</span> device does not care about carrier detect. With this scheme and an auto-answer modem, remote users can log in and local users can still dial out with the same modem and the system will take care of all the conflicts.</p></div></div><div class=sect2><h3 id=_how_do_i_enable_support_for_a_multi_port_serial_card>15.5. How do I enable support for a multi-port serial card?<a class=anchor href=#_how_do_i_enable_support_for_a_multi_port_serial_card></a></h3><div class=paragraph><p>The section on kernel configuration provides information about configuring the kernel. For a multi-port serial card, place an <a href="https://man.freebsd.org/cgi/man.cgi?query=sio&amp;sektion=4&amp;format=html">sio(4)</a> line for each serial port on the card in the <a href="https://man.freebsd.org/cgi/man.cgi?query=device.hints&amp;sektion=5&amp;format=html">device.hints(5)</a> file. But place the IRQ specifiers on only one of the entries. All of the ports on the card should share one IRQ. For consistency, use the last serial port to specify the IRQ. Also, specify the following option in the kernel configuration file:</p></div><div class="literalblock programlisting"><div class=content><pre>options COM_MULTIPORT</pre></div></div><div class=paragraph><p>The following <span class=filename>/boot/device.hints</span> example is for an AST 4-port serial card on IRQ 12:</p></div><div class="literalblock programlisting"><div class=content><pre>hint.sio.4.at=&#34;isa&#34;
hint.sio.4.port=&#34;0x2a0&#34;
hint.sio.4.flags=&#34;0x701&#34;
hint.sio.5.at=&#34;isa&#34;
hint.sio.5.port=&#34;0x2a8&#34;
hint.sio.5.flags=&#34;0x701&#34;
hint.sio.6.at=&#34;isa&#34;
hint.sio.6.port=&#34;0x2b0&#34;
hint.sio.6.flags=&#34;0x701&#34;
hint.sio.7.at=&#34;isa&#34;
hint.sio.7.port=&#34;0x2b8&#34;
hint.sio.7.flags=&#34;0x701&#34;
hint.sio.7.irq=&#34;12&#34;</pre></div></div><div class=paragraph><p>The flags indicate that the master port has minor number <code>7</code> (<code>0x700</code>), and all the ports share an IRQ (<code>0x001</code>).</p></div></div><div class=sect2><h3 id=_can_i_set_the_default_serial_parameters_for_a_port>15.6. Can I set the default serial parameters for a port?<a class=anchor href=#_can_i_set_the_default_serial_parameters_for_a_port></a></h3><div class=paragraph><p>See the <a href=https://docs.freebsd.org/en/books/handbook/serialcomms#serial-hw-config>Serial Communications</a> section in the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_how_can_i_enable_dialup_logins_on_my_modem>15.7. How can I enable dialup logins on my modem?<a class=anchor href=#_how_can_i_enable_dialup_logins_on_my_modem></a></h3><div class=paragraph><p>Refer to the section about <a href=https://docs.freebsd.org/en/books/handbook/serialcomms#dialup>Dial-in Services</a> in the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_how_can_i_connect_a_dumb_terminal_to_my_freebsd_box>15.8. How can I connect a dumb terminal to my FreeBSD box?<a class=anchor href=#_how_can_i_connect_a_dumb_terminal_to_my_freebsd_box></a></h3><div class=paragraph><p>This information is in the <a href=https://docs.freebsd.org/en/books/handbook/serialcomms#term>Terminals</a> section of the FreeBSD Handbook.</p></div></div><div class=sect2><h3 id=_why_can_i_not_run_tip_or_cu>15.9. Why can I not run tip or cu?<a class=anchor href=#_why_can_i_not_run_tip_or_cu></a></h3><div class=paragraph><p>The built-in <a href="https://man.freebsd.org/cgi/man.cgi?query=tip&amp;sektion=1&amp;format=html">tip(1)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=cu&amp;sektion=1&amp;format=html">cu(1)</a> utilities can only access the <span class=filename>/var/spool/lock</span> directory via user <code>uucp</code> and group <code>dialer</code>. Use the <code>dialer</code> group to control who has access to the modem or remote systems by adding user accounts to <code>dialer</code>.</p></div><div class=paragraph><p>Alternatively, everyone can be configured to run <a href="https://man.freebsd.org/cgi/man.cgi?query=tip&amp;sektion=1&amp;format=html">tip(1)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=cu&amp;sektion=1&amp;format=html">cu(1)</a> by typing:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># chmod 4511 /usr/bin/cu</span>
<span class=c># chmod 4511 /usr/bin/tip</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=_miscellaneous_questions>16. Miscellaneous Questions<a class=anchor href=#_miscellaneous_questions></a></h2><div class=sectionbody><div class=sect2><h3 id=_freebsd_uses_a_lot_of_swap_space_even_when_the_computer_has_free_memory_left_why>16.1. FreeBSD uses a lot of swap space even when the computer has free memory left. Why?<a class=anchor href=#_freebsd_uses_a_lot_of_swap_space_even_when_the_computer_has_free_memory_left_why></a></h3><div class=paragraph><p>FreeBSD will proactively move entirely idle, unused pages of main memory into swap in order to make more main memory available for active use. This heavy use of swap is balanced by using the extra free memory for caching.</p></div><div class=paragraph><p>Note that while FreeBSD is proactive in this regard, it does not arbitrarily decide to swap pages when the system is truly idle. Thus, the system will not be all paged out after leaving it idle overnight.</p></div></div><div class=sect2><h3 id=_why_does_top_show_very_little_free_memory_even_when_i_have_very_few_programs_running>16.2. Why does top show very little free memory even when I have very few programs running?<a class=anchor href=#_why_does_top_show_very_little_free_memory_even_when_i_have_very_few_programs_running></a></h3><div class=paragraph><p>The simple answer is that free memory is wasted memory. Any memory that programs do not actively allocate is used within the FreeBSD kernel as disk cache. The values shown by <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> labeled as <code>Inact</code> and <code>Laundry</code> are cached data at different aging levels. This cached data means the system does not have to access a slow disk again for data it has accessed recently, thus increasing overall performance. In general, a low value shown for <code>Free</code> memory in <a href="https://man.freebsd.org/cgi/man.cgi?query=top&amp;sektion=1&amp;format=html">top(1)</a> is good, provided it is not <em>very</em> low.</p></div></div><div class=sect2><h3 id=_why_will_chmod_not_change_the_permissions_on_symlinks>16.3. Why will chmod not change the permissions on symlinks?<a class=anchor href=#_why_will_chmod_not_change_the_permissions_on_symlinks></a></h3><div class=paragraph><p>Symlinks do not have permissions, and by default, <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> will follow symlinks to change the permissions on the source file, if possible. For the file, <span class=filename>foo</span> with a symlink named <span class=filename>bar</span>, this command will always succeed.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>chmod </span>g-w bar</code></pre></div></div><div class=paragraph><p>However, the permissions on <span class=filename>bar</span> will not have changed.</p></div><div class=paragraph><p>When changing modes of the file hierarchies rooted in the files instead of the files themselves, use either <code>-H</code> or <code>-L</code> together with <code>-R</code> to make this work. See <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=symlink&amp;sektion=7&amp;format=html">symlink(7)</a> for more information.</p></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content><div class=paragraph><p><code>-R</code> does a <em>recursive</em> <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a>. Be careful about specifying directories or symlinks to directories to <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a>. To change the permissions of a directory referenced by a symlink, use <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> without any options and follow the symlink with a trailing slash (<span class=filename>/</span>). For example, if <span class=filename>foo</span> is a symlink to directory <span class=filename>bar</span>, to change the permissions of <span class=filename>foo</span> (actually <span class=filename>bar</span>), do something like:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>chmod </span>555 foo/</code></pre></div></div><div class=paragraph><p>With the trailing slash, <a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> will follow the symlink, <span class=filename>foo</span>, to change the permissions of the directory, <span class=filename>bar</span>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_can_i_run_dos_binaries_under_freebsd>16.4. Can I run DOS binaries under FreeBSD?<a class=anchor href=#_can_i_run_dos_binaries_under_freebsd></a></h3><div class=paragraph><p>Yes. A DOS emulation program, <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/doscmd/>emulators/doscmd</a>, is available in the FreeBSD Ports Collection.</p></div><div class=paragraph><p>If doscmd will not suffice, <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/pcemu/>emulators/pcemu</a> emulates an 8088 and enough BIOS services to run many DOS text-mode applications. It requires the X Window System.</p></div><div class=paragraph><p>The Ports Collection also has <a class=package href=https://cgit.freebsd.org/ports/tree/emulators/dosbox/>emulators/dosbox</a>. The main focus of this application is emulating old DOS games using the local file system for files.</p></div></div><div class=sect2><h3 id=_what_do_i_need_to_do_to_translate_a_freebsd_document_into_my_native_language>16.5. What do I need to do to translate a FreeBSD document into my native language?<a class=anchor href=#_what_do_i_need_to_do_to_translate_a_freebsd_document_into_my_native_language></a></h3><div class=paragraph><p>See the <a href=https://docs.freebsd.org/zh-tw/books/fdp-primer/#translations>Translation FAQ</a> in the FreeBSD Documentation Project Primer.</p></div></div><div class=sect2><h3 id=_why_does_my_email_to_any_address_at_freebsd_org_bounce>16.6. Why does my email to any address at FreeBSD.org bounce?<a class=anchor href=#_why_does_my_email_to_any_address_at_freebsd_org_bounce></a></h3><div class=paragraph><p>The <code>FreeBSD.org</code> mail system implements some Postfix checks on incoming mail and rejects mail that is either from misconfigured relays or otherwise appears likely to be spam. Some of the specific requirements are:</p></div><div class=ulist><ul><li><p>The IP address of the SMTP client must "reverse-resolve" to a forward confirmed hostname.</p></li><li><p>The fully-qualified hostname given in the SMTP conversation (either HELO or EHLO) must resolve to the IP address of the client.</p></li></ul></div><div class=paragraph><p>Other advice to help mail reach its destination include:</p></div><div class=ulist><ul><li><p>Mail should be sent in plain text, and messages sent to mailing lists should generally be no more than 200KB in length.</p></li><li><p>Avoid excessive cross posting. Choose <em>one</em> mailing list which seems most relevant and send it there.</p></li></ul></div><div class=paragraph><p>If you still have trouble with email infrastructure at <code>FreeBSD.org</code>, send a note with the details to <a href=mailto:postmaster@freebsd.org>postmaster@freebsd.org</a>; Include a date/time interval so that logs may be reviewed — and note that we only keep one week’s worth of mail logs. (Be sure to specify the time zone or offset from UTC.)</p></div></div><div class=sect2><h3 id=_where_can_i_find_a_free_freebsd_account>16.7. Where can I find a free FreeBSD account?<a class=anchor href=#_where_can_i_find_a_free_freebsd_account></a></h3><div class=paragraph><p>While FreeBSD does not provide open access to any of their servers, others do provide open access UNIX™ systems. The charge varies and limited services may be available.</p></div><div class=paragraph><p><a href=http://www.arbornet.org/>Arbornet, Inc</a>, also known as <em>M-Net</em>, has been providing open access to UNIX™ systems since 1983. Starting on an Altos running System III, the site switched to BSD/OS in 1991. In June of 2000, the site switched again to FreeBSD. <em>M-Net</em> can be accessed via telnet and SSH and provides basic access to the entire FreeBSD software suite. However, network access is limited to members and patrons who donate to the system, which is run as a non-profit organization. <em>M-Net</em> also provides an bulletin board system and interactive chat.</p></div></div><div class=sect2><h3 id=_what_is_the_cute_little_red_guys_name>16.8. What is the cute little red guy’s name?<a class=anchor href=#_what_is_the_cute_little_red_guys_name></a></h3><div class=paragraph><p>He does not have one, and is just called "the BSD daemon". If you insist upon using a name, call him "beastie". Note that "beastie" is pronounced "BSD".</p></div><div class=paragraph><p>More about the BSD daemon is available on his <a href=http://www.mckusick.com/beastie/index.html>home page</a>.</p></div></div><div class=sect2><h3 id=_can_i_use_the_bsd_daemon_image>16.9. Can I use the BSD daemon image?<a class=anchor href=#_can_i_use_the_bsd_daemon_image></a></h3><div class=paragraph><p>Perhaps. The BSD daemon is copyrighted by Marshall Kirk McKusick. Check his <a href=http://www.mckusick.com/beastie/mainpage/copyright.html>Statement on the Use of the BSD Daemon Figure</a> for detailed usage terms.</p></div><div class=paragraph><p>In summary, the image can be used in a tasteful manner, for personal use, so long as appropriate credit is given. Before using the logo commercially, contact Kirk McKusick <a href=mailto:mckusick@FreeBSD.org>mckusick@FreeBSD.org</a> for permission. More details are available on the <a href=http://www.mckusick.com/beastie/index.html>BSD Daemon’s home page</a>.</p></div></div><div class=sect2><h3 id=_do_you_have_any_bsd_daemon_images_i_could_use>16.10. Do you have any BSD daemon images I could use?<a class=anchor href=#_do_you_have_any_bsd_daemon_images_i_could_use></a></h3><div class=paragraph><p>Xfig and eps drawings are available under <span class=filename>/usr/shared/examples/BSD_daemon/</span>.</p></div></div><div class=sect2><h3 id=_i_have_seen_an_acronym_or_other_term_on_the_mailing_lists_and_i_do_not_understand_what_it_means_where_should_i_look>16.11. I have seen an acronym or other term on the mailing lists and I do not understand what it means. Where should I look?<a class=anchor href=#_i_have_seen_an_acronym_or_other_term_on_the_mailing_lists_and_i_do_not_understand_what_it_means_where_should_i_look></a></h3><div class=paragraph><p>Refer to the <a href=https://docs.freebsd.org/en/books/handbook/glossary#freebsd-glossary>FreeBSD Glossary</a>.</p></div></div><div class=sect2><h3 id=_why_should_i_care_what_color_the_bikeshed_is>16.12. Why should I care what color the bikeshed is?<a class=anchor href=#_why_should_i_care_what_color_the_bikeshed_is></a></h3><div class=paragraph><p>The really, really short answer is that you should not. The somewhat longer answer is that just because you are capable of building a bikeshed does not mean you should stop others from building one just because you do not like the color they plan to paint it. This is a metaphor indicating that you need not argue about every little feature just because you know enough to do so. Some people have commented that the amount of noise generated by a change is inversely proportional to the complexity of the change.</p></div><div class=paragraph><p>The longer and more complete answer is that after a very long argument about whether <a href="https://man.freebsd.org/cgi/man.cgi?query=sleep&amp;sektion=1&amp;format=html">sleep(1)</a> should take fractional second arguments, Poul-Henning Kamp <a href=mailto:phk@FreeBSD.org>phk@FreeBSD.org</a> posted a long message entitled "<a href=http://www.bikeshed.com>A bike shed (any color will do) on greener grass…​</a>". The appropriate portions of that message are quoted below.</p></div><div class=paragraph><p>Poul-Henning Kamp <a href=mailto:phk@FreeBSD.org>phk@FreeBSD.org</a> on <a href=http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers>freebsd-hackers</a>, October 2, 1999
"What is it about this bike shed?" Some of you have asked me.</p></div><div class=paragraph><p>It is a long story, or rather it is an old story, but it is quite short actually. C. Northcote Parkinson wrote a book in the early 1960s, called "Parkinson’s Law", which contains a lot of insight into the dynamics of management.</p></div><div class=paragraph><p><em>[snip a bit of commentary on the book]</em></p></div><div class=paragraph><p>In the specific example involving the bike shed, the other vital component is an atomic power-plant, I guess that illustrates the age of the book.</p></div><div class=paragraph><p>Parkinson shows how you can go into the board of directors and get approval for building a multi-million or even billion dollar atomic power plant, but if you want to build a bike shed you will be tangled up in endless discussions.</p></div><div class=paragraph><p>Parkinson explains that this is because an atomic plant is so vast, so expensive and so complicated that people cannot grasp it, and rather than try, they fall back on the assumption that somebody else checked all the details before it got this far. Richard P. Feynmann gives a couple of interesting, and very much to the point, examples relating to Los Alamos in his books.</p></div><div class=paragraph><p>A bike shed on the other hand. Anyone can build one of those over a weekend, and still have time to watch the game on TV. So no matter how well prepared, no matter how reasonable you are with your proposal, somebody will seize the chance to show that he is doing his job, that he is paying attention, that he is <em>here</em>.</p></div><div class=paragraph><p>In Denmark we call it "setting your fingerprint". It is about personal pride and prestige, it is about being able to point somewhere and say "There! <em>I</em> did that." It is a strong trait in politicians, but present in most people given the chance. Just think about footsteps in wet cement.</p></div></div></div></div><div class=sect1><h2 id=_the_freebsd_funnies>17. The FreeBSD Funnies<a class=anchor href=#_the_freebsd_funnies></a></h2><div class=sectionbody><div class=sect2><h3 id=_how_cool_is_freebsd>17.1. How cool is FreeBSD?<a class=anchor href=#_how_cool_is_freebsd></a></h3><div class="qlist qanda"><ol><li><p><em>Has anyone done any temperature testing while running FreeBSD? I know Linux™ runs cooler than DOS, but have never seen a mention of FreeBSD. It seems to run really hot.</em></p><p>No, but we have done numerous taste tests on blindfolded volunteers who have also had 250 micrograms of LSD-25 administered beforehand. 35% of the volunteers said that FreeBSD tasted sort of orange, whereas Linux™ tasted like purple haze. Neither group mentioned any significant variances in temperature. We eventually had to throw the results of this survey out entirely anyway when we found that too many volunteers were wandering out of the room during the tests, thus skewing the results. We think most of the volunteers are at Apple now, working on their new "scratch and sniff" GUI. It is a funny old business we are in!</p></li></ol></div><div class=paragraph><p>Seriously, FreeBSD uses the HLT (halt) instruction when the system is idle thus lowering its energy consumption and therefore the heat it generates. Also if you have ACPI (Advanced Configuration and Power Interface) configured, then FreeBSD can also put the CPU into a low power mode.</p></div></div><div class=sect2><h3 id=_who_is_scratching_in_my_memory_banks>17.2. Who is scratching in my memory banks??<a class=anchor href=#_who_is_scratching_in_my_memory_banks></a></h3><div class="qlist qanda"><ol><li><p><em>Is there anything "odd" that FreeBSD does when compiling the kernel which would cause the memory to make a scratchy sound? When compiling (and for a brief moment after recognizing the floppy drive upon startup, as well), a strange scratchy sound emanates from what appears to be the memory banks.</em></p><p>Yes! You will see frequent references to "daemons" in the BSD documentation, and what most people do not know is that this refers to genuine, non-corporeal entities that now possess your computer. The scratchy sound coming from your memory is actually high-pitched whispering exchanged among the daemons as they best decide how to deal with various system administration tasks.</p></li></ol></div><div class=paragraph><p>If the noise gets to you, a good <code>fdisk /mbr</code> from DOS will get rid of them, but do not be surprised if they react adversely and try to stop you. In fact, if at any point during the exercise you hear the satanic voice of Bill Gates coming from the built-in speaker, take off running and do not ever look back! Freed from the counterbalancing influence of the BSD daemons, the twin demons of DOS and Windows™ are often able to re-assert total control over your machine to the eternal damnation of your soul. Now that you know, given a choice you would probably prefer to get used to the scratchy noises, no?</p></div></div><div class=sect2><h3 id=_how_many_freebsd_hackers_does_it_take_to_change_a_lightbulb>17.3. How many FreeBSD hackers does it take to change a lightbulb?<a class=anchor href=#_how_many_freebsd_hackers_does_it_take_to_change_a_lightbulb></a></h3><div class=paragraph><p>One thousand, one hundred and sixty-nine:</p></div><div class=paragraph><p>Twenty-three to complain to -CURRENT about the lights being out;</p></div><div class=paragraph><p>Four to claim that it is a configuration problem, and that such matters really belong on -questions;</p></div><div class=paragraph><p>Three to submit PRs about it, one of which is misfiled under doc and consists only of "it’s dark";</p></div><div class=paragraph><p>One to commit an untested lightbulb which breaks buildworld, then back it out five minutes later;</p></div><div class=paragraph><p>Eight to flame the PR originators for not including patches in their PRs;</p></div><div class=paragraph><p>Five to complain about buildworld being broken;</p></div><div class=paragraph><p>Thirty-one to answer that it works for them, and they must have updated at a bad time;</p></div><div class=paragraph><p>One to post a patch for a new lightbulb to -hackers;</p></div><div class=paragraph><p>One to complain that he had patches for this three years ago, but when he sent them to -CURRENT they were just ignored, and he has had bad experiences with the PR system; besides, the proposed new lightbulb is non-reflexive;</p></div><div class=paragraph><p>Thirty-seven to scream that lightbulbs do not belong in the base system, that committers have no right to do things like this without consulting the Community, and WHAT IS -CORE DOING ABOUT IT!?</p></div><div class=paragraph><p>Two hundred to complain about the color of the bicycle shed;</p></div><div class=paragraph><p>Three to point out that the patch breaks <a href="https://man.freebsd.org/cgi/man.cgi?query=style&amp;sektion=9&amp;format=html">style(9)</a>;</p></div><div class=paragraph><p>Seventeen to complain that the proposed new lightbulb is under GPL;</p></div><div class=paragraph><p>Five hundred and eighty-six to engage in a flame war about the comparative advantages of the GPL, the BSD license, the MIT license, the NPL, and the personal hygiene of unnamed FSF founders;</p></div><div class=paragraph><p>Seven to move various portions of the thread to -chat and -advocacy;</p></div><div class=paragraph><p>One to commit the suggested lightbulb, even though it shines dimmer than the old one;</p></div><div class=paragraph><p>Two to back it out with a furious flame of a commit message, arguing that FreeBSD is better off in the dark than with a dim lightbulb;</p></div><div class=paragraph><p>Forty-six to argue vociferously about the backing out of the dim lightbulb and demanding a statement from -core;</p></div><div class=paragraph><p>Eleven to request a smaller lightbulb so it will fit their Tamagotchi if we ever decide to port FreeBSD to that platform;</p></div><div class=paragraph><p>Seventy-three to complain about the SNR on -hackers and -chat and unsubscribe in protest;</p></div><div class=paragraph><p>Thirteen to post "unsubscribe", "How do I unsubscribe?", or "Please remove me from the list", followed by the usual footer;</p></div><div class=paragraph><p>One to commit a working lightbulb while everybody is too busy flaming everybody else to notice;</p></div><div class=paragraph><p>Thirty-one to point out that the new lightbulb would shine 0.364% brighter if compiled with TenDRA (although it will have to be reshaped into a cube), and that FreeBSD should therefore switch to TenDRA instead of GCC;</p></div><div class=paragraph><p>One to complain that the new lightbulb lacks fairings;</p></div><div class=paragraph><p>Nine (including the PR originators) to ask "what is MFC?";</p></div><div class=paragraph><p>Fifty-seven to complain about the lights being out two weeks after the bulb has been changed.</p></div><div class=paragraph><p><em>Nik Clayton</em> <a href=mailto:nik@FreeBSD.org>nik@FreeBSD.org</a> adds:</p></div><div class=paragraph><p><em>I was laughing quite hard at this.</em></p></div><div class=paragraph><p><em>And then I thought, "Hang on, shouldn’t there be '1 to document it.' in that list somewhere?"</em></p></div><div class=paragraph><p><em>And then I was enlightened :-)</em></p></div><div class=paragraph><p><em>Thomas Abthorpe</em> <a href=mailto:tabthorpe@FreeBSD.org>tabthorpe@FreeBSD.org</a> says: "None, <em>real</em> FreeBSD hackers are not afraid of the dark!"</p></div></div><div class=sect2><h3 id=_where_does_data_written_to_devnull_go>17.4. Where does data written to /dev/null go?<a class=anchor href=#_where_does_data_written_to_devnull_go></a></h3><div class=paragraph><p>It goes into a special data sink in the CPU where it is converted to heat which is vented through the heatsink / fan assembly. This is why CPU cooling is increasingly important; as people get used to faster processors, they become careless with their data and more and more of it ends up in <span class=filename>/dev/null</span>, overheating their CPUs. If you delete <span class=filename>/dev/null</span> (which effectively disables the CPU data sink) your CPU may run cooler but your system will quickly become constipated with all that excess data and start to behave erratically. If you have a fast network connection you can cool down your CPU by reading data out of <span class=filename>/dev/random</span> and sending it off somewhere; however you run the risk of overheating your network connection and <span class=filename>/</span> or angering your ISP, as most of the data will end up getting converted to heat by their equipment, but they generally have good cooling, so if you do not overdo it you should be OK.</p></div><div class=paragraph><p><em>Paul Robinson adds:</em></p></div><div class=paragraph><p>There are other methods. As every good sysadmin knows, it is part of standard practice to send data to the screen of interesting variety to keep all the pixies that make up your picture happy. Screen pixies (commonly mis-typed or re-named as "pixels") are categorized by the type of hat they wear (red, green or blue) and will hide or appear (thereby showing the color of their hat) whenever they receive a little piece of food. Video cards turn data into pixie-food, and then send them to the pixies — the more expensive the card, the better the food, so the better behaved the pixies are. They also need constant stimulation — this is why screen savers exist.</p></div><div class=paragraph><p>To take your suggestions further, you could just throw the random data to console, thereby letting the pixies consume it. This causes no heat to be produced at all, keeps the pixies happy and gets rid of your data quite quickly, even if it does make things look a bit messy on your screen.</p></div><div class=paragraph><p>Incidentally, as an ex-admin of a large ISP who experienced many problems attempting to maintain a stable temperature in a server room, I would strongly discourage people sending the data they do not want out to the network. The fairies who do the packet switching and routing get annoyed by it as well.</p></div></div><div class=sect2><h3 id=_my_colleague_sits_at_the_computer_too_much_how_can_i_prank_her>17.5. My colleague sits at the computer too much, how can I prank her?<a class=anchor href=#_my_colleague_sits_at_the_computer_too_much_how_can_i_prank_her></a></h3><div class=paragraph><p>Install <a class=package href=https://cgit.freebsd.org/ports/tree/games/sl/>games/sl</a> and wait for her to mistype <code>sl</code> for <code>ls</code>.</p></div></div></div></div><div class=sect1><h2 id=_advanced_topics>18. Advanced Topics<a class=anchor href=#_advanced_topics></a></h2><div class=sectionbody><div class=sect2><h3 id=_how_can_i_learn_more_about_freebsds_internals>18.1. How can I learn more about FreeBSD’s internals?<a class=anchor href=#_how_can_i_learn_more_about_freebsds_internals></a></h3><div class=paragraph><p>See the <a href=https://docs.freebsd.org/zh-tw/books/arch-handbook/>FreeBSD Architecture Handbook</a>.</p></div><div class=paragraph><p>Additionally, much general UNIX™ knowledge is directly applicable to FreeBSD.</p></div></div><div class=sect2><h3 id=_how_can_i_contribute_to_freebsd_what_can_i_do_to_help>18.2. How can I contribute to FreeBSD? What can I do to help?<a class=anchor href=#_how_can_i_contribute_to_freebsd_what_can_i_do_to_help></a></h3><div class=paragraph><p>We accept all types of contributions: documentation, code, and even art. See the article on <a href=https://docs.freebsd.org/zh-tw/articles/contributing/>Contributing to FreeBSD</a> for specific advice on how to do this.</p></div><div class=paragraph><p>And thanks for the thought!</p></div></div><div class=sect2><h3 id=_what_are_snapshots_and_releases>18.3. What are snapshots and releases?<a class=anchor href=#_what_are_snapshots_and_releases></a></h3><div class=paragraph><p>There are currently 2 active/semi-active branches in the FreeBSD <a href=http://svnweb.FreeBSD.org/base/>Subversion Repository</a>. (Earlier branches are only changed very rarely, which is why there are only 2 active branches of development):</p></div><div class=ulist><ul><li><p>stable/11/ AKA <em>11-STABLE</em></p></li><li><p>stable/12/ AKA <em>12-STABLE</em></p></li><li><p>head/ AKA <em>-CURRENT</em> AKA <em>12-CURRENT</em></p></li></ul></div><div class=paragraph><p><code>HEAD</code> is not an actual branch tag. It is a symbolic constant for the current, non-branched development stream known as <em>-CURRENT</em>.</p></div><div class=paragraph><p>Right now, <em>-CURRENT</em> is the 13.<em>X</em> development stream; the <em>12-STABLE</em> branch, stable/12/, forked off from <em>-CURRENT</em> in December 2018 and the <em>11-STABLE</em> branch, stable/11/, forked off from <em>-CURRENT</em> in October 2016.</p></div></div><div class=sect2><h3 id=_how_can_i_make_the_most_of_the_data_i_see_when_my_kernel_panics>18.4. How can I make the most of the data I see when my kernel panics?<a class=anchor href=#_how_can_i_make_the_most_of_the_data_i_see_when_my_kernel_panics></a></h3><div class=paragraph><p>Here is typical kernel panic:</p></div><div class="literalblock programlisting"><div class=content><pre>Fatal trap 12: page fault while in kernel mode
fault virtual address   = 0x40
fault code              = supervisor read, page not present
instruction pointer     = 0x8:0xf014a7e5
stack pointer           = 0x10:0xf4ed6f24
frame pointer           = 0x10:0xf4ed6f28
code segment            = base 0x0, limit 0xfffff, type 0x1b
                        = DPL 0, pres 1, def32 1, gran 1
processor eflags        = interrupt enabled, resume, IOPL = 0
current process         = 80 (mount)
interrupt mask          =
trap number             = 12
panic: page fault</pre></div></div><div class=paragraph><p>This message is not enough. While the instruction pointer value is important, it is also configuration dependent as it varies depending on the kernel image. If it is a <span class=filename>GENERIC</span> kernel image from one of the snapshots, it is possible for somebody else to track down the offending function, but for a custom kernel, only you can tell us where the fault occurred.</p></div><div class=paragraph><p>To proceed:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Write down the instruction pointer value. Note that the <code>0x8:</code> part at the beginning is not significant in this case: it is the <code>0xf0xxxxxx</code> part that we want.</p></li><li><p>When the system reboots, do the following:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% nm <span class=nt>-n</span> kernel.that.caused.the.panic | <span class=nb>grep </span>f0xxxxxx</code></pre></div></div><div class=paragraph><p>where <code>f0xxxxxx</code> is the instruction pointer value. The odds are you will not get an exact match since the symbols in the kernel symbol table are for the entry points of functions and the instruction pointer address will be somewhere inside a function, not at the start. If you do not get an exact match, omit the last digit from the instruction pointer value and try again:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% nm <span class=nt>-n</span> kernel.that.caused.the.panic | <span class=nb>grep </span>f0xxxxx</code></pre></div></div><div class=paragraph><p>If that does not yield any results, chop off another digit. Repeat until there is some sort of output. The result will be a possible list of functions which caused the panic. This is a less than exact mechanism for tracking down the point of failure, but it is better than nothing.</p></div></li></ol></div></div></div><div class=paragraph><p>However, the best way to track down the cause of a panic is by capturing a crash dump, then using <a href="https://man.freebsd.org/cgi/man.cgi?query=kgdb&amp;sektion=1&amp;format=html">kgdb(1)</a> to generate a stack trace on the crash dump.</p></div><div class=paragraph><p>In any case, the method is this:</p></div><div class="exampleblock procedure"><div class=content><div class="olist arabic"><ol class=arabic><li><p>Make sure that the following line is included in the kernel configuration file:</p><div class="literalblock programlisting"><div class=content><pre>makeoptions     DEBUG=-g          # Build kernel with gdb(1) debug symbols</pre></div></div></li><li><p>Change to the <span class=filename>/usr/src</span> directory:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># cd /usr/src</span></code></pre></div></div></li><li><p>Compile the kernel:</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make buildkernel KERNCONF=MYKERNEL</span></code></pre></div></div></li><li><p>Wait for <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> to finish compiling.</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># make installkernel KERNCONF=MYKERNEL</span></code></pre></div></div></li><li><p>Reboot.</p></li></ol></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If <code>KERNCONF</code> is not included, the <span class=filename>GENERIC</span> kernel will instead be built and installed.</p></div></td></tr></tbody></table></div><div class=paragraph><p>The <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> process will have built two kernels. <span class=filename>/usr/obj/usr/src/sys/MYKERNEL/kernel</span> and <span class=filename>/usr/obj/usr/src/sys/MYKERNEL/kernel.debug</span>. <span class=filename>kernel</span> was installed as <span class=filename>/boot/kernel/kernel</span>, while <span class=filename>kernel.debug</span> can be used as the source of debugging symbols for <a href="https://man.freebsd.org/cgi/man.cgi?query=kgdb&amp;sektion=1&amp;format=html">kgdb(1)</a>.</p></div><div class=paragraph><p>To capture a crash dump, edit <span class=filename>/etc/rc.conf</span> and set <code>dumpdev</code> to point to either the swap partition or <code>AUTO</code>. This will cause the <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> scripts to use the <a href="https://man.freebsd.org/cgi/man.cgi?query=dumpon&amp;sektion=8&amp;format=html">dumpon(8)</a> command to enable crash dumps. This command can also be run manually. After a panic, the crash dump can be recovered using <a href="https://man.freebsd.org/cgi/man.cgi?query=savecore&amp;sektion=8&amp;format=html">savecore(8)</a>; if <code>dumpdev</code> is set in <span class=filename>/etc/rc.conf</span>, the <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> scripts will run <a href="https://man.freebsd.org/cgi/man.cgi?query=savecore&amp;sektion=8&amp;format=html">savecore(8)</a> automatically and put the crash dump in <span class=filename>/var/crash</span>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>FreeBSD crash dumps are usually the same size as physical RAM. Therefore, make sure there is enough space in <span class=filename>/var/crash</span> to hold the dump. Alternatively, run <a href="https://man.freebsd.org/cgi/man.cgi?query=savecore&amp;sektion=8&amp;format=html">savecore(8)</a> manually and have it recover the crash dump to another directory with more room. It is possible to limit the size of the crash dump by using <code>options MAXMEM=N</code> where <em>N</em> is the size of kernel’s memory usage in KBs. For example, for 1 GB of RAM, limit the kernel’s memory usage to 128 MB, so that the crash dump size will be 128 MB instead of 1 GB.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Once the crash dump has been recovered , get a stack trace as follows:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% kgdb /usr/obj/usr/src/sys/MYKERNEL/kernel.debug /var/crash/vmcore.0
<span class=o>(</span>kgdb<span class=o>)</span> backtrace</code></pre></div></div><div class=paragraph><p>Note that there may be several screens worth of information. Ideally, use <a href="https://man.freebsd.org/cgi/man.cgi?query=script&amp;sektion=1&amp;format=html">script(1)</a> to capture all of them. Using the unstripped kernel image with all the debug symbols should show the exact line of kernel source code where the panic occurred. The stack trace is usually read from the bottom up to trace the exact sequence of events that lead to the crash. <a href="https://man.freebsd.org/cgi/man.cgi?query=kgdb&amp;sektion=1&amp;format=html">kgdb(1)</a> can also be used to print out the contents of various variables or structures to examine the system state at the time of the crash.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>If a second computer is available, <a href="https://man.freebsd.org/cgi/man.cgi?query=kgdb&amp;sektion=1&amp;format=html">kgdb(1)</a> can be configured to do remote debugging, including setting breakpoints and single-stepping through the kernel code.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If <code>DDB</code> is enabled and the kernel drops into the debugger, a panic and a crash dump can be forced by typing <code>panic</code> at the <code>ddb</code> prompt. It may stop in the debugger again during the panic phase. If it does, type <code>continue</code> and it will finish the crash dump.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=_why_has_dlsym_stopped_working_for_elf_executables>18.5. Why has dlsym() stopped working for ELF executables?<a class=anchor href=#_why_has_dlsym_stopped_working_for_elf_executables></a></h3><div class=paragraph><p>The ELF toolchain does not, by default, make the symbols defined in an executable visible to the dynamic linker. Consequently <code>dlsym()</code> searches on handles obtained from calls to <code>dlopen(NULL, flags)</code> will fail to find such symbols.</p></div><div class=paragraph><p>To search, using <code>dlsym()</code>, for symbols present in the main executable of a process, link the executable using the <code>--export-dynamic</code> option to the ELF linker (<a href="https://man.freebsd.org/cgi/man.cgi?query=ld&amp;sektion=1&amp;format=html">ld(1)</a>).</p></div></div><div class=sect2><h3 id=_how_can_i_increase_or_reduce_the_kernel_address_space_on_i386>18.6. How can I increase or reduce the kernel address space on i386?<a class=anchor href=#_how_can_i_increase_or_reduce_the_kernel_address_space_on_i386></a></h3><div class=paragraph><p>By default, the kernel address space is 1 GB (2 GB for PAE) for i386. When running a network-intensive server or using ZFS, this will probably not be enough.</p></div><div class=paragraph><p>Add the following line to the kernel configuration file to increase available space and rebuild the kernel:</p></div><div class="literalblock programlisting"><div class=content><pre>options KVA_PAGES=N</pre></div></div><div class=paragraph><p>To find the correct value of <em>N</em>, divide the desired address space size (in megabytes) by four. (For example, it is <code>512</code> for 2 GB.)</p></div></div></div></div><div class=sect1><h2 id=_acknowledgments>19. Acknowledgments<a class=anchor href=#_acknowledgments></a></h2><div class=sectionbody><div class=paragraph><p>This innocent little Frequently Asked Questions document has been written, rewritten, edited, folded, spindled, mutilated, eviscerated, contemplated, discombobulated, cogitated, regurgitated, rebuilt, castigated, and reinvigorated over the last decade, by a cast of hundreds if not thousands. Repeatedly.</p></div><div class=paragraph><p>We wish to thank every one of the people responsible, and we encourage you to <a href=https://docs.freebsd.org/zh-tw/articles/contributing/>join them</a> in making this FAQ even better.</p></div></div></div></div><hr><div class=last-modified><p><strong>最後修改於</strong>: September 6, 2024 由 <a href="https://cgit.freebsd.org/doc/commit/?id=8aa12657e0" target=_blank>Ruey-Cherng Yu</a></p></div><div class=buttons><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#_前言>1. 前言</a></li><li><a href=#_文件與技術支援>2. 文件與技術支援</a></li><li><a href=#_安裝>3. 安裝</a></li><li><a href=#hardware>4. 硬體相容性</a></li><li><a href=#_troubleshooting>5. Troubleshooting</a></li><li><a href=#_user_applications>6. User Applications</a></li><li><a href=#_kernel_configuration>7. Kernel Configuration</a></li><li><a href=#_disks_file_systems_and_boot_loaders>8. Disks, File Systems, and Boot Loaders</a></li><li><a href=#_zfs>9. ZFS</a></li><li><a href=#_system_administration>10. System Administration</a></li><li><a href=#_the_x_window_system_and_virtual_consoles>11. The X Window System and Virtual Consoles</a></li><li><a href=#_networking>12. Networking</a></li><li><a href=#_security>13. Security</a></li><li><a href=#_ppp>14. PPP</a></li><li><a href=#_serial_communications>15. Serial Communications</a></li><li><a href=#_miscellaneous_questions>16. Miscellaneous Questions</a></li><li><a href=#_the_freebsd_funnies>17. The FreeBSD Funnies</a></li><li><a href=#_advanced_topics>18. Advanced Topics</a></li><li><a href=#_acknowledgments>19. Acknowledgments</a></li></ul></nav><hr><div class=resources><h3>資源</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="下載 PDF"></i><a href=https://download.freebsd.org/doc/zh-tw/books/faq/faq_zh-tw.pdf>下載 PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title=編輯此頁></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/zh-tw/_index target=_blank>編輯此頁</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/zh-tw/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt=選擇語言>
<span>繁體中文</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>淺色</option><option value=theme-dark>深色</option><option value=theme-high-contrast>高對比</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/zh-tw class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/zh-tw/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>