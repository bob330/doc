<!doctype html><html class=theme-light lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Special considerations when creating a new FreeBSD Port"><meta name=keywords content="special considerations,Handling Symbolic Links,Bundled Libraries"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/><title>Chapter 6. Special Considerations | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=https://docs.freebsd.org/favicon.ico><link rel=stylesheet href=https://docs.freebsd.org/styles/main.min.css><link rel=stylesheet href=https://docs.freebsd.org/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapter 6. Special Considerations"><meta property="og:description" content="Special considerations when creating a new FreeBSD Port"><meta property="og:type" content="website"><meta property="og:image" content="https://docs.freebsd.org/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="zh-tw"><meta property="og:url" content="https://docs.freebsd.org/zh-tw/books/porters-handbook/special/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"https:\/\/docs.freebsd.org\/zh-tw\/books\/porters-handbook\/special\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=https://docs.freebsd.org/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/zh-tw>Documentation portal</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/handbook>FreeBSD Handbook</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=https://docs.freebsd.org/zh-tw/books>Books</a></li><li><a href=https://docs.freebsd.org/zh-tw/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=https://docs.freebsd.org/zh-tw/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=zh-tw>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-c934186a5adac4f64b993f751abed30c class=toggle>
<label for=chapter-c934186a5adac4f64b993f751abed30c><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-why/>章 1. 楔子</a></li><li><input type=checkbox id=chapter-2798d78fe854f2709bab5ca473b97050 class=toggle>
<label for=chapter-2798d78fe854f2709bab5ca473b97050><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/new-port/>章 2. 製作新的 Port</a></li><li><input type=checkbox id=chapter-c0d52b9121b517084e01f59cefa725e1 class=toggle>
<label class="icon cursor" for=chapter-c0d52b9121b517084e01f59cefa725e1><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/quick-porting/>章 3. 打造 Port 快速上手篇</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/quick-porting/#porting-makefile>3.1. 編寫 <span class=filename>Makefile</span></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/quick-porting/#porting-desc>3.2. 撰寫說明檔</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/quick-porting/#porting-checksum>3.3. 產生 checksum 檔</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/quick-porting/#porting-testing>3.4. 測試 Port</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/quick-porting/#porting-portlint>3.5. 以 <code>portlint</code> 來作檢查 Port</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/quick-porting/#porting-submitting>3.6. 提交新的 Port</a></li></ul></li><li><input type=checkbox id=chapter-3694de03923da61ba10a0a25efca6ef0 class=toggle>
<label class="icon cursor" for=chapter-3694de03923da61ba10a0a25efca6ef0><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/slow-porting/>章 4. Slow Porting</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/slow-porting/#slow-work>4.1. How Things Work</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/slow-porting/#slow-sources>4.2. 取得原始碼</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/slow-porting/#slow-modifying>4.3. Modifying the Port</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/slow-porting/#slow-patch>4.4. Patching</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/slow-porting/#slow-configure>4.5. 設定</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/slow-porting/#slow-user-input>4.6. 處理使用者輸入</a></li></ul></li><li><input type=checkbox id=chapter-165f6a6dba6651f8c25fc63ab83d6538 class=toggle>
<label class="icon cursor" for=chapter-165f6a6dba6651f8c25fc63ab83d6538><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/>Chapter 5. Configuring the Makefile</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-source>5.1. The Original Source</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-naming>5.2. Naming</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-categories>5.3. Categorization</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-distfiles>5.4. The Distribution Files</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-maintainer>5.5. <code>MAINTAINER</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-comment>5.6. <code>COMMENT</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#licenses>5.7. Licenses</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-portscout>5.8. <code>PORTSCOUT</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-depend>5.9. Dependencies</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-masterdir>5.10. Slave Ports and <code>MASTERDIR</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-manpages>5.11. Man Pages</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-info>5.12. Info Files</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-options>5.13. Makefile Options</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#makefile-wrkdir>5.14. Specifying the Working Directory</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#conflicts>5.15. Conflict Handling</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#install>5.16. Installing Files</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles/#binary-alias>5.17. Use <code>BINARY_ALIAS</code> to Rename Commands Instead of Patching the Build</a></li></ul></li><li><input type=checkbox id=chapter-19e3150e00beb84341d8ac1a73936ef0 class=toggle checked>
<label class="icon cursor" for=chapter-19e3150e00beb84341d8ac1a73936ef0><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/>Chapter 6. Special Considerations</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#staging>6.1. Staging</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#bundled-libs>6.2. Bundled Libraries</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#porting-shlibs>6.3. Shared Libraries</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#porting-restrictions>6.4. Ports with Distribution Restrictions or Legal Concerns</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#building>6.5. Building Mechanisms</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-autotools>6.6. Using GNU Autotools</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-gettext>6.7. Using GNU <code>gettext</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-perl>6.8. Using Perl</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-x11>6.9. Using X11</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-gnome>6.10. Using GNOME</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#gnome-components>6.11. GNOME Components</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-qt>6.12. Using Qt</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-kde>6.13. Using KDE</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-lxqt>6.14. Using LXQt</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-java>6.15. Using Java</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-php>6.16. Web Applications, Apache and PHP</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-python>6.17. Using Python</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-tcl>6.18. Using Tcl/Tk</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-ruby>6.19. Using Ruby</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-sdl>6.20. Using SDL</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-wx>6.21. Using wxWidgets</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-lua>6.22. Using Lua</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-iconv>6.23. Using <code>iconv</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-xfce>6.24. Using Xfce</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#using-databases>6.25. Using Databases</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#rc-scripts>6.26. Starting and Stopping Services (<code>rc</code> Scripts)</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#users-and-groups>6.27. Adding Users and Groups</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#requiring-kernel-sources>6.28. Ports That Rely on Kernel Sources</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#go-libs>6.29. Go Libraries</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#haskell-libs>6.30. Haskell Libraries</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/special/#shell-completion>6.31. Shell Completion Files</a></li></ul></li><li><input type=checkbox id=chapter-2a77b1fa0736427c336503055c700137 class=toggle>
<label class="icon cursor" for=chapter-2a77b1fa0736427c336503055c700137><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/flavors/>Chapter 7. Flavors</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/flavors/#flavors-intro>7.1. An Introduction to Flavors</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/flavors/#flavors-using>7.2. Using FLAVORS</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/flavors/#flavors-auto-php>7.3. <code>USES=php</code> and Flavors</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/flavors/#flavors-auto-python>7.4. <code>USES=python</code> and Flavors</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/flavors/#flavors-auto-lua>7.5. <code>USES=lua</code> and Flavors</a></li></ul></li><li><input type=checkbox id=chapter-154554011c772e1e6cc0108eef5e0b2b class=toggle>
<label class="icon cursor" for=chapter-154554011c772e1e6cc0108eef5e0b2b><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/plist/>Chapter 8. Advanced pkg-plist Practices</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/plist/#plist-sub>8.1. Changing pkg-plist Based on Make Variables</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/plist/#plist-cleaning>8.2. Empty Directories</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/plist/#plist-config>8.3. Configuration Files</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/plist/#plist-dynamic>8.4. Dynamic Versus Static Package List</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/plist/#plist-autoplist>8.5. Automated Package List Creation</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/plist/#plist-keywords>8.6. Expanding Package List with Keywords</a></li></ul></li><li><input type=checkbox id=chapter-5955b0791ccd51005b5bc5bebeec91e5 class=toggle>
<label class="icon cursor" for=chapter-5955b0791ccd51005b5bc5bebeec91e5><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/pkg-files/>Chapter 9. pkg-*</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/pkg-files/#porting-message>9.1. pkg-message</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/pkg-files/#pkg-install>9.2. pkg-install</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/pkg-files/#pkg-deinstall>9.3. pkg-deinstall</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/pkg-files/#pkg-names>9.4. Changing the Names of pkg-*</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/pkg-files/#using-sub-files>9.5. Making Use of <code>SUB_FILES</code> and <code>SUB_LIST</code></a></li></ul></li><li><input type=checkbox id=chapter-ee86a11caedb6395ed82b94ec7a9c6cd class=toggle>
<label class="icon cursor" for=chapter-ee86a11caedb6395ed82b94ec7a9c6cd><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/testing/>Chapter 10. Testing the Port</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/testing/#make-describe>10.1. Running <code>make describe</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/testing/#testing-portclippy>10.2. Portclippy / Portfmt</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/testing/#testing-portlint>10.3. Portlint</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/testing/#testing-porttools>10.4. Port Tools</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/testing/#porting-prefix>10.5. <code>PREFIX</code> and <code>DESTDIR</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/testing/#testing-poudriere>10.6. Poudriere</a></li></ul></li><li><input type=checkbox id=chapter-4ccaefe2590c044ca2b79c46e79fe17f class=toggle>
<label class="icon cursor" for=chapter-4ccaefe2590c044ca2b79c46e79fe17f><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/upgrading/>Chapter 11. Upgrading a Port</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/upgrading/#git-diff>11.1. Using Git to Make Patches</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/upgrading/#moved-and-updating-files>11.2. UPDATING and MOVED</a></li></ul></li><li><input type=checkbox id=chapter-1023911bc0041506653280b832dea3b2 class=toggle>
<label class="icon cursor" for=chapter-1023911bc0041506653280b832dea3b2><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/security/>Chapter 12. Security</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/security/#security-intro>12.1. Why Security is So Important</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/security/#security-fix>12.2. Fixing Security Vulnerabilities</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/security/#security-notify>12.3. Keeping the Community Informed</a></li></ul></li><li><input type=checkbox id=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7 class=toggle>
<label class="icon cursor" for=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/>Chapter 13. Dos and Don'ts</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-intro>13.1. Introduction</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#porting-wrkdir>13.2. <code>WRKDIR</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#porting-wrkdirprefix>13.3. <code>WRKDIRPREFIX</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#porting-versions>13.4. Differentiating Operating Systems and OS Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-after-port-mk>13.5. Writing Something After bsd.port.mk</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-sh-exec>13.6. Use the <code>exec</code> Statement in Wrapper Scripts</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-rational>13.7. Do Things Rationally</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-cc>13.8. Respect Both <code>CC</code> and <code>CXX</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-cflags>13.9. Respect <code>CFLAGS</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-verbose-logs>13.10. Verbose Build Logs</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-feedback>13.11. Feedback</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-readme>13.12. README.html</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-noinstall>13.13. Marking a Port Not Installable with <code>BROKEN</code>, <code>FORBIDDEN</code>, or <code>IGNORE</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-arch>13.14. Architectural Considerations</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-deprecated>13.15. Marking a Port for Removal with <code>DEPRECATED</code> or <code>EXPIRATION_DATE</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-dot-error>13.16. Avoid Use of the <code>.error</code> Construct</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-sysctl>13.17. Usage of sysctl</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-rerolling-distfiles>13.18. Rerolling Distfiles</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-use-posix-standards>13.19. Use POSIX Standards</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-dads/#dads-misc>13.20. Miscellanea</a></li></ul></li><li><input type=checkbox id=chapter-5ef4c4c471a3f55c74fb71881f9d8713 class=toggle>
<label for=chapter-5ef4c4c471a3f55c74fb71881f9d8713><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/porting-samplem/>Chapter 14. A Sample Makefile</a></li><li><input type=checkbox id=chapter-15c16456ccd7b4dc2a25fa8defa336a1 class=toggle>
<label class="icon cursor" for=chapter-15c16456ccd7b4dc2a25fa8defa336a1><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/>Chapter 15. Order of Variables in Port Makefiles</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-portname>15.1. <code>PORTNAME</code> Block</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-patch>15.2. <code>PATCHFILES</code> Block</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-maintainer>15.3. <code>MAINTAINER</code> Block</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-license>15.4. <code>LICENSE</code> Block</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-broken>15.5. Generic <code>BROKEN</code>/<code>IGNORE</code>/<code>DEPRECATED</code> Messages</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-depends>15.6. The Dependencies Block</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-flavors>15.7. Flavors</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-uses>15.8. <code>USES</code> and <code>USE_x</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-variables>15.9. Standard bsd.port.mk Variables</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-options>15.10. Options and Helpers</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-rest>15.11. The Rest of the Variables</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/order/#porting-order-targets>15.12. The Targets</a></li></ul></li><li><input type=checkbox id=chapter-70f5a4755700a24529175d26e65871bf class=toggle>
<label class="icon cursor" for=chapter-70f5a4755700a24529175d26e65871bf><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/keeping-up/>Chapter 16. Keeping Up</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/keeping-up/#freshports>16.1. FreshPorts</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/keeping-up/#cgit>16.2. The Web Interface to the Source Repository</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/keeping-up/#ports-mailing-list>16.3. The FreeBSD Ports Mailing List</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/keeping-up/#build-cluster>16.4. The FreeBSD Port Building Cluster</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/keeping-up/#distfile-survey>16.5. Portscout: the FreeBSD Ports Distfile Scanner</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/keeping-up/#portsmon>16.6. The FreeBSD Ports Monitoring System</a></li></ul></li><li><input type=checkbox id=chapter-8225273087f0e195be28132f4b5a0562 class=toggle>
<label class="icon cursor" for=chapter-8225273087f0e195be28132f4b5a0562><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/>Chapter 17. Using USES Macros</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-intro>17.1. An Introduction to <code>USES</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-7z>17.2. <code>7z</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-ada>17.3. <code>ada</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-autoreconf>17.4. <code>autoreconf</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-blaslapack>17.5. <code>blaslapack</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-bdb>17.6. <code>bdb</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-bison>17.7. <code>bison</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-cabal>17.8. <code>cabal</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-cargo>17.9. <code>cargo</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-charsetfix>17.10. <code>charsetfix</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-cmake>17.11. <code>cmake</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-compiler>17.12. <code>compiler</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-cpe>17.13. <code>cpe</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-cran>17.14. <code>cran</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-desktop-file-utils>17.15. <code>desktop-file-utils</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-desthack>17.16. <code>desthack</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-display>17.17. <code>display</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-dos2unix>17.18. <code>dos2unix</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-drupal>17.19. <code>drupal</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-eigen>17.20. <code>eigen</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-fakeroot>17.21. <code>fakeroot</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-fam>17.22. <code>fam</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-firebird>17.23. <code>firebird</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-fonts>17.24. <code>fonts</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-fortran>17.25. <code>fortran</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-fuse>17.26. <code>fuse</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gem>17.27. <code>gem</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gettext>17.28. <code>gettext</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gettext-runtime>17.29. <code>gettext-runtime</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gettext-tools>17.30. <code>gettext-tools</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-ghostscript>17.31. <code>ghostscript</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gl>17.32. <code>gl</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gmake>17.33. <code>gmake</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gnome>17.34. <code>gnome</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-go>17.35. <code>go</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gperf>17.36. <code>gperf</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-grantlee>17.37. <code>grantlee</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-groff>17.38. <code>groff</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-gssapi>17.39. <code>gssapi</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-horde>17.40. <code>horde</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-iconv>17.41. <code>iconv</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-imake>17.42. <code>imake</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-kde>17.43. <code>kde</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-kmod>17.44. <code>kmod</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-lha>17.45. <code>lha</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-libarchive>17.46. <code>libarchive</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-libedit>17.47. <code>libedit</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-libtool>17.48. <code>libtool</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-linux>17.49. <code>linux</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-localbase>17.50. <code>localbase</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-lua>17.51. <code>lua</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-lxqt>17.52. <code>lxqt</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-makeinfo>17.53. <code>makeinfo</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-makeself>17.54. <code>makeself</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-mate>17.55. <code>mate</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-meson>17.56. <code>meson</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-metaport>17.57. <code>metaport</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-mysql>17.58. <code>mysql</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-mono>17.59. <code>mono</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-motif>17.60. <code>motif</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-ncurses>17.61. <code>ncurses</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-ninja>17.62. <code>ninja</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-objc>17.63. <code>objc</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-openal>17.64. <code>openal</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-pathfix>17.65. <code>pathfix</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-pear>17.66. <code>pear</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-perl5>17.67. <code>perl5</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-pgsql>17.68. <code>pgsql</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-php>17.69. <code>php</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-pkgconfig>17.70. <code>pkgconfig</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-pure>17.71. <code>pure</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-pyqt>17.72. <code>pyqt</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-python>17.73. <code>python</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-qmail>17.74. <code>qmail</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-qmake>17.75. <code>qmake</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-qt>17.76. <code>qt</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-qt-dist>17.77. <code>qt-dist</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-readline>17.78. <code>readline</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-samba>17.79. <code>samba</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-scons>17.80. <code>scons</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-shared-mime-info>17.81. <code>shared-mime-info</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-shebangfix>17.82. <code>shebangfix</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-sqlite>17.83. <code>sqlite</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-ssl>17.84. <code>ssl</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-tar>17.85. <code>tar</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-tcl>17.86. <code>tcl</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-terminfo>17.87. <code>terminfo</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-tk>17.88. <code>tk</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-uidfix>17.89. <code>uidfix</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-uniquefiles>17.90. <code>uniquefiles</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-varnish>17.91. <code>varnish</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-webplugin>17.92. <code>webplugin</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-xfce>17.93. <code>xfce</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-xorg>17.94. <code>xorg</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-xorg-cat>17.95. <code>xorg-cat</code></a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/uses/#uses-zip>17.96. <code>zip</code></a></li></ul></li><li><input type=checkbox id=chapter-7713ccc63287693c9be6c832b2c1e850 class=toggle>
<label class="icon cursor" for=chapter-7713ccc63287693c9be6c832b2c1e850><a role=button></a></label><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/>Chapter 18. __FreeBSD_version Values</a><ul><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-14>18.1. FreeBSD 14 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-13>18.2. FreeBSD 13 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-12>18.3. FreeBSD 12 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-11>18.4. FreeBSD 11 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-10>18.5. FreeBSD 10 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-9>18.6. FreeBSD 9 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-8>18.7. FreeBSD 8 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-7>18.8. FreeBSD 7 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-6>18.9. FreeBSD 6 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-5>18.10. FreeBSD 5 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-4>18.11. FreeBSD 4 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-3>18.12. FreeBSD 3 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-2.2>18.13. FreeBSD 2.2 Versions</a></li><li><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/versions/#versions-2>18.14. FreeBSD 2 Before 2.2-RELEASE Versions</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapter 6. Special Considerations</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#staging>6.1. Staging</a></li><li><a href=#bundled-libs>6.2. Bundled Libraries</a></li><li><a href=#porting-shlibs>6.3. Shared Libraries</a></li><li><a href=#porting-restrictions>6.4. Ports with Distribution Restrictions or Legal Concerns</a></li><li><a href=#building>6.5. Building Mechanisms</a></li><li><a href=#using-autotools>6.6. Using GNU Autotools</a></li><li><a href=#using-gettext>6.7. Using GNU <code>gettext</code></a></li><li><a href=#using-perl>6.8. Using Perl</a></li><li><a href=#using-x11>6.9. Using X11</a></li><li><a href=#using-gnome>6.10. Using GNOME</a></li><li><a href=#gnome-components>6.11. GNOME Components</a></li><li><a href=#using-qt>6.12. Using Qt</a></li><li><a href=#using-kde>6.13. Using KDE</a></li><li><a href=#using-lxqt>6.14. Using LXQt</a></li><li><a href=#using-java>6.15. Using Java</a></li><li><a href=#using-php>6.16. Web Applications, Apache and PHP</a></li><li><a href=#using-python>6.17. Using Python</a></li><li><a href=#using-tcl>6.18. Using Tcl/Tk</a></li><li><a href=#using-ruby>6.19. Using Ruby</a></li><li><a href=#using-sdl>6.20. Using SDL</a></li><li><a href=#using-wx>6.21. Using wxWidgets</a></li><li><a href=#using-lua>6.22. Using Lua</a></li><li><a href=#using-iconv>6.23. Using <code>iconv</code></a></li><li><a href=#using-xfce>6.24. Using Xfce</a></li><li><a href=#using-databases>6.25. Using Databases</a></li><li><a href=#rc-scripts>6.26. Starting and Stopping Services (<code>rc</code> Scripts)</a></li><li><a href=#users-and-groups>6.27. Adding Users and Groups</a></li><li><a href=#requiring-kernel-sources>6.28. Ports That Rely on Kernel Sources</a></li><li><a href=#go-libs>6.29. Go Libraries</a></li><li><a href=#haskell-libs>6.30. Haskell Libraries</a></li><li><a href=#shell-completion>6.31. Shell Completion Files</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody><div class=paragraph><p>This section explains the most common things to consider when creating a port.</p></div></div></div><div class=sect1><h2 id=staging>6.1. Staging<a class=anchor href=#staging></a></h2><div class=sectionbody><div class=paragraph><p><span class=filename>bsd.port.mk</span> expects ports to work with a "stage directory".
This means that a port must not install files directly to the regular destination directories (that is, under <code>PREFIX</code>, for example) but instead into a separate directory from which the package is then built.
In many cases, this does not require root privileges, making it possible to build packages as an unprivileged user.
With staging, the port is built and installed into the stage directory, <code>STAGEDIR</code>.
A package is created from the stage directory and then installed on the system. Automake tools refer to this concept as <code>DESTDIR</code>, but in FreeBSD, <code>DESTDIR</code> has a different meaning (see <a href=../testing/#porting-prefix><code>PREFIX</code> and <code>DESTDIR</code></a>).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>No port <em>really</em> needs to be root.
It can mostly be avoided by using <a href=../uses/#uses-uidfix><code>USES=uidfix</code></a>.
If the port still runs commands like <a href="https://man.freebsd.org/cgi/man.cgi?query=chown&amp;sektion=8&amp;format=html">chown(8)</a>, <a href="https://man.freebsd.org/cgi/man.cgi?query=chgrp&amp;sektion=1&amp;format=html">chgrp(1)</a>, or forces owner or group with <a href="https://man.freebsd.org/cgi/man.cgi?query=install&amp;sektion=1&amp;format=html">install(1)</a> then use <a href=../uses/#uses-fakeroot><code>USES=fakeroot</code></a> to fake those calls.
Some patching of the port’s <span class=filename>Makefiles</span> will be needed.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Meta ports, or ports that do not install files themselves but only depend on other ports, must avoid needlessly extracting the <a href="https://man.freebsd.org/cgi/man.cgi?query=mtree&amp;sektion=8&amp;format=html">mtree(8)</a> to the stage directory.
This is the basic directory layout of the package, and these empty directories will be seen as orphans.
To prevent <a href="https://man.freebsd.org/cgi/man.cgi?query=mtree&amp;sektion=8&amp;format=html">mtree(8)</a> extraction, add this line:</p></div><div class="literalblock programlisting"><div class=content><pre>NO_MTREE=	yes</pre></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Metaports should use <a href=#uses-metaport><code>USES=metaport</code></a>.
It sets up defaults for ports that do not fetch, build, or install anything.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Staging is enabled by prepending <code>STAGEDIR</code> to paths used in the <code>pre-install</code>, <code>do-install</code>, and <code>post-install</code> targets (see the examples through the book).
Typically, this includes <code>PREFIX</code>, <code>ETCDIR</code>, <code>DATADIR</code>, <code>EXAMPLESDIR</code>, <code>MANPREFIX</code>, <code>DOCSDIR</code>, and so on.
Directories should be created as part of the <code>post-install</code> target.
Avoid using absolute paths whenever possible.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Ports that install kernel modules must prepend <code>STAGEDIR</code> to their destination, by default <span class=filename>/boot/modules</span>.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=staging-symlink>6.1.1. Handling Symbolic Links<a class=anchor href=#staging-symlink></a></h3><div class=paragraph><p>When creating a symbolic link, relative ones are strongly recommended.
Use <code>${RLN}</code> to create relative symbolic links.
It uses <a href="https://man.freebsd.org/cgi/man.cgi?query=install&amp;sektion=1&amp;format=html">install(1)</a> under the hood to automatically figure out the relative link to create.</p></div><div id=staging-ex1 class=exampleblock><div class=title>例 1. Create Relative Symbolic Links Automatically</div><div class=content><div class=paragraph><p><code>${RLN}</code> uses <a href="https://man.freebsd.org/cgi/man.cgi?query=install&amp;sektion=1&amp;format=html">install(1)</a>'s relative symbolic feature which frees the porter of computing the relative path.</p></div><div class="literalblock programlisting"><div class=content><pre>${RLN} ${STAGEDIR}${PREFIX}/lib/libfoo.so.42 ${STAGEDIR}${PREFIX}/lib/libfoo.so
${RLN} ${STAGEDIR}${PREFIX}/libexec/foo/bar ${STAGEDIR}${PREFIX}/bin/bar
${RLN} ${STAGEDIR}/var/cache/foo ${STAGEDIR}${PREFIX}/share/foo</pre></div></div><div class=paragraph><p>Will generate:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>ls</span> <span class=nt>-lF</span> <span class=k>${</span><span class=nv>STAGEDIR</span><span class=k>}${</span><span class=nv>PREFIX</span><span class=k>}</span>/lib
lrwxr-xr-x  1 nobody  nobody    181 Aug  3 11:27 libfoo.so@ -&gt; libfoo.so.42
<span class=nt>-rwxr-xr-x</span>  1 nobody  nobody     15 Aug  3 11:24 libfoo.so.42<span class=k>*</span>
% <span class=nb>ls</span> <span class=nt>-lF</span> <span class=k>${</span><span class=nv>STAGEDIR</span><span class=k>}${</span><span class=nv>PREFIX</span><span class=k>}</span>/bin
lrwxr-xr-x  1 nobody  nobody    181 Aug  3 11:27 bar@ -&gt; ../libexec/foo/bar
% <span class=nb>ls</span> <span class=nt>-lF</span> <span class=k>${</span><span class=nv>STAGEDIRDIR</span><span class=k>}${</span><span class=nv>PREFIX</span><span class=k>}</span>/share
lrwxr-xr-x  1 nobody  nobody    181 Aug  3 11:27 foo@ -&gt; ../../../var/cache/foo</code></pre></div></div></div></div></div></div></div><div class=sect1><h2 id=bundled-libs>6.2. Bundled Libraries<a class=anchor href=#bundled-libs></a></h2><div class=sectionbody><div class=paragraph><p>This section explains why bundled dependencies are considered bad and what to do about them.</p></div><div class=sect2><h3 id=bundled-libs-why-bad>6.2.1. Why Bundled Libraries Are Bad<a class=anchor href=#bundled-libs-why-bad></a></h3><div class=paragraph><p>Some software requires the porter to locate third-party libraries and add the required dependencies to the port.
Other software bundles all necessary libraries into the distribution file.
The second approach seems easier at first, but there are some serious drawbacks:</p></div><div class=paragraph><p>This list is loosely based on the <a href=https://fedoraproject.org/wiki/Packaging:No_Bundled_Libraries>Fedora</a> and <a href=http://wiki.gentoo.org/wiki/Why_not_bundle_dependencies>Gentoo</a> wikis, both licensed under the <a href=http://creativecommons.org/licenses/by-sa/3.0/>CC-BY-SA 3.0</a> license.</p></div><div class=dlist><dl><dt class=hdlist1>Security</dt><dd><p>If vulnerabilities are found in the upstream library and fixed there, they might not be fixed in the library bundled with the port.
One reason could be that the author is not aware of the problem.
This means that the porter must fix them, or upgrade to a non-vulnerable version, and send a patch to the author.
This all takes time, which results in software being vulnerable longer than necessary.
This in turn makes it harder to coordinate a fix without unnecessarily leaking information about the vulnerability.</p></dd><dt class=hdlist1>Bugs</dt><dd><p>This problem is similar to the problem with security in the last paragraph, but generally less severe.</p></dd><dt class=hdlist1>Forking</dt><dd><p>It is easier for the author to fork the upstream library once it is bundled.
While convenient on first sight, it means that the code diverges from upstream making it harder to address security or other problems with the software.
A reason for this is that patching becomes harder.</p><div class=paragraph><p>Another problem of forking is that because code diverges from upstream, bugs get solved over and over again instead of just once at a central location.
This defeats the idea of open source software in the first place.</p></div></dd><dt class=hdlist1>Symbol collision</dt><dd><p>When a library is installed on the system, it might collide with the bundled version.
This can cause immediate errors at compile or link time.
It can also cause errors when running the program which might be harder to track down.
The latter problem could be caused because the versions of the two libraries are incompatible.</p></dd><dt class=hdlist1>Licensing</dt><dd><p>When bundling projects from different sources, license issues can arise more easily, especially when licenses are incompatible.</p></dd><dt class=hdlist1>Waste of resources</dt><dd><p>Bundled libraries waste resources on several levels.
It takes longer to build the actual application, especially if these libraries are already present on the system.
At run-time, they can take up unnecessary memory when the system-wide library is already loaded by one program and the bundled library is loaded by another program.</p></dd><dt class=hdlist1>Waste of effort</dt><dd><p>When a library needs patches for FreeBSD, these patches have to be duplicated again in the bundled library.
This wastes developer time because the patches might not apply cleanly.
It can also be hard to notice that these patches are required in the first place.</p></dd></dl></div></div><div class=sect2><h3 id=bundled-libs-practices>6.2.2. What to do About Bundled Libraries<a class=anchor href=#bundled-libs-practices></a></h3><div class=paragraph><p>Whenever possible, use the unbundled version of the library by adding a <code>LIB_DEPENDS</code> to the port.
If such a port does not exist yet, consider creating it.</p></div><div class=paragraph><p>Only use bundled libraries if the upstream has a good track record on security and using unbundled versions leads to overly complex patches.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>In some very special cases, for example emulators, like Wine, a port has to bundle libraries, because they are in a different architecture, or they have been modified to fit the software’s use.
In that case, those libraries should not be exposed to other ports for linking.
Add <code>BUNDLE_LIBS=yes</code> to the port’s <span class=filename>Makefile</span>.
This will tell <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> to not compute provided libraries.
Always ask the Ports Management Team &lt;<a href=mailto:portmgr@FreeBSD.org>portmgr@FreeBSD.org</a>> before adding this to a port.</p></div></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=porting-shlibs>6.3. Shared Libraries<a class=anchor href=#porting-shlibs></a></h2><div class=sectionbody><div class=paragraph><p>If the port installs one or more shared libraries, define a <code>USE_LDCONFIG</code> make variable, which will instruct a <span class=filename>bsd.port.mk</span> to run <code>${LDCONFIG} -m</code> on the directory where the new library is installed (usually <span class=filename>PREFIX/lib</span>) during <code>post-install</code> target to register it into the shared library cache.
This variable, when defined, will also facilitate addition of an appropriate <code>@exec /sbin/ldconfig -m</code> and <code>@unexec /sbin/ldconfig -R</code> pair into <span class=filename>pkg-plist</span>, so that a user who installed the package can start using the shared library immediately and de-installation will not cause the system to still believe the library is there.</p></div><div class="literalblock programlisting"><div class=content><pre>USE_LDCONFIG=	yes</pre></div></div><div class=paragraph><p>The default directory can be overridden by setting <code>USE_LDCONFIG</code> to a list of directories into which shared libraries are to be installed.
For example, if the port installs shared libraries into <span class=filename>PREFIX/lib/foo</span> and <span class=filename>PREFIX/lib/bar</span> use this in <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>USE_LDCONFIG=	${PREFIX}/lib/foo ${PREFIX}/lib/bar</pre></div></div><div class=paragraph><p>Please double-check, often this is not necessary at all or can be avoided through <code>-rpath</code> or setting <code>LD_RUN_PATH</code> during linking (see <a class=package href=https://cgit.freebsd.org/ports/tree/lang/mosml/>lang/mosml</a> for an example), or through a shell-wrapper which sets <code>LD_LIBRARY_PATH</code> before invoking the binary, like <a class=package href=https://cgit.freebsd.org/ports/tree/www/seamonkey/>www/seamonkey</a> does.</p></div><div class=paragraph><p>When installing 32-bit libraries on a 64-bit system, use <code>USE_LDCONFIG32</code> instead.</p></div><div class=paragraph><p>If the software uses <a href=#using-autotools>autotools</a>, and specifically <code>libtool</code>, add <a href=../uses/#uses-libtool><code>USES=libtool</code></a>.</p></div><div class=paragraph><p>When the major library version number increments in the update to the new port version, all other ports that link to the affected library must have their <code>PORTREVISION</code> incremented, to force recompilation with the new library version.</p></div></div></div><div class=sect1><h2 id=porting-restrictions>6.4. Ports with Distribution Restrictions or Legal Concerns<a class=anchor href=#porting-restrictions></a></h2><div class=sectionbody><div class=paragraph><p>Licenses vary, and some of them place restrictions on how the application can be packaged, whether it can be sold for profit, and so on.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>It is the responsibility of a porter to read the licensing terms of the software and make sure that the FreeBSD project will not be held accountable for violating them by redistributing the source or compiled binaries either via FTP/HTTP or CD-ROM.
If in doubt, please contact the <a href=https://lists.FreeBSD.org/subscription/freebsd-ports>FreeBSD ports 郵遞論壇</a>.</p></div></td></tr></tbody></table></div><div class=paragraph><p>In situations like this, the variables described in the next sections can be set.</p></div><div class=sect2><h3 id=porting-restrictions-no_package>6.4.1. <code>NO_PACKAGE</code><a class=anchor href=#porting-restrictions-no_package></a></h3><div class=paragraph><p>This variable indicates that we may not generate a binary package of the application.
For instance, the license may disallow binary redistribution, or it may prohibit distribution of packages created from patched sources.</p></div><div class=paragraph><p>However, the port’s <code>DISTFILES</code> may be freely mirrored on FTP/HTTP.
They may also be distributed on a CD-ROM (or similar media) unless <code>NO_CDROM</code> is set as well.</p></div><div class=paragraph><p>If the binary package is not generally useful, and the application must always be compiled from the source code, use <code>NO_PACKAGE</code>.
For example, if the application has configuration information that is site specific hard coded into it at compile time, set <code>NO_PACKAGE</code>.</p></div><div class=paragraph><p>Set <code>NO_PACKAGE</code> to a string describing the reason why the package cannot be generated.</p></div></div><div class=sect2><h3 id=porting-restrictions-no_cdrom>6.4.2. <code>NO_CDROM</code><a class=anchor href=#porting-restrictions-no_cdrom></a></h3><div class=paragraph><p>This variable alone indicates that, although we are allowed to generate binary packages, we may put neither those packages nor the port’s <code>DISTFILES</code> onto a CD-ROM (or similar media) for resale.
However, the binary packages and the port’s <code>DISTFILES</code> will still be available via FTP/HTTP.</p></div><div class=paragraph><p>If this variable is set along with <code>NO_PACKAGE</code>, then only the port’s <code>DISTFILES</code> will be available, and only via FTP/HTTP.</p></div><div class=paragraph><p>Set <code>NO_CDROM</code> to a string describing the reason why the port cannot be redistributed on CD-ROM.
For instance, use this if the port’s license is for "non-commercial" use only.</p></div></div><div class=sect2><h3 id=porting-restrictions-nofetchfiles>6.4.3. <code>NOFETCHFILES</code><a class=anchor href=#porting-restrictions-nofetchfiles></a></h3><div class=paragraph><p>Files defined in <code>NOFETCHFILES</code> are not fetchable from any of <code>MASTER_SITES</code>.
An example of such a file is when the file is supplied on CD-ROM by the vendor.</p></div><div class=paragraph><p>Tools which check for the availability of these files on <code>MASTER_SITES</code> have to ignore these files and not report about them.</p></div></div><div class=sect2><h3 id=porting-restrictions-restricted>6.4.4. <code>RESTRICTED</code><a class=anchor href=#porting-restrictions-restricted></a></h3><div class=paragraph><p>Set this variable alone if the application’s license permits neither mirroring the application’s <code>DISTFILES</code> nor distributing the binary package in any way.</p></div><div class=paragraph><p>Do not set <code>NO_CDROM</code> or <code>NO_PACKAGE</code> along with <code>RESTRICTED</code>, since the latter variable implies the former ones.</p></div><div class=paragraph><p>Set <code>RESTRICTED</code> to a string describing the reason why the port cannot be redistributed.
Typically, this indicates that the port contains proprietary software and that the user will need to manually download the <code>DISTFILES</code>,
possibly after registering for the software or agreeing to accept the terms of an EULA.</p></div></div><div class=sect2><h3 id=porting-restrictions-restricted_files>6.4.5. <code>RESTRICTED_FILES</code><a class=anchor href=#porting-restrictions-restricted_files></a></h3><div class=paragraph><p>When <code>RESTRICTED</code> or <code>NO_CDROM</code> is set, this variable defaults to <code>${DISTFILES} ${PATCHFILES}</code>, otherwise it is empty.
If only some of the distribution files are restricted, then set this variable to list them.</p></div></div><div class=sect2><h3 id=porting-restrictions-legal_text>6.4.6. <code>LEGAL_TEXT</code><a class=anchor href=#porting-restrictions-legal_text></a></h3><div class=paragraph><p>If the port has legal concerns not addressed by the above variables, set <code>LEGAL_TEXT</code> to a string explaining the concern.
For example, if special permission was obtained for FreeBSD to redistribute the binary, this variable must indicate so.</p></div></div><div class=sect2><h3 id=porting-restrictions-legal>6.4.7. <span class=filename>/usr/ports/LEGAL</span> and <code>LEGAL</code><a class=anchor href=#porting-restrictions-legal></a></h3><div class=paragraph><p>A port which sets any of the above variables must also be added to <span class=filename>/usr/ports/LEGAL</span>.
The first column is a glob which matches the restricted distfiles.
The second column is the port’s origin.
The third column is the output of <code>make -VLEGAL</code>.</p></div></div><div class=sect2><h3 id=porting-restrictions-examples>6.4.8. Examples<a class=anchor href=#porting-restrictions-examples></a></h3><div class=paragraph><p>The preferred way to state "the distfiles for this port must be fetched manually" is as follows:</p></div><div class="literalblock programlisting"><div class=content><pre>.if !exists(${DISTDIR}/${DISTNAME}${EXTRACT_SUFX})
IGNORE=	may not be redistributed because of licensing reasons. Please visit some-website to accept their license and download ${DISTFILES} into ${DISTDIR}
.endif</pre></div></div><div class=paragraph><p>This both informs the user, and sets the proper metadata on the user’s machine for use by automated programs.</p></div><div class=paragraph><p>Note that this stanza must be preceded by an inclusion of <span class=filename>bsd.port.pre.mk</span>.</p></div></div></div></div><div class=sect1><h2 id=building>6.5. Building Mechanisms<a class=anchor href=#building></a></h2><div class=sectionbody><div class=sect2><h3 id=parallel-builds>6.5.1. Building Ports in Parallel<a class=anchor href=#parallel-builds></a></h3><div class=paragraph><p>The FreeBSD ports framework supports parallel building using multiple <code>make</code> sub-processes,
which allows SMP systems to utilize all of their available CPU power, allowing port builds to be faster and more effective.</p></div><div class=paragraph><p>This is achieved by passing <code>-jX</code> flag to <a href="https://man.freebsd.org/cgi/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a> running on vendor code.
This is the default build behavior of ports.
Unfortunately, not all ports handle parallel building well and it may be required to explicitly disable this feature by adding the <code>MAKE_JOBS_UNSAFE=yes</code> variable.
It is used when a port is known to be broken with <code>-jX</code> due to race conditions causing intermittent build failures.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>When setting <code>MAKE_JOBS_UNSAFE</code>, it is very important to explain either with a comment in the <span class=filename>Makefile</span>, or at least in the commit message, <em>why</em> the port does not build when enabling.
Otherwise, it is almost impossible to either fix the problem, or test if it has been fixed when committing an update at a later date.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=using-make>6.5.2. <code>make</code>, <code>gmake</code>, and <code>imake</code><a class=anchor href=#using-make></a></h3><div class=paragraph><p>Several differing <code>make</code> implementations exist. Ported software often requires a particular implementation, like GNU`make`, known in FreeBSD as <code>gmake</code>.</p></div><div class=paragraph><p>If the port uses GNU make, add <code>gmake</code> to <code>USES</code>.</p></div><div class=paragraph><p><code>MAKE_CMD</code> can be used to reference the specific command configured by the <code>USES</code> setting in the port’s <span class=filename>Makefile</span>.
Only use <code>MAKE_CMD</code> within the application <span class=filename>Makefile</span>s in <code>WRKSRC</code> to call the <code>make</code> implementation expected by the ported software.</p></div><div class=paragraph><p>If the port is an X application that uses imake to create <span class=filename>Makefile</span>s from <span class=filename>Imakefile</span>s, set <code>USES= imake</code>.
See the <a href=../uses/#uses-imake><code>USES=imake</code></a> section of <a href=../uses/#uses>Using <code>USES</code> Macros</a> for more details.</p></div><div class=paragraph><p>If the port’s source <span class=filename>Makefile</span> has something other than <code>all</code> as the main build target, set <code>ALL_TARGET</code> accordingly.
The same goes for <code>install</code> and <code>INSTALL_TARGET</code>.</p></div></div><div class=sect2><h3 id=using-configure>6.5.3. <code>configure</code> Script<a class=anchor href=#using-configure></a></h3><div class=paragraph><p>If the port uses the <code>configure</code> script to generate <span class=filename>Makefile</span> from <span class=filename>Makefile.in</span>, set <code>GNU_CONFIGURE=yes</code>.
To give extra arguments to the <code>configure</code> script (the default argument is <code>--prefix=${PREFIX} --infodir=${PREFIX}/${INFO_PATH} --mandir=${MANPREFIX}/man --build=${CONFIGURE_TARGET}</code>), set those extra arguments in <code>CONFIGURE_ARGS</code>.
Extra environment variables can be passed using <code>CONFIGURE_ENV</code>.</p></div><table id=using-configure-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 1. Variables for Ports That Use <code>configure</code></caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Means</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>GNU_CONFIGURE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port uses <code>configure</code> script to prepare build.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>HAS_CONFIGURE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Same as <code>GNU_CONFIGURE</code>, except default configure target is not added to <code>CONFIGURE_ARGS</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CONFIGURE_ARGS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Additional arguments passed to <code>configure</code> script.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CONFIGURE_ENV</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Additional environment variables to be set for <code>configure</code> script run.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CONFIGURE_TARGET</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Override default configure target. Default value is <code>${MACHINE_ARCH}-portbld-freebsd${OSREL}</code>.</p></td></tr></tbody></table></div><div class=sect2><h3 id=using-cmake>6.5.4. Using <code>cmake</code><a class=anchor href=#using-cmake></a></h3><div class=paragraph><p>For ports that use CMake, define <code>USES= cmake</code>.</p></div><table id=using-cmake-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 2. Variables for Ports That Use <code>cmake</code></caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Means</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CMAKE_ARGS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Port specific CMake flags to be passed to the <code>cmake</code> binary.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CMAKE_ON</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>For each entry in <code>CMAKE_ON</code>, an enabled boolean value is added to <code>CMAKE_ARGS</code>. See <a href=#using-cmake-example2><code>CMAKE_ON</code> and <code>CMAKE_OFF</code></a>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CMAKE_OFF</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>For each entry in <code>CMAKE_OFF</code>, a disabled boolean value is added to <code>CMAKE_ARGS</code>. See <a href=#using-cmake-example2><code>CMAKE_ON</code> and <code>CMAKE_OFF</code></a>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CMAKE_BUILD_TYPE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Type of build (CMake predefined build profiles). Default is <code>Release</code>, or <code>Debug</code> if <code>WITH_DEBUG</code> is set.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CMAKE_SOURCE_PATH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the source directory. Default is <code>${WRKSRC}</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CONFIGURE_ENV</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Additional environment variables to be set for the <code>cmake</code> binary.</p></td></tr></tbody></table><table id=using-cmake-user-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 3. Variables the Users Can Define for <code>cmake</code> Builds</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Means</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CMAKE_NOCOLOR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Disables color build output. Default not set, unless <code>BATCH</code> or <code>PACKAGE_BUILDING</code> are set.</p></td></tr></tbody></table><div class=paragraph><p>CMake supports these build profiles: <code>Debug</code>, <code>Release</code>, <code>RelWithDebInfo</code> and <code>MinSizeRel</code>.
<code>Debug</code> and <code>Release</code> profiles respect system <code>*FLAGS</code>, <code>RelWithDebInfo</code> and <code>MinSizeRel</code> will set <code>CFLAGS</code> to <code>-O2 -g</code> and <code>-Os -DNDEBUG</code> correspondingly.
The lower-cased value of <code>CMAKE_BUILD_TYPE</code> is exported to <code>PLIST_SUB</code> and must be used if the port installs <span class=filename>*.cmake</span> depending on the build type (see <a class=package href=https://cgit.freebsd.org/ports/tree/devel/kf5-kcrash/>devel/kf5-kcrash</a> for an example).
Please note that some projects may define their own build profiles and/or force particular build type by setting <code>CMAKE_BUILD_TYPE</code> in <span class=filename>CMakeLists.txt</span>.
To make a port for such a project respect <code>CFLAGS</code> and <code>WITH_DEBUG</code>, the <code>CMAKE_BUILD_TYPE</code> definitions must be removed from those files.</p></div><div class=paragraph><p>Most CMake-based projects support an out-of-source method of building.
The out-of-source build for a port is the default setting.
An in-source build can be requested by using the <code>:insource</code> suffix.
With out-of-source builds, <code>CONFIGURE_WRKSRC</code>, <code>BUILD_WRKSRC</code> and <code>INSTALL_WRKSRC</code> will be set to <code>${WRKDIR}/.build</code> and this directory will be used to keep all files generated during configuration and build stages, leaving the source directory intact.</p></div><div id=using-cmake-example class=exampleblock><div class=title>例 2. <code>USES= cmake</code> Example</div><div class=content><div class=paragraph><p>This snippet demonstrates the use of CMake for a port.
<code>CMAKE_SOURCE_PATH</code> is not usually required, but can be set when the sources are not located in the top directory, or if only a subset of the project is intended to be built by the port.</p></div><div class="literalblock programlisting"><div class=content><pre>USES=			cmake
CMAKE_SOURCE_PATH=	${WRKSRC}/subproject</pre></div></div></div></div><div id=using-cmake-example2 class=exampleblock><div class=title>例 3. <code>CMAKE_ON</code> and <code>CMAKE_OFF</code></div><div class=content><div class=paragraph><p>When adding boolean values to <code>CMAKE_ARGS</code>, it is easier to use the <code>CMAKE_ON</code> and <code>CMAKE_OFF</code> variables instead. This:</p></div><div class="literalblock programlisting"><div class=content><pre>CMAKE_ON=	VAR1 VAR2
CMAKE_OFF=	VAR3</pre></div></div><div class=paragraph><p>Is equivalent to:</p></div><div class="literalblock programlisting"><div class=content><pre>CMAKE_ARGS=	-DVAR1:BOOL=TRUE -DVAR2:BOOL=TRUE -DVAR3:BOOL=FALSE</pre></div></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>This is only for the default values off <code>CMAKE_ARGS</code>.
The helpers described in <a href=../makefiles/#options-cmake_bool><code>OPT_CMAKE_BOOL</code> and <code>OPT_CMAKE_BOOL_OFF</code></a> use the same semantics, but for optional values.</p></div></td></tr></tbody></table></div></div></div></div><div class=sect2><h3 id=using-scons>6.5.5. Using <code>scons</code><a class=anchor href=#using-scons></a></h3><div class=paragraph><p>If the port uses SCons, define <code>USES=scons</code>.</p></div><div class=paragraph><p>To make third party <span class=filename>SConstruct</span> respect everything that is passed to SCons in the environment (that is, most importantly, <code>CC/CXX/CFLAGS/CXXFLAGS</code>), patch <span class=filename>SConstruct</span> so build <code>Environment</code> is constructed like this:</p></div><div class="literalblock programlisting"><div class=content><pre>env = Environment(**ARGUMENTS)</pre></div></div><div class=paragraph><p>It may be then modified with <code>env.Append</code> and <code>env.Replace</code>.</p></div></div><div class=sect2><h3 id=using-cargo>6.5.6. Building Rust Applications with <code>cargo</code><a class=anchor href=#using-cargo></a></h3><div class=paragraph><p>For ports that use Cargo, define <code>USES=cargo</code>.</p></div><table id=using-cargo-user-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 4. Variables the Users Can Define for <code>cargo</code> Builds</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Default</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_CRATES</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>List of crates the port depends on. Each entry needs to have a format like <code>cratename-semver</code> for example, <code>libc-0.2.40</code>. Port maintainers can generate this list from <span class=filename>Cargo.lock</span> using <code>make cargo-crates</code>. Manually bumping crate versions is possible but be mindful of transitive dependencies.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_FEATURES</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>List of application features to build (space separated list). To deactivate all default features add the special token <code>--no-default-features</code> to <code>CARGO_FEATURES</code>. Manually passing it to <code>CARGO_BUILD_ARGS</code>, <code>CARGO_INSTALL_ARGS</code>, and <code>CARGO_TEST_ARGS</code> is not needed.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_CARGOTOML</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>${WRKSRC}/Cargo.toml</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The path to the <span class=filename>Cargo.toml</span> to use.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_CARGOLOCK</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>${WRKSRC}/Cargo.lock</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The path to the <span class=filename>Cargo.lock</span> to use for <code>make cargo-crates</code>. It is possible to specify more than one lock file when necessary.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_ENV</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>A list of environment variables to pass to Cargo similar to <code>MAKE_ENV</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUSTFLAGS</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>Flags to pass to the Rust compiler.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_CONFIGURE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>yes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Use the default <code>do-configure</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_UPDATE_ARGS</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extra arguments to pass to Cargo during the configure phase. Valid arguments can be looked up with <code>cargo update --help</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_BUILDDEP</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>yes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Add a build dependency on <a class=package href=https://cgit.freebsd.org/ports/tree/lang/rust/>lang/rust</a>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_CARGO_BIN</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>${LOCALBASE}/bin/cargo</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Location of the <code>cargo</code> binary.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_BUILD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>yes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Use the default <code>do-build</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_BUILD_ARGS</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extra arguments to pass to Cargo during the build phase. Valid arguments can be looked up with <code>cargo build --help</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_INSTALL</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>yes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Use the default <code>do-install</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_INSTALL_ARGS</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extra arguments to pass to Cargo during the install phase. Valid arguments can be looked up with <code>cargo install --help</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_INSTALL_PATH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>.</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the crate to install. This is passed to <code>cargo install</code> via its <code>--path</code> argument. When multiple paths are specified <code>cargo install</code> is run multiple times.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_TEST</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>yes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Use the default <code>do-test</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_TEST_ARGS</code></p></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extra arguments to pass to Cargo during the test phase. Valid arguments can be looked up with <code>cargo test --help</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_TARGET_DIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>${WRKDIR}/target</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Location of the cargo output directory.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_DIST_SUBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>rust/crates</span></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory relative to <code>DISTDIR</code> where the crate distribution files will be stored.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_VENDOR_DIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>${WRKSRC}/cargo-crates</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Location of the vendor directory where all crates will be extracted to. Try to keep this under <code>PATCH_WRKSRC</code>, so that patches can be applied easily.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_USE_GITHUB</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>no</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Enable fetching of crates locked to specific Git commits on GitHub via <code>GH_TUPLE</code>. This will try to patch all <span class=filename>Cargo.toml</span> under <code>WRKDIR</code> to point to the offline sources instead of fetching them from a Git repository during the build.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>CARGO_USE_GITLAB</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>no</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Same as <code>CARGO_USE_GITHUB</code> but for GitLab instances and <code>GL_TUPLE</code>.</p></td></tr></tbody></table><div id=cargo-ex1 class=exampleblock><div class=title>例 4. Creating a Port for a Simple Rust Application</div><div class=content><div class=paragraph><p>Creating a Cargo based port is a three stage process.
First we need to provide a ports template that fetches the application distribution file:</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	tokei
DISTVERSIONPREFIX=	v
DISTVERSION=	7.0.2
CATEGORIES=	devel

MAINTAINER=	tobik@FreeBSD.org
COMMENT=	Display statistics about your code

USES=		cargo
USE_GITHUB=	yes
GH_ACCOUNT=	Aaronepower

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>Generate an initial <span class=filename>distinfo</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make makesum
<span class=o>=&gt;</span> Aaronepower-tokei-v7.0.2_GH0.tar.gz doesn<span class=s1>&#39;t seem to exist in /usr/ports/distfiles/.
=&gt; Attempting to fetch https://codeload.github.com/Aaronepower/tokei/tar.gz/v7.0.2?dummy=/Aaronepower-tokei-v7.0.2_GH0.tar.gz
fetch: https://codeload.github.com/Aaronepower/tokei/tar.gz/v7.0.2?dummy=/Aaronepower-tokei-v7.0.2_GH0.tar.gz: size of remote file is not known
Aaronepower-tokei-v7.0.2_GH0.tar.gz                     45 kB  239 kBps 00m00s</span></code></pre></div></div><div class=paragraph><p>Now the distribution file is ready to use and we can go ahead and extract crate dependencies from the bundled <span class=filename>Cargo.lock</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make cargo-crates
<span class=nv>CARGO_CRATES</span><span class=o>=</span>   aho-corasick-0.6.4 <span class=se>\</span>
                ansi_term-0.11.0 <span class=se>\</span>
                arrayvec-0.4.7 <span class=se>\</span>
                atty-0.2.9 <span class=se>\</span>
                bitflags-1.0.1 <span class=se>\</span>
                byteorder-1.2.2 <span class=se>\</span>
                <span class=o>[</span>...]</code></pre></div></div><div class=paragraph><p>The output of this command needs to be pasted directly into the Makefile:</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	tokei
DISTVERSIONPREFIX=	v
DISTVERSION=	7.0.2
CATEGORIES=	devel

MAINTAINER=	tobik@FreeBSD.org
COMMENT=	Display statistics about your code

USES=		cargo
USE_GITHUB=	yes
GH_ACCOUNT=	Aaronepower

CARGO_CRATES=   aho-corasick-0.6.4 \
                ansi_term-0.11.0 \
                arrayvec-0.4.7 \
                atty-0.2.9 \
                bitflags-1.0.1 \
                byteorder-1.2.2 \
                [...]

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p><span class=filename>distinfo</span> needs to be regenerated to contain all the crate distribution files:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make makesum
<span class=o>=&gt;</span> rust/crates/aho-corasick-0.6.4.tar.gz doesn<span class=s1>&#39;t seem to exist in /usr/ports/distfiles/.
=&gt; Attempting to fetch https://crates.io/api/v1/crates/aho-corasick/0.6.4/download?dummy=/rust/crates/aho-corasick-0.6.4.tar.gz
rust/crates/aho-corasick-0.6.4.tar.gz         100% of   24 kB 6139 kBps 00m00s
=&gt; rust/crates/ansi_term-0.11.0.tar.gz doesn&#39;</span>t seem to exist <span class=k>in</span> /usr/ports/distfiles/.
<span class=o>=&gt;</span> Attempting to fetch https://crates.io/api/v1/crates/ansi_term/0.11.0/download?dummy<span class=o>=</span>/rust/crates/ansi_term-0.11.0.tar.gz
rust/crates/ansi_term-0.11.0.tar.gz           100% of   16 kB   21 MBps 00m00s
<span class=o>=&gt;</span> rust/crates/arrayvec-0.4.7.tar.gz doesn<span class=s1>&#39;t seem to exist in /usr/ports/distfiles/.
=&gt; Attempting to fetch https://crates.io/api/v1/crates/arrayvec/0.4.7/download?dummy=/rust/crates/arrayvec-0.4.7.tar.gz
rust/crates/arrayvec-0.4.7.tar.gz             100% of   22 kB 3237 kBps 00m00s
=&gt; rust/crates/atty-0.2.9.tar.gz doesn&#39;</span>t seem to exist <span class=k>in</span> /usr/ports/distfiles/.
<span class=o>=&gt;</span> Attempting to fetch https://crates.io/api/v1/crates/atty/0.2.9/download?dummy<span class=o>=</span>/rust/crates/atty-0.2.9.tar.gz
rust/crates/atty-0.2.9.tar.gz                 100% of 5898  B   81 MBps 00m00s
<span class=o>=&gt;</span> rust/crates/bitflags-1.0.1.tar.gz doesn<span class=s1>&#39;t seem to exist in /usr/ports/distfiles/.
[...]</span></code></pre></div></div><div class=paragraph><p>The port is now ready for a test build and further adjustments like creating a plist, writing a description, adding license information, options, etc. as normal.</p></div><div class=paragraph><p>If you are not testing your port in a clean environment like with Poudriere, remember to run <code>make clean</code> before any testing.</p></div></div></div><div id=cargo-ex2 class=exampleblock><div class=title>例 5. Enabling Additional Application Features</div><div class=content><div class=paragraph><p>Some applications define additional features in their <span class=filename>Cargo.toml</span>.
They can be compiled in by setting <code>CARGO_FEATURES</code> in the port.</p></div><div class=paragraph><p>Here we enable Tokei’s <code>json</code> and <code>yaml</code> features:</p></div><div class="literalblock programlisting"><div class=content><pre>CARGO_FEATURES=	json yaml</pre></div></div></div></div><div id=cargo-ex4 class=exampleblock><div class=title>例 6. Encoding Application Features As Port Options</div><div class=content><div class=paragraph><p>An example <code>[features]</code> section in <span class=filename>Cargo.toml</span> could look like this:</p></div><div class="literalblock programlisting"><div class=content><pre>[features]
pulseaudio_backend = [&#34;librespot-playback/pulseaudio-backend&#34;]
portaudio_backend = [&#34;librespot-playback/portaudio-backend&#34;]
default = [&#34;pulseaudio_backend&#34;]</pre></div></div><div class=paragraph><p><code>pulseaudio_backend</code> is a default feature.
It is always enabled unless we explicitly turn off default features by adding <code>--no-default-features</code> to <code>CARGO_FEATURES</code>.
Here we turn the <code>portaudio_backend</code> and <code>pulseaudio_backend</code> features into port options:</p></div><div class="literalblock programlisting"><div class=content><pre>CARGO_FEATURES=	--no-default-features

OPTIONS_DEFINE=	PORTAUDIO PULSEAUDIO

PORTAUDIO_VARS=		CARGO_FEATURES+=portaudio_backend
PULSEAUDIO_VARS=	CARGO_FEATURES+=pulseaudio_backend</pre></div></div></div></div><div id=cargo-ex3 class=exampleblock><div class=title>例 7. Listing Crate Licenses</div><div class=content><div class=paragraph><p>Crates have their own licenses.
It is important to know what they are when adding a <code>LICENSE</code> block to the port (see <a href=../makefiles/#licenses>Licenses</a>).
The helper target <code>cargo-crates-licenses</code> will try to list all the licenses of all crates defined in <code>CARGO_CRATES</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make cargo-crates-licenses
aho-corasick-0.6.4  Unlicense/MIT
ansi_term-0.11.0    MIT
arrayvec-0.4.7      MIT/Apache-2.0
atty-0.2.9          MIT
bitflags-1.0.1      MIT/Apache-2.0
byteorder-1.2.2     Unlicense/MIT
<span class=o>[</span>...]</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The license names <code>make cargo-crates-licenses</code> outputs are SPDX 2.1 licenses expression which do not match the license names defined in the ports framework.
They need to be translated to the names from <a href=../makefiles/#licenses-license-list>Predefined License List</a>.</p></div></td></tr></tbody></table></div></div></div></div><div class=sect2><h3 id=using-meson>6.5.7. Using <code>meson</code><a class=anchor href=#using-meson></a></h3><div class=paragraph><p>For ports that use Meson, define <code>USES=meson</code>.</p></div><table id=using-meson-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 5. Variables for Ports That Use <code>meson</code></caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>MESON_ARGS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Port specific Meson flags to be passed to the <code>meson</code> binary.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>MESON_BUILD_DIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the build directory relative to <code>WRKSRC</code>. Default is <code>_build</code>.</p></td></tr></tbody></table><div id=using-meson-example class=exampleblock><div class=title>例 8. <code>USES=meson</code> Example</div><div class=content><div class=paragraph><p>This snippet demonstrates the use of Meson for a port.</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		meson
MESON_ARGS=	-Dfoo=enabled</pre></div></div></div></div></div><div class=sect2><h3 id=using-go>6.5.8. Building Go Applications<a class=anchor href=#using-go></a></h3><div class=paragraph><p>For ports that use Go, define <code>USES=go</code>.
Refer to <a href=../uses/#uses-go><code>go</code></a> for a list of variables that can be set to control the build process.</p></div><div id=go-ex1 class=exampleblock><div class=title>例 9. Creating a Port for a Go Modules Based Application</div><div class=content><div class=paragraph><p>In most cases, it is sufficient to set the <code>GO_MODULE</code> variable to the value specified by the <code>module</code> directive in <code>go.mod</code>:</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=       hey
PORTVERSION=    0.1.4
DISTVERSIONPREFIX=      v
CATEGORIES=     benchmarks

MAINTAINER=     dmgk@FreeBSD.org
COMMENT=        Tiny program that sends some load to a web application

LICENSE=        APACHE20
LICENSE_FILE=   ${WRKSRC}/LICENSE

USES=           go:modules
GO_MODULE=      github.com/rakyll/hey

PLIST_FILES=    bin/hey

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>If the "easy" way is not adequate or more control over dependencies is needed, the full porting process is described below.</p></div><div class=paragraph><p>Creating a Go based port is a five stage process.
First we need to provide a ports template that fetches the application distribution file:</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	ghq
DISTVERSIONPREFIX=	v
DISTVERSION=	0.12.5
CATEGORIES=	devel

MAINTAINER=	tobik@FreeBSD.org
COMMENT=	Remote repository management made easy

USES=		go:modules
USE_GITHUB=	yes
GH_ACCOUNT=	motemen

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>Generate an initial <span class=filename>distinfo</span>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make makesum
<span class=o>===&gt;</span>  License MIT accepted by the user
<span class=o>=&gt;</span> motemen-ghq-v0.12.5_GH0.tar.gz doesn<span class=s1>&#39;t seem to exist in /usr/ports/distfiles/.
=&gt; Attempting to fetch https://codeload.github.com/motemen/ghq/tar.gz/v0.12.5?dummy=/motemen-ghq-v0.12.5_GH0.tar.gz
fetch: https://codeload.github.com/motemen/ghq/tar.gz/v0.12.5?dummy=/motemen-ghq-v0.12.5_GH0.tar.gz: size of remote file is not known
motemen-ghq-v0.12.5_GH0.tar.gz                          32 kB  177 kBps    00s</span></code></pre></div></div><div class=paragraph><p>Now the distribution file is ready to use and we can extract the required Go module dependencies.
This step requires having <a class=package href=https://cgit.freebsd.org/ports/tree/ports-mgmt/modules2tuple/>ports-mgmt/modules2tuple</a> installed:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make gomod-vendor
<span class=o>[</span>...]
<span class=nv>GH_TUPLE</span><span class=o>=</span>	<span class=se>\</span>
		Songmu:gitconfig:v0.0.2:songmu_gitconfig/vendor/github.com/Songmu/gitconfig <span class=se>\</span>
		daviddengcn:go-colortext:186a3d44e920:daviddengcn_go_colortext/vendor/github.com/daviddengcn/go-colortext <span class=se>\</span>
		go-yaml:yaml:v2.2.2:go_yaml_yaml/vendor/gopkg.in/yaml.v2 <span class=se>\</span>
		golang:net:3ec191127204:golang_net/vendor/golang.org/x/net <span class=se>\</span>
		golang:sync:112230192c58:golang_sync/vendor/golang.org/x/sync <span class=se>\</span>
		golang:xerrors:3ee3066db522:golang_xerrors/vendor/golang.org/x/xerrors <span class=se>\</span>
		motemen:go-colorine:45d19169413a:motemen_go_colorine/vendor/github.com/motemen/go-colorine <span class=se>\</span>
		urfave:cli:v1.20.0:urfave_cli/vendor/github.com/urfave/cli</code></pre></div></div><div class=paragraph><p>The output of this command needs to be pasted directly into the Makefile:</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	ghq
DISTVERSIONPREFIX=	v
DISTVERSION=	0.12.5
CATEGORIES=	devel

MAINTAINER=	tobik@FreeBSD.org
COMMENT=	Remote repository management made easy

USES=		go:modules
USE_GITHUB=	yes
GH_ACCOUNT=	motemen
GH_TUPLE=	Songmu:gitconfig:v0.0.2:songmu_gitconfig/vendor/github.com/Songmu/gitconfig \
		daviddengcn:go-colortext:186a3d44e920:daviddengcn_go_colortext/vendor/github.com/daviddengcn/go-colortext \
		go-yaml:yaml:v2.2.2:go_yaml_yaml/vendor/gopkg.in/yaml.v2 \
		golang:net:3ec191127204:golang_net/vendor/golang.org/x/net \
		golang:sync:112230192c58:golang_sync/vendor/golang.org/x/sync \
		golang:xerrors:3ee3066db522:golang_xerrors/vendor/golang.org/x/xerrors \
		motemen:go-colorine:45d19169413a:motemen_go_colorine/vendor/github.com/motemen/go-colorine \
		urfave:cli:v1.20.0:urfave_cli/vendor/github.com/urfave/cli

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p><span class=filename>distinfo</span> needs to be regenerated to contain all the distribution files:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make makesum
<span class=o>=&gt;</span> Songmu-gitconfig-v0.0.2_GH0.tar.gz doesn<span class=s1>&#39;t seem to exist in /usr/ports/distfiles/.
=&gt; Attempting to fetch https://codeload.github.com/Songmu/gitconfig/tar.gz/v0.0.2?dummy=/Songmu-gitconfig-v0.0.2_GH0.tar.gz
fetch: https://codeload.github.com/Songmu/gitconfig/tar.gz/v0.0.2?dummy=/Songmu-gitconfig-v0.0.2_GH0.tar.gz: size of remote file is not known
Songmu-gitconfig-v0.0.2_GH0.tar.gz                    5662  B  936 kBps    00s
=&gt; daviddengcn-go-colortext-186a3d44e920_GH0.tar.gz doesn&#39;</span>t seem to exist <span class=k>in</span> /usr/ports/distfiles/.
<span class=o>=&gt;</span> Attempting to fetch https://codeload.github.com/daviddengcn/go-colortext/tar.gz/186a3d44e920?dummy<span class=o>=</span>/daviddengcn-go-colortext-186a3d44e920_GH0.tar.gz
fetch: https://codeload.github.com/daviddengcn/go-colortext/tar.gz/186a3d44e920?dummy<span class=o>=</span>/daviddengcn-go-colortext-186a3d44e920_GH0.tar.gz: size of remote file is not known
daviddengcn-go-colortext-186a3d44e920_GH0.tar.        4534  B 1098 kBps    00s
<span class=o>[</span>...]</code></pre></div></div><div class=paragraph><p>The port is now ready for a test build and further adjustments like creating a plist, writing a description, adding license information, options, etc. as normal.</p></div><div class=paragraph><p>If you are not testing your port in a clean environment like with Poudriere, remember to run <code>make clean</code> before any testing.</p></div></div></div><div id=go-ex2 class=exampleblock><div class=title>例 10. Setting Output Binary Name or Installation Path</div><div class=content><div class=paragraph><p>Some ports need to install the resulting binary under a different name or to a path other than the default <code>${PREFIX}/bin</code>.
This can be done by using <code>GO_TARGET</code> tuple syntax, for example:</p></div><div class="literalblock programlisting"><div class=content><pre>GO_TARGET=  ./cmd/ipfs:ipfs-go</pre></div></div><div class=paragraph><p>will install <code>ipfs</code> binary as <code>${PREFIX}/bin/ipfs-go</code> and</p></div><div class="literalblock programlisting"><div class=content><pre>GO_TARGET=  ./dnscrypt-proxy:${PREFIX}/sbin/dnscrypt-proxy</pre></div></div><div class=paragraph><p>will install <code>dnscrypt-proxy</code> to <code>${PREFIX}/sbin</code>.</p></div></div></div></div><div class=sect2><h3 id=using-cabal>6.5.9. Building Haskell Applications with <code>cabal</code><a class=anchor href=#using-cabal></a></h3><div class=paragraph><p>For ports that use Cabal, build system defines <code>USES=cabal</code>.
Refer to <a href=../uses/#uses-cabal><code>cabal</code></a> for a list of variables that can be set to control the build process.</p></div><div id=cabal-ex1 class=exampleblock><div class=title>例 11. Creating a Port for a Hackage-hosted Haskell Application</div><div class=content><div class=paragraph><p>When preparing a Haskell Cabal port, the <a class=package href=https://cgit.freebsd.org/ports/tree/devel/hs-cabal-install/>devel/hs-cabal-install</a> program is required, so make sure it is installed beforehand.
First we need to define common ports variables that allows cabal-install to fetch the package distribution file:</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	ShellCheck
DISTVERSION=	0.6.0
CATEGORIES=	devel

MAINTAINER=	haskell@FreeBSD.org
COMMENT=	Shell script analysis tool

USES=		cabal

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>This minimal Makefile allows us to fetch the distribution file:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make cabal-extract
<span class=o>[</span>...]
Downloading the latest package list from hackage.haskell.org
cabal get ShellCheck-0.6.0
Downloading  ShellCheck-0.6.0
Downloaded   ShellCheck-0.6.0
Unpacking to ShellCheck-0.6.0/</code></pre></div></div><div class=paragraph><p>Now we have ShellCheck.cabal package description file, which allows us to fetch all package’s dependencies, including transitive ones:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make cabal-extract-deps
<span class=o>[</span>...]
Resolving dependencies...
Downloading  base-orphans-0.8.2
Downloaded   base-orphans-0.8.2
Downloading  primitive-0.7.0.0
Starting     base-orphans-0.8.2 <span class=o>(</span>lib<span class=o>)</span>
Building     base-orphans-0.8.2 <span class=o>(</span>lib<span class=o>)</span>
Downloaded   primitive-0.7.0.0
Downloading  dlist-0.8.0.7
<span class=o>[</span>...]</code></pre></div></div><div class=paragraph><p>As a side effect, the package’s dependencies are also compiled, so the command may take some time.
Once done, a list of required dependencies can generated:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make make-use-cabal
<span class=nv>USE_CABAL</span><span class=o>=</span>QuickCheck-2.12.6.1 <span class=se>\</span>
hashable-1.3.0.0 <span class=se>\</span>
integer-logarithms-1.0.3 <span class=se>\</span>
<span class=o>[</span>...]</code></pre></div></div><div class=paragraph><p>Haskell packages may contain revisions, just like FreeBSD ports.
Revisions can affect only <span class=filename>.cabal</span> files, but it is still important to pull them in.
To check <code>USE_CABAL</code> items for available revision updates, run following command:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make make-use-cabal-revs
<span class=nv>USE_CABAL</span><span class=o>=</span>QuickCheck-2.12.6.1_1 <span class=se>\</span>
hashable-1.3.0.0 <span class=se>\</span>
integer-logarithms-1.0.3_2 <span class=se>\</span>
<span class=o>[</span>...]</code></pre></div></div><div class=paragraph><p>Note additional version numbers after <code>_</code> symbol.
Put newly generated <code>USE_CABAL</code> list instead of an old one.</p></div><div class=paragraph><p>Finally, <span class=filename>distinfo</span> needs to be regenerated to contain all the distribution files:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% make makesum
<span class=o>=&gt;</span> ShellCheck-0.6.0.tar.gz doesn<span class=s1>&#39;t seem to exist in /usr/local/poudriere/ports/git/distfiles/cabal.
=&gt; Attempting to fetch https://hackage.haskell.org/package/ShellCheck-0.6.0/ShellCheck-0.6.0.tar.gz
ShellCheck-0.6.0.tar.gz                                136 kB  642 kBps    00s
=&gt; QuickCheck-2.12.6.1/QuickCheck-2.12.6.1.tar.gz doesn&#39;</span>t seem to exist <span class=k>in</span> /usr/local/poudriere/ports/git/distfiles/cabal.
<span class=o>=&gt;</span> Attempting to fetch https://hackage.haskell.org/package/QuickCheck-2.12.6.1/QuickCheck-2.12.6.1.tar.gz
QuickCheck-2.12.6.1/QuickCheck-2.12.6.1.tar.gz          65 kB  361 kBps    00s
<span class=o>[</span>...]</code></pre></div></div><div class=paragraph><p>The port is now ready for a test build and further adjustments like creating a plist, writing a description, adding license information, options, etc. as normal.</p></div><div class=paragraph><p>If you are not testing your port in a clean environment like with Poudriere, remember to run <code>make clean</code> before any testing.</p></div></div></div></div></div></div><div class=sect1><h2 id=using-autotools>6.6. Using GNU Autotools<a class=anchor href=#using-autotools></a></h2><div class=sectionbody><div class=paragraph><p>If a port needs any of the GNU Autotools software, add <code>USES=autoreconf</code>.
See <a href=../uses/#uses-autoreconf><code>autoreconf</code></a> for more information.</p></div></div></div><div class=sect1><h2 id=using-gettext>6.7. Using GNU <code>gettext</code><a class=anchor href=#using-gettext></a></h2><div class=sectionbody><div class=sect2><h3 id=using-gettext-basic>6.7.1. Basic Usage<a class=anchor href=#using-gettext-basic></a></h3><div class=paragraph><p>If the port requires <code>gettext</code>, set <code>USES= gettext</code>, and the port will inherit a dependency on <span class=filename>libintl.so</span> from <a class=package href=https://cgit.freebsd.org/ports/tree/devel/gettext/>devel/gettext</a>.
Other values for <code>gettext</code> usage are listed in <a href=../uses/#uses-gettext><code>USES=gettext</code></a>.</p></div><div class=paragraph><p>A rather common case is a port using <code>gettext</code> and <code>configure</code>.
Generally, GNU <code>configure</code> should be able to locate <code>gettext</code> automatically.</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	gettext
GNU_CONFIGURE=	yes</pre></div></div><div class=paragraph><p>If it ever fails to, hints at the location of <code>gettext</code> can be passed in <code>CPPFLAGS</code> and <code>LDFLAGS</code> using <code>localbase</code> as follows:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	gettext localbase:ldflags
GNU_CONFIGURE=	yes</pre></div></div></div><div class=sect2><h3 id=using-gettext-optional>6.7.2. Optional Usage<a class=anchor href=#using-gettext-optional></a></h3><div class=paragraph><p>Some software products allow for disabling NLS.
For example, through passing <code>--disable-nls</code> to <code>configure</code>.
In that case, the port must use <code>gettext</code> conditionally, depending on the status of the <code>NLS</code> option.
For ports of low to medium complexity, use this idiom:</p></div><div class="literalblock programlisting"><div class=content><pre>GNU_CONFIGURE=		yes

OPTIONS_DEFINE=		NLS
OPTIONS_SUB=		yes

NLS_USES=		gettext
NLS_CONFIGURE_ENABLE=	nls

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>Or using the older way of using options:</p></div><div class="literalblock programlisting"><div class=content><pre>GNU_CONFIGURE=		yes

OPTIONS_DEFINE=		NLS

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MNLS}
USES+=			gettext
PLIST_SUB+=		NLS=&#34;&#34;
.else
CONFIGURE_ARGS+=	--disable-nls
PLIST_SUB+=		NLS=&#34;@comment &#34;
.endif

.include &lt;bsd.port.mk&gt;</pre></div></div><div class=paragraph><p>The next item on the to-do list is to arrange so that the message catalog files are included in the packing list conditionally.
The <span class=filename>Makefile</span> part of this task is already provided by the idiom.
It is explained in the section on <a href=../plist/#plist-sub>advanced <span class=filename>pkg-plist</span> practices</a>.
In a nutshell, each occurrence of <code>%%NLS%%</code> in <span class=filename>pkg-plist</span> will be replaced by "`@comment <code>" if NLS is disabled, or by a null string if NLS is enabled.
Consequently, the lines prefixed by `%%NLS%%</code> will become mere comments in the final packing list if NLS is off;
otherwise the prefix will be just left out. Then insert <code>%%NLS%%</code> before each path to a message catalog file in <span class=filename>pkg-plist</span>.
For example:</p></div><div class="literalblock programlisting"><div class=content><pre>%%NLS%%share/locale/fr/LC_MESSAGES/foobar.mo
%%NLS%%share/locale/no/LC_MESSAGES/foobar.mo</pre></div></div><div class=paragraph><p>In high complexity cases, more advanced techniques may be needed, such as <a href=../plist/#plist-dynamic>dynamic packing list generation</a>.</p></div></div><div class=sect2><h3 id=using-gettext-catalog-directories>6.7.3. Handling Message Catalog Directories<a class=anchor href=#using-gettext-catalog-directories></a></h3><div class=paragraph><p>There is a point to note about installing message catalog files.
The target directories for them, which reside under <span class=filename>LOCALBASE/share/locale</span>, must not be created and removed by a port.
The most popular languages have their respective directories listed in <span class=filename>PORTSDIR/Templates/BSD.local.dist</span>.
The directories for many other languages are governed by the <a class=package href=https://cgit.freebsd.org/ports/tree/devel/gettext/>devel/gettext</a> port.
Consult its <span class=filename>pkg-plist</span> and see whether the port is going to install a message catalog file for a unique language.</p></div></div></div></div><div class=sect1><h2 id=using-perl>6.8. Using Perl<a class=anchor href=#using-perl></a></h2><div class=sectionbody><div class=paragraph><p>If <code>MASTER_SITES</code> is set to <code>CPAN</code>, the correct subdirectory is usually selected automatically.
If the default subdirectory is wrong, <code>CPAN/Module</code> can be used to change it.
<code>MASTER_SITES</code> can also be set to the old <code>MASTER_SITE_PERL_CPAN</code>, then the preferred value of <code>MASTER_SITE_SUBDIR</code> is the top-level hierarchy name.
For example, the recommended value for <code>p5-Module-Name</code> is <code>Module</code>.
The top-level hierarchy can be examined at <a href=http://cpan.org/modules/by-module/>cpan.org</a>.
This keeps the port working when the author of the module changes.</p></div><div class=paragraph><p>The exception to this rule is when the relevant directory does not exist or the distfile does not exist in that directory.
In such case, using author’s id as <code>MASTER_SITE_SUBDIR</code> is allowed.
The <code>CPAN:AUTHOR</code> macro can be used, which will be translated to the hashed author directory.
For example, <code>CPAN:AUTHOR</code> will be converted to <code>authors/id/A/AU/AUTHOR</code>.</p></div><div class=paragraph><p>When a port needs Perl support, it must set <code>USES=perl5</code> with the optional <code>USE_PERL5</code> described in <a href=../uses/#uses-perl5>the perl5 USES description</a>.</p></div><table id=using-perl-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 6. Read-Only Variables for Ports That Use Perl</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Read only variables</th><th class="tableblock halign-left valign-top">Means</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PERL</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The full path of the Perl 5 interpreter, either in the system or installed from a port, but without the version number. Use this when the software needs the path to the Perl interpreter. To replace "<code>#!</code>"lines in scripts, use <a href=../uses/#uses-shebangfix><code>shebangfix</code></a>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PERL_VERSION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The full version of Perl installed (for example, <code>5.8.9</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PERL_LEVEL</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The installed Perl version as an integer of the form <code>MNNNPP</code> (for example, <code>500809</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PERL_ARCH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Where Perl stores architecture dependent libraries. Defaults to <code>${ARCH}-freebsd</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PERL_PORT</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Name of the Perl port that is installed (for example, <code>perl5</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>SITE_PERL</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory name where site specific Perl packages go. This value is added to <code>PLIST_SUB</code>.</p></td></tr></tbody></table><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Ports of Perl modules which do not have an official website must link to <code>cpan.org</code> in the WWW line of <span class=filename>pkg-descr</span>.
The preferred URL form is <code><a href=http://search.cpan.org/dist/Module-Name/ class=bare>http://search.cpan.org/dist/Module-Name/</a></code> (including the trailing slash).</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Do not use <code>${SITE_PERL}</code> in dependency declarations.
Doing so assumes that <span class=filename>perl5.mk</span> has been included, which is not always true.
Ports depending on this port will have incorrect dependencies if this port’s files move later in an upgrade.
The right way to declare Perl module dependencies is shown in the example below.</p></div></td></tr></tbody></table></div><div id=use-perl-dependency-example class=exampleblock><div class=title>例 12. Perl Dependency Example</div><div class=content><div class="literalblock programlisting"><div class=content><pre>p5-IO-Tee&gt;=0.64:devel/p5-IO-Tee</pre></div></div></div></div><div class=paragraph><p>For Perl ports that install manual pages, the macro <code>PERL5_MAN3</code> and <code>PERL5_MAN1</code> can be used inside <span class=filename>pkg-plist</span>. For example,</p></div><div class="literalblock programlisting"><div class=content><pre>lib/perl5/5.14/man/man1/event.1.gz
lib/perl5/5.14/man/man3/AnyEvent::I3.3.gz</pre></div></div><div class=paragraph><p>can be replaced with</p></div><div class="literalblock programlisting"><div class=content><pre>%%PERL5_MAN1%%/event.1.gz
%%PERL5_MAN3%%/AnyEvent::I3.3.gz</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>There are no <code>PERL5_MAN_x_</code> macros for the other sections (<em>x</em> in <code>2</code> and <code>4</code> to <code>9</code>) because those get installed in the regular directories.</p></div></td></tr></tbody></table></div><div id=use-perl-ex-build class=exampleblock><div class=title>例 13. A Port Which Only Requires Perl to Build</div><div class=content><div class=paragraph><p>As the default USE_PERL5 value is build and run, set it to:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		perl5
USE_PERL5=	build</pre></div></div></div></div><div id=use-perl-ex-patch class=exampleblock><div class=title>例 14. A Port Which Also Requires Perl to Patch</div><div class=content><div class=paragraph><p>From time to time, using <a href="https://man.freebsd.org/cgi/man.cgi?query=sed&amp;sektion=1&amp;format=html">sed(1)</a> for patching is not enough.
When using <a href="https://man.freebsd.org/cgi/man.cgi?query=perl&amp;sektion=1&amp;format=html">perl(1)</a> is easier, use:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		perl5
USE_PERL5=	patch build run</pre></div></div></div></div><div id=use-perl-ex-configure class=exampleblock><div class=title>例 15. A Perl Module Which Needs <code>ExtUtils::MakeMaker</code> to Build</div><div class=content><div class=paragraph><p>Most Perl modules come with a <span class=filename>Makefile.PL</span> configure script.
In this case, set:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		perl5
USE_PERL5=	configure</pre></div></div></div></div><div id=use-perl-ex-modbuild class=exampleblock><div class=title>例 16. A Perl Module Which Needs <code>Module::Build</code> to Build</div><div class=content><div class=paragraph><p>When a Perl module comes with a <span class=filename>Build.PL</span> configure script, it can require Module::Build, in which case, set</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		perl5
USE_PERL5=	modbuild</pre></div></div><div class=paragraph><p>If it instead requires Module::Build::Tiny, set</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		perl5
USE_PERL5=	modbuildtiny</pre></div></div></div></div></div></div><div class=sect1><h2 id=using-x11>6.9. Using X11<a class=anchor href=#using-x11></a></h2><div class=sectionbody><div class=sect2><h3 id=x11-variables>6.9.1. X.Org Components<a class=anchor href=#x11-variables></a></h3><div class=paragraph><p>The X11 implementation available in The Ports Collection is X.Org.
If the application depends on X components, add <code>USES= xorg</code> and set <code>USE_XORG</code> to the list of required components.
A full list can be found in <a href=../uses/#uses-xorg><code>xorg</code></a>.</p></div><div class=paragraph><p>The Mesa Project is an effort to provide free OpenGL implementation.
To specify a dependency on various components of this project, use <code>USES= gl</code> and <code>USE_GL</code>.
See <a href=../uses/#uses-gl><code>gl</code></a> for a full list of available components.
For backwards compatibility, the value of <code>yes</code> maps to <code>glu</code>.</p></div><div id=use-xorg-example class=exampleblock><div class=title>例 17. <code>USE_XORG</code> Example</div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=		gl xorg
USE_GL=		glu
USE_XORG=	xrender xft xkbfile xt xaw</pre></div></div></div></div><table id=using-xorg-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 7. Variables for Ports That Use X</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USES= imake</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port uses <code>imake</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>XMKMF</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Set to the path of <code>xmkmf</code> if not in the <code>PATH</code>. Defaults to <code>xmkmf -a</code>.</p></td></tr></tbody></table><div id=using-x11-vars class=exampleblock><div class=title>例 18. Using X11-Related Variables</div><div class=content><div class="literalblock programlisting"><div class=content><pre># Use some X11 libraries
USES=		xorg
USE_XORG=	x11 xpm</pre></div></div></div></div></div><div class=sect2><h3 id=x11-motif>6.9.2. Ports That Require Motif<a class=anchor href=#x11-motif></a></h3><div class=paragraph><p>If the port requires a Motif library, define <code>USES= motif</code> in the <span class=filename>Makefile</span>.
Default Motif implementation is <a class=package href=https://cgit.freebsd.org/ports/tree/x11-toolkits/open-motif/>x11-toolkits/open-motif</a>.
Users can choose <a class=package href=https://cgit.freebsd.org/ports/tree/x11-toolkits/lesstif/>x11-toolkits/lesstif</a> instead by setting <code>WANT_LESSTIF</code> in their <span class=filename>make.conf</span>.</p></div><div class=paragraph><p><code>MOTIFLIB</code> will be set by <span class=filename>motif.mk</span> to reference the appropriate Motif library.
Please patch the source of the port to use <code>${MOTIFLIB}</code> wherever the Motif library is referenced in the original <span class=filename>Makefile</span> or <span class=filename>Imakefile</span>.</p></div><div class=paragraph><p>There are two common cases:</p></div><div class=ulist><ul><li><p>If the port refers to the Motif library as <code>-lXm</code> in its <span class=filename>Makefile</span> or <span class=filename>Imakefile</span>, substitute <code>${MOTIFLIB}</code> for it.</p></li><li><p>If the port uses <code>XmClientLibs</code> in its <span class=filename>Imakefile</span>, change it to <code>${MOTIFLIB} ${XTOOLLIB} ${XLIB}</code>.</p></li></ul></div><div class=paragraph><p>Note that <code>MOTIFLIB</code> (usually) expands to <code>-L/usr/local/lib -lXm -lXp</code> or <code>/usr/local/lib/libXm.a</code>, so there is no need to add <code>-L</code> or <code>-l</code> in front.</p></div></div><div class=sect2><h3 id=x11-fonts>6.9.3. X11 Fonts<a class=anchor href=#x11-fonts></a></h3><div class=paragraph><p>If the port installs fonts for the X Window System, put them in <span class=filename>LOCALBASE/lib/X11/fonts/local</span>.</p></div></div><div class=sect2><h3 id=x11-fake-display>6.9.4. Getting a Fake <code>DISPLAY</code> with Xvfb<a class=anchor href=#x11-fake-display></a></h3><div class=paragraph><p>Some applications require a working X11 display for compilation to succeed.
This poses a problem for machines that operate headless.
When this variable is used, the build infrastructure will start the virtual framebuffer X server.
The working <code>DISPLAY</code> is then passed to the build.
See <a href=../uses/#uses-display><code>USES=display</code></a> for the possible arguments.</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	display</pre></div></div></div><div class=sect2><h3 id=desktop-entries>6.9.5. Desktop Entries<a class=anchor href=#desktop-entries></a></h3><div class=paragraph><p>Desktop entries (<a href=http://standards.freedesktop.org/desktop-entry-spec/latest/>a Freedesktop standard</a>) provide a way to automatically adjust desktop features when a new program is installed, without requiring user intervention.
For example, newly-installed programs automatically appear in the application menus of compatible desktop environments.
Desktop entries originated in the GNOME desktop environment, but are now a standard and also work with KDE and Xfce.
This bit of automation provides a real benefit to the user, and desktop entries are encouraged for applications which can be used in a desktop environment.</p></div><div class=sect3><h4 id=desktop-entries-predefined>6.9.5.1. Using Predefined <span class=filename>.desktop</span> Files<a class=anchor href=#desktop-entries-predefined></a></h4><div class=paragraph><p>Ports that include predefined <span class=filename>*.desktop</span> must include those files in <span class=filename>pkg-plist</span> and install them in the <span class=filename>$LOCALBASE/share/applications</span> directory.
The <a href=../makefiles/#install-macros><code>INSTALL_DATA</code> macro</a> is useful for installing these files.</p></div></div><div class=sect3><h4 id=updating-desktop-database>6.9.5.2. Updating Desktop Database<a class=anchor href=#updating-desktop-database></a></h4><div class=paragraph><p>If a port has a MimeType entry in its <span class=filename>portname.desktop</span>, the desktop database must be updated after install and deinstall.
To do this, define <code>USES</code>= desktop-file-utils.</p></div></div><div class=sect3><h4 id=desktop-entries-macro>6.9.5.3. Creating Desktop Entries with <code>DESKTOP_ENTRIES</code><a class=anchor href=#desktop-entries-macro></a></h4><div class=paragraph><p>Desktop entries can be easily created for applications by using <code>DESKTOP_ENTRIES</code>.
A file named <span class=filename>name.desktop</span> will be created, installed, and added to <span class=filename>pkg-plist</span> automatically.
Syntax is:</p></div><div class="literalblock programlisting"><div class=content><pre>DESKTOP_ENTRIES=	&#34;NAME&#34; &#34;COMMENT&#34; &#34;ICON&#34; &#34;COMMAND&#34; &#34;CATEGORY&#34; StartupNotify</pre></div></div><div class=paragraph><p>The list of possible categories is available on the <a href=http://standards.freedesktop.org/menu-spec/latest/apa.html>Freedesktop website</a>.
<code>StartupNotify</code> indicates whether the application is compatible with <em>startup notifications</em>.
These are typically a graphic indicator like a clock that appear at the mouse pointer, menu, or panel to give the user an indication when a program is starting.
A program that is compatible with startup notifications clears the indicator after it has started.
Programs that are not compatible with startup notifications would never clear the indicator (potentially confusing and infuriating the user), and must have <code>StartupNotify</code> set to <code>false</code> so the indicator is not shown at all.</p></div><div class=paragraph><p>Example:</p></div><div class="literalblock programlisting"><div class=content><pre>DESKTOP_ENTRIES=	&#34;ToME&#34; &#34;Roguelike game based on JRR Tolkien&#39;s work&#34; \
			&#34;${DATADIR}/xtra/graf/tome-128.png&#34; \
			&#34;tome -v -g&#34; &#34;Application;Game;RolePlaying;&#34; \
			false</pre></div></div></div></div></div></div><div class=sect1><h2 id=using-gnome>6.10. Using GNOME<a class=anchor href=#using-gnome></a></h2><div class=sectionbody><div class=sect2><h3 id=using-gnome-introduction>6.10.1. Introduction<a class=anchor href=#using-gnome-introduction></a></h3><div class=paragraph><p>This chapter explains the GNOME framework as used by ports.
The framework can be loosely divided into the base components, GNOME desktop components, and a few special macros that simplify the work of port maintainers.</p></div></div><div class=sect2><h3 id=use-gnome>6.10.2. Using <code>USE_GNOME</code><a class=anchor href=#use-gnome></a></h3><div class=paragraph><p>Adding this variable to the port allows the use of the macros and components defined in <span class=filename>bsd.gnome.mk</span>.
The code in <span class=filename>bsd.gnome.mk</span> adds the needed build-time, run-time or library dependencies or the handling of special files.
GNOME applications under FreeBSD use the <code>USE_GNOME</code> infrastructure.
Include all the needed components as a space-separated list.
The <code>USE_GNOME</code> components are divided into these virtual lists: basic components, GNOME 3 components and legacy components.
If the port needs only GTK3 libraries, this is the shortest way to define it:</p></div><div class="literalblock programlisting"><div class=content><pre>USE_GNOME=	gtk30</pre></div></div><div class=paragraph><p><code>USE_GNOME</code> components automatically add the dependencies they need.
Please see <a href=#gnome-components>GNOME Components</a> for an exhaustive list of all <code>USE_GNOME</code> components and which other components they imply and their dependencies.</p></div><div class=paragraph><p>Here is an example <span class=filename>Makefile</span> for a GNOME port that uses many of the techniques outlined in this document.
Please use it as a guide for creating new ports.</p></div><div class="literalblock programlisting"><div class=content><pre># $FreeBSD$

PORTNAME=	regexxer
DISTVERSION=	0.10
CATEGORIES=	devel textproc gnome
MASTER_SITES=	GNOME

MAINTAINER=	kwm@FreeBSD.org
COMMENT=	Interactive tool for performing search and replace operations

USES=		gettext gmake localbase:ldflags pathfix pkgconfig tar:xz
GNU_CONFIGURE=	yes
USE_GNOME=	gnomeprefix intlhack gtksourceviewmm3

GLIB_SCHEMAS=	org.regexxer.gschema.xml

.include &lt;bsd.port.mk&gt;</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>USE_GNOME</code> macro without any arguments does not add any dependencies to the port.
<code>USE_GNOME</code> cannot be set after <span class=filename>bsd.port.pre.mk</span>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=using-gnome-variables>6.10.3. Variables<a class=anchor href=#using-gnome-variables></a></h3><div class=paragraph><p>This section explains which macros are available and how they are used.
Like they are used in the above example.
The <a href=#gnome-components>GNOME Components</a> has a more in-depth explanation.
<code>USE_GNOME</code> has to be set for these macros to be of use.</p></div><div class=dlist><dl><dt class=hdlist1><code>GLIB_SCHEMAS</code></dt><dd><p>List of all the glib schema files the port installs.
The macro will add the files to the port plist and handle the registration of these files on install and deinstall.</p><div class=paragraph><p>The glib schema files are written in XML and end with the <span class=filename>gschema.xml</span> extension.
They are installed in the <span class=filename>share/glib-2.0/schemas/</span> directory.
These schema files contain all application config values with their default settings.
The actual database used by the applications is built by glib-compile-schema, which is run by the <code>GLIB_SCHEMAS</code> macro.</p></div><div class="literalblock programlisting"><div class=content><pre>GLIB_SCHEMAS=foo.gschema.xml</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Do not add glib schemas to the <span class=filename>pkg-plist</span>.
If they are listed in <span class=filename>pkg-plist</span>, they will not be registered and the applications might not work properly.</p></div></td></tr></tbody></table></div></dd><dt class=hdlist1><code>GCONF_SCHEMAS</code></dt><dd><p>List all the gconf schema files.
The macro will add the schema files to the port plist and will handle their registration on install and deinstall.</p><div class=paragraph><p>GConf is the XML-based database that virtually all GNOME applications use for storing their settings.
These files are installed into the <span class=filename>etc/gconf/schemas</span> directory.
This database is defined by installed schema files that are used to generate <span class=filename>%gconf.xml</span> key files.
For each schema file installed by the port, there must be an entry in the <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>GCONF_SCHEMAS=my_app.schemas my_app2.schemas my_app3.schemas</pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Gconf schemas are listed in the <code>GCONF_SCHEMAS</code> macro rather than <span class=filename>pkg-plist</span>.
If they are listed in <span class=filename>pkg-plist</span>, they will not be registered and the applications might not work properly.</p></div></td></tr></tbody></table></div></dd><dt class=hdlist1><code>INSTALLS_OMF</code></dt><dd><p>Open Source Metadata Framework (OMF) files are commonly used by GNOME 2 applications.
These files contain the application help file information, and require special processing by ScrollKeeper/rarian.
To properly register OMF files when installing GNOME applications from packages, make sure that <code>omf</code> files are listed in <code>pkg-plist</code> and that the port <span class=filename>Makefile</span> has <code>INSTALLS_OMF</code> defined:</p><div class="literalblock programlisting"><div class=content><pre>INSTALLS_OMF=yes</pre></div></div><div class=paragraph><p>When set, <span class=filename>bsd.gnome.mk</span> automatically scans <span class=filename>pkg-plist</span> and adds appropriate <code>@exec</code> and <code>@unexec</code> directives for each <span class=filename>.omf</span> to track in the OMF registration database.</p></div></dd></dl></div></div></div></div><div class=sect1><h2 id=gnome-components>6.11. GNOME Components<a class=anchor href=#gnome-components></a></h2><div class=sectionbody><div class=paragraph><p>For further help with a GNOME port, look at some of the <a href=https://www.FreeBSD.org/ports/gnome.html>existing ports</a> for examples.
The <a href=https://www.FreeBSD.org/gnome/>FreeBSD GNOME page</a> has contact information if more help is needed.
The components are divided into GNOME components that are currently in use and legacy components.
If the component supports argument, they are listed between parenthesis in the description.
The first is the default.
"Both" is shown if the component defaults to adding to both build and run dependencies.</p></div><table id=gnome-components-list class="tableblock frame-all grid-all stretch"><caption class=title>表 8. GNOME Components</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Component</th><th class="tableblock halign-left valign-top">Associated program</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>atk</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>accessibility/atk</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Accessibility toolkit (ATK)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>atkmm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>accessibility/atkmm</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for atk</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>cairo</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/cairo</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Vector graphics library with cross-device output support</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>cairomm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/cairomm</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for cairo</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>dconf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/dconf</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Configuration database system (both, build, run)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>evolutiondataserver3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>databases/evolution-data-server</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Data backends for the Evolution integrated mail/PIM suite</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gdkpixbuf2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/gdk-pixbuf2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Graphics library for GTK+</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>glib20</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/glib20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME core library <code>glib20</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>glibmm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/glibmm</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for glib20</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomecontrolcenter3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>sysutils/gnome-control-center</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME 3 Control Center</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomedesktop3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11/gnome-desktop</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME 3 desktop UI library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gsound</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>audio/gsound</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GObject library for playing system sounds (both, build, run)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtk-update-icon-cache</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/gtk-update-icon-cache</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gtk-update-icon-cache utility from the Gtk+ toolkit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtk20</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtk20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gtk+ 2 toolkit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtk30</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtk30</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gtk+ 3 toolkit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtkmm20</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtkmm20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings 2.0 for the gtk20 toolkit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtkmm24</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtkmm24</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings 2.4 for the gtk20 toolkit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtkmm30</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtkmm30</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings 3.0 for the gtk30 toolkit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtksourceview2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtksourceview2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Widget that adds syntax highlighting to GtkTextView</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtksourceview3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtksourceview3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Text widget that adds syntax highlighting to the GtkTextView widget</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtksourceviewmm3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtksourceviewmm3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for the gtksourceview3 library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gvfs</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/gvfs</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME virtual file system</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>intltool</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>textproc/intltool</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Tool for internationalization (also see intlhack)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>introspection</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/gobject-introspection</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Basic introspection bindings and tools to generate introspection bindings. Most of the time :build is enough, :both/:run is only need for applications that use introspection bindings. (both, build, run)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgda5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>databases/libgda5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Provides uniform access to different kinds of data sources</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgda5-ui</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>databases/libgda5-ui</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>UI library from the libgda5 library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgdamm5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>databases/libgdamm5</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for the libgda5 library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgsf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/libgsf</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extensible I/O abstraction for dealing with structured file formats</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>librsvg2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/librsvg2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library for parsing and rendering SVG vector-graphic files</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libsigc++20</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/libsigc++20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Callback Framework for C++</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libxml++26</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>textproc/libxml++26</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for the libxml2 library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libxml2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>textproc/libxml2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>XML parser library (both, build, run)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libxslt</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>textproc/libxslt</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>XSLT C library (both, build, run)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>metacity</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-wm/metacity</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Window manager from GNOME</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>nautilus3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-fm/nautilus</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME file manager</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pango</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/pango</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Open-source framework for the layout and rendering of i18n text</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pangomm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/pangomm</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for the pango library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>py3gobject3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/py3-gobject3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Python 3, GObject 3.0 bindings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pygobject3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/py-gobject3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Python 2, GObject 3.0 bindings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>vte3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/vte3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Terminal widget with improved accessibility and I18N support</p></td></tr></tbody></table><table id=gnome-components-macro class="tableblock frame-all grid-all stretch"><caption class=title>表 9. GNOME Macro Components</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Component</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomeprefix</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Supply <code>configure</code> with some default locations.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>intlhack</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Same as intltool, but patches to make sure <span class=filename>share/locale/</span> is used. Please only use when <code>intltool</code> alone is not enough.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>referencehack</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>This macro is there to help splitting of the API or reference documentation into its own port.</p></td></tr></tbody></table><table id=gnome-components-legacy class="tableblock frame-all grid-all stretch"><caption class=title>表 10. GNOME Legacy Components</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Component</th><th class="tableblock halign-left valign-top">Associated program</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>atspi</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>accessibility/at-spi</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Assistive Technology Service Provider Interface</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>esound</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>audio/esound</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Enlightenment sound package</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gal2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gal2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Collection of widgets taken from GNOME 2 gnumeric</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gconf2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/gconf2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Configuration database system for GNOME 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gconfmm26</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/gconfmm26</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ bindings for gconf2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gdkpixbuf</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/gdk-pixbuf</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Graphics library for GTK+</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>glib12</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/glib12</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>glib 1.2 core library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomedocutils</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>textproc/gnome-doc-utils</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME doc utils</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomemimedata</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>misc/gnome-mime-data</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>MIME and Application database for GNOME 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomesharp20</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gnome-sharp20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME 2 interfaces for the .NET runtime</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomespeech</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>accessibility/gnome-speech</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME 2 text-to-speech API</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gnomevfs2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/gnome-vfs</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME 2 Virtual File System</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtk12</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtk12</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gtk+ 1.2 toolkit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtkhtml3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>www/gtkhtml3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Lightweight HTML rendering/printing/editing engine</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtkhtml4</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>www/gtkhtml4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Lightweight HTML rendering/printing/editing engine</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtksharp20</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtk-sharp20</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GTK+ and GNOME 2 interfaces for the .NET runtime</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gtksourceview</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/gtksourceview</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Widget that adds syntax highlighting to GtkTextView</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libartgpl2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/libart_lgpl</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library for high-performance 2D graphics</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libbonobo</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/libbonobo</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Component and compound document system for GNOME 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libbonoboui</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/libbonoboui</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GUI frontend to the libbonobo component of GNOME 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgda4</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>databases/libgda4</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Provides uniform access to different kinds of data sources</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libglade2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/libglade2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME 2 glade library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgnome</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11/libgnome</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Libraries for GNOME 2, a GNU desktop environment</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgnomecanvas</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>graphics/libgnomecanvas</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Graphics library for GNOME 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgnomekbd</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11/libgnomekbd</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>GNOME 2 keyboard shared library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgnomeprint</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>print/libgnomeprint</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gnome 2 print support library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgnomeprintui</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/libgnomeprintui</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Gnome 2 print support library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgnomeui</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/libgnomeui</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Libraries for the GNOME 2 GUI, a GNU desktop environment</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgtkhtml</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>www/libgtkhtml</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Lightweight HTML rendering/printing/editing engine</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libgtksourceviewmm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/libgtksourceviewmm</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>c++ binding of GtkSourceView</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libidl</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/libIDL</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library for creating trees of CORBA IDL file</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libsigc++12</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/libsigc++12</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Callback Framework for C++</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libwnck</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/libwnck</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library used for writing pagers and taskslists</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libwnck3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/libwnck3</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library used for writing pagers and taskslists</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>orbit2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/ORBit2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>High-performance CORBA ORB with support for the C language</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pygnome2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/py-gnome2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Python bindings for GNOME 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pygobject</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>devel/py-gobject</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Python 2, GObject 2.0 bindings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pygtk2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/py-gtk2</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Set of Python bindings for GTK+</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pygtksourceview</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/py-gtksourceview</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Python bindings for GtkSourceView 2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>vte</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>x11-toolkits/vte</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Terminal widget with improved accessibility and I18N support</p></td></tr></tbody></table><table id=gnome-components-deprecated class="tableblock frame-all grid-all stretch"><caption class=title>表 11. Deprecated Components: Do Not Use</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Component</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pangox-compat</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>pangox-compat has been deprecated and split off from the pango package.</p></td></tr></tbody></table></div></div><div class=sect1><h2 id=using-qt>6.12. Using Qt<a class=anchor href=#using-qt></a></h2><div class=sectionbody><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>For ports that are part of Qt itself, see <a href=../uses/#uses-qt-dist><code>qt-dist</code></a>.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=qt-common>6.12.1. Ports That Require Qt<a class=anchor href=#qt-common></a></h3><div class=paragraph><p>The Ports Collection provides support for Qt 5 with <code>USES+=qt:5</code>.
Set <code>USE_QT</code> to the list of required Qt components (libraries, tools, plugins).</p></div><div class=paragraph><p>The Qt framework exports a number of variables which can be used by ports, some of them listed below:</p></div><table id=using-qt-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 12. Variables Provided to Ports That Use Qt</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>QMAKE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full path to <code>qmake</code> binary.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LRELEASE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full path to <code>lrelease</code> utility.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>MOC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full path to <code>moc</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RCC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full path to <code>rcc</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>UIC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full path to <code>uic</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>QT_INCDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt include directory.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>QT_LIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt libraries path.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>QT_PLUGINDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt plugins path.</p></td></tr></tbody></table></div><div class=sect2><h3 id=qt-components>6.12.2. Component Selection<a class=anchor href=#qt-components></a></h3><div class=paragraph><p>Individual Qt tool and library dependencies must be specified in <code>USE_QT</code>.
Every component can be suffixed with <code>_build</code> or <code>_run</code>, the suffix indicating whether the dependency on the component is at buildtime or runtime.
If unsuffixed, the component will be depended on at both build- and runtime.
Usually, library components are specified unsuffixed, tool components are mostly specified with the <code>_build</code> suffix and plugin components are specified with the <code>_run</code> suffix.
The most commonly used components are listed below (all available components are listed in <code>_USE_QT_ALL</code>, and <code>_USE_QT5_ONLY</code> in <span class=filename>/usr/ports/Mk/Uses/qt.mk</span>):</p></div><table id=using-qt-library-list class="tableblock frame-none grid-all stretch"><caption class=title>表 13. Available Qt Library Components</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>3d</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt3D module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>assistant</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 documentation browser</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>canvas3d</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt canvas3d module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>charts</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 charts module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>concurrent</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt multi-threading module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>connectivity</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt connectivity (Bluetooth/NFC) module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>core</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt core non-graphical module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>datavis3d</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 3D data visualization module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>dbus</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt D-Bus inter-process communication module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>declarative</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt declarative framework for dynamic user interfaces</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>designer</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 graphical user interface designer</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>diag</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Tool for reporting diagnostic information about Qt and its environment</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>doc</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 documentation</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>examples</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 examples sourcecode</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gamepad</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 Gamepad Module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>graphicaleffects</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt Quick graphical effects</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gui</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt graphical user interface module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>help</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt online help integration module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>l10n</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt localized messages</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>linguist</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 translation tool</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>location</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt location module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>multimedia</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt audio, video, radio and camera support module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>network</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt network module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>networkauth</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt network auth module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>opengl</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5-compatible OpenGL support module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>paths</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Command line client to QStandardPaths</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>phonon4</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE multimedia framework</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pixeltool</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 screen magnifier</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plugininfo</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt5 plugin metadata dumper</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>printsupport</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt print support module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qdbus</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt command-line interface to D-Bus</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qdbusviewer</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 graphical interface to D-Bus</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qdoc</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt documentation generator</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qdoc-data</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>QDoc configuration files</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qev</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt QWidget events introspection tool</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qmake</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt Makefile generator</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>quickcontrols</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Set of controls for building complete interfaces in Qt Quick</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>quickcontrols2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Set of controls for building complete interfaces in Qt Quick</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>remoteobjects</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt5 SXCML module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>script</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 4-compatible scripting module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>scripttools</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt Script additional components</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>scxml</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt5 SXCML module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sensors</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt sensors module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>serialbus</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt functions to access industrial bus systems</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>serialport</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt functions to access serial ports</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>speech</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Accessibilty features for Qt5</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt SQL database integration module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql-ibase</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt InterBase/Firebird database plugin</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql-mysql</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt MySQL database plugin</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql-odbc</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt Open Database Connectivity plugin</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql-pgsql</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt PostgreSQL database plugin</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql-sqlite2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt SQLite 2 database plugin</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql-sqlite3</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt SQLite 3 database plugin</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sql-tds</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt TDS Database Connectivity database plugin</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>svg</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt SVG support module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>testlib</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt unit testing module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>uiplugin</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Custom Qt widget plugin interface for Qt Designer</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>uitools</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt Designer UI forms support module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>virtualkeyboard</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 Virtual Keyboard Module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>wayland</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt5 wrapper for Wayland</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>webchannel</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 library for integration of C++/QML with HTML/js clients</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>webengine</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt 5 library to render web content</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>webkit</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>QtWebKit with a more modern WebKit code base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>websockets</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt implementation of WebSocket protocol</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>websockets-qml</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt implementation of WebSocket protocol (QML bindings)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>webview</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt component for displaying web content</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>widgets</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt C++ widgets module</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>x11extras</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt platform-specific features for X11-based systems</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>xml</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt SAX and DOM implementations</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>xmlpatterns</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt support for XPath, XQuery, XSLT and XML Schema</p></td></tr></tbody></table><div class=paragraph><p>To determine the libraries an application depends on, run <code>ldd</code> on the main executable after a successful compilation.</p></div><table id=using-qt-tools-list class="tableblock frame-none grid-all stretch"><caption class=title>表 14. Available Qt Tool Components</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>buildtools</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>build tools (<code>moc</code>, <code>rcc</code>), needed for almost every Qt application.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>linguisttools</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>localization tools: <code>lrelease</code>, <code>lupdate</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qmake</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Makefile generator/build utility</p></td></tr></tbody></table><table id=using-qt-plugins-list class="tableblock frame-none grid-all stretch"><caption class=title>表 15. Available Qt Plugin Components</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>imageformats</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>plugins for TGA, TIFF, and MNG image formats</p></td></tr></tbody></table><div id=qt5-components-example class=exampleblock><div class=title>例 19. Selecting Qt 5 Components</div><div class=content><div class=paragraph><p>In this example, the ported application uses the Qt 5 graphical user interface library, the Qt 5 core library, all of the Qt 5 code generation tools and Qt 5’s Makefile generator.
Since the <code>gui</code> library implies a dependency on the core library, <code>core</code> does not need to be specified.
The Qt 5 code generation tools <code>moc</code>, <code>uic</code> and <code>rcc</code>, as well as the Makefile generator <code>qmake</code> are only needed at buildtime, thus they are specified with the <code>_build</code> suffix:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	qt:5
USE_QT=	gui buildtools_build qmake_build</pre></div></div></div></div></div><div class=sect2><h3 id=using-qmake>6.12.3. Using <code>qmake</code><a class=anchor href=#using-qmake></a></h3><div class=paragraph><p>If the application provides a qmake project file (<span class=filename>*.pro</span>), define <code>USES= qmake</code> along with <code>USE_QT</code>.
<code>USES= qmake</code> already implies a build dependency on qmake, therefore the qmake component can be omitted from <code>USE_QT</code>.
Similar to <a href=#using-cmake>CMake</a>, qmake supports out-of-source builds, which can be enabled by specifying the <code>outsource</code> argument (see <a href=#using-qmake-example><code>USES= qmake</code> example</a>).
Also see <a href=#using-qmake-arguments>Possible Arguments for <code>USES= qmake</code></a>.</p></div><table id=using-qmake-arguments class="tableblock frame-none grid-all stretch"><caption class=title>表 16. Possible Arguments for <code>USES= qmake</code></caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>no_configure</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Do not add the configure target. This is implied by <code>HAS_CONFIGURE=yes</code> and <code>GNU_CONFIGURE=yes</code>. It is required when the build only needs the environment setup from <code>USES= qmake</code>, but otherwise runs <code>qmake</code> on its own.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>no_env</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Suppress modification of the configure and make environments. It is only required when <code>qmake</code> is used to configure the software and the build fails to understand the environment setup by <code>USES= qmake</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>norecursive</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Do not pass the <code>-recursive</code> argument to <code>qmake</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>outsource</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Perform an out-of-source build.</p></td></tr></tbody></table><table id=using-qmake-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 17. Variables for Ports That Use <code>qmake</code></caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>QMAKE_ARGS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Port specific qmake flags to be passed to the <code>qmake</code> binary.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>QMAKE_ENV</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Environment variables to be set for the <code>qmake</code> binary. The default is <code>${CONFIGURE_ENV}</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>QMAKE_SOURCE_PATH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to qmake project files (<span class=filename>.pro</span>). The default is <code>${WRKSRC}</code> if an out-of-source build is requested, empty otherwise.</p></td></tr></tbody></table><div class=paragraph><p>When using <code>USES= qmake</code>, these settings are deployed:</p></div><div class="literalblock programlisting"><div class=content><pre>CONFIGURE_ARGS+=	--with-qt-includes=${QT_INCDIR} \
			--with-qt-libraries=${QT_LIBDIR} \
			--with-extra-libs=${LOCALBASE}/lib \
			--with-extra-includes=${LOCALBASE}/include

CONFIGURE_ENV+=	QTDIR=&#34;${QT_PREFIX}&#34; QMAKE=&#34;${QMAKE}&#34; \
		MOC=&#34;${MOC}&#34; RCC=&#34;${RCC}&#34; UIC=&#34;${UIC}&#34; \
		QMAKESPEC=&#34;${QMAKESPEC}&#34;

PLIST_SUB+=	QT_INCDIR=${QT_INCDIR_REL} \
		QT_LIBDIR=${QT_LIBDIR_REL} \
		QT_PLUGINDIR=${QT_PLUGINDIR_REL}</pre></div></div><div class=paragraph><p>Some configure scripts do not support the arguments above.
To suppress modification of <code>CONFIGURE_ENV</code> and <code>CONFIGURE_ARGS</code>, set <code>USES= qmake:no_env</code>.</p></div><div id=using-qmake-example class=exampleblock><div class=title>例 20. <code>USES= qmake</code> Example</div><div class=content><div class=paragraph><p>This snippet demonstrates the use of qmake for a Qt 5 port:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	qmake:outsource qt:5
USE_QT=	buildtools_build</pre></div></div></div></div><div class=paragraph><p>Qt applications are often written to be cross-platform and often X11/Unix is not the platform they are developed on, which in turn leads to certain loose ends, like:</p></div><div class=ulist><ul><li><p><em>Missing additional include paths.</em> Many applications come with system tray icon support, but neglect to look for includes and/or libraries in the X11 directories. To add directories to `qmake’s include and library search paths via the command line, use:</p><div class="literalblock programlisting"><div class=content><pre>QMAKE_ARGS+=	INCLUDEPATH+=${LOCALBASE}/include \
		LIBS+=-L${LOCALBASE}/lib</pre></div></div></li><li><p><em>Bogus installation paths.</em> Sometimes data such as icons or .desktop files are by default installed into directories which are not scanned by XDG-compatible applications. <a class=package href=https://cgit.freebsd.org/ports/tree/editors/texmaker/>editors/texmaker</a> is an example for this - look at <span class=filename>patch-texmaker.pro</span> in the <span class=filename>files</span> directory of that port for a template on how to remedy this directly in the <code>qmake</code> project file.</p></li></ul></div></div></div></div><div class=sect1><h2 id=using-kde>6.13. Using KDE<a class=anchor href=#using-kde></a></h2><div class=sectionbody><div class=sect2><h3 id=kde5-variables>6.13.1. KDE Variable Definitions<a class=anchor href=#kde5-variables></a></h3><div class=paragraph><p>If the application depends on KDE, set <code>USES+=kde:5</code> and <code>USE_KDE</code> to the list of required components.
<code>_build</code> and <code>_run</code> suffixes can be used to force components dependency type (for example, <code>baseapps_run</code>).
If no suffix is set, a default dependency type will be used.
To force both types, add the component twice with both suffixes (for example, <code>ecm_build ecm_run</code>).
Available components are listed below (up-to-date components are also listed in <span class=filename>/usr/ports/Mk/Uses/kde.mk</span>):</p></div><table id=using-kde-components class="tableblock frame-none grid-all stretch"><caption class=title>表 18. Available KDE Components</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>activities</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 runtime and library to organize work in separate activities</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>activities-stats</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 statistics for activities</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>activitymanagerd</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>System service to manage user’s activities, track the usage patterns</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadi</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Storage server for KDE-Pim</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadicalendar</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Akonadi Calendar Integration</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadiconsole</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Akonadi management and debugging console</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadicontacts</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Libraries and daemons to implement Contact Management in Akonadi</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadiimportwizard</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Import data from other mail clients to KMail</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadimime</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Libraries and daemons to implement basic email handling</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadinotes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE library for accessing mail storages in MBox format</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akonadisearch</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Libraries and daemons to implement searching in Akonadi</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>akregator</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A Feed Reader by KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>alarmcalendar</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE API for KAlarm alarms</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>apidox</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 API Documentation Tools</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>archive</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library that provides classes for handling archive formats</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>attica</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Open Collaboration Services API library KDE5 version</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>attica5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Open Collaboration Services API library KDE5 version</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>auth</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 abstraction to system policy and authentication features</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>baloo</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 Framework for searching and managing user metadata</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>baloo-widgets</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>BalooWidgets library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>baloo5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 Framework for searching and managing user metadata</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>blog</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE API for weblogging access</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>bookmarks</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for bookmarks and the XBEL format</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>breeze</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 artwork, styles and assets for the Breeze visual style</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>breeze-gtk</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 Breeze visual style for Gtk</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>breeze-icons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Breeze icon theme for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>calendarcore</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE calendar access library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>calendarsupport</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Calendar support libraries for KDEPim</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>calendarutils</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE utility and user interface functions for accessing calendar</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>codecs</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for string manipulation</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>completion</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 text completion helpers and widgets</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>config</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 widgets for configuration dialogs</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>configwidgets</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 widgets for configuration dialogs</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>contacts</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE api to manage contact information</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>coreaddons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 addons to QtCore</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>crash</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library to handle crash analysis and bug report from apps</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>dbusaddons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 addons to QtDBus</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>decoration</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 library to create window decorations</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>designerplugin</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 integration of Frameworks widgets in Qt Designer/Creator</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>discover</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 package management tools</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>dnssd</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 abstraction to system DNSSD features</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>doctools</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 documentation generation from docbook</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>drkonqi</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 crash handler</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ecm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Extra modules and scripts for CMake</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>emoticons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library to convert emoticons</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>eventviews</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Event view libriares for KDEPim</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>filemetadata</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for extracting file metadata</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>frameworkintegration</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 workspace and cross-framework integration plugins</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gapi</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE based library to access google services</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>globalaccel</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library to add support for global workspace shortcuts</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>grantlee-editor</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Editor for Grantlee themes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>grantleetheme</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE PIM grantleetheme</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>gravatar</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library for gravatar support</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>guiaddons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 addons to QtGui</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>holidays</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE library for calendar holidays</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>hotkeys</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 library for hotkeys</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>i18n</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 advanced internationalization framework</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>iconthemes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for handling icons in applications</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>identitymanagement</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE pim identities</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>idletime</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for monitoring user activity</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>imap</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE API for IMAP support</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>incidenceeditor</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Incidence editor libriares for KDEPim</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>infocenter</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 utility providing system information</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>init</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 process launcher to speed up launching KDE applications</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>itemmodels</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 models for Qt Model/View system</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>itemviews</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 widget addons for Qt Model/View</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>jobwidgets</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 widgets for tracking KJob instance</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>js</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library providing an ECMAScript interpreter</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>jsembed</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for binding JavaScript objects to QObjects</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kaddressbook</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE contact manager</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kalarm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Personal alarm scheduler</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kalarm</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Personal alarm scheduler</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kate</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Basic editor framework for the KDE system</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kcmutils</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 utilities for working with KCModules</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kde-cli-tools</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 non-interactive system tools</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kde-gtk-config</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 GTK2 and GTK3 configurator</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdeclarative</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library providing integration of QML and KDE Frameworks</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kded</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 extensible daemon for providing system level services</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdelibs4support</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 porting aid from KDELibs4</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdepim-addons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE PIM addons</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdepim-apps-libs</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE PIM mail related libraries</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdepim-runtime5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE PIM tools and services</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdeplasma-addons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 addons to improve the Plasma experience</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdesu</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 integration with su for elevated privileges</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kdewebkit</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library providing integration of QtWebKit</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kgamma5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 monitor’s gamma settings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>khtml</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 KTHML rendering engine</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kimageformats</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library providing support for additional image formats</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kio</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 resource and network access abstraction</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kirigami2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>QtQuick based components set</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kitinerary</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Data Model and Extraction System for Travel Reservation information</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kmail</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE mail client</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kmail</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE mail client</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kmail-account-wizard</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE mail account wizard</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kmenuedit</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 menu editor</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>knotes</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Popup notes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kontact</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE Personal Information Manager</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kontact</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE Personal Information Manager</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kontactinterface</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE glue for embedding KParts into Kontact</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>korganizer</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Calendar and scheduling Program</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kpimdav</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>A DAV protocol implementation with KJobs</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kpkpass</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library to deal with Apple Wallet pass files</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kross</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 multi-language application scripting</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kscreen</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 screen management library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kscreenlocker</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 secure lock screen architecture</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ksmtp</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Job-based library to send email through an SMTP server</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ksshaskpass</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 ssh-add frontend</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ksysguard</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 utility to track and control the running processes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kwallet-pam</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 KWallet PAM Integration</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kwayland-integration</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Integration plugins for a Wayland-based desktop</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kwin</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 window manager</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>kwrited</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 daemon listening for wall and write messages</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ldap</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>LDAP access API for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkcddb</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE CDDB library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkcompactdisc</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE library for interfacing with audio CDs</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkdcraw</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>LibRaw interface for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkdegames</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Libraries used by KDE games</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkdepim</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE PIM Libraries</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkeduvocdocument</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library for reading and writing vocabulary files</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkexiv2</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Exiv2 library interface for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkipi</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE Image Plugin Interface</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkleo</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Certificate manager for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libksane</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>SANE library interface for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libkscreen</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 screen management library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libksieve</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Sieve libriares for KDEPim</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libksysguard</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 library to track and control running processes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mailcommon</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Common libriares for KDEPim</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mailimporter</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Import mbox files to KMail</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mailtransport</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE library to managing mail transport</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>marble</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Virtual globe and world atlas for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mbox</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE library for accessing mail storages in MBox format</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mbox-importer</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Import mbox files to KMail</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mediaplayer</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 plugin interface for media player features</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>messagelib</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library for handling messages</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>milou</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 Plasmoid for search</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mime</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Library for handling MIME data</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>newstuff</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for downloading application assets from the network</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>notifications</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 abstraction for system notifications</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>notifyconfig</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 configuration system for KNotify</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>okular</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE universal document viewer</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>oxygen</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 Oxygen style</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>oxygen-icons5</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The Oxygen icon theme for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>package</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library to load and install packages</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>parts</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 document centric plugin system</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>people</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library providing access to contacts</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pim-data-exporter</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Import and export KDE PIM settings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pimcommon</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Common libriares for KDEPim</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pimtextedit</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE library for PIM-specific text editing utilities</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-browser-integration</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 components to integrate browsers into the desktop</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-desktop</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 plasma desktop</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-framework</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 plugin based UI runtime used to write user interfaces</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-integration</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt Platform Theme integration plugins for the Plasma workspaces</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-pa</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 Plasma pulse audio mixer</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-sdk</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 applications useful for Plasma development</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-workspace</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 Plasma workspace</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plasma-workspace-wallpapers</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 wallpapers</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>plotting</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 lightweight plotting framework</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>polkit-kde-agent-1</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 daemon providing a polkit authentication UI</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>powerdevil</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 tool to manage the power consumption settings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>prison</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>API to produce barcodes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>pty</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 pty abstraction</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>purpose</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Offers available actions for a specific purpose</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qqc2-desktop-style</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt QuickControl2 style for KDE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>runner</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 parallelized query system</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>service</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 advanced plugin and service introspection</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>solid</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 hardware integration and detection</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>sonnet</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 plugin-based spell checking library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>syndication</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE RSS feed handling library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>syntaxhighlighting</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 syntax highlighting engine for structured text and code</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>systemsettings</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 system settings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>texteditor</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 advanced embeddable text editor</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>textwidgets</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 advanced text editing widgets</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>threadweaver</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 addons to QtDBus</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>tnef</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KDE API for the handling of TNEF data</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>unitconversion</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for unit conversion</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>user-manager</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Plasma5 user manager</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>wallet</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 secure and unified container for user passwords</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>wayland</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 Client and Server library wrapper for the Wayland libraries</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>widgetsaddons</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 addons to QtWidgets</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>windowsystem</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 library for access to the windowing system</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>xmlgui</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 user configurable main windows</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>xmlrpcclient</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>KF5 interaction with XMLRPC services</p></td></tr></tbody></table><div id=kde5-components-example class=exampleblock><div class=title>例 21. <code>USE_KDE</code> Example</div><div class=content><div class=paragraph><p>This is a simple example for a KDE port.
<code>USES= cmake</code> instructs the port to utilize CMake, a configuration tool widely used by KDE projects (see <a href=#using-cmake>Using <code>cmake</code></a> for detailed usage).
<code>USE_KDE</code> brings dependency on KDE libraries.
Required KDE components and other dependencies can be determined through the configure log.
<code>USE_KDE</code> does not imply <code>USE_QT</code>.
If a port requires some Qt components, specify them in <code>USE_QT</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		cmake kde:5 qt:5
USE_KDE=	ecm
USE_QT=		core buildtools_build qmake_build</pre></div></div></div></div></div></div></div><div class=sect1><h2 id=using-lxqt>6.14. Using LXQt<a class=anchor href=#using-lxqt></a></h2><div class=sectionbody><div class=paragraph><p>Applications depending on LXQt should set <code>USES+= lxqt</code> and set <code>USE_LXQT</code> to the list of required components from the table below</p></div><table id=using-lxqt-components class="tableblock frame-none grid-all stretch"><caption class=title>表 19. Available LXQt Components</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>buildtools</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Helpers for additional CMake modules</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>libfmqt</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Libfm Qt bindings</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>lxqt</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>LXQt core library</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>qtxdg</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Qt implementation of freedesktop.org XDG specifications</p></td></tr></tbody></table><div id=lxqt-components-example class=exampleblock><div class=title>例 22. <code>USE_LXQT</code> Example</div><div class=content><div class=paragraph><p>This is a simple example, <code>USE_LXQT</code> adds a dependency on LXQt libraries.
Required LXQt components and other dependencies can be determined from the configure log.</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	cmake lxqt qt:5 tar:xz
USE_QT=		core dbus widgets buildtools_build qmake_build
USE_LXQT=	buildtools libfmqt</pre></div></div></div></div></div></div><div class=sect1><h2 id=using-java>6.15. Using Java<a class=anchor href=#using-java></a></h2><div class=sectionbody><div class=sect2><h3 id=java-variables>6.15.1. Variable Definitions<a class=anchor href=#java-variables></a></h3><div class=paragraph><p>If the port needs a Java™ Development Kit (JDK™) to either build, run or even extract the distfile, then define <code>USE_JAVA</code>.</p></div><div class=paragraph><p>There are several JDKs in the ports collection, from various vendors, and in several versions.
If the port must use a particular version, specify it using the <code>JAVA_VERSION</code> variable.
The most current version is <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk16/>java/openjdk16</a>, with <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk15/>java/openjdk15</a>, <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk14/>java/openjdk14</a>, <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk13/>java/openjdk13</a>, <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk12/>java/openjdk12</a>, <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk11/>java/openjdk11</a>, <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk8/>java/openjdk8</a>, and <a class=package href=https://cgit.freebsd.org/ports/tree/java/openjdk7/>java/openjdk7</a> also available.</p></div><table id=using-java-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 20. Variables Which May be Set by Ports That Use Java</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Means</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_JAVA</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Define for the remaining variables to have any effect.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_VERSION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>List of space-separated suitable Java versions for the port. An optional <code>""` allows specifying a range of versions (allowed values: `7[] 8[] 11[] 12[] 13[] 14[] 15[] 16[+]</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_OS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>List of space-separated suitable JDK port operating systems for the port (allowed values: <code>native linux</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_VENDOR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>List of space-separated suitable JDK port vendors for the port (allowed values: <code>openjdk oracle</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_BUILD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>When set, add the selected JDK port to the build dependencies.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_RUN</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>When set, add the selected JDK port to the run dependencies.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_EXTRACT</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>When set, add the selected JDK port to the extract dependencies.</p></td></tr></tbody></table><div class=paragraph><p>Below is the list of all settings a port will receive after setting <code>USE_JAVA</code>:</p></div><table id=using-java-variables2 class="tableblock frame-none grid-all stretch"><caption class=title>表 21. Variables Provided to Ports That Use Java</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Value</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_PORT</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The name of the JDK port (for example, <code>java/openjdk6</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_PORT_VERSION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The full version of the JDK port (for example, <code>1.6.0</code>). Only the first two digits of this version number are needed, use <code>${JAVA_PORT_VERSION:C/^([0-9])\.([0-9])(.*)$/\1.\2/}</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_PORT_OS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The operating system used by the JDK port (for example, <code>'native'</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_PORT_VENDOR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The vendor of the JDK port (for example, <code>'openjdk'</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_PORT_OS_DESCRIPTION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Description of the operating system used by the JDK port (for example, <code>'Native'</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_PORT_VENDOR_DESCRIPTION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Description of the vendor of the JDK port (for example, <code>'OpenJDK BSD Porting Team'</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_HOME</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the installation directory of the JDK (for example, <span class=filename>'/usr/local/openjdk6'</span>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVAC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the Java compiler to use (for example, <span class=filename>'/usr/local/openjdk6/bin/javac'</span>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>jar</code> tool to use (for example, <span class=filename>'/usr/local/openjdk6/bin/jar'</span> or <span class=filename>'/usr/local/bin/fastjar'</span>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>APPLETVIEWER</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>appletviewer</code> utility (for example, <span class=filename>'/usr/local/openjdk6/bin/appletviewer'</span>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>java</code> executable. Use this for executing Java programs (for example, <span class=filename>'/usr/local/openjdk6/bin/java'</span>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVADOC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>javadoc</code> utility program.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVAH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>javah</code> program.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVAP</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>javap</code> program.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_KEYTOOL</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>keytool</code> utility program.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_N2A</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>native2ascii</code> tool.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_POLICYTOOL</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>policytool</code> program.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_SERIALVER</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the <code>serialver</code> utility program.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RMIC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the RMI stub/skeleton generator, <code>rmic</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RMIREGISTRY</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the RMI registry program, <code>rmiregistry</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RMID</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the RMI daemon program <code>rmid</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVA_CLASSES</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Path to the archive that contains the JDK class files, <span class=filename>${JAVA_HOME}/jre/lib/rt.jar</span>.</p></td></tr></tbody></table><div class=paragraph><p>Use the <code>java-debug</code> make target to get information for debugging the port.
It will display the value of many of the previously listed variables.</p></div><div class=paragraph><p>Additionally, these constants are defined so all Java ports may be installed in a consistent way:</p></div><table id=using-java-constants class="tableblock frame-none grid-all stretch"><caption class=title>表 22. Constants Defined for Ports That Use Java</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Constant</th><th class="tableblock halign-left valign-top">Value</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVASHAREDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The base directory for everything related to Java. Default: <span class=filename>${PREFIX}/share/java</span>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVAJARDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where JAR files is installed. Default: <span class=filename>${JAVASHAREDIR}/classes</span>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>JAVALIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where JAR files installed by other ports are located. Default: <span class=filename>${LOCALBASE}/share/java/classes</span>.</p></td></tr></tbody></table><div class=paragraph><p>The related entries are defined in both <code>PLIST_SUB</code> (documented in <a href=../plist/#plist-sub>Changing pkg-plist Based on Make Variables</a>) and <code>SUB_LIST</code>.</p></div></div><div class=sect2><h3 id=java-building-with-ant>6.15.2. Building with Ant<a class=anchor href=#java-building-with-ant></a></h3><div class=paragraph><p>When the port is to be built using Apache Ant, it has to define <code>USE_ANT</code>.
Ant is thus considered to be the sub-make command.
When no <code>do-build</code> target is defined by the port, a default one will be set that runs Ant according to <code>MAKE_ENV</code>, <code>MAKE_ARGS</code> and <code>ALL_TARGET</code>.
This is similar to the <code>USES= gmake</code> mechanism, which is documented in <a href=#building>Building Mechanisms</a>.</p></div></div><div class=sect2><h3 id=java-best-practices>6.15.3. Best Practices<a class=anchor href=#java-best-practices></a></h3><div class=paragraph><p>When porting a Java library, the port has to install the JAR file(s) in <span class=filename>${JAVAJARDIR}</span>, and everything else under <span class=filename>${JAVASHAREDIR}/${PORTNAME}</span> (except for the documentation, see below).
To reduce the packing file size, reference the JAR file(s) directly in the <span class=filename>Makefile</span>.
Use this statement (where <span class=filename>myport.jar</span> is the name of the JAR file installed as part of the port):</p></div><div class="literalblock programlisting"><div class=content><pre>PLIST_FILES+=	${JAVAJARDIR}/myport.jar</pre></div></div><div class=paragraph><p>When porting a Java application, the port usually installs everything under a single directory (including its JAR dependencies).
The use of <span class=filename>${JAVASHAREDIR}/${PORTNAME}</span> is strongly encouraged in this regard.
It is up the porter to decide whether the port installs the additional JAR dependencies under this directory or uses the already installed ones (from <span class=filename>${JAVAJARDIR}</span>).</p></div><div class=paragraph><p>When porting a Java™ application that requires an application server such as <a class=package href=https://cgit.freebsd.org/ports/tree/www/tomcat7/>www/tomcat7</a> to run the service, it is quite common for a vendor to distribute a <span class=filename>.war</span>.
A <span class=filename>.war</span> is a Web application ARchive and is extracted when called by the application.
Avoid adding a <span class=filename>.war</span> to <span class=filename>pkg-plist</span>.
It is not considered best practice.
An application server will expand war archive, but not clean it up properly if the port is removed.
A more desirable way of working with this file is to extract the archive, then install the files, and lastly add these files to <span class=filename>pkg-plist</span>.</p></div><div class="literalblock programlisting"><div class=content><pre>TOMCATDIR=	${LOCALBASE}/apache-tomcat-7.0
WEBAPPDIR=	myapplication

post-extract:
	@${MKDIR} ${WRKDIR}/${PORTDIRNAME}
	@${TAR} xf ${WRKDIR}/myapplication.war -C ${WRKDIR}/${PORTDIRNAME}

do-install:
	cd ${WRKDIR} &amp;&amp; \
	${INSTALL} -d -o ${WWWOWN} -g ${WWWGRP} ${TOMCATDIR}/webapps/${PORTDIRNAME}
	cd ${WRKDIR}/${PORTDIRNAME} &amp;&amp; ${COPYTREE_SHARE} \* ${WEBAPPDIR}/${PORTDIRNAME}</pre></div></div><div class=paragraph><p>Regardless of the type of port (library or application), the additional documentation is installed in the <a href=../makefiles/#install-documentation>same location</a> as for any other port.
The Javadoc tool is known to produce a different set of files depending on the version of the JDK that is used.
For ports that do not enforce the use of a particular JDK, it is therefore a complex task to specify the packing list (<span class=filename>pkg-plist</span>).
This is one reason why porters are strongly encouraged to use <code>PORTDOCS</code>.
Moreover, even if the set of files that will be generated by <code>javadoc</code> can be predicted, the size of the resulting <span class=filename>pkg-plist</span> advocates for the use of <code>PORTDOCS</code>.</p></div><div class=paragraph><p>The default value for <code>DATADIR</code> is <span class=filename>${PREFIX}/share/${PORTNAME}</span>.
It is a good idea to override <code>DATADIR</code> to <span class=filename>${JAVASHAREDIR}/${PORTNAME}</span> for Java ports.
Indeed, <code>DATADIR</code> is automatically added to <code>PLIST_SUB</code> (documented in <a href=../plist/#plist-sub>Changing pkg-plist Based on Make Variables</a>) so use <code>%%DATADIR%%</code> directly in <span class=filename>pkg-plist</span>.</p></div><div class=paragraph><p>As for the choice of building Java ports from source or directly installing them from a binary distribution, there is no defined policy at the time of writing.
However, people from the <a href=https://www.freebsd.org/java/>FreeBSD Java Project</a> encourage porters to have their ports built from source whenever it is a trivial task.</p></div><div class=paragraph><p>All the features that have been presented in this section are implemented in <span class=filename>bsd.java.mk</span>.
If the port needs more sophisticated Java support, please first have a look at the <a href=https://cgit.FreeBSD.org/ports/tree/Mk/bsd.java.mk>bsd.java.mk Git log</a> as it usually takes some time to document the latest features.
Then, if the needed support that is lacking would be beneficial to many other Java ports, feel free to discuss it on the freebsd-java.</p></div><div class=paragraph><p>Although there is a <code>java</code> category for PRs, it refers to the JDK porting effort from the FreeBSD Java project.
Therefore, submit the Java port in the <code>ports</code> category as for any other port, unless the issue is related to either a JDK implementation or <span class=filename>bsd.java.mk</span>.</p></div><div class=paragraph><p>Similarly, there is a defined policy regarding the <code>CATEGORIES</code> of a Java port, which is detailed in <a href=../makefiles/#makefile-categories>Categorization</a>.</p></div></div></div></div><div class=sect1><h2 id=using-php>6.16. Web Applications, Apache and PHP<a class=anchor href=#using-php></a></h2><div class=sectionbody><div class=sect2><h3 id=using-apache>6.16.1. Apache<a class=anchor href=#using-apache></a></h3><table id=using-apache-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 23. Variables for Ports That Use Apache</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_APACHE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port requires Apache. Possible values: <code>yes</code> (gets any version), <code>22</code>, <code>24</code>, <code>22-24</code>, <code>22+</code>, etc. The default APACHE version is <code>22</code>. More details are available in <span class=filename>ports/Mk/bsd.apache.mk</span> and at <a href=https://wiki.freebsd.org/Apache/>wiki.freebsd.org/Apache/</a>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>APXS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full path to the <code>apxs</code> binary. Can be overridden in the port.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>HTTPD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full path to the <code>httpd</code> binary. Can be overridden in the port.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>APACHE_VERSION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The version of present Apache installation (read-only variable). This variable is only available after inclusion of <span class=filename>bsd.port.pre.mk</span>. Possible values: <code>22</code>, <code>24</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>APACHEMODDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory for Apache modules. This variable is automatically expanded in <span class=filename>pkg-plist</span>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>APACHEINCLUDEDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory for Apache headers. This variable is automatically expanded in <span class=filename>pkg-plist</span>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>APACHEETCDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory for Apache configuration files. This variable is automatically expanded in <span class=filename>pkg-plist</span>.</p></td></tr></tbody></table><table id=using-apache-modules class="tableblock frame-none grid-all stretch"><caption class=title>表 24. Useful Variables for Porting Apache Modules</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>MODULENAME</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Name of the module. Default value is <code>PORTNAME</code>. Example: <code>mod_hello</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>SHORTMODNAME</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Short name of the module. Automatically derived from <code>MODULENAME</code>, but can be overridden. Example: <code>hello</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>AP_FAST_BUILD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Use <code>apxs</code> to compile and install the module.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>AP_GENPLIST</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Also automatically creates a <span class=filename>pkg-plist</span>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>AP_INC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Adds a directory to a header search path during compilation.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>AP_LIB</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Adds a directory to a library search path during compilation.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>AP_EXTRAS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Additional flags to pass to <code>apxs</code>.</p></td></tr></tbody></table></div><div class=sect2><h3 id=web-apps>6.16.2. Web Applications<a class=anchor href=#web-apps></a></h3><div class=paragraph><p>Web applications must be installed into <span class=filename>PREFIX/www/appname</span>.
This path is available both in <span class=filename>Makefile</span> and in <span class=filename>pkg-plist</span> as <code>WWWDIR</code>, and the path relative to <code>PREFIX</code> is available in <span class=filename>Makefile</span> as <code>WWWDIR_REL</code>.</p></div><div class=paragraph><p>The user and group of web server process are available as <code>WWWOWN</code> and <code>WWWGRP</code>, in case the ownership of some files needs to be changed.
The default values of both are <code>www</code>.
Use <code>WWWOWN?= myuser</code> and <code>WWWGRP?= mygroup</code> if the port needs different values.
This allows the user to override them easily.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>Use <code>WWWOWN</code> and <code>WWWGRP</code> sparingly.
Remember that every file the web server can write to is a security risk waiting to happen.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Do not depend on Apache unless the web app explicitly needs Apache.
Respect that users may wish to run a web application on a web server other than Apache.</p></div></div><div class=sect2><h3 id=php-variables>6.16.3. PHP<a class=anchor href=#php-variables></a></h3><div class=paragraph><p>PHP web applications declare their dependency on it with <code>USES=php</code>.
See <a href=../uses/#uses-php><code>php</code></a> for more information.</p></div></div><div class=sect2><h3 id=php-pear>6.16.4. PEAR Modules<a class=anchor href=#php-pear></a></h3><div class=paragraph><p>Porting PEAR modules is a very simple process.</p></div><div class=paragraph><p>Add <code>USES=pear</code> to the port’s <span class=filename>Makefile</span>.
The framework will install the relevant files in the right places and automatically generate the plist at install time.</p></div><div id=pear-makefile class=exampleblock><div class=title>例 23. Example Makefile for PEAR Class</div><div class=content><div class="literalblock programlisting"><div class=content><pre>PORTNAME=       Date
DISTVERSION=	1.4.3
CATEGORIES=	devel www pear

MAINTAINER=	example@domain.com
COMMENT=	PEAR Date and Time Zone Classes

USES=	pear

.include &lt;bsd.port.mk&gt;</pre></div></div></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>PEAR modules will automatically be flavorized using <a href=../flavors/#flavors-auto-php>PHP flavors</a>.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If a non default <code>PEAR_CHANNEL</code> is used, the build and run-time dependencies will automatically be added.</p></div></td></tr></tbody></table></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>PEAR modules do not need to defined <code>PKGNAMESUFFIX</code> it is automatically filled in using <code>PEAR_PKGNAMEPREFIX</code>.
If a port needs to add to <code>PKGNAMEPREFIX</code>, it must also use <code>PEAR_PKGNAMEPREFIX</code> to differentiate between different flavors.</p></div></td></tr></tbody></table></div><div class=sect3><h4 id=php-horde>6.16.4.1. Horde Modules<a class=anchor href=#php-horde></a></h4><div class=paragraph><p>In the same way, porting Horde modules is a simple process.</p></div><div class=paragraph><p>Add <code>USES=horde</code> to the port’s <span class=filename>Makefile</span>.
The framework will install the relevant files in the right places and automatically generate the plist at install time.</p></div><div class=paragraph><p>The <code>USE_HORDE_BUILD</code> and <code>USE_HORDE_RUN</code> variables can be used to add buildtime and runtime dependencies on other Horde modules.
See <span class=filename>Mk/Uses/horde.mk</span> for a complete list of available modules.</p></div><div id=horde-Makefile class=exampleblock><div class=title>例 24. Example Makefile for Horde Module</div><div class=content><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	Horde_Core
DISTVERSION=	2.14.0
CATEGORIES=	devel www pear

MAINTAINER=	horde@FreeBSD.org
COMMENT=	Horde Core Framework libraries

OPTIONS_DEFINE=	KOLAB SOCKETS
KOLAB_DESC=	Enable Kolab server support
SOCKETS_DESC=	Depend on sockets PHP extension

USES=	horde
USE_PHP=	session

USE_HORDE_BUILD=	Horde_Role
USE_HORDE_RUN=	Horde_Role Horde_History Horde_Pack \
		Horde_Text_Filter Horde_View

KOLAB_USE=	HORDE_RUN=Horde_Kolab_Server,Horde_Kolab_Session
SOCKETS_USE=	PHP=sockets

.include &lt;bsd.port.mk&gt;</pre></div></div></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>As Horde modules are also PEAR modules they will also automatically be flavorized using <a href=../flavors/#flavors-auto-php>PHP flavors</a>.</p></div></td></tr></tbody></table></div></div></div></div></div><div class=sect1><h2 id=using-python>6.17. Using Python<a class=anchor href=#using-python></a></h2><div class=sectionbody><div class=paragraph><p>The Ports Collection supports parallel installation of multiple Python versions.
Ports must use a correct <code>python</code> interpreter, according to the user-settable <code>PYTHON_VERSION</code>.
Most prominently, this means replacing the path to <code>python</code> executable in scripts with the value of <code>PYTHON_CMD</code>.</p></div><div class=paragraph><p>Ports that install files under <code>PYTHON_SITELIBDIR</code> must use the <code>pyXY-</code> package name prefix, so their package name embeds the version of Python they are installed into.</p></div><div class="literalblock programlisting"><div class=content><pre>PKGNAMEPREFIX=	${PYTHON_PKGNAMEPREFIX}</pre></div></div><table id=using-python-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 25. Most Useful Variables for Ports That Use Python</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USES=python</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port needs Python. The minimal required version can be specified with values such as <code>2.7+</code>. Version ranges can also be specified by separating two version numbers with a dash: <code>USES=python:3.2-3.3</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_PYTHON=distutils</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Use Python distutils for configuring, compiling, and installing. This is required when the port comes with <span class=filename>setup.py</span>. This overrides the <code>do-build</code> and <code>do-install</code> targets and may also override <code>do-configure</code> if <code>GNU_CONFIGURE</code> is not defined. Additionally, it implies <code>USE_PYTHON=flavors</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_PYTHON=autoplist</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Create the packaging list automatically. This also requires <code>USE_PYTHON=distutils</code> to be set.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_PYTHON=concurrent</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port will use an unique prefix, typically <code>PYTHON_PKGNAMEPREFIX</code> for certain directories, such as <code>EXAMPLESDIR</code> and <code>DOCSDIR</code> and also will append a suffix, the python version from <code>PYTHON_VER</code>, to binaries and scripts to be installed. This allows ports to be installed for different Python versions at the same time, which otherwise would install conflicting files.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_PYTHON=flavors</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port does not use distutils but still supports multiple Python versions. <code>FLAVORS</code> will be set to the supported Python versions. See <a href=../flavors/#flavors-auto-python><code>USES</code>=python and Flavors</a> for more information.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_PYTHON=optsuffix</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>If the current Python version is not the default version, the port will gain <code>PKGNAMESUFFIX=${PYTHON_PKGNAMESUFFIX}</code>. Only useful with flavors.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PYTHON_PKGNAMEPREFIX</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Used as a <code>PKGNAMEPREFIX</code> to distinguish packages for different Python versions. Example: <code>py27-</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PYTHON_SITELIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Location of the site-packages tree, that contains installation path of Python (usually <code>LOCALBASE</code>). <code>PYTHON_SITELIBDIR</code> can be very useful when installing Python modules.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PYTHONPREFIX_SITELIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The PREFIX-clean variant of PYTHON_SITELIBDIR. Always use <code>%%PYTHON_SITELIBDIR%%</code> in <span class=filename>pkg-plist</span> when possible. The default value of <code>%%PYTHON_SITELIBDIR%%</code> is <code>lib/python%%PYTHON_VERSION%%/site-packages</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PYTHON_CMD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Python interpreter command line, including version number.</p></td></tr></tbody></table><table id=using-python-variables-helpers class="tableblock frame-none grid-all stretch"><caption class=title>表 26. Python Module Dependency Helpers</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PYNUMERIC</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Dependency line for numeric extension.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PYNUMPY</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Dependency line for the new numeric extension, numpy. (PYNUMERIC is deprecated by upstream vendor).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PYXML</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Dependency line for XML extension (not needed for Python 2.0 and higher as it is also in base distribution).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PY_ENUM34</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Conditional dependency on <a class=package href=https://cgit.freebsd.org/ports/tree/devel/py-enum34/>devel/py-enum34</a> depending on the Python version.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PY_ENUM_COMPAT</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Conditional dependency on <a class=package href=https://cgit.freebsd.org/ports/tree/devel/py-enum-compat/>devel/py-enum-compat</a> depending on the Python version.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PY_PATHLIB</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Conditional dependency on <a class=package href=https://cgit.freebsd.org/ports/tree/devel/py-pathlib/>devel/py-pathlib</a> depending on the Python version.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PY_IPADDRESS</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Conditional dependency on <a class=package href=https://cgit.freebsd.org/ports/tree/net/py-ipaddress/>net/py-ipaddress</a> depending on the Python version.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>PY_FUTURES</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Conditional dependency on <a class=package href=https://cgit.freebsd.org/ports/tree/devel/py-futures/>devel/py-futures</a> depending on the Python version.</p></td></tr></tbody></table><div class=paragraph><p>A complete list of available variables can be found in <span class=filename>/usr/ports/Mk/Uses/python.mk</span>.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>All dependencies to Python ports using <a href=../flavors/#flavors-auto-python>Python flavors</a> (either with <code>USE_PYTHON=distutils</code> or <code>USE_PYTHON=flavors</code>) must have the Python flavor appended to their origin using <code>@${PY_FLAVOR}</code>.
See <a href=#python-Makefile>Makefile for a Simple Python Module</a>.</p></div></td></tr></tbody></table></div><div id=python-Makefile class=exampleblock><div class=title>例 25. Makefile for a Simple Python Module</div><div class=content><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	sample
DISTVERSION=	1.2.3
CATEGORIES=	devel

MAINTAINER=	john@doe.tld
COMMENT=	Python sample module

RUN_DEPENDS=	${PYTHON_PKGNAMEPREFIX}six&gt;0:devel/py-six@${PY_FLAVOR}

USES=		python
USE_PYTHON=	autoplist distutils

.include &lt;bsd.port.mk&gt;</pre></div></div></div></div><div class=paragraph><p>Some Python applications claim to have <code>DESTDIR</code> support (which would be required for staging) but it is broken (Mailman up to 2.1.16, for instance).
This can be worked around by recompiling the scripts.
This can be done, for example, in the <code>post-build</code> target.
Assuming the Python scripts are supposed to reside in <code>PYTHONPREFIX_SITELIBDIR</code> after installation, this solution can be applied:</p></div><div class="literalblock programlisting"><div class=content><pre>(cd ${STAGEDIR}${PREFIX} \
  &amp;&amp; ${PYTHON_CMD} ${PYTHON_LIBDIR}/compileall.py \
   -d ${PREFIX} -f ${PYTHONPREFIX_SITELIBDIR:S;${PREFIX}/;;})</pre></div></div><div class=paragraph><p>This recompiles the sources with a path relative to the stage directory, and prepends the value of <code>PREFIX</code> to the file name recorded in the byte-compiled output file by <code>-d</code>. <code>-f</code> is required to force recompilation, and the <code>:S;${PREFIX}/;;</code> strips prefixes from the value of <code>PYTHONPREFIX_SITELIBDIR</code> to make it relative to <code>PREFIX</code>.</p></div></div></div><div class=sect1><h2 id=using-tcl>6.18. Using Tcl/Tk<a class=anchor href=#using-tcl></a></h2><div class=sectionbody><div class=paragraph><p>The Ports Collection supports parallel installation of multiple Tcl/Tk versions.
Ports should try to support at least the default Tcl/Tk version and higher with <code>USES=tcl</code>.
It is possible to specify the desired version of <code>tcl</code> by appending <code>:_xx_</code>, for example, <code>USES=tcl:85</code>.</p></div><table id=using-tcl-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 27. The Most Useful Read-Only Variables for Ports That Use Tcl/Tk</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>TCL_VER</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>chosen major.minor version of Tcl</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>TCLSH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>full path of the Tcl interpreter</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>TCL_LIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>path of the Tcl libraries</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>TCL_INCLUDEDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>path of the Tcl C header files</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>TK_VER</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>chosen major.minor version of Tk</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>WISH</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>full path of the Tk interpreter</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>TK_LIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>path of the Tk libraries</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>TK_INCLUDEDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>path of the Tk C header files</p></td></tr></tbody></table><div class=paragraph><p>See the <a href=../uses/#uses-tcl><code>USES=tcl</code></a> and <a href=../uses/#uses-tk><code>USES=tk</code></a> of <a href=../uses/#uses>Using <code>USES</code> Macros</a> for a full description of those variables.
A complete list of those variables is available in <span class=filename>/usr/ports/Mk/Uses/tcl.mk</span>.</p></div></div></div><div class=sect1><h2 id=using-ruby>6.19. Using Ruby<a class=anchor href=#using-ruby></a></h2><div class=sectionbody><table id=using-ruby-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 28. Useful Variables for Ports That Use Ruby</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_RUBY</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Adds build and run dependencies on Ruby.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_RUBY_EXTCONF</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port uses <span class=filename>extconf.rb</span> to configure.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_RUBY_SETUP</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The port uses <span class=filename>setup.rb</span> to configure.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUBY_SETUP</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Override the name of the setup script from <span class=filename>setup.rb</span>. Another common value is <span class=filename>install.rb</span>.</p></td></tr></tbody></table><div class=paragraph><p>This table shows the selected variables available to port authors via the ports infrastructure.
These variables are used to install files into their proper locations.
Use them in <span class=filename>pkg-plist</span> as much as possible.
Do not redefine these variables in the port.</p></div><table id=using-ruby-variables-ro class="tableblock frame-none grid-all stretch"><caption class=title>表 29. Selected Read-Only Variables for Ports That Use Ruby</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Example value</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUBY_PKGNAMEPREFIX</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Used as a <code>PKGNAMEPREFIX</code> to distinguish packages for different Ruby versions.</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>ruby19-</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUBY_VERSION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Full version of Ruby in the form of <code>x.y.z[.p]</code>.</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>1.9.3.484</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUBY_SITELIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Architecture independent libraries installation path.</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/local/lib/ruby/site_ruby/1.9</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUBY_SITEARCHLIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Architecture dependent libraries installation path.</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/local/lib/ruby/site_ruby/1.9/amd64-freebsd10</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUBY_MODDOCDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Module documentation installation path.</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/local/share/doc/ruby19/patsy</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>RUBY_MODEXAMPLESDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Module examples installation path.</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>/usr/local/share/examples/ruby19/patsy</code></p></td></tr></tbody></table><div class=paragraph><p>A complete list of available variables can be found in <span class=filename>/usr/ports/Mk/bsd.ruby.mk</span>.</p></div></div></div><div class=sect1><h2 id=using-sdl>6.20. Using SDL<a class=anchor href=#using-sdl></a></h2><div class=sectionbody><div class=paragraph><p><code>USE_SDL</code> is used to autoconfigure the dependencies for ports which use an SDL based library like <a class=package href=https://cgit.freebsd.org/ports/tree/devel/sdl12/>devel/sdl12</a> and <a class=package href=https://cgit.freebsd.org/ports/tree/graphics/sdl_image/>graphics/sdl_image</a>.</p></div><div class=paragraph><p>These SDL libraries for version 1.2 are recognized:</p></div><div class=ulist><ul><li><p>sdl: <a class=package href=https://cgit.freebsd.org/ports/tree/devel/sdl12/>devel/sdl12</a></p></li><li><p>console: <a class=package href=https://cgit.freebsd.org/ports/tree/devel/sdl_console/>devel/sdl_console</a></p></li><li><p>gfx: <a class=package href=https://cgit.freebsd.org/ports/tree/graphics/sdl_gfx/>graphics/sdl_gfx</a></p></li><li><p>image: <a class=package href=https://cgit.freebsd.org/ports/tree/graphics/sdl_image/>graphics/sdl_image</a></p></li><li><p>mixer: <a class=package href=https://cgit.freebsd.org/ports/tree/audio/sdl_mixer/>audio/sdl_mixer</a></p></li><li><p>mm: <a class=package href=https://cgit.freebsd.org/ports/tree/devel/sdlmm/>devel/sdlmm</a></p></li><li><p>net: <a class=package href=https://cgit.freebsd.org/ports/tree/net/sdl_net/>net/sdl_net</a></p></li><li><p>pango: <a class=package href=https://cgit.freebsd.org/ports/tree/x11-toolkits/sdl_pango/>x11-toolkits/sdl_pango</a></p></li><li><p>sound: <a class=package href=https://cgit.freebsd.org/ports/tree/audio/sdl_sound/>audio/sdl_sound</a></p></li><li><p>ttf: <a class=package href=https://cgit.freebsd.org/ports/tree/graphics/sdl_ttf/>graphics/sdl_ttf</a></p></li></ul></div><div class=paragraph><p>These SDL libraries for version 2.0 are recognized:</p></div><div class=ulist><ul><li><p>sdl: <a class=package href=https://cgit.freebsd.org/ports/tree/devel/sdl20/>devel/sdl20</a></p></li><li><p>gfx: <a class=package href=https://cgit.freebsd.org/ports/tree/graphics/sdl2_gfx/>graphics/sdl2_gfx</a></p></li><li><p>image: <a class=package href=https://cgit.freebsd.org/ports/tree/graphics/sdl2_image/>graphics/sdl2_image</a></p></li><li><p>mixer: <a class=package href=https://cgit.freebsd.org/ports/tree/audio/sdl2_mixer/>audio/sdl2_mixer</a></p></li><li><p>net: <a class=package href=https://cgit.freebsd.org/ports/tree/net/sdl2_net/>net/sdl2_net</a></p></li><li><p>ttf: <a class=package href=https://cgit.freebsd.org/ports/tree/graphics/sdl2_ttf/>graphics/sdl2_ttf</a></p></li></ul></div><div class=paragraph><p>Therefore, if a port has a dependency on <a class=package href=https://cgit.freebsd.org/ports/tree/net/sdl_net/>net/sdl_net</a> and <a class=package href=https://cgit.freebsd.org/ports/tree/audio/sdl_mixer/>audio/sdl_mixer</a>, the syntax will be:</p></div><div class="literalblock programlisting"><div class=content><pre>USE_SDL=	net mixer</pre></div></div><div class=paragraph><p>The dependency <a class=package href=https://cgit.freebsd.org/ports/tree/devel/sdl12/>devel/sdl12</a>, which is required by <a class=package href=https://cgit.freebsd.org/ports/tree/net/sdl_net/>net/sdl_net</a> and <a class=package href=https://cgit.freebsd.org/ports/tree/audio/sdl_mixer/>audio/sdl_mixer</a>, is automatically added as well.</p></div><div class=paragraph><p>Using <code>USE_SDL</code> with entries for SDL 1.2, it will automatically:</p></div><div class=ulist><ul><li><p>Add a dependency on sdl12-config to <code>BUILD_DEPENDS</code></p></li><li><p>Add the variable <code>SDL_CONFIG</code> to <code>CONFIGURE_ENV</code></p></li><li><p>Add the dependencies of the selected libraries to <code>LIB_DEPENDS</code></p></li></ul></div><div class=paragraph><p>Using <code>USE_SDL</code> with entries for SDL 2.0, it will automatically:</p></div><div class=ulist><ul><li><p>Add a dependency on sdl2-config to <code>BUILD_DEPENDS</code></p></li><li><p>Add the variable <code>SDL2_CONFIG</code> to <code>CONFIGURE_ENV</code></p></li><li><p>Add the dependencies of the selected libraries to <code>LIB_DEPENDS</code></p></li></ul></div></div></div><div class=sect1><h2 id=using-wx>6.21. Using wxWidgets<a class=anchor href=#using-wx></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the status of the wxWidgets libraries in the ports tree and its integration with the ports system.</p></div><div class=sect2><h3 id=wx-introduction>6.21.1. Introduction<a class=anchor href=#wx-introduction></a></h3><div class=paragraph><p>There are many versions of the wxWidgets libraries which conflict between them (install files under the same name).
In the ports tree this problem has been solved by installing each version under a different name using version number suffixes.</p></div><div class=paragraph><p>The obvious disadvantage of this is that each application has to be modified to find the expected version.
Fortunately, most of the applications call the <code>wx-config</code> script to determine the necessary compiler and linker flags.
The script is named differently for every available version.
Majority of applications respect an environment variable, or accept a configure argument, to specify which <code>wx-config</code> script to call.
Otherwise they have to be patched.</p></div></div><div class=sect2><h3 id=wx-version>6.21.2. Version Selection<a class=anchor href=#wx-version></a></h3><div class=paragraph><p>To make the port use a specific version of wxWidgets there are two variables available for defining (if only one is defined the other will be set to a default value):</p></div><table id=wx-ver-sel-table class="tableblock frame-none grid-all stretch"><caption class=title>表 30. Variables to Select wxWidgets Versions</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Variable</th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Default value</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_WX</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>List of versions the port can use</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>All available versions</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>USE_WX_NOT</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>List of versions the port cannot use</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>None</p></td></tr></tbody></table><div class=paragraph><p>The available wxWidgets versions and the corresponding ports in the tree are:</p></div><table id=wx-widgets-versions-table class="tableblock frame-none grid-all stretch"><caption class=title>表 31. Available wxWidgets Versions</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Version</th><th class="tableblock halign-left valign-top">Port</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>2.8</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a class=package href=https://cgit.freebsd.org/ports/tree/x11-toolkits/wxgtk28/>x11-toolkits/wxgtk28</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>3.0</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a class=package href=https://cgit.freebsd.org/ports/tree/x11-toolkits/wxgtk30/>x11-toolkits/wxgtk30</a></p></td></tr></tbody></table><div class=paragraph><p>The variables in <a href=#wx-ver-sel-table>Variables to Select wxWidgets Versions</a> can be set to one or more of these combinations separated by spaces:</p></div><table id=wx-widgets-versions-specification class="tableblock frame-none grid-all stretch"><caption class=title>表 32. wxWidgets Version Specifications</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Example</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Single version</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>2.8</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Ascending range</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>2.8+</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Descending range</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>3.0-</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Full range (must be ascending)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>2.8-3.0</code></p></td></tr></tbody></table><div class=paragraph><p>There are also some variables to select the preferred versions from the available ones.
They can be set to a list of versions, the first ones will have higher priority.</p></div><table id=wx-widgets-preferred-version class="tableblock frame-none grid-all stretch"><caption class=title>表 33. Variables to Select Preferred wxWidgets Versions</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Designed for</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>WANT_WX_VER</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>the port</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>WITH_WX_VER</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>the user</p></td></tr></tbody></table></div><div class=sect2><h3 id=wx-components>6.21.3. Component Selection<a class=anchor href=#wx-components></a></h3><div class=paragraph><p>There are other applications that, while not being wxWidgets libraries, are related to them.
These applications can be specified in <code>WX_COMPS</code>. These components are available:</p></div><table id=wx-widgets-components-table class="tableblock frame-none grid-all stretch"><caption class=title>表 34. Available wxWidgets Components</caption><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Version restriction</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>wx</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>main library</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>none</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>contrib</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>contributed libraries</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>none</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>python</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>wxPython (Python bindings)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>2.8-3.0</code></p></td></tr></tbody></table><div class=paragraph><p>The dependency type can be selected for each component by adding a suffix separated by a semicolon.
If not present then a default type will be used (see <a href=#wx-def-dep-types>Default wxWidgets Dependency Types</a>).
These types are available:</p></div><table id=wx-widgets-dependency-table class="tableblock frame-none grid-all stretch"><caption class=title>表 35. Available wxWidgets Dependency Types</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>build</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Component is required for building, equivalent to <code>BUILD_DEPENDS</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>run</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Component is required for running, equivalent to <code>RUN_DEPENDS</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>lib</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Component is required for building and running, equivalent to <code>LIB_DEPENDS</code></p></td></tr></tbody></table><div class=paragraph><p>The default values for the components are detailed in this table:</p></div><table id=wx-def-dep-types class="tableblock frame-none grid-all stretch"><caption class=title>表 36. Default wxWidgets Dependency Types</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Component</th><th class="tableblock halign-left valign-top">Dependency type</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>wx</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lib</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>contrib</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lib</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>python</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>run</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>mozilla</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lib</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>svg</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lib</code></p></td></tr></tbody></table><div id=wx-components-example class=exampleblock><div class=title>例 26. Selecting wxWidgets Components</div><div class=content><div class=paragraph><p>This fragment corresponds to a port which uses wxWidgets version <code>2.4</code> and its contributed libraries.</p></div><div class="literalblock programlisting"><div class=content><pre>USE_WX=		2.8
WX_COMPS=	wx contrib</pre></div></div></div></div></div><div class=sect2><h3 id=wx-version-detection>6.21.4. Detecting Installed Versions<a class=anchor href=#wx-version-detection></a></h3><div class=paragraph><p>To detect an installed version, define <code>WANT_WX</code>.
If it is not set to a specific version then the components will have a version suffix.
<code>HAVE_WX</code> will be filled after detection.</p></div><div id=wx-ver-det-example class=exampleblock><div class=title>例 27. Detecting Installed wxWidgets Versions and Components</div><div class=content><div class=paragraph><p>This fragment can be used in a port that uses wxWidgets if it is installed, or an option is selected.</p></div><div class="literalblock programlisting"><div class=content><pre>WANT_WX=	yes

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WX) || !empty(PORT_OPTIONS:MWX) || !empty(HAVE_WX:Mwx-2.8)
USE_WX=			2.8
CONFIGURE_ARGS+=	--enable-wx
.endif</pre></div></div><div class=paragraph><p>This fragment can be used in a port that enables wxPython support if it is installed or if an option is selected, in addition to wxWidgets, both version <code>2.8</code>.</p></div><div class="literalblock programlisting"><div class=content><pre>USE_WX=		2.8
WX_COMPS=	wx
WANT_WX=	2.8

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WXPYTHON) || !empty(PORT_OPTIONS:MWXPYTHON) || !empty(HAVE_WX:Mpython)
WX_COMPS+=		python
CONFIGURE_ARGS+=	--enable-wxpython
.endif</pre></div></div></div></div></div><div class=sect2><h3 id=wx-defined-variables>6.21.5. Defined Variables<a class=anchor href=#wx-defined-variables></a></h3><div class=paragraph><p>These variables are available in the port (after defining one from <a href=#wx-ver-sel-table>Variables to Select wxWidgets Versions</a>).</p></div><table id=wx-widgets-variables class="tableblock frame-none grid-all stretch"><caption class=title>表 37. Variables Defined for Ports That Use wxWidgets</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>WX_CONFIG</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The path to the wxWidgets`wx-config` script (with different name)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>WXRC_CMD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The path to the wxWidgets`wxrc` program (with different name)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>WX_VERSION</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The wxWidgets version that is going to be used (for example, <code>2.6</code>)</p></td></tr></tbody></table></div><div class=sect2><h3 id=wx-premk>6.21.6. Processing in <span class=filename>bsd.port.pre.mk</span><a class=anchor href=#wx-premk></a></h3><div class=paragraph><p>Define <code>WX_PREMK</code> to be able to use the variables right after including <span class=filename>bsd.port.pre.mk</span>.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>When defining <code>WX_PREMK</code>, then the version, dependencies, components and defined variables will not change if modifying the wxWidgets port variables <em>after</em> including <span class=filename>bsd.port.pre.mk</span>.</p></div></td></tr></tbody></table></div><div id=wx-premk-example class=exampleblock><div class=title>例 28. Using wxWidgets Variables in Commands</div><div class=content><div class=paragraph><p>This fragment illustrates the use of <code>WX_PREMK</code> by running the <code>wx-config</code> script to obtain the full version string, assign it to a variable and pass it to the program.</p></div><div class="literalblock programlisting"><div class=content><pre>USE_WX=		2.8
WX_PREMK=	yes

.include &lt;bsd.port.pre.mk&gt;

.if exists(${WX_CONFIG})
VER_STR!=	${WX_CONFIG} --release

PLIST_SUB+=	VERSION=&#34;${VER_STR}&#34;
.endif</pre></div></div></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The wxWidgets variables can be safely used in commands when they are inside targets without the need of <code>WX_PREMK</code>.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=wx-additional-config-args>6.21.7. Additional <code>configure</code> Arguments<a class=anchor href=#wx-additional-config-args></a></h3><div class=paragraph><p>Some GNU <code>configure</code> scripts cannot find wxWidgets with just the <code>WX_CONFIG</code> environment variable set, requiring additional arguments. <code>WX_CONF_ARGS</code> can be used for provide them.</p></div><table id=wx-conf-args-values class="tableblock frame-none grid-all stretch"><caption class=title>表 38. Legal Values for <code>WX_CONF_ARGS</code></caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Possible value</th><th class="tableblock halign-left valign-top">Resulting argument</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>absolute</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>--with-wx-config=${WX_CONFIG}</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>relative</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>--with-wx=${LOCALBASE} --with-wx-config=${WX_CONFIG:T}</code></p></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=using-lua>6.22. Using Lua<a class=anchor href=#using-lua></a></h2><div class=sectionbody><div class=paragraph><p>This section describes the status of the Lua libraries in the ports tree and its integration with the ports system.</p></div><div class=sect2><h3 id=lua-introduction>6.22.1. Introduction<a class=anchor href=#lua-introduction></a></h3><div class=paragraph><p>There are many versions of the Lua libraries and corresponding interpreters, which conflict between them (install files under the same name).
In the ports tree this problem has been solved by installing each version under a different name using version number suffixes.</p></div><div class=paragraph><p>The obvious disadvantage of this is that each application has to be modified to find the expected version.
But it can be solved by adding some additional flags to the compiler and linker.</p></div><div class=paragraph><p>Applications that use Lua should normally build for just one version.
However, loadable modules for Lua are built in a separate flavor for each Lua version that they support, and dependencies on such modules should specify the flavor using the <code>@${LUA_FLAVOR}</code> suffix on the port origin.</p></div></div><div class=sect2><h3 id=lua-version>6.22.2. Version Selection<a class=anchor href=#lua-version></a></h3><div class=paragraph><p>A port using Lua should have a line of this form:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	lua</pre></div></div><div class=paragraph><p>If a specific version of Lua, or range of versions, is needed, it can be specified as a parameter in the form <code>XY</code> (which may be used multiple times), <code>XY+</code>, <code>-XY</code>, or <code>XY-ZA</code>.
The default version of Lua as set via <code>DEFAULT_VERSIONS</code> will be used if it falls in the requested range, otherwise the closest requested version to the default will be used.
For example:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	lua:52-53</pre></div></div><div class=paragraph><p>Note that no attempt is made to adjust the version selection based on the presence of any already-installed Lua version.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The <code>XY+</code> form of version specification should not be used without careful consideration;
the Lua API changes to some extent in every version, and configuration tools like CMake or Autoconf will often fail to work on future versions of Lua until updated to do so.</p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=lua-version-config>6.22.3. Configuration and Compiler flags<a class=anchor href=#lua-version-config></a></h3><div class=paragraph><p>Software that uses Lua may have been written to auto-detect the Lua version in use.
In general ports should override this assumption, and force the use of the specific Lua version selected as described above.
Depending on the software being ported, this might require any or all of:</p></div><div class=ulist><ul><li><p>Using <code>LUA_VER</code> as part of a parameter to the software’s configuration script via <code>CONFIGURE_ARGS</code> or <code>CONFIGURE_ENV</code> (or equivalent for other build systems);</p></li><li><p>Adding <code>-I${LUA_INCDIR}</code>, <code>-L${LUA_LIBDIR}</code>, and <code>-llua-${LUA_VER}</code> to <code>CFLAGS</code>, <code>LDFLAGS</code>, <code>LIBS</code> respectively as appropriate;</p></li><li><p>Patch the software’s configuration or build files to select the correct version.</p></li></ul></div></div><div class=sect2><h3 id=lua-version-flavors>6.22.4. Version Flavors<a class=anchor href=#lua-version-flavors></a></h3><div class=paragraph><p>A port which installs a Lua module (rather than an application that simply makes use of Lua) should build a separate flavor for each supported Lua version.
This is done by adding the <code>module</code> parameter:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	lua:module</pre></div></div><div class=paragraph><p>A version number or range of versions can be specified as well; use a comma to separate parameters.</p></div><div class=paragraph><p>Since each flavor must have a different package name, the variable <code>LUA_PKGNAMEPREFIX</code> is provided which will be set to an appropriate value; the intended usage is:</p></div><div class="literalblock programlisting"><div class=content><pre>PKGNAMEPREFIX=	${LUA_PKGNAMEPREFIX}</pre></div></div><div class=paragraph><p>Module ports should normally install files only to <code>LUA_MODLIBDIR</code>, <code>LUA_MODSHAREDIR</code>, <code>LUA_DOCSDIR</code>, and <code>LUA_EXAMPLESDIR</code>, all of which are set up to refer to version-specific subdirectories.
Installing any other files must be done with care to avoid conflicts between versions.</p></div><div class=paragraph><p>A port (other than a Lua module) which wishes to build a separate package for each Lua version should use the <code>flavors</code> parameter:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	lua:flavors</pre></div></div><div class=paragraph><p>This operates the same way as the <code>module</code> parameter described above, but without the assumption that the package should be documented as a Lua module (so <code>LUA_DOCSDIR</code> and <code>LUA_EXAMPLESDIR</code> are not defined by default).
However, the port may choose to define <code>LUA_DOCSUBDIR</code> as a suitable subdirectory name (usually the port’s <code>PORTNAME</code> as long as this does not conflict with the <code>PORTNAME</code> of any module), in which case the framework will define both <code>LUA_DOCSDIR</code> and <code>LUA_EXAMPLESDIR</code>.</p></div><div class=paragraph><p>As with module ports, a flavored port should avoid installing files that would conflict between versions.
Typically this is done by adding <code>LUA_VER_STR</code> as a suffix to program names (e.g. using <a href=../uses/#uses-uniquefiles><code>uniquefiles</code></a>), and otherwise using either <code>LUA_VER</code> or <code>LUA_VER_STR</code> as part of any other files or subdirectories used outside of <code>LUA_MODLIBDIR</code> and <code>LUA_MODSHAREDIR</code>.</p></div></div><div class=sect2><h3 id=lua-defined-variables>6.22.5. Defined Variables<a class=anchor href=#lua-defined-variables></a></h3><div class=paragraph><p>These variables are available in the port.</p></div><table id=using-lua-variables-ports class="tableblock frame-none grid-all stretch"><caption class=title>表 39. Variables Defined for Ports That Use Lua</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_VER</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The Lua version that is going to be used (for example, <code>5.1</code>)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_VER_STR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The Lua version without the dots (for example, <code>51</code>)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_FLAVOR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The flavor name corresponding to the selected Lua version, to be used for specifying dependencies</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_BASE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The prefix that should be used to locate Lua (and components) that are already installed</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_PREFIX</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The prefix where Lua (and components) are to be installed by this port</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_INCDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where Lua header files are installed</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_LIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where Lua libraries are installed</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_REFMODLIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where Lua module libraries (<span class=filename>.so</span>) that are already installed are to be found</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_REFMODSHAREDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where Lua modules (<span class=filename>.lua</span>) that are already installed are to be found</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_MODLIBDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where Lua module libraries (<span class=filename>.so</span>) are to be installed by this port</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_MODSHAREDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The directory where Lua modules (<span class=filename>.lua</span>) are to be installed by this port</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_PKGNAMEPREFIX</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The package name prefix used by Lua modules</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_CMD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The name of the Lua interpreter (e.g. <code>lua53</code>)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUAC_CMD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The name of the Lua compiler (e.g. <code>luac53</code>)</p></td></tr></tbody></table><div class=paragraph><p>These additional variables are available for ports that specified the <code>module</code> parameter:</p></div><table id=using-lua-variables-modules class="tableblock frame-none grid-all stretch"><caption class=title>表 40. Variables Defined for Lua Module Ports</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_DOCSDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>the directory to which the module’s documentation should be installed.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>LUA_EXAMPLESDIR</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>the directory to which the module’s example files should be installed.</p></td></tr></tbody></table></div><div class=sect2><h3 id=lua-examples>6.22.6. Examples<a class=anchor href=#lua-examples></a></h3><div id=lua-app-Makefile class=exampleblock><div class=title>例 29. Makefile for an application using Lua</div><div class=content><div class=paragraph><p>This example shows how to reference a Lua module required at run time.
Notice that the reference must specify a flavor.</p></div><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	sample
DISTVERSION=	1.2.3
CATEGORIES=	whatever

MAINTAINER=	john@doe.tld
COMMENT=	Sample

RUN_DEPENDS=	${LUA_REFMODLIBDIR}/lpeg.so:devel/lua-lpeg@${LUA_FLAVOR}

USES=		lua

.include &lt;bsd.port.mk&gt;</pre></div></div></div></div><div id=lua-mod-Makefile class=exampleblock><div class=title>例 30. Makefile for a simple Lua module</div><div class=content><div class="literalblock programlisting"><div class=content><pre>PORTNAME=	sample
DISTVERSION=	1.2.3
CATEGORIES=	whatever
PKGNAMEPREFIX=	${LUA_PKGNAMEPREFIX}

MAINTAINER=	john@doe.tld
COMMENT=	Sample

USES=		lua:module

DOCSDIR=	${LUA_DOCSDIR}

.include &lt;bsd.port.mk&gt;</pre></div></div></div></div></div></div></div><div class=sect1><h2 id=using-iconv>6.23. Using <code>iconv</code><a class=anchor href=#using-iconv></a></h2><div class=sectionbody><div class=paragraph><p>FreeBSD has a native <code>iconv</code> in the operating system.</p></div><div class=paragraph><p>For software that needs <code>iconv</code>, define <code>USES=iconv</code>.</p></div><div class=paragraph><p>When a port defines <code>USES=iconv</code>, these variables will be available:</p></div><table class="tableblock frame-none grid-all stretch informaltable"><col style=width:25%><col style=width:25%><col style=width:25%><col style=width:25%><thead><tr><th class="tableblock halign-left valign-top">Variable name</th><th class="tableblock halign-left valign-top">Purpose</th><th class="tableblock halign-left valign-top">Port iconv (when using WCHAR_T or //TRANSLIT extensions)</th><th class="tableblock halign-left valign-top">Base iconv</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ICONV_CMD</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory where the <code>iconv</code> binary resides</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>${LOCALBASE}/bin/iconv</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr/bin/iconv</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ICONV_LIB</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>ld</code> argument to link to <span class=filename>libiconv</span> (if needed)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>-liconv</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>(empty)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ICONV_PREFIX</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Directory where the <code>iconv</code> implementation resides (useful for configure scripts)</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>${LOCALBASE}</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>/usr</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ICONV_CONFIGURE_ARG</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Preconstructed configure argument for configure scripts</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>--with-libiconv-prefix=${LOCALBASE}</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>(empty)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ICONV_CONFIGURE_BASE</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Preconstructed configure argument for configure scripts</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>--with-libiconv=${LOCALBASE}</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>(empty)</p></td></tr></tbody></table><div class=paragraph><p>These two examples automatically populate the variables with the correct value for systems using <a class=package href=https://cgit.freebsd.org/ports/tree/converters/libiconv/>converters/libiconv</a> or the native <code>iconv</code> respectively:</p></div><div id=iconv-simple-use class=exampleblock><div class=title>例 31. Simple <code>iconv</code> Usage</div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=		iconv
LDFLAGS+=	-L${LOCALBASE}/lib ${ICONV_LIB}</pre></div></div></div></div><div id=iconv-configure-use class=exampleblock><div class=title>例 32. <code>iconv</code> Usage with <code>configure</code></div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=		iconv
CONFIGURE_ARGS+=${ICONV_CONFIGURE_ARG}</pre></div></div></div></div><div class=paragraph><p>As shown above, <code>ICONV_LIB</code> is empty when a native <code>iconv</code> is present.
This can be used to detect the native <code>iconv</code> and respond appropriately.</p></div><div class=paragraph><p>Sometimes a program has an <code>ld</code> argument or search path hardcoded in a <span class=filename>Makefile</span> or configure script.
This approach can be used to solve that problem:</p></div><div id=iconv-reinplace class=exampleblock><div class=title>例 33. Fixing Hardcoded <code>-liconv</code></div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=		iconv

post-patch:
	@${REINPLACE_CMD} -e &#39;s/-liconv/${ICONV_LIB}/&#39; ${WRKSRC}/Makefile</pre></div></div></div></div><div class=paragraph><p>In some cases it is necessary to set alternate values or perform operations depending on whether there is a native <code>iconv</code>.
<span class=filename>bsd.port.pre.mk</span> must be included before testing the value of <code>ICONV_LIB</code>:</p></div><div id=iconv-conditional class=exampleblock><div class=title>例 34. Checking for Native <code>iconv</code> Availability</div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=		iconv

.include &lt;bsd.port.pre.mk&gt;

post-patch:
.if empty(ICONV_LIB)
	# native iconv detected
	@${REINPLACE_CMD} -e &#39;s|iconv||&#39; ${WRKSRC}/Config.sh
.endif

.include &lt;bsd.port.post.mk&gt;</pre></div></div></div></div></div></div><div class=sect1><h2 id=using-xfce>6.24. Using Xfce<a class=anchor href=#using-xfce></a></h2><div class=sectionbody><div class=paragraph><p>Ports that need Xfce libraries or applications set <code>USES=xfce</code>.</p></div><div class=paragraph><p>Specific Xfce library and application dependencies are set with values assigned to <code>USE_XFCE</code>.
They are defined in <span class=filename>/usr/ports/Mk/Uses/xfce.mk</span>.
The possible values are:</p></div><div class=dlist><div class=title>Values of <code>USE_XFCE</code></div><dl><dt class=hdlist1>garcon</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/sysutils/garcon/>sysutils/garcon</a></p></dd><dt class=hdlist1>libexo</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/x11/libexo/>x11/libexo</a></p></dd><dt class=hdlist1>libgui</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/x11-toolkits/libxfce4gui/>x11-toolkits/libxfce4gui</a></p></dd><dt class=hdlist1>libmenu</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/x11/libxfce4menu/>x11/libxfce4menu</a></p></dd><dt class=hdlist1>libutil</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/x11/libxfce4util/>x11/libxfce4util</a></p></dd><dt class=hdlist1>panel</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/x11-wm/xfce4-panel/>x11-wm/xfce4-panel</a></p></dd><dt class=hdlist1>thunar</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/x11-fm/thunar/>x11-fm/thunar</a></p></dd><dt class=hdlist1>xfconf</dt><dd><p><a class=package href=https://cgit.freebsd.org/ports/tree/x11/xfce4-conf/>x11/xfce4-conf</a></p></dd></dl></div><div id=use-xfce class=exampleblock><div class=title>例 35. <code>USES=xfce</code> Example</div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=		xfce
USE_XFCE=	libmenu</pre></div></div></div></div><div id=use-xfce-gtk2 class=exampleblock><div class=title>例 36. Using Xfce’s Own GTK2 Widgets</div><div class=content><div class=paragraph><p>In this example, the ported application uses the GTK2-specific widgets <a class=package href=https://cgit.freebsd.org/ports/tree/x11/libxfce4menu/>x11/libxfce4menu</a> and <a class=package href=https://cgit.freebsd.org/ports/tree/x11/xfce4-conf/>x11/xfce4-conf</a>.</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		xfce:gtk2
USE_XFCE=	libmenu xfconf</pre></div></div></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>Xfce components included this way will automatically include any dependencies they need.
It is no longer necessary to specify the entire list.
If the port only needs <a class=package href=https://cgit.freebsd.org/ports/tree/x11-wm/xfce4-panel/>x11-wm/xfce4-panel</a>, use:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		xfce
USE_XFCE=	panel</pre></div></div><div class=paragraph><p>There is no need to list the components <a class=package href=https://cgit.freebsd.org/ports/tree/x11-wm/xfce4-panel/>x11-wm/xfce4-panel</a> needs itself like this:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		xfce
USE_XFCE=	libexo libmenu libutil panel</pre></div></div><div class=paragraph><p>However, Xfce components and non-Xfce dependencies of the port must be included explicitly.
Do not count on an Xfce component to provide a sub-dependency other than itself for the main port.</p></div></td></tr></tbody></table></div></div></div><div class=sect1><h2 id=using-databases>6.25. Using Databases<a class=anchor href=#using-databases></a></h2><div class=sectionbody><div class=paragraph><p>Use one of the <code>USES</code> macros from <a href=#using-databases-uses>Database <code>USES</code> Macros</a> to add a dependency on a database.</p></div><table id=using-databases-uses class="tableblock frame-none grid-all stretch"><caption class=title>表 41. Database <code>USES</code> Macros</caption><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Database</th><th class="tableblock halign-left valign-top">USES Macro</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Berkeley DB</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a href=../uses/#uses-bdb><code>bdb</code></a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>MariaDB, MySQL, Percona</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a href=../uses/#uses-mysql><code>mysql</code></a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>PostgreSQL</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a href=../uses/#uses-pgsql><code>pgsql</code></a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>SQLite</p></td><td class="tableblock halign-left valign-top"><p class=tableblock><a href=../uses/#uses-sqlite><code>sqlite</code></a></p></td></tr></tbody></table><div id=using-databases-bdb-ex1 class=exampleblock><div class=title>例 37. Using Berkeley DB 6</div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=	bdb:6</pre></div></div><div class=paragraph><p>See <a href=../uses/#uses-bdb><code>bdb</code></a> for more information.</p></div></div></div><div id=using-databases-mysql-ex1 class=exampleblock><div class=title>例 38. Using MySQL</div><div class=content><div class=paragraph><p>When a port needs the MySQL client library add</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	mysql</pre></div></div><div class=paragraph><p>See <a href=../uses/#uses-mysql><code>mysql</code></a> for more information.</p></div></div></div><div id=using-databases-pgsql-ex1 class=exampleblock><div class=title>例 39. Using PostgreSQL</div><div class=content><div class=paragraph><p>When a port needs the PostgreSQL server version 9.6 or later add</p></div><div class="literalblock programlisting"><div class=content><pre>USES=		pgsql:9.6+
WANT_PGSQL=	server</pre></div></div><div class=paragraph><p>See <a href=../uses/#uses-pgsql><code>pgsql</code></a> for more information.</p></div></div></div><div id=using-databases-sqlite-ex1 class=exampleblock><div class=title>例 40. Using SQLite 3</div><div class=content><div class="literalblock programlisting"><div class=content><pre>USES=	sqlite:3</pre></div></div><div class=paragraph><p>See <a href=../uses/#uses-sqlite><code>sqlite</code></a> for more information.</p></div></div></div></div></div><div class=sect1><h2 id=rc-scripts>6.26. Starting and Stopping Services (<code>rc</code> Scripts)<a class=anchor href=#rc-scripts></a></h2><div class=sectionbody><div class=paragraph><p><span class=filename>rc.d</span> scripts are used to start services on system startup, and to give administrators a standard way of stopping, starting and restarting the service.
Ports integrate into the system <span class=filename>rc.d</span> framework.
Details on its usage can be found in <a href=https://docs.freebsd.org/en/books/handbook/#configtuning-rcd>the rc.d Handbook chapter</a>.
Detailed explanation of the available commands is provided in <a href="https://man.freebsd.org/cgi/man.cgi?query=rc&amp;sektion=8&amp;format=html">rc(8)</a> and <a href="https://man.freebsd.org/cgi/man.cgi?query=rc.subr&amp;sektion=8&amp;format=html">rc.subr(8)</a>.
Finally, there is <a href=https://docs.freebsd.org/en/articles/rc-scripting/>an article</a> on practical aspects of <span class=filename>rc.d</span> scripting.</p></div><div class=paragraph><p>With a mythical port called <em>doorman</em>, which needs to start a <em>doormand</em> daemon.
Add the following to the <span class=filename>Makefile</span>:</p></div><div class="literalblock programlisting"><div class=content><pre>USE_RC_SUBR=	doormand</pre></div></div><div class=paragraph><p>Multiple scripts may be listed and will be installed.
Scripts must be placed in the <span class=filename>files</span> subdirectory and a <code>.in</code> suffix must be added to their filename.
Standard <code>SUB_LIST</code> expansions will be ran against this file.
Use of the <code>%%PREFIX%%</code> and <code>%%LOCALBASE%%</code> expansions is strongly encouraged as well.
More on <code>SUB_LIST</code> in <a href=../pkg-files/#using-sub-files>the relevant section</a>.</p></div><div class=paragraph><p>As of FreeBSD 6.1-RELEASE, local <span class=filename>rc.d</span> scripts (including those installed by ports) are included in the overall <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a> of the base system.</p></div><div class=paragraph><p>An example simple <span class=filename>rc.d</span> script to start the doormand daemon:</p></div><div class="literalblock programlisting"><div class=content><pre>#!/bin/sh

# $FreeBSD$
#
# PROVIDE: doormand
# REQUIRE: LOGIN
# KEYWORD: shutdown
#
# Add these lines to /etc/rc.conf.local or /etc/rc.conf
# to enable this service:
#
# doormand_enable (bool):	Set to NO by default.
#				Set it to YES to enable doormand.
# doormand_config (path):	Set to %%PREFIX%%/etc/doormand/doormand.cf
#				by default.

. /etc/rc.subr

name=doormand
rcvar=doormand_enable

load_rc_config $name

: ${doormand_enable:=&#34;NO&#34;}
: ${doormand_config=&#34;%%PREFIX%%/etc/doormand/doormand.cf&#34;}

command=%%PREFIX%%/sbin/${name}
pidfile=/var/run/${name}.pid

command_args=&#34;-p $pidfile -f $doormand_config&#34;

run_rc_command &#34;$1&#34;</pre></div></div><div class=paragraph><p>Unless there is a very good reason to start the service earlier, or it runs as a particular user (other than root), all ports scripts must use:</p></div><div class="literalblock programlisting"><div class=content><pre>REQUIRE: LOGIN</pre></div></div><div class=paragraph><p>If the startup script launches a daemon that must be shutdown, the following will trigger a stop of the service on system shutdown:</p></div><div class="literalblock programlisting"><div class=content><pre>KEYWORD: shutdown</pre></div></div><div class=paragraph><p>If the script is not starting a persistent service this is not necessary.</p></div><div class=paragraph><p>For optional configuration elements the "=" style of default variable assignment is preferable to the ":=" style here, since the former sets a default value only if the variable is unset, and the latter sets one if the variable is unset <em>or</em> null.
A user might very well include something like:</p></div><div class="literalblock programlisting"><div class=content><pre>doormand_flags=&#34;&#34;</pre></div></div><div class=paragraph><p>in their <span class=filename>rc.conf.local</span>, and a variable substitution using ":=" would inappropriately override the user’s intention.
The <code>_enable</code> variable is not optional, and must use the ":" for the default.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>Ports <em>must not</em> start and stop their services when installing and deinstalling.
Do not abuse the <span class=filename>plist</span> keywords described in <a href=../plist/#plist-keywords-base-exec>the @preexec command,@postexec command,@preunexec command,@postunexec command section</a> by running commands that modify the currently running system, including starting or stopping services.</p></div></td></tr></tbody></table></div><div class=sect2><h3 id=rc-scripts-checklist>6.26.1. Pre-Commit Checklist<a class=anchor href=#rc-scripts-checklist></a></h3><div class=paragraph><p>Before contributing a port with an <span class=filename>rc.d</span> script, and more importantly, before committing one, please consult this checklist to be sure that it is ready.</p></div><div class=paragraph><p>The <a class=package href=https://cgit.freebsd.org/ports/tree/devel/rclint/>devel/rclint</a> port can check for most of these, but it is not a substitute for proper review.</p></div><div class="olist arabic procedure"><ol class=arabic><li><p>If this is a new file, does it have a <span class=filename>.sh</span> extension? If so, that must be changed to just <span class=filename>file.in</span> since <span class=filename>rc.d</span> files may not end with that extension.</p></li><li><p>Does the file have a <code>$FreeBSD$</code> tag?</p></li><li><p>Do the name of the file (minus <span class=filename>.in</span>), the <code>PROVIDE</code> line, and <code>$</code> <em>name</em> all match? The file name matching <code>PROVIDE</code> makes debugging easier, especially for <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a> issues. Matching the file name and `$`<em>name</em> makes it easier to figure out which variables are relevant in <span class=filename>rc.conf[.local]</span>. It is also a policy for all new scripts, including those in the base system.</p></li><li><p>Is the <code>REQUIRE</code> line set to <code>LOGIN</code>? This is mandatory for scripts that run as a non-root user. If it runs as root, is there a good reason for it to run prior to <code>LOGIN</code>? If not, it must run after so that local scrips can be loosely grouped to a point in <a href="https://man.freebsd.org/cgi/man.cgi?query=rcorder&amp;sektion=8&amp;format=html">rcorder(8)</a> after most everything in the base is already running.</p></li><li><p>Does the script start a persistent service? If so, it must have <code>KEYWORD: shutdown</code>.</p></li><li><p>Make sure there is no <code>KEYWORD: FreeBSD</code> present. This has not been necessary nor desirable for years. It is also an indication that the new script was copy/pasted from an old script, so extra caution must be given to the review.</p></li><li><p>If the script uses an interpreted language like <code>perl</code>, <code>python</code>, or <code>ruby</code>, make certain that <code>command_interpreter</code> is set appropriately, for example, for Perl, by adding <code>PERL=${PERL}</code> to <code>SUB_LIST</code> and using <code>%%PERL%%</code>. Otherwise,</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># service name stop</span></code></pre></div></div><div class=paragraph><p>will probably not work properly. See <a href="https://man.freebsd.org/cgi/man.cgi?query=service&amp;sektion=8&amp;format=html">service(8)</a> for more information.</p></div></li><li><p>Have all occurrences of <span class=filename>/usr/local</span> been replaced with <code>%%PREFIX%%</code>?</p></li><li><p>Do the default variable assignments come after <code>load_rc_config</code>?</p></li><li><p>Are there default assignments to empty strings? They should be removed, but double-check that the option is documented in the comments at the top of the file.</p></li><li><p>Are things that are set in variables actually used in the script?</p></li><li><p>Are options listed in the default <em>name</em>`_flags` things that are actually mandatory? If so, they must be in <code>command_args</code>. <code>-d</code> is a red flag (pardon the pun) here, since it is usually the option to "daemonize" the process, and therefore is actually mandatory.</p></li><li><p><code>_name__flags</code> must never be included in <code>command_args</code> (and vice versa, although that error is less common).</p></li><li><p>Does the script execute any code unconditionally? This is frowned on. Usually these things must be dealt with through a <code>start_precmd</code>.</p></li><li><p>All boolean tests must use the <code>checkyesno</code> function. No hand-rolled tests for <code>[Yy][Ee][Ss]</code>, etc.</p></li><li><p>If there is a loop (for example, waiting for something to start) does it have a counter to terminate the loop? We do not want the boot to be stuck forever if there is an error.</p></li><li><p>Does the script create files or directories that need specific permissions, for example, a <span class=filename>pid</span> that needs to be owned by the user that runs the process? Rather than the traditional <a href="https://man.freebsd.org/cgi/man.cgi?query=touch&amp;sektion=1&amp;format=html">touch(1)</a>/<a href="https://man.freebsd.org/cgi/man.cgi?query=chown&amp;sektion=8&amp;format=html">chown(8)</a>/<a href="https://man.freebsd.org/cgi/man.cgi?query=chmod&amp;sektion=1&amp;format=html">chmod(1)</a> routine, consider using <a href="https://man.freebsd.org/cgi/man.cgi?query=install&amp;sektion=1&amp;format=html">install(1)</a> with the proper command line arguments to do the whole procedure with one step.</p></li></ol></div></div></div></div><div class=sect1><h2 id=users-and-groups>6.27. Adding Users and Groups<a class=anchor href=#users-and-groups></a></h2><div class=sectionbody><div class=paragraph><p>Some ports require a particular user account to be present, usually for daemons that run as that user.
For these ports, choose a <em>unique</em> UID from 50 to 999 and register it in <span class=filename>ports/UIDs</span> (for users) and <span class=filename>ports/GIDs</span> (for groups).
The unique identification should be the same for users and groups.</p></div><div class=paragraph><p>Please include a patch against these two files when requiring a new user or group to be created for the port.</p></div><div class=paragraph><p>Then use <code>USERS</code> and <code>GROUPS</code> in <span class=filename>Makefile</span>, and the user will be automatically created when installing the port.</p></div><div class="literalblock programlisting"><div class=content><pre>USERS=	pulse
GROUPS=	pulse pulse-access pulse-rt</pre></div></div><div class=paragraph><p>The current list of reserved UIDs and GIDs can be found in <span class=filename>ports/UIDs</span> and <span class=filename>ports/GIDs</span>.</p></div></div></div><div class=sect1><h2 id=requiring-kernel-sources>6.28. Ports That Rely on Kernel Sources<a class=anchor href=#requiring-kernel-sources></a></h2><div class=sectionbody><div class=paragraph><p>Some ports (such as kernel loadable modules) need the kernel source files so that the port can compile.
Here is the correct way to determine if the user has them installed:</p></div><div class="literalblock programlisting"><div class=content><pre>USES=	kmod</pre></div></div><div class=paragraph><p>Apart from this check, the <code>kmod</code> feature takes care of most items that these ports need to take into account.</p></div></div></div><div class=sect1><h2 id=go-libs>6.29. Go Libraries<a class=anchor href=#go-libs></a></h2><div class=sectionbody><div class=paragraph><p>Ports must not package or install Go libs or source code.
Go ports must fetch the required deps at the normal fetch time and should only install the programs and things users need, not the things Go developers would need.</p></div><div class=paragraph><p>Ports should (in order of preference):</p></div><div class=ulist><ul><li><p>Use vendored dependencies included with the package source.</p></li><li><p>Fetch the versions of deps specified by upstream (in the case of go.mod, vendor.json or similar).</p></li><li><p>As a last resort (deps are not included nor versions specified exactly) fetch versions of dependencies available at the time of upstream development/release.</p></li></ul></div></div></div><div class=sect1><h2 id=haskell-libs>6.30. Haskell Libraries<a class=anchor href=#haskell-libs></a></h2><div class=sectionbody><div class=paragraph><p>Just like in case of Go language, Ports must not package or install Haskell libraries.
Haskell ports must link statically to their dependencies and fetch all distribution files on fetch stage.</p></div></div></div><div class=sect1><h2 id=shell-completion>6.31. Shell Completion Files<a class=anchor href=#shell-completion></a></h2><div class=sectionbody><div class=paragraph><p>Many modern shells (including bash, fish, tcsh and zsh) support parameter and/or option tab-completion.
This support usually comes from completion files, which contain the definitions for how tab completion will work for a certain command.
Ports sometimes ship with their own completion files, or porters may have created them themselves.</p></div><div class=paragraph><p>When available, completion files should always be installed.
It is not necessary to make an option for it.
If an option is used, though, always enable it in <code>OPTIONS_DEFAULT</code>.</p></div><table id=shell-completion-paths class="tableblock frame-none grid-all stretch"><caption class=title>表 42. Shell completion file paths</caption><col style=width:50%><col style=width:50%><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>bash</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>${PREFIX}/etc/bash_completion.d</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>fish</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>${PREFIX}/share/fish/vendor_completions.d</span></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>zsh</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><span class=filename>${PREFIX}/share/zsh/site-functions</span></p></td></tr></tbody></table><div class=paragraph><p>Do not register any dependencies on the shells themselves.</p></div></div></div></div><hr><div class=last-modified><p><strong>最後修改於</strong>: March 9, 2024 由 <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/makefiles class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=https://docs.freebsd.org/zh-tw/books/porters-handbook/flavors class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#staging>6.1. Staging</a></li><li><a href=#bundled-libs>6.2. Bundled Libraries</a></li><li><a href=#porting-shlibs>6.3. Shared Libraries</a></li><li><a href=#porting-restrictions>6.4. Ports with Distribution Restrictions or Legal Concerns</a></li><li><a href=#building>6.5. Building Mechanisms</a></li><li><a href=#using-autotools>6.6. Using GNU Autotools</a></li><li><a href=#using-gettext>6.7. Using GNU <code>gettext</code></a></li><li><a href=#using-perl>6.8. Using Perl</a></li><li><a href=#using-x11>6.9. Using X11</a></li><li><a href=#using-gnome>6.10. Using GNOME</a></li><li><a href=#gnome-components>6.11. GNOME Components</a></li><li><a href=#using-qt>6.12. Using Qt</a></li><li><a href=#using-kde>6.13. Using KDE</a></li><li><a href=#using-lxqt>6.14. Using LXQt</a></li><li><a href=#using-java>6.15. Using Java</a></li><li><a href=#using-php>6.16. Web Applications, Apache and PHP</a></li><li><a href=#using-python>6.17. Using Python</a></li><li><a href=#using-tcl>6.18. Using Tcl/Tk</a></li><li><a href=#using-ruby>6.19. Using Ruby</a></li><li><a href=#using-sdl>6.20. Using SDL</a></li><li><a href=#using-wx>6.21. Using wxWidgets</a></li><li><a href=#using-lua>6.22. Using Lua</a></li><li><a href=#using-iconv>6.23. Using <code>iconv</code></a></li><li><a href=#using-xfce>6.24. Using Xfce</a></li><li><a href=#using-databases>6.25. Using Databases</a></li><li><a href=#rc-scripts>6.26. Starting and Stopping Services (<code>rc</code> Scripts)</a></li><li><a href=#users-and-groups>6.27. Adding Users and Groups</a></li><li><a href=#requiring-kernel-sources>6.28. Ports That Rely on Kernel Sources</a></li><li><a href=#go-libs>6.29. Go Libraries</a></li><li><a href=#haskell-libs>6.30. Haskell Libraries</a></li><li><a href=#shell-completion>6.31. Shell Completion Files</a></li></ul></nav><hr><div class=resources><h3>資源</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="下載 PDF"></i><a href=https://download.freebsd.org/doc/zh-tw/books/porters-handbook/porters-handbook_zh-tw.pdf>下載 PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title=編輯此頁></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/zh-tw/_index target=_blank>編輯此頁</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=https://docs.freebsd.org/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=https://docs.freebsd.org/zh-tw/languages><img src=https://docs.freebsd.org/images/language.png class=language-image alt=選擇語言>
<span>繁體中文</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>淺色</option><option value=theme-dark>深色</option><option value=theme-high-contrast>高對比</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/zh-tw class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=https://docs.freebsd.org/zh-tw/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>