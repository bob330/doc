<!doctype html><html class=theme-light lang=zh-tw><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Upgrading a FreeBSD Port"><meta name=keywords content="upgrading,port,git"><meta name=copyright content="1995-2024 The FreeBSD Foundation"><link rel=canonical href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/upgrading/><title>Chapter 11. Upgrading a Port | FreeBSD Documentation Portal</title>
<meta name=theme-color content="#790000"><meta name=color-scheme content="system light dark high-contrast"><link rel="shortcut icon" href=http://172.16.201.134:1313/favicon.ico><link rel=stylesheet href=http://172.16.201.134:1313/styles/main.min.css><link rel=stylesheet href=http://172.16.201.134:1313/css/font-awesome-min.css><script defer src=/js/theme-chooser.min.js></script><script defer src=/js/copy-clipboard.min.js></script><script defer src=/js/search.min.js></script><meta name=twitter:card content="summary"><meta name=twitter:domain content="docs.FreeBSD.org"><meta name=twitter:site content="@freebsd"><meta name=twitter:url content="https://twitter.com/freebsd"><meta property="og:title" content="Chapter 11. Upgrading a Port"><meta property="og:description" content="Upgrading a FreeBSD Port"><meta property="og:type" content="website"><meta property="og:image" content="http://172.16.201.134:1313/favicon.ico"><meta property="og:image:alt" content="FreeBSD Logo"><meta property="og:locale" content="zh-tw"><meta property="og:url" content="http://172.16.201.134:1313/zh-tw/books/porters-handbook/upgrading/"><meta property="og:site_name" content="FreeBSD Documentation Portal"><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","url":"http:\/\/172.16.201.134:1313\/zh-tw\/books\/porters-handbook\/upgrading\/","name":"FreeBSD Documentation Portal","headline":"FreeBSD Documentation Portal","description":"FreeBSD Documentation Portal"}</script></head><body><header><div class=header-container><div class=logo-menu-bars-container><a href=https://www.FreeBSD.org class=logo><img src=http://172.16.201.134:1313/images/FreeBSD-monochromatic.svg width=160 height=50 alt="FreeBSD logo">
</a><label class=menu-bars for=menu-bars><i class="fa fa-bars" aria-hidden=true></i></label></div><input id=menu-bars type=checkbox><nav><ul class=menu><li class=menu-item><input id=about type=checkbox>
<a href=# aria-label="Navigate to About section"><label class=menu-item-description for=about>About
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/about/ target=_blank>About</a></li><li><a href=https://www.freebsd.org/about/ target=_blank>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/about-us/about-the-foundation/ target=_blank>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct/ target=_blank>Code of Conduct</a></li></ul></li><li class=menu-item><input id=download type=checkbox>
<a href=# aria-label="Navigate to get FreeBSD section"><label class=menu-item-description for=download>Get FreeBSD
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/where/ target=_blank>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/releases/ target=_blank>Release Information</a></li><li><a href=https://www.freebsd.org/releng/ target=_blank>Release Engineering</a></li><li><a href=https://www.freebsd.org/security/ target=_blank>Security Advisories</a></li></ul></li><li class=menu-item><input id=documentation type=checkbox>
<a href=# aria-label="Navigate to get Documentation section"><label class=menu-item-description for=documentation>Documentation
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=/zh-tw>Documentation portal</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/handbook>FreeBSD Handbook</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook>Porter's Handbook</a></li><li><a href=https://docs.FreeBSD.org/en/books/fdp-primer>Documentation Project Handbook</a></li><li><a href=https://man.FreeBSD.org target=_blank>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank>Presentations and papers</a></li><li><a href=https://wiki.FreeBSD.org target=_blank>Wiki</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books>Books</a></li><li><a href=http://172.16.201.134:1313/zh-tw/articles>Articles</a></li></ul></li><li class=menu-item><input id=community type=checkbox>
<a href=# aria-label="Navigate to get Community section"><label class=menu-item-description for=community>Community
<i class="fa fa-angle-down fa-lg" aria-hidden=true></i></label></a><ul class=sub-menu><li class=title><a href=https://www.freebsd.org/community/>Community</a></li><li><a href=http://172.16.201.134:1313/zh-tw/articles/contributing>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank>Forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank>Bug Tracker</a></li><li><a href=https://www.freebsd.org/support/ target=_blank>Support</a></li></ul></li></ul></nav><div class=search-donate-container><form class=search method=get id=search-header-form action=https://docs.freebsd.org/search name=search-header-form><input type=hidden name=DB value=zh-tw>
<input id=words name=P type=text size=20 maxlength=255>
<button>
<i class="fa fa-search" aria-hidden=true></i></button></form><div class=donate><a href=https://freebsdfoundation.org/donate/ target=_blank><span class=heart>♥</span>
Donate</a></div></div></div></header><input type=checkbox class="hidden toggle" id=menu-control><main class=main-wrapper-book><a id=top></a><aside class=book-menu><div class=book-menu-content><input id=search-book type=text placeholder=Search aria-label=Search maxlength=128><nav id=MenuContents><ul><li><input type=checkbox id=chapter-c934186a5adac4f64b993f751abed30c class=toggle>
<label for=chapter-c934186a5adac4f64b993f751abed30c><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-why/>章 1. 楔子</a></li><li><input type=checkbox id=chapter-2798d78fe854f2709bab5ca473b97050 class=toggle>
<label for=chapter-2798d78fe854f2709bab5ca473b97050><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/new-port/>章 2. 製作新的 Port</a></li><li><input type=checkbox id=chapter-c0d52b9121b517084e01f59cefa725e1 class=toggle>
<label class="icon cursor" for=chapter-c0d52b9121b517084e01f59cefa725e1><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/quick-porting/>章 3. 打造 Port 快速上手篇</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/quick-porting/#porting-makefile>3.1. 編寫 <span class=filename>Makefile</span></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/quick-porting/#porting-desc>3.2. 撰寫說明檔</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/quick-porting/#porting-checksum>3.3. 產生 checksum 檔</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/quick-porting/#porting-testing>3.4. 測試 Port</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/quick-porting/#porting-portlint>3.5. 以 <code>portlint</code> 來作檢查 Port</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/quick-porting/#porting-submitting>3.6. 提交新的 Port</a></li></ul></li><li><input type=checkbox id=chapter-3694de03923da61ba10a0a25efca6ef0 class=toggle>
<label class="icon cursor" for=chapter-3694de03923da61ba10a0a25efca6ef0><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/slow-porting/>章 4. Slow Porting</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/slow-porting/#slow-work>4.1. How Things Work</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/slow-porting/#slow-sources>4.2. 取得原始碼</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/slow-porting/#slow-modifying>4.3. Modifying the Port</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/slow-porting/#slow-patch>4.4. Patching</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/slow-porting/#slow-configure>4.5. 設定</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/slow-porting/#slow-user-input>4.6. 處理使用者輸入</a></li></ul></li><li><input type=checkbox id=chapter-165f6a6dba6651f8c25fc63ab83d6538 class=toggle>
<label class="icon cursor" for=chapter-165f6a6dba6651f8c25fc63ab83d6538><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/>Chapter 5. Configuring the Makefile</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-source>5.1. The Original Source</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-naming>5.2. Naming</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-categories>5.3. Categorization</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-distfiles>5.4. The Distribution Files</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-maintainer>5.5. <code>MAINTAINER</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-comment>5.6. <code>COMMENT</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#licenses>5.7. Licenses</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-portscout>5.8. <code>PORTSCOUT</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-depend>5.9. Dependencies</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-masterdir>5.10. Slave Ports and <code>MASTERDIR</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-manpages>5.11. Man Pages</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-info>5.12. Info Files</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-options>5.13. Makefile Options</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#makefile-wrkdir>5.14. Specifying the Working Directory</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#conflicts>5.15. Conflict Handling</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#install>5.16. Installing Files</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/makefiles/#binary-alias>5.17. Use <code>BINARY_ALIAS</code> to Rename Commands Instead of Patching the Build</a></li></ul></li><li><input type=checkbox id=chapter-19e3150e00beb84341d8ac1a73936ef0 class=toggle>
<label class="icon cursor" for=chapter-19e3150e00beb84341d8ac1a73936ef0><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/>Chapter 6. Special Considerations</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#staging>6.1. Staging</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#bundled-libs>6.2. Bundled Libraries</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#porting-shlibs>6.3. Shared Libraries</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#porting-restrictions>6.4. Ports with Distribution Restrictions or Legal Concerns</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#building>6.5. Building Mechanisms</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-autotools>6.6. Using GNU Autotools</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-gettext>6.7. Using GNU <code>gettext</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-perl>6.8. Using Perl</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-x11>6.9. Using X11</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-gnome>6.10. Using GNOME</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#gnome-components>6.11. GNOME Components</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-qt>6.12. Using Qt</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-kde>6.13. Using KDE</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-lxqt>6.14. Using LXQt</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-java>6.15. Using Java</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-php>6.16. Web Applications, Apache and PHP</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-python>6.17. Using Python</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-tcl>6.18. Using Tcl/Tk</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-ruby>6.19. Using Ruby</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-sdl>6.20. Using SDL</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-wx>6.21. Using wxWidgets</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-lua>6.22. Using Lua</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-iconv>6.23. Using <code>iconv</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-xfce>6.24. Using Xfce</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#using-databases>6.25. Using Databases</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#rc-scripts>6.26. Starting and Stopping Services (<code>rc</code> Scripts)</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#users-and-groups>6.27. Adding Users and Groups</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#requiring-kernel-sources>6.28. Ports That Rely on Kernel Sources</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#go-libs>6.29. Go Libraries</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#haskell-libs>6.30. Haskell Libraries</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/special/#shell-completion>6.31. Shell Completion Files</a></li></ul></li><li><input type=checkbox id=chapter-2a77b1fa0736427c336503055c700137 class=toggle>
<label class="icon cursor" for=chapter-2a77b1fa0736427c336503055c700137><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/flavors/>Chapter 7. Flavors</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/flavors/#flavors-intro>7.1. An Introduction to Flavors</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/flavors/#flavors-using>7.2. Using FLAVORS</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/flavors/#flavors-auto-php>7.3. <code>USES=php</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/flavors/#flavors-auto-python>7.4. <code>USES=python</code> and Flavors</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/flavors/#flavors-auto-lua>7.5. <code>USES=lua</code> and Flavors</a></li></ul></li><li><input type=checkbox id=chapter-154554011c772e1e6cc0108eef5e0b2b class=toggle>
<label class="icon cursor" for=chapter-154554011c772e1e6cc0108eef5e0b2b><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/plist/>Chapter 8. Advanced pkg-plist Practices</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/plist/#plist-sub>8.1. Changing pkg-plist Based on Make Variables</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/plist/#plist-cleaning>8.2. Empty Directories</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/plist/#plist-config>8.3. Configuration Files</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/plist/#plist-dynamic>8.4. Dynamic Versus Static Package List</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/plist/#plist-autoplist>8.5. Automated Package List Creation</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/plist/#plist-keywords>8.6. Expanding Package List with Keywords</a></li></ul></li><li><input type=checkbox id=chapter-5955b0791ccd51005b5bc5bebeec91e5 class=toggle>
<label class="icon cursor" for=chapter-5955b0791ccd51005b5bc5bebeec91e5><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/pkg-files/>Chapter 9. pkg-*</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/pkg-files/#porting-message>9.1. pkg-message</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/pkg-files/#pkg-install>9.2. pkg-install</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/pkg-files/#pkg-deinstall>9.3. pkg-deinstall</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/pkg-files/#pkg-names>9.4. Changing the Names of pkg-*</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/pkg-files/#using-sub-files>9.5. Making Use of <code>SUB_FILES</code> and <code>SUB_LIST</code></a></li></ul></li><li><input type=checkbox id=chapter-ee86a11caedb6395ed82b94ec7a9c6cd class=toggle>
<label class="icon cursor" for=chapter-ee86a11caedb6395ed82b94ec7a9c6cd><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing/>Chapter 10. Testing the Port</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing/#make-describe>10.1. Running <code>make describe</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing/#testing-portclippy>10.2. Portclippy / Portfmt</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing/#testing-portlint>10.3. Portlint</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing/#testing-porttools>10.4. Port Tools</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing/#porting-prefix>10.5. <code>PREFIX</code> and <code>DESTDIR</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing/#testing-poudriere>10.6. Poudriere</a></li></ul></li><li><input type=checkbox id=chapter-4ccaefe2590c044ca2b79c46e79fe17f class=toggle checked>
<label class="icon cursor" for=chapter-4ccaefe2590c044ca2b79c46e79fe17f><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/upgrading/>Chapter 11. Upgrading a Port</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/upgrading/#git-diff>11.1. Using Git to Make Patches</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/upgrading/#moved-and-updating-files>11.2. UPDATING and MOVED</a></li></ul></li><li><input type=checkbox id=chapter-1023911bc0041506653280b832dea3b2 class=toggle>
<label class="icon cursor" for=chapter-1023911bc0041506653280b832dea3b2><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/security/>Chapter 12. Security</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/security/#security-intro>12.1. Why Security is So Important</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/security/#security-fix>12.2. Fixing Security Vulnerabilities</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/security/#security-notify>12.3. Keeping the Community Informed</a></li></ul></li><li><input type=checkbox id=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7 class=toggle>
<label class="icon cursor" for=chapter-9a8875d5d59aa92f1e5a78e9ecd1fbe7><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/>Chapter 13. Dos and Don'ts</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-intro>13.1. Introduction</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#porting-wrkdir>13.2. <code>WRKDIR</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#porting-wrkdirprefix>13.3. <code>WRKDIRPREFIX</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#porting-versions>13.4. Differentiating Operating Systems and OS Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-after-port-mk>13.5. Writing Something After bsd.port.mk</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-sh-exec>13.6. Use the <code>exec</code> Statement in Wrapper Scripts</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-rational>13.7. Do Things Rationally</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-cc>13.8. Respect Both <code>CC</code> and <code>CXX</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-cflags>13.9. Respect <code>CFLAGS</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-verbose-logs>13.10. Verbose Build Logs</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-feedback>13.11. Feedback</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-readme>13.12. README.html</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-noinstall>13.13. Marking a Port Not Installable with <code>BROKEN</code>, <code>FORBIDDEN</code>, or <code>IGNORE</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-arch>13.14. Architectural Considerations</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-deprecated>13.15. Marking a Port for Removal with <code>DEPRECATED</code> or <code>EXPIRATION_DATE</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-dot-error>13.16. Avoid Use of the <code>.error</code> Construct</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-sysctl>13.17. Usage of sysctl</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-rerolling-distfiles>13.18. Rerolling Distfiles</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-use-posix-standards>13.19. Use POSIX Standards</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-dads/#dads-misc>13.20. Miscellanea</a></li></ul></li><li><input type=checkbox id=chapter-5ef4c4c471a3f55c74fb71881f9d8713 class=toggle>
<label for=chapter-5ef4c4c471a3f55c74fb71881f9d8713><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/porting-samplem/>Chapter 14. A Sample Makefile</a></li><li><input type=checkbox id=chapter-15c16456ccd7b4dc2a25fa8defa336a1 class=toggle>
<label class="icon cursor" for=chapter-15c16456ccd7b4dc2a25fa8defa336a1><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/>Chapter 15. Order of Variables in Port Makefiles</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-portname>15.1. <code>PORTNAME</code> Block</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-patch>15.2. <code>PATCHFILES</code> Block</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-maintainer>15.3. <code>MAINTAINER</code> Block</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-license>15.4. <code>LICENSE</code> Block</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-broken>15.5. Generic <code>BROKEN</code>/<code>IGNORE</code>/<code>DEPRECATED</code> Messages</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-depends>15.6. The Dependencies Block</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-flavors>15.7. Flavors</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-uses>15.8. <code>USES</code> and <code>USE_x</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-variables>15.9. Standard bsd.port.mk Variables</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-options>15.10. Options and Helpers</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-rest>15.11. The Rest of the Variables</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/order/#porting-order-targets>15.12. The Targets</a></li></ul></li><li><input type=checkbox id=chapter-70f5a4755700a24529175d26e65871bf class=toggle>
<label class="icon cursor" for=chapter-70f5a4755700a24529175d26e65871bf><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/keeping-up/>Chapter 16. Keeping Up</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/keeping-up/#freshports>16.1. FreshPorts</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/keeping-up/#cgit>16.2. The Web Interface to the Source Repository</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/keeping-up/#ports-mailing-list>16.3. The FreeBSD Ports Mailing List</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/keeping-up/#build-cluster>16.4. The FreeBSD Port Building Cluster</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/keeping-up/#distfile-survey>16.5. Portscout: the FreeBSD Ports Distfile Scanner</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/keeping-up/#portsmon>16.6. The FreeBSD Ports Monitoring System</a></li></ul></li><li><input type=checkbox id=chapter-8225273087f0e195be28132f4b5a0562 class=toggle>
<label class="icon cursor" for=chapter-8225273087f0e195be28132f4b5a0562><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/>Chapter 17. Using USES Macros</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-intro>17.1. An Introduction to <code>USES</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-7z>17.2. <code>7z</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-ada>17.3. <code>ada</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-autoreconf>17.4. <code>autoreconf</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-blaslapack>17.5. <code>blaslapack</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-bdb>17.6. <code>bdb</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-bison>17.7. <code>bison</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-cabal>17.8. <code>cabal</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-cargo>17.9. <code>cargo</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-charsetfix>17.10. <code>charsetfix</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-cmake>17.11. <code>cmake</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-compiler>17.12. <code>compiler</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-cpe>17.13. <code>cpe</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-cran>17.14. <code>cran</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-desktop-file-utils>17.15. <code>desktop-file-utils</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-desthack>17.16. <code>desthack</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-display>17.17. <code>display</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-dos2unix>17.18. <code>dos2unix</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-drupal>17.19. <code>drupal</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-eigen>17.20. <code>eigen</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-fakeroot>17.21. <code>fakeroot</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-fam>17.22. <code>fam</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-firebird>17.23. <code>firebird</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-fonts>17.24. <code>fonts</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-fortran>17.25. <code>fortran</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-fuse>17.26. <code>fuse</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gem>17.27. <code>gem</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gettext>17.28. <code>gettext</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gettext-runtime>17.29. <code>gettext-runtime</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gettext-tools>17.30. <code>gettext-tools</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-ghostscript>17.31. <code>ghostscript</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gl>17.32. <code>gl</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gmake>17.33. <code>gmake</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gnome>17.34. <code>gnome</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-go>17.35. <code>go</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gperf>17.36. <code>gperf</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-grantlee>17.37. <code>grantlee</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-groff>17.38. <code>groff</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-gssapi>17.39. <code>gssapi</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-horde>17.40. <code>horde</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-iconv>17.41. <code>iconv</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-imake>17.42. <code>imake</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-kde>17.43. <code>kde</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-kmod>17.44. <code>kmod</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-lha>17.45. <code>lha</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-libarchive>17.46. <code>libarchive</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-libedit>17.47. <code>libedit</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-libtool>17.48. <code>libtool</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-linux>17.49. <code>linux</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-localbase>17.50. <code>localbase</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-lua>17.51. <code>lua</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-lxqt>17.52. <code>lxqt</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-makeinfo>17.53. <code>makeinfo</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-makeself>17.54. <code>makeself</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-mate>17.55. <code>mate</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-meson>17.56. <code>meson</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-metaport>17.57. <code>metaport</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-mysql>17.58. <code>mysql</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-mono>17.59. <code>mono</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-motif>17.60. <code>motif</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-ncurses>17.61. <code>ncurses</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-ninja>17.62. <code>ninja</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-objc>17.63. <code>objc</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-openal>17.64. <code>openal</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-pathfix>17.65. <code>pathfix</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-pear>17.66. <code>pear</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-perl5>17.67. <code>perl5</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-pgsql>17.68. <code>pgsql</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-php>17.69. <code>php</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-pkgconfig>17.70. <code>pkgconfig</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-pure>17.71. <code>pure</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-pyqt>17.72. <code>pyqt</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-python>17.73. <code>python</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-qmail>17.74. <code>qmail</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-qmake>17.75. <code>qmake</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-qt>17.76. <code>qt</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-qt-dist>17.77. <code>qt-dist</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-readline>17.78. <code>readline</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-samba>17.79. <code>samba</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-scons>17.80. <code>scons</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-shared-mime-info>17.81. <code>shared-mime-info</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-shebangfix>17.82. <code>shebangfix</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-sqlite>17.83. <code>sqlite</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-ssl>17.84. <code>ssl</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-tar>17.85. <code>tar</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-tcl>17.86. <code>tcl</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-terminfo>17.87. <code>terminfo</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-tk>17.88. <code>tk</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-uidfix>17.89. <code>uidfix</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-uniquefiles>17.90. <code>uniquefiles</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-varnish>17.91. <code>varnish</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-webplugin>17.92. <code>webplugin</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-xfce>17.93. <code>xfce</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-xorg>17.94. <code>xorg</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-xorg-cat>17.95. <code>xorg-cat</code></a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/uses/#uses-zip>17.96. <code>zip</code></a></li></ul></li><li><input type=checkbox id=chapter-7713ccc63287693c9be6c832b2c1e850 class=toggle>
<label class="icon cursor" for=chapter-7713ccc63287693c9be6c832b2c1e850><a role=button></a></label><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/>Chapter 18. __FreeBSD_version Values</a><ul><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-14>18.1. FreeBSD 14 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-13>18.2. FreeBSD 13 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-12>18.3. FreeBSD 12 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-11>18.4. FreeBSD 11 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-10>18.5. FreeBSD 10 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-9>18.6. FreeBSD 9 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-8>18.7. FreeBSD 8 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-7>18.8. FreeBSD 7 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-6>18.9. FreeBSD 6 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-5>18.10. FreeBSD 5 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-4>18.11. FreeBSD 4 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-3>18.12. FreeBSD 3 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-2.2>18.13. FreeBSD 2.2 Versions</a></li><li><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/versions/#versions-2>18.14. FreeBSD 2 Before 2.2-RELEASE Versions</a></li></ul></li><li></li></ul></nav></div></aside><div class=book><div class=book-menu-mobile><label for=menu-control><span class=menu-control-button><i class="fa fa-list" aria-hidden=true title="Book menu"></i>
Book menu</span></label></div><h1 class=title>Chapter 11. Upgrading a Port</h1><div class="admonitionblock note"><p><i class="fa fa-exclamation-circle" aria-hidden=true></i>
This translation may be out of date. To help with the translations please access the <a href=https://translate-dev.freebsd.org/ target=_blank>FreeBSD translations instance</a>.</p></div><div class=toc-mobile><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#git-diff>11.1. Using Git to Make Patches</a></li><li><a href=#moved-and-updating-files>11.2. UPDATING and MOVED</a></li></ul></nav></div><div class=book-content><div id=preamble><div class=sectionbody><div class=paragraph><p>When a port is not the most recent version available from the authors, update the local working copy of <span class=filename>/usr/ports</span>.
The port might have already been updated to the new version.</p></div><div class=paragraph><p>When working with more than a few ports, it will probably be easier to use Git to keep the whole ports collection up-to-date,
as described in the <a href=https://docs.freebsd.org/en/books/handbook/#ports-using>Handbook</a>.
This will have the added benefit of tracking all the port’s dependencies.</p></div><div class=paragraph><p>The next step is to see if there is an update already pending.
To do this, there are two options.
There is a searchable interface to the <a href=https://bugs.freebsd.org/search/>FreeBSD Problem Report (PR) or bug database</a>.
Select <code>Ports & Packages</code> in the <code>Product</code> multiple select menu, and enter the name of the port in the <code>Summary</code> field.</p></div><div class=paragraph><p>However, sometimes people forget to put the name of the port into the Summary field in an unambiguous fashion.
In that case, try searching in the <code>Comment</code> field in the <code>Detailled Bug Information</code> section, or try the <a href=../keeping-up/#portsmon>FreeBSD Ports Monitoring System</a> (also known as <code>portsmon</code>).
This system attempts to classify port PRs by portname.
To search for PRs about a particular port, use the <a href=http://portsmon.FreeBSD.org/portoverview.py>Overview of One Port</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>The FreeBSD Ports Monitoring System (portsmon) is currently not working due to latest Python updates.</p></div></td></tr></tbody></table></div><div class=paragraph><p>If there is no pending PR, the next step is to send an email to the port’s maintainer, as shown by <code>make maintainer</code>.
That person may already be working on an upgrade, or have a reason to not upgrade the port right now (because of, for example, stability problems of the new version), and there is no need to duplicate their work.
Note that unmaintained ports are listed with a maintainer of <code>ports@FreeBSD.org</code>, which is just the general ports mailing list, so sending mail there probably will not help in this case.</p></div><div class=paragraph><p>If the maintainer asks you to do the upgrade or there is no maintainer, then help out FreeBSD by preparing the update! Please do this by using the <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> command in the base system.</p></div><div class=paragraph><p>To create a suitable <code>diff</code> for a single patch, copy the file that needs patching to <span class=filename>something.orig</span>, save the changes to <span class=filename>something</span> and then create the patch:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% diff <span class=nt>-u</span> something.orig something <span class=o>&gt;</span> something.diff</code></pre></div></div><div class=paragraph><p>Otherwise, either use the <code>git diff</code> method (<a href=#git-diff>Using Git to Make Patches</a>) or copy the contents of the port to an entire different directory and use the result of the recursive <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> output of the new and old ports directories (for example, if the modified port directory is called <span class=filename>superedit</span> and the original is in our tree as <span class=filename>superedit.bak</span>, then save the result of <code>diff -ruN superedit.bak superedit</code>).
Either unified or context diff is fine, but port committers generally prefer unified diffs.
Note the use of the <code>-N</code> option-this is the accepted way to force diff to properly deal with the case of new files being added or old files being deleted.
Before sending us the diff, please examine the output to make sure all the changes make sense.
(In particular, make sure to first clean out the work directories with <code>make clean</code>).</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If some files have been added, copied, moved, or removed, add this information to the problem report so that the committer picking up the patch will know what <a href="https://man.freebsd.org/cgi/man.cgi?query=git&amp;sektion=1&amp;format=html">git(1)</a> commands to run.</p></div></td></tr></tbody></table></div><div class=paragraph><p>To simplify common operations with patch files, use <code>make makepatch</code> as described in <a href=../slow-porting/#slow-patch>Patching</a>.
Other tools exists, like <span class=filename>/usr/ports/Tools/scripts/patchtool.py</span>.
Before using it, please read <span class=filename>/usr/ports/Tools/scripts/README.patchtool</span>.</p></div><div class=paragraph><p>If the port is unmaintained, and you are actively using it, please consider volunteering to become its maintainer.
FreeBSD has over 4000 ports without maintainers, and this is an area where more volunteers are always needed.
(For a detailed description of the responsibilities of maintainers, refer to the section in the <a href=https://docs.freebsd.org/en/books/developers-handbook/#POLICIES-MAINTAINER>Developer’s Handbook</a>.)</p></div><div class=paragraph><p>To submit the diff, use the <a href=https://bugs.freebsd.org/submit/>bug submit form</a> (product <code>Ports & Packages</code>, component <code>Individual Port(s)</code>).
Always include the category with the port name, followed by colon, and brief descripton of the issue.
Examples: <code><em>category/portname</em>: <em>add FOO option</em></code>; <code><em>category/portname</em>: <em>Update to X.Y</em></code>.
Please mention any added or deleted files in the message, as they have to be explicitly specified to <a href="https://man.freebsd.org/cgi/man.cgi?query=git&amp;sektion=1&amp;format=html">git(1)</a> when doing a commit.
Do not compress or encode the diff.</p></div><div class=paragraph><p>Before submitting the bug, review the <a href=https://docs.freebsd.org/zh-tw/articles/problem-reports/#pr-writing>Writing the problem report</a> section in the Problem Reports article.
It contains far more information about how to write useful problem reports.</p></div><div class="admonitionblock important"><table><tbody><tr><td class=icon><i class="fa icon-important" title=Important></i></td><td class=content><div class=paragraph><p>If the upgrade is motivated by security concerns or a serious fault in the currently committed port,
please notify the Ports Management Team &lt;<a href=mailto:portmgr@FreeBSD.org>portmgr@FreeBSD.org</a>> to request immediate rebuilding and redistribution of the port’s package.
Unsuspecting users of <code>pkg</code> will otherwise continue to install the old version via <code>pkg install</code> for several weeks.</p></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Please use <a href="https://man.freebsd.org/cgi/man.cgi?query=diff&amp;sektion=1&amp;format=html">diff(1)</a> or <code>git diff</code> to create updates to existing ports.
Other formats include the whole file and make it impossible to see just what has changed.
When diffs are not included, the entire update might be ignored.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Now that all of that is done, read about how to keep up-to-date in <a href=../keeping-up/#keeping-up>Keeping Up</a>.</p></div></div></div><div class=sect1><h2 id=git-diff>11.1. Using Git to Make Patches<a class=anchor href=#git-diff></a></h2><div class=sectionbody><div class=paragraph><p>When possible, please submit a <a href="https://man.freebsd.org/cgi/man.cgi?query=git&amp;sektion=1&amp;format=html">git(1)</a> patch or diff.
They are easier to handle than diffs between "new and old" directories.
It is easier to see what has changed, and to update the diff if something was modified in the Ports Collection since the work on it began,
or if the committer asks for something to be fixed.
Also, a patch generated with <a href="https://man.freebsd.org/cgi/man.cgi?query=git-format-patch&amp;sektion=1&amp;format=html">git-format-patch(1)</a> or <a href="https://man.freebsd.org/cgi/man.cgi?query=git-diff&amp;sektion=1&amp;format=html">git-diff(1)</a> can be easily applied with <a href="https://man.freebsd.org/cgi/man.cgi?query=git-am&amp;sektion=1&amp;format=html">git-am(1)</a> or <a href="https://man.freebsd.org/cgi/man.cgi?query=git-apply&amp;sektion=1&amp;format=html">git-apply(1)</a> and will save some time for the committer.
Finally, the git patch generated by <a href="https://man.freebsd.org/cgi/man.cgi?query=git-format-patch&amp;sektion=1&amp;format=html">git-format-patch(1)</a> includes your author information and commit messages.
These will be recorded in the log of the repository and this is the recommended way to submit your changes.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git clone https://git.FreeBSD.org/ports.git ~/my_wrkdir  <i class=conum data-value=1></i><b>(1)</b> <i class=conum data-value=2></i><b>(2)</b>
% <span class=nb>cd</span> ~/my_wrkdir</code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td>This can be anywhere, of course. Building ports is not limited to within <span class=filename>/usr/ports/</span>.</td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td><a href=https://git.FreeBSD.org/>git.FreeBSD.org</a> is the FreeBSD public Git server. See <a href=https://docs.freebsd.org/en/books/handbook/mirrors#git-url-table>FreeBSD Git Repository URL Table</a> for more information.</td></tr></tbody></table></div><div class=paragraph><p>While in the port directory, make any changes that are needed.
If adding, moving, or removing a file, use <code>git</code> to track these changes:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git add new_file
% git <span class=nb>mv </span>old_name new_name
% git <span class=nb>rm </span>deleted_file</code></pre></div></div><div class=paragraph><p>Make sure to check the port using the checklist in <a href=../quick-porting/#porting-testing>Testing the Port</a> and <a href=../quick-porting/#porting-portlint>Checking the Port with <code>portlint</code></a>.</p></div><div class=paragraph><p>Before making the patch, fetch the latest repository and rebase the changes on top of it.
Watch and follow the output carefully.
If any of the files failed to rebase, it means that the upstream files changed while you were editing the same file, and the conflicts need to be resolved manually.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git fetch origin main
% git rebase origin/main</code></pre></div></div><div class=paragraph><p>Check the changes staged for the patch:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git status
% git diff <span class=nt>--staged</span></code></pre></div></div><div class=paragraph><p>The last step is to make an unified diff or patch of the changes:</p></div><div class=paragraph><p>To generate an unified diff with <a href="https://man.freebsd.org/cgi/man.cgi?query=git-diff&amp;sektion=1&amp;format=html">git-diff(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git diff <span class=nt>--staged</span> <span class=o>&gt;</span> ../<span class=sb>`</span>make <span class=nt>-VPKGNAME</span><span class=sb>`</span>.diff</code></pre></div></div><div class=paragraph><p>This will generate a diff named like <code>foo-1.2.3.diff</code>.
Where <code>foo</code> is replaced with the first line of the commit message, i.e., the subject of the commit message.</p></div><div class=paragraph><p>To generate a patch with <a href="https://man.freebsd.org/cgi/man.cgi?query=git-format-patch&amp;sektion=1&amp;format=html">git-format-patch(1)</a>:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git checkout <span class=nt>-b</span> my_branch
% git commit
% git format-patch main</code></pre></div></div><div class=paragraph><p>This will generate a patch named like <code>0001-foo.patch</code>.</p></div><div class=paragraph><p>After patch has been created, you can switch to the main branch for starting other developments.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git checkout main</code></pre></div></div><div class=paragraph><p>Once the patch is accepted and merged, you can delete the local development branch if you want:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% git branch <span class=nt>-D</span> my_branch</code></pre></div></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>If files have been added, moved, or removed, include the <a href="https://man.freebsd.org/cgi/man.cgi?query=git&amp;sektion=1&amp;format=html">git(1)</a> <code>add</code>, <code>mv</code>, and <code>rm</code> commands that were used.
<code>git mv</code> must be run before the patch can be applied.
<code>git add</code> or <code>git rm</code> must be run after the patch is applied.</p></div></td></tr></tbody></table></div><div class=paragraph><p>Send the patch following the <a href=https://docs.freebsd.org/zh-tw/articles/problem-reports/#pr-writing>problem report submission guidelines</a>.</p></div></div></div><div class=sect1><h2 id=moved-and-updating-files>11.2. UPDATING and MOVED<a class=anchor href=#moved-and-updating-files></a></h2><div class=sectionbody><div class=sect2><h3 id=moved-and-updating-updating>11.2.1. /usr/ports/UPDATING<a class=anchor href=#moved-and-updating-updating></a></h3><div class=paragraph><p>If upgrading the port requires special steps like changing configuration files or running a specific program, it must be documented in this file.
The format of an entry in this file is:</p></div><div class="literalblock programlisting"><div class=content><pre>YYYYMMDD:
  AFFECTS: users of portcategory/portname
  AUTHOR: Your name &lt;Your email address&gt;

  Special instructions</pre></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><div class=paragraph><p>When including exact portmaster, portupgrade, and/or pkg instructions, please make sure to get the shell escaping right.
For example, do <em>not</em> use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg delete -g -f docbook-xml* docbook-sk* docbook[2345]??-* docbook-4*</span></code></pre></div></div><div class=paragraph><p>As shown, the command will only work with bourne shells.
Instead, use the form shown below, which will work with both bourne shell and c-shell:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell><span class=c># pkg delete -g -f docbook-xml\* docbook-sk\* docbook\[2345\]\?\?-\* docbook-4\*</span></code></pre></div></div></td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>It is recommended that the AFFECTS line contains a glob matching all the ports affected by the entry so that automated tools can parse it as easily as possible.
If an update concerns all the existing BIND 9 versions the <code>AFFECTS</code> content must be <code>users of dns/bind9*</code>, it must <em>not</em> be <code>users of BIND 9</code></p></div></td></tr></tbody></table></div></div><div class=sect2><h3 id=moved-and-updating-moved>11.2.2. /usr/ports/MOVED<a class=anchor href=#moved-and-updating-moved></a></h3><div class=paragraph><p>This file is used to list moved or removed ports.
Each line in the file is made up of the name of the port, where the port was moved, when, and why.
If the port was removed, the section detailing where it was moved can be left blank.
Each section must be separated by the <code>|</code> (pipe) character, like so:</p></div><div class="literalblock programlisting"><div class=content><pre>old name|new name (blank for deleted)|date of move|reason</pre></div></div><div class=paragraph><p>The date must be entered in the form <code>YYYY-MM-DD</code>.
New entries are added to the end of the list to keep it in chronological order, with the oldest entry at the top of the list.</p></div><div class=paragraph><p>If a port was removed but has since been restored, delete the line in this file that states that it was removed.</p></div><div class=paragraph><p>If a port was renamed and then renamed back to its original name, add a new one with the intermediate name to the old name, and remove the old entry as to not create a loop.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content><div class=paragraph><p>Any changes must be validated with <code>Tools/scripts/MOVEDlint.awk</code>.</p></div><div class=paragraph><p>If using a ports directory other than <span class=filename>/usr/ports</span>, use:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=shell>% <span class=nb>cd</span> /home/user/ports
% <span class=nb>env </span><span class=nv>PORTSDIR</span><span class=o>=</span><span class=nv>$PWD</span> Tools/scripts/MOVEDlint.awk</code></pre></div></div></td></tr></tbody></table></div></div></div></div></div><hr><div class=last-modified><p><strong>最後修改於</strong>: March 9, 2024 由 <a href="https://cgit.freebsd.org/doc/commit/?id=6199af92e7" target=_blank>Danilo G. Baio</a></p></div><div class=buttons><div class=prev><i class="fa fa-angle-left" aria-hidden=true title=Prev></i><div class=container><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/testing class=direction>Prev</a></div></div><div class=home><i class="fa fa-home" aria-hidden=true title=Home></i><div class=container><a href=../ class=direction>Home</a></div></div><div class=next><div class=container><a href=http://172.16.201.134:1313/zh-tw/books/porters-handbook/security class=direction>Next</a></div><i class="fa fa-angle-right" aria-hidden=true title=Next></i></div></div><label class="hidden book-menu-overlay" for=menu-control></label></div><aside class=toc><div class=toc-content><h3>目錄</h3><nav id=TableOfContents><ul><li><a href=#git-diff>11.1. Using Git to Make Patches</a></li><li><a href=#moved-and-updating-files>11.2. UPDATING and MOVED</a></li></ul></nav><hr><div class=resources><h3>資源</h3><ul class=contents><li><i class="fa fa-file-pdf-o" aria-hidden=true title="下載 PDF"></i><a href=https://download.freebsd.org/doc/zh-tw/books/porters-handbook/porters-handbook_zh-tw.pdf>下載 PDF</a></li><li><i class="fa fa-pencil-square-o" aria-hidden=true title=編輯此頁></i><a href=https://github.com/freebsd/freebsd-doc/blob/main/documentation/content/zh-tw/_index target=_blank>編輯此頁</a></li></ul></div></div></aside><a class=to-top href=#top><i class="fa fa-arrow-circle-up" aria-hidden=true></i></a></main><footer><div class=footer-container><section class=logo-column><img src=http://172.16.201.134:1313/images/FreeBSD-colors.svg width=160 height=50 alt="FreeBSD logo"><div class=options-container><div class=language-container><a id=languages href=http://172.16.201.134:1313/zh-tw/languages><img src=http://172.16.201.134:1313/images/language.png class=language-image alt=選擇語言>
<span>繁體中文</span></a></div><div class=theme-container><select id=theme-chooser><option value=theme-system>System</option><option value=theme-light>淺色</option><option value=theme-dark>深色</option><option value=theme-high-contrast>高對比</option></select></div></div></section><section class=about-column><h3 class=column-title>About</h3><ul class=column-elements-container><li><a href=https://www.freebsd.org/about/ target=_blank class=column-element>FreeBSD</a></li><li><a href=https://freebsdfoundation.org/ target=_blank class=column-element>FreeBSD Foundation</a></li><li><a href=https://www.freebsd.org/where/ target=_blank class=column-element>Get FreeBSD</a></li><li><a href=https://www.freebsd.org/internal/code-of-conduct target=_blank class=column-element>Code of Conduct</a></li><li><a href=https://www.freebsd.org/security/ target=_blank class=column-element>Security Advisories</a></li></ul></section><section class=documentation-column><h3 class=column-title>Documentation</h3><ul class=column-elements-container><li><a href=/zh-tw class=column-element>Documentation portal</a></li><li><a href=https://man.FreeBSD.org target=_blank class=column-element>Manual pages</a></li><li><a href=https://papers.FreeBSD.org target=_blank class=column-element>Presentations and papers</a></li><li><a href=https://docs-archive.freebsd.org/doc/ target=_blank class=column-element>Previous versions</a></li><li><a href=https://docs-archive.freebsd.org/44doc/ target=_blank class=column-element>4.4BSD Documents</a></li><li><a href=https://wiki.freebsd.org/ target=_blank class=column-element>Wiki</a></li></ul></section><section class=community-column><h3 class=column-title>Community</h3><ul class=column-elements-container><li><a href=http://172.16.201.134:1313/zh-tw/articles/contributing class=column-element>Get involved</a></li><li><a href=https://forums.freebsd.org/ target=_blank class=column-element>Community forum</a></li><li><a href=https://lists.freebsd.org/ target=_blank class=column-element>Mailing lists</a></li><li><a href=https://wiki.freebsd.org/IRC/Channels target=_blank class=column-element>IRC Channels</a></li><li><a href=https://bugs.freebsd.org/bugzilla/ target=_blank class=column-element>Bug Tracker</a></li></ul></section><section class=legal-column><h3 class=column-title>Legal</h3><ul class=column-elements-container><li><a href=https://freebsdfoundation.org/donate/ target=_blank class=column-element>Donations</a></li><li><a href=https://www.freebsd.org/copyright/freebsd-license/ target=_blank class=column-element>Licensing</a></li><li><a href=https://www.freebsd.org/privacy/ target=_blank class=column-element>Privacy Policy</a></li><li><a href=https://www.freebsd.org/copyright/ target=_blank class=column-element>Legal notices</a></li></ul></section><section class=copyright-column><p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p><span>Made with <span class=heart>♥</span> by the FreeBSD Community</span></section></div></footer></body></html>